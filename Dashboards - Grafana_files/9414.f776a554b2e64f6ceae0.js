(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9414],{29:(ne,A,e)=>{"use strict";e.d(A,{D:()=>i});var n=e(74848),a=e(96540),s=e(7389),l=e(92745),r=e(37386),c=e(77824);function i({onChange:o,hide:h,type:f}){const g=(0,a.useMemo)(()=>[{label:(0,l.t)("dashboard-scene.variable-hide-select.hide_options.label.nothing","Nothing"),value:s.zL.dontHide},{label:(0,l.t)("dashboard-scene.variable-hide-select.hide_options.label.variable","Variable"),value:s.zL.hideVariable},{label:(0,l.t)("dashboard-scene.variable-hide-select.hide_options.label.label","Label"),value:s.zL.hideLabel}],[]),u=(0,a.useMemo)(()=>g.find(E=>E.value===h)?.value??g[0].value,[h,g]);return f==="constant"?null:(0,n.jsx)(r.D,{label:(0,l.t)("dashboard-scene.variable-hide-select.label","Hide"),children:(0,n.jsx)(c.z,{options:g,onChange:o,value:u})})}},54:(ne,A,e)=>{"use strict";e.d(A,{C0:()=>v,HL:()=>c,Q9:()=>p,VQ:()=>i,Wd:()=>E,jy:()=>g,lV:()=>u,nU:()=>o,q0:()=>m});var n=e(65642),a=e(15130),s=e(11257),l=e(52161);function r(y){return(0,l.z2)(y)?"grafana":"external"}const c={read:{grafana:s.w.AlertingInstanceRead,external:s.w.AlertingInstancesExternalRead},create:{grafana:s.w.AlertingInstanceCreate,external:s.w.AlertingInstancesExternalWrite},update:{grafana:s.w.AlertingInstanceUpdate,external:s.w.AlertingInstancesExternalWrite},delete:{grafana:s.w.AlertingInstanceUpdate,external:s.w.AlertingInstancesExternalWrite}},i={read:{grafana:s.w.AlertingNotificationsRead,external:s.w.AlertingNotificationsExternalRead},create:{grafana:s.w.AlertingNotificationsWrite,external:s.w.AlertingNotificationsExternalWrite},update:{grafana:s.w.AlertingNotificationsWrite,external:s.w.AlertingNotificationsExternalWrite},delete:{grafana:s.w.AlertingNotificationsWrite,external:s.w.AlertingNotificationsExternalWrite}},o={read:{grafana:s.w.AlertingSilenceRead,external:s.w.AlertingInstanceRead},create:{grafana:s.w.AlertingSilenceCreate,external:s.w.AlertingInstancesExternalWrite},update:{grafana:s.w.AlertingSilenceUpdate,external:s.w.AlertingInstancesExternalWrite}},h={read:s.w.AlertingProvisioningRead,readSecrets:s.w.AlertingProvisioningReadSecrets,write:s.w.AlertingProvisioningWrite},f={read:{grafana:s.w.AlertingRuleRead,external:s.w.AlertingRuleExternalRead},create:{grafana:s.w.AlertingRuleCreate,external:s.w.AlertingRuleExternalWrite},update:{grafana:s.w.AlertingRuleUpdate,external:s.w.AlertingRuleExternalWrite},delete:{grafana:s.w.AlertingRuleDelete,external:s.w.AlertingRuleExternalWrite}};function g(y){const d=r(y);return{read:c.read[d],create:c.create[d],update:c.update[d],delete:c.delete[d]}}function u(y){const d=r(y);return{read:i.read[d],create:i.create[d],update:i.update[d],delete:i.delete[d],provisioning:h}}function E(y){const d=r(y);return{read:f.read[d],create:f.create[d],update:f.update[d],delete:f.delete[d]}}function v(y){return()=>a.TP.evaluatePermission(y)}function p(){return{canCreateGrafanaRules:a.TP.hasPermission(s.w.FoldersRead)&&a.TP.hasPermission(f.create.grafana),canCreateCloudRules:a.TP.hasPermission(s.w.DataSourcesRead)&&a.TP.hasPermission(f.create.external),canEditRules:y=>a.TP.hasPermission(E(y).update)}}function m(){const{unifiedAlertingEnabled:y}=(0,n.zj)(),d=a.TP.hasPermission(E(l.hY).read),x=a.TP.hasPermission(E(l.hY).update);return y&&d&&x}},87:(ne,A,e)=>{"use strict";e.d(A,{R:()=>c});var n=e(74848),a=e(96540),s=e(35427),l=e(64400),r=e(71479);const c=(0,a.memo)(({seriesName:i,color:o,gradient:h,readonly:f,lineStyle:g})=>{const{onSeriesColorChange:u}=(0,l.d2)(),E=(0,a.useCallback)(v=>u(i,v),[i,u]);return i&&u&&o&&!f?(0,n.jsx)(s.Dp,{color:o,onChange:E,enableNamedColors:!0,children:({ref:v,showColorPicker:p,hideColorPicker:m})=>(0,n.jsx)(r.p,{color:o,className:"pointer",ref:v,onClick:p,onMouseLeave:m,lineStyle:g})}):(0,n.jsx)(r.p,{color:o,gradient:h,lineStyle:g})});c.displayName="VizLegendSeriesIcon"},182:(ne,A,e)=>{"use strict";e.d(A,{BO:()=>o,Wx:()=>i,ZP:()=>c,k7:()=>l,qf:()=>r});var n=e(43173),a=e(2869),s=e(15629);function l(){return Object.values(n.$.datasources)}function r(h){if(!(0,s.TN)(n.$.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const f=(0,s.P8)(n.$.unifiedAlerting.minInterval);if(!h||!(0,s.TN)(h))return{globalLimit:f,exceedsLimit:!1};const g=(0,s.P8)(h),u=f>g&&g>0;return{globalLimit:f,exceedsLimit:u}}function c(){return a.W.Irm in n.$.apps}function i(){return c()?a.W.Irm:a.W.Incident}function o(){return c()?a.W.Irm:a.W.OnCall}},302:(ne,A,e)=>{"use strict";e.d(A,{CH:()=>r,E7:()=>l});var n=e(1682),a=e(82345);const s=c=>{const i=c.field.links;if(!(!i||i.length===0))return{getLinks:o=>{const h={};if(c.view){const{dataFrame:g}=c.view;h.__series={value:{name:g.name,refId:g.refId},text:t("panel.get-field-links-supplier.text.series","Series")};const u=c.colIndex!==void 0?g.fields[c.colIndex]:void 0;if(u){if(h.__field={value:{name:u.name,labels:u.labels},text:t("panel.get-field-links-supplier.text.field","Field")},c.rowIndex!==void 0&&c.rowIndex>=0){const{timeField:E}=getTimeField(g);h.__value={value:{raw:u.values[c.rowIndex],numeric:c.display.numeric,text:formattedValueToString(c.display),time:E?E.values[c.rowIndex]:void 0},text:t("panel.get-field-links-supplier.text.value","Value")}}c.view&&(h.__data={value:{name:g.name,refId:g.refId,fields:getFieldDisplayValuesProxy({frame:g,rowIndex:c.rowIndex})},text:t("panel.get-field-links-supplier.text.data","Data")})}else h.__value={value:{raw:c.display.numeric,numeric:c.display.numeric,text:formattedValueToString(c.display),calc:c.name},text:t("panel.get-field-links-supplier.text.value","Value")}}else console.log("VALUE",c);const f=(g,u,E)=>{const v={...h,...u};return o(g,v,E)};return i.map(g=>getLinkSrv().getDataLinkUIModel(g,f,c))}}},l=(c,i)=>{const o=c.links;if(!(!o||o.length===0))return{getLinks:()=>o.map(h=>(0,a.mQ)().getDataLinkUIModel(h,i||c.replaceVariables,c))}},r=(c,i)=>{const o=n.b4.getPanelLinks(c)?.state.rawLinks;if(!(!o||o.length===0))return{getLinks:()=>o.map(h=>(0,a.mQ)().getDataLinkUIModel(h,i,c))}}},359:(ne,A,e)=>{"use strict";e.d(A,{D:()=>l,R:()=>r});var n=e(57866),a=e(49297),s=e(64761);const l={id:s.F.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(c,i)=>o=>o.pipe(a.z.operator({include:r(c.include,c.byVariable),exclude:r(c.exclude,c.byVariable)},i))},r=(c,i)=>{if(!c)return;const{names:o,pattern:h,variable:f}=c;if(i&&f){const g=f;if(/^\{.*\}$/.test(g)){const u=g.slice(1).slice(0,-1).split(",");return{id:n.Ct.byNames,options:{names:u}}}return{id:n.Ct.byNames,options:{names:g.split(",")}}}if(!((!Array.isArray(o)||o.length===0)&&!h))return h?!Array.isArray(o)||o.length===0?{id:n.Ct.byRegexp,options:h}:{id:n.Ct.byRegexpOrNames,options:c}:{id:n.Ct.byNames,options:{names:o}}}},406:(ne,A,e)=>{"use strict";e.d(A,{Xv:()=>v,ks:()=>m,s7:()=>h,zM:()=>i});var n=e(81160),a=e(44922),s=e(95004),l=e(36638),r=e(57866),c=e(64761);const i={id:c.F.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type.",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0,timezone:void 0}]},operator:(d,x)=>b=>b.pipe((0,n.T)(D=>i.transformer(d,x)(D))),transformer:d=>x=>!Array.isArray(x)||x.length===0?x:o(d,x)??[]};function o(d,x){if(!d.conversions.length)return x;const b=x.map(D=>({...D}));for(const D of d.conversions){if(!D.targetField)continue;const C=l.sJ.get(r.Ct.byName).get(D.targetField);for(const P of b)P.fields=P.fields.map(T=>C(T,P,b)?h(T,D):T)}return b}function h(d,x){switch(x.destinationType){case s.PU.time:return m(d,x.dateFormat);case s.PU.number:return u(d);case s.PU.string:return v(d,x.dateFormat,{timeZone:x.timezone},x.joinWith);case s.PU.boolean:return E(d);case s.PU.enum:return y(d,x.enumConfig);case s.PU.other:return p(d);default:return d}}const f=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function g(d,x){let b=x?{format:x}:void 0;const D=d.values.slice();let C=D.find(O=>O!=null);const P=typeof C=="number"&&x==="X",T=typeof C=="string"&&f.test(C);for(let O=0;O<D.length;O++)if(D[O]){let S=T?Date.parse(D[O]):(0,a.b)(D[O],b).valueOf();Number.isFinite(S)?D[O]=P?S*1e3:S:D[O]=null}else D[O]=null;return{...d,type:s.PU.time,values:D}}function u(d){const x=d.values.slice(),b=x.some(D=>typeof D=="string");for(let D=0;D<x.length;D++){let C=x[D];b&&C!=null&&typeof C=="string"&&(C=C.replace(/,/g,""));const P=+C;x[D]=Number.isFinite(P)?P:null}return{...d,type:s.PU.number,values:x}}function E(d){const x=d.values.slice();for(let b=0;b<x.length;b++)x[b]=!!x[b];return{...d,type:s.PU.boolean,values:x}}function v(d,x,b,D){let C=d.values;switch(d.type){case s.PU.time:C=C.map(P=>(0,a.b)(P,b).format(x));break;case s.PU.string:case s.PU.other:C=C.map(P=>D?.length&&Array.isArray(P)?P.join(D):JSON.stringify(P));break;default:C=C.map(P=>`${P}`)}return{...d,type:s.PU.string,values:C}}function p(d){const x=d.values.slice();for(let b=0;b<x.length;b++)try{x[b]=JSON.parse(x[b])}catch{x[b]=null}return{...d,type:s.PU.other,values:x}}function m(d,x){const b=typeof d.values[0]=="number",D=x==="X";return d.type===s.PU.time&&b?d:b&&!D?{...d,type:s.PU.time}:g(d,x)}function y(d,x){const b={...x},D=d.values.slice(),C=new Map;if(b.text&&b.text.length>0)for(let P=0;P<b.text.length;P++)C.set(b.text[P],P);else return d;for(let P=0;P<D.length;P++){const T=D[P];D[P]=C.get(T)}return{...d,config:{...d.config,type:{enum:b}},type:s.PU.enum,values:D}}},428:(ne,A,e)=>{"use strict";e.d(A,{j:()=>n});function n(a,s){const l=/\{\{\s*(.+?)\s*\}\}/g;return a.replace(l,(r,c)=>s[c]?s[c]:c)}},707:(ne,A,e)=>{"use strict";e.d(A,{YR:()=>v,wh:()=>E});var n=e(65307),a=e(27489),s=e(90811),l=e(62635),r=e(6219),c=e(52763),i=e(10951),o=e(51845),h=e(19050),f=e(94543),g=e(83953);const u=(0,n.VP)("explore/updateDatasourceInstance"),E=(0,c.zD)("explore/changeDatasource",async({datasource:p,exploreId:m,options:y},{getState:d,dispatch:x})=>{const b=d().user.orgId,{history:D,instance:C}=await(0,g.BE)(b,p),P=d().explore.panes[m].datasourceInstance;(0,a.rR)("explore_change_ds",{from:(P?.meta?.mixed?"mixed":P?.type)||"unknown",to:C.meta.mixed?"mixed":C.type,exploreId:m}),x(u({exploreId:m,datasourceInstance:C,history:D}));const T=d().explore.panes[m].queries,O=(0,g.dq)(C.uid,T),S=await(0,r.J6)(O);x((0,o.Fb)({exploreId:m,correlations:S.correlations||[]})),y?.importQueries&&await x((0,h.y2)(m,T,P,C)),d().explore.panes[m].isLive&&x((0,f.hO)({exploreId:m,refreshInterval:s.cC.offOption.value})),y?.importQueries&&x((0,h.Od)({exploreId:m}))}),v=(p,m)=>{if(u.match(m)){const{datasourceInstance:y,history:d}=m.payload;return(0,l._u)(p.querySubscription),{...p,datasourceInstance:y,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,i.Ez)(),queryResponse:(0,g.RA)(),queryKeys:[],history:d}}return p}},873:(ne,A,e)=>{"use strict";e.d(A,{A:()=>s});var n=e(2543),a=e.n(n);class s{constructor(i){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",i){if(i.columns)for(const o of i.columns)this.addColumn(o);if(i.rows)for(const o of i.rows)this.addRow(o)}}sort(i){i.col===null||i.col===void 0||this.columns.length<=i.col||(this.rows.sort((o,h)=>(o=o[i.col],h=h[i.col],+(o==null)-+(h==null)||+(o>h)||-(o<h))),i.desc&&this.rows.reverse(),this.columns[i.col].sort=!0,this.columns[i.col].desc=i.desc)}addColumn(i){this.columnMap[i.text]||(this.columns.push(i),this.columnMap[i.text]=i)}addRow(i){this.rows.push(i)}}function l(c,i,o){let h=!1;for(let f=0;f<c.length;f++)if(i[f]!==void 0&&o[f]!==void 0){if(i[f]!==o[f])return!1}else(i[f]===void 0||o[f]===void 0)&&(h=!0);return h}function r(c,...i){const o=c||new s;if(arguments.length===1)return o;if(arguments.length===2)return o.columns=i[0].hasOwnProperty("columns")?[...i[0].columns]:[],o.rows=i[0].hasOwnProperty("rows")?[...i[0].rows]:[],o;const h=i.filter(m=>!!m.columns),f={},g=h.slice().reduce((m,y)=>(y.columns.forEach(d=>{const{text:x}=d;f[x]===void 0&&(f[x]=m.length,m.push(d))}),m),[]),u=h.map(m=>m.columns.map(y=>f[y.text])),E=h.reduce((m,y,d)=>{const x=u[d];return y.rows.forEach(b=>{const D=[];x.forEach((C,P)=>{D[C]=b[P]}),m.push(D)}),m},[]),v={},p=E.reduce((m,y,d)=>{if(!v[d]){let x=d+1;for(;x<E.length;){const b=findIndex(E,D=>l(g,y,D),x);if(b>-1){const D=E[b];for(let C=0;C<g.length;C++)y[C]===void 0&&D[C]!==void 0&&(y[C]=D[C]);v[b]=D,x=b+1}else break}m.push(y)}return m},[]);return o.columns=g,o.rows=p,o}},882:(ne,A,e)=>{"use strict";e.d(A,{b:()=>r});var n=e(81160),a=e(41119),s=e(64761),l=e(6684);const r={id:s.F.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(i,o)=>h=>h.pipe((0,n.T)(f=>r.transformer(i,o)(f))),transformer:(i,o)=>h=>{const f=c(h);return h.length>1&&f?l.L.transformer({byField:f},o)(h):h}};function c(i){let o;for(const h of i){const{timeField:f}=(0,a.KR)(h);if(!f)return;if(!o)o=f.name;else if(o!==f.name)return}return o}},991:(ne,A,e)=>{"use strict";e.d(A,{y:()=>r});var n=e(74848),a=e(1906),s=e(92745),l=e(99887);const r=({featureState:i,tooltip:o})=>{const h=c(i);return(0,n.jsx)(l.E,{text:h.text,color:h.color,icon:h.icon,tooltip:o})};function c(i){switch(i){case a.Ay.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"};case a.Ay.beta:return{text:"Beta",icon:"rocket",color:"blue"};case a.Ay.experimental:return{text:(0,s.t)("grafana-ui.feature-badge.experimental","Experimental"),icon:"exclamation-triangle",color:"orange"};case a.Ay.preview:return{text:(0,s.t)("grafana-ui.feature-badge.preview","Preview"),icon:"rocket",color:"blue"};case a.Ay.privatePreview:return{text:(0,s.t)("grafana-ui.feature-badge.private-preview","Private preview"),icon:"rocket",color:"blue"};case a.Ay.new:return{text:(0,s.t)("grafana-ui.feature-badge.new","New!"),icon:"rocket",color:"blue"}}}},1027:(ne,A,e)=>{"use strict";e.d(A,{W:()=>a});var n=e(64761);const a={id:n.F.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:s=>l=>l,transformer:s=>l=>l}},1096:(ne,A,e)=>{"use strict";e.d(A,{s:()=>f});var n=e(74848),a=e(22803),s=e(51898),l=e(92745),r=e(63142),c=e(69076),i=e(32442),o=e(68577),h=e(49602);function f({intervals:u,onIntervalsChange:E,onAutoEnabledChange:v,onAutoMinIntervalChanged:p,onAutoCountChanged:m,autoEnabled:y,autoMinInterval:d,autoStepCount:x,inline:b=!1}){const D=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(T=>({label:`${T}`,value:T})),C=(0,r.of)(g),P=D.find(T=>T.value===x)??D[0];return(0,n.jsxs)(n.Fragment,{children:[!b&&(0,n.jsx)(i.Y,{children:(0,n.jsx)(l.x6,{i18nKey:"dashboard-scene.interval-variable-form.interval-options",children:"Interval options"})}),(0,n.jsx)(h._,{defaultValue:u,name:(0,l.t)("dashboard-scene.interval-variable-form.name-values","Values"),placeholder:"1m,10m,1h,6h,1d,7d",onBlur:E,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),(0,n.jsx)(c.c,{value:y,name:(0,l.t)("dashboard-scene.interval-variable-form.name-auto-option","Auto option"),description:(0,l.t)("dashboard-scene.interval-variable-form.description-auto-option","Dynamically calculates interval by dividing time range by the count specified"),onChange:v,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.autoEnabledCheckbox}),y&&(0,n.jsxs)("div",{className:C.autoFields,children:[(0,n.jsx)(o.v,{name:(0,l.t)("dashboard-scene.interval-variable-form.name-step-count","Step count"),description:(0,l.t)("dashboard-scene.interval-variable-form.description-step-count","How many times the current time range should be divided to calculate the value"),value:P,options:D,onChange:m,width:9,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.stepCountIntervalSelect}),(0,n.jsx)(h._,{value:d,name:(0,l.t)("dashboard-scene.interval-variable-form.name-min-interval","Min interval"),description:(0,l.t)("dashboard-scene.interval-variable-form.description-calculated-value-below-threshold","The calculated value will not go below this threshold"),placeholder:"10s",onChange:p,width:11,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.minIntervalInput})]})]})}const g=u=>({autoFields:(0,a.css)({marginTop:u.spacing(2),display:"flex",flexDirection:"column"})})},1131:(ne,A,e)=>{"use strict";e.d(A,{D:()=>U});var n=e(74848),a=e(22803),s=e(92745),l=e(43173),r=e(45863),c=e(63142),i=e(95943),o=e(84403),h=e(33143),f=e(17340),g=e(3371),u=e(1682),E=e(8285),v=e(96691),p=e(25953),m=e(6607),y=e(48492),d=e(1837),x=e(20246),b=e(93389),D=e(87308);const C=8,P=6,T=12,O=8;function S(L){const N=new Set;let W=0;function R(G){for(let w=0;w<G.state.width;w++)for(let _=0;_<G.state.height;_++){const Q=`${G.state.x+w},${G.state.y+_}`;N.add(Q),G.state.y+G.state.height>W&&(W=G.state.y+G.state.height)}}for(const G of L.state.children)if(R(G),G instanceof r.tI)for(const w of G.state.children)R(w);for(let G=0;G<1/0;G++){for(let w=0;w<=i.cV-C;w++){let _=!0;for(let Q=0;Q<C;Q++){for(let ae=0;ae<P;ae++){const q=`${w+Q},${G+ae}`;if(N.has(q)){_=!1;break}}if(!_)break}if(_)return B(N,{x:w,y:G,width:C,height:P},W)}if(G>W+P)break}return{x:0,y:W,width:T,height:O}}function B(L,N,W){if(N.y>=W)return N.width=T,N.height=O,N;for(let R=N.x+N.width+1;R<=i.cV;R++){let G=!0;for(let w=N.y;w<N.y+N.height;w++){const _=`${R},${w}`;if(L.has(_)){G=!1;break}}if(G)N.width=R-N.x;else break}for(let R=N.y+N.height+1;R<=W;R++){let G=!0;if(N.height>=20)break;for(let w=N.x;w<N.x+N.width;w++){const _=`${w},${R}`;if(L.has(_)){G=!1;break}}if(G)N.height=R-N.y;else break}return N}var K=e(18178);class U extends r.Bs{constructor(N){super(N),this.isDashboardLayoutManager=!0,this.descriptor=U.descriptor,this.addActivationHandler(()=>this._activationHandler())}static{this.Component=F}static{this.descriptor={get name(){return(0,s.t)("dashboard.default-layout.name","Custom")},get description(){return(0,s.t)("dashboard.default-layout.description","Position and size each panel individually")},id:"GridLayout",createFromLayout:U.createFromLayout,isGridLayout:!0,icon:"window-grid"}}serialize(){return(0,f.SW)(this)}_activationHandler(){l.$.featureToggles.dashboardNewLayouts&&this._subs.add(this.subscribeToEvent(r.V$,({payload:{evt:N,panel:W}})=>(0,E.wP)(this)?.startDraggingSync(N,W))),this._subs.add(this.state.grid.subscribeToState(({children:N},{children:W})=>{N.length===W.length&&this.publishEvent(new h.su(this.state.grid),!0)}))}addPanel(N){const W=u.b4.getNextPanelId(this);if(N.setState({key:(0,E.XA)(W)}),N.clearParent(),l.$.featureToggles.dashboardNewLayouts){const R=S(this.state.grid),G=new b.U({...R,body:N,key:(0,E.ty)(W)});h.cc.addElement({addedObject:N,source:this,perform:()=>{this.state.grid.setState({children:[...this.state.grid.state.children,G]})},undo:()=>{this.state.grid.setState({children:this.state.grid.state.children.filter(w=>w!==G)})}})}else{const R=new b.U({height:E.sw,width:E.vm,x:0,y:0,body:N,key:(0,E.ty)(W)});this.state.grid.setState({children:[R,...this.state.grid.state.children]})}}pastePanel(){const N=S(this.state.grid),W=(0,y.qY)((0,E.YQ)(this),N);l.$.featureToggles.dashboardNewLayouts?h.cc.edit({description:(0,s.t)("dashboard.edit-actions.paste-panel","Paste panel"),addedObject:W.state.body,source:this,perform:()=>{this.state.grid.setState({children:[...this.state.grid.state.children,W]})},undo:()=>{this.state.grid.setState({children:this.state.grid.state.children.filter(R=>R!==W)})}}):this.state.grid.setState({children:[...this.state.grid.state.children,W]}),(0,y.G2)()}removePanel(N){const W=N.parent;if(!(W instanceof b.U))throw new Error("Trying to remove panel that is not inside a DashboardGridItem");const R=this.state.grid;let G;try{G=r.jh.getAncestor(W,r.tI)}catch{G=void 0}if(G){G.setState({children:G.state.children.filter(w=>w!==W)}),R.forceRender();return}if(!l.$.featureToggles.dashboardNewLayouts){R.setState({children:R.state.children.filter(w=>w!==W)});return}h.cc.removeElement({removedObject:W.state.body,source:this,perform:()=>R.setState({children:R.state.children.filter(w=>w!==W)}),undo:()=>R.setState({children:[...R.state.children,W]})})}duplicatePanel(N){const W=N.parent;if(!(W instanceof b.U)){console.error("Trying to duplicate a panel that is not inside a DashboardGridItem");return}let R,G,w;const _=u.b4.getNextPanelId(this),Q=this.state.grid;W instanceof b.U?(R=r.Go.cloneSceneObjectState(W.state.body.state),G=r.jh.getData(W.state.body).clone()):(R=r.Go.cloneSceneObjectState(N.state),G=r.jh.getData(N).clone()),delete G.state.data?.alertState;const ae=new r.Eb({...R,$data:G,key:(0,E.XA)(_)});if(w=new b.U({x:W.state.x,y:W.state.y,height:W.state.height,itemHeight:W.state.height,width:W.state.width,variableName:W.state.variableName,repeatDirection:W.state.repeatDirection,maxPerRow:W.state.maxPerRow,key:(0,E.ty)(_),body:ae}),!l.$.featureToggles.dashboardNewLayouts){if(W.parent instanceof r.tI){const k=W.parent;k.setState({children:[...k.state.children,w]}),Q.forceRender();return}Q.setState({children:[...Q.state.children,w]}),this.publishEvent(new h.jO(ae),!0);return}const q=W.parent instanceof r.tI?W.parent:Q;h.cc.edit({description:(0,s.t)("dashboard.edit-actions.duplicate-panel","Duplicate panel"),addedObject:w.state.body,source:this,perform:()=>{const k=q.state.children.indexOf(W),ee=[...q.state.children];ee.splice(k+1,0,w),q.setState({children:ee})},undo:()=>{q.setState({children:q.state.children.filter(k=>k!==w)})}})}duplicate(){const N=this.state.grid.state.children,W=N.find(w=>w instanceof b.U),R=[];if(N.length){let w=W?u.b4.getNextPanelId(W.state.body):1;N.forEach(_=>{if(_ instanceof b.U){const Q=_.clone({key:void 0,body:_.state.body.clone({key:(0,E.XA)(w)})});R.push(Q),w++}else R.push(_.clone({key:void 0}))})}return this.clone({key:void 0,grid:this.state.grid.clone({key:void 0,children:R})})}getVizPanels(){const N=[];return this.state.grid.forEachChild(W=>{if(!(W instanceof b.U)&&!(W instanceof r.tI))throw new Error("Child is not a DashboardGridItem or SceneGridRow, invalid scene");W instanceof b.U&&W.state.body instanceof r.Eb?N.push(W.state.body):W instanceof r.tI&&W.forEachChild(R=>{R instanceof b.U&&R.state.body instanceof r.Eb&&N.push(R.state.body)})}),N}addNewRow(){const N=u.b4.getNextPanelId(this),W=new r.tI({key:(0,E.XA)(N),title:(0,s.t)("dashboard-scene.default-grid-layout-manager.row.title.row-title","Row title"),actions:new K.u({}),y:0}),R=this.state.grid,G=R.state.children.findIndex(_=>_ instanceof r.tI),w=R.state.children.splice(0,G===-1?R.state.children.length:G).map(_=>_.clone());return w&&W.setState({children:w}),R.setState({children:[W,...R.state.children]}),this.publishEvent(new h.jO(W),!0),W}editModeChanged(N){const W=()=>{this.state.grid.setState({isDraggable:N,isResizable:N}),(0,E.X0)(this.state.grid,!0)};if(l.$.featureToggles.dashboardNewLayouts){setTimeout(W,10);return}W()}activateRepeaters(){this.isActive||this.activate(),this.state.grid.isActive||this.state.grid.activate(),this.state.grid.forEachChild(N=>{if(N instanceof b.U&&!N.isActive){N.activate();return}if(N instanceof r.tI&&N.state.$behaviors){for(const W of N.state.$behaviors)if(W instanceof D.L&&!N.isActive){N.activate();break}N.state.children.forEach(W=>{if(W instanceof b.U&&!W.isActive){W.activate();return}})}})}getOutlineChildren(){const N=[];for(const W of this.state.grid.state.children)W instanceof b.U&&N.push(W.state.body,...W.state.repeatedPanels||[]);return N}cloneLayout(N,W){return this.clone({})}removeRow(N,W=!1){const R=this.state.grid,G=R.state.children.filter(w=>w.state.key!==N.state.key);if(!W){const w=N.state.children.map(Q=>Q.clone()),_=R.state.children.findIndex(Q=>Q.state.key===N.state.key);G.splice(_,0,...w)}this.publishEvent(new h.ck(N),!0),R.setState({children:G})}collapseAllRows(){this.state.grid.state.children.forEach(N=>{N instanceof r.tI&&(N.state.isCollapsed||this.state.grid.toggleRow(N))})}expandAllRows(){this.state.grid.state.children.forEach(N=>{N instanceof r.tI&&N.state.isCollapsed&&this.state.grid.toggleRow(N)})}static createFromLayout(N){const W=N.getVizPanels(),R=(0,x.DP)((0,E.YQ)(N).state.preload);return U.fromVizPanels(W,R)}static fromVizPanels(N=[],W){const R=[],w=i.cV/3;let _=0,Q=0;for(let ae of N){const q=ae.parent instanceof p.X?ae.parent.state.variableName:void 0;ae.clearParent(),R.push(new b.U({key:(0,E.ty)((0,E.Cs)(ae)),x:Q,y:_,width:w,height:10,itemHeight:10,body:ae,variableName:q})),Q+=w,Q+w>i.cV&&(Q=0,_+=10)}return new U({grid:new r.hy({children:R,isDraggable:!0,isResizable:!0,isLazy:W})})}static fromGridItems(N,W,R,G){const w=N.reduce((_,Q)=>(Q.clearParent(),_.push(Q),_),[]);return new U({grid:new r.hy({children:w,isDraggable:W,isResizable:R,isLazy:G})})}}function F({model:L}){const{children:N}=(0,r.gn)(L.state.grid,{shouldActivateOrKeepAlive:!0}),W=(0,E.MZ)(L),{isEditing:R}=W.useState(),G=(0,g.bn)(L),w=(0,c.of)(M),_=R&&l.$.featureToggles.dashboardNewLayouts&&!G;return(0,v.MK)()?N.map(ae=>(0,n.jsx)(ae.Component,{model:ae},ae.state.key)):L.parent===W&&N.length===0?(0,n.jsx)(o.A,{dashboard:W,canCreate:!!W.state.meta.canEdit},"dashboard-empty-state"):(0,n.jsxs)("div",{className:(0,a.cx)(w.container,R&&w.containerEditing),children:[L.state.grid.Component&&(0,n.jsx)(L.state.grid.Component,{model:L.state.grid}),_&&(0,n.jsx)("div",{className:w.actionsWrapper,children:(0,n.jsx)(m.f,{layoutManager:L})})]})}const I=r.tI.Component;r.tI.Component=V;function V({model:L}){return(0,v.MK)()?L.state.children.map(W=>(0,n.jsx)(W.Component,{model:W},W.state.key)):(0,n.jsx)(I,{model:L})}function M(L){return{container:(0,a.css)({width:"100%",display:"flex",flexGrow:1,flexDirection:"column"}),containerEditing:(0,a.css)({"> div:first-child":{flexGrow:"0 !important",minHeight:"250px"},...d.u}),actionsWrapper:(0,a.css)({position:"relative",paddingBottom:L.spacing(5)})}}},1199:(ne,A,e)=>{"use strict";e.d(A,{M:()=>i});var n=e(74848),a=e(22803),s=e(82514),l=e.n(s),r=e(84140),c=e(63142);const i=({oldValue:o,newValue:h,...f})=>{const g=(0,c.$j)(),u={variables:{dark:{diffViewerBackground:g.colors.background.canvas,diffViewerColor:g.colors.text.primary,addedBackground:(0,r.A)(g.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,r.A)(g.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,r.A)(g.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,r.A)(g.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,r.A)(g.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,r.A)(g.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:g.colors.background.primary,gutterBackgroundDark:g.colors.background.primary,highlightBackground:(0,r.A)(g.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,r.A)(g.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:g.colors.background.secondary,codeFoldBackground:g.colors.background.secondary,emptyLineBackground:g.colors.background.secondary,gutterColor:g.colors.text.disabled,addedGutterColor:g.colors.text.primary,removedGutterColor:g.colors.text.primary,codeFoldContentColor:g.colors.text.disabled,diffViewerTitleBackground:g.colors.background.secondary,diffViewerTitleColor:g.colors.text.disabled,diffViewerTitleBorderColor:g.colors.border.strong}},codeFold:{fontSize:g.typography.bodySmall.fontSize},gutter:{pre:{color:(0,r.A)(g.colors.text.disabled).setAlpha(1).toString(),opacity:.61}}};return(0,n.jsx)("div",{className:(0,a.css)({fontSize:g.typography.bodySmall.fontSize,pre:{all:"revert"}}),children:(0,n.jsx)(l(),{styles:u,oldValue:o,newValue:h,splitView:!1,compareMethod:s.DiffMethod.CSS,useDarkTheme:g.isDark,...f})})}},1302:(ne,A,e)=>{"use strict";e.d(A,{$u:()=>g,Ay:()=>p,Cj:()=>o,EC:()=>f,Y_:()=>i,dJ:()=>u,g4:()=>h,jE:()=>E,t_:()=>r});var n=e(65307),a=e(65642);const s={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,externalUserMngInfo:a.Ay.externalUserMngInfo,externalUserMngLinkName:a.Ay.externalUserMngLinkName,externalUserMngLinkUrl:a.Ay.externalUserMngLinkUrl,isLoading:!1,rolesLoading:!1},l=(0,n.Z0)({name:"users",initialState:s,reducers:{usersLoaded:(m,y)=>{const{totalCount:d,perPage:x,page:b,orgUsers:D}=y.payload,C=Math.ceil(d/x);return{...m,isLoading:!0,users:D,perPage:x,page:b,totalPages:C}},searchQueryChanged:(m,y)=>({...m,searchQuery:y.payload,page:s.page}),setUsersSearchPage:(m,y)=>({...m,page:y.payload}),pageChanged:(m,y)=>({...m,page:y.payload}),sortChanged:(m,y)=>({...m,sort:y.payload}),usersFetchBegin:m=>({...m,isLoading:!0}),usersFetchEnd:m=>({...m,isLoading:!1}),rolesFetchBegin:m=>({...m,rolesLoading:!0}),rolesFetchEnd:m=>({...m,rolesLoading:!1})}}),{searchQueryChanged:r,setUsersSearchPage:c,usersLoaded:i,usersFetchBegin:o,usersFetchEnd:h,pageChanged:f,sortChanged:g,rolesFetchBegin:u,rolesFetchEnd:E}=l.actions,p={users:l.reducer}},1404:(ne,A,e)=>{"use strict";e.d(A,{Ih:()=>a,Lr:()=>r,U7:()=>s,dr:()=>l,fE:()=>c});var n=e(39796);function a(i){const o=["refId","hide","key","queryType","datasource"];for(const h in i)if(h!=="label"&&!o.includes(h))return!1;return!0}function s(i,o,h){const f={...o,refId:(0,n.M)(i),hide:!1};return!f.datasource&&h&&(f.datasource=h),[...i,f]}function l(i){return i.indexOf("api/datasources/proxy")!==-1||i.indexOf("api/ds/query")!==-1}function r(i){return!i.match(/^http/)}function c(i){return i||void 0}},1487:(ne,A,e)=>{"use strict";e.d(A,{H:()=>s,J:()=>l});var n=e(78012);const a="grafana.alerting.previewToggles";function s(r){return n.M.getObject(a,{})[r]}function l(r,c){const i=n.M.getObject(a,{});i[r]=c,n.M.setObject(a,i)}},1492:(ne,A,e)=>{"use strict";e.d(A,{Pj:()=>o,o:()=>h,Aj:()=>g});var n=e(75816),a=e(73892);const l=(0,n.xP)({reducerPath:"userPreferencesAPI",baseQuery:(0,a.W)({baseURL:"/api"}),endpoints:()=>({})}).injectEndpoints({endpoints:u=>({getUserPreferences:u.query({query:()=>({url:"/user/preferences"})}),patchUserPreferences:u.mutation({query:E=>({url:"/user/preferences",method:"PATCH",body:E.patchPrefsCmd})}),updateUserPreferences:u.mutation({query:E=>({url:"/user/preferences",method:"PUT",body:E.updatePrefsCmd})})}),overrideExisting:!1}),{useGetUserPreferencesQuery:r,usePatchUserPreferencesMutation:c,useUpdateUserPreferencesMutation:i}=l,{useGetUserPreferencesQuery:o,usePatchUserPreferencesMutation:h,useUpdateUserPreferencesMutation:f}=l,g=l.enhanceEndpoints({addTagTypes:["UserPreferences"],endpoints:{getUserPreferences:{providesTags:["UserPreferences"]},updateUserPreferences:{invalidatesTags:["UserPreferences"]},patchUserPreferences:{invalidatesTags:["UserPreferences"]}}})},1506:(ne,A,e)=>{"use strict";e.d(A,{L:()=>o});var n=e(74848),a=e(22803),s=e(51898),l=e(92745),r=e(50201),c=e(89640),i=e(63142);function o({entity:f="Page"}){const g=(0,i.of)(h),u=f.toLowerCase();return(0,n.jsx)("div",{className:g.container,"data-testid":s.Tp.components.EntityNotFound.container,children:(0,n.jsx)(r.p,{message:`${f} not found`,variant:"not-found",children:(0,n.jsxs)(l.x6,{i18nKey:"entity-not-found.description",children:["We're looking but can't seem to find this ",{lowerCaseEntity:u},". Try returning"," ",(0,n.jsx)(c.Y,{href:"/",children:"home"})," or seeking help on the"," ",(0,n.jsx)(c.Y,{href:"https://community.grafana.com",external:!0,children:"community site."})]})})})}function h(f){return{container:(0,a.css)({padding:f.spacing(8,2,2,2)})}}},1625:(ne,A,e)=>{"use strict";e.d(A,{P:()=>o});var n=e(74848),a=e(22803),s=e(96540),l=e(30703),r=e(66404),c=e(41654),i=e(63142);const o=(0,s.forwardRef)(({children:f,icon:g,color:u="secondary",direction:E="row",...v},p)=>{const m=(0,i.of)(h),y=typeof v.onClick=="function",d=E==="row",x=d?"center":"flex-start",b=d?.5:0;return(0,n.jsx)("div",{ref:p,className:(0,a.cx)({[m.interactive]:y}),...v,children:(0,n.jsx)(r.E,{variant:"bodySmall",color:u,children:(0,n.jsxs)(c.B,{direction:E,alignItems:x,gap:b,wrap:"wrap",children:[g&&(0,n.jsx)(l.I,{size:"xs",name:g}),f]})})})});o.displayName="MetaText";const h=()=>({interactive:(0,a.css)({cursor:"pointer"})})},1682:(ne,A,e)=>{"use strict";e.d(A,{b4:()=>v});var n=e(45863),a=e(88632),s=e(32540),l=e(8285);function r(p){return p.state.controls?.state.timePicker}function c(p){return p.state.controls?.state.refreshPicker}function i(p){return p.state.titleItems&&Array.isArray(p.state.titleItems)?p.state.titleItems.find(y=>y instanceof s.$)??null:null}function o(p){return p.state.body.getVizPanels()}function h(p){let m=0;return n.jh.findAllObjects(p.getRoot(),y=>(y instanceof n.Eb||y instanceof n.tI)&&!y.state.repeatSourceKey).forEach(y=>{const d=(0,l.Cs)(y);d>m&&(m=d)}),m+1}function f(p){const m=n.jh.getData(p);if(!(m instanceof a.s))throw new Error("DashboardDataLayerSet not found");return m}function g(p){return(0,l.YQ)(p).state.editPane.state.selection?.getSelectionEntries().map(([,m])=>m.resolve())??[]}function u(p){const m=p.state.$behaviors?.find(y=>y instanceof n.Gg.K2);if(m instanceof n.Gg.K2)return m}function E(p){const m=(0,l.YQ)(p),y=(0,l.Cs)(p);let d=m.serializer.getElementIdForPanel(y);return d||(d=(0,l.XA)(y)),d}const v={getTimePicker:r,getRefreshPicker:c,getPanelLinks:i,getVizPanels:o,getDataLayers:f,getAllSelectedObjects:g,getCursorSync:u,getLayoutManagerFor:l.h$,getNextPanelId:h,getElementIdentifierForVizPanel:E}},1749:(ne,A,e)=>{"use strict";e.d(A,{P:()=>E});var n=e(75816),a=e(29189),s=e(43173);const l=()=>s.$.namespace,r=(v,p)=>`${s.$.appSubUrl||""}/apis/${v}/${p}/namespaces/${l()}`,c=(v,p)=>`${v}/${p}`,i="v0alpha1",o="notifications.alerting.grafana.app",h=r(o,i),f=c(o,i),g=(0,n.xP)({reducerPath:f,baseQuery:(0,a.cw)({baseUrl:new URL(h,globalThis.location.origin).href}),endpoints:()=>({})}),u=["API Discovery","Receiver","RoutingTree","TemplateGroup","TimeInterval"],E=g.enhanceEndpoints({addTagTypes:u}).injectEndpoints({endpoints:v=>({getApiResources:v.query({query:()=>({url:"/apis/notifications.alerting.grafana.app/v0alpha1/"}),providesTags:["API Discovery"]}),listReceiver:v.query({query:p=>({url:"/receivers",params:{pretty:p.pretty,allowWatchBookmarks:p.allowWatchBookmarks,continue:p.continue,fieldSelector:p.fieldSelector,labelSelector:p.labelSelector,limit:p.limit,resourceVersion:p.resourceVersion,resourceVersionMatch:p.resourceVersionMatch,sendInitialEvents:p.sendInitialEvents,timeoutSeconds:p.timeoutSeconds,watch:p.watch}}),providesTags:["Receiver"]}),createReceiver:v.mutation({query:p=>({url:"/receivers",method:"POST",body:p.receiver,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation}}),invalidatesTags:["Receiver"]}),deletecollectionReceiver:v.mutation({query:p=>({url:"/receivers",method:"DELETE",params:{pretty:p.pretty,continue:p.continue,dryRun:p.dryRun,fieldSelector:p.fieldSelector,gracePeriodSeconds:p.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:p.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:p.labelSelector,limit:p.limit,orphanDependents:p.orphanDependents,propagationPolicy:p.propagationPolicy,resourceVersion:p.resourceVersion,resourceVersionMatch:p.resourceVersionMatch,sendInitialEvents:p.sendInitialEvents,timeoutSeconds:p.timeoutSeconds}}),invalidatesTags:["Receiver"]}),getReceiver:v.query({query:p=>({url:`/receivers/${p.name}`,params:{pretty:p.pretty}}),providesTags:["Receiver"]}),replaceReceiver:v.mutation({query:p=>({url:`/receivers/${p.name}`,method:"PUT",body:p.receiver,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation}}),invalidatesTags:["Receiver"]}),deleteReceiver:v.mutation({query:p=>({url:`/receivers/${p.name}`,method:"DELETE",params:{pretty:p.pretty,dryRun:p.dryRun,gracePeriodSeconds:p.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:p.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:p.orphanDependents,propagationPolicy:p.propagationPolicy}}),invalidatesTags:["Receiver"]}),updateReceiver:v.mutation({query:p=>({url:`/receivers/${p.name}`,method:"PATCH",body:p.patch,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation,force:p.force}}),invalidatesTags:["Receiver"]}),listRoutingTree:v.query({query:p=>({url:"/routingtrees",params:{pretty:p.pretty,allowWatchBookmarks:p.allowWatchBookmarks,continue:p.continue,fieldSelector:p.fieldSelector,labelSelector:p.labelSelector,limit:p.limit,resourceVersion:p.resourceVersion,resourceVersionMatch:p.resourceVersionMatch,sendInitialEvents:p.sendInitialEvents,timeoutSeconds:p.timeoutSeconds,watch:p.watch}}),providesTags:["RoutingTree"]}),createRoutingTree:v.mutation({query:p=>({url:"/routingtrees",method:"POST",body:p.routingTree,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation}}),invalidatesTags:["RoutingTree"]}),deletecollectionRoutingTree:v.mutation({query:p=>({url:"/routingtrees",method:"DELETE",params:{pretty:p.pretty,continue:p.continue,dryRun:p.dryRun,fieldSelector:p.fieldSelector,gracePeriodSeconds:p.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:p.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:p.labelSelector,limit:p.limit,orphanDependents:p.orphanDependents,propagationPolicy:p.propagationPolicy,resourceVersion:p.resourceVersion,resourceVersionMatch:p.resourceVersionMatch,sendInitialEvents:p.sendInitialEvents,timeoutSeconds:p.timeoutSeconds}}),invalidatesTags:["RoutingTree"]}),getRoutingTree:v.query({query:p=>({url:`/routingtrees/${p.name}`,params:{pretty:p.pretty}}),providesTags:["RoutingTree"]}),replaceRoutingTree:v.mutation({query:p=>({url:`/routingtrees/${p.name}`,method:"PUT",body:p.routingTree,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation}}),invalidatesTags:["RoutingTree"]}),deleteRoutingTree:v.mutation({query:p=>({url:`/routingtrees/${p.name}`,method:"DELETE",params:{pretty:p.pretty,dryRun:p.dryRun,gracePeriodSeconds:p.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:p.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:p.orphanDependents,propagationPolicy:p.propagationPolicy}}),invalidatesTags:["RoutingTree"]}),updateRoutingTree:v.mutation({query:p=>({url:`/routingtrees/${p.name}`,method:"PATCH",body:p.patch,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation,force:p.force}}),invalidatesTags:["RoutingTree"]}),listTemplateGroup:v.query({query:p=>({url:"/templategroups",params:{pretty:p.pretty,allowWatchBookmarks:p.allowWatchBookmarks,continue:p.continue,fieldSelector:p.fieldSelector,labelSelector:p.labelSelector,limit:p.limit,resourceVersion:p.resourceVersion,resourceVersionMatch:p.resourceVersionMatch,sendInitialEvents:p.sendInitialEvents,timeoutSeconds:p.timeoutSeconds,watch:p.watch}}),providesTags:["TemplateGroup"]}),createTemplateGroup:v.mutation({query:p=>({url:"/templategroups",method:"POST",body:p.templateGroup,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation}}),invalidatesTags:["TemplateGroup"]}),deletecollectionTemplateGroup:v.mutation({query:p=>({url:"/templategroups",method:"DELETE",params:{pretty:p.pretty,continue:p.continue,dryRun:p.dryRun,fieldSelector:p.fieldSelector,gracePeriodSeconds:p.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:p.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:p.labelSelector,limit:p.limit,orphanDependents:p.orphanDependents,propagationPolicy:p.propagationPolicy,resourceVersion:p.resourceVersion,resourceVersionMatch:p.resourceVersionMatch,sendInitialEvents:p.sendInitialEvents,timeoutSeconds:p.timeoutSeconds}}),invalidatesTags:["TemplateGroup"]}),getTemplateGroup:v.query({query:p=>({url:`/templategroups/${p.name}`,params:{pretty:p.pretty}}),providesTags:["TemplateGroup"]}),replaceTemplateGroup:v.mutation({query:p=>({url:`/templategroups/${p.name}`,method:"PUT",body:p.templateGroup,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation}}),invalidatesTags:["TemplateGroup"]}),deleteTemplateGroup:v.mutation({query:p=>({url:`/templategroups/${p.name}`,method:"DELETE",params:{pretty:p.pretty,dryRun:p.dryRun,gracePeriodSeconds:p.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:p.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:p.orphanDependents,propagationPolicy:p.propagationPolicy}}),invalidatesTags:["TemplateGroup"]}),updateTemplateGroup:v.mutation({query:p=>({url:`/templategroups/${p.name}`,method:"PATCH",body:p.patch,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation,force:p.force}}),invalidatesTags:["TemplateGroup"]}),listTimeInterval:v.query({query:p=>({url:"/timeintervals",params:{pretty:p.pretty,allowWatchBookmarks:p.allowWatchBookmarks,continue:p.continue,fieldSelector:p.fieldSelector,labelSelector:p.labelSelector,limit:p.limit,resourceVersion:p.resourceVersion,resourceVersionMatch:p.resourceVersionMatch,sendInitialEvents:p.sendInitialEvents,timeoutSeconds:p.timeoutSeconds,watch:p.watch}}),providesTags:["TimeInterval"]}),createTimeInterval:v.mutation({query:p=>({url:"/timeintervals",method:"POST",body:p.timeInterval,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation}}),invalidatesTags:["TimeInterval"]}),deletecollectionTimeInterval:v.mutation({query:p=>({url:"/timeintervals",method:"DELETE",params:{pretty:p.pretty,continue:p.continue,dryRun:p.dryRun,fieldSelector:p.fieldSelector,gracePeriodSeconds:p.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:p.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:p.labelSelector,limit:p.limit,orphanDependents:p.orphanDependents,propagationPolicy:p.propagationPolicy,resourceVersion:p.resourceVersion,resourceVersionMatch:p.resourceVersionMatch,sendInitialEvents:p.sendInitialEvents,timeoutSeconds:p.timeoutSeconds}}),invalidatesTags:["TimeInterval"]}),getTimeInterval:v.query({query:p=>({url:`/timeintervals/${p.name}`,params:{pretty:p.pretty}}),providesTags:["TimeInterval"]}),replaceTimeInterval:v.mutation({query:p=>({url:`/timeintervals/${p.name}`,method:"PUT",body:p.timeInterval,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation}}),invalidatesTags:["TimeInterval"]}),deleteTimeInterval:v.mutation({query:p=>({url:`/timeintervals/${p.name}`,method:"DELETE",params:{pretty:p.pretty,dryRun:p.dryRun,gracePeriodSeconds:p.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:p.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:p.orphanDependents,propagationPolicy:p.propagationPolicy}}),invalidatesTags:["TimeInterval"]}),updateTimeInterval:v.mutation({query:p=>({url:`/timeintervals/${p.name}`,method:"PATCH",body:p.patch,params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation,force:p.force}}),invalidatesTags:["TimeInterval"]})}),overrideExisting:!1})},1837:(ne,A,e)=>{"use strict";e.d(A,{u:()=>n});const n={"&:hover,:focus-within":{".dashboard-canvas-add-button":{opacity:1,filter:"unset"}}}},1895:(ne,A,e)=>{"use strict";e.d(A,{O5:()=>g,_y:()=>f,cc:()=>o});var n=e(75505),a=e(68143),s=e(24619),l=e(95443),r=e(52161),c=e(78467),i=e(77295);async function o(y){if(y===r.hY)return{application:"grafana",features:{rulerApiEnabled:!0}};const d=(0,r.of)(y);if(!d)throw new Error(`Cannot find data source configuration for ${y}`);const{url:x,name:b,type:D}=d;if(!x)throw new Error("The data source url cannot be empty.");if(!(0,r.cl)(D))throw new Error(`The build info request is not available for ${D}. Supported values are ${r.at.join()}.`);return h({name:b,url:x,type:D})}async function h(y){const{url:d,name:x,type:b}=y,D=b==="loki"?void 0:await E(d);if(!(D!==void 0)){if(!await v(x))throw new Error(`Unable to fetch alert rules. Is the ${x} data source properly configured?`);const O=await p(x);return{application:b==="loki"?"Loki":s.N1.Cortex,features:{rulerApiEnabled:O}}}const{features:P}=D.data;return P?{application:s.N1.Mimir,features:{rulerApiEnabled:P?.ruler_config_api==="true"}}:{application:s.N1.Prometheus,features:{rulerApiEnabled:!1}}}async function f(y){if(y===r.hY)return{lazyConfigInit:!1};const d=u(y),{url:x,type:b}=d;if(!x)throw new Error("The data source url cannot be empty.");if(b!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${b}. Only 'alertmanager' type is supported`);return await g(x)}async function g(y){try{return{lazyConfigInit:(await E(y))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function u(y){const d=(0,r.oh)(y);if(!d)throw new Error(`Cannot find data source configuration for ${y}`);return d}async function E(y){return(await(0,n.s)((0,a.AI)().fetch({url:`${y}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(x=>{if(!("status"in x&&x.status===404))throw x}))?.data}async function v(y){try{return await(0,c.sA)(y),!0}catch{return!1}}async function p(y){try{return await(0,i.Zp)(y),!0}catch(d){if(m(d))return!1;throw d}}function m(y){return(0,a.NF)(y)?y.data.message?.includes("GetRuleGroup unsupported in rule local store")||y.data.message?.includes("page not found")||y.data.message?.includes(l.UU):y instanceof Error&&y.message?.includes("404 from rules config endpoint")}},1906:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>r,Jk:()=>s,hX:()=>l});var n=e(78830),a=e(11594),s=(c=>(c.CloudAlerting="cloud-alerting",c.UnifiedAlerting="unified-alerting",c.Dashboard="dashboard",c.Explore="explore",c.Correlations="correlations",c.Unknown="unknown",c.PanelEditor="panel-editor",c.PanelViewer="panel-viewer",c))(s||{});class l extends a.Ud{constructor(){super(...arguments),this._exposedComponentConfigs=[],this._addedComponentConfigs=[],this._addedLinkConfigs=[],this._addedFunctionConfigs=[]}init(i){}setRootPage(i){return this.root=i,this}setComponentsFromLegacyExports(i){if((0,n.M)(i),this.meta&&this.meta.includes){for(const o of this.meta.includes)if(o.type===a.ib.page&&o.component&&!i[o.component]){console.warn("App Page uses unknown component: ",o.component,this.meta);continue}}}get exposedComponentConfigs(){return this._exposedComponentConfigs}get addedComponentConfigs(){return this._addedComponentConfigs}get addedLinkConfigs(){return this._addedLinkConfigs}get addedFunctionConfigs(){return this._addedFunctionConfigs}addLink(i){return this._addedLinkConfigs.push(i),this}addComponent(i){return this._addedComponentConfigs.push(i),this}addFunction(i){return this._addedFunctionConfigs.push(i),this}exposeComponent(i){return this._exposedComponentConfigs.push(i),this}}var r=(c=>(c.alpha="alpha",c.beta="beta",c.experimental="experimental",c.privatePreview="private preview",c.preview="preview",c.new="new",c))(r||{})},1972:(ne,A,e)=>{"use strict";e.d(A,{Yi:()=>i,hk:()=>c,rS:()=>o});var n=e(74848),a=e(92745),s=e(45967),l=e(34999),r=e(99887),c=(h=>(h.ContactPoint="contact point",h.Template="template",h.MuteTiming="time interval",h.AlertRule="alert rule",h.RootNotificationPolicy="root notification policy",h))(c||{});const i=({resource:h,...f})=>(0,n.jsx)(l.F,{title:(0,a.t)("alerting.provisioning.title-provisioned","This {{resource}} cannot be edited through the UI",{resource:h}),severity:"info",...f,children:(0,n.jsxs)(a.x6,{i18nKey:"alerting.provisioning.body-provisioned",children:["This ",{resource:h}," has been provisioned, that means it was created by config. Please contact your server admin to update this ",{resource:h},"."]})}),o=({tooltip:h,provenance:f})=>{const g=(0,n.jsx)(r.E,{text:(0,a.t)("alerting.provisioning-badge.badge.text-provisioned","Provisioned"),color:"purple"});if(h){const u=(0,n.jsxs)(a.x6,{i18nKey:"alerting.provisioning.badge-tooltip-provenance",values:{provenance:f},children:["This resource has been provisioned via ",{provenance:f}," and cannot be edited through the UI"]}),E=(0,n.jsx)(a.x6,{i18nKey:"alerting.provisioning.badge-tooltip-standard",children:"This resource has been provisioned and cannot be edited through the UI"}),v=f?u:E;return(0,n.jsx)(s.m,{content:v,children:(0,n.jsx)("span",{children:g})})}return g}},2197:(ne,A,e)=>{"use strict";e.d(A,{m:()=>g});var n=e(2543),a=e.n(n),s=e(62467),l=e(81160),r=e(69862),c=e(36638),i=e(8642);const o=(v,p)=>m=>{const y=i.h.get(v.id);if(!y)return m;const x={...y.transformation.defaultOptions??{},...v.options},D=window.__grafanaSceneContext!=null?x:E((0,n.cloneDeep)(x),P=>typeof P=="string"?p.interpolate(P):P),C=v.filter?.options?(0,c.Dq)(v.filter):void 0;return m.pipe((0,r.Z)(P=>(0,s.of)(h(P,C)).pipe(y.transformation.operator(D,p),f(P,y,C))))};function h(v,p){return p?v.filter(m=>p(m)):v}const f=(v,p,m)=>y=>y.pipe((0,l.T)(d=>{if(d===v)return d;if(m){let x=0;const b=v.filter((D,C)=>{const P=!m(D);return P&&!x&&(x=C),P});b.length&&d.splice(x,0,...b)}return d}));function g(v,p,m){const y=(0,s.of)(p);if(!v.length)return y;const d=[],x=m??{interpolate:b=>b};for(let b=0;b<v.length;b++){const D=v[b];if(u(D))d.push(D(x));else{if(D.disabled)continue;d.push(o(D,x))}}return y.pipe.apply(y,d)}function u(v){return typeof v=="function"}function E(v,p){if(Array.isArray(v))return v.map(m=>E(m,p));if(typeof v=="object"){for(const m in v)v[m]=E(v[m],p);return v}else return p(v)??v}},2218:(ne,A,e)=>{"use strict";e.d(A,{A:()=>f});var n=e(74848),a=e(96540),s=e(92745),l=e(8207),r=e(41654),c=e(24158),i=e(52161),o=e(5358);const h=a.memo(({ruleUid:g,onClose:u})=>(0,n.jsx)(l._,{title:(0,s.t)("alerting.silence-grafana-rule-drawer.title-silence-alert-rule","Silence alert rule"),subtitle:"Configure silences to stop notifications from a particular alert rule.",onClose:u,size:"md",children:(0,n.jsx)(r.B,{direction:"column",children:(0,n.jsx)(o.b9,{accessType:"instance",children:(0,n.jsx)(c.SilencesEditor,{ruleUid:g,alertManagerSourceName:i.hY,onSilenceCreated:u,onCancel:u})})})}),(g,u)=>g.ruleUid===u.ruleUid);h.displayName="SilenceGrafanaRuleDrawer";const f=h},2341:()=>{(function(ne){function A(e){e.hooks.processDatapoints.push(function(n,a,s){a.dashes.show&&n.hooks.draw.push(function(l,r){var c=l.getPlotOffset(),i=a.xaxis,o=a.yaxis;function h(E,v){var p=s.points,m=s.pointsize,y=null,d=null,x=0,b=!0,D,C;a.dashes.dashLength[0]?(D=a.dashes.dashLength[0],a.dashes.dashLength[1]?C=a.dashes.dashLength[1]:C=D):C=D=a.dashes.dashLength,r.beginPath();for(var P=m;P<p.length;P+=m){let L=function(N){var W=Math.sqrt(Math.pow(F-K,2)+Math.pow(I-U,2));if(W<=N)return{deltaX:F-K,deltaY:I-U,distance:W,remainder:N-W};var R=F>K?1:-1,G=I>U?1:-1;return{deltaX:R*Math.sqrt(Math.pow(N,2)/(1+Math.pow((I-U)/(F-K),2))),deltaY:G*Math.sqrt(Math.pow(N,2)-Math.pow(N,2)/(1+Math.pow((I-U)/(F-K),2))),distance:N,remainder:0}};var M=L,T=p[P-m],O=p[P-m+1],S=p[P],B=p[P+1];if(!(T==null||S==null)){if(O<=B&&O<o.min){if(B<o.min)continue;T=(o.min-O)/(B-O)*(S-T)+T,O=o.min}else if(B<=O&&B<o.min){if(O<o.min)continue;S=(o.min-O)/(B-O)*(S-T)+T,B=o.min}if(O>=B&&O>o.max){if(B>o.max)continue;T=(o.max-O)/(B-O)*(S-T)+T,O=o.max}else if(B>=O&&B>o.max){if(O>o.max)continue;S=(o.max-O)/(B-O)*(S-T)+T,B=o.max}if(T<=S&&T<i.min){if(S<i.min)continue;O=(i.min-T)/(S-T)*(B-O)+O,T=i.min}else if(S<=T&&S<i.min){if(T<i.min)continue;B=(i.min-T)/(S-T)*(B-O)+O,S=i.min}if(T>=S&&T>i.max){if(S>i.max)continue;O=(i.max-T)/(S-T)*(B-O)+O,T=i.max}else if(S>=T&&S>i.max){if(T>i.max)continue;B=(i.max-T)/(S-T)*(B-O)+O,S=i.max}(T!=y||O!=d)&&r.moveTo(i.p2c(T)+E,o.p2c(O)+v);var K=i.p2c(T)+E,U=o.p2c(O)+v,F=i.p2c(S)+E,I=o.p2c(B)+v,V;do V=L(x>0?x:b?D:C),(V.deltaX!=0||V.deltaY!=0)&&(b?r.lineTo(K+V.deltaX,U+V.deltaY):r.moveTo(K+V.deltaX,U+V.deltaY)),b=!b,x=V.remainder,K+=V.deltaX,U+=V.deltaY;while(V.distance>0);y=S,d=B}}r.stroke()}r.save(),r.translate(c.left,c.top),r.lineJoin="round";var f=a.dashes.lineWidth,g=a.shadowSize;if(f>0&&g>0){r.lineWidth=g,r.strokeStyle="rgba(0,0,0,0.1)";var u=Math.PI/18;h(Math.sin(u)*(f/2+g/2),Math.cos(u)*(f/2+g/2)),r.lineWidth=g/2,h(Math.sin(u)*(f/2+g/4),Math.cos(u)*(f/2+g/4))}r.lineWidth=f,r.strokeStyle=a.color,f>0&&h(0,0),r.restore()})})}ne.plot.plugins.push({init:A,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},2381:(ne,A,e)=>{"use strict";e.d(A,{A:()=>h});var n=e(74848),a=e(34743),s=e(83505),l=e(46885),r=e(96540),c=e(63142),i=e(71495),o=e(15245);function h({content:f,show:g,placement:u,className:E,wrapperClassName:v,referenceElement:p,renderArrow:m,hidePopper:y,style:d,...x}){const b=(0,c.$j)(),D=(0,r.useRef)(null),C=[(0,a.cY)(8),(0,a.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,a.BN)()];m&&C.push((0,a.UE)({element:D}));const{context:P,refs:T,floatingStyles:O}=(0,s.we)({open:g,placement:(0,i.O)(u),middleware:C,whileElementsMounted:l.ll,strategy:"fixed"});(0,r.useLayoutEffect)(()=>{T.setReference(p)},[p,T]);const{styles:S}=(0,s.DL)(P,{initial:()=>({opacity:0}),duration:b.transitions.duration.enteringScreen});return g?(0,n.jsx)(o.ZL,{children:(0,n.jsx)("div",{ref:T.setFloating,style:{...O,...S,...d},className:v,...x,children:(0,n.jsxs)("div",{className:E,children:[m&&(0,n.jsx)(s.ie,{fill:b.colors.border.weak,ref:D,context:P}),typeof f=="string"&&f,r.isValidElement(f)&&r.cloneElement(f),typeof f=="function"&&f({hidePopper:y})]})})}):void 0}},2401:(ne,A,e)=>{"use strict";e.d(A,{d:()=>s});var n=e(96540),a=e(41071);const s=({component:l,title:r="previous page"})=>{const c=(0,a.i)(),i=(0,n.useCallback)(()=>{c(r)},[c,r]);return(0,n.cloneElement)(l,{onClick:i})}},2495:(ne,A,e)=>{"use strict";e.d(A,{O5:()=>D,r3:()=>u,dX:()=>y,hZ:()=>i,ri:()=>f,WH:()=>d,AC:()=>o,YX:()=>m,bM:()=>x,A_:()=>b,u:()=>P,D0:()=>p,SM:()=>c,M8:()=>v,YD:()=>g,aD:()=>E});var n=e(59253),a=e(73892),s=e(75816);const r=(0,s.xP)({reducerPath:"migrateToCloudGeneratedAPI",baseQuery:(0,a.W)({baseURL:"/api"}),endpoints:()=>({})}).injectEndpoints({endpoints:T=>({getSessionList:T.query({query:()=>({url:"/cloudmigration/migration"})}),createSession:T.mutation({query:O=>({url:"/cloudmigration/migration",method:"POST",body:O.cloudMigrationSessionRequestDto})}),deleteSession:T.mutation({query:O=>({url:`/cloudmigration/migration/${O.uid}`,method:"DELETE"})}),getSession:T.query({query:O=>({url:`/cloudmigration/migration/${O.uid}`})}),createSnapshot:T.mutation({query:O=>({url:`/cloudmigration/migration/${O.uid}/snapshot`,method:"POST",body:O.createSnapshotRequestDto})}),getSnapshot:T.query({query:O=>({url:`/cloudmigration/migration/${O.uid}/snapshot/${O.snapshotUid}`,params:{resultPage:O.resultPage,resultLimit:O.resultLimit,resultSortColumn:O.resultSortColumn,resultSortOrder:O.resultSortOrder,errorsOnly:O.errorsOnly}})}),cancelSnapshot:T.mutation({query:O=>({url:`/cloudmigration/migration/${O.uid}/snapshot/${O.snapshotUid}/cancel`,method:"POST"})}),uploadSnapshot:T.mutation({query:O=>({url:`/cloudmigration/migration/${O.uid}/snapshot/${O.snapshotUid}/upload`,method:"POST"})}),getShapshotList:T.query({query:O=>({url:`/cloudmigration/migration/${O.uid}/snapshots`,params:{page:O.page,limit:O.limit,sort:O.sort}})}),getResourceDependencies:T.query({query:()=>({url:"/cloudmigration/resources/dependencies"})}),getCloudMigrationToken:T.query({query:()=>({url:"/cloudmigration/token"})}),createCloudMigrationToken:T.mutation({query:()=>({url:"/cloudmigration/token",method:"POST"})}),deleteCloudMigrationToken:T.mutation({query:O=>({url:`/cloudmigration/token/${O.uid}`,method:"DELETE"})}),getDashboardByUid:T.query({query:O=>({url:`/dashboards/uid/${O.uid}`})}),getLibraryElementByUid:T.query({query:O=>({url:`/library-elements/${O.libraryElementUid}`})})}),overrideExisting:!1}),{useGetSessionListQuery:c,useCreateSessionMutation:i,useDeleteSessionMutation:o,useGetSessionQuery:h,useCreateSnapshotMutation:f,useGetSnapshotQuery:g,useCancelSnapshotMutation:u,useUploadSnapshotMutation:E,useGetShapshotListQuery:v,useGetResourceDependenciesQuery:p,useGetCloudMigrationTokenQuery:m,useCreateCloudMigrationTokenMutation:y,useDeleteCloudMigrationTokenMutation:d,useGetDashboardByUidQuery:x,useGetLibraryElementByUidQuery:b}=r,D=r.injectEndpoints({endpoints:T=>({getLocalPluginList:T.query({queryFn:async()=>{try{return{data:await(0,n.Gd)()}}catch(O){return(0,a.s)(O)}}})})}).enhanceEndpoints({addTagTypes:["cloud-migration-token","cloud-migration-session","cloud-migration-snapshot","cloud-migration-resource-dependencies"],endpoints:{getCloudMigrationToken:{providesTags:["cloud-migration-token"]},createCloudMigrationToken:{invalidatesTags:["cloud-migration-token"]},deleteCloudMigrationToken:{invalidatesTags:["cloud-migration-token"]},getSessionList:{providesTags:["cloud-migration-session"]},getSession:{providesTags:["cloud-migration-session"]},createSession:{invalidatesTags:["cloud-migration-session"]},deleteSession:{invalidatesTags:["cloud-migration-session","cloud-migration-snapshot"]},getShapshotList:{providesTags:["cloud-migration-snapshot"]},getSnapshot:{providesTags:["cloud-migration-snapshot"]},createSnapshot:{invalidatesTags:["cloud-migration-snapshot"]},uploadSnapshot:{invalidatesTags:["cloud-migration-snapshot"]},getResourceDependencies:{providesTags:["cloud-migration-resource-dependencies"]},getDashboardByUid:C,getLibraryElementByUid:C,getLocalPluginList:C}});function C(T){if(!T.query)return;const O=T.query;T.query=S=>{const B=O(S);return B.showErrorAlert=!1,B}}const{useGetLocalPluginListQuery:P}=D},2505:(ne,A,e)=>{"use strict";e.d(A,{U:()=>l,m:()=>s});var n=e(11393),a=e(67350);function s(r,c,i,o){const h=r.builtIn?"grafana":c,{enable:f,hide:g,iconColor:u,name:E,builtIn:v,filter:p,mappings:m,datasource:y,target:d,snapshotData:x,type:b,...D}=r,C={kind:"AnnotationQuery",spec:{builtIn:!!r.builtIn,name:r.name,enable:!!o?.enable||!!r.enable,hide:!!o?.hide||!!r.hide,iconColor:r.iconColor,query:{kind:"DataQuery",version:(0,n.iM)().version,group:h,spec:d||{}}}};return i&&(C.spec.query.datasource={name:i}),Object.keys(D).length>0&&(C.spec.legacyOptions=D),r.filter?.ids?.length&&(C.spec.filter=r.filter),C}function l(r){let{query:c,...i}=r.spec,o={enable:r.spec.enable,hide:r.spec.hide,iconColor:r.spec.iconColor,name:r.spec.name};Object.keys(c.spec).length>0&&(o.target={...c?.spec}),r.spec.builtIn&&(o.type="dashboard",o.builtIn=1),r.spec.filter&&(o.filter=r.spec.filter),i.legacyOptions&&(o={...o,...i.legacyOptions});const h=(0,a.Ku)(c);return o.datasource=h,o}},2513:(ne,A,e)=>{"use strict";e.d(A,{$A:()=>c,Tl:()=>r,kn:()=>s,zE:()=>l});var n=e(24726),a=e(43173);const s={from:`now-${a.$.exploreDefaultTimeOffset}`,to:"now"},l=()=>(0,n.A)().slice(0,12),r={id:l(),operator:"="},c={spanNameOperator:"=",serviceNameOperator:"=",fromOperator:">",toOperator:"<",tags:[r],matchesOnly:!1,criticalPathOnly:!1}},2559:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>m,J7:()=>r,NZ:()=>l,Rp:()=>f,SN:()=>o,V9:()=>c,dW:()=>u,dd:()=>g,f7:()=>v,oQ:()=>E,qx:()=>s,y3:()=>h});var n=e(65307),a=e(28105),s=(y=>(y[y.Gcom=0]="Gcom",y[y.Json=1]="Json",y))(s||{}),l=(y=>(y.DataSource="datasource",y.Constant="constant",y.LibraryPanel="libraryPanel",y))(l||{}),r=(y=>(y.New="new",y.Exists="exists",y.Different="different",y))(r||{});const c={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:a.Gu.NotStarted},i=(0,n.Z0)({name:"manageDashboards",initialState:c,reducers:{setGcomDashboard:(y,d)=>{y.dashboard={...d.payload.json,id:null},y.meta={updatedAt:d.payload.updatedAt,orgName:d.payload.orgName},y.source=0,y.state=a.Gu.Done},setJsonDashboard:(y,d)=>{y.dashboard={...d.payload,id:null},y.meta=c.meta,y.source=1,y.state=a.Gu.Done},clearDashboard:y=>{y.dashboard={},y.state=a.Gu.NotStarted},setInputs:(y,d)=>{y.inputs={dataSources:d.payload.filter(x=>x.type==="datasource"),constants:d.payload.filter(x=>x.type==="constant"),libraryPanels:y.inputs.libraryPanels||[]}},setLibraryPanelInputs:(y,d)=>{y.inputs.libraryPanels=d.payload},fetchFailed:y=>{y.dashboard={},y.state=a.Gu.Error},fetchDashboard:y=>{y.state=a.Gu.Loading}}}),{clearDashboard:o,setInputs:h,setGcomDashboard:f,setJsonDashboard:g,setLibraryPanelInputs:u,fetchFailed:E,fetchDashboard:v}=i.actions,m={importDashboard:i.reducer}},2733:(ne,A,e)=>{"use strict";e.d(A,{cd:()=>b,xw:()=>E});var n=e(2543),a=e.n(n),s=e(18700),l=e(95004),r=e(90157);function c(M){if(M.stringValue)return M.stringValue;if(M.boolValue!==void 0)return!!M.boolValue;if(M.intValue!==void 0)return Number.parseInt(String(M.intValue),10);if(M.doubleValue)return Number.parseFloat(String(M.doubleValue));if(M.arrayValue){const L=[];for(const N of M.arrayValue.values)L.push(c(N));return L}return""}function i(M){const L=[];let N="OTLPResourceNoServiceName";if(!M)return{serviceName:N,serviceTags:L};for(const W of M.attributes)W.key===SemanticResourceAttributes.SERVICE_NAME&&(N=W.value.stringValue||N),L.push({key:W.key,value:c(W.value)});return{serviceName:N,serviceTags:L}}function o(M){const L=[];if(M.attributes)for(const N of M.attributes)L.push({key:N.key,value:c(N.value)});return L}function h(M){let L;if(M.kind){const N=M.kind.toString().toLowerCase().split("_");L=N.length?N[N.length-1]:M.kind.toString()}return L}function f(M){const L=[];if(M.links)for(const N of M.links){const{traceId:W,spanId:R}=N,G=[];if(N.attributes)for(const w of N.attributes)G.push({key:w.key,value:c(w.value)});L.push({traceID:W,spanID:R,tags:G})}return L}function g(M){const L=[];if(M.events)for(const N of M.events){const W=[];if(N.attributes)for(const R of N.attributes)W.push({key:R.key,value:c(R.value)});L.push({fields:W,timestamp:N.timeUnixNano/1e6,name:N.name})}return L}function u(M,L=!1){const N=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string,values:[]},{name:"spanID",type:FieldType.string,values:[]},{name:"parentSpanID",type:FieldType.string,values:[]},{name:"operationName",type:FieldType.string,values:[]},{name:"serviceName",type:FieldType.string,values:[]},{name:"kind",type:FieldType.string,values:[]},{name:"statusCode",type:FieldType.number,values:[]},{name:"statusMessage",type:FieldType.string,values:[]},{name:"instrumentationLibraryName",type:FieldType.string,values:[]},{name:"instrumentationLibraryVersion",type:FieldType.string,values:[]},{name:"traceState",type:FieldType.string,values:[]},{name:"serviceTags",type:FieldType.other,values:[]},{name:"startTime",type:FieldType.number,values:[]},{name:"duration",type:FieldType.number,values:[]},{name:"logs",type:FieldType.other,values:[]},{name:"references",type:FieldType.other,values:[]},{name:"tags",type:FieldType.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}});try{for(const R of M){const{serviceName:G,serviceTags:w}=i(R.resource);for(const _ of R.instrumentationLibrarySpans)for(const Q of _.spans)N.add({traceID:Q.traceId,spanID:Q.spanId,parentSpanID:Q.parentSpanId||"",operationName:Q.name||"",serviceName:G,kind:h(Q),statusCode:Q.status?.code,statusMessage:Q.status?.message,instrumentationLibraryName:_.instrumentationLibrary?.name,instrumentationLibraryVersion:_.instrumentationLibrary?.version,traceState:Q.traceState,serviceTags:w,startTime:Q.startTimeUnixNano/1e6,duration:(Q.endTimeUnixNano-Q.startTimeUnixNano)/1e6,tags:o(Q),logs:g(Q),references:f(Q)})}}catch(R){return console.error(R),{error:{message:"JSON is not valid OpenTelemetry format: "+R},data:[]}}let W=[N];return L&&W.push(...createNodeGraphFrames(N)),{data:W}}function E(M){let L={batches:[]},N={};for(let W=0;W<M.length;W++){const R=M.get(W);N[R.serviceName]||(N[R.serviceName]=L.batches.length,L.batches.push({resource:{attributes:[],droppedAttributesCount:0},instrumentationLibrarySpans:[{spans:[]}]}));let G=N[R.serviceName];L.batches[G].resource.attributes.length===0&&(L.batches[G].resource.attributes=p(R.serviceTags)),L.batches[G].instrumentationLibrarySpans[0].instrumentationLibrary||R.instrumentationLibraryName&&(L.batches[G].instrumentationLibrarySpans[0].instrumentationLibrary={name:R.instrumentationLibraryName,version:R.instrumentationLibraryVersion?R.instrumentationLibraryVersion:""}),L.batches[G].instrumentationLibrarySpans[0].spans.push({traceId:R.traceID.padStart(32,"0"),spanId:R.spanID,parentSpanId:R.parentSpanID||"",traceState:R.traceState||"",name:R.operationName,kind:v(R.kind),startTimeUnixNano:R.startTime*1e6,endTimeUnixNano:(R.startTime+R.duration)*1e6,attributes:R.tags?p(R.tags):[],droppedAttributesCount:0,droppedEventsCount:0,droppedLinksCount:0,status:y(R),events:d(R.logs),links:x(R.references)})}return L}function v(M){let L;if(M)switch(M){case"server":L="SPAN_KIND_SERVER";break;case"client":L="SPAN_KIND_CLIENT";break;case"producer":L="SPAN_KIND_PRODUCER";break;case"consumer":L="SPAN_KIND_CONSUMER";break;case"internal":L="SPAN_KIND_INTERNAL";break}return L}function p(M){return M.reduce((L,N)=>[...L,{key:N.key,value:m(N)}],[])}function m(M){if(typeof M.value=="string")return{stringValue:M.value};if(typeof M.value=="boolean")return{boolValue:M.value};if(typeof M.value=="number")return M.value%1===0?{intValue:M.value}:{doubleValue:M.value};if(typeof M.value=="object"&&Array.isArray(M.value)){const L=[];for(const N of M.value)L.push(m(N));return{arrayValue:{values:L}}}return{stringValue:M.value}}function y(M){let L;return M.statusCode!==void 0&&(L={code:M.statusCode,message:M.statusMessage?M.statusMessage:""}),L}function d(M){if(!M||!M.length)return;let L=[];for(const N of M){let W={timeUnixNano:N.timestamp*1e6,attributes:[],droppedAttributesCount:0,name:N.name||""};for(const R of N.fields)W.attributes.push({key:R.key,value:m(R)});L.push(W)}return L}function x(M){if(!M||!M.length)return;let L=[];for(const N of M){let W={traceId:N.traceID,spanId:N.spanID,attributes:[],droppedAttributesCount:0};if(N.tags?.length)for(const R of N.tags)W.attributes?.push({key:R.key,value:m(R)});L.push(W)}return L}const b="Related profiles";function D(M,L,N=!1){const W=M.data[0];if(!W)return V;const G=L?.jsonData?.tracesToProfiles;let w;if(G?.datasourceUid&&(w=getDataSourceSrv().getInstanceSettings(G.datasourceUid)),G&&w){const Q=G.customQuery?G.query:void 0,ae={title:b,url:"",internal:{datasourceUid:w.uid,datasourceName:w.name,query:{labelSelector:Q||"{${__tags}}",groupBy:[],profileTypeId:G.profileTypeId??"",queryType:"profile",spanSelector:['${__span.tags["pyroscope.profile.id"]}'],refId:"profile"}},origin:DataLinkConfigOrigin.Datasource};W.fields.forEach(q=>{q.name==="tags"&&(q.config.links=[ae])})}let _=[...M.data];return N&&_.push(...createNodeGraphFrames(toDataFrame(W))),{...M,data:_}}function C(M){return{traceID:M.traceID,startTime:parseInt(M.startTimeUnixNano,10)/1e6,traceDuration:M.durationMs,traceService:M.rootServiceName||"",traceName:M.rootTraceName||""}}function P(M,L){return M.data?.filter(N=>N.name==="exemplar"&&N.meta?.dataTopic==="annotations").map(N=>{const W=N.fields.find(R=>R.name==="traceId");if(W){const R=T(L),G=W.config.links||[],w=R.filter(_=>!G.some(Q=>Q.title===_.title&&Q.internal?.datasourceUid===_.internal?.datasourceUid&&isEqual(Q.internal?.query,_.internal?.query)));W.config.links=G.length?[...G,...w]:w}return N}),M}function T(M){const L=[];return M.uid&&L.push({title:"View trace",url:"",internal:{query:{query:"${__value.raw}",queryType:"traceql"},datasourceUid:M.uid,datasourceName:M?.name??"Data source not found"}}),L}function O(M,L,N){switch(N){case SearchTableType.Spans:return K(M,L);case SearchTableType.Raw:return S(M);default:return B(M,L)}}function S(M){return[createDataFrame({name:"Raw response",refId:"raw",fields:[{name:"response",type:FieldType.string,values:[JSON.stringify(M,null,2)]}]})]}function B(M,L){const N=createDataFrame({name:"Traces",refId:"traces",fields:[{name:"traceID",type:FieldType.string,config:{unit:"string",displayNameFromDS:"Trace ID",custom:{width:200},links:[{title:"Trace: ${__value.raw}",url:"",internal:{datasourceUid:L.uid,datasourceName:L.name,query:{query:"${__value.raw}",queryType:"traceql"}}}]}},{name:"startTime",type:FieldType.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"traceService",type:FieldType.string,config:{displayNameFromDS:"Service"}},{name:"traceName",type:FieldType.string,config:{displayNameFromDS:"Name"}},{name:"traceDuration",type:FieldType.number,config:{displayNameFromDS:"Duration",unit:"ms",custom:{width:120}}},{name:"nested",type:FieldType.nestedFrames}],meta:{preferredVisualisationType:"table",uniqueRowIdFields:[0]}});return M?.length?(N.length=M.length,M.sort((W,R)=>parseInt(R?.startTimeUnixNano,10)/1e6-parseInt(W?.startTimeUnixNano,10)/1e6).forEach(W=>{const R=C(W);N.fields[0].values.push(R.traceID),N.fields[1].values.push(R.startTime),N.fields[2].values.push(R.traceService),N.fields[3].values.push(R.traceName),N.fields[4].values.push(R.traceDuration?R.traceDuration:"<1ms"),W.spanSets?N.fields[5].values.push(W.spanSets.map(G=>F(W,G,L))):W.spanSet&&N.fields[5].values.push([F(W,W.spanSet,L)])}),[N]):[N]}function K(M,L){const N={};let W=!1;M?.forEach(G=>U(G).forEach(w=>{w.attributes?.forEach(_=>{N[_.key]={name:_.key,type:FieldType.string,config:{displayNameFromDS:_.key}}}),w.spans.forEach(_=>{_.name&&(W=!0),_.attributes?.forEach(Q=>{N[Q.key]={name:Q.key,type:FieldType.string,config:{displayNameFromDS:Q.key}}})})}));const R=new MutableDataFrame({name:"Spans",refId:"traces",fields:[{name:"traceIdHidden",type:FieldType.string,config:{custom:{hidden:!0}}},{name:"traceService",type:FieldType.string,config:{displayNameFromDS:"Trace Service",custom:{width:200}}},{name:"traceName",type:FieldType.string,config:{displayNameFromDS:"Trace Name",custom:{width:200}}},{name:"spanID",type:FieldType.string,config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:L.uid,datasourceName:L.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:FieldType.time,config:{displayNameFromDS:"Start time"}},{name:"name",type:FieldType.string,config:{displayNameFromDS:"Name",custom:{hidden:!W}}},...Object.values(N).sort((G,w)=>G.name.localeCompare(w.name)),{name:"duration",type:FieldType.number,config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}});return!M||!M.length?[R]:(M.sort((G,w)=>parseInt(w?.startTimeUnixNano,10)/1e6-parseInt(G?.startTimeUnixNano,10)/1e6).forEach(G=>{U(G).forEach(w=>{w.spans.forEach(_=>{R.add(I(_,w,G))})})}),[R])}const U=M=>M.spanSets||(M.spanSet?[M.spanSet]:[]),F=(M,L,N)=>{const W={};let R=!1;L.attributes?.map(_=>{W[_.key]={name:_.key,type:FieldType.string,config:{displayNameFromDS:_.key},values:[]}}),L.spans.forEach(_=>{_.name&&(R=!0),_.attributes?.forEach(Q=>{W[Q.key]={name:Q.key,type:FieldType.string,config:{displayNameFromDS:Q.key},values:[]}})});const G=new MutableDataFrame({fields:[{name:"traceIdHidden",type:FieldType.string,config:{custom:{hidden:!0}},values:[]},{name:"spanID",type:FieldType.string,values:[],config:{unit:"string",displayNameFromDS:"Span ID",custom:{width:200},links:[{title:"Span: ${__value.raw}",url:"",internal:{datasourceUid:N.uid,datasourceName:N.name,query:{query:"${__data.fields.traceIdHidden}",queryType:"traceql"},panelsState:{trace:{spanId:"${__value.raw}"}}}}]}},{name:"time",type:FieldType.time,config:{displayNameFromDS:"Start time",custom:{width:200}}},{name:"name",type:FieldType.string,values:[],config:{displayNameFromDS:"Name",custom:{hidden:!R}}},...Object.values(W).sort((_,Q)=>_.name.localeCompare(Q.name)),{name:"duration",type:FieldType.number,values:[],config:{displayNameFromDS:"Duration",unit:"ns",custom:{width:120}}}],meta:{preferredVisualisationType:"table"}}),w=createTheme();for(const _ of G.fields)_.display=getDisplayProcessor({field:_,theme:w});return L.spans.forEach(_=>{G.add(I(_,L,M))}),G};function I(M,L,N){const W=parseInt(M.startTimeUnixNano,10)/1e6,R={traceIdHidden:N.traceID,traceService:N.rootServiceName||"",traceName:N.rootTraceName||"",spanID:M.spanID,time:W,duration:parseInt(M.durationNanos,10),name:M.name};let G=[];return L.attributes&&(G=G.concat(L.attributes)),M.attributes&&(G=G.concat(M.attributes)),G.forEach(w=>{(w.value.boolValue||w.value.Value?.bool_value)&&(R[w.key]=w.value.boolValue||w.value.Value?.bool_value),(w.value.doubleValue||w.value.Value?.double_value)&&(R[w.key]=w.value.doubleValue||w.value.Value?.double_value),(w.value.intValue||w.value.Value?.int_value)&&(R[w.key]=w.value.intValue||w.value.Value?.int_value),(w.value.stringValue||w.value.Value?.string_value)&&(R[w.key]=w.value.stringValue||w.value.Value?.string_value)}),R}const V={data:[new s.k({fields:[{name:"trace",type:l.PU.trace,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"otlp"}}})]}},2774:(ne,A,e)=>{"use strict";e.d(A,{G:()=>o});var n=e(75816),a=e(73892),s=e(85618);const l=(0,s.TP)("dashboard.grafana.app","v0alpha1"),r=(0,n.xP)({reducerPath:"dashboardAPIv0alpha1",baseQuery:(0,a.W)({baseURL:l}),endpoints:()=>({})}),c=["Search"],o=r.enhanceEndpoints({addTagTypes:c}).injectEndpoints({endpoints:f=>({getSearch:f.query({query:g=>({url:"/search",params:{query:g.query,folder:g.folder,sort:g.sort}}),providesTags:["Search"]})}),overrideExisting:!1}).enhanceEndpoints({addTagTypes:["Folder","Dashboard"],endpoints:{getSearch:f=>{const g=f.query;f.providesTags=["Search","Folder","Dashboard"],g&&(f.query=u=>({...g(u),params:{...u,type:u.type}}))}}}),{useGetSearchQuery:h}=o},2863:(ne,A,e)=>{"use strict";e.d(A,{d:()=>a,w:()=>s});let n;const a=l=>{n=l},s=()=>n},2869:(ne,A,e)=>{"use strict";e.d(A,{W:()=>n});var n=(a=>(a.Incident="grafana-incident-app",a.OnCall="grafana-oncall-app",a.Irm="grafana-irm-app",a.MachineLearning="grafana-ml-app",a.Labels="grafana-labels-app",a.Slo="grafana-slo-app",a))(n||{})},2874:(ne,A,e)=>{"use strict";e.d(A,{h:()=>a,z:()=>s});let n;function a(l){if(n)throw new Error("setGetObservablePluginComponents() function should only be called once, when Grafana is starting.");n=l}function s(l){if(!n)throw new Error("getObservablePluginComponents() can only be used after the Grafana instance has started.");return n(l)}},2954:(ne,A,e)=>{"use strict";e.d(A,{A:()=>b,p:()=>o});var n=e(2543),a=e.n(n),s=e(92745),l=e(56355);const r=new l.tI({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),c=[{text:"Query",value:"query"}],i={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var o=(D=>(D.IsAbove="gt",D.IsBelow="lt",D.IsEqual="eq",D.IsNotEqual="ne",D.IsGreaterThanEqual="gte",D.IsLessThanEqual="lte",D.IsOutsideRange="outside_range",D.IsWithinRange="within_range",D.IsWithinRangeIncluded="within_range_included",D.IsOutsideRangeIncluded="outside_range_included",D.HasNoValue="no_value",D))(o||{});const h=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"eq",text:"IS EQUAL TO"},{value:"ne",text:"IS NOT EQUAL TO"},{value:"gte",text:"IS ABOVE OR EQUAL TO"},{value:"lte",text:"IS BELOW OR EQUAL TO"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"outside_range_included",text:"IS OUTSIDE RANGE INCLUDED"},{value:"within_range_included",text:"IS WITHIN RANGE INCLUDED"},{value:"no_value",text:"HAS NO VALUE"}],f=[{text:"OR",value:"or"},{text:"AND",value:"and"},{text:"LOGIC OR",value:"logic-or"}],g=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],u=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],E=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function v(D){const C=new l.tI({type:D.type,defaultParams:[]});return new l.kW(D,C)}function p(D){return D.toLowerCase().replace(/_/g,"").split(" ")[0]}function m(D){switch(p(D)){case"normal":case"ok":return{text:(0,s.t)("alerting.get-state-display-model.text.ok","OK"),iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:(0,s.t)("alerting.get-state-display-model.text.alerting","ALERTING"),iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:(0,s.t)("alerting.get-state-display-model.text.no-data","NO DATA"),iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:(0,s.t)("alerting.get-state-display-model.text.paused","PAUSED"),iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:(0,s.t)("alerting.get-state-display-model.text.pending","PENDING"),iconClass:"hourglass",stateClass:"alert-state-warning"};case"recovering":return{text:(0,s.t)("alerting.get-state-display-model.text.recovering","RECOVERING"),iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:(0,s.t)("alerting.get-state-display-model.text.firing","FIRING"),iconClass:"fire",stateClass:""};case"inactive":return{text:(0,s.t)("alerting.get-state-display-model.text.inactive","INACTIVE"),iconClass:"check",stateClass:""};case"error":return{text:(0,s.t)("alerting.get-state-display-model.text.error","ERROR"),iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:(0,s.t)("alerting.get-state-display-model.text.unknown","UNKNOWN"),iconClass:"question-circle",stateClass:".alert-state-paused"}}}function y(D,C){return(0,n.reduce)(D,(P,T)=>(T.metric!==void 0&&T.value!==void 0&&P.push(T.metric+"="+T.value),T.Metric!==void 0&&T.Value!==void 0&&P.push(T.Metric+"="+T.Value),P),[]).join(C)}function d(D){return(0,n.isArray)(D.data)?y(D.data,", "):(0,n.isArray)(D.data.evalMatches)?y(D.data.evalMatches,", "):D.data.error?"Error: "+D.data.error:""}function x(D){return(0,n.isArray)(D)?y(D,", "):(0,n.isArray)(D.evalMatches)?y(D.evalMatches,", "):D.error?"Error: "+D.error:""}const b={alertQueryDef:r,getStateDisplayModel:m,conditionTypes:c,evalFunctions:h,evalOperators:f,noDataModes:u,executionErrorModes:E,reducerTypes:g,createReducerPart:v,getAlertAnnotationInfo:d,getAlertAnnotationText:x,alertStateSortScore:i}},3023:(ne,A,e)=>{"use strict";e.d(A,{_:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({children:c,className:i,...o})=>{const h=(0,s.of)(r);return(0,n.jsx)("div",{className:(0,a.cx)(h,i),...o,children:c})},r=c=>(0,a.css)({backgroundColor:c.components.panel.background,border:`1px solid ${c.components.panel.borderColor}`,borderRadius:c.shape.radius.default})},3204:(ne,A,e)=>{"use strict";e.d(A,{l:()=>P});var n=e(2543),a=e(45863),s=e(81041);const l=()=>new s.c(new URL(e.p+e.u(7061),e.b));var r=e(66507),c=e(4506),i=e(69523),o=e(6048),h=e(49e3),f=e(51906),g=e(11534),u=e(7094),E=e(32540),v=e(81657),p=e(25953),m=e(8835),y=e(93389),d=e(97335),x=e(97883),b=e(30643),D=e(98279),C=e(44741);class P{constructor(S){this._dashboard=S}static isUpdatingPersistedState({payload:S}){const B=Object.keys(S.partialUpdate);return B.length===0?!1:!!(S.changedObject instanceof y.U||S.changedObject instanceof v.v||S.changedObject instanceof a.Eb&&(B.length>1||B[0]!=="_renderCounter")||S.changedObject instanceof a.dt&&!Object.prototype.hasOwnProperty.call(S.partialUpdate,"data")||S.changedObject instanceof a.Es&&!Object.prototype.hasOwnProperty.call(S.partialUpdate,"data")||S.changedObject instanceof E.$||S.changedObject instanceof a.WM&&(Object.prototype.hasOwnProperty.call(S.partialUpdate,"intervals")||Object.prototype.hasOwnProperty.call(S.partialUpdate,"refresh"))||S.changedObject instanceof u.u&&Object.prototype.hasOwnProperty.call(S.partialUpdate,"name")||S.changedObject instanceof a.Gg.K2||S.changedObject instanceof a.kh||S.changedObject instanceof y.U||S.changedObject instanceof a.hy||S.changedObject instanceof g.H$&&Object.keys(S.partialUpdate).some(K=>g.vk.includes(K))||S.changedObject instanceof a.JZ||S.changedObject instanceof f.x&&Object.prototype.hasOwnProperty.call(S.partialUpdate,"hideTimeControls")||S.changedObject instanceof a.Pj||S.changedObject instanceof h.g&&!Object.prototype.hasOwnProperty.call(S.partialUpdate,"data")||S.changedObject instanceof a.Gg.en||(0,C.c7)(S.changedObject)||S.changedObject instanceof x.V||S.changedObject instanceof d.o||S.changedObject instanceof D.K||S.changedObject instanceof b.V||S.changedObject instanceof m.X2||S.changedObject instanceof p.X||S.changedObject instanceof i.H||S.changedObject instanceof c.K||S.changedObject instanceof o.M||S.changedObject instanceof r.t)}detectSaveModelChanges(){const S=this._dashboard.getSaveModel(),B=this._dashboard.getInitialSaveModel(),K=typeof S=="object"?JSON.parse(JSON.stringify(S)):S,U=typeof B=="object"?JSON.parse(JSON.stringify(B)):B;this._changesWorker?.postMessage({initial:U,changed:K})}hasMetadataChanges(){return this._dashboard.state.meta.folderUid!==this._dashboard.getInitialState()?.meta.folderUid}updateIsDirty(S){S||this.hasMetadataChanges()?this._dashboard.state.isDirty||this._dashboard.setState({isDirty:!0}):this._dashboard.state.isDirty&&this._dashboard.setState({isDirty:!1})}init(){this._changesWorker=l()}startTrackingChanges(){this._changesWorker||this.init(),this._changesWorker.onmessage=B=>{this.updateIsDirty(!!B.data.hasChanges)};const S=T(this.detectSaveModelChanges.bind(this));this._changeTrackerSub=this._dashboard.subscribeToEvent(a.bZ,B=>{P.isUpdatingPersistedState(B)&&S()})}stopTrackingChanges(){this._changeTrackerSub?.unsubscribe()}terminate(){this.stopTrackingChanges(),this._changesWorker?.terminate(),this._changesWorker=void 0}}function T(O){return(0,n.debounce)(O,250)}},3260:(ne,A,e)=>{"use strict";e.d(A,{xJ:()=>G,N9:()=>Q,ol:()=>B,yt:()=>K,uS:()=>j,Xs:()=>ce,mi:()=>re,Uy:()=>se,Ce:()=>Z,UX:()=>te,dx:()=>q,hS:()=>ae,YS:()=>k,$Y:()=>V,V2:()=>ee,pL:()=>_,nv:()=>O,J7:()=>L});var n=e(74848),a=e(22803),s=e(2543),l=e(16817),r=e(20877),c=e(25229),i=e(5556),o=e(54092),h=e(27489),f=e(43173),g=e(22787),u=e(45229),E=e(95027),v=e(87745),p=e(3548),m=e(22465),y=e(92745),d=e(34999);const x=({pluginId:ue,extensionTitle:X})=>(0,n.jsx)(d.F,{title:(0,y.t)("plugins.extensions.extension-error-alert-title",'Extension failed to load: "{{pluginId}}/{{extensionTitle}}"',{pluginId:ue,extensionTitle:X}),severity:"error",children:(0,y.t)("plugins.extensions.extension-error-alert-description","Check the console for more details on the error.")});var b=e(96016);const D=({children:ue,pluginId:X,extensionTitle:le,log:he=b.R,fallbackAlwaysVisible:fe=!1})=>(0,n.jsx)(m.K,{onError:(Ce,Ae)=>{he.error(`Extension "${X}/${le}" failed to load.`,{message:Ce.message,componentStack:Ae.componentStack??"",digest:Ae.digest??""})},fallback:()=>ee()||fe?(0,n.jsx)(x,{pluginId:X,extensionTitle:le}):null,children:ue});var C=e(9453);function P(ue,X=""){return(...le)=>{try{return ue(...le)}catch(he){he instanceof Error&&console.warn(`${X}${he.message}`)}}}function T(ue){return async X=>{const{title:le,body:he,width:fe,height:Ce}=X;u.A.publish(new v.S8({component:O({pluginId:ue.pluginId,extensionTitle:ue.title,Component:S({title:le,body:he,width:fe,height:Ce,config:ue}),log:b.R})}))}}const O=({pluginId:ue,extensionTitle:X,Component:le,log:he})=>Ce=>{const{error:Ae,loading:_e,value:Xe}=(0,l.A)(()=>(0,E.x)(ue,{showErrorAlert:!1}));return _e?null:Ae?(he.error(`Could not fetch plugin meta information for "${ue}", aborting. (${Ae.message})`,{stack:Ae.stack??"",message:Ae.message}),null):Xe?(0,n.jsx)(r.a,{meta:Xe,children:(0,n.jsx)(D,{pluginId:ue,extensionTitle:X,log:he,children:(0,n.jsx)(p.i,{pluginId:ue,children:(0,n.jsx)(le,{...L(Ce,{log:he,source:"extension",pluginId:ue,pluginVersion:Xe.info?.version})})})})}):(he.error(`Fetched plugin meta information is empty for "${ue}", aborting.`),null)},S=({title:ue,body:X,width:le,height:he,config:fe})=>{const Ce=(0,a.css)({width:le,height:he});return({onDismiss:_e})=>(0,n.jsx)(g.a,{title:ue,className:Ce,isOpen:!0,onDismiss:_e,onClickBackdrop:_e,children:(0,n.jsx)(D,{pluginId:fe.pluginId,extensionTitle:fe.title,fallbackAlwaysVisible:!0,log:b.R,children:(0,n.jsx)("div",{"data-plugin-sandbox":fe.pluginId,"data-testid":"plugin-sandbox-wrapper",children:(0,n.jsx)(X,{onDismiss:_e})})})})};function B(ue,X=new Map){if(!ue||typeof ue!="object"||Object.isFrozen(ue))return ue;const le=Array.isArray(ue)?[...ue]:{...ue};if(X.has(ue))return X.get(ue);X.set(ue,le);const he=Reflect.ownKeys(le);for(const fe of he){const Ce=Array.isArray(le)?le[Number(fe)]:le[fe];Ce&&(typeof Ce=="object"||typeof Ce=="function")&&(Array.isArray(le)?le[Number(fe)]=B(Ce,X):le[fe]=B(Ce,X))}return Object.freeze(le)}function K(ue,X,le){const he=`${ue}${X}${le}`;return Array.from(he).reduce((fe,Ce)=>Math.imul(31,fe)+Ce.charCodeAt(0)|0,0).toString()}const U=Symbol("isReadOnlyProxy"),F=Symbol("isMutationObserverProxy");class I extends Error{constructor(X){super(X??"Mutating a read-only proxy object"),this.name="ReadOnlyProxyError"}}function V(ue){if(!ue||typeof ue!="object"||W(ue))return ue;const X=new WeakMap;return new Proxy(ue,{defineProperty:()=>!1,deleteProperty:()=>!1,isExtensible:()=>!1,set:()=>!1,get(le,he,fe){if(he===U)return!0;const Ce=Reflect.get(le,he,fe);return(0,c.Ar)(Ce)?(0,c.KQ)(Ce):(0,s.isObject)(Ce)||(0,s.isArray)(Ce)?(X.has(Ce)||X.set(Ce,V(Ce)),X.get(Ce)):Ce}})}function M(ue,X){if(!ue||typeof ue!="object"||R(ue))return ue;const{log:le=b.R,source:he="extension",pluginId:fe="unknown",pluginVersion:Ce="unknown"}=X??{},Ae=new WeakMap,_e=ee()?le.error.bind(le):le.warning.bind(le);return new Proxy(ue,{deleteProperty(Xe,De){return _e(`Attempted to delete object property "${String(De)}" from ${he} with id ${fe} and version ${Ce}`,{stack:new Error().stack??""}),Reflect.deleteProperty(Xe,De),!0},defineProperty(Xe,De,Me){return le.debug(`Attempted to define object property "${String(De)}" from ${he} with id ${fe} and version ${Ce}`,{stack:new Error().stack??""}),Reflect.defineProperty(Xe,De,Me),!0},set(Xe,De,Me){return _e(`Attempted to mutate object property "${String(De)}" from ${he} with id ${fe} and version ${Ce}`,{stack:new Error().stack??""}),Reflect.set(Xe,De,Me),!0},get(Xe,De,Me){if(De===F)return!0;const Te=Reflect.get(Xe,De,Me),$e=Reflect.getOwnPropertyDescriptor(Xe,De);return $e&&!$e.configurable&&!$e.writable?Te:(0,c.Ar)(Te)?(0,c.KQ)(Te):(0,s.isObject)(Te)||(0,s.isArray)(Te)?(Ae.has(Te)||Ae.set(Te,M(Te,{log:le,source:he,pluginId:fe,pluginVersion:Ce})),Ae.get(Te)):Te}})}function L(ue,X){if(!ue||typeof ue!="object")return ue;const{log:le=b.R,source:he="extension",pluginId:fe="unknown",pluginVersion:Ce="unknown"}=X??{};return M((0,s.cloneDeep)(ue),{log:le,pluginId:fe,pluginVersion:Ce,source:he})}function N(ue){return typeof ue=="object"&&ue!==null}function W(ue){return N(ue)&&ue[U]===!0}function R(ue){return N(ue)&&ue[F]===!0}function G(ue){const X={...ue};return X}function w(ue){}function _(ue,X){return ue.length<X?ue:`${ue.slice(0,X-3).trimEnd()}...`}function Q(ue){const X={},le=[];for(const fe of ue){const Ce=fe.category;if(!Ce){le.push({text:_(fe.title,25),href:fe.path,onClick:fe.onClick});continue}Array.isArray(X[Ce])||(X[Ce]=[]),X[Ce].push({text:_(fe.title,25),href:fe.path,onClick:fe.onClick})}const he=Object.keys(X).reduce((fe,Ce)=>(fe.push({text:_(Ce,25),type:"group",subMenu:X[Ce]}),fe),[]);return le.length>0&&(he.length>0&&he.push({text:"divider",type:"divider"}),Array.prototype.push.apply(he,le)),he}function ae(ue,X,le,he){try{const fe=X.configure?.(he);if(fe===void 0)return;let{title:Ce=X.title,description:Ae=X.description,path:_e=X.path,icon:Xe=X.icon,category:De=X.category,...Me}=fe;return(0,C.lq)(fe,`The configure() function for "${X.title}" returned a promise, skipping updates.`),_e&&(0,C.wy)(ue,_e),(0,C.aY)({title:Ce,description:Ae},["title","description"]),Object.keys(Me).length>0&&le.warning(`Extension "${X.title}", is trying to override restricted properties: ${Object.keys(Me).join(", ")} which will be ignored.`),{title:Ce,description:Ae,path:_e,icon:Xe,category:De}}catch(fe){fe instanceof Error&&le.error(`Failed to configure link with title "${X.title}"`,{stack:fe.stack??"",message:fe.message});return}}function q(ue,X,le,he,fe){const{onClick:Ce}=le;if(Ce)return function(_e){try{(0,h.rR)("ui_extension_link_clicked",{pluginId:ue,extensionPointId:X,title:le.title,category:le.category});const Xe={context:fe,openModal:T(le),openSidebar:(Me,Te)=>{u.A.publish(new v.Am({props:Te,pluginId:ue,componentTitle:Me}))},closeSidebar:()=>{u.A.publish(new v.KU)}};he.debug(`onClick '${le.title}' at '${X}'`);const De=Ce(_e,Xe);(0,C.yL)(De)&&De.catch(Me=>{Me instanceof Error&&he.error(Me.message,{message:Me.message,stack:Me.stack??""})})}catch(Xe){Xe instanceof Error&&he.error(Xe.message,{message:Xe.message,stack:Xe.stack??""})}}}function k(ue,X,le){return i.kM.appendQueryToUrl(X,i.kM.toUrlParams({uel_pid:ue,uel_epid:le}))}const ee=()=>f.$.buildInfo.env==="development",j=(ue=[])=>Object.values(f.$.apps).filter(X=>ue.includes(X.id)),J=ue=>ue.split("/")[0],Z=ue=>Object.values(f.$.apps).filter(X=>X.extensions.addedLinks.some(le=>le.targets.includes(ue))||X.extensions.addedComponents.some(le=>le.targets.includes(ue))).map(X=>X.id).reduce((X,le)=>[...X,le,...ie(le)],[]),te=ue=>new Map(Z(ue).map(X=>{const le=f.$.apps[X];if(!(!le||!le.extensions.addedComponents.some(he=>he.targets.includes(ue))&&!le.extensions.addedLinks.some(he=>he.targets.includes(ue))))return[X,{addedComponents:le.extensions.addedComponents.filter(he=>he.targets.includes(ue)),addedLinks:le.extensions.addedLinks.filter(he=>he.targets.includes(ue))}]}).filter(X=>X!==void 0)),se=ue=>[J(ue)].reduce((le,he)=>[...le,he,...ie(he)],[]),ie=(ue,X=[])=>{if(!f.$.apps[ue])return[];if(X.includes(ue))return[];const le=f.$.apps[ue].dependencies.extensions.exposedComponents.map(J);return le.reduce((he,fe)=>[...he,...ie(fe,[...X,ue])],le).filter(he=>he!==ue)},ce=()=>{const ue=["cloud-home-app"];return Object.values(f.$.apps).filter(X=>ue.includes(X.id))},re=()=>{const ue=Z(o.SM.DashboardPanelMenu),X=ce().map(he=>he.id),le=he=>!X.includes(he.id);return Object.values(f.$.apps).filter(he=>le(he)&&(he.preload||ue.includes(he.id)))}},3263:(ne,A,e)=>{"use strict";e.d(A,{o:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(29647),r=e(63142),c=e(53568),i=e(79233),o=e(37864),h=e(3431);const f=14;function g({value:u,onChange:E,Component:v,className:p,placeholder:m,inputPlaceholder:y,disabled:d,autofocus:x=!1,onExpandedChange:b,...D}){const C=(0,s.useRef)(null),[P,T]=(0,s.useState)(u),[O,S]=(0,s.useState)((0,c.kD)((u||"").toString(),f).width),[B,,K,U]=(0,h.Q)(x,b),F=(0,r.of)(o.m);if((0,l.A)(C,()=>{U(!1),E(P)}),!K)return(0,n.jsx)(B,{disabled:d,Component:v||(0,n.jsx)(i.c,{className:(0,a.cx)(F.segment,{[F.queryPlaceholder]:m!==void 0&&!P,[F.disabled]:d},p),children:u||m})});const I=(0,a.css)({width:`${Math.max(O+20,32)}px`});return(0,n.jsx)("input",{...D,ref:C,autoFocus:!0,className:(0,a.cx)("gf-form gf-form-input",I),value:P,placeholder:y,onChange:V=>{const{width:M}=(0,c.kD)(V.target.value,f);S(M),T(V.target.value)},onBlur:()=>{U(!1),E(P)},onKeyDown:V=>{[13,27].includes(V.keyCode)&&(U(!1),E(P))}})}},3271:(ne,A,e)=>{"use strict";e.d(A,{c:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({direction:c="horizontal",spacing:i=2})=>{const o=(0,s.of)(r,i);return c==="vertical"?(0,n.jsx)("div",{className:o.verticalDivider}):(0,n.jsx)("hr",{className:o.horizontalDivider})};l.displayName="Divider";const r=(c,i)=>({horizontalDivider:(0,a.css)({borderTop:`1px solid ${c.colors.border.weak}`,margin:c.spacing(i,0),width:"100%"}),verticalDivider:(0,a.css)({borderRight:`1px solid ${c.colors.border.weak}`,margin:c.spacing(0,i),height:"100%"})})},3281:(ne,A,e)=>{"use strict";e.d(A,{ES:()=>c,So:()=>h,Y_:()=>i,cc:()=>r,tH:()=>l});var n=e(18600),a=e(21275),s=e(59857);function l(f){switch(f){case"never":return a.CO.never;case"onDashboardLoad":return a.CO.onDashboardLoad;case"onTimeRangeChanged":return a.CO.onTimeRangeChanged;default:return a.CO.never}}function r(f){switch(f){case"dontHide":return s.zL.dontHide;case"hideLabel":return s.zL.hideLabel;case"hideVariable":return s.zL.hideVariable;default:return s.zL.dontHide}}function c(f){switch(f){case"disabled":return a.ZG.disabled;case"numericalAsc":return a.ZG.numericalAsc;case"alphabeticalCaseInsensitiveAsc":return a.ZG.alphabeticalCaseInsensitiveAsc;case"alphabeticalCaseInsensitiveDesc":return a.ZG.alphabeticalCaseInsensitiveDesc;case"numericalDesc":return a.ZG.numericalDesc;case"naturalAsc":return a.ZG.naturalAsc;case"naturalDesc":return a.ZG.naturalDesc;case"alphabeticalAsc":return a.ZG.alphabeticalAsc;case"alphabeticalDesc":return a.ZG.alphabeticalDesc;default:return a.ZG.disabled}}function i(f){switch(f){case"Crosshair":return a.yV.Crosshair;case"Tooltip":return a.yV.Tooltip;case"Off":return a.yV.Off;default:return a.$C}}function o(f){switch(f){case"true":return n.W.True;case"false":return n.W.False;case"null":return n.W.Null;case"nan":return n.W.NaN;case"null+nan":return n.W.NullAndNaN;case"empty":return n.W.Empty;default:throw new Error(`Unknown match type: ${f}`)}}function h(f){const g=E=>{switch(E){case"absolute":return a.Ol.Absolute;case"percentage":return a.Ol.Percentage;default:return a.Ol.Absolute}},u={...f.defaults};return f.defaults.mappings&&(u.mappings=f.defaults.mappings.map(E=>{switch(E.type){case"value":return{...E,type:a.dM.ValueToText};case"range":return{...E,type:a.dM.RangeToText};case"regex":return{...E,type:a.dM.RegexToText};case"special":return{...E,options:{...E.options,match:o(E.options.match)},type:a.dM.SpecialValue};default:return E}})),f.defaults.thresholds&&(u.thresholds={...f.defaults.thresholds,mode:g(f.defaults.thresholds.mode)}),{...f,defaults:u}}},3371:(ne,A,e)=>{"use strict";e.d(A,{D1:()=>r,bn:()=>l,lv:()=>s});var n=e(45863);const a="-clone-";function s(c,i){return`${c}${a}${i}`}function l(c){let i=c;do{if("repeatSourceKey"in i.state&&i.state.repeatSourceKey)return!0;i=i.parent}while(i);return!1}function r(c,i,o){return new n.Pj({variables:[new n.xc({name:c.state.name,value:i,text:o,isMulti:c.state.isMulti,includeAll:c.state.includeAll})]})}},3431:(ne,A,e)=>{"use strict";e.d(A,{Q:()=>r});var n=e(74848),a=e(96540),s=e(63142),l=e(45861);const r=(c,i)=>{const o=(0,a.useRef)(null),h=(0,s.of)(l.my),[f,g]=(0,a.useState)(c),[u,E]=(0,a.useState)(0),v=m=>{g(m),i&&i(m)};return[({Component:m,onClick:y,disabled:d})=>(0,n.jsx)("button",{type:"button",className:h,ref:o,disabled:d,onClick:()=>{v(!0),o&&o.current&&E(o.current.clientWidth*1.25),y?.()},children:m}),u,f,v]}},3548:(ne,A,e)=>{"use strict";e.d(A,{i:()=>r});var n=e(74848),a=e(15874),s=e(43173);const l=s.$.featureToggles.restrictedPluginApis?{}:{};function r({children:c,pluginId:i}){return(0,n.jsx)(a.Bm,{pluginId:i,apis:l,apiAllowList:s.$.bootData.settings.pluginRestrictedAPIsAllowList,apiBlockList:s.$.bootData.settings.pluginRestrictedAPIsBlockList,children:c})}},3594:(ne,A,e)=>{"use strict";e.d(A,{R:()=>a,w:()=>n});const n=s=>Object.keys(s).reduce((l,r)=>(s[r]!==void 0&&(l[r]=s[r]),l),{}),a=s=>typeof s=="object"&&s!==null&&Object.keys(s).length===0},3642:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>C,QH:()=>y,Jd:()=>d});var n=e(74848),a=e(22803),s=e(73287),l=e(92745),r=e(31200),c=e(27489),i=e(63142),o=e(76319),h=e(44720),f=e(53593);const g=(P,T)=>({rowWrapper:(0,a.css)({position:"relative",minWidth:y,paddingRight:"5px"}),rowValue:(0,a.css)({whiteSpace:"nowrap",overflowX:"auto",MsOverflowStyle:"none",scrollbarWidth:"none",display:"block",paddingRight:"10px","&::-webkit-scrollbar":{display:"none"},"&:before":{pointerEvents:"none",content:"''",width:"100%",height:"100%",position:"absolute",left:0,top:0,background:`linear-gradient(to right, transparent calc(100% - 25px), ${P.colors.background.primary})`}}),rowValuesWrap:(0,a.css)({paddingLeft:d,width:`calc(${T} * ${y})`,display:"flex"})}),u=({totalNumberOfValues:P,values:T,hideFieldsWithoutValues:O})=>{const S=(0,i.of)(g,P);return(0,n.jsx)("div",{role:"cell",className:S.rowValuesWrap,children:T?.map(B=>O&&(B.value===void 0||B.value===f.M)?null:(0,n.jsx)("span",{className:S.rowWrapper,children:(0,n.jsx)("span",{className:S.rowValue,children:B.value})},B.key))})},E=P=>{const T=P.isDark?"#ce9178":"#a31515",O=P.isDark?"#73bf69":"#56a64b";return{metricName:(0,a.css)({color:O}),metricValue:(0,a.css)({color:T}),expanded:(0,a.css)({display:"block",textIndent:"1em"})}},p=({value:P,index:T,length:O,isExpandedView:S})=>{const B=(0,i.of)(E),K=P.key,U=P.value;return(0,n.jsxs)("span",{className:S?B.expanded:"",children:[(0,n.jsx)("span",{className:B.metricName,children:K}),(0,n.jsx)("span",{children:"="}),(0,n.jsx)("span",{children:'"'}),(0,n.jsx)("span",{className:B.metricValue,children:U}),(0,n.jsx)("span",{children:'"'}),T<O-1&&(0,n.jsx)("span",{children:", "})]},T)},m="20px",y="80px",d="25px",x=(P,T,O)=>({rowWrapper:(0,a.css)({borderBottom:`1px solid ${P.colors.border.medium}`,display:"flex",position:"relative",paddingLeft:"22px",alignItems:O?"":"center",height:O?"":"100%"}),copyToClipboardWrapper:(0,a.css)({position:"absolute",left:0,bottom:O?"":"0",top:O?"4px":"0",margin:"auto",zIndex:1,height:"16px",width:"16px"}),rowLabelWrapWrap:(0,a.css)({position:"relative",width:`calc(100% - (${T} * ${y}) - ${d})`}),rowLabelWrap:(0,a.css)({whiteSpace:"nowrap",overflowX:"auto",MsOverflowStyle:"none",scrollbarWidth:"none",paddingRight:m,"&::-webkit-scrollbar":{display:"none"},"&:after":{pointerEvents:"none",content:"''",width:"100%",height:"100%",position:"absolute",left:0,top:0,background:`linear-gradient(to right, transparent calc(100% - ${m}), ${P.colors.background.primary})`}})});function b(P){let T=[],O=[];for(const S in P)S in P&&P[S]&&!S.includes("Value")?T.push({key:S,value:P[S]}):S in P&&P[S]&&S.includes("Value")&&O.push({key:S,value:P[S]});return{values:O,attributeValues:T}}const C=({listItemData:P,listKey:T,totalNumberOfValues:O,valueLabels:S,isExpandedView:B})=>{const{__name__:K,...U}=P,F=(0,r.Rq)(K??""),[I,V]=(0,s.A)(),M=S?.length??O,L=(0,i.of)(x,M,B),{values:N,attributeValues:W}=b(U),R=_=>_==="\u221E"||_==="Infinity"?"+Inf":_,G=`${F?K:""}{${F?"":`"${K}", `}${W.map(_=>`${(0,r.Nc)(_.key)}="${R(_.value)}"`)}}`,w=!!(S&&S?.length);return(0,n.jsxs)(n.Fragment,{children:[S!==void 0&&B&&(0,n.jsx)(h.d,{valueLabels:S,expanded:B}),(0,n.jsxs)("div",{className:L.rowWrapper,children:[(0,n.jsx)("span",{className:L.copyToClipboardWrapper,children:(0,n.jsx)(o.K,{tooltip:(0,l.t)("explore.raw-list-item.tooltip-copy-to-clipboard","Copy to clipboard"),onClick:()=>{(0,c.rR)("grafana_explore_prometheus_instant_query_ui_raw_toggle_expand"),V(G)},name:"copy"})}),(0,n.jsx)("span",{role:"cell",className:L.rowLabelWrapWrap,children:(0,n.jsxs)("div",{className:L.rowLabelWrap,children:[!!K&&F&&(0,n.jsx)("span",{children:K}),(0,n.jsx)("span",{children:"{"}),!F&&!!K&&K!==""&&(0,n.jsxs)("span",{children:['"',K,'"',", "]}),(0,n.jsx)("span",{children:W.map((_,Q)=>(0,n.jsx)(p,{isExpandedView:B,value:_,index:Q,length:W.length},Q))}),(0,n.jsx)("span",{children:"}"})]})}),(0,n.jsx)(u,{hideFieldsWithoutValues:w,totalNumberOfValues:M,values:N})]},T)]})}},3688:(ne,A,e)=>{"use strict";e.d(A,{y:()=>n});function n(a){return"isDashboardLayoutItem"in a}},3845:(ne,A,e)=>{"use strict";e.d(A,{f:()=>se,R:()=>te});var n=e(74848),a=e(96540),s=e(92745),l=e(43173),r=e(34999),c=e(6975),i=e(50201),o=e(41654),h=e(66404),f=e(45967),g=e(45861),u=e(74268),E=e(70327),v=e(16692),p=e(52161),m=e(77256),y=e(8207),d=e(2543),x=e(80011),b=e(31286),D=e(30703),C=e(3271),P=e(34753),T=e(1199),O=e(61371);const S=({info:ie})=>{const{createdAt:ce,createdBy:re,version:ue,message:X=""}=ie,le=(0,x.fq)(ce);return(0,n.jsxs)(s.x6,{i18nKey:"core.versionHistory.comparison.header.text",children:["Version ",{version:ue}," updated by ",{createdBy:re}," (",{ageString:le},") ",{message:X}]})},B=({oldSummary:ie,newSummary:ce,oldVersion:re,newVersion:ue,preprocessVersion:X=d.identity,showRestoreButton:le=!1,onRestore:he})=>{const fe=(0,O.G4)(X(re),X(ue)),Ce=Object.entries(fe).length===0,[Ae,_e]=(0,a.useState)(Ce);return(0,n.jsxs)(o.B,{gap:2,direction:"column",children:[(0,n.jsx)(b.a,{children:(0,n.jsxs)(h.E,{variant:"h5",element:"h4",children:[(0,n.jsx)(S,{info:ie}),(0,n.jsx)(D.I,{name:"arrow-right"}),(0,n.jsx)(S,{info:ce})]})}),(0,n.jsxs)(b.a,{children:[Ce&&(0,n.jsx)(i.p,{message:(0,s.t)("core.versionHistory.no-properties-changed","No relevant properties changed"),variant:"not-found",hideImage:!0,children:(0,n.jsx)(s.x6,{i18nKey:"core.versionHistory.view-json-diff",children:"View JSON diff to see all changes"})}),Object.entries(fe).map(([Xe,De])=>(0,n.jsx)(P.D,{diffs:De,title:Xe},Xe)),(0,n.jsx)(C.c,{})]}),(0,n.jsxs)(o.B,{gap:2,direction:"row",justifyContent:"space-between",children:[(0,n.jsxs)(g.$n,{variant:"secondary",onClick:()=>{_e(!Ae)},children:[Ae&&(0,n.jsx)(s.x6,{i18nKey:"core.versionHistory.comparison.header.hide-json-diff",children:"Hide JSON diff "}),!Ae&&(0,n.jsx)(s.x6,{i18nKey:"core.versionHistory.comparison.header.show-json-diff",children:"Show JSON diff "})]}),le&&(0,n.jsx)(g.$n,{variant:"destructive",onClick:he,icon:"history",children:(0,n.jsxs)(s.x6,{i18nKey:"alerting.alertVersionHistory.restore-version",children:["Restore to version ",{version:ie.version}]})})]}),Ae&&(0,n.jsx)(T.M,{oldValue:JSON.stringify(re,null,2),newValue:JSON.stringify(ue,null,2)})]})};var K=e(54148),U=e(5556),F=e(71599),I=e(44109),V=e(20437),M=e(23390),L=e(80218),N=e(94646),W=e(29609);function R(){const[ie]=(0,M.pU)();return(0,L.Yb)(async(ce,re)=>{const ue=(0,W.I2)(re),X=(0,N.mw)(ue,ce);return ie.execute(ue,X,ce,{dataSourceName:p.hY,namespaceName:ce.grafana_alert.namespace_uid,groupName:ce.grafana_alert.rule_group})})}var G=e(21241);const w=({isOpen:ie,baseVersion:ce,versionToRestore:re,ruleIdentifier:ue,onDismiss:X,onRestoreSucess:le,onRestoreError:he})=>{const{result:fe}=(0,I.Ll)({ruleIdentifier:ue}),Ce=(0,K.Zp)(),[Ae,{error:_e}]=R(),Xe=(0,s.t)("alerting.alertVersionHistory.restore-modal.title","Restore version"),De=(0,s.t)("alerting.alertVersionHistory.restore-modal.error","Could not restore alert rule version "),Me=_e?"Manually restore rule":(0,s.t)("alerting.alertVersionHistory.restore-modal.confirm","Yes, restore configuration"),Te=ce&&re?(0,O.G4)((0,G.L0)(ce),(0,G.L0)(re)):void 0;async function $e(){if(!(!re||!fe))return Ae.execute(re,fe).then(()=>{X(),le()}).catch(Ke=>{he(Ke)})}async function Re(){if(!re||!fe)return;const Ke=(0,V.QX)({...fe,rule:re}),Ve=U.kM.renderUrl(`/alerting/${ue.uid}/edit`,{isManualRestore:!0,defaults:JSON.stringify(Ke),returnTo:window.location.pathname+window.location.search});Ce(Ve)}return(0,n.jsx)(F.u,{isOpen:ie,title:Xe,confirmText:Me,confirmButtonVariant:_e?"primary":"destructive",body:(0,n.jsxs)(o.B,{direction:"column",gap:2,children:[!_e&&(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.restore-modal.body",children:"Are you sure you want to restore the alert rule definition to this version? All unsaved changes will be lost."}),(0,n.jsx)(h.E,{variant:"h6",children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.restore-modal.summary",children:"Summary of changes to be applied:"})}),(0,n.jsx)("div",{children:Te&&Object.entries(Te).map(([Ke,Ve])=>(0,n.jsx)(P.D,{diffs:Ve,title:Ke},Ke))}),_e&&(0,n.jsxs)(r.F,{severity:"warning",title:De,children:[(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.restore-manually",children:"Your alert rule could not be restored. This may be due to changes to other entities such as contact points, data sources etc. Please manually restore the rule version"}),(0,n.jsx)("pre",{style:{marginBottom:0},children:(0,n.jsx)("code",{children:(0,m.JZ)(_e)})})]})]}),onConfirm:_e?Re:$e,onDismiss:X})},_=({oldVersion:ie,newVersion:ce,ruleIdentifier:re,isNewLatest:ue,setShowDrawer:X,onRestoreSuccess:le,onRestoreError:he,canRestore:fe})=>{const[Ce,Ae]=(0,a.useState)(!1),_e=(0,a.useCallback)(()=>X(!1),[X]),Xe=(0,G.Lw)(ie),De=(0,G.Lw)(ce);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y._,{onClose:()=>X(!1),title:(0,s.t)("alerting.alertVersionHistory.comparing-versions","Comparing versions"),children:(0,n.jsx)(B,{oldSummary:Xe,oldVersion:ie,newSummary:De,newVersion:ce,preprocessVersion:G.L0,showRestoreButton:ue&&fe,onRestore:()=>Ae(!0)})}),Ce&&(0,n.jsx)(w,{ruleIdentifier:re,baseVersion:ce,versionToRestore:ie,isOpen:Ce,onDismiss:_e,onRestoreSucess:le,onRestoreError:he})]})};var Q=e(32635),ae=e(99887),q=e(27594),k=e(85835),ee=e(49914);const j=20;function J({onVersionsChecked:ie,onCompareSingleVersion:ce,ruleVersions:re,disableSelection:ue,checkedVersions:X,onRestoreSuccess:le,onRestoreError:he,canRestore:fe}){const[Ce,Ae]=(0,a.useState)(!1),[_e,Xe]=(0,a.useState)(),De=_e?.grafana_alert?.uid??"",Me=(0,a.useMemo)(()=>({ruleSourceName:p.hY,uid:De}),[De]),Te=Ve=>{Ae(!0),Xe(Ve)},$e=()=>{Ae(!1)},Re=(0,s.t)("alerting.alertVersionHistory.unknown","Unknown"),Ke=[{disableGrow:!0,id:"id",header:(0,s.t)("core.versionHistory.table.version","Version"),cell:({row:Ve})=>{const Se=String(Ve.original.grafana_alert.version),Ye=X.has(String(Se??!1))??!1;return(0,n.jsx)(o.B,{direction:"row",children:(0,n.jsx)(Q.S,{label:Se,checked:Ye,disabled:ue&&!Ye,onChange:()=>{ie(Se)}})})}},{id:"createdBy",header:(0,s.t)("core.versionHistory.table.updatedBy","Updated By"),disableGrow:!0,cell:({row:Ve})=>(0,n.jsx)(ee.m,{user:Ve.original.grafana_alert.updated_by})},{id:"created",header:(0,s.t)("core.versionHistory.table.updated","Date"),disableGrow:!0,cell:({row:Ve})=>{const Se=Ve.original.grafana_alert.updated;return Se?(0,x.LE)(Se)+" ("+(0,x.fq)(Se)+")":Re}},{id:"diff",disableGrow:!0,cell:({rows:Ve,row:Se})=>{const Ue=Se.index===re.length-1?{}:Ve[Se.index+1]?.original,je=Se.original,Qe=(0,k.h)(Ue,je),He=`+${Qe.added}`,Je=`-${Qe.removed}`;return(0,n.jsxs)(o.B,{alignItems:"baseline",gap:.5,children:[(0,n.jsx)(h.E,{color:"success",variant:"bodySmall",children:He}),(0,n.jsx)(h.E,{color:"error",variant:"bodySmall",children:Je})]})}},{id:"actions",disableGrow:!0,cell:({row:Ve})=>{const Se=Ve.index===0,Ye=(0,s.t)("alerting.alertVersionHistory.compare-with-latest","Compare with latest version");return(0,n.jsxs)(o.B,{direction:"row",alignItems:"center",justifyContent:"flex-end",children:[Se&&(0,n.jsx)(ae.E,{text:(0,s.t)("alerting.alertVersionHistory.latest","Latest"),color:"blue"}),!Se&&fe&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.$n,{variant:"secondary",size:"sm",icon:"code-branch",onClick:()=>{ce(Ve.original)},tooltip:Ye,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.compare",children:"Compare"})}),(0,n.jsx)(g.$n,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{Ve.original.grafana_alert.version&&Te(Ve.original)},children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.restore",children:"Restore"})})]})]})}}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.j,{pageSize:j,columns:Ke,data:re,getRowId:Ve=>`${Ve.grafana_alert.version}`}),(0,n.jsx)(w,{ruleIdentifier:Me,baseVersion:re[0],versionToRestore:_e,isOpen:Ce,onDismiss:$e,onRestoreSucess:le,onRestoreError:he})]})}const{useGetAlertVersionHistoryQuery:Z}=E.hK,te=["id","uid","updated","updated_by","version"];function se({rule:ie}){const ce=ie.grafana_alert.uid,{isLoading:re,currentData:ue=[],error:X}=Z({uid:ce}),le=(0,a.useMemo)(()=>({ruleSourceName:p.hY,uid:ce}),[ce]),[he,fe]=(0,a.useState)(),[Ce,Ae]=(0,a.useState)(),[_e,Xe]=(0,a.useState)(!1),[De,Me]=(0,a.useState)(new Set),Te=(0,a.useMemo)(()=>De.size>1,[De]),$e={namespace:{uid:ie.grafana_alert.namespace_uid},groupName:ie.grafana_alert.rule_group,groupOrigin:"grafana"},[Re,Ke]=(0,v.mW)(ie,$e,v.j5.Restore),Ve=Ke&&Re&&!!l.$.featureToggles.alertingRuleVersionHistoryRestore,Se=(0,a.useCallback)(Je=>{(0,u.cg)({origin:Je,latest:Ce===ue[0],oldVersion:he?.grafana_alert.version||0,newVersion:Ce?.grafana_alert.version||0})},[he,Ce,ue]),Ye=(0,a.useCallback)((Je,de)=>{(0,u.XW)({origin:Je,latest:Ce===ue[0],oldVersion:he?.grafana_alert.version||0,newVersion:Ce?.grafana_alert.version||0,error:de})},[he,Ce,ue]);if(X)return(0,n.jsx)(r.F,{title:(0,s.t)("alerting.alertVersionHistory.errorloading","Failed to load alert rule versions"),children:(0,m.JZ)(X)});if(re)return(0,n.jsx)(c._,{text:(0,s.t)("alerting.common.loading","Loading...")});if(!ue.length)return(0,u.fH)(u.le.noAlertRuleVersionsFound,{ruleUid:ce}),(0,n.jsx)(i.p,{variant:"not-found",message:(0,s.t)("alerting.alertVersionHistory.noVersionsFound","No versions found for this rule")});const Ue=()=>{const[Je,de]=ue.filter(ve=>{const me=ve.grafana_alert.version;if(!(!me&&me!==0))return De.has(String(ve.grafana_alert.version))}).sort((ve,me)=>{const xe=ve.grafana_alert.version,Ee=me.grafana_alert.version;return xe===void 0||Ee===void 0?0:xe-Ee});(0,u.Rh)({latest:de===ue[0],oldVersion:Je?.grafana_alert.version||0,newVersion:de?.grafana_alert.version||0}),je(Je,de)},je=(Je,de)=>{fe(Je),Ae(de),Xe(!0)};function Qe(Je){Me(de=>{const ve=new Set(de);return ve.has(Je)?ve.delete(Je):ve.add(Je),ve}),fe(void 0),Ae(void 0)}const He=ue[0].grafana_alert.version===Ce?.grafana_alert.version;return(0,n.jsxs)(o.B,{direction:"column",gap:2,children:[(0,n.jsx)(h.E,{variant:"body",children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.description",children:"Each time you edit the alert rule, a new version is created. Select two versions below and compare their differences."})}),(0,n.jsx)(o.B,{children:(0,n.jsx)(f.m,{content:(0,s.t)("core.versionHistory.comparison.select","Select two versions to start comparing"),placement:"bottom",children:(0,n.jsx)(g.$n,{type:"button",disabled:!Te,onClick:Ue,icon:"code-branch",children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alertVersionHistory.compareVersions",children:"Compare versions"})})})}),_e&&he&&Ce&&(0,n.jsx)(_,{oldVersion:he,newVersion:Ce,ruleIdentifier:le,isNewLatest:He,setShowDrawer:Xe,onRestoreSuccess:()=>Se("comparison-drawer"),onRestoreError:Je=>Ye("comparison-drawer",Je),canRestore:Ve}),(0,n.jsx)(J,{onCompareSingleVersion:Je=>je(Je,ue[0]),onVersionsChecked:Qe,ruleVersions:ue,disableSelection:Te,checkedVersions:De,onRestoreSuccess:()=>Se("version-list"),onRestoreError:Je=>Ye("version-list",Je),canRestore:Ve})]})}},3887:(ne,A,e)=>{"use strict";e.d(A,{MX:()=>a,sW:()=>s,v4:()=>n});const n=Symbol("receiver_status"),a=Symbol("receiver_metadata"),s=Symbol("receiver_plugin_metadata")},3936:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>r});var n=e(74848),a=e(92745),s=e(21285),l=e(18027);function r({options:c,onOptionsChange:i}){return(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"page-heading",children:(0,n.jsx)(a.x6,{i18nKey:"grafana-ui.data-source-settings.secure-socks-heading",children:"Secure Socks Proxy"})}),(0,n.jsx)("div",{className:"gf-form-group",children:(0,n.jsx)("div",{className:"gf-form-inline",children:(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)(l.I,{labelWidth:26,label:(0,a.t)("grafana-ui.data-source-settings.secure-socks-label","Enabled"),tooltip:(0,a.t)("grafana-ui.data-source-settings.secure-socks-tooltip","Connect to this datasource via the secure socks proxy."),children:(0,n.jsx)(s.K,{value:c.jsonData.enableSecureSocksProxy??!1,onChange:o=>i({...c,jsonData:{...c.jsonData,enableSecureSocksProxy:o.currentTarget.checked}})})})})})})]})}},3969:(ne,A,e)=>{"use strict";e.d(A,{l:()=>T});var n=e(74848),a=e(2543),s=e.n(a),l=e(96540),r=e(92745),c=e(45861),i=e(41654),o=e(94380),h=e(53567),f=e(90186),g=e(2218),u=e(96784),E=e(52763),v=e(16692),p=e(11018),m=e(52161),y=e(67598),d=e(77256),x=e(94646),b=e(29609),D=e(92367),C=e(14050);const P=O=>window.matchMedia(`(max-width: ${O}px)`).matches,T=({compact:O,showViewButton:S,rule:B,rulesSource:K})=>{const U=(0,E.wA)(),F=!O,[I,V]=(0,h.w)(F),[M,L]=(0,l.useState)(!1),[N,W]=(0,l.useState)(void 0),{namespace:R,group:G,rulerRule:w}=B,{hasActiveFilters:_}=(0,u.dI)(),Q=b.p.grafana.rule(B.rulerRule)&&!!B.rulerRule.grafana_alert.provenance,[ae,q]=(0,v.mh)(B,v.j5.Update),k=ae&&q,ee=[],j=O?"sm":"md",J=(0,m.EV)(K),Z=x.UP(J,B),te=y.HA.fromCombinedRule(B);if(S&&ee.push((0,n.jsx)(c.z9,{title:(0,r.t)("alerting.rule-actions-buttons.title-view","View"),size:j,variant:"secondary",icon:"eye",href:(0,d.w$)(K,B),children:(0,n.jsx)(r.x6,{i18nKey:"common.view",children:"View"})},"view")),w&&k){const ce=x.P1(J,R.name,G.name,w),re=(0,D.G)(`/alerting/${encodeURIComponent(x.$9(ce))}/edit`);ee.push((0,n.jsx)(c.z9,{title:(0,r.t)("alerting.rule-actions-buttons.title-edit","Edit"),size:j,variant:"secondary",icon:"pen",href:re,children:(0,n.jsx)(r.x6,{i18nKey:"common.edit",children:"Edit"})},"edit"))}if(!B.promRule&&!B.rulerRule)return null;const se=(0,b.xE)(B.rulerRule??B.promRule),ie=(0,a.isString)(se)&&(b.p.grafana.alertingRule(B.rulerRule)||b.R$.grafana.alertingRule(B.promRule));return(0,n.jsxs)(i.B,{gap:1,alignItems:"center",wrap:"nowrap",children:[ee,(0,n.jsx)(o.A,{rulerRule:B.rulerRule,promRule:B.promRule,identifier:Z,groupIdentifier:te,handleDelete:()=>{if(B.rulerRule){const ce=x.co(te,B.rulerRule);V(ce,te)}},handleSilence:()=>L(!0),handleDuplicateRule:()=>W({identifier:Z,isProvisioned:Q}),onPauseChange:()=>{const ce=_?void 0:f.Ys+1;U((0,p.Lc)({rulesSourceName:m.hY,limitAlerts:ce}))},buttonSize:j}),I,ie&&M&&(0,n.jsx)(g.A,{ruleUid:se,onClose:()=>L(!1)}),N?.identifier&&(0,n.jsx)(C.Z,{identifier:N.identifier,isProvisioned:N.isProvisioned,onDismiss:()=>W(void 0)})]})}},3986:(ne,A,e)=>{"use strict";e.d(A,{_:()=>s});var n=e(16817),a=e(95027);function s(l){const{loading:r,error:c,value:i}=(0,n.A)(()=>(0,a.x)(l,{showErrorAlert:!1})),o=i&&!c&&!r,h=i?.enabled;return r&&!i?{loading:!0}:!o||!h?{loading:!1,installed:!1}:{loading:r,installed:!0,settings:i}}},4137:(ne,A,e)=>{"use strict";e.d(A,{Zx:()=>C,aK:()=>y});var n=e(74848),a=e(22803),s=e(96540),l=e(16817),r=e(63704),c=e(51898),i=e(92745),o=e(30703),h=e(87063),f=e(45861),g=e(92807),u=e(88559),E=e(63142),v=e(83873),p=e(82345);function m({dashboardUID:P,link:T}){const O=(0,E.of)(D),S=d({dashboardUID:P,link:T});return!S||b.length===0?null:(0,n.jsx)(h.W,{children:(0,n.jsx)("div",{className:O.dropdown,children:(0,n.jsx)(g.P,{maxHeight:"inherit",children:S.map((B,K)=>(0,n.jsx)(h.W.Item,{url:B.url,target:T.targetBlank?"_blank":void 0,label:B.title,testId:c.Tp.components.DashboardLinks.link,"aria-label":(0,i.t)("dashboard.dashboard-links-menu.aria-label-dashboard-name","{{dashboardName}} dashboard",{dashboardName:B.title})},`dashlinks-dropdown-item-${B.uid}-${K}`))})})})}const y=P=>{const{link:T,linkInfo:O,dashboardUID:S}=P,B=d(P),K=(0,E.of)(D);return T.asDropdown?(0,n.jsx)(u.m,{overlay:(0,n.jsx)(m,{link:T,dashboardUID:S}),children:(0,n.jsxs)(C,{"data-placement":"bottom","data-toggle":"dropdown","aria-controls":"dropdown-list","aria-haspopup":"menu",fill:"outline",variant:"secondary","data-testid":c.Tp.components.DashboardLinks.dropDown,children:[(0,n.jsx)(o.I,{"aria-hidden":!0,name:"bars",className:K.iconMargin}),(0,n.jsx)("span",{children:O.title})]})}):(0,n.jsx)(n.Fragment,{children:B.length>0&&B.map((U,F)=>(0,n.jsx)(C,{icon:"apps",variant:"secondary",fill:"outline",href:U.url,target:T.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":c.Tp.components.DashboardLinks.link,children:U.title},`dashlinks-list-item-${U.uid}-${F}`))})},d=({link:P,dashboardUID:T})=>{const{tags:O}=P,S=(0,l.A)(()=>x(O),[O]);return S.value?b(T,P,S.value):[]};async function x(P,T={getBackendSrv:v.AI}){return await T.getBackendSrv().search({tag:P,limit:100})}function b(P,T,O,S={getLinkSrv:p.mQ,sanitize:r.aj,sanitizeUrl:r.Jf}){return O.filter(B=>B.uid!==P).map(B=>{const K=B.uid,U=S.sanitize(B.title),F=S.getLinkSrv().getLinkUrl({...T,url:B.url}),I=S.sanitizeUrl(F);return{uid:K,title:U,url:I}})}function D(P){return{iconMargin:(0,a.css)({marginRight:P.spacing(.5)}),dropdown:(0,a.css)({maxWidth:"max(30vw, 300px)",maxHeight:"70vh"}),button:(0,a.css)({color:P.colors.text.primary}),dashButton:(0,a.css)({fontSize:P.typography.bodySmall.fontSize,paddingLeft:P.spacing(1),paddingRight:P.spacing(1)})}}const C=(0,s.forwardRef)(({className:P,...T},O)=>{const S=(0,E.of)(D),B=T.href?f.z9:f.$n;return(0,n.jsx)(B,{...T,variant:"secondary",fill:"outline",className:(0,a.cx)(P,S.dashButton),ref:O})});C.displayName="DashboardLinkButton"},4268:(ne,A,e)=>{"use strict";e.d(A,{t:()=>B});var n=e(74848),a=e(96540),s=e(57852),l=e(739),r=e(64400),c=e(49256),i=e(22803),o=e(63142),h=e(34950),f=e(5585),g=e(89123);const u=({items:K,itemRenderer:U,onLabelMouseOver:F,onLabelMouseOut:I,onLabelClick:V,placement:M,className:L,readonly:N})=>{const W=(0,o.of)(E);U||(U=G=>(0,n.jsx)(g.M,{item:G,onLabelClick:V,onLabelMouseOver:F,onLabelMouseOut:I,readonly:N}));const R=G=>`${G.getItemKey?G.getItemKey():G.label}`;switch(M){case"right":{const G=(w,_)=>(0,n.jsx)("span",{className:W.itemRight,children:U(w,_)});return(0,n.jsx)("div",{className:(0,i.cx)(W.rightWrapper,L),children:(0,n.jsx)(f.B,{items:K,renderItem:G,getItemKey:R})})}case"bottom":default:{const G=K.filter(Q=>Q.yAxis===1),w=K.filter(Q=>Q.yAxis!==1),_=(Q,ae)=>(0,n.jsx)("span",{className:W.itemBottom,children:U(Q,ae)});return(0,n.jsxs)("div",{className:(0,i.cx)(W.bottomWrapper,L),children:[G.length>0&&(0,n.jsx)("div",{className:W.section,children:(0,n.jsx)(h.c,{items:G,renderItem:_,getItemKey:R})}),w.length>0&&(0,n.jsx)("div",{className:(0,i.cx)(W.section,W.sectionRight),children:(0,n.jsx)(h.c,{items:w,renderItem:_,getItemKey:R})})]})}}};u.displayName="VizLegendList";const E=K=>{const U=(0,i.css)({paddingRight:"10px",display:"flex",fontSize:K.typography.bodySmall.fontSize,whiteSpace:"nowrap"});return{itemBottom:U,itemRight:(0,i.cx)(U,(0,i.css)({marginBottom:K.spacing(.5)})),rightWrapper:(0,i.css)({padding:K.spacing(.5)}),bottomWrapper:(0,i.css)({display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",padding:K.spacing(.5),gap:"15px 25px"}),section:(0,i.css)({display:"flex"}),sectionRight:(0,i.css)({justifyContent:"flex-end",flexGrow:1,flexBasis:"50%"})}};var v=e(30703),p=e(55386),m=e(92745),y=e(35484),d=e(87);const x=({item:K,onLabelClick:U,onLabelMouseOver:F,onLabelMouseOut:I,className:V,readonly:M})=>{const L=(0,o.of)(b),N=(0,a.useCallback)(G=>{F&&F(K,G)},[K,F]),W=(0,a.useCallback)(G=>{I&&I(K,G)},[K,I]),R=(0,a.useCallback)(G=>{U&&U(K,G)},[K,U]);return(0,n.jsxs)("tr",{className:(0,i.cx)(L.row,V),children:[(0,n.jsx)("td",{children:(0,n.jsxs)("span",{className:L.itemWrapper,children:[(0,n.jsx)(d.R,{color:K.color,seriesName:K.fieldName??K.label,readonly:M,lineStyle:K.lineStyle}),(0,n.jsxs)("button",{disabled:M,type:"button",title:K.label,onBlur:W,onFocus:N,onMouseOver:N,onMouseOut:W,onClick:M?void 0:R,className:(0,i.cx)(L.label,K.disabled&&L.labelDisabled),children:[K.label," ",K.yAxis===2&&(0,n.jsx)("span",{className:L.yAxisLabel,children:(0,n.jsx)(m.x6,{i18nKey:"grafana-ui.viz-legend.right-axis-indicator",children:"(right y-axis)"})})]})]})}),K.getDisplayValues&&K.getDisplayValues().map((G,w)=>(0,n.jsx)("td",{className:L.value,children:(0,p.cN)(G)},`${G.title}-${w}`))]})};x.displayName="LegendTableItem";const b=K=>{const U=(0,y.hoverColor)(K.colors.background.primary,K);return{row:(0,i.css)({label:"LegendRow",fontSize:K.v1.typography.size.sm,borderBottom:`1px solid ${K.colors.border.weak}`,td:{padding:K.spacing(.25,1),whiteSpace:"nowrap"},"&:hover":{background:U}}),label:(0,i.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,maxWidth:"600px",textOverflow:"ellipsis",overflow:"hidden",userSelect:"text"}),labelDisabled:(0,i.css)({label:"LegendLabelDisabled",color:K.colors.text.disabled}),itemWrapper:(0,i.css)({display:"flex",whiteSpace:"nowrap",alignItems:"center"}),value:(0,i.css)({textAlign:"right"}),yAxisLabel:(0,i.css)({color:K.colors.text.secondary})}},D="Name",C=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}).compare,P=({items:K,sortBy:U,sortDesc:F,itemRenderer:I,className:V,onToggleSort:M,onLabelClick:L,onLabelMouseOver:N,onLabelMouseOut:W,readonly:R,isSortable:G})=>{const w=(0,o.of)(T),_={};G&&(_[D]="");for(const Q of K)if(Q.getDisplayValues)for(const ae of Q.getDisplayValues())_[ae.title??"?"]=ae.description??"";if(U!=null){let Q=new Map;K.forEach(q=>{if(U!==D&&q.getDisplayValues){const k=q.getDisplayValues().find(j=>j.title===U),ee=k==null||Number.isNaN(k.numeric)?-1/0:k.numeric;Q.set(q,ee)}});let ae=F?-1:1;U===D?K.sort((q,k)=>ae*C(q.label,k.label)):K.sort((q,k)=>{const ee=Q.get(q)??0,j=Q.get(k)??0;return ae*(ee-j)})}return I||(I=(Q,ae)=>(0,n.jsx)(x,{item:Q,onLabelClick:L,onLabelMouseOver:N,onLabelMouseOut:W,readonly:R},`${Q.label}-${ae}`)),(0,n.jsxs)("table",{className:(0,i.cx)(w.table,V),children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[!G&&(0,n.jsx)("th",{}),Object.keys(_).map(Q=>(0,n.jsxs)("th",{title:_[Q],className:(0,i.cx)(w.header,M&&w.headerSortable,G&&w.nameHeader,{[w.withIcon]:U===Q}),onClick:()=>{M&&M(Q)},children:[Q,U===Q&&(0,n.jsx)(v.I,{size:"xs",name:F?"angle-down":"angle-up"})]},Q))]})}),(0,n.jsx)("tbody",{children:K.map(I)})]})},T=K=>({table:(0,i.css)({width:"100%","th:first-child":{width:"100%",borderBottom:`1px solid ${K.colors.border.weak}`}}),header:(0,i.css)({color:K.colors.primary.text,fontWeight:K.typography.fontWeightMedium,borderBottom:`1px solid ${K.colors.border.weak}`,padding:K.spacing(.25,1,.25,1),fontSize:K.typography.bodySmall.fontSize,textAlign:"right",whiteSpace:"nowrap"}),nameHeader:(0,i.css)({textAlign:"left",paddingLeft:"30px"}),withIcon:(0,i.css)({paddingRight:"4px"}),headerSortable:(0,i.css)({cursor:"pointer"})});var O=e(22940);function S(K){return K.ctrlKey||K.metaKey||K.shiftKey?c.B.AppendToSelection:c.B.ToggleSelection}function B({items:K,thresholdItems:U,mappingItems:F,displayMode:I,sortBy:V,seriesVisibilityChangeBehavior:M=O.K.Isolate,sortDesc:L,onLabelClick:N,onToggleSort:W,placement:R,className:G,itemRenderer:w,readonly:_,isSortable:Q}){const{eventBus:ae,onToggleSeriesVisibility:q,onToggleLegendSort:k}=(0,r.d2)(),ee=(0,a.useCallback)((te,se)=>{ae?.publish({type:s.b_.type,payload:{raw:se,x:0,y:0,dataId:te.label}})},[ae]),j=(0,a.useCallback)((te,se)=>{ae?.publish({type:s.ql.type,payload:{raw:se,x:0,y:0,dataId:te.label}})},[ae]),J=(0,a.useCallback)((te,se)=>{N&&N(te,se),q&&q(te.fieldName??te.label,M===O.K.Hide?c.B.AppendToSelection:S(se))},[q,N,M]),Z=(0,a.useCallback)(te=>(0,n.jsx)(u,{className:G,placement:R,onLabelMouseOver:ee,onLabelMouseOut:j,onLabelClick:J,itemRenderer:w,readonly:_,items:te}),[G,R,ee,j,J,w,_]);switch(I){case l.lm.Table:return(0,n.jsx)(P,{className:G,items:K,placement:R,sortBy:V,sortDesc:L,onLabelClick:J,onToggleSort:W||k,onLabelMouseOver:ee,onLabelMouseOut:j,itemRenderer:w,readonly:_,isSortable:Q});case l.lm.List:const te=U&&U.length>1,se=F&&F.length>0;return(0,n.jsxs)(n.Fragment,{children:[!te&&(!se||K.length>1)&&Z(K),te&&Z(U),se&&Z(F)]});default:return null}}B.displayName="VizLegend"},4364:(ne,A,e)=>{"use strict";e.d(A,{r:()=>Ce});var n=e(74848),a=e(22803),s=e(96540),l=e(25229),r=e(17548),c=e(51898),i=e(92745),o=e(63142),h=e(35484),f=e(12737),g=e(30703),u=e(89640),E=e(2543),v=e(62717),p=e(45861),m=e(43243),y=e(37386),d=e(60208),x=e(13941),b=e(54314),D=e(59310),C=e(34788),P=e(44229),T=e(27228),O=e(8431);const S=Ve=>{const{timeZone:Se,fiscalYearStartMonth:Ye,timestamp:Ue=Date.now(),onChangeTimeZone:je,onChangeFiscalYearStartMonth:Qe}=Ve,[He,Je]=(0,s.useState)(!1),[de,ve]=(0,s.useState)("tz"),me=(0,s.useId)(),xe=(0,s.useId)(),Ee=(0,s.useId)(),Pe=(0,s.useCallback)(Fe=>{Fe&&Fe.stopPropagation(),Je(!He)},[He,Je]),Oe=(0,o.of)(B);if(!(0,E.isString)(Se))return null;const We=(0,v.QZ)(Se,Ue);return We?(0,n.jsxs)("div",{children:[(0,n.jsxs)("section",{"aria-label":(0,i.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:Oe.container,children:[(0,n.jsxs)("div",{className:Oe.timeZoneContainer,children:[(0,n.jsxs)("div",{className:Oe.timeZone,children:[(0,n.jsx)(T.U,{title:We.name}),(0,n.jsx)("div",{className:Oe.spacer}),(0,n.jsx)(C.E,{info:We})]}),(0,n.jsx)(P.X,{timeZone:Se,timestamp:Ue})]}),(0,n.jsx)("div",{className:Oe.spacer}),(0,n.jsx)(p.$n,{"data-testid":c.Tp.components.TimeZonePicker.changeTimeSettingsButton,variant:"secondary",onClick:Pe,size:"sm","aria-expanded":He,"aria-controls":me,icon:He?"angle-up":"angle-down",children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.footer.change-settings-button",children:"Change time settings"})})]}),He?(0,n.jsxs)("div",{className:Oe.editContainer,id:me,children:[(0,n.jsxs)(b.U,{children:[(0,n.jsx)(d.o,{label:(0,i.t)("time-picker.footer.time-zone-option","Time zone"),active:de==="tz",onChangeTab:()=>{ve("tz")},"aria-controls":xe}),(0,n.jsx)(d.o,{label:(0,i.t)("time-picker.footer.fiscal-year-option","Fiscal year"),active:de==="fy",onChangeTab:()=>{ve("fy")},"aria-controls":Ee})]}),(0,n.jsx)(x.J,{className:Oe.noBackground,children:de==="tz"?(0,n.jsx)("section",{role:"tabpanel","data-testid":c.Tp.components.TimeZonePicker.containerV2,id:xe,className:(0,a.cx)(Oe.timeZoneContainer,Oe.timeSettingContainer),children:(0,n.jsx)(D.U,{includeInternal:!0,onChange:Fe=>{Pe(),(0,E.isString)(Fe)&&je(Fe)},onBlur:Pe,menuShouldPortal:!1})}):(0,n.jsx)("section",{role:"tabpanel","data-testid":c.Tp.components.TimeZonePicker.containerV2,id:Ee,className:(0,a.cx)(Oe.timeZoneContainer,Oe.timeSettingContainer),children:(0,n.jsx)(y.D,{className:Oe.fiscalYearField,label:(0,i.t)("time-picker.footer.fiscal-year-start","Fiscal year start month"),children:(0,n.jsx)(m.G,{value:Ye??null,options:(0,O.L)(),onChange:Fe=>{Qe&&Qe(Fe?.value??0)}})})})})]}):null]}):null},B=Ve=>({container:(0,a.css)({borderTop:`1px solid ${Ve.colors.border.weak}`,padding:Ve.spacing(1.5),display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}),editContainer:(0,a.css)({borderTop:`1px solid ${Ve.colors.border.weak}`,padding:Ve.spacing(1.5),paddingTop:0,justifyContent:"space-between",alignItems:"center"}),spacer:(0,a.css)({marginLeft:"7px"}),timeSettingContainer:(0,a.css)({paddingTop:Ve.spacing(1)}),noBackground:(0,a.css)({background:"inherit"}),fiscalYearField:(0,a.css)({marginBottom:0}),timeZoneContainer:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1}),timeZone:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"baseline",flexGrow:1})});var K=e(47087),U=e(44922),F=e(80011),I=e(63527),V=e(45967),M=e(67511),L=e(62348),N=e(18828),W=e(43107),R=e(93225),G=e(59875),w=e(35621),_=e(66630),Q=e(41654);function ae({onClose:Ve,onApply:Se}){return(0,n.jsxs)(Q.B,{gap:2,justifyContent:"space-between",children:[(0,n.jsx)(p.$n,{variant:"secondary",onClick:Ve,children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.calendar.cancel-button",children:"Cancel"})}),(0,n.jsx)(p.$n,{onClick:Se,children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.calendar.apply-button",children:"Apply time range"})})]})}ae.displayName="Footer";var q=e(76319);function k({onClose:Ve}){return(0,n.jsxs)(Q.B,{justifyContent:"space-between",children:[(0,n.jsx)(K.e,{children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.calendar.select-time",children:"Select a time range"})}),(0,n.jsx)(q.K,{"data-testid":c.Tp.components.TimePicker.calendar.closeButton,tooltip:(0,i.t)("time-picker.calendar.close","Close calendar"),name:"times",variant:"secondary",onClick:Ve})]})}k.displayName="Header";const ee=(Ve,Se=!1)=>({container:(0,a.css)({top:0,position:"absolute",[`${Se?"left":"right"}`]:"546px"}),modalContainer:(0,a.css)({label:"modalContainer",margin:"0 auto"}),calendar:(0,a.css)({display:"flex",flexDirection:"column",gap:Ve.spacing(1),padding:Ve.spacing(1),label:"calendar",boxShadow:Ve.shadows.z3,backgroundColor:Ve.colors.background.elevated,border:`1px solid ${Ve.colors.border.weak}`,borderRadius:Ve.shape.radius.default}),modal:(0,a.css)({label:"modal",boxShadow:Ve.shadows.z3,left:"50%",position:"fixed",top:"50%",transform:"translate(-50%, -50%)",zIndex:Ve.zIndex.modal})});function j(Ve){const Se=(0,o.$j)(),{modalBackdrop:Ye}=(0,o.of)(w.o),Ue=ee(Se,Ve.isReversed),{isOpen:je,isFullscreen:Qe,onClose:He}=Ve,Je=(0,s.createRef)(),{dialogProps:de}=(0,N.s)({"aria-label":c.Tp.components.TimePicker.calendar.label},Je),{overlayProps:ve}=(0,R.e)({isDismissable:!0,isOpen:je,onClose:He},Je),me=!Qe;if(!je)return null;const xe=(0,n.jsxs)("section",{className:Ue.calendar,ref:Je,...ve,...de,"data-testid":c.Tp.components.TimePicker.calendar.label,children:[(0,n.jsx)(k,{...Ve}),(0,n.jsx)(_.nB,{...Ve}),me&&(0,n.jsx)(ae,{...Ve})]});return me?(0,n.jsxs)(G.Sf,{children:[(0,n.jsx)("div",{className:Ye}),(0,n.jsx)(W.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("div",{className:Ue.modal,children:(0,n.jsx)("div",{className:Ue.modalContainer,children:xe})})})]}):(0,n.jsx)(W.n1,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,n.jsx)("div",{className:Ue.container,children:xe})})}const J=(0,s.memo)(j);j.displayName="TimePickerCalendar";const Z={default:()=>(0,i.t)("time-picker.range-content.default-error",'Please enter a past date or "{{now}}"',{now:"now"}),range:()=>(0,i.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},te=Ve=>{const{value:Se,isFullscreen:Ye=!1,timeZone:Ue,onApply:je,isReversed:Qe,fiscalYearStartMonth:He,onError:Je,weekStart:de}=Ve,[ve,me]=ie(Se.raw.from,Se.raw.to,Ue),xe=(0,o.of)(re),[Ee,Pe]=(0,s.useState)(ve),[Oe,We]=(0,s.useState)(me),[Fe,Be]=(0,s.useState)(!1),Le=(0,s.useId)(),Ge=(0,s.useId)();(0,s.useEffect)(()=>{const[Gt,en]=ie(Se.raw.from,Se.raw.to,Ue);Pe(Gt),We(en)},[Se.raw.from,Se.raw.to,Ue]);const Ze=(0,s.useCallback)(Gt=>{Gt.preventDefault(),Be(!0)},[Be]),qe=(0,s.useCallback)(()=>{if(Oe.invalid||Ee.invalid)return;const Gt={from:Ee.value,to:Oe.value},en=r.convertRawToRange(Gt,Ue,He,M.d);je(en)},[Ee.invalid,Ee.value,je,Ue,Oe.invalid,Oe.value,He]),at=(0,s.useCallback)((Gt,en)=>{const[st,$t]=ie(Gt,en,Ue);Pe(st),We($t)},[Ue]),ht=Gt=>{Gt.key==="Enter"&&qe()},Et=()=>{const Gt=Se.raw,en=r.formatRawTimeRange(Gt);navigator.clipboard.writeText(JSON.stringify(en))},mt=async()=>{const Gt=await navigator.clipboard.readText();let en;try{en=JSON.parse(Gt)}catch{Je&&Je(Gt);return}const[st,$t]=ie(en.from,en.to,Ue);Pe(st),We($t)},Pt=r.convertRawToRange({from:"now/fy",to:"now/fy"},Ue,He),rt=(0,n.jsx)("div",{className:xe.tooltip,children:r.isFiscal(Se)?(0,n.jsx)(V.m,{content:(0,i.t)("time-picker.range-content.fiscal-year","Fiscal year: {{from}} - {{to}}",{from:Pt.from.format("MMM-DD"),to:Pt.to.format("MMM-DD")}),children:(0,n.jsx)(g.I,{name:"info-circle"})}):null}),Kt=(0,n.jsx)(p.$n,{"aria-label":(0,i.t)("time-picker.range-content.open-input-calendar","Open calendar"),"data-testid":c.Tp.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:Ze});return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:xe.fieldContainer,children:[(0,n.jsx)(y.D,{label:(0,i.t)("time-picker.range-content.from-input","From"),invalid:Ee.invalid,error:Ee.errorMessage,children:(0,n.jsx)(I.p,{id:Le,onClick:Gt=>Gt.stopPropagation(),onChange:Gt=>at(Gt.currentTarget.value,Oe.value),addonAfter:Kt,onKeyDown:ht,"data-testid":c.Tp.components.TimePicker.fromField,value:Ee.value})}),rt]}),(0,n.jsxs)("div",{className:xe.fieldContainer,children:[(0,n.jsx)(y.D,{label:(0,i.t)("time-picker.range-content.to-input","To"),invalid:Oe.invalid,error:Oe.errorMessage,children:(0,n.jsx)(I.p,{id:Ge,onClick:Gt=>Gt.stopPropagation(),onChange:Gt=>at(Ee.value,Gt.currentTarget.value),addonAfter:Kt,onKeyDown:ht,"data-testid":c.Tp.components.TimePicker.toField,value:Oe.value})}),rt]}),(0,n.jsxs)("div",{className:xe.buttonsContainer,children:[(0,n.jsx)(p.$n,{"data-testid":c.Tp.components.TimePicker.copyTimeRange,icon:"copy",variant:"secondary",tooltip:(0,i.t)("time-picker.copy-paste.tooltip-copy","Copy time range to clipboard"),type:"button",onClick:Et}),(0,n.jsx)(p.$n,{"data-testid":c.Tp.components.TimePicker.pasteTimeRange,icon:"clipboard-alt",variant:"secondary",tooltip:(0,i.t)("time-picker.copy-paste.tooltip-paste","Paste time range"),type:"button",onClick:mt}),(0,n.jsx)(p.$n,{"data-testid":c.Tp.components.TimePicker.applyTimeRange,type:"button",onClick:qe,children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.range-content.apply-button",children:"Apply time range"})})]}),(0,n.jsx)(J,{isFullscreen:Ye,isOpen:Fe,from:(0,U.b)(Ee.value,{timeZone:Ue}),to:(0,U.b)(Oe.value,{timeZone:Ue}),onApply:qe,onClose:()=>Be(!1),onChange:at,timeZone:Ue,isReversed:Qe,weekStart:de})]})};function se(Ve,Se,Ye){const Ue={from:Ve,to:Se},je=r.convertRawToRange(Ue,Ye,void 0,M.d);return!(je.from.isSame(je.to)||je.from.isBefore(je.to))}function ie(Ve,Se,Ye){const Ue=ce(Ve,Ye),je=ce(Se,Ye),Qe=!(0,L.f)(Ue,!1,Ye),He=!(0,L.f)(je,!0,Ye),Je=se(Ue,je,Ye)&&!He;return[{value:Ue,invalid:Qe||Je,errorMessage:Je&&!Qe?Z.range():Z.default()},{value:je,invalid:He,errorMessage:Z.default()}]}function ce(Ve,Se){if((0,l.Ar)(Ve))return(0,F.LE)(Ve,{timeZone:Se,format:M.d});if(Ve.endsWith("Z")){const Ye=(0,U.b)(Ve);return(0,F.LE)(Ye,{timeZone:Se,format:M.d})}return Ve}function re(Ve){return{fieldContainer:(0,a.css)({display:"flex"}),buttonsContainer:(0,a.css)({display:"flex",gap:Ve.spacing(.5),marginTop:Ve.spacing(1)}),tooltip:(0,a.css)({paddingLeft:Ve.spacing(1),paddingTop:Ve.spacing(3)})}}var ue=e(44398),X=e(27629);const le=(Ve,Se)=>r.convertRawToRange({from:Ve.from,to:Ve.to},Se,void 0,M.d),he=(Ve,Se)=>{const Ye=(0,F.LE)(Ve.from,{timeZone:Se,format:M.d}),Ue=(0,F.LE)(Ve.to,{timeZone:Se,format:M.d});let je=`${Ye} to ${Ue}`;return(0,X.$)("localeFormatPreference")&&(je=r.describeTimeRange(Ve,Se)),{from:Ye,to:Ue,display:je}},fe=Ve=>{const{quickOptions:Se=[],isReversed:Ye,isFullscreen:Ue,hideQuickRanges:je,timeZone:Qe,fiscalYearStartMonth:He,value:Je,onChange:de,history:ve,showHistory:me,className:xe,hideTimeZone:Ee,onChangeTimeZone:Pe,onChangeFiscalYearStartMonth:Oe}=Ve,We=!ve?.length,Fe=Ue&&me||!Ue&&(me&&!We||!je),Be=(0,o.of)(Te,Ye,je,Fe,Ue),Le=De(ve,Qe),Ge=Me(Je.raw,Se),[Ze,qe]=(0,s.useState)(""),at=Se.filter(Et=>Et.display.toLowerCase().includes(Ze.toLowerCase())),ht=Et=>de(le(Et));return(0,n.jsxs)("div",{id:"TimePickerContent",className:(0,a.cx)(Be.container,xe),children:[(0,n.jsxs)("div",{className:Be.body,children:[(!Ue||!je)&&(0,n.jsxs)("div",{className:Be.rightSide,children:[(0,n.jsx)("div",{className:Be.timeRangeFilter,children:(0,n.jsx)(f.Z,{width:0,value:Ze,onChange:qe,placeholder:(0,i.t)("time-picker.content.filter-placeholder","Search quick ranges")})}),(0,n.jsxs)("div",{className:Be.scrollContent,children:[!Ue&&(0,n.jsx)(Ae,{...Ve,historyOptions:Le}),!je&&(0,n.jsx)(ue.l,{options:at,onChange:ht,value:Ge})]})]}),Ue&&(0,n.jsx)("div",{className:Be.leftSide,children:(0,n.jsx)(_e,{...Ve,historyOptions:Le})})]}),!Ee&&Ue&&(0,n.jsx)(S,{timeZone:Qe,fiscalYearStartMonth:He,onChangeTimeZone:Pe,onChangeFiscalYearStartMonth:Oe})]})},Ce=Ve=>{const{widthOverride:Se}=Ve,Ye=(0,o.$j)(),Ue=(Se||window.innerWidth)>=Ye.breakpoints.values.lg;return(0,n.jsx)(fe,{...Ve,isFullscreen:Ue})},Ae=Ve=>{const{value:Se,hideQuickRanges:Ye,onChange:Ue,timeZone:je,historyOptions:Qe=[],showHistory:He,onError:Je,weekStart:de}=Ve,ve=(0,o.of)($e),me=(0,l.Ar)(Se.raw.from)||(0,l.Ar)(Se.raw.to),[xe,Ee]=(0,s.useState)(!me),Pe=Ye?!1:xe,Oe=We=>Ue(le(We,je));return(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("div",{className:ve.header,children:(0,n.jsxs)("button",{type:"button",className:ve.expandButton,onClick:()=>{Ye||Ee(!Pe)},"data-testid":c.Tp.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!Pe,"aria-controls":"expanded-timerange",children:[(0,n.jsx)(K.e,{children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.absolute.title",children:"Absolute time range"})}),!Ye&&(0,n.jsx)(g.I,{name:Pe?"angle-down":"angle-up"})]})}),!Pe&&(0,n.jsxs)("div",{className:ve.body,id:"expanded-timerange",children:[(0,n.jsx)("div",{className:ve.form,children:(0,n.jsx)(te,{value:Se,onApply:Ue,timeZone:je,isFullscreen:!1,onError:Je,weekStart:de})}),He&&(0,n.jsx)(ue.l,{title:(0,i.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:Qe,onChange:Oe,placeholderEmpty:null})]})]})},_e=Ve=>{const{onChange:Se,value:Ye,timeZone:Ue,fiscalYearStartMonth:je,isReversed:Qe,historyOptions:He,onError:Je,weekStart:de}=Ve,ve=(0,o.of)(Re,Ve.hideQuickRanges),me=xe=>Se(le(xe,Ue));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:ve.container,children:[(0,n.jsx)("div",{className:ve.title,"data-testid":c.Tp.components.TimePicker.absoluteTimeRangeTitle,children:(0,n.jsx)(K.e,{children:(0,n.jsx)(i.x6,{i18nKey:"time-picker.absolute.title",children:"Absolute time range"})})}),(0,n.jsx)(te,{value:Ye,timeZone:Ue,fiscalYearStartMonth:je,onApply:Se,isFullscreen:!0,isReversed:Qe,onError:Je,weekStart:de})]}),Ve.showHistory&&(0,n.jsx)("div",{className:ve.recent,children:(0,n.jsx)(ue.l,{title:(0,i.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:He||[],onChange:me,placeholderEmpty:(0,n.jsx)(Xe,{})})})]})},Xe=(0,s.memo)(()=>{const Ve=(0,o.of)(Ke),Se=(0,i.t)("time-picker.content.empty-recent-list-info","It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.");return(0,n.jsxs)("div",{className:Ve.container,children:[(0,n.jsx)("div",{children:(0,n.jsx)("span",{children:Se})}),(0,n.jsx)(i.x6,{i18nKey:"time-picker.content.empty-recent-list-docs",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(u.Y,{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",external:!0,children:"Read the documentation"}),(0,n.jsx)("span",{children:" to find out more about how to enter custom time ranges."})]})})]})});function De(Ve,Se){return!Array.isArray(Ve)||Ve.length===0?[]:Ve.map(Ye=>he(Ye,Se))}Xe.displayName="EmptyRecentList";const Me=(Ve,Se)=>(0,s.useMemo)(()=>{if(r.isRelativeTimeRange(Ve))return Se.find(Ye=>Ye.from===Ve.from&&Ye.to===Ve.to)},[Ve,Se]),Te=(Ve,Se,Ye,Ue,je)=>({container:(0,a.css)({background:Ve.colors.background.elevated,boxShadow:Ve.shadows.z3,width:`${je?"546px":"262px"}`,borderRadius:Ve.shape.radius.default,border:`1px solid ${Ve.colors.border.weak}`,[`${Se?"left":"right"}`]:0,display:"flex",flexDirection:"column"}),body:(0,a.css)({display:"flex",flexDirection:"row-reverse",height:`${Ue?"381px":"217px"}`,maxHeight:"100vh"}),leftSide:(0,a.css)({display:"flex",flexDirection:"column",borderRight:`${Se?"none":`1px solid ${Ve.colors.border.weak}`}`,width:`${Ye?"100%":"60%"}`,overflow:"auto",scrollbarWidth:"thin",order:Se?1:0}),rightSide:(0,a.css)({width:`${je?"40%":"100%"}; !important`,borderRight:Se?`1px solid ${Ve.colors.border.weak}`:"none",display:"flex",flexDirection:"column"}),timeRangeFilter:(0,a.css)({padding:Ve.spacing(1)}),spacing:(0,a.css)({marginTop:"16px"}),scrollContent:(0,a.css)({overflowY:"auto",scrollbarWidth:"thin"})}),$e=Ve=>({header:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${Ve.colors.border.weak}`,padding:"7px 9px 7px 9px"}),expandButton:(0,a.css)({backgroundColor:"transparent",border:"none",display:"flex",width:"100%","&:focus-visible":(0,h.getFocusStyles)(Ve)}),body:(0,a.css)({borderBottom:`1px solid ${Ve.colors.border.weak}`}),form:(0,a.css)({padding:"7px 9px 7px 9px"})}),Re=(Ve,Se)=>({container:(0,a.css)({paddingTop:"9px",paddingLeft:"11px",paddingRight:Se?"11px":"20%"}),title:(0,a.css)({marginBottom:"11px"}),recent:(0,a.css)({flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-end",paddingTop:Ve.spacing(1)})}),Ke=Ve=>({container:(0,a.css)({padding:"12px",margin:"12px","a, span":{fontSize:"13px"}})})},4405:(ne,A,e)=>{"use strict";e.d(A,{a:()=>o});var n=e(49426),a=e(33239),s=e(25229);const l=100;class r{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new n.t(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const f=Date.now();this.budget=(f-this.lastUpdate)/l;const g=this.ok.getValue(),u=this.budget<=this.threshold;if(g!==u&&this.ok.next(u),this.lastUpdate=f,this.isLive&&this.ok.getValue()&&this.timeRange){let E;for(const v of this.listeners){if(!v.panel.props.isInView)continue;if(f-v.last>=v.intervalMs){if(!E){const{raw:m}=this.timeRange;E={raw:m,from:(0,s.KQ)(f-this.liveTimeOffset),to:(0,s.KQ)(f)}}v.panel.liveTimeChanged(E),v.last=f}}}}}setLiveTimeRange(f){if(this.timeRange=f,this.isLive=f?.raw?.to==="now",this.isLive){const g=a.parse(f.raw.from,!1)?.valueOf(),u=a.parse(f.raw.to,!0)?.valueOf();this.liveTimeOffset=u-g;for(const E of this.listeners)E.intervalMs=i(this.liveTimeOffset,E.panel.props.width)}}listen(f){this.listeners.push({last:this.lastUpdate,panel:f,intervalMs:i(6e4,f.props.width)})}remove(f){this.listeners=this.listeners.filter(g=>g.panel!==f)}updateInterval(f){if(!(!this.timeRange||!this.isLive)){for(const g of this.listeners)if(g.panel===f){g.intervalMs=i(this.liveTimeOffset,g.panel.props.width);return}}}}const c=300*1e3;function i(h,f){const g=Math.ceil(h/f/100)*100;return g>c?c:g}const o=new r;setInterval(o.measure,l)},4476:(ne,A,e)=>{"use strict";e.d(A,{Gl:()=>x,H2:()=>v,N6:()=>D,Qi:()=>N,Sq:()=>C,TD:()=>F,UI:()=>L,Xc:()=>m,bM:()=>S,by:()=>p,hY:()=>P,j_:()=>b,kH:()=>u,sP:()=>M,td:()=>h,wD:()=>V});var n=e(84139),a=e(44922),s=e(11594),l=e(43173),r=e(62061),c=e(73427),i=e(11257),o=e(13660);function h({local:W=[],remote:R=[],instance:G=[],provisioned:w=[],pluginErrors:_}){const Q=[],ae=y(_),q=G.reduce((ee,j)=>(ee.set(j.pluginSlug,j),ee),new Map),k=w.reduce((ee,j)=>(ee.add(j.slug),ee),new Set);return W.forEach(ee=>{const j=R.find(Z=>Z.slug===ee.id),J=ae[ee.id];j||Q.push(f(ee,void 0,J))}),R.forEach(ee=>{const j=W.find(te=>te.id===ee.slug),J=ae[ee.slug];if(!(ee.status===o.Uy.Deprecated&&!j)){const te=f(j,ee,J);if(l.$.pluginAdminExternalManageEnabled){te.isFullyInstalled=te.isCore?!0:(q.has(ee.slug)||k.has(ee.slug))&&te.isInstalled,te.isInstalled=q.has(ee.slug)||te.isInstalled;const se=q.get(ee.slug);te.isUpdatingFromInstance=q.has(ee.slug)&&te.hasUpdate&&te.installedVersion!==se?.version,se?.version&&se?.version!==ee.version&&(te.hasUpdate=!0),te.isUninstallingFromInstance=!!j&&!q.has(ee.slug),te.isProvisioned=k.has(ee.slug)}Q.push(te)}}),Q}function f(W,R,G){return!W&&R?g(R,G):W&&!R?u(W,G):E(W,R,G)}function g(W,R){const{name:G,slug:w,description:_,version:Q,orgName:ae,popularity:q,downloads:k,typeCode:ee,updatedAt:j,createdAt:J,status:Z,angularDetected:te,keywords:se,signatureType:ie,versionSignatureType:ce,versionSignedByOrgName:re,url:ue}=W,X=!!R;return{description:_,downloads:k,id:w,info:{logos:{small:`${l.$.appSubUrl}/api/gnet/plugins/${w}/versions/${Q}/logos/small`,large:`${l.$.appSubUrl}/api/gnet/plugins/${w}/versions/${Q}/logos/large`},keywords:se},name:G,orgName:ae,popularity:q,publishedAt:J,signature:d({remote:W,error:R}),signatureType:ie||ce||void 0,signatureOrg:re,updatedAt:j,hasUpdate:!1,isPublished:!0,isInstalled:X,isDisabled:X,isManaged:O(w),isPreinstalled:S(w),isDeprecated:Z===o.Uy.Deprecated,isCore:W.internal,isDev:!1,isEnterprise:Z===o.Uy.Enterprise,type:ee,error:R?.errorCode,angularDetected:te,isFullyInstalled:X,latestVersion:W.version,url:ue}}function u(W,R){const{name:G,info:{description:w,version:_,logos:Q,updated:ae,author:q,keywords:k},id:ee,dev:j,type:J,signature:Z,signatureOrg:te,signatureType:se,hasUpdate:ie,accessControl:ce,angularDetected:re}=W,ue=!!R;return{description:w,downloads:0,id:ee,info:{logos:Q,keywords:k},name:G,orgName:q.name,popularity:0,publishedAt:"",signature:d({local:W,error:R}),signatureOrg:te,signatureType:se,updatedAt:ae,installedVersion:_,hasUpdate:ie,isInstalled:!0,isDisabled:ue,isCore:Z==="internal",isPublished:!1,isDeprecated:!1,isDev:!!j,isEnterprise:!1,isManaged:O(ee),isPreinstalled:S(ee),type:J,error:R?.errorCode,accessControl:ce,angularDetected:re,isFullyInstalled:!0,iam:W.iam,latestVersion:W.latestVersion}}function E(W,R,G){const w=W?.info.version,_=R?.slug||W?.id||"",Q=W?.type||R?.typeCode,ae=!!G,q=R?.keywords||W?.info.keywords||[];let k={small:`/public/build/img/icn-${Q}.svg`,large:`/public/build/img/icn-${Q}.svg`};return R?k={small:`${l.$.appSubUrl}/api/gnet/plugins/${_}/versions/${R.version}/logos/small`,large:`${l.$.appSubUrl}/api/gnet/plugins/${_}/versions/${R.version}/logos/large`}:W&&W.info.logos&&(k=W.info.logos),{description:W?.info.description||R?.description||"",downloads:R?.downloads||0,hasUpdate:W?.hasUpdate||!1,id:_,info:{logos:k,keywords:q},isCore:!!(R?.internal||W?.signature===s.Ac.internal),isDev:!!W?.dev,isEnterprise:R?.status===o.Uy.Enterprise,isInstalled:!!W||ae,isDisabled:ae,isDeprecated:R?.status===o.Uy.Deprecated,isPublished:!0,isManaged:O(_),isPreinstalled:S(_),name:R?.name||W?.name||"",orgName:R?.orgName||W?.info.author.name||"",popularity:R?.popularity||0,publishedAt:R?.createdAt||"",type:Q,signature:d({local:W,remote:R,error:G}),signatureOrg:W?.signatureOrg||R?.versionSignedByOrgName,signatureType:W?.signatureType||R?.versionSignatureType||R?.signatureType||void 0,updatedAt:R?.updatedAt||W?.info.updated||"",installedVersion:w,error:G?.errorCode,accessControl:W?.accessControl,angularDetected:W?.angularDetected??R?.angularDetected,isFullyInstalled:!!W||ae,iam:W?.iam,latestVersion:W?.latestVersion||R?.version||"",url:R?.url||""}}const v=W=>`${l.$.pluginCatalogURL}${W}`;var p=(W=>(W.nameAsc="nameAsc",W.nameDesc="nameDesc",W.updated="updated",W.published="published",W.downloads="downloads",W))(p||{});const m=(W,R)=>{const G={nameAsc:(w,_)=>w.name.localeCompare(_.name),nameDesc:(w,_)=>_.name.localeCompare(w.name),updated:(w,_)=>(0,a.b)(_.updatedAt).valueOf()-(0,a.b)(w.updatedAt).valueOf(),published:(w,_)=>(0,a.b)(_.publishedAt).valueOf()-(0,a.b)(w.publishedAt).valueOf(),downloads:(w,_)=>_.downloads-w.downloads};return G[R]?W.sort(G[R]):W};function y(W=[]){return W.reduce((R,G)=>(R[G.pluginId]=G,R),{})}function d(W){const{error:R,local:G,remote:w}=W;if(R)switch(R.errorCode){case s.ZK.invalidSignature:return s.Ac.invalid;case s.ZK.missingSignature:return s.Ac.missing;case s.ZK.modifiedSignature:return s.Ac.modified}return G?.signature?G.signature:w?.signatureType&&w?.versionSignatureType?s.Ac.valid:s.Ac.missing}function x(W){if(!W)return;const[R]=W.filter(G=>!!G.isCompatible);return R}const b=()=>l.$.pluginAdminEnabled,D=(W,R,G)=>{const w=l.$.pluginAdminExternalManageEnabled,_=c.TP.hasPermission(i.w.PluginsInstall),Q=!!G;return W.type===s.QE.renderer||W.isEnterprise&&!(0,r.a)("enterprise.plugins")||W.isDev||!_&&!w||!W.isPublished||!Q||!R},C=W=>T(W.id),P=W=>T(W.slug);function T(W){const{pluginCatalogHiddenPlugins:R}=l.$;return!R.includes(W)}function O(W){const{pluginCatalogManagedPlugins:R}=l.$;return R?.includes(W)}function S(W){const{pluginCatalogPreinstalledPlugins:R}=l.$,G=R?.find(w=>w.id===W);return{found:!!G?.id,withVersion:!!G?.version}}function B(W){return W?.signature==="internal"}function K(W){return W.split(" - ")[0]}function U(W){return W.reduce((R,{id:G,name:w,type:_,orgName:Q,info:ae})=>{const q=ae.keywords?.join(" ").toLowerCase(),k=`${G} - ${w} - ${_} - ${Q} - ${q}`;return R.push(k),R},[])}function F(W,R){const G=U(W);let _=new n.A({intraMode:1,intraSub:0}).filter(G,R);return _===null?null:_.map(Q=>K(G[Q]))}function I(W){return!(W.isProvisioned||W.isCore||W.type===s.QE.renderer||W.isPreinstalled.withVersion||W.isManaged)}function V(W){return!(!I(W)||!W.hasUpdate||W.isUpdatingFromInstance)}function M(W){return!!(!I(W)||W.isEnterprise&&!(0,r.a)("enterprise.plugins")||!W.isPublished||W.isDisabled||!b())}function L(W){return W?W.angularDetected===!1:!1}function N(W){return W.isDisabled&&W.error===s.ZK.angular}},4506:(ne,A,e)=>{"use strict";e.d(A,{K:()=>u});var n=e(74848),a=e(96540),s=e(17548),l=e(92745),r=e(45863),c=e(37386),i=e(18857),o=e(33143),h=e(32603),f=e(71199),g=e(87748);class u extends r.Bs{constructor(p){super(p),this.validateIntervalRegex=/^(\d+(?:\.\d+)?)[Mwdhmsy]$/,this.addActivationHandler(()=>this._activationHandler())}static{this.Component=E}static{this.serializer={id:"ConditionalRenderingTimeRangeSize",name:"Time Range Size",deserialize:this.deserialize}}_activationHandler(){this.forEachChild(p=>{p.isActive||this._subs.add(p.activate())}),this._check(),this._subs.add(r.jh.getTimeRange(this).subscribeToState(()=>this._check()))}_check(){const p=this._evaluate();return p!==this.state.result&&(this.setState({...this.state,result:p}),(0,g.ah)(this)),p}_evaluate(){try{if(!this.validateIntervalRegex.test(this.state.value))return;const p=s.intervalToSeconds(this.state.value),m=r.jh.getTimeRange(this);return m.state.value.to.unix()-m.state.value.from.unix()<=p}catch{return}}changeValue(p){this.state.value!==p&&(this.setState({value:p}),this._check())}render(){return(0,n.jsx)(this.Component,{model:this},this.state.key)}serialize(){return{kind:"ConditionalRenderingTimeRangeSize",spec:{value:this.state.value}}}static deserialize(p){return new u({value:p.spec.value,result:void 0})}static createEmpty(){return new u({value:"7d",result:void 0})}}function E({model:v}){const{value:p}=v.useState(),[m,y]=(0,a.useState)(v.validateIntervalRegex.test(p));(0,a.useEffect)(()=>y(v.validateIntervalRegex.test(p)),[v,p]);const d=(0,a.useMemo)(()=>[{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.minutes","{{value}} minutes",{value:5}),value:"5m"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.minutes","{{value}} minutes",{value:15}),value:"15m"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.minutes","{{value}} minutes",{value:30}),value:"30m"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.hour","{{value}} hour",{value:1}),value:"1h"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.hours","{{value}} hours",{value:3}),value:"3h"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.hours","{{value}} hours",{value:6}),value:"6h"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.hours","{{value}} hours",{value:12}),value:"12h"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.hours","{{value}} hours",{value:24}),value:"24h"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.days","{{value}} days",{value:2}),value:"2d"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.days","{{value}} days",{value:7}),value:"7d"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.days","{{value}} days",{value:30}),value:"30d"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.days","{{value}} days",{value:90}),value:"90d"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.months","{{value}} months",{value:6}),value:"6M"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.year","{{value}} year",{value:1}),value:"1y"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.years","{{value}} years",{value:2}),value:"2y"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.values.years","{{value}} years",{value:5}),value:"5y"}],[]),x=(0,a.useMemo)(()=>d.find(D=>D.value===p)?d:[{label:p,value:p},...d],[d,p]),b=(0,a.useCallback)(D=>{o.cc.edit({description:(0,l.t)("dashboard.edit-actions.edit-time-range-rule","Change time range rule"),source:v,perform:()=>v.changeValue(D??""),undo:()=>v.changeValue(p)})},[v,p]);return(0,n.jsx)(f.B,{info:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.info","Show or hide the {{type}} if the dashboard time range is shorter than the selected time frame.",{type:(0,h.L9)((0,g.KG)(v))}),isObjectSupported:!0,model:v,title:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.label","Time range less than"),children:(0,n.jsx)(c.D,{invalid:!m,error:(0,l.t)("dashboard.conditional-rendering.conditions.time-range-size.invalid-message","Invalid interval"),noMargin:!0,children:(0,n.jsx)(i.l6,{isClearable:!1,allowCustomValue:!0,onCreateOption:D=>b(D),value:p,options:x,onChange:({value:D})=>b(D)})})})}},4575:(ne,A,e)=>{"use strict";e.d(A,{P7:()=>v,PP:()=>r,Y7:()=>p});var n=e(16515),a=e(8934),s=e(95004),l=e(57866),r=(m=>(m.exclude="exclude",m.include="include",m))(r||{});const c={id:l.Ct.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:m=>{const d=o(new Set([m]));return(x,b,D)=>m===x.name||m===(0,n.Ct)(x,b,D)||!!(d&&d(x,b,D))},getOptionsDisplayText:m=>`Field name: ${m}`},i={id:l.Ct.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:m=>{const{names:y,mode:d="include"}=m,x=new Set(y??[]),b=o(x),D=(C,P,T)=>x.has(C.name)||x.has((0,n.Ct)(C,P,T))||!!(b&&b(C,P,T));return d==="exclude"?(C,P,T)=>!D(C,P,T):D},getOptionsDisplayText:m=>{const{names:y,mode:d}=m,x=(y??[]).join(", ");return d==="exclude"?`All except: ${x}`:`All of: ${x}`}};function o(m){let y;return window.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback&&(m.has(s.Bc)?y=(x,b)=>!!x.labels&&x.labels?.__name__===x.name:(m.has("Time")||m.has("time"))&&(y=(x,b)=>b.meta?.typeVersion==null&&x.type===s.PU.time)),y}const h={id:l.Ct.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:m=>{const y=u(m);return(d,x,b)=>{const D=(0,n.Ct)(d,x,b);return!!y&&y.test(D)}},getOptionsDisplayText:m=>`Field name by pattern: ${m}`},f={id:l.Ct.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:m=>(y,d,x)=>d.refId===m,getOptionsDisplayText:m=>`Math all fields returned by query with reference ID: ${m}`},g={id:l.Ct.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:m=>{const y=h.get(m?.pattern||""),d=i.get({mode:"include",names:m?.names??[]});return(x,b,D)=>d(x,b,D)||y(x,b,D)},getOptionsDisplayText:m=>{const y=m?.pattern??"",d=m?.names?.join(",")??"";return`Field name by pattern: ${y} or names: ${d}`}},u=m=>{if(m)try{return(0,a.dO)(m)}catch(y){console.error(y);return}},E={id:l.jR.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:m=>{const y=(0,a.dO)(m);return d=>y.test(d.name||"")},getOptionsDisplayText:m=>`Frame name: ${m}`};function v(){return[c,h,i,g,f]}function p(){return[E]}},4590:(ne,A,e)=>{"use strict";e.d(A,{_o:()=>g});var n=e(2543),a=e.n(n),s=e(92138),l=e(5556),r=e(17548),c=e(36490),i=e(5114),o=e(18984);const h={kiosk:!0,autofitpanels:!0,orgId:!0,"_dash.hideTimePicker":!0,"_dash.hideVariables":!0,"_dash.hideLinks":!0};class f extends i.Q{constructor(){super({isPlaying:!1}),this.urls=[],this.index=0,this.numberOfLoops=0,this.locationUpdated=this.locationUpdated.bind(this)}navigateToDashboard(E=!1){const v=this.urls[this.index],p=c.Ny.getSearchObject(),m=(0,n.pickBy)(p,(x,b)=>h[b]),y=s.I.stripBaseFromUrl(v);this.index++,this.validPlaylistUrl=y,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval);const d=y+"?"+l.kM.toUrlParams(m);E?c.Ny.getHistory().replace(d):c.Ny.push(d)}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}this.navigateToDashboard()}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(E){E.pathname!==this.validPlaylistUrl&&this.stop()}async start(E){this.stop(),this.startUrl=window.location.href,this.index=0,this.setState({isPlaying:!0}),this.locationListenerUnsub=c.Ny.getHistory().listen(this.locationUpdated);const v=[];if(!E.spec?.items?.length)return;this.interval=r.intervalToMs(E.spec?.interval);const p=await(0,o.qY)(E.spec?.items);for(const m of p)if(m.dashboards)for(const y of m.dashboards)v.push(y.url);v.length&&(this.urls=v,this.setState({isPlaying:!0}),this.navigateToDashboard(!0))}stop(){this.state.isPlaying&&(this.index=0,this.setState({isPlaying:!1}),this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),c.Ny.getSearchObject().kiosk&&c.Ny.partial({kiosk:null}))}}const g=new f},4598:(ne,A,e)=>{"use strict";e.d(A,{d:()=>b,l:()=>D});var n=e(74848),a=e(2543),s=e(96540),l=e(38919),r=e(44232),c=e(739),i=e(98005),o=e(6399),h=e(54735),f=e(33352),g=e(65642),u=e(16515),E=e(95004),v=e(76637),p=e(63142),m=e(4268),y=e(36192);const d=(0,s.memo)(({data:C,placement:P,calcs:T,displayMode:O,...S})=>{const B=(0,p.$j)();let K=[];return(0,u.Fm)(C),C.forEach((U,F)=>{U.fields.forEach((I,V)=>{const M=V+1;if(I.type===E.PU.time||I.config.custom?.hideFrom?.legend)return;const L=I.state?.displayName??I.name,N=(0,v.lz)(I,B).color,W={label:L.toString(),color:N,yAxis:I.config.custom?.axisPlacement===c.vM.Right?2:1,disabled:I.state?.hideFrom?.viz,getDisplayValues:()=>(0,y.UO)(T,I,B),getItemKey:()=>`${L}-${F}-${M}`};K.push(W)})}),(0,n.jsx)(h.KU.Legend,{placement:P,...S,children:(0,n.jsx)(m.t,{placement:P,items:K,displayMode:O,sortBy:S.sortBy,sortDesc:S.sortDesc,isSortable:!0})})});d.displayName="BarGaugeLegend";var x=e(88879);class b extends s.PureComponent{constructor(){super(...arguments),this.renderComponent=(P,T)=>{const{options:O,fieldConfig:S}=this.props,{value:B,alignmentFactors:K,orientation:U,width:F,height:I,count:V}=P,{field:M,display:L,view:N,colIndex:W}=B,{openMenu:R,targetClassName:G}=T,w=this.getItemSpacing(),_=(I+w)*V-w>this.props.height;let Q;return N&&(0,a.isNumber)(W)&&(Q=N.getFieldDisplayProcessor(W)),(0,n.jsx)(i.xE,{value:D(V,S.defaults,L),width:F,height:I,orientation:U,field:M,text:O.text,display:Q,theme:g.$W.theme2,itemSpacing:w,displayMode:O.displayMode,onClick:R,className:G,alignmentFactors:V>1?K:void 0,showUnfilled:O.showUnfilled,valueDisplayMode:O.valueMode,namePlacement:O.namePlacement,isOverflow:_})},this.renderValue=P=>{const{value:T,orientation:O}=P,{hasLinks:S,getLinks:B}=T;return S&&B?(0,n.jsx)("div",{style:{width:"100%",display:O===l.wV.Vertical?"flex":"initial"},children:(0,n.jsx)(o.e,{style:{height:"100%"},links:B,children:K=>this.renderComponent(P,K)})}):this.renderComponent(P,{})},this.getValues=()=>{const{data:P,options:T,replaceVariables:O,fieldConfig:S,timeZone:B}=this.props;return(0,r.PI)({fieldConfig:S,reduceOptions:T.reduceOptions,replaceVariables:O,theme:g.$W.theme2,data:P.series,timeZone:B})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}getOrientation(){const{options:P,width:T,height:O}=this.props,{orientation:S}=P;return S===l.wV.Auto?T>O?l.wV.Vertical:l.wV.Horizontal:S}calcBarSize(){const{options:P}=this.props,T=this.getOrientation(),O=P.sizing===c.T6.Manual,S=T===l.wV.Vertical,B=T===l.wV.Horizontal,K=O&&S?P.minVizWidth:x.K.minVizWidth,U=O&&B?P.minVizHeight:x.K.minVizHeight,F=O&&B?P.maxVizHeight:x.K.maxVizHeight;return{minVizWidth:K,minVizHeight:U,maxVizHeight:F}}getLegend(){const{options:P,data:T}=this.props,{legend:O}=P;return O.showLegend&&T&&T.series.length>0?(0,n.jsx)(d,{data:T.series,...O}):null}render(){const{height:P,width:T,options:O,data:S,renderCounter:B}=this.props,{minVizWidth:K,minVizHeight:U,maxVizHeight:F}=this.calcBarSize();return(0,n.jsx)(h.KU,{width:T,height:P,legend:this.getLegend(),children:(I,V)=>(0,n.jsx)(f.S,{source:S,getAlignmentFactors:r.XS,getValues:this.getValues,renderValue:this.renderValue,renderCounter:B,width:I,height:V,maxVizHeight:F,minVizWidth:K,minVizHeight:U,itemSpacing:this.getItemSpacing(),orientation:O.orientation})})}}function D(C,P,T){return C===1&&!P.displayName?{...T,title:void 0}:T}},4604:(ne,A,e)=>{"use strict";e.d(A,{O2:()=>I,SW:()=>V,og:()=>G});var n=e(2543),a=e(53543),s=e(3594),l=e(7389),r=e(48480),c=e(5556),i=e(38036),o=e(18600),h=e(36394),f=e(57866),g=e(95004),u=e(79184),E=e(33023),v=e(78282),p=e(739),m=e(74198),y=e(83162),d=e(65642),x=e(95943);function b(J){return Array.from(new Array(J+1),(Z,te)=>te).filter(Z=>J%Z===0)}var D=e(77197),C=e(28998),P=e(67933),T=e(78763),O=e(18615),S=e(71843),B=e(75663),K=e(87963),U=e(82612),F=e(56623);a.D.setInit(y.H),a.G.setInit(y.u);const I=42;class V{constructor(Z){this.dashboard=Z,(0,v.l)()||(0,v.h)(new C.xq)}updateSchema(Z){let te,se,ie,ce;const re=this.dashboard.schemaVersion,ue=[];if(this.dashboard.schemaVersion=I,re!==this.dashboard.schemaVersion){if(re<2&&(Z.services&&Z.services.filter&&(this.dashboard.time=Z.services.filter.time,this.dashboard.templating.list=Z.services.filter.list||[]),ue.push(X=>(X.type==="graphite"&&(X.type="graph"),X.type!=="graph"||((0,n.isBoolean)(X.legend)&&(X.legend={show:X.legend}),X.grid&&(X.grid.min&&(X.grid.leftMin=X.grid.min,delete X.grid.min),X.grid.max&&(X.grid.leftMax=X.grid.max,delete X.grid.max)),X.y_format&&(X.y_formats||(X.y_formats=[]),X.y_formats[0]=X.y_format,delete X.y_format),X.y2_format&&(X.y_formats||(X.y_formats=[]),X.y_formats[1]=X.y2_format,delete X.y2_format)),X))),re<3){let X=this.dashboard.getNextPanelId();ue.push(le=>(le.id||(le.id=X,X+=1),le))}if(re<4&&ue.push(X=>(X.type!=="graph"||((0,n.each)(X.aliasYAxis,(le,he)=>{X.seriesOverrides=[{alias:he,yaxis:le}]}),delete X.aliasYAxis),X)),re<6){const X=(0,n.find)(Z.pulldowns,{type:"annotations"});for(X&&(this.dashboard.annotations={list:X.annotations||[]}),te=0;te<this.dashboard.templating.list.length;te++){const le=this.dashboard.templating.list[te];le.datasource===void 0&&(le.datasource=null),le.type==="filter"&&(le.type="query"),le.type===void 0&&(le.type="query"),le.allFormat===void 0&&delete le.allFormat}}if(re<7&&(Z.nav&&Z.nav.length&&(this.dashboard.timepicker=Z.nav[0]),ue.push(X=>((0,n.each)(X.targets,le=>{le.refId||(le.refId=X.getNextQueryLetter&&X.getNextQueryLetter())}),X))),re<8&&ue.push(X=>((0,n.each)(X.targets,le=>{le.fields&&le.tags&&le.groupBy&&(le.rawQuery?(delete le.fields,delete le.fill):(le.select=(0,n.map)(le.fields,he=>{const fe=[];return fe.push({type:"field",params:[he.name]}),fe.push({type:he.func,params:[]}),he.mathExpr&&fe.push({type:"math",params:[he.mathExpr]}),he.asExpr&&fe.push({type:"alias",params:[he.asExpr]}),fe}),delete le.fields,(0,n.each)(le.groupBy,he=>{he.type==="time"&&he.interval&&(he.params=[he.interval],delete he.interval),he.type==="tag"&&he.key&&(he.params=[he.key],delete he.key)}),le.fill&&(le.groupBy.push({type:"fill",params:[le.fill]}),delete le.fill)))}),X)),re<9&&ue.push(X=>{if(X.type!=="singlestat"&&X.thresholds!=="")return X;if(X.thresholds){const le=X.thresholds.split(",");le.length>=3&&(le.shift(),X.thresholds=le.join(","))}return X}),re<10&&ue.push(X=>(X.type!=="table"||(0,n.each)(X.styles,le=>{if(le.thresholds&&le.thresholds.length>=3){const he=le.thresholds;he.shift(),le.thresholds=he}}),X)),re<12&&(0,n.each)(this.dashboard.getVariables(),X=>{"refresh"in X&&(X.refresh&&(X.refresh=1),X.refresh||(X.refresh=0)),"hideVariable"in X&&X.hideVariable?X.hide=2:"hideLabel"in X&&X.hideLabel&&(X.hide=1)}),re<12&&ue.push(X=>(X.type!=="graph"||!X.grid||X.yaxes||(X.yaxes=[{show:X["y-axis"],min:X.grid.leftMin,max:X.grid.leftMax,logBase:X.grid.leftLogBase,format:X.y_formats[0],label:X.leftYAxisLabel},{show:X["y-axis"],min:X.grid.rightMin,max:X.grid.rightMax,logBase:X.grid.rightLogBase,format:X.y_formats[1],label:X.rightYAxisLabel}],X.xaxis={show:X["x-axis"]},delete X.grid.leftMin,delete X.grid.leftMax,delete X.grid.leftLogBase,delete X.grid.rightMin,delete X.grid.rightMax,delete X.grid.rightLogBase,delete X.y_formats,delete X.leftYAxisLabel,delete X.rightYAxisLabel,delete X["y-axis"],delete X["x-axis"]),X)),re<13&&ue.push(X=>{if(X.type!=="graph"||!X.grid)return X;X.thresholds||(X.thresholds=[]);const le={},he={};return X.grid.threshold1!==null&&(le.value=X.grid.threshold1,X.grid.thresholdLine?(le.line=!0,le.lineColor=X.grid.threshold1Color,le.colorMode="custom"):(le.fill=!0,le.fillColor=X.grid.threshold1Color,le.colorMode="custom")),X.grid.threshold2!==null&&(he.value=X.grid.threshold2,X.grid.thresholdLine?(he.line=!0,he.lineColor=X.grid.threshold2Color,he.colorMode="custom"):(he.fill=!0,he.fillColor=X.grid.threshold2Color,he.colorMode="custom")),(0,n.isNumber)(le.value)&&((0,n.isNumber)(he.value)?le.value>he.value?(le.op=he.op="lt",X.thresholds.push(le),X.thresholds.push(he)):(le.op=he.op="gt",X.thresholds.push(le),X.thresholds.push(he)):(le.op="gt",X.thresholds.push(le))),delete X.grid.threshold1,delete X.grid.threshold1Color,delete X.grid.threshold2,delete X.grid.threshold2Color,delete X.grid.thresholdLine,X}),re<14&&(this.dashboard.graphTooltip=Z.sharedCrosshair?1:0),re<16&&this.upgradeToGridLayout(Z),re<17&&ue.push(X=>{if(X.minSpan){const le=x.cV/X.minSpan,he=b(x.cV);X.maxPerRow=he[(0,n.findIndex)(he,fe=>fe>le)-1]}return delete X.minSpan,X}),re<18&&ue.push(X=>(X["options-gauge"]&&(X.options=X["options-gauge"],X.options.valueOptions={unit:X.options.unit,stat:X.options.stat,decimals:X.options.decimals,prefix:X.options.prefix,suffix:X.options.suffix},X.options.thresholds&&X.options.thresholds.reverse(),delete X.options.options,delete X.options.unit,delete X.options.stat,delete X.options.decimals,delete X.options.prefix,delete X.options.suffix,delete X["options-gauge"]),X)),re<19&&ue.push(X=>(X.links&&(0,n.isArray)(X.links)&&(X.links=X.links.map(N)),X)),re<20){const X=le=>({...le,url:W(le.url)});ue.push(le=>(le.options&&le.options.dataLinks&&(0,n.isArray)(le.options.dataLinks)&&(le.options.dataLinks=le.options.dataLinks.map(X)),le.options&&le.options.fieldOptions&&le.options.fieldOptions.defaults&&(le.options.fieldOptions.defaults.links&&(0,n.isArray)(le.options.fieldOptions.defaults.links)&&(le.options.fieldOptions.defaults.links=le.options.fieldOptions.defaults.links.map(X)),le.options.fieldOptions.defaults.title&&(le.options.fieldOptions.defaults.title=W(le.options.fieldOptions.defaults.title))),le))}if(re<21){const X=le=>({...le,url:le.url.replace(/__series.labels/g,"__field.labels")});ue.push(le=>(le.options&&le.options.dataLinks&&(0,n.isArray)(le.options.dataLinks)&&(le.options.dataLinks=le.options.dataLinks.map(X)),le.options&&le.options.fieldOptions&&le.options.fieldOptions.defaults&&le.options.fieldOptions.defaults.links&&(0,n.isArray)(le.options.fieldOptions.defaults.links)&&(le.options.fieldOptions.defaults.links=le.options.fieldOptions.defaults.links.map(X)),le))}if(re<22&&ue.push(X=>(X.type!=="table"||(0,n.each)(X.styles,le=>{le.align="auto"}),X)),re<23)for(const X of this.dashboard.templating.list){if(!(0,P.iv)(X))continue;const{multi:le,current:he}=X;(0,s.R)(he)||(X.current=(0,T.C)(he,le))}if(re<24&&ue.push(X=>{const le=X.type==="table";if(le&&!X.styles)return X;const he=X.table==="table2";if(!le||he)return X;if(X.type=le?"table-old":"table",X.type==="table-old"){const fe=(0,F.p)(X);fe&&(X.autoMigrateFrom=X.type,X.type=fe)}return X}),re<25,re<26&&ue.push(X=>(X.type==="text2"&&(X.type="text",delete X.options.angular),X)),re<27&&(this.removeRepeatedPanels(),this.dashboard.templating.list=this.dashboard.templating.list.map(X=>{if(!(0,P.VO)(X))return X;const le={...X};return le.current={selected:!0,text:le.query??"",value:le.query??""},le.options=[le.current],le.hide===l.zL.dontHide||le.hide===l.zL.hideLabel?{...le,type:"textbox"}:le})),re<28){ue.push(X=>X.type==="singlestat"?R(X):X);for(const X of this.dashboard.templating.list)X.tags&&delete X.tags,X.tagsQuery&&delete X.tagsQuery,X.tagValuesQuery&&delete X.tagValuesQuery,X.useTags&&delete X.useTags}if(re<29)for(const X of this.dashboard.templating.list)X.type==="query"&&(X.refresh!==1&&X.refresh!==2&&(X.refresh=1),X.options?.length&&(X.options=[]));if(re<30&&(ue.push(_),ue.push(k)),re<31&&ue.push(X=>{if(X.transformations){for(const le of X.transformations)if(le.id===u.V.id)return w(X,u.V.id,{id:E.o.id,options:{}})}return X}),re<32,re<33&&ue.push(X=>{if(X.datasource=G(X.datasource,{returnDefaultAsNull:!0}),!X.targets)return X;for(const le of X.targets){const he=G(le.datasource,{returnDefaultAsNull:!0});he!=null&&(le.datasource=he)}return X}),re<34&&(ue.push(X=>(this.migrateCloudWatchQueries(X),X)),this.migrateCloudWatchAnnotationQuery()),re<35&&ue.push(ee),re<36){for(const le of this.dashboard.annotations.list)le.datasource=G(le.datasource,{returnDefaultAsNull:!1});const X=(0,v.l)().getInstanceSettings(null);if(X){for(const le of this.dashboard.templating.list)le.type==="query"&&le.datasource===null&&(le.datasource=(0,r.p$)(X));ue.push(le=>{if(le.targets){let he=!1;le.datasource==null&&le.targets.length>0&&(le.datasource=(0,r.p$)(X),he=!0);for(const fe of le.targets)(fe.datasource==null||fe.datasource.uid==null)&&(le.datasource?.uid!==O.uv?fe.datasource={...le.datasource}:fe.datasource=G(fe.datasource,{returnDefaultAsNull:!1})),he&&fe.datasource?.uid!=="__expr__"&&(le.datasource=fe.datasource)}return le})}}if(re<37&&ue.push(X=>(X.options?.legend&&typeof X.options.legend=="object"&&(X.options.legend.displayMode==="hidden"||X.options.legend.showLegend===!1?(X.options.legend.displayMode="list",X.options.legend.showLegend=!1):X.options.legend={...X.options.legend,showLegend:!0}),X)),re<38&&ue.push(X=>{if(X.type==="table"&&X.fieldConfig!==void 0){const le=X.fieldConfig.defaults?.custom?.displayMode;if(le!==void 0&&(X.fieldConfig.defaults.custom.cellOptions=(0,m.o7)(le),delete X.fieldConfig.defaults.custom.displayMode),X.fieldConfig?.overrides)for(const he of X.fieldConfig.overrides)for(let fe=0;fe<(he.properties?.length||0);fe++){let Ce=he.properties[fe].value;he.properties[fe].id==="custom.displayMode"&&(he.properties[fe].id="custom.cellOptions",he.properties[fe].value=(0,m.o7)(Ce))}}return X}),re<39&&ue.push(X=>(X.transformations?.forEach(le=>{if(le.id==="timeSeriesTable"&&le.options!==void 0&&le.options.refIdToStat!==void 0){let he={};for(const[fe,Ce]of Object.entries(le.options.refIdToStat)){let Ae={};Ae.stat=Ce,he[fe]=Ae}le.options=he}}),X)),re<40&&typeof this.dashboard.refresh!="string"&&(this.dashboard.refresh=""),re<41&&"time_options"in this.dashboard.timepicker&&delete this.dashboard.timepicker.time_options,re<42&&ue.push(j),ue.length!==0)for(se=0;se<this.dashboard.panels.length;se++)for(ie=0;ie<ue.length;ie++){this.dashboard.panels[se]=ue[ie].call(this,this.dashboard.panels[se]);const X=this.dashboard.panels[se].panels;if(X)for(ce=0;ce<X.length;ce++)X[ce]=ue[ie].call(this,X[ce])}}}removeRepeatedPanels(){const Z=[];for(const te of this.dashboard.panels)te.repeatPanelId||te.repeatByRow||(te.type==="row"&&Array.isArray(te.panels)&&(te.panels=te.panels.filter(se=>!se.repeatPanelId)),Z.push(te));this.dashboard.panels=Z}migrateCloudWatchQueries(Z){for(const te of Z.targets||[])if(Q(te)&&((0,K.WB)(te),te.hasOwnProperty("statistics"))){const se=(0,K.MA)(te,[...Z.targets]);for(const ie of se)Z.targets.push(ie)}}migrateCloudWatchAnnotationQuery(){for(const Z of this.dashboard.annotations.list)if(ae(Z)){const te=(0,K._I)(Z);for(const se of te)this.dashboard.annotations.list.push(se)}}upgradeToGridLayout(Z){let te=0;const se=x.cV/12;let ce=(0,n.max)((0,n.flattenDeep)((0,n.map)(Z.rows,ue=>(0,n.map)(ue.panels,"id"))))+1;if(!Z.rows)return;const re=(0,n.some)(Z.rows,ue=>ue.collapse||ue.showTitle||ue.repeat);for(const ue of Z.rows){if(ue.repeatIteration)continue;const X=ue.height||x.bJ,le=M(X),he={};let fe;re&&(he.id=ce,he.type="row",he.title=ue.title,he.collapsed=ue.collapse,he.repeat=ue.repeat,he.panels=[],he.gridPos={x:0,y:te,w:x.cV,h:le},fe=new U.a9(he),ce++,te++);const Ce=new L(le,x.cV,te);for(const Ae of ue.panels){Ae.span=Ae.span||x.o9,Ae.minSpan&&(Ae.minSpan=Math.min(x.cV,x.cV/12*Ae.minSpan));const _e=Math.floor(Ae.span)*se,Xe=Ae.height?M(Ae.height):le,De=Ce.getPanelPosition(Xe,_e);te=Ce.yPos,Ae.gridPos={x:De.x,y:te+De.y,w:_e,h:Xe},Ce.addPanel(Ae.gridPos),delete Ae.span,fe&&he.collapsed?fe.panels?.push(Ae):this.dashboard.panels.push(new U.a9(Ae))}fe&&this.dashboard.panels.push(fe),fe&&he.collapsed||(te+=le)}}}function M(J){return(0,n.isString)(J)&&(J=parseInt(J.replace("px",""),10)),J<x.cx&&(J=x.cx),Math.ceil(J/(x.sD+x.dU))}class L{constructor(Z,te=x.cV,se=0){this.area=new Array(te).fill(0),this.yPos=se,this.height=Z}reset(){this.area.fill(0)}addPanel(Z){for(let te=Z.x;te<Z.x+Z.w;te++)(!this.area[te]||Z.y+Z.h-this.yPos>this.area[te])&&(this.area[te]=Z.y+Z.h-this.yPos);return this.area}getPanelPosition(Z,te,se=!1){let ie,ce,re;for(let ue=this.area.length-1;ue>=0&&this.height-this.area[ue]>0;ue--)if(ce===void 0)ce=ue;else if(ue<this.area.length-1&&this.area[ue]<=this.area[ue+1])ie=ue;else break;if(ie!==void 0&&ce!==void 0&&ce-ie>=te-1){const ue=(0,n.max)(this.area.slice(ie));re={x:ie,y:ue}}else return se?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(Z,te,!0));return re}}function N(J){let Z=J.url;return!Z&&J.dashboard&&(Z=`dashboard/db/${D.A.slugifyForUrl(J.dashboard)}`),!Z&&J.dashUri&&(Z=`dashboard/${J.dashUri}`),Z||(Z="/"),J.keepTime&&(Z=c.kM.appendQueryToUrl(Z,`$${i.c.keepTime}`)),J.includeVars&&(Z=c.kM.appendQueryToUrl(Z,`$${i.c.includeVars}`)),J.params&&(Z=c.kM.appendQueryToUrl(Z,J.params)),{url:Z,title:J.title,targetBlank:J.targetBlank}}function W(J){const Z=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return J.replace(Z,(te,se,ie,ce,re,ue)=>se?"__series.name":ie?"${__series.name}":ce?"__value.time":re?"__field.name":ue?"${__field.name}":te)}function R(J){if(d.$W.panels["grafana-singlestat-panel"])return J.type="grafana-singlestat-panel",J;let Z=!1;return J.changePlugin||(Z=!0,J=new U.a9(J)),J.plugin={angularPanelCtrl:{}},J.gauge?.show?(S.plugin.meta=d.$W.panels.gauge,J.changePlugin(S.plugin)):(B.plugin.meta=d.$W.panels.stat,J.changePlugin(B.plugin)),Z?J.getSaveModel():J}function G(J,Z){if(Z.returnDefaultAsNull&&(J==null||J==="default"))return null;if((0,r.fN)(J))return J;const te=(0,v.l)().getInstanceSettings(J);return te?(0,r.p$)(te):{uid:J||void 0}}function w(J,Z,te){if(J.transformations){const se=[];for(const ie of J.transformations)se.push(ie),ie.id===Z&&se.push({...te});J.transformations=se}return J}function _(J){const Z=J.fieldConfig;if(!Z)return J;if(Z.defaults&&Z.defaults.mappings&&(Z.defaults.mappings=q(Z.defaults.mappings,Z.defaults.thresholds)),Array.isArray(Z.overrides))for(const te of Z.overrides)for(const se of te.properties)se.id==="mappings"&&(se.value=q(se.value));return J}function Q(J){return J.hasOwnProperty("dimensions")&&J.hasOwnProperty("namespace")&&J.hasOwnProperty("region")&&J.hasOwnProperty("metricName")}function ae(J){return J.hasOwnProperty("dimensions")&&J.hasOwnProperty("namespace")&&J.hasOwnProperty("region")&&J.hasOwnProperty("prefixMatching")&&J.hasOwnProperty("statistics")}function q(J,Z){if(!J)return;const te={type:o.d.ValueToText,options:{}},se=[];for(const ie of J){if(ie.type&&ie.options){ie.type===o.d.ValueToText?te.options={...te.options,...ie.options}:se.push(ie);continue}let ce;const re=parseFloat(ie.text);if(Z&&!isNaN(re)){const ue=(0,h.yQ)(re,Z.steps);ue&&ue.color&&(ce=ue.color)}switch(ie.type){case 1:ie.value!=null&&(ie.value==="null"?se.push({type:o.d.SpecialValue,options:{match:o.W.Null,result:{text:ie.text,color:ce}}}):te.options[String(ie.value)]={text:ie.text,color:ce});break;case 2:se.push({type:o.d.RangeToText,options:{from:+ie.from,to:+ie.to,result:{text:ie.text,color:ce}}});break}}return Object.keys(te.options).length>0&&se.unshift(te),se}function k(J){return(J.type==="timeseries"||J.type==="xychart"||J.type==="xychart2")&&J.options.tooltipOptions&&(J.options={...J.options,tooltip:J.options.tooltipOptions},delete J.options.tooltipOptions),J}function ee(J){return J.type==="timeseries"&&J.fieldConfig?.defaults.custom?.axisPlacement===p.vM.Hidden&&(J.fieldConfig={...J.fieldConfig,overrides:[...J.fieldConfig.overrides,{matcher:{id:f.Ct.byType,options:g.PU.time},properties:[{id:"custom.axisPlacement",value:p.vM.Auto}]}]}),J}function j(J){return J.fieldConfig&&J.fieldConfig.overrides&&(J.fieldConfig.overrides=J.fieldConfig.overrides.map(Z=>(Z.properties&&(Z.properties=Z.properties.map(te=>(te.id==="custom.hideFrom"&&te.value?.viz===!0&&(te.value.tooltip=!0),te))),Z))),J}},4651:(ne,A,e)=>{"use strict";e.d(A,{Cu:()=>o,HZ:()=>f,Mt:()=>h,NI:()=>c,PN:()=>g,Tz:()=>r,Uj:()=>l,iX:()=>u,uQ:()=>i,zd:()=>E});var n=e(46644),a=e(65642),s=e(2954);const l="__expr__";var r=(v=>(v.math="math",v.reduce="reduce",v.resample="resample",v.classic="classic_conditions",v.threshold="threshold",v.sql="sql",v))(r||{});const c=v=>{switch(v){case"math":return"Math";case"reduce":return"Reduce";case"resample":return"Resample";case"classic_conditions":return"Classic condition (legacy)";case"threshold":return"Threshold";case"sql":return"SQL"}},i=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition (legacy)",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition. Disables multi-dimensional alerts for this rule."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."},{value:"sql",label:"SQL",description:"Transform data using SQL. Supports MySQL syntax."}].filter(v=>v.value==="sql"?a.$W?.featureToggles?.sqlExpressions:!0),o=[{value:n.gy.min,label:"Min",description:"Get the minimum value"},{value:n.gy.max,label:"Max",description:"Get the maximum value"},{value:n.gy.mean,label:"Mean",description:"Get the average value"},{value:n.gy.median,label:"Median",description:"Get the median value"},{value:n.gy.sum,label:"Sum",description:"Get the sum of all values"},{value:n.gy.count,label:"Count",description:"Get the number of values"},{value:n.gy.last,label:"Last",description:"Get the last value"}];var h=(v=>(v.Strict="",v.ReplaceNonNumbers="replaceNN",v.DropNonNumbers="dropNN",v))(h||{});const f=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],g=[{value:n.gy.last,label:"Last",description:"Fill with the last value"},{value:n.gy.min,label:"Min",description:"Fill with the minimum value"},{value:n.gy.max,label:"Max",description:"Fill with the maximum value"},{value:n.gy.mean,label:"Mean",description:"Fill with the average value"},{value:n.gy.sum,label:"Sum",description:"Fill with the sum of all values"}],u=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],E=[{value:s.p.IsAbove,label:"Is above"},{value:s.p.IsBelow,label:"Is below"},{value:s.p.IsEqual,label:"Is equal to"},{value:s.p.IsNotEqual,label:"Is not equal to"},{value:s.p.IsGreaterThanEqual,label:"Is above or equal to"},{value:s.p.IsLessThanEqual,label:"Is below or equal to"},{value:s.p.IsWithinRange,label:"Is within range"},{value:s.p.IsOutsideRange,label:"Is outside range"},{value:s.p.IsWithinRangeIncluded,label:"Is within range included"},{value:s.p.IsOutsideRangeIncluded,label:"Is outside range included"}]},4652:(ne,A,e)=>{"use strict";e.d(A,{C:()=>o});var n=e(74848),a=e(92745),s=e(18027),l=e(97095),r=e(18857),c=e(63527),i=e(4651);const o=({labelWidth:h="auto",onChange:f,refIds:g,query:u})=>{const E=i.PN.find(x=>x.value===u.downsampler),v=i.iX.find(x=>x.value===u.upsampler),p=x=>{f({...u,window:x.target.value})},m=x=>{f({...u,expression:x.value})},y=x=>{f({...u,downsampler:x.value})},d=x=>{f({...u,upsampler:x.value})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.C,{children:(0,n.jsx)(s.I,{label:(0,a.t)("expressions.resample.label-input","Input"),labelWidth:h,children:(0,n.jsx)(r.l6,{onChange:m,options:g,value:u.expression,width:20})})}),(0,n.jsxs)(l.C,{children:[(0,n.jsx)(s.I,{label:(0,a.t)("expressions.resample.label-resample-to","Resample to"),labelWidth:h,tooltip:(0,a.t)("expressions.resample.tooltip-s-m-h","10s, 1m, 30m, 1h"),children:(0,n.jsx)(c.p,{onChange:p,value:u.window,width:15})}),(0,n.jsx)(s.I,{label:(0,a.t)("expressions.resample.label-downsample","Downsample"),children:(0,n.jsx)(r.l6,{options:i.PN,value:E,onChange:y,width:25})}),(0,n.jsx)(s.I,{label:(0,a.t)("expressions.resample.label-upsample","Upsample"),children:(0,n.jsx)(r.l6,{options:i.iX,value:v,onChange:d,width:25})})]})]})}},4735:(ne,A,e)=>{"use strict";e.d(A,{v:()=>l});var n=e(88483),a=e(41119),s=e(68125);function l(r){return new n.c(c=>{let i=0;r.forEach(o=>{const h=new FileReader;h.readAsArrayBuffer(o),h.onload=()=>{const f=h.result;if(f&&f instanceof ArrayBuffer){const u=new TextDecoder("utf-8").decode(f);if(o.type==="application/json"){const E=JSON.parse(u);c.next({dataFrames:[(0,a.Vc)(E)],file:o})}else c.next({dataFrames:(0,s.Jh)(u),file:o});++i>=r.length&&c.complete()}}})})}},4745:(ne,A,e)=>{"use strict";e.d(A,{$$:()=>C,$n:()=>a,Bc:()=>D,Cf:()=>g,E5:()=>x,FL:()=>m,H$:()=>f,J9:()=>s,O6:()=>h,Ri:()=>r,Td:()=>E,bw:()=>o,cu:()=>b,hk:()=>l,iS:()=>d,ij:()=>p,o2:()=>c,sm:()=>y,vT:()=>u,z5:()=>v});const n='Invalid usage of extension point. Reason: Extension point id should be prefixed with your plugin id, e.g "myorg-foo-app/toolbar/v1". Returning an empty array of extensions.',a=(P,T)=>`Invalid usage of extension point. Reason: Extension point id should be prefixed with your plugin id, e.g "${P}/${T}".`,s=P=>`Invalid usage of extension point. Reason: Core Grafana extension point id should be prefixed with "grafana/", e.g "grafana/${P}".`,l='Invalid usage of extension point. Reason: Core Grafana extension point id should be exposed to plugins via the "PluginExtensionPoints" enum in the "grafana-data" package (/packages/grafana-data/src/types/pluginExtensions.ts).',r='Invalid usage of extension point. Reason: The extension point is not recorded in the "plugin.json" file. Extension points must be listed in the section "extensions.extensionPoints[]". Returning an empty array of extensions.',c="Title is missing.",i="Description is missing.",o='The "fn" argument is invalid, it should be a function.',h='The "configure" function is invalid. It should be a function.',f='Either "path" or "onClick" is required.',g='The "path" is required and should start with "/a/<pluginId>".',u="The component id does not match the id naming convention. Id should be prefixed with plugin id. e.g 'myorg-basic-app/my-component-id/v1'.",E="An exposed component with the same id already exists.",v='The exposed component was not recorded in the plugin.json. Exposed component extensions must be listed in the section "extensions.exposedComponents[]". Currently, this is only required in development but will be enforced also in production builds in the future.',p='Invalid usage of extension point. Reason: The exposed component is not recorded in the "plugin.json" file. Exposed components must be listed in the dependencies[] section.',m='The extension was not recorded in the plugin.json. Added component extensions must be listed in the section "extensions.addedComponents[]". Currently, this is only required in development but will be enforced also in production builds in the future.',y=`The "title" doesn't match the title recorded in plugin.json.`,d='The extension was not recorded in the plugin.json. Added link extensions must be listed in the section "extensions.addedLinks[]". Currently, this is only required in development but will be enforced also in production builds in the future.',x='The extension was not recorded in the plugin.json. Added function extensions must be listed in the section "extensions.addedFunction[]". Currently, this is only required in development but will be enforced also in production builds in the future.',b=`The "description" doesn't match the description recorded in plugin.json.`,D='The "targets" for the registered extension does not match the targets recorded in plugin.json. Currently, this is only required in development but will be enforced also in production builds in the future.',C=P=>`The app plugin with plugin id "${P}" was not found.`},4896:(ne,A,e)=>{"use strict";e.d(A,{Iu:()=>s,Iy:()=>c,QC:()=>r,nG:()=>a,zu:()=>l});var n=e(739);const a=Object.freeze({fixed:"",mode:n.RU.Field,field:""});var s=(i=>(i.Icon="img/icons/unicons",i.IOT="img/icons/iot",i.Marker="img/icons/marker",i.BG="img/bg",i))(s||{}),l=(i=>(i.Icon="icon",i.Image="image",i))(l||{}),r=(i=>(i.Folder="folder",i.URL="url",i.Upload="upload",i))(r||{}),c=(i=>(i.SMALL="small",i.NORMAL="normal",i))(c||{})},4974:(ne,A,e)=>{"use strict";e.d(A,{Dr:()=>f,K4:()=>o,i6:()=>E,zd:()=>h});var n=e(11393),a=e(25953),s=e(29425),l=e(8835),r=e(1682),c=e(8285),i=e(67350);function o(v){const{maxColumnCount:p,fillScreen:m,columnWidth:y,rowHeight:d,layout:x}=v.state,b=(0,n.kH)();return{kind:"AutoGridLayout",spec:{maxColumnCount:p,fillScreen:m===b.fillScreen?void 0:m,...g(y),...u(d),items:x.state.children.map(h)}}}function h(v){const m={kind:"AutoGridLayoutItem",spec:{element:{kind:"ElementReference",name:r.b4.getElementIdentifierForVizPanel(v.state?.body)}}},y=v.state.conditionalRendering?.serialize();return y?.spec.items.length&&(m.spec.conditionalRendering=y),v.state.variableName&&(m.spec.repeat={mode:"variable",value:v.state.variableName}),m}function f(v,p,m,y){if(v.kind!=="AutoGridLayout")throw new Error("Invalid layout kind");const d=(0,n.kH)(),{maxColumnCount:x,columnWidthMode:b,columnWidth:D,rowHeightMode:C,rowHeight:P,fillScreen:T}=v.spec,O=v.spec.items.map(K=>E(K,p,y)),S=b==="custom"?D:b,B=C==="custom"?P:C;return new l.X2({maxColumnCount:x,columnWidth:S,rowHeight:B,fillScreen:T??d.fillScreen,layout:new s.o({templateColumns:(0,l.Kf)(x??d.maxColumnCount,S??l.j),autoRows:(0,l.jo)(B??l.YL,T??!1),children:O})})}function g(v){return{columnWidthMode:typeof v=="number"?"custom":v,columnWidth:typeof v=="number"?v:void 0}}function u(v){return{rowHeightMode:typeof v=="number"?"custom":v,rowHeight:typeof v=="number"?v:void 0}}function E(v,p,m){const y=p[v.spec.element.name];if(!y)throw new Error(`Panel with uid ${v.spec.element.name} not found in the dashboard elements`);let d;return m&&(d=m()),new a.X({key:(0,c.ty)(d??y.spec.id),body:y.kind==="LibraryPanel"?(0,i.kB)(y,d):(0,i.Gl)(y,d),variableName:v.spec.repeat?.value,conditionalRendering:(0,i.Xy)(v)})}},5071:(ne,A,e)=>{"use strict";e.d(A,{s:()=>r});var n=e(96540),a=e(43173),s=e(1492),l=e(15130);const r=()=>{const c=(0,s.Pj)(void 0,{skip:!l.TP.user.isSignedIn}),i=(0,n.useMemo)(()=>c.data?.navbar?.bookmarkUrls||[],[c]);return a.$.featureToggles.pinNavItems?i:[]}},5114:(ne,A,e)=>{"use strict";e.d(A,{Q:()=>l});var n=e(96540),a=e(13752),s=e(79104);class l{constructor(i){this._subject=new a.B,this._state=i}useState(){return r(this)}get state(){return this._state}setState(i){this._state={...this._state,...i},this._subject.next(this._state)}subscribeToState(i){return this._subject.subscribe(i)}}function r(c){const i=(0,s.C)();return(0,n.useEffect)(()=>{const o=c.subscribeToState({next:i});return()=>o.unsubscribe()},[c,i]),c.state}},5320:(ne,A,e)=>{"use strict";e.d(A,{I:()=>o});var n=e(2543),a=e(96540),s=e(92745),l=e(74440);function r(f){const g=(0,a.useRef)(0);return(0,a.useCallback)(E=>{g.current++;const v=g.current;return new Promise((p,m)=>{f(E).then(y=>{v===g.current?p(y):m(new c)}).catch(m)})},[f])}class c extends Error{constructor(){super("This result is stale and is discarded"),this.name="StaleResultError",Object.setPrototypeOf(this,new.target.prototype)}}const i=()=>Promise.resolve([]);function o(f,g){const u=typeof f=="function",E=r(u?f:i),v=(0,a.useMemo)(()=>(0,n.debounce)(U=>E(U).then(F=>{m(F),d(!1),b(!1)}).catch(F=>{F instanceof c||(b(!0),d(!1),F&&console.error("Error loading async options for Combobox",F))}),200),[E]),[p,m]=(0,a.useState)([]),[y,d]=(0,a.useState)(!1),[x,b]=(0,a.useState)(!1),[D,C]=(0,a.useState)(""),P=(0,a.useCallback)(U=>{let F=U;return g&&D&&(U.some(V=>V.value===D)||(F=F.slice(),F.unshift({label:D,value:D,description:(0,s.t)("combobox.custom-value.description","Use custom value")}))),F},[g,D]),T=(0,a.useCallback)(U=>{C(U),u&&(d(!0),v(U))},[v,u]),O=(0,a.useMemo)(()=>u?[]:f.map(l.y),[u,f]),S=(0,a.useMemo)(()=>u?p:(0,l.o)(f,O,D),[p,u,f,O,D]),[B,K]=(0,a.useMemo)(()=>{const{options:U,groupStartIndices:F}=h(S);return[P(U),F]},[S,P]);return{options:B,groupStartIndices:K,updateOptions:T,asyncLoading:y,asyncError:x}}function h(f){const g=new Map,u=new Map;for(const p of f){const m=p.group,y=g.get(m);y?y.push(p):g.set(m,[p])}if(g.size<=1)return f[0]?.group&&u.set(f[0]?.group,0),{options:f,groupStartIndices:u};const E=new Array(f.length);let v=0;for(const[p,m]of g){p&&u.set(p,v);for(const y of m)E[v++]=y}return{options:E,groupStartIndices:u}}},5358:(ne,A,e)=>{"use strict";e.d(A,{Kh:()=>d,VI:()=>p,b9:()=>v});var n=e(74848),a=e(96540),s=e(43173),l=e(36490),r=e(29043),c=e(84266),i=e(42581),o=e(93395),h=e(47215),f=e(15633),g=e(95443),u=e(52161);const E=a.createContext(void 0),v=({children:x,accessType:b,alertmanagerSourceName:D})=>{const C=l.Ny.getSearch(),P=l.Ny.partial,T=(0,o.W)(b),O=s.$.featureToggles.alertingImportAlertmanagerUI??!1,{data:S}=(0,h.f)(O?u.hY:void 0,{refetchOnFocus:!1,refetchOnReconnect:!1}),B=!!(S?.extra_config&&S.extra_config.length>0),K=a.useMemo(()=>{const _=T.availableInternalDataSources.concat(T.availableExternalDataSources),Q=O&&B?[{name:f.D,displayName:"Grafana (imported)",imgUrl:i,hasConfigurationAPI:!1,handleGrafanaManagedAlerts:!0}]:[],ae=_.find(ee=>ee.name===u.hY),q=_.filter(ee=>ee.name!==u.hY),k=[];return ae&&k.push(ae),k.push(...Q),k.push(...q),k},[T,O,B]),U=a.useCallback(_=>{m(K,_)&&(_===u.hY?(r.A.delete(g.Oq),P({[g.DD]:void 0})):(r.A.set(g.Oq,_),P({[g.DD]:_})))},[K,P]),F=C.get(g.DD),I=r.A.get(g.Oq),V=u.hY;a.useEffect(()=>{F&&F!==I&&r.A.set(g.Oq,F)},[F,I]);const M=D??F??I??V,L=m(K,M)?M:void 0,N=a.useMemo(()=>L&&(0,f.b)(L)?{implementation:c.Oz.prometheus,handleGrafanaManagedAlerts:!0}:(0,u.r3)(L)?.jsonData,[L]),W=L===u.hY,R=N?d(N):!1,w={selectedAlertmanager:L,hasConfigurationAPI:W||R,isGrafanaAlertmanager:W,selectedAlertmanagerConfig:N,availableAlertManagers:K,setSelectedAlertmanager:U};return(0,n.jsx)(E.Provider,{value:w,children:x})};function p(){const x=a.useContext(E);if(x===void 0)throw new Error("useAlertmanager must be used within a AlertmanagerContext");return x}function m(x,b){return x.map(C=>C.name).includes(b)}const y=[c.Oz.mimir,c.Oz.cortex,void 0];function d(x){return y.includes(x.implementation)}},5423:(ne,A,e)=>{"use strict";e.d(A,{K:()=>l});var n=e(74848),a=e(22803),s=e(63142);function l({className:c,leftActionsSeparator:i}){const o=(0,s.of)(r);return i?(0,n.jsx)("div",{className:(0,a.cx)(c,o.leftActionsSeparator)}):(0,n.jsx)("div",{className:(0,a.cx)(c,o.line)})}const r=c=>({leftActionsSeparator:(0,a.css)({display:"flex",flexGrow:1}),line:(0,a.css)({width:1,backgroundColor:c.colors.border.medium,height:24,flexShrink:0,flexGrow:0,[c.breakpoints.down("sm")]:{display:"none"}})})},5478:(ne,A,e)=>{"use strict";e.d(A,{d:()=>r,n:()=>c});var n=e(96540),a=e(13752),s=e(92138),l=e(36490);function r(){const i=(0,n.useRef)(new a.B);return{keyboardEvents:i.current,onKeyDown:o=>{switch(o.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":case"Escape":i.current.next(o);default:}}}}function c(i,o,h){const f=(0,n.useRef)({x:0,y:-1}),[g,u]=(0,n.useState)({x:0,y:-1}),E=(0,n.useRef)();return(0,n.useEffect)(()=>{E.current=h.view.fields.url,f.current.x=0,f.current.y=-1,u({...f.current})},[h]),(0,n.useEffect)(()=>{const v=i.subscribe({next:p=>{switch(p?.code){case"ArrowDown":{f.current.y++,u({...f.current});break}case"ArrowUp":f.current.y=Math.max(0,f.current.y-1),u({...f.current});break;case"ArrowRight":{o>0&&(f.current.x=Math.min(o,f.current.x+1),u({...f.current}));break}case"ArrowLeft":{o>0&&(f.current.x=Math.max(0,f.current.x-1),u({...f.current}));break}case"Enter":if(!E.current)break;const m=f.current.x*o+f.current.y;if(m<0){f.current.x=0,f.current.y=0,u({...f.current});break}const y=E.current.values?.[m];typeof y=="string"&&l.Ny.push(s.I.stripBaseFromUrl(y))}}});return()=>v.unsubscribe()},[i,o]),g}},5556:(ne,A,e)=>{"use strict";e.d(A,{Pp:()=>g,kM:()=>f,sQ:()=>u});var n=e(25229);/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function a(E,v){return v&&Object.keys(v).length>0&&(E+="?"+l(v)),E}function s(E,v){return encodeURIComponent(E).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,v?"%20":"+").replace(/[!'()*]/g,function(p){return"%"+p.charCodeAt(0).toString(16).toUpperCase()})}function l(E,v=!0){const p=[],m=/\[\]$/,y=v?(D,C)=>s(D,C):(D,C)=>encodeURIComponent(D),d=D=>Object.prototype.toString.call(D)==="[object Array]",x=(D,C)=>{C=typeof C=="function"?C():C===null||C===void 0?"":C,p[p.length]=y(D,!0)+"="+y(C,!0)},b=(D,C)=>{let P,T,O;if(D)if(d(C))for(P=0,T=C.length;P<T;P++)m.test(D)?x(D,C[P]):b(D,C[P]);else if(C&&String(C)==="[object Object]")for(O in C)b(D+"["+O+"]",C[O]);else x(D,C);else if(d(C))for(P=0,T=C.length;P<T;P++)x(C[P].name,C[P].value);else for(O in C)b(O,C[O]);return p};return b("",E).join("&")}function r(E){return l(E,!1)}function c(E,v){if(v!=null&&v!==""){const p=E.indexOf("?");p!==-1?E.length-p>1&&(E+="&"):E+="?",E+=v}return E}function i(){const v=window.location.search.substring(1).split("&"),p={};for(const m of v){const y=m.split("=");if(y.length>1){const d=decodeURIComponent(y[0]),x=decodeURIComponent(y[1]);d in p?p[d]=[...p[d],x]:p[d]=[x]}else if(y.length===1){const d=decodeURIComponent(y[0]);p[d]=!0}}return p}function o(E){const v={},p=(E||"").split("&");for(let m of p){let y,d,x;if(m&&(d=m=m.replace(/\+/g,"%20"),y=m.indexOf("="),y!==-1&&(d=m.substring(0,y),x=m.substring(y+1)),d=h(d),d!==void 0)){x=x!==void 0?h(x):!0;let b;typeof x=="string"&&x!==""?b=x==="true"||x==="false"?x==="true":x:b=x,v.hasOwnProperty(d)?Array.isArray(v[d])?v[d].push(x):v[d]=[v[d],isNaN(b)?x:b]:v[d]=isNaN(b)?x:b}}return v}function h(E){try{return decodeURIComponent(E)}catch{return}}const f={renderUrl:a,toUrlParams:l,appendQueryToUrl:c,getUrlSearchParams:i,parseKeyValue:o,serializeParams:r};function g(E,v){return v!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(E)}const u=E=>{let v=E.from;(0,n.Ar)(v)&&(v=v.valueOf().toString());let p=E.to;return(0,n.Ar)(p)&&(p=p.valueOf().toString()),{from:v,to:p}}},5585:(ne,A,e)=>{"use strict";e.d(A,{B:()=>l});var n=e(74848),a=e(96540),s=e(46559);class l extends a.PureComponent{render(){return(0,n.jsx)(s.p,{...this.props})}}},5709:(ne,A,e)=>{"use strict";e.d(A,{H:()=>g});var n=e(75816),a=e(29189),s=e(2543),l=e.n(s),r=e(75505),c=e(32899),i=e(68143),o=e(45229),h=e(74268);const f=()=>async({body:u,notificationOptions:E={},...v},p,m)=>{const{errorMessage:y,showErrorAlert:d,successMessage:x,showSuccessAlert:b}=E,{hideErrorMessage:D}=m||{};try{const C={...v,...u&&{data:u},...(0,s.isBoolean)(b)&&{showSuccessAlert:b},...(0,s.isBoolean)(d)&&{showErrorAlert:d},...x&&{showSuccessAlert:!1},...(y||D)&&{showErrorAlert:!1}},P=performance.now(),{data:T,...O}=await(0,r.s)((0,i.AI)().fetch(C));return(0,h.l$)("backendSrvBaseQuery",{loadTimeMs:performance.now()-P},{url:v.url,method:v.method??"GET",responseStatus:O.statusText}),x&&b!==!1&&o.A.emit(c.r1.alertSuccess,[x]),{data:T,meta:O}}catch(C){return y&&d!==!1&&o.A.emit(c.r1.alertError,[y]),{error:C}}},g=(0,n.xP)({reducerPath:"alertingApi",baseQuery:f(),serializeQueryArgs:u=>(0,a.lE)((0,s.omit)(u,"queryArgs.notificationOptions")),tagTypes:["AlertingConfiguration","AlertmanagerConfiguration","AlertmanagerConnectionStatus","AlertmanagerAlerts","AlertmanagerSilences","OnCallIntegrations","DataSourceSettings","GrafanaLabels","CombinedAlertRule","GrafanaRulerRule","GrafanaRulerRuleVersion","GrafanaSlo","RuleGroup","RuleNamespace","ContactPoint","ContactPointsStatus","Receiver","DeletedRules","GrafanaPrometheusGroups"],endpoints:()=>({})})},5753:(ne,A,e)=>{"use strict";e.d(A,{R:()=>s});var n=e(74848),a=e(45861);function s({link:l,buttonProps:r}){return(0,n.jsx)("a",{href:l.href,target:l.target,rel:"noreferrer",onClick:l.onClick?c=>{!(c.ctrlKey||c.metaKey||c.shiftKey)&&l.onClick&&(c.preventDefault(),l.onClick(c))}:void 0,children:(0,n.jsx)(a.$n,{icon:l.target==="_blank"?"external-link-alt":"link",variant:"primary",size:"sm",...r,children:l.title})})}},5857:(ne,A,e)=>{"use strict";e.d(A,{l6:()=>o,rE:()=>c,rL:()=>i});var n=e(74848),a=e(96540),s=e(51898),l=e(92745),r=e(43243);function c(h){return["saturday","sunday","monday"].includes(h)}function i(h){if(h&&c(h))return h;const f=window?.grafanaBootData?.user?.weekStart;return f&&c(f)?f:"monday"}const o=h=>{const{onChange:f,width:g,autoFocus:u=!1,onBlur:E,value:v,disabled:p=!1,inputId:m}=h,y=(0,a.useMemo)(()=>[{value:"",label:(0,l.t)("grafana-ui.week-start-picker.weekStarts-label-default","Default")},{value:"saturday",label:(0,l.t)("grafana-ui.week-start-picker.weekStarts-label-saturday","Saturday")},{value:"sunday",label:(0,l.t)("grafana-ui.week-start-picker.weekStarts-label-sunday","Sunday")},{value:"monday",label:(0,l.t)("grafana-ui.week-start-picker.weekStarts-label-monday","Monday")}],[]),d=(0,a.useCallback)(b=>{b&&b.value!==void 0&&f(c(b.value)?b.value:void 0)},[f]),x=(0,a.useMemo)(()=>y.find(b=>b.value===v)?.value??"",[v,y]);return(0,n.jsx)(r.G,{id:m,value:x,placeholder:s.Tp.components.WeekStartPicker.placeholder,autoFocus:u,width:g,options:y,onChange:d,onBlur:E,disabled:p})}},5929:(ne,A,e)=>{"use strict";e.d(A,{y:()=>b});var n=e(74848),a=e(96540),s=e(42941),l=e(92745),r=e(67522),c=e(15757),i=e(83953),o=e(97486),h=e(77824),f=e(72265);const g=f.sG.map(D=>({value:D,label:D[0].toUpperCase()+D.slice(1).replace(/_/," ")}));function u(D){const{graphStyle:C,onChangeGraphStyle:P}=D;return(0,n.jsx)(h.z,{size:"sm",options:g,value:C,onChange:P})}var E=e(29043);const v="grafana.explore.style.graph",p=D=>{store.set(v,D)},m=()=>d(E.A.get(v)),y="lines",d=D=>f.sG.find(P=>P===D)??y,x=20,b=({data:D,eventBus:C,height:P,width:T,timeRange:O,timeZone:S,annotations:B,onChangeTime:K,splitOpenFn:U,thresholdsConfig:F,thresholdsStyle:I,loadingState:V,statusMessage:M})=>{const[L,N]=(0,s.A)(!1),[W,R]=(0,a.useState)(m),G=(0,a.useCallback)(_=>{(0,i.ng)(_),R(_)},[]),w=(0,a.useMemo)(()=>L?D:D.slice(0,x),[D,L]);return(0,n.jsx)(r.NR,{title:(0,l.t)("graph.container.title","Graph"),titleItems:[!L&&x<D.length&&(0,n.jsx)(c.m,{toggleShowAllSeries:N,info:(0,n.jsxs)(l.x6,{i18nKey:"graph.container.show-only-series",children:["Showing only ",{MAX_NUMBER_OF_TIME_SERIES:x}," series"]}),buttonLabel:(0,n.jsxs)(l.x6,{i18nKey:"graph.container.show-all-series",children:["Show all ",{length:D.length}]}),tooltip:(0,l.t)("graph.container.content","Rendering too many series in a single panel may impact performance and make data harder to read. Consider refining your queries.")},"disclaimer")].filter(Boolean),width:T,height:P,loadingState:V,statusMessage:M,actions:(0,n.jsx)(u,{graphStyle:W,onChangeGraphStyle:G}),children:(_,Q)=>(0,n.jsx)(o.k,{graphStyle:W,data:w,height:Q,width:_,timeRange:O,onChangeTime:K,timeZone:S,annotations:B,splitOpenFn:U,loadingState:V,thresholdsConfig:F,thresholdsStyle:I,eventBus:C})})}},6048:(ne,A,e)=>{"use strict";e.d(A,{M:()=>D});var n=e(74848),a=e(2543),s=e(96540),l=e(92745),r=e(45863),c=e(41654),i=e(33143),o=e(8285),h=e(66507),f=e(4506),g=e(69523),u=e(42954);const E=new u.O(()=>[g.H.serializer,h.t.serializer,f.K.serializer]);var v=e(32603),p=e(59695);const m=({objectType:P,hasVariables:T,onAdd:O})=>{const S=(0,s.useMemo)(()=>{const B=[{label:(0,l.t)("dashboard.conditional-rendering.conditions.group.add.data","Query result"),value:"data"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.group.add.variable","Template variable"),value:"variable",isDisabled:!T},{label:(0,l.t)("dashboard.conditional-rendering.conditions.group.add.time-range-size","Time range less than"),value:"timeRangeSize"}];return P!=="panel"&&B.shift(),B},[P,T]);return(0,n.jsx)(p.i,{isFullWidth:!0,size:"sm",icon:"plus",variant:"secondary",label:(0,l.t)("dashboard.conditional-rendering.conditions.group.add.button","Add rule"),options:S,onChange:B=>O(B)})};var y=e(37386),d=e(77824);const x=({value:P,onChange:T})=>{const O=(0,s.useMemo)(()=>[{label:(0,l.t)("dashboard.conditional-rendering.conditions.group.condition.all","Match all"),value:"and"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.group.condition.any","Match any"),value:"or"}],[]);return(0,n.jsx)(y.D,{label:(0,l.t)("dashboard.conditional-rendering.conditions.group.condition.label","Match rules"),noMargin:!0,children:(0,n.jsx)(d.z,{fullWidth:!0,options:O,value:P,onChange:T})})},b=({objectType:P,value:T,onChange:O})=>{const S=(0,s.useMemo)(()=>[{label:(0,l.t)("dashboard.conditional-rendering.conditions.group.visibility.show","Show"),value:"show"},{label:(0,l.t)("dashboard.conditional-rendering.conditions.group.visibility.hide","Hide"),value:"hide"}],[]);return(0,n.jsx)(y.D,{label:(0,l.t)("dashboard.conditional-rendering.conditions.group.visibility.label","{{type}} visibility",{type:(0,v.uT)(P)}),noMargin:!0,children:(0,n.jsx)(d.z,{fullWidth:!0,options:S,value:T,onChange:O})})};class D extends r.Bs{static{this.Component=C}constructor(T){super(T),this._shouldShow=T.visibility==="show",this._shouldMatchAll=T.condition==="and",this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.forEachChild(T=>{T.isActive||this._subs.add(T.activate())}),this.check()}check(){const T=this.state.conditions.filter(S=>S.state.result!==void 0);let O=!0;T.length>0&&(O=this._shouldMatchAll?T.every(S=>S.state.result):T.some(S=>S.state.result),this._shouldShow||(O=!O)),O!==this.state.result&&(this.setState({...this.state,result:O}),this.publishEvent(new i.N4(this),!0))}changeVisibility(T){T!==this.state.visibility&&(this._shouldShow=T==="show",this.setState({visibility:T}),this.check())}changeCondition(T){T!==this.state.condition&&(this._shouldMatchAll=T==="and",this.setState({condition:T}),this.check())}createCondition(T){switch(T){case"data":return h.t.createEmpty();case"timeRangeSize":return f.K.createEmpty();case"variable":return g.H.createEmpty(r.jh.getVariables((0,o.YQ)(this)).state.variables[0].state.name)}}addCondition(T){const O=[...this.state.conditions,T];this.setState({conditions:O,renderHidden:O.some(S=>S instanceof h.t)}),this.isActive&&!T.isActive&&T.activate(),this.check()}removeCondition(T){const O=this.state.conditions.filter(S=>S!==T);this.setState({conditions:O,renderHidden:O.some(S=>S instanceof h.t)}),this.check()}undoRemoveCondition(T,O){const S=[...this.state.conditions];S.splice(O,0,T),this.setState({conditions:S}),this.check()}removeLastCondition(){const T=[...this.state.conditions];T.pop(),this.setState({conditions:T}),this.check()}getConditionIndex(T){return this.state.conditions.findIndex(O=>O===T)}serialize(){return{kind:"ConditionalRenderingGroup",spec:{visibility:this.state.visibility,condition:this.state.condition,items:this.state.conditions.map(T=>T.serialize())}}}static createEmpty(){return new D({condition:"and",visibility:"show",conditions:[],result:!0,renderHidden:!1})}static deserialize(T){const O=T.spec.items.map(S=>E.get(S.kind).deserialize(S));return new D({condition:T.spec.condition,visibility:T.spec.visibility,conditions:O,result:!0,renderHidden:O.some(S=>S instanceof h.t)})}}function C({model:P}){const{condition:T,visibility:O,conditions:S}=P.useState(),{variables:B}=r.jh.getVariables(P).useState(),K=(0,s.useMemo)(()=>(0,v.dQ)(P.parent),[P]);return(0,n.jsxs)(c.B,{direction:"column",gap:2,children:[(0,n.jsx)(b,{objectType:K,value:O,onChange:U=>{i.cc.edit({description:(0,l.t)("dashboard.conditional-rendering.conditions.group.visibility.label","{{type}} visibility",{type:(0,v.uT)(K)}),source:P,perform:()=>P.changeVisibility(U),undo:()=>P.changeVisibility(O)})}}),S.length>1&&(0,n.jsx)(x,{value:T,onChange:U=>{i.cc.edit({description:(0,l.t)("dashboard.conditional-rendering.conditions.group.condition.label","Match rules"),source:P,perform:()=>P.changeCondition(U),undo:()=>P.changeCondition(T)})}}),S.map(U=>U.render()),(0,n.jsx)(m,{objectType:K,hasVariables:B.length>0,onAdd:({value:U,label:F})=>{const I=P.createCondition(U);i.cc.edit({description:(0,l.t)("dashboard.edit-actions.add-conditional-rule","Add {{ruleDescription}} rule",{ruleDescription:(0,a.lowerCase)(F)}),source:P,perform:()=>P.addCondition(I),undo:()=>P.removeLastCondition()})}})]})}},6079:(ne,A,e)=>{"use strict";e.d(A,{r:()=>o});var n=e(74848),a=e(92138),s=e(92745),l=e(45861),r=e(73427),c=e(26437),i=e(11257);function o({variant:h,onClick:f}){const g=r.TP.hasPermission(i.w.DataSourcesCreate),u=a.I.assureBaseUrl(c.b.DataSourcesNew);return(0,n.jsx)(l.z9,{variant:h||"primary",href:u,disabled:!g,tooltip:g?void 0:(0,s.t)("datasources.add-new-data-source-button.tooltip-no-permission","You do not have permission to configure new data sources"),onClick:f,target:"_blank",children:(0,n.jsx)(s.x6,{i18nKey:"data-source-picker.add-new-data-source",children:"Configure a new data source"})})}},6106:(ne,A,e)=>{"use strict";e.d(A,{E:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(51898),r=e(92745),c=e(76319),i=e(34213),o=e(63142),h=e(74048),f=e(18771);const g=({cols:E,items:v,isExpandable:p=!1,onCollapse:m,onExpand:y,isExpanded:d,renderExpandedContent:x,testIdGenerator:b,pagination:D,paginationStyles:C,renderPrefixCell:P,renderPrefixHeader:T,footerRow:O,dataTestId:S})=>{const B=(0,o.of)(f.H);if((m||y||d)&&!(m&&y&&d))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((p||x)&&!(p&&x))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const K=(0,o.of)(u(E,p,!!T)),[U,F]=(0,s.useState)([]),I=R=>{d&&m&&y?d(R)?m(R):y(R):F(U.includes(R.id)?U.filter(G=>G!==R.id):[...U,R.id])},V=D?.itemsPerPage??v.length,{page:M,numberOfPages:L,onPageChange:N,pageItems:W}=(0,h.W)(v,1,V);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:K.container,"data-testid":S??"dynamic-table",children:[(0,n.jsxs)("div",{className:K.row,"data-testid":"header",children:[T&&T(),p&&(0,n.jsx)("div",{className:K.cell()}),E.map(R=>(0,n.jsx)("div",{className:K.cell(R.alignColumn),children:R.label},R.id))]}),W.map((R,G)=>{const w=d?d(R):U.includes(R.id);return(0,n.jsxs)("div",{className:K.row,"data-testid":b?.(R,G)??"row",children:[P&&P(R,G,v),p&&(0,n.jsx)("div",{className:(0,a.cx)(K.cell(),K.expandCell),children:(0,n.jsx)(c.K,{tooltip:w?(0,r.t)("alerting.dynamic-table.tooltip-collapse-row","Collapse row"):(0,r.t)("alerting.dynamic-table.tooltip-expand-row","Expand row"),"data-testid":l.Tp.components.AlertRules.toggle,name:w?"angle-down":"angle-right",onClick:()=>I(R)})}),E.map(_=>(0,n.jsx)("div",{className:(0,a.cx)(K.cell(_.alignColumn),K.bodyCell,_.className),"data-column":_.label,children:_.renderCell(R,G)},`${R.id}-${_.id}`)),w&&x&&(0,n.jsx)("div",{className:K.expandedContentRow,"data-testid":l.Tp.components.AlertRules.expandedContent,children:x(R,G,v)})]},`${R.id}-${G}`)}),O&&(0,n.jsx)("div",{className:(0,a.cx)(K.row,K.footerRow),children:O})]}),D&&(0,n.jsx)(i.d,{className:(0,a.cx)(B,C),currentPage:M,numberOfPages:L,onNavigate:N,hideWhenSinglePage:!0})]})},u=(E,v,p)=>{const m=E.map(y=>y.size?typeof y.size=="number"?`${y.size}fr`:y.size:"auto");return v&&m.unshift("calc(1em + 16px)"),p&&m.unshift("0"),y=>({container:(0,a.css)({border:`1px solid ${y.colors.border.weak}`,borderRadius:y.shape.radius.default,color:y.colors.text.secondary}),row:(0,a.css)({display:"grid",gridTemplateColumns:m.join(" "),gridTemplateRows:"1fr auto","&:nth-child(2n + 1)":{backgroundColor:y.colors.background.secondary},"&:nth-child(2n)":{backgroundColor:y.colors.background.primary},[y.breakpoints.down("sm")]:{gridTemplateColumns:"auto 1fr",gridTemplateAreas:"left right",padding:`0 ${y.spacing(.5)}`,"&:first-child":{display:"none"},"& > *:first-child":{display:p?"none":void 0}}}),footerRow:(0,a.css)({display:"flex",padding:y.spacing(1)}),cell:d=>(0,a.css)({display:"flex",alignItems:"center",padding:y.spacing(1),justifyContent:d||"initial",[y.breakpoints.down("sm")]:{padding:`${y.spacing(1)} 0`,gridTemplateColumns:"1fr"}}),bodyCell:(0,a.css)({overflow:"hidden",[y.breakpoints.down("sm")]:{gridColumnEnd:"right",gridColumnStart:"right","&::before":{content:"attr(data-column)",display:"block",color:y.colors.text.primary}}}),expandCell:(0,a.css)({justifyContent:"center",[y.breakpoints.down("sm")]:{alignItems:"start",gridArea:"left"}}),expandedContentRow:(0,a.css)({gridColumnEnd:m.length+1,gridColumnStart:p?3:2,gridRow:2,padding:`0 ${y.spacing(3)} 0 ${y.spacing(1)}`,position:"relative",[y.breakpoints.down("sm")]:{gridColumnStart:2,borderTop:`1px solid ${y.colors.border.strong}`,gridRow:"auto",padding:`${y.spacing(1)} 0 0 0`}})})}},6135:(ne,A,e)=>{"use strict";e.d(A,{FI:()=>n,J4:()=>a});const n="grafana_alerting";var a=(r=>(r.OnCall="oncall",r))(a||{});const s=(r,c)=>c.includes(r),l=(r,c)=>{if(!r.grafana_managed_receiver_configs)return!1;const i=r.grafana_managed_receiver_configs.length===1,o=s(r.grafana_managed_receiver_configs[0]?.settings?.url??"",c.map(h=>h.integration_url));return i&&o}},6194:(ne,A,e)=>{"use strict";e.d(A,{A2:()=>g,JE:()=>m,Nx:()=>u,Oy:()=>E,bx:()=>f,i_:()=>p});var n=e(2543),a=e.n(n),s=e(43173),l=e(44022),r=e(4651),c=e(82779),i=e(95443),o=e(52161),h=e(20437);function f(y){if(!(s.$.featureToggles.alertingQueryAndExpressionsStepMode??!1))return{...y,editorSettings:{simplifiedQueryEditor:!1,simplifiedNotificationEditor:!0}};const x=y.queries.filter(C=>!(0,l.f)(C.model)),b=y.queries.filter(C=>E(C)),D=u(x,b);return{...y,editorSettings:{simplifiedQueryEditor:D,simplifiedNotificationEditor:!0}}}function g(y){return{...y,queries:y.queries?.map(d=>{if((0,l.f)(d.model))return d;const x=d.model.datasource?.type?(0,o.cl)(d.model.datasource.type):!1,b="instant"in d.model&&d.model.instant!==void 0?d.model.instant:x;return{...d,model:{...d.model,instant:b,range:!b}}})}}function u(y,d){if(y.length!==1||d.length>2)return!1;const x=y.at(0),b=d.find(I=>I.model.type===r.Tz.reduce),D=d.find(I=>I.model.type===r.Tz.threshold),C=b?(0,c.OC)(b.model):!1,P=D?.model.conditions?.every(I=>(0,n.isEmpty)(I.unloadEvaluator))??!0,T=b&&C,O=D&&P,S=D?.model.expression===b?.refId,B=b?.model.expression===x?.refId;if(T&&B&&O&&S)return!0;const K=x?(0,h.mY)(x):!1,U=d.length===1&&D,F=D?.model.expression===x?.refId;return!!(K&&U&&O&&F)}function E(y){return(0,l.f)(y.model)}function v(y){return!isExpressionQuery(y.model)}const p=y=>({...y,queries:y.queries?.map(d=>(0,n.omit)(d,"model.hide"))});function m(y){const d=[...y];return i.kl.map(b=>b.key).forEach((b,D)=>{const C=d.findIndex(P=>P.key===b);if(C===-1){const P={key:b,value:""};d.splice(D,0,P)}else C!==D&&d.splice(D,0,d.splice(C,1)[0])}),d}},6201:(ne,A,e)=>{"use strict";e.d(A,{H:()=>s,l:()=>a});let n=null;function a(l){if(n)throw new Error("User should only be set once, when Grafana is starting.");n=l}function s(){if(!n)throw new Error("User can only be used after Grafana instance has started.");return n}},6219:(ne,A,e)=>{"use strict";e.d(A,{$q:()=>v,J6:()=>E,cA:()=>f,kb:()=>y,tZ:()=>m});var n=e(75505),a=e(79609),s=e(68143),l=e(43173),r=e(78282),c=e(25992),i=e(44720),o=e(46072),h=e(52860);const f=(d,x,b)=>(d.forEach(D=>{const C=D.refId;if(!C)return;let P=b[C];if(P===void 0&&D.meta?.preferredVisualisationType==="rawPrometheus"){const O=(0,i.a)(C);P=b[O]}const T=x.filter(O=>O.source.uid===P);g(D,u(T,D))}),d),g=(d,x)=>{d.fields.forEach(b=>{b.config.links=b.config.links?.filter(D=>D.origin!==a.x0.Correlations)||[],x.map(D=>{if(D.config.field===b.name){if(D.type==="query"){const C=D.config.target||{};b.config.links.push({internal:{query:{...C,datasource:{uid:D.target.uid}},datasourceUid:D.target.uid,datasourceName:D.target.name},url:"",title:D.label||D.target.name,origin:a.x0.Correlations,meta:{transformations:D.config.transformations}})}else if(D.type==="external"){const C=D.config.target;b.config.links.push({url:C.url,title:D.label||"External URL",origin:a.x0.Correlations,meta:{transformations:D.config?.transformations}})}}})})},u=(d,x)=>d.map(b=>{if(b.source.meta?.id==="loki"&&l.$.featureToggles.lokiLogsDataplane===!0&&b.config.field==="Line"){const D=(0,o.Os)(x);D!=null&&D.bodyField.name!==void 0&&(b.config.field=D?.bodyField.name)}return b}),E=async d=>(0,n.s)((0,s.AI)().fetch({url:"/api/datasources/correlations",method:"GET",showErrorAlert:!1,params:{sourceUID:d}})).then(h.bQ).then(h.F0),v=async(d,x)=>(0,s.AI)().post(`/api/datasources/uid/${d}/correlations`,x),p=async d=>d.datasourceInstance?.meta.mixed?await(0,r.l)().get(d.queries[0].datasource):d.datasourceInstance,m=async(d,x)=>Promise.all([p(d),p(x)]).then(b=>b[0]?.name!==void 0&&b[1]?.name!==void 0?`${b[0]?.name} to ${b[1]?.name}`:""),y=(0,c.DW)("features.correlations")},6223:(ne,A,e)=>{"use strict";e.d(A,{z:()=>i});var n=e(59511),a=e.n(n),s=e(65024),l=e.n(s),r=e(82093),c=e.n(r);const i=window.System},6262:(ne,A,e)=>{"use strict";e.d(A,{U:()=>r,Z4:()=>n,_g:()=>a,d9:()=>s,us:()=>l});var n=(c=>(c.Home="home-dashboard",c.New="new-dashboard",c.Normal="normal-dashboard",c.Provisioning="provisioning-dashboard",c.Scripted="scripted-dashboard",c.Public="public-dashboard",c.Embedded="embedded-dashboard",c.Report="report-dashboard",c))(n||{}),a=(c=>(c.NotStarted="Not started",c.Fetching="Fetching",c.Services="Services",c.Failed="Failed",c.Completed="Completed",c))(a||{}),s=(c=>(c.Full="full",c))(s||{});const l="DASHBOARD_FROM_LS_KEY";function r(c){return"redirectUri"in c}},6399:(ne,A,e)=>{"use strict";e.d(A,{e:()=>h});var n=e(74848),a=e(22803),s=e(51898),l=e(63142),r=e(75254),c=e(41479),i=e(30930),o=e(94535);const h=({children:g,links:u,style:E})=>{const v=(0,l.of)(f),p=[{items:(0,r.J)(u),label:u().length?"Data links":""}],m=p[0].items.length,y=()=>p.map((x,b)=>(0,n.jsx)(i.r,{label:x.label,children:(x.items||[]).map((D,C)=>(0,n.jsx)(o.D,{url:D.url,label:D.label,target:D.target,icon:D.icon,active:D.active,onClick:D.onClick,className:v.itemWrapper},`${x.label}-${b}-${C}}`))},`${x.label}${b}`)),d=(0,a.css)({cursor:"context-menu"});if(m>1)return(0,n.jsx)(c.n,{renderMenuItems:y,children:({openMenu:x})=>g({openMenu:x,targetClassName:d})});{const x=u()[0];return(0,n.jsx)("a",{href:x.href,onClick:x.onClick,target:x.target,title:x.title,style:{...E,overflow:"hidden",display:"flex"},"data-testid":s.Tp.components.DataLinksContextMenu.singleLink,children:g({})})}},f=g=>({itemWrapper:(0,a.css)({fontSize:12})})},6461:(ne,A,e)=>{"use strict";e.d(A,{Yz:()=>c,lX:()=>r,wm:()=>i,zE:()=>o});var n=e(30643),a=e(98279),s=e(59006),l=e(67350);function r(h){return{kind:"TabsLayout",spec:{tabs:h.state.tabs.filter(f=>!f.state.repeatSourceKey).map(c)}}}function c(h){const f=h.state.layout.serialize(),g={kind:"TabsLayoutTab",spec:{title:h.state.title,layout:f,...h.state.repeatByVariable&&{repeat:{mode:"variable",value:h.state.repeatByVariable}}}},u=h.state.conditionalRendering?.serialize();return u?.spec.items.length&&(g.spec.conditionalRendering=u),g}function i(h,f,g,u){if(h.kind!=="TabsLayout")throw new Error("Invalid layout kind");const E=h.spec.tabs.map(v=>o(v,f,g,u));return new a.K({tabs:E})}function o(h,f,g,u){const E=h.spec.layout;return new n.V({title:h.spec.title,layout:s.j.get(E.kind).deserialize(E,f,g,u),repeatByVariable:h.spec.repeat?.value,conditionalRendering:(0,l.Xy)(h)})}},6607:(ne,A,e)=>{"use strict";e.d(A,{f:()=>y});var n=e(74848),a=e(22803),s=e(51898),l=e(92745),r=e(87063),c=e(45861),i=e(88559),o=e(63142),h=e(1682),f=e(8285),g=e(11534),u=e(97883),E=e(98279),v=e(17084),p=e(61659),m=e(20246);function y({layoutManager:C}){const P=(0,o.of)(D),{hasCopiedPanel:T}=(0,p.x)();return(0,n.jsxs)("div",{className:(0,a.cx)(P.addAction,"dashboard-canvas-add-button"),children:[(0,n.jsx)(c.$n,{variant:"primary",fill:"text",icon:"plus","data-testid":s.Tp.components.CanvasGridAddActions.addPanel,onClick:()=>C.addPanel((0,f.O8)()),children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.canvas-actions.add-panel",children:"Add panel"})}),(0,n.jsx)(i.m,{overlay:(0,n.jsxs)(r.W,{children:[(0,n.jsx)(r.W.Item,{icon:"list-ul",label:(0,l.t)("dashboard.canvas-actions.group-into-row","Group into row"),onClick:()=>{(0,v.t)(C)}}),(0,n.jsx)(r.W.Item,{icon:"layers",label:(0,l.t)("dashboard.canvas-actions.group-into-tab","Group into tab"),onClick:()=>{(0,v.A)(C)}})]}),children:(0,n.jsx)(c.$n,{variant:"primary",fill:"text",icon:"layers","data-testid":s.Tp.components.CanvasGridAddActions.groupPanels,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.canvas-actions.group-panels",children:"Group panels"})})}),d(C),T&&C.pastePanel&&(0,n.jsx)(c.$n,{variant:"primary",fill:"text",icon:"clipboard-alt",onClick:()=>{C.pastePanel?.()},children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.canvas-actions.paste-panel",children:"Paste panel"})})]})}function d(C){if(C.parent instanceof g.H$)return null;const T=h.b4.getLayoutManagerFor(C.parent),O=()=>{(0,m.f)(T,C)};return T instanceof E.K?(0,n.jsx)(x,{parentLayout:T,onClick:O}):T instanceof u.V?(0,n.jsx)(b,{parentLayout:T,onClick:O}):null}function x({parentLayout:C,onClick:P}){const{tabs:T}=C.useState();return T.length>1?null:(0,n.jsx)(c.$n,{variant:"primary",fill:"text",icon:"layers-slash",onClick:P,"data-testid":s.Tp.components.CanvasGridAddActions.ungroup,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.canvas-actions.un-group-panels",children:"Ungroup"})})}function b({parentLayout:C,onClick:P}){const{rows:T}=C.useState();return T.length>1?null:(0,n.jsx)(c.$n,{variant:"primary",fill:"text",icon:"layers-slash",onClick:P,"data-testid":s.Tp.components.CanvasGridAddActions.ungroup,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.canvas-actions.un-group-panels",children:"Ungroup"})})}const D=C=>({addAction:(0,a.css)({position:"absolute",padding:C.spacing(1,0),height:C.spacing(5),bottom:0,left:0,right:0,opacity:0,[C.transitions.handleMotion("no-preference","reduce")]:{transition:C.transitions.create("opacity")}})})},6684:(ne,A,e)=>{"use strict";e.d(A,{L:()=>i,W:()=>c});var n=e(81160),a=e(36638),s=e(57866),l=e(64761),r=e(8721),c=(o=>(o.outer="outer",o.inner="inner",o.outerTabular="outerTabular",o))(c||{});const i={id:l.F.joinByField,aliasIds:[l.F.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(o,h)=>f=>f.pipe((0,n.T)(g=>i.transformer(o,h)(g))),transformer:(o,h)=>{let f;return g=>{if(g.length>1){o.byField&&!f&&(f=a.sJ.get(s.Ct.byName).get(o.byField));const u=(0,r.Fd)({frames:g,joinBy:f,mode:o.mode});if(u)return u.refId=`${l.F.joinByField}-${g.map(E=>E.refId).join("-")}`,[u]}return g}}}},6844:(ne,A,e)=>{"use strict";e.d(A,{UM:()=>b,Yg:()=>f,nz:()=>x,zx:()=>E});var n=e(95004),a=e(36638),s=e(57866);const l={id:s.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const C=D.map(P=>(0,a.NS)(P));return(P,T,O)=>{for(const S of C)if(S(P,T,O))return!0;return!1}},getOptionsDisplayText:D=>{let C="";for(const P of D){C.length>0&&(C+=" OR ");const T=a.sJ.get(P.id);C+=T.getOptionsDisplayText?T.getOptionsDisplayText(P):T.name}return C}},r={id:s.cV.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const C=D.map(P=>(0,a.Dq)(P));return P=>{for(const T of C)if(T(P))return!0;return!1}},getOptionsDisplayText:D=>{let C="";for(const P of D){C.length>0&&(C+=" OR ");const T=a.RE.get(P.id);C+=T.getOptionsDisplayText?T.getOptionsDisplayText(P):T.name}return C}},c={id:s.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const C=D.map(P=>(0,a.NS)(P));return(P,T,O)=>{for(const S of C)if(!S(P,T,O))return!1;return!0}},getOptionsDisplayText:D=>{let C="";for(const P of D){C.length>0&&(C+=" AND ");const T=a.sJ.get(P.id);C+=T.getOptionsDisplayText?T.getOptionsDisplayText(P):T.name}return C}},i={id:s.cV.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:D=>{const C=D.map(P=>(0,a.Dq)(P));return P=>{for(const T of C)if(!T(P))return!1;return!0}},getOptionsDisplayText:D=>{let C="";for(const P of D){C.length>0&&(C+=" AND ");const T=a.RE.get(P.id);C+=T.getOptionsDisplayText?T.getOptionsDisplayText(P):T.name}return C}},o={id:s.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:D=>{const C=(0,a.NS)(D);return(P,T,O)=>!C(P,T,O)},getOptionsDisplayText:D=>{const C=a.sJ.get(D.id);return"NOT "+(C.getOptionsDisplayText?C.getOptionsDisplayText(D.options):C.name)}},h={id:s.cV.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:D=>{const C=(0,a.Dq)(D);return P=>!C(P)},getOptionsDisplayText:D=>{const C=a.RE.get(D.id);return"NOT "+(C.getOptionsDisplayText?C.getOptionsDisplayText(D.options):C.name)}},f=D=>!0,g=D=>!0,u=D=>!1,E=D=>D.type!==n.PU.time,v=D=>!1,p={id:s.cV.alwaysMatch,name:"All Fields",description:"Always Match",get:D=>f,getOptionsDisplayText:D=>"Always"},m={id:s.cV.alwaysMatch,name:"All Frames",description:"Always Match",get:D=>g,getOptionsDisplayText:D=>"Always"},y={id:s.cV.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:D=>u,getOptionsDisplayText:D=>"Never"},d={id:s.cV.neverMatch,name:"No Frames",description:"Never Match",get:D=>v,getOptionsDisplayText:D=>"Never"};function x(){return[l,c,o,p,y]}function b(){return[r,i,h,m,d]}},6890:(ne,A,e)=>{"use strict";e.d(A,{Do:()=>n.Do,Vz:()=>a.Vz,YA:()=>a.YA,dx:()=>n.dx});var n=e(12066),a=e(43550)},7075:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>i});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(63142),c=e(45861);const i=({children:h,className:f,closeOnConfirm:g,confirmText:u="Save",confirmVariant:E="primary",disabled:v=!1,onCancel:p,onClick:m,onConfirm:y,size:d="md"})=>{const x=(0,s.useRef)(null),b=(0,s.useRef)(null),[D,C]=(0,s.useState)(!1),[P,T]=(0,s.useState)(!1),O=(0,r.of)(o);(0,s.useEffect)(()=>{D?(b.current?.focus(),T(!0)):P&&(x.current?.focus(),T(!1))},[P,D]);const S=V=>{V&&V.preventDefault(),C(!0),m?.()},B=V=>{V&&V.preventDefault(),C(!1),x.current?.focus(),p?.()},K=V=>{V&&V.preventDefault(),y?.(),g&&C(!1)},U=(0,a.cx)(f,O.mainButton,{[O.mainButtonHide]:D}),F=(0,a.cx)(O.confirmButton,{[O.confirmButtonHide]:!D}),I=(0,a.cx)(O.confirmButtonContainer,{[O.confirmButtonContainerHide]:!D});return(0,n.jsxs)("div",{className:O.container,children:[(0,n.jsx)("span",{className:U,children:typeof h=="string"?(0,n.jsx)(c.$n,{disabled:v,size:d,fill:"text",onClick:S,ref:x,children:h}):s.cloneElement(h,{disabled:v,onClick:S,ref:x})}),(0,n.jsx)("div",{className:I,children:(0,n.jsxs)("span",{className:F,children:[(0,n.jsx)(c.$n,{size:d,variant:E,onClick:K,ref:b,children:u}),(0,n.jsx)(c.$n,{size:d,fill:"text",onClick:B,children:(0,n.jsx)(l.x6,{i18nKey:"grafana-ui.confirm-button.cancel",children:"Cancel"})})]})})]})};i.displayName="ConfirmButton";const o=h=>({container:(0,a.css)({alignItems:"center",display:"flex",justifyContent:"flex-end",position:"relative"}),mainButton:(0,a.css)({opacity:1,[h.transitions.handleMotion("no-preference")]:{transition:h.transitions.create(["opacity"],{duration:h.transitions.duration.shortest,easing:h.transitions.easing.easeOut})},zIndex:2}),mainButtonHide:(0,a.css)({opacity:0,[h.transitions.handleMotion("no-preference")]:{transition:h.transitions.create(["opacity","visibility"],{duration:h.transitions.duration.shortest,easing:h.transitions.easing.easeIn})},visibility:"hidden",zIndex:0}),confirmButtonContainer:(0,a.css)({overflow:"visible",position:"absolute",pointerEvents:"all",right:0}),confirmButtonContainerHide:(0,a.css)({overflow:"hidden",pointerEvents:"none"}),confirmButton:(0,a.css)({alignItems:"flex-start",background:h.colors.background.primary,display:"flex",opacity:1,transform:"translateX(0)",[h.transitions.handleMotion("no-preference")]:{transition:h.transitions.create(["opacity","transform"],{duration:h.transitions.duration.shortest,easing:h.transitions.easing.easeOut})},zIndex:1}),confirmButtonHide:(0,a.css)({opacity:0,transform:"translateX(100%)",[h.transitions.handleMotion("no-preference")]:{transition:h.transitions.create(["opacity","transform","visibility"],{duration:h.transitions.duration.shortest,easing:h.transitions.easing.easeIn})},visibility:"hidden"})})},7078:(ne,A,e)=>{"use strict";e.d(A,{Df:()=>l,Tj:()=>c,Zn:()=>i,q7:()=>r,tw:()=>o});var n=e(22429),a=e(77731),s=e(18615);function l(h,f){return!h||!f?!1:typeof f=="string"?h.uid===f:h.uid===f.uid}function r(h){if(h){if(typeof h=="string")return`${h} - not found`;if("name"in h)return h.name;if(h.uid)return`${h.uid} - not found`}}function c(h,f,g,u=[]){return(v,p)=>{const m=v.name.toUpperCase(),y=p.name.toUpperCase();if(h&&l(v,h))return-1;if(h&&l(p,h))return 1;const d=u.includes(v.uid),x=u.includes(p.uid);if(d&&!x)return-1;if(x&&!d)return 1;if(d&&x)return m<y?-1:1;const b=f.indexOf(v.uid),D=f.indexOf(p.uid);if(b>-1&&b>D)return-1;if(D>-1&&D>b)return 1;const C=g.includes(v.uid),P=g.includes(p.uid);return C&&!P?-1:P&&!C||v.meta.builtIn&&!p.meta.builtIn?1:p.meta.builtIn&&!v.meta.builtIn||m<y?-1:1}}function i(h,f=""){return h.name.toLowerCase().includes(f.toLowerCase())}function o(h){if(!h.uid)return;const f=(0,n.UA)().getCurrent()?.uid??"";if(h.uid===s.uv)return(0,a.B1)(f);(0,a.dH)(f,h.uid)}},7094:(ne,A,e)=>{"use strict";e.d(A,{u:()=>m});var n=e(74848),a=e(16207),s=e(92745),l=e(43173),r=e(45863),c=e(41654),i=e(82612),o=e(30124),h=e(18789),f=e(8285),g=e(32540),u=e(37040),E=e(66251),v=e(81657),p=e(93389);class m extends r.Bs{static{this.LOADING_VIZ_PANEL_PLUGIN_ID="library-panel-loading-plugin"}constructor(b){super(b),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.state.isLoaded||this.loadLibraryPanelFromPanelModel()}setPanelFromLibPanel(b){if(this.state._loadedPanel?.version===b.version)return;const D=this.parent;if(!(D instanceof r.Eb))return;const C=new i.a9(b.model),P=(0,f.Cs)(D);C.id=P;const T=[];T.push(new g.$({rawLinks:C.links,menu:new g.m({$behaviors:[u.oV]})})),T.push(new E.W);let O;l.$.featureToggles.preferLibraryPanelTitle?O=C.title??D.state.title:O=D.state.title??C.title;const S={title:O,options:C.options??{},fieldConfig:C.fieldConfig,pluginId:C.type,pluginVersion:C.pluginVersion,displayMode:C.transparent?"transparent":void 0,description:C.description,titleItems:T,$data:(0,h.w)(C)};(C.timeFrom||C.timeShift)&&(S.$timeRange=new v.v({timeFrom:C.timeFrom,timeShift:C.timeShift,hideTimeOverride:C.hideTimeOverride})),D.setState(S),D.changePluginType(C.type,S.options,S.fieldConfig),this.setState({_loadedPanel:b,isLoaded:!0,name:b.name});const B=D.parent;C.repeat&&B instanceof p.U&&(B.setState({variableName:C.repeat,repeatDirection:C.repeatDirection==="h"?"h":"v",maxPerRow:C.maxPerRow,itemHeight:B.state.height??10}),B.performRepeat())}unlink(){const b=this.parent;b instanceof r.Eb&&b.setState({$behaviors:b.state.$behaviors?.filter(D=>D!==this)})}async loadLibraryPanelFromPanelModel(){let b=this.parent;if(b instanceof r.Eb)try{const D=await(0,o.Yr)(this.state.uid,!0);this.setPanelFromLibPanel(D)}catch{b.setState({_pluginLoadError:`Unable to load library panel: ${this.state.uid}`})}}}const y=new a.m(d);function d(x){return(0,n.jsx)(c.B,{direction:"column",justifyContent:"space-between",children:(0,n.jsx)(s.x6,{i18nKey:"library-panels.loading-panel-text",children:"Loading library panel"})})}r.Go.registerRuntimePanelPlugin({pluginId:m.LOADING_VIZ_PANEL_PLUGIN_ID,plugin:y})},7102:(ne,A,e)=>{"use strict";e.d(A,{F:()=>r});var n=e(2543),a=e.n(n),s=e(55386),l=e(11576);function r(c){return new Proxy({},{get:(i,o)=>{let h=c.frame.fields.find(E=>o===E.name);if(!h){const E=(0,n.toNumber)(o);h=c.frame.fields[E]}if(h||(h=c.frame.fields.find(E=>o===E.config.displayName)),h||(h=c.frame.fields.find(E=>E.labels?o===E.labels.name:!1)),!h)return;const f=h.display??(0,l.J)(),g=h.values[c.rowIndex],u=f(g);return u.toString=()=>(0,s.cN)(u),u}})}},7389:(ne,A,e)=>{"use strict";e.d(A,{CO:()=>n,ZG:()=>a,zL:()=>s});var n=(l=>(l[l.never=0]="never",l[l.onDashboardLoad=1]="onDashboardLoad",l[l.onTimeRangeChanged=2]="onTimeRangeChanged",l))(n||{}),a=(l=>(l[l.disabled=0]="disabled",l[l.alphabeticalAsc=1]="alphabeticalAsc",l[l.alphabeticalDesc=2]="alphabeticalDesc",l[l.numericalAsc=3]="numericalAsc",l[l.numericalDesc=4]="numericalDesc",l[l.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",l[l.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",l[l.naturalAsc=7]="naturalAsc",l[l.naturalDesc=8]="naturalDesc",l))(a||{}),s=(l=>(l[l.dontHide=0]="dontHide",l[l.hideLabel=1]="hideLabel",l[l.hideVariable=2]="hideVariable",l[l.inControlsMenu=3]="inControlsMenu",l))(s||{})},7498:(ne,A,e)=>{"use strict";e.d(A,{C:()=>C,S:()=>P});var n=e(65474),a=e(81160),s=e(739),l=e(41119),r=e(76190),c=e(28105),i=e(43173),o=e(45863),h=e(6890),f=e(64762),g=e(73427),u=e(47797),E=e(70327),v=e(78467),p=e(95443),m=e(52161),y=e(29609),d=e(8535),x=e(11257),b=e(24619),D=e(8285);class C extends o.VE{constructor(O){super({isEnabled:!0,...O,isHidden:!0}),this.hasAlertRules=!0,this.topic=s.QR.AlertStates,this.handleError=S=>{const B=(0,f.gi)("AlertStatesDataLayer",(0,u.q6)(S));(0,d.JD)((0,h.dx)(B))}}onEnable(){const O=o.jh.getTimeRange(this);this._timeRangeSub=O.subscribeToState(()=>{this.runWithTimeRange(O)})}onDisable(){this._timeRangeSub?.unsubscribe()}runLayer(){const O=o.jh.getTimeRange(this);this.runWithTimeRange(O)}async runWithTimeRange(O){const S=(0,D.YQ)(this),{uid:B,id:K}=S.state;if(this.querySub&&this.querySub.unsubscribe(),!this.canWork(O))return;const U=async()=>{const V=await(0,d.JD)(E.hK.endpoints.prometheusRuleNamespaces.initiate({ruleSourceName:m.hY,dashboardUid:B},{forceRefetch:!0}));if(V.error)throw new Error("Unexpected alert rules response.");return V.data},I=(0,n.H)(U()).pipe((0,a.T)(V=>(0,v.Kw)(V))).pipe((0,a.T)(V=>{this.hasAlertRules=!1;const M={};return V.forEach(L=>L.rules.forEach(N=>{if(y.R$.alertingRule(N)&&N.annotations?.[p.YH.panelID]){this.hasAlertRules=!0;const W=Number(N.annotations[p.YH.panelID]),R=P(N.state);M[W]?R===r.O.Alerting&&M[W].state!==r.O.Alerting?M[W].state=r.O.Alerting:R===r.O.Pending&&M[W].state!==r.O.Alerting&&M[W].state!==r.O.Pending&&(M[W].state=r.O.Pending):M[W]={state:R,id:Object.keys(M).length,panelId:W,dashboardId:K}}})),Object.values(M)}));this.querySub=I.subscribe({next:V=>{const M=(0,l.Vc)(V);this.publishResults({state:c.Gu.Done,series:[{...M,meta:{...M.meta,dataTopic:s.QR.AlertStates}}],timeRange:O.state.value})},error:V=>{this.handleError(V),this.publishResults({state:c.Gu.Error,series:[],errors:[{message:(0,u.q6)(V)}],timeRange:O.state.value})}})}canWork(O){const S=(0,D.YQ)(this),{uid:B}=S.state;return!(!B||i.$.publicDashboardAccessToken||O.state.value.raw.to!=="now"||this.hasAlertRules===!1||!(g.TP.hasPermission(x.w.AlertingRuleRead)&&g.TP.hasPermission(x.w.AlertingRuleExternalRead)))}}function P(T){return T===b.cF.Firing?r.O.Alerting:T===b.cF.Pending?r.O.Pending:r.O.OK}},7515:(ne,A,e)=>{"use strict";e.d(A,{a:()=>c});var n=e(74848),a=e(96540),s=e(1604),l=e(73858),r=e(16477);function c({id:i,events:o,renderEventMarker:h,mapEventToXYCoords:f,config:g}){const u=(0,a.useRef)(),[E,v]=(0,a.useState)(0),p=(0,s.A)();(0,a.useLayoutEffect)(()=>{g.addHook("init",y=>{u.current=y}),g.addHook("draw",()=>{p()&&v(y=>y+1)})},[g,v]);const m=(0,a.useMemo)(()=>{const y=[];if(!u.current||o.length===0)return y;for(let d=0;d<o.length;d++){const x=o[d];for(let b=0;b<x.length;b++){const D=f(x,b);D&&y.push((0,a.createElement)(l.p,{...D,key:`${i}-marker-${d}-${b}`},h(x,b)))}}return(0,n.jsx)(n.Fragment,{children:y})},[o,h,E]);return u.current?(0,n.jsx)(r._,{left:u.current.bbox.left/window.devicePixelRatio,top:u.current.bbox.top/window.devicePixelRatio,children:m}):null}},7542:(ne,A,e)=>{"use strict";e.d(A,{ny:()=>D,EM:()=>b,Zy:()=>x,ek:()=>C});var n=e(4213),a=e.n(n),s=e(25229),l=e(80011),r=e(64761),c=e(68125),i=e(18700),o=e(2733);function h(P){const T=P.spans.map(S=>f(S,P.processes)),O=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string},{name:"spanID",type:FieldType.string},{name:"parentSpanID",type:FieldType.string},{name:"operationName",type:FieldType.string},{name:"serviceName",type:FieldType.string},{name:"serviceTags",type:FieldType.other},{name:"startTime",type:FieldType.number},{name:"duration",type:FieldType.number},{name:"logs",type:FieldType.other},{name:"references",type:FieldType.other,values:[]},{name:"tags",type:FieldType.other},{name:"warnings",type:FieldType.other},{name:"stackTraces",type:FieldType.other}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"jaeger"}}});for(const S of T)O.add(S);return O}function f(P,T){const O=P.references?.find(S=>S.refType==="CHILD_OF")?.spanID;return{spanID:P.spanID,traceID:P.traceID,parentSpanID:O,operationName:P.operationName,startTime:P.startTime/1e3,duration:P.duration/1e3,logs:P.logs.map(S=>({...S,timestamp:S.timestamp/1e3})),tags:P.tags,warnings:P.warnings??void 0,stackTraces:P.stackTraces,references:P.references?.filter(S=>S.spanID!==O)??[],serviceName:T[P.processID].serviceName,serviceTags:T[P.processID].tags}}function g(P){let T={traceID:"",spans:[],processes:{},warnings:null},O=[];for(let S=0;S<P.length;S++){const B=P.get(S);T.traceID||(T.traceID=B.traceID),O.find(K=>K===B.serviceName)||(O.push(B.serviceName),T.processes[`p${O.length}`]={serviceName:B.serviceName,tags:B.serviceTags}),T.spans.push({traceID:B.traceID,spanID:B.spanID,duration:B.duration*1e3,references:B.parentSpanID?[{refType:"CHILD_OF",spanID:B.parentSpanID,traceID:B.traceID}]:[],flags:0,logs:B.logs.map(K=>({...K,timestamp:K.timestamp*1e3})),operationName:B.operationName,processID:Object.keys(T.processes).find(K=>T.processes[K].serviceName===B.serviceName)||"",startTime:B.startTime*1e3,tags:B.tags,warnings:B.warnings?B.warnings:null})}return{data:[T],total:0,limit:0,offset:0,errors:null}}function u(P){const T=P.map(E),O=new MutableDataFrame({fields:[{name:"traceID",type:FieldType.string,values:[]},{name:"spanID",type:FieldType.string,values:[]},{name:"parentSpanID",type:FieldType.string,values:[]},{name:"operationName",type:FieldType.string,values:[]},{name:"serviceName",type:FieldType.string,values:[]},{name:"serviceTags",type:FieldType.other,values:[]},{name:"startTime",type:FieldType.number,values:[]},{name:"duration",type:FieldType.number,values:[]},{name:"logs",type:FieldType.other,values:[]},{name:"tags",type:FieldType.other,values:[]}],meta:{preferredVisualisationType:"trace",custom:{traceFormat:"zipkin"}}});for(const S of T)O.add(S);return O}function E(P){const T={traceID:P.traceId,spanID:P.id,parentSpanID:P.parentId,operationName:P.name,serviceName:P.localEndpoint?.serviceName||P.remoteEndpoint?.serviceName||"unknown",serviceTags:p(P),startTime:P.timestamp/1e3,duration:P.duration/1e3,logs:P.annotations?.map(v)??[],tags:Object.keys(P.tags||{}).reduce((O,S)=>S==="error"?(O.push({key:"error",value:!0}),O.push({key:"errorValue",value:P.tags.error}),O):(O.push({key:S,value:P.tags[S]}),O),[])};return P.kind&&(T.tags=[{key:"kind",value:P.kind},...T.tags??[]]),P.shared&&(T.tags=[{key:"shared",value:P.shared},...T.tags??[]]),T}function v(P){return{timestamp:P.timestamp,fields:[{key:"annotation",value:P.value}]}}function p(P){const T=P.localEndpoint||P.remoteEndpoint;return T?[m("ipv4",T.ipv4),m("ipv6",T.ipv6),m("port",T.port),m("endpointType",P.localEndpoint?"local":"remote")].filter(O=>!!O):[]}function m(P,T){if(T)return{key:P,value:T}}const y=P=>{let T=[];for(let O=0;O<P.length;O++){const S=P.get(O);T.push({traceId:S.traceID,parentId:S.parentSpanID,name:S.operationName,id:S.spanID,timestamp:S.startTime*1e3,duration:S.duration*1e3,...d(S),annotations:S.logs?.length?S.logs.map(B=>({timestamp:B.timestamp,value:B.fields[0].value})):void 0,tags:S.tags?.length?S.tags.filter(B=>B.key!=="kind"&&B.key!=="endpointType"&&B.key!=="shared").reduce((B,K)=>K.key==="error"?{...B,[K.key]:S.tags?.find(U=>U.key==="errorValue")?.value||""}:{...B,[K.key]:K.value},{}):void 0,kind:S.tags?.find(B=>B.key==="kind")?.value,shared:S.tags?.find(B=>B.key==="shared")?.value})}return T},d=P=>{const T=P.serviceTags.find(O=>O.key==="endpointType")?.value==="local"?"localEndpoint":"remoteEndpoint";return P.serviceName!=="unknown"?{[T]:{serviceName:P.serviceName,ipv4:P.serviceTags.find(O=>O.key==="ipv4")?.value,ipv6:P.serviceTags.find(O=>O.key==="ipv6")?.value,port:P.serviceTags.find(O=>O.key==="port")?.value}}:void 0};function x(P,T=""){let O="";P.meta?.forEach(K=>{const U=`${K.label}: ${JSON.stringify(K.value)}
`;O=O+U}),O=O+`

`,P.rows.forEach(K=>{const U=K.timeEpochMs+"	"+(0,s.KQ)(K.timeEpochMs).toISOString()+"	"+K.entry+`
`;O=O+U});const S=new Blob([O],{type:"text/plain;charset=utf-8"}),B=`${T?`${T}-logs`:"Logs"}-${(0,l.LE)(new Date)}.txt`;a()(S,B)}function b(P,T,O,S=r.F.noop,B=!1){let K;if(B){const I=(0,c._O)([P],{...O,useExcelHeader:!1,delimiter:"	"}),V=new Uint16Array(Array.from("\uFEFF"+I).map(M=>M.charCodeAt(0)));K=new Blob([V],{type:"text/csv;charset=utf-16le"})}else{const I=(0,c._O)([P],O);K=new Blob([I],{type:"text/csv;charset=utf-8"})}const U=S!==r.F.noop?"-as-"+S.toLocaleLowerCase():"",F=`${T}-data${U}-${(0,l.LE)(new Date)}.csv`;a()(K,F)}function D(P,T){const O=new Blob([JSON.stringify(P)],{type:"application/json"}),S=`${T}-${(0,l.LE)(new Date)}.json`;a()(O,S)}function C(P,T){let O="otlp";switch(P.meta?.custom?.traceFormat){case"jaeger":{let S=g(new i.k(P));D(S,T),O="jaeger";break}case"zipkin":{let S=y(new i.k(P));D(S,T),O="zipkin";break}case"otlp":default:{let S=(0,o.xw)(new i.k(P));D(S,T);break}}return O}},7698:(ne,A,e)=>{"use strict";e.d(A,{K:()=>s});var n=e(739);const a="12.2.1",s={colorMode:n.yp.Value,graphMode:n.$p.Area,justifyMode:n.F8.Auto,percentChangeColorMode:n.CD.Standard,showPercentChange:!1,textMode:n.SV.Auto,wideLayout:!0}},7795:(ne,A,e)=>{"use strict";e.d(A,{Q$:()=>s,U3:()=>a,ti:()=>l});var n=(r=>(r.Builder="builder",r.Code="code",r))(n||{}),a=(r=>(r.Instant="instant",r.Range="range",r.Stream="stream",r))(a||{}),s=(r=>(r.DataSample="dataSample",r.InfiniteScroll="infiniteScroll",r.LogsSample="logsSample",r.LogsVolume="logsVolume",r))(s||{}),l=(r=>(r.Backward="backward",r.Forward="forward",r.Scan="scan",r))(l||{})},7817:(ne,A,e)=>{"use strict";e.d(A,{G:()=>U});var n=e(2543),a=e(64423),s=e(19379),l=e(80011),r=e(25229),c=e(75234),i=e(43173),o=e(8255),h=e(95943),f=e(15130),g=e(10605),u=e(54742),E=e(39167),v=e(93612),p=e(87745),m=e(73427),y=e(8535),d=e(88813),x=e(99305),b=e(75421),D=e(82612);const C=new Set(["gridPos","title","description","transparent"]);function P(V,M){const L=[],N={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:L};let W=0;const R=new Map;for(let G of M){let{id:w}=G;w||(W||(W=O([V,M])),w=W++,G={...G,id:w}),R.set(w,G)}for(const G of V){const w=R.get(G.id);if(!w){N.changed=!0,N.actions.remove.push(G.id),G.destroy();continue}if(R.delete(G.id),w===G){L.push(G),N.actions.noop.push(G.id);continue}if(G.type===w.type){const Q=G.getSaveModel();let ae=!0,q=!1;for(const[k,ee]of Object.entries(w))if(!(0,n.isEqualWith)(ee,Q[k],T))if(N.changed=!0,ae=!1,C.has(k))G[k]=ee,q=!0;else{q=!1;break}if(ae){L.push(G),N.actions.noop.push(G.id);continue}if(q){L.push(G),N.actions.update.push(G.id);continue}}G.destroy();const _=new D.a9(w);_.key=`${_.id}-update-${Date.now()}`,L.push(_),N.changed=!0,N.actions.replace.push(G.id)}for(const G of R.values())L.push(new D.a9(G)),N.changed=!0,N.actions.add.push(G.id);return N}function T(V,M){if(V==null&&(M===1/0||M===-1/0||M==null)||M==null&&(V===1/0||V===-1/0||V==null))return!0}function O(V){let M=0;for(const L of V)for(const N of L)N.id>M&&(M=N.id);return M+1}var S=e(4604);function B(V,M){return V.repeatDirection===h.HG?!1:M.gridPos.x>=V.gridPos.x+V.gridPos.w&&M.gridPos.y===V.gridPos.y}function K(V){for(const M of V)if(delete M.scopedVars,M.panels?.length)for(const L of M.panels)delete L.scopedVars}class U{constructor(M,L,N){this.timeRangeUpdatedDuringEditOrView=!1,this.originalDashboard=null,this.getVariablesFromState=N?.getVariablesFromState??v.SS,this.events=new s.o,this.id=M.id||null,this.uid=M.uid||L?.uid||null,this.revision=M.revision??void 0,this.title=M.title??"No Title",this.description=M.description,this.tags=M.tags??[],this.timezone=M.timezone??"",this.weekStart=M.weekStart??"",this.editable=M.editable!==!1,this.graphTooltip=M.graphTooltip||0,this.time=M.time??{from:"now-6h",to:"now"},this.timepicker=M.timepicker??{},this.liveNow=M.liveNow,this.templating=this.removeNullValuesFromVariables(this.ensureListExist(M.templating)),this.annotations=this.ensureListExist(M.annotations),this.refresh=M.refresh,this.snapshot=M.snapshot,this.schemaVersion=M.schemaVersion??0,this.fiscalYearStartMonth=M.fiscalYearStartMonth??0,this.version=M.version??0,this.links=M.links??[],this.gnetId=M.gnetId||null,this.panels=(0,n.map)(M.panels??[],W=>new D.a9(W)),this.scopeMeta=M.scopeMeta,this.originalDashboard=(0,n.cloneDeep)(M),this.originalTemplating=(0,n.cloneDeep)(this.templating),this.originalTime=(0,n.cloneDeep)(this.time),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.initMeta(L),this.updateSchema(M),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new a.yU,this.lastRefresh=Date.now(),this.appEventsSubscription.add(m.lE.subscribe(d.og,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(m.lE.subscribe(d.BS,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(m.lE.subscribe(d.eF,this.variablesChangedInUrlHandler.bind(this)))}static{this.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0,timeRangeUpdatedDuringEditOrView:!0,originalDashboard:!0}}addBuiltInAnnotationQuery(){this.annotations.list.some(L=>L.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:o.Mk,enable:!0,hide:!0,builtIn:1})}initMeta(M){M=M||{},M.canShare=M.canShare!==!1,M.canSave=M.canSave!==!1,M.canStar=M.canStar!==!1,M.canEdit=M.canEdit!==!1,M.canDelete=M.canDelete!==!1,M.showSettings=M.canEdit,M.canMakeEditable=M.canSave&&!this.editable,M.hasUnsavedFolderChange=!1,this.editable||(M.canEdit=!1,M.canDelete=!1,M.canSave=!1),this.meta=M}getSaveModelCloneOld(M){const L=(0,n.defaults)(M||{},{saveVariables:!0,saveTimerange:!0});let N={};for(const W in this)U.nonPersistedProperties[W]||!this.hasOwnProperty(W)||(N[W]=(0,n.cloneDeep)(this[W]));return N.templating=this.getTemplatingSaveModel(L),L.saveTimerange||(N.time=this.originalTime),N.panels=this.getPanelSaveModels(),N=(0,g.v)(N),N.getVariables=()=>N.templating.list,N}getSaveModelClone(M){const L=this.getSaveModelCloneOld(M),N=JSON.stringify(L);return JSON.parse(N)}updatePanels(M){const L=P(this.panels,M??[]);return L.changed&&(this.panels=L.panels??[],this.sortPanelsByGridPos(),this.events.publish(new p.Q$)),L}getPanelSaveModels(){return this.panels.filter(M=>this.isSnapshotTruthy()||!(M.repeatPanelId||M.repeatedByRow)).map(M=>{if(M.libraryPanel){const{id:L,title:N,libraryPanel:W,gridPos:R}=M;return{id:L,title:N,gridPos:R,libraryPanel:{uid:W.uid,name:W.name}}}return this.panelInEdit&&this.panelInEdit.id===M.id?this.panelInEdit.getSaveModel():M.getSaveModel()}).map(M=>(this.isSnapshotTruthy()||(delete M.scopedVars,M.type==="row"&&M.panels&&M.panels.length>0&&(M.panels=M.panels.filter(L=>!L.repeatPanelId).map(L=>(delete L.scopedVars,L)))),M))}getTemplatingSaveModel(M){const L=this.originalTemplating?.list??[],W=this.getVariablesFromState(this.uid).map(G=>{const w=u.B.get(G.type).getSaveModel(G,M.saveVariables);if(!M.saveVariables){const _=L.find(({name:Q,type:ae})=>Q===G.name&&ae===G.type);if(!_)return w;G.type==="adhoc"?w.filters=_.filters:(w.current=_.current,w.options=_.options)}return w});return{list:(0,g.v)(W)}}timeRangeUpdated(M){this.events.publish(new c.sR(M)),(0,y.JD)((0,E.RK)(this.uid,M)),(this.panelInEdit||this.panelInView)&&(this.timeRangeUpdatedDuringEditOrView=!0)}startRefresh(M={refreshAll:!0,panelIds:[]}){if(this.events.publish(new c._),this.lastRefresh=Date.now(),this.panelInEdit&&(M.refreshAll||M.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}const L=this.panels.filter(N=>!this.otherPanelInFullscreen(N)&&(M.refreshAll||M.panelIds.includes(N.id)));if(!this.isSnapshot())for(const N of L)N.refreshWhenInView=!0;for(const N of L)N.refresh()}render(){this.events.publish(new p.XM);for(const M of this.panels)M.render()}panelInitialized(M){const L=M.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(M)&&!L&&M.refresh()}otherPanelInFullscreen(M){return(this.panelInEdit||this.panelInView)&&!(M.isViewing||M.isEditing)}initEditPanel(M){return(0,b.jG)().stopAutoRefresh(),this.panelInEdit=M.getEditClone(),this.timeRangeUpdatedDuringEditOrView=!1,this.panelInEdit}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,b.jG)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged()}initViewPanel(M){this.panelInView=M,this.timeRangeUpdatedDuringEditOrView=!1,M.setIsViewing(!0)}exitViewPanel(M){this.panelInView=void 0,M.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged()}refreshIfPanelsAffectedByVariableChangeOrTimeRangeChanged(){(this.panelsAffectedByVariableChange||this.timeRangeUpdatedDuringEditOrView)&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange??[],refreshAll:this.timeRangeUpdatedDuringEditOrView}),this.panelsAffectedByVariableChange=null,this.timeRangeUpdatedDuringEditOrView=!1)}ensurePanelsHaveUniqueIds(){const M=new Set;let L=this.getNextPanelId();for(const N of this.panelIterator())(!N.id||M.has(N.id))&&(N.id=L++),M.add(N.id)}removeNullValuesFromVariables(M){if(!M.list.length)return M;for(const L of M.list)L.current&&(L.current.value===null||Array.isArray(L.current.value)&&L.current.value.includes(null))&&(L.current=void 0);return M}ensureListExist(M={}){return M.list??=[],M}getNextPanelId(){let M=0;for(const L of this.panelIterator())L.id>M&&(M=L.id);return M+1}*panelIterator(){for(const M of this.panels){yield M;const L=M.panels??[];for(const N of L)yield N}}forEachPanel(M){for(let L=0;L<this.panels.length;L++)M(this.panels[L],L)}getPanelById(M,L=!1){if(this.panelInEdit&&this.panelInEdit.id===M)return this.panelInEdit;if(L){for(const N of this.panelIterator())if(N.id===M)return N;return null}else return this.panels.find(N=>N.id===M)??null}canEditPanel(M){return!!(this.meta.canEdit&&M&&!M.repeatPanelId&&M.type!=="row")}canEditPanelById(M){return this.canEditPanel(this.getPanelById(M))}addPanel(M){M.id=this.getNextPanelId(),this.panels.unshift(new D.a9(M)),this.sortPanelsByGridPos(),this.events.publish(new p.Q$)}updateMeta(M){this.meta={...this.meta,...M},this.events.publish(new p.Cf)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((M,L)=>M.gridPos.y===L.gridPos.y?M.gridPos.x-L.gridPos.x:M.gridPos.y-L.gridPos.y)}clearUnsavedChanges(M,L){for(const N of this.panels)N.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0),this.originalDashboard=M,this.originalTemplating=M.templating,L.saveTimerange&&(this.originalTime=M.time)}hasUnsavedChanges(){return!!this.panels.find(L=>L.hasChanged)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;K(this.panels);const M=this.panels.filter(L=>(!L.repeat||L.repeatedByRow)&&L.repeatPanelId);(0,n.pull)(this.panels,...M),M.map(L=>L.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables()||this.panelInView)){this.cleanUpRepeats();for(let M=0;M<this.panels.length;M++){const L=this.panels[M];L.repeat&&this.repeatPanel(L,M)}this.sortPanelsByGridPos(),this.events.publish(new p.Q$)}}cleanUpRowRepeats(M){const L=M.map(W=>W.id),N=M.filter(W=>!W.repeat&&W.repeatPanelId&&L.includes(W.repeatPanelId));(0,n.pull)(M,...N),(0,n.pull)(this.panels,...N)}processRowRepeats(M){if(this.isSnapshotTruthy()||!this.hasVariables())return;let L=M.panels??[];if(!M.collapsed){const N=this.panels.findIndex(W=>W.id===M.id);L=this.getRowPanels(N)}this.cleanUpRowRepeats(L);for(const N of L)if(N.repeat){const W=this.panels.findIndex(R=>R.id===N.id);this.repeatPanel(N,W)}}getPanelRepeatClone(M,L,N){if(L===0)return M;const W=M.getSaveModel();W.id=this.getNextPanelId();const R=new D.a9(W);return this.panels.splice(N+L,0,R),R.repeatPanelId=M.id,R.repeat=void 0,this.panelInView?.id===R.id&&(R.setIsViewing(!0),this.panelInView=R),R}getRowRepeatClone(M,L,N){if(L===0){if(!M.collapsed){const w=this.getRowPanels(N);M.panels=w}return M}const W=new D.a9(M.getSaveModel());let R,G;return M.collapsed?(R=(0,n.cloneDeep)(M.panels)??[],W.panels=R,G=N+L):(R=this.getRowPanels(N),W.panels=R.map(w=>w.getSaveModel()),G=N+(R.length+1)*L),this.panels.splice(G,0,W),this.updateRepeatedPanelIds(W),W}repeatPanel(M,L){const N=this.getPanelRepeatVariable(M);if(!N)return;if(M.type==="row"){this.repeatRow(M,L,N);return}const W=this.getSelectedVariableOptions(N),R=M.maxPerRow||4;let G=0,w=M.gridPos.y;for(let Q=0;Q<W.length;Q++){const ae=W[Q];let q;q=this.getPanelRepeatClone(M,Q,L),q.scopedVars??={},q.scopedVars[N.name]=ae,M.repeatDirection===h.Pz?(Q>0&&(w+=q.gridPos.h),q.gridPos.y=w):(q.gridPos.w=Math.max(h.cV/W.length,h.cV/R),q.gridPos.x=G,q.gridPos.y=w,G+=q.gridPos.w,G+q.gridPos.w>h.cV&&(G=0,w+=q.gridPos.h))}const _=w-M.gridPos.y;if(_>0){const Q=L+W.length;for(const ae of this.panels.slice(Q))B(M,ae)||(ae.gridPos.y+=_)}}repeatRow(M,L,N){const W=this.getSelectedVariableOptions(N);for(let R=0;R<W.length;R++){const G=W[R],w=this.getRowRepeatClone(M,R,L);I(w,N,G);const _=this.getRowHeight(w),Q=w.panels||[];let ae;if(M.collapsed){for(const q of Q)I(q,N,G),R>0&&this.updateRepeatedPanelIds(q,!0);w.gridPos.y+=R,ae=L+R+1}else{const q=L+(Q.length+1)*R+1;Q.forEach((k,ee)=>{if(I(k,N,G),R>0){const j=new D.a9(k);this.updateRepeatedPanelIds(j,!0),j.gridPos.y+=_*R,this.panels.splice(q+ee,0,j)}}),w.panels=[],w.gridPos.y+=_*R,ae=q+Q.length}if(W.length>1)for(const q of this.panels.slice(ae))q.gridPos.y+=_}}updateRepeatedPanelIds(M,L){return M.repeatPanelId=M.id,M.id=this.getNextPanelId(),L?M.repeatedByRow=!0:M.repeat=void 0,M}getSelectedVariableOptions(M){let L;return(0,x.ML)(M)?L=M.options.slice(1,M.options.length):L=(0,n.filter)(M.options,{selected:!0}),L}getRowHeight(M){if(!M.panels||M.panels.length===0)return 0;if(M.collapsed)return 1;const L=(0,n.maxBy)(M.panels,({gridPos:N})=>N.y+N.h).gridPos;return L.y+L.h-M.gridPos.y}removePanel(M){this.panels=this.panels.filter(L=>L!==M),M.destroy(),this.events.publish(new p.Q$)}removeRow(M,L){(!L&&M.collapsed||L&&!M.collapsed)&&this.toggleRow(M),this.removePanel(M)}expandRows(){const M=this.panels.filter(L=>L.type==="row"&&L.collapsed);for(const L of M)this.toggleRow(L)}collapseRows(){const M=this.panels.filter(L=>L.type==="row"&&!L.collapsed);for(const L of M)this.toggleRow(L)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(M=>M.hide!==2)||this.annotations.list.some(M=>!M.hide)}getPanelInfoById(M){const L=this.panels.findIndex(N=>N.id===M);return L>=0?{panel:this.panels[L],index:L}:null}duplicatePanel(M){const L=M.getSaveModel();return L.id=this.getNextPanelId(),delete L.repeat,delete L.repeatIteration,delete L.repeatPanelId,delete L.scopedVars,L.alert&&delete L.thresholds,delete L.alert,M.gridPos.x+M.gridPos.w*2<=h.cV?L.gridPos.x+=M.gridPos.w:L.gridPos.y+=M.gridPos.h,this.addPanel(L),L}formatDate(M,L){return(0,l.LE)(M,{format:L,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const M of this.panels)M.destroy()}toggleRow(M){const L=(0,n.indexOf)(this.panels,M);if(!M.collapsed){const G=this.getRowPanels(L);(0,n.pull)(this.panels,...G),M.panels=G.map(w=>w.getSaveModel()),M.collapsed=!0,G.some(w=>w.hasChanged)&&M.configRev++,this.events.publish(new p.Q$);return}M.collapsed=!1;const N=M.panels??[],W=N.some(G=>G.repeat),R=M.repeat;if(N.length>0){const w=(N[0].gridPos.y??M.gridPos.y)-(M.gridPos.y+M.gridPos.h);let _=L+1,Q=M.gridPos.y;for(const q of N){if(R){const k=this.getPanelRepeatVariable(M);if(q.scopedVars??={},k){const ee=this.getSelectedVariableOptions(k);q.scopedVars={...q.scopedVars,[k.name]:ee[0]}}}q.gridPos.y??(q.gridPos.y=M.gridPos.y),q.gridPos.y-=w,this.panels.splice(_,0,new D.a9(q)),_+=1,Q=Math.max(Q,q.gridPos.y+q.gridPos.h)}const ae=Q-M.gridPos.y-1;for(const q of this.panels.slice(_))q.gridPos.y+=ae;M.panels=[],W&&this.processRowRepeats(M)}this.sortPanelsByGridPos(),this.events.publish(new p.Q$)}getRowPanels(M){const L=this.panels.slice(M+1),N=L.findIndex(R=>R.type==="row");return L.slice(0,N>=0?N:this.panels.length)}on(M,L){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(M,L)}off(M,L){console.log("DashboardModel.off is deprecated"),this.events.off(M,L)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(M){return(0,l.fq)(M,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:f.TP?.user?.timezone}updateSchema(M){new S.SW(this).updateSchema(M)}hasTimeChanged(){const{time:M,originalTime:L}=this;return!((0,n.isEqual)(M,L)||(0,n.isEqual)((0,r.KQ)(M?.from),(0,r.KQ)(L?.from))&&(0,n.isEqual)((0,r.KQ)(M?.to),(0,r.KQ)(L?.to)))}autoFitPanels(M,L){const N=Math.max(...this.panels.map(Q=>Q.gridPos.h+Q.gridPos.y)),W=55;let G=M-W-20;L&&(G+=W);const w=Math.floor(G/(h.sD+h.dU)),_=N/w;for(const Q of this.panels)Q.gridPos.y=Math.round(Q.gridPos.y/_)||1,Q.gridPos.h=Math.round(Q.gridPos.h/_)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(p.bG)}getPanelByUrlId(M){const L=parseInt(M??"0",10),N=this.panels.filter(W=>W.collapsed);for(const W of N)W.panels?.some(G=>G.id===L)&&this.toggleRow(W);return this.getPanelById(L)}toggleLegendsForAll(){const M=this.panels.filter(F),L=M.filter(R=>R.legend.show).length,N=M.length-L,W=L>=N;for(const R of M)R.legend.show=!W,R.render()}toggleExemplarsForAll(){for(const M of this.panels)for(const L of M.targets){if(!(L.datasource&&(L.datasource.type==="prometheus"||L.datasource.type==="grafana-amazonprometheus-datasource"||L.datasource.type==="grafana-azureprometheus-datasource")))continue;const N=L;N.exemplar=!N.exemplar}this.startRefresh()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(M){let L=!0;return M?L=!!this.meta.annotationsPermissions?.dashboard.canEdit:L=!!this.meta.annotationsPermissions?.organization.canEdit,(i.$.featureToggles.annotationPermissionUpdate||this.canEditDashboard())&&L}canDeleteAnnotations(M){let L=!0;return M?L=!!this.meta.annotationsPermissions?.dashboard.canDelete:L=!!this.meta.annotationsPermissions?.organization.canDelete,i.$.featureToggles.annotationPermissionUpdate?L:L&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(L=>L.builtIn===1)?.enable===!1?!1:i.$.featureToggles.annotationPermissionUpdate?!!this.meta.annotationsPermissions?.dashboard.canAdd:!!this.meta.annotationsPermissions?.dashboard.canAdd&&this.canEditDashboard()}canEditDashboard(){return!!(this.meta.canEdit||this.meta.canMakeEditable)}canExecuteActions(){return this.canEditDashboard()}shouldUpdateDashboardPanelFromJSON(M,L){!(0,n.isEqual)(M?.gridPos,L?.gridPos)&&this.events.publish(new p.Q$)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(M){return this.getVariablesFromState(this.uid).find(L=>L.name===M.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(){const M=this.originalTemplating?.list??[],L=this.getTemplatingSaveModel({saveVariables:!0}).list;return M.length!==L.length?!1:!(0,n.isEqual)(L,M)}variablesTimeRangeProcessDoneHandler(M){const L=M.payload.variableIds.length>0;this.variablesChangedHandler(new d.og({panelIds:[],refreshAll:!0}),L)}variablesChangedHandler(M,L=!0){if(L&&this.processRepeats(),M.payload.refreshAll||(0,b.jG)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=M.payload.panelIds.filter(N=>N!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(M.payload)}variablesChangedInUrlHandler(M){this.templateVariableValueUpdated(),this.startRefresh(M.payload)}getOriginalDashboard(){return this.originalDashboard}}function F(V){return!!V.legend}function I(V,M,L){V.scopedVars??={},V.scopedVars[M.name]=L}},7840:(ne,A,e)=>{"use strict";e.d(A,{m:()=>u});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(96540),c=e(92745),i=e(45861),o=e(48542),h=e(63142),f=e(39659),g=e(78793);const u=({labels:p,commonLabels:m={},size:y,onClick:d})=>{const x=(0,h.of)(v,y),[b,D]=(0,r.useState)(!1),C=(0,s.chain)(p).toPairs().reject(f.w0).reject(([S])=>b?!1:S in m).value(),P=Object.keys(m).length,T=P>0,O=(0,c.t)("alert-labels.button.show.tooltip","Show common labels");return(0,n.jsxs)("div",{className:x.wrapper,role:"list","aria-label":(0,c.t)("alerting.alert-labels.aria-label-labels","Labels"),children:[C.map(([S,B])=>(0,n.jsx)(g.J,{size:y,label:S,value:B,color:E(S),onClick:d},S+B)),!b&&T&&(0,n.jsx)(i.$n,{variant:"secondary",fill:"text",onClick:()=>D(!0),tooltip:O,tooltipPlacement:"top",size:"sm",children:(0,n.jsxs)(c.x6,{i18nKey:"alerting.alert-labels.common-labels-count",count:P,children:["+","{{count}}"," common labels"]})}),b&&T&&(0,n.jsx)(i.$n,{variant:"secondary",fill:"text",onClick:()=>D(!1),tooltipPlacement:"top",size:"sm",children:(0,n.jsx)(c.x6,{i18nKey:"alert-labels.button.hide",children:"Hide common labels"})})]})};function E(p){return(0,o.MC)(p).color}const v=(p,m)=>({wrapper:(0,a.css)({display:"flex",flexWrap:"wrap",alignItems:"center",gap:m==="md"?p.spacing():p.spacing(.5)})})},7895:(ne,A,e)=>{"use strict";e.d(A,{I:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(30360),r=e(51898),c=e(63142),i=e(35484),o=e(45861),h=e(30703),f=e(45967);const g=(0,s.forwardRef)(({tooltip:p,icon:m,iconSize:y,className:d,children:x,imgSrc:b,imgAlt:D,fullWidth:C,isOpen:P,narrow:T,variant:O="default",iconOnly:S,"aria-label":B,isHighlighted:K,...U},F)=>{const I=(0,c.of)(v),V=(0,a.cx)({[I.button]:!0,[I.buttonFullWidth]:C,[I.narrow]:T},I[O],d),M=(0,a.cx)({[I.content]:!0,[I.contentWithIcon]:!!m,[I.contentWithRightIcon]:P!==void 0}),L=(0,n.jsxs)("button",{ref:F,className:V,"aria-label":u(B,p),"aria-expanded":P,type:"button",...U,children:[E(m,y),b&&(0,n.jsx)("img",{className:I.img,src:b,alt:D??""}),x&&!S&&(0,n.jsx)("div",{className:M,children:x}),P===!1&&(0,n.jsx)(h.I,{name:"angle-down"}),P===!0&&(0,n.jsx)(h.I,{name:"angle-up"}),K&&(0,n.jsx)("div",{className:I.highlight})]});return p?(0,n.jsx)(f.m,{ref:F,content:p,placement:"bottom",children:L}):L});g.displayName="ToolbarButton";function u(p,m){return p||(m?r.Tp.components.PageToolbar.item(m):void 0)}function E(p,m){return p?(0,l.n6)(p)?(0,n.jsx)(h.I,{name:p,size:`${m||"lg"}`}):p:null}const v=p=>{const m=(0,o.U_)(p,"primary","solid"),y=(0,o.U_)(p,"destructive","solid"),d=(0,a.css)({color:p.colors.text.primary,background:p.colors.secondary.main,"&:hover":{color:p.colors.text.primary,background:p.colors.secondary.shade,border:`1px solid ${p.colors.border.medium}`}});return{button:(0,a.css)({label:"toolbar-button",position:"relative",display:"flex",alignItems:"center",height:p.spacing(p.components.height.md),padding:p.spacing(0,1),borderRadius:p.shape.radius.default,lineHeight:`${p.components.height.md*p.spacing.gridSize-2}px`,fontWeight:p.typography.fontWeightMedium,border:`1px solid ${p.colors.secondary.border}`,whiteSpace:"nowrap",[p.transitions.handleMotion("no-preference","reduce")]:{transition:p.transitions.create(["background","box-shadow","border-color","color"],{duration:p.transitions.duration.short})},[p.breakpoints.down("md")]:{width:"auto !important"},"&:focus, &:focus-visible":{...(0,i.getFocusStyles)(p),zIndex:1},"&:focus:not(:focus-visible)":(0,i.getMouseFocusStyles)(p),"&[disabled], &:disabled":{cursor:"not-allowed",opacity:p.colors.action.disabledOpacity,background:p.colors.action.disabledBackground,boxShadow:"none","&:hover":{color:p.colors.text.disabled,background:p.colors.action.disabledBackground,boxShadow:"none"}}}),default:(0,a.css)({color:p.colors.text.secondary,background:"transparent",border:"1px solid transparent","&:hover":{color:p.colors.text.primary,background:p.colors.action.hover}}),canvas:d,active:(0,a.cx)(d,(0,a.css)({"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",bottom:0,borderRadius:p.shape.radius.default,backgroundImage:p.colors.gradients.brandHorizontal}})),primary:(0,a.css)(m),destructive:(0,a.css)(y),narrow:(0,a.css)({padding:p.spacing(0,.5)}),img:(0,a.css)({width:"16px",height:"16px",marginRight:p.spacing(1)}),buttonFullWidth:(0,a.css)({flexGrow:1}),content:(0,a.css)({display:"flex",flexGrow:1}),contentWithIcon:(0,a.css)({display:"none",paddingLeft:p.spacing(1),[`@media ${(0,i.mediaUp)(p.v1.breakpoints.md)}`]:{display:"block"}}),contentWithRightIcon:(0,a.css)({paddingRight:p.spacing(.5)}),highlight:(0,a.css)({backgroundColor:p.colors.success.main,borderRadius:p.shape.radius.circle,width:"6px",height:"6px",position:"absolute",top:"-3px",right:"-3px",zIndex:1})}}},7923:(ne,A,e)=>{"use strict";e.d(A,{m:()=>h});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(92745),c=e(30703),i=e(76319),o=e(63142);const h=({onClick:g=s.noop,baseVersion:u=0,newVersion:E=0,isNewLatest:v=!1})=>{const p=(0,o.of)(f);return(0,n.jsxs)("h3",{className:p.header,children:[(0,n.jsx)(i.K,{name:"arrow-left",size:"xl",onClick:g,tooltip:(0,r.t)("dashboard-scene.version-history-header.tooltip-reset-version","Reset version")}),(0,n.jsxs)("span",{children:[(0,n.jsxs)(r.x6,{i18nKey:"dashboard-scene.version-history-header.compare-versions",children:["Comparing ",{baseVersion:u}," ",(0,n.jsx)(c.I,{name:"arrows-h"})," ",{newVersion:E}]})," ",v&&(0,n.jsx)("cite",{className:"muted",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.version-history-header.latest",children:"(Latest)"})})]})]})},f=g=>({header:(0,a.css)({fontSize:g.typography.h3.fontSize,display:"flex",gap:g.spacing(2),marginBottom:g.spacing(2)})})},8001:(ne,A,e)=>{"use strict";e.d(A,{dp:()=>E,m5:()=>g,zN:()=>u});var n=e(2543),a=e.n(n),s=e(49510),l=e(16126),r=e(81160),c=e(54092),i=e(96016),o=e(35216),h=e(3260);const f=p=>(0,s.z)([o.qm.addedComponentsRegistry.asObservable(),o.qm.addedLinksRegistry.asObservable()]).pipe((0,l.p)(([m,y])=>!!m&&!!y),(0,r.T)(([m,y])=>v({...p,addedComponentsRegistry:m,addedLinksRegistry:y}))),g=p=>f(p).pipe((0,r.T)(m=>m.extensions.filter(y=>y.type===c.u6.link))),u=p=>f(p).pipe((0,r.T)(m=>m.extensions.filter(y=>y.type===c.u6.component)));function E(p){let m,y;return p.addedComponentsRegistry.asObservable().subscribe(d=>{m=d}),p.addedLinksRegistry.asObservable().subscribe(d=>{y=d}),d=>v({...d,addedComponentsRegistry:m,addedLinksRegistry:y})}const v=({context:p,extensionPointId:m,limitPerPlugin:y,addedLinksRegistry:d,addedComponentsRegistry:x})=>{const b=p?(0,h.$Y)(p):{},D=[],C={};for(const T of d?.[m]??[])try{const{pluginId:O}=T;if(y&&C[O]>=y)continue;C[O]===void 0&&(C[O]=0);const S=i.R.child({pluginId:O,extensionPointId:m,path:T.path??"",title:T.title,description:T.description??"",onClick:typeof T.onClick}),B=(0,h.hS)(O,T,S,b);if(T.configure&&B===void 0)continue;const K=B?.path||T.path,U={id:(0,h.yt)(O,m,T.title),type:c.u6.link,pluginId:O,onClick:(0,h.dx)(O,m,T,S,b),icon:B?.icon||T.icon,title:B?.title||T.title,description:B?.description||T.description||"",path:(0,n.isString)(K)?(0,h.YS)(O,K,m):void 0,category:B?.category||T.category};D.push(U),C[O]+=1}catch(O){O instanceof Error&&i.R.error(O.message,{stack:O.stack??"",message:O.message})}const P=x?.[m]??[];for(const T of P){if(y&&C[T.pluginId]>=y)continue;C[T.pluginId]===void 0&&(C[T.pluginId]=0);const O=i.R.child({title:T.title,description:T.description??"",pluginId:T.pluginId}),S={id:(0,h.yt)(T.pluginId,m,T.title),type:c.u6.component,pluginId:T.pluginId,title:T.title,description:T.description??"",component:(0,h.nv)({pluginId:T.pluginId,extensionTitle:T.title,Component:T.component,log:O})};D.push(S),C[T.pluginId]+=1}return{extensions:D}}},8073:(ne,A,e)=>{"use strict";e.d(A,{H:()=>T,Z:()=>h});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(63142),c=e(35484),i=e(43856);const o=s.createContext(null),h=({disabled:O,href:S,onClick:B,children:K,isSelected:U,isCompact:F,className:I,noMargin:V,...M})=>{const L=(0,s.useMemo)(()=>s.Children.toArray(K).some(G=>s.isValidElement(G)&&G.type===f),[K]),N=O||!B&&!S,W=B&&!O?B:void 0,R=(0,r.of)(i.i,O,N,U,F,V);return(0,n.jsx)(i.Q,{disableEvents:O,disableHover:N,isSelected:U,className:(0,a.cx)(R.container,I),noMargin:V,...M,children:(0,n.jsxs)(o.Provider,{value:{href:S,onClick:W,disabled:O,isSelected:U},children:[!L&&(0,n.jsx)(f,{}),K]})})};h.displayName="Card";const f=({children:O,className:S,"aria-label":B})=>{const K=(0,s.useContext)(o),U=(0,r.of)(g),{href:F,onClick:I,isSelected:V}=K??{href:void 0,onClick:void 0,isSelected:void 0},M=(0,l.t)("grafana-ui.card.option","option");return(0,n.jsxs)("h2",{className:(0,a.cx)(U.heading,S),children:[F?(0,n.jsx)("a",{href:F,className:U.linkHack,"aria-label":B,onClick:I,children:O}):I?(0,n.jsx)("button",{onClick:I,className:U.linkHack,"aria-label":B,type:"button",children:O}):(0,n.jsx)(n.Fragment,{children:O}),V!==void 0&&(0,n.jsx)("input",{"aria-label":M,type:"radio",checked:V,readOnly:!0})]})};f.displayName="Heading";const g=O=>({heading:(0,a.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:O.typography.size.md,letterSpacing:"inherit",lineHeight:O.typography.body.lineHeight,color:O.colors.text.primary,fontWeight:O.typography.fontWeightMedium,"& input[readonly]":{cursor:"inherit"}}),linkHack:(0,a.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:O.shape.radius.default},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,c.getFocusStyles)(O),zIndex:1}}})}),u=({children:O,className:S})=>{const B=(0,r.of)(E);return(0,n.jsx)("div",{className:(0,a.cx)(B.tagList,S),children:O})};u.displayName="Tags";const E=O=>({tagList:(0,a.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),v=({children:O,className:S})=>{const B=(0,r.of)(p),K=typeof O=="string"?"p":"div";return(0,n.jsx)(K,{className:(0,a.cx)(B.description,S),children:O})};v.displayName="Description";const p=O=>({description:(0,a.css)({width:"100%",gridArea:"Description",margin:O.spacing(1,0,0),color:O.colors.text.secondary,lineHeight:O.typography.body.lineHeight})}),m=({children:O,align:S="start",className:B})=>{const K=(0,r.of)(y);return(0,n.jsx)("div",{className:(0,a.cx)(K.media,B,(0,a.css)({alignSelf:S})),children:O})};m.displayName="Figure";const y=O=>({media:(0,a.css)({position:"relative",gridArea:"Figure",marginRight:O.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),d=(0,s.memo)(({children:O,className:S,separator:B="|"})=>{const K=(0,r.of)(x);let U=O;const F=s.Children.toArray(O).filter(Boolean);return F.length?(U=F.map((I,V)=>(0,n.jsx)("div",{className:K.metadataItem,children:I},`element_${V}`)),F.length>1&&B&&(U=F.reduce((I,V,M)=>[I,(0,n.jsx)("span",{className:K.separator,children:B},`separator_${M}`),V])),(0,n.jsx)("div",{className:(0,a.cx)(K.metadata,S),children:U})):null});d.displayName="Meta";const x=O=>({metadata:(0,a.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:O.typography.size.sm,color:O.colors.text.secondary,margin:O.spacing(.5,0,0),lineHeight:O.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,a.css)({zIndex:0}),separator:(0,a.css)({margin:`0 ${O.spacing(1)}`})}),b=({children:O,disabled:S,variant:B,className:K})=>{const U=(0,r.of)(D),I=(0,s.useContext)(o)?.disabled||S,V=B==="primary"?U.actions:U.secondaryActions;return(0,n.jsx)("div",{className:(0,a.cx)(V,K),children:s.Children.map(O,M=>s.isValidElement(M)?(0,s.cloneElement)(M,{disabled:I,...M.props}):null)})},D=O=>({actions:(0,a.css)({display:"flex",flexDirection:"row",flexWrap:"wrap",gap:O.spacing(1),gridArea:"Actions",marginTop:O.spacing(2)}),secondaryActions:(0,a.css)({alignSelf:"center",color:O.colors.text.secondary,display:"flex",flexDirection:"row",flexWrap:"wrap",gap:O.spacing(1),gridArea:"Secondary",marginTop:O.spacing(2)})}),C=({children:O,disabled:S,className:B})=>(0,n.jsx)(b,{variant:"primary",disabled:S,className:B,children:O});C.displayName="Actions";const P=({children:O,disabled:S,className:B})=>(0,n.jsx)(b,{variant:"secondary",disabled:S,className:B,children:O});P.displayName="SecondaryActions";const T=O=>({inner:(0,a.css)({display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",flexWrap:"wrap"}),...g(O),...x(O),...p(O),...y(O),...D(O),...E(O)});h.Heading=f,h.Tags=u,h.Figure=m,h.Meta=d,h.Actions=C,h.SecondaryActions=P,h.Description=v},8095:(ne,A,e)=>{"use strict";e.d(A,{St:()=>l,dx:()=>s,nj:()=>n,uJ:()=>a});var n=(r=>(r.LiveMeasurements="measurements",r.Annotations="annotations",r.Snapshot="snapshot",r.TimeRegions="timeRegions",r.RandomWalk="randomWalk",r.List="list",r.Read="read",r.Search="search",r.SearchNext="searchNext",r))(n||{});const a={refId:"A",queryType:"randomWalk"},s={refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:"snapshot",snapshot:[]};var l=(r=>(r.Dashboard="dashboard",r.Tags="tags",r))(l||{})},8134:(ne,A,e)=>{"use strict";e.d(A,{_:()=>n});function n(s,l){return l.id===s?!0:a(s)?a(l.id):l.aliasIDs?l.aliasIDs.includes(s):!1}function a(s){return s==="prometheus"?!0:new RegExp("^grafana-[0-9a-z]+prometheus-datasource$").test(s)}},8135:(ne,A,e)=>{"use strict";e.d(A,{N:()=>s});var n=e(74848),a=e(96540);function s({includeButtonPress:l=!0,parent:r=window,useCapture:c=!1,onClick:i,children:o}){const h=(0,a.useRef)(null),f=(0,a.useCallback)(g=>{const u=h.current;(!u||g.target instanceof Node&&!u.contains(g.target))&&i()},[i]);return(0,a.useEffect)(()=>(r.addEventListener("click",f,c),l&&r.addEventListener("keyup",f,c),()=>{r.removeEventListener("click",f,c),l&&r.removeEventListener("keyup",f,c)}),[l,f,r,c]),(0,n.jsx)("div",{ref:h,children:o})}},8207:(ne,A,e)=>{"use strict";e.d(A,{_:()=>y});var n=e(74848),a=e(22803),s=e(18828),l=e(43107),r=e(93225),c=e(50848),i=e(96540),o=e(51898),h=e(92745),f=e(63142),g=e(45897),u=e(76319),E=e(41654),v=e(92807),p=e(66404);const m={sm:{width:"25vw",minWidth:384},md:{width:"50vw",minWidth:568},lg:{width:"75vw",minWidth:744}};function y({children:P,onClose:T,closeOnMaskClick:O=!0,scrollableContent:S=!0,title:B,subtitle:K,width:U,size:F="md",tabs:I}){const[V,M,L]=d(),N=(0,f.of)(D),W=(0,f.of)(C,F),R=(0,f.of)(g.l),G=i.useRef(null),{dialogProps:w,titleProps:_}=(0,s.s)({},G),{overlayProps:Q}=(0,r.e)({isDismissable:!1,isOpen:!0,onClose:T},G);b();const ae=(0,n.jsx)("div",{className:N.content,children:P}),q=V??U??m[F].width,k=m[F].minWidth;return(0,n.jsx)(c.A,{open:!0,onClose:T,placement:"right",getContainer:".main-view",className:N.drawerContent,rootClassName:N.drawer,classNames:{wrapper:W},styles:{wrapper:{width:q,minWidth:k}},width:"",motion:{motionAppear:!0,motionName:N.drawerMotion},maskClassName:N.mask,maskClosable:O,maskMotion:{motionAppear:!0,motionName:N.maskMotion},children:(0,n.jsx)(l.n1,{restoreFocus:!0,contain:!0,autoFocus:!0,children:(0,n.jsxs)("div",{"aria-label":typeof B=="string"?o.Tp.components.Drawer.General.title(B):o.Tp.components.Drawer.General.title("no title"),className:N.container,...Q,...w,ref:G,children:[(0,n.jsx)("div",{className:(0,a.cx)(R.dragHandleVertical,N.resizer),onMouseDown:M,onTouchStart:L}),(0,n.jsxs)("div",{className:(0,a.cx)(N.header,!!I&&N.headerWithTabs),children:[(0,n.jsx)("div",{className:N.actions,children:(0,n.jsx)(u.K,{name:"times",variant:"secondary",onClick:T,"data-testid":o.Tp.components.Drawer.General.close,tooltip:(0,h.t)("grafana-ui.drawer.close","Close")})}),typeof B=="string"?(0,n.jsxs)(E.B,{direction:"column",children:[(0,n.jsx)(p.E,{element:"h3",truncate:!0,..._,children:B}),K&&(0,n.jsx)("div",{className:N.subtitle,"data-testid":o.Tp.components.Drawer.General.subtitle,children:K})]}):B,I&&(0,n.jsx)("div",{className:N.tabsWrapper,children:I})]}),S?(0,n.jsx)(v.P,{showScrollIndicators:!0,children:ae}):ae]})})})}function d(){const[P,T]=(0,i.useState)(void 0),O=(0,i.useCallback)(I=>{T(x(I.clientX))},[]),S=(0,i.useCallback)(I=>{const V=I.touches[0];T(x(V.clientX))},[]),B=(0,i.useCallback)(I=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",B)},[O]),K=(0,i.useCallback)(I=>{document.removeEventListener("touchmove",S),document.removeEventListener("touchend",K)},[S]);function U(I){I.stopPropagation(),I.preventDefault(),document.addEventListener("mousemove",O),document.addEventListener("mouseup",B)}function F(I){I.stopPropagation(),I.preventDefault(),document.addEventListener("touchmove",S),document.addEventListener("touchend",K)}return[P,U,F]}function x(P){let T=document.body.offsetWidth-(P-document.body.offsetLeft);return`${Math.min(T/document.body.clientWidth*100,98).toFixed(2)}vw`}function b(){(0,i.useEffect)(()=>{if(document.body)return document.body.classList.add("body-drawer-open"),()=>{document.body.classList.remove("body-drawer-open")}},[])}const D=P=>({container:(0,a.css)({display:"flex",flexDirection:"column",height:"100%",flex:"1 1 0",minHeight:"100%",position:"relative"}),drawer:(0,a.css)({top:0,".rc-drawer-content-wrapper":{boxShadow:P.shadows.z3}}),drawerContent:(0,a.css)({backgroundColor:`${P.colors.background.primary} !important`,display:"flex",overflow:"unset !important",flexDirection:"column"}),drawerMotion:(0,a.css)({"&-appear":{transform:"translateX(100%)",transition:"none !important","&-active":{transition:`${P.transitions.create("transform")} !important`,transform:"translateX(0)"}}}),mask:(0,a.css)({backgroundColor:"transparent !important",position:"fixed !important","&:before":{backgroundColor:`${P.components.overlay.background} !important`,bottom:0,content:'""',left:0,position:"fixed",right:0,top:0}}),maskMotion:(0,a.css)({"&-appear":{opacity:0,"&-active":{opacity:1,transition:P.transitions.create("opacity")}}}),header:(0,a.css)({label:"drawer-header",flexGrow:0,padding:P.spacing(2,2,3),borderBottom:`1px solid ${P.colors.border.weak}`}),headerWithTabs:(0,a.css)({borderBottom:"none"}),actions:(0,a.css)({position:"absolute",right:P.spacing(1),top:P.spacing(1)}),subtitle:(0,a.css)({label:"drawer-subtitle",color:P.colors.text.secondary}),content:(0,a.css)({padding:P.spacing(P.components.drawer?.padding??2),height:"100%",flexGrow:1,minHeight:0}),tabsWrapper:(0,a.css)({label:"drawer-tabs",paddingLeft:P.spacing(2),margin:P.spacing(1,-1,-3,-3)}),resizer:(0,a.css)({top:0,left:P.spacing(-1),bottom:0,position:"absolute",zIndex:P.zIndex.modal})});function C(P,T){return(0,a.css)({label:`drawer-content-wrapper-${T}`,overflow:"unset !important",[P.breakpoints.down("md")]:{width:`calc(100% - ${P.spacing(2)}) !important`,minWidth:"0 !important"}})}},8255:(ne,A,e)=>{"use strict";e.d(A,{Ih:()=>y,Mk:()=>r,Tj:()=>g,UJ:()=>f,Xw:()=>c,ct:()=>h,mZ:()=>m,nO:()=>o,sg:()=>p,xj:()=>i});var n=e(2543),a=e.n(n),s=e(84140);const l=4,r="rgba(0, 211, 255, 1)",c="rgba(11, 237, 50, 1)",i="rgba(237, 46, 24, 1)",o="rgba(150, 150, 150, 1)",h="rgba(247, 149, 32, 1)",f=.09,g=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function u(d){const x=(0,n.map)(d,E),b=(0,n.sortBy)(x,["h"]),D=(0,n.chunk)(b,l),C=(0,n.map)(D,T=>(0,n.sortBy)(T,"l")),P=(0,n.flattenDeep)((0,n.zip)(...C));return(0,n.map)(P,v)}function E(d){return(0,s.A)(d).toHsl()}function v(d){return(0,s.A)(d).toHexString()}function p(d){return(0,s.A)(d).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function m(d,x){const b=(0,s.A)(d),D=b.getBrightness();return b.getAlpha()<.3?x?"rgb(247, 248, 250)":"rgb(32, 34, 38)":D>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let y=u(g)},8285:(ne,A,e)=>{"use strict";e.d(A,{sw:()=>y,vm:()=>d,sf:()=>R,bR:()=>W,xp:()=>Z,Uv:()=>T,vL:()=>C,X0:()=>O,xz:()=>V,pk:()=>U,YQ:()=>I,O8:()=>M,ty:()=>Q,Sm:()=>B,bx:()=>K,h$:()=>_,wP:()=>ee,iL:()=>N,a7:()=>S,Cs:()=>D,un:()=>F,XA:()=>b,tk:()=>J,ME:()=>L,MZ:()=>ae,TN:()=>q,hg:()=>k});var n=e(48480),a=e(92745),s=e(43173),l=e(78282),r=e(45863),c=e(60379),i=e(98732),o=e(61291),h=e(36605),f=e(11534),g=e(7094),u=e(32540),E=e(37040),v=e(29700),p=e(35718);function m(te){return"isDashboardLayoutManager"in te}const y=8,d=12,x={LIBRARY_PANEL:"libraryPanel",COLLAPSED:"collapsed"};function b(te){return`panel-${te}`}function D(te){return parseInt(te.state.key.replace("panel-",""),10)}function C(te,se){if(!se)return null;const ie=P(te,se);if(ie)return ie;const ce=parseInt(se,10);return isNaN(ce)?null:P(te,b(ce))}function P(te,se){if(!se)return null;const ie=r.jh.findObject(te,ce=>ce.state.key===se?!0:(ce instanceof r.Eb,!1));if(ie){if(ie instanceof r.Eb)return ie;throw new Error(`Found panel with key ${se} but it was not a VizPanel`)}return null}function T(te,se){if(!se)return null;let ie=C(te,se);return!ie||!ie.state.key||!(ie instanceof r.Eb)?null:ie}function O(te,se){te.forEachChild(ie=>{ie.isActive&&(ie.forceRender(),O(ie,se))})}function S(te){const{value:se,text:ie,options:ce}=te.state;return te.hasAllValue()?{values:ce.map(re=>re.value),texts:ce.map(re=>re.label)}:{values:Array.isArray(se)?se:[se],texts:Array.isArray(ie)?ie:[ie]}}function B(te){const se=te.match(/(["'])(.*?)\1|\w+/g);if(!se)return i.Ez.query?.split(",")??[];const ie=new Set,ce=se.reduce((re,ue)=>{const X=ue.replace(/["']+/g,"");return X.startsWith("$__auto_interval_")||re.add(X),re},ie);return Array.from(ce)}function K(te){return Array.isArray(te)?te.join(","):""}function U(te,se){const ie=Array.isArray(te.current.value)?te.current.value[0]:te.current.value;return ie.startsWith("$__auto_interval_")||ie==="$__auto"?"$__auto":se.includes(ie)?ie:se[0]}function F(te){if(!te)return;const se=te.state.$data??te.parent?.state.$data;if(se instanceof r.dt)return se;if(se instanceof r.Es)return F(se)}function I(te){const se=te.getRoot();if(se instanceof f.H$)return se;throw new Error("SceneObject root is not a DashboardScene")}function V(te){return te instanceof r.Eb?te:te.parent?V(te.parent):null}function M(){const te=s.$.featureToggles.dashboardNewLayouts?v.r:"timeseries",se=(0,a.t)("dashboard.new-panel-title","New panel");return new r.Eb({title:se,pluginId:te,seriesLimit:s.$.panelSeriesLimit,titleItems:[new u.$({menu:new u.m({})})],hoverHeaderOffset:0,$behaviors:[],extendPanelContext:p.C,menu:new r.Lw({$behaviors:[E._i]}),headerActions:s.$.featureToggles.timeComparison?[new o.v({key:"time-compare",compareWith:void 0,compareOptions:[]})]:void 0,$data:new r.Es({$data:new r.dt({queries:[{refId:"A"}],datasource:(0,n.p$)((0,l.l)().getInstanceSettings(null)),$behaviors:[new h.L({})]}),transformations:[]})})}function L(te){return N(te)!==void 0}function N(te){const se=te.state.$behaviors?.find(ie=>ie instanceof g.u);if(se)return se}function W(te){const se=Math.ceil(te.getChildCount()/te.getMaxPerRow()),ie=Math.ceil(te.getChildCount()/se),ce=24/ie;return{h:te.state.itemHeight??10,w:ce,columnCount:ie}}function R(te){let se,ie;return te.isActive?se:(te.parent&&(ie=R(te.parent)),se=te.activate(),()=>{ie?.(),se()})}function G(te){let se,ie;return te.parent&&(ie=G(te.parent)),te.isActive?()=>{ie?.(),se?.()}:(se=te.activate(),()=>{ie?.(),se?.()})}const w=null;function _(te){let se=te.parent;for(;se;){if(m(se))return se;se=se.parent}throw new Error("Could not find layout manager for scene object")}function Q(te){return`grid-item-${te}`}function ae(te){return I(te)}function q(te){return ae(te).useState()}function k(te){const{title:se}=te.useState();return se?r.jh.interpolate(te,se,void 0,"text"):""}function ee(te){return I(te).state.layoutOrchestrator}function j(te){return x.LIBRARY_PANEL in te&&te.libraryPanel&&!!(te.libraryPanel?.uid&&te.libraryPanel?.name)||!1}function J(te){return te?.panels?te.panels.some(se=>j(se)?!0:x.COLLAPSED in se&&se.collapsed&&"panels"in se&&se.panels?se.panels.some(j):!1):!1}const Z=(0,c.h)("Dashboard")},8307:(ne,A,e)=>{"use strict";e.d(A,{B:()=>p,G:()=>m});var n=e(74848),a=e(96540),s=e(42941),l=e(16692),r=e(92745),c=e(6975),i=e(70327),o=e(77880),h=e(25149),f=e(78102);const g=({receiverName:y,decrypt:d,exportFormat:x,onClose:b})=>{const{currentData:D="",isFetching:C}=i.hK.useExportReceiverQuery({receiverName:y,decrypt:d,format:x}),P=`cp-${y}-${new Date().getTime()}`;return C?(0,n.jsx)(c._,{text:(0,r.t)("alerting.grafana-receiver-export-preview.text-loading","Loading....")}):(0,n.jsx)(o.J,{format:x,textDefinition:D,downloadFileName:P,onClose:b})},u=({onClose:y,receiverName:d,decrypt:x})=>{const[b,D]=(0,a.useState)("yaml");return(0,n.jsx)(h.m,{activeTab:b,onTabChange:D,onClose:y,formatProviders:Object.values(f.sl),children:(0,n.jsx)(g,{receiverName:d,decrypt:x,exportFormat:b,onClose:y})})},E=({decrypt:y,exportFormat:d,onClose:x})=>{const{currentData:b="",isFetching:D}=i.hK.useExportReceiversQuery({decrypt:y,format:d}),C=`contact-points-${new Date().getTime()}`;return D?(0,n.jsx)(c._,{text:(0,r.t)("alerting.grafana-receivers-export-preview.text-loading","Loading....")}):(0,n.jsx)(o.J,{format:d,textDefinition:b,downloadFileName:C,onClose:x})},v=({onClose:y,decrypt:d})=>{const[x,b]=(0,a.useState)("yaml");return(0,n.jsx)(h.m,{activeTab:x,onTabChange:b,onClose:y,formatProviders:Object.values(f.sl),children:(0,n.jsx)(E,{decrypt:d,exportFormat:x,onClose:y})})},p=Symbol("all contact points"),m=()=>{const[y,d]=(0,a.useState)(null),[x,b]=(0,s.A)(!1),[D,C]=(0,l.L7)(l.QI.DecryptSecrets),P=D&&C,T=(0,a.useCallback)(()=>{d(null),b(!1)},[b]),O=B=>{d(B),b(!0)};return[(0,a.useMemo)(()=>!y||!x?null:y===p?(0,n.jsx)(v,{decrypt:P,onClose:T}):(0,n.jsx)(u,{receiverName:y,decrypt:P,onClose:T}),[P,x,T,y]),O]}},8419:(ne,A,e)=>{"use strict";e.d(A,{p:()=>s});var n=e(32899),a=e(45229);function s(r){let c="";try{c=JSON.stringify(r,l(),2)}catch(i){i instanceof Error&&(i.toString().includes("RangeError")||i.toString().includes("allocation size overflow"))?a.A.emit(n.r1.alertError,[i.toString(),"Cannot display JSON, the object is too big."]):a.A.emit(n.r1.alertError,[i instanceof Error?i.toString():i])}return c}function l(){const r=new WeakSet;return(c,i)=>{if(c==="__dataContext"||c==="__sceneObject")return"Filtered out in JSON serialization";if(typeof i=="object"&&i!==null){if(r.has(i))return;r.add(i)}return i}}},8431:(ne,A,e)=>{"use strict";e.d(A,{L:()=>s,O:()=>a});var n=e(92745);const a=()=>[{from:"now-5m",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-5-mins","Last 5 minutes")},{from:"now-15m",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-15-mins","Last 15 minutes")},{from:"now-30m",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-30-mins","Last 30 minutes")},{from:"now-1h",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-1-hour","Last 1 hour")},{from:"now-3h",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-3-hours","Last 3 hours")},{from:"now-6h",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-6-hours","Last 6 hours")},{from:"now-12h",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-12-hours","Last 12 hours")},{from:"now-24h",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-24-hours","Last 24 hours")},{from:"now-2d",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-2-days","Last 2 days")},{from:"now-7d",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-7-days","Last 7 days")},{from:"now-30d",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-30-days","Last 30 days")},{from:"now-90d",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-90-days","Last 90 days")},{from:"now-6M",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-6-months","Last 6 months")},{from:"now-1y",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-1-year","Last 1 year")},{from:"now-2y",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-2-years","Last 2 years")},{from:"now-5y",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.last-5-years","Last 5 years")},{from:"now-1d/d",to:"now-1d/d",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.yesterday","Yesterday")},{from:"now-2d/d",to:"now-2d/d",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.day-before-yesterday","Day before yesterday")},{from:"now-7d/d",to:"now-7d/d",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-day-last-week","This day last week")},{from:"now-1w/w",to:"now-1w/w",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.previous-week","Previous week")},{from:"now-1M/M",to:"now-1M/M",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.previous-month","Previous month")},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.previous-fiscal-quarter","Previous fiscal quarter")},{from:"now-1y/y",to:"now-1y/y",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.previous-year","Previous year")},{from:"now-1y/fy",to:"now-1y/fy",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.previous-fiscal-year","Previous fiscal year")},{from:"now/d",to:"now/d",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.today","Today")},{from:"now/d",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.today-so-far","Today so far")},{from:"now/w",to:"now/w",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-week","This week")},{from:"now/w",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-week-so-far","This week so far")},{from:"now/M",to:"now/M",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-month","This month")},{from:"now/M",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-month-so-far","This month so far")},{from:"now/y",to:"now/y",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-year","This year")},{from:"now/y",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-year-so-far","This year so far")},{from:"now/fQ",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-fiscal-quarter-so-far","This fiscal quarter so far")},{from:"now/fQ",to:"now/fQ",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-fiscal-quarter","This fiscal quarter")},{from:"now/fy",to:"now",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-fiscal-year-so-far","This fiscal year so far")},{from:"now/fy",to:"now/fy",display:(0,n.t)("grafana-ui.date-time-pickers.quick-options.this-fiscal-year","This fiscal year")}],s=()=>[{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-january","January"),value:0},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-february","February"),value:1},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-march","March"),value:2},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-april","April"),value:3},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-may","May"),value:4},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-june","June"),value:5},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-july","July"),value:6},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-august","August"),value:7},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-september","September"),value:8},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-october","October"),value:9},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-november","November"),value:10},{label:(0,n.t)("grafana-ui.date-time-pickers.month-options.label-december","December"),value:11}]},8515:(ne,A,e)=>{"use strict";e.d(A,{$s:()=>c,EO:()=>r,YO:()=>l,wE:()=>s});var n=e(74848),a=e(96540);const s=a.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class l extends a.Component{constructor(o){super(o),this.showModal=(h,f)=>{this.setState({component:h,props:f})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:o.component||null,props:o.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return(0,n.jsx)(s.Provider,{value:this.state,children:this.props.children})}}const r=()=>(0,n.jsx)(s.Consumer,{children:({component:i,props:o})=>i?(0,n.jsx)(i,{...o}):null}),c=s.Consumer},8535:(ne,A,e)=>{"use strict";e.d(A,{Gu:()=>l,JD:()=>r,M_:()=>a,k3:()=>s});var n=e(74887);let a;function s(c){a=c}function l(){return!a||!a.getState?{templating:{...n.L1,lastKey:"key"}}:a.getState()}function r(c){if(!(!a||!a.getState))return a.dispatch(c)}},8642:(ne,A,e)=>{"use strict";e.d(A,{h:()=>s,m:()=>a});var n=e(42954),a=(l=>(l.Combine="combine",l.CalculateNewFields="calculateNewFields",l.CreateNewVisualization="createNewVisualization",l.Filter="filter",l.PerformSpatialOperations="performSpatialOperations",l.Reformat="reformat",l.ReorderAndRename="reorderAndRename",l))(a||{});const s=new n.O},8655:(ne,A,e)=>{"use strict";e.d(A,{R:()=>D});var n=e(74848),a=e(25229),s=e(51898),l=e(92745),r=e(43173),c=e(45863),i=e(30703),o=e(47931),h=e(34999),f=e(89640),g=e(37386),u=e(16780),E=e(63527),v=e(21285),p=e(71673),m=e(29216),y=e(58662),d=e(52043),x=e(23289),b=e(8285);class D extends c.Bs{constructor(O){super({...O,useLockedTime:O.useLockedTime??!0,useShortUrl:O.useShortUrl??!1,selectedTheme:O.selectedTheme??"current",shareUrl:"",imageUrl:"",isBuildUrlLoading:!1}),this.tabId=y.wr.link,this.buildUrl=async S=>{this.setState({isBuildUrlLoading:!0});const{panelRef:B,useLockedTime:K,useShortUrl:U,selectedTheme:F}=this.state,I=(0,b.YQ)(this),V=B?.resolve(),M={useAbsoluteTimeRange:K,theme:F,useShortUrl:U};let L=(0,p.VN)(I,M,V);U&&(L=await(0,p.fn)(L));const N=c.jh.getTimeRange(V??I),W=(0,p.$l)(M,N,V);let R=W;V&&(delete R.viewPanel,R.panelId=V.getPathId(),R["__feature.dashboardSceneSolo"]=!0);const G=(0,d.u)({uid:I.state.uid,currentQueryParams:window.location.search,updateQuery:{...W,...S,panelId:V?.getPathId()},absolute:!0,soloRoute:!0,render:!0,timeZone:P(N.getTimeZone())});this.setState({shareUrl:L,imageUrl:G,isBuildUrlLoading:!1})},this.getShareUrl=()=>this.state.shareUrl,this.onCopy=()=>{x.c.shareLinkCopied({currentTimeRange:this.state.useLockedTime,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl,shareResource:(0,y.hD)(this.state.panelRef)})},this.addActivationHandler(()=>{this.buildUrl()}),this.onToggleLockedTime=this.onToggleLockedTime.bind(this),this.onUrlShorten=this.onUrlShorten.bind(this),this.onThemeChange=this.onThemeChange.bind(this)}static{this.Component=C}getTabLabel(){return(0,l.t)("share-modal.tab-title.link","Link")}async onToggleLockedTime(){const O=!this.state.useLockedTime;this.setState({useLockedTime:O}),await this.buildUrl()}async onUrlShorten(){const O=!this.state.useShortUrl;this.setState({useShortUrl:O}),await this.buildUrl()}async onThemeChange(O){this.setState({selectedTheme:O}),await this.buildUrl()}}function C({model:T}){const O=T.useState(),{panelRef:S}=O,B=(0,b.YQ)(T),K=S?.resolve(),F=c.jh.getTimeRange(K??B).state.to==="now",{useLockedTime:I,useShortUrl:V,selectedTheme:M,shareUrl:L,imageUrl:N}=O,W=s.Tp.pages.SharePanelModal,R=!!B.state.uid,G=(0,l.t)("share-modal.link.time-range-label","Lock time range"),w=(0,l.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),_=(0,l.t)("share-modal.link.shorten-url","Shorten URL"),Q=(0,l.t)("share-modal.link.link-url","Link URL");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(l.x6,{i18nKey:"share-modal.link.info-text",children:"Create a direct link to this dashboard or panel, customized with the options below."})}),(0,n.jsxs)(u.n,{children:[(0,n.jsx)(g.D,{label:G,description:F?w:"",children:(0,n.jsx)(v.d,{id:"share-current-time-range",value:I,onChange:T.onToggleLockedTime})}),(0,n.jsx)(m.w,{selectedTheme:M,onChange:T.onThemeChange}),(0,n.jsx)(g.D,{label:_,children:(0,n.jsx)(v.d,{id:"share-shorten-url",value:V,onChange:T.onUrlShorten})}),(0,n.jsx)(g.D,{label:Q,children:(0,n.jsx)(E.p,{id:"link-url-input",value:L,readOnly:!0,addonAfter:(0,n.jsx)(o.b,{icon:"copy",variant:"primary",getText:T.getShareUrl,onClipboardCopy:T.onCopy,children:(0,n.jsx)(l.x6,{i18nKey:"share-modal.link.copy-link-button",children:"Copy"})})})})]}),K&&r.$.rendererAvailable&&(0,n.jsxs)(n.Fragment,{children:[R&&(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsxs)("a",{href:N,target:"_blank",rel:"noreferrer","aria-label":W.linkToRenderedImage,children:[(0,n.jsx)(i.I,{name:"camera"}),"\xA0",(0,n.jsx)(l.x6,{i18nKey:"share-modal.link.rendered-image",children:"Direct link rendered image"})]})}),!R&&(0,n.jsx)(h.F,{severity:"info",title:(0,l.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0,children:(0,n.jsx)(l.x6,{i18nKey:"share-modal.link.save-dashboard",children:"To render a panel image, you must save the dashboard first."})})]}),K&&!r.$.rendererAvailable&&(0,n.jsx)(h.F,{severity:"info",title:(0,l.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0,children:(0,n.jsxs)(l.x6,{i18nKey:"share-modal.link.render-instructions",children:["To render an image, you must install the"," ",(0,n.jsx)(f.Y,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0,children:"Grafana image renderer plugin"}),". Please contact your Grafana administrator to install the plugin."]})})]})}function P(T){const O="UTC"+encodeURIComponent((0,a.KQ)().format("Z"));if(T==="utc")return"UTC";if(T==="browser"){if(!window.Intl)return O;const B=window.Intl.DateTimeFormat().resolvedOptions();return B.timeZone?B.timeZone:O}return T}},8692:(ne,A,e)=>{"use strict";e.d(A,{C:()=>a,s:()=>n});const n=s=>s.status==="fulfilled";function a(s,l){return s in l}},8721:(ne,A,e)=>{"use strict";e.d(A,{Fd:()=>h,JI:()=>E,RC:()=>g,WO:()=>u,Yj:()=>o,fj:()=>p,g2:()=>m});var n=e(41119),a=e(95004),s=e(36638),l=e(57866),r=e(6684);function c(y){const{timeField:d}=(0,n.KR)(y[0]);if(d)return s.sJ.get(l.Ct.firstTimeField).get({});let x=[];for(const b of y[0].fields)b.type===a.PU.number&&x.push(b.name);for(let b=1;b<y.length;b++){const D=[];for(const C of y[0].fields)C.type===a.PU.number&&D.push(C.name);x=x.filter(C=>!D.includes(C))}return s.sJ.get(l.Ct.byName).get(x[0])}function i(y){return y.joinBy??c(y.frames)}function o(y,d){if(d>=0){let x=y.fields[d];x.type!==a.PU.string&&!m(x.values)&&(y=(0,n.ES)(y,d))}return y}function h(y){if(!y.frames?.length)return;const d=y.nullMode??(T=>{let O=T.config.custom?.spanNulls;return O===!0?g:O===-1?u:E});if(y.frames.length===1){let T=y.frames[0],O=T;const S=i(y);let B=O.fields.findIndex(K=>S(K,O,y.frames));if(y.keepOriginIndices&&(O={...T,fields:T.fields.map((K,U)=>{const F={...K},I={frameIndex:0,fieldIndex:U};return F.state?F.state.origin=I:F.state={origin:I},F})},B>0)){const K=O.fields[B],U=O.fields.filter((F,I)=>I!==B);U.unshift(K),O.fields=U,B=0}if(B>=0&&(O=o(O,B)),y.keep){let K=O.fields.filter((U,F)=>F===B||y.keep(U,O,y.frames));T!==O?O.fields=K:O={...T,fields:K}}return O}const x=[],b=[],D=[],C=i(y);for(let T=0;T<y.frames.length;T++){const O=y.frames[T];if(!O||!O.fields?.length)continue;const S=[g];let B,K=[];for(let F=0;F<O.fields.length;F++){const I=O.fields[F];if(I.state=I.state||{},!B&&C(I,O,y.frames))B=I;else{if(y.keep&&!y.keep(I,O,y.frames))continue;S.push(d(I));let V=I.labels??{},M=I.name;O.name&&(I.name===a.Bc?M=O.name:V.name==null&&(V={...V,name:O.name})),K.push({...I,name:M,labels:V})}y.keepOriginIndices&&(I.state.origin={frameIndex:T,fieldIndex:F})}if(!B)continue;D.length===0&&D.push(B),x.push(S);const U=[B.values];for(const F of K)U.push(F.values),D.push(F),y.keepDisplayNames||delete F.state?.displayName;b.push(U)}let P=[];return y.mode===r.W.outerTabular?P=f(b,!0):y.mode===r.W.inner?P=f(b):P=p(b,x,y.mode),{length:P[0]?P[0].length:0,fields:D.map((T,O)=>({...T,values:P[O]}))}}function f(y,d=!1){let x=y[0],b=x[0];for(let D=1;D<y.length;D++){let C=y[D],P=C[0],T={};for(let R=0;R<P.length;R++){let G=P[R],w=T[G];w==null&&(w=T[G]=[]),w.push(R)}let O=new Set,S=[],B=[],K=[],U=0;for(let R=0;R<b.length;R++){let G=b[R];if(G!=null){let w=T[G];w!=null?(K.push([R,w]),U+=w.length,d&&O.add(G)):d&&S.push(R)}else d&&S.push(R)}if(U+=S.length,d){for(let R in T)O.has(R)||B.push(...T[R]);U+=B.length}let F=Array.from({length:x.length+C.length-1},()=>`Array(${U})`).join(","),I=x.map((R,G)=>`joined[${G}][rowIdx] = ltable[${G}][lidx]`).join(";"),V=C.slice(1).map((R,G)=>`joined[${x.length+G}][rowIdx] = rtable[${G+1}][ridx]`).join(";"),M=x.map((R,G)=>`joined[${G}][rowIdx] = ${G===0?`rtable[${G}][ridx]`:"null"}`).join(";"),L=C.slice(1).map((R,G)=>`joined[${x.length+G}][rowIdx] = null`);x=new Function("matched","unmatchedLeft","unmatchedRight","ltable","rtable",`
      const joined = [${F}];

      let rowIdx = 0;

      for (let i = 0; i < matched.length; i++) {
        let [lidx, ridxs] = matched[i];

        for (let j = 0; j < ridxs.length; j++, rowIdx++) {
          let ridx = ridxs[j];
          ${I};
          ${V};
        }
      }

      for (let i = 0; i < unmatchedLeft.length; i++, rowIdx++) {
        let lidx = unmatchedLeft[i];
        ${I};
        ${L};
      }

      for (let i = 0; i < unmatchedRight.length; i++, rowIdx++) {
        let ridx = unmatchedRight[i];
        ${M};
        ${V};
      }

      return joined;
      `)(K,S,B,x,C),b=x[0]}return x}const g=0,u=1,E=2;function v(y,d,x){for(let b=0,D,C=-1;b<d.length;b++){let P=d[b];if(P>C){for(D=P-1;D>=0&&y[D]==null;)y[D--]=null;for(D=P+1;D<x&&y[D]==null;)y[C=D++]=null}}}function p(y,d,x=r.W.outer){let b=new Set;for(let T=0;T<y.length;T++){let S=y[T][0],B=S.length;for(let K=0;K<B;K++)b.add(S[K])}let D=[Array.from(b).sort((T,O)=>T-O)],C=D[0].length,P=new Map;for(let T=0;T<C;T++)P.set(D[0][T],T);for(let T=0;T<y.length;T++){let O=y[T],S=O[0];for(let B=1;B<O.length;B++){let K=O[B],U=Array(C).fill(void 0),F=d?d[T][B]:u,I=[];for(let V=0;V<K.length;V++){let M=K[V],L=P.get(S[V]);M===null?F!==g&&(U[L]=M,F===E&&I.push(L)):U[L]=M}v(U,I,C),D.push(U)}}return D}function m(y,d=50){const x=y.length;if(x<=1)return!0;let b=0,D=x-1;for(;b<=D&&y[b]==null;)b++;for(;D>=b&&y[D]==null;)D--;if(D<=b)return!0;const C=Math.max(1,Math.floor((D-b+1)/d));for(let P=y[b],T=b+C;T<=D;T+=C){const O=y[T];if(O!=null&&P!=null){if(O<=P)return!1;P=O}}return!0}},8735:(ne,A,e)=>{"use strict";e.d(A,{s:()=>h});var n=e(75505),a=e(81160),s=e(68143),l=e(43173),r=e(73427),c=e(85618);const i={create:f=>(0,s.AI)().post("/api/snapshots",f),getSnapshots:()=>(0,s.AI)().get("/api/dashboard/snapshots"),getSharingOptions:()=>(0,s.AI)().get("/api/snapshot/shared-options"),deleteSnapshot:f=>(0,s.AI)().delete("/api/snapshots/"+f),getSnapshot:async f=>{try{const g=await(0,s.AI)().get("/api/snapshots/"+f);return g.meta.canShare=!1,g}catch(g){throw g}}};class o{constructor(){this.apiVersion="dashboardsnapshot.grafana.app/v0alpha1",this.url=`/apis/${this.apiVersion}/namespaces/${(0,c.Ge)()}/dashboardsnapshots`}async create(g){return(0,s.AI)().post(this.url+"/create",g)}async getSnapshots(){return(await(0,s.AI)().get(this.url)).items.map(u=>({key:u.metadata.name,name:u.spec.title,external:u.spec.externalUrl!=null,externalUrl:u.spec.externalUrl}))}deleteSnapshot(g){return(0,s.AI)().delete(this.url+"/"+g)}async getSharingOptions(){return(0,s.AI)().get("/api/snapshot/shared-options")}async getSnapshot(g){const u={};if(!r.TP.isSignedIn){alert("TODO... need a barer token for anonymous use case");const E=`??? TODO, get anon token for snapshots (${r.TP.user?.name}) ???`;u.Authorization=`Bearer ${E}`}return(0,n.s)((0,s.AI)().fetch({url:this.url+"/"+g+"/body",method:"GET",headers:u}).pipe((0,a.T)(E=>({dashboard:E.data.dashboard,meta:{isSnapshot:!0,canSave:!1,canEdit:!1,canAdmin:!1,canStar:!1,canShare:!1,canDelete:!1,isFolder:!1,provisioned:!1}}))))}}function h(){return l.$.featureToggles.kubernetesSnapshots?new o:i}},8835:(ne,A,e)=>{"use strict";e.d(A,{j:()=>I,YL:()=>V,X2:()=>M,jo:()=>G,Kf:()=>N});var n=e(74848),a=e(92745),s=e(43173),l=e(45863),r=e(95943),c=e(33143),i=e(4974),o=e(1682),h=e(8285),f=e(93389),g=e(48492),u=e(25953),E=e(29425),v=e(22803),p=e(2543),m=e(96540),y=e(51898),d=e(63142),x=e(41654),b=e(37386),D=e(43243),C=e(63527),P=e(45861),T=e(21285),O=e(51156);function S(w){const _=[];return _.push(new O.v({id:"layout-auto-grid-column-options",title:(0,a.t)("dashboard-scene.get-edit-options.title.column-options","Column options"),skipField:!0,render:()=>(0,n.jsx)(B,{layoutManager:w})})),_.push(new O.v({id:"layout-auto-grid-row-height",title:(0,a.t)("dashboard-scene.get-edit-options.title.row-height-options","Row height options"),skipField:!0,render:()=>(0,n.jsx)(K,{layoutManager:w})})),_}function B({layoutManager:w}){const{maxColumnCount:_,columnWidth:Q}=w.useState(),[ae,q]=m.useState(null),[k,ee]=m.useState(!1),[j,J]=m.useState(!1),Z=(0,d.of)(U);(0,m.useEffect)(()=>{k&&ae&&(ae.focus(),ee(!1))},[k,ae]);const te=["narrow","standard","wide","custom"].map(le=>({label:(0,p.capitalize)(le),value:le})),se=typeof Q=="string",ie=se?(0,a.t)("dashboard.auto-grid.options.min-width","Min column width"):(0,a.t)("dashboard.auto-grid.options.min-width-custom","Custom min width"),ce=["1","2","3","4","5","6","7","8","9","10"].map(le=>({label:le,value:le})),re=le=>{const he=parseInt(le.target.value,10);if(isNaN(he)||he<50||he>2e3){J(!0);return}else j&&J(!1);w.onColumnWidthChanged(he)},ue=le=>{le.value==="custom"&&ee(!0),w.onColumnWidthChanged(le.value)},X=()=>{j&&J(!1),w.onColumnWidthChanged("standard")};return(0,n.jsxs)(x.B,{columnGap:2,rowGap:0,wrap:!0,children:[(0,n.jsx)(b.D,{label:ie,invalid:j,error:j?(0,a.t)("dashboard.auto-grid.options.min-width-error","A number between 50 and 2000 is required"):void 0,className:Z.wideSelector,children:se?(0,n.jsx)(D.G,{id:"min-column-width",options:te,value:Q,onChange:ue,"data-testid":y.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.minColumnWidth}):(0,n.jsx)(C.p,{id:"min-column-width",defaultValue:Q,onBlur:re,ref:le=>q(le),type:"number",min:50,max:2e3,invalid:j,"data-testid":y.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.customMinColumnWidth,suffix:(0,n.jsx)(P.$n,{size:"sm",fill:"text",icon:"times",tooltip:(0,a.t)("dashboard.auto-grid.options.min-width-custom-clear","Back to standard min column width"),onClick:X,"data-testid":y.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.clearCustomMinColumnWidth,children:(0,a.t)("dashboard.auto-grid.options.custom-min-width.clear","Clear")})})}),(0,n.jsx)(b.D,{label:(0,a.t)("dashboard.auto-grid.options.max-columns","Max columns"),className:Z.narrowSelector,children:(0,n.jsx)(D.G,{id:"max-columns",options:ce,value:String(_),onChange:({value:le})=>w.onMaxColumnCountChanged(parseInt(le,10)),width:6.5,"data-testid":y.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.maxColumns})})]})}function K({layoutManager:w}){const{rowHeight:_,fillScreen:Q}=w.useState(),[ae,q]=m.useState(null),[k,ee]=m.useState(!1),[j,J]=m.useState(!1),Z=(0,d.of)(U);(0,m.useEffect)(()=>{k&&ae&&(ae.focus(),ee(!1))},[k,ae]);const te=["short","standard","tall","custom"].map(X=>({label:(0,p.capitalize)(X),value:X})),se=typeof _=="string",ie=_?(0,a.t)("dashboard.auto-grid.options.min-height","Row height"):(0,a.t)("dashboard.auto-grid.options.min-height-custom","Custom row height"),ce=X=>{const le=parseInt(X.target.value,10);if(isNaN(le)||le<50||le>2e3){J(!0);return}else j&&J(!1);w.onRowHeightChanged(le)},re=X=>{X.value==="custom"&&ee(!0),w.onRowHeightChanged(X.value)},ue=()=>{j&&J(!1),w.onRowHeightChanged("standard")};return(0,n.jsxs)(x.B,{columnGap:2,rowGap:0,wrap:!0,children:[(0,n.jsx)(b.D,{label:ie,invalid:j,error:j?(0,a.t)("dashboard.auto-grid.options.min-height-error","A number between 50 and 2000 is required"):void 0,className:Z.wideSelector,children:se?(0,n.jsx)(D.G,{id:"min-height",options:te,value:_,onChange:re,"data-testid":y.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.rowHeight}):(0,n.jsx)(C.p,{id:"min-height",defaultValue:_,onBlur:ce,ref:X=>q(X),type:"number",min:50,max:2e3,invalid:j,"data-testid":y.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.customRowHeight,suffix:(0,n.jsx)(P.$n,{size:"sm",fill:"text",icon:"times",tooltip:(0,a.t)("dashboard.auto-grid.options.min-width-custom-clear","Back to standard min column width"),onClick:ue,"data-testid":y.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.clearCustomRowHeight,children:(0,a.t)("dashboard.auto-grid.options.custom-min-height.clear","Clear")})})}),(0,n.jsx)(b.D,{label:(0,a.t)("dashboard.auto-grid.options.height-fill","Fill screen"),className:Z.narrowSelector,children:(0,n.jsx)(T.K,{id:"fill-screen-toggle",value:Q,onChange:()=>w.onFillScreenChanged(!Q),"data-testid":y.Tp.components.PanelEditor.ElementEditPane.AutoGridLayout.fillScreen})})]})}const U=w=>({wideSelector:(0,v.css)({minWidth:w.spacing(14),flex:`1 1 ${w.spacing(14)}`}),narrowSelector:(0,v.css)({width:w.spacing(10)})}),F=3,I="standard",V="standard";class M extends l.Bs{constructor(_){const Q=_.maxColumnCount??F,ae=_.columnWidth??I,q=_.rowHeight??V,k=_.fillScreen??!1;super({..._,maxColumnCount:Q,columnWidth:ae,rowHeight:q,fillScreen:k,layout:_.layout??new E.o({isDraggable:!0,templateColumns:N(Q,ae),autoRows:G(q,k)})}),this.isDashboardLayoutManager=!0,this.descriptor=M.descriptor}static{this.Component=L}static{this.descriptor={get name(){return(0,a.t)("dashboard.auto-grid.name","Auto grid")},get description(){return(0,a.t)("dashboard.auto-grid.description","Panels resize to fit and form uniform grids")},id:"AutoGridLayout",createFromLayout:M.createFromLayout,isGridLayout:!0,icon:"apps"}}serialize(){return(0,i.K4)(this)}getOutlineChildren(){const _=[];for(const Q of this.state.layout.state.children)_.push(Q.state.body,...Q.state.repeatedPanels||[]);return _}addPanel(_){const Q=o.b4.getNextPanelId(this);_.setState({key:(0,h.XA)(Q)}),_.clearParent();const ae=new u.X({body:_});c.cc.addElement({addedObject:_,source:this,perform:()=>{this.state.layout.setState({children:[...this.state.layout.state.children,ae]})},undo:()=>{this.state.layout.setState({children:this.state.layout.state.children.filter(q=>q!==ae)})}})}pastePanel(){const _=(0,g.dp)((0,h.YQ)(this));s.$.featureToggles.dashboardNewLayouts?c.cc.edit({description:(0,a.t)("dashboard.edit-actions.paste-panel","Paste panel"),addedObject:_.state.body,source:this,perform:()=>{this.state.layout.setState({children:[...this.state.layout.state.children,_]})},undo:()=>{this.state.layout.setState({children:this.state.layout.state.children.filter(Q=>Q!==_)})}}):(this.state.layout.setState({children:[...this.state.layout.state.children,_]}),this.publishEvent(new c.jO(_),!0)),(0,g.G2)()}removePanel(_){const Q=_.parent;if(!(Q instanceof u.X))return;const ae=this.state.layout.state.children.indexOf(Q);c.cc.removeElement({removedObject:_,source:this,perform:()=>{this.state.layout.setState({children:this.state.layout.state.children.filter(q=>q!==Q)})},undo:()=>{this.state.layout.setState({children:[...this.state.layout.state.children.slice(0,ae),Q,...this.state.layout.state.children.slice(ae)]})}})}duplicate(){const _=this.state.layout.state.children,Q=[];if(_.length){let ae=o.b4.getNextPanelId(_[0].state.body);_.forEach(q=>{const k=q.clone({key:void 0,body:q.state.body.clone({key:(0,h.XA)(ae)})});Q.push(k),ae++})}return this.clone({key:void 0,layout:this.state.layout.clone({key:void 0,children:Q})})}duplicatePanel(_){const Q=_.parent;if(!(Q instanceof u.X)){console.error("Trying to duplicate a panel that is not inside a DashboardGridItem");return}const ae=o.b4.getNextPanelId(this),q=this.state.layout,k=_.clone({key:(0,h.XA)(ae)}),ee=Q.clone({key:(0,h.ty)(ae),body:k}),j=q.state.children.indexOf(Q),J=[...q.state.children];J.splice(j+1,0,ee),q.setState({children:J}),this.publishEvent(new c.jO(k),!0)}getVizPanels(){const _=[];for(const Q of this.state.layout.state.children)Q instanceof u.X&&_.push(Q.state.body);return _}editModeChanged(_){this.state.layout.setState({isDraggable:_}),(0,h.X0)(this.state.layout,!0)}cloneLayout(_,Q){return this.clone({})}getOptions(){return S(this)}onMaxColumnCountChanged(_){this.setState({maxColumnCount:_}),this.state.layout.setState({templateColumns:N(_,this.state.columnWidth)})}onColumnWidthChanged(_){_==="custom"&&(_=W(this.state.columnWidth)),this.setState({columnWidth:_}),this.state.layout.setState({templateColumns:N(this.state.maxColumnCount,this.state.columnWidth)})}onFillScreenChanged(_){this.setState({fillScreen:_}),this.state.layout.setState({autoRows:G(this.state.rowHeight,_)})}onRowHeightChanged(_){_==="custom"&&(_=R(this.state.rowHeight)),this.setState({rowHeight:_}),this.state.layout.setState({autoRows:G(_,this.state.fillScreen)})}static createEmpty(){return new M({})}static createFromLayout(_){const Q=_.getVizPanels(),ae=[];for(let k of Q){const ee=k.parent instanceof f.U?k.parent.state.variableName:void 0;ae.push(new u.X({body:k.clone(),variableName:ee}))}const q=M.createEmpty();return q.state.layout.setState({children:ae,isDraggable:(0,h.YQ)(_).state.isEditing}),q}}function L({model:w}){return(0,n.jsx)(w.state.layout.Component,{model:w.state.layout})}function N(w,_){return`repeat(auto-fit, minmax(min(max(100% / ${w} - ${r.dU}px, ${W(_)}px), 100%), 1fr))`}function W(w){if(typeof w=="number")return w;switch(w){case"narrow":return 192;case"wide":return 768;case"custom":case"standard":default:return 448}}function R(w){if(typeof w=="number")return w;switch(w){case"short":return 168;case"tall":return 512;case"custom":case"standard":default:return 320}}function G(w,_){const Q=R(w),ae=_?"auto":`${Q}px`;return`minmax(${Q}px, ${ae})`}},8921:(ne,A,e)=>{"use strict";e.d(A,{Ek:()=>r,To:()=>s,Zm:()=>a,ou:()=>l,qF:()=>n,qz:()=>c});const n="00000000-0000-0000-0000-000000000000",a="All",s="$__all",l="None",r="",c="var-"},9287:(ne,A,e)=>{"use strict";e.d(A,{vz:()=>r,x1:()=>l});var n=e(81160),a=e(95004),s=e(64761),l=(i=>(i.Drop="drop",i.FieldName="field",i.Label="label",i))(l||{});const r={id:s.F.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:i=>o=>o.pipe((0,n.T)(h=>!Array.isArray(h)||h.length<2?h:[c(h,i)]))};function c(i,o){let h=!0,f=i[0].length;const g=o.frameNameLabel??"frame";let u=[];for(const E of i){f!==E.length&&(h=!1,f=Math.max(f,E.length));for(const v of E.fields){const p={...v};p.state=void 0,E.name&&(o.frameNameMode==="drop"||(o.frameNameMode==="label"?(p.labels={...v.labels},p.labels[g]=E.name):!p.name||p.name===a.Bc?p.name=E.name:p.name=`${E.name} \xB7 ${v.name}`)),u.push(p)}}return h||(u=u.map(E=>{if(E.values.length===f)return E;const v=E.values.slice();return v.length=f,{...E,values:v}})),{fields:u,length:f}}},9368:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>o});var n=e(74848),a=e(22803),s=e(99887),l=e(63142),r=e(38055),c=e(56652);const i=["$",".",'"'];function o({input:m,delimiter:y=["{{","}}"]}){const d=(0,l.of)(p),[x,b]=y,D=new RegExp(`(?<before>.*?)(${x}(?<token>.*?)${b}|$)`,"gm"),C=m.split(`
`),P=[];return C.forEach((T,O)=>{Array.from(T.matchAll(D)).forEach((B,K)=>{const U=B.groups?.before,F=B.groups?.token?.trim();if(U&&P.push((0,n.jsx)("span",{children:U},`${O}-${K}-before`)),F){const I=v(F),V=I==="variable"?F:"",M=`${x} ${F} ${b}`;P.push((0,n.jsx)(f,{content:M,type:I,description:V},`${O}-${K}-token`))}}),P.push((0,n.jsx)("br",{},`${O}-newline`))}),(0,n.jsx)("span",{className:d.wrapper,children:P})}var h=(m=>(m.Variable="variable",m.Function="function",m.Keyword="keyword",m.Unknown="unknown",m))(h||{});function f({content:m,description:y,type:d}){const x=(0,l.of)(p),b=!d;return(0,n.jsx)(r.B,{placement:"top-start",disabled:b,content:(0,n.jsxs)("div",{className:x.hoverTokenItem,children:[(0,n.jsx)(s.E,{tabIndex:0,text:(0,n.jsx)(n.Fragment,{children:d}),color:"blue"})," ",y&&(0,n.jsx)("code",{children:y})]}),children:(0,n.jsx)("span",{children:(0,n.jsx)(s.E,{tabIndex:0,className:x.token,text:m,color:"blue"})})})}function g(m){return i.some(y=>m.startsWith(y))}function u(m){return c.keywords.some(y=>m.startsWith(y))}function E(m){return c.builtinFunctions.some(y=>m.startsWith(y))}function v(m){let y;return g(m)?y="variable":u(m)?y="keyword":E(m)?y="function":y="unknown",y}const p=m=>({wrapper:(0,a.css)({whiteSpace:"pre-wrap"}),token:(0,a.css)({cursor:"default",fontFamily:m.typography.fontFamilyMonospace}),popover:(0,a.css)({borderRadius:m.shape.radius.default,boxShadow:m.shadows.z3,background:m.colors.background.primary,border:`1px solid ${m.colors.border.medium}`,padding:m.spacing(1)}),hoverTokenItem:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"center",gap:m.spacing(1)})})},9453:(ne,A,e)=>{"use strict";e.d(A,{Fe:()=>g,OO:()=>b,PW:()=>d,SY:()=>D,aY:()=>o,dt:()=>C,jk:()=>v,kl:()=>f,lq:()=>h,nl:()=>P,wy:()=>r,xM:()=>x,yL:()=>m});var n=e(54092),a=e(43173),s=e(4745);function l(T,O="extension is not a link extension"){if(!isPluginExtensionLink(T))throw new Error(O)}function r(T,O){if(!f(T,O))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${T}/" (currently: "${O}"). Skipping the extension.`)}function c(T){if(!y(T))throw new Error('Invalid component extension, the "component" property needs to be a valid React component.')}function i(T){if(!v(T.configure))throw new Error(`Invalid extension "${T.title}". The "configure" property must be a function. Skipping the extension.`)}function o(T,O){for(const S of O)if(!p(T[S]))throw new Error(`Invalid extension "${T.title}". Property "${S}" must be a string and cannot be empty. Skipping the extension.`)}function h(T,O="The provided value is a Promise."){if(m(T))throw new Error(O)}function f(T,O){return!!(typeof O=="string"&&O.length>0&&O.startsWith(`/a/${T}/`))}function g({extensionPointId:T,pluginId:O,isInsidePlugin:S,isCoreGrafanaPlugin:B,log:K}){const U=T.startsWith(`${O}/`)||T.startsWith(`plugins/${O}/`);return S&&!B&&!U?(K.error(s.$n(O,T)),!1):!S&&!T.startsWith("grafana/")?(K.error(s.J9(T)),!1):!S&&!Object.values(n.SM).includes(T)?(K.error(s.hk),!1):!0}function u(T){return T.match(/.*\/v\d+$/)}function E(T){return Object.values(PluginExtensionPoints).map(O=>O.toString()).includes(T)}function v(T){return T?typeof T=="function":!0}function p(T){return typeof T=="string"&&T.length>0}function m(T){return T instanceof Promise||typeof T=="object"&&T!==null&&"then"in T&&"catch"in T}function y(T){const O=B=>typeof B=="object"&&B!==null&&"$$typeof"in B;return typeof T=="function"||(B=>O(B)&&B.$$typeof===Symbol.for("react.memo"))(T)}const d=(T,O)=>{const S=O.meta?.extensions?.extensionPoints;return!S||!S.some(B=>B.id===T)},x=(T,O)=>{const S=O.meta?.dependencies?.extensions?.exposedComponents;return!S||!S.includes(T)},b=(T,O,S)=>{const B="Could not register link extension. Reason:",K=a.$.apps[T],U=K?K.extensions.addedLinks.filter(({title:I})=>I===O.title):null;return K?!U||U.length===0?(S.error(`${B} ${s.iS}`),!0):(Array.isArray(O.targets)?O.targets:[O.targets]).every(I=>U.some(({targets:V})=>V.includes(I)))?(U.some(({description:I})=>I!==O.description)&&S.warning(s.cu),!1):(S.error(`${B} ${s.Bc}`),!0):(S.error(`${B} ${s.$$(T)}`),!0)},D=(T,O,S)=>{const B="Could not register function extension. Reason:",K=a.$.apps[T],U=K?K.extensions.addedFunctions.filter(({title:I})=>I===O.title):null;return K?!U||U.length===0?(S.error(`${B} ${s.E5}`),!0):(Array.isArray(O.targets)?O.targets:[O.targets]).every(I=>U.some(({targets:V})=>V.includes(I)))?(U.some(({description:I})=>I!==O.description)&&S.warning(s.cu),!1):(S.error(`${B} ${s.Bc}`),!0):(S.error(`${B} ${s.$$(T)}`),!0)},C=(T,O,S)=>{const B="Could not register component extension. Reason:",K=a.$.apps[T],U=K?K.extensions.addedComponents.filter(({title:I})=>I===O.title):null;return K?!U||U.length===0?(S.error(`${B} ${s.FL}`),!0):(Array.isArray(O.targets)?O.targets:[O.targets]).every(I=>U.some(({targets:V})=>V.includes(I)))?(U.some(({description:I})=>I!==O.description)&&S.warning(s.cu),!1):(S.error(`${B} ${s.Bc}`),!0):(S.error(`${B} ${s.$$(T)}`),!0)},P=(T,O,S)=>{const B="Could not register exposed component extension. Reason:",K=a.$.apps[T],U=K?K.extensions.exposedComponents.filter(({id:F})=>F===O.id):null;return K?!U||U.length===0?(S.error(`${B} ${s.z5}`),!0):U.some(({title:F})=>F!==O.title)?(S.error(`${B} ${s.sm}`),!0):(U.some(({description:F})=>F!==O.description)&&S.warning(s.cu),!1):(S.error(`${B} ${s.$$(T)}`),!0)}},9514:(ne,A,e)=>{"use strict";e.d(A,{X:()=>p});var n=e(74848),a=e(22803),s=e(96540),l=e(40996),r=e(92745),c=e(30703),i=e(45967),o=e(41654),h=e(72636),f=e(37386),g=e(63527),u=e(63142),E=e(74268),v=e(63895);const p=({onFilterChange:y,defaultQueryString:d})=>{const x=(0,u.of)(m),[b,D]=(0,s.useState)(d??"");(0,l.A)(()=>{(0,E.fH)(E.le.filterByLabel),y(b)},600,[b]);const C=(0,n.jsx)(c.I,{name:"search"});let P=!!(d&&d.length>=3);try{d?(0,v.S6)(d):P=!0}catch{P=!1}return(0,n.jsx)(f.D,{className:x.fixMargin,invalid:!P,error:P?null:"Query must use valid matcher syntax. See the examples in the help tooltip.",label:(0,n.jsx)(h.J,{children:(0,n.jsxs)(o.B,{gap:.5,alignItems:"center",children:[(0,n.jsx)("span",{children:(0,n.jsx)(r.x6,{i18nKey:"alerting.matcher-filter.search-by-label",children:"Search by label"})}),(0,n.jsx)(i.m,{content:(0,n.jsxs)("div",{children:[(0,n.jsx)(r.x6,{i18nKey:"alerting.matcher-filter.filter-alerts-using-label-querying-without-spaces",children:"Filter alerts using label querying without spaces, ex:"}),(0,n.jsx)("pre",{children:'{severity="critical", instance=~"cluster-us-.+"}'}),(0,n.jsx)(r.x6,{i18nKey:"alerting.matcher-filter.invalid-use-of-spaces",children:"Invalid use of spaces:"}),(0,n.jsx)("pre",{children:'{severity= "critical"}'}),(0,n.jsx)("pre",{children:'{severity ="critical"}'}),(0,n.jsx)(r.x6,{i18nKey:"alerting.matcher-filter.valid-use-of-spaces",children:"Valid use of spaces:"}),(0,n.jsx)("pre",{children:'{severity=" critical"}'}),(0,n.jsx)(r.x6,{i18nKey:"alerting.matcher-filter.filter-alerts-using-label-querying-without-braces",children:"Filter alerts using label querying without braces, ex:"}),(0,n.jsx)("pre",{children:'severity="critical", instance=~"cluster-us-.+"'})]}),children:(0,n.jsx)(c.I,{name:"info-circle",size:"sm"})})]})}),children:(0,n.jsx)(g.p,{placeholder:(0,r.t)("alerting.matcher-filter.search-query-input-placeholder-search","Search"),value:b,onChange:T=>D(T.currentTarget.value),"data-testid":"search-query-input",prefix:C,className:x.inputWidth})})},m=y=>({fixMargin:(0,a.css)({marginBottom:0}),inputWidth:(0,a.css)({width:340,flexGrow:0})})},9628:(ne,A,e)=>{"use strict";e.d(A,{gn:()=>s});function n(){const l=navigator.userAgent.indexOf("MSIE")>-1,r=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,c=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,i=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),o=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return l&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||r&&(o&&parseFloat(o[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||c&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(i&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function a(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function s(){return a()?"\u2318":"ctrl"}},9860:(ne,A,e)=>{"use strict";e.d(A,{w:()=>r});var n=e(74848),a=e(96540),s=e(87063),l=e(3260);function r({extensions:o,onSelect:h}){const{categorised:f,uncategorised:g}=i(o),u=g.length>0&&Object.keys(f).length>0;return(0,n.jsx)(s.W,{children:(0,n.jsxs)(n.Fragment,{children:[Object.keys(f).map(E=>(0,n.jsx)(s.W.Group,{label:(0,l.pL)(E,25),children:c(f[E],h)},E)),u&&(0,n.jsx)(s.W.Divider,{},"divider"),c(g,h)]})})}function c(o,h){return o.map(f=>(0,n.jsx)(s.W.Item,{ariaLabel:f.title,icon:f?.icon||"plug",label:(0,l.pL)(f.title,25),onClick:g=>{if(f.path)return h(f);f.onClick?.(g)}},f.id))}function i(o){return(0,a.useMemo)(()=>{const h=[],f={};for(const g of o){if(!g.category){h.push(g);continue}Array.isArray(f[g.category])||(f[g.category]=[]),f[g.category].push(g)}return{uncategorised:h,categorised:f}},[o])}},9931:(ne,A,e)=>{"use strict";e.d(A,{K:()=>n});const n="-- Dashboard --",a="dashboard"},10279:(ne,A,e)=>{"use strict";e.d(A,{L:()=>s});var n=e(95004),a=e(41119);class s{constructor(r){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=r.fields.map((c,i)=>({...c,index:i}));for(let c=0;c<r.fields.length;c++){const i=r.fields[c];if(i.type===n.PU.other){const o=(0,a.dF)(i);o&&(i.type=o)}this.fieldByType[i.type]||(this.fieldByType[i.type]=[]),this.fieldByType[i.type].push({...i,index:c}),this.fieldByName[i.name]?console.warn("Duplicate field names in DataFrame: ",i.name):this.fieldByName[i.name]={...i,index:c}}}getFields(r){if(!r)return[...this.fields];const c=this.fieldByType[r];return c?[...c]:[]}hasFieldOfType(r){const c=this.fieldByType[r];return c&&c.length>0}getFirstFieldOfType(r,c=!1){return this.fieldByType[r]?.find(h=>c||!h.config.custom?.hidden)}hasFieldNamed(r){return!!this.fieldByName[r]}hasFieldWithNameAndType(r,c){return!!this.fieldByName[r]&&this.fieldByType[c].filter(i=>i.name===r).length>0}getFieldByName(r){return this.fieldByName[r]}getFieldsByLabel(r,c){return Object.values(this.fieldByName).filter(i=>i.labels&&i.labels[r]===c)}}},10388:(ne,A,e)=>{"use strict";e.d(A,{Dd:()=>o,wi:()=>u});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(43173),c=e(30703),i=e(63142);let o=()=>[{target:"_blank",id:"documentation",text:(0,l.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,l.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,l.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function h(p){return{hasReleaseNotes:!0,isBeta:p.includes("-beta")}}function f(p){const{buildInfo:m,licenseInfo:y}=r.$,d=[],x=y.stateInfo?` (${y.stateInfo})`:"";if(p||d.push({target:"_blank",id:"license",text:`${m.edition}${x}`,url:y.licenseUrl}),m.hideVersion)return d;const{hasReleaseNotes:b}=h(m.version);return d.push({target:"_blank",id:"version",text:m.versionString,url:b?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),m.hasUpdate&&d.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),d}function g(p){o=p}const u=(0,s.memo)(({customLinks:p,hideEdition:m})=>{const y=(p||o()).concat(f(m)),d=(0,i.of)(v);return(0,n.jsx)("footer",{className:d.footer,children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("ul",{className:d.list,children:y.map((x,b)=>(0,n.jsx)("li",{className:d.listItem,children:(0,n.jsx)(E,{item:x})},b))})})})});u.displayName="Footer";function E({item:p}){const m=p.url?(0,n.jsx)("a",{href:p.url,target:p.target,rel:"noopener noreferrer",id:p.id,children:p.text}):p.text;return(0,n.jsxs)(n.Fragment,{children:[p.icon&&(0,n.jsx)(c.I,{name:p.icon})," ",m]})}const v=p=>({footer:(0,a.css)({...p.typography.bodySmall,color:p.colors.text.primary,display:"block",padding:p.spacing(2,0),position:"relative",width:"98%","a:hover":{color:p.colors.text.maxContrast,textDecoration:"underline"},[p.breakpoints.down("md")]:{display:"none"}}),list:(0,a.css)({listStyle:"none"}),listItem:(0,a.css)({display:"inline-block","&:after":{content:"' | '",padding:p.spacing(0,1)},"&:last-child:after":{content:"''",paddingLeft:0}})})},10427:(ne,A,e)=>{"use strict";e.d(A,{A:()=>s});var n=e(96540);function a({children:l,shouldWrap:r,wrap:c},i){return r?(0,n.cloneElement)(c(l)):l}const s=(0,n.forwardRef)(a)},10572:(ne,A,e)=>{"use strict";window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0;async function n(){await window.__grafana_boot_data_promise,await Promise.resolve().then(e.bind(e,73467))}n().catch(a=>{console.error("Error bootstrapping Grafana",a),window.__grafana_load_failed()})},10605:(ne,A,e)=>{"use strict";e.d(A,{v:()=>s});var n=e(2543),a=e.n(n);function s(l,r){return(0,n.isArray)(l)?l.map(c=>s(c,r)):(0,n.isPlainObject)(l)?Object.keys(l).sort().reduce((c,i)=>{const o=l[i];return o!=null&&(c[i]=s(o,r)),r&&(o===1/0||o===-1/0)&&(c[i]=0),c},{}):l}},10685:(ne,A,e)=>{"use strict";e.d(A,{r:()=>i});var n=e(74848),a=e(92745),s=e(45967),l=e(45861),r=e(41654),c=e(23289);const i=({hasMore:o,canCompare:h,getVersions:f,getDiff:g,isLastPage:u})=>(0,n.jsxs)(r.B,{children:[o&&(0,n.jsx)(l.$n,{type:"button",onClick:()=>{f(!0),c.c.showMoreVersionsClicked()},variant:"secondary",disabled:u,children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.versions-history-buttons.show-more-versions",children:"Show more versions"})}),(0,n.jsx)(s.m,{content:(0,a.t)("dashboard-scene.versions-history-buttons.content-select-two-versions-to-start-comparing","Select two versions to start comparing"),placement:"bottom",children:(0,n.jsx)(l.$n,{type:"button",disabled:!h,onClick:g,icon:"code-branch",children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.versions-history-buttons.compare-versions",children:"Compare versions"})})})]})},10928:(ne,A,e)=>{"use strict";e.d(A,{u:()=>u});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(63142),c=e(45861),i=e(63527),o=e(48542),h=e(76319);const f=({name:v,disabled:p,onRemove:m,autoColors:y=!0})=>{const d=(0,r.of)(g),x=(0,s.useMemo)(()=>{if(y){const{color:b,borderColor:D}=(0,o.MC)(v);return{backgroundColor:b,borderColor:D}}},[v,y]);return(0,n.jsxs)("li",{className:(0,a.cx)(d.itemStyle,!x&&d.defaultTagColor),style:x,children:[(0,n.jsx)("span",{className:d.nameStyle,children:v}),(0,n.jsx)(h.K,{name:"times",size:"lg",disabled:p,tooltip:(0,l.t)("grafana-ui.tags-input.remove","Remove tag: {{name}}",{name:v}),onClick:()=>m(v),className:d.buttonStyles})]})},g=v=>{const p=v.spacing.gridSize*3;return{itemStyle:(0,a.css)({display:"flex",gap:"3px",alignItems:"center",height:`${p}px`,lineHeight:`${p-2}px`,borderWidth:"1px",borderStyle:"solid",borderRadius:v.shape.radius.default,padding:`0 ${v.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:v.typography.size.sm,color:"#fff"}),defaultTagColor:(0,a.css)({backgroundColor:v.colors.background.secondary,borderColor:v.components.input.borderColor,color:v.colors.text.primary}),nameStyle:(0,a.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,a.css)({margin:0,"&:hover::before":{display:"none"}})}},u=(0,s.forwardRef)(({placeholder:v,tags:p=[],onChange:m,width:y,className:d,disabled:x,addOnBlur:b,invalid:D,id:C,autoColors:P=!0},T)=>{const O=v??(0,l.t)("grafana-ui.tags-input.placeholder-new-tag","New tag (enter key to add)"),[S,B]=(0,s.useState)(""),K=(0,r.of)(E),U=(0,r.$j)(),F=(0,s.useCallback)(N=>{B(N.target.value)},[]),I=N=>{m(p.filter(W=>W!==N))},V=N=>{N?.preventDefault(),p.includes(S)||m(p.concat(S)),B("")},M=()=>{b&&S&&V()},L=N=>{N.key==="Enter"&&S!==""&&V(N)};return(0,n.jsxs)("div",{className:(0,a.cx)(K.wrapper,d,y?(0,a.css)({width:U.spacing(y)}):""),children:[(0,n.jsx)(i.p,{ref:T,id:C,disabled:x,placeholder:O,onChange:F,value:S,onKeyDown:L,onBlur:M,invalid:D,suffix:(0,n.jsx)(c.$n,{fill:"text",className:K.addButtonStyle,onClick:V,size:"md",disabled:S.length<=0,children:(0,n.jsx)(l.x6,{i18nKey:"grafana-ui.tags-input.add",children:"Add"})})}),p?.length>0&&(0,n.jsx)("ul",{className:K.tags,children:p.map(N=>(0,n.jsx)(f,{name:N,onRemove:I,disabled:x,autoColors:P},N))})]})});u.displayName="TagsInput";const E=v=>({wrapper:(0,a.css)({minHeight:v.spacing(4),display:"flex",flexDirection:"column",gap:v.spacing(1),flexWrap:"wrap"}),tags:(0,a.css)({display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:v.spacing(.5)}),addButtonStyle:(0,a.css)({margin:`0 -${v.spacing(1)}`})})},10951:(ne,A,e)=>{"use strict";e.d(A,{Ez:()=>v,Oi:()=>E,Pm:()=>y,VW:()=>g});var n=e(2543),a=e.n(n),s=e(88483),l=e(44240),r=e(6276),c=e(29405),i=e(67770),o=e(28105),h=e(29043),f=e(37234);const g=[i.cF.LogsVolume,i.cF.LogsSample],u=d=>`grafana.explore.logs.enable${d}`,E=(d,x)=>{h.A.set(u(x),d?"true":"false")},v=()=>{let d={[i.cF.LogsVolume]:{enabled:!0},[i.cF.LogsSample]:{enabled:!1}};for(const x of g){if(x===i.cF.LogsSample)continue;h.A.get(u(x))==="false"&&(d[x]={enabled:!1})}return d},p=(d,x,b)=>new s.c(D=>d.subscribe(C=>{if(C.logsResult&&C.logsResult.rows&&C.logsResult.visibleRange&&C.logsResult.bucketSize!==void 0&&C.state===o.Gu.Done){const P=C.logsResult.bucketSize,T=x.map(B=>B.refId),O=(0,n.groupBy)(C.logsResult.rows,"dataFrame.refId");let S=[];T.forEach(B=>{if(O[B]?.length){const K=(0,f.J9)(O[B],P);S=[...S,...K];const U={logsVolumeType:i.Aj.Limited,absoluteRange:C.logsResult?.visibleRange,datasourceName:b,sourceQuery:x.find(F=>F.refId===B)};D.next({data:S.map(F=>{const I=F.meta?.custom||{};return{...F,meta:{custom:{...I,...U}}}}),state:C.state})}}),D.complete()}})),m=(d,x,b,D)=>{if(d===i.cF.LogsVolume)return p(x,b,D)},y=(d,x,b,D)=>{const P=d.map(({datasource:T,targets:O},S)=>{const B=(0,n.cloneDeep)(b);if(B.requestId=`${B.requestId||""}_${S}`,B.targets=O,(0,i.Nc)(T,x)){if(T.getDataProvider)return T.getDataProvider(x,B);if(T.getSupplementaryRequest){const K=T.getSupplementaryRequest(x,B);return K?x===i.cF.LogsVolume?(0,f.sg)(T,K,{targets:B.targets}):(0,f.Wr)(T,K):void 0}else return}else return m(x,D,O,T.name)}).filter(o.zz);if(P.length!==0)return P.length===1?P[0]:(0,l.h)(...P).pipe((0,c.S)((T,O)=>T.errors&&T.errors.length||O.state===o.Gu.NotStarted?T:O.state===o.Gu.Loading&&T.state===o.Gu.NotStarted?{...T,state:o.Gu.Loading}:O.state&&O.state!==o.Gu.Done?T:{...T,data:[...T.data,...O.data],state:o.Gu.Done},{data:[],state:o.Gu.NotStarted}),(0,r.d)())}},11018:(ne,A,e)=>{"use strict";e.d(A,{nO:()=>K,D3:()=>B,yo:()=>P,nV:()=>T,JH:()=>O,Lc:()=>C,mB:()=>b,eB:()=>D,uQ:()=>F,bO:()=>U,RW:()=>S});var n=e(65307),a=e(2543),s=e(25992),l=e(36490),r=e(74268),c=e(47938),i=e(91984),o=e(68143);function h(I){return(0,o.AI)().get("/api/annotations",{alertUID:I}).then(V=>V?.sort(f))}function f(I,V){const M=(W,R)=>W>R?-1:R>W?1:0,L=M(I.timeEnd,V.timeEnd);if(L)return L;const N=M(I.time,V.time);return N||M(I.id,V.id)}var g=e(55143),u=e(78467),E=e(77295),v=e(86017),p=e(52161),m=e(77256),y=e(36200),d=e(29609),x=e(15629);const b=(0,n.zD)("unifiedalerting/fetchPromRules",async({rulesSourceName:I,filter:V,limitAlerts:M,matcher:L,state:N,identifier:W},R)=>{const G=(0,r.U7)("unifiedalerting/fetchPromRules",u.sA,{dataSourceName:I,thunk:"unifiedalerting/fetchPromRules"});return await(0,y.$I)(G(I,V,M,L,N,W))}),D=(0,n.zD)("unifiedalerting/fetchRulerRules",async({rulesSourceName:I,filter:V},{dispatch:M,getState:L})=>{const{data:N}=await M(g.L.endpoints.discoverDsFeatures.initiate({rulesSourceName:I}));if(!N?.rulerConfig)return null;const W=(0,r.Ke)("unifiedalerting/fetchRulerRules",E.iy,{dataSourceName:I,thunk:"unifiedalerting/fetchRulerRules"});return await(0,y.$I)(W(N.rulerConfig,V))});function C({rulesSourceName:I,identifier:V,filter:M,limitAlerts:L,matcher:N,state:W}){return async R=>{const{data:G}=await R(g.L.endpoints.discoverDsFeatures.initiate({rulesSourceName:I}));await Promise.all([R(b({rulesSourceName:I,identifier:V,filter:M,limitAlerts:L,matcher:N,state:W})),G?.rulerConfig?R(D({rulesSourceName:I})):Promise.resolve()])}}function P(I=!1,V={}){return async(M,L)=>{const N=performance.now();await Promise.allSettled((0,p.gR)().map(async W=>{const{data:R}=await M(g.L.endpoints.discoverDsFeatures.initiate({rulesSourceName:W})),{promRules:G,rulerRules:w}=L().unifiedAlerting;if(!R)return;const _=I||!G[W]?.loading,Q=(I||!w[W]?.loading)&&!!R?.rulerConfig;await Promise.allSettled([_&&M(b({rulesSourceName:W,...V})),Q&&M(D({rulesSourceName:W}))])})),(0,s.l$)("unifiedalerting/fetchAllPromAndRulerRulesAction",{loadTimeMs:performance.now()-N})}}function T(I=!1,V={}){return async(M,L)=>{const{promRules:N}=L().unifiedAlerting;(0,p.gR)().map(W=>{(I||!N[W]?.loading)&&M(b({rulesSourceName:W,...V}))})}}const O=(0,n.zD)("unifiedalerting/fetchGrafanaAnnotations",I=>(0,y.$I)(h(I))),S=(0,n.zD)("unifiedalerting/updateAMConfig",({alertManagerSourceName:I,oldConfig:V,newConfig:M,successMessage:L,redirectPath:N,redirectSearch:W},R)=>(0,y.v5)((0,y.$I)((async()=>{const G=await R.dispatch(i.m.endpoints.getAlertmanagerConfiguration.initiate(I,{forceRefetch:!0})).unwrap(),w=(0,a.isEmpty)(G.alertmanager_config)&&(0,a.isEmpty)(G.template_files),_=JSON.stringify(G)!==JSON.stringify(V);if(!w&&_)throw new Error("A newer Alertmanager configuration is available. Please reload the page and try again to not overwrite recent changes.");if(await(0,c.vk)(I,(0,v.MZ)(M)),R.dispatch(i.m.util.invalidateTags(["AlertmanagerConfiguration","ContactPoint","ContactPointsStatus","Receiver"])),N){const Q=new URLSearchParams(W??"");l.Ny.push((0,m.nL)(N,I,Q))}})()),{successMessage:L})),B=(0,n.zD)("unifiedalerting/fetchAlertGroups",I=>(0,y.$I)((0,c.f4)(I))),K=(0,n.zD)("unifiedalerting/deleteAlertManagerConfig",async(I,V)=>(0,y.v5)((0,y.$I)((async()=>{await(0,c.nd)(I),await V.dispatch(i.m.util.invalidateTags(["AlertmanagerConfiguration"]))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),U=(0,n.zD)("unifiedalerting/testReceivers",({alertManagerSourceName:I,receivers:V,alert:M})=>(0,y.v5)((0,y.$I)((0,c.By)(I,V,M)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),F=(I,V)=>I.filter(M=>{const{forDuration:L}=(0,d.jg)(M,V),N=L?(0,x.P8)(L):null,W=(0,x.P8)(V);return N?N!==0&&N<W:!1})},11098:(ne,A,e)=>{"use strict";e.d(A,{A:()=>r});var n=e(74848),a=e(6975),s=e(31286);const r=({pageName:c=""})=>{const i=`Loading ${c}...`;return(0,n.jsx)(s.a,{display:"flex",alignItems:"center",direction:"column",justifyContent:"center",paddingTop:10,children:(0,n.jsx)(a._,{text:i})})}},11194:(ne,A,e)=>{"use strict";e.d(A,{cO:()=>s,gv:()=>a,zL:()=>r});var n=e(47184),a=(c=>(c.Timeseries="time_series",c.Table="table",c))(a||{});const s=[{label:"Time series",value:"time_series"},{label:"Table",value:"table"}],l=c=>({label:c,value:c}),r=n.z??l},11244:(ne,A,e)=>{"use strict";e.r(A),e.d(A,{ALERTING_COLOR:()=>Bn.xj,Alert:()=>ia.F,AlertingSettings:()=>Co,AsyncMultiSelect:()=>zs.Iv,AsyncSelect:()=>zs.DW,AsyncVirtualizedSelect:()=>zs.gZ,AutoSaveField:()=>Rt,AutoSizeInput:()=>wa.D,Avatar:()=>Yi.e,AxisPlacement:()=>Qn.vM,Badge:()=>wi.E,BarAlignment:()=>Qn.Nj,BarGauge:()=>Rn.xE,BarGaugeDisplayMode:()=>Qn.eX,BarValueVisibility:()=>Qn.yL,BigValue:()=>Ht.yV,BigValueColorMode:()=>Ht.yp,BigValueGraphMode:()=>Ht.$p,BigValueJustifyMode:()=>Ht.F8,BigValueTextMode:()=>Ht.SV,Box:()=>Mi.a,BracesPlugin:()=>Ec,BrowserLabel:()=>Ko.J,Button:()=>Te.$n,ButtonCascader:()=>Ke,ButtonGroup:()=>Pi.e,ButtonSelect:()=>Ga.f,CallToActionCard:()=>Ka.c,Card:()=>Ao.Z,CardContainer:()=>Hi.Q,Carousel:()=>De.F,Cascader:()=>Xe.v,CertificationKey:()=>ci.K,Checkbox:()=>Qr.S,ClearPlugin:()=>zl.v,ClickOutsideWrapper:()=>de.N,ClipboardButton:()=>_e.b,ClipboardPlugin:()=>Pc.s,CodeEditor:()=>Sn.B,CodeEditorSuggestionItemKind:()=>wn.q,CollapsableSection:()=>na.M,Collapse:()=>ta.S,ColorPicker:()=>je.sk,ColorPickerInput:()=>xe,Combobox:()=>Ki.G,CompletionItemKind:()=>La.I,ConfirmButton:()=>re.Z,ConfirmModal:()=>En.u,Container:()=>Er.mc,ContextMenu:()=>Sa.t,ControlledCollapse:()=>ta.a,Counter:()=>gt.p,CustomHeadersSettings:()=>Vr.P,CustomScrollbar:()=>Ce.E,DEFAULT_ANNOTATION_COLOR:()=>Bn.Mk,DOMUtil:()=>a,DataLinkButton:()=>fa.R,DataLinkInput:()=>Fr.l,DataLinksContextMenu:()=>yo.e,DataLinksInlineEditor:()=>ri.e,DataLinksInlineEditorBase:()=>vo.J,DataSourceHttpSettings:()=>oi.t,DatePicker:()=>mt.l,DatePickerWithInput:()=>Pt.l,DateTimePicker:()=>rt.K,DeleteButton:()=>ue.e,Divider:()=>jo.c,DrawStyle:()=>Qn.GR,Drawer:()=>wl._,Dropdown:()=>_i.m,ElementSelectionContext:()=>la._,EmptySearchResult:()=>Oe.Z,EmptyState:()=>We.p,ErrorBoundary:()=>gr.tH,ErrorBoundaryAlert:()=>gr.Xw,ErrorWithStack:()=>mr.D,EventBusPlugin:()=>Xr.K,EventsCanvas:()=>Wo.a,EventsWithValidation:()=>Ea.Pw,FIXED_UNIT:()=>No.s,FadeTransition:()=>di.A,FeatureBadge:()=>bs.y,FeatureInfoBox:()=>Po,Field:()=>$t.D,FieldArray:()=>Bi,FieldLinkList:()=>ca,FieldSet:()=>Ii.n,FieldValidationMessage:()=>Ri.P,FileDropzone:()=>Dr.gH,FileDropzoneDefaultChildren:()=>Dr.wI,FileListItem:()=>Io.I,FileUpload:()=>zi.e,FilterInput:()=>Vi.Z,FilterPill:()=>Qt.m,Form:()=>yi.l,FormattedValueDisplay:()=>Gs.i,FullWidthButtonContainer:()=>ns,Gauge:()=>sn._,GlobalStyles:()=>yc.k,Graph:()=>Go,GraphContextMenu:()=>wo,GraphContextMenuHeader:()=>Tr,GraphGradientMode:()=>Qn.on,GraphNG:()=>so,GraphSeriesToggler:()=>cl,GraphThresholdsStyleMode:()=>Qn.Ly,GraphWithLegend:()=>il,Grid:()=>Si.x,HorizontalGroup:()=>Er.Gy,Icon:()=>i.I,IconButton:()=>ce.K,IndentationPlugin:()=>Dc.T,InfoBox:()=>Eo.w,InlineField:()=>sr.I,InlineFieldRow:()=>xr.C,InlineFormLabel:()=>Ji.I,InlineLabel:()=>ji.c,InlineSegmentGroup:()=>Ai.e,InlineSwitch:()=>$r.K,InlineToast:()=>Se.r,Input:()=>rr.p,InputControl:()=>Ei.e,InteractiveTable:()=>Gt.j,JSONFormatter:()=>bo.B,JsonExplorer:()=>wr.O,KeyboardPlugin:()=>br.Z,Label:()=>vr.J,LegacyForms:()=>Mc,LegacyInputStatus:()=>l.O,Legend:()=>yr.s,LegendDisplayMode:()=>Qn.lm,LineInterpolation:()=>Qn.dx,Link:()=>Mo.N,LinkButton:()=>Te.z9,List:()=>Kt.B,LoadingBar:()=>Ue.G,LoadingPlaceholder:()=>Ye._,Marker:()=>Uo.p,Menu:()=>Es.W,MenuGroup:()=>as.r,MenuItem:()=>Ns.D,Modal:()=>Zn.a,ModalHeader:()=>da.r,ModalRoot:()=>ba.EO,ModalTabContent:()=>Xn,ModalTabsHeader:()=>Pa.J,ModalsContext:()=>ba.wE,ModalsController:()=>ba.$s,ModalsProvider:()=>ba.YO,MultiCombobox:()=>Fi.f,MultiSelect:()=>zs.KF,NO_DATA_COLOR:()=>Bn.nO,NewlinePlugin:()=>Gl.O,NodeGraphDataFrameFieldNames:()=>vs,OK_COLOR:()=>Bn.Xw,PENDING_COLOR:()=>Bn.ct,PageToolbar:()=>oa.d,Pagination:()=>Bt.d,PanelChrome:()=>jt.NR,PanelChromeLoadingIndicator:()=>tn.I,PanelContainer:()=>nl._,PanelContextProvider:()=>an.XF,PanelContextRoot:()=>an.e4,PlotLegend:()=>Yr.$,PluginSignatureBadge:()=>kr.B,PointVisibility:()=>Qn.yL,Popover:()=>le.A,PopoverController:()=>X.I,Portal:()=>fe.ZL,PortalContainer:()=>fe.qB,QueryField:()=>vn.X,REGION_FILL_ALPHA:()=>Bn.UJ,RadioButtonDot:()=>Pr.J,RadioButtonGroup:()=>Oo.z,RadioButtonList:()=>ja.a,RangeSlider:()=>To.F,ReactMonacoEditor:()=>mn.m,ReactUtils:()=>ie,RefreshPicker:()=>Le.cC,RelativeTimeRangePicker:()=>Gi.N,RenderUserContentAsHTML:()=>Vt.I,RunnerPlugin:()=>Hl.U,SCHEMA:()=>Ia.yx,ScaleDirection:()=>Qn.ON,ScaleDistribution:()=>Qn.L4,ScaleOrientation:()=>Qn.Lt,ScrollContainer:()=>x.P,SearchFunctionType:()=>Va.T,SecretInput:()=>$i.L4,SecretTextArea:()=>So.lp,SecureSocksProxySettings:()=>ii.Y,Segment:()=>hi.Y,SegmentAsync:()=>fi.s,SegmentInput:()=>Ks.o,SegmentSection:()=>pi.L,SegmentSelect:()=>Cs.a,Select:()=>zs.l6,SelectContainer:()=>zs.KA,SelectMenuOptions:()=>Ui.o5,SelectionShortcutsPlugin:()=>bc.l,SeriesColorPicker:()=>je.Dp,SeriesColorPickerPopover:()=>Pe.o,SeriesColorPickerPopoverWithTheme:()=>Pe.t,SeriesIcon:()=>xo.p,SeriesTable:()=>An.o,SeriesTableRow:()=>An.g,SeriesVisibilityChangeBehavior:()=>Mn.K,SeriesVisibilityChangeMode:()=>tl.B,SetInterval:()=>Na.u,SlatePrism:()=>Cc.D,SlideOutTransition:()=>ui.n,Slider:()=>Gr,Space:()=>_r.$,Sparkline:()=>dn.O,Spinner:()=>zr.y,Stack:()=>Oi.B,StackingMode:()=>Qn.gs,StatsPicker:()=>Be.S,SuggestionsPlugin:()=>Tc.Pz,Switch:()=>$r.d,TLSAuthSettings:()=>li.j,Tab:()=>Ot.o,TabContent:()=>Ft.J,TabbedContainer:()=>Ae.q,Table:()=>ya.X,TableCellDisplayMode:()=>Qn.ob,TableCellInspector:()=>Dt.s,TableCellInspectorMode:()=>Dt.B,TableInputCSV:()=>nn,TabsBar:()=>Ut.U,Tag:()=>Nt.v,TagList:()=>Yt.L,TagsInput:()=>en.u,Text:()=>Fs.E,TextArea:()=>Zt.f,TextLink:()=>Hr.Y,ThemeContext:()=>d.D,TimeOfDayPicker:()=>at.R,TimePickerTooltip:()=>Ge.xS,TimeRangeInput:()=>Ro.b,TimeRangeLabel:()=>qe.f,TimeRangePicker:()=>Ge.$6,TimeRangeProvider:()=>Ze.A,TimeSeries:()=>nt,TimeZonePicker:()=>ht.U,ToggleAllState:()=>Ni.X,Toggletip:()=>he.G,ToolbarButton:()=>Di.I,ToolbarButtonRow:()=>bi.U,Tooltip:()=>C.m,TooltipDisplayMode:()=>Qn.$N,TooltipPlugin:()=>Hn,TooltipPlugin2:()=>el.xl,UPLOT_AXIS_FONT_SIZE:()=>qi.pi,UPlotChart:()=>Bo.Z,UPlotConfigBuilder:()=>Ps.e,UnitPicker:()=>Fe.p,UserIcon:()=>or.n,UsersIndicator:()=>Qi,ValuePicker:()=>Ci.i,VariablesInputModal:()=>al.b,VerticalGroup:()=>Er.gW,VerticalTab:()=>Ct,VirtualizedSelect:()=>zs.ip,VizLayout:()=>Pn.KU,VizLegend:()=>Un.t,VizLegendListItem:()=>aa.M,VizRepeater:()=>Fa.S,VizTooltip:()=>Yn,VizTooltipContainer:()=>rn.o,WeekStartPicker:()=>Et.l6,WithContextMenu:()=>$s.n,XYCanvas:()=>Jr._,ZoomPlugin:()=>qt,attachDebugger:()=>_s.h,buildScaleKey:()=>ao,calculateFontSize:()=>_a.Vr,clearButtonStyles:()=>Te.my,colors:()=>Bn.Tj,commonOptionsBuilder:()=>n,convertOldAngularValueMapping:()=>Ya.I1,createLogger:()=>ga.h,createPointerDistance:()=>Qa.b,defaultIntervals:()=>Le.cb,fieldMatchersUI:()=>Ti.g,fuzzyMatch:()=>Ar.I,getAvailableIcons:()=>sa.GO,getCanvasContext:()=>_a.Yc,getCardStyles:()=>Ao.H,getCellLinks:()=>lo.k,getDragStyles:()=>Xi.l,getFieldTypeIcon:()=>sa.SS,getFieldTypeIconName:()=>sa.lV,getGraphFieldOptions:()=>Lo.P,getInputStyles:()=>rr.n,getPortalContainer:()=>fe.gF,getScrollbarWidth:()=>Rr,getSelectStyles:()=>Wi.J,getTagColor:()=>os.yC,getTagColorIndexFromName:()=>os.JF,getTagColorsFromName:()=>os.MC,getTextColorForAlphaBackground:()=>Bn.mZ,getTextColorForBackground:()=>Bn.sg,getTheme:()=>$l,getWeekStart:()=>Et.rL,graphFieldOptions:()=>Lo.t,graphTickFormatter:()=>Zr,graphTimeFormat:()=>Mr,hasValidationEvent:()=>Ea.K,isIconSize:()=>sa.rJ,isWeekStart:()=>Et.rE,linkModelToContextMenuItems:()=>ua.J,logOptions:()=>ml,makeFragment:()=>Ia.dF,makeValue:()=>Ia.mO,measureText:()=>_a.kD,mockTheme:()=>vc,mockThemeContext:()=>S.fq,preparePlotFrame:()=>gl,regexValidation:()=>Ea.RP,resetSelectStyles:()=>D.A,sharedInputStyle:()=>xi.Xb,sharedSingleStatMigrationHandler:()=>Ya._$,sharedSingleStatPanelChangedHandler:()=>Ya.gl,sortedColors:()=>Bn.Ih,styleMixins:()=>Z,stylesFactory:()=>B.N,toIconName:()=>pa.Uo,useElementSelection:()=>la.y,useForceUpdate:()=>is.C,useGraphNGContext:()=>bt,usePanelContext:()=>an.d2,usePointerDistance:()=>Qa.C,useSplitter:()=>Zi.h,useStyles:()=>S.IS,useStyles2:()=>S.of,useTheme:()=>S.DP,useTheme2:()=>S.$j,validate:()=>Ea.tf,variableSuggestionToCodeEditorSuggestion:()=>Ln.O,withErrorBoundary:()=>gr.Xc,withTheme:()=>S.SL,withTheme2:()=>S.cV});var n={};e.r(n),e.d(n,{ScaleDistributionEditor:()=>Q.W1,StackingEditor:()=>j.m,addAxisConfig:()=>Q.rg,addAxisPlacement:()=>Q.Wq,addAxisWidth:()=>Q.T4,addHideFrom:()=>ae.e,addLegendOptions:()=>q.H,addStackingConfig:()=>j.I,addTextSizeOptions:()=>ee.I,addTimeCompareOption:()=>J.H,addTooltipOptions:()=>k.D});var a={};e.r(a),e.d(a,{getNextCharacter:()=>se,getPreviousCousin:()=>te});var s=e(94959),l=e(32581),r=e(74848),c=e(15777),i=e(30703);const o=ot=>{const lt=ot.selectProps.menuIsOpen;return(0,r.jsx)(c.c.IndicatorsContainer,{...ot,children:(0,r.jsx)(i.I,{name:lt?"angle-up":"angle-down",style:{marginTop:"7px"}})})},h=o,f=ot=>{const{children:lt}=ot;return(0,r.jsx)(c.c.NoOptionsMessage,{...ot,children:(0,r.jsx)("div",{className:"gf-form-select-box__desc-option",children:(0,r.jsx)("div",{className:"gf-form-select-box__desc-option__body",children:lt})})})},g=f;var u=e(46942),E=e.n(u),v=e(96540),p=e(46005),m=e(8539),y=e(66963),d=e(35555),x=e(92807),b=e(89534),D=e(57830),C=e(45967);const P=ot=>{const{children:lt,isSelected:xt,data:It}=ot;return(0,r.jsx)(c.c.Option,{...ot,children:(0,r.jsxs)("div",{className:"gf-form-select-box__desc-option",children:[It.imgUrl&&(0,r.jsx)("img",{className:"gf-form-select-box__desc-option__img",src:It.imgUrl,alt:""}),(0,r.jsxs)("div",{className:"gf-form-select-box__desc-option__body",children:[(0,r.jsx)("div",{children:lt}),It.description&&(0,r.jsx)("div",{className:"gf-form-select-box__desc-option__desc",children:It.description})]}),xt&&(0,r.jsx)(i.I,{name:"check","aria-hidden":"true"})]})})},T=null;var O=e(22803),S=e(63142),B=e(65240);const K=(0,B.N)(ot=>({header:(0,O.css)({display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${ot.colors.background.secondary}`,"&:hover":{color:ot.colors.text.maxContrast}}),label:(0,O.css)({flexGrow:1}),icon:(0,O.css)({paddingRight:"2px"})}));class U extends v.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(lt=>({expanded:!lt.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:lt}=this.props.selectProps.value;lt&&this.props.options.some(xt=>xt.value===lt)&&this.setState({expanded:!0})}}componentDidUpdate(lt){lt.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:lt,label:xt,theme:It}=this.props,{expanded:At}=this.state,Tt=K(It);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:Tt.header,onClick:this.onToggleChildren,role:"presentation",children:[(0,r.jsx)("span",{className:Tt.label,children:xt}),(0,r.jsx)(i.I,{className:Tt.icon,name:At?"angle-up":"angle-down"})]}),At&&lt]})}}const F=(0,S.cV)(U),I=ot=>(0,r.jsx)(c.c.MenuList,{...ot,children:(0,r.jsx)(x.P,{showScrollIndicators:!0,overflowX:"hidden",maxHeight:"inherit",children:ot.children})});class V extends v.PureComponent{static{this.contextType=d.D}static{this.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:P,SingleValue:b.K,IndicatorsContainer:h,MenuList:I,Group:F}}}render(){const{defaultValue:lt,getOptionLabel:xt,getOptionValue:It,onChange:At,options:Tt,placeholder:kt,width:Jt,value:on,className:_t,isDisabled:hn,isLoading:zn,isSearchable:On,isClearable:Nn,backspaceRemovesValue:va,isMulti:Ba,autoFocus:Cn,openMenuOnFocus:ds,onBlur:Ja,maxMenuHeight:Ha,noOptionsMessage:yn,isOpen:us,components:Vn,tooltipContent:bn,tabSelectsValue:ma,onCloseMenu:Fn,onOpenMenu:Ra,allowCustomValue:Ca,formatCreateLabel:Aa,"aria-label":Ta}=this.props;let ln="";Jt&&(ln="width-"+Jt);let ka=p.Ay;const ys={};Ca&&(ka=y.A,ys.formatCreateLabel=Aa??(Os=>Os));const es=E()("gf-form-input","gf-form-input--form-dropdown",ln,_t),js={...V.defaultProps.components,...Vn};return(0,r.jsx)(L,{onCloseMenu:Fn,onOpenMenu:Ra,tooltipContent:bn,isOpen:us,children:(Os,Zo)=>(0,r.jsx)(ka,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:es,components:js,defaultValue:lt,value:on,getOptionLabel:xt,getOptionValue:It,menuShouldScrollIntoView:!1,isSearchable:On,onChange:At,options:Tt,placeholder:kt||"Choose",styles:(0,D.A)(this.context),isDisabled:hn,isLoading:zn,isClearable:Nn,autoFocus:Cn,onBlur:Ja,openMenuOnFocus:ds,maxMenuHeight:Ha,noOptionsMessage:yn,isMulti:Ba,backspaceRemovesValue:va,menuIsOpen:us,onMenuOpen:Os,onMenuClose:Zo,tabSelectsValue:ma,"aria-label":Ta,...ys})})}}class M extends v.PureComponent{static{this.contextType=d.D}static{this.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300}}render(){const{defaultValue:lt,getOptionLabel:xt,getOptionValue:It,onChange:At,placeholder:Tt,width:kt,value:Jt,className:on,loadOptions:_t,defaultOptions:hn,isLoading:zn,loadingMessage:On,noOptionsMessage:Nn,isDisabled:va,isSearchable:Ba,isClearable:Cn,backspaceRemovesValue:ds,autoFocus:Ja,onBlur:Ha,openMenuOnFocus:yn,maxMenuHeight:us,isMulti:Vn,tooltipContent:bn,onCloseMenu:ma,onOpenMenu:Fn,isOpen:Ra}=this.props;let Ca="";kt&&(Ca="width-"+kt);const Aa=E()("gf-form-input","gf-form-input--form-dropdown",Ca,on);return(0,r.jsx)(L,{onCloseMenu:ma,onOpenMenu:Fn,tooltipContent:bn,isOpen:Ra,children:(Ta,ln)=>(0,r.jsx)(m.A,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Aa,components:{Option:P,SingleValue:b.K,IndicatorsContainer:h,NoOptionsMessage:g},defaultValue:lt,value:Jt,getOptionLabel:xt,getOptionValue:It,menuShouldScrollIntoView:!1,onChange:At,loadOptions:_t,isLoading:zn,defaultOptions:hn,placeholder:Tt||"Choose",styles:(0,D.A)(this.context),loadingMessage:On,noOptionsMessage:Nn,isDisabled:va,isSearchable:Ba,isClearable:Cn,autoFocus:Ja,onBlur:Ha,openMenuOnFocus:yn,maxMenuHeight:us,isMulti:Vn,backspaceRemovesValue:ds})})}}class L extends v.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:lt}=this.props;lt&&lt(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:lt}=this.props;lt&&lt(),this.setState({isOpenInternal:!1})}}render(){const{children:lt,isOpen:xt,tooltipContent:It}=this.props,{isOpenInternal:At}=this.state;let Tt;return(At||xt)&&(Tt=!1),It?(0,r.jsx)(C.m,{show:Tt,content:It,placement:"bottom",children:(0,r.jsx)("div",{children:lt(this.onOpenMenu,this.onCloseMenu)})}):(0,r.jsx)("div",{children:lt(this.onOpenMenu,this.onCloseMenu)})}}const N=null;var W=e(2543);class R extends v.PureComponent{constructor(){super(...arguments),this.state={id:(0,W.uniqueId)()},this.internalOnChange=lt=>{lt.stopPropagation(),this.props.onChange(lt)}}render(){const{labelClass:lt="",switchClass:xt="",label:It,checked:At,disabled:Tt,transparent:kt,className:Jt,theme:on,tooltip:_t,tooltipPlacement:hn}=this.props,zn=w(on),On=this.state.id,Nn=`gf-form-label ${lt} ${kt?"gf-form-label--transparent":""} pointer`,va=(0,O.cx)(zn.switch,xt,{[zn.switchTransparent]:kt});return(0,r.jsx)("div",{className:zn.container,children:(0,r.jsxs)("label",{htmlFor:On,className:(0,O.cx)("gf-form",zn.labelContainer,Jt),children:[It&&(0,r.jsxs)("div",{className:Nn,children:[It,_t&&(0,r.jsx)(C.m,{placement:hn||"auto",content:_t,theme:"info",children:(0,r.jsx)(i.I,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})]}),(0,r.jsxs)("div",{className:va,children:[(0,r.jsx)("input",{disabled:Tt,id:On,type:"checkbox",checked:At,onChange:this.internalOnChange}),(0,r.jsx)("span",{className:zn.slider})]})]})})}}const G=(0,S.cV)(R),w=ot=>{const lt=(0,O.css)({background:ot.v1.palette.gray1,borderRadius:ot.shape.radius.pill,height:"16px",width:"32px",display:"block",position:"relative","&::before":{position:"absolute",content:"''",height:"12px",width:"12px",left:"2px",top:"2px",background:ot.components.input.background,transition:"0.4s",borderRadius:ot.shape.radius.circle,boxShadow:ot.shadows.z1}});return{container:(0,O.css)({display:"flex",flexShrink:0}),labelContainer:(0,O.css)({display:"flex",cursor:"pointer",marginRight:ot.spacing(.5)}),switch:(0,O.css)({display:"flex",position:"relative",width:"56px",height:ot.spacing(4),background:ot.components.input.background,border:`1px solid ${ot.components.input.borderColor}`,borderRadius:ot.shape.radius.default,alignItems:"center",justifyContent:"center",input:{opacity:0,width:0,height:0},[`input:checked + .${lt}`]:{background:ot.colors.primary.main},[`input:checked + .${lt}::before`]:{transform:"translateX(16px)"}}),switchTransparent:(0,O.css)({background:"transparent",border:0,width:"40px"}),slider:lt}};var _=e(23659),Q=e(44017),ae=e(45013),q=e(41069),k=e(79277),ee=e(14099),j=e(81082),J=e(13148),Z=e(35484);typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(ot){const lt=(this.document||this.ownerDocument).querySelectorAll(ot);let xt=this,It;do{for(It=lt.length;--It>=0&&lt.item(It)!==xt;);xt=xt.parentElement}while(It<0&&xt);return xt});function te(ot,lt){let xt=ot.parentElement?.previousSibling,It;for(;xt;){if(xt instanceof HTMLElement&&(It=xt.querySelector(lt)),It)return It;xt=xt.previousSibling}}function se(ot){const lt=(ot||window).getSelection();if(!lt||!lt.anchorNode)return null;const xt=lt.getRangeAt(0),It=lt.anchorNode.textContent,At=xt.startOffset;return It.slice(At,At+1)}var ie=e(44019),ce=e(76319),re=e(7075),ue=e(44458),X=e(43533),le=e(2381),he=e(59243),fe=e(15245),Ce=e(52718),Ae=e(86848),_e=e(47931),Xe=e(64913),De=e(56873),Me=e(3163),Te=e(45861),$e=e(78121),Re=e(21133);const Ke=ot=>{const{onChange:lt,className:xt,loadData:It,icon:At,buttonProps:Tt,hideDownIcon:kt,variant:Jt,disabled:on,..._t}=ot,hn=(0,S.of)(Ve),zn=(0,S.of)(Re.T);let On=ot.children;return kt||(On=[ot.children,(0,r.jsx)(i.I,{name:"angle-down",className:hn.icons.right},"down-icon")]),(0,r.jsx)(Me.A,{onChange:(0,$e.k)(lt),loadData:(0,$e.W)(It),dropdownClassName:(0,O.cx)(zn.dropdown,hn.popup),..._t,expandIcon:null,children:(0,r.jsx)(Te.$n,{icon:At,disabled:on,variant:Jt,...Tt??{},children:On})})};Ke.displayName="ButtonCascader";const Ve=ot=>({popup:(0,O.css)({label:"popup",zIndex:ot.zIndex.dropdown}),icons:{right:(0,O.css)({margin:"1px 0 0 4px"}),left:(0,O.css)({margin:"-1px 4px 0 0"})}});var Se=e(53371),Ye=e(6975),Ue=e(47327),je=e(35427),Qe=e(7612),He=e(65229),Je=e(6773),de=e(8135),ve=e(12173),me=e(32550);const xe=(0,v.forwardRef)(({value:ot="",onChange:lt,returnColorAs:xt="rgb",...It},At)=>{const[Tt,kt]=(0,v.useState)(ot),[Jt,on]=(0,v.useState)(!1),_t=(0,S.$j)(),hn=(0,S.of)(Ee),zn=(0,S.of)(me.$);(0,He.A)(Nn=>{if(Nn===ot)return;if(!Nn){lt("");return}const va=_t.visualization.getColorByName(Nn);lt(xt==="rgb"?Je.MV.asRgbString(va):Je.MV.asHexString(va))},500,[Tt]);const On=Nn=>{document.querySelector('[data-testid="color-popover"]')?.contains(Nn.relatedTarget)||on(!1)};return(0,r.jsx)(de.N,{onClick:()=>on(!1),children:(0,r.jsxs)("div",{className:hn.wrapper,children:[Jt&&!It.disabled&&(0,r.jsx)(Qe.p9,{"data-testid":"color-popover",color:Tt,onChange:kt,className:(0,O.cx)(zn.root,hn.picker)}),(0,r.jsx)(ve.A,{...It,theme:_t,color:Tt,onChange:kt,buttonAriaLabel:"Open color picker",onClick:()=>on(!0),onBlur:Nn=>On(Nn),ref:At,isClearable:!0})]})})});xe.displayName="ColorPickerInput";const Ee=ot=>({wrapper:(0,O.css)({position:"relative"}),picker:(0,O.css)({"&.react-colorful":{position:"absolute",width:"100%",zIndex:11,bottom:"36px"}}),inner:(0,O.css)({position:"absolute"})});var Pe=e(57339),Oe=e(74451),We=e(50201),Fe=e(12965),Be=e(34107),Le=e(90811),Ge=e(91867),Ze=e(72296),qe=e(83692),at=e(11527),ht=e(59310),Et=e(5857),mt=e(96396),Pt=e(43482),rt=e(27282),Kt=e(5585),Gt=e(27594),en=e(10928),st=e(92745),$t=e(37386);const xn=(0,v.memo)(()=>{const ot=(0,S.of)(pn);return(0,r.jsxs)("div",{className:ot.ellipsis,children:[(0,r.jsx)("span",{className:ot.firstDot,children:"."}),(0,r.jsx)("span",{className:ot.secondDot,children:"."}),(0,r.jsx)("span",{className:ot.thirdDot,children:"."})]})});xn.displayName="EllipsisAnimated";const pn=ot=>({ellipsis:(0,O.css)({display:"inline"}),firstDot:(0,O.css)({[ot.transitions.handleMotion("no-preference","reduce")]:{animation:`${_n} 2s linear infinite`}}),secondDot:(0,O.css)({[ot.transitions.handleMotion("no-preference","reduce")]:{animation:`${kn} 2s linear infinite`}}),thirdDot:(0,O.css)({[ot.transitions.handleMotion("no-preference","reduce")]:{animation:`${Jn} 2s linear infinite`}})}),_n=(0,O.keyframes)`
  0% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,kn=(0,O.keyframes)`
  0% {
    opacity: 0;
  }
  21% {
    opacity: 0.5;
  }
  22% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,Jn=(0,O.keyframes)`
  0% {
    opacity: 0;
  }
  43% {
    opacity: 0.5;
  }
  44% {
    opacity: 1;
  }
  65% {
    opacity: 1;
  }
  66% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
  `,pt=2*1e3;function Rt(ot){const{invalid:lt,loading:xt,onFinishChange:It,saveErrorMessage:At="Error saving this value",error:Tt,children:kt,disabled:Jt,...on}=ot,[_t,hn]=v.useState({isLoading:!1,showSuccess:!1,showError:lt}),zn=(0,v.useRef)(null);v.useEffect(()=>{let Cn;if(_t.showSuccess){const ds=_t.showError?0:pt;Cn=setTimeout(()=>{hn({..._t,showSuccess:!1})},ds)}return()=>{window.clearTimeout(Cn)}},[_t]);const On=(0,v.useCallback)(Cn=>{lt||(hn({..._t,isLoading:!0,showSuccess:!1}),It(Cn).then(()=>{hn({isLoading:!1,showSuccess:!0,showError:!1})}).catch(()=>{hn({..._t,isLoading:!1,showError:!0})}))},[lt,_t,It]),Nn=(0,v.useMemo)(()=>(0,W.debounce)(On,600,{leading:!1}),[On]),va=lt||_t.showError||void 0,Ba=(0,S.of)(Mt);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($t.D,{...on,loading:xt||void 0,invalid:va,disabled:Jt,error:Tt||_t.showError&&At,ref:zn,className:Ba.widthFitContent,children:v.cloneElement(kt(Cn=>{Nn(Cn)}))}),_t.isLoading&&(0,r.jsx)(Se.r,{referenceElement:zn.current,placement:"right",children:(0,r.jsxs)(st.x6,{i18nKey:"grafana-ui.auto-save-field.saving",children:["Saving ",(0,r.jsx)(xn,{})]})}),_t.showSuccess&&(0,r.jsx)(Se.r,{suffixIcon:"check",referenceElement:zn.current,placement:"right",children:(0,r.jsx)(st.x6,{i18nKey:"grafana-ui.auto-save-field.saved",children:"Saved!"})})]})}Rt.displayName="AutoSaveField";const Mt=()=>({widthFitContent:(0,O.css)({width:"fit-content"})});var Bt=e(34213),Nt=e(94018),Yt=e(37658),Qt=e(34343),En=e(71599),vn=e(92505),Sn=e(50992),mn=e(65232),wn=e(78193),Ln=e(13477),Zn=e(22787),da=e(53428),Pa=e(52792);const Xn=({children:ot})=>{const lt=(0,S.of)(Oa);return(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:lt.header,children:(0,r.jsx)("div",{className:lt.content,children:ot})})})},Oa=ot=>({header:(0,O.css)({display:"flex",margin:ot.spacing(0,0,3,0)}),content:(0,O.css)({flexGrow:1})});var ba=e(8515),oa=e(84600),Na=e(82143),ya=e(24343),Dt=e(64780),wt=e(68125),Zt=e(87105);class cn extends v.PureComponent{constructor(lt){super(lt),this.readCSV=(0,W.debounce)(()=>{const{config:At}=this.props,{text:Tt}=this.state;this.setState({data:(0,wt.Jh)(Tt,{config:At})})},150),this.onTextChange=At=>{this.setState({text:At.target.value})};const{text:xt,config:It}=lt;this.state={text:xt,data:(0,wt.Jh)(xt,{config:It})}}componentDidUpdate(lt,xt){const{text:It}=this.state;(It!==xt.text||this.props.config!==lt.config)&&this.readCSV(),this.props.text!==lt.text&&this.props.text!==It&&this.setState({text:this.props.text}),this.state.data!==xt.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:lt,height:xt,theme:It}=this.props,{data:At}=this.state,Tt=ut(It);return(0,r.jsxs)("div",{className:Tt.tableInputCsv,children:[(0,r.jsx)(Zt.f,{style:{width:lt,height:xt},placeholder:(0,st.t)("grafana-ui.table.csv-placeholder","Enter CSV here..."),value:this.state.text,onChange:this.onTextChange,className:Tt.textarea}),At&&(0,r.jsx)("footer",{className:Tt.footer,children:At.map((kt,Jt)=>{const on=kt.length,_t=kt.fields.length;return(0,r.jsx)("span",{children:(0,r.jsxs)(st.x6,{i18nKey:"grafana-ui.table.csv-counts",children:["Rows:",{rows:on},", Columns:",{columns:_t}," \xA0",(0,r.jsx)(i.I,{name:"check-circle"})]})},Jt)})})]})}}const nn=(0,S.cV)(cn);nn.displayName="TableInputCSV";const ut=(0,B.N)(ot=>({tableInputCsv:(0,O.css)({position:"relative"}),textarea:(0,O.css)({height:"100%",width:"100%"}),footer:(0,O.css)({position:"absolute",bottom:"15px",right:"15px",border:`1px solid ${ot.colors.success.border}`,background:ot.colors.success.main,color:ot.colors.success.contrastText,padding:`1px ${ot.spacing(.5)}`,fontSize:"80%"})}));var Ut=e(54314),Ot=e(60208),ct=e(51898),gt=e(72489);const Ct=(0,v.forwardRef)(({label:ot,active:lt,icon:xt,counter:It,className:At,suffix:Tt,onChangeTab:kt,href:Jt,...on},_t)=>{const hn=(0,S.of)(Wt),zn=()=>(0,r.jsxs)(r.Fragment,{children:[xt&&(0,r.jsx)(i.I,{name:xt}),ot,typeof It=="number"&&(0,r.jsx)(gt.p,{value:It}),Tt&&(0,r.jsx)(Tt,{className:hn.suffix})]}),On=(0,O.cx)(hn.link,lt&&hn.activeStyle);return(0,r.jsx)("a",{href:Jt,className:On,...on,onClick:kt,"aria-label":on["aria-label"]||ct.Tp.components.Tab.title(ot),role:"tab","aria-selected":lt,ref:_t,children:zn()})});Ct.displayName="Tab";const Wt=ot=>({link:(0,O.css)({padding:"6px 12px",display:"block",height:"100%",cursor:"pointer",position:"relative",color:ot.colors.text.primary,svg:{marginRight:ot.spacing(1)},"&:hover, &:focus":{textDecoration:"underline"}}),activeStyle:(0,O.css)({label:"activeTabStyle",color:ot.colors.text.maxContrast,overflow:"hidden","&::before":{display:"block",content:'" "',position:"absolute",left:0,width:"4px",bottom:"2px",top:"2px",borderRadius:ot.shape.radius.default,backgroundImage:"linear-gradient(0deg, #f05a28 30%, #fbca0a 99%)"}}),suffix:(0,O.css)({marginLeft:ot.spacing(1)})});var Ft=e(13941),Vt=e(70663),Ht=e(97611),dn=e(53431),sn=e(18627),Rn=e(98005),rn=e(71076);const Yn=({content:ot,position:lt,offset:xt})=>{const It=(0,S.of)(ea);return lt?(0,r.jsx)(fe.ZL,{className:It.portal,children:(0,r.jsx)(rn.o,{position:lt,offset:xt||{x:0,y:0},children:ot})}):null};Yn.displayName="VizTooltip";const ea=()=>({portal:(0,O.css)({position:"absolute",top:0,left:0,pointerEvents:"none",width:"100%",height:"100%"})});var An=e(63428),Fa=e(33352),jt=e(67522),tn=e(39884),an=e(64400),Pn=e(54735),Mn=e(22940),Un=e(4268),aa=e(89123),ia=e(34999),ta=e(89599),na=e(74475),fa=e(5753);function ca({links:ot}){const lt=(0,S.of)(xa);if(ot.length===1)return(0,r.jsx)(fa.R,{link:ot[0]});const xt=ot.filter(At=>At.target==="_blank"),It=ot.filter(At=>At.target==="_self");return(0,r.jsxs)(r.Fragment,{children:[It.map((At,Tt)=>(0,r.jsx)(fa.R,{link:At},Tt)),(0,r.jsxs)("div",{className:lt.wrapper,children:[(0,r.jsx)("p",{className:lt.externalLinksHeading,children:(0,r.jsx)(st.x6,{i18nKey:"grafana-ui.field-link-list.external-links-heading",children:"External links"})}),xt.map((At,Tt)=>(0,r.jsxs)("a",{href:At.href,target:At.target,className:lt.externalLink,children:[(0,r.jsx)(i.I,{name:"external-link-alt"}),At.title]},Tt))]})]})}const xa=ot=>({wrapper:(0,O.css)({flexBasis:"150px",width:"100px",marginTop:ot.spacing(1)}),externalLinksHeading:(0,O.css)({color:ot.colors.text.secondary,fontWeight:ot.typography.fontWeightRegular,fontSize:ot.typography.size.sm,margin:0}),externalLink:(0,O.css)({color:ot.colors.text.link,fontWeight:ot.typography.fontWeightRegular,display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{textDecoration:"underline"},div:{marginRight:ot.spacing(1)}})}),ns=({className:ot,children:lt})=>{const xt=(0,S.of)(ps);return(0,r.jsx)("div",{className:(0,O.cx)(xt,ot),children:lt})},ps=()=>(0,O.css)({display:"flex",button:{flexGrow:1,justifyContent:"center"},"> *":{flexGrow:1},label:{flexGrow:1,textAlign:"center"}});var Ya=e(59795),Ka=e(43951),Sa=e(97375),Es=e(87063),as=e(30930),Ns=e(94535),$s=e(41479),ri=e(96822),vo=e(73628),Fr=e(81917),yo=e(6399),xo=e(71479),Eo=e(79331),bs=e(991);const Po=(0,v.memo)((0,v.forwardRef)(({title:ot,featureState:lt,...xt},It)=>{const At=(0,S.of)(Do),Tt=lt?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:At.badge,children:(0,r.jsx)(bs.y,{featureState:lt})}),(0,r.jsx)("h3",{children:ot})]}):(0,r.jsx)("h3",{children:ot});return(0,r.jsx)(Eo.w,{branded:!0,title:Tt,urlTitle:"Read documentation",ref:It,...xt})}));Po.displayName="FeatureInfoBox";const Do=ot=>({badge:(0,O.css)({marginBottom:ot.spacing(1)})});var bo=e(50275),wr=e(22658),gr=e(36303),mr=e(56297),oi=e(96004),Vr=e(55803),$r=e(21285),sr=e(18027);function Co({options:ot,onOptionsChange:lt}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"page-heading",children:(0,r.jsx)(st.x6,{i18nKey:"grafana-ui.data-source-settings.alerting-settings-heading",children:"Alerting"})}),(0,r.jsx)("div",{className:"gf-form-group",children:(0,r.jsx)("div",{className:"gf-form-inline",children:(0,r.jsx)("div",{className:"gf-form",children:(0,r.jsx)(sr.I,{labelWidth:29,label:(0,st.t)("grafana-ui.data-source-settings.alerting-settings-label","Manage alert rules in Alerting UI"),disabled:ot.readOnly,tooltip:(0,st.t)("grafana-ui.data-source-settings.alerting-settings-tooltip","Manage alert rules for this data source. To manage other alerting resources, add an Alertmanager data source."),children:(0,r.jsx)($r.K,{value:ot.jsonData.manageAlerts!==!1,onChange:xt=>lt({...ot,jsonData:{...ot.jsonData,manageAlerts:xt.currentTarget.checked}})})})})})})]})}var ii=e(3936),li=e(37235),ci=e(45558),zr=e(68079),di=e(19052),ui=e(4819),hi=e(61875),fi=e(76671),Ks=e(3263),Cs=e(89467),pi=e(52042),wl=e(8207),gi=e(17437),mi=e(10434),rr=e(63527),vi=e(91302);const Gr=({min:ot,max:lt,onChange:xt,onAfterChange:It,orientation:At="horizontal",reverse:Tt,step:kt,value:Jt,ariaLabelForHandle:on,marks:_t,included:hn})=>{const zn=At==="horizontal",On=(0,S.of)(vi.$,zn,!!_t),Nn=mi.A,[va,Ba]=(0,v.useState)(Jt??ot),Cn=(0,v.useCallback)(Vn=>{const bn=typeof Vn=="number"?Vn:Vn[0];Ba(bn),xt?.(bn)},[Ba,xt]),ds=(0,v.useCallback)(Vn=>{let bn=+Vn.target.value;Number.isNaN(bn)&&(bn=0),Ba(bn),xt&&xt(bn),It&&It(bn)},[xt,It]),Ja=(0,v.useCallback)(Vn=>{const bn=+Vn.target.value;bn>lt?Ba(lt):bn<ot&&Ba(ot)},[lt,ot]),Ha=(0,v.useCallback)(Vn=>{const bn=typeof Vn=="number"?Vn:Vn[0];It?.(bn)},[It]),yn=zn?[]:[On.sliderInputVertical],us=zn?[]:[On.sliderInputFieldVertical];return(0,r.jsxs)("div",{className:(0,O.cx)(On.container,On.slider),children:[(0,r.jsx)(gi.Global,{styles:On.tooltip}),(0,r.jsxs)("div",{className:(0,O.cx)(On.sliderInput,...yn),children:[(0,r.jsx)(Nn,{min:ot,max:lt,step:kt,defaultValue:Jt,value:va,onChange:Cn,onChangeComplete:Ha,vertical:!zn,reverse:Tt,ariaLabelForHandle:on,marks:_t,included:hn}),(0,r.jsx)(rr.p,{type:"text",width:7.5,className:(0,O.cx)(On.sliderInputField,...us),value:va,onChange:ds,onBlur:Ja,min:ot,max:lt})]})]})};Gr.displayName="Slider";var To=e(21103),yi=e(50426),xi=e(3343),Ei=e(26987),Pi=e(93256),Di=e(7895),bi=e(36219),Ci=e(59695),Ti=e(63152),Mo=e(20941),Hr=e(89640),Fs=e(66404),Mi=e(31286),Oi=e(41654),Si=e(13943),_r=e(35137),vr=e(72636),yr=e(53487),Ii=e(16780),Ri=e(12594),Ai=e(83871),ji=e(79233),xr=e(97095),Li=e(49785);const Bi=({name:ot,control:lt,children:xt,...It})=>{const{fields:At,append:Tt,prepend:kt,remove:Jt,swap:on,move:_t,insert:hn}=(0,Li.jz)({control:lt,name:ot,...It});return xt({fields:At,append:Tt,prepend:kt,remove:Jt,swap:on,move:_t,insert:hn})};var zs=e(18857),Ui=e(72508),Wi=e(69665),Ni=e(29362),Ki=e(43243),Fi=e(70683),Er=e(32881),wi=e(99887),Oo=e(77824),Pr=e(45450),ja=e(16203),wa=e(33033),Vi=e(12737),$i=e(48767),So=e(40601),Qr=e(32635),zi=e(57688),Dr=e(40279),Io=e(48431),Ro=e(56265),Gi=e(90929),Ao=e(8073),Hi=e(43856),Gs=e(21539),Ga=e(15356),_i=e(88559),kr=e(63509),or=e(35942);const Qi=({users:ot,onClick:lt,limit:xt=4})=>{const It=(0,S.of)(ki);if(!ot.length)return null;xt=xt>0?xt:4;const At=ot.length>xt,Tt=ot.length-xt,kt=Tt>99;return(0,r.jsxs)("div",{className:It.container,"aria-label":(0,st.t)("grafana-ui.users-indicator.container-label","Users indicator container"),children:[At&&(0,r.jsx)(or.n,{onClick:lt,userView:{user:{name:"Extra users"},lastActiveAt:""},showTooltip:!1,children:kt?"...":`+${Tt}`}),ot.slice(0,At?xt:xt+1).reverse().map(Jt=>(0,r.jsx)(or.n,{userView:Jt},Jt.user.name))]})},ki=ot=>({container:(0,O.css)({display:"flex",justifyContent:"center",flexDirection:"row-reverse",marginLeft:ot.spacing(1),"& > button":{marginLeft:ot.spacing(-1)}}),dots:(0,O.css)({marginBottom:"3px"})});var Yi=e(71555),Ji=e(51115),jo=e(3271),Xi=e(45897),Zi=e(93008),Lo=e(99555),Ps=e(47276),qi=e(23414),Bo=e(92790),Yr=e(61897),Jr=e(16477),Uo=e(73858),Wo=e(7515),el=e(69234),Xr=e(18667),br=e(93630),No=e(62748),tl=e(49256),Ko=e(88977),nl=e(3023),al=e(81538),Cr=e(34796),gs=e.n(Cr),Ts=e(26332),Qn=e(739),Fo=e(80011);const wo=({getContextMenuSource:ot,timeZone:lt,itemsGroup:xt,dimensions:It,contextDimensions:At,...Tt})=>{const kt=ot(),Jt=xt?xt.map(hn=>({...hn,items:hn.items?.filter(zn=>zn.label)})):[],on=()=>{if(!kt)return null;let hn;if(It?.yAxis&&At?.yAxis?.[1]){const On=(0,Ts.WK)(It.yAxis,At.yAxis[0],At.yAxis[1]),Nn=kt.series.valueField.display;hn=Nn(On)}const zn=(0,Fo.LE)(kt.datapoint[0],{defaultWithMS:kt.series.hasMsResolution,timeZone:lt});return(0,r.jsx)(Tr,{timestamp:zn,seriesColor:kt.series.color,displayName:kt.series.alias||kt.series.label,displayValue:hn})},_t=()=>Jt?.map((hn,zn)=>(0,r.jsx)(as.r,{label:hn.label,children:(hn.items||[]).map(On=>(0,r.jsx)(Ns.D,{url:On.url,label:On.label,target:On.target,icon:On.icon,active:On.active,onClick:On.onClick},`${On.label}`))},`${hn.label}${zn}`));return(0,r.jsx)(Sa.t,{...Tt,renderMenuItems:_t,renderHeader:on})},Tr=({timestamp:ot,seriesColor:lt,displayName:xt,displayValue:It})=>{const At=(0,S.of)(Vo);return(0,r.jsxs)("div",{className:At.wrapper,children:[(0,r.jsx)("strong",{children:ot}),(0,r.jsxs)(Er.Gy,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(xo.p,{color:lt}),(0,r.jsx)("span",{className:At.displayName,children:xt})]}),It&&(0,r.jsx)(Gs.i,{value:It})]})]})};function Vo(ot){return{wrapper:(0,O.css)({padding:ot.spacing(.5,1),fontSize:ot.typography.size.sm,zIndex:ot.zIndex.tooltip}),displayName:(0,O.css)({whiteSpace:"nowrap",paddingLeft:ot.spacing(.5)})}}var Ss=e(55386),Is=e(16515),Rs=e(5421);const sl=(ot,lt)=>{let xt=0,It=ot.values.length-1,At;for(;;){if(xt>It)return Math.max(It,0);At=Math.floor((xt+It)/2);const Tt=ot.values[At];if(Tt===lt)return At;Tt&&Tt<lt?xt=At+1:It=At-1}},rl=(ot,lt,xt,It)=>{let At,Tt,kt,Jt,on;const _t=[];let hn,zn;for(At=0;At<ot.length;At++){Tt=ot[At];const On=lt[At];kt=sl(On,xt),Jt=xt-On.values[kt],on=On.values[kt],(hn===void 0||Jt>=0&&(Jt<hn||hn<0)||Jt<0&&Jt>hn)&&(hn=Jt,zn=On.display?(0,Ss.cN)(On.display(on)):on);const Nn=Tt.display(Tt.values[kt]);_t.push({value:(0,Ss.cN)(Nn),datapointIndex:kt,seriesIndex:At,color:Nn.color,label:(0,Is.Ct)(Tt),time:On.display?(0,Ss.cN)(On.display(on)):on})}return{results:_t,time:zn}},Zr=(ot,lt)=>(0,Fo.LE)(ot,{format:lt?.options?.timeformat,timeZone:lt?.options?.timezone}),Mr=(ot,lt,xt)=>{if(lt&&xt&&ot){const It=xt-lt,At=It/ot/1e3,Tt=86400010,kt=31536e6;return At<=10?Rs.WC.interval.millisecond:At<=45?Rs.WC.interval.second:It<=Tt?Rs.WC.interval.minute:At<=8e4?Rs.WC.interval.hour:It<=kt?Rs.WC.interval.day:At<=31536e3?Rs.WC.interval.month:Rs.WC.interval.year}return Rs.WC.interval.minute},$o=({dimensions:ot,activeDimensions:lt,pos:xt,timeZone:It})=>{let At=null;if(lt.xAxis===null)return null;lt.yAxis&&(At=lt.yAxis[0]);const Tt=lt.xAxis[1]?(0,Ts.WK)(ot.xAxis,lt.xAxis[0],lt.xAxis[1]):xt.x,kt=rl(ot.yAxis.columns,ot.xAxis.columns,Tt,It),Jt=kt.time,on=kt.results.map((_t,hn)=>({color:_t.color,label:_t.label,value:_t.value,isActive:At===hn}));return(0,r.jsx)(An.o,{series:on,timestamp:Jt})};$o.displayName="MultiModeGraphTooltip";const zo=({dimensions:ot,activeDimensions:lt,timeZone:xt})=>{if(lt.yAxis===null||lt.yAxis[1]===void 0||lt.xAxis===null||lt.xAxis[1]===void 0)return null;const It=(0,Ts.WK)(ot.xAxis,lt.xAxis[0],lt.xAxis[1]),At=(0,Ts.P4)(ot.xAxis,lt.xAxis[0]),Tt=At.display?(0,Ss.cN)(At.display(It)):It,kt=(0,Ts.P4)(ot.yAxis,lt.yAxis[0]),Jt=(0,Ts.WK)(ot.yAxis,lt.yAxis[0],lt.yAxis[1]),on=kt.display,_t=on(Jt);return(0,r.jsx)(An.o,{series:[{color:_t.color,label:(0,Is.Ct)(kt),value:(0,Ss.cN)(_t)}],timestamp:Tt})};zo.displayName="SingleModeGraphTooltip";const qr=({mode:ot=Qn.$N.Single,dimensions:lt,activeDimensions:xt,pos:It,timeZone:At})=>!xt||!xt.xAxis?null:ot==="single"?(0,r.jsx)(zo,{dimensions:lt,activeDimensions:xt,timeZone:At}):(0,r.jsx)($o,{dimensions:lt,activeDimensions:xt,pos:It,timeZone:At});qr.displayName="GraphTooltip";class Go extends v.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.$element=null,this.onPlotSelected=(lt,xt)=>{const{onHorizontalRegionSelected:It}=this.props;It&&It(xt.xaxis.from,xt.xaxis.to)},this.onPlotHover=(lt,xt,It)=>{this.setState({isTooltipVisible:!0,activeItem:It,pos:xt})},this.onPlotClick=(lt,xt,It)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:It,contextPos:xt})},this.renderTooltip=()=>{const{children:lt,series:xt,timeZone:It}=this.props,{pos:At,activeItem:Tt,isTooltipVisible:kt}=this.state;let Jt;if(!kt||!At||xt.length===0||(v.Children.forEach(lt,Cn=>{if(Jt)return;(Cn&&Cn.type&&(Cn.type.displayName||Cn.type.name))===Yn.displayName&&(Jt=Cn)}),!Jt))return null;const on=Jt.props,_t=on.mode||"single";if(!Tt&&_t==="single")return null;const hn=on.tooltipComponent||qr,zn=Tt?Tt.series.seriesIndex:0,On=Tt?Tt.dataIndex:void 0,Nn={xAxis:[zn,On],yAxis:Tt?[Tt.series.seriesIndex,Tt.dataIndex]:null},va={dimensions:{xAxis:(0,Ts.r4)("xAxis",xt.map(Cn=>Cn.timeField)),yAxis:(0,Ts.r4)("yAxis",xt.map(Cn=>Cn.valueField))},activeDimensions:Nn,pos:At,mode:on.mode||Qn.$N.Single,timeZone:It},Ba=v.createElement(hn,{...va});return v.cloneElement(Jt,{content:Ba,position:{x:At.pageX,y:At.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:lt}=this.props,{contextPos:xt,contextItem:It,isContextVisible:At}=this.state;if(!At||!xt||!It||lt.length===0)return null;const Tt=It?It.series.seriesIndex:0,kt=It?It.dataIndex:void 0,Jt={xAxis:[Tt,kt],yAxis:It?[It.series.seriesIndex,It.dataIndex]:null},on={xAxis:(0,Ts.r4)("xAxis",lt.map(On=>On.timeField)),yAxis:(0,Ts.r4)("yAxis",lt.map(On=>On.valueField))},_t=()=>this.setState({isContextVisible:!1}),hn=()=>({datapoint:It.datapoint,dataIndex:It.dataIndex,series:It.series,seriesIndex:It.series.seriesIndex,pageX:xt.pageX,pageY:xt.pageY}),zn={x:xt.pageX,y:xt.pageY,onClose:_t,getContextMenuSource:hn,timeZone:this.props.timeZone,dimensions:on,contextDimensions:Jt};return(0,r.jsx)(wo,{...zn})},this.getBarWidth=()=>{const{series:lt}=this.props;return Math.min(...lt.map(xt=>xt.timeStep))}}static{this.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1}}componentDidUpdate(lt,xt){lt!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=gs()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(lt){return lt.length===0?[{show:!0,min:-1,max:1}]:(0,W.uniqBy)(lt.map(xt=>{const It=xt.yAxis?xt.yAxis.index:1,At=xt.yAxis&&xt.yAxis.min&&!isNaN(xt.yAxis.min)?xt.yAxis.min:null,Tt=xt.yAxis&&xt.yAxis.tickDecimals&&!isNaN(xt.yAxis.tickDecimals)?xt.yAxis.tickDecimals:null;return{show:!0,index:It,position:It===1?"left":"right",min:At,tickDecimals:Tt}}),xt=>xt.index)}draw(){if(this.element===null)return;const{width:lt,series:xt,timeRange:It,showLines:At,showBars:Tt,showPoints:kt,isStacked:Jt,lineWidth:on,timeZone:_t,onHorizontalRegionSelected:hn}=this.props;if(!lt)return;const zn=lt/100,On=It.from.valueOf(),Nn=It.to.valueOf(),va=this.getYAxes(xt),Ba={legend:{show:!1},series:{stack:Jt,lines:{show:At,lineWidth:on,zero:!1},points:{show:kt,fill:1,fillColor:!1,radius:2},bars:{show:Tt,fill:1,barWidth:Tt?this.getBarWidth()/1.5:1,zero:!1,lineWidth:on},shadowSize:0},xaxis:{timezone:_t,show:!0,mode:"time",min:On,max:Nn,label:"Datetime",ticks:zn,timeformat:Mr(zn,On,Nn),tickFormatter:Zr},yaxes:va,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:hn?"x":null,color:"#666"},crosshair:{mode:"x"}};try{gs().plot(this.element,xt.filter(Cn=>Cn.isVisible),Ba)}catch(Cn){throw console.error("Graph rendering error",Cn,Ba,xt),new Error("Error rendering panel")}}render(){const{ariaLabel:lt,height:xt,width:It,series:At}=this.props,Tt=At.length===0,kt=this.renderTooltip(),Jt=this.renderContextMenu();return(0,r.jsxs)("div",{className:"graph-panel","aria-label":lt,children:[(0,r.jsx)("div",{className:"graph-panel__chart",ref:on=>this.element=on,style:{height:xt,width:It},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),Tt&&(0,r.jsx)("div",{className:"datapoints-warning",children:"No data"}),kt,Jt]})}}const Ho=null,ol=(ot,lt=!1,xt=!1)=>{const It=ot.reduce((Tt,kt)=>Tt+(kt[1]||0),0)===0,At=!ot.reduce((Tt,kt)=>Tt&&kt[1]!==null,!0);return lt&&At||xt&&It},il=ot=>{const{series:lt,timeRange:xt,width:It,height:At,showBars:Tt,showLines:kt,showPoints:Jt,sortLegendBy:on,sortLegendDesc:_t,legendDisplayMode:hn,legendVisibility:zn,placement:On,onSeriesToggle:Nn,onToggleSort:va,hideEmpty:Ba,hideZero:Cn,isStacked:ds,lineWidth:Ja,onHorizontalRegionSelected:Ha,timeZone:yn,children:us,ariaLabel:Vn}=ot,{graphContainer:bn,wrapper:ma,legendContainer:Fn}=(0,S.of)(ll,ot.placement),Ra=lt.reduce((Ca,Aa)=>ol(Aa.data,Ba,Cn)?Ca:Ca.concat([{label:Aa.label,color:Aa.color||"",disabled:!Aa.isVisible,yAxis:Aa.yAxis.index,getDisplayValues:()=>Aa.info||[]}]),[]);return(0,r.jsxs)("div",{className:ma,"aria-label":Vn,children:[(0,r.jsx)("div",{className:bn,children:(0,r.jsx)(Go,{series:lt,timeRange:xt,timeZone:yn,showLines:kt,showPoints:Jt,showBars:Tt,width:It,height:At,isStacked:ds,lineWidth:Ja,onHorizontalRegionSelected:Ha,children:us})}),zn&&(0,r.jsx)("div",{className:Fn,children:(0,r.jsx)(Ce.E,{hideHorizontalTrack:!0,children:(0,r.jsx)(Un.t,{items:Ra,displayMode:hn,placement:On,sortBy:on,sortDesc:_t,onLabelClick:(Ca,Aa)=>{Nn&&Nn(Ca.label,Aa)},onToggleSort:va})})})]})},ll=(ot,lt)=>({wrapper:(0,O.css)({display:"flex",flexDirection:lt==="bottom"?"column":"row"}),graphContainer:(0,O.css)({minHeight:"65%",flexGrow:1}),legendContainer:(0,O.css)({padding:"10px 0",maxHeight:lt==="bottom"?"35%":"none"})});class cl extends v.Component{constructor(lt){super(lt),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:lt.series}}componentDidUpdate(lt){const{series:xt}=this.props;(0,W.isEqual)(lt.series,xt)||this.setState({hiddenSeries:[],toggledSeries:xt})}onSeriesToggle(lt,xt){const{series:It,onHiddenSeriesChanged:At}=this.props,{hiddenSeries:Tt}=this.state;if(xt.ctrlKey||xt.metaKey||xt.shiftKey){const _t=Tt.indexOf(lt)>-1?Tt.filter(zn=>zn!==lt):Tt.concat([lt]),hn=It.map(zn=>({...zn,isVisible:_t.indexOf(zn.label)===-1}));this.setState({hiddenSeries:_t,toggledSeries:hn},()=>At?At(_t):void 0);return}const kt=It.map(_t=>_t.label),Jt=Tt.length+1===kt.length?[]:(0,W.difference)(kt,[lt]),on=It.map(_t=>({..._t,isVisible:Jt.indexOf(_t.label)===-1}));this.setState({hiddenSeries:Jt,toggledSeries:on},()=>At?At(Jt):void 0)}render(){const{children:lt}=this.props,{toggledSeries:xt}=this.state;return lt({onSeriesToggle:this.onSeriesToggle,toggledSeries:xt})}}var dl=e(64423),As=e(99165),ms=e(36638),eo=e(57866),rs=e(95004),to=e(57852),ir=e(32899),ws=e(36192),ul=e(8721);const _o={threshold:(ot,lt,xt)=>ot+xt,midpoint:(ot,lt,xt)=>(ot+lt)/2,plusone:(ot,lt,xt)=>ot+1};function hl(ot){if(ot.frame.length===0)return ot.frame;let lt=!0,{frame:xt,refFieldName:It,refFieldPseudoMax:At,refFieldPseudoMin:Tt,insertMode:kt}=ot;kt||(kt=_o.threshold);const Jt=no(xt,It);if(Jt==null)return xt;Jt.state={...Jt.state,nullThresholdApplied:!0};const on=xt.fields.map(hn=>hn.config.custom?.insertNulls||Jt.config.interval||null),_t=new Set(on);if(_t.delete(null),_t.size===0)return xt;if(_t.size===1){const hn=_t.values().next().value;if(!hn||hn<=0)return xt;const zn=Jt.values,On=xt.fields.map(va=>va.values),Nn=Qo(zn,On,hn,Tt,At,kt,lt);return Nn===On?xt:{...xt,length:Nn[0].length,fields:xt.fields.map((va,Ba)=>({...va,values:Nn[Ba]}))}}return xt}function Qo(ot,lt,xt,It=null,At=null,Tt,kt){const Jt=ot.length,on=[];if(It!=null&&It<ot[0]){let On=Math.ceil((ot[0]-It)/xt),Nn=ot[0]-On*xt;for(;Nn<ot[0];)on.push(Tt(Nn-xt,Nn,xt)),Nn+=xt}on.push(ot[0]);let _t=ot[0];for(let On=1;On<Jt;On++){const Nn=ot[On];for(;Nn-_t>xt&&(on.push(Tt(_t,Nn,xt)),_t+=xt,!!kt););on.push(Nn),_t=Nn}if(At!=null&&At>_t)for(;_t+xt<At;)on.push(Tt(_t,At,xt)),_t+=xt;const hn=on.length;if(hn===Jt)return lt;const zn=[];for(let On of lt){let Nn;if(On!==ot){Nn=Array(hn);for(let va=0,Ba=0;va<hn;va++)Nn[va]=ot[Ba]===on[va]?On[Ba++]:null}else Nn=on;zn.push(Nn)}return zn}function fl(ot,lt,xt){let It,At;for(let Tt=0;Tt<lt.length;Tt++)if(lt[Tt]==null)At==null&&It!=null&&(At=Tt);else{if(At!=null){if(ot[Tt]-It<xt)for(;At<Tt;)lt[At++]=void 0;At=null}It=ot[Tt]}return lt}function Xs(ot){return ot.type===rs.PU.number&&ot.config.custom?.drawStyle===Qn.GR.Bars&&!ot.config.custom?.hideFrom?.viz}function no(ot,lt){return ot.fields.find(xt=>lt!=null?xt.name===lt:xt.type===rs.PU.time)}function pl(ot,lt){const xt=no(ot,lt);let It=xt?.values;for(let At=0;At<ot.fields.length;At++){let Tt=ot.fields[At];if(Tt===xt||Xs(Tt))continue;let kt=Tt.config.custom?.spanNulls;typeof kt=="number"&&kt!==-1&&It&&(Tt.values=fl(It,Tt.values,kt))}return ot}function gl(ot,lt,xt){let It;e:for(let Jt of ot)for(let on of Jt.fields)if(lt.x(on,Jt,ot)){It=on;break e}ot=ot.map(Jt=>It?.state?.nullThresholdApplied?Jt:hl({frame:Jt,refFieldName:It.name,refFieldPseudoMin:xt?.from.valueOf(),refFieldPseudoMax:xt?.to.valueOf()}));let At=0;ot.forEach(Jt=>{Jt.fields.forEach(on=>{Xs(on)&&(on.config.custom={...on.config.custom,spanNulls:-1},At++)})});let Tt=1/0;At>1&&ot.forEach(Jt=>{if(!Jt.fields.some(Xs))return;const on=It.values;for(let _t=0;_t<on.length;_t++)_t>0&&(Tt=Math.min(Tt,on[_t]-on[_t-1]))});let kt=(0,ul.Fd)({frames:ot,joinBy:lt.x,keep:lt.y,keepOriginIndices:!0});return kt?(kt=pl(kt,It.name),Tt!==1/0&&(kt.fields.forEach((Jt,on)=>{let _t=Jt.values;if(on===0){let hn=_t[_t.length-1];_t.push(hn+Tt,hn+2*Tt)}else Xs(Jt)?_t.push(null,null):_t.push(void 0,void 0)}),kt.length+=2),kt):null}function ao(ot,lt){const It=`${ot.min!==void 0?ot.min:"na"}-${ot.max!==void 0?ot.max:"na"}`,At=`${ot.custom?.axisSoftMin!==void 0?ot.custom.axisSoftMin:"na"}-${ot.custom?.axisSoftMax!==void 0?ot.custom.axisSoftMax:"na"}`,Tt=`${ot.custom?.axisPlacement!==void 0?ot.custom?.axisPlacement:Qn.vM.Auto}`,kt=ot.unit??No.s,Jt=ot.custom?.scaleDistribution?ko(ot.custom.scaleDistribution):Qn.L4.Linear,on=ot.custom?.axisLabel?ot.custom.axisLabel:"na";return`${kt}/${It}/${At}/${Tt}/${Jt}/${on}/${lt}`}function ko(ot){return ot.type===Qn.L4.Log?`${ot.type}${ot.log}`:ot.type}function Yo(ot,lt,xt=[]){for(const It of xt)if(typeof It=="function"){if(!It(ot,lt))return!1}else if(lt[It]!==ot[It])return!1;return!0}class so extends v.Component{constructor(lt){super(lt),this.panelContext={},this.subscription=new dl.yU,this.getTimeRange=()=>this.props.timeRange;let xt=this.prepState(lt);xt.alignedData=xt.config.prepData([xt.alignedFrame]),this.state=xt,this.plotInstance=v.createRef()}static{this.contextType=an.e4}prepState(lt,xt=!0){let It=null;const{frames:At,fields:Tt,preparePlotFrame:kt}=lt,on=(kt||gl)(At,Tt||{x:ms.sJ.get(eo.Ct.firstTimeField).get({}),y:ms.sJ.get(eo.Ct.byTypes).get(new Set([rs.PU.number,rs.PU.enum]))},lt.timeRange);if((0,ws.uY)("GraphNG",!1,"data aligned",on),on){let _t=this.state?.config;xt&&(_t=lt.prepConfig(on,this.props.frames,this.getTimeRange),(0,ws.uY)("GraphNG",!1,"config prepared",_t)),It={alignedFrame:on,config:_t},(0,ws.uY)("GraphNG",!1,"data prepared",It.alignedData)}return It}handleCursorUpdate(lt){const xt=lt.payload?.point?.time,It=this.plotInstance.current;if(It&&xt){const At=It.valToPos(xt,"x");let Tt;if(At&&(Tt=(0,ws.sw)(It,It.posToIdx(At))),!Tt||!At)return;It.setCursor({left:At,top:Tt})}}componentDidMount(){this.panelContext=this.context;const{eventBus:lt}=this.panelContext;this.subscription.add(lt.getStream(to.b_).pipe((0,As.c)(50)).subscribe({next:xt=>{lt!==xt.origin&&this.handleCursorUpdate(xt)}})),this.subscription.add(lt.getStream(ir.kb).pipe((0,As.c)(50)).subscribe({next:xt=>this.handleCursorUpdate(xt)})),this.subscription.add(lt.getStream(to.ql).pipe((0,As.c)(50)).subscribe({next:()=>{const xt=this.plotInstance?.current;xt&&!xt.cursor._lock&&xt.setCursor({left:-10,top:-10})}}))}componentDidUpdate(lt){const{frames:xt,structureRev:It,timeZone:At,propsToDiff:Tt}=this.props,kt=!Yo(lt,this.props,Tt);if(xt!==lt.frames||kt||At!==lt.timeZone){let Jt=this.prepState(this.props,!1);Jt&&((this.state.config===void 0||At!==lt.timeZone||It!==lt.structureRev||!It||kt)&&(Jt.config=this.props.prepConfig(Jt.alignedFrame,this.props.frames,this.getTimeRange),(0,ws.uY)("GraphNG",!1,"config recreated",Jt.config)),Jt.alignedData=Jt.config.prepData([Jt.alignedFrame]),this.setState(Jt))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:lt,height:xt,children:It,renderLegend:At}=this.props,{config:Tt,alignedFrame:kt,alignedData:Jt}=this.state;return Tt?(0,r.jsx)(Pn.KU,{width:lt,height:xt,legend:At(Tt),children:(on,_t)=>(0,r.jsx)(Bo.Z,{config:Tt,data:Jt,width:on,height:_t,plotRef:hn=>this.plotInstance.current=hn,children:It?It(Tt,kt):null})}):null}}var Or=e(36613),ro=e(11576),Zs=e(76637),Sr=e(64394),lr=e(84229),qs=e(66650);const oo=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),Ir=Array(53);for(let ot=0;ot<Ir.length;ot++)Ir[ot]=2**ot;const Hs=(ot,lt=1)=>ot==null?"-":ot.toFixed(lt),io={drawStyle:Qn.GR.Line,showPoints:Qn.yL.Auto,axisPlacement:Qn.vM.Auto},Jo=({frame:ot,theme:lt,timeZones:xt,getTimeRange:It,sync:At,allFrames:Tt,renderers:kt,tweakScale:Jt=_t=>_t,tweakAxis:on=_t=>_t})=>{const _t="__global_",hn=new Ps.e(xt[0]);let zn;hn.setPrepData(Vn=>(zn=Vn[0],(0,ws.bq)(Vn[0],hn.getStackingGroups())));const On=ot.fields[0];if(!On)return hn;const Nn="x";let va="";const Ba=On.config.custom?.axisPlacement!==Qn.vM.Hidden?Qn.vM.Bottom:Qn.vM.Hidden,Cn=On.config.custom?.axisPlacement!==Qn.vM.Hidden;if(On.type===rs.PU.time){hn.addScale({scaleKey:Nn,orientation:Qn.Lt.Horizontal,direction:Qn.ON.Right,isTime:!0,range:()=>{const bn=It();return[bn.from.valueOf(),bn.to.valueOf()]}});const Vn=xt.length>1?(bn,ma)=>ma.map((Fn,Ra)=>Ra<2?null:Fn):void 0;for(let bn=0;bn<xt.length;bn++){const ma=xt[bn];hn.addAxis({scaleKey:Nn,isTime:!0,placement:Ba,show:Cn,label:On.config.custom?.axisLabel,timeZone:ma,theme:lt,grid:{show:bn===0&&On.config.custom?.axisGridShow},filter:Vn})}xt.length>1&&hn.addHook("drawAxes",bn=>{bn.ctx.save(),bn.ctx.fillStyle=lt.colors.text.primary,bn.ctx.textAlign="left",bn.ctx.textBaseline="bottom";let ma=0;bn.axes.forEach(Fn=>{if(Fn.side===2){let Ra=Fn._pos+Fn._size;bn.ctx.fillText(xt[ma],bn.bbox.left,Ra*Or.A.pxRatio),ma++}}),bn.ctx.restore()})}else hn.addScale({scaleKey:Nn,orientation:Qn.Lt.Horizontal,direction:Qn.ON.Right,range:(Vn,bn,ma)=>[On.config.min??bn,On.config.max??ma]}),hn.addAxis({scaleKey:Nn,placement:Ba,show:Cn,label:On.config.custom?.axisLabel,theme:lt,grid:{show:On.config.custom?.axisGridShow},formatValue:(Vn,bn)=>(0,Ss.cN)(On.display(Vn,bn))});let ds=kt?.flatMap(Vn=>Object.values(Vn.fieldMap).filter(bn=>Vn.indicesOnly.indexOf(bn)===-1))??[],Ja;for(let Vn=1;Vn<ot.fields.length;Vn++){const bn=ot.fields[Vn],ma={...bn.config,custom:{...io,...bn.config.custom}},Fn=ma.custom;if(bn===On||bn.type!==rs.PU.number&&bn.type!==rs.PU.enum)continue;let Ra=bn.display??Hs;bn.config.custom?.stacking?.mode===Qn.gs.Percent&&(Ra=(0,ro.J)({field:{...bn,config:{...bn.config,unit:"percentunit"}},theme:lt}));const Ca=ao(ma,bn.type),Aa=(0,Zs.Qi)(bn),ln=(0,Zs.lz)(bn,lt).color;if(hn.addScale(Jt({scaleKey:Ca,orientation:Qn.Lt.Vertical,direction:Qn.ON.Up,distribution:Fn.scaleDistribution?.type,log:Fn.scaleDistribution?.log,linearThreshold:Fn.scaleDistribution?.linearThreshold,min:bn.config.min,max:bn.config.max,softMin:Fn.axisSoftMin,softMax:Fn.axisSoftMax,centeredZero:Fn.axisCenteredZero,range:Fn.stacking?.mode===Qn.gs.Percent?(ra,Ls,ha)=>(Ls=Ls<0?-1:0,ha=ha>0?1:0,[Ls,ha]):bn.type===rs.PU.enum?(ra,Ls,ha)=>[-1,bn.config.type.enum.text.length]:void 0,decimals:bn.config.decimals},bn)),va||(va=Ca),Fn.axisPlacement!==Qn.vM.Hidden){let ra;Fn.axisColorMode===Qn.Y$.Series&&(Aa.isByValue&&bn.config.custom?.gradientMode===Qn.on.Scheme&&Aa.id===Sr.Y.Thresholds?ra=(0,qs.pl)(1,lt,Aa,bn.config.thresholds):ra=ln);const Ls={border:{show:Fn.axisBorderShow||!1,width:1/devicePixelRatio,stroke:ra||lt.colors.text.primary},ticks:{show:Fn.axisBorderShow||!1,stroke:ra||lt.colors.text.primary},color:ra||lt.colors.text.primary};let ha,Xa,ts;if(oo.has(ma.unit))ha=Ir;else if(bn.type===rs.PU.enum){let Ds=bn.config.type.enum.text;ts=Ds.map((Bs,Us)=>Us),Xa=Ds}hn.addAxis(on({scaleKey:Ca,label:Fn.axisLabel,size:Fn.axisWidth,placement:Fn.axisPlacement??Qn.vM.Auto,formatValue:(Ds,Bs)=>(0,Ss.cN)(Ra(Ds,Bs)),theme:lt,grid:{show:Fn.axisGridShow},decimals:bn.config.decimals,distr:Fn.scaleDistribution?.type,splits:ts,values:Xa,incrs:ha,...Ls},bn))}const ka=Fn.drawStyle===Qn.GR.Points?Qn.yL.Always:Fn.showPoints;let ys=()=>null;Fn.spanNulls!==!0&&(ys=(ra,Ls,ha,Xa)=>{let ts=[],Ds=ra.series[Ls];if(!ha&&Xa&&Xa.length){const[Bs,Us]=Ds.idxs,Qs=ra.data[0],jr=ra.data[Ls],Lr=Math.round(ra.valToPos(Qs[Bs],"x",!0)),ks=Math.round(ra.valToPos(Qs[Us],"x",!0));Xa[0][0]===Lr&&ts.push(Bs);for(let Ys=0;Ys<Xa.length;Ys++){let _l=Xa[Ys],Ql=Xa[Ys+1];if(Ql&&_l[1]===Ql[0]){let Wa=ra.posToIdx(_l[1],!0);if(jr[Wa]==null)for(let tr=1;tr<100;tr++){if(jr[Wa+tr]!=null){Wa+=tr;break}if(jr[Wa-tr]!=null){Wa-=tr;break}}ts.push(Wa)}}Xa[Xa.length-1][1]===ks&&ts.push(Us)}return ts.length?ts:null});let{fillOpacity:es}=Fn,js=null,Os=null;if(bn.state?.origin){Ja||(Ja=Ne(ot,Tt));const ra=Tt[bn.state.origin.frameIndex],Ls=ra?.fields[bn.state.origin.fieldIndex],ha=(0,Is.Ct)(Ls??bn,ra,Tt);if(ds.indexOf(ha)>=0)js=()=>null,Os=()=>{};else if(Fn.transform===Qn.NU.Constant){const Xa=Or.A.paths.linear();js=(ts,Ds)=>{const Bs=ts._data,Us=It();let Qs=[Us.from.valueOf(),Us.to.valueOf()],jr=Bs[Ds].find(Ys=>Ys!=null),Lr=[jr,jr],ks=Bs.slice();return ks[0]=Qs,ks[Ds]=Lr,Xa({...ts,_data:ks},Ds,0,1)}}if(Fn.fillBelowTo){const Xa=ot.fields.find(Us=>Fn.fillBelowTo===Us.name||Fn.fillBelowTo===Us.config?.displayNameFromDS||Fn.fillBelowTo===(0,Is.Ct)(Us,ot,Tt)),ts=Xa?(0,Is.Ct)(Xa,ot,Tt):Fn.fillBelowTo,Ds=Ja.get(ha),Bs=Ja.get(ts);(0,W.isNumber)(Bs)&&(0,W.isNumber)(Ds)?(hn.addBand({series:[Ds,Bs],fill:void 0}),es||(es=35)):es=0}}let Zo;Aa.id===Sr.Y.Thresholds&&(Zo=ra=>(0,Zs.lz)(zn.fields[ra],lt).color),hn.addSeries({pathBuilder:js,pointsBuilder:Os,scaleKey:Ca,showPoints:ka,pointsFilter:ys,colorMode:Aa,fillOpacity:es,theme:lt,dynamicSeriesColor:Zo,drawStyle:Fn.drawStyle,lineColor:Fn.lineColor??ln,lineWidth:Fn.lineWidth,lineInterpolation:Fn.lineInterpolation,lineStyle:Fn.lineStyle,barAlignment:Fn.barAlignment,barWidthFactor:Fn.barWidthFactor,barMaxWidth:Fn.barMaxWidth,pointSize:Fn.pointSize,spanNulls:Fn.spanNulls||!1,show:!Fn.hideFrom?.viz,gradientMode:Fn.gradientMode,thresholds:ma.thresholds,hardMin:bn.config.min,hardMax:bn.config.max,softMin:Fn.axisSoftMin,softMax:Fn.axisSoftMax,dataFrameFieldIndex:bn.state?.origin}),Fn.thresholdsStyle&&ma.thresholds&&(Fn.thresholdsStyle.mode??Qn.Ly.Off)!==Qn.Ly.Off&&hn.addThresholds({config:Fn.thresholdsStyle,thresholds:ma.thresholds,scaleKey:Ca,theme:lt,hardMin:bn.config.min,hardMax:bn.config.max,softMin:Fn.axisSoftMin,softMax:Fn.axisSoftMax})}let Ha=(0,ws.ro)(ot);hn.setStackingGroups(Ha),kt?.forEach(Vn=>{Ja||(Ja=Ne(ot,Tt));let bn={};for(let ma in Vn.fieldMap){let Fn=Vn.fieldMap[ma];bn[ma]=Ja.get(Fn)}Vn.init(hn,bn)}),hn.scaleKeys=[Nn,va];const yn=15;let us={dataIdx:(Vn,bn,ma,Fn)=>{let Ra=Vn.data[bn];if(Ra[ma]==null){let Ca=null,Aa=null,Ta;for(Ta=ma;Ca==null&&Ta-- >0;)Ra[Ta]!=null&&(Ca=Ta);for(Ta=ma;Aa==null&&Ta++<Ra.length;)Ra[Ta]!=null&&(Aa=Ta);let ln=Vn.data[0],ka=Vn.valToPos(Fn,"x"),ys=Aa==null?1/0:Vn.valToPos(ln[Aa],"x"),es=Ca==null?-1/0:Vn.valToPos(ln[Ca],"x"),js=ka-es,Os=ys-ka;js<=Os?js<=yn&&(ma=Ca):Os<=yn&&(ma=Aa)}return ma}};return At&&At()!==lr.y.Off&&(us.sync={key:_t,scales:[Nn,null]}),hn.setCursor(us),hn};function Ne(ot,lt){const xt=new Map;return ot.fields.forEach((It,At)=>{const Tt=It.state?.origin;if(Tt){const kt=lt[Tt.frameIndex]?.fields[Tt.fieldIndex];kt&&xt.set((0,Is.Ct)(kt,lt[Tt.frameIndex],lt),At)}}),xt}const be=["legend","options","theme"];class ze extends v.Component{constructor(){super(...arguments),this.prepConfig=(lt,xt,It)=>{const{sync:At}=this.context,{theme:Tt,timeZone:kt,renderers:Jt,tweakAxis:on,tweakScale:_t}=this.props;return Jo({frame:lt,theme:Tt,timeZones:Array.isArray(kt)?kt:[kt],getTimeRange:It,sync:At,allFrames:xt,renderers:Jt,tweakScale:_t,tweakAxis:on})},this.renderLegend=lt=>{const{legend:xt,frames:It}=this.props;return!lt||xt&&!xt.showLegend||!(0,Yr.t)(lt,It)?null:(0,r.jsx)(Yr.$,{data:It,config:lt,...xt})}}static{this.contextType=an.e4}render(){return(0,r.jsx)(so,{...this.props,prepConfig:this.prepConfig,propsToDiff:be,renderLegend:this.renderLegend})}}const nt=(0,S.cV)(ze);nt.displayName="TimeSeries";const yt=(0,v.createContext)({}),bt=()=>{const{data:ot,dimFields:lt,mapSeriesIndexToDataFrameFieldIndex:xt}=(0,v.useContext)(yt),It=(0,v.useCallback)(()=>{const At=lt.x;let Tt=null;for(let kt=0;kt<ot.fields.length;kt++)if(At(ot.fields[kt],ot,[ot])){Tt=ot.fields[kt];break}return Tt},[ot,lt]);return{dimFields:lt,mapSeriesIndexToDataFrameFieldIndex:xt,getXAxisField:It,alignedData:ot}},St=5,zt=ot=>ot!=null&&!ot.ctrlKey&&!ot.metaKey,qt=({onZoom:ot,config:lt,withZoomY:xt=!1})=>((0,v.useLayoutEffect)(()=>{let It=!1,At=!1;xt&&lt.addHook("init",Tt=>{Tt.over.addEventListener("mousedown",kt=>{if(zt(kt)&&kt.button===0&&kt.shiftKey){At=!0,Tt.cursor.drag.x=!1,Tt.cursor.drag.y=!0;let Jt=on=>{Tt.cursor.drag.x=!0,Tt.cursor.drag.y=!1,document.removeEventListener("mouseup",Jt,!0)};document.addEventListener("mouseup",Jt,!0)}},!0)}),lt.addHook("setSelect",Tt=>{const kt=Tt.scales.x.ori===0;if(zt(Tt.cursor.event)){if(xt&&At){if(Tt.select.height>=St){for(let Jt in Tt.scales)if(Jt!=="x"){const on=kt?Tt.posToVal(Tt.select.top,Jt):Tt.posToVal(Tt.select.left+Tt.select.width,Jt),_t=kt?Tt.posToVal(Tt.select.top+Tt.select.height,Jt):Tt.posToVal(Tt.select.left,Jt);Tt.setScale(Jt,{min:_t,max:on})}It=!0}At=!1}else if(Tt.select.width>=St){const Jt=kt?Tt.posToVal(Tt.select.left,"x"):Tt.posToVal(Tt.select.top+Tt.select.height,"x"),on=kt?Tt.posToVal(Tt.select.left+Tt.select.width,"x"):Tt.posToVal(Tt.select.top,"x");ot({from:Jt,to:on}),It=!1}}Tt.setSelect({left:0,width:0,top:0,height:0},!1)}),lt.setCursor({bind:{dblclick:Tt=>()=>{if(!zt(Tt.cursor.event))return null;if(xt&&It){for(let kt in Tt.scales)kt!=="x"&&Tt.setScale(kt,{min:null,max:null});It=!1}else{let kt=Tt.scales.x;const Jt=kt.min,on=kt.max,_t=(on-Jt)/2;ot({from:Jt-_t,to:on+_t})}return null}}})},[lt,ot,xt]),null);var gn=e(1604),Dn=e(46635);const In=10,Hn=({mode:ot=Qn.$N.Single,sortOrder:lt=Qn.xB.None,sync:xt,timeZone:It,config:At,renderTooltip:Tt,...kt})=>{const Jt=(0,v.useRef)(),on=(0,S.$j)(),[_t,hn]=(0,v.useState)(null),[zn,On]=(0,v.useState)(null),[Nn,va]=(0,v.useState)([]),[Ba,Cn]=(0,v.useState)(null),[ds,Ja]=(0,v.useState)(!1),Ha=(0,gn.A)();let yn=null;const us=(0,S.of)(Wn);if((0,v.useLayoutEffect)(()=>{let Ra;const Ca=()=>{Ha()&&(Ja(!0),Jt.current?.root.classList.add("plot-active"))},Aa=()=>{Ha()&&(Cn(null),Ja(!1),Jt.current?.root.classList.remove("plot-active"))};return At.addHook("syncRect",(Ta,ln)=>Ra=ln),At.addHook("init",Ta=>{Jt.current=Ta,Ta.over.addEventListener("mouseenter",Ca),Ta.over.addEventListener("mouseleave",Aa),yn=Ta.root.closest("[tabindex]"),yn&&(yn.addEventListener("focus",Ca),yn.addEventListener("blur",Aa)),xt&&xt()===lr.y.Crosshair&&Ta.root.classList.add("shared-crosshair")}),At.addHook("setLegend",Ta=>{Ha()&&(On(Ta.legend.idx),va(Ta.legend.idxs.slice()))}),At.addHook("setCursor",Ta=>{if(!Ra||!Ha())return;const{x:ln,y:ka}=Kn(Ta,Ra);Cn(ln!==void 0&&ka!==void 0?{x:ln,y:ka}:null)}),At.addHook("setSeries",(Ta,ln)=>{Ha()&&hn(ln)}),()=>{Cn(null),Jt.current&&(Jt.current.over.removeEventListener("mouseleave",Aa),Jt.current.over.removeEventListener("mouseenter",Ca),yn&&(yn.removeEventListener("focus",Ca),yn.removeEventListener("blur",Aa)))}},[At,Cn,Ja,On,va]),zn===null||!ds&&xt&&xt()===lr.y.Crosshair)return null;let Vn=kt.data.fields[0];if(!Vn)return null;const bn=Vn.display||(0,ro.J)({field:Vn,timeZone:It,theme:on});let ma=null,Fn=bn(Vn.values[zn]).text;if(Tt)ma=Tt(kt.data,_t,zn);else{if(ot===Qn.$N.Single&&_t!==null){const Ra=kt.data.fields[_t];if(!Ra)return null;const Ca=Nn?.[_t]??zn;Fn=bn(Vn.values[Ca]).text;const Ta=(Ra.display||(0,ro.J)({field:Ra,timeZone:It,theme:on}))(Ra.values[Ca]);ma=(0,r.jsx)(An.o,{series:[{color:Ta.color||Sr.F,label:(0,Is.Ct)(Ra,kt.data,kt.frames),value:Ta?(0,Ss.cN)(Ta):null}],timestamp:Fn})}if(ot===Qn.$N.Multi){let Ra=[];const Ca=kt.data,Aa=Ca.fields,Ta=[];for(let ln=0;ln<Aa.length;ln++){const ka=Ca.fields[ln];if(!ka||ka===Vn||ka.type===rs.PU.time||ka.type!==rs.PU.number||ka.config.custom?.hideFrom?.tooltip||ka.config.custom?.hideFrom?.viz)continue;const ys=kt.data.fields[ln].values[Nn[ln]],es=ka.display(ys);Ta.push(ys),Ra.push({color:es.color||Sr.F,label:(0,Is.Ct)(ka,Ca,kt.frames),value:es?(0,Ss.cN)(es):null,isActive:_t===ln})}if(lt!==Qn.xB.None){const ln=[...Ra],ka=Dn.sortValues(lt);Ra.sort((ys,es)=>{const js=ln.indexOf(ys),Os=ln.indexOf(es);return ka(Ta[js],Ta[Os])})}ma=(0,r.jsx)(An.o,{series:Ra,timestamp:Fn})}}return(0,r.jsx)(fe.ZL,{className:ds?us.tooltipWrapper:void 0,children:ma&&Ba&&(0,r.jsx)(rn.o,{position:{x:Ba.x,y:Ba.y},offset:{x:In,y:In},children:ma})})};function qn({left:ot,top:lt},xt){return ot===void 0||lt===void 0?!1:ot<0||ot>xt.width||lt<0||lt>xt.height}function Kn(ot,lt){let xt,It;const At=ot.cursor.left||0,Tt=ot.cursor.top||0;if(qn(ot.cursor,lt)){const kt=ot.posToIdx(At);if(Tt<0||Tt>lt.height){let Jt=(0,ws.sw)(ot,kt);Jt&&(It=lt.top+Jt,At>=0&&At<=lt.width&&(xt=lt.left+ot.valToPos(ot.data[0][ot.posToIdx(At)],ot.series[0].scale)))}}else xt=lt.left+At,It=lt.top+Tt;return{x:xt,y:It}}const Wn=ot=>({tooltipWrapper:(0,O.css)({"z-index":ot.zIndex.portal+1+" !important"})});var la=e(56887),La=e(53926),sa=e(97958),pa=e(30360),Bn=e(8255),Ea=e(75745),Ia=e(35458),ua=e(75254),os=e(48542);let Ms=null;function Rr(){if(Ms!==null)return Ms;if(typeof document<"u"){const ot=document.createElement("div"),lt={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(lt).map(xt=>{ot.style[xt]=lt[xt]}),document.body.appendChild(ot),Ms=ot.offsetWidth-ot.clientWidth,document.body.removeChild(ot)}else Ms=0;return Ms||0}var lo=e(86059),_a=e(53568),Qa=e(36324),is=e(79104),Va=e(59258),ga=e(60379),_s=e(20720),vs=(ot=>(ot.id="id",ot.title="title",ot.subTitle="subTitle",ot.mainStat="mainStat",ot.secondaryStat="secondaryStat",ot.source="source",ot.target="target",ot.detail="detail__",ot.arc="arc__",ot.color="color",ot))(vs||{}),Ar=e(63267);function ml(ot,lt,xt,It){if(ot>lt){const At=`[Combobox] Items exceed the recommended amount ${lt}.`;console.warn(At,{itemsCount:""+ot,recommendedAmount:""+lt,"aria-labelledby":It??"",id:xt??""})}}var Vl=e(69884);let Xo;const $l=(ot="dark")=>Xo?Xo(ot):(0,Vl.a)({colors:{mode:ot}}).v1,vc=ot=>(Xo=ot,()=>{Xo=null});var yc=e(77345),xc=e(24726);const er={"[":"]","{":"}","(":")"},vl="brace_match";function Ec(){return{onKeyDown(ot,lt,xt){const{value:It}=lt;switch(ot.key){case"(":case"{":case"[":{const{start:{offset:At,key:Tt},end:{offset:kt,key:Jt},focus:{offset:on}}=It.selection,_t=It.focusText.text;if(It.selection.isExpanded)return ot.preventDefault(),lt.insertTextByKey(Tt,At,ot.key).insertTextByKey(Jt,kt+1,er[ot.key]).moveEndBackward(1),!0;if(on===_t.length||_t[on]===" "||Object.values(er).includes(_t[on])){ot.preventDefault();const hn=er[ot.key],zn={key:`${vl}-${(0,xc.A)()}`,type:`${vl}-${hn}`,anchor:{key:Tt,offset:At,object:"point"},focus:{key:Jt,offset:kt+1,object:"point"},object:"annotation"};return lt.insertText(ot.key).insertText(hn).addAnnotation(zn).moveBackward(1),!0}break}case")":case"}":case"]":{const At=It.anchorText.text,Tt=It.selection.anchor.offset,kt=At[Tt],Jt=ot.key,on=`${vl}-${Jt}`,_t=It.annotations.find(hn=>hn?.type===on&&hn.anchor.key===It.anchorText.key);if(_t&&kt===Jt&&!It.selection.isExpanded)return ot.preventDefault(),lt.moveFocusForward(1).removeAnnotation(_t).moveAnchorForward(1),!0;break}case"Backspace":{const At=It.anchorText.text,Tt=It.selection.anchor.offset,kt=At[Tt-1],Jt=At[Tt];if(er[kt]&&er[kt]===Jt)return ot.preventDefault(),lt.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return xt()}}}var zl=e(16123),Pc=e(54024),Dc=e(52513),Gl=e(21266),Hl=e(59490),bc=e(91272),Cc=e(56103),Tc=e(93427);const Mc={SecretFormField:_.L,FormField:s.z,Select:V,AsyncSelect:M,IndicatorsContainer:o,NoOptionsMessage:f,Input:l.p,Switch:G}},11280:(ne,A,e)=>{"use strict";e.d(A,{Bj:()=>y,H9:()=>h,PA:()=>p,Uu:()=>E,VM:()=>f,fP:()=>m,jX:()=>u,ri:()=>i,s1:()=>g,sh:()=>o,wk:()=>v});var n=e(65307),a=e(81970),s=e(53222),l=e(35231);const r=(0,n.VP)("explore/historyUpdated"),c=({updatedQuery:d,deletedId:x})=>async(b,D)=>{const C=D().explore.richHistory,P=C.map(O=>O.id===d?.id?d:O).filter(O=>O.id!==x),T=C.length-P.length;b((0,l.U2)({richHistoryResults:{richHistory:P,total:D().explore.richHistoryTotal-T}}))},i=(d,x,b,D,C)=>async(P,T)=>{const O=C?{quotaExceededError:!1,limitExceededWarning:!1,otherErrors:!1}:{quotaExceededError:!T().explore.richHistoryStorageFull,limitExceededWarning:!T().explore.richHistoryLimitExceededWarningShown},{richHistoryStorageFull:S,limitExceeded:B}=await(0,a.l0)({localOverride:d,datasource:{uid:x,name:b},queries:D,starred:!1,showNotif:O});C||(S&&P((0,l.fj)()),B&&P((0,l.D)()))},o=(d,x)=>async(b,D)=>{const C=await(0,a.oU)(d,x);b(c({updatedQuery:C}))},h=(d,x)=>async b=>{const D=await(0,a.cX)(d,x);b(c({updatedQuery:D}))},f=d=>async x=>{const b=await(0,a.NC)(d);x(c({deletedId:b}))},g=()=>async d=>{await(0,a.X1)(),d((0,l.U2)({richHistoryResults:{richHistory:[],total:0}})),d((0,l.U2)({richHistoryResults:{richHistory:[],total:0}}))},u=()=>async(d,x)=>{const b=x().explore.richHistorySearchFilters;if(b){const D=await(0,a.DI)(b);d((0,l.U2)({richHistoryResults:D}))}},E=()=>async(d,x)=>{const b=x().explore.richHistorySearchFilters,D=x().explore.richHistory;if(b&&D){const C={...b,page:(b?.page||1)+1},P=await(0,a.DI)(C),T=[...D,...P.richHistory];d((0,l.Ju)({filters:C})),d((0,l.U2)({richHistoryResults:{richHistory:T,total:P.total}}))}},v=()=>async d=>{d((0,l.Ju)({filters:void 0})),d((0,l.U2)({richHistoryResults:{richHistory:[],total:0}}))},p=()=>async(d,x)=>{let b=x().explore.richHistorySettings;b||(b=await(0,a.Gx)(),d((0,l.bZ)(b)))},m=d=>async x=>{x((0,l.bZ)(d)),await(0,a.rs)(d)},y=d=>async(x,b)=>{await x((0,l.Ju)({filters:{...d}}));const D=b().explore.richHistorySettings;(0,s.gQ)().lastUsedDataSourcesAvailable&&await x(m({...D,lastUsedDatasourceFilters:d.datasourceFilters}))}},11297:(ne,A,e)=>{"use strict";e.d(A,{$:()=>i,E:()=>c});var n=e(74848),a=e(22803),s=e(30703),l=e(48542),r=e(63142);const c=({count:o,label:h,onClick:f,removeIcon:g})=>{const{color:u}=(0,l.MC)(h),E=(0,r.of)(i),v=o!==0&&(0,n.jsx)("span",{style:{marginLeft:"3px"},children:`(${o})`});return(0,n.jsxs)("span",{className:E.badge,style:{backgroundColor:u},children:[g&&(0,n.jsx)(s.I,{onClick:f,name:"times"}),h," ",v]})},i=o=>({badge:(0,a.css)({...o.typography.bodySmall,backgroundColor:o.v1.palette.gray1,borderRadius:o.shape.radius.default,color:o.v1.palette.white,display:"inline-block",height:"20px",lineHeight:"20px",padding:o.spacing(0,.75),verticalAlign:"baseline",whiteSpace:"nowrap","&:hover":{opacity:.85}})})},11393:(ne,A,e)=>{"use strict";e.d(A,{Bj:()=>Et,ET:()=>We,FM:()=>xe,G9:()=>Ee,IP:()=>Pt,QB:()=>C,SR:()=>me,X1:()=>Be,bt:()=>D,ft:()=>je,iM:()=>s,kH:()=>Xe,l_:()=>mt,m6:()=>Je,ns:()=>qe,pK:()=>Ge,t1:()=>Pe,uB:()=>ht,xE:()=>en});const n=()=>({kind:"AnnotationQuery",spec:a()}),a=()=>({query:s(),enable:!1,hide:!1,iconColor:"",name:"",builtIn:!1}),s=()=>({kind:"DataQuery",group:"",version:"v0",spec:{}}),l=()=>({exclude:!1,ids:[]}),r=()=>"Off",c=()=>i(),i=()=>({kind:"Panel",spec:o()}),o=()=>({id:0,title:"",description:"",links:[],data:f(),vizConfig:x()}),h=()=>({title:"",url:""}),f=()=>({kind:"QueryGroup",spec:g()}),g=()=>({queries:[],transformations:[],queryOptions:d()}),u=()=>({kind:"PanelQuery",spec:E()}),E=()=>({query:s(),refId:"",hidden:!1}),v=()=>({kind:"",spec:p()}),p=()=>({id:"",options:{}}),m=()=>({id:""}),y=()=>"series",d=()=>({}),x=()=>({kind:"VizConfig",group:"",version:"",spec:b()}),b=()=>({options:{},fieldConfig:D()}),D=()=>({defaults:C(),overrides:[]}),C=()=>({}),P=()=>T(),T=()=>({type:"value",options:{}}),O=()=>"value",S=()=>({}),B=()=>({type:"range",options:{from:0,to:0,result:S()}}),K=()=>({type:"regex",options:{pattern:"",result:S()}}),U=()=>({type:"special",options:{match:"true",result:S()}}),F=()=>"true",I=()=>({mode:"absolute",steps:[]}),V=()=>"absolute",M=()=>({value:0,color:""}),L=()=>({mode:"thresholds"}),N=()=>"thresholds",W=()=>"min",R=()=>({id:""}),G=()=>({kind:"LibraryPanel",spec:w()}),w=()=>({id:0,title:"",libraryPanel:_()}),_=()=>({name:"",uid:""}),Q=()=>({kind:"GridLayout",spec:ae()}),ae=()=>({items:[]}),q=()=>({kind:"GridLayoutItem",spec:k()}),k=()=>({x:0,y:0,width:0,height:0,element:ee()}),ee=()=>({kind:"ElementReference",name:""}),j=()=>({mode:J,value:""}),J="variable",Z=()=>({kind:"RowsLayout",spec:te()}),te=()=>({rows:[]}),se=()=>({kind:"RowsLayoutRow",spec:ie()}),ie=()=>({layout:Q()}),ce=()=>({kind:"ConditionalRenderingGroup",spec:re()}),re=()=>({visibility:"show",condition:"and",items:[]}),ue=()=>({kind:"ConditionalRenderingVariable",spec:X()}),X=()=>({variable:"",operator:"equals",value:""}),le=()=>({kind:"ConditionalRenderingData",spec:he()}),he=()=>({value:!1}),fe=()=>({kind:"ConditionalRenderingTimeRangeSize",spec:Ce()}),Ce=()=>({value:""}),Ae=()=>({mode:J,value:""}),_e=()=>({kind:"AutoGridLayout",spec:Xe()}),Xe=()=>({maxColumnCount:3,columnWidthMode:"standard",rowHeightMode:"standard",fillScreen:!1,items:[]}),De=()=>({kind:"AutoGridLayoutItem",spec:Me()}),Me=()=>({element:ee()}),Te=()=>({mode:J,value:""}),$e=()=>({kind:"TabsLayout",spec:Re()}),Re=()=>({tabs:[]}),Ke=()=>({kind:"TabsLayoutTab",spec:Ve()}),Ve=()=>({layout:Q()}),Se=()=>({mode:J,value:""}),Ye=()=>({title:"",type:"link",icon:"",tooltip:"",tags:[],asDropdown:!1,targetBlank:!1,includeVars:!1,keepTime:!1}),Ue=()=>"link",je=()=>({timezone:"browser",from:"now-6h",to:"now",autoRefresh:"",autoRefreshIntervals:["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],hideTimepicker:!1,fiscalYearStartMonth:0}),Qe=()=>({display:"Last 6 hours",from:"now-6h",to:"now"}),He=()=>Je(),Je=()=>({kind:"QueryVariable",spec:de()}),de=()=>({name:"",current:{text:"",value:""},hide:"dontHide",refresh:"never",skipUrlSync:!1,query:s(),regex:"",sort:"disabled",options:[],multi:!1,includeAll:!1,allowCustomValue:!0}),ve=()=>({text:"",value:""}),me=()=>"dontHide",xe=()=>"never",Ee=()=>"disabled",Pe=()=>({kind:"TextVariable",spec:Oe()}),Oe=()=>({name:"",current:{text:"",value:""},query:"",hide:"dontHide",skipUrlSync:!1}),We=()=>({kind:"ConstantVariable",spec:Fe()}),Fe=()=>({name:"",query:"",current:{text:"",value:""},hide:"dontHide",skipUrlSync:!1}),Be=()=>({kind:"DatasourceVariable",spec:Le()}),Le=()=>({name:"",pluginId:"",refresh:"never",regex:"",current:{text:"",value:""},options:[],multi:!1,includeAll:!1,hide:"dontHide",skipUrlSync:!1,allowCustomValue:!0}),Ge=()=>({kind:"IntervalVariable",spec:Ze()}),Ze=()=>({name:"",query:"",current:{text:"",value:""},options:[],auto:!1,auto_min:"",auto_count:0,refresh:"never",hide:"dontHide",skipUrlSync:!1}),qe=()=>({kind:"CustomVariable",spec:at()}),at=()=>({name:"",query:"",current:ve(),options:[],multi:!1,includeAll:!1,hide:"dontHide",skipUrlSync:!1,allowCustomValue:!0}),ht=()=>({kind:"GroupByVariable",group:"",spec:Et()}),Et=()=>({name:"",current:{text:"",value:""},options:[],multi:!1,hide:"dontHide",skipUrlSync:!1}),mt=()=>({kind:"AdhocVariable",group:"",spec:Pt()}),Pt=()=>({name:"",baseFilters:[],filters:[],defaultKeys:[],hide:"dontHide",skipUrlSync:!1,allowCustomValue:!0}),rt=()=>({key:"",operator:"",value:""}),Kt="dashboard",Gt=()=>({text:""}),en=()=>({annotations:[],cursorSync:"Off",editable:!0,elements:{},layout:Q(),links:[],preload:!1,tags:[],timeSettings:je(),title:"",variables:[]})},11504:(ne,A,e)=>{"use strict";e.d(A,{G:()=>s});var n=e(96540),a=e(29609);function s(l){return(0,n.useMemo)(()=>(0,a.fC)(l),[l])}},11527:(ne,A,e)=>{"use strict";e.d(A,{R:()=>u,i:()=>g});var n=e(74848),a=e(22803),s=e(65740),l=e(34235),r=e(24938),c=e(25229),i=e(63142),o=e(35484),h=e(3343),f=e(30703);const g="time-of-day-picker-panel",u=({minuteStep:m=1,showHour:y=!0,showSeconds:d=!1,value:x,size:b="auto",disabled:D,disabledHours:C,disabledMinutes:P,disabledSeconds:T,id:O,placeholder:S,...B})=>{const K=(0,i.of)(p),U=B.allowEmpty??!1;return(0,n.jsx)(s.Ay,{id:O,generateConfig:l.A,locale:r.A,allowClear:U&&{clearIcon:(0,n.jsx)(f.I,{name:"times",className:K.clearIcon})},className:(0,a.cx)((0,h.lH)()[b],K.input),classNames:{popup:(0,a.cx)(K.picker,g)},defaultValue:B.allowEmpty?void 0:(0,c.AN)(),disabled:D,disabledTime:()=>({disabledHours:C,disabledMinutes:P,disabledSeconds:T}),format:E(y,d),minuteStep:m,onChange:F=>{if((0,c.u8)(F))return B.allowEmpty?B.onChange(F?(0,c.KQ)(F):void 0):B.onChange((0,c.KQ)(F))},picker:"time",placeholder:S,showNow:!1,needConfirm:!1,suffixIcon:(0,n.jsx)(v,{wrapperStyle:K.caretWrapper}),value:x&&(0,c.AN)(x)})};function E(m=!0,y=!1){const d=m?"HH:":"",x=y?":ss":"";return d+"mm"+x}const v=({wrapperStyle:m=""})=>(0,n.jsx)("div",{className:m,children:(0,n.jsx)(f.I,{name:"angle-down"})}),p=m=>{const y=m.components.input.background,d=m.colors.action.hover,x=m.shape.radius.default,b=m.components.input.borderColor;return{caretWrapper:(0,a.css)({position:"relative",top:"50%",transform:"translateY(-50%)",display:"inline-block",color:m.colors.text.secondary}),clearIcon:(0,a.css)({color:m.colors.text.secondary,"&:hover":{color:m.colors.text.maxContrast}}),picker:(0,a.css)({"&.rc-picker-dropdown":{boxShadow:"none",zIndex:m.zIndex.portal},".rc-picker-time-panel-column":{fontSize:m.typography.htmlFontSize,backgroundColor:y,color:m.colors.text.secondary,padding:"unset",overflowY:"auto",scrollbarWidth:"thin",width:m.spacing(8),li:{paddingRight:m.spacing(2),width:"auto","&.rc-picker-time-panel-cell-selected":{backgroundColor:"inherit",border:`1px solid ${m.colors.action.selectedBorder}`,borderRadius:x,color:m.colors.text.primary},"&:hover":{background:d,color:m.colors.text.primary},"&.rc-picker-time-panel-cell-disabled":{color:m.colors.action.disabledText}},".rc-picker-time-panel-cell-inner":{color:"inherit"},"&:not(:last-of-type)":{borderRight:`1px solid ${b}`}},".rc-picker-panel":{boxShadow:m.shadows.z3,backgroundColor:y,borderColor:b,borderRadius:x,overflow:"hidden"}}),input:(0,a.css)({"&.rc-picker-focused":{border:"none",".rc-picker-input":(0,o.getFocusStyles)(m)},"&.rc-picker-disabled":{".rc-picker-input":{backgroundColor:m.colors.action.disabledBackground,color:m.colors.action.disabledText,border:`1px solid ${m.colors.action.disabledBackground}`,"&:focus":{boxShadow:"none"}}},".rc-picker-input":{backgroundColor:y,borderRadius:x,borderColor:b,borderStyle:"solid",borderWidth:"1px",color:m.colors.text.primary,height:m.spacing(4),padding:m.spacing(0,1),input:{color:"unset",backgroundColor:"unset","&:focus":{outline:"none"},"&::placeholder":{color:m.colors.text.disabled}}},".rc-picker-clear":{alignItems:"center",display:"flex",insetInlineEnd:"unset",position:"relative"}})}}},11534:(ne,A,e)=>{"use strict";e.d(A,{H$:()=>io,vk:()=>oo});var n=e(92138),a=e(1906),s=e(92745),l=e(36490),r=e(43173),c=e(75234),i=e(45863),o=e(45229),h=e(95943),f=e(84057),g=e(29043),u=e(10605),E=e(22429),v=e(7817),p=e(82612),m=e(79718),y=e(88813),d=e(87745),x=e(75735),b=e(30643),D=e(3371),C=e(8285);function P(Ne){return"onDelete"in Ne}var T=e(73427);class O{constructor(be){this._elements=be,this.isEditableDashboardElement=!0}useEditPaneOptions(){return[]}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.objects","Objects"),icon:"folder",instanceName:""}}onConfirmDelete(){T.lE.publish(new d.bY({title:(0,s.t)("dashboard.edit-pane.elements.multiple-elements","Multiple elements"),text:(0,s.t)("dashboard.edit-pane.elements.multiple-elements-delete-text","Are you sure you want to delete these elements?"),onConfirm:()=>this.onDelete()}))}onDelete(){this._elements.forEach(be=>be.onDelete())}}var S=e(33143);class B{constructor(be){this._isNewElement=!1,this.selectedObjects=new Map(be),this._isMultiSelection=be.length>1,this.isMultiSelection&&(this.sameType=this.checkSameType())}markAsNewElement(){this._isNewElement=!0}isNewElement(){return this._isNewElement}checkSameType(){const be=this.selectedObjects.values(),ze=be.next().value?.resolve().constructor.name;if(!ze)return!1;for(let nt of be??[])if(nt.resolve().constructor.name!==ze)return!1;return!0}hasValue(be){return this.selectedObjects.has(be)}removeValue(be){this.selectedObjects.delete(be),this.selectedObjects.size<2&&(this.sameType=void 0,this._isMultiSelection=!1)}getStateWithValue(be,ze,nt){const yt=ze.getRef();let bt=[{id:be}],St=[[be,yt]];const zt=this.getSelectionEntries()??[],qt=zt.map(([gn])=>({id:gn}));return nt&&(St=[[be,yt],...zt],bt=[{id:be},...qt]),{selection:St,contextItems:bt}}getStateWithoutValueAt(be){this.removeValue(be);const ze=this.getSelectionEntries()??[],nt=ze.map(([yt])=>({id:yt}));return{entries:ze,contextItems:nt}}getSelection(){return this.isMultiSelection?this.getSceneObjects():this.getFirstObject()}getSelectionEntries(){return Array.from(this.selectedObjects.entries())}getFirstObject(){return this.selectedObjects.values().next().value?.resolve()}get isMultiSelection(){return this._isMultiSelection}getSceneObjects(){return Array.from(this.selectedObjects.values()??[]).map(be=>be.resolve())}createSelectionElement(){const be=this.getSceneObjects();if(be.length===0)return;const ze=(0,S.wT)(be[0]);if(!ze)return;if(be.length===1)return ze;if(this.sameType&&ze.createMultiSelectedElement){const yt=be.map(bt=>(0,S.wT)(bt));return ze.createMultiSelectedElement(yt)}const nt=[];for(const yt of be){const bt=(0,S.wT)(yt);bt&&P(bt)&&nt.push(bt)}if(nt.length)return new O(nt)}}class K extends i.Bs{constructor(){super({selectionContext:{enabled:!1,selected:[],onSelect:(be,ze)=>this.selectElement(be,ze),onClear:()=>this.clearSelection()},undoStack:[],redoStack:[]}),this.addActivationHandler(this.onActivate.bind(this))}setPanelEditAction(be){this.panelEditAction=be}onActivate(){const be=(0,C.YQ)(this);this._subs.add(be.subscribeToEvent(S.BF,({payload:ze})=>{this.handleEditAction(ze)})),this._subs.add(be.subscribeToEvent(S.jO,({payload:ze})=>{this.newObjectAddedToCanvas(ze)})),this._subs.add(be.subscribeToEvent(S.ck,({payload:ze})=>{this.clearSelection()})),this._subs.add(be.subscribeToEvent(S.su,({payload:ze})=>{this.forceRender()})),this._subs.add(be.subscribeToEvent(S.N4,({payload:ze})=>{this.forceRender()})),this.panelEditAction&&(this.performPanelEditAction(this.panelEditAction),this.panelEditAction=void 0)}performPanelEditAction(be){if(!be.payload.source.isActive){U(be.payload.source),setTimeout(()=>this.performPanelEditAction(be));return}be.payload.source.publishEvent(be,!0)}handleEditAction(be){this.state.redoStack.length>0&&this.setState({redoStack:[]}),this.performAction(be),this.setState({undoStack:[...this.state.undoStack,be]})}undoAction(){const be=this.state.undoStack.slice(),ze=be.pop();ze&&(ze.undo(),ze.source.publishEvent(new S.WG({source:ze.source}),!0),ze.addedObject&&this.clearSelection(),ze.movedObject&&this.selectObject(ze.movedObject,ze.movedObject.state.key,{force:!0}),ze.removedObject&&this.newObjectAddedToCanvas(ze.removedObject),this.setState({undoStack:be,redoStack:[...this.state.redoStack,ze]}))}performAction(be){be.perform(),be.source.publishEvent(new S.WG({source:be.source}),!0),be.addedObject&&this.newObjectAddedToCanvas(be.addedObject),be.movedObject&&this.selectObject(be.movedObject,be.movedObject.state.key,{force:!0}),be.removedObject&&this.clearSelection()}redoAction(){const be=this.state.redoStack.slice(),ze=be.pop();ze&&(this.performAction(ze),this.setState({redoStack:be,undoStack:[...this.state.undoStack,ze]}))}enableSelection(){this.setState({selectionContext:{...this.state.selectionContext,enabled:!0}})}disableSelection(){this.setState({selectionContext:{...this.state.selectionContext,selected:[],enabled:!1},selection:void 0})}selectElement(be,ze){let nt=i.jh.findByKey(this,be.id);if(nt){if((0,D.bn)(nt))return;this.selectObject(nt,be.id,ze)}}getSelection(){return this.state.selection?.getSelection()}selectObject(be,ze,{multi:nt,force:yt}={}){if(!yt){if(nt){if(this.state.selection?.hasValue(ze)){this.removeMultiSelectedObject(ze);return}}else if(this.state.selection?.getFirstObject()===be){this.clearSelection();return}}const bt=this.state.selection??new B([[ze,be.getRef()]]),{selection:St,contextItems:zt}=bt.getStateWithValue(ze,be,!!nt);this.updateSelection(new B(St),zt)}removeMultiSelectedObject(be){if(!this.state.selection)return;const{entries:ze,contextItems:nt}=this.state.selection.getStateWithoutValueAt(be);if(ze.length===0){this.clearSelection();return}this.updateSelection(new B([...ze]),nt)}updateSelection(be,ze){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),this.setState({selection:be,selectionContext:{...this.state.selectionContext,selected:ze}})}clearSelection(){this.state.selection&&this.updateSelection(void 0,[])}newObjectAddedToCanvas(be){this.selectObject(be,be.state.key),this.state.selection?.markAsNewElement()}}function U(Ne){if(Ne.parent!==void 0)if(Ne.parent instanceof b.V){const be=Ne.parent,ze=Ne.parent.getParentLayout();ze.state.currentTabSlug!==be.getSlug()&&ze.switchToTab(be)}else U(Ne.parent)}var F=e(3204),I=e(74848),V=e(54314),M=e(60208),L=e(8207),N=e(30906),W=e(29646),R=e(96540),G=e(49785),w=e(54148),_=e(32899),Q=e(41654),ae=e(37386),q=e(63527),k=e(87105),ee=e(45861),j=e(77197),J=e(51898),Z=e(34999),te=e(31286),se=e(32635),ie=e(68143);function ce(Ne){return(0,ie.NF)(Ne)&&Ne.data&&Ne.data.status==="version-mismatch"}function re(Ne){return(0,ie.NF)(Ne)&&Ne.data&&Ne.data.status==="name-exists"}function ue(Ne){return(0,ie.NF)(Ne)&&Ne.data&&Ne.data.status==="plugin-dashboard"}function X({cancelButton:Ne,saveButton:be}){return r.$.featureToggles.restoreDashboards?(0,I.jsxs)(Z.F,{title:(0,s.t)("save-dashboards.name-exists.title","Dashboard name already exists"),severity:"error",children:[(0,I.jsx)("p",{children:(0,I.jsx)(s.x6,{i18nKey:"save-dashboards.name-exists.message-info",children:"A dashboard with the same name in the selected folder already exists, including recently deleted dashboards."})}),(0,I.jsx)("p",{children:(0,I.jsx)(s.x6,{i18nKey:"save-dashboards.name-exists.message-suggestion",children:"Please choose a different name or folder."})})]}):(0,I.jsxs)(Z.F,{title:(0,s.t)("dashboard-scene.name-already-exists-error.title-name-already-exists","Name already exists"),severity:"error",children:[(0,I.jsx)("p",{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.name-already-exists-error.body-name-already-exists",children:"A dashboard with the same name in selected folder already exists. Would you still like to save this dashboard?"})}),(0,I.jsx)(te.a,{paddingTop:2,children:(0,I.jsxs)(Q.B,{alignItems:"center",children:[Ne,be(!0)]})})]})}function le({overwrite:Ne,isLoading:be,isValid:ze,onSave:nt}){return(0,I.jsx)(ee.$n,{disabled:!ze||be,icon:be?"spinner":void 0,onClick:()=>nt(Ne),variant:Ne?"destructive":"primary","data-testid":J.Tp.components.Drawer.DashboardSaveDrawer.saveButton,children:be?(0,s.t)("dashboard-scene.save-button.saving","Saving..."):Ne?(0,s.t)("dashboard-scene.save-button.save-and-overwrite","Save and overwrite"):(0,s.t)("dashboard-scene.save-button.save","Save")})}var he=e(41053),fe=e(27489),Ce=e(64762),Ae=e(38206),_e=e(15203),Xe=e(52763),De=e(77731);function Me(Ne=!1){const be=(0,Xe.wA)(),ze=(0,Ce._2)(),[nt]=(0,_e.e8)(),[yt,bt]=(0,he.A)(async(St,zt)=>{{let qt=zt.rawDashboardJSON??St.getSaveModel();zt.saveAsCopy&&(qt=St.getSaveAsModel({isNew:zt.isNew,title:zt.title,description:zt.description,copyTags:zt.copyTags}));const gn=await nt({dashboard:qt,folderUid:zt.folderUid,message:zt.message,overwrite:zt.overwrite,showErrorAlert:!1,k8s:zt.k8s});if("error"in gn)throw gn.error;const Dn=gn.data;St.saveCompleted(qt,Dn,zt.folderUid),o.A.publish(new d.Eu),ze.success((0,s.t)("dashboard-scene.use-save-dashboard.message-dashboard-saved","Dashboard saved")),(0,De.ko)(Dn.uid),Ne?(0,fe.rR)("grafana_dashboard_copied",{name:qt.title,url:Dn.url}):(0,fe.rR)(`grafana_dashboard_${zt.isNew?"created":"saved"}`,{name:qt.title,url:Dn.url});const In=l.Ny.getLocation(),Hn=n.I.stripBaseFromUrl(Dn.url);return Hn!==In.pathname&&setTimeout(()=>{l.Ny.push({pathname:Hn,search:In.search})}),St.state.meta.isStarred&&be((0,Ae.TU)({id:Dn.uid,title:St.state.title,url:Hn})),gn.data}},[be,ze]);return{state:yt,onSaveDashboard:bt}}function Te({dashboard:Ne,drawer:be,changeInfo:ze}){const{hasChanges:nt,hasMigratedToV2:yt,changedSaveModel:bt}=ze,{state:St,onSaveDashboard:zt}=Me(!1),[qt,gn]=(0,R.useState)({folderUid:Ne.state.meta.folderUid,k8s:{...Ne.serializer.getK8SMetadata()}}),Dn=async Wn=>{(await zt(Ne,{...qt,rawDashboardJSON:bt,overwrite:Wn})).status==="success"&&(Ne.closeModal(),be.state.onSaveSuccess?.())},In=(0,I.jsx)(ee.$n,{variant:"secondary",onClick:()=>Ne.closeModal(),fill:"outline",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form.cancel-button.cancel",children:"Cancel"})}),Hn=Wn=>(0,I.jsx)(le,{isValid:nt,isLoading:St.loading,onSave:Dn,overwrite:Wn}),qn=Wn=>Wn&&Wn.length>500;function Kn(Wn){if(qn(qt.message)){const la=qt.message?.length??0;return(0,I.jsx)(Z.F,{title:(0,s.t)("save-dashboards.message-length.title","Message too long"),severity:"error",children:(0,I.jsx)("p",{children:(0,I.jsxs)(s.x6,{i18nKey:"save-dashboards.message-length.info",children:["The message is ",{messageLength:la}," characters, which exceeds the maximum length of 500 characters. Please shorten it before saving."]})})})}return ce(Wn)?(0,I.jsxs)(Z.F,{title:(0,s.t)("dashboard-scene.save-dashboard-form.render-footer.title-someone-else-has-updated-this-dashboard","Someone else has updated this dashboard"),severity:"error",children:[(0,I.jsx)("p",{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form.render-footer.would-still-dashboard",children:"Would you still like to save this dashboard?"})}),(0,I.jsx)(te.a,{paddingTop:2,children:(0,I.jsxs)(Q.B,{alignItems:"center",children:[In,Hn(!0)]})})]}):re(Wn)?(0,I.jsx)(X,{cancelButton:In,saveButton:Hn}):ue(Wn)?(0,I.jsxs)(Z.F,{title:(0,s.t)("dashboard-scene.save-dashboard-form.render-footer.title-plugin-dashboard","Plugin dashboard"),severity:"error",children:[(0,I.jsx)("p",{children:(0,I.jsxs)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form.render-footer.body-plugin-dashboard",children:["Your changes will be lost when you update the plugin. Use ",(0,I.jsx)("strong",{children:"Save as"})," to create custom version."]})}),(0,I.jsx)(te.a,{paddingTop:2,children:(0,I.jsxs)(Q.B,{alignItems:"center",children:[In,Hn(!0)]})})]}):(0,I.jsxs)(I.Fragment,{children:[Wn&&(0,I.jsx)(Z.F,{title:(0,s.t)("dashboard-scene.save-dashboard-form.render-footer.title-failed-to-save-dashboard","Failed to save dashboard"),severity:"error",children:(0,I.jsx)("p",{children:Wn.message})}),(0,I.jsxs)(Q.B,{alignItems:"center",children:[In,Hn(!1),!nt&&(0,I.jsx)("div",{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form.render-footer.no-changes-to-save",children:"No changes to save"})})]})]})}return(0,I.jsxs)(Q.B,{gap:2,direction:"column",children:[(0,I.jsx)($e,{drawer:be,changeInfo:ze}),yt&&(0,I.jsx)(Z.F,{title:(0,s.t)("dashboard-scene.save-dashboard-form.title-dashboard-drastically-changed","Dashboard irreversibly changed"),severity:"warning",children:(0,I.jsx)("p",{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form.body-dashboard-drastically-changed",children:"The dashboard will be saved using the new experimental Grafana dashboard schema. This action can\u2019t be reverted and could result in the irreversible loss of data. We recommend that you save this dashboard as a copy instead. If you\u2019re seeing this message in a production environment, contact Support to have the feature disabled."})})}),(0,I.jsx)(ae.D,{label:(0,s.t)("dashboard-scene.save-dashboard-form.label-message","Message"),children:(0,I.jsx)(k.f,{"aria-label":(0,s.t)("dashboard-scene.save-dashboard-form.aria-label-message","message"),value:qt.message??"",onChange:Wn=>{gn({...qt,message:Wn.currentTarget.value})},placeholder:(0,s.t)("dashboard-scene.save-dashboard-form.placeholder-describe-changes-optional","Add a note to describe your changes (optional)."),autoFocus:!0,rows:5})}),Kn(St.error)]})}function $e({drawer:Ne,changeInfo:be}){const{saveVariables:ze=!1,saveTimeRange:nt=!1,saveRefresh:yt=!1,showVariablesWarning:bt=!1}=Ne.useState(),{hasTimeChanges:St,hasVariableValueChanges:zt,hasRefreshChange:qt}=be;return(0,I.jsxs)(Q.B,{direction:"column",alignItems:"flex-start",children:[St&&(0,I.jsx)(se.S,{id:"save-timerange",checked:nt,onChange:Ne.onToggleSaveTimeRange,label:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-timerange-label-update-default-time-range","Update default time range"),description:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-timerange-description-current-range-default","Will make current time range the new default"),"data-testid":J.Tp.pages.SaveDashboardModal.saveTimerange}),qt&&(0,I.jsx)(se.S,{id:"save-refresh",label:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-refresh-label-update-default-refresh-value","Update default refresh value"),description:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-refresh-description-current-refresh-default","Will make the current refresh the new default"),checked:yt,onChange:Ne.onToggleSaveRefresh,"data-testid":J.Tp.pages.SaveDashboardModal.saveRefresh}),zt&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(se.S,{id:"save-variables",label:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-variables-label-update-default-variable-values","Update default variable values"),description:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.save-variables-description-current-values-default","Will make the current values the new default"),checked:ze,onChange:Ne.onToggleSaveVariables,"data-testid":J.Tp.pages.SaveDashboardModal.saveVariables}),ze&&bt&&(0,I.jsx)(Z.F,{"data-testid":J.Tp.pages.SaveDashboardModal.variablesWarningAlert,title:(0,s.t)("dashboard-scene.save-dashboard-form-common-options.show-variables-warning-alert-title","Variable queries failed"),severity:"warning",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form-common-options.show-variables-warning-alert-body",children:"Some variables failed to load. If you keep \u201CUpdate default variable values\u201D checked, the current (failed) values will become the dashboard defaults. You can save anyway or uncheck the option to avoid storing those (failed) values."})})]})]})}var Re=e(52043),Ke=e(89223),Ve=e(91555),Se=e(83793);function Ye(Ne){const[be,ze]=(0,Se.tj)(),[nt,yt]=(0,Se.XM)();return[(0,R.useCallback)(St=>(Ne?nt:be)(St),[be,Ne,nt]),Ne?yt:ze]}var Ue=e(34621),je=e(49314),Qe=e(94626),He=e(96733),Je=e(65411),de=e(87161),ve=e(8535);async function me(Ne){if(!Ne||!r.$.featureToggles.provisioning)return{};const ze=(await(0,ve.JD)(de.Zt.endpoints.getFolder.initiate({name:Ne})).unwrap()).metadata.annotations?.[x.Jw];return ze?{k8s:{annotations:{[x.Jw]:ze,[x.LH]:x.Sf.Repo}}}:{}}function xe({defaultValues:Ne,dashboard:be,drawer:ze,changeInfo:nt,isNew:yt,loadedFromRef:bt,workflowOptions:St,readOnly:zt,repository:qt}){const gn=(0,w.Zp)(),Dn=(0,c.J7)(),{isDirty:In,editPanel:Hn}=be.useState(),[qn,Kn]=Ye(yt?void 0:Ne.path),Wn=(0,G.mN)({defaultValues:Ne}),{handleSubmit:la,watch:La,control:sa,reset:pa,register:Bn}=Wn,[Ea]=La(["workflow"]);(0,R.useEffect)(()=>{pa(Ne)},[Ne,pa]);const Ia=_a=>{Dn.publish({type:_.r1.alertError.name,payload:[(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.api-error","Error saving dashboard"),_a]})},ua=_a=>{const Qa=n.I.assureBaseUrl((0,Re.u)({uid:_a.metadata.name,slug:j.A.slugifyForUrl(_a.spec.title??""),currentQueryParams:window.location.search}));gn(Qa)},os=(_a,Qa)=>{Rr(),yt&&Qa?.metadata.name?ua(Qa):l.Ny.partial({viewPanel:null,editPanel:null})},Ms=(_a,Qa,is,Va)=>{if(Rr(),yt&&Va?.metadata?.name)ua(Va);else{const ga=(0,je.q)({baseUrl:`${Ve.mL}/${Ne.repo}/dashboard/preview/${Qa}`,paramName:"ref",paramValue:_a,repoType:is.repoType});gn(ga)}},Rr=()=>{Hn?.onDiscard();const _a=be.getSaveModel(),Qa=Kn?.data?.resource.dryRun,is=Oe(Qa);be.saveCompleted(_a,is,Ne.folder?.uid),ze.onClose()};(0,Ue.J)({folderUID:Ne.folder?.uid,request:Kn,workflow:Ea,resourceType:"dashboard",handlers:{onBranchSuccess:({ref:_a,path:Qa},is,Va)=>Ms(_a,Qa,is,Va),onWriteSuccess:os,onError:Ia}});const lo=async({title:_a,description:Qa,repo:is,path:Va,comment:ga,ref:_s})=>{if(!is||!Va){console.error("Missing required fields for saving:",{repo:is,path:Va});return}const vs=ga||`Save dashboard: ${be.state.title}`,Ar=be.getSaveResource({isNew:yt,title:_a,description:Qa});qn({ref:_s,name:is,path:Va,message:vs,body:Ar})};return(0,I.jsx)(G.Op,{...Wn,children:(0,I.jsx)("form",{onSubmit:la(lo),name:"save-provisioned-form",children:(0,I.jsxs)(Q.B,{direction:"column",gap:2,children:[zt&&(0,I.jsx)(He.t,{noRepository:!1,isReadOnlyRepo:!0,readOnlyMessage:"If you have direct access to the target, copy the JSON and paste it there."}),yt&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(ae.D,{noMargin:!0,label:(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.label-title","Title"),invalid:!!Wn.formState.errors.title,error:Wn.formState.errors.title?.message,children:(0,I.jsx)(q.p,{id:"dashboard-title",...Bn("title",{required:(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.title-required","Dashboard title is required"),validate:Ee})})}),(0,I.jsx)(ae.D,{noMargin:!0,label:(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.label-description","Description"),invalid:!!Wn.formState.errors.description,error:Wn.formState.errors.description?.message,children:(0,I.jsx)(k.f,{id:"dashboard-description",...Bn("description")})}),(0,I.jsx)(ae.D,{noMargin:!0,label:(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.label-target-folder","Target folder"),children:(0,I.jsx)(G.xI,{control:sa,name:"folder",render:({field:{ref:_a,value:Qa,onChange:is,...Va}})=>(0,I.jsx)(Qe.a,{onChange:async(ga,_s)=>{is({uid:ga,title:_s}),Pe("folderUid",ga);const vs=await me(ga);be.setState({meta:{...vs,folderUid:ga}})},value:Qa.uid,...Va,showAllFolders:!0})})})]}),!yt&&!zt&&(0,I.jsx)($e,{drawer:ze,changeInfo:nt}),(0,I.jsx)(Je.x,{resourceType:"dashboard",readOnly:zt,workflow:Ea,workflowOptions:St,repository:qt,isNew:yt}),(0,I.jsxs)(Q.B,{gap:2,children:[(0,I.jsx)(ee.$n,{variant:"secondary",onClick:ze.onClose,fill:"outline",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.cancel",children:"Cancel"})}),(0,I.jsx)(ee.$n,{variant:"primary",type:"submit",disabled:Kn.isLoading||!In||zt,children:Kn.isLoading?(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.saving","Saving..."):(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.save","Save")})]})]})})})}async function Ee(Ne,be){if(Ne===be.folder.title?.trim())return(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.title-same-as-folder","Dashboard name cannot be the same as the folder name");try{return await Ke.P.validateNewDashboardName(be.folder.uid??"general",Ne),!0}catch(ze){return ze instanceof Error?ze.message:(0,s.t)("dashboard-scene.save-provisioned-dashboard-form.title-validation-failed","Dashboard title validation failed.")}}function Pe(Ne,be){if(be==null)return;const ze=new URL(window.location.href);ze.searchParams.set(Ne,be),window.history.replaceState({},"",ze)}function Oe(Ne){const be=Ne?.metadata?.name,ze=Ne?.spec?.title,nt=j.A.slugifyForUrl(ze);return{uid:be,version:Ne?.metadata?.generation,id:Ne?.spec?.id||0,status:"success",url:n.I.assureBaseUrl((0,Re.u)({uid:be,slug:nt,currentQueryParams:""})),slug:nt}}function We({drawer:Ne,changeInfo:be,dashboard:ze}){const{isNew:nt,defaultValues:yt,loadedFromRef:bt,workflowOptions:St,readOnly:zt,repository:qt}=(0,W.S)(ze);return yt?(0,I.jsx)(xe,{dashboard:ze,drawer:Ne,changeInfo:be,isNew:nt,defaultValues:yt,loadedFromRef:bt,repository:qt,workflowOptions:St,readOnly:zt}):null}var Fe=e(55266);function Be(Ne){const ze=new URLSearchParams(window.location.search).get("folderUid")||void 0,{repository:nt,isInstanceManaged:yt}=(0,Fe.T)({folderName:ze});return r.$.featureToggles.provisioning?Ne.isManagedRepository()||!!nt||yt:!1}var Le=e(76459),Ge=e.n(Le),Ze=e(21285),qe=e(72636),at=e(91156);function ht({dashboard:Ne,changeInfo:be}){const{changedSaveModel:ze}=be,{register:nt,handleSubmit:yt,setValue:bt,formState:St,getValues:zt,watch:qt}=(0,G.mN)({mode:"onBlur",defaultValues:{title:be.isNew?ze.title:`${ze.title} Copy`,description:ze.description??"",folder:{uid:Ne.state.meta.folderUid,title:Ne.state.meta.folderTitle},copyTags:!1}}),{errors:gn,isValid:Dn}=St,In=qt(),{state:Hn,onSaveDashboard:qn}=Me(!1),[Kn,Wn]=(0,R.useState)({}),[la,La]=(0,R.useState)(!1),sa=async Ia=>{const ua=zt();(await qn(Ne,{overwrite:Ia,folderUid:ua.folder.uid,rawDashboardJSON:ze,saveAsCopy:!0,isNew:be.isNew,copyTags:ua.copyTags,title:ua.title,description:ua.description})).status==="success"?Ne.closeModal():Wn({title:ua.title,folderUid:ua.folder.uid})},pa=(0,I.jsx)(ee.$n,{variant:"secondary",onClick:()=>Ne.closeModal(),fill:"outline",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-as-form.cancel-button.cancel",children:"Cancel"})}),Bn=Ia=>{const ua=!Dn&&la?!0:Dn;return(0,I.jsx)(le,{isValid:ua,isLoading:Hn.loading,onSave:sa,overwrite:Ia})};function Ea(Ia){const ua=In.title.trim()===Kn.title&&In.folder.uid===Kn.folderUid;return re(Ia)&&ua?(0,I.jsx)(X,{cancelButton:pa,saveButton:Bn}):(0,I.jsxs)(I.Fragment,{children:[Ia&&ua&&(0,I.jsx)(Z.F,{title:(0,s.t)("dashboard-scene.save-dashboard-as-form.render-footer.title-failed-to-save-dashboard","Failed to save dashboard"),severity:"error",children:Ia.message&&(0,I.jsx)("p",{children:Ia.message})}),(0,I.jsxs)(Q.B,{alignItems:"center",children:[pa,Bn(!1)]})]})}return(0,I.jsxs)("form",{onSubmit:yt(()=>sa(!1)),children:[(0,I.jsx)(ae.D,{label:(0,I.jsx)(Et,{onChange:bt}),invalid:!!gn.title,error:gn.title?.message,children:(0,I.jsx)(q.p,{...nt("title",{required:(0,s.t)("dashboard-scene.save-dashboard-as-form.required","Required"),validate:Pt}),"aria-label":(0,s.t)("dashboard-scene.save-dashboard-as-form.aria-label-save-dashboard-title-field","Save dashboard title field"),"data-testid":J.Tp.components.Drawer.DashboardSaveDrawer.saveAsTitleInput,onChange:Ge()(async Ia=>{bt("title",Ia.target.value,{shouldValidate:!0})},400)})}),(0,I.jsx)(ae.D,{label:(0,I.jsx)(mt,{onChange:bt}),invalid:!!gn.description,error:gn.description?.message,children:(0,I.jsx)(k.f,{...nt("description",{required:!1}),"aria-label":(0,s.t)("dashboard-scene.save-dashboard-as-form.aria-label-save-dashboard-description-field","Save dashboard description field"),autoFocus:!0})}),(0,I.jsx)(ae.D,{label:(0,s.t)("dashboard-scene.save-dashboard-as-form.label-folder","Folder"),children:(0,I.jsx)(at.d,{onChange:async(Ia,ua)=>{bt("folder",{uid:Ia,title:ua});const os=Ne.state.meta.folderUid;La(Ia!==os);const Ms=await me(Ia);Ne.setState({meta:{...Ms,folderUid:Ia}})},value:In.folder?.uid})}),!be.isNew&&(0,I.jsx)(ae.D,{label:(0,s.t)("dashboard-scene.save-dashboard-as-form.label-copy-tags","Copy tags"),children:(0,I.jsx)(Ze.d,{...nt("copyTags")})}),(0,I.jsx)(te.a,{paddingTop:2,children:Ea(Hn.error)})]})}function Et(Ne){return(0,I.jsx)(Q.B,{justifyContent:"space-between",children:(0,I.jsx)(qe.J,{htmlFor:"description",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.title-field-label.title",children:"Title"})})})}function mt(Ne){return(0,I.jsx)(Q.B,{justifyContent:"space-between",children:(0,I.jsx)(qe.J,{htmlFor:"description",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.description-label.description",children:"Description"})})})}async function Pt(Ne,be){if(Ne===be.folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await Ke.P.validateNewDashboardName(be.folder.uid??"general",Ne),!0}catch(ze){return ze instanceof Error?ze.message:"Dashboard name is invalid"}}var rt=e(22803),Kt=e(4213),Gt=e(70713),en=e(89640),st=e(50992),$t=e(47931);function xn({dashboard:Ne,drawer:be,changeInfo:ze}){const nt=(0,R.useMemo)(()=>JSON.stringify(ze.changedSaveModel,null,2),[ze]),yt=(0,R.useCallback)(()=>{const bt=new Blob([nt],{type:"application/json;charset=utf-8"});(0,Kt.saveAs)(bt,ze.changedSaveModel.title+"-"+new Date().getTime()+".json")},[ze.changedSaveModel,nt]);return(0,I.jsx)("div",{className:pn.container,children:(0,I.jsxs)(Q.B,{direction:"column",gap:2,grow:1,children:[(0,I.jsxs)("div",{children:[(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.cannot-be-saved",children:"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source."}),(0,I.jsx)("br",{}),(0,I.jsx)("i",{children:(0,I.jsxs)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.see-docs",children:["See"," ",(0,I.jsx)(en.Y,{href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",external:!0,children:"documentation"})," ","for more information about provisioning."]})}),(0,I.jsx)("br",{})," ",(0,I.jsx)("br",{}),(0,I.jsxs)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.file-path",values:{filePath:Ne.state.meta.provisionedExternalId},children:[(0,I.jsx)("strong",{children:"File path:"})," ","{{filePath}}"]})]}),(0,I.jsx)($e,{drawer:be,changeInfo:ze}),(0,I.jsx)("div",{className:pn.json,children:(0,I.jsx)(Gt.Ay,{disableWidth:!0,children:({height:bt})=>(0,I.jsx)(st.B,{width:"100%",height:bt,language:"json",showLineNumbers:!0,showMiniMap:nt.length>100,value:nt,readOnly:!0})})}),(0,I.jsx)(te.a,{paddingTop:2,children:(0,I.jsxs)(Q.B,{gap:2,children:[(0,I.jsx)(ee.$n,{variant:"secondary",onClick:be.onClose,fill:"outline",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.cancel",children:"Cancel"})}),(0,I.jsx)($t.b,{icon:"copy",getText:()=>nt,children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.copy-json-to-clipboard",children:"Copy JSON to clipboard"})}),(0,I.jsx)(ee.$n,{type:"submit",onClick:yt,children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.save-provisioned-dashboard-form.save-json-to-file",children:"Save JSON to file"})})]})})]})})}const pn={container:(0,rt.css)({height:"100%",display:"flex"}),json:(0,rt.css)({flexGrow:1,maxHeight:"800px"})};class _n extends i.Bs{constructor(){super(...arguments),this.onClose=()=>{const be=this.state.dashboardRef.resolve(),ze=be.getDashboardChanges();be.setState({overlay:void 0,meta:ze.isNew?be.getInitialState()?.meta:be.state.meta})},this.onToggleSaveTimeRange=()=>{this.setState({saveTimeRange:!this.state.saveTimeRange})},this.onToggleSaveVariables=()=>{this.setState({saveVariables:!this.state.saveVariables})},this.onToggleSaveRefresh=()=>{this.setState({saveRefresh:!this.state.saveRefresh})}}static{this.Component=kn}}function kn({model:Ne}){const{showDiff:be,saveAsCopy:ze,saveTimeRange:nt,saveVariables:yt,saveRefresh:bt}=Ne.useState(),St=Ne.state.dashboardRef.resolve().getDashboardChanges(nt,yt,bt),{changedSaveModel:zt,initialSaveModel:qt,diffs:gn,diffCount:Dn,hasFolderChanges:In,hasMigratedToV2:Hn}=St,qn=Dn+(In?1:0),Kn=Ne.state.dashboardRef.resolve(),{meta:Wn}=Kn.useState(),{provisioned:la,folderTitle:La}=Wn,sa=Kn.managedResourceCannotBeEdited(),pa=Be(Kn),Bn=(0,I.jsxs)(V.U,{children:[(0,I.jsx)(M.o,{label:(0,s.t)("dashboard-scene.save-dashboard-drawer.tabs.label-details","Details"),active:!be,onChangeTab:()=>Ne.setState({showDiff:!1})}),qn>0&&!sa&&(0,I.jsx)(M.o,{label:(0,s.t)("dashboard-scene.save-dashboard-drawer.tabs.label-changes","Changes"),active:be,onChangeTab:()=>Ne.setState({showDiff:!0}),counter:qn})]});let Ea=(0,s.t)("dashboard-scene.save-dashboard-drawer.tabs.title","Save dashboard");ze?Ea=(0,s.t)("dashboard-scene.save-dashboard-drawer.tabs.title-copy","Save dashboard copy"):(la||pa)&&(Ea=(0,s.t)("dashboard-scene.save-dashboard-drawer.tabs.title-provisioned","Provisioned dashboard"));const Ia=()=>be?(0,I.jsx)(N.l,{diff:gn,oldValue:qt,newValue:zt,hasFolderChanges:In,hasMigratedToV2:Hn,oldFolder:Kn.getInitialState()?.meta.folderTitle,newFolder:La}):pa?(0,I.jsx)(We,{dashboard:Kn,changeInfo:St,drawer:Ne}):ze||St.isNew?(0,I.jsx)(ht,{dashboard:Kn,changeInfo:St}):la||sa?(0,I.jsx)(xn,{dashboard:Kn,changeInfo:St,drawer:Ne}):(0,I.jsx)(Te,{dashboard:Kn,changeInfo:St,drawer:Ne});return(0,I.jsx)(L._,{title:Ea,subtitle:Kn.state.title,onClose:Ne.onClose,tabs:Bn,children:Ia()})}var Jn=e(60171),pt=e(4604),Rt=e(95710),Mt=e(17862),Bt=e(26604),Nt=e(13241),Yt=e(70030),Qt=e(62265);class En{constructor(){this.elementPanelMap=new Map,this.defaultDsReferencesMap={panels:new Map,variables:new Set,annotations:new Set}}initializeElementMapping(be){this.elementPanelMap.clear(),!(!be||!be.panels)&&be.panels?.forEach(ze=>{if(ze.id){const nt=(0,C.XA)(ze.id);this.elementPanelMap.set(nt,ze.id)}})}getElementPanelMapping(){return this.elementPanelMap}initializeDSReferencesMapping(be){return{}}getDSReferencesMapping(){return this.defaultDsReferencesMap}getPanelIdForElement(be){return this.elementPanelMap.get(be)}getElementIdForPanel(be){for(const[nt,yt]of this.elementPanelMap.entries())if(yt===be)return nt;const ze=(0,C.XA)(be);return this.elementPanelMap.set(ze,be),ze}getSaveModel(be){return(0,Yt.Uy)(be)}getSaveAsModel(be,ze){const nt=this.getSaveModel(be);return{...nt,id:null,uid:"",title:ze.title||"",description:ze.description||void 0,tags:ze.isNew||ze.copyTags?nt.tags:[]}}getDashboardChangesFromScene(be,ze){const nt=this.getSaveModel(be),yt=(0,Mt.Cj)(this.initialSaveModel,nt,ze.saveTimeRange,ze.saveVariables,ze.saveRefresh),bt=be.getInitialState()?.meta.folderUid!==be.state.meta.folderUid;return{...yt,hasFolderChanges:bt,hasChanges:yt.hasChanges||bt,hasMigratedToV2:!1}}onSaveComplete(be,ze){this.initialSaveModel={...be,id:ze.id,uid:ze.uid,version:ze.version},this.metadata={...this.metadata,k8s:{...this.metadata?.k8s,generation:ze.version}}}getK8SMetadata(){return this.metadata?.k8s}getTrackingInformation(){const be=this.initialSaveModel?.panels?.map(yt=>yt.type)||[],ze=(0,Rt.GC)(be),nt=(0,Rt.wM)(this.initialSaveModel?.templating?.list||[]);if(this.initialSaveModel)return{uid:this.initialSaveModel.uid,title:this.initialSaveModel.title,schemaVersion:this.initialSaveModel.schemaVersion,panels_count:this.initialSaveModel.panels?.length||0,settings_nowdelay:void 0,settings_livenow:!!this.initialSaveModel.liveNow,...ze,...nt}}getSnapshotUrl(){return this.initialSaveModel?.snapshot?.originalUrl}async makeExportableExternally(be){const ze=this.getSaveModel(be),nt=new v.G(ze,void 0,{getVariablesFromState:()=>(0,Nt.E)(window.__grafanaSceneContext)});return await(0,Bt.E)(nt)}}class vn{constructor(){this.elementPanelMap=new Map,this.defaultDsReferencesMap={panels:new Map,variables:new Set,annotations:new Set}}getElementPanelMapping(){return this.elementPanelMap}initializeElementMapping(be){if(this.elementPanelMap.clear(),!be||!be.elements)return;Object.keys(be.elements).forEach(nt=>{const yt=be.elements[nt];yt.kind==="Panel"&&this.elementPanelMap.set(nt,yt.spec.id)})}initializeDSReferencesMapping(be){if(be===void 0||be&&!(0,Jn.aK)(be))return;if(this.defaultDsReferencesMap={panels:new Map,variables:new Set,annotations:new Set},Object.keys(be?.elements||{}).forEach(nt=>{const yt=be?.elements[nt];if(yt?.kind==="Panel"){const bt=yt.spec.data.spec.queries;for(const St of bt)if(!St.spec.query.datasource?.name){const zt=this.getElementIdForPanel(yt.spec.id);this.defaultDsReferencesMap.panels.has(zt)||this.defaultDsReferencesMap.panels.set(zt,new Set),this.defaultDsReferencesMap.panels.get(zt).add(St.spec.refId)}}}),be?.variables)for(const nt of be.variables)nt.kind==="QueryVariable"&&!nt.spec.query.datasource?.name&&this.defaultDsReferencesMap.variables.add(nt.spec.name);if(be?.annotations)for(const nt of be.annotations)nt.spec.query?.datasource?.name||this.defaultDsReferencesMap.annotations.add(nt.spec.name)}getDSReferencesMapping(){return this.defaultDsReferencesMap}getPanelIdForElement(be){return this.elementPanelMap.get(be)}getElementIdForPanel(be){for(const[nt,yt]of this.elementPanelMap.entries())if(yt===be)return nt;const ze=(0,C.XA)(be);return this.elementPanelMap.set(ze,be),ze}getSaveModel(be){return(0,Qt.Xl)(be)}getSaveAsModel(be,ze){const nt=this.getSaveModel(be);return{...nt,title:ze.title||"",description:ze.description||"",tags:ze.isNew||ze.copyTags?nt.tags:[]}}getDashboardChangesFromScene(be,ze){const nt=this.getSaveModel(be),yt=(0,Mt.AM)(this.initialSaveModel,nt,ze.saveTimeRange,ze.saveVariables,ze.saveRefresh),bt=be.getInitialState()?.meta.folderUid!==be.state.meta.folderUid,St=!be.getInitialState()?.uid;return{...yt,hasFolderChanges:bt,hasChanges:yt.hasChanges||bt,isNew:St,hasMigratedToV2:!!yt.hasMigratedToV2}}onSaveComplete(be,ze){this.initialSaveModel={...be},this.metadata&&(this.metadata={...this.metadata,generation:ze.version})}getK8SMetadata(){return this.metadata}getTrackingInformation(be){if(!this.initialSaveModel)return;const ze="elements"in this.initialSaveModel?Object.values(this.initialSaveModel.elements).filter(bt=>bt.kind==="Panel").map(bt=>bt.spec.vizConfig.group):[],nt=(0,Rt.GC)(ze),yt="variables"in this.initialSaveModel?(0,Rt.z9)(this.initialSaveModel.variables):[];return{schemaVersion:pt.O2,uid:be.state.uid,title:this.initialSaveModel.title,panels_count:ze.length||0,settings_nowdelay:void 0,settings_livenow:!!this.initialSaveModel.liveNow,...nt,...yt}}getSnapshotUrl(){return this.metadata?.annotations?.[x.UL]}async makeExportableExternally(be){return await(0,Bt.j)(this.getSaveModel(be))}}function Sn(Ne){return Ne==="v2"?new vn:new En}var mn=e(4974),wn=e(17340),Ln=e(67350),Zn=e(65333),da=e(19161),Pa=e(64423),Xn=e(19379),Oa=e(84229),ba=e(80011),oa=e(88632),Na=e(99392),ya=e(33380);class Dt{constructor(be){this._scene=be,this.events=new Xn.o,this._subs=new Pa.yU;const ze=i.jh.getTimeRange(be);this.formatDate=this.formatDate.bind(this),this._subs.add(ze.subscribeToState((nt,yt)=>{nt.value!==yt.value&&this.events.publish(new c.sR(nt.value))}))}get id(){return this._scene.state.id??null}get uid(){return this._scene.state.uid??null}get title(){return this._scene.state.title}get description(){return this._scene.state.description}get editable(){return this._scene.state.editable}get graphTooltip(){return this._getSyncMode()}get timepicker(){return{refresh_intervals:this._scene.state.controls.state.refreshPicker.state.intervals,hidden:this._scene.state.controls.state.hideTimeControls??!1}}get timezone(){return this.getTimezone()}get weekStart(){return i.jh.getTimeRange(this._scene).state.weekStart}get tags(){return this._scene.state.tags}get links(){return this._scene.state.links}get meta(){return this._scene.state.meta}get time(){const be=i.jh.getTimeRange(this._scene);return{from:be.state.from,to:be.state.to}}get panels(){return wt(this._scene,ze=>ze instanceof i.Eb).map(ze=>new ya.R(ze))}get annotations(){const be={list:[]};return this._scene.state.$data instanceof oa.s&&(be.list=(0,Na.O)(this._scene.state.$data.state.annotationLayers)),be}getTimezone(){return i.jh.getTimeRange(this._scene).getTimeZone()}sharedTooltipModeEnabled(){return this._getSyncMode()>0}sharedCrosshairModeOnly(){return this._getSyncMode()===1}_getSyncMode(){if(this._scene.state.$behaviors){for(const be of this._scene.state.$behaviors)if(be instanceof i.Gg.K2)return be.state.sync}return Oa.y.Off}otherPanelInFullscreen(be){return!1}formatDate(be,ze){return(0,ba.LE)(be,{format:ze,timeZone:this.getTimezone()})}getPanelById(be){const ze=(0,C.vL)(this._scene,(0,C.XA)(be));return ze?new ya.R(ze):null}removePanel(be){const ze=(0,C.vL)(this._scene,(0,C.XA)(be.id));if(!ze){console.error("Trying to remove a panel that was not found in scene",be);return}this._scene.removePanel(ze)}canEditAnnotations(be){return this._scene.canEditDashboard()?be?!!this._scene.state.meta.annotationsPermissions?.dashboard.canEdit:!!this._scene.state.meta.annotationsPermissions?.organization.canEdit:!1}panelInitialized(){}destroy(){this.events.removeAllListeners(),this._subs.unsubscribe()}hasUnsavedChanges(){return this._scene.state.isDirty}}function wt(Ne,be){let ze=[];return Ne.forEachChild(nt=>{be(nt)?ze.push(nt):ze=ze.concat(wt(nt,be))}),ze}var Zt=e(1682),cn=e(52258),nn=e(63142);class ut extends i.Bs{constructor(be){super({...be,jsonText:""}),this.onClose=()=>{this.state.dashboardRef.resolve().setState({overlay:void 0})},this.onSave=()=>{},this.addActivationHandler(()=>this.setState({jsonText:this.getJsonText()}))}getJsonText(){const be=this.state.dashboardRef.resolve();return JSON.stringify((0,Qt.Xl)(be),null,2)}static{this.Component=({model:be})=>{const{jsonText:ze}=be.useState(),nt=(0,nn.of)(Ut),yt=()=>(0,I.jsxs)("div",{className:nt.wrapper,children:[(0,I.jsx)(st.B,{width:"100%",value:ze,language:"json",showLineNumbers:!0,showMiniMap:!0,containerStyles:nt.codeEditor,onBlur:bt=>be.setState({jsonText:bt})}),(0,I.jsx)(te.a,{paddingTop:2,children:(0,I.jsx)(ee.$n,{onClick:be.onSave,disabled:!0,children:"Update dashboard"})})]});return(0,I.jsx)(L._,{title:"[DEV] Schema V2 editor",subtitle:"Allows editing dashboard using v2 schema. Changes are not persisted in db.",onClose:be.onClose,children:yt()})}}}const Ut=Ne=>({wrapper:(0,rt.css)({display:"flex",height:"100%",flexDirection:"column",gap:Ne.spacing(2)}),codeEditor:(0,rt.css)({flexGrow:1})});var Ot=e(24438),ct=e(7094),gt=e(3688);class Ct extends i.Bs{constructor(){super(...arguments),this.onClose=()=>{(0,C.YQ)(this).closeModal()},this.onAddLibraryPanel=be=>{const ze=(0,C.YQ)(this),nt=(0,C.O8)();nt.setState({title:be.model.title,hoverHeader:!be.model.title,$behaviors:[new ct.u({uid:be.uid,name:be.name})]});const yt=this.state.panelToReplaceRef?.resolve();if(yt){const bt=yt.parent;bt&&(0,gt.y)(bt)&&(nt.setState({key:yt.state.key}),bt.setElementBody(nt))}else ze.addPanel(nt);this.onClose()}}static{this.Component=({model:be})=>{const ze=(0,s.t)("library-panel.add-widget.title","Add panel from panel library");return(0,I.jsx)(L._,{title:ze,onClose:be.onClose,children:(0,I.jsx)(Ot.j,{onClick:be.onAddLibraryPanel,variant:Ot.s.Tight,showPanelFilter:!0})})}}}var Wt=e(36324);function Ft(Ne){return"isDashboardDropTarget"in Ne&&Ne.isDashboardDropTarget===!0}class Vt extends i.Bs{constructor(){super({}),this._sourceDropTarget=null,this._lastDropTarget=null,this._pointerDistance=(0,Wt.b)(),this._isSelectedObject=!1,this._onPointerMove=this._onPointerMove.bind(this),this._stopDraggingSync=this._stopDraggingSync.bind(this),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){return()=>{document.body.removeEventListener("pointermove",this._onPointerMove),document.body.removeEventListener("pointerup",this._stopDraggingSync)}}startDraggingSync(be,ze){this._pointerDistance.set(be),this._isSelectedObject=!1;const nt=i.jh.findObject(ze,Ft);!nt||!Ft(nt)||(this._sourceDropTarget=nt,this._lastDropTarget=nt,document.body.addEventListener("pointermove",this._onPointerMove),document.body.addEventListener("pointerup",this._stopDraggingSync),this.setState({draggingPanel:ze.getRef()}))}_stopDraggingSync(be){const ze=this.state.draggingPanel?.resolve();this._sourceDropTarget!==this._lastDropTarget&&setTimeout(()=>{this._sourceDropTarget?.draggedPanelOutside?.(ze),this._lastDropTarget?.draggedPanelInside?.(ze)}),document.body.removeEventListener("pointermove",this._onPointerMove),document.body.removeEventListener("pointerup",this._stopDraggingSync),this.setState({draggingPanel:void 0})}_onPointerMove(be){if(!this._isSelectedObject&&this.state.draggingPanel&&this._pointerDistance.check(be)){this._isSelectedObject=!0;const nt=this.state.draggingPanel?.resolve();this._getDashboard().state.editPane.selectObject(nt,nt.state.key,{force:!0,multi:!1})}const ze=this._getDropTargetUnderMouse(be)??this._sourceDropTarget;ze&&ze!==this._lastDropTarget&&(this._lastDropTarget?.setIsDropTarget?.(!1),this._lastDropTarget=ze,ze!==this._sourceDropTarget&&ze.setIsDropTarget?.(!0))}_getDashboard(){if(!(this.parent instanceof io))throw new Error("Parent is not a DashboardScene");return this.parent}_getDropTargetUnderMouse(be){const ze=document.elementsFromPoint(be.clientX,be.clientY);if(ze.some(St=>St.getAttribute("data-dashboard-drop-target-key")===this._sourceDropTarget?.state.key))return null;const yt=ze?.find(St=>St.getAttribute("data-dashboard-drop-target-key"))?.getAttribute("data-dashboard-drop-target-key");if(!yt)return null;const bt=i.jh.findByKey(this._getDashboard(),yt);return!bt||!Ft(bt)?null:bt}}var Ht=e(75683),dn=e(69896),sn=e(13791),Rn=e(92293),rn=e(56887),Yn=e(94076),ea=e(82754),An=e(66483),Fa=e(33149),jt=e(78685),tn=e(93008),an=e(7895),Pn=e(66404),Mn=e(30703),Un=e(92807);function aa(Ne){const[be,ze]=(0,R.useState)({}),nt=qt=>{Ne.onChangeName&&ze({isRenaming:!0,originalName:Ne.getEditableElementInfo().instanceName})},yt=()=>{be.error&&Ne.onChangeName(be.originalName),ze({})},bt=(0,R.useMemo)(()=>qt=>{qt?.focus(),qt?.select()},[]),St=qt=>{const gn=Ne.onChangeName(qt.target.value);gn?.errorMessage?ze({...be,error:gn.errorMessage}):be.error&&ze({...be,error:void 0})},zt=qt=>{qt.key==="Enter"&&yt()};return{isRenaming:be.isRenaming,onNameDoubleClicked:nt,renameInputRef:bt,onChangeName:St,onInputBlur:yt,onInputKeyDown:zt}}function ia({editPane:Ne}){const be=(0,C.YQ)(Ne);return(0,I.jsx)(te.a,{padding:1,gap:0,display:"flex",direction:"column",element:"ul",role:"tree",position:"relative",children:(0,I.jsx)(ta,{sceneObject:be,editPane:Ne,depth:0})})}function ta({sceneObject:Ne,editPane:be,depth:ze}){const nt=(0,nn.of)(na),{key:yt}=Ne.useState(),[bt,St]=(0,R.useState)(ze>0),{isSelected:zt,onSelect:qt}=(0,rn.y)(yt),gn=(0,R.useMemo)(()=>(0,D.bn)(Ne),[Ne]),Dn=(0,R.useMemo)(()=>(0,S.wT)(Ne),[Ne]),In=(0,s.t)("dashboard.outline.tree-item.no-title","<no title>"),Hn=Dn.getOutlineChildren?.()??[],qn=Dn.getEditableElementInfo(),Kn=qn.instanceName===""?In:qn.instanceName,Wn=aa(Dn),la=!!Dn.getOutlineChildren,La=pa=>{pa.stopPropagation(),zt||qt?.(pa),Dn.scrollIntoView?.()},sa=pa=>{pa.stopPropagation(),St(!bt)};return(0,I.jsxs)("li",{role:"treeitem","aria-selected":zt,className:nt.container,onClick:La,style:{"--depth":ze},children:[(0,I.jsxs)("div",{className:(0,rt.cx)(nt.row,{[nt.rowSelected]:zt}),children:[(0,I.jsx)("div",{className:nt.indentation}),la&&(0,I.jsx)("button",{className:nt.angleButton,onClick:sa,"data-testid":J.Tp.components.PanelEditor.Outline.node(Kn),children:(0,I.jsx)(Mn.I,{name:bt?"angle-right":"angle-down"})}),(0,I.jsxs)("button",{className:(0,rt.cx)(nt.nodeName,{[nt.nodeNameClone]:gn}),onDoubleClick:Wn.onNameDoubleClicked,"data-testid":J.Tp.components.PanelEditor.Outline.item(Kn),children:[(0,I.jsx)(Mn.I,{size:"sm",name:qn.icon}),Wn.isRenaming?(0,I.jsx)("input",{ref:Wn.renameInputRef,type:"text",value:qn.instanceName,className:nt.outlineInput,onChange:Wn.onChangeName,onBlur:Wn.onInputBlur,onKeyDown:Wn.onInputKeyDown}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(Q.B,{direction:"row",gap:.5,alignItems:"center",grow:1,children:[(0,I.jsx)("span",{children:Kn}),qn.isHidden&&(0,I.jsx)(Mn.I,{name:"eye-slash",size:"sm",className:nt.hiddenIcon})]}),gn&&(0,I.jsx)("span",{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard.outline.repeated-item",children:"Repeat"})})]})]})]}),la&&!bt&&(0,I.jsx)("ul",{className:nt.nodeChildren,role:"group",children:Hn.length>0?Hn.map(pa=>(0,I.jsx)(ta,{sceneObject:pa,editPane:be,depth:ze+1},pa.state.key)):(0,I.jsx)(Pn.E,{color:"secondary",element:"li",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard.outline.tree-item.empty",children:"(empty)"})})})]})}function na(Ne){return{container:(0,rt.css)({display:"flex",gap:Ne.spacing(.5),flexGrow:1,flexDirection:"column",borderRadius:Ne.shape.radius.default,color:Ne.colors.text.secondary}),containerSelected:(0,rt.css)({outline:`1px dashed ${Ne.colors.primary.border} !important`,outlineOffset:"0px",color:Ne.colors.text.primary}),row:(0,rt.css)({display:"flex",gap:Ne.spacing(.5),borderRadius:Ne.shape.radius.default,"&:hover":{color:Ne.colors.text.primary,outline:`1px dashed ${Ne.colors.border.strong}`,backgroundColor:Ne.colors.emphasize(Ne.colors.background.primary,.05)}}),rowSelected:(0,rt.css)({color:Ne.colors.text.primary,outline:`1px dashed ${Ne.colors.primary.border} !important`,backgroundColor:Ne.colors.emphasize(Ne.colors.background.primary,.05)}),indentation:(0,rt.css)({marginLeft:`calc(var(--depth) * ${Ne.spacing(3)})`}),angleButton:(0,rt.css)({boxShadow:"none",border:"none",background:"transparent",borderRadius:Ne.shape.radius.default,padding:0,color:"inherit",lineHeight:0}),nodeName:(0,rt.css)({boxShadow:"none",border:"none",background:"transparent",padding:0,borderRadius:Ne.shape.radius.default,color:"inherit",display:"flex",flexGrow:1,alignItems:"center",gap:Ne.spacing(.5),overflow:"hidden","> span":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),hiddenIcon:(0,rt.css)({color:Ne.colors.text.secondary,marginLeft:Ne.spacing(1)}),nodeNameClone:(0,rt.css)({color:Ne.colors.text.secondary,cursor:"not-allowed"}),outlineInput:(0,rt.css)({border:`1px solid ${Ne.components.input.borderColor}`,height:Ne.spacing(3),borderRadius:Ne.shape.radius.default,"&:focus":{outline:"none",boxShadow:"none"}}),nodeChildren:(0,rt.css)({display:"flex",flexDirection:"column",position:"relative",gap:Ne.spacing(.5),"&::before":{content:'""',position:"absolute",width:"1px",height:"100%",pointerEvents:"none",zIndex:1,background:Ne.colors.border.weak,marginLeft:`calc(11px + ${Ne.spacing(3)} * var(--depth))`}})}}var fa=e(76319),ca=e(88559),xa=e(87063);function ns({element:Ne,editPane:be}){const ze=Ne.getEditableElementInfo(),nt=(0,nn.of)(ps),yt=Ne.onCopy?.bind(Ne),bt=Ne.onDuplicate?.bind(Ne),St=Ne.onDelete?.bind(Ne),zt=Ne.onConfirmDelete?.bind(Ne),qt=()=>be.clearSelection(),gn=be.state.selection;return(0,I.jsxs)("div",{className:nt.wrapper,children:[(0,I.jsxs)(Q.B,{direction:"row",gap:.5,children:[gn&&(0,I.jsx)(fa.K,{name:"arrow-left",size:"lg",onClick:qt,tooltip:(0,s.t)("grafana.dashboard.edit-pane.go-back","Go back"),"aria-label":(0,s.t)("grafana.dashboard.edit-pane.go-back","Go back"),"data-testid":J.Tp.components.EditPaneHeader.backButton}),(0,I.jsx)(Pn.E,{children:ze.typeName})]}),(0,I.jsxs)(Q.B,{direction:"row",gap:1,children:[Ne.renderActions&&Ne.renderActions(),(yt||bt)&&(0,I.jsx)(ca.m,{overlay:(0,I.jsxs)(xa.W,{children:[yt?(0,I.jsx)(xa.W.Item,{icon:"copy",label:(0,s.t)("dashboard.layout.common.copy","Copy"),onClick:yt}):null,bt?(0,I.jsx)(xa.W.Item,{icon:"file-copy-alt",label:(0,s.t)("dashboard.layout.common.duplicate","Duplicate"),onClick:bt}):null]}),children:(0,I.jsx)(ee.$n,{tooltip:(0,s.t)("dashboard.layout.common.copy-or-duplicate","Copy or Duplicate"),tooltipPlacement:"bottom",variant:"secondary",size:"sm",icon:"copy","data-testid":J.Tp.components.EditPaneHeader.copyDropdown,children:(0,I.jsx)(Mn.I,{name:"angle-down"})})}),(St||zt)&&(0,I.jsx)(ee.$n,{onClick:zt||St,size:"sm",variant:"destructive",fill:"outline",icon:"trash-alt",tooltip:(0,s.t)("dashboard.layout.common.delete","Delete"),"data-testid":J.Tp.components.EditPaneHeader.deleteButton})]})]})}function ps(Ne){return{wrapper:(0,rt.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:Ne.spacing(1,2),borderBottom:`1px solid ${Ne.colors.border.weak}`})}}function Ya({element:Ne,editPane:be,isNewElement:ze}){const nt=Ne.useEditPaneOptions?Ne.useEditPaneOptions(ze):[],yt=(0,nn.of)(Ka);return(0,I.jsxs)("div",{className:yt.wrapper,children:[(0,I.jsx)(ns,{element:Ne,editPane:be}),(0,I.jsx)(Un.P,{showScrollIndicators:!0,children:(0,I.jsx)("div",{className:yt.categories,children:nt.map(bt=>bt.render())})})]})}function Ka(Ne){return{wrapper:(0,rt.css)({display:"flex",flexDirection:"column",flex:"1 1 0",height:"100%"}),categories:(0,rt.css)({display:"flex",flexDirection:"column",borderBottom:`1px solid ${Ne.colors.border.weak}`})}}function Sa(Ne,be){return(0,R.useMemo)(()=>{if(!Ne){const ze=(0,C.YQ)(be);return new B([[ze.state.uid,ze.getRef()]]).createSelectionElement()}return Ne.createSelectionElement()},[Ne,be])}function Es({editPane:Ne,isCollapsed:be,onToggleCollapse:ze,openOverlay:nt}){const{selection:yt}=(0,i.gn)(Ne,{shouldActivateOrKeepAlive:!0}),bt=(0,nn.of)(as),St=(0,nn.of)(ee.my),zt=Sa(yt,Ne),qt=yt?.getFirstObject(),gn=yt?.isNewElement()??!1,[Dn,In]=(0,jt.A)("grafana.dashboard.edit-pane.outline.collapsed",!0),[Hn=.4,qn]=(0,jt.A)("grafana.dashboard.edit-pane.outline.size",.4),Kn=(0,tn.h)({direction:"column",handleSize:"sm",initialSize:1-Hn,dragPosition:"middle",onSizeChanged:Wn=>{qn(1-Wn)}});return zt?be?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{className:bt.expandOptionsWrapper,children:(0,I.jsx)(an.I,{tooltip:(0,s.t)("dashboard.edit-pane.open","Open options pane"),icon:"arrow-to-right",onClick:ze,variant:"canvas",narrow:!0,className:bt.rotate180,"aria-label":(0,s.t)("dashboard.edit-pane.open","Open options pane")})}),nt&&(0,I.jsx)(Fa.c,{className:bt.overlayWrapper,defaultSize:{height:"100%",width:"300px"},children:(0,I.jsx)(Ya,{element:zt,editPane:Ne,isNewElement:gn},qt?.state.key)})]}):(Dn?(Kn.primaryProps.style.flexGrow=1,Kn.primaryProps.style.minHeight="unset",Kn.secondaryProps.style.flexGrow=0,Kn.secondaryProps.style.minHeight="min-content"):(Kn.primaryProps.style.minHeight="unset",Kn.secondaryProps.style.minHeight="unset"),(0,I.jsx)("div",{className:bt.wrapper,children:(0,I.jsxs)("div",{...Kn.containerProps,children:[(0,I.jsx)("div",{...Kn.primaryProps,className:(0,rt.cx)(Kn.primaryProps.className,bt.paneContent),children:(0,I.jsx)(Ya,{element:zt,editPane:Ne,isNewElement:gn},qt?.state.key)}),(0,I.jsx)("div",{...Kn.splitterProps,className:(0,rt.cx)(Kn.splitterProps.className,bt.splitter),"data-edit-pane-splitter":!0}),(0,I.jsxs)("div",{...Kn.secondaryProps,className:(0,rt.cx)(Kn.secondaryProps.className,bt.paneContent),children:[(0,I.jsxs)("button",{type:"button",onClick:()=>In(!Dn),className:(0,rt.cx)(St,bt.outlineCollapseButton),"data-testid":J.Tp.components.PanelEditor.Outline.section,children:[(0,I.jsx)(Pn.E,{weight:"medium",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.dashboard-edit-pane-renderer.outline",children:"Outline"})}),(0,I.jsx)(Mn.I,{name:Dn?"angle-up":"angle-down"})]}),!Dn&&(0,I.jsx)("div",{className:bt.outlineContainer,children:(0,I.jsx)(Un.P,{showScrollIndicators:!0,children:(0,I.jsx)(ia,{editPane:Ne})})})]})]})})):null}function as(Ne){return{wrapper:(0,rt.css)({display:"flex",flexDirection:"column",flex:"1 1 0",marginTop:Ne.spacing(2),borderLeft:`1px solid ${Ne.colors.border.weak}`,borderTop:`1px solid ${Ne.colors.border.weak}`,background:Ne.colors.background.primary,borderTopLeftRadius:Ne.shape.radius.default}),overlayWrapper:(0,rt.css)({right:0,bottom:0,top:Ne.spacing(2),position:"absolute !important",background:Ne.colors.background.primary,borderLeft:`1px solid ${Ne.colors.border.weak}`,borderTop:`1px solid ${Ne.colors.border.weak}`,boxShadow:Ne.shadows.z3,zIndex:Ne.zIndex.navbarFixed,flexGrow:1}),paneContent:(0,rt.css)({overflow:"hidden",display:"flex",flexDirection:"column"}),rotate180:(0,rt.css)({rotate:"180deg"}),tabsbar:(0,rt.css)({padding:Ne.spacing(0,1),margin:Ne.spacing(.5,0)}),expandOptionsWrapper:(0,rt.css)({display:"flex",flexDirection:"column",padding:Ne.spacing(2,1,2,0)}),splitter:(0,rt.css)({"&::after":{background:"transparent",transform:"unset",width:"100%",height:"1px",top:"100%",left:"0"}}),outlineCollapseButton:(0,rt.css)({display:"flex",padding:Ne.spacing(.5,2),gap:Ne.spacing(1),justifyContent:"space-between",alignItems:"center",background:Ne.colors.background.secondary,"&:hover":{background:Ne.colors.action.hover}}),outlineContainer:(0,rt.css)({display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"})}}function Ns({dashboard:Ne,isEditing:be,body:ze,controls:nt}){const yt=(0,Rn.k)(),{editPane:bt}=Ne.state,St=(0,nn.of)($s,yt??0),[zt,qt]=(0,S.dt)();if(!r.$.featureToggles.dashboardNewLayouts)return(0,I.jsx)(Yn.A,{onSetScrollRef:Ne.onSetScrollRef,children:(0,I.jsxs)("div",{className:St.canvasWrappperOld,children:[(0,I.jsx)(An.c,{dashboard:Ne}),(0,I.jsx)("div",{className:St.controlsWrapperSticky,children:nt}),(0,I.jsx)("div",{className:St.body,children:ze})]})});const{containerProps:gn,primaryProps:Dn,secondaryProps:In,splitterProps:Hn,splitterState:qn,onToggleCollapse:Kn}=(0,ea.L)({direction:"row",dragPosition:"end",initialSize:330,handleSize:"sm",usePixels:!0,collapseBelowPixels:250,collapsed:zt});(0,R.useEffect)(()=>{qt(qn.collapsed)},[qn.collapsed,qt]),(0,R.useEffect)(()=>{be?bt.enableSelection():bt.disableSelection()},[be,bt]);const{selectionContext:Wn}=(0,i.gn)(bt,{shouldActivateOrKeepAlive:!0}),la={};be||(Dn.style.flexGrow=1,Dn.style.width="100%",Dn.style.minWidth="unset",la.overflow="unset");const La=sa=>{sa&&Ne.onSetScrollRef(new Yn.X(sa))};return(0,I.jsx)("div",{...gn,style:la,children:(0,I.jsxs)(rn._.Provider,{value:Wn,children:[(0,I.jsxs)("div",{...Dn,className:(0,rt.cx)(Dn.className,St.canvasWithSplitter),onPointerDown:sa=>{sa.shiftKey||bt.clearSelection()},children:[(0,I.jsx)(An.c,{dashboard:Ne}),(0,I.jsx)("div",{className:(0,rt.cx)(!be&&St.controlsWrapperSticky),children:nt}),(0,I.jsx)("div",{className:St.bodyWrapper,children:(0,I.jsx)("div",{className:(0,rt.cx)(St.body,be&&St.bodyEditing),"data-testid":J.Tp.components.DashboardEditPaneSplitter.primaryBody,ref:La,children:ze})})]}),be&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("div",{...Hn,className:(0,rt.cx)(Hn.className,St.splitter),"data-edit-pane-splitter":!0}),(0,I.jsx)("div",{...In,className:(0,rt.cx)(In.className,St.editPane),children:(0,I.jsx)(Es,{editPane:bt,isCollapsed:zt,onToggleCollapse:Kn,openOverlay:Wn.selected.length>0})})]})]})})}function $s(Ne,be){return{canvasWrappperOld:(0,rt.css)({label:"canvas-wrapper-old",display:"flex",flexDirection:"column",flexGrow:1}),canvasWithSplitter:(0,rt.css)({overflow:"unset",display:"flex",flexDirection:"column",flexGrow:1}),canvasWithSplitterEditing:(0,rt.css)({overflow:"unset"}),bodyWrapper:(0,rt.css)({label:"body-wrapper",display:"flex",flexDirection:"column",flexGrow:1,position:"relative"}),body:(0,rt.css)({label:"body",display:"flex",flexGrow:1,gap:Ne.spacing(1),boxSizing:"border-box",flexDirection:"column",padding:Ne.spacing(.125,2,2,2)}),bodyEditing:(0,rt.css)({position:"absolute",left:0,top:0,right:0,bottom:0,overflow:"auto",scrollbarWidth:"thin",scrollbarGutter:"stable",paddingRight:Ne.spacing(1)}),editPane:(0,rt.css)({flexDirection:"column"}),splitter:(0,rt.css)({"&:after":{display:"none"}}),controlsWrapperSticky:(0,rt.css)({[Ne.breakpoints.up("md")]:{position:"sticky",zIndex:Ne.zIndex.activePanel,background:Ne.colors.background.canvas,top:be}})}}var ri=e(46942),vo=e.n(ri),Fr=e(96691);const yo="--panels-per-row";function xo({dashboard:Ne,panelSearch:be="",panelsPerRow:ze}){const{body:nt}=Ne.state,yt=(0,nn.of)(Eo),bt=(0,R.useMemo)(()=>new bs(be),[be]);return(0,I.jsx)("div",{className:vo()(yt.grid,{[yt.perRow]:ze!==void 0}),style:{[yo]:ze},children:(0,I.jsx)(Fr.Ob,{value:bt,singleMatch:!1,dashboard:Ne,children:(0,I.jsx)(nt.Component,{model:nt})})})}function Eo(Ne){return{grid:(0,rt.css)({display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:Ne.spacing(1),gridAutoRows:"320px"}),perRow:(0,rt.css)({gridTemplateColumns:`repeat(var(${yo}, 3), 1fr)`}),noHits:(0,rt.css)({display:"grid",placeItems:"center"})}}class bs{constructor(be){this.searchQuery=be,this.matchFound=!1}matches(be){const ze=i.jh.interpolate(be,this.searchQuery).toLowerCase(),yt=be.interpolate(be.state.title,void 0,"text").toLowerCase().includes(ze);return yt&&(this.matchFound=!0),yt}}function Po({model:Ne}){const{controls:be,overlay:ze,editview:nt,body:yt,editPanel:bt,viewPanel:St,panelSearch:zt,panelsPerRow:qt,isEditing:gn,layoutOrchestrator:Dn}=Ne.useState(),{type:In}=(0,w.g)(),Hn=(0,w.zy)(),qn=(0,R.useContext)(dn.j),Kn=(0,Xe.d4)(Bn=>Bn.navIndex),Wn=Ne.getPageNav(Hn,Kn),la=(0,f.tc)(Kn,`dashboards/${In==="snapshot"?"snapshots":"browse"}`),La=nt!==void 0,sa=(0,Fr.XF)(St);if((0,R.useMemo)(()=>{(St||La||bt)&&Ne.rememberScrollPos()},[La,bt,St,Ne]),(0,R.useEffect)(()=>{!St&&!La&&!bt&&Ne.restoreScrollPos()},[La,bt,St,Ne]),(0,R.useEffect)(()=>{if(qn&&gn)return qn.setReadOnly(!0),()=>{qn.setReadOnly(!1)}},[qn,gn]),nt)return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(nt.Component,{model:nt}),ze&&(0,I.jsx)(ze.Component,{model:ze})]});function pa(){return!St&&(zt||qt)?(0,I.jsx)(xo,{panelSearch:zt,panelsPerRow:qt,dashboard:Ne}):sa?(0,I.jsx)(Fr.Ob,{value:sa,singleMatch:!0,dashboard:Ne,children:(0,I.jsx)(yt.Component,{model:yt})}):(0,I.jsx)(yt.Component,{model:yt})}return(0,I.jsxs)(I.Fragment,{children:[Dn&&(0,I.jsx)(Dn.Component,{model:Dn}),(0,I.jsxs)(sn.Y,{navModel:la,pageNav:Wn,layout:Ht.k.Custom,children:[bt&&(0,I.jsx)(bt.Component,{model:bt}),!bt&&(0,I.jsx)(Ns,{dashboard:Ne,isEditing:gn,controls:be&&(0,I.jsx)(be.Component,{model:be}),body:pa()}),ze&&(0,I.jsx)(ze.Component,{model:ze})]})]})}var Do=e(6262),bo=e(23656),wr=e(11257),gr=e(48480),mr=e(78282),oi=e(49e3);class Vr{constructor(be){this._scene=be}getKeys(){return["editIndex"]}getUrlState(){const be=this._scene.state;return{editIndex:be.editIndex!==void 0?String(be.editIndex):void 0}}updateFromUrl(be){let ze={};typeof be.editIndex=="string"?ze={editIndex:Number(be.editIndex)}:ze={editIndex:void 0},Object.keys(ze).length>0&&this._scene.setState(ze)}}var $r=e(16817),sr=e(16780),Co=e(18857),ii=e(38669),li=e(76478),ci=e(76792);const zr="New annotation",di=({annotation:Ne,editIndex:be,panels:ze,onUpdate:nt,onBackToList:yt,onDelete:bt})=>{const St=(0,nn.of)(ui),zt=(0,R.useMemo)(()=>Ne.filter?Ne.filter.exclude?2:1:0,[Ne.filter]),{value:qt}=(0,$r.A)(()=>(0,mr.l)().get(Ne.datasource),[Ne.datasource]),gn=(0,mr.l)().getInstanceSettings(Ne.datasource),Dn=Bn=>{nt({...Ne,name:Bn.currentTarget.value},be)},In=Bn=>{const Ea=(0,gr.p$)(Bn);Ne.datasource?.type!==Ea.type?nt({datasource:Ea,builtIn:Ne.builtIn,enable:Ne.enable,iconColor:Ne.iconColor,name:Ne.name,hide:Ne.hide,filter:Ne.filter,mappings:Ne.mappings,type:Ne.type},be):nt({...Ne,datasource:Ea},be)},Hn=Bn=>{const Ea=Bn.currentTarget;nt({...Ne,[Ea.name]:Ea.type==="checkbox"?Ea.checked:Ea.value},be)},qn=Bn=>{nt({...Ne,iconColor:Bn},be)},Kn=Bn=>{let Ea=Bn.value===0?void 0:{exclude:Bn.value===2,ids:Ne.filter?.ids??[]};nt({...Ne,filter:Ea},be)},Wn=Bn=>{if(!Array.isArray(Bn))return;const Ea={exclude:zt===2,ids:[]};Bn.forEach(Ia=>Ia.value&&Ea.ids.push(Ia.value)),nt({...Ne,filter:Ea},be)},la=()=>{bt(be),yt()},La=Ne.name===zr,sa=(Bn,Ea)=>Bn.label&&Ea.label?Bn.label.toLowerCase().localeCompare(Ea.label.toLowerCase()):-1,pa=(0,R.useMemo)(()=>ze.filter(Bn=>r.$.panels[Bn.state.pluginId]).map(Bn=>({value:(0,C.Cs)(Bn),label:Bn.state.title??`Panel ${(0,C.Cs)(Bn)}`,description:Bn.state.description,imgUrl:r.$.panels[Bn.state.pluginId].info.logos.small})).sort(sa)??[],[ze]);return(0,I.jsxs)("div",{children:[(0,I.jsxs)(sr.n,{className:St.settingsForm,children:[(0,I.jsx)(ae.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-name","Name"),children:(0,I.jsx)(q.p,{"data-testid":J.Tp.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:La,value:Ne.name,onChange:Dn})}),(0,I.jsx)(ae.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-data-source","Data source"),htmlFor:"data-source-picker",children:(0,I.jsx)(ci.sk,{annotations:!0,variables:!0,current:Ne.datasource,onChange:In})}),!qt?.meta.annotations&&(0,I.jsx)(Z.F,{title:(0,s.t)("dashboard-scene.annotation-settings-edit.title-annotation-support-source","No annotation support for this data source"),severity:"error",children:(0,I.jsx)(s.x6,{i18nKey:"errors.dashboard-settings.annotations.datasource",children:"The selected data source does not support annotations. Please select a different data source."})}),(0,I.jsx)(ae.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-enabled","Enabled"),description:(0,s.t)("dashboard-scene.annotation-settings-edit.description-enabled-annotation-query-issued-every-dashboard","When enabled the annotation query is issued every dashboard refresh"),children:(0,I.jsx)(se.S,{name:"enable",id:"enable",value:Ne.enable,onChange:Hn,"data-testid":J.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.enable})}),(0,I.jsx)(ae.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-hidden","Hidden"),description:(0,s.t)("dashboard-scene.annotation-settings-edit.description-hidden","Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."),children:(0,I.jsx)(se.S,{name:"hide",id:"hide",value:Ne.hide,onChange:Hn,"data-testid":J.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.hide})}),(0,I.jsx)(ae.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-color","Color"),description:(0,s.t)("dashboard-scene.annotation-settings-edit.description-color-annotation-event-markers","Color to use for the annotation event markers"),children:(0,I.jsx)(Q.B,{children:(0,I.jsx)(ii.a,{value:Ne?.iconColor,onChange:qn})})}),(0,I.jsx)(ae.D,{label:(0,s.t)("dashboard-scene.annotation-settings-edit.label-show-in","Show in"),"data-testid":J.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.showInLabel,children:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Co.l6,{options:fi(),value:zt,onChange:Kn,"data-testid":J.Tp.components.Annotations.annotationsTypeInput}),zt!==0&&(0,I.jsx)(Co.KF,{options:pa,value:pa.filter(Bn=>Ne.filter?.ids.includes(Bn.value)),onChange:Wn,isClearable:!0,placeholder:(0,s.t)("dashboard-scene.annotation-settings-edit.placeholder-choose-panels","Choose panels"),width:100,closeMenuOnSelect:!1,className:St.select,"data-testid":J.Tp.components.Annotations.annotationsChoosePanelInput})]})})]}),(0,I.jsxs)(sr.n,{children:[(0,I.jsx)("h3",{className:"page-heading",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-edit.query",children:"Query"})}),qt?.annotations&&gn&&(0,I.jsx)(li.A,{datasource:qt,datasourceInstanceSettings:gn,annotation:Ne,onChange:Bn=>nt(Bn,be)})]}),(0,I.jsxs)(Q.B,{children:[!Ne.builtIn&&(0,I.jsx)(ee.$n,{variant:"destructive",onClick:la,"data-testid":J.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.delete,children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-edit.delete",children:"Delete"})}),(0,I.jsx)(ee.$n,{variant:"secondary",onClick:yt,"data-testid":J.Tp.pages.Dashboard.Settings.Annotations.NewAnnotation.apply,children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-edit.back-to-list",children:"Back to list"})})]})]})},ui=Ne=>({settingsForm:(0,rt.css)({maxWidth:Ne.spacing(60),marginBottom:Ne.spacing(2)}),select:(0,rt.css)({marginTop:"8px"})});var hi=(Ne=>(Ne[Ne.AllPanels=0]="AllPanels",Ne[Ne.IncludePanels=1]="IncludePanels",Ne[Ne.ExcludePanels=2]="ExcludePanels",Ne))(hi||{});const fi=()=>[{label:(0,s.t)("dashboard-scene.get-panel-filters.label.all-panels","All panels"),value:0,description:(0,s.t)("dashboard-scene.get-panel-filters.description.annotation-panels-support-annotations","Send the annotation data to all panels that support annotations")},{label:(0,s.t)("dashboard-scene.get-panel-filters.label.selected-panels","Selected panels"),value:1,description:(0,s.t)("dashboard-scene.get-panel-filters.description.annotations-explicitly-listed-panels","Send the annotations to the explicitly listed panels")},{label:(0,s.t)("dashboard-scene.get-panel-filters.label.all-panels-except","All panels except"),value:2,description:(0,s.t)("dashboard-scene.get-panel-filters.description.annotation-following-panels","Do not send annotation data to the following panels")}];var Ks=e(44458),Cs=e(50201),pi=e(39302);const wl="Add annotation query",gi=({annotations:Ne,onNew:be,onEdit:ze,onMove:nt,onDelete:yt})=>{const bt=(0,nn.of)(mi),St=Ne.length===0||Ne.length===1&&Ne[0].builtIn,zt=gn=>gn.enable===!1?(0,I.jsx)("em",{className:"muted",children:(0,I.jsxs)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-list.disabled",values:{annoName:gn.name},children:["(Disabled) ","{{annoName}}"]})}):gn.builtIn?(0,I.jsx)("em",{className:"muted",children:(0,I.jsxs)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-list.built-in",values:{annoName:gn.name},children:["{{annoName}}"," (Built-in)"]})}):(0,I.jsx)(I.Fragment,{children:gn.name}),qt=(0,mr.l)();return(0,I.jsxs)(Q.B,{direction:"column",children:[Ne.length>0&&(0,I.jsx)("div",{className:bt.table,children:(0,I.jsxs)("table",{role:"grid",className:"filter-table filter-table--hover",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-list.query-name",children:"Query name"})}),(0,I.jsx)("th",{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-list.data-source",children:"Data source"})}),(0,I.jsx)("th",{colSpan:3})]})}),(0,I.jsx)("tbody",{"data-testid":J.Tp.pages.Dashboard.Settings.Annotations.List.annotations,children:Ne.map((gn,Dn)=>(0,I.jsxs)("tr",{children:[gn.builtIn?(0,I.jsx)("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>ze(Dn),children:(0,I.jsx)(ee.$n,{size:"sm",fill:"text",variant:"secondary",children:zt(gn)})}):(0,I.jsx)("td",{role:"gridcell",className:"pointer",onClick:()=>ze(Dn),children:(0,I.jsx)(ee.$n,{size:"sm",fill:"text",variant:"secondary",children:zt(gn)})}),(0,I.jsx)("td",{role:"gridcell",className:"pointer",onClick:()=>ze(Dn),children:qt.getInstanceSettings(gn.datasource)?.name||gn.datasource?.uid}),(0,I.jsx)("td",{role:"gridcell",style:{width:"1%"},children:Dn!==0&&(0,I.jsx)(fa.K,{name:"arrow-up",onClick:()=>nt(Dn,rr.UP),tooltip:(0,s.t)("dashboard-scene.annotation-settings-list.tooltip-move-up","Move up")})}),(0,I.jsx)("td",{role:"gridcell",style:{width:"1%"},children:Ne.length>1&&Dn!==Ne.length-1?(0,I.jsx)(fa.K,{name:"arrow-down",onClick:()=>nt(Dn,rr.DOWN),tooltip:(0,s.t)("dashboard-scene.annotation-settings-list.tooltip-move-down","Move down")}):null}),(0,I.jsx)("td",{role:"gridcell",style:{width:"1%"},children:!gn.builtIn&&(0,I.jsx)(Ks.e,{size:"sm",onConfirm:()=>yt(Dn),"aria-label":(0,s.t)("dashboard-scene.annotation-settings-list.delete-aria-label",'Delete query with title "{{title}}"',{title:gn.name})})})]},`${gn.name}-${Dn}`))})]})}),St&&(0,I.jsx)(Q.B,{direction:"column",children:(0,I.jsxs)(Cs.p,{variant:"call-to-action",button:(0,I.jsx)(ee.$n,{"data-testid":J.Tp.components.CallToActionCard.buttonV2("Add annotation query"),icon:"comment-alt",onClick:be,size:"lg",children:(0,I.jsx)(s.x6,{i18nKey:"annotations.empty-state.button-title",children:"Add annotation query"})}),message:(0,s.t)("annotations.empty-state.title","There are no custom annotation queries added yet"),children:[(0,I.jsx)(s.x6,{i18nKey:"annotations.empty-state.info-box-content",children:(0,I.jsx)("p",{children:"Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines and icons on all graph panels. When you hover over an annotation icon you can get event text & tags for the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or drag region). These will be stored in Grafana's annotation database."})}),(0,I.jsxs)(s.x6,{i18nKey:"annotations.empty-state.info-box-content-2",children:["Checkout the"," ",(0,I.jsx)(en.Y,{external:!0,href:"http://docs.grafana.org/reference/annotations/",children:"Annotations documentation"})," ","for more information."]})]})}),!St&&(0,I.jsx)(pi.d,{"data-testid":J.Tp.pages.Dashboard.Settings.Annotations.List.addAnnotationCTAV2,onClick:be,children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.annotation-settings-list.new-query",children:"New query"})})]})},mi=()=>({table:(0,rt.css)({width:"100%",overflowX:"auto"})});var rr=(Ne=>(Ne[Ne.UP=-1]="UP",Ne[Ne.DOWN=1]="DOWN",Ne))(rr||{});class vi extends i.Bs{constructor(){super(...arguments),this._urlSync=new Vr(this),this.getDataSourceRefForAnnotation=()=>{const be=(0,mr.l)().getInstanceSettings(null);if(!be||!be.meta.annotations){console.error("Default datasource does not support annotations");return}return(0,gr.p$)(be)},this.onNew=async()=>{const be={name:zr,enable:!0,datasource:this.getDataSourceRefForAnnotation(),iconColor:"red"},ze=new oi.g({query:be,name:be.name,isEnabled:!!be.enable,isHidden:!!be.hide}),nt=Zt.b4.getDataLayers(this._dashboard);nt.addAnnotationLayer(ze),this.setState({editIndex:nt.state.annotationLayers.length-1})},this.onEdit=be=>{this.setState({editIndex:be})},this.onBackToList=()=>{this.setState({editIndex:void 0})},this.onMove=(be,ze)=>{const nt=Zt.b4.getDataLayers(this._dashboard),yt=[...nt.state.annotationLayers],[bt]=yt.splice(be,1);yt.splice(be+ze,0,bt),nt.setState({annotationLayers:yt})},this.onDelete=be=>{const ze=Zt.b4.getDataLayers(this._dashboard),nt=[...ze.state.annotationLayers];nt.splice(be,1),ze.setState({annotationLayers:nt})},this.onUpdate=(be,ze)=>{const nt=this.getDataLayer(ze);nt.setState({name:be.name,isEnabled:!!be.enable,isHidden:!!be.hide,query:be}),nt.runLayer()}}static{this.Component=Gr}getUrlKey(){return"annotations"}get _dashboard(){return(0,C.YQ)(this)}getDataLayer(be){const nt=Zt.b4.getDataLayers(this._dashboard).state.annotationLayers[be];if(!(nt instanceof i.tV.g))throw new Error("AnnotationsDataLayer not found at index "+be);return nt}getDashboard(){return this._dashboard}}function Gr({model:Ne}){const be=Ne.getDashboard(),{annotationLayers:ze}=Zt.b4.getDataLayers(be).useState(),{navModel:nt,pageNav:yt}=ms(be,Ne.getUrlKey()),{editIndex:bt}=Ne.useState(),St=Zt.b4.getVizPanels(be),zt=(0,Na.O)(ze);return bt!=null&&bt<ze.length?(0,I.jsx)(To,{annotationLayer:Ne.getDataLayer(bt),pageNav:yt,panels:St,editIndex:bt,navModel:nt,dashboard:be,onUpdate:Ne.onUpdate,onBackToList:Ne.onBackToList,onDelete:Ne.onDelete}):(0,I.jsxs)(sn.Y,{navModel:nt,pageNav:yt,layout:Ht.k.Standard,children:[(0,I.jsx)(An.c,{dashboard:be}),(0,I.jsx)(gi,{annotations:zt,onNew:Ne.onNew,onEdit:Ne.onEdit,onDelete:Ne.onDelete,onMove:Ne.onMove})]})}function To({annotationLayer:Ne,pageNav:be,navModel:ze,panels:nt,editIndex:yt,dashboard:bt,onUpdate:St,onBackToList:zt,onDelete:qt}){const{name:gn,query:Dn}=Ne.useState(),In={text:gn,parentItem:be};return(0,I.jsxs)(sn.Y,{navModel:ze,pageNav:In,layout:Ht.k.Standard,children:[(0,I.jsx)(An.c,{dashboard:bt}),(0,I.jsx)(di,{annotation:Dn,editIndex:yt,panels:nt,onUpdate:St,onBackToList:zt,onDelete:qt})]})}var yi=e(46635),xi=e(39468),Ei=e(88898),Pi=e(86871);class Di extends i.Bs{constructor(){super(...arguments),this._urlSync=new Vr(this),this.onNewLink=()=>{this.links=[...this.links,Pi.q],this.setState({editIndex:this.links.length-1})},this.onDelete=be=>{this.links=[...this.links.slice(0,be),...this.links.slice(be+1)],this.setState({editIndex:void 0})},this.onDuplicate=be=>{this.links=[...this.links,{...be}]},this.onOrderChange=(be,ze)=>{this.links=yi.moveItemImmutably(this.links,be,be+ze)},this.onEdit=be=>{this.setState({editIndex:be})},this.onUpdateLink=be=>{const ze=this.state.editIndex;ze!==void 0&&(this.links=[...this.links.slice(0,ze),be,...this.links.slice(ze+1)])},this.onGoBack=()=>{this.setState({editIndex:void 0})}}static{this.Component=bi}getUrlKey(){return"links"}get dashboard(){return(0,C.YQ)(this)}get links(){return this.dashboard.state.links}set links(be){this.dashboard.setState({links:be})}}function bi({model:Ne}){const{editIndex:be}=Ne.useState(),ze=(0,C.YQ)(Ne),{links:nt}=ze.useState(),{navModel:yt,pageNav:bt}=ms(ze,Ne.getUrlKey()),St=be!==void 0?nt[be]:void 0;return St?(0,I.jsx)(Ci,{pageNav:bt,navModel:yt,link:St,dashboard:ze,onChange:Ne.onUpdateLink,onGoBack:Ne.onGoBack}):(0,I.jsxs)(sn.Y,{navModel:yt,pageNav:bt,layout:Ht.k.Standard,children:[(0,I.jsx)(An.c,{dashboard:ze}),(0,I.jsx)(Ei.X,{links:nt,onNew:Ne.onNewLink,onEdit:Ne.onEdit,onDelete:Ne.onDelete,onDuplicate:Ne.onDuplicate,onOrderChange:Ne.onOrderChange})]})}function Ci({pageNav:Ne,link:be,navModel:ze,dashboard:nt,onChange:yt,onGoBack:bt}){const St={text:(0,s.t)("dashboard-scene.edit-link-view.edit-link-page-nav.text.edit-link","Edit link"),parentItem:Ne};return(0,I.jsxs)(sn.Y,{navModel:ze,pageNav:St,layout:Ht.k.Standard,children:[(0,I.jsx)(An.c,{dashboard:nt}),(0,I.jsx)(xi.d,{link:be,onUpdate:yt,onGoBack:bt})]})}var Ti=e(10928),Mo=e(77824),Hr=e(74475),Fs=e(56291),Mi=e(42357),Oi=e(70969),Si=e(29189),_r=e(68079),vr=e(76466);function yr({dashboard:Ne,defaultValues:be,loadedFromRef:ze,readOnly:nt,isNew:yt,workflowOptions:bt,targetFolderUID:St,targetFolderTitle:zt,repository:qt,onDismiss:gn,onSuccess:Dn}){const In=(0,G.mN)({defaultValues:be}),{editPanel:Hn}=Ne.useState(),{handleSubmit:qn,watch:Kn}=In,Wn=(0,c.J7)(),[la,La]=Kn(["ref","workflow"]),{data:sa,isLoading:pa}=(0,Se.Kw)({name:be.repo,path:be.path}),{data:Bn}=(0,de.kH)(St?{name:St}:Si.hT),[Ea,Ia]=(0,Se.tj)(),[ua,os]=(0,R.useState)(""),Ms=(0,w.Zp)();(0,R.useEffect)(()=>{const Va=sa?.resource?.dryRun?.metadata?.annotations?.[x.Y_];if(!Va||St===void 0)return;const ga=Va.split("/").pop(),vs=`${(0,vr.EM)({targetFolderUID:St,targetFolder:Bn,repoName:qt?.name,hidePrependSlash:!0})}${ga}`;os(vs)},[sa,Bn,St,zt,qt]);const Rr=async({repo:Va,path:ga,comment:_s})=>{if(!sa?.resource?.file){Wn.publish({type:_.r1.alertError.name,payload:[(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.current-file-not-found","Current dashboard file could not be found")]});return}const vs=La==="write"?ze:la,Ar=_s||`Move dashboard: ${Ne.state.title}`;try{await Ea({name:Va,path:ua,ref:vs,message:Ar,body:sa.resource.file,originalPath:ga}).unwrap()}catch(ml){Wn.publish({type:_.r1.alertError.name,payload:[(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.api-error","Failed to move dashboard"),ml]})}},lo=()=>{Ne.setState({isDirty:!1}),Hn?.onDiscard(),St&&zt&&Dn(St,zt),Ms("/dashboards")},_a=Va=>{Ne.setState({isDirty:!1}),Hn?.onDiscard();const ga=(0,je.q)({paramName:"new_pull_request_url",paramValue:Ia?.data?.urls?.newPullRequestURL,repoType:Va.repoType});Ms(ga)},Qa=Va=>{(0,c.J7)().publish({type:_.r1.alertError.name,payload:[(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.alert-error-moving-dashboard","Error moving dashboard"),Va]})};(0,Ue.J)({request:Ia,workflow:La,successMessage:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.success-message","Dashboard moved successfully"),resourceType:"dashboard",handlers:{onBranchSuccess:(Va,ga)=>_a(ga),onWriteSuccess:lo,onDismiss:gn,onError:Qa}});const is=Ia.isLoading;return(0,I.jsx)(L._,{title:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.drawer-title","Move Provisioned Dashboard"),subtitle:Ne.state.title,onClose:gn,children:(0,I.jsx)(G.Op,{...In,children:(0,I.jsx)("form",{onSubmit:qn(Rr),children:(0,I.jsxs)(Q.B,{direction:"column",gap:2,children:[nt&&(0,I.jsx)(Z.F,{title:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.title-this-repository-is-read-only","This repository is read only"),children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.move-provisioned-dashboard-form.move-read-only-message",children:"This dashboard cannot be moved directly from Grafana because the repository is read-only. To move this dashboard, please move the file in your Git repository."})}),pa&&(0,I.jsxs)(Q.B,{alignItems:"center",gap:2,children:[(0,I.jsx)(_r.y,{}),(0,I.jsx)("div",{children:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.loading-file-data","Loading dashboard data")})]}),sa?.errors?.length&&sa.errors.length>0&&(0,I.jsx)(Z.F,{title:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.file-load-error","Error loading dashboard"),severity:"error",children:sa.errors.map((Va,ga)=>(0,I.jsx)("div",{children:Va},ga))}),(0,I.jsx)(ae.D,{noMargin:!0,label:(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.target-path-label","Target path"),children:(0,I.jsx)(q.p,{readOnly:!0,value:ua})}),(0,I.jsx)(Je.x,{resourceType:"dashboard",isNew:yt,readOnly:nt,workflow:La,workflowOptions:bt,repository:qt}),(0,I.jsxs)(Q.B,{gap:2,children:[(0,I.jsx)(ee.$n,{variant:"secondary",onClick:gn,fill:"outline",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.move-provisioned-dashboard-form.cancel-action",children:"Cancel"})}),(0,I.jsx)(ee.$n,{variant:"primary",type:"submit",disabled:is||nt||!sa||pa,children:is?(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.moving","Moving..."):(0,s.t)("dashboard-scene.move-provisioned-dashboard-form.move-action","Move dashboard")})]})]})})})})}function Ii({dashboard:Ne,targetFolderUID:be,targetFolderTitle:ze,onDismiss:nt,onSuccess:yt}){const{defaultValues:bt,loadedFromRef:St,readOnly:zt,workflowOptions:qt,isNew:gn,repository:Dn}=(0,W.S)(Ne);return bt?(0,I.jsx)(yr,{dashboard:Ne,defaultValues:bt,loadedFromRef:St,readOnly:zt,repository:Dn,isNew:gn,workflowOptions:qt,targetFolderUID:be,targetFolderTitle:ze,onDismiss:nt,onSuccess:yt}):null}var Ri=e(75570),Ai=e(75080);class ji extends i.Bs{constructor(){super(...arguments),this.onTitleChange=be=>{this._dashboard.setState({title:be})},this.onDescriptionChange=be=>{this._dashboard.setState({description:be})},this.onTagsChange=be=>{this._dashboard.setState({tags:be})},this.onFolderChange=async(be,ze)=>{const nt={...this._dashboard.state.meta,folderUid:be||this._dashboard.state.meta.folderUid,folderTitle:ze||this._dashboard.state.meta.folderTitle};nt.folderUid&&await(0,Ri.Q)(nt.folderUid),this._dashboard.setState({meta:nt})},this.onEditableChange=be=>{this._dashboard.setState({editable:be})},this.onTimeZoneChange=be=>{this.getTimeRange().setState({timeZone:be})},this.onWeekStartChange=be=>{this.getTimeRange().setState({weekStart:be})},this.onRefreshIntervalChange=be=>{this.getRefreshPicker()?.setState({intervals:be})},this.onNowDelayChange=be=>{this.getTimeRange()?.setState({UNSAFE_nowDelay:be})},this.onHideTimePickerChange=be=>{this.getDashboardControls()?.setState({hideTimeControls:be})},this.onLiveNowChange=be=>{try{const ze=this.getLiveNowTimer();be?ze.enable():ze.disable()}catch(ze){console.error(ze)}},this.onTooltipChange=be=>{this.getCursorSync()?.setState({sync:be})},this.onPreloadChange=be=>{this._dashboard.setState({preload:be})},this.onDeleteDashboard=()=>{},this.onProvisionedFolderChange=async(be,ze)=>{be!==this._dashboard.state.meta.folderUid&&this.setState({showMoveModal:!0,moveModalProps:{targetFolderUID:be,targetFolderTitle:ze}})},this.onMoveModalDismiss=()=>{this.setState({showMoveModal:!1,moveModalProps:void 0})},this.onMoveSuccess=(be,ze)=>{const nt={...this._dashboard.state.meta,folderUid:be,folderTitle:ze};this._dashboard.setState({meta:nt}),this.onMoveModalDismiss()}}get _dashboard(){return(0,C.YQ)(this)}getUrlKey(){return"settings"}getDashboard(){return this._dashboard}getTimeRange(){return i.jh.getTimeRange(this._dashboard)}getRefreshPicker(){return this.getDashboardControls().state.refreshPicker}getCursorSync(){return Zt.b4.getCursorSync(this._dashboard)}getLiveNowTimer(){const be=i.jh.findObject(this._dashboard,ze=>ze instanceof i.Gg.en);if(be instanceof i.Gg.en)return be;throw new Error("LiveNowTimer could not be found")}getDashboardControls(){return this._dashboard.state.controls}static{this.Component=xr}}function xr({model:Ne}){const be=Ne.getDashboard(),{navModel:ze,pageNav:nt}=ms(be,Ne.getUrlKey()),{title:yt,description:bt,tags:St,meta:zt,editable:qt}=be.useState(),{showMoveModal:gn,moveModalProps:Dn}=Ne.useState(),{sync:In}=Ne.getCursorSync()?.useState()||{},{timeZone:Hn,weekStart:qn,UNSAFE_nowDelay:Kn}=Ne.getTimeRange().useState(),{intervals:Wn}=Ne.getRefreshPicker().useState(),{hideTimeControls:la}=Ne.getDashboardControls().useState(),{enabled:La}=Ne.getLiveNowTimer().useState(),sa=[{label:(0,s.t)("dashboard-scene.general-settings-edit-view.editable_options.label.editable","Editable"),value:!0},{label:(0,s.t)("dashboard-scene.general-settings-edit-view.editable_options.label.readonly","Read-only"),value:!1}],pa=[{value:0,label:(0,s.t)("dashboard-scene.general-settings-edit-view.graph_tooltip_options.label.default","Default")},{value:1,label:(0,s.t)("dashboard-scene.general-settings-edit-view.graph_tooltip_options.label.shared-crosshair","Shared crosshair")},{value:2,label:(0,s.t)("dashboard-scene.general-settings-edit-view.graph_tooltip_options.label.shared-tooltip","Shared tooltip")}];return(0,I.jsxs)(sn.Y,{navModel:ze,pageNav:nt,layout:Ht.k.Standard,children:[(0,I.jsx)(An.c,{dashboard:be}),(0,I.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,I.jsxs)(te.a,{display:"flex",direction:"column",gap:2,marginBottom:5,children:[(0,I.jsx)(ae.D,{noMargin:!0,label:(0,I.jsxs)(Q.B,{justifyContent:"space-between",children:[(0,I.jsx)(qe.J,{htmlFor:"title-input",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-settings.general.title-label",children:"Title"})}),r.$.featureToggles.dashgpt&&(0,I.jsx)(Oi.Z,{onGenerate:Bn=>Ne.onTitleChange(Bn)})]}),children:(0,I.jsx)(q.p,{id:"title-input",name:"title",value:yt,onChange:Bn=>Ne.onTitleChange(Bn.target.value)})}),(0,I.jsx)(ae.D,{noMargin:!0,label:(0,I.jsxs)(Q.B,{justifyContent:"space-between",children:[(0,I.jsx)(qe.J,{htmlFor:"description-input",children:(0,s.t)("dashboard-settings.general.description-label","Description")}),r.$.featureToggles.dashgpt&&(0,I.jsx)(Mi.V,{onGenerate:Bn=>Ne.onDescriptionChange(Bn)})]}),children:(0,I.jsx)(k.f,{id:"description-input",name:"description",value:bt,onChange:Bn=>Ne.onDescriptionChange(Bn.target.value)})}),(0,I.jsx)(ae.D,{noMargin:!0,label:(0,s.t)("dashboard-settings.general.tags-label","Tags"),children:(0,I.jsx)(Ti.u,{id:"tags-input",tags:St,onChange:Ne.onTagsChange,width:40})}),(0,I.jsx)(ae.D,{noMargin:!0,label:(0,s.t)("dashboard-settings.general.folder-label","Folder"),children:(0,I.jsx)(Qe.a,{value:zt.folderUid,onChange:be.isManagedRepository()?Ne.onProvisionedFolderChange:Ne.onFolderChange,repositoryName:be.getManagerIdentity()})}),(0,I.jsx)(ae.D,{noMargin:!0,label:(0,s.t)("dashboard-settings.general.editable-label","Editable"),description:(0,s.t)("dashboard-settings.general.editable-description","Set to read-only to disable all editing. Reload the dashboard for changes to take effect"),children:(0,I.jsx)(Mo.z,{value:qt,options:sa,onChange:Ne.onEditableChange})})]}),(0,I.jsx)(Fs.p,{onTimeZoneChange:Ne.onTimeZoneChange,onWeekStartChange:Ne.onWeekStartChange,onRefreshIntervalChange:Ne.onRefreshIntervalChange,onNowDelayChange:Ne.onNowDelayChange,onHideTimePickerChange:Ne.onHideTimePickerChange,onLiveNowChange:Ne.onLiveNowChange,refreshIntervals:Wn,timePickerHidden:la,nowDelay:Kn||"",liveNow:La,timezone:Hn||"",weekStart:qn}),(0,I.jsx)(Hr.M,{label:(0,s.t)("dashboard-settings.general.panel-options-label","Panel options"),isOpen:!0,children:(0,I.jsxs)(Q.B,{direction:"column",gap:2,children:[(0,I.jsx)(ae.D,{noMargin:!0,label:(0,s.t)("dashboard-settings.general.panel-options-graph-tooltip-label","Graph tooltip"),description:(0,s.t)("dashboard-settings.general.panel-options-graph-tooltip-description","Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect"),children:(0,I.jsx)(Mo.z,{onChange:Ne.onTooltipChange,options:pa,value:In})}),(0,I.jsx)(ae.D,{noMargin:!0,label:(0,s.t)("dashboard-settings.general.panels-preload-label","Preload panels"),description:(0,s.t)("dashboard-settings.general.panels-preload-description","When enabled all panels will start loading as soon as the dashboard has been loaded."),children:(0,I.jsx)(Ze.d,{id:"preload-panels-dashboards-toggle",value:be.state.preload,onChange:Bn=>Ne.onPreloadChange(Bn.currentTarget.checked)})})]})}),(0,I.jsx)(te.a,{marginTop:3,children:zt.canDelete&&(0,I.jsx)(Ai.c,{dashboard:be})})]}),gn&&Dn&&(0,I.jsx)(Ii,{dashboard:be,targetFolderUID:Dn.targetFolderUID,targetFolderTitle:Dn.targetFolderTitle,onDismiss:Ne.onMoveModalDismiss,onSuccess:Ne.onMoveSuccess})]})}var Li=e(13956),Bi=e(8419),zs=e(31119);class Ui extends i.Bs{constructor(be){super({...be,jsonText:""}),this.onCodeEditorBlur=ze=>{this.setState({jsonText:ze})},this.onSaveSuccess=async ze=>{const nt=JSON.parse(this.state.jsonText),yt=this.getDashboard(),bt=(0,Jn.aK)(nt);let St;if(bt){const zt=await(0,Li.n)("v2").getDashboardDTO(ze.uid);St=(0,zs.dj)(zt);const qt=i.Go.cloneSceneObjectState(St.state,{key:yt.state.key});yt.pauseTrackingChanges(),yt.setInitialSaveModel(zt.spec,zt.metadata),yt.setState(qt)}else{nt.version=ze.version,St=(0,Zn.wM)({dashboard:nt,meta:yt.state.meta});const zt=i.Go.cloneSceneObjectState(St.state,{key:yt.state.key});yt.pauseTrackingChanges(),yt.setInitialSaveModel(nt,yt.state.meta),yt.setState(zt)}this.setState({jsonText:this.getJsonText()}),yt.resumeTrackingChanges()},this.addActivationHandler(()=>this.setState({jsonText:this.getJsonText()}))}getUrlKey(){return"json-model"}getDashboard(){return(0,C.YQ)(this)}getSaveModel(){return this.getDashboard().getSaveModel()}getJsonText(){const be=this.getSaveModel();return(0,Bi.p)(be)}static{this.Component=Wi}}function Wi({model:Ne}){const{state:be,onSaveDashboard:ze}=Me(!1),[nt,yt]=(0,R.useState)(!1),bt=Ne.getDashboard(),{navModel:St,pageNav:zt}=ms(bt,Ne.getUrlKey()),qt=bt.useState().meta.canSave,{jsonText:gn}=Ne.useState(),Dn=async Wn=>{const la=await ze(bt,{folderUid:bt.state.meta.folderUid,overwrite:Wn,rawDashboardJSON:JSON.parse(Ne.state.jsonText),k8s:bt.state.meta.k8s});yt(!0),la.status==="success"?(await Ne.onSaveSuccess(la),yt(!1)):yt(!0)},In=Wn=>(0,I.jsx)(ee.$n,{type:"submit",onClick:()=>{Dn(Wn)},variant:Wn?"destructive":"primary",children:Wn?(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.json-model-edit-view.save-and-overwrite",children:"'Save and overwrite'"}):(0,I.jsx)(s.x6,{i18nKey:"dashboard-settings.json-editor.save-button",children:"Save changes"})}),Hn=(0,I.jsx)(ee.$n,{variant:"secondary",onClick:()=>yt(!1),fill:"outline",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.json-model-edit-view.cancel-button.cancel",children:"Cancel"})}),qn=(0,nn.of)(Ni);function Kn(Wn){if(Wn&&nt){if(ce(Wn))return(0,I.jsxs)(Z.F,{title:(0,s.t)("dashboard-scene.json-model-edit-view.render-save-button-and-error.title-someone-else-has-updated-this-dashboard","Someone else has updated this dashboard"),severity:"error",children:[(0,I.jsx)("p",{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.json-model-edit-view.render-save-button-and-error.would-still-dashboard",children:"Would you still like to save this dashboard?"})}),(0,I.jsx)(te.a,{paddingTop:2,children:(0,I.jsxs)(Q.B,{alignItems:"center",children:[Hn,In(!0)]})})]});if(re(Wn))return(0,I.jsx)(X,{saveButton:In,cancelButton:Hn});if(ue(Wn))return(0,I.jsxs)(Z.F,{title:(0,s.t)("dashboard-scene.json-model-edit-view.render-save-button-and-error.title-plugin-dashboard","Plugin dashboard"),severity:"error",children:[(0,I.jsx)("p",{children:(0,I.jsxs)(s.x6,{i18nKey:"dashboard-scene.json-model-edit-view.render-save-button-and-error.body-plugin-dashboard",children:["Your changes will be lost when you update the plugin. Use ",(0,I.jsx)("strong",{children:"Save as"})," to create custom version."]})}),(0,I.jsx)(te.a,{paddingTop:2,children:(0,I.jsx)(Q.B,{alignItems:"center",children:In(!0)})})]})}return(0,I.jsxs)(I.Fragment,{children:[Wn&&nt&&(0,I.jsx)(Z.F,{title:(0,s.t)("dashboard-scene.json-model-edit-view.render-save-button-and-error.title-failed-to-save-dashboard","Failed to save dashboard"),severity:"error",children:(0,I.jsx)("p",{children:Wn.message})}),(0,I.jsx)(Q.B,{alignItems:"center",children:In(!1)})]})}return(0,I.jsxs)(sn.Y,{navModel:St,pageNav:zt,layout:Ht.k.Standard,children:[(0,I.jsx)(An.c,{dashboard:bt}),(0,I.jsxs)("div",{className:qn.wrapper,children:[(0,I.jsx)(s.x6,{i18nKey:"dashboard-settings.json-editor.subtitle",children:"The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on."}),(0,I.jsx)(st.B,{width:"100%",value:gn,language:"json",showLineNumbers:!0,showMiniMap:!0,containerStyles:qn.codeEditor,onBlur:Ne.onCodeEditorBlur}),qt&&(0,I.jsx)(te.a,{paddingTop:2,children:Kn(be.error)})]})]})}const Ni=Ne=>({wrapper:(0,rt.css)({display:"flex",height:"100%",flexDirection:"column",gap:Ne.spacing(2)}),codeEditor:(0,rt.css)({flexGrow:1})});var Ki=e(54384);class Fi extends i.Bs{static{this.Component=Er}get _dashboard(){return(0,C.YQ)(this)}getUrlKey(){return"permissions"}getDashboard(){return this._dashboard}}function Er({model:Ne}){const be=Ne.getDashboard(),{uid:ze}=be.useState(),{navModel:nt,pageNav:yt}=ms(be,Ne.getUrlKey()),bt=T.TP.hasPermission(wr.w.DashboardsPermissionsWrite);return(0,I.jsxs)(sn.Y,{navModel:nt,pageNav:yt,layout:Ht.k.Standard,children:[(0,I.jsx)(An.c,{dashboard:be}),(0,I.jsx)(Ki.x,{resource:"dashboards",resourceId:ze??"",canSetPermissions:bt})]})}var wi=e(62635),Oo=e(47969);const Pr=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g;function ja(Ne){return Ne.map(be=>({id:be.state.name,label:`${be.state.name}`}))}function wa(Ne,be){return Ne.filter(ze=>be.some(nt=>nt.from===ze.id||nt.to===ze.id))}const Vi=Ne=>{const be=[];for(const ze of Ne)for(const nt of Ne){if(ze===nt)continue;ze.variableDependency?.hasDependencyOn(nt.state.name)&&be.push({from:ze.state.name,to:nt.state.name})}return be};function $i(Ne,be){if(!be)return[];let ze=[];for(const nt of Ne){const yt=nt.state.name,bt=(0,Oo.Jx)(yt,{key:"model",value:be},{});Object.keys(bt).length&&ze.push({variable:nt,tree:bt})}return ze}function So(Ne){const be=[];for(const ze of Ne){const{variable:nt,tree:yt}=ze,bt={variable:nt,nodes:[{id:"dashboard",label:(0,s.t)("dashboard-scene.transform-usages-to-network.result.label.dashboard","dashboard")}],edges:[],showGraph:!1};be.push(Qr(bt,{id:"dashboard",value:yt}))}return be}const Qr=(Ne,be)=>{const{id:ze,value:nt}=be,{nodes:yt,edges:bt}=Ne;if(nt&&typeof nt=="string"){const St=`${be.id}-${nt}`;return yt.push({id:St,label:nt}),bt.push({from:St,to:ze}),Ne}if(Gs(nt)){const St=Object.keys(nt);for(const zt of St){const qt=`${be.id}-${zt}`;yt.push({id:qt,label:zt}),bt.push({from:qt,to:ze}),Ne=Qr(Ne,{id:qt,value:nt[zt]})}return Ne}return Ne},zi=(Ne,be)=>{const ze=be.find(nt=>nt.variable.state.name===Ne);return ze&&Gs(ze.tree)?Dr(ze.tree):0},Dr=Ne=>Object.values(Ne).reduce((ze,nt)=>typeof nt=="object"?ze+Dr(nt):ze+1,0);async function Io(Ne,be){return new Promise((ze,nt)=>{setTimeout(()=>{try{const yt=Ro(Ne,be);ze(So(yt))}catch(yt){nt(yt)}},200)})}function Ro(Ne,be){if(!be)return[];let ze=[];const nt=Gi(Ne,be);for(const yt of nt){const bt=(0,Oo.Jx)(yt,{key:"model",value:be},{});Object.keys(bt).length&&ze.push({variable:yt,tree:bt})}return ze}const Gi=(Ne,be)=>{Pr.lastIndex=0;const ze=[],yt=(0,wi.MA)(be,2).match(Pr);if(!yt)return ze;for(const bt of yt){if(!bt||bt.indexOf("$__")!==-1||bt.indexOf("${__")!==-1||bt.indexOf("$hashKey")!==-1)continue;const St=Ao(bt);Ne.some(zt=>zt.state.name===St)||ze.find(zt=>zt===St)||St&&ze.push(St)}return ze};function Ao(Ne){const be=Hi(Ne);if(!be)return;const ze=be.slice(1).find(nt=>nt!==void 0);if(!(ze in{}))return ze}const Hi=Ne=>(Pr.lastIndex=0,Pr.exec(Ne));function Gs(Ne){return typeof Ne=="object"&&Ne!==null&&!Array.isArray(Ne)}var Ga=e(75505),_i=e(59857),kr=e(8515),or=e(71599),Qi=e(6975),ki=e(29),Yi=e(32442),Ji=e(25379),jo=e(49602),Xi=e(18387),Zi=e(73829),Lo=e(68577),Ps=e(44741);function qi({onChange:Ne,type:be}){const ze=(0,R.useMemo)(()=>(0,Ps.B$)(),[]),nt=(0,R.useMemo)(()=>ze.find(yt=>yt.value===be)??ze[0],[ze,be]);return(0,I.jsx)(Lo.v,{name:(0,s.t)("dashboard-scene.variable-type-select.name-variable-type","Variable type"),value:nt,options:ze,onChange:Ne,testId:J.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}function Bo({variable:Ne,onTypeChange:be,onGoBack:ze,onDelete:nt}){const yt=(0,nn.of)(Yr),[bt,St]=(0,R.useState)(),{name:zt,type:qt,label:gn,description:Dn,hide:In}=Ne.useState(),Hn=(0,Ps.bZ)(qt)?(0,Ps.CD)(qt):void 0,[qn,Kn]=(0,he.A)(async()=>{await(0,Ga.s)(Ne.validateAndUpdate())},[Ne]),Wn=ua=>{ua.value&&be(ua.value)},la=(0,R.useCallback)(ua=>{const os=(0,Ps.c$)(Ne,ua.currentTarget.value);os.errorMessage!==bt&&St(os.errorMessage)},[Ne,bt]),La=ua=>{bt||Ne.setState({name:ua.currentTarget.value})},sa=ua=>Ne.setState({label:ua.currentTarget.value}),pa=ua=>Ne.setState({description:ua.currentTarget.value}),Bn=ua=>Ne.setState({hide:ua}),Ea=(0,Ps.n_)(Ne),Ia=ua=>()=>{(0,fe.rR)("Delete variable"),nt(zt),ua()};return(0,I.jsxs)("form",{"aria-label":(0,s.t)("dashboard-scene.variable-editor-form.aria-label-variable-editor-form","Variable editor form"),children:[(0,I.jsx)(qi,{onChange:Wn,type:qt}),(0,I.jsx)(Yi.Y,{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-form.general",children:"General"})}),(0,I.jsx)(jo._,{name:(0,s.t)("dashboard-scene.variable-editor-form.name-name","Name"),description:(0,s.t)("dashboard-scene.variable-editor-form.description-template-variable-characters","The name of the template variable. (Max. 50 characters)"),placeholder:(0,s.t)("dashboard-scene.variable-editor-form.placeholder-variable-name","Variable name"),defaultValue:zt??"",onChange:la,onBlur:La,testId:J.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Zi.M.MaxSize,required:!0,invalid:!!bt,error:bt}),(0,I.jsx)(jo._,{name:(0,s.t)("dashboard-scene.variable-editor-form.name-label","Label"),description:(0,s.t)("dashboard-scene.variable-editor-form.description-optional-display-name","Optional display name"),placeholder:(0,s.t)("dashboard-scene.variable-editor-form.placeholder-label-name","Label name"),defaultValue:gn??"",onBlur:sa,testId:J.Tp.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),(0,I.jsx)(Ji.Z,{name:(0,s.t)("dashboard-scene.variable-editor-form.name-description","Description"),defaultValue:Dn??"",placeholder:(0,s.t)("dashboard-scene.variable-editor-form.placeholder-descriptive-text","Descriptive text"),onBlur:pa,width:52}),(0,I.jsx)(ki.D,{onChange:Bn,hide:In||_i.rw.hide,type:qt}),Hn&&(0,I.jsx)(Hn,{variable:Ne,onRunQuery:Kn}),Ea&&(0,I.jsx)(Xi.j,{options:Ne.getOptionsForSelect(!1)}),(0,I.jsx)("div",{className:yt.buttonContainer,children:(0,I.jsxs)(Q.B,{gap:2,children:[(0,I.jsx)(kr.$s,{children:({showModal:ua,hideModal:os})=>(0,I.jsx)(ee.$n,{variant:"destructive",fill:"outline",onClick:()=>{ua(or.u,{title:(0,s.t)("dashboard-scene.variable-editor-form.title.delete-variable","Delete variable"),body:`Are you sure you want to delete: ${zt}?`,confirmText:(0,s.t)("dashboard-scene.variable-editor-form.confirmText.delete-variable","Delete variable"),onConfirm:Ia(os),onDismiss:os,isOpen:!0})},children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-form.delete",children:"Delete"})})}),(0,I.jsx)(ee.$n,{variant:"secondary","data-testid":J.Tp.pages.Dashboard.Settings.Variables.Edit.General.applyButton,onClick:ze,children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-form.back-to-list",children:"Back to list"})}),Ea&&(0,I.jsx)(ee.$n,{disabled:qn.loading,variant:"secondary","data-testid":J.Tp.pages.Dashboard.Settings.Variables.Edit.General.submitButton,onClick:Kn,children:qn.loading?(0,I.jsx)(Qi._,{className:yt.loadingPlaceHolder,text:(0,s.t)("dashboard-scene.variable-editor-form.text-running-query","Running query...")}):(0,s.t)("dashbaord-scene.variable-editor-form.run-query","Run query")})]})})]})}const Yr=Ne=>({buttonContainer:(0,rt.css)({marginTop:Ne.spacing(2)}),loadingPlaceHolder:(0,rt.css)({marginBottom:0})});var Jr=e(21835),Uo=e(84500),Wo=e(27690);const el=({variables:Ne})=>{const be=(0,R.useMemo)(()=>ja(Ne),[Ne]),ze=(0,R.useMemo)(()=>Vi(Ne),[Ne]);return ze.length?(0,I.jsx)(Wo.i,{show:!1,title:(0,s.t)("dashboards.settings.variables.dependencies.title","Dependencies"),nodes:wa(be,ze),edges:ze,children:({showModal:nt})=>(0,I.jsx)(ee.$n,{onClick:()=>{(0,fe.rR)("Show variable dependencies"),nt()},icon:"channel-add",variant:"secondary",children:(0,I.jsx)(s.x6,{i18nKey:"dashboards.settings.variables.dependencies.button",children:"Show dependencies"})})}):null};var Xr=e(45967);const br=({id:Ne,usages:be,isAdhoc:ze})=>{const nt=(0,R.useMemo)(()=>be.find(bt=>(typeof bt.variable=="string"?bt.variable:bt.variable.state.name)===Ne),[be,Ne]);if(be.length===0||ze||!nt)return null;const yt=nt.nodes.map(bt=>bt.label.includes(`$${Ne}`)?{...bt,color:"#FB7E81"}:bt);return(0,I.jsx)(Wo.i,{show:!1,title:(0,s.t)("dashboard-scene.variable-usages-button.title-show-usages","Showing usages for: {{variableId}}",{variableId:`$${Ne}`}),nodes:yt,edges:nt.edges,children:({showModal:bt})=>(0,I.jsx)(fa.K,{onClick:()=>{(0,fe.rR)("Show variable usages"),bt()},name:"code-branch",tooltip:(0,s.t)("dashboard-scene.variable-usages-button.tooltip-show-usages","Show usages")})})};function No({index:Ne,variable:be,usageTree:ze,usagesNetwork:nt,onEdit:yt,onDuplicate:bt,onDelete:St}){const zt=(0,nn.$j)(),qt=(0,nn.of)(Ko),gn=(0,Ps.Ao)(be),Dn=be.state,In=Dn.name,qn=zi(In,ze)>0||Dn.type==="adhoc",[Kn,Wn]=(0,R.useState)(!1),la=sa=>()=>{Wn(sa)},La=()=>{(0,fe.rR)("Delete variable"),St(In)};return(0,I.jsx)(Jr.sx,{draggableId:JSON.stringify(In),index:Ne,children:(sa,pa)=>(0,I.jsxs)("tr",{ref:sa.innerRef,...sa.draggableProps,style:{userSelect:pa.isDragging?"none":"auto",background:pa.isDragging?zt.colors.background.secondary:void 0,...sa.draggableProps.style},children:[(0,I.jsx)("td",{role:"gridcell",className:qt.column,children:(0,I.jsx)(ee.$n,{size:"xs",fill:"text",onClick:Bn=>{Bn.preventDefault(),yt(In)},className:qt.nameLink,"data-testid":J.Tp.pages.Dashboard.Settings.Variables.List.tableRowNameFields(Dn.name),children:Dn.name})}),(0,I.jsx)("td",{role:"gridcell",className:qt.definitionColumn,onClick:Bn=>{Bn.preventDefault(),yt(In)},"data-testid":J.Tp.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(Dn.name),children:gn}),(0,I.jsx)("td",{role:"gridcell",className:qt.column,children:(0,I.jsxs)("div",{className:qt.icons,children:[(0,I.jsx)(tl,{passed:qn}),(0,I.jsx)(br,{id:Dn.name,isAdhoc:Dn.type==="adhoc",usages:nt}),(0,I.jsx)(fa.K,{onClick:Bn=>{Bn.preventDefault(),(0,fe.rR)("Duplicate variable"),bt(In)},name:"copy",tooltip:(0,s.t)("dashboard-scene.variable-editor-list-row.tooltip-duplicate-variable","Duplicate variable"),"data-testid":J.Tp.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(Dn.name)}),(0,I.jsx)(fa.K,{onClick:Bn=>{Bn.preventDefault(),Wn(!0)},name:"trash-alt",tooltip:(0,s.t)("dashboard-scene.variable-editor-list-row.tooltip-remove-variable","Remove variable"),"data-testid":J.Tp.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(Dn.name)}),(0,I.jsx)(or.u,{isOpen:Kn,title:(0,s.t)("dashboard-scene.variable-editor-list-row.title-delete-variable","Delete variable"),body:(0,s.t)("dashboard-scene.variable-editor-list-row.body-delete-variable","Are you sure you want to delete: {{variable}}?",{variable:Dn.name}),confirmText:(0,s.t)("dashboard-scene.variable-editor-list-row.confirmText-delete-variable","Delete variable"),onConfirm:La,onDismiss:la(!1)}),(0,I.jsx)("div",{...sa.dragHandleProps,className:qt.dragHandle,children:(0,I.jsx)(Mn.I,{name:"draggabledots",size:"lg"})})]})})]})})}function tl({passed:Ne}){const be=(0,nn.of)(Ko);return Ne?(0,I.jsx)(Xr.m,{content:(0,s.t)("dashboard-scene.variable-check-indicator.content-variable-referenced-other-variables-dashboard","This variable is referenced by other variables or dashboard."),children:(0,I.jsx)(Mn.I,{name:"check",className:be.iconPassed,"aria-label":(0,s.t)("dashboard-scene.variable-check-indicator.aria-label-variable-referenced-other-variables-dashboard","This variable is referenced by other variables or dashboard.")})}):(0,I.jsx)(Xr.m,{content:(0,s.t)("dashboard-scene.variable-check-indicator.content-variable-not-referenced-other-variables-dashboard","This variable is not referenced by other variables or dashboard."),children:(0,I.jsx)(Mn.I,{name:"exclamation-triangle",className:be.iconFailed,"aria-label":(0,s.t)("dashboard-scene.variable-check-indicator.aria-label-variable-referenced-dashboard","This variable is not referenced by any variable or dashboard.")})})}function Ko(Ne){return{dragHandle:(0,rt.css)({cursor:"grab",marginLeft:Ne.spacing(1)}),column:(0,rt.css)({width:"1%"}),nameLink:(0,rt.css)({cursor:"pointer",color:Ne.colors.primary.text}),definitionColumn:(0,rt.css)({width:"100%",maxWidth:"200px",cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),iconPassed:(0,rt.css)({color:Ne.v1.palette.greenBase,marginRight:Ne.spacing(2)}),iconFailed:(0,rt.css)({color:Ne.v1.palette.orange,marginRight:Ne.spacing(2)}),icons:(0,rt.css)({display:"flex",gap:Ne.spacing(2),alignItems:"center"})}}function nl({variables:Ne,usages:be,usagesNetwork:ze,onChangeOrder:nt,onDelete:yt,onDuplicate:bt,onAdd:St,onEdit:zt}){const qt=(0,nn.of)(Cr),gn=In=>{!In.destination||!In.source||((0,fe.rR)("Variable drag and drop"),nt(In.source.index,In.destination.index))};return Ne.filter(Uo.Ru).length<=0?(0,I.jsx)(al,{onAdd:St}):(0,I.jsxs)(Q.B,{direction:"column",gap:3,children:[(0,I.jsxs)("table",{className:vo()("filter-table","filter-table--hover",qt.tableContainer),"data-testid":J.Tp.pages.Dashboard.Settings.Variables.List.table,role:"grid",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-list.variable",children:"Variable"})}),(0,I.jsx)("th",{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-list.definition",children:"Definition"})}),(0,I.jsx)("th",{colSpan:5})]})}),(0,I.jsx)(Jr.JY,{onDragEnd:gn,children:(0,I.jsx)(Jr.gL,{droppableId:"variables-list",direction:"vertical",children:In=>(0,I.jsxs)("tbody",{ref:In.innerRef,...In.droppableProps,children:[Ne.map((Hn,qn)=>{if(!(0,Uo.Ru)(Hn))return null;const Kn=Hn.state;return(0,I.jsx)(No,{index:qn,variable:Hn,onDelete:yt,onDuplicate:bt,onEdit:zt,usageTree:be,usagesNetwork:ze},`${Kn.name}-${qn}`)}),In.placeholder]})})})]}),(0,I.jsxs)(Q.B,{children:[(0,I.jsx)(el,{variables:Ne}),(0,I.jsx)(ee.$n,{"data-testid":J.Tp.pages.Dashboard.Settings.Variables.List.newButton,onClick:St,icon:"plus",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.variable-editor-list.new-variable",children:"New variable"})})]})]})}function al({onAdd:Ne}){return(0,I.jsx)(Q.B,{direction:"column",children:(0,I.jsxs)(Cs.p,{variant:"call-to-action",button:(0,I.jsx)(ee.$n,{"data-testid":J.Tp.components.CallToActionCard.buttonV2("Add variable"),icon:"calculator-alt",onClick:Ne,size:"lg",children:(0,I.jsx)(s.x6,{i18nKey:"variables.empty-state.button-title",children:"Add variable"})}),message:(0,s.t)("variables.empty-state.title","There are no variables added yet"),children:[(0,I.jsx)("p",{children:(0,I.jsx)(s.x6,{i18nKey:"variables.empty-state.info-box-content",children:"Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server or sensor names in your metric queries you can use variables in their place. Variables are shown as list boxes at the top of the dashboard. These drop-down lists make it easy to change the data being displayed in your dashboard."})}),(0,I.jsxs)(s.x6,{i18nKey:"variables.empty-state.info-box-content-2",children:["Check out the"," ",(0,I.jsx)(en.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/variables/",children:"Templates and variables documentation"})," ","for more information."]})]})})}const Cr=()=>({tableContainer:(0,rt.css)({overflow:"auto"})}),gs=1e3;function Ts({variables:Ne,dashboard:be}){const[ze,nt]=(0,R.useState)(!1),[yt,bt]=(0,R.useState)(0),St=(0,nn.of)(Tr);(0,R.useEffect)(()=>bt(In=>In+1),[Ne,be]);const[{loading:zt,value:qt},gn]=(0,he.A)(async()=>{const In=Date.now(),Hn=await Io(Ne,be),Kn=Date.now()-In;return Kn>=gs&&(0,fe.rR)("Slow unknown variables expansion",{elapsed:Kn}),bt(0),Hn},[Ne,be]),Dn=In=>{In&&((0,fe.rR)("Unknown variables section expanded"),yt>0&&gn()),nt(In)};return(0,I.jsx)("div",{className:St.container,children:(0,I.jsx)(Hr.M,{label:(0,I.jsx)(Qn,{}),isOpen:ze,onToggle:Dn,children:zt||!qt?(0,I.jsx)(Q.B,{justifyContent:"center",direction:"column",children:(0,I.jsxs)(Q.B,{justifyContent:"center",children:[(0,I.jsx)("span",{children:(0,I.jsx)(s.x6,{i18nKey:"variables.unknown-table.loading",children:"Loading..."})}),(0,I.jsx)(_r.y,{})]})}):qt.length>0?(0,I.jsx)(wo,{usages:qt}):(0,I.jsx)(Fo,{})})})}function Qn(){const Ne=(0,nn.of)(Tr);return(0,I.jsxs)("h5",{children:[(0,I.jsx)(s.x6,{i18nKey:"variables.unknown-table.renamed-or-missing-variables",children:"Renamed or missing variables"}),(0,I.jsx)(Xr.m,{content:(0,s.t)("variables.unknown-table.tooltip-renamed-or-missing-variables","Click to expand a list with all variable references that have been renamed or are missing from the dashboard."),children:(0,I.jsx)(Mn.I,{name:"info-circle",className:Ne.infoIcon})})]})}function Fo(){return(0,I.jsx)("span",{children:(0,I.jsx)(s.x6,{i18nKey:"variables.unknown-table.no-unknowns",children:"No renamed or missing variables found."})})}function wo({usages:Ne}){const be=(0,nn.of)(Tr);return(0,I.jsxs)("table",{className:"filter-table filter-table--hover",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{children:(0,I.jsx)(s.x6,{i18nKey:"variables.unknown-table.variable",children:"Variable"})}),(0,I.jsx)("th",{colSpan:5})]})}),(0,I.jsx)("tbody",{children:Ne.map(ze=>{const nt=typeof ze.variable=="string"?ze.variable:ze.variable.state.name;return(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{className:be.firstColumn,children:(0,I.jsx)("span",{children:nt})}),(0,I.jsx)("td",{className:be.defaultColumn}),(0,I.jsx)("td",{className:be.defaultColumn}),(0,I.jsx)("td",{className:be.defaultColumn}),(0,I.jsx)("td",{className:be.lastColumn,children:(0,I.jsx)(br,{id:nt,usages:Ne,isAdhoc:!1})})]},nt)})})]})}const Tr=Ne=>({container:(0,rt.css)({marginTop:Ne.spacing(4),paddingTop:Ne.spacing(4)}),infoIcon:(0,rt.css)({marginLeft:Ne.spacing(1)}),defaultColumn:(0,rt.css)({width:"1%"}),firstColumn:(0,rt.css)({width:"1%",verticalAlign:"top",color:Ne.colors.text.maxContrast}),lastColumn:(0,rt.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",textAlign:"right"})});class Vo extends i.Bs{constructor(){super(...arguments),this._urlSync=new Vr(this),this.getVariableIndex=be=>this.getVariables().findIndex(nt=>nt.state.name===be),this.replaceEditVariable=be=>{const ze=this.state.editIndex??-1,{variables:nt}=this.getVariableSet().state;if(!nt[ze]){console.error("Variable not found");return}const bt=[...nt.slice(0,ze),be,...nt.slice(ze+1)];this.getVariableSet().setState({variables:bt})},this.onDelete=be=>{const ze=this.getVariableIndex(be),{variables:nt}=this.getVariableSet().state;if(ze===-1){console.error("Variable not found");return}const yt=[...nt.slice(0,ze),...nt.slice(ze+1)];this.getVariableSet().setState({variables:yt}),this.setState({editIndex:void 0})},this.onDuplicated=be=>{const ze=this.getVariableIndex(be),nt=this.getVariableSet().state.variables;if(ze===-1){console.error("Variable not found");return}const yt=nt[ze];let bt=0,St=`copy_of_${yt.state.name}`;for(;nt.some(gn=>gn.state.name===St);)bt++,St=`copy_of_${yt.state.name}_${bt}`;const zt=yt.clone(yt.state);zt.setState({name:St});const qt=[...nt.slice(0,ze+1),zt,...nt.slice(ze+1)];this.getVariableSet().setState({variables:qt})},this.onOrderChanged=(be,ze)=>{const nt=this.getVariableSet().state.variables;if(!this.getVariableSet())return;if(be<0||be>=nt.length||ze<0||ze>=nt.length){console.error("Invalid index");return}const yt=[...nt],bt=yt.splice(be,1);yt.splice(ze,0,bt[0]),this.getVariableSet().setState({variables:yt})},this.onEdit=be=>{const ze=this.getVariableIndex(be);if(ze===-1){console.error("Variable not found");return}this.setState({editIndex:ze})},this.onAdd=()=>{const be=this.getVariables(),ze=be.length,nt=(0,Ps.kh)(be);this.getVariableSet().setState({variables:[...this.getVariables(),nt]}),this.setState({editIndex:ze})},this.onTypeChange=be=>{const ze=this.state.editIndex??-1,{variables:nt}=this.getVariableSet().state,yt=nt[ze];if(!yt){console.error("Variable not found");return}const{name:bt,label:St}=yt.state,zt=(0,Ps.No)(be,{name:bt,label:St});this.replaceEditVariable(zt)},this.onGoBack=()=>{this.setState({editIndex:void 0})},this.onValidateVariableName=(be,ze)=>{let nt=null;Ps.cH.test(be)||(nt="Template names cannot begin with '__', that's reserved for Grafana's global variables"),Ps.mJ.test(be)||(nt="Only word characters are allowed in variable names");const yt=this.getVariableSet().getByName(be)?.state;return yt&&yt.key!==ze&&(nt="Variable with the same name already exists"),nt?[!0,nt]:[!1,null]},this.getSaveModel=()=>(0,Yt.Uy)(this.getDashboard()),this.getUsages=()=>{const be=this.getSaveModel();return $i(this.getVariables(),be)},this.getUsagesNetwork=()=>{const be=this.getUsages();return So(be)}}static{this.Component=Ss}getUrlKey(){return"variables"}getDashboard(){return(0,C.YQ)(this)}getVariableSet(){return i.jh.getVariables(this.getDashboard())}getVariables(){return this.getVariableSet().state.variables}}function Ss({model:Ne}){const be=Ne.getDashboard(),{navModel:ze,pageNav:nt}=ms(be,Ne.getUrlKey()),{onDelete:yt,onDuplicated:bt,onOrderChanged:St,onEdit:zt,onTypeChange:qt,onGoBack:gn,onAdd:Dn}=Ne,{variables:In}=Ne.getVariableSet().useState(),{editIndex:Hn}=Ne.useState(),qn=(0,R.useMemo)(()=>Ne.getUsagesNetwork(),[Ne]),Kn=(0,R.useMemo)(()=>Ne.getUsages(),[Ne]),Wn=Ne.getSaveModel();if(Hn!==void 0&&In[Hn]){const la=In[Hn];if(la)return(0,I.jsx)(Is,{variable:la,onTypeChange:qt,onGoBack:gn,pageNav:nt,navModel:ze,dashboard:be,onDelete:yt})}return(0,I.jsxs)(sn.Y,{navModel:ze,pageNav:nt,layout:Ht.k.Standard,children:[(0,I.jsx)(An.c,{dashboard:be}),(0,I.jsx)(nl,{variables:In,usages:Kn,usagesNetwork:qn,onDelete:yt,onDuplicate:bt,onChangeOrder:St,onAdd:Dn,onEdit:zt}),(0,I.jsx)(Ts,{variables:In,dashboard:Wn})]})}function Is({variable:Ne,pageNav:be,navModel:ze,dashboard:nt,onTypeChange:yt,onGoBack:bt,onDelete:St}){const{name:zt}=Ne.useState(),qt={text:zt,parentItem:be};return(0,I.jsxs)(sn.Y,{navModel:ze,pageNav:qt,layout:Ht.k.Standard,children:[(0,I.jsx)(An.c,{dashboard:nt}),(0,I.jsx)(Bo,{variable:Ne,onTypeChange:yt,onGoBack:bt,onDelete:St},Ne.state.key)]})}var Rs=e(10685),sl=e(34753),rl=e(1199),Zr=e(23289);const Mr=({hideModal:Ne,onRestore:be,version:ze})=>{const nt=(0,Ce._2)(),yt=async()=>{await be(ze)?(nt.success("Dashboard restored",`Restored from version ${ze.version}`),Zr.c.versionRestoreClicked({version:ze.version,confirm:!0})):nt.error("Dashboard restore failed",`Failed to restore from version ${ze.version}`),Ne()};return(0,I.jsx)(or.u,{isOpen:!0,title:(0,s.t)("dashboard-scene.revert-dashboard-modal.title-restore-version","Restore version"),icon:"history",onDismiss:Ne,onConfirm:yt,body:(0,I.jsx)("p",{children:(0,I.jsxs)(s.x6,{i18nKey:"dashboard-scene.revert-dashboard-modal.body-restore-version",values:{version:ze.version},children:["Are you sure you want to restore the dashboard to version ","{{version}}","? All unsaved changes will be lost."]})}),confirmText:(0,s.t)("dashboard-scene.revert-dashboard-modal.confirmText-restore-version","Yes, restore to version {{version}}",{version:ze.version})})};var $o=e(61371);const zo=({baseInfo:Ne,newInfo:be,diffData:ze,isNewLatest:nt,onRestore:yt})=>{const bt=(0,$o.G4)(ze.lhs,ze.rhs),St=(0,nn.of)(qr);return(0,I.jsxs)(Q.B,{direction:"column",gap:1,children:[(0,I.jsxs)(Q.B,{justifyContent:"space-between",alignItems:"center",children:[(0,I.jsxs)(Q.B,{alignItems:"center",children:[(0,I.jsxs)("span",{className:(0,rt.cx)(St.versionInfo,St.noMarginBottom),children:[(0,I.jsxs)(s.x6,{i18nKey:"dashboard-scene.version-history-comparison.old-version-updated",values:{version:Ne.version,editor:Ne.createdBy,timeAgo:Ne.ageString},children:[(0,I.jsxs)("strong",{children:["Version ","{{version}}"]})," updated by ","{{editor}}"," ","{{timeAgo}}"]}),Ne.message]}),(0,I.jsx)(Mn.I,{name:"arrow-right",size:"sm"}),(0,I.jsxs)("span",{className:St.versionInfo,children:[(0,I.jsxs)(s.x6,{i18nKey:"dashboard-scene.version-history-comparison.new-version-updated",values:{version:be.version,editor:be.createdBy,timeAgo:be.ageString},children:[(0,I.jsxs)("strong",{children:["Version ","{{version}}"]})," updated by ","{{editor}}"," ","{{timeAgo}}"]}),be.message]})]}),nt&&(0,I.jsx)(kr.$s,{children:({showModal:zt,hideModal:qt})=>(0,I.jsx)(ee.$n,{variant:"destructive",icon:"history",onClick:()=>{zt(Mr,{version:Ne,onRestore:yt,hideModal:qt})},children:(0,I.jsxs)(s.x6,{i18nKey:"dashboard-scene.version-history.comparison.button-restore",values:{version:Ne.version},children:["Restore to version ","{{version}}"]})})})]}),Object.entries(bt).map(([zt,qt])=>(0,I.jsx)(sl.D,{diffs:qt,title:zt},zt)),(0,I.jsx)(te.a,{paddingTop:2,children:(0,I.jsx)(Hr.M,{isOpen:!1,label:(0,s.t)("dashboard-scene.version-history-comparison.label-view-json-diff","View JSON diff"),children:(0,I.jsx)(rl.M,{oldValue:JSON.stringify(ze.lhs,null,2),newValue:JSON.stringify(ze.rhs,null,2)})})})]})},qr=Ne=>({versionInfo:(0,rt.css)({color:Ne.colors.text.secondary,fontSize:Ne.typography.bodySmall.fontSize}),noMarginBottom:(0,rt.css)({marginBottom:0})});var Go=e(7923),Ho=e(94018);const ol=({versions:Ne,canCompare:be,onCheck:ze,onRestore:nt})=>{const yt=(0,nn.of)(il);return(0,I.jsx)("div",{className:yt.margin,children:(0,I.jsxs)("table",{className:(0,rt.cx)("filter-table",yt.table),children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{children:[(0,I.jsx)("th",{className:"width-4"}),(0,I.jsx)("th",{className:"width-4",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.version-history-table.version",children:"Version"})}),(0,I.jsx)("th",{className:"width-14",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.version-history-table.date",children:"Date"})}),(0,I.jsx)("th",{className:"width-10",children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.version-history-table.updated-by",children:"Updated by"})}),(0,I.jsx)("th",{children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.version-history-table.notes",children:"Notes"})}),(0,I.jsx)("th",{})]})}),(0,I.jsx)("tbody",{children:Ne.map((bt,St)=>(0,I.jsxs)("tr",{children:[(0,I.jsx)("td",{children:(0,I.jsx)(se.S,{"aria-label":(0,s.t)("dashboard-scene.version-history-table.aria-label-toggle-selection","Toggle selection of version {{version}}",{version:bt.version}),className:(0,rt.css)({display:"inline"}),checked:bt.checked,onChange:zt=>ze(zt,bt.id),disabled:!bt.checked&&be})}),(0,I.jsx)("td",{children:bt.version}),(0,I.jsx)("td",{children:bt.createdDateString}),(0,I.jsx)("td",{children:bt.createdBy}),(0,I.jsx)("td",{children:bt.message}),(0,I.jsx)("td",{className:"text-right",children:St===0?(0,I.jsx)(Ho.v,{name:(0,s.t)("dashboard-scene.version-history-table.name-latest","Latest"),colorIndex:17}):(0,I.jsx)(kr.$s,{children:({showModal:zt,hideModal:qt})=>(0,I.jsx)(ee.$n,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{zt(Mr,{version:bt,hideModal:qt,onRestore:nt}),Zr.c.versionRestoreClicked({version:bt.version,index:St,confirm:!1,version_date:bt.created})},children:(0,I.jsx)(s.x6,{i18nKey:"dashboard-scene.version-history-table.restore",children:"Restore"})})})})]},bt.id))})]})})};function il(Ne){return{margin:(0,rt.css)({marginBottom:Ne.spacing(4)}),table:(0,rt.css)({td:{whiteSpace:"normal !important"}})}}const ll=10;class cl extends i.Bs{constructor(be){super({...be,versions:[],isLoading:!0,isAppending:!0,viewMode:"list",isNewLatest:!1,diffData:{lhs:"",rhs:""}}),this._limit=ll,this._start=0,this._continueToken="",this.fetchVersions=(ze=!1)=>{const nt=this._dashboard.state.uid;if(!nt)return;this.setState({isAppending:ze});const yt=this._continueToken?{limit:this._limit,start:this._start,continueToken:this._continueToken}:{limit:this._limit,start:this._start};da.w.getHistoryList(nt,yt).then(bt=>{this.setState({isLoading:!1,versions:[...ze?this.state.versions??[]:[],...this.decorateVersions(bt.versions)]}),this._start+=this._limit,this._continueToken=bt.continueToken??""}).catch(bt=>console.log(bt)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const ze=this.versions.filter(qt=>qt.checked),[nt,yt]=ze,bt=nt.version===this._dashboard.state.version;if(this.setState({isLoading:!0}),!this._dashboard.state.uid)return;let St=await da.w.getDashboardVersion(this._dashboard.state.uid,yt.id),zt=await da.w.getDashboardVersion(this._dashboard.state.uid,nt.id);this.setState({baseInfo:yt,isLoading:!1,isNewLatest:bt,newInfo:nt,viewMode:"compare",diffData:{lhs:St.data,rhs:zt.data}})},this.reset=()=>{this._continueToken="",this.setState({baseInfo:void 0,diffData:{lhs:"",rhs:""},isNewLatest:!1,newInfo:void 0,versions:this.versions.map(ze=>({...ze,checked:!1})),viewMode:"list"})},this.onCheck=(ze,nt)=>{this.setState({versions:this.versions.map(yt=>yt.id===nt?{...yt,checked:ze.currentTarget.checked}:yt)})},this.addActivationHandler(()=>{this.fetchVersions()})}static{this.Component=dl}get _dashboard(){return(0,C.YQ)(this)}get diffData(){return this.state.diffData??{lhs:"",rhs:""}}get versions(){return this.state.versions??[]}get limit(){return this._limit}get start(){return this._start}get continueToken(){return this._continueToken}getUrlKey(){return"versions"}getDashboard(){return this._dashboard}getTimeRange(){return i.jh.getTimeRange(this._dashboard)}decorateVersions(be){const ze=this.getTimeRange().getTimeZone();return be.map(nt=>({...nt,createdDateString:(0,ba.LE)(nt.created,{timeZone:ze}),ageString:(0,ba.fq)(nt.created,{timeZone:ze}),checked:!1}))}}function dl({model:Ne}){const be=Ne.getDashboard(),{isLoading:ze,isAppending:nt,viewMode:yt,baseInfo:bt,newInfo:St,isNewLatest:zt}=Ne.useState(),{navModel:qt,pageNav:gn}=ms(be,Ne.getUrlKey()),Dn=Ne.versions.filter(la=>la.checked).length===2,In=Ne.versions.length>1,Hn=Ne.versions.length>=Ne.limit;let qn=Ne.versions.find(la=>la.version===1)||Ne.versions.length%Ne.limit!==0||Ne.continueToken==="";const Kn=(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(Go.m,{onClick:Ne.reset,baseVersion:bt?.version,newVersion:St?.version,isNewLatest:zt}),ze?(0,I.jsx)(As,{msg:"Fetching changes\u2026"}):(0,I.jsx)(zo,{newInfo:St,baseInfo:bt,isNewLatest:zt,diffData:Ne.diffData,onRestore:be.onRestore})]}),Wn=(0,I.jsxs)(I.Fragment,{children:[ze?(0,I.jsx)(As,{msg:"Fetching history list\u2026"}):(0,I.jsx)(ol,{versions:Ne.versions,onCheck:Ne.onCheck,canCompare:Dn,onRestore:be.onRestore}),nt&&(0,I.jsx)(As,{msg:"Fetching more entries\u2026"}),In&&(0,I.jsx)(Rs.r,{hasMore:Hn,canCompare:Dn,getVersions:Ne.fetchVersions,getDiff:Ne.getDiff,isLastPage:!!qn})]});return(0,I.jsxs)(sn.Y,{navModel:qt,pageNav:gn,layout:Ht.k.Standard,children:[(0,I.jsx)(An.c,{dashboard:be}),yt==="compare"?Kn:Wn]})}const As=({msg:Ne})=>(0,I.jsxs)(Q.B,{children:[(0,I.jsx)(_r.y,{}),(0,I.jsx)("em",{children:Ne})]});function ms(Ne,be){const ze=(0,w.zy)(),nt=(0,Xe.d4)(zt=>zt.navIndex),yt=(0,f.tc)(nt,"dashboards/browse"),bt=Ne.getPageNav(ze,nt),St={text:(0,s.t)("dashboard-scene.use-dashboard-edit-page-nav.page-nav.text.settings","Settings"),url:n.I.getUrlForPartial(ze,{editview:"settings",editIndex:null}),children:[],parentItem:bt};return Ne.state.meta.canEdit&&(St.children.push({text:(0,s.t)("dashboard-settings.general.title","General"),url:n.I.getUrlForPartial(ze,{editview:"settings",editIndex:null}),active:be==="settings"}),St.children.push({text:(0,s.t)("dashboard-settings.annotations.title","Annotations"),url:n.I.getUrlForPartial(ze,{editview:"annotations",editIndex:null}),active:be==="annotations"}),St.children.push({text:(0,s.t)("dashboard-settings.variables.title","Variables"),url:n.I.getUrlForPartial(ze,{editview:"variables",editIndex:null}),active:be==="variables"}),St.children.push({text:(0,s.t)("dashboard-settings.links.title","Links"),url:n.I.getUrlForPartial(ze,{editview:"links",editIndex:null}),active:be==="links"})),Ne.state.uid&&Ne.state.meta.canSave&&St.children.push({text:(0,s.t)("dashboard-settings.versions.title","Versions"),url:n.I.getUrlForPartial(ze,{editview:"versions",editIndex:null}),active:be==="versions"}),Ne.state.uid&&Ne.state.meta.canAdmin&&T.TP.hasPermission(wr.w.DashboardsPermissionsRead)&&St.children.push({text:(0,s.t)("dashboard-settings.permissions.title","Permissions"),url:n.I.getUrlForPartial(ze,{editview:"permissions",editIndex:null}),active:be==="permissions"}),St.children.push({text:(0,s.t)("dashboard-settings.json-editor.title","JSON Model"),url:n.I.getUrlForPartial(ze,{editview:"json-model",editIndex:null}),active:be==="json-model"}),{navModel:yt,pageNav:St}}function eo(Ne){switch(Ne){case"annotations":return new vi({});case"variables":return new Vo({});case"links":return new Di({});case"versions":return new cl({});case"json-model":return new Ui({});case"permissions":return new Fi({});case"settings":default:return new ji({})}}var rs=e(91782),to=e(99949),ir=e(1131);class ws{constructor(be){this._scene=be}getKeys(){return["inspect","viewPanel","editPanel","editview","autofitpanels","kiosk","shareView"]}getUrlState(){const be=this._scene.state;return{autofitpanels:this.getAutoFitPanels(),viewPanel:be.viewPanel,editview:be.editview?.getUrlKey(),editPanel:be.editPanel?.getUrlKey()||void 0,kiosk:be.kioskMode===Do.d9.Full?"true":void 0,shareView:be.shareView,orgId:T.TP.user.orgId.toString()}}getAutoFitPanels(){if(this._scene.state.body instanceof ir.D)return this._scene.state.body.state.grid.state.UNSAFE_fitPanels?"true":void 0}updateFromUrl(be){const{viewPanel:ze,isEditing:nt,editPanel:yt,shareView:bt}=this._scene.state,St={};if(typeof be.editview=="string"&&this._scene.canEditDashboard()?(St.editview=eo(be.editview),nt||(this._scene.state.editable?setTimeout(()=>this._scene.onEnterEditMode()):St.editview=void 0)):be.hasOwnProperty("editview")&&(St.editview=void 0),typeof be.viewPanel=="string"?St.viewPanel=be.viewPanel:ze&&be.viewPanel===null&&(St.viewPanel=void 0),typeof be.editPanel=="string"){const qt=(0,C.Uv)(this._scene,be.editPanel);if(!qt){console.warn(`Panel ${be.editPanel} not found`);return}this._scene.state.viewPanel&&(St.viewPanel=void 0),nt||this._scene.onEnterEditMode();const gn=(0,C.iL)(qt);if(gn&&!gn?.state.isLoaded){this._waitForLibPanelToLoadBeforeEnteringPanelEdit(qt,gn);return}St.editPanel=(0,bo.L)(qt)}else yt&&be.editPanel===null&&(St.editPanel=void 0);typeof be.shareView=="string"?(St.shareView=be.shareView,St.overlay=r.$.featureToggles.newDashboardSharingComponent?new rs.j({shareView:be.shareView}):new to.Z({activeTab:be.shareView})):bt&&be.shareView===null&&(St.overlay=void 0,St.shareView=void 0);const zt=this._scene.state.body;if(zt instanceof ir.D){const qt=typeof be.autofitpanels=="string";!!zt.state.grid.state.UNSAFE_fitPanels!==qt&&zt.state.grid.setState({UNSAFE_fitPanels:qt})}typeof be.kiosk=="string"&&(be.kiosk==="true"||be.kiosk==="")&&(St.kioskMode=Do.d9.Full),Object.keys(St).length>0&&this._scene.setState(St)}_waitForLibPanelToLoadBeforeEnteringPanelEdit(be,ze){const nt=ze.subscribeToState(yt=>{yt.isLoaded&&(this._scene.setState({editPanel:(0,bo.L)(be)}),nt.unsubscribe())})}}var ul=e(57852),_o=e(12469);class hl{constructor(){this._binds=[]}addBinding(be){_o.R.bind(be.key,ze=>{ze.preventDefault(),ze.stopPropagation(),ze.returnValue=!1,be.onTrigger()},be.type??"keydown"),this._binds.push({...be,type:be.type??"keydown"})}removeAll(){this._binds.forEach(be=>{_o.R.unbind(be.key,be.type)}),this._binds=[]}}var Qo=e(15130),fl=e(26689),Xs=e(58662),no=e(60249);function pl(Ne,be){/^\d+$/.test(be)&&(be=(0,C.XA)(parseInt(be,10)));const ze=i.jh.findObject(Ne,nt=>nt instanceof i.Eb?be===nt.getPathId():!1);if(ze){if(ze instanceof i.Eb)return ze;throw new Error(`Found panel with key ${be} but it was not a VizPanel`)}return null}function gl(Ne){return Ne.includes(PATH_ID_SEPARATOR)}var ao=e(22079),ko=e(37040);function Yo(Ne){const be=new hl;let ze=null;const nt=Ne.canEditDashboard(),yt=o.A.subscribe(ul.Tp,St=>{typeof St.payload.panelId=="string"&&(ze=St.payload.panelId)});function bt(St,zt){return()=>{if(ze==null)return;const qt=pl(St,ze);if(qt){zt(qt);return}}}return be.addBinding({key:"v",onTrigger:bt(Ne,St=>{Ne.state.viewPanel?l.Ny.partial({viewPanel:void 0}):l.Ny.partial({viewPanel:St.getPathId(),editPanel:void 0})})}),r.$.featureToggles.newDashboardSharingComponent?(be.addBinding({key:"p u",onTrigger:bt(Ne,async St=>{const zt=new rs.j({shareView:Xs.wr.link,panelRef:St.getRef()});Ne.showModal(zt)})}),be.addBinding({key:"p e",onTrigger:bt(Ne,async St=>{const zt=new rs.j({shareView:Xs.wr.embed,panelRef:St.getRef()});Ne.showModal(zt)})}),Qo.TP.isSignedIn&&r.$.snapshotEnabled&&Qo.TP.hasPermission(wr.w.SnapshotsCreate)&&be.addBinding({key:"p s",onTrigger:bt(Ne,async St=>{const zt=new rs.j({shareView:Xs.wr.snapshot,panelRef:St.getRef()});Ne.showModal(zt)})})):be.addBinding({key:"p s",onTrigger:bt(Ne,async St=>{Ne.showModal(new to.Z({panelRef:St.getRef()}))})}),be.addBinding({key:"i",onTrigger:bt(Ne,async St=>{Ne.showModal(new no.C({panelRef:St.getRef(),currentTab:fl.q.Data}))})}),be.addBinding({key:"p x",onTrigger:bt(Ne,async St=>{const zt=await(0,ao.Lp)(St);zt&&l.Ny.push(zt)})}),be.addBinding({key:"p l",onTrigger:bt(Ne,ko.vR)}),be.addBinding({key:"d r",onTrigger:()=>i.jh.getTimeRange(Ne).onRefresh()}),be.addBinding({key:"t z",onTrigger:()=>{so(Ne)}}),be.addBinding({key:"ctrl+z",onTrigger:()=>{so(Ne)}}),be.addBinding({key:"t a",onTrigger:()=>{Zt.b4.getTimePicker(Ne)?.toAbsolute()}}),be.addBinding({key:"t left",onTrigger:()=>{Or(Ne,"left")}}),be.addBinding({key:"t right",onTrigger:()=>{Or(Ne,"right")}}),be.addBinding({key:"mod+o",onTrigger:()=>{const St=Ne.state.$behaviors?.find(zt=>zt instanceof i.Gg.K2);if(St instanceof i.Gg.K2){const qt=(St.state.sync+1)%3;St.setState({sync:qt}),o.A.publish(new _.Tq),i.jh.getTimeRange(Ne).onRefresh()}}}),nt&&(be.addBinding({key:"e",onTrigger:bt(Ne,async St=>{if(St.getRoot()instanceof io){const qt=(0,C.Cs)(St);if(Ne.state.editPanel)l.Ny.push(n.I.getUrlForPartial(l.Ny.getLocation(),{editPanel:void 0}));else{const gn=n.I.stripBaseFromUrl((0,ao.e0)(qt));l.Ny.push(gn)}}})}),be.addBinding({key:"d s",onTrigger:Ne.onOpenSettings}),be.addBinding({key:"mod+s",onTrigger:()=>Ne.openSaveDrawer({})}),be.addBinding({key:"p r",onTrigger:bt(Ne,St=>{Ne.state.isEditing&&(0,ko.MI)(Ne,St)})}),be.addBinding({key:"p d",onTrigger:bt(Ne,St=>{Ne.state.isEditing&&Ne.duplicatePanel(St)})}),be.addBinding({key:"d shift+c",onTrigger:()=>{Ne.state.body instanceof ir.D&&Ne.state.body.collapseAllRows()}}),be.addBinding({key:"d shift+e",onTrigger:()=>{Ne.state.body instanceof ir.D&&Ne.state.body.expandAllRows()}})),()=>{be.removeAll(),yt.unsubscribe()}}function so(Ne){Zt.b4.getTimePicker(Ne)?.onZoom()}function Or(Ne,be){const ze=Zt.b4.getTimePicker(Ne);ze&&(be==="left"&&ze.onMoveBackward(),be==="right"&&ze.onMoveForward())}var ro=e(25953),Zs=e(93389),Sr=e(17084),lr=e(48492),qs=e(20246);const oo=["title","description","tags","editable","graphTooltip","links","meta","preload"],Ir="systemPanelFilterVar",Hs="systemDynamicRowSizeVar";class io extends i.Bs{constructor(be,ze="v1"){super({title:(0,s.t)("dashboard-scene.dashboard-scene.title.dashboard","Dashboard"),meta:{},editable:!0,$timeRange:be.$timeRange??new i.JZ({}),body:be.body??ir.D.fromVizPanels([],(0,qs.DP)(be.preload)),links:be.links??[],...be,editPane:new K,layoutOrchestrator:new Vt}),this._urlSync=new ws(this),this._variableDependency=new Jo(this),this._renderBeforeActivation=!0,this.onEnterEditMode=()=>{this._initialState=i.Go.cloneSceneObjectState(this.state),this._initialUrlState=l.Ny.getLocation(),this.setState({isEditing:!0}),this.state.body.editModeChanged?.(!0),this._changeTracker.startTrackingChanges()},this.onRestore=async nt=>{let yt=await da.w.restoreDashboard(nt.uid,nt.id);if(!Number.isInteger(yt.version))return!1;const bt={dashboard:new v.G(nt.data),meta:this.state.meta},St=(0,Zn.wM)(bt),zt=i.Go.cloneSceneObjectState(St.state);return zt.version=yt.version,this.setState(zt),this.exitEditMode({skipConfirm:!0,restoreInitialState:!1}),!0},this.onOpenSettings=()=>{l.Ny.partial({editview:"settings"})},this.getSnapshotUrl=()=>this.serializer.getSnapshotUrl(),this.onSetScrollRef=nt=>{this._scrollRef=nt},this.serializer=Sn(ze==="v2"?"v2":"v1"),this._changeTracker=new F.l(this),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=Po}_activationHandler(){let be=window.__grafanaSceneContext;const ze=l.Ny.getLocation().pathname==="/dashboard/new";window.__grafanaSceneContext=this,this._initializePanelSearch(),this.state.isEditing&&(this._initialUrlState=l.Ny.getLocation(),this._changeTracker.startTrackingChanges()),ze&&(this.onEnterEditMode(),this.setState({isDirty:!0})),!this.state.meta.isEmbedded&&this.state.uid&&m.t.watch(this.state.uid);let nt=()=>{};r.$.publicDashboardAccessToken||(nt=Yo(this));const yt=new Dt(this);return(0,E.UA)().setCurrent(yt),()=>{window.__grafanaSceneContext=be,nt(),this._changeTracker.terminate(),yt.destroy(),m.t.leave()}}_initializePanelSearch(){const be=i.jh.lookupVariable(Ir,this)?.getValue();typeof be=="string"&&this.setState({panelSearch:be});const ze=i.jh.lookupVariable(Hs,this)?.getValue();if(typeof ze=="string"){const nt=Number.parseInt(ze,10);this.setState({panelsPerRow:Number.isInteger(nt)?nt:void 0})}}saveCompleted(be,ze,nt){this.serializer.onSaveComplete(be,ze),this._changeTracker.stopTrackingChanges(),this.setState({version:ze.version,isDirty:!1,uid:ze.uid,id:ze.id,meta:{...this.state.meta,uid:ze.uid,url:ze.url,slug:ze.slug,folderUid:nt,version:ze.version},overlay:void 0}),this.state.editPanel?.dashboardSaved(),this._initialState=i.Go.cloneSceneObjectState(this.state),this._initialUrlState=l.Ny.getLocation(),this._changeTracker.startTrackingChanges()}exitEditMode({skipConfirm:be,restoreInitialState:ze}){if(!this.canDiscard()){console.error("Trying to discard back to a state that does not exist, initialState undefined");return}if(!this.state.isDirty||be||this.managedResourceCannotBeEdited()){this.exitEditModeConfirmed(ze||this.state.isDirty);return}o.A.publish(new d.bY({title:(0,s.t)("dashboard-scene.dashboard-scene.title.discard-changes-to-dashboard","Discard changes to dashboard?"),text:"You have unsaved changes to this dashboard. Are you sure you want to discard them?",icon:"trash-alt",yesText:"Discard",onConfirm:()=>{this.exitEditModeConfirmed()}}))}exitEditModeConfirmed(be=!0){this._changeTracker.stopTrackingChanges();const ze=n.I.getUrlForPartial(this._initialUrlState,{editPanel:null,editview:null,inspect:null,inspectTab:null,shareView:null});l.Ny.replace(n.I.stripBaseFromUrl(ze)),be?this.setState({...this._initialState,isEditing:!1}):this.setState({isEditing:!1}),this.state.editPanel&&this.state.editPanel.onDiscard(),this.state.body.editModeChanged?.(!1)}canDiscard(){return this._initialState!==void 0}pauseTrackingChanges(){this._changeTracker.stopTrackingChanges()}resumeTrackingChanges(){this._changeTracker.startTrackingChanges()}openSaveDrawer({saveAsCopy:be,onSaveSuccess:ze}){this.state.isEditing&&this.setState({overlay:new _n({dashboardRef:this.getRef(),saveAsCopy:be,onSaveSuccess:ze,showVariablesWarning:this.hasVariableErrors()})})}openV2SchemaEditor(){this.setState({overlay:new ut({dashboardRef:this.getRef()})})}getPageNav(be,ze){const{meta:nt,viewPanel:yt,editPanel:bt,title:St,uid:zt}=this.state,qt=!zt;let gn={text:St,url:(0,Re.u)({uid:zt,slug:nt.slug,currentQueryParams:be.search,updateQuery:{viewPanel:null,inspect:null,editview:null,editPanel:null,tab:null,shareView:null},isHomeDashboard:!nt.url&&!nt.slug&&!qt&&!nt.isSnapshot,isSnapshot:nt.isSnapshot})};const{folderUid:Dn}=nt;if(Dn){const In=(0,f.tc)(ze,`folder-dashboards-${Dn}`).main;In.id!=="not-found"&&(gn={...gn,parentItem:In})}return yt&&(gn={text:(0,s.t)("dashboard-scene.dashboard-scene.text.view-panel","View panel"),parentItem:gn,url:n.I.getUrlForPartial(l.Ny.getLocation(),{viewPanel:yt,editPanel:void 0})}),bt&&(gn={text:(0,s.t)("dashboard-scene.dashboard-scene.text.edit-panel","Edit panel"),parentItem:gn}),gn}getInitialState(){return this._initialState}addPanel(be){this.state.isEditing||this.onEnterEditMode(),this.state.body.addPanel(be)}createLibraryPanel(be,ze){const nt=be.clone({$behaviors:[new ct.u({uid:ze.uid,name:ze.name})]}),yt=be.parent;if(!(yt instanceof Zs.U))throw new Error("Trying to replace a panel that doesn't have a parent grid item");yt.setState({body:nt})}duplicatePanel(be){(0,C.h$)(be).duplicatePanel?.(be)}copyPanel(be){if(r.$.featureToggles.dashboardNewLayouts){const yt=be.parent;if(yt instanceof ro.X){const bt=(0,Ln.V6)(yt,this),St=(0,mn.zd)(yt);(0,lr.G2)(),g.A.set(h.tH,JSON.stringify({elements:bt,gridItem:St}))}else if(yt instanceof Zs.U){const bt=(0,Ln.V6)(yt,this),St=(0,wn.i2)(yt);(0,lr.G2)(),g.A.set(h.tH,JSON.stringify({elements:bt,gridItem:St}))}else throw console.error("Trying to copy a panel that is not DashboardGridItem child"),new Error("Trying to copy a panel that is not DashboardGridItem child");return}if(!be.parent)return;let ze=be.parent;if(!(ze instanceof Zs.U))throw console.error("Trying to copy a panel that is not DashboardGridItem child"),new Error("Trying to copy a panel that is not DashboardGridItem child");const nt=(0,Yt.ZB)(ze);(0,lr.G2)(),g.A.set(h.tH,JSON.stringify(nt))}pastePanel(){const be=g.A.get(h.tH),ze=JSON.parse(be),nt=new p.a9(ze),bt=(0,Zn.tt)(nt).state.body;this.addPanel(bt),g.A.delete(h.tH)}removePanel(be){(0,C.h$)(be).removePanel?.(be)}unlinkLibraryPanel(be){if(!be.parent)return;const ze=be.parent;if(!(ze instanceof Zs.U)){console.error("Trying to unlink a lib panel in a layout that is not DashboardGridItem");return}ze.state.body.setState({$behaviors:void 0})}showModal(be){this.setState({overlay:be})}closeModal(){this.setState({overlay:void 0})}async onStarDashboard(){const{meta:be,uid:ze}=this.state;if(ze)try{const nt=await(0,E.UA)().starDashboard(ze,!!be.isStarred);this.setState({meta:{...be,isStarred:nt}})}catch(nt){console.error("Failed to star dashboard",nt)}}onShowAddLibraryPanelDrawer(be){this.setState({overlay:new Ct({panelToReplaceRef:be})})}onCreateNewRow(){return(0,Sr.t)(this.state.body)}onCreateNewPanel(){const be=(0,C.O8)();return this.addPanel(be),be}switchLayout(be){const ze=this.state.body;S.cc.edit({description:(0,s.t)("dashboard.edit-actions.switch-layout","Switch layout"),source:this,perform:()=>this.setState({body:be}),undo:()=>this.setState({body:ze})})}getLayout(){return this.state.body}enrichDataRequest(be){const ze=(0,C.YQ)(be);let nt=(0,C.xz)(be);ze.state.isEditing&&ze.state.editPanel&&(nt=ze.state.editPanel.state.panelRef.resolve());let yt=0;return nt&&nt.state.key&&((0,D.bn)(nt)?yt=(0,cn.t)(nt.getPathId()):yt=(0,C.Cs)(nt)),{app:a.Jk.Dashboard,dashboardUID:this.state.uid,panelId:yt,panelName:nt?.state?.title,panelPluginId:nt?.state.pluginId,dashboardTitle:this.state.title}}canEditDashboard(){const{meta:be}=this.state;return!!(be.canEdit||be.canMakeEditable||r.$.viewersCanEdit)}getInitialSaveModel(){return this.serializer.initialSaveModel}setInitialSaveModel(be,ze,nt){this.serializer.initializeElementMapping(be),this.serializer.initializeDSReferencesMapping(be);const yt=(0,u.v)(be);this.serializer.initialSaveModel=yt,this.serializer.metadata=ze,this.serializer.apiVersion=nt}getTrackingInformation(){return this.serializer.getTrackingInformation(this)}async onDashboardDelete(){this.setState({isDirty:!1}),l.Ny.replace("/")}getDashboardPanels(){return Zt.b4.getVizPanels(this)}rememberScrollPos(){this._prevScrollPos=this._scrollRef?.scrollTop}restoreScrollPos(){this._prevScrollPos!==void 0&&this._scrollRef?.scrollTo(0,this._prevScrollPos)}getSaveModel(){return this.serializer.getSaveModel(this)}getSaveResource(be){const{meta:ze}=this.state,nt=this.getSaveAsModel(be);return{apiVersion:`dashboard.grafana.app/${this.serializer instanceof vn?"v2beta1":"v1beta1"}`,kind:"Dashboard",metadata:{...ze.k8s,name:ze.uid??ze.k8s?.name,generateName:be.isNew?"d":void 0},spec:nt}}getSaveAsModel(be){return this.serializer.getSaveAsModel(this,be)}getDashboardChanges(be,ze,nt){return this.serializer.getDashboardChangesFromScene(this,{saveTimeRange:be,saveVariables:ze,saveRefresh:nt})}getManagerKind(){return this.state.meta.k8s?.annotations?.[x.LH]}getManagerIdentity(){return this.state.meta.k8s?.annotations?.[x.Jw]}isManaged(){return!!this.getManagerKind()}isManagedRepository(){return r.$.featureToggles.provisioning?this.getManagerKind()===x.Sf.Repo:!1}managedResourceCannotBeEdited(){return this.isManaged()&&!this.isManagedRepository()&&!this.state.meta.k8s?.annotations?.[x.Ms]}getPath(){return this.state.meta.k8s?.annotations?.[x.Y_]}hasVariableErrors(){return!!this.state.$variables?.state.variables.find(be=>!!be.state.error)}}class Jo{constructor(be){this._dashboard=be,this._emptySet=new Set}getNames(){return this._emptySet}hasDependencyOn(){return!1}variableUpdateCompleted(be,ze){if(ze&&(o.A.publish(new y.og({refreshAll:!0,panelIds:[]})),this._dashboard.publishEvent(new c._)),be.state.name===Ir){const nt=be.getValue();typeof nt=="string"&&this._dashboard.setState({panelSearch:nt})}else if(be.state.name===Hs){const nt=be.getValue();if(typeof nt=="string"){const yt=Number.parseInt(nt,10);this._dashboard.setState({panelsPerRow:Number.isInteger(yt)?yt:void 0})}}}}},11576:(ne,A,e)=>{"use strict";e.d(A,{H:()=>v,J:()=>u});var n=e(2543),a=e.n(n),s=e(41119),l=e(25229),r=e(44922),c=e(95004),i=e(13227),o=e(35987),h=e(55386),f=e(79118);const g={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function u(m){if(!m||(0,n.isEmpty)(m)||!m.field)return E;const y=m.field,d=y.config??{},{palette:x}=m.theme.visualization;let b=d.unit,D=b&&(g[b]||b.startsWith("time:")),C=!1;if(y.type===c.PU.time&&!D){if(b="dateTimeAsSystem",D=!0,y.values&&y.values.length>1){let F=y.values[0],I=y.values[y.values.length-1];typeof F=="string"?(F=(0,r.b)(F).unix(),I=(0,r.b)(I).unix()):(F/=1e3,I/=1e3),C=Math.abs(I-F)<60}}else y.type===c.PU.boolean?(0,h.j9)(b)||(b="bool"):!b&&y.type===c.PU.string&&(b="string");const P=b?.startsWith("currency"),T=(0,h.j9)(b),O=y.type===c.PU.number,B=!D&&!P&&!T&&!(b==="locale")&&O&&d.decimals==null,K=(0,h.j_)(b||"none"),U=(0,f.jc)(y,m.theme);return(F,I)=>{const{mappings:V}=d,M=b==="string";D&&typeof F=="string"&&(F=(0,l.yT)(F).valueOf());let L=M?NaN:(0,i.t)(F),N,W,R,G,w,_;if(V&&V.length>0){const ae=(0,o.Zz)(V,F);ae&&(ae.text!=null&&(N=ae.text),ae.color!=null&&(G=m.theme.visualization.getColorByName(ae.color)),ae.icon!=null&&(w=ae.icon))}else if(y.type===c.PU.enum){if(F==null)return{text:"",numeric:NaN};const ae=+F;if(d&&d.type&&d.type.enum){const{text:q,color:k}=d.type.enum;if(N=q?q[ae]:`${F}`,G=k?k[ae]:void 0,G==null){const ee=x[ae%x.length];G=m.theme.visualization.getColorByName(ee)}}}if(!Number.isNaN(L)){if(N==null&&!(0,n.isBoolean)(F)){let ae;B&&I!=null?(ae=K(L,I,null,m.timeZone,C),ae.text=+ae.text+""):ae=K(L,d.decimals,null,m.timeZone,C),N=ae.text,R=ae.suffix,W=ae.prefix}if(G==null){const ae=U(L);G=ae.color,_=ae.percent}}if(N==null&&(0,n.isArray)(F)&&(N=(0,n.join)(F,", ")),N==null&&(N=(0,n.toString)(F),N||(d.noValue?N=d.noValue:N="")),!G){const ae=U(-1/0);G=ae.color,_=ae.percent}const Q={text:N,numeric:L,prefix:W,suffix:R,color:G};return w!=null&&(Q.icon=w),_!=null&&(Q.percent=_),Q}}function E(m){return{text:(0,n.toString)(m),numeric:(0,i.t)(m)}}function v(){return m=>({text:(0,s.oE)(m)==="other"?`${JSON.stringify(m,p())}`:`${m}`,numeric:null})}const p=()=>{const m=new WeakSet;return(y,d)=>{if(typeof d=="object"&&d!==null){if(m.has(d))return;m.add(d)}return d}}},11940:(ne,A,e)=>{"use strict";e.d(A,{w:()=>r,y:()=>l});var n=e(55143),a=e(52161);const{useDiscoverDsFeaturesQuery:s}=n.L;function l(c){const i=(0,a.EV)(c),{currentData:o}=s({rulesSourceName:i});return{hasRuler:!!o?.rulerConfig,rulerConfig:o?.rulerConfig}}function r(c){const{currentData:i}=s({uid:c.uid});return{hasRuler:!!i?.rulerConfig,rulerConfig:i?.rulerConfig}}},11968:(ne,A,e)=>{"use strict";e.d(A,{U:()=>c});var n=e(45863),a=e(29043),s=e(7817),l=e(6262),r=e(65333);function c(i){const o=a.A.getObject(l.us);if(o){const h=new s.G(o.dashboard);for(const f of h.panels){const g=(0,r.tt)(f);i.addPanel(g.state.body)}if(o.dashboard.time){const f=new n.JZ({from:o.dashboard.time.from,to:o.dashboard.time.to}),g=i.state.$timeRange;g&&g.setState({value:f.state.value,from:f.state.from,to:f.state.to})}}a.A.delete(l.us)}},12048:(ne,A,e)=>{"use strict";e.d(A,{b:()=>f});var n=e(5805),a=e(92745),s=e(68143),l=e(64762),r=e(30124);async function c(g,u){const E=i(g),v=await h(E,u);return o(g,v),v}function i(g){let{scopedVars:u,...E}=g.getSaveModel();return E={libraryPanel:{name:g.title,uid:void 0},...E},E}function o(g,u){g.restoreModel({...u.model,configRev:0,libraryPanel:u,title:g.title}),g.hasSavedPanelEditChange=!0,g.refresh()}function h(g,u){return g.libraryPanel?g.libraryPanel&&g.libraryPanel.uid===""?(0,r.d7)(g,u):(0,r.jc)(g):Promise.reject()}const f=()=>{const g=(0,l._2)(),[u,E]=(0,n.default)(async(v,p)=>{try{const m=await c(v,p);return g.success((0,a.t)("library-panels.save.success","Library panel saved")),m}catch(m){throw(0,s.NF)(m)&&(m.isHandled=!0,g.error((0,a.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:m.message??m.data.message}))),m}},[]);return{state:u,saveLibraryPanel:E}}},12066:(ne,A,e)=>{"use strict";e.d(A,{$K:()=>p,Do:()=>f,XC:()=>u,XR:()=>g,dx:()=>h,fX:()=>x,g5:()=>v,oF:()=>E,qN:()=>d});var n=e(65307),a=e(25508),s=e(96221);const l=25,r="notifications",c=`${r}/lastRead`,i={byId:P(),lastRead:Number.parseInt(window.localStorage.getItem(c)??`${Date.now()}`,10)},o=(0,n.Z0)({name:"appNotifications",initialState:i,reducers:{notifyApp:(O,{payload:S})=>{Object.values(O.byId).some(B=>b(S,B)&&B.showing)||(O.byId[S.id]=S,T(O.byId))},hideAppNotification:(O,{payload:S})=>{S in O.byId&&(O.byId[S].showing=!1,T(O.byId))},clearNotification:(O,{payload:S})=>{delete O.byId[S],T(O.byId)},clearAllNotifications:O=>{O.byId={},T(O.byId)},readAllNotifications:(O,{payload:S})=>{O.lastRead=S}}}),{notifyApp:h,hideAppNotification:f,clearNotification:g,clearAllNotifications:u,readAllNotifications:E}=o.actions,v=o.reducer,p=O=>O.lastRead,m=O=>O.byId,y=(0,a.Mz)(m,O=>Object.values(O).sort((S,B)=>B.timestamp-S.timestamp)),d=(0,a.Mz)(y,O=>O.filter(D)),x=(0,a.Mz)(m,O=>Object.values(O).filter(S=>S.showing));function b(O,S){return O.icon===S.icon&&O.severity===S.severity&&O.text===S.text&&O.title===S.title}function D(O){return O.severity===s.Qd.Warning||O.severity===s.Qd.Error}function C(O){return typeof O=="object"&&O!==null&&"id"in O&&"icon"in O&&"title"in O&&"text"in O}function P(){const O=window.localStorage.getItem(r);if(!O)return{};const S=JSON.parse(O);return Object.values(S).every(B=>C(B))?S:{}}function T(O){const S=Object.values(O).filter(D).sort((B,K)=>K.timestamp-B.timestamp).slice(0,l).reduce((B,K)=>(B[K.id]={id:K.id,severity:K.severity,icon:K.icon,title:K.title,text:K.text,traceId:K.traceId,timestamp:K.timestamp,showing:!1},B),{});try{window.localStorage.setItem(r,JSON.stringify(S))}catch(B){console.error("Unable to persist notifications to local storage"),console.error(B)}}},12161:(ne,A,e)=>{"use strict";e.d(A,{l:()=>l});var n=e(74848),a=e(92745),s=e(71599);const l=({isOpen:r,onConfirm:c,onDismiss:i})=>(0,n.jsx)(s.u,{title:(0,a.t)("dashboard-scene.unlink-modal.title-really-unlink-panel","Do you really want to unlink this panel?"),icon:"question-circle",body:(0,a.t)("dashboard-scene.unlink-modal.body-unlink-panel","If you unlink this panel, you will be able to edit it without affecting any other dashboards. However, once you make a change you will not be able to revert to its original reusable panel."),confirmText:(0,a.t)("dashboard-scene.unlink-modal.confirmText-yes-unlink","Yes, unlink"),onConfirm:()=>{c(),i()},onDismiss:i,isOpen:r})},12173:(ne,A,e)=>{"use strict";e.d(A,{A:()=>f});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(96540),c=e(84140),i=e(63142),o=e(63527);const h=(0,r.forwardRef)(({color:E,onChange:v,isClearable:p=!1,onClick:m,onBlur:y,disabled:d,buttonAriaLabel:x,...b},D)=>{const[C,P]=(0,r.useState)(E),[T,O]=(0,r.useState)(E),S=(0,r.useMemo)(()=>(0,s.debounce)(v,100),[]);(0,r.useEffect)(()=>{const U=(0,c.A)(E);U.isValid()&&E!==T&&(P(U.toString()),O(E))},[E,T]);const B=U=>{const{value:F}=U.currentTarget;if(P(F),F===""&&p){S(F);return}const I=(0,c.A)(F);I.isValid()&&S(I.toString())},K=U=>{(0,c.A)(C).isValid()||P(E),y?.(U)};return(0,n.jsx)(o.p,{...b,value:C,onChange:B,disabled:d,onClick:m,onBlur:K,addonBefore:(0,n.jsx)(g,{onClick:m,ariaLabel:x,disabled:d,color:E}),ref:D})});h.displayName="ColorInput";const f=h,g=({color:E,onClick:v,disabled:p,ariaLabel:m})=>{const y=(0,i.of)(u);return(0,n.jsx)("button",{type:"button",onClick:v,"aria-label":m,disabled:p||!v,className:(0,a.cx)(y,(0,a.css)({backgroundColor:E}))})},u=E=>(0,a.css)({height:"100%",width:`${E.spacing.gridSize*4}px`,borderRadius:`${E.shape.radius.default} 0 0 ${E.shape.radius.default}`,border:`1px solid ${E.colors.border.medium}`})},12241:(ne,A,e)=>{"use strict";e.d(A,{S:()=>p,V:()=>m});var n=e(38809),a=e(64394),s=e(83340),l=e(95004),r=e(92745),c=e(739),i=e(81082),o=e(44017),h=e(45013),f=e(99555),g=e(17914),u=e(32471),E=e(76548),v=e(99709);const p={drawStyle:c.GR.Line,lineInterpolation:c.dx.Linear,lineWidth:1,fillOpacity:0,gradientMode:c.on.None,barAlignment:c.Nj.Center,barWidthFactor:.6,stacking:{mode:c.gs.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1,axisBorderShow:!1,showValues:!1};function m(y,d=!0){const x=(0,f.P)(),b=[(0,r.t)("timeseries.config.get-graph-field-config.category-graph-styles","Graph styles")];return{standardOptions:{[s.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:a.Y.PaletteClassic}},[s.uo.Links]:{settings:{showOneClick:!0}},[s.uo.Actions]:{hideFromDefaults:!1}},useCustomConfig:D=>{D.addRadio({path:"drawStyle",name:(0,r.t)("timeseries.config.get-graph-field-config.name-style","Style"),category:b,defaultValue:y.drawStyle,settings:{options:x.drawStyle}}).addRadio({path:"lineInterpolation",name:(0,r.t)("timeseries.config.get-graph-field-config.name-line-interpolation","Line interpolation"),category:b,defaultValue:y.lineInterpolation,settings:{options:x.lineInterpolation},showIf:C=>C.drawStyle===c.GR.Line}).addRadio({path:"barAlignment",name:(0,r.t)("timeseries.config.get-graph-field-config.name-bar-alignment","Bar alignment"),category:b,defaultValue:y.barAlignment,settings:{options:x.barAlignment},showIf:C=>C.drawStyle===c.GR.Bars}).addSliderInput({path:"barWidthFactor",name:(0,r.t)("timeseries.config.get-graph-field-config.name-bar-width-factor","Bar width factor"),category:b,defaultValue:y.barWidthFactor,settings:{min:.1,max:1,step:.1,ariaLabelForHandle:(0,r.t)("timeseries.config.get-graph-field-config.aria-label-bar-width-factor","Bar width factor")},showIf:C=>C.drawStyle===c.GR.Bars}).addSliderInput({path:"lineWidth",name:(0,r.t)("timeseries.config.get-graph-field-config.name-line-width","Line width"),category:b,defaultValue:y.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:(0,r.t)("timeseries.config.get-graph-field-config.aria-label-line-width","Line width")},showIf:C=>C.drawStyle!==c.GR.Points}).addSliderInput({path:"fillOpacity",name:(0,r.t)("timeseries.config.get-graph-field-config.name-fill-opacity","Fill opacity"),category:b,defaultValue:y.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:(0,r.t)("timeseries.config.get-graph-field-config.aria-label-fill-opacity","Fill opacity")},showIf:C=>C.drawStyle!==c.GR.Points}).addRadio({path:"gradientMode",name:(0,r.t)("timeseries.config.get-graph-field-config.name-gradient-mode","Gradient mode"),category:b,defaultValue:x.fillGradient[0].value,settings:{options:x.fillGradient},showIf:C=>C.drawStyle!==c.GR.Points}).addFieldNamePicker({path:"fillBelowTo",name:(0,r.t)("timeseries.config.get-graph-field-config.name-fill-below-to","Fill below to"),category:b,hideFromDefaults:!0,settings:{filter:C=>C.type===l.PU.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:(0,r.t)("timeseries.config.get-graph-field-config.name-line-style","Line style"),category:b,showIf:C=>C.drawStyle===c.GR.Line,editor:u.F,override:u.F,process:n.hS,shouldApply:C=>C.type===l.PU.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:(0,r.t)("timeseries.config.get-graph-field-config.name-connect-nulls","Connect null values"),category:b,defaultValue:!1,editor:E.e,override:E.e,showIf:C=>C.drawStyle===c.GR.Line,shouldApply:C=>C.type!==l.PU.time,process:n.hS,settings:{isTime:d}}).addCustomEditor({id:"insertNulls",path:"insertNulls",name:(0,r.t)("timeseries.config.get-graph-field-config.name-disconnect-values","Disconnect values"),category:b,defaultValue:!1,editor:g.Z,override:g.Z,showIf:C=>C.drawStyle===c.GR.Line,shouldApply:C=>C.type!==l.PU.time,process:n.hS,settings:{isTime:d}}).addRadio({path:"showPoints",name:(0,r.t)("timeseries.config.get-graph-field-config.name-show-points","Show points"),category:b,defaultValue:x.showPoints[0].value,settings:{options:x.showPoints},showIf:C=>C.drawStyle!==c.GR.Points}).addBooleanSwitch({path:"showValues",name:(0,r.t)("timeseries.config.get-graph-field-config.name-show-values","Show values"),category:b,defaultValue:!1,showIf:C=>C.showPoints!==c.yL.Never||C.drawStyle===c.GR.Points}).addSliderInput({path:"pointSize",name:(0,r.t)("timeseries.config.get-graph-field-config.name-point-size","Point size"),category:b,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:(0,r.t)("timeseries.config.get-graph-field-config.aria-label-point-size","Point size")},showIf:C=>C.showPoints!==c.yL.Never||C.drawStyle===c.GR.Points}),i.I(D,y.stacking,b),D.addSelect({category:b,name:(0,r.t)("timeseries.config.get-graph-field-config.name-transform","Transform"),path:"transform",settings:{options:[{label:(0,r.t)("timeseries.config.get-graph-field-config.transform-options.label-constant","Constant"),value:c.NU.Constant,description:(0,r.t)("timeseries.config.get-graph-field-config.transform-options.description-constant","The first value will be shown as a constant line")},{label:(0,r.t)("timeseries.config.get-graph-field-config.transform-options.label-style","Negative Y"),value:c.NU.NegativeY,description:(0,r.t)("timeseries.config.get-graph-field-config.transform-options.description-style","Flip the results to negative values on the y axis")}],isClearable:!0},hideFromDefaults:!0}),o.rg(D,y),h.e(D),D.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:(0,r.t)("timeseries.config.get-graph-field-config.name-show-thresholds","Show thresholds"),category:[(0,r.t)("timeseries.config.get-graph-field-config.category-thresholds","Thresholds")],defaultValue:{mode:c.Ly.Off},settings:{options:x.thresholdsDisplayModes},editor:v.D,override:v.D,process:n.hS,shouldApply:()=>!0})}}}},12282:(ne,A,e)=>{"use strict";e.d(A,{HD:()=>s,Q$:()=>n.Q$,U3:()=>n.U3,ie:()=>l,ti:()=>n.ti});var n=e(7795),a=(r=>(r.Stream="streams",r.Vector="vector",r.Matrix="matrix",r))(a||{}),s=(r=>(r.Indexed="I",r.StructuredMetadata="S",r.Parsed="P",r))(s||{}),l=(r=>(r[r.LabelNames=0]="LabelNames",r[r.LabelValues=1]="LabelValues",r))(l||{})},12434:(ne,A,e)=>{"use strict";e.d(A,{F7:()=>h,Xe:()=>c,yk:()=>o});var n=e(71673),a=e(58662),s=e(29043),l=e(23289);const r={useAbsoluteTimeRange:!0,useShortUrl:!0,theme:"current"},c=async(f,g)=>{const{useAbsoluteTimeRange:u,useShortUrl:E,theme:v}=o();return l.c.shareLinkCopied({currentTimeRange:u,theme:v,shortenURL:E,shareResource:(0,a.hD)(g?.getRef())}),await(0,n.Sp)(f,{useAbsoluteTimeRange:u,theme:v,useShortUrl:E})},i="grafana.dashboard.link.shareConfiguration";function o(){return s.A.exists(i)&&s.A.getObject(i)||r}function h(f){s.A.setObject(i,f)}},12469:(ne,A,e)=>{"use strict";e.d(A,{R:()=>d});let n={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},a={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},l={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},r=null;for(let x=1;x<20;++x)n[111+x]="f"+x;for(let x=0;x<=9;++x)n[x+96]=x.toString();function c(x){if(x.type==="keypress"){let b=String.fromCharCode(x.which);return x.shiftKey||(b=b.toLowerCase()),b}return n[x.which]?n[x.which]:a[x.which]?a[x.which]:String.fromCharCode(x.which).toLowerCase()}function i(x,b){return x.sort().join(",")===b.sort().join(",")}function o(x){let b=[];return x.shiftKey&&b.push("shift"),x.altKey&&b.push("alt"),x.ctrlKey&&b.push("ctrl"),x.metaKey&&b.push("meta"),b}function h(x){if(x.preventDefault){x.preventDefault();return}x.returnValue=!1}function f(x){if(x.stopPropagation){x.stopPropagation();return}x.cancelBubble=!0}function g(x){return x==="shift"||x==="ctrl"||x==="alt"||x==="meta"}function u(){if(!r){r={};for(let x in n){const b=parseInt(x,10);b>95&&b<112||n.hasOwnProperty(x)&&(r[n[x]]=x)}}return r}function E(x,b,D){return D||(D=u()[x]?"keydown":"keypress"),D==="keypress"&&b.length&&(D="keydown"),D}function v(x){return x==="+"?["+"]:(x=x.replace(/\+{2}/g,"+plus"),x.split("+"))}function p(x,b){let D,C,P,T=[];for(D=v(x),P=0;P<D.length;++P)C=D[P],l[C]&&(C=l[C]),b&&b!=="keypress"&&s[C]&&(C=s[C],T.push("shift")),g(C)&&T.push(C);if(!C)throw new Error("Unable to get key");return b=E(C,T,b),{key:C,modifiers:T,action:b}}function m(x,b){return x===null||x===document?!1:x===b?!0:m(x.parentNode,b)}class y{constructor(b){this._callbacks={},this._directMap={},this._sequenceLevels={},this._resetTimer=void 0,this._ignoreNextKeyup=!1,this._ignoreNextKeypress=!1,this._nextExpectedAction=!1,this._globalCallbacks={},this._resetSequences=D=>{D=D||{};let C=!1,P;for(P in this._sequenceLevels){if(D[P]){C=!0;continue}this._sequenceLevels[P]=0}C||(this._nextExpectedAction=!1)},this._getMatches=(D,C,P,T,O,S)=>{let B,K,U=[],F=P.type;if(!this._callbacks[D])return[];for(F==="keyup"&&g(D)&&(C=[D]),B=0;B<this._callbacks[D].length;++B)if(K=this._callbacks[D][B],!(!T&&K.seq&&this._sequenceLevels[K.seq]!==K.level)&&F===K.action&&(F==="keypress"&&!P.metaKey&&!P.ctrlKey||i(C,K.modifiers))){let I=!T&&K.combo===O,V=T&&K.seq===T&&K.level===S;(I||V)&&this._callbacks[D].splice(B,1),U.push(K)}return U},this._fireCallback=(D,C,P,T)=>{const O=C.target||C.srcElement;O&&O instanceof HTMLElement&&this.stopCallback(C,O,P,T)||D(C,P)===!1&&(h(C),f(C))},this._handleKey=(D,C,P)=>{let T=this._getMatches(D,C,P),O,S={},B=0,K=!1;for(O=0;O<T.length;++O)T[O].seq&&(B=Math.max(B,T[O].level??0));for(O=0;O<T.length;++O){const F=T[O].seq;if(F){if(T[O].level!==B)continue;K=!0,S[F]=1,this._fireCallback(T[O].callback,P,T[O].combo,F);const I=F.lastIndexOf(D),V=F.slice(0,I);for(const[M,L]of Object.entries(this._sequenceLevels))L>0&&M.startsWith(V)&&(S[M]=1);continue}K||this._fireCallback(T[O].callback,P,T[O].combo)}for(const F of this._callbacks[D]??[])F.action===P.type&&F.seq&&F.level===0&&(S[F.seq]=1);let U=P.type==="keypress"&&this._ignoreNextKeypress;P.type===this._nextExpectedAction&&!g(D)&&!U&&this._resetSequences(S),this._ignoreNextKeypress=K&&P.type==="keydown"},this._handleKeyEvent=D=>{if(!(D instanceof KeyboardEvent))throw new Error("Didn't get a KeyboardEvent");const C=D;if(C.repeat)return;typeof C.which!="number"&&(C.which=C.keyCode);let P=c(C);if(P){if(C.type==="keyup"&&this._ignoreNextKeyup===P){this._ignoreNextKeyup=!1;return}this.handleKey(P,o(C),C)}},this._resetSequenceTimer=()=>{clearTimeout(this._resetTimer),this._resetTimer=setTimeout(this._resetSequences,1e3)},this._bindSequence=(D,C,P,T)=>{this._sequenceLevels[D]=0;const O=B=>()=>{this._nextExpectedAction=B,++this._sequenceLevels[D],this._resetSequenceTimer()},S=B=>{this._fireCallback(P,B,D),T!=="keyup"&&(this._ignoreNextKeyup=c(B)),this._resetSequenceTimer()};for(let B=0;B<C.length;++B){let U=B+1===C.length?S:O(T||p(C[B+1]).action);this._bindSingle(C[B],U,T,D,B)}},this._bindSingle=(D,C,P,T,O)=>{this._directMap[D+":"+P]=C,D=D.replace(/\s+/g," ");let S=D.split(" "),B;if(S.length>1){this._bindSequence(D,S,C,P);return}B=p(D,P),this._callbacks[B.key]=this._callbacks[B.key]||[];const K={type:B.action,metaKey:!1,ctrlKey:!1};this._getMatches(B.key,B.modifiers,K,T,D,O);const U={callback:C,modifiers:B.modifiers,action:B.action,seq:T,level:O,combo:D};this._callbacks[B.key][T?"unshift":"push"](U)},this._bindMultiple=(D,C,P)=>{for(let T=0;T<D.length;++T)this._bindSingle(D[T],C,P)},this.bind=(D,C,P)=>{let T=this;return D=D instanceof Array?D:[D],this._bindMultiple(D,C,P),T},this.unbind=(D,C)=>this.bind(D,function(){},C),this.bindGlobal=(D,C,P)=>{if(this.bind(D,C,P),D instanceof Array){for(let T=0;T<D.length;T++)this._globalCallbacks[D[T]]=!0;return}this._globalCallbacks[D]=!0},this.unbindGlobal=(D,C)=>{if(this.unbind(D,C),D instanceof Array){for(let P=0;P<D.length;P++)this._globalCallbacks[D[P]]=!1;return}this._globalCallbacks[D]=!1},this.trigger=(D,C)=>{let P=this;return P._directMap[D+":"+C]&&P._directMap[D+":"+C]({},D),P},this.reset=()=>(this._callbacks={},this._directMap={},this),this.stopCallback=(D,C,P,T)=>{if(this._globalCallbacks[P]||T&&this._globalCallbacks[T]||(" "+C.className+" ").indexOf(" mousetrap ")>-1||m(C,this.target))return!1;if("composedPath"in D&&typeof D.composedPath=="function"){let O=D.composedPath()[0];O!==D.target&&O instanceof HTMLElement&&(C=O)}return!!(C.tagName==="INPUT"||C.tagName==="SELECT"||C.tagName==="TEXTAREA"||"isContentEditable"in C&&C.isContentEditable)},this.handleKey=(...D)=>this._handleKey(...D),this.addKeycodes=D=>{for(let C in D)D.hasOwnProperty(C)&&(n[C]=D[C]);r=null},this.target=b,this.target.addEventListener("keypress",D=>{D instanceof KeyboardEvent&&this._handleKeyEvent(D)}),this.target.addEventListener("keydown",D=>{D instanceof KeyboardEvent&&this._handleKeyEvent(D)}),this.target.addEventListener("keyup",D=>{D instanceof KeyboardEvent&&this._handleKeyEvent(D)})}}const d=new y(document)},12594:(ne,A,e)=>{"use strict";e.d(A,{P:()=>r});var n=e(74848),a=e(22803),s=e(63142),l=e(30703);const r=({children:i,horizontal:o,className:h})=>{const f=(0,s.of)(c),g=(0,a.cx)(o?f.horizontal:f.vertical,h);return(0,n.jsxs)("div",{role:"alert",className:g,children:[(0,n.jsx)(l.I,{className:f.fieldValidationMessageIcon,name:"exclamation-triangle"}),i]})},c=i=>{const o=`
      font-size: ${i.typography.size.sm};
      font-weight: ${i.typography.fontWeightMedium};
      padding: ${i.spacing(.5,1)};
      color: ${i.colors.error.contrastText};
      background: ${i.colors.error.main};
      border-radius: ${i.shape.radius.default};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${i.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:(0,a.css)(o,{margin:i.spacing(.5,0,0,0),"&:before":{content:'""',position:"absolute",left:"9px",top:"-5px",width:0,height:0,borderWidth:"0 4px 5px 4px",borderColor:`transparent transparent ${i.colors.error.main} transparent`,borderStyle:"solid"}}),horizontal:(0,a.css)(o,{marginLeft:"10px","&:before":{content:'""',position:"absolute",left:"-5px",top:"9px",width:0,height:0,borderWidth:"4px 5px 4px 0",borderColor:"transparent #e02f44 transparent transparent",borderStyle:"solid"}}),fieldValidationMessageIcon:(0,a.css)({marginRight:i.spacing()})}}},12737:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>h});var n=e(74848),a=e(96540),s=e(8934),l=e(92745);function r(...f){const g=a.useRef(null);return a.useEffect(()=>{f.forEach(u=>{u&&(typeof u=="function"?u(g.current):u.current=g.current)})},[f]),g}var c=e(45861),i=e(30703),o=e(63527);const h=(0,a.forwardRef)(({value:f,width:g,onChange:u,escapeRegex:E=!0,...v},p)=>{const m=(0,a.useRef)(null),y=r(p,m),d=f!==""?(0,n.jsx)(c.$n,{icon:"times",fill:"text",size:"sm",onClick:x=>{m.current?.focus(),u(""),x.stopPropagation()},children:(0,n.jsx)(l.x6,{i18nKey:"grafana-ui.filter-input.clear",children:"Clear"})}):null;return(0,n.jsx)(o.p,{prefix:(0,n.jsx)(i.I,{name:"search"}),suffix:d,width:g,type:"text",value:E?(0,s.xb)(f??""):f,onChange:x=>u(E?(0,s.jD)(x.currentTarget.value):x.currentTarget.value),...v,ref:y})});h.displayName="FilterInput"},12770:(ne,A,e)=>{"use strict";e.d(A,{g:()=>c});var n=e(15130),a=e(55143),s=e(54),l=e(29609),r=e(18404);function c(i,o){const{currentData:h,isLoading:f,error:g}=a.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:i}),u=o&&l.p.grafana.rule(o)?o.grafana_alert.namespace_uid:void 0,E=(0,s.Wd)(i),{folder:v,loading:p}=(0,r.a)(u);if(g)return{isEditable:!1,isRemovable:!1,loading:!1,isRulerAvailable:!1,error:g};if(!o)return{isEditable:!1,isRemovable:!1,loading:!1};if(l.p.grafana.rule(o)){if(!u)throw new Error(`Rule ${o.grafana_alert.title} does not have a folder uid, cannot determine if it is editable.`);if(!v)return{isRulerAvailable:!0,isEditable:!1,isRemovable:!1,loading:p};const x=n.TP.hasPermissionInMetadata(E.update,v),b=n.TP.hasPermissionInMetadata(E.delete,v);return{isRulerAvailable:!0,isEditable:x,isRemovable:b,loading:p||f}}const m=!!h?.rulerConfig,y=n.TP.hasPermission(E.update),d=n.TP.hasPermission(E.delete);return{isRulerAvailable:m,isEditable:y&&m,isRemovable:d&&m,loading:f}}},12810:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>g,a:()=>u});var n=e(32017),a=e.n(n),s=e(47078),l=e.n(s),r=e(92745),c=e(65642);const i=E=>l()(E,{isEqual:a()}),o=c.$W.featureToggles.localeFormatPreference,h=i((E,v)=>new Intl.DateTimeFormat(E,v)),f=i((E,v)=>new Intl.DurationFormat(E,v)),g=i((E,v={})=>{if(typeof E=="string")return g(new Date(E),v);const p=o?c.$W.regionalFormat:(0,r.Z0)();return h(p,v).format(E)}),u=i((E,v={})=>{const p=o?c.$W.regionalFormat:(0,r.Z0)();return f(p,v).format(E)})},12823:(ne,A,e)=>{"use strict";e.d(A,{b:()=>s,k:()=>a});var n=e(42954),a=(l=>(l.Add="+",l.Subtract="-",l.Divide="/",l.Multiply="*",l))(a||{});const s=new n.O(()=>[{id:"+",name:"Add",operation:(l,r)=>l+r,binaryOperationID:"+"},{id:"-",name:"Subtract",operation:(l,r)=>l-r,binaryOperationID:"-"},{id:"*",name:"Multiply",operation:(l,r)=>l*r,binaryOperationID:"*"},{id:"/",name:"Divide",operation:(l,r)=>l/r,binaryOperationID:"/"}])},12965:(ne,A,e)=>{"use strict";e.d(A,{p:()=>i});var n=e(74848),a=e(96540),s=e(55386),l=e(92745),r=e(64913);function c(o){return`Custom unit: ${o}`}class i extends a.PureComponent{constructor(){super(...arguments),this.onChange=h=>{this.props.onChange(h.value)}}render(){const{value:h,width:f,id:g}=this.props;let u;const v=(0,s.Ke)().map(p=>{const m=p.submenu.map(y=>{const d={label:y.text,value:y.value};return y.value===h&&(u=d),d});return{label:p.text,value:p.text,items:m}});return h&&!u&&(u={value:h,label:h}),(0,n.jsx)(r.v,{id:g,width:f,initialValue:u&&u.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:c,options:v,placeholder:(0,l.t)("grafana-ui.unit-picker.placeholder","Choose"),isClearable:!0,onSelect:this.props.onChange})}}},12991:(ne,A,e)=>{"use strict";e.d(A,{f:()=>r,g:()=>l});var n=e(74848),a=e(5423),s=e(22429);function l(c,i){const o=[];let h="";for(const f of c)f.condition&&(f.group&&h&&h!==f.group&&o.push((0,n.jsx)(a.K,{},`${f.group}-separator`)),o.push((0,n.jsx)(f.component,{dashboard:i},f.key)),h=f.group);return o}function r(c,i,o){const h=(0,s.UA)().getCurrent();return c.reduce((f,g)=>{const u={dashboard:h};return g.show(u)&&f.push({key:f.length.toString(),group:i,condition:o,component:()=>(0,n.jsx)(g.component,{...u})}),f},[])}},13148:(ne,A,e)=>{"use strict";e.d(A,{H:()=>n});function n(a,s=!1){a.addBooleanSwitch({path:"timeCompare",name:"Enable",category:["Time Comparison"],description:"",defaultValue:s})}},13227:(ne,A,e)=>{"use strict";e.d(A,{t:()=>s});var n=e(2543),a=e.n(n);function s(l){return typeof l=="number"?l:l===""||l===null||l===void 0||Array.isArray(l)?NaN:typeof l=="boolean"?l?1:0:(0,n.toNumber)(l)}},13241:(ne,A,e)=>{"use strict";e.d(A,{E:()=>s});var n=e(45863),a=e(84500);function s(l){const r=n.jh.getVariables(l);return(0,a.CN)(r,!0)}},13409:(ne,A,e)=>{"use strict";e.d(A,{h:()=>h,q:()=>f});var n=e(74848),a=e(22803),s=e(95382),l=e(96540),r=e(84140),c=e(51898),i=e(92745),o=e(63142),h=(u=>(u.Small="small",u.Large="large",u))(h||{});const f=l.forwardRef(({color:u,label:E,variant:v="small",isSelected:p,"aria-label":m,...y},d)=>{const x=(0,o.$j)(),{isFocusVisible:b,focusProps:D}=(0,s.o)(),C=g(x,v,u,b,p),P=!!E,T=m||E;return(0,n.jsxs)("div",{ref:d,className:C.wrapper,"data-testid":c.Tp.components.ColorSwatch.name,...y,children:[P&&(0,n.jsx)("span",{className:C.label,children:E}),(0,n.jsx)("button",{className:C.swatch,...D,"aria-label":T?(0,i.t)("grafana-ui.color-swatch.aria-label-selected-color","{{colorLabel}} color",{colorLabel:T}):(0,i.t)("grafana-ui.color-swatch.aria-label-default","Pick a color"),type:"button"})]})}),g=(u,E,v,p,m)=>{const y=(0,r.A)(v),x=E==="small"?"16px":"32px";let b="none";return y.getAlpha()<.1&&(b=`2px solid ${u.colors.border.medium}`),{wrapper:(0,a.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,a.css)({marginRight:u.spacing(1)}),swatch:(0,a.css)({width:x,height:x,background:`${v}`,border:b,borderRadius:u.shape.radius.circle,outlineOffset:"1px",outline:p?`2px solid  ${u.colors.primary.main}`:"none",boxShadow:m?`inset 0 0 0 2px ${v}, inset 0 0 0 4px ${u.colors.getContrastText(v)}`:"none",[u.transitions.handleMotion("no-preference")]:{transition:u.transitions.create(["transform"],{duration:u.transitions.duration.short})},"&:hover":{transform:"scale(1.1)"},"@media (forced-colors: active)":{forcedColorAdjust:"none"}})}};f.displayName="ColorSwatch"},13477:(ne,A,e)=>{"use strict";e.d(A,{O:()=>a});var n=e(78193);function a(s){const l="${"+s.value+"}",r=s.value===s.label?s.origin:`${s.label} / ${s.origin}`;return{label:l,kind:n.q.Property,detail:r,documentation:s.documentation}}},13572:(ne,A,e)=>{"use strict";e.d(A,{J:()=>v});var n=e(92745),a=e(739),s=e(44017),l=e(74848),r=e(96540),c=e(79609),i=e(2863),o=e(41654),h=e(77824),f=e(17200),g=e(72598),u=e(16553);const E=({value:p,onChange:m,item:y})=>{const[d,x]=(0,r.useState)(!1),b=(0,r.useRef)(0),D=[{label:(0,n.t)("transformers.axis-editor.mode-options.label.size","Size"),value:a.J1.Size,description:(0,n.t)("transformers.axis-editor.mode-options.description.split-the-buckets-based-on-size","Split the buckets based on size")},{label:(0,n.t)("transformers.axis-editor.mode-options.label.count","Count"),value:a.J1.Count,description:(0,n.t)("transformers.axis-editor.mode-options.description.split-the-buckets-based-on-count","Split the buckets based on count")}],C=[{label:(0,n.t)("transformers.axis-editor.log-mode-options.label.split","Split"),value:a.J1.Size,description:(0,n.t)("transformers.axis-editor.log-mode-options.description.split-the-buckets-based-on-size","Split the buckets based on size")}],P=y.settings?.allowInterval??!1,T=({mode:B,scale:K,value:U=""})=>{let F=!0;B!==a.J1.Count&&(P?U!==""&&(0,u.Fv)(U)===void 0&&(F=!1):F=(0,g.N_)(U)),x(!F),m({mode:B,scale:K,value:U})},S=(0,i.w)().getVariables().map(B=>({value:B.name,label:B.label||B.name,origin:c.$0.Template}));return(0,l.jsxs)(o.B,{children:[(0,l.jsx)(h.z,{value:p?.mode||a.J1.Size,options:p?.scale?.type===a.L4.Log?C:D,onChange:B=>{b.current++,T({...p,value:"",mode:B})}}),(0,l.jsx)(f.y,{invalid:d,error:"Value needs to be an integer or a variable",value:p?.value??"",placeholder:(0,n.t)("transformers.axis-editor.placeholder-auto","Auto"),onChange:B=>{T({...p,value:B})},suggestions:S},b.current)]})};function v(p,m,y,d){m.addCustomEditor({id:"xBuckets",path:`${p}xBuckets`,name:(0,n.t)("transformers.calculate-heatmap.add-heatmap-calculation-options.name-x-bucket","X Bucket"),editor:E,category:d,defaultValue:{mode:a.J1.Size},settings:{allowInterval:!0}}),m.addCustomEditor({id:"yBuckets",path:`${p}yBuckets`,name:(0,n.t)("transformers.calculate-heatmap.add-heatmap-calculation-options.name-y-bucket","Y Bucket"),editor:E,category:d,defaultValue:{mode:a.J1.Size}}),m.addCustomEditor({id:"yBuckets-scale",path:`${p}yBuckets.scale`,name:(0,n.t)("transformers.calculate-heatmap.add-heatmap-calculation-options.name-y-bucket-scale","Y Bucket scale"),category:d,editor:s.W1,defaultValue:{type:a.L4.Linear}})}},13640:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>C,EC:()=>x,FW:()=>p,G3:()=>o,L5:()=>D,QM:()=>c,Yh:()=>m,aD:()=>h,c3:()=>b,ch:()=>i,dJ:()=>f,ew:()=>d,jE:()=>g,zh:()=>y});var n=e(65307),a=e(92654);const s={serviceAccount:{},isLoading:!0,tokens:[]},l=(0,n.Z0)({name:"serviceaccount",initialState:s,reducers:{serviceAccountFetchBegin:P=>({...P,isLoading:!0}),serviceAccountFetchEnd:P=>({...P,isLoading:!1}),serviceAccountLoaded:(P,T)=>({...P,serviceAccount:T.payload,isLoading:!1}),serviceAccountTokensLoaded:(P,T)=>({...P,tokens:T.payload,isLoading:!1}),rolesFetchBegin:P=>({...P,rolesLoading:!0}),rolesFetchEnd:P=>({...P,rolesLoading:!1})}}),r=l.reducer,{serviceAccountLoaded:c,serviceAccountTokensLoaded:i,serviceAccountFetchBegin:o,serviceAccountFetchEnd:h,rolesFetchBegin:f,rolesFetchEnd:g}=l.actions,u={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:a.i.All},E=(0,n.Z0)({name:"serviceaccounts",initialState:u,reducers:{serviceAccountsFetched:(P,T)=>{const{totalCount:O,perPage:S,...B}=T.payload,K=Math.ceil(O/S);return{...P,...B,totalPages:K,perPage:S,showPaging:K>1,isLoading:!1}},serviceAccountsFetchBegin:P=>({...P,isLoading:!0}),serviceAccountsFetchEnd:P=>({...P,isLoading:!1}),acOptionsLoaded:(P,T)=>({...P,roleOptions:T.payload}),queryChanged:(P,T)=>({...P,query:T.payload,page:0}),pageChanged:(P,T)=>({...P,page:T.payload}),stateFilterChanged:(P,T)=>({...P,serviceAccountStateFilter:T.payload})}}),v=E.reducer,{serviceAccountsFetchBegin:p,serviceAccountsFetchEnd:m,serviceAccountsFetched:y,acOptionsLoaded:d,pageChanged:x,stateFilterChanged:b,queryChanged:D}=E.actions,C={serviceAccountProfile:r,serviceAccounts:v}},13660:(ne,A,e)=>{"use strict";e.d(A,{IZ:()=>i,Ip:()=>a,LZ:()=>c,Uy:()=>s,og:()=>r,u8:()=>l,vk:()=>n});var n=(o=>(o.Home="plugins-home",o.Browse="plugins-browse",o.Details="plugins-details",o))(n||{}),a=(o=>(o.app="apps",o.datasource="database",o.panel="credit-card",o.renderer="capture",o))(a||{}),s=(o=>(o.Deleted="deleted",o.Active="active",o.Pending="pending",o.Deprecated="deprecated",o.Enterprise="enterprise",o))(s||{}),l=(o=>(o.INSTALL="INSTALL",o.UNINSTALL="UNINSTALL",o.UPDATE="UPDATE",o.REINSTALL="REINSTALL",o.DOWNGRADE="DOWNGRADE",o))(l||{}),r=(o=>(o.OVERVIEW="Overview",o.VERSIONS="Version history",o.CONFIG="Config",o.DASHBOARDS="Dashboards",o.USAGE="Usage",o.IAM="IAM",o.CHANGELOG="Changelog",o.PLUGINDETAILS="Plugin details",o.DATASOURCE_CONNECTIONS="Data source connections",o.SCREENSHOTS="Screenshots",o))(r||{}),c=(o=>(o.OVERVIEW="overview",o.VERSIONS="version-history",o.CONFIG="config",o.DASHBOARDS="dashboards",o.USAGE="usage",o.IAM="iam",o.CHANGELOG="changelog",o.PLUGINDETAILS="right-panel",o.DATASOURCE_CONNECTIONS="datasource-connections",o.SCREENSHOTS="screenshots",o))(c||{}),i=(o=>(o.Pending="Pending",o.Fulfilled="Fulfilled",o.Rejected="Rejected",o))(i||{})},13791:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>R});var n=e(74848),a=e(22803),s=e(96540),l=e(75683),r=e(63142),c=e(27963),i=e(94076),o=e(11098);const h=({isLoading:w,children:_,className:Q})=>{let ae=Q?(0,n.jsx)("div",{className:Q,children:_}):_;return(0,n.jsx)(n.Fragment,{children:w?(0,n.jsx)(o.A,{}):ae})};function f({info:w}){const _=(0,r.of)(g);return(0,n.jsx)("div",{className:_.container,children:w.map((Q,ae)=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)("div",{className:_.infoItem,children:[(0,n.jsx)("div",{className:_.label,children:Q.label}),Q.value]}),ae+1<w.length&&(0,n.jsx)("div",{"data-testid":"page-info-separator",className:_.separator})]},ae))})}const g=w=>({container:(0,a.css)({display:"flex",flexDirection:"row",gap:w.spacing(1.5),overflow:"auto"}),infoItem:(0,a.css)({...w.typography.bodySmall,display:"flex",flexDirection:"column",gap:w.spacing(.5)}),label:(0,a.css)({color:w.colors.text.secondary}),separator:(0,a.css)({borderLeft:`1px solid ${w.colors.border.weak}`})});var u=e(92745),E=e(68143),v=e(66404),p=e(76319),m=e(37386),y=e(63527);const d=({value:w,onEdit:_})=>{const Q=(0,r.of)(x),[ae,q]=(0,s.useState)(w),[k,ee]=(0,s.useState)(!1),[j,J]=(0,s.useState)(!1),[Z,te]=(0,s.useState)();(0,s.useEffect)(()=>{q(w)},[w]);const se=(0,s.useCallback)(async ie=>{const ce=ie.currentTarget.value;if(!ce)te("Please enter a title");else if(ce===w)te(void 0),ee(!1);else{J(!0);try{await _(ce),te(void 0),ee(!1)}catch(re){(0,E.NF)(re)?te(re.data.message):re instanceof Error&&te(re.message)}J(!1)}},[_,w]);return k?(0,n.jsx)("div",{className:Q.inputContainer,children:(0,n.jsx)(m.D,{className:Q.field,loading:j,invalid:!!Z,error:Z,children:(0,n.jsx)(y.p,{className:Q.input,defaultValue:ae,onKeyDown:ie=>{ie.key==="Enter"&&se(ie)},autoFocus:!0,onBlur:se,onChange:ie=>q(ie.currentTarget.value),onFocus:()=>ee(!0)})})}):(0,n.jsx)("div",{className:Q.textContainer,children:(0,n.jsxs)("div",{className:Q.textWrapper,children:[(0,n.jsx)(v.E,{element:"h1",truncate:!0,children:ae}),(0,n.jsx)(p.K,{name:"pen",size:"lg",tooltip:(0,u.t)("page.editable-title.edit-tooltip","Edit title"),onClick:()=>ee(!0)})]})})};d.displayName="EditableTitle";const x=w=>({textContainer:(0,a.css)({minWidth:0}),field:(0,a.css)({flex:1,left:`calc(-${w.spacing(1)} - 1px)`,position:"relative",marginBottom:0}),input:(0,a.css)({input:{...w.typography.h1}}),inputContainer:(0,a.css)({display:"flex",flex:1}),textWrapper:(0,a.css)({alignItems:"center",display:"flex",gap:w.spacing(1),height:w.spacing(w.components.height.md)})});function b({navItem:w,renderTitle:_,actions:Q,info:ae,subTitle:q,onEditTitle:k}){const ee=(0,r.of)(D),j=q??w.subTitle,J=k?(0,n.jsx)(d,{value:w.text,onEdit:k}):(0,n.jsxs)("div",{className:ee.title,children:[w.img&&(0,n.jsx)("img",{className:ee.img,src:w.img,alt:`logo for ${w.text}`}),_?_(w.text):(0,n.jsx)("h1",{children:w.text})]});return(0,n.jsxs)("div",{className:ee.pageHeader,children:[(0,n.jsxs)("div",{className:ee.topRow,children:[(0,n.jsxs)("div",{className:ee.titleInfoContainer,children:[J,ae&&(0,n.jsx)(f,{info:ae})]}),(0,n.jsx)("div",{className:ee.actions,children:Q})]}),j&&(0,n.jsx)("div",{className:ee.subTitle,children:j})]})}const D=w=>({topRow:(0,a.css)({alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:w.spacing(1,3)}),title:(0,a.css)({display:"flex",flexDirection:"row",maxWidth:"100%",flex:1,h1:{marginBottom:0}}),actions:(0,a.css)({display:"flex",flexDirection:"row",gap:w.spacing(1)}),titleInfoContainer:(0,a.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:w.spacing(1,4),justifyContent:"space-between",maxWidth:"100%",minWidth:"200px"}),pageHeader:(0,a.css)({label:"page-header",display:"flex",flexDirection:"column",gap:w.spacing(1),marginBottom:w.spacing(2)}),subTitle:(0,a.css)({position:"relative",color:w.colors.text.secondary}),img:(0,a.css)({width:"32px",height:"32px",marginRight:w.spacing(2)})});var C=e(54314),P=e(30360),T=e(60208);function O({navItem:w}){const _=(0,r.of)(S);return(0,n.jsx)("div",{className:_.tabsWrapper,children:(0,n.jsx)(C.U,{children:w.children.map((Q,ae)=>{const q=Q.icon?(0,P.Uo)(Q.icon):void 0;return!Q.hideFromTabs&&(0,n.jsx)(T.o,{label:Q.text,active:Q.active,icon:q,counter:Q.tabCounter,href:Q.url,suffix:Q.tabSuffix,onChangeTab:Q.onClick},`${Q.url}-${ae}`)})})})}const S=w=>({tabsWrapper:(0,a.css)({paddingBottom:w.spacing(3)})});var B=e(25508),K=e(84057),U=e(8535),F=e(52763);function I(w,_){if(_)return _;if(w&&U.M_)return(0,F.d4)((0,B.Mz)(V,Q=>(0,K.tc)(Q,w??"home")))}function V(w){return w.navIndex}var M=e(43550),L=e(92948),N=e(18607);function W(w,_){const Q=(0,F.d4)(ae=>ae.navIndex)?.[M.Id];(0,s.useEffect)(()=>{const ae=(w?.node!==w?.main?w?.node:w?.main)??{text:"Grafana"},q=(0,N.Z)(ae,_,Q).map(k=>k.text).reverse();q[q.length-1]=L.M.AppTitle,document.title=q.join(" - ")},[Q,w,_])}const R=({navId:w,navModel:_,pageNav:Q,renderTitle:ae,onEditTitle:q,actions:k,subTitle:ee,children:j,className:J,info:Z,layout:te=l.k.Standard,onSetScrollRef:se,...ie})=>{const ce=(0,r.of)(G),re=I(w,_),{chrome:ue}=(0,c.Il)();W(re,Q);const X=Q??re?.node;return(0,s.useLayoutEffect)(()=>{re&&ue.update({sectionNav:re,pageNav:Q,layout:te})},[re,Q,ue,te]),(0,n.jsxs)("div",{className:(0,a.cx)(ce.wrapper,J),...ie,children:[te===l.k.Standard&&(0,n.jsx)(i.A,{divId:"page-scrollbar",onSetScrollRef:se,children:(0,n.jsxs)("div",{className:ce.pageInner,children:[X&&(0,n.jsx)(b,{actions:k,onEditTitle:q,navItem:X,renderTitle:ae,info:Z,subTitle:ee}),Q&&Q.children&&(0,n.jsx)(O,{navItem:Q}),(0,n.jsx)("div",{className:ce.pageContent,children:j})]})}),te===l.k.Canvas&&(0,n.jsx)(i.A,{divId:"page-scrollbar",onSetScrollRef:se,children:(0,n.jsx)("div",{className:ce.canvasContent,children:j})}),te===l.k.Custom&&j]})};R.Contents=h;const G=w=>({wrapper:(0,a.css)({label:"page-wrapper",display:"flex",flex:"1 1 0",flexDirection:"column",position:"relative"}),pageContent:(0,a.css)({label:"page-content",flexGrow:1}),primaryBg:(0,a.css)({background:w.colors.background.primary}),pageInner:(0,a.css)({label:"page-inner",padding:w.spacing(2),borderBottom:"none",background:w.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:w.spacing(0,0,0,0),[w.breakpoints.up("md")]:{padding:w.spacing(4)}}),canvasContent:(0,a.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:w.spacing(2),flexBasis:"100%",flexGrow:1})})},13941:(ne,A,e)=>{"use strict";e.d(A,{J:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({children:c,className:i,...o})=>{const h=(0,s.of)(r);return(0,n.jsx)("div",{...o,className:(0,a.cx)(h.tabContent,i),children:c})},r=c=>({tabContent:(0,a.css)({background:c.colors.background.primary})})},13943:(ne,A,e)=>{"use strict";e.d(A,{x:()=>c});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=e(43990);const c=(0,s.forwardRef)((o,h)=>{const{alignItems:f,children:g,gap:u,rowGap:E,columnGap:v,columns:p,minColumnWidth:m,...y}=o,d=(0,l.of)(i,u,E,v,p,m,f);return(0,n.jsx)("div",{ref:h,...y,className:d.grid,children:g})});c.displayName="Grid";const i=(o,h,f,g,u,E,v)=>({grid:(0,a.css)([{display:"grid"},(0,r.Y)(o,h,p=>({gap:o.spacing(p)})),(0,r.Y)(o,f,p=>({rowGap:o.spacing(p)})),(0,r.Y)(o,g,p=>({columnGap:o.spacing(p)})),E&&(0,r.Y)(o,E,p=>({gridTemplateColumns:`repeat(auto-fill, minmax(${o.spacing(p)}, 1fr))`})),u&&(0,r.Y)(o,u,p=>({gridTemplateColumns:`repeat(${p}, 1fr)`})),(0,r.Y)(o,v,p=>({alignItems:p}))])})},13956:(ne,A,e)=>{"use strict";e.d(A,{n:()=>p});var n=e(66402),a=e(95407),s=e(60171),l=e(45173),r=e(99828);class c{constructor(){this.v1Client=new l.P,this.v2Client=new r.L}async getDashboardDTO(y){try{return await this.v1Client.getDashboardDTO(y)}catch(d){if(d instanceof a.P&&(0,s.Y)(d.data.storedVersion))return await this.v2Client.getDashboardDTO(y);throw d}}async saveDashboard(y){if((0,s.mi)(y))return await this.v2Client.saveDashboard(y);if((0,s.rL)(y))return await this.v1Client.saveDashboard(y);throw new Error("Invalid dashboard command")}async deleteDashboard(y,d){return await this.v1Client.deleteDashboard(y,d)}async listDeletedDashboards(y){const d=await this.v1Client.listDeletedDashboards(y),x=d.items.filter(C=>!(0,s.QX)(C,"v2"));if(x.length===d.items.length)return d;const b=await this.v2Client.listDeletedDashboards(y),D=b.items.filter(C=>!(0,s.QX)(C,"v1"));return{...b,items:[...x,...D]}}async restoreDashboard(y){if((0,s.aK)(y.spec)&&(0,n.N)(y))return await this.v2Client.restoreDashboard(y);if((0,n.N)(y))return await this.v1Client.restoreDashboard(y);throw new Error("Invalid dashboard resource for restore operation")}}var i=e(32899),o=e(92745),h=e(68143),f=e(45229),g=e(79718);class u{constructor(){}saveDashboard(y){return g.t.ignoreNextSave(),(0,h.AI)().post("/api/dashboards/db/",{dashboard:y.dashboard,message:y.message??"",overwrite:y.overwrite??!1,folderUid:y.folderUid})}deleteDashboard(y,d){return(0,h.AI)().delete(`/api/dashboards/uid/${y}`,void 0,{showSuccessAlert:d,validatePath:!0})}async getDashboardDTO(y,d){const x=await(0,h.AI)().get(`/api/dashboards/uid/${y}`,d,void 0,{validatePath:!0});if(x.meta.isFolder)throw f.A.emit(i.r1.alertError,["Dashboard not found"]),{status:404,config:{url:`/api/dashboards/uid/${y}`},data:{message:(0,o.t)("dashboard.legacy-dashboard-api.fetch-error.message.dashboard-not-found","Dashboard not found")}};return x}listDeletedDashboards(y){return Promise.resolve({apiVersion:"v1",kind:"List",metadata:{resourceVersion:"0"},items:[]})}restoreDashboard(y){return Promise.reject(new Error("Restore functionality not supported in legacy API"))}}let E;function v(m){throw new Error("dashboardAPI can be only overridden in test environment")}function p(m){const y=(0,s.GV)(m);if(E||(E={legacy:new u,v1:new l.P,v2:new r.L,unified:new c}),!E[y])throw new Error(`Unknown Dashboard API version: ${y}`);return E[y]}},14050:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>o});var n=e(74848),a=e(96540),s=e(54148),l=e(92745),r=e(71599),c=e(45861),i=e(94646);function o({identifier:f,isProvisioned:g,redirectTo:u=!1,onDismiss:E}){const v=(0,s.zy)(),[p,m]=(0,a.useState)(g?"confirm":"redirect");if(p==="redirect"){const y=i.$9(f),d=v.pathname+v.search,x=new URLSearchParams({copyFrom:y,returnTo:u?d:""});return(0,n.jsx)(s.C5,{to:"/alerting/new?"+x.toString(),replace:!1})}return(0,n.jsx)(r.u,{isOpen:p==="confirm",title:(0,l.t)("alerting.redirect-to-clone-rule.title-copy-provisioned-alert-rule","Copy provisioned alert rule"),body:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:(0,n.jsxs)(l.x6,{i18nKey:"alerting.redirect-to-clone-rule.body-not-provisioned",children:["The new rule will ",(0,n.jsx)("strong",{children:"not"})," be marked as a provisioned rule."]})}),(0,n.jsx)("p",{children:(0,n.jsx)(l.x6,{i18nKey:"alerting.redirect-to-clone-rule.body-evaluation-group",children:"You will need to set a new evaluation group for the copied rule because the original one has been provisioned and cannot be used for rules created in the UI."})})]}),confirmText:(0,l.t)("alerting.redirect-to-clone-rule.confirmText-copy","Copy"),onConfirm:()=>m("redirect"),onDismiss:E})}const h=(0,a.forwardRef)(({text:f,ruleIdentifier:g,isProvisioned:u,className:E},v)=>{const[p,m]=(0,a.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.$n,{title:(0,l.t)("alerting.clone-rule-button.title-copy","Copy"),className:E,size:"sm",variant:"secondary",icon:"copy",onClick:()=>m(!0),ref:v,children:f},"clone"),p&&(0,n.jsx)(o,{identifier:g,isProvisioned:u,onDismiss:()=>m(!1)})]})});h.displayName="CloneRuleButton"},14099:(ne,A,e)=>{"use strict";e.d(A,{I:()=>a});var n=e(92745);function a(s,l=!0){const r=[(0,n.t)("grafana-ui.builder.text.category-text-size","Text size")];l&&s.addNumberInput({path:"text.titleSize",category:r,name:(0,n.t)("grafana-ui.builder.text.name-title","Title"),settings:{placeholder:(0,n.t)("grafana-ui.builder.text.placeholder-title","Auto"),integer:!1,min:1,max:200},defaultValue:void 0}),s.addNumberInput({path:"text.valueSize",category:r,name:(0,n.t)("grafana-ui.builder.text.name-value","Value"),settings:{placeholder:(0,n.t)("grafana-ui.builder.text.placeholder-value","Auto"),integer:!1,min:1,max:200},defaultValue:void 0}),s.addNumberInput({path:"text.percentSize",category:r,name:(0,n.t)("grafana-ui.builder.text.name-percent-change","Percent change"),settings:{placeholder:(0,n.t)("grafana-ui.builder.text.placeholder-percent-change","Auto"),integer:!1,min:1,max:200},defaultValue:void 0})}},14226:(ne,A,e)=>{"use strict";e.d(A,{Q:()=>n});const n=(a,s)=>{a.key==="Tab"||a.altKey||a.ctrlKey||a.metaKey||(a.stopPropagation(),a.key==="Escape"&&s())}},14252:(ne,A,e)=>{"use strict";e.d(A,{BN:()=>o,kx:()=>h,sd:()=>i});var n=e(96540),a=e(24705),s=e(92745),l=e(78282),r=e(26689),c=e(61215);const i=f=>(0,a.A)(async()=>o(f),[f]).value;async function o(f){const g=f?.request?.targets||[];if(f&&f.series&&g.length){for(const u of f.series)if(u.meta&&u.meta.custom){const E=await(0,l.l)().get(g[0].datasource);if(E&&E.components?.MetadataInspector)return E}}}const h=(f,g,u,E,v)=>(0,n.useMemo)(()=>{const p=[];return(0,c.$)(u)&&(p.push({label:(0,s.t)("dashboard.inspect.data-tab","Data"),value:r.q.Data}),p.push({label:(0,s.t)("dashboard.inspect.stats-tab","Stats"),value:r.q.Stats})),v&&p.push({label:(0,s.t)("dashboard.inspect.meta-tab","Meta data"),value:r.q.Meta}),p.push({label:(0,s.t)("dashboard.inspect.json-tab","JSON"),value:r.q.JSON}),E&&p.push({label:(0,s.t)("dashboard.inspect.error-tab","Error"),value:r.q.Error}),g.meta.canEdit&&(0,c.$)(u)&&p.push({label:(0,s.t)("dashboard.inspect.query-tab","Query"),value:r.q.Query}),p},[u,v,g,E])},14477:(ne,A,e)=>{"use strict";e.d(A,{a:()=>a,e:()=>s});var n=e(74848);let a=({message:l})=>(0,n.jsxs)("div",{children:["Unable to render data: ",l,"."]});function s(l){a=l}},14613:(ne,A,e)=>{"use strict";e.d(A,{u:()=>n});var n=(a=>(a.id="id",a.title="title",a.subTitle="subtitle",a.mainStat="mainstat",a.secondaryStat="secondarystat",a.arc="arc__",a.icon="icon",a.color="color",a.source="source",a.target="target",a.detail="detail__",a.nodeRadius="noderadius",a.thickness="thickness",a.highlighted="highlighted",a.strokeDasharray="strokedasharray",a.fixedX="fixedx",a.fixedY="fixedy",a.isInstrumented="isinstrumented",a))(n||{})},15083:(ne,A,e)=>{"use strict";e.d(A,{F:()=>s,c:()=>a});var n=e(51388);function a(l,r){let[c]=l,[i]=r,o=c.length,h=c[0],f=c[o-1],g=i.length,u=i[0],E=i[g-1],v;if(o)if(g){if(u>f)v=l.map((p,m)=>l[m].concat(r[m]));else if(E<h)v=r.map((p,m)=>r[m].concat(l[m]));else if(u<=h&&E>=f)v=r;else if(u>h&&E<f){let p=(0,n.Ls)(u,c);p=c[p]<u?p+1:p;let m=(0,n.Ls)(E,c);m=c[m]>E?m-1:m,v=l.map((y,d)=>l[d].slice(0,p).concat(r[d]).concat(l[d].slice(m+1)))}else if(u>=h){let p=(0,n.Ls)(u,c);p=c[p]<u?p-1:p,v=l.map((m,y)=>l[y].slice(0,p).concat(r[y]))}else if(E>=h){let p=(0,n.Ls)(E,c);p=c[p]<E?p:p+1,v=r.map((m,y)=>r[y].concat(l[y].slice(p)))}}else v=l;else g?v=r:v=[[]];return v}function s(l,r,c){let[i,...o]=l,h,f;return i[0]<r&&(h=(0,n.Ls)(r,i),i[h]<r&&h++),i[i.length-1]>c&&(f=(0,n.Ls)(c,i),i[f]>c&&f--),(h!=null||f!=null)&&(i=i.slice(h??0,f),o=o.map(g=>g.slice(h??0,f))),[i,...o]}},15203:(ne,A,e)=>{"use strict";e.d(A,{CE:()=>G,G2:()=>K,Ko:()=>O,Vc:()=>L,aF:()=>I,cU:()=>P,e8:()=>N,h5:()=>S,iB:()=>W,kH:()=>U,lv:()=>V,tk:()=>M,vR:()=>R,vZ:()=>T,vd:()=>B});var n=e(75816),a=e(92138),s=e(32899),l=e(28105),r=e(92745),c=e(68143),i=e(43173),o=e(36490),h=e(90297),f=e(73892),g=e(45229),u=e(73427),E=e(75735),v=e(13956),p=e(60171),m=e(79718),y=e(8535),d=e(41644),x=e(42361),b=e(44220),D=e(68528),C=e(27044);const P=(0,n.xP)({tagTypes:["getFolder"],reducerPath:"browseDashboardsAPI",baseQuery:(0,f.W)({baseURL:"/api"}),endpoints:w=>({listFolders:w.query({providesTags:_=>_&&_.length>0?_.map(Q=>({type:"getFolder",id:Q.uid})):[{type:"getFolder",id:"EMPTY_RESULT"}],query:({parentUid:_,limit:Q,page:ae,permission:q})=>({url:"/folders",params:{parentUid:_,limit:Q,page:ae,permission:q}})}),getFolder:w.query({providesTags:(_,Q,ae)=>[{type:"getFolder",id:ae}],query:_=>({url:`/folders/${_}`,params:{accesscontrol:!0}})}),newFolder:w.mutation({invalidatesTags:["getFolder"],query:({title:_,parentUid:Q})=>({method:"POST",url:"/folders",body:{title:_,parentUid:Q}}),onQueryStarted:({parentUid:_},{queryFulfilled:Q,dispatch:ae})=>{Q.then(async({data:q})=>{ae((0,b.bw)({parentUID:_,pageSize:C.md}))})}}),saveFolder:w.mutation({invalidatesTags:["getFolder"],query:({uid:_,title:Q,version:ae})=>({method:"PUT",url:`/folders/${_}`,body:{title:Q,version:ae}}),onQueryStarted:({parentUid:_},{queryFulfilled:Q,dispatch:ae})=>{Q.then(()=>{ae((0,b.bw)({parentUID:_,pageSize:C.md}))})}}),moveFolder:w.mutation({invalidatesTags:["getFolder"],query:({folderUID:_,destinationUID:Q})=>({url:`/folders/${_}/move`,method:"POST",body:{parentUID:Q}}),onQueryStarted:({folderUID:_,destinationUID:Q},{queryFulfilled:ae,dispatch:q})=>{ae.then(()=>{q((0,b.Zw)([_])),q((0,b.bw)({parentUID:Q,pageSize:C.md}))})}}),deleteFolder:w.mutation({query:({uid:_})=>({url:`/folders/${_}`,method:"DELETE",params:{forceDeleteRules:!1}}),onQueryStarted:({parentUid:_},{queryFulfilled:Q,dispatch:ae})=>{Q.then(()=>{ae((0,b.bw)({parentUID:_,pageSize:C.md}))})}}),getAffectedItems:w.query({keepUnusedDataFor:0,queryFn:async _=>{const ae=Object.keys(_.folder).filter(ee=>_.folder[ee]).map(ee=>(0,c.AI)().get(`/api/folders/${ee}/counts`)),q=await Promise.all(ae),k={folder:Object.values(_.folder).filter(l.zz).length,dashboard:Object.values(_.dashboard).filter(l.zz).length,libraryPanel:0,alertRule:0};for(const ee of q)k.folder+=ee.folder,k.dashboard+=ee.dashboard,k.alertRule+=ee.alertrule,k.libraryPanel+=ee.librarypanel;return{data:k}}}),moveDashboards:w.mutation({invalidatesTags:["getFolder"],queryFn:async({dashboardUIDs:_,destinationUID:Q},ae,q,k)=>{for(const ee of _){const j=await(0,v.n)().getDashboardDTO(ee),J=(0,p.HG)(j)?j.spec:j.dashboard,Z=(0,p.HG)(j)?j.metadata:void 0;if(i.$.featureToggles.provisioning&&(0,D.j)(j)){g.A.publish({type:s.r1.alertWarning.name,payload:["Cannot move provisioned dashboard"]});continue}await(0,v.n)().saveDashboard({dashboard:J,folderUid:Q,overwrite:!1,message:"",k8s:Z})}return{data:void 0}},onQueryStarted:({destinationUID:_,dashboardUIDs:Q},{queryFulfilled:ae,dispatch:q})=>{ae.then(()=>{q((0,b.bw)({parentUID:_,pageSize:C.md})),q((0,b.Zw)(Q))})}}),moveFolders:w.mutation({invalidatesTags:["getFolder"],queryFn:async({folderUIDs:_,destinationUID:Q},ae,q,k)=>{for(const ee of _)await(0,h.x)(y.JD,ee,{warning:(0,r.t)("folders.api.folder-move-error-provisioned","Cannot move provisioned folder. To move it, move it in the repository and synchronise to apply the changes.")})||await k({url:`/folders/${ee}/move`,method:"POST",body:{parentUID:Q}});return{data:void 0}},onQueryStarted:({destinationUID:_,folderUIDs:Q},{queryFulfilled:ae,dispatch:q})=>{ae.then(()=>{q((0,b.bw)({parentUID:_,pageSize:C.md})),q((0,b.Zw)(Q))})}}),deleteFolders:w.mutation({invalidatesTags:["getFolder"],queryFn:async({folderUIDs:_},Q,ae,q)=>{for(const k of _)await(0,h.x)(y.JD,k)||await q({url:`/folders/${k}`,method:"DELETE",params:{forceDeleteRules:!1}});return{data:void 0}},onQueryStarted:({folderUIDs:_},{queryFulfilled:Q,dispatch:ae})=>{Q.then(()=>{ae((0,b.Zw)(_)),x.v.clear()})}}),deleteDashboards:w.mutation({invalidatesTags:["getFolder"],queryFn:async({dashboardUIDs:_},Q,ae,q)=>{const k=(0,d.sP)();for(const ee of _){if(i.$.featureToggles.provisioning){const j=await(0,v.n)().getDashboardDTO(ee);if((0,D.j)(j)){g.A.publish({type:s.r1.alertWarning.name,payload:["Cannot delete provisioned dashboard. To remove it, delete it from the repository and synchronise to apply the changes."]});continue}}await(0,v.n)().deleteDashboard(ee,!0),k.clearDashboardCache(),k.removeSceneCache(ee),x.v.clear(),i.$.featureToggles.kubernetesDashboards&&g.A.publish({type:s.r1.alertSuccess.name,payload:["Dashboard deleted"]})}return{data:void 0}},onQueryStarted:({dashboardUIDs:_},{queryFulfilled:Q,dispatch:ae})=>{Q.then(()=>{ae((0,b.Zw)(_))})}}),saveDashboard:w.mutation({queryFn:async _=>{try{if((0,p.mi)(_))return{data:await(0,v.n)("v2").saveDashboard(_)};if((0,p.rL)(_))return{data:await(0,v.n)().saveDashboard(_)};throw new Error("Invalid dashboard version")}catch(Q){return(0,f.s)(Q)}},onQueryStarted:({folderUid:_},{queryFulfilled:Q,dispatch:ae})=>{m.t.ignoreNextSave(),Q.then(async()=>{await u.TP.fetchUserPermissions(),ae((0,b.bw)({parentUID:_,pageSize:C.md}))})}}),importDashboard:w.mutation({query:({dashboard:_,overwrite:Q,inputs:ae,folderUid:q})=>({method:"POST",url:"/dashboards/import",body:{dashboard:_,overwrite:Q,inputs:ae,folderUid:q}}),onQueryStarted:async({dashboard:_,folderUid:Q},{queryFulfilled:ae,dispatch:q})=>{let k;if(_.uid)try{const ee=await(0,v.n)().getDashboardDTO(_.uid);k=(0,p.HG)(ee)?ee.metadata?.name:ee.meta?.folderUid}catch(ee){(0,c.NF)(ee)&&(ee.status!==404?console.error("Error fetching dashboard",ee):ee.isHandled=!0)}ae.then(async ee=>{q((0,b.bw)({parentUID:Q,pageSize:C.md})),k&&k!==Q&&q((0,b.bw)({parentUID:k,pageSize:C.md}));const j=a.I.stripBaseFromUrl(ee.data.importedUrl);o.Ny.push(j)})}}),listDeletedDashboards:w.query({providesTags:["getFolder"],queryFn:async()=>{try{return{data:await(0,v.n)().listDeletedDashboards({})}}catch(_){return(0,f.s)(_)}}}),restoreDashboard:w.mutation({invalidatesTags:["getFolder"],queryFn:async({dashboard:_})=>{try{const ae=await(0,v.n)().restoreDashboard(_),q=ae.spec.title,k=ae.metadata?.annotations?.[E.ew];return q&&(g.A.publish({type:s.r1.alertSuccess.name,payload:[(0,r.t)("browse-dashboards.restore.success","Dashboard {{name}} restored",{name:q})]}),(0,y.JD)((0,b.bw)({parentUID:k,pageSize:C.md}))),{data:void 0}}catch(Q){return(0,f.s)(Q)}}})})}),{endpoints:T,useDeleteFolderMutation:O,useDeleteFoldersMutation:S,useDeleteDashboardsMutation:B,useGetAffectedItemsQuery:K,useGetFolderQuery:U,useLazyGetFolderQuery:F,useMoveFolderMutation:I,useMoveDashboardsMutation:V,useMoveFoldersMutation:M,useNewFolderMutation:L,useSaveDashboardMutation:N,useSaveFolderMutation:W,useRestoreDashboardMutation:R,useListDeletedDashboardsQuery:G}=P},15356:(ne,A,e)=>{"use strict";e.d(A,{f:()=>E});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(46885),c=e(43107),i=e(96540),o=e(63142),h=e(87063),f=e(94535),g=e(7895);const u=p=>{const{className:m,options:y,value:d,onChange:x,narrow:b,variant:D,...C}=p,P=(0,o.of)(v),[T,O]=(0,i.useState)(!1),S=[(0,s.cY)(0),(0,s.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,s.BN)()],{context:B,refs:K,floatingStyles:U}=(0,l.we)({open:T,placement:"bottom-end",onOpenChange:O,middleware:S,whileElementsMounted:r.ll}),F=(0,l.kp)(B),I=(0,l.s9)(B),{getReferenceProps:V,getFloatingProps:M}=(0,l.bv)([I,F]),L=N=>{x(N),O(!1)};return(0,n.jsxs)("div",{className:P.wrapper,children:[(0,n.jsx)(g.I,{className:m,isOpen:T,narrow:b,variant:D,ref:K.setReference,...V(),...C,children:d?.label||(d?.value!=null?String(d?.value):null)}),T&&(0,n.jsx)("div",{className:P.menuWrapper,ref:K.setFloating,...M(),style:U,children:(0,n.jsx)(c.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)(h.W,{tabIndex:-1,onClose:()=>O(!1),children:y.map(N=>(0,n.jsx)(f.D,{label:N.label??String(N.value),onClick:()=>L(N),active:N.value===d?.value,ariaChecked:N.value===d?.value,ariaLabel:N.ariaLabel||N.label,disabled:N.isDisabled,component:N.component,role:"menuitemradio"},`${N.value}`))})})})]})};u.displayName="ButtonSelect";const E=(0,i.memo)(u),v=p=>({wrapper:(0,a.css)({position:"relative",display:"inline-flex"}),menuWrapper:(0,a.css)({zIndex:p.zIndex.dropdown,maxHeight:"100vh",overflow:"auto"})})},15518:(ne,A,e)=>{"use strict";e.d(A,{BD:()=>r,FS:()=>i,NF:()=>h,Xm:()=>c});var n=e(65307),a=e(2543),s=e.n(a),l=e(48442);const r=(0,n.VP)("receiver/add"),c=(0,n.VP)("receiver/update"),i=(0,n.VP)("receiver/delete"),o={alertmanager_config:{},template_files:{}},h=(0,n.vy)(o,f=>{f.addCase(r,(g,{payload:u})=>{const E=g.alertmanager_config.receivers=g.alertmanager_config.receivers??[];if(E.some(p=>p.name===u.name))throw new Error(`Duplicate receiver name ${u.name}`);E.push(u)}).addCase(c,(g,{payload:u})=>{const{name:E,receiver:v}=u,p=E!==v.name,m=g.alertmanager_config.receivers??[],y=m.findIndex(b=>b.name===E);if(!(y>-1))throw new Error(`Expected receiver ${E} to exist, but did not find it in the config`);if(p&&m.some(D=>D.name===v.name))throw new Error(`Duplicate receiver name ${v.name}`);m[y]=v;const x=g.alertmanager_config.route;x&&p&&(g.alertmanager_config.route=(0,l.Wn)(x,E,v.name))}).addCase(i,(g,{payload:u})=>{(0,a.remove)(g.alertmanager_config.receivers??[],E=>E.name===u)})})},15629:(ne,A,e)=>{"use strict";e.d(A,{M9:()=>h,P1:()=>a,P8:()=>g,TN:()=>r,an:()=>f,mo:()=>u,sc:()=>l,yl:()=>E});var n=e(72649);function a(v){const p=v.match(/(\d+)(\w+)/);if(p)return[Number(p[1]),p[2]];throw new Error(`Invalid interval description: ${v}`)}function s(v){const{sec:p,count:m}=rangeUtil.describeInterval(v);return p*m}const l=Object.entries(n.y).map(([v,p])=>({label:v[0].toUpperCase()+v.slice(1),value:p}));function r(v){try{return h(v),!0}catch{return!1}}const c={ms:1,s:1e3,m:60*1e3,h:3600*1e3,d:1440*60*1e3,w:10080*60*1e3,y:365*24*60*60*1e3},i=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),o=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(n.y).join(", ")}`);function h(v){let p=v;const m=[];function y(x){const b=i.exec(x),D=b?.groups?.value&&b?.groups?.type;if(!b||!D)throw o;b&&b.groups?.value&&b.groups?.type&&(p=p.replace(b[0],""),m.push([Number(b.groups.value),b.groups.type])),p&&y(p)}if(y(v),!m.length)throw o;return m.reduce((x,[b,D])=>{const C=b*c[D];return x+C},0)}function f(v){const p=Math.floor(v/1e3),m=Math.floor(p/60),y=Math.floor(m/60),d=Math.floor(y/24),x=Math.floor(d/7),b=Math.floor(d/365);return v===0?"0s":[[b,"y"],[x%52,"w"],[d%365-7*(x%52),"d"],[y%24,"h"],[m%60,"m"],[p%60,"s"],[v%1e3,"ms"]].filter(([C])=>C>0).map(([C,P])=>C+P).join("")}const g=v=>{try{return h(v)}catch{return 0}},u=v=>v.includes("0001-01-01T00");function E(v){return v%(1e3*60*60)===0?v/(1e3*60*60)+"h":v%(1e3*60)===0?v/(1e3*60)+"m":v%1e3===0?v/1e3+"s":v.toFixed()+"ms"}},15633:(ne,A,e)=>{"use strict";e.d(A,{D:()=>n,b:()=>a});const n="~grafana-with-extra-config";function a(s){return s===n}},15757:(ne,A,e)=>{"use strict";e.d(A,{m:()=>i});var n=e(74848),a=e(22803),s=e(30703),l=e(45967),r=e(45861),c=e(63142);function i(h){const{toggleShowAllSeries:f,info:g,tooltip:u,buttonLabel:E}=h,v=(0,c.of)(o);return(0,n.jsxs)("div",{className:v.disclaimer,children:[(0,n.jsxs)("span",{className:v.warningMessage,children:[(0,n.jsx)(s.I,{name:"exclamation-triangle","aria-hidden":"true"}),g]}),(0,n.jsx)(l.m,{content:u,children:(0,n.jsx)(r.$n,{variant:"secondary",size:"sm",onClick:f,children:E})})]},"disclaimer")}const o=h=>({disclaimer:(0,a.css)({label:"series-disclaimer",display:"flex",alignItems:"center",gap:h.spacing(1)}),warningMessage:(0,a.css)({display:"flex",alignItems:"center",gap:h.spacing(.5),color:h.colors.warning.main,fontSize:h.typography.bodySmall.fontSize})})},15759:(ne,A,e)=>{"use strict";e.d(A,{l:()=>n});function n(a){return"switchLayout"in a}},15840:(ne,A,e)=>{"use strict";e.d(A,{J:()=>c});var n=e(74848),a=e(22803),s=e(92745),l=e(76319),r=e(63142);const c=({onClick:o,"aria-label":h,style:f})=>{const g=(0,r.of)(i);return(0,n.jsx)(l.K,{"aria-label":h??"Close",className:g,name:"times",onClick:o,style:f,tooltip:(0,s.t)("close-button.tooltip","Close")})},i=o=>(0,a.css)({position:"absolute",right:o.spacing(.5),top:o.spacing(1)})},15874:(ne,A,e)=>{"use strict";e.d(A,{Bm:()=>l,Iu:()=>r,gz:()=>s});var n=e(74848),a=e(96540);const s=(0,a.createContext)({});function l(c){const{children:i,pluginId:o,apis:h,apiAllowList:f,apiBlockList:g}=c,u=(0,a.useMemo)(()=>{const E={};for(const v of Object.keys(h)){if(f&&f[v]&&(f[v].includes(o)||f[v].some(p=>p instanceof RegExp&&p.test(o)))){E[v]=h[v];continue}(!f||Object.keys(f).length===0)&&g&&g[v]&&!(g[v].includes(o)||g[v].some(p=>p instanceof RegExp&&p.test(o)))&&(E[v]=h[v])}return E},[h,f,g,o]);return(0,n.jsx)(s.Provider,{value:u,children:i})}function r(){const c=(0,a.useContext)(s);if(!c)throw new Error("useRestrictedGrafanaApis() can only be used inside a plugin context (The `RestrictedGrafanaApisContext` is not available).");return c}},16001:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>y});var n=e(74848),a=e(96540),s=e(51898),l=e(92745),r=e(43173),c=e(36490),i=e(87063),o=e(73427),h=e(11257),f=e(24313),g=e(58662),u=e(23289);const E=s.Tp.pages.Dashboard.DashNav.newShareButton.menu;let v=[];function p(d){v.push(d)}function m(){v=[]}function y({dashboard:d,panel:x}){const b=P=>{c.Ny.partial({shareView:P})},D=(0,a.useCallback)(()=>{const P=[];return P.push({shareId:g.wr.link,testId:E.shareInternally,icon:"building",label:(0,l.t)("share-dashboard.menu.share-internally-title","Share internally"),renderCondition:!0,onClick:()=>b(g.wr.link)}),P.push({shareId:g.wr.publicDashboard,testId:E.shareExternally,icon:"share-alt",label:(0,l.t)("share-dashboard.menu.share-externally-title","Share externally"),renderCondition:!x&&(0,f.iR)(),onClick:()=>{b(g.wr.publicDashboard)}}),P.push({shareId:g.wr.snapshot,testId:E.shareSnapshot,icon:"camera",label:(0,l.t)("share-dashboard.menu.share-snapshot-title","Share snapshot"),renderCondition:o.TP.isSignedIn&&r.$.snapshotEnabled&&o.TP.hasPermission(h.w.SnapshotsCreate),onClick:()=>{b(g.wr.snapshot)}}),v.forEach(T=>P.push(T)),P.filter(T=>T.renderCondition)},[x]),C=P=>{u.c.sharingCategoryClicked({item:P.shareId,shareResource:(0,g.hD)(x?.getRef())}),P.onClick(d)};return(0,n.jsx)(i.W,{"data-testid":E.container,children:D().map(P=>(0,n.jsxs)(a.Fragment,{children:[P.renderDividerAbove&&(0,n.jsx)(i.W.Divider,{}),(0,n.jsx)(i.W.Item,{testId:P.testId,label:P.label,icon:P.icon,description:P.description,component:P.component,className:P.className,onClick:()=>C(P)})]},P.shareId))})}},16123:(ne,A,e)=>{"use strict";e.d(A,{v:()=>n});function n(){return{onKeyDown(a,s,l){const r=s.value;if(r.selection.isExpanded)return l();if(a.key==="k"&&a.ctrlKey){a.preventDefault();const c=r.anchorText.text,i=r.selection.anchor.offset,h=c.length-i;return s.deleteForward(h),!0}return l()}}}},16194:(ne,A,e)=>{"use strict";e.d(A,{S:()=>s,X:()=>l});var n=e(74848),a=e(66404);const s=({content:r})=>(0,n.jsx)(a.E,{color:"primary",children:r}),l=({content:r})=>(0,n.jsx)(a.E,{variant:"code",children:r})},16200:(ne,A,e)=>{"use strict";e.d(A,{n:()=>G,C:()=>R});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=e(45861),c=e(66404),i=e(59243),o=e(41654),h=e(68079),f=e(45967),g=e(92745),u=e(34999),E=e(63527),v=e(30703),p=e(89640),m=e(76319);const y=({currentPage:_,numberOfPages:Q,onNavigate:ae,hideWhenSinglePage:q,className:k})=>{const ee=(0,l.of)(d);return q&&Q<=1?null:(0,n.jsxs)("div",{className:(0,a.cx)(ee.wrapper,k),children:[(0,n.jsx)(m.K,{name:"angle-left",size:"md",tooltip:(0,g.t)("dashboard.minimalistic-pagination.tooltip-previous","Previous"),onClick:()=>ae(_-1),disabled:_===1}),(0,n.jsxs)(g.x6,{i18nKey:"dashboard.minimalistic-pagination.page-count",children:[{currentPage:_}," of ",{numberOfPages:Q}]}),(0,n.jsx)(m.K,{name:"angle-right",size:"md",tooltip:(0,g.t)("dashboard.minimalistic-pagination.tooltip-next","Next"),onClick:()=>ae(_+1),disabled:_===Q})]})},d=_=>({wrapper:(0,a.css)({display:"flex",flexDirection:"row",gap:16,userSelect:"none"})}),x=({history:_,index:Q,onNavigate:ae})=>{const q=(0,l.of)(b),k=_.length;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:q.contentWrapper,children:(0,n.jsx)(c.E,{element:"p",color:"secondary",children:_[Q-1]})}),(0,n.jsx)(y,{currentPage:Q,numberOfPages:k,onNavigate:ae,hideWhenSinglePage:!1,className:q.paginationWrapper})]})},b=_=>({paginationWrapper:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:15}),contentWrapper:(0,a.css)({display:"flex",flexBasis:"100%",flexGrow:3,whiteSpace:"pre-wrap",maxHeight:110,overflowY:"scroll",backgroundColor:_.colors.background.secondary,border:`1px solid ${_.colors.border.weak}`,padding:_.spacing(1),minHeight:60})});var D=e(66769);const C=({onSuggestionClick:_,isGenerating:Q})=>{const ae=(0,l.of)(P);return(0,n.jsxs)("div",{className:ae.quickSuggestionsWrapper,children:[(0,n.jsx)(r.$n,{onClick:()=>_(D.HG.Shorter),size:"sm",variant:"secondary",icon:"paragraph",disabled:Q,children:D.HG.Shorter}),(0,n.jsx)(r.$n,{onClick:()=>_(D.HG.MoreDescriptive),size:"sm",variant:"secondary",icon:"document-layout-left",disabled:Q,children:D.HG.MoreDescriptive}),(0,n.jsx)(r.$n,{onClick:()=>_(D.HG.Regenerate),icon:"sync",size:"sm",variant:"secondary",disabled:Q,children:"Regenerate"})]})},P=_=>({quickSuggestionsWrapper:(0,a.css)({display:"flex",flexDirection:"row",gap:8})});var T=e(16817),O=e(87056),S=e(25992),B=e(64762);const K=(0,S.DW)("features.dashboards.genai");var U=(_=>(_.IDLE="idle",_.GENERATING="generating",_.COMPLETED="completed",_))(U||{});const F=1e4,I={model:D.ys,temperature:1,timeout:F};function V(_=I){const{model:Q,temperature:ae,onResponse:q,timeout:k}={...I,..._},[ee,j]=(0,s.useState)([]),[J,Z]=(0,s.useState)(""),[te,se]=(0,s.useState)("idle"),[ie,ce]=(0,s.useState)(),{error:re}=(0,B._2)();let ue="";const X=(0,s.useCallback)(_e=>{se("idle"),j([]),ce(_e),re("Failed to generate content using LLM","Please try again or if the problem persists, contact your organization admin."),console.error(_e),K.logError(_e,{messages:JSON.stringify(ee),model:Q,temperature:String(ae)})},[ee,Q,ae,re]);(0,s.useEffect)(()=>{ee.length>0&&Z("")},[ee]);const{error:le,value:he}=(0,T.A)(async()=>await(0,D.QX)(),[D.QX]),{error:fe,value:Ce}=(0,T.A)(async()=>{if(!he||!ee.length)return{enabled:he};se("generating"),ce(void 0);const _e=O.qH({model:Q,temperature:ae,messages:ee}).pipe(O.qA());return{enabled:he,stream:_e.subscribe({next:Xe=>{ue=Xe},error:X,complete:()=>{Z(ue),se("completed"),q?.(ue),j([]),ce(void 0)}})}},[ee,he]);(0,s.useEffect)(()=>()=>{Ce?.stream?.unsubscribe()},[Ce]);const Ae=(0,s.useCallback)(()=>{Ce?.stream?.unsubscribe(),se("idle"),ce(void 0),j([])},[Ce]);return(0,s.useEffect)(()=>{let _e;return te==="generating"&&J===""&&(_e=setTimeout(()=>{X(new Error(`LLM stream timed out after ${k}ms`))},k)),()=>{clearTimeout(_e)}},[te,J,X,k]),(fe||le)&&ce(fe||le),{setMessages:j,stopGeneration:Ae,messages:ee,reply:J,streamStatus:te,error:ie,value:Ce}}var M=e(37680);const L=.5,N=({eventTrackingSrc:_,history:Q,messages:ae,onApplySuggestion:q,updateHistory:k,timeout:ee})=>{const j=(0,l.of)(W),[J,Z]=(0,s.useState)(1),[te,se]=(0,s.useState)(""),ie=(0,s.useRef)(ae);ie.current=ae;const ce=(0,s.useCallback)(Se=>{k((0,D.Kb)(Se))},[k]),{setMessages:re,stopGeneration:ue,reply:X,streamStatus:le,error:he}=V({model:D.ys,temperature:L,onResponse:ce,timeout:ee}),fe=(Se,Ye)=>(0,M.XX)(_,Se,Ye),Ce=Se=>{De(Se),fe(M.KR.customFeedback,{customFeedback:Se})},Ae=()=>{ue(),X&&ce(X)},_e=()=>{q(Q[J-1])},Xe=Se=>{Z(Se),fe(Se>J?M.KR.backHistoryItem:M.KR.forwardHistoryItem)},De=Se=>{re(()=>[...ie.current,...(0,D.To)(Q[J-1],Se)]),Se in D.HG&&fe(M.KR.quickFeedback,{quickFeedbackItem:Se})},Me=Se=>Se.key==="Enter"&&Ce(te),Te=Se=>se(Se.currentTarget.value),$e=()=>Ce(te),Re=()=>fe(M.KR.linkToDocs),Ke=le===U.GENERATING,Ve=he&&!Ke;return(0,n.jsxs)("div",{className:j.container,children:[Ve&&(0,n.jsx)(u.F,{title:"",children:(0,n.jsx)(o.B,{direction:"column",children:(0,n.jsx)("p",{children:(0,n.jsx)(g.x6,{i18nKey:"gen-ai.incomplete-request-error",children:"Sorry, I was unable to complete your request. Please try again."})})})}),(0,n.jsx)(x,{history:Q,index:J,onNavigate:Xe}),(0,n.jsx)("div",{className:j.actionButtons,children:(0,n.jsx)(C,{onSuggestionClick:De,isGenerating:Ke})}),(0,n.jsx)(E.p,{placeholder:(0,g.t)("dashboard.gen-aihistory.placeholder-tell-ai-what-to-do-next","Tell AI what to do next..."),suffix:(0,n.jsx)(r.$n,{icon:"enter",variant:"secondary",fill:"text","aria-label":(0,g.t)("dashboard.gen-aihistory.aria-label-send-custom-feedback","Send custom feedback"),onClick:$e,disabled:!te,children:(0,n.jsx)(g.x6,{i18nKey:"gen-ai.send-custom-feedback",children:"Send"})}),value:te,onChange:Te,onKeyDown:Me}),(0,n.jsx)("div",{className:j.applySuggestion,children:(0,n.jsx)(o.B,{justifyContent:"flex-end",direction:"row",children:Ke?(0,n.jsx)(r.$n,{icon:"fa fa-spinner",onClick:Ae,children:R}):(0,n.jsx)(r.$n,{icon:"check",onClick:_e,children:(0,n.jsx)(g.x6,{i18nKey:"gen-ai.apply-suggestion",children:"Apply"})})})}),(0,n.jsxs)("div",{className:j.footer,children:[(0,n.jsx)(v.I,{name:"exclamation-circle",className:j.infoColor}),(0,n.jsx)(c.E,{variant:"bodySmall",color:"secondary",children:(0,n.jsxs)(g.x6,{i18nKey:"dashboard.gen-aihistory.footer-text",children:["This content is AI-generated using the"," ",(0,n.jsx)(p.Y,{variant:"bodySmall",inline:!0,href:"https://grafana.com/docs/grafana-cloud/alerting-and-irm/machine-learning/llm-plugin/",external:!0,onClick:Re,children:"Grafana LLM plugin"})]})})]})]})},W=_=>({container:(0,a.css)({display:"flex",flexDirection:"column",width:520,maxHeight:350,paddingBottom:25}),applySuggestion:(0,a.css)({paddingTop:_.spacing(2)}),actions:(0,a.css)({display:"flex",flexDirection:"row",flexWrap:"wrap"}),footer:(0,a.css)({position:"absolute",bottom:0,left:0,width:"100%",display:"flex",flexDirection:"row",margin:0,padding:_.spacing(1),paddingLeft:_.spacing(2),alignItems:"center",gap:_.spacing(1),borderTop:`1px solid ${_.colors.border.weak}`,marginTop:_.spacing(2)}),infoColor:(0,a.css)({color:_.colors.info.main}),actionButtons:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",padding:"24px 0 8px 0"})}),R="Stop generating",G=({text:_="Auto-generate",toggleTipTitle:Q="",onClick:ae,model:q=D.ys,messages:k,onGenerate:ee,temperature:j=1,eventTrackingSrc:J,disabled:Z,tooltip:te,onHistoryChange:se,timeout:ie=F})=>{const ce=(0,l.of)(w),[re,ue]=(0,s.useState)([]),X=(0,s.useCallback)(ve=>{ue(me=>[ve,...me]),se?.([ve,...re])},[se,re]),le=(0,s.useCallback)(ve=>{const me=(0,D.Kb)(ve);ee(me),X(me)},[ee,X]),{setMessages:he,stopGeneration:fe,value:Ce,error:Ae,streamStatus:_e}=V({model:q,temperature:j,onResponse:le,timeout:ie}),[Xe,De]=(0,s.useState)(!1),Me=re.length>0,Te=!Me,$e=_e===U.GENERATING,Re=Z||Ce&&!Ce.enabled&&!Ae,Ke=(0,s.useCallback)(ve=>(0,M.XX)(J,ve),[J]),Ve=Ae||te?void 0:!1,Se=Ae?"Failed to generate content using LLM. Please try again or if the problem persists, contact your organization admin.":te||"",Ye=ve=>{_e===U.GENERATING?fe():Me?De(!0):(ae?.(ve),he(Je()));const me=Ae?M.KR.erroredRetryButton:$e?M.KR.stopGenerationButton:Te?M.KR.autoGenerateButton:M.KR.improveButton;Ke(me)};if(!Ce?.enabled)return null;const Ue=ve=>{Ke(M.KR.applySuggestion),ee(ve),De(!1)},je=()=>{if(!$e)return Ae||Ce&&!Ce.enabled?"exclamation-circle":"ai"},Qe=()=>{let ve=_;return Ae&&(ve="Retry"),$e&&(ve=R),Me&&(ve="Improve"),ve},He=(0,n.jsx)(r.$n,{icon:je(),onClick:Ye,fill:"text",size:"sm",disabled:Re,variant:Ae?"destructive":"primary",children:Qe()}),Je=()=>typeof k=="function"?k():k,de=()=>{if(Me){const ve=(0,n.jsx)(c.E,{element:"p",children:Q});return(0,n.jsx)(i.G,{title:ve,content:(0,n.jsx)(N,{history:re,messages:Je(),onApplySuggestion:Ue,updateHistory:X,eventTrackingSrc:J,timeout:ie}),placement:"left-start",fitContent:!0,show:Xe,onClose:()=>De(!1),onOpen:()=>De(!0),children:He})}return He};return(0,n.jsxs)(o.B,{direction:"row",gap:.5,alignItems:"center",children:[$e&&(0,n.jsx)(h.y,{size:"sm",className:ce.spinner}),Te?(0,n.jsx)(f.m,{show:Ve,interactive:!0,content:Se,children:He}):de()]})},w=_=>({spinner:(0,a.css)({color:_.colors.text.link})})},16203:(ne,A,e)=>{"use strict";e.d(A,{a:()=>i});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(63142),c=e(45450);function i({name:h,id:f,options:g,value:u,onChange:E,className:v,disabled:p,disabledOptions:m=[]}){const y=(0,r.of)(o),d=f??(0,s.uniqueId)("radiogroup-list-");return(0,n.jsx)("div",{id:f,className:(0,a.cx)(y.container,v),role:"radiogroup",children:g.map((x,b)=>{const D=`${d}-${b}`,C=u&&u===x.value,P=p||m.some(O=>O===x.value),T=()=>E&&x.value&&E(x.value);return(0,n.jsx)(c.J,{id:D,name:h,label:x.label,description:x.description,checked:C,value:x.value,disabled:P,onChange:T},b)})})}const o=h=>({container:(0,a.css)({display:"grid",gap:h.spacing(1)})})},16207:(ne,A,e)=>{"use strict";e.d(A,{m:()=>o});var n=e(2543),a=e.n(n),s=e(76803),l=e(11594),r=e(52205),c=e(37615),i=e(37297);class o extends l.Ud{constructor(f){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new s.K,this.dataSupport={annotations:!1,alertStates:!1},this.panel=f}get defaults(){let f=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const g=new r.pv;this.optionsSupplier(g,{data:[]});for(const u of g.getItems())u.defaultValue!=null&&(0,n.set)(f,u.path,u.defaultValue)}return f}get fieldConfigDefaults(){const f=this._fieldConfigDefaults.defaults;f.custom={};for(const g of this.fieldConfigRegistry.list())g.defaultValue!==void 0&&(0,n.set)(f,g.id,g.defaultValue);return{defaults:{...f},overrides:this._fieldConfigDefaults.overrides}}setDefaults(f){return(0,c.l)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=f,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(f){return(0,c.l)("PanelPlugin","setEditor","setPanelOptions"),this.editor=f,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(f,g){return this.onPanelMigration=f,this.shouldMigrate=g,this}setPanelChangeHandler(f){return this.onPanelTypeChanged=f,this}setPanelOptions(f){return this.optionsSupplier=f,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(f){return this.dataSupport={...this.dataSupport,...f},this}useFieldConfig(f={}){return this._initConfigRegistry=()=>(0,i.O)(f,this.meta.name),this}setSuggestionsSupplier(f){return this.suggestionsSupplier=f,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(f){return this.meta.id===f}}},16310:(ne,A,e)=>{"use strict";e.d(A,{i:()=>_e,o:()=>Xe});var n=e(2543),a=e(65474),s=e(62467),l=e(44240),r=e(81160),c=e(77154),i=e(28105),o=e(38619),h=e(18700),f=e(88673),g=e(41119),u=e(36580),E=e(2863),v=e(33184),p=e(68143),m=e(78282),y=e(4604),d=e(22429),x=e(74848),b=e(22803),D=e(96540),C=e(63142),P=e(16780),T=e(37386),O=e(18857),S=e(21285),B=e(93732),K=e(78767),U=e(8095),F=e(95093),I=e.n(F),V=e(62717),M=e(25229),L=e(92745),N=e(59310),W=e(45861),R=e(41654),G=e(11527),w=e(63527),_=e(27228),Q=e(44229);const ae=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((De,Me)=>({label:De,value:Me+1})),q=({value:De,onChange:Me})=>{const Te=(0,C.of)(k),$e=Date.now(),Re=(0,V.QZ)(De.timezone??"utc",$e),Ke=(0,d.UA)().getCurrent()?.getTimezone()===De.timezone,[Ve,Se]=(0,D.useState)(!1),Ye=()=>{Se(!Ve)},Ue=Fe=>{if(!Fe)return;const Be=I()();if(Fe){const Le=Fe.split(":");Be.set("hour",parseInt(Le[0],10)),Be.set("minute",parseInt(Le[1],10))}return Be},je=()=>{let Fe="Everyday";return De.fromDayOfWeek&&!De.toDayOfWeek&&(Fe=ae[De.fromDayOfWeek-1].label),Fe},Qe=()=>{const Fe=(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(_.U,{title:Re?.name}),(0,x.jsx)(Q.X,{timeZone:De.timezone,timestamp:$e})]});return Ke?(0,x.jsxs)(x.Fragment,{children:["Dashboard timezone (",Fe,")"]}):Fe},He=(Fe,Be)=>{const Le=Fe?Fe.format("HH:mm"):void 0;Me(Be==="from"?{...De,from:Le}:{...De,to:Le})},Je=Fe=>{Me({...De,timezone:Fe})},de=Fe=>{Me({...De,mode:Fe})},ve=Fe=>{Me({...De,cronExpr:Fe})},me=Fe=>{Me({...De,duration:Fe})},xe=Fe=>{const Be=Fe?Fe.value:void 0,Le=Fe?De.toDayOfWeek:void 0;Me({...De,fromDayOfWeek:Be,toDayOfWeek:Le})},Ee=Fe=>{Me({...De,toDayOfWeek:Fe?Fe.value:void 0})},Pe=()=>Ve?(0,x.jsx)(N.U,{value:De.timezone,includeInternal:!0,onChange:Fe=>Je(Fe),onBlur:()=>Se(!1),openMenuOnFocus:!1,width:100,autoFocus:!0}):(0,x.jsxs)("div",{className:Te.timezoneContainer,children:[(0,x.jsx)("div",{className:Te.timezone,children:Qe()}),(0,x.jsx)(W.$n,{variant:"secondary",onClick:Ye,size:"sm",children:"Change timezone"})]}),Oe=Ue(De.from),We=Ue(De.to);return(0,x.jsxs)(P.n,{className:Te.wrapper,children:[(0,x.jsx)(T.D,{label:(0,L.t)("dashboard-settings.time-regions.advanced-label","Advanced"),description:(0,x.jsxs)(x.Fragment,{children:[(0,L.t)("dashboard-settings.time-regions.advanced-description-use","Use "),(0,x.jsx)("a",{href:"https://crontab.run/",target:"_blank",rel:"noreferrer",children:(0,L.t)("dashboard-settings.time-regions.advanced-description-cron","Cron syntax")}),(0,L.t)("dashboard-settings.time-regions.advanced-description-rest"," to define a recurrence schedule and duration")]}),children:(0,x.jsx)(S.d,{id:"time-regions-adanced-mode-toggle",value:De.mode==="cron",onChange:Fe=>de(Fe.currentTarget.checked?"cron":null)})}),De.mode==null&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(T.D,{label:"From",children:(0,x.jsxs)(R.B,{gap:.5,children:[(0,x.jsx)(O.l6,{options:ae,isClearable:!0,placeholder:"Everyday",value:De.fromDayOfWeek??null,onChange:Fe=>xe(Fe),width:20}),(0,x.jsx)(G.R,{value:(0,M.Ar)(Oe)?Oe:void 0,onChange:Fe=>He(Fe&&(0,M.AN)(Fe),"from"),allowEmpty:!0,placeholder:"HH:mm",size:"sm"})]})}),(0,x.jsx)(T.D,{label:"To",children:(0,x.jsxs)(R.B,{gap:.5,children:[(De.fromDayOfWeek||De.toDayOfWeek)&&(0,x.jsx)(O.l6,{options:ae,isClearable:!0,placeholder:je(),value:De.toDayOfWeek??null,onChange:Fe=>Ee(Fe),width:20}),(0,x.jsx)(G.R,{value:(0,M.Ar)(We)?We:void 0,onChange:Fe=>He(Fe&&(0,M.AN)(Fe),"to"),allowEmpty:!0,placeholder:"HH:mm",size:"sm"})]})})]}),De.mode==="cron"&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(T.D,{label:"Cron expression",children:(0,x.jsx)(w.p,{onChange:Fe=>ve(Fe.target.value),value:De.cronExpr,placeholder:"0 9 * * 1-5",width:40})}),(0,x.jsx)(T.D,{label:"Duration",children:(0,x.jsx)(w.p,{onChange:Fe=>me(Fe.target.value),value:De.duration,placeholder:"8h",width:40})})]}),(0,x.jsx)(T.D,{label:"Timezone",children:Pe()})]})},k=De=>({wrapper:(0,b.css)({maxWidth:De.spacing(60),marginBottom:De.spacing(2)}),timezoneContainer:(0,b.css)({padding:"5px",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:"12px"}),timezone:(0,b.css)({marginRight:"5px"})}),ee="Enabling this returns annotations that match any of the tags specified below",j=(0,x.jsx)("div",{children:"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."}),J=[{label:"Dashboard",value:U.St.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:U.St.Tags,description:"This will fetch any annotation events that match the tags filter"}],Z=[{label:"Annotations & Alerts",value:U.nj.Annotations,description:"Show annotations or alerts managed by grafana"},{label:"Time regions",value:U.nj.TimeRegions,description:"Configure a repeating time region"}],te=[10,50,100,200,300,500,1e3,2e3].map(De=>({label:String(De),value:De}));function se({query:De,onChange:Me}){const Te=De,{limit:$e,matchAny:Re,tags:Ke,type:Ve,queryType:Se}=Te;let Ye=Se??U.nj.Annotations;const Ue=(0,D.useMemo)(()=>(0,d.UA)().dashboard?.getTimezone(),[]),je=(0,C.of)(ie),Qe=xe=>Me({...Te,type:xe.value}),He=xe=>Me({...Te,limit:xe.value}),Je=xe=>Me({...Te,matchAny:xe.target.checked}),de=xe=>Me({...Te,tags:xe}),ve=xe=>{const Ee={...Te,queryType:xe.value};Ee.queryType===U.nj.TimeRegions?Ee.timeRegion||(Ee.timeRegion={timezone:Ue}):delete Ee.timeRegion,Me(Ee)},me=xe=>{Me({...Te,timeRegion:xe})};return(0,x.jsxs)(P.n,{className:je.container,children:[(0,x.jsx)(T.D,{label:"Query type",children:(0,x.jsx)(O.l6,{inputId:"grafana-annotations__query-type",options:Z,value:Ye,onChange:ve})}),Ye===U.nj.Annotations&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(T.D,{label:"Filter by",children:(0,x.jsx)(O.l6,{inputId:"grafana-annotations__filter-by",options:J,value:Ve,onChange:Qe})}),(0,x.jsx)(T.D,{label:"Max limit",children:(0,x.jsx)(O.l6,{inputId:"grafana-annotations__limit",width:16,options:te,value:$e,onChange:He})}),Ve===U.St.Tags&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(T.D,{label:"Match any",description:ee,children:(0,x.jsx)(S.d,{id:"grafana-annotations__match-any",value:Re,onChange:Je})}),(0,x.jsx)(T.D,{label:"Tags",description:j,children:(0,x.jsx)(B.$,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:de,tagOptions:K.vy,tags:Ke??[]})})]})]}),Ye===U.nj.TimeRegions&&Te.timeRegion&&(0,x.jsx)(q,{value:Te.timeRegion,onChange:me})]})}const ie=De=>({container:(0,b.css)({maxWidth:De.spacing(60),marginBottom:De.spacing(2)})});var ce=e(95004),re=e(14465),ue=e(74529);const X=24*3600;function le(De,Me,Te,$e,Re,Ke){let Ve=$e-De;Ve<0&&(Ve+=7);let Se=Me*3600+Te*60,Ye=Re*3600+Ke*60,Ue=0;return Ve===0&&Ye<Se?Ue=7*X-(Se-Ye):Ue=Ve*X-Se+Ye,Ue}function he(De,Me,Te,$e){if(De==null&&Me==null)return;const Re={cronExpr:"",duration:0},Ke=De==null&&Te==null,Ve=De!=null&&Me==null&&$e==null;Me??="00:00";let[Se,Ye]=Me.split(":").map(Je=>+Je);Re.cronExpr=`${Ye} ${Se} * * ${De??"*"}`,De??=1,Te??=De,Ve&&($e="00:00",Te+=Te===7?-6:1),$e??=Me;let[Ue,je]=$e.split(":").map(Je=>+Je),Qe=Se*3600+Ye*60,He=Ue*3600+je*60;return Ke&&He<Qe&&(Te+=Te===7?-6:1),Re.duration=le(De,Se,Ye,Te,Ue,je),Re}function fe(De,Me){const Te=[];let $e="",Re=0,{fromDayOfWeek:Ke,from:Ve,toDayOfWeek:Se,to:Ye,duration:Ue=""}=De;if(De.mode==="cron")$e=De.cronExpr??"",Re=(0,ue.WT)((0,ue.E9)(Ue));else{Ve=Ve===""?void 0:Ve,Ye=Ye===""?void 0:Ye;const je=he(Ke,Ve,Se,Ye);je!=null&&($e=je.cronExpr,Re=je.duration*1e3)}if($e==="")return[];try{let je=De.timezone==="browser"?void 0:De.timezone==="utc"?"Etc/UTC":De.timezone,Qe=new re.l4($e,{timezone:je}),He=new Date(Me.from.valueOf()-Re),Je=Me.to.valueOf(),de=Qe.nextRun(He);for(;de!=null;){let ve=+de;if(ve>Je)break;Te.push({from:ve,to:ve+Re}),de=Qe.nextRun(de)}}catch(je){console.error(je)}return Te}function Ce(De,Me,Te){const{mode:$e,duration:Re,cronExpr:Ke,from:Ve,fromDayOfWeek:Se}=Me,Ye=$e==null&&(Se!=null||Ve!=null),Ue=$e==="cron"&&Ke!=null&&Re!=null;if(Ye||Ue){const je=fe(Me,Te);if(je.length>0)return{fields:[{name:"time",type:ce.PU.time,values:je.map(He=>He.from),config:{}},{name:"timeEnd",type:ce.PU.time,values:je.map(He=>He.to),config:{}},{name:"text",type:ce.PU.string,values:Array(je.length).fill(De),config:{}}],length:je.length}}}let Ae=100;class _e extends u.iy{constructor(Me){super(Me),this.annotations={QueryEditor:se,prepareAnnotation(Te){return Te.target=Te.target??{type:Te.type??U.St.Dashboard,limit:Te.limit??100,tags:Te.tags??[],matchAny:Te.matchAny??!1},Te},prepareQuery(Te){let $e;if((0,n.isString)(Te.datasource)){const Ve=(0,y.og)(Te.datasource,{returnDefaultAsNull:!1});Ve&&($e=Ve)}else $e=Te.datasource;const{filter:Re,...Ke}=Te;return{...Ke,refId:Te.name,queryType:U.nj.Annotations,datasource:$e}}}}getDefaultQuery(){return{queryType:U.nj.RandomWalk}}query(Me){const Te=[],$e=[],Re=(0,E.w)();for(const Ke of Me.targets){if(Ke.queryType===U.nj.Annotations)return(0,a.H)(this.getAnnotations({range:Me.range,rangeRaw:Me.range.raw,annotation:Ke,dashboard:(0,d.UA)().getCurrent()}));if(!Ke.hide){if(Ke.queryType===U.nj.Snapshot){Te.push((0,s.of)({data:(Ke.snapshot??[]).map(Ve=>(0,c.or)(Ve)),state:i.Gu.Done}));continue}if(Ke.queryType===U.nj.TimeRegions){const Ve=Ce("",Ke.timeRegion,Me.range);Te.push((0,s.of)({data:Ve?[Ve]:[],state:i.Gu.Done}));continue}if(Ke.queryType===U.nj.LiveMeasurements){let Ve=Re.replace(Ke.channel,Me.scopedVars);const{filter:Se}=Ke,Ye=(0,o.DG)(Ve);if(!(0,o.aj)(Ye))continue;const Ue={maxLength:Me.maxDataPoints??500};Ke.buffer?(Ue.maxDelta=Ke.buffer,Ue.maxLength=Ue.maxLength*2):Me.rangeRaw?.to==="now"&&(Ue.maxDelta=Me.range.to.valueOf()-Me.range.from.valueOf()),Te.push((0,v.oF)().getDataStream({key:`${Me.requestId}.${Ae++}`,addr:Ye,filter:Se,buffer:Ue}))}else Ke.queryType||(Ke.queryType=U.nj.RandomWalk),$e.push(Ke)}}return $e.length&&Te.push(super.query({...Me,targets:$e})),Te.length?Te.length===1?Te[0]:(0,l.h)(...Te):(0,s.of)()}listFiles(Me,Te){return this.query({targets:[{refId:"A",queryType:U.nj.List,path:Me}],maxDataPoints:Te}).pipe((0,r.T)($e=>{const Re=$e.data[0]??new h.k;return new f.R(Re)}))}metricFindQuery(){return Promise.resolve([])}async getAnnotations(Me){const Te=Me.annotation.target;if(Te?.queryType===U.nj.TimeRegions){const Se=Ce(Me.annotation.name,Te.timeRegion,Me.range);return Promise.resolve({data:Se?[Se]:[]})}const $e=Me.annotation,Re=$e.target,Ke={from:Me.range.from.valueOf(),to:Me.range.to.valueOf(),limit:Re.limit,tags:Re.tags,matchAny:Re.matchAny};if(Re.type===U.St.Dashboard){if(!Me.dashboard?.uid)return Promise.resolve({data:[]});Ke.dashboardUID=Me.dashboard.uid,delete Ke.tags}else{if(!Array.isArray(Re.tags)||Re.tags.length===0)return Promise.resolve({data:[]});const Se=(0,E.w)(),Ye="__delimiter__",Ue=[];for(const je of Ke.tags){const Qe=Se.replace(je,{},He=>typeof He=="string"?He:He.join(Ye));for(const He of Qe.split(Ye))Ue.push(He)}Ke.tags=Ue}const Ve=await(0,p.AI)().get("/api/annotations",Ke,`grafana-data-source-annotations-${$e.name}-${Me.dashboard?.uid}`);return{data:[(0,g.Vc)(Ve)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}async function Xe(){return await(0,m.l)().get("-- Grafana --")}},16477:(ne,A,e)=>{"use strict";e.d(A,{_:()=>l});var n=e(74848),a=e(22803),s=e(96540);const l=({children:r,left:c,top:i})=>{const o=(0,s.useMemo)(()=>(0,a.css)({position:"absolute",overflow:"visible",left:`${c}px`,top:`${i}px`}),[c,i]);return(0,n.jsx)("div",{className:o,children:r})}},16515:(ne,A,e)=>{"use strict";e.d(A,{Ct:()=>i,Fm:()=>r,Ri:()=>l,fk:()=>h,j2:()=>c});var n=e(36638),a=e(95004),s=e(71642);function l(g,u){if(g.name)return g.name;const E=[];for(const v of g.fields)if(v.type!==a.PU.time){if(E.length>1)break;E.push(i(v,g))}return E.length===1?E[0]:u===void 0&&g.fields.length>0?g.fields.filter(v=>v.type!==a.PU.time).map(v=>i(v,g)).join(", "):g.refId?`Series (${g.refId})`:`Series (${u})`}function r(g){g.forEach(u=>{u.fields.forEach(E=>{i(E,u,g)})})}function c(g,u){g.forEach(E=>{E.fields.forEach(v=>{const p={legend:!1,tooltip:!1,viz:!1,...u.defaults.custom?.hideFrom},m=v.config.custom?.hideFrom;u.overrides.forEach(y=>{if("__systemRef"in y)return;if((0,n.NS)(y.matcher)(v,E,g))for(const x of y.properties)x.id==="custom.hideFrom"&&Object.assign(p,x.value)}),v.state={...v.state,hideFrom:{...m}},v.config.custom.hideFrom=p})})}function i(g,u,E){const v=g.state?.displayName,p=!!(E&&E.length>1);if(v&&p===g.state?.multipleFrames)return v;const m=o(g,u,E);return g.state=g.state||{},g.state.displayName=m,g.state.multipleFrames=p,m}function o(g,u,E){const v=g.config?.displayName&&g.config?.displayName.length,p=!!u?.meta?.timeCompare?.isTimeShiftQuery;let m=v?g.config.displayName:g.name;if(v)return p?`${m} (comparison)`:m;if(u&&g.config?.displayNameFromDS)return p?`${g.config.displayNameFromDS} (comparison)`:g.config.displayNameFromDS;if(g.type===a.PU.time&&!g.labels)return m??a.LE;let y=[],d=!1;if(E&&E.length>1){for(let D=1;D<E.length;D++)if(E[D].name!==E[D-1].name){d=!0;break}}let x=!1,b=!1;if(d&&u?.name&&(y.push(u.name),x=!0),g.name&&g.name!==a.Bc&&y.push(g.name),g.labels&&u){let D=f(E??[u]);if(D)g.labels[D]&&(y.push(g.labels[D]),b=!0);else{let C=(0,s.h6)(g.labels);C&&(y.push(C),b=!0)}}return u&&!x&&!b&&g.name===a.Bc&&u.name&&u.name.length>0&&(y.push(u.name),x=!0),y.length?m=y.join(" "):g.name?m=g.name:m=a.Bc,m===g.name&&(m=h(g,u)),p&&(m=`${m} (comparison)`),m}function h(g,u){let E=0,v=!1;if(u)for(let p=0;p<u.fields.length;p++){const m=u.fields[p];if(g===m){if(v=!0,E>0){E++;break}}else if(g.name===m.name&&(E++,v))break}return E?`${g.name} ${E}`:g.name}function f(g){let u=null;for(let E=0;E<g.length;E++){const v=g[E];for(const p of v.fields)if(p.labels){for(const m in p.labels)if(u===null)u=m;else if(m!==u)return null}}return u}},16553:(ne,A,e)=>{"use strict";e.d(A,{Fv:()=>D,eO:()=>v,q_:()=>b});var n=e(79243),a=e(74529),s=e(72598);const{abs:l,pow:r}=Math,c=new Map;function i(C,P,T,O){let S=[],B=O.map(n.E);for(let K=P;K<T;K++){let U=l(K),F=(0,n.h)(r(C,K),U);for(let I=0;I<O.length;I++){let V=O[I]*F,M=(V>=0&&K>=0?0:U)+(K>=B[I]?0:B[I]),L=(0,n.h)(V,M);S.push(L),c.set(L,M)}}return S}const o=C=>C%1===0,h=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],f=i(10,-16,0,h),g=i(10,0,16,h),u=g.filter(o),E=f.concat(g),v=f.concat(u),p=1*1e3,m=60*p,y=60*m,d=24*y,x=365*d,b=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,p,2*p,4*p,5*p,10*p,15*p,20*p,30*p,m,2*m,4*m,5*m,10*m,15*m,20*m,30*m,y,2*y,4*y,6*y,8*y,12*y,18*y,d,2*d,3*d,4*d,5*d,6*d,7*d,10*d,15*d,30*d,45*d,60*d,90*d,180*d,x,2*x,3*x,4*x,5*x,6*x,7*x,8*x,9*x,10*x],D=C=>{if((0,s.N_)(C)){const T=Number.parseInt(C,10);return Number.isNaN(T)?void 0:T}else{if((0,a.di)(C))return(0,a.WT)((0,a.E9)(C));{const O=C.match(/(\d+)ms$/i);if(O){const S=Number.parseInt(O[1],10);return Number.isNaN(S)?void 0:S}else return}}}},16591:(ne,A,e)=>{"use strict";e.d(A,{L:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({children:c,className:i})=>{const o=(0,s.of)(r);return(0,n.jsx)("div",{className:(0,a.cx)(o.wrapper,i),children:c})},r=c=>({wrapper:(0,a.css)({backgroundColor:c.components.panel.background,border:`solid 1px ${c.components.input.borderColor}`,borderRadius:c.shape.radius.default,padding:c.spacing(.5,1),fontFamily:c.typography.fontFamilyMonospace})})},16692:(ne,A,e)=>{"use strict";e.d(A,{$m:()=>d,Ej:()=>O,Es:()=>N,Gy:()=>U,Hl:()=>w,L7:()=>G,M6:()=>W,QI:()=>m,RY:()=>x,aw:()=>P,e2:()=>T,hT:()=>L,iI:()=>R,j5:()=>y,mW:()=>K,mh:()=>S});var n=e(96540),a=e(15130),s=e(76070),l=e(66513),r=e(88114),c=e(18404),i=e(84266),o=e(11257),h=e(91984),f=e(5358),g=e(54),u=e(67598),E=e(77256),v=e(29609),p=e(12770),m=(j=>(j.ViewExternalConfiguration="view-external-configuration",j.UpdateExternalConfiguration="update-external-configuration",j.CreateContactPoint="create-contact-point",j.ViewContactPoint="view-contact-point",j.UpdateContactPoint="edit-contact-points",j.DeleteContactPoint="delete-contact-point",j.ExportContactPoint="export-contact-point",j.CreateNotificationTemplate="create-notification-template",j.ViewNotificationTemplate="view-notification-template",j.UpdateNotificationTemplate="edit-notification-template",j.DeleteNotificationTemplate="delete-notification-template",j.DecryptSecrets="decrypt-secrets",j.CreateNotificationPolicy="create-notification-policy",j.ViewNotificationPolicyTree="view-notification-policy-tree",j.UpdateNotificationPolicyTree="update-notification-policy-tree",j.DeleteNotificationPolicy="delete-notification-policy",j.ExportNotificationPolicies="export-notification-policies",j.ViewAutogeneratedPolicyTree="view-autogenerated-policy-tree",j.CreateSilence="create-silence",j.ViewSilence="view-silence",j.UpdateSilence="update-silence",j.PreviewSilencedInstances="preview-silenced-alerts",j.ViewTimeInterval="view-time-interval",j.CreateTimeInterval="create-time-interval",j.UpdateTimeInterval="update-time-interval",j.DeleteTimeInterval="delete-time-interval",j.ExportTimeIntervals="export-time-intervals",j.ViewAlertGroups="view-alert-groups",j))(m||{}),y=(j=>(j.Duplicate="duplicate-alert-rule",j.View="view-alert-rule",j.Update="update-alert-rule",j.Delete="delete-alert-rule",j.Explore="explore-alert-rule",j.Silence="silence-alert-rule",j.ModifyExport="modify-export-rule",j.Pause="pause-alert-rule",j.Restore="restore-alert-rule",j.DeletePermanently="delete-alert-rule-permanently",j))(y||{}),d=(j=>(j.Pause="pause-folder",j.Delete="delete-folder",j))(d||{}),x=(j=>(j.CreateAlertRule="create-alert-rule",j.ViewAlertRule="view-alert-rule",j.UpdateAlertRule="update-alert-rule",j.DeleteAlertRule="delete-alert-rule",j.ExportGrafanaManagedRules="export-grafana-managed-rules",j.ReadConfigurationStatus="read-configuration-status",j.CreateExternalAlertRule="create-external-alert-rule",j.ViewExternalAlertRule="view-external-alert-rule",j.UpdateExternalAlertRule="update-external-alert-rule",j.DeleteExternalAlertRule="delete-external-alert-rule",j))(x||{});const b=!0,D=!1,C=()=>({"pause-folder":[b,(0,E.qc)()],"delete-folder":[b,(0,E.qc)()]}),P=j=>C()[j],T=()=>({"create-alert-rule":ee(b,o.w.AlertingRuleCreate),"view-alert-rule":ee(b,o.w.AlertingRuleRead),"update-alert-rule":ee(b,o.w.AlertingRuleUpdate),"delete-alert-rule":ee(b,o.w.AlertingRuleDelete),"export-grafana-managed-rules":ee(b,o.w.AlertingRuleRead),"read-configuration-status":[b,a.TP.hasPermission(o.w.AlertingInstanceRead)||a.TP.hasPermission(o.w.AlertingNotificationsRead)],"create-external-alert-rule":ee(b,o.w.AlertingRuleExternalWrite),"view-external-alert-rule":ee(b,o.w.AlertingRuleExternalRead),"update-external-alert-rule":ee(b,o.w.AlertingRuleExternalWrite),"delete-external-alert-rule":ee(b,o.w.AlertingRuleExternalWrite)}),O=j=>T()[j];function S(j,J){const Z=F(j);return(0,n.useMemo)(()=>Z[J],[Z,J])}function B(j,J){const Z=F(j);return useMemo(()=>J.map(te=>Z[te]),[Z,J])}function K(j,J,Z){const te=I(j,J);return(0,n.useMemo)(()=>te[Z],[te,Z])}function U(j,J,Z){const te=I(j,J);return(0,n.useMemo)(()=>Z.map(se=>te[se]),[te,Z])}function F(j){const J=(0,n.useMemo)(()=>u.HA.fromCombinedRule(j),[j]);return I(j.rulerRule,J)}function I(j,J){const Z=(0,u.rO)(J),{isEditable:te,isRemovable:se,isRulerAvailable:ie=!1,loading:ce}=(0,p.g)(Z,j),[re,ue]=O("export-grafana-managed-rules"),X=Q(j);return(0,n.useMemo)(()=>{const he=j?(0,v.Nv)(j):!1,fe=!1,Ce=v.p.grafana.rule(j),Ae=(0,v.Tm)(j),_e=he||fe||Ae,Xe=ce?D:ie,De=_e?D:Xe,Me=Ae?D:Xe,Te=(0,g.Wd)(Z);return{"duplicate-alert-rule":ee(Me,Te.create),"view-alert-rule":ee(b,Te.read),"update-alert-rule":[De,te??!1],"delete-alert-rule":[De,se??!1],"explore-alert-rule":ee(b,o.w.DataSourcesExplore),"silence-alert-rule":X,"modify-export-rule":[Ce,ue],"pause-alert-rule":[De&&Ce,te??!1],"restore-alert-rule":[De&&Ce,te??!1],"delete-alert-rule-permanently":[De&&Ce,(se&&(0,E.qc)())??!1]}},[j,ce,ie,Z,te,se,X,ue])}function V(j){const{isEditable:J,isRemovable:Z,loading:te}=M(j),[se,ie]=O("export-grafana-managed-rules"),ce=q(),re=ae(j?.folderUid);return(0,n.useMemo)(()=>{const X=j?(0,v.bL)(j):!1,le=!1,he=v.R$.grafana.alertingRule(j),fe=(0,v.Tm)(j),Ce=X||le||fe,Ae=te?D:b,_e=Ce?D:Ae,Xe=fe?D:Ae,De=(0,g.Wd)("grafana");return{"duplicate-alert-rule":ee(Xe,De.create),"view-alert-rule":ee(b,De.read),"update-alert-rule":[_e,J??!1],"delete-alert-rule":[_e,Z??!1],"explore-alert-rule":ee(b,o.w.DataSourcesExplore),"silence-alert-rule":[ce,re&&he],"modify-export-rule":[he,ie],"pause-alert-rule":[_e&&he,J??!1],"restore-alert-rule":[_e&&he,J??!1],"delete-alert-rule-permanently":[_e&&he,(Z&&(0,E.qc)())??!1]}},[j,te,J,Z,re,ie,ce])}function M(j){const J=j?.folderUid,{folder:Z,loading:te}=(0,c.a)(J);return(0,n.useMemo)(()=>{if(!j||!J)return{isEditable:!1,isRemovable:!1,loading:!1};if(!Z)return{isEditable:!1,isRemovable:!1,loading:te};const se=(0,g.Wd)("grafana"),ie=a.TP.hasPermissionInMetadata(se.update,Z),ce=a.TP.hasPermissionInMetadata(se.delete,Z);return{isEditable:ie,isRemovable:ce,loading:te}},[j,J,Z,te])}const L=Symbol("ability-skip-token");function N(j,J){const Z=V(j===L?void 0:j);return(0,n.useMemo)(()=>Z[J],[Z,J])}function W(j,J){const Z=V(j===L?void 0:j);return(0,n.useMemo)(()=>J.map(te=>Z[te]),[Z,J])}function R(){const{selectedAlertmanager:j,hasConfigurationAPI:J,isGrafanaAlertmanager:Z}=(0,f.VI)(),te=(0,g.lV)(j),se=(0,g.jy)(j);return{"view-external-configuration":ee(b,o.w.AlertingNotificationsExternalRead),"update-external-configuration":ee(J,o.w.AlertingNotificationsExternalWrite),"create-contact-point":ee(J,te.create,...Z?[o.w.AlertingReceiversCreate]:[]),"view-contact-point":ee(b,te.read,...Z?s.PE:[]),"edit-contact-points":ee(J,te.update,...Z?[o.w.AlertingReceiversWrite]:[]),"delete-contact-point":ee(J,te.delete,...Z?[o.w.AlertingReceiversWrite]:[]),"export-contact-point":[Z,Z],"create-notification-template":ee(J,te.create,...Z?[o.w.AlertingTemplatesWrite]:[]),"view-notification-template":ee(b,te.read,...Z?[o.w.AlertingTemplatesRead]:[]),"edit-notification-template":ee(J,te.update,...Z?[o.w.AlertingTemplatesWrite]:[]),"delete-notification-template":ee(J,te.delete),"create-notification-policy":ee(J,te.create,...Z?r.nv:[]),"view-notification-policy-tree":ee(b,te.read,...Z?r.rw:[]),"update-notification-policy-tree":ee(J,te.update,...Z?r.nv:[]),"delete-notification-policy":ee(J,te.delete,...Z?r.nv:[]),"export-notification-policies":ee(Z,te.read),"decrypt-secrets":ee(Z,te.provisioning.readSecrets),"view-autogenerated-policy-tree":[Z,(0,E.qc)()],"create-silence":ee(b,se.create),"view-silence":ee(b,se.read),"update-silence":ee(b,se.update),"preview-silenced-alerts":ee(b,se.read),"create-time-interval":ee(J,te.create,...Z?l.Zr:[]),"view-time-interval":ee(b,te.read,...Z?l.xK:[]),"update-time-interval":ee(J,te.update,...Z?l.Zr:[]),"delete-time-interval":ee(J,te.delete,...Z?l.Zr:[]),"export-time-intervals":ee(Z,te.read),"view-alert-groups":ee(b,se.read)}}function G(j){const J=R();return(0,n.useMemo)(()=>J[j],[J,j])}function w(j){const J=R();return(0,n.useMemo)(()=>j.map(Z=>J[Z]),[J,j])}const{useGetGrafanaAlertingConfigurationStatusQuery:_}=h.m;function Q(j){const J=v.p.grafana.rule(j)?j.grafana_alert.namespace_uid:void 0,{loading:Z,folder:te}=(0,c.a)(J),se=j&&v.p.grafana.rule(j),ie=v.p.grafana.recordingRule(j),ce=q(),re=ae(J);return j?!se||ie||Z||!te?[!1,!1]:[ce,re]:[!1,!1]}function ae(j){const Z=k(j)[o.w.AlertingSilenceCreate]??!1;return a.TP.hasPermission(o.w.AlertingInstanceCreate)||Z}function q(){const{currentData:j,isLoading:J}=_(void 0),Z=j?.alertmanagersChoice===i.nA.External,te=j?.alertmanagersChoice===i.nA.All;return J?!1:!Z||te}function k(j){const{folder:J}=(0,c.a)(j);return J?.accessControl??{}}const ee=(j,...J)=>[j,J.some(Z=>Z&&a.TP.hasPermission(Z))]},16780:(ne,A,e)=>{"use strict";e.d(A,{n:()=>r});var n=e(74848),a=e(22803),s=e(63142),l=e(53487);const r=({label:i,children:o,className:h,...f})=>{const g=(0,s.of)(c);return(0,n.jsxs)("fieldset",{className:(0,a.cx)(g.wrapper,h),...f,children:[i&&(0,n.jsx)(l.s,{children:i}),o]})},c=i=>({wrapper:(0,a.css)({marginBottom:i.spacing(4),"&:last-child":{marginBottom:0}})})},16880:(ne,A,e)=>{"use strict";e.d(A,{KQ:()=>s,QB:()=>l});var n=e(739);const a="12.2.1",s={alignValue:"left",mergeValues:!0,perPage:20,rowHeight:.9,showValue:n.yL.Auto},l={fillOpacity:70,lineWidth:0}},17084:(ne,A,e)=>{"use strict";e.d(A,{A:()=>i,t:()=>o});var n=e(43173),a=e(33143),s=e(1131),l=e(97883),r=e(98279),c=e(15759);function i(h){const f=h.parent;if(!(0,c.l)(f))throw new Error("Parent layout is not a LayoutParent");if(h instanceof r.K)return h.addNewTab();const g=r.K.createEmpty();g.state.tabs[0].setState({layout:h.clone()}),f.switchLayout(g);const u=g.state.tabs[0];return h.publishEvent(new a.jO(u),!0),u}function o(h){if(!n.$.featureToggles.dashboardNewLayouts){if(h instanceof s.D)return h.addNewRow();throw new Error("New dashboard layouts feature not enabled but new layout found")}if(h instanceof l.V)return h.addNewRow();if(h instanceof r.K){const E=h.getCurrentTab();if(!E)throw new Error("Could find currently active tab");return o(E.state.layout)}const f=h.parent;if(!(0,c.l)(f))throw new Error("Parent layout is not a LayoutParent");const g=l.V.createFromLayout(f.getLayout());f.switchLayout(g);const u=g.state.rows[0];return h.publishEvent(new a.jO(u),!0),u}},17097:(ne,A,e)=>{"use strict";e.d(A,{ET:()=>B,FC:()=>b,Ft:()=>I,KJ:()=>C,Mc:()=>P,ZY:()=>O,d7:()=>T,iU:()=>D,nk:()=>K});var n=e(2543),a=e.n(n),s=e(33239),l=e(17548),r=e(25229),c=e(32899),i=e(92745),o=e(2863),h=e(45229),f=e(65642),g=e(95943),u=e(29043),E=e(23753),v=e(82612),p=e(12161),m=e(43652),y=e(87390),d=e(8535),x=e(87745);const b=(V,M,L)=>{if(L!==!1){const N=M.alert?"YES":void 0;h.A.publish(new x.bY({title:(0,i.t)("dashboard.remove-panel.title.remove-panel","Remove panel"),text:(0,i.t)("dashboard.remove-panel.text.remove-panel","Are you sure you want to remove this panel?"),icon:"trash-alt",confirmText:N,yesText:"Remove",onConfirm:()=>b(V,M,!1)}));return}V.removePanel(M),(0,d.JD)((0,y.O6)(M.key))},D=(V,M)=>{V.duplicatePanel(M)},C=V=>{let M=V;V instanceof v.a9&&(M=V.getSaveModel()),u.A.set(g.tH,JSON.stringify(M)),h.A.emit(c.r1.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},P=(V,M)=>{h.A.publish(new x.S8({component:E.Zy,props:{dashboard:V,panel:M}}))},T=(V,M)=>{h.A.publish(new x.S8({component:m.o,props:{panel:M,initialFolderUid:V.meta.folderUid,isOpen:!0}}))},O=V=>{h.A.publish(new x.S8({component:p.l,props:{onConfirm:()=>V.unlinkLibraryPanel(),isOpen:!0}}))},S=V=>{V.refresh()},B=V=>{const M={...V.options};M.legend.showLegend===!0?M.legend.showLegend=!1:M.legend.showLegend=!0,V.updateOptions(M)};function K(V,M){const L={timeInfo:"",timeRange:M};if(V.timeFrom){const N=(0,o.w)().replace(V.timeFrom,V.scopedVars),W=l.describeTextRange(N);if(W.invalid)return L.timeInfo="invalid time override",L;if((0,n.isString)(M.raw.from)){const R=(0,r.AN)(M.from).tz(),G=(0,r.AN)(M.to).tz(),w=s.parse(W.from,void 0,R);L.timeInfo=W.display,L.timeRange={from:w,to:s.parse(W.to,void 0,G),raw:{from:W.from,to:W.to}}}}if(V.timeShift){const N=(0,o.w)().replace(V.timeShift,V.scopedVars);if(l.describeTextRange(N).invalid)return L.timeInfo="invalid timeshift",L;const R="-"+N;L.timeInfo+=" timeshift "+R;const G=s.parseDateMath(R,L.timeRange.from,!1),w=s.parseDateMath(R,L.timeRange.to,!0);L.timeRange={from:G,to:w,raw:{from:G,to:w}}}return V.hideTimeOverride&&(L.timeInfo=""),L}function U(V){const L=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return V.maxDataPoints?V.maxDataPoints:Math.ceil(L*(V.gridPos.w/24))}function F(V,M){const L=V.plugin&&V.plugin.noPadding?0:config.theme.panelPadding*2,N=V.hasTitle()?config.theme.panelHeaderHeight:0;return M-N-L-PANEL_BORDER}function I(V){for(const L of V.panelIterator())L.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},17200:(ne,A,e)=>{"use strict";e.d(A,{c:()=>m,y:()=>d});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(46885),c=e(96540),i=e(15245),o=e(92807),h=e(12594),f=e(63527),g=e(87105),u=e(63142),E=e(81563);const v=(b,D)=>b-D*Math.floor(b/D),p=8;var m=(b=>(b.InputElement="input",b.TextAreaElement="textarea",b))(m||{});const y=(b,D)=>({suggestionsWrapper:(0,a.css)({boxShadow:b.shadows.z2}),errorTooltip:(0,a.css)({position:"absolute",top:D+p+"px",zIndex:b.zIndex.tooltip}),inputWrapper:(0,a.css)({position:"relative"})}),d=({value:b="",onChange:D,suggestions:C,placeholder:P,error:T,invalid:O,type:S="input",style:B,autoFocus:K=!1})=>{const[U,F]=(0,c.useState)(!1),[I,V]=(0,c.useState)(0),[M,L]=(0,c.useState)(b.toString()),N=(0,c.useRef)(null),[W,R]=(0,c.useState)(0),[G,w]=(0,c.useState)(0),[_,Q]=(0,c.useState)(0),ae=(0,u.$j)(),q=y(ae,G),k=(0,c.useRef)();(0,c.useEffect)(()=>{N.current?.scrollTo(0,W)},[W]);const ee=[(0,s.UU)({fallbackAxisSideDirection:"start",crossAxis:!1,boundary:document.body}),(0,s.BN)()],{refs:j,floatingStyles:J}=(0,l.we)({open:U,placement:"bottom-start",onOpenChange:F,middleware:ee,whileElementsMounted:r.ll,strategy:"fixed"}),Z=(0,c.useCallback)(X=>{j.setReference(X),k.current=X},[j]),te=(0,c.useRef)(null);(0,c.useEffect)(()=>{R(x(te.current,I))},[I]);const se=c.useCallback((X,le=k.current)=>{const he=le.selectionStart,fe=le.value;fe[_-1]==="$"?le.value=fe.slice(0,_)+X.value+fe.slice(he):le.value=fe.slice(0,_)+`\${${X.value}}`+fe.slice(he),L(le.value),F(!1),V(0),D(le.value)},[D,_]),ie=c.useCallback(X=>{if(!U){if(X.key==="$"||X.key===" "&&X.ctrlKey){Q(k.current.selectionStart||0),F(!0);return}return}switch(X.key){case"Backspace":case"Escape":case"ArrowLeft":case"ArrowRight":return F(!1),V(0);case"Enter":return X.preventDefault(),se(C[I]);case"ArrowDown":case"ArrowUp":X.preventDefault();const le=X.key==="ArrowDown"?1:-1;return V(he=>v(he+le,C.length));default:return}},[U,C,I,se]),ce=c.useCallback(X=>{L(X.currentTarget.value)},[]),re=c.useCallback(X=>{D(X.currentTarget.value)},[D]);(0,c.useEffect)(()=>{w(k.current.clientHeight)},[]);const ue={placeholder:P,invalid:O,value:M,onChange:ce,onBlur:re,onKeyDown:ie};return(0,n.jsxs)("div",{className:q.inputWrapper,style:B??{},children:[U&&(0,n.jsx)(i.ZL,{children:(0,n.jsx)("div",{ref:j.setFloating,style:J,className:q.suggestionsWrapper,children:(0,n.jsx)(o.P,{maxHeight:"300px",onScroll:X=>R(X.currentTarget.scrollTop??0),ref:N,children:(0,n.jsx)(E.k,{activeRef:te,suggestions:C,onSuggestionSelect:se,onClose:()=>F(!1),activeIndex:I})})})}),O&&T&&(0,n.jsx)("div",{className:q.errorTooltip,children:(0,n.jsx)(h.P,{children:T})}),S==="input"?(0,n.jsx)(f.p,{...ue,ref:Z,autoFocus:K}):(0,n.jsx)(g.f,{...ue,ref:Z,autoFocus:K,rows:5})]})};d.displayName="SuggestionsInput";function x(b,D){return(b?.clientHeight??0)*D}},17305:(ne,A,e)=>{"use strict";e.d(A,{T:()=>o});var n=e(74848),a=e(16817),s=e(92745),l=e(45967),r=e(99887),c=e(58851),i=e(95027);function o({pluginId:h,size:f="md"}){const{value:g,loading:u}=(0,a.A)(()=>(0,i.x)(h));if(u||!g)return null;const E=g.info.logos?.small,v=g.name,p=(0,c.cs)(f),m=E?(0,n.jsx)("img",{src:E,alt:v,height:p}):(0,n.jsx)(r.E,{text:h,color:"orange"});return(0,n.jsx)(l.m,{content:(0,s.t)("alerting.plugin-origin-badge.tooltip-managed-by-plugin","This rule is managed by the {{pluginName}} plugin",{pluginName:v}),children:m})}},17340:(ne,A,e)=>{"use strict";e.d(A,{SW:()=>o,i2:()=>g,v2:()=>h,ve:()=>p});var n=e(45863),a=e(93389),s=e(1131),l=e(20246),r=e(1682),c=e(8285),i=e(67350);function o(m,y){return{kind:"GridLayout",spec:{items:f(m,y)}}}function h(m,y,d,x){if(m.kind!=="GridLayout")throw new Error("Invalid layout kind");return new s.D({grid:new n.hy({isLazy:(0,l.DP)(d),children:E(m,y,x)})})}function f(m,y){let d=[];for(const x of m.state.grid.state.children)x instanceof a.U&&(x.state.variableName?d=d.concat(u(x,y)):d.push(g(x)));return d}function g(m,y){let d,x=0,b=0,D=0,C=0,P=m;if(!(P.state.body instanceof n.Eb))throw new Error("DashboardGridItem body expected to be VizPanel");C=(P.state.variableName?P.state.itemHeight:P.state.height)??0,x=P.state.x??0,b=P.state.y??0,D=P.state.width??0;const T=P.state.variableName;let O=r.b4.getElementIdentifierForVizPanel(P.state.body);if(d={kind:"GridLayoutItem",spec:{x,y:y??b,width:D,height:C,element:{kind:"ElementReference",name:O}}},T){const S={mode:"variable",value:T};P.state.maxPerRow&&(S.maxPerRow=P.getMaxPerRow()),P.state.repeatDirection&&(S.direction=P.getRepeatDirection()),d.spec.repeat=S}if(!d)throw new Error("Unsupported grid item type");return d}function u(m,y=!1){if(y){if(m.state.body instanceof n.Eb&&(0,c.ME)(m.state.body))return[];if(m.state.repeatedPanels){const{h:d,w:x,columnCount:b}=(0,c.bR)(m);return m.state.repeatedPanels.map((C,P)=>{let T=0,O=0;m.state.repeatDirection==="v"?(T=m.state.x,O=P*d):(T=P%b*x,O=m.state.y+Math.floor(P/b)*d);const S={x:T,y:O,w:x,h:d};return{kind:"GridLayoutItem",spec:{x:S.x,y:S.y,width:S.w,height:S.h,repeat:{mode:"variable",value:m.state.variableName,maxPerRow:m.getMaxPerRow(),direction:m.state.repeatDirection},element:{kind:"ElementReference",name:C.state.key}}}})}return[]}else return[g(m)]}function E(m,y,d){return m.spec.items.map(b=>{if(b.kind==="GridLayoutItem")return p(b,y,d);throw new Error(`Unknown layout element kind: ${b.kind}`)})}function v(m,y,d,x){let b;return y.kind==="Panel"?b=(0,i.Gl)(y,x):b=(0,i.kB)(y,x),new a.U({key:`grid-item-${x??y.spec.id}`,x:m.x,y:d??m.y,width:m.repeat?.direction==="h"?24:m.width,height:m.height,itemHeight:m.height,body:b,variableName:m.repeat?.value,repeatDirection:m.repeat?.direction,maxPerRow:m.repeat?.maxPerRow})}function p(m,y,d){const x=y[m.spec.element.name];if(!x)throw new Error(`Panel with uid ${m.spec.element.name} not found in the dashboard elements`);let b;return d&&(b=d()),v(m.spec,x,void 0,b)}},17349:(ne,A,e)=>{"use strict";e.d(A,{X:()=>a});var n=e(11257);const a=[n.w.AlertingTemplatesRead,n.w.AlertingTemplatesWrite,n.w.AlertingTemplatesDelete]},17503:(ne,A,e)=>{"use strict";e.d(A,{S1:()=>o,Vh:()=>g,aH:()=>l,dK:()=>u,hF:()=>c,jq:()=>r,t9:()=>h,tP:()=>i,uY:()=>f});var n=e(95004),a=e(41119);const s=100;function l(E){if(E.fields.length<2)return!1;const v=E.fields.find(m=>m.type===n.PU.number);let p=!1;for(const m of E.fields)if(c(m)){p=!0;break}return p&&v!==void 0}function r(E){return!E.find(v=>!l(v))}function c(E){if(E.type!==n.PU.time)return!1;let v=null,p=E.values.length>s?s:E.values.length;for(let m=0;m<p;m++){const y=E.values[m];if(v===null||y!==null&&y>v)v=y;else return!1}return!0}function i(E){for(let v=0;v<E.length;v++){const p=(0,a.KR)(E[v]);if(p.timeField!==void 0&&p.timeIndex!==void 0)return!0}return!1}function o(E){return E.fields.some(v=>v.type===n.PU.time)}function h(E,v){if(E.meta?.uniqueRowIdFields!==void 0)return E.meta.uniqueRowIdFields.map(p=>E.fields[p].values[v]).join("-")}function f(E,v){if(v instanceof Array)for(let p=0;p<v.length;p++)E.fields[p].values.push(v[p]);else for(const p of E.fields)p.values.push(v[p.name]);try{E.length++}catch{}}function g(E,v,p="gray"){E.fields.forEach(m=>{m.type===n.PU.time&&(m.values=m.values.map(y=>v<0?y-v:y+v)),m.config={...m.config??{},color:{mode:"fixed",fixedColor:p},custom:{...m.config?.custom??{},timeCompare:{diffMs:v,isTimeShiftQuery:!0}}}})}function u(E,v,p){const m=E.refId;if(!m||!m.endsWith("-compare"))return!1;const y=m.replace("-compare",""),d=v.find(P=>P.refId===y&&!P.meta?.timeCompare?.isTimeShiftQuery);if(!d)return!1;const x=E.fields.find(P=>P.type===n.PU.time),b=d.fields.find(P=>P.type===n.PU.time);if(!x?.values.length||!b?.values.length)return!1;const D=x.values.find(P=>P!=null),C=b.values.find(P=>P!=null);return D==null||C==null?!1:D<p.from.valueOf()}},17564:(ne,A,e)=>{"use strict";e.d(A,{S:()=>n});function n(a){return"instanceSettings"in a&&"meta"in a}},17621:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>h,jl:()=>c});var n=e(65307),a=e(15203);const s={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1},l=(f,g)=>({...f,...g.payload,hasChanged:!1}),r=(0,n.Z0)({name:"folder",initialState:s,reducers:{loadFolder:l,setFolderTitle:(f,g)=>({...f,title:g.payload,hasChanged:g.payload.trim().length>0})},extraReducers:f=>{f.addMatcher(a.vZ.getFolder.matchFulfilled,l)}}),{loadFolder:c,setFolderTitle:i}=r.actions,h={folder:r.reducer}},17732:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>E});var n=e(74848),a=e(96540),s=e(16817),l=e(40996),r=e(92745),c=e(30703),i=e(22787),o=e(45861),h=e(63527),f=e(63142),g=e(30124),u=e(37666);const E=({libraryPanel:v,isUnsavedPrompt:p,onDismiss:m,onConfirm:y,onDiscard:d})=>{const[x,b]=(0,a.useState)(""),D=(0,s.A)(async()=>{const B=await(0,g.xV)(v.state.uid);return B.length>0?B.map(K=>K.title):[]},[v.state.uid]),[C,P]=(0,a.useState)([]);(0,l.A)(()=>D.value?P(D.value.filter(B=>B.toLowerCase().includes(x.toLowerCase()))):P([]),300,[D.value,x]);const T=(0,f.of)(u.o),O=(0,a.useCallback)(()=>{d()},[d]),S=p?"Unsaved library panel changes":"Save library panel";return(0,n.jsx)(i.a,{title:S,icon:"save",onDismiss:m,isOpen:!0,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:T.textInfo,children:(0,n.jsxs)(r.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.affected-dashboards",count:v.state._loadedPanel?.meta?.connectedDashboards,children:["This update will affect ",(0,n.jsxs)("strong",{children:["{{count}}"," dashboards."]})," The following dashboards using the panel will be affected:"]})}),(0,n.jsx)(h.p,{className:T.dashboardSearch,prefix:(0,n.jsx)(c.I,{name:"search"}),placeholder:(0,r.t)("dashboard-scene.save-library-viz-panel-modal.placeholder-search-affected-dashboards","Search affected dashboards"),value:x,onChange:B=>b(B.currentTarget.value)}),D.loading?(0,n.jsx)("p",{children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.loading-connected-dashboards",children:"Loading connected dashboards..."})}):(0,n.jsxs)("table",{className:T.myTable,children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{children:(0,n.jsx)("th",{children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.dashboard-name",children:"Dashboard name"})})})}),(0,n.jsx)("tbody",{children:C.map((B,K)=>(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:B})},`dashrow-${K}`))})]}),(0,n.jsxs)(i.a.ButtonRow,{children:[(0,n.jsx)(o.$n,{variant:"secondary",onClick:m,fill:"outline",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.cancel",children:"Cancel"})}),p&&(0,n.jsx)(o.$n,{variant:"destructive",onClick:O,children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.discard",children:"Discard"})}),(0,n.jsx)(o.$n,{onClick:()=>{y()},children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.save-library-viz-panel-modal.update-all",children:"Update all"})})]})]})})}},17752:(ne,A,e)=>{"use strict";e.d(A,{BC:()=>h,DW:()=>c,Eo:()=>g,FN:()=>r,NY:()=>f,T7:()=>o,nS:()=>a,sJ:()=>i,wf:()=>l,y8:()=>u});var n=e(65307);const a={id:"",isValid:!0,errors:{},name:"",extended:null},s=(0,n.Z0)({name:"templating/editor",initialState:a,reducers:{variableEditorMounted:(E,v)=>{E.name=v.payload.name,E.id=v.payload.id},variableEditorUnMounted:(E,v)=>a,changeVariableNameSucceeded:(E,v)=>{E.name=v.payload.data.newName,delete E.errors.name,E.isValid=Object.keys(E.errors).length===0},changeVariableNameFailed:(E,v)=>{E.name=v.payload.newName,E.errors.name=v.payload.errorText,E.isValid=Object.keys(E.errors).length===0},addVariableEditorError:(E,v)=>{E.errors[v.payload.errorProp]=v.payload.errorText,E.isValid=Object.keys(E.errors).length===0},removeVariableEditorError:(E,v)=>{delete E.errors[v.payload.errorProp],E.isValid=Object.keys(E.errors).length===0},changeVariableEditorExtended:(E,v)=>{E.extended={...E.extended,...v.payload}},cleanEditorState:()=>a}}),l=s.reducer,{changeVariableNameSucceeded:r,changeVariableNameFailed:c,variableEditorMounted:i,variableEditorUnMounted:o,changeVariableEditorExtended:h,addVariableEditorError:f,removeVariableEditorError:g,cleanEditorState:u}=s.actions},17788:(ne,A,e)=>{"use strict";e.d(A,{Gq:()=>r,zf:()=>c});var n=e(5556),a=e(43173),s=e(36490);const l="grafana.dashboard.preservedUrlFiltersState";function r(i){const o=window.sessionStorage.getItem(l);if(o){const h=new URLSearchParams(o),f=s.Ny.getSearch(),g=new URLSearchParams;h.forEach((E,v)=>{(!f.has(v)||f.get(v)==="")&&f.append(v,E)}),f.forEach((E,v)=>{E!==""&&g.append(v,E)});for(const E of Array.from(g.keys()))E.startsWith("var-")&&(i.state.$variables?.getByName(E.replace("var-",""))||g.delete(E));const u=g.toString();u&&s.Ny.replace({search:u})}}function c(i,o){if(!a.$.featureToggles.preserveDashboardStateWhenNavigating||!o)return;const h={};i.forEach((u,E)=>{h[E]=u});const f=Object.fromEntries(Object.entries(h).filter(([u])=>u.startsWith("var-")||u==="from"||u==="to"||u==="timezone")),g=Object.fromEntries(Object.entries(f).filter(([u,E])=>!(Array.isArray(E)&&E.length===0)));Object.keys(g).length>0?window.sessionStorage.setItem(l,n.kM.renderUrl("",g)):window.sessionStorage.removeItem(l)}},17862:(ne,A,e)=>{"use strict";e.d(A,{AM:()=>o,Cj:()=>f,yO:()=>p});var n=e(50803),a=e(60171),s=e(84500),l=e(61371);function r(m,y){try{let d=m;for(const x of y)d=d[x];return d}catch{return}}function c(m,y){return typeof m==typeof y&&(typeof m=="string"&&m===y||Array.isArray(m)&&m.length===y.length&&m.every((d,x)=>d===y[x]))}function i(m,y){return m===y||m&&y&&m.selected===y.selected&&c(m.text,y.text)&&c(m.value,y.value)}function o(m,y,d,x,b){const D=h(m),C=y,P=g(C.timeSettings,D.timeSettings),T=E(C,D,x),O=C.timeSettings.autoRefresh!==D.timeSettings.autoRefresh;d||(C.timeSettings.from=D.timeSettings.from,C.timeSettings.to=D.timeSettings.to),b||(C.timeSettings.autoRefresh=D.timeSettings.autoRefresh);const S=(0,l.G4)(m,C),B=Object.values(S).reduce((K,U)=>K+U.length,0);return{changedSaveModel:C,initialSaveModel:D,diffs:S,diffCount:B,hasChanges:B>0,hasTimeChanges:P,hasVariableValueChanges:T,hasRefreshChange:O,hasMigratedToV2:!(0,a.aK)(m)}}function h(m){if((0,a.aK)(m))return m;const y={dashboard:m,meta:{}};return n.Op.ensureV2Response(y).spec}function f(m,y,d,x,b){const D=m,C=y,P=g(C.time,D.time),T=v(C,D,x),O=C.refresh!==D.refresh;d||(C.time=D.time),b||(C.refresh=D.refresh);const S=(0,l.G4)(D,C),B=Object.values(S).reduce((K,U)=>K+U.length,0);return{changedSaveModel:C,initialSaveModel:D,diffs:S,diffCount:B,hasChanges:B>0,hasTimeChanges:P,isNew:C.version===0,hasVariableValueChanges:T,hasRefreshChange:O}}function g(m={},y={}){return m.from!==y.from||m.to!==y.to}function u(m,y){if(m===void 0&&y===void 0)return console.warn("Adhoc variable filter property is undefined"),!0;if(m===void 0&&y!==void 0||y===void 0&&m!==void 0)return console.warn("Adhoc variable filter property is undefined"),!1;if(m?.length!==y?.length)return!1;for(let d=0;d<(m?.length??0);d++){const x=m?.[d],b=y?.[d];if(x?.key!==b?.key||x?.operator!==b?.operator||x?.value!==b?.value)return!1}return!0}function E(m,y,d){const x=y.variables??[],b=m.variables??[];let D=!1;for(const C of b){const P=S=>S.kind==="QueryVariable"||S.kind==="CustomVariable"||S.kind==="DatasourceVariable"||S.kind==="ConstantVariable"||S.kind==="IntervalVariable"||S.kind==="TextVariable"||S.kind==="GroupByVariable",T=S=>S.kind==="QueryVariable"||S.kind==="CustomVariable"||S.kind==="DatasourceVariable"||S.kind==="IntervalVariable"||S.kind==="GroupByVariable",O=x.find(({spec:S,kind:B})=>S.name===C.spec.name&&B===C.kind);O&&((P(C)&&P(O)&&!i(C.spec.current,O.spec.current)||C.kind==="AdhocVariable"&&O.kind==="AdhocVariable"&&!u(C.spec.filters,O.spec.filters))&&(D=!0),d||(C.kind==="AdhocVariable"?C.spec.filters=O.spec.filters:C.kind==="TextVariable"&&(C.spec.query=O.spec.query),C.kind!=="AdhocVariable"&&(P(C)&&P(O)&&(C.spec.current=O.spec.current),T(C)&&T(O)&&(C.spec.options=O.spec.options))))}return D}function v(m,y,d){const x=y.templating?.list??[],b=m.templating?.list??[];let D=!1;for(const C of b){const P=x.find(({name:T,type:O})=>T===C.name&&O===C.type);if(P&&(P.current&&delete P.current.selected,i(C.current,P.current)?C.type==="adhoc"&&!u((0,s.Gs)(C?.filters),(0,s.Gs)(P?.filters))&&(D=!0):D=!0,!d)){const T=C;T.type==="adhoc"?T.filters=P.filters:T.type==="textbox"&&(T.query=P.query),T.type!=="adhoc"&&(C.current=P.current,C.options=P.options)}}return D}function p(m,y){const d=(0,l.G4)(y,m),x=Object.values(d).reduce((b,D)=>b+D.length,0);return{changedSaveModel:m,initialSaveModel:y,diffs:d,diffCount:x,hasChanges:x>0}}},17914:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>c});var n=e(74848),a=e(92745),s=e(41654),l=e(77824),r=e(44580);const c=({value:i,onChange:o,item:h})=>{const f=[{label:(0,a.t)("timeseries.insert-nulls-editor.disconnect-options.label-never","Never"),value:!1},{label:(0,a.t)("timeseries.insert-nulls-editor.disconnect-options.label-threshold","Threshold"),value:36e5}],g=typeof i=="number";return f[1].value=g?i:36e5,(0,n.jsxs)(s.B,{children:[(0,n.jsx)(l.z,{value:i,options:f,onChange:o}),g&&(0,n.jsx)(r.g,{value:i,onChange:o,inputPrefix:r.F.GreaterThan,isTime:h.settings?.isTime??!1})]})}},18027:(ne,A,e)=>{"use strict";e.d(A,{I:()=>o});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=e(44019),c=e(12594),i=e(79233);const o=({children:f,label:g,tooltip:u,labelWidth:E="auto",invalid:v,loading:p,disabled:m,required:y,className:d,htmlFor:x,grow:b,shrink:D,error:C,transparent:P,interactive:T,validationMessageHorizontalOverflow:O,...S})=>{const B=(0,l.$j)(),K=h(B,b,D),U=x??(0,r.getChildId)(f),F=typeof g=="string"?(0,n.jsx)(i.c,{interactive:T,width:E,tooltip:u,htmlFor:U,transparent:P,children:`${g}${y?" *":""}`}):g;return(0,n.jsxs)("div",{className:(0,a.cx)(K.container,d),...S,children:[F,(0,n.jsxs)("div",{className:K.childContainer,children:[(0,s.cloneElement)(f,{invalid:v,disabled:m,loading:p}),v&&C&&(0,n.jsx)("div",{className:(0,a.cx)(K.fieldValidationWrapper,{[K.validationMessageHorizontalOverflow]:!!O}),children:(0,n.jsx)(c.P,{children:C})})]})]})};o.displayName="InlineField";const h=(f,g,u)=>({container:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${g?1:0} ${u?1:0} auto`,margin:`0 ${f.spacing(.5)} ${f.spacing(.5)} 0`}),childContainer:(0,a.css)({flex:`${g?1:0} ${u?1:0} auto`}),fieldValidationWrapper:(0,a.css)({marginTop:f.spacing(.5)}),validationMessageHorizontalOverflow:(0,a.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})},18030:(ne,A,e)=>{"use strict";e.d(A,{F:()=>s});var n=e(62467),a=e(92511);class s{canWork({dashboard:r}){return r?.annotations?.list?.some(c=>c.enable&&!!c.snapshotData)}work(r){if(!this.canWork(r))return(0,a.$)();const c=this.getAnnotationsFromSnapshot(r.dashboard);return(0,n.of)({annotations:c,alertStates:[]})}getAnnotationsFromSnapshot(r){return(r?.annotations?.list?.filter(h=>h.enable)).filter(h=>!!h.snapshotData).reduce((h,f)=>h.concat((0,a.G9)(f,f.snapshotData)),[])}getAnnotationsInSnapshot(r,c){const i=this.getAnnotationsFromSnapshot(r);return(0,a.FK)(i,c)}}},18105:(ne,A,e)=>{"use strict";e.d(A,{N:()=>u,RH:()=>m});var n=e(74848),a=e(22803),s=e(96540),l=e(36638),r=e(57866),c=e(46644),i=e(92745),o=e(739),h=e(63142),f=e(63527),g=e(18857);const u=[{label:"==",value:o.zT.EQ},{label:"!=",value:o.zT.NEQ},{label:">",value:o.zT.GT},{label:">=",value:o.zT.GTE},{label:"<",value:o.zT.LT},{label:"<=",value:o.zT.LTE}];function E(y){return y===c.gy.allIsNull||y===c.gy.allIsZero}const v=({options:y,onChange:d})=>{const x=(0,h.of)(p),b=(0,s.useMemo)(()=>c.AS.selectOptions([y?.reducer]),[y?.reducer]),D=(0,s.useCallback)(S=>d({...y,reducer:S.value}),[y,d]),C=(0,s.useCallback)(S=>d({...y,op:S.value}),[y,d]),P=(0,s.useCallback)(S=>{const B=S.currentTarget.valueAsNumber;return d({...y,value:B})},[y,d]),T=y??{},O=E(T.reducer);return(0,n.jsxs)("div",{className:x.spot,children:[(0,n.jsx)(g.l6,{value:b.current,options:b.options,onChange:D,placeholder:(0,i.t)("grafana-ui.field-value-matcher.select-field-placeholder","Select field reducer")}),T.reducer&&!O&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.l6,{value:u.find(S=>S.value===T.op),options:u,onChange:C,"aria-label":(0,i.t)("grafana-ui.field-value-matcher.operator-label","Comparison operator"),width:19}),(0,n.jsx)(f.p,{type:"number",value:T.value,onChange:P})]})]})},p=y=>({spot:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end",gap:"4px"})}),m=()=>({id:r.Ct.byValue,component:v,matcher:l.sJ.get(r.Ct.byValue),name:(0,i.t)("grafana-ui.matchers-ui.name-fields-with-value","Fields with values"),description:(0,i.t)("grafana-ui.matchers-ui.description-fields-with-value","Set properties for fields with reducer condition"),optionsToLabel:y=>`${y?.reducer} ${y?.op} ${y?.value}`})},18178:(ne,A,e)=>{"use strict";e.d(A,{u:()=>V});var n=e(92745),a=e(45863),s=e(45229),l=e(87745),r=e(1131),c=e(87308),i=e(74848),o=e(22803),h=e(96540),f=e(63142),g=e(30703),u=e(9931),E=e(18615),v=e(8285),p=e(93389),m=e(8515),y=e(22787),d=e(49785),x=e(51898),b=e(37386),D=e(63527),C=e(34999),P=e(89640),T=e(45861),O=e(31819);const S=({repeat:M,title:L,sceneContext:N,isUsingDashboardDS:W,onUpdate:R,onCancel:G})=>{const[w,_]=(0,h.useState)(M),Q=(0,h.useCallback)(ee=>_(ee),[_]),{handleSubmit:ae,register:q}=(0,d.mN)({defaultValues:{title:L}}),k=ee=>{R(ee.title,w)};return(0,i.jsxs)("form",{onSubmit:ae(k),children:[(0,i.jsx)(b.D,{label:(0,n.t)("dashboard.default-layout.row-options.form.title","Title"),children:(0,i.jsx)(D.p,{...q("title"),type:"text"})}),(0,i.jsx)(b.D,{label:(0,n.t)("dashboard.default-layout.row-options.form.repeat-for.label","Repeat for"),children:(0,i.jsx)(O.U,{sceneContext:N,repeat:w,onChange:Q})}),W&&(0,i.jsx)(C.F,{"data-testid":x.Tp.pages.Dashboard.Rows.Repeated.ConfigSection.warningMessage,severity:"warning",title:"",topSpacing:3,bottomSpacing:0,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:(0,i.jsxs)(n.x6,{i18nKey:"dashboard.default-layout.row-options.form.repeat-for.warning.text",children:["Panels in this row use the ",{SHARED_DASHBOARD_QUERY:u.K}," data source. These panels will reference the panel in the original row, not the ones in the repeated rows."]})}),(0,i.jsx)(P.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/#configure-repeating-rows",children:(0,i.jsx)(n.x6,{i18nKey:"dashboard.default-layout.row-options.form.repeat-for.learn-more",children:"Learn more"})})]})}),(0,i.jsxs)(y.a.ButtonRow,{children:[(0,i.jsx)(T.$n,{type:"button",variant:"secondary",onClick:G,fill:"outline",children:(0,i.jsx)(n.x6,{i18nKey:"dashboard.default-layout.row-options.form.cancel",children:"Cancel"})}),(0,i.jsx)(T.$n,{type:"submit",children:(0,i.jsx)(n.x6,{i18nKey:"dashboard.default-layout.row-options.form.update",children:"Update"})})]})]})},B=({repeat:M,title:L,parent:N,onDismiss:W,onUpdate:R,isUsingDashboardDS:G})=>{const w=(0,f.of)(K);return(0,i.jsx)(y.a,{isOpen:!0,title:(0,n.t)("dashboard.default-layout.row-options.modal.title","Row options"),onDismiss:W,className:w.modal,children:(0,i.jsx)(S,{sceneContext:N,repeat:M,title:L,onCancel:W,onUpdate:R,isUsingDashboardDS:G})})},K=()=>({modal:(0,o.css)({label:"RowOptionsModal",width:"500px"})}),U=({repeat:M,title:L,parent:N,onUpdate:W,isUsingDashboardDS:R})=>(0,i.jsx)(m.$s,{children:({showModal:G,hideModal:w})=>(0,i.jsx)("button",{type:"button",className:"pointer","aria-label":(0,n.t)("dashboard.default-layout.row-options.button.label","Row options"),onClick:()=>{G(B,{title:L,repeat:M,parent:N,onDismiss:w,onUpdate:(_,Q)=>{W(_,Q),w()},isUsingDashboardDS:R})},children:(0,i.jsx)(g.I,{name:"cog"})})});U.displayName="RowOptionsButton";function F({model:M}){const L=M.getParent(),{title:N,children:W}=L.useState(),R=(0,v.MZ)(M),{meta:G,isEditing:w}=(0,v.TN)(M),_=(0,f.of)(I),Q=(0,h.useMemo)(()=>W.some(q=>{if(!(q instanceof p.U))return!1;if(q.state.body instanceof a.Eb){const k=(0,v.un)(q.state.body);return k?.state.datasource?.uid===u.K||k?.state.datasource?.uid===E.uv&&k?.state.queries.some(ee=>ee.datasource?.uid===u.K)}return!1}),[W]),ae=L.state.$behaviors?.find(q=>q instanceof c.L);return(0,i.jsx)(i.Fragment,{children:G.canEdit&&w&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:_.rowActions,children:[(0,i.jsx)(U,{title:N,repeat:ae instanceof c.L?ae.state.variableName:void 0,parent:R,onUpdate:(q,k)=>M.onUpdate(q,k),isUsingDashboardDS:Q}),(0,i.jsx)("button",{type:"button",onClick:()=>M.onDelete(),"aria-label":(0,n.t)("dashboard.default-layout.row-actions.delete","Delete row"),children:(0,i.jsx)(g.I,{name:"trash-alt"})})]})})})}const I=M=>({rowActions:(0,o.css)({color:M.colors.text.secondary,lineHeight:"27px",button:{color:M.colors.text.secondary,paddingLeft:M.spacing(2),background:"transparent",border:"none","&:hover":{color:M.colors.text.maxContrast}}})});class V extends a.Bs{static{this.Component=F}getParent(){if(!(this.parent instanceof a.tI))throw new Error("RowActions must have a SceneGridRow parent");return this.parent}removeRow(L){a.jh.getAncestor(this,r.D).removeRow(this.getParent(),L)}onUpdate(L,N){const W=this.getParent();let R;if(W.state.$behaviors)for(let G of W.state.$behaviors)G instanceof c.L&&(R=G);L!==W.state.title&&W.setState({title:L}),N?(R&&R.removeBehavior(),R=new c.L({variableName:N}),W.setState({$behaviors:[...W.state.$behaviors??[],R]})):R?.removeBehavior()}onDelete(){s.A.publish(new l.bY({title:(0,n.t)("dashboard.default-layout.row-actions.modal.title","Delete row"),text:(0,n.t)("dashboard.default-layout.row-actions.modal.text","Are you sure you want to remove this row and all its panels?"),altActionText:(0,n.t)("dashboard.default-layout.row-actions.modal.alt-action","Delete row only"),icon:"trash-alt",onConfirm:()=>this.removeRow(!0),onAltAction:()=>this.removeRow()}))}}},18203:(ne,A,e)=>{"use strict";e.d(A,{z:()=>E});var n=e(74848),a=e(22803),s=e(92745),l=e(30703),r=e(59243),c=e(89640),i=e(41654),o=e(18027),h=e(79233),f=e(87105),g=e(63142);const u="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",E=({labelWidth:y,onChange:d,query:x,onRunQuery:b})=>{const D=T=>{d({...x,expression:T.target.value})},C=(0,g.of)(p),P=()=>{x.expression&&b()};return(0,n.jsx)(i.B,{children:(0,n.jsx)(o.I,{label:(0,n.jsx)(h.c,{width:"auto",children:(0,n.jsx)(r.G,{fitContent:!0,content:(0,n.jsxs)("div",{className:C.documentationContainer,children:[(0,n.jsx)("div",{children:(0,n.jsxs)(s.x6,{i18nKey:"expressions.math.run-math-operations",values:{refExample:"${refId}",ref1:"$A",ref2:"$B",ref3:"$C",example:"$A + $B"},children:["Run math operations on one or more queries. You reference the query by ","{{refExample}}"," ie."," ","{{ref1}}",", ","{{ref2}}",", ","{{ref3}}","etc.",(0,n.jsx)("br",{}),"Example: ",(0,n.jsx)("code",{children:"{{example}}"})]})}),(0,n.jsx)("header",{className:C.documentationHeader,children:(0,n.jsx)(s.x6,{i18nKey:"expressions.math.available-math-functions",children:"Available math functions"})}),(0,n.jsxs)("div",{className:C.documentationFunctions,children:[(0,n.jsx)(v,{name:"abs",description:(0,s.t)("expression.math.description-abs","Returns the absolute value of its argument which can be a number or a series")}),(0,n.jsx)(v,{name:"is_inf",description:(0,s.t)("expression.math.description-is-inf","Returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values.")}),(0,n.jsx)(v,{name:"is_nan",description:(0,s.t)("expression.math.description-is-nan","Returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values.")}),(0,n.jsx)(v,{name:"is_null",description:(0,s.t)("expression.math.description-is-null","Returns 1 for null values and 0 for other values. It's able to operate on series or scalar values.")}),(0,n.jsx)(v,{name:"is_number",description:(0,s.t)("expression.math.description-is-number","Returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values.")}),(0,n.jsx)(v,{name:"log",description:(0,s.t)("expression.math.description-log","Returns the natural logarithm of its argument, which can be a number or a series")}),(0,n.jsx)(v,{name:"inf, infn, nan, and null",description:(0,s.t)("expression.math.description-inf-nan-null","The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name.")}),(0,n.jsx)(v,{name:"round",description:(0,s.t)("expression.math.description-round","Returns a rounded integer value. It's able to operate on series or escalar values.")}),(0,n.jsx)(v,{name:"ceil",description:(0,s.t)("expression.math.description-ceil","Rounds the number up to the nearest integer value. It's able to operate on series or escalar values.")}),(0,n.jsx)(v,{name:"floor",description:(0,s.t)("expression.math.description-floor","Rounds the number down to the nearest integer value. It's able to operate on series or escalar values.")})]})]}),title:(0,n.jsxs)(i.B,{gap:1,direction:"row",children:[(0,n.jsx)(l.I,{name:"book-open"})," ",(0,n.jsx)(s.x6,{i18nKey:"expressions.math.tooltip-title",children:"Math operator"})]}),footer:(0,n.jsx)("div",{children:(0,n.jsxs)(s.x6,{i18nKey:"expressions.math.tooltip-footer",children:["See our additional documentation on"," ",(0,n.jsx)(c.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",children:"Math expressions"}),"."]})}),closeButton:!0,placement:"bottom-start",children:(0,n.jsxs)("div",{className:C.info,children:[(0,n.jsx)(s.x6,{i18nKey:"expressions.math.tooltip-trigger",children:"Expression"})," ",(0,n.jsx)(l.I,{name:"info-circle"})]})})}),labelWidth:y,grow:!0,shrink:!0,children:(0,n.jsx)(f.f,{value:x.expression,onChange:D,rows:1,placeholder:u,onBlur:P,style:{minWidth:250,lineHeight:"26px",minHeight:32}})})})},v=({name:y,description:d})=>{const x=(0,g.of)(m);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:x.name,children:y}),(0,n.jsx)("span",{className:x.description,children:d})]})},p=y=>({documentationHeader:(0,a.css)({fontSize:y.typography.h5.fontSize,fontWeight:y.typography.h5.fontWeight}),documentationContainer:(0,a.css)({display:"flex",flex:1,flexDirection:"column",gap:y.spacing(2),padding:y.spacing(1,2)}),documentationFunctions:(0,a.css)({display:"grid",gridTemplateColumns:"max-content auto",columnGap:y.spacing(2)}),info:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer",gap:y.spacing(1)})}),m=y=>({name:(0,a.css)({fontWeight:y.typography.fontWeightBold}),description:(0,a.css)({fontSize:y.typography.bodySmall.fontSize,color:y.colors.text.disabled})})},18387:(ne,A,e)=>{"use strict";e.d(A,{j:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(51898),r=e(92745),c=e(45861),i=e(66404),o=e(79233),h=e(97095),f=e(63142);const g=({options:E})=>{const[v,p]=(0,s.useState)(20),[m,y]=(0,s.useState)([]),d=(0,s.useCallback)(b=>{b.preventDefault(),p(v+20)},[v,p]),x=(0,f.of)(u);return(0,s.useEffect)(()=>y(E.slice(0,v)),[v,E]),m.length?(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"},children:[(0,n.jsx)(i.E,{variant:"bodySmall",weight:"medium",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.variable-values-preview.preview-of-values",children:"Preview of values"})}),(0,n.jsx)(h.C,{children:m.map((b,D)=>(0,n.jsx)(h.C,{className:x.optionContainer,children:(0,n.jsx)(o.c,{"data-testid":l.Tp.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption,children:(0,n.jsx)("div",{className:x.label,children:b.label})})},`${b.value}-${D}`))}),E.length>v&&(0,n.jsx)(h.C,{className:x.optionContainer,children:(0,n.jsx)(c.$n,{onClick:d,variant:"secondary",size:"sm",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.variable-values-preview.show-more",children:"Show more"})})})]}):null};g.displayName="VariableValuesPreview";function u(E){return{wrapper:(0,a.css)({display:"flex",flexDirection:"column",marginTop:E.spacing(2)}),optionContainer:(0,a.css)({marginLeft:E.spacing(.5),marginBottom:E.spacing(.5)}),label:(0,a.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}},18404:(ne,A,e)=>{"use strict";e.d(A,{W:()=>s,a:()=>a});var n=e(98970);function a(r){const c=(0,n.u$)(r);return{loading:c.isLoading,folder:c.data}}function s({title:r,parents:c}){return c&&c?.length?[...c.map(i=>i.title),r].map(l).join("/"):l(r)}function l(r){return r.replaceAll("/","\\/")}},18548:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>O,Bs:()=>g,C_:()=>p,E1:()=>i,Gc:()=>h,IJ:()=>d,Ks:()=>x,QZ:()=>D,TN:()=>c,Tk:()=>m,UP:()=>P,eB:()=>E,f$:()=>f,gZ:()=>o,jz:()=>r,lg:()=>C,qR:()=>b,rb:()=>v});var n=e(65307),a=e(78479),s=e(92745);const l={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:a.R.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},r=(0,n.VP)("dataSources/dataSourceLoaded"),c=(0,n.VP)("dataSources/dataSourcesLoad"),i=(0,n.VP)("dataSources/dataSourcesLoaded"),o=(0,n.VP)("dataSources/dataSourceMetaLoaded"),h=(0,n.VP)("dataSources/dataSourcePluginsLoad"),f=(0,n.VP)("dataSources/dataSourcePluginsLoaded"),g=(0,n.VP)("dataSources/setDataSourcesSearchQuery"),u=(0,n.VP)("dataSources/setDataSourcesLayoutMode"),E=(0,n.VP)("dataSources/setDataSourceTypeSearchQuery"),v=(0,n.VP)("dataSources/setDataSourceName"),p=(0,n.VP)("dataSources/setIsDefault"),m=(0,n.VP)("dataSources/setIsSortAscending"),y=(S=l,B)=>c.match(B)?{...S,isLoadingDataSources:!0}:i.match(B)?{...S,isLoadingDataSources:!1,dataSources:B.payload,dataSourcesCount:B.payload.length}:r.match(B)?{...S,dataSource:B.payload}:g.match(B)?{...S,searchQuery:B.payload}:u.match(B)?{...S,layoutMode:B.payload}:h.match(B)?{...S,plugins:[],isLoadingDataSourcePlugins:!0}:f.match(B)?{...S,plugins:B.payload.plugins,categories:B.payload.categories,isLoadingDataSourcePlugins:!1}:E.match(B)?{...S,dataSourceTypeSearchQuery:B.payload}:o.match(B)?{...S,dataSourceMeta:B.payload}:v.match(B)?{...S,dataSource:{...S.dataSource,name:B.payload}}:p.match(B)?{...S,dataSource:{...S.dataSource,isDefault:B.payload}}:m.match(B)?{...S,isSortAscending:B.payload}:S,d={testingStatus:{},loadError:null,loading:!0,plugin:null},x=(0,n.VP)("dataSourceSettings/initDataSourceSettingsSucceeded"),b=(0,n.VP)("dataSourceSettings/initDataSourceSettingsFailed"),D=(0,n.VP)("dataSourceSettings/testDataSourceStarting"),C=(0,n.VP)("dataSourceSettings/testDataSourceSucceeded"),P=(0,n.VP)("dataSourceSettings/testDataSourceFailed"),O={dataSources:y,dataSourceSettings:(S=d,B)=>x.match(B)?{...S,plugin:B.payload,loadError:null,loading:!1}:b.match(B)?{...S,plugin:null,loadError:B.payload.message,loading:!1}:D.match(B)?{...S,testingStatus:{message:(0,s.t)("datasources.data-source-settings-reducer.message.testing-could-couple-minutes","Testing... this could take up to a couple of minutes"),status:"info"}}:C.match(B)?{...S,testingStatus:{status:B.payload?.status,message:B.payload?.message,details:B.payload?.details}}:P.match(B)?{...S,testingStatus:{status:"error",message:B.payload?.message,details:B.payload?.details}}:S}},18552:(ne,A,e)=>{"use strict";e.d(A,{r:()=>h});var n=e(74848),a=e(16817),s=e(92745),l=e(30703),r=e(18857),c=e(99090),i=e(55860);const o=()=>(0,i.S)().getSortOptions();function h({onChange:f,value:g,placeholder:u,filter:E,getSortOptions:v,isClearable:p,disabled:m}){const y=(0,a.A)(async()=>{const x=await(v??o)();return E?x.filter(b=>E.includes(b.value)):x},[v,E]);if(y.loading)return null;const d=!!(g?.includes("desc")||g?.startsWith("-"));return(0,n.jsx)(r.l6,{width:28,onChange:f,value:y.value?.find(x=>x.value===g)??null,options:y.value,"aria-label":(0,s.t)("sort-picker.select-aria-label","Sort"),placeholder:u??`Sort (Default ${c.r4.label})`,prefix:(0,n.jsx)(l.I,{name:d?"sort-amount-down":"sort-amount-up"}),isClearable:p,disabled:m},g)}},18600:(ne,A,e)=>{"use strict";e.d(A,{W:()=>a,d:()=>n});var n=(s=>(s.ValueToText="value",s.RangeToText="range",s.RegexToText="regex",s.SpecialValue="special",s))(n||{}),a=(s=>(s.True="true",s.False="false",s.Null="null",s.NaN="nan",s.NullAndNaN="null+nan",s.Empty="empty",s))(a||{})},18607:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>n});function n(a,s,l,r){const c=[];let i=!1,o;function h(f,g=!1){if(i)return;const u=f.url?.split("?")??["",""];let E=u[0];const v=new URLSearchParams(u[1]);if(v.has("editview")&&(E+=`?editview=${v.get("editview")}`),l&&E===l.url){r||c.unshift({text:l.text,href:f.url??""}),i=!0;return}const p=E.length>0&&o===E;if(o=E,!f.hideFromBreadcrumbs&&!(g&&p)){const y=f.children?.findIndex(d=>d.active)??-1;if(y>0){const d=f.children?.[y];d&&c.unshift({text:d.text,href:d.url??""})}c.unshift({text:f.text,href:f.url??""})}f.parentItem&&h(f.parentItem)}return s&&h(s),h(a,!0),c}},18615:(ne,A,e)=>{"use strict";e.d(A,{N8:()=>D,bG:()=>x,qM:()=>b,uv:()=>d});var n=e(2543),a=e.n(n),s=e(45650),l=e(65474),r=e(62467),c=e(66847),i=e(81160),o=e(93031),h=e(69862),f=e(71030),g=e(9084),u=e(94644),E=e(28105),v=e(78282),p=e(2863),m=e(97534),y=e(9931);const d="-- Mixed --",x="mixed-",b=(P,T)=>`${x}${P}-${T||""}`;class D extends u.mA{constructor(T){super(T)}query(T){const O=T.targets.filter(K=>K.datasource?.uid!==d);if(!O.length)return(0,r.of)({data:[]});const S=(0,n.groupBy)(O,"datasource.uid"),B=[];for(const K in S)K===y.K?S[K].forEach(U=>{B.push(...this.getBatchesForQueries([U],T))}):B.push(...this.getBatchesForQueries(S[K],T));return B.length?this.batchQueries(B,T):(0,r.of)({data:[]})}getBatchesForQueries(T,O){const S=T[0].datasource,B=[],K=(0,p.w)().replace(S?.uid,O.scopedVars,(U,F)=>{if(!Array.isArray(U))return U;for(const I of U){if(I==="default")continue;const V=(0,v.l)().getInstanceSettings(I);B.push({datasource:(0,v.l)().get(I),queries:(0,n.cloneDeep)(T),scopedVars:{...O.scopedVars,[F.name]:{value:I,text:V?.name}}})}return""});return K!==""&&B.push({datasource:(0,v.l)().get(K),queries:(0,n.cloneDeep)(T),scopedVars:{...O.scopedVars}}),B}batchQueries(T,O){const S=T.filter(this.isQueryable).map((B,K)=>(0,l.H)(B.datasource).pipe((0,h.Z)(U=>{const F=(0,n.cloneDeep)(O);return F.requestId=b(K,F.requestId),F.targets=B.queries,F.scopedVars=B.scopedVars,(0,l.H)(U.query(F)).pipe((0,i.T)(I=>({...I,data:I.data||[],state:E.Gu.Loading,key:b(K,I.key)})),(0,g.$)(),(0,c.W)(I=>(I=(0,m.u)(I),I.message=`${U.name}: ${I.message}`,(0,r.of)([{data:[],state:E.Gu.Error,error:I,key:b(K,F.requestId)}]))))})));return(0,s.p)(S).pipe(C(),(0,i.T)(this.finalizeResponses),(0,o.U)())}testDatasource(){return Promise.resolve({message:"",status:""})}isQueryable(T){return T&&Array.isArray(T.queries)&&T.queries.length>0}finalizeResponses(T){const{length:O}=T;if(O===0)return T;const S=T.find(B=>B.state===E.Gu.Error);return S?T.push(S):T[O-1].state=E.Gu.Done,T}}function C(){return(0,f.T)((P,T)=>T.reduce((O,S)=>(O.push.apply(O,S),O),P),[])}},18627:(ne,A,e)=>{"use strict";e.d(A,{_:()=>m});var n=e(74848),a=e(34796),s=e.n(a),l=e(96540),r=e(55386),c=e(48588),i=e(33553),o=e(739),h=e(53568),f=e(45861),g=e(64394),u=e(36394);const E={mode:i.O.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function v(y,d,x,b){const D=x!=null,C=b===o.wV.Vertical?d:y,P=Math.min(C*.15/1.5,20),T=P*1.5,O=D?d-T:d,S=Math.min(O,y);return{showLabel:D,gaugeHeight:S,titleFontSize:P}}function p(y,d,x,b){if(d.color?.mode!==g.Y.Thresholds)return[{value:d.min??c.tw,color:x.color??g.F}];const D=d.thresholds??E,C=D.mode===i.O.Percentage,P=D.steps;let T=d.min??c.tw,O=d.max??c.d1;C&&(T=0,O=100);const S=(0,u.yQ)(T,P),B=(0,u.yQ)(O,P),K=[{value:+T.toFixed(y),color:b.visualization.getColorByName(S.color)}];let U=!0;for(let F=0;F<P.length;F++){const I=P[F];if(U){S===I&&(U=!1);continue}const V=P[F-1];if(K.push({value:I.value,color:b.visualization.getColorByName(V.color)}),I===B)break}return K.push({value:+O.toFixed(y),color:b.visualization.getColorByName(B.color)}),K}class m extends l.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:d,value:x,height:b,onClick:D,text:C,theme:P,orientation:T}=this.props,O=v(d,b,x.title,T),S=T===o.wV.Vertical?`${O.gaugeHeight}px`:"100%",B=(0,n.jsx)("div",{style:{height:`${O.gaugeHeight}px`,width:S},ref:K=>this.canvasElement=K});return(0,n.jsxs)(n.Fragment,{children:[D?(0,n.jsx)("button",{className:(0,f.my)(P),type:"button",onClick:D,children:B}):B,O.showLabel&&(0,n.jsx)("div",{style:{textAlign:"center",fontSize:C?.titleSize??O.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:S,top:"-4px",cursor:"default"},children:x.title})]})}}static{this.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:E}}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:d,showThresholdLabels:x,showThresholdMarkers:b,width:D,height:C,theme:P,value:T,orientation:O}=this.props,S=v(D,C,T.title),B=O===o.wV.Vertical?S.gaugeHeight:D,K=Math.min(B,S.gaugeHeight),U=P.colors.background.secondary,F=x?1.5:1,I=Math.min(K/5.5,40)/F,V=I/5,M=(0,r.cN)(T),N=Math.min(B,K*1.3)*.9-((I+(b?V:0)+(x?10:0))*2+10),W=this.props.text?.valueSize??(0,h.Vr)(M,N,K,1,I*1.7),R=Math.max(W/2.5,12);let G=d.min??c.tw,w=d.max??c.d1,_=T.numeric;d.thresholds?.mode===i.O.Percentage&&(G=0,w=100,T.percent===void 0?_=(_-G)/(w-G)*100:_=T.percent*100);const Q=d.decimals===void 0?2:d.decimals;b&&(G=+G.toFixed(Q),w=+w.toFixed(Q));const ae={series:{gauges:{gauge:{min:G,max:w,neutralValue:d.custom?.neutral,background:{color:U},border:{color:null},shadow:{show:!1},width:I},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:p(Q,d,T,P),label:{show:x,margin:V+1,font:{size:R}},show:b,width:V},value:{color:T.color,formatter:()=>M,font:{size:W,family:P.typography.fontFamily}},show:!0}}},q={data:[[0,_]],label:T.title};try{this.canvasElement&&s().plot(this.canvasElement,[q],ae)}catch(k){console.error("Gauge rendering error",k,ae,T)}}render(){return(0,n.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className,children:this.renderVisualization()})}}},18667:(ne,A,e)=>{"use strict";e.d(A,{K:()=>o});var n=e(2543),a=e.n(n),s=e(96540),l=e(64423),r=e(99165),c=e(57852),i=e(32899);const o=({config:h,eventBus:f,frame:g})=>{const u=(0,s.useRef)(g);return u.current=g,(0,s.useLayoutEffect)(()=>{let E=null;const v={point:{time:null},data:u.current};h.addHook("init",C=>{E=C});let p=null;h.addHook("setSeries",(C,P)=>{p=P}),h.addHook("setLegend",()=>{if(!(E.cursor.event==null)){let P=E.cursor.idxs.find(T=>T!=null);if(P==null)D();else{let T=P,O=p,S=E.data[0]??E.data[1][0];v.point.time=S[T],v.rowIndex=T??void 0,v.columnIndex=O??void 0,v.data=u.current;let B=E.cursor.top;v.point.panelRelY=B===0?.001:B>0?B/E.rect.height:1,b()}}});function m(C){const P=C.payload?.point?.time;if(P){const T=E.valToPos(P,"x");E.setCursor({left:T,top:E.rect.height/2})}}const y=new l.yU,d=new c.b_(v).setTags(["uplot"]),x=new c.ql().setTags(["uplot"]);let b=(0,n.throttle)(()=>{f.publish(d)},100),D=(0,n.throttle)(()=>{f.publish(x)},100);return y.add(f.getStream(c.b_).subscribe({next:C=>{f===C.origin||C.tags?.has("uplot")||m(C)}})),y.add(f.getStream(i.kb).subscribe({next:C=>m(C)})),y.add(f.getStream(c.ql).pipe((0,r.c)(50)).subscribe({next:C=>{f===C.origin||C.tags?.has("uplot")||E.cursor._lock||E.setCursor({left:-10,top:-10})}})),()=>{y.unsubscribe()}},[h]),null}},18700:(ne,A,e)=>{"use strict";e.d(A,{p:()=>c,k:()=>i});var n=e(2543),a=e(95004),s=e(41119);function l(o,h){return h.type||(h.name==="time"||h.name==="Time"?h.type=a.PU.time:h.type=(0,s.HW)(o)),h.type===a.PU.number?f=>parseFloat(f):h.type===a.PU.boolean?f=>!(f[0]==="F"||f[0]==="f"||f[0]==="0"):f=>f}var r=e(96453);const c=void 0;class i extends r.F{constructor(h,f){if(super(),this.fields=[],this.first=[],this.parsers=void 0,this.creator=f||(g=>g??[]),h){const{name:g,refId:u,meta:E,fields:v}=h;if(g&&(this.name=g),u&&(this.refId=u),E&&(this.meta=E),v)for(const p of v)this.addField(p)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(h,f){return this.addField({name:f||"",type:(0,s.HW)(h)})}addField(h,f){let g;h.values&&(g=h.values);let u=h.type;!u&&(h.name==="time"||h.name==="Time")?u=a.PU.time:(!u&&g&&g.length&&(u=(0,s.HW)(g[0])),u||(u=a.PU.other));let E=h.name;E||(E=`Field ${this.fields.length+1}`);const v={...h,name:E,type:u,config:h.config||{},values:this.creator(g)};if(u===a.PU.other&&(u=(0,s.dF)(v),u&&(v.type=u)),this.fields.push(v),this.first=this.fields[0].values,f)for(;v.values.length<f;)v.values.push(c);else this.validate();return v}validate(){const h=this.fields.reduce((f,g)=>Math.max(f,g.values.length),0);for(const f of this.fields)for(;f.values.length!==h;)f.values.push(c)}setParser(h,f){return this.parsers||(this.parsers=new Map),this.parsers.set(h,f),f}parseValue(h,f){let g=this.parsers?.get(h);return g||(g=this.setParser(h,l(f,h))),g(f)}appendRow(h){for(let f=this.fields.length;f<h.length;f++)this.addField({name:`Field ${f+1}`,type:(0,s.HW)(h[f])});if(this.length<1)for(let f=0;f<this.fields.length;f++){const g=this.fields[f];(!g.type||g.type===a.PU.other)&&(g.type=(0,s.HW)(h[f]))}for(let f=0;f<this.fields.length;f++){const g=this.fields[f];let u=h[f];g.type!==a.PU.string&&(0,n.isString)(u)&&(u=this.parseValue(g,u)),g.values.push(u)}}push(...h){for(const f of h)this.add(f);return this.length}reverse(){for(const h of this.fields)h.values.reverse();return this}add(h){const f=h;for(const g of this.fields){let u=f[g.name];g.type!==a.PU.string&&(0,n.isString)(u)&&(u=this.parseValue(g,u)),u===void 0&&(u=c),g.values.push(u)}}set(h,f){if(h>this.length)throw new Error("Unable to set value beyond current length");const g=f||{};for(const u of this.fields)u.values[h]=g[u.name]}get(h){const f={};for(const g of this.fields)f[g.name]=g.values[h];return f}toJSON(){return(0,s.Kl)(this)}}},18771:(ne,A,e)=>{"use strict";e.d(A,{H:()=>a});var n=e(22803);const a=s=>(0,n.css)({float:"none",display:"flex",justifyContent:"flex-start",margin:s.spacing(2,0)})},18789:(ne,A,e)=>{"use strict";e.d(A,{w:()=>l});var n=e(43173),a=e(45863),s=e(36605);function l(r){if(!r.targets?.length||n.$.panels[r.type]?.skipDataQuery)return;let c;return c=new a.dt({datasource:r.datasource??void 0,queries:r.targets,maxDataPoints:r.maxDataPoints??void 0,maxDataPointsFromWidth:!0,cacheTimeout:r.cacheTimeout,queryCachingTTL:r.queryCachingTTL,minInterval:r.interval??void 0,dataLayerFilter:{panelId:r.id},$behaviors:[new s.L({})]}),new a.Es({$data:c,transformations:r.transformations||[]})}},18832:(ne,A,e)=>{"use strict";e.d(A,{C:()=>s,o:()=>l});var n=e(92745),a=e(43173);function s(r){switch(r){case"home":return(0,n.t)("nav.home.title","Home");case"home-setup-guide":return(0,n.t)("nav.setup-guide.title","Getting started guide");case"new":return(0,n.t)("nav.new.title","New");case"create":return(0,n.t)("nav.create.title","Create");case"create-dashboard":return(0,n.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,n.t)("nav.create-folder.title","Folder");case"import":return(0,n.t)("nav.create-import.title","Import dashboard");case"alert":return(0,n.t)("nav.create-alert.title","New alert rule");case"bookmarks":return(0,n.t)("nav.bookmarks.title","Bookmarks");case"bookmarks-empty":return(0,n.t)("nav.bookmarks-empty.title","Bookmark pages for them to appear here");case"starred":return(0,n.t)("nav.starred.title","Starred");case"starred-empty":return(0,n.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/playlists":return(0,n.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.title","Library panels");case"reports":return(0,n.t)("nav.reporting.title","Reporting");case"dashboards/public":return a.$.featureToggles.newDashboardSharingComponent?(0,n.t)("nav.shared-dashboard.title","Shared dashboards"):(0,n.t)("nav.public.title","Public dashboards");case"dashboards/recently-deleted":return(0,n.t)("nav.recently-deleted.title","Recently deleted");case"dashboards/new":return(0,n.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,n.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,n.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,n.t)("nav.scenes.title","Scenes");case"explore":return(0,n.t)("nav.explore.title","Explore");case"drilldown":return(0,n.t)("nav.drilldown.title","Drilldown");case"alerting":return(0,n.t)("nav.alerting.title","Alerting");case"plugin-page-grafana-oncall-app":return(0,n.t)("nav.oncall.title","OnCall");case"alerting-legacy":return(0,n.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alerting-upgrade":return(0,n.t)("nav.alerting-upgrade.title","Alerting upgrade");case"alert-home":return(0,n.t)("nav.alerting-home.title","Home");case"alert-list":return(0,n.t)("nav.alerting-list.title","Alert rules");case"alert-list-legacy":return(0,n.t)("nav.alert-list-legacy.title","Alert rules");case"receivers":return(0,n.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,n.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,n.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,n.t)("nav.alerting-silences.title","Silences");case"groups":return(0,n.t)("nav.alerting-groups.title","Active notifications");case"alerting-admin":return(0,n.t)("nav.alerting-admin.title","Settings");case"alerts/recently-deleted":return(0,n.t)("nav.alerts-recently-deleted.title","Recently deleted");case"cfg":return(0,n.t)("nav.config.title","Administration");case"cfg/general":return(0,n.t)("nav.config-general.title","General");case"cfg/plugins":return(0,n.t)("nav.config-plugins.title","Plugins and data");case"cfg/access":return(0,n.t)("nav.config-access.title","Users and access");case"datasources":return(0,n.t)("nav.datasources.title","Data sources");case"authentication":return(0,n.t)("nav.authentication.title","Authentication");case"licensing":return(0,n.t)("nav.statistics-and-licensing.title","Statistics and licensing");case"recordedQueries":return(0,n.t)("nav.recorded-queries.title","Recorded queries");case"correlations":return(0,n.t)("nav.correlations.title","Correlations");case"users":return(0,n.t)("nav.users.title","Users");case"teams":return(0,n.t)("nav.teams.title","Teams");case"plugins":return(0,n.t)("nav.plugins.title","Plugins");case"org-settings":return(0,n.t)("nav.org-settings.title","Default preferences");case"serviceaccounts":return(0,n.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,n.t)("nav.admin.title","Server admin");case"support-bundles":return(0,n.t)("nav.support-bundles.title","Support bundles");case"global-users":return(0,n.t)("nav.global-users.title","Users");case"global-orgs":return(0,n.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,n.t)("nav.server-settings.title","Settings");case"storage":return(0,n.t)("nav.storage.title","Storage");case"migrate-to-cloud":return(0,n.t)("nav.migrate-to-cloud.title","Migrate to Grafana Cloud");case"upgrading":return(0,n.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,n.t)("nav.monitoring.title","Observability");case"infrastructure":return(0,n.t)("nav.infrastructure.title","Infrastructure");case"frontend":return(0,n.t)("nav.frontend.title","Frontend");case"apps":return(0,n.t)("nav.apps.title","More apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"testing-and-synthetics":return(0,n.t)("nav.testing-and-synthetics.title","Testing & synthetics");case"plugin-page-grafana-incident-app":return(0,n.t)("nav.incidents.title","Incident");case"plugin-page-grafana-ml-app":return(0,n.t)("nav.machine-learning.title","AI & machine learning");case"plugin-page-grafana-slo-app":return(0,n.t)("nav.slo.title","SLO");case"plugin-page-k6-app":return(0,n.t)("nav.k6.title","Performance");case"plugin-page-grafana-k8s-app":return(0,n.t)("nav.kubernetes.title","Kubernetes");case"plugin-page-grafana-dbo11y-app":return(0,n.t)("nav.databases.title","Databases");case"plugin-page-grafana-app-observability-app":return(0,n.t)("nav.application.title","Application");case"plugin-page-grafana-pyroscope-app":return(0,n.t)("nav.profiles.title","Profiles");case"plugin-page-grafana-kowalski-app":return(0,n.t)("nav.frontend-app.title","Frontend");case"plugin-page-grafana-synthetic-monitoring-app":return(0,n.t)("nav.synthetics.title","Synthetics");case"help":return(0,n.t)("nav.help.title","Help");case"profile/settings":return(0,n.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,n.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,n.t)("nav.profile/password.title","Change password");case"sign-out":return(0,n.t)("nav.sign-out.title","Sign out");case"search":return(0,n.t)("nav.search-dashboards.title","Search dashboards");case"connections":return(0,n.t)("nav.connections.title","Connections");case"connections-add-new-connection":return(0,n.t)("nav.add-new-connections.title","Add new connection");case"standalone-plugin-page-/connections/collector":return(0,n.t)("nav.collector.title","Collector");case"connections-datasources":return(0,n.t)("nav.data-sources.title","Data sources");case"standalone-plugin-page-/connections/infrastructure":return(0,n.t)("nav.integrations.title","Integrations");case"standalone-plugin-page-/connections/connect-data":return(0,n.t)("nav.connect-data.title","Connect data");case"standalone-plugin-page-/connections/private-data-source-connections":return(0,n.t)("nav.private-data-source-connections.title","Private data source connect");case"plugin-page-grafana-detect-app":return(0,n.t)("nav.detect.title","Detect");case"plugin-page-grafana-quaderno-app":return(0,n.t)("nav.grafana-quaderno.title","Grafana Quaderno");default:return}}function l(r){switch(r){case"dashboards":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"manage-folder":return(0,n.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,n.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards and panels");case"dashboards/public":return a.$.featureToggles.newDashboardSharingComponent?(0,n.t)("nav.shared-dashboard.subtitle","Manage your organization's externally shared dashboards"):void 0;case"dashboards/library-panels":return(0,n.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"dashboards/recently-deleted":return(0,n.t)("nav.recently-deleted.subtitle","Any items listed here for more than 30 days will be automatically deleted.");case"alerting":return(0,n.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alerting-upgrade":return(0,n.t)("nav.alerting-upgrade.subtitle","Upgrade your existing legacy alerts and notification channels to the new Grafana Alerting");case"alerting-admin":return(0,n.t)("nav.alerting-admin.subtitle","Manage Alertmanager configurations and enable receiving Grafana-managed alerts");case"alert-list":return(0,n.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,n.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,n.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,n.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,n.t)("nav.alerting-groups.subtitle","See grouped alerts with active notifications");case"alerts/recently-deleted":return(0,n.t)("nav.alerts-recently-deleted.subtitle","See recently deleted alert rules");case"datasources":return(0,n.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,n.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,n.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,n.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,n.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,n.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"serviceaccounts":return(0,n.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"groupsync":return(0,n.t)("nav.groupsync.subtitle","Manage mappings of Identity Provider groups to Grafana Roles");case"global-users":return(0,n.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,n.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,n.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,n.t)("nav.storage.subtitle","Manage file storage");case"migrate-to-cloud":return(0,n.t)("nav.migrate-to-cloud.subtitle","Copy resources from your self-managed installation to a cloud stack");case"support-bundles":return(0,n.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return(0,n.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses");case"cfg/general":return(0,n.t)("nav.config-general.subtitle","Manage default preferences and settings across Grafana");case"cfg/plugins":return(0,n.t)("nav.config-plugins.subtitle","Install plugins and define the relationships between data");case"cfg/access":return(0,n.t)("nav.config-access.subtitle","Configure access for individual users, teams, and service accounts");case"apps":return(0,n.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,n.t)("nav.monitoring.subtitle","Out-of-the-box observability solutions");case"infrastructure":return(0,n.t)("nav.infrastructure.subtitle","Understand your infrastructure's health");case"frontend":return(0,n.t)("nav.frontend.subtitle","Gain real user monitoring insights");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");case"testing-and-synthetics":return(0,n.t)("nav.testing-and-synthetics.subtitle","Optimize performance with k6 and Synthetic Monitoring insights");case"connections-add-new-connection":return(0,n.t)("nav.connections.subtitle","Browse and create new connections");case"connections-datasources":return(0,n.t)("nav.data-sources.subtitle","View and manage your connected data source connections");case"connections-private-data-source-connections":return(0,n.t)("nav.private-data-source-connections.subtitle","Query data that lives within a secured network without opening the network to inbound traffic from Grafana Cloud. Learn more in our docs.");case"plugin-page-grafana-ml-app":return(0,n.t)("nav.machine-learning.subtitle","Explore AI and machine learning features");default:return}}},18984:(ne,A,e)=>{"use strict";e.d(A,{GM:()=>h,aV:()=>o,qY:()=>i});var n=e(75505),a=e(88673),s=e(43173),l=e(16310),r=e(8095),c=e(55860);async function i(f){let g=0;if(!f?.length)return[];const u=[];for(const p of f){const m={query:"*",kind:["dashboard"],limit:1e3};switch(p.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":m.uid=[p.value];break;case"dashboard_by_tag":m.tags=[p.value];break}u.push({refId:`${g++}`,queryType:r.nj.Search,search:m})}if(!s.$.featureToggles.panelTitleSearch){const p=(0,c.S)(),m=[];for(let y=0;y<u.length;y++){const d=(await p.search(u[y].search)).view;m.push({...f[y],dashboards:d.map(x=>({...x}))})}return m}const E=await(0,l.o)(),v=await(0,n.s)(E.query({targets:u}));if(v.data.length!==f.length)throw new Error("unexpected result size");return f.map((p,m)=>{const y=new a.R(v.data[m]);return{...p,dashboards:y.map(d=>({...d}))}})}function o(){return{spec:{items:[],interval:"5m",title:""},metadata:{name:""},status:{}}}function h(f,g){return g?.length?(g=g.toLowerCase(),f.filter(u=>u.spec?.title.toLowerCase().includes(g))):f}},19050:(ne,A,e)=>{"use strict";e.d(A,{_0:()=>Fe,He:()=>$t,hS:()=>Be,bO:()=>Ze,IL:()=>xn,rR:()=>xe,y2:()=>qe,Az:()=>pn,PD:()=>at,JQ:()=>kn,S6:()=>Pt,Od:()=>mt,GI:()=>st,q9:()=>Pe,h1:()=>Me,qk:()=>me,Rk:()=>en,h9:()=>de,TO:()=>_n});var n=e(65307),a=e(32017),s=e.n(a),l=e(2543),r=e(49510),c=e(62467),i=e(58307),o=e(69862),h=e(99165),f=e(28105),g=e(46933),u=e(25229),E=e(67770),v=e(94644),p=e(76732),m=e(39443),y=e(95004);function d(pt,Rt){const Mt=x({data:pt.series},{data:Rt.series}).data;return{...pt,series:Mt}}function x(pt,Rt){if(!pt)return T(Rt);Rt.data.forEach(Yt=>{const Qt=pt.data.find(En=>S(En,Yt));if(!Qt){pt.data.push(O(Yt));return}b(Qt,Yt)});const Mt=[...pt.errors??[],...Rt.errors??[]];Mt.length>0&&(pt.errors=Mt);const Bt=pt.error??Rt.error;Bt!=null&&(pt.error=Bt);const Nt=[...pt.traceIds??[],...Rt.traceIds??[]];return Nt.length>0&&(pt.traceIds=Nt),pt}function b(pt,Rt){const Mt=Math.max(pt.fields.length,Rt.fields.length);for(let Bt=0;Bt<Mt;Bt++){if(!pt.fields[Bt])continue;const Nt=D(pt.fields[Bt],Rt.fields,Bt);if(Nt&&(pt.fields[Bt].values=[].concat.apply(Nt.values,pt.fields[Bt].values),Nt.nanos)){const Yt=pt.fields[Bt].nanos?.slice()||[];pt.fields[Bt].nanos=Rt.fields[Bt].nanos?.concat(Yt)}}pt.length+=Rt.length,pt.meta={...pt.meta,stats:P(pt.meta?.stats??[],Rt.meta?.stats??[])}}function D(pt,Rt,Mt){const Bt=Rt.filter(Nt=>Nt.name===pt.name);return Bt.length===1?Bt[0]:pt.labels?Bt.find(Nt=>(0,p.ab)(pt.labels??{},Nt.labels??{})):Rt[Mt]}const C="Summary: total bytes processed";function P(pt,Rt){const Mt=pt.find(Yt=>Yt.displayName===C),Bt=Rt.find(Yt=>Yt.displayName===C);if(Bt!=null&&Mt!=null)return[{value:Bt.value+Mt.value,displayName:C,unit:Mt.unit}];const Nt=Bt??Mt;return Nt!=null?[Nt]:[]}function T(pt){return{...pt,data:pt.data.map(O)}}function O(pt){return{...pt,fields:pt.fields.map(Rt=>({...Rt,values:Rt.values}))}}function S(pt,Rt){if(pt.refId!==Rt.refId||pt.name!==Rt.name)return!1;const Mt=pt.meta?.type,Bt=Rt.meta?.type;if(Mt!==Bt)return!1;if(Mt===m.m.TimeSeriesMulti){const Qt=pt.fields.find(vn=>vn.type===y.PU.number),En=Rt.fields.find(vn=>vn.type===y.PU.number);return Qt===void 0||En===void 0?!1:(0,p.ab)(Qt.labels??{},En.labels??{})}const Nt=pt.meta?.custom?.frameType,Yt=Rt.meta?.custom?.frameType;return Nt==="LabeledTimeValues"&&Yt==="LabeledTimeValues"?!0:Nt===Yt}var B=e(78282),K=e(43173),U=e(62635),F=e(23237),I=e(6219),V=e(28998),M=e(34984),L=e(12282),N=e(18615),W=e(52763),R=e(6890),G=e(64762),w=e(71393),_=e(81160),Q=e(11576),ae=e(79609),q=e(52645),k=e(41119),ee=e(37234),j=e(74746),J=e(92391);const Z=pt=>{const Rt=[],Mt=[],Bt=[],Nt=[],Yt=[],Qt=[],En=[],vn=[];for(const Sn of pt.series){if(le(Sn)){vn.push(Sn);continue}switch(Sn.meta?.preferredVisualisationType){case"logs":Nt.push(Sn);break;case"graph":Rt.push(Sn);break;case"trace":Yt.push(Sn);break;case"table":Mt.push(Sn);break;case"rawPrometheus":Bt.push(Sn);break;case"nodeGraph":Qt.push(Sn);break;case"flamegraph":En.push(Sn);break;default:X(Sn)&&Rt.push(Sn),Mt.push(Sn)}}return{...pt,graphFrames:Rt,tableFrames:Mt,logsFrames:Nt,traceFrames:Yt,nodeGraphFrames:Qt,customFrames:vn,flameGraphFrames:En,rawPrometheusFrames:Bt,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},te=({showCorrelationEditorLinks:pt,queries:Rt,correlations:Mt,defaultTargetDatasource:Bt})=>Nt=>{if(pt&&Bt)for(const Yt of Nt.series)for(const Qt of Yt.fields){Qt.config.links=[],Qt.display=Qt.display||(0,Q.H)();const En={};Yt.fields.map(vn=>{En[`${vn.name}`]=`\${__data.fields.['${vn.name}']}`}),Qt.config.links.push({url:"",origin:ae.x0.ExploreCorrelationsEditor,title:`Correlate with ${Qt.name}`,internal:{datasourceUid:Bt.uid,datasourceName:Bt.name,query:{datasource:{uid:Bt.uid}}},meta:{correlationData:{resultField:Qt.name,vars:En,origVars:En}}})}else if(Rt?.length&&Mt?.length){const Yt=(0,l.mapValues)((0,l.groupBy)(Rt,"refId"),"0.datasource.uid");(0,I.cA)(Nt.series,Mt,Yt)}return Nt},se=pt=>pt.graphFrames.length?{...pt,graphResult:pt.graphFrames}:{...pt,graphResult:null},ie=pt=>{if(pt.tableFrames.length===0)return(0,c.of)({...pt,tableResult:null});pt.tableFrames.sort((Nt,Yt)=>{const Qt=Nt.refId,En=Yt.refId;return Qt>En?1:Qt<En?-1:0});const Rt=pt.tableFrames.every(Nt=>X(Nt)),Mt={interpolate:Nt=>Nt};return(Rt?(0,c.of)(pt.tableFrames).pipe(q.c.joinByFieldTransformer.operator({},Mt)):(0,c.of)(pt.tableFrames).pipe(q.c.mergeTransformer.operator({},Mt))).pipe((0,_.T)(Nt=>{for(const Yt of Nt)for(const Qt of Yt.fields)Qt.display=Qt.display??(0,Q.J)({field:Qt,theme:K.$.theme2,timeZone:pt.request?.timezone??"browser"});return{...pt,tableResult:Nt}}))},ce=pt=>{const Rt=pt.rawPrometheusFrames;if(!Rt||Rt.length===0)return(0,c.of)({...pt,tableResult:null});Rt.sort((Yt,Qt)=>{const En=Yt.refId,vn=Qt.refId;return En>vn?1:En<vn?-1:0});const Mt=Rt.every(Yt=>X(Yt)),Bt={interpolate:Yt=>Yt};return(Mt?(0,c.of)(Rt).pipe(q.c.joinByFieldTransformer.operator({},Bt)):(0,c.of)(Rt).pipe(q.c.mergeTransformer.operator({},Bt))).pipe((0,_.T)(Yt=>{const Qt=Yt[0];for(const En of Qt.fields)En.display=En.display??(0,Q.J)({field:En,theme:K.$.theme2,timeZone:pt.request?.timezone??"browser"});return{...pt,rawPrometheusResult:Qt}}))},re=(pt={})=>Rt=>{if(Rt.logsFrames.length===0)return{...Rt,logsResult:null};const Mt=Rt.request?.intervalMs,Bt=(0,ee.HT)(Rt.logsFrames,Mt,pt.absoluteRange,pt.queries,pt.deduplicate),Nt=(0,U.uE)(pt.refreshInterval),Yt=(0,j.zy)(Bt,Nt),Qt=Yt.rows,En=Yt.series,vn={...Yt,rows:Qt,series:En};return{...Rt,logsResult:vn}};function ue(pt,Rt,Mt,Bt,Nt,Yt,Qt){return(0,c.of)(pt).pipe((0,_.T)(En=>(0,k.N$)(En,Rt)),(0,_.T)(te({defaultTargetDatasource:Qt,showCorrelationEditorLinks:Yt,queries:Bt,correlations:Nt})),(0,_.T)(Z),(0,_.T)(se),(0,_.T)(Mt),(0,o.Z)(ce),(0,o.Z)(ie))}function X(pt){const Rt=(0,l.groupBy)(pt.fields,Mt=>Mt.type);return!!(Object.keys(Rt).length===2&&Rt[y.PU.time]?.length===1&&Rt[y.PU.number])}function le(pt){return pt.meta?.preferredVisualisationPluginId?(0,J.oZ)(pt.meta?.preferredVisualisationPluginId):!1}var he=e(10951),fe=e(80763),Ce=e(51845),Ae=e(11280),_e=e(35231),Xe=e(94543),De=e(83953);const Me=pt=>Rt=>{const Mt=Rt.explore.panes[pt];return Mt&&Mt.queryResponse?Mt.queryResponse.state===f.Gu.Loading||Mt.queryResponse.state===f.Gu.Streaming:!1},Te=(0,n.VP)("explore/addQueryRow"),$e=(0,n.VP)("explore/changeQueries"),Re=(0,n.VP)("explore/cancelQueries"),Ke=(0,n.VP)("explore/queriesImported"),Ve=(0,n.VP)("explore/queryStoreSubscription"),Se=(0,n.VP)("explore/setSupplementaryQueryEnabledAction"),Ye=(0,n.VP)("explore/storeSupplementaryQueryDataProviderAction"),Ue=(0,n.VP)("explore/cleanSupplementaryQueryDataProviderAction"),je=(0,n.VP)("explore/cleanSupplementaryQueryAction"),Qe=(0,n.VP)("explore/storeSupplementaryQueryDataSubscriptionAction"),He=(0,n.VP)("explore/updateSupplementaryQueryDataAction"),Je=(0,n.VP)("explore/queryStreamUpdated"),de=(0,n.VP)("explore/setQueries"),ve=(0,n.VP)("changeLoadingState"),me=(0,n.VP)("explore/setPausedState"),xe=(0,n.VP)("explore/clearLogs"),Ee=(0,n.VP)("explore/scanStart"),Pe=(0,n.VP)("explore/scanStop"),Oe=(0,n.VP)("explore/addResultsToCache"),We=(0,n.VP)("explore/clearCache");function Fe(pt,Rt){return async(Mt,Bt)=>{const Nt=Bt().explore.panes[pt];let Yt;Nt.datasourceInstance?.meta.mixed?Yt=(0,l.findLast)(Nt.queries,En=>!!En.datasource)?.datasource||void 0:Yt=Nt.datasourceInstance?.getRef();const Qt=await(0,U.Ll)(Nt.queries,Rt,Yt);Mt(Te({exploreId:pt,index:Rt,query:Qt}))}}function Be(pt){return(Rt,Mt)=>{Rt(Pe({exploreId:pt})),Rt(Re({exploreId:pt}));const Bt=Mt().explore.panes[pt].supplementaryQueries;for(const Nt of he.VW)Rt(Ue({exploreId:pt,type:Nt})),Bt[Nt]?.data?.state!==f.Gu.Done&&Rt(je({exploreId:pt,type:Nt}))}}const Le=(pt,Rt)=>{const Mt=pt.getRef();return Rt.map(Bt=>({...Bt,datasource:Mt}))},Ge=async(pt,Rt,Mt)=>{let Bt=[];if(Rt.meta?.id===pt.meta?.id)Bt=Mt;else if((0,g.Ee)(Rt)&&(0,g.FL)(pt)){const Nt=await Rt.exportToAbstractQueries(Mt);Bt=await pt.importFromAbstractQueries(Nt)}else pt.importQueries&&(Bt=await pt.importQueries(Mt,Rt));return Le(pt,Bt)},Ze=(0,W.zD)("explore/changeQueries",async({queries:pt,exploreId:Rt,options:Mt},{getState:Bt,dispatch:Nt})=>{let Yt=!1;const Qt=Bt().explore.panes[Rt].queries,En=Bt().explore.panes[Rt].datasourceInstance?.uid,vn=Bt().explore.correlationEditorDetails,Sn=vn?.editorMode||!1;!(Object.keys(Bt().explore.panes)[0]===Rt)&&Sn&&!vn?.queryEditorDirty&&Nt((0,_e.am)({queryEditorDirty:!0}));for(const wn of pt)for(const Ln of Qt){if(wn.refId===Ln.refId&&wn.datasource?.type!==Ln.datasource?.type&&!Mt?.skipAutoImport){const Zn=await(0,B.l)().get(Ln.datasource),da=await(0,B.l)().get({uid:wn.datasource?.uid});await Nt(qe(Rt,Qt,Zn,da,wn.refId)),Yt=!0}if(En===N.uv&&wn.refId===Ln.refId&&wn.datasource?.uid!==Ln.datasource?.uid){const Zn=(0,De.dq)(N.uv,pt),da=await(0,I.J6)(Zn);Nt((0,Ce.Fb)({exploreId:Rt,correlations:da.correlations||[]}))}}Yt||Nt($e({queries:pt,exploreId:Rt})),pt.length<Qt.length&&Nt(mt({exploreId:Rt}))}),qe=(pt,Rt,Mt,Bt,Nt)=>async Yt=>{if(!Mt){Yt(Ke({exploreId:pt,queries:Rt}));return}let Qt=Rt;if(Bt.uid===N.uv)Qt=Rt.map(vn=>({...vn,datasource:Mt.getRef()}));else if(Mt.uid===N.uv){const vn=(0,l.groupBy)(Rt,mn=>mn.datasource?.uid),Sn=await Promise.all(Object.keys(vn).map(async mn=>{const wn=await(0,B.l)().get({uid:mn});return await Ge(Bt,wn,vn[mn])}));Qt=(0,l.flatten)(Sn.filter(mn=>mn.length>0))}else{let vn=Rt;if(Nt!==void 0){const Sn=Rt.find(mn=>mn.refId===Nt);Sn&&(vn=[Sn])}Qt=await Ge(Bt,Mt,vn)}let En=await(0,U.di)(Qt,Bt.getRef());if(Nt!==void 0){Qt.length===0&&(Qt=[await(0,U.Ll)([],void 0,Bt.getRef())]);const vn=Rt.findIndex(mn=>mn.refId===Nt),Sn={...En[0],refId:Rt[vn].refId};En=[...Rt],En[vn]=Sn}return Yt(Ke({exploreId:pt,queries:En})),En};function at(pt,Rt,Mt){return async(Bt,Nt)=>{const Yt=Nt().explore.panes[pt],{queries:Qt}=Yt,vn=(await Promise.all(Qt.map(Sn=>Mt({...Sn},Rt)))).map((Sn,mn)=>(0,U.eF)(Sn,Qt,mn));Bt(de({exploreId:pt,queries:vn})),Rt.preventSubmit||Bt(mt({exploreId:pt}))}}function ht(pt,Rt){if(!(pt.filterQuery&&!pt.filterQuery(Rt)))return Rt}async function Et(pt,Rt,Mt,Bt){const Yt=(await Promise.all(Bt.map(async Qt=>{if(Qt.datasource?.uid===Mt.uid)return ht(Mt,Qt);{const En=await(0,V.tR)().get(Qt.datasource);return ht(En,Qt)}}))).filter(Qt=>!!Qt);Yt.length>0&&(pt((0,Ae.ri)(!0,Mt.uid,Mt.name,Yt,K.$.queryHistoryEnabled)),K.$.queryHistoryEnabled&&pt((0,Ae.ri)(!1,Mt.uid,Mt.name,Yt,!1)),await pt((0,Ae.jX)()))}const mt=(0,W.zD)("explore/runQueries",async({exploreId:pt,preserveCache:Rt},{dispatch:Mt,getState:Bt})=>{Bt().explore?.panes[pt]?.scanning||Mt(Be(pt));const{defaultCorrelationEditorDatasource:Nt,scopedVars:Yt,showCorrelationEditorLinks:Qt}=await(0,De.aj)(Bt(),pt),En=(0,fe.M)(pt);Mt((0,Xe.JA)({exploreId:pt})),Rt!==!0&&Mt(xn(pt));const Sn=Bt().explore.panes[pt],{datasourceInstance:mn,containerWidth:wn,isLive:Ln,range:Zn,scanning:da,queryResponse:Pa,querySubscription:Xn,refreshInterval:Oa,absoluteRange:ba,cache:oa,supplementaryQueries:Na}=Sn;let ya,Dt;const wt=Sn.queries.map(cn=>({...cn,datasource:cn.datasource||mn?.getRef()}));mn!=null&&Et(Mt,Bt().explore,mn,wt);const Zt=(0,De.rk)(oa,ba);if(Zt)ya=(0,r.z)([(0,c.of)(Zt),En]).pipe((0,o.Z)(([cn,nn])=>ue(cn,Pa,re({absoluteRange:ba,refreshInterval:Oa,queries:wt}),wt,nn,Qt,Nt))),Dt=ya.subscribe(cn=>{Mt(Je({exploreId:pt,response:cn}))});else{if(!(0,U.zT)(wt)||!mn)return;const cn=mn?.interval;(0,U._u)(Xn);const nn={minInterval:cn,maxDataPoints:wn,liveStreaming:Ln},ut=(0,M.O)(Bt().user),Ut=(0,U.bI)(pt,wt,nn,Zn,da,ut,Yt);if(Mt(ve({exploreId:pt,loadingState:f.Gu.Loading})),ya=(0,r.z)([(0,w.BN)(mn,Ut.request).pipe(Ln?(0,h.c)(500):i.D),En]).pipe((0,o.Z)(([Ot,ct])=>ue(Ot,Pa,re({absoluteRange:ba,refreshInterval:Oa,queries:wt}),wt,ct,Qt,Nt))),Dt=ya.subscribe({next(Ot){const ct=Bt().explore.panes[pt];if(Mt(Je({exploreId:pt,response:Ot})),ct.scanning)if(console.log(Ot.series),Ot.state===f.Gu.Done&&Ot.series.length===0){const gt=(0,F.Wb)(-1,ct.range);Mt((0,Xe.JA)({exploreId:pt,absoluteRange:gt})),Mt(mt({exploreId:pt}))}else(Ot.series[0]?.length>0||Ot.state===f.Gu.Done)&&Mt(Pe({exploreId:pt}))},error(Ot){Mt((0,R.dx)((0,G.gi)("Query processing error",Ot))),Mt(ve({exploreId:pt,loadingState:f.Gu.Error})),console.error(Ot)},complete(){Bt().explore.panes[pt].queryResponse.state===f.Gu.Loading&&Mt(ve({exploreId:pt,loadingState:f.Gu.Done}))}}),Ln)for(const Ot of he.VW)Mt(Ue({exploreId:pt,type:Ot})),Mt(je({exploreId:pt,type:Ot}));else Mt(Kt({exploreId:pt,datasourceInstance:mn,transaction:Ut,newQuerySource:ya,supplementaryQueries:Na,queries:wt,absoluteRange:ba}))}Mt(Ve({exploreId:pt,querySubscription:Dt}))}),Pt=(0,W.zD)("explore/runLoadMoreQueries",async({exploreId:pt,absoluteRange:Rt},{dispatch:Mt,getState:Bt})=>{Mt(Be(pt));const{datasourceInstance:Nt,containerWidth:Yt,queryResponse:Qt}=Bt().explore.panes[pt],{defaultCorrelationEditorDatasource:En,scopedVars:vn,showCorrelationEditorLinks:Sn}=await(0,De.aj)(Bt(),pt),mn=(0,fe.M)(pt);let wn;const Ln=Qt.logsResult?.queries||[],Zn=Qt.logsFrames.map(oa=>oa.refId),da=Ln.filter(oa=>Zn.includes(oa.refId)).map(oa=>({...oa,datasource:oa.datasource||Nt?.getRef(),refId:oa.refId,supportingQueryType:L.Q$.InfiniteScroll}));if(!(0,U.zT)(da)||!Nt)return;const Pa={minInterval:Nt?.interval,maxDataPoints:Yt},Xn=(0,M.O)(Bt().user),Oa=(0,U.zq)(Xn,{from:(0,u.oZ)(Xn,Rt.from),to:(0,u.oZ)(Xn,Rt.to)},(0,M.q)(Bt().user)),ba=(0,U.bI)(pt,da,Pa,Oa,!1,Xn,vn);Mt(ve({exploreId:pt,loadingState:f.Gu.Loading})),wn=(0,r.z)([(0,w.BN)(Nt,ba.request),mn]).pipe((0,o.Z)(([oa,Na])=>oa.state!==f.Gu.Done?(0,c.of)({...Qt,state:f.Gu.Loading}):ue(d(Qt,oa),Qt,re({absoluteRange:Rt,queries:Ln,deduplicate:!0}),da,Na,Sn,En))),wn.subscribe({next(oa){Mt(Je({exploreId:pt,response:oa}))},error(oa){Mt((0,R.dx)((0,G.gi)("Query processing error",oa))),Mt(ve({exploreId:pt,loadingState:f.Gu.Error})),console.error(oa)},complete(){Mt(ve({exploreId:pt,loadingState:f.Gu.Done}))}})}),rt=async(pt,Rt)=>{const Mt=pt.filter(Nt=>Nt.datasource?.uid!==N.uv),Bt=(0,l.groupBy)(Mt,"datasource.uid");return await Promise.all(Object.values(Bt).map(async Nt=>({datasource:await(0,B.l)().get(Nt[0].datasource,Rt),targets:Nt})))},Kt=(0,W.zD)("explore/handleSupplementaryQueries",async({datasourceInstance:pt,exploreId:Rt,transaction:Mt,newQuerySource:Bt,supplementaryQueries:Nt,queries:Yt,absoluteRange:Qt},{dispatch:En})=>{let vn;pt.meta.mixed?vn=await rt(Mt.request.targets,Mt.request.scopedVars):vn=[{datasource:pt,targets:Mt.request.targets}];for(const Sn of he.VW){const mn=(0,he.Pm)(vn,Sn,{...Mt.request,requestId:`${Mt.request.requestId}_${(0,l.snakeCase)(Sn)}`},Bt);mn?(En(Ye({exploreId:Rt,type:Sn,dataProvider:mn})),Gt(Nt[Sn].data,Yt,Qt)||(En(je({exploreId:Rt,type:Sn})),Nt[Sn].enabled&&En(pn(Rt,Sn)))):En(Ue({exploreId:Rt,type:Sn}))}});function Gt(pt,Rt,Mt){if(!pt)return!1;const Bt=(0,l.zipObject)((0,l.map)(Rt,"refId"),Rt),Nt=(0,l.mapValues)((0,l.groupBy)(pt.data.map(vn=>vn.meta?.custom?.sourceQuery),"refId"),l.head),Yt=pt.data.every(vn=>vn.meta?.custom?.logsVolumeType===E.Aj.FullRange),Qt=s()(Bt,Nt),En=pt.data.every(vn=>{const Sn=vn.meta?.custom?.absoluteRange;return Sn?Sn&&Sn.from<=Mt.from&&Mt.to<=Sn.to:!0});return Yt&&Qt&&En}function en(pt,Rt){return(Mt,Bt)=>{const Nt=Bt().explore.panes[pt].queries,Yt=Rt.map((Qt,En)=>(0,U.eF)(Qt,Nt,En));Mt(de({exploreId:pt,queries:Yt})),Mt(mt({exploreId:pt}))}}function st(pt){return(Rt,Mt)=>{Rt(Ee({exploreId:pt}));const Bt=(0,F.Wb)(-1,Mt().explore.panes[pt].range);Rt((0,Xe.JA)({exploreId:pt,absoluteRange:Bt})),Rt(mt({exploreId:pt}))}}function $t(pt){return(Rt,Mt)=>{const Bt=Mt().explore.panes[pt].queryResponse,Nt=Mt().explore.panes[pt].absoluteRange,Yt=(0,De.O2)(Nt);Bt.state===f.Gu.Done&&Rt(Oe({exploreId:pt,cacheKey:Yt,queryResponse:Bt}))}}function xn(pt){return(Rt,Mt)=>{Rt(We({exploreId:pt}))}}function pn(pt,Rt){return(Mt,Bt)=>{const{supplementaryQueries:Nt}=Bt().explore.panes[pt],Yt=Nt[Rt].dataProvider;if(Yt){const Qt=Yt.subscribe({next:En=>{Mt(He({exploreId:pt,type:Rt,data:En}))}});Mt(Qe({exploreId:pt,type:Rt,dataSubscription:Qt}))}}}function _n(pt,Rt,Mt){return(Bt,Nt)=>{Bt(Se({exploreId:pt,enabled:Rt,type:Mt})),(0,he.Oi)(Rt,Mt),Rt&&Bt(pn(pt,Mt))}}const kn=(pt,Rt)=>{if(Te.match(Rt)){const{queries:Mt}=pt,{index:Bt,query:Nt}=Rt.payload,Yt=[...Mt.slice(0,Bt+1),{...Nt},...Mt.slice(Bt+1)];return{...pt,queries:Yt,queryKeys:(0,U.dY)(Yt)}}if($e.match(Rt)){const{queries:Mt}=Rt.payload;return{...pt,queries:Mt}}if(Re.match(Rt))return(0,U._u)(pt.querySubscription),{...pt,...pt.queryResponse?{queryResponse:{...pt.queryResponse,state:f.Gu.Done}}:{}};if(de.match(Rt)){const{queries:Mt}=Rt.payload;return{...pt,queries:Mt.slice(),queryKeys:(0,U.dY)(Mt)}}if(Ve.match(Rt)){const{querySubscription:Mt}=Rt.payload;return{...pt,querySubscription:Mt}}if(Se.match(Rt)){const{enabled:Mt,type:Bt}=Rt.payload,{supplementaryQueries:Nt}=pt,Yt=Nt[Bt].dataSubscription;!Mt&&Yt&&Yt.unsubscribe();const Qt={...Nt,[Bt]:{...Nt[Bt],enabled:Mt,data:void 0}};return{...pt,supplementaryQueries:Qt}}if(Ye.match(Rt)){const{dataProvider:Mt,type:Bt}=Rt.payload,{supplementaryQueries:Nt}=pt,Yt=Nt[Bt];Yt?.dataSubscription&&Yt.dataSubscription.unsubscribe();const Qt={...Nt,[Bt]:{...Yt,dataProvider:Mt,dataSubscription:void 0}};return{...pt,supplementaryQueries:Qt}}if(Ue.match(Rt)){const{type:Mt}=Rt.payload,{supplementaryQueries:Bt}=pt,Nt=Bt[Mt];Nt?.dataSubscription&&Nt.dataSubscription.unsubscribe();const Yt={...Bt,[Mt]:{...Nt,dataProvider:void 0,dataSubscription:void 0}};return{...pt,supplementaryQueries:Yt}}if(je.match(Rt)){const{type:Mt}=Rt.payload,{supplementaryQueries:Bt}=pt,Nt={...Bt,[Mt]:{...Bt[Mt],data:void 0}};return{...pt,supplementaryQueries:Nt}}if(Qe.match(Rt)){const{dataSubscription:Mt,type:Bt}=Rt.payload,{supplementaryQueries:Nt}=pt,Yt={...Nt,[Bt]:{...Nt[Bt],dataSubscription:Mt}};return{...pt,supplementaryQueries:Yt}}if(He.match(Rt)){let{data:Mt,type:Bt}=Rt.payload;const{supplementaryQueries:Nt}=pt,Yt={...Nt,[Bt]:{...Nt[Bt],data:Mt}};return{...pt,supplementaryQueries:Yt}}if(Je.match(Rt))return Jn(pt,Rt);if(Ke.match(Rt)){const{queries:Mt}=Rt.payload;return{...pt,queries:Mt,queryKeys:(0,U.dY)(Mt)}}if(ve.match(Rt)){const{loadingState:Mt}=Rt.payload;return{...pt,queryResponse:{...pt.queryResponse,state:Mt}}}if(me.match(Rt)){const{isPaused:Mt}=Rt.payload;return{...pt,isPaused:Mt}}if(Ee.match(Rt))return{...pt,scanning:!0};if(Pe.match(Rt))return{...pt,scanning:!1,scanRange:void 0};if(Oe.match(Rt)){const{cache:Bt}=pt,{queryResponse:Nt,cacheKey:Yt}=Rt.payload;let Qt=[...Bt];return Qt.some(vn=>vn.key===Yt)||(Qt=[{key:Yt,value:Nt},...Qt].slice(0,5)),{...pt,cache:Qt}}if(We.match(Rt))return{...pt,cache:[]};if(xe.match(Rt)){if(!pt.logsResult)return{...pt,clearedAtIndex:null};if(pt.queryResponse.state===f.Gu.Loading)return{...pt,clearedAtIndex:null,logsResult:{...pt.logsResult,rows:[]}};const Mt=pt.clearedAtIndex?pt.clearedAtIndex+pt.logsResult.rows.length:pt.logsResult.rows.length-1;return{...pt,clearedAtIndex:Mt,logsResult:{...pt.logsResult,rows:[]}}}return pt},Jn=(pt,Rt)=>{const{response:Mt}=Rt.payload,{request:Bt,error:Nt,graphResult:Yt,logsResult:Qt,tableResult:En,rawPrometheusResult:vn,traceFrames:Sn,nodeGraphFrames:mn,flameGraphFrames:wn,rawPrometheusFrames:Ln,customFrames:Zn}=Mt;return Nt&&(Nt.type===v.v2.Timeout||Nt.type===v.v2.Cancelled)?{...pt}:Bt?{...pt,queryResponse:Mt,graphResult:Yt,tableResult:En,rawPrometheusResult:vn,logsResult:pt.isLive&&Qt?{...Qt,rows:(0,De.pg)(pt.clearedAtIndex,Qt.rows)}:Qt,showLogs:!!Qt,showMetrics:!!Yt,showTable:!!En?.length,showTrace:!!Sn.length,showNodeGraph:!!mn.length,showRawPrometheus:!!Ln.length,showFlameGraph:!!wn.length,showCustom:!!Zn?.length,clearedAtIndex:pt.isLive?pt.clearedAtIndex:null}:{...pt}}},19161:(ne,A,e)=>{"use strict";e.d(A,{w:()=>s});var n=e(68143);class a{getHistoryList(r,c){return typeof r!="string"?Promise.resolve([]):(0,n.AI)().get(`api/dashboards/uid/${r}/versions`,c)}getDashboardVersion(r,c){return typeof r!="string"?Promise.resolve({}):(0,n.AI)().get(`api/dashboards/uid/${r}/versions/${c}`)}restoreDashboard(r,c){if(typeof r!="string")return Promise.resolve({});const i=`api/dashboards/uid/${r}/restore`;return(0,n.AI)().post(i,{version:c})}}const s=new a},19203:(ne,A,e)=>{"use strict";e.d(A,{GD:()=>l,QO:()=>i,ni:()=>c,sk:()=>r});var n=e(95027),a=e(98060);const s={};function l({path:f,version:g,loadingStrategy:u}){const E=o(f);E&&!s[E]&&(s[E]={version:encodeURI(g),loadingStrategy:u})}function r(f){const g=f;s[g]&&delete s[g],(0,n.o)(f)}function c(f,g=a.x8){const u=h(f);if(!u)return`${f}?_cache=${g}`;const v=s[u]?.version||g;return`${f}?_cache=${v}`}function i(f){const g=h(f);if(g)return s[g]}function o(f){const g=/\/?public\/plugins\/([^\/]+)\//,u=f.match(g);if(u)return u[1];const E=/\/?public\/app\/plugins\/(?:datasource|panel)\/([^\/]+)\//,v=f.match(E);return v?v[1]:null}function h(f){const g=Object.keys(s).find(u=>f.includes(u));if(g)return g}},19538:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(ne){var A=function(){var i,o,h,f,g,u,E=function(C,P){i=P,o=C.getPlaceholder(),h=C.getOptions(),f=h.series.gauges,g=C.getData(),u=e(f.debug)};E.prototype.calculateLayout=function(){var C=o.width(),P=o.height(),T=Math.min(g.length,f.layout.columns),O=Math.ceil(g.length/T),S=f.layout.margin,B=f.layout.hMargin,K=f.layout.vMargin,U=(C-S*2-B*(T-1))/T,F=(P-S*2-K*(O-1))/O;if(f.layout.square){var I=Math.min(U,F);U=I,F=I}v(f,U);var V=f.cell.margin,M=0,L=0;f.label.show&&(M=f.label.margin,L=f.label.font.size);var N=0,W=0;f.value.show&&(N=f.value.margin,W=f.value.font.size);var R=0;f.threshold.show&&(R=f.threshold.width);var G=0,w=0;f.threshold.label.show&&(G=f.threshold.label.margin,w=f.threshold.label.font.size);for(var _=U/2-V-R-G*2-w,Q=f.gauge.startAngle,ae=f.gauge.endAngle,q=(ae-Q)/100,k=-1,ee=Q;ee<ae;ee+=q)k=Math.max(k,Math.sin(s(ee)));k=Math.max(k,Math.sin(s(ae)));var j=(F-V*2-M*2-L)/(1+k);j*k<N+W/2&&(j=F-V*2-M*2-L-N-W/2);var J=j-G*2-w-R,Z=Math.min(_,J),te=f.gauge.width;te>=Z&&(te=Math.max(3,Z/3));var se=G*2+w+R+Z,ie=Math.max(se*(1+k),se+N+W/2);return{canvasWidth:C,canvasHeight:P,margin:S,hMargin:B,vMargin:K,columns:T,rows:O,cellWidth:U,cellHeight:F,cellMargin:V,labelMargin:M,labelFontSize:L,valueMargin:N,valueFontSize:W,width:te,radius:Z,thresholdWidth:R,thresholdLabelMargin:G,thresholdLabelFontSize:w,gaugeOuterHeight:ie}};function v(C,P){C.gauge.width==="auto"&&(C.gauge.width=Math.max(5,P/8)),C.label.margin==="auto"&&(C.label.margin=Math.max(1,P/20)),C.label.font.size==="auto"&&(C.label.font.size=Math.max(5,P/8)),C.value.margin==="auto"&&(C.value.margin=Math.max(1,P/30)),C.value.font.size==="auto"&&(C.value.font.size=Math.max(5,P/9)),C.threshold.width==="auto"&&(C.threshold.width=Math.max(3,P/100)),C.threshold.label.margin==="auto"&&(C.threshold.label.margin=Math.max(3,P/40)),C.threshold.label.font.size==="auto"&&(C.threshold.label.font.size=Math.max(5,P/15))}E.prototype.calculateAutoValues=v,E.prototype.calculateCellLayout=function(C,P,T){var O=n(P.columns,T),S=a(P.columns,T),B=P.margin+(P.cellWidth+P.hMargin)*O,K=P.margin+(P.cellHeight+P.vMargin)*S,U=B+P.cellWidth/2,F=K+P.cellMargin+P.labelMargin*2+P.labelFontSize+P.thresholdWidth+P.thresholdLabelFontSize+P.thresholdLabelMargin*2+P.radius,I=P.cellHeight-P.cellMargin*2-P.labelMargin*2-P.labelFontSize-P.gaugeOuterHeight,V=0;return C.cell.vAlign==="middle"?V=I/2:C.cell.vAlign==="bottom"&&(V=I),F+=V,{col:O,row:S,x:B,y:K,offsetY:V,cellWidth:P.cellWidth,cellHeight:P.cellHeight,cellMargin:P.cellMargin,cx:U,cy:F}},E.prototype.drawBackground=function(C){f.frame.show&&(i.save(),i.strokeStyle=h.grid.borderColor,i.lineWidth=h.grid.borderWidth,i.strokeRect(0,0,C.canvasWidth,C.canvasHeight),h.grid.backgroundColor&&(i.fillStyle=h.grid.backgroundColor,i.fillRect(0,0,C.canvasWidth,C.canvasHeight)),i.restore())},E.prototype.drawCellBackground=function(C,P){i.save(),C.cell.border&&C.cell.border.show&&C.cell.border.color&&C.cell.border.width&&(i.strokeStyle=C.cell.border.color,i.lineWidth=C.cell.border.width,i.strokeRect(P.x,P.y,P.cellWidth,P.cellHeight)),C.cell.background&&C.cell.background.color&&(i.fillStyle=C.cell.background.color,i.fillRect(P.x,P.y,P.cellWidth,P.cellHeight)),i.restore()},E.prototype.drawGauge=function(C,P,T,O,S){var B=C.gauge.shadow.show?C.gauge.shadow.blur:0,K=y(C,S),U=p(C,P,S);x(T.cx,T.cy,P.radius,P.width,s(C.gauge.startAngle),s(C.gauge.endAngle),C.gauge.border.color,C.gauge.border.width,C.gauge.background.color,B),x(T.cx,T.cy,P.radius-1,P.width-2,s(U.a1),s(U.a2),K,1,K,B),C.gauge.neutralValue!=null&&m(C,P,T,K)};function p(C,P,T){let O={};var S=C.gauge.neutralValue;return S!=null?T<S?(O.a1=d(C,P,T),O.a2=d(C,P,S)):(O.a1=d(C,P,S),O.a2=d(C,P,T)):(O.a1=C.gauge.startAngle,O.a2=d(C,P,T)),O}function m(C,P,T,O){var S=(C.gauge.max-C.gauge.min)/600;l(i,T.cx,T.cy,P.radius-2,P.width-4,s(d(C,P,C.gauge.neutralValue-S)),s(d(C,P,C.gauge.neutralValue+S)),O,2,C.gauge.background.color)}function y(C,P){for(var T,O=0;O<C.threshold.values.length;O++){var S=C.threshold.values[O];if(T=S.color,P<S.value)break}return T}function d(C,P,T){var O=C.gauge.startAngle+(C.gauge.endAngle-C.gauge.startAngle)*((T-C.gauge.min)/(C.gauge.max-C.gauge.min));return O<C.gauge.startAngle?O=C.gauge.startAngle:O>C.gauge.endAngle&&(O=C.gauge.endAngle),O}E.prototype.drawThreshold=function(C,P,T){for(var O=C.gauge.startAngle,S=0;S<C.threshold.values.length;S++){var B=C.threshold.values[S];c1=B.color,a2=d(C,P,B.value),l(i,T.cx,T.cy,P.radius+P.thresholdWidth,P.thresholdWidth-2,s(O),s(a2),c1,1,c1),O=a2}};function x(C,P,T,O,S,B,K,U,F,I){S!==B&&(i.save(),l(i,C,P,T,O,S,B,K,U,F),I&&(l(i,C,P,T,O,S,B),i.clip(),i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=10,i.shadowColor="gray",l(i,C,P,T+1,O+2,S,B,K,1)),i.restore())}E.prototype.drawLable=function(C,P,T,O,S){D(T.cx,T.y+T.cellMargin+P.labelMargin+T.offsetY,"flotGaugeLabel"+O,C.label.formatter?C.label.formatter(S.label,S.data[0][1]):text,C.label)},E.prototype.drawValue=function(C,P,T,O,S){D(T.cx,T.cy-C.value.font.size/2,"flotGaugeValue"+O,C.value.formatter?C.value.formatter(S.label,S.data[0][1]):text,C.value)},E.prototype.drawThresholdValues=function(C,P,T,O){b(C,P,T,"Min"+O,C.gauge.min,C.gauge.startAngle),b(C,P,T,"Max"+O,C.gauge.max,C.gauge.endAngle);for(var S=0;S<C.threshold.values.length;S++){var B=C.threshold.values[S];if(B.value>C.gauge.min&&B.value<C.gauge.max){var K=d(C,P,B.value);b(C,P,T,O+"_"+S,B.value,K)}}var U=C.gauge.neutralValue;U!=null&&U>C.gauge.min&&U<C.gauge.max&&b(C,P,T,"Neutral"+O,U,d(C,P,U))};function b(C,P,T,O,S,B){D(T.cx+(P.thresholdLabelMargin+P.thresholdLabelFontSize/2+P.radius)*Math.cos(s(B)),T.cy+(P.thresholdLabelMargin+P.thresholdLabelFontSize/2+P.radius)*Math.sin(s(B)),"flotGaugeThresholdValue"+O,C.threshold.label.formatter?C.threshold.label.formatter(S):S,C.threshold.label,B)}function D(C,P,T,O,S,B){var K=ne(o).find("#"+T),U=K.length;U||(K=ne("<span></span>"),K.attr("id",T),K.attr("class","flot-temp-elem"),o.append(K)),K.css("position","absolute"),K.css("top",P+"px"),K.css("white-space","nowrap"),S.font.size&&K.css("font-size",S.font.size+"px"),S.font.family&&K.css("font-family",S.font.family),S.color&&K.css("color",S.color),S.background.color&&K.css("background-color",S.background.color),S.background.opacity&&K.css("opacity",S.background.opacity),K.text(O),K.css("left",C+"px"),K.css("left",parseInt(K.css("left"))-K.width()/2+"px"),!U&&B&&(K.css("top",parseInt(K.css("top"))-K.height()/2+"px"),K.css("transform","rotate("+(180*B+90)+"deg)"))}return E}();function e(i){return typeof Logger<"u"?new Logger(i):null}function n(i,o){return o%i}function a(i,o){return Math.floor(o/i)}function s(i){return i*Math.PI}function l(i,o,h,f,g,u,E,v,p,m){if(u!==E){var y=!1;i.save(),i.beginPath(),i.arc(o,h,f,u,E,y),i.lineTo(o+(f-g)*Math.cos(E),h+(f-g)*Math.sin(E)),i.arc(o,h,f-g,E,u,!y),i.closePath(),p&&(i.lineWidth=p),v&&(i.strokeStyle=v,i.stroke()),m&&(i.fillStyle=m,i.fill()),i.restore()}}function r(i){i.hooks.processOptions.push(function(o,h){var f=e(h.series.gauges.debug);h.series.gauges.show&&(h.grid.show=!1,h.legend.show=!1);var g=h.series.gauges.threshold.values;g.sort(function(u,E){return u.value<E.value?-1:u.value>E.value?1:0})}),i.hooks.draw.push(function(o,h){var f=o.getOptions(),g=f.series.gauges,u=e(g.debug);if(g.show){var E=o.getData();if(!(!E||!E.length)){var v=new A(o,h),p=v.calculateLayout();g.debug.layout,v.drawBackground(p);for(var m=0;m<E.length;m++){var y=E[m],d=ne.extend({},g,y.gauges);y.gauges&&v.calculateAutoValues(d,p.cellWidth);var x=v.calculateCellLayout(d,p,m);v.drawCellBackground(d,x),d.debug.layout,d.label.show&&v.drawLable(d,p,x,m,y),v.drawGauge(d,p,x,y.label,y.data[0][1]),d.threshold.show&&v.drawThreshold(d,p,x),d.threshold.label.show&&v.drawThresholdValues(d,p,x,m),d.value.show&&v.drawValue(d,p,x,m,y)}}}})}var c={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(i,o){return i}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(i,o){return parseInt(o)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(i){return i}},values:[]}}}};ne.plot.plugins.push({init:r,options:c,name:"gauge",version:"1.1.0"})})(jQuery)},19753:(ne,A,e)=>{"use strict";e.d(A,{Q:()=>i});var n=e(74848),a=e(2543),s=e.n(a),l=e(96540),r=e(37386),c=e(63527);class i extends l.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=l.createRef(),this.updateValue=()=>{const h=this.inputRef.current?.value;let f=!1,g="";const u=this.props.min,E=this.props.max;let v=h!==""?Number(h):void 0;v&&!Number.isNaN(v)&&(u!=null&&v<u?(g=u.toString(),f=!0):E!=null&&v>E?(g=E.toString(),f=!0):g=h??"",this.setState({text:g,inputCorrected:f})),f&&this.updateValueDebounced(),!Number.isNaN(v)&&v!==this.props.value&&this.props.onChange(v)},this.updateValueDebounced=(0,a.debounce)(this.updateValue,500),this.onChange=h=>{this.setState({text:h.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=h=>{h.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(h){if(this.props.value!==h.value){const f=isNaN(this.props.value)?"":`${this.props.value}`;f!==this.state.text&&this.setState({text:f})}}renderInput(){return(0,n.jsx)(c.p,{type:"number",id:this.props.id,ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width,suffix:this.props.suffix})}render(){const{inputCorrected:h}=this.state;if(h){let f="",{min:g,max:u}=this.props;return u==null?g!=null&&(f=`< ${g}`):g!=null?f=`${g} < > ${u}`:f=`> ${u}`,(0,n.jsx)(r.D,{invalid:h,error:`Out of range ${f}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"},children:this.renderInput()})}return this.renderInput()}}},20012:(ne,A,e)=>{"use strict";e.d(A,{$:()=>l,D:()=>s});var n=e(739),a=e(59427);function s(r){return r?r.indexOf(":/")>0?r:`${window.__grafana_public_path__}build/${r}`:""}function l(r,c){const i=c.mode??n.q_.Fixed;if(i===n.q_.Fixed){const f=s(c.fixed);return{isAssumed:!f,fixed:f,value:()=>f,get:g=>f}}const o=(0,a.UI)(r,c.field);if(!o)return{isAssumed:!0,fixed:"",value:()=>"",get:g=>""};if(i===n.q_.Mapping){const f=g=>s(`${g}`);return{field:o,get:g=>f(o.values[g]),value:()=>f((0,a.sB)(o))}}const h=f=>{if(o&&o.display){const g=o.display(f).icon;return s(g??"")}return""};return{field:o,get:f=>h(o.values[f]),value:()=>h((0,a.sB)(o))}}},20018:(ne,A,e)=>{"use strict";e.d(A,{N:()=>a});var n=e(65307);const a=(0,n.VP)("core/cleanUpState")},20246:(ne,A,e)=>{"use strict";e.d(A,{BK:()=>c,DP:()=>o,f:()=>i,z4:()=>r});var n=e(96540),a=e(73427),s=e(15759);function l(h){let f=h.parent;for(;f;){if(isDashboardLayoutManager(f))return f;f=f.parent}return null}function r({autoFocus:h}={}){const f=(0,n.useRef)(null);return(0,n.useEffect)(()=>{f.current&&h&&setTimeout(()=>f.current?.focus(),200)},[h]),f}function c(h,f){const g=h??"";if(f.has(g)){const u=g.match(/^(.*?)(\d+)$/);if(u){const E=u[1],v=parseInt(u[2],10);let p=`${E}${v+1}`;for(;f.has(p);){const m=parseInt(p.match(/\d+$/)[0],10)+1;p=`${E}${m}`}return p}else{let E=1,v=`${g} ${E}`;for(;f.has(v);)E++,v=`${g} ${E}`;return v}}return g}function i(h,f){const g=h.parent;(0,s.l)(g)&&(f.clearParent(),g.switchLayout(f))}function o(h){return!(h||a.TP.user&&a.TP.user.authenticatedBy==="render")}},20386:(ne,A,e)=>{"use strict";e.d(A,{c:()=>s,t:()=>a});var n=e(99885);function a(l,r,c){if(!c.trim())return l;const i=l.map(r);return(0,n.X)(i,c).map(h=>l[h])}function s(l,r){if(!r.trim())return!0;const c=[l];return(0,n.X)(c,r).length>0}},20437:(ne,A,e)=>{"use strict";e.d(A,{Bu:()=>ee,J6:()=>Q,Os:()=>b,Q8:()=>x,QX:()=>I,Qk:()=>M,XI:()=>L,Z9:()=>O,l1:()=>D,mY:()=>j,mp:()=>_,qO:()=>N,zQ:()=>V});var n=e(39796),a=e(17548),s=e(22592),l=e(43173),r=e(78282),c=e(36580),i=e(45863),o=e(8285),h=e(4651),f=e(2954),g=e(84523),u=e(6194),E=e(67817),v=e(95443),p=e(52161),m=e(77256),y=e(29609),d=e(15629);const x="grafana.alerting.manualRouting",b="grafana.alerting.simplifiedQueryEditor";function D(J){const{name:Z,expression:te,forTime:se,forTimeUnit:ie,keepFiringForTime:ce,keepFiringForTimeUnit:re,type:ue}=J,X=(0,m.Sl)(S(J.annotations)),le=(0,m.Sl)(B(J.labels));if(ue===E.Z.cloudAlerting){let he;return ce&&re&&(he=`${ce}${re}`),{alert:Z,for:`${se}${ie}`,keep_firing_for:he,annotations:X,labels:le,expr:te}}else if(ue===E.Z.cloudRecording)return{record:Z,labels:le,expr:te};throw new Error(`unexpected rule type: ${ue}`)}function C(J,Z){const te=[...(0,m.KT)(J||{})];return Z&&te.push({key:"",value:""}),te}function P(J,Z){if(Z?.grafana?.selectedContactPoint&&J)return{receiver:Z?.grafana?.selectedContactPoint,mute_time_intervals:Z?.grafana?.muteTimeIntervals,active_time_intervals:Z?.grafana?.activeTimeIntervals,group_by:Z?.grafana?.overrideGrouping?Z?.grafana?.groupBy:void 0,group_wait:Z?.grafana?.overrideTimings&&Z?.grafana?.groupWaitValue?Z?.grafana?.groupWaitValue:void 0,group_interval:Z?.grafana?.overrideTimings&&Z?.grafana?.groupIntervalValue?Z?.grafana?.groupIntervalValue:void 0,repeat_interval:Z?.grafana?.overrideTimings&&Z?.grafana?.repeatIntervalValue?Z?.grafana?.repeatIntervalValue:void 0}}function T(J){return{simplified_query_and_expressions_section:J.simplifiedQueryEditor,simplified_notifications_section:J.simplifiedNotificationEditor}}function O(J){const{name:Z,condition:te,noDataState:se,execErrState:ie,evaluateFor:ce,keepFiringFor:re,queries:ue,isPaused:X,contactPoints:le,manualRouting:he,type:fe,metric:Ce,targetDatasourceUid:Ae,missingSeriesEvalsToResolve:_e}=J;if(!te)throw new Error("You cannot create an alert rule without specifying the alert condition");const Xe=P(he,le),De=J.editorSettings?{editor_settings:T(J.editorSettings)}:void 0,Me=(0,m.Sl)(S(J.annotations)),Te=(0,m.Sl)(B(J.labels)),$e=(0,y.Mu)(fe),Re=(0,y.pq)(fe);if($e)return{grafana_alert:{title:Z,condition:te,data:ue.map(q),is_paused:!!X,no_data_state:se,exec_err_state:ie,notification_settings:Xe,metadata:De,missing_series_evals_to_resolve:_e?Number(_e):0},annotations:Me,labels:Te,for:ce,keep_firing_for:re};if(Re)return{grafana_alert:{title:Z,condition:te,data:ue.map(q),is_paused:!!X,record:{metric:Ce??Z,from:te,target_datasource_uid:Ae}},annotations:Me,labels:Te};throw new Error(`Failed to convert form values to Grafana rule: unknown type ${fe}`)}const S=J=>J.map(K).filter(({key:Z,value:te})=>!!Z&&!!te),B=J=>J.map(K).filter(({key:Z})=>!!Z),K=({key:J,value:Z})=>({key:J.trim(),value:Z.trim()});function U(J){const Z=J.notification_settings?{selectedContactPoint:J.notification_settings.receiver,muteTimeIntervals:J.notification_settings.mute_time_intervals??[],activeTimeIntervals:J.notification_settings.active_time_intervals??[],overrideGrouping:Array.isArray(J.notification_settings.group_by)&&J.notification_settings.group_by.length>0,overrideTimings:[J.notification_settings.group_wait,J.notification_settings.group_interval,J.notification_settings.repeat_interval].some(Boolean),groupBy:J.notification_settings.group_by||[],groupWaitValue:J.notification_settings.group_wait||"",groupIntervalValue:J.notification_settings.group_interval||"",repeatIntervalValue:J.notification_settings.repeat_interval||""}:void 0;return Z?{[p.hY]:Z}:void 0}function F(J){if(l.$.featureToggles.alertingQueryAndExpressionsStepMode)return J.metadata?.editor_settings?{simplifiedQueryEditor:J.metadata.editor_settings.simplified_query_and_expressions_section,simplifiedNotificationEditor:J.metadata.editor_settings.simplified_notifications_section}:{simplifiedQueryEditor:!1,simplifiedNotificationEditor:!!J.notification_settings}}function I(J){const{ruleSourceName:Z,namespace:te,group:se,rule:ie}=J,ce=y.p.grafana.recordingRule(ie),re=(0,g.IJ)(ce?E.Z.grafanaRecording:void 0);if((0,p.z2)(Z))if(ce){const ue=ie.grafana_alert;return{...re,name:ue.title,type:E.Z.grafanaRecording,group:se.name,evaluateEvery:se.interval||re.evaluateEvery,queries:ue.data,condition:ue.condition,annotations:(0,u.JE)(C(ie.annotations,!1)),labels:C(ie.labels,!0),folder:{title:te,uid:ue.namespace_uid},isPaused:ue.is_paused,metric:ue.record?.metric,targetDatasourceUid:ue.record?.target_datasource_uid||re.targetDatasourceUid}}else if(y.p.grafana.rule(ie)){const ue=ie.grafana_alert,X=U(ue);if(ue.no_data_state!==void 0&&ue.exec_err_state!==void 0)return{...re,name:ue.title,type:E.Z.grafana,group:se.name,evaluateEvery:se.interval||re.evaluateEvery,evaluateFor:ie.for||"0",keepFiringFor:ie.keep_firing_for||"0",noDataState:ue.no_data_state,execErrState:ue.exec_err_state,queries:ue.data,condition:ue.condition,annotations:(0,u.JE)(C(ie.annotations,!1)),labels:C(ie.labels,!0),folder:{title:te,uid:ue.namespace_uid},isPaused:ue.is_paused,contactPoints:X,manualRouting:!!X,editorSettings:F(ue),missingSeriesEvalsToResolve:ue.missing_series_evals_to_resolve};throw new Error("Unexpected type of rule for grafana rules source")}else throw new Error("Unexpected type of rule for grafana rules source");else if(y.p.dataSource.alertingRule(ie)){const X={refId:"A",datasourceUid:(0,r.l)().getInstanceSettings(Z)?.uid??"",queryType:"",relativeTimeRange:(0,s.Cn)(),expr:ie.expr,model:{refId:"A",hide:!1,expr:ie.expr}},le=M(ie);return{...re,...le,queries:[X],annotations:(0,u.JE)(C(ie.annotations,!1)),type:E.Z.cloudAlerting,dataSourceName:Z,namespace:te,group:se.name}}else if(y.p.dataSource.recordingRule(ie)){const ue=L(ie);return{...re,...ue,type:E.Z.cloudRecording,dataSourceName:Z,namespace:te,group:se.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function V(J,Z){const te=y.p.grafana.recordingRule(J),se=(0,g.IJ)(te?E.Z.grafanaRecording:void 0),ie=J.grafana_alert,ce=J.for,re=J.keep_firing_for,ue=J.annotations,X=J.labels,le={...se,name:ie.title,queries:ie.data,condition:ie.condition,annotations:(0,u.JE)(C(ue,!1)),labels:C(X,!0),folder:{title:Z,uid:ie.namespace_uid},isPaused:ie.is_paused};if(y.p.grafana.recordingRule(J))return{...le,type:E.Z.grafanaRecording,group:ie.rule_group,metric:ie.record?.metric};const he=U(ie);if(ie.no_data_state!==void 0&&ie.exec_err_state!==void 0)return{...le,type:E.Z.grafana,group:ie.rule_group,evaluateFor:ce||"0",keepFiringFor:re||"0",noDataState:ie.no_data_state,execErrState:ie.exec_err_state,contactPoints:he,manualRouting:!!he,editorSettings:F(ie)};throw new Error("Unexpected type of rule for grafana rules source")}function M(J){const Z=(0,g.IJ)(),[te,se]=J.for?(0,d.P1)(J.for):[0,"s"],[ie,ce]=J.keep_firing_for?(0,d.P1)(J.keep_firing_for):[Z.keepFiringForTime,Z.keepFiringForTimeUnit];return{name:J.alert,expression:J.expr,forTime:te,forTimeUnit:se,keepFiringForTime:ie,keepFiringForTimeUnit:ce,annotations:C(J.annotations,!1),labels:C(J.labels,!0)}}function L(J){return{name:J.record,expression:J.expr,labels:C(J.labels,!0)}}const N=(J=!1)=>{const Z=(0,p.y9)();if(!Z)return[...J?G("A"):R("A","B")];const te=(0,s.Cn)(),se=J?G("B"):R("B","C"),ie=Z?(0,p.cl)(Z.type):!1;return[{refId:"A",datasourceUid:Z.uid,queryType:"",relativeTimeRange:te,model:{refId:"A",instant:ie?!0:void 0}},...se]},W=J=>{const Z=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:J[0]?.uid||"",queryType:"",relativeTimeRange:Z,model:{refId:"A"}}]},R=(...J)=>{const Z=J[0],te=J[1],se={refId:J[0],type:h.Tz.reduce,datasource:{uid:h.Uj,type:c.dR.type},conditions:[{type:"query",evaluator:{params:[],type:f.p.IsAbove},operator:{type:"and"},query:{params:[Z]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},ie={refId:te,type:h.Tz.threshold,datasource:{uid:h.Uj,type:c.dR.type},conditions:[{type:"query",evaluator:{params:[0],type:f.p.IsAbove},operator:{type:"and"},query:{params:[te]},reducer:{params:[],type:"last"}}],expression:Z};return[{refId:Z,datasourceUid:h.Uj,queryType:"",model:se},{refId:te,datasourceUid:h.Uj,queryType:"",model:ie}]},G=J=>{const Z={refId:J,type:h.Tz.reduce,datasource:{uid:h.Uj,type:c.dR.type},conditions:[{type:"query",evaluator:{params:[],type:f.p.IsAbove},operator:{type:"and"},query:{params:[J]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"};return[{refId:J,datasourceUid:h.Uj,queryType:"",model:Z}]},w=async(J,Z,te,se,ie,ce)=>{const re=[];for(const ue of J){const X=await(0,r.l)().get(ue.datasource?.uid?ue.datasource:se),le={uid:X.uid,type:X.type},he=a.relativeToTimeRange(Z),{interval:fe,intervalMs:Ce}=ae(he,ce??X.interval,ie),Ae={__interval:{text:fe,value:fe},__interval_ms:{text:Ce,value:Ce},...te},_e=X.interpolateVariablesInQueries?X.interpolateVariablesInQueries([ue],Ae)[0]:ue;if(le.uid===h.Uj){const Xe={refId:_e.refId,queryType:"",relativeTimeRange:Z,datasourceUid:h.Uj,model:_e};re.push(Xe)}else{const Xe=(0,r.l)().getInstanceSettings(le);if(Xe&&Xe.meta.alerting){const De={refId:_e.refId,queryType:_e.queryType??"",relativeTimeRange:Z,datasourceUid:Xe.uid,model:{..._e,maxDataPoints:ie,intervalMs:Ce}};re.push(De)}}}return re},_=async(J,Z)=>{const{targets:te}=J;if(!J.id||!Z.uid)return;const se=a.timeRangeToRelative(a.convertRawToRange(Z.time)),ie=await w(te,se,J.scopedVars||{},J.datasource??void 0,J.maxDataPoints??void 0,J.interval??void 0);if(!ie.length||!ie.find(le=>le.datasourceUid!==h.Uj))return;if(!ie.find(le=>le.datasourceUid===h.Uj)){const[le,he]=R((0,n.M)(ie),"-");ie.push(le);const[fe,Ce]=R(le.refId,(0,n.M)(ie));ie.push(Ce)}const{folderTitle:ce,folderUid:re}=Z.meta,ue=re&&ce?{kind:"folder",uid:re,title:ce}:void 0;return{type:E.Z.grafana,folder:ue,queries:ie,name:J.title,condition:ie[ie.length-1].refId,annotations:[{key:v.YH.dashboardUID,value:Z.uid},{key:v.YH.panelID,value:String(J.id)}]}},Q=async J=>{if(!J.state.key)return;const Z=i.jh.getTimeRange(J),te=(0,o.un)(J);if(!te)return;const{queries:se,datasource:ie,maxDataPoints:ce,minInterval:re}=te.state,ue=(0,o.YQ)(J);if(!ue||!ue.state.uid)return;const X=await w(se,a.timeRangeToRelative(a.convertRawToRange(Z.state.value.raw)),{__sceneObject:{value:J}},ie,ce,re);if(!X.length||!X.find(Ae=>Ae.datasourceUid!==h.Uj))return;if(!X.find(Ae=>Ae.datasourceUid===h.Uj)){const[Ae,_e]=R((0,n.M)(X),"-");X.push(Ae);const[Xe,De]=R(Ae.refId,(0,n.M)(X));X.push(De)}const{folderTitle:le,folderUid:he}=ue.state.meta,fe=he&&le?{kind:"folder",uid:he,title:le}:void 0;return{type:E.Z.grafana,folder:fe,queries:X,name:J.state.title,condition:X[X.length-1].refId,annotations:[{key:v.YH.dashboardUID,value:ue.state.uid},{key:v.YH.panelID,value:String((0,o.Cs)(J))}]}};function ae(J,Z,te){return te?a.calculateInterval(J,te,Z):Z&&a.intervalToMs(Z)>1e3?{interval:Z,intervalMs:a.intervalToMs(Z)}:{interval:"1s",intervalMs:1e3}}function q(J){const Z=J.model;return k(Z)&&Z.instant&&Z.range?{...J,model:{...Z,range:!0,instant:!1}}:J}function k(J){return"expr"in J&&"instant"in J&&"range"in J}function ee(J){return"expr"in J}function j(J){const Z=J.datasourceUid??J.model.datasource?.uid;if(!Z)return;const te=(0,r.l)().getInstanceSettings(Z)?.type;if(!te||!(0,p.cl)(te))return;const{model:se}=J,ie="instant"in se&&se.instant!==void 0?se.instant:!0,ce="queryType"in se&&se.queryType!==void 0?se.queryType==="instant":!0;return(0,p.bS)(te)?ie:ce}},20443:(ne,A,e)=>{"use strict";e.d(A,{DY:()=>C,Mk:()=>y,QM:()=>v,Rg:()=>f,SJ:()=>m,YE:()=>p,Yl:()=>u,gY:()=>d,hH:()=>b,ie:()=>x});var n=e(84266),a=e(86017),s=e(52161),l=e(63895),r=e(67923),c=e(15629);const i=(P,T)=>Object.entries(P??{}).reduce((O,[S,B])=>[...O,{name:S,value:B,operator:T?n.ho.regex:n.ho.equal}],[]),o=P=>P.value,h=P=>(P??[]).map(o),f={name:"",value:"",operator:n.ho.equal},g=["grafana_folder","alertname"],u=[{label:"grafana_folder",value:"grafana_folder",isFixed:!0},{label:"alertname",value:"alertname",isFixed:!0},{label:"Disable (...)",value:"..."}],E={id:"",overrideGrouping:!1,groupBy:g,object_matchers:[],routes:[],continue:!1,receiver:"",overrideTimings:!1,groupWaitValue:"",groupIntervalValue:"",repeatIntervalValue:"",muteTimeIntervals:[],activeTimeIntervals:[]};function v(P,T="0"){const O=(0,r.KR)(P),S=P.routes??[];return{id:`${T}-${O}`,...P,routes:S.map((B,K)=>v(B,`${T}-${K}`))}}const p=P=>{if(!P)return E;const T=P.id;if(Object.keys(P).length===0)return{...E,id:T};const O=[];P.routes?.forEach(K=>{const U=p(K);O.push(U)});const S=P.object_matchers?.map(K=>({name:K[0],operator:K[1],value:K[2]}))??[],B=P.matchers?.flatMap(K=>(0,l.So)(K).flatMap(a.MU)).map(({name:K,operator:U,value:F})=>({name:(0,l.Ig)(K),operator:U,value:(0,l.Ig)(F)}))??[];return{id:T,object_matchers:[...B,...S,...i(P.match,!1),...i(P.match_re,!0)],continue:P.continue??!1,receiver:P.receiver??"",overrideGrouping:Array.isArray(P.group_by)&&P.group_by.length>0,groupBy:P.group_by??void 0,overrideTimings:[P.group_wait,P.group_interval,P.repeat_interval].some(Boolean),groupWaitValue:P.group_wait??"",groupIntervalValue:P.group_interval??"",repeatIntervalValue:P.repeat_interval??"",routes:O,muteTimeIntervals:P.mute_time_intervals??[],activeTimeIntervals:P.active_time_intervals??[]}},m=(P,T,O)=>{const S=(0,r.eM)(T.id??"",O),{overrideGrouping:B,groupBy:K,overrideTimings:U,groupWaitValue:F,groupIntervalValue:I,repeatIntervalValue:V,receiver:M}=T,L=void 0,N=B?K:L,R=U&&F?F:L,w=U&&I?I:L,Q=U&&V?V:L,ae=T.object_matchers?.filter(ee=>ee.name&&ee.operator&&ee.value!==null&&ee.value!==void 0).map(({name:ee,operator:j,value:J})=>[ee,j,J]),q=T.routes?.map(ee=>m(P,ee,O)),k={...S??{},continue:T.continue,group_by:N,object_matchers:ae,match:void 0,match_re:void 0,group_wait:R,group_interval:w,repeat_interval:Q,routes:q,mute_time_intervals:T.muteTimeIntervals,active_time_intervals:T.activeTimeIntervals,receiver:M};return P!==s.hY?(k.matchers=T.object_matchers?.map(l.b2),k.object_matchers=void 0):(k.object_matchers=(0,l.J$)(k),k.matchers=void 0),T.receiver&&(k.receiver=T.receiver),k},y=P=>({label:P,value:P}),d=P=>(P??[]).map(y),x=P=>P?h(P):[];function b(P){return!P||P.length===0?!0:(0,c.TN)(P)||"Invalid duration format. Must be {number}{time_unit}"}const D=P=>P.map(T=>{const[O,S,B]=T;return`${O}${S}${B}`}),C=(P,T="")=>{if(P.length===0)return!0;const O=b(P),S=b(T);if(O!==!0)return O;if(S!==!0)return S;const B=(0,c.P8)(P),K=(0,c.P8)(T);return K!==0&&B<K?"Repeat interval should be higher or equal to Group interval":!0}},20662:(ne,A,e)=>{"use strict";e.d(A,{z:()=>l});var n=e(74848),a=e(96540);function s(r,c){const i=[];return r.forEach(o=>{i.push(o.start,o.end+1)}),i[0]!==0&&i.unshift(0),i[i.length-1]!==c&&i.push(c),i}const l=r=>{let{highlightParts:c,text:i,highlightClassName:o}=r;if(!c?.length)return null;let h=[],f=s(c,i.length),g=c[0].start===0;for(let u=1;u<f.length;u++){let E=f[u-1],v=f[u];h.push((0,a.createElement)(g?"mark":"span",{key:u-1,className:g?o:void 0},i.substring(E,v))),g=!g}return(0,n.jsx)("div",{children:h})}},20718:(ne,A,e)=>{"use strict";e.d(A,{Jr:()=>f,K6:()=>i,Kl:()=>E,Qb:()=>l,i6:()=>c,pF:()=>o,qq:()=>g,st:()=>h,vC:()=>u});var n=e(25508),a=e(2543),s=e.n(a);const l=v=>v.explore.panes,r=v=>v.explore,c=v=>v.explore.richHistorySettings,i=(0,n.Mz)(l,Object.entries),o=(0,n.Mz)(i,v=>v.length>1),h=(0,n.Mz)(i,v=>v.some(p=>p[1].correlationEditorHelperData!==void 0)),f=v=>(0,n.Mz)(l,p=>Object.keys(p)[0]===v),g=v=>(0,n.Mz)(l,p=>p[v]),u=(0,n.Mz)(r,v=>v.correlationEditorDetails),E=(0,n.Mz)(i,v=>{const p=v.map(([d,x])=>{const b=[x?.datasourceInstance?.getRef()],D=x?.queries.map(P=>P.datasource)||[],C=[...b,...D].filter(P=>!!P);if(!(C===void 0||C.length===0))return{exploreId:d,datasources:(0,a.uniqBy)(C,P=>P.uid)}}).filter(d=>!!d),y=(0,a.uniqBy)((0,a.flatten)(p.map(d=>d.datasources)),d=>d.uid).map(d=>{let x=[];return p.forEach(b=>{b.datasources.some(D=>D.uid===d.uid)&&x.push(b.exploreId)}),{datasource:d,exploreIds:x}});return{exploreToDS:p,dsToExplore:y}})},20720:(ne,A,e)=>{"use strict";e.d(A,{h:()=>n});function n(a,s,l){}},20806:(ne,A,e)=>{"use strict";e.d(A,{s:()=>o});var n=e(74848),a=e(92138),s=e(92745),l=e(36490),r=e(22787),c=e(45861),i=e(41654);function o(h){const{onDismiss:f,path:g,title:u}=h,E=()=>{e.g.open(a.I.assureBaseUrl(g),"_blank"),f()},v=()=>l.Ny.push(g);return(0,n.jsxs)(r.a,{title:u,isOpen:!0,onDismiss:f,children:[(0,n.jsx)(i.B,{direction:"column",gap:1,children:(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"explore.confirm-navigation-modal.new-tab",children:"Do you want to proceed in the current tab or open a new tab?"})})}),(0,n.jsxs)(r.a.ButtonRow,{children:[(0,n.jsx)(c.$n,{onClick:f,fill:"outline",variant:"secondary",children:(0,n.jsx)(s.x6,{i18nKey:"explore.confirm-navigation-modal.cancel",children:"Cancel"})}),(0,n.jsx)(c.$n,{type:"submit",variant:"secondary",onClick:E,icon:"external-link-alt",children:(0,n.jsx)(s.x6,{i18nKey:"explore.confirm-navigation-modal.open-in-new-tab",children:"Open in new tab"})}),(0,n.jsx)(c.$n,{type:"submit",variant:"primary",onClick:v,icon:"apps",children:(0,n.jsx)(s.x6,{i18nKey:"explore.confirm-navigation-modal.open",children:"Open"})})]})]})}},20877:(ne,A,e)=>{"use strict";e.d(A,{a:()=>s});var n=e(74848),a=e(79450);function s(l){const{children:r,...c}=l;return(0,n.jsx)(a.b.Provider,{value:c,children:r})}},20941:(ne,A,e)=>{"use strict";e.d(A,{N:()=>c});var n=e(74848),a=e(96540),s=e(35557),l=e(63704),r=e(92138);const c=(0,a.forwardRef)(({href:i,children:o,...h},f)=>{const g=r.I.stripBaseFromUrl(l.sQ.sanitizeUrl(i??""));return(0,n.jsx)(s.Link,{ref:f,to:g,...h,children:o})});c.displayName="Link"},20962:(ne,A,e)=>{"use strict";e.d(A,{l:()=>l});var n=e(96540),a=e(54148),s=e(36490);function l(){const{search:r}=(0,a.zy)(),c=(0,n.useMemo)(()=>new URLSearchParams(r),[r]),i=(0,n.useCallback)((o,h)=>{s.Ny.partial(o,h)},[]);return[c,i]}},21103:(ne,A,e)=>{"use strict";e.d(A,{F:()=>u});var n=e(74848),a=e(22803),s=e(17437),l=e(10434),r=e(96540),c=e(63142),i=e(80427);const o=E=>{const{value:v,children:p,visible:m,placement:y,tipFormatter:d,...x}=E,b=(0,r.useRef)(null),D=(0,r.useRef)(null),C=(0,c.of)(h);function P(){D.current!==null&&cancelAnimationFrame(D.current)}function T(){D.current=requestAnimationFrame(()=>{b.current?.forceAlign()})}return(0,r.useEffect)(()=>(m?T():P(),P),[v,m]),(0,n.jsx)(i.A,{overlayClassName:C.tooltip,placement:y,overlay:d??v,overlayInnerStyle:{minHeight:"auto"},ref:b,visible:m,...x,children:p})},h=E=>({tooltip:(0,a.css)({position:"absolute",display:"block",visibility:"visible",fontSize:E.typography.bodySmall.fontSize,opacity:.9,padding:3,zIndex:E.zIndex.tooltip})}),f=o;var g=e(91302);const u=({min:E,max:v,onChange:p,onAfterChange:m,orientation:y="horizontal",reverse:d,step:x,formatTooltipResult:b,value:D,tooltipAlwaysVisible:C=!0})=>{const P=(0,r.useCallback)(K=>{p?.(typeof K=="number"?[K,K]:K)},[p]),T=(0,r.useCallback)(K=>{m?.(typeof K=="number"?[K,K]:K)},[m]),O=y==="horizontal",S=(0,c.of)(g.$,O),B=(K,U)=>(0,n.jsx)(f,{value:U.value,visible:C||U.dragging,tipFormatter:b?()=>b(U.value):void 0,placement:O?"top":"right",children:K});return(0,n.jsxs)("div",{className:(0,a.cx)(S.container,S.slider),children:[(0,n.jsx)(s.Global,{styles:S.tooltip}),(0,n.jsx)(l.A,{min:E,max:v,step:x,defaultValue:D,range:!0,onChange:P,onChangeComplete:T,vertical:!O,reverse:d,handleRender:B})]})};u.displayName="RangeSlider"},21133:(ne,A,e)=>{"use strict";e.d(A,{T:()=>i});var n=e(22803),a=e(58851);const s=(0,n.keyframes)({"0%":{opacity:0,transformOrigin:"0% 0%",transform:"scaleY(0.8)"},"100%":{opacity:1,transformOrigin:"0% 0%",transform:"scaleY(1)"}}),l=(0,n.keyframes)({"0%":{opacity:1,transformOrigin:"0% 0%",transform:"scaleY(1)"},"100%":{opacity:0,transformOrigin:"0% 0%",transform:"scaleY(0.8)"}}),r=(0,n.keyframes)({"0%":{opacity:0,transformOrigin:"0% 100%",transform:"scaleY(0.8)"},"100%":{opacity:1,transformOrigin:"0% 100%",transform:"scaleY(1)"}}),c=(0,n.keyframes)({"0%":{opacity:1,transformOrigin:"0% 100%",transform:"scaleY(1)"},"100%":{opacity:0,transformOrigin:"0% 100%",transform:"scaleY(0.8)"}}),i=o=>{const h=(0,a.hO)("angle-right");return{dropdown:(0,n.css)({"&.rc-cascader-dropdown":{position:"absolute",zIndex:9999,"&-hidden":{display:"none"}},".rc-cascader":{"&-menus":{overflow:"hidden",background:o.colors.background.elevated,border:"none",borderRadius:o.shape.radius.default,boxShadow:o.shadows.z3,whiteSpace:"nowrap","&.slide-up-enter, &.slide-up-appear":{animationDuration:"0.3s",animationFillMode:"both",transformOrigin:"0 0",opacity:0,animationTimingFunction:"cubic-bezier(0.08, 0.82, 0.17, 1)",animationPlayState:"paused"},"&.slide-up-enter.slide-up-enter-active.rc-cascader-menus-placement, &.slide-up-appear.slide-up-appear-active.rc-cascader-menus-placement":{"&-bottomLeft":{animationName:s,animationPlayState:"running"},"&-topLeft":{animationName:r,animationPlayState:"running"}},"&.slide-up-leave":{animationDuration:"0.3s",animationFillMode:"both",transformOrigin:"0 0",opacity:1,animationTimingFunction:"cubic-bezier(0.6, 0.04, 0.98, 0.34)",animationPlayState:"paused","&.slide-up-leave-active.rc-cascader-menus-placement":{"&-bottomLeft":{animationName:l,animationPlayState:"running"},"&-topLeft":{animationName:c,animationPlayState:"running"}}}},"&-menu":{display:"inline-block",maxWidth:"50vw",height:"192px",listStyle:"none",margin:0,padding:o.spacing(.5),borderRight:`1px solid ${o.colors.border.weak}`,overflow:"auto","&:last-child":{borderRight:0},"&-item":{height:o.spacing(4),lineHeight:o.spacing(4),padding:o.spacing(0,4,0,2),borderRadius:o.shape.radius.default,cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",transition:"all 0.3s ease",position:"relative","&:hover":{background:o.colors.action.hover},"&-disabled":{cursor:"not-allowed",color:o.colors.text.disabled,"&:hover":{background:"transparent"},"&:after":{position:"absolute",right:"12px",content:"'loading'",color:o.colors.text.disabled,fontStyle:"italic"}},"&-active":{color:o.colors.text.maxContrast,background:o.colors.background.secondary,"&:hover":{background:o.colors.action.hover}},"&-expand":{position:"relative","&:after":{background:o.colors.text.primary,content:"''",height:o.spacing(3),mask:`url(${h})`,maskType:"luminance",position:"absolute",right:0,top:o.spacing(.5),width:o.spacing(3)}}}}}})}}},21234:(ne,A,e)=>{"use strict";e.d(A,{I:()=>r});var n=e(74848),a=e(22803),s=e(8073),l=e(63142);function r({description:i,text:o,url:h}){const f=(0,l.of)(c);return(0,n.jsxs)(s.Z,{className:f.card,href:h,children:[(0,n.jsx)(s.Z.Heading,{children:o}),(0,n.jsx)(s.Z.Description,{className:f.description,children:i})]})}const c=i=>({card:(0,a.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,a.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})})},21241:(ne,A,e)=>{"use strict";e.d(A,{J8:()=>s,L0:()=>l,Lw:()=>r});var n=e(92745),a=e(3845);const s=()=>{const c={name:(0,n.t)("alerting.alertVersionHistory.provisioning","Provisioning"),tooltipContent:(0,n.t)("alerting.alertVersionHistory.provisioning-change-description","Version update was made via provisioning"),badgeColor:"purple"};return{__alerting__:{name:(0,n.t)("alerting.alertVersionHistory.alerting","Alerting"),tooltipContent:(0,n.t)("alerting.alertVersionHistory.alerting-change-description","This update was made by the alerting system due to other changes. For example, when renaming a contact point that is used for simplified routing, this will update affected rules"),badgeColor:"orange",icon:"bell"},service:c,__provisioning__:c}};function l(c){const{grafana_alert:i,...o}=c,h={for:(0,n.t)("alerting.alertVersionHistory.pendingPeriod","Pending period"),annotations:(0,n.t)("alerting.alertVersionHistory.annotations","Annotations"),labels:(0,n.t)("alerting.alertVersionHistory.labels","Labels")},f={title:(0,n.t)("alerting.alertVersionHistory.name","Name"),namespace_uid:(0,n.t)("alerting.alertVersionHistory.namespace_uid","Folder UID"),data:(0,n.t)("alerting.alertVersionHistory.queryAndAlertCondition","Query and alert condition"),notification_settings:(0,n.t)("alerting.alertVersionHistory.contactPointRouting","Contact point routing"),no_data_state:(0,n.t)("alerting.alertVersionHistory.noDataState","Alert state when no data"),exec_err_state:(0,n.t)("alerting.alertVersionHistory.execErrorState","Alert state when execution error"),is_paused:(0,n.t)("alerting.alertVersionHistory.paused","Paused state"),rule_group:(0,n.t)("alerting.alertVersionHistory.rule_group","Rule group"),condition:(0,n.t)("alerting.alertVersionHistory.condition","Alert condition"),intervalSeconds:(0,n.t)("alerting.alertVersionHistory.intervalSeconds","Evaluation interval")},g=Object.entries(o).reduce((E,[v,p])=>{const y=h[v]||v;return{...E,[y]:p}},{}),u=Object.entries(i).reduce((E,[v,p])=>{const m=v;if(a.R.includes(m))return E;const y=f[m]||v;return{...E,[y]:p}},{});return{...g,...u}}function r(c){const i=(0,n.t)("alerting.alertVersionHistory.unknown","Unknown"),o=s(),h=(()=>{const f=c?.grafana_alert.updated_by,g=f?.uid,u=f?.name;return f?g&&o[g]?o[g].name:u||(g?(0,n.t)("alerting.alertVersionHistory.user-id","User ID {{uid}}",{uid:g}):i):i})();return{createdAt:c.grafana_alert.updated||i,createdBy:h,version:c.grafana_alert.version||i}}},21253:(ne,A,e)=>{"use strict";e.d(A,{G:()=>h});var n=e(74848),a=e(22803),s=e(17437),l=e(10434),r=e(96540),c=e(63142),i=e(91302),o=e(19753);const h=({value:u,onChange:E,item:v,id:p})=>{const m=(0,r.useRef)(null),{settings:y}=v,d=y?.min||0,x=y?.max||100,b=y?.step,D=y?.marks||{[d]:d,[x]:x},C=y?.included,P=y?.ariaLabelForHandle,T=75,O=!0,S=(0,c.$j)(),[B,K]=(0,r.useState)(u??d),[U,F]=(0,r.useState)(T);(0,r.useEffect)(()=>{u!=null&&u!==B&&K(u)},[u,B]),(0,r.useEffect)(()=>{const W=getComputedStyle(m.current),R=W.getPropertyValue("font-weight")||"normal",G=W.getPropertyValue("font-size")||"16px",w=W.getPropertyValue("font-family")||"Arial",_="0",Q=4,ae=8,q=Math.max((x+(b||0)).toString().length,(x-(b||0)).toString().length)+Q,k=_.repeat(q),ee=f(k,`${R} ${G} ${w}`);ee&&F(ee+ae*2)},[x,b]);const I=(0,r.useCallback)(W=>{const R=typeof W=="number"?W:W[0];K(R),E&&E(R)},[K,E]),V=(0,r.useCallback)(W=>{let R=W;(Number.isNaN(R)||!R)&&(R=0),K(R),E&&E(R)},[E]),M=(0,i.$)(S,O,!!D),L=g(S,U),N=O?[]:[M.sliderInputVertical];return(0,n.jsxs)("div",{className:(0,a.cx)(M.container,M.slider),children:[(0,n.jsx)(s.Global,{styles:M.slider}),(0,n.jsxs)("div",{className:(0,a.cx)(M.sliderInput,...N),children:[(0,n.jsx)(l.A,{min:d,max:x,step:b,defaultValue:u,value:B,onChange:I,vertical:!O,reverse:!1,ariaLabelForHandle:P,marks:D,included:C}),(0,n.jsx)("span",{className:L.numberInputWrapper,ref:m,children:(0,n.jsx)(o.Q,{id:p,value:B,onChange:V,max:x,min:d,step:b})})]})]})};function f(u,E){const p=document.createElement("canvas").getContext("2d");return p?(p.font=E,p.measureText(u).width):null}const g=(u,E)=>({numberInputWrapper:(0,a.css)({marginLeft:u.spacing(3),maxHeight:"32px",maxWidth:E,minWidth:E,overflow:"visible",width:"100%"})})},21266:(ne,A,e)=>{"use strict";e.d(A,{O:()=>a});function n(s){let l=s.length-s.trimLeft().length;if(l){let r=s[0];for(;--l;)r+=s[0];return r}return""}function a(){return{onKeyDown(s,l,r){const c=l.value;if(c.selection.isExpanded)return r();if(s.key==="Enter"){s.preventDefault();const{startBlock:i}=c,o=i.text,h=n(o);return l.splitBlock().insertText(h).focus()}return r()}}}},21275:(ne,A,e)=>{"use strict";e.d(A,{$C:()=>d,CO:()=>c,GW:()=>P,OA:()=>x,Ol:()=>u,QB:()=>C,WL:()=>p,Yb:()=>f,Ye:()=>T,ZG:()=>o,aD:()=>s,bf:()=>l,bt:()=>b,dM:()=>v,lt:()=>m,rw:()=>r,ss:()=>D,yV:()=>y});const n={tags:[]},a={exclude:!1,ids:[]},s={list:[]},l={builtIn:0,enable:!0,hide:!1},r={allowCustomValue:!0,includeAll:!1,multi:!1,options:[],skipUrlSync:!1,staticOptions:[]};var c=(O=>(O[O.never=0]="never",O[O.onDashboardLoad=1]="onDashboardLoad",O[O.onTimeRangeChanged=2]="onTimeRangeChanged",O))(c||{}),i=(O=>(O[O.dontHide=0]="dontHide",O[O.hideLabel=1]="hideLabel",O[O.hideVariable=2]="hideVariable",O[O.inControlsMenu=3]="inControlsMenu",O))(i||{}),o=(O=>(O[O.alphabeticalAsc=1]="alphabeticalAsc",O[O.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",O[O.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",O[O.alphabeticalDesc=2]="alphabeticalDesc",O[O.disabled=0]="disabled",O[O.naturalAsc=7]="naturalAsc",O[O.naturalDesc=8]="naturalDesc",O[O.numericalAsc=3]="numericalAsc",O[O.numericalDesc=4]="numericalDesc",O))(o||{});const h={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var f=(O=>(O.ContinuousBlPu="continuous-BlPu",O.ContinuousBlYlRd="continuous-BlYlRd",O.ContinuousBlues="continuous-blues",O.ContinuousGrYlRd="continuous-GrYlRd",O.ContinuousGreens="continuous-greens",O.ContinuousPurples="continuous-purples",O.ContinuousRdYlGr="continuous-RdYlGr",O.ContinuousReds="continuous-reds",O.ContinuousYlBl="continuous-YlBl",O.ContinuousYlRd="continuous-YlRd",O.Fixed="fixed",O.PaletteClassic="palette-classic",O.PaletteClassicByName="palette-classic-by-name",O.Shades="shades",O.Thresholds="thresholds",O))(f||{});const g={h:9,w:12,x:0,y:0};var u=(O=>(O.Absolute="absolute",O.Percentage="percentage",O))(u||{});const E={steps:[]};var v=(O=>(O.RangeToText="range",O.RegexToText="regex",O.SpecialValue="special",O.ValueToText="value",O))(v||{}),p=(O=>(O.Empty="empty",O.False="false",O.NaN="nan",O.Null="null",O.NullAndNan="null+nan",O.True="true",O))(p||{});const m={hidden:!1,quick_ranges:[],refresh_intervals:["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"]};var y=(O=>(O[O.Crosshair=1]="Crosshair",O[O.Off=0]="Off",O[O.Tooltip=2]="Tooltip",O))(y||{});const d=0,x={links:[],repeatDirection:"h",targets:[],transformations:[],transparent:!1},b={overrides:[]},D={id:""},C={links:[],mappings:[]},P={collapsed:!1,panels:[]},T={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:42,tags:[],timezone:"browser"}},21285:(ne,A,e)=>{"use strict";e.d(A,{K:()=>g,d:()=>f});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(96540),c=e(37615),i=e(63142),o=e(35484),h=e(30703);const f=(0,r.forwardRef)(({value:E,checked:v,onChange:p,id:m,label:y,disabled:d,invalid:x=!1,...b},D)=>{v&&(0,c.l)("Switch","checked prop","value");const C=(0,i.of)(u),P=(0,r.useRef)(m||(0,s.uniqueId)("switch-"));return(0,n.jsxs)("div",{className:(0,a.cx)(C.switch,x&&C.invalid),children:[(0,n.jsx)("input",{type:"checkbox",role:"switch",disabled:d,checked:E,onChange:T=>{!d&&p?.(T)},id:P.current,...b,ref:D}),(0,n.jsx)("label",{htmlFor:P.current,"aria-label":y,children:(0,n.jsx)(h.I,{name:"check",size:"xs"})})]})});f.displayName="Switch";const g=(0,r.forwardRef)(({transparent:E,className:v,showLabel:p,label:m,value:y,id:d,invalid:x,...b},D)=>{const C=(0,i.of)(u,E);return(0,n.jsxs)("div",{className:(0,a.cx)(C.inlineContainer,v,b.disabled&&C.disabled,x&&C.invalid),children:[p&&(0,n.jsx)("label",{htmlFor:d,className:(0,a.cx)(C.inlineLabel,y&&C.inlineLabelEnabled,"inline-switch-label"),children:m}),(0,n.jsx)(f,{...b,id:d,label:m,ref:D,value:y})]})});g.displayName="Switch";const u=(E,v)=>({switch:(0,a.css)({width:E.spacing(4),height:E.spacing(2),position:"relative",lineHeight:1,input:{height:"100%",width:"100% !important",opacity:0,zIndex:-1e3,position:"absolute","&:checked + label":{background:E.colors.primary.main,borderColor:E.colors.primary.main,"&:hover":{background:E.colors.primary.shade},svg:{transform:`translate3d(${E.spacing(2.25)}, -50%, 0)`,background:E.colors.primary.contrastText,color:E.colors.primary.main}},"&:disabled + label":{background:E.colors.action.disabledBackground,borderColor:E.colors.border.weak,cursor:"not-allowed",svg:{background:E.colors.text.disabled}},"&:disabled:checked + label":{background:E.colors.primary.transparent,svg:{color:E.colors.primary.contrastText}},"&:focus + label, &:focus-visible + label":(0,o.getFocusStyles)(E),"&:focus:not(:focus-visible) + label":(0,o.getMouseFocusStyles)(E)},label:{width:"100%",height:"100%",cursor:"pointer",borderRadius:E.shape.radius.pill,background:E.components.input.background,border:`1px solid ${E.components.input.borderColor}`,transition:"all 0.3s ease","&:hover":{borderColor:E.components.input.borderHover},svg:{position:"absolute",display:"block",color:"transparent",width:E.spacing(1.5),height:E.spacing(1.5),borderRadius:E.shape.radius.circle,background:E.colors.text.secondary,boxShadow:E.shadows.z1,left:0,top:"50%",transform:`translate3d(${E.spacing(.25)}, -50%, 0)`,transition:"transform 0.2s cubic-bezier(0.19, 1, 0.22, 1)","@media (forced-colors: active)":{border:`1px solid ${E.colors.primary.contrastText}`}}}}),inlineContainer:(0,a.css)({padding:E.spacing(0,1),height:E.spacing(E.components.height.md),display:"inline-flex",alignItems:"center",background:v?"transparent":E.components.input.background,border:`1px solid ${v?"transparent":E.components.input.borderColor}`,borderRadius:E.shape.radius.default,"&:hover":{border:`1px solid ${v?"transparent":E.components.input.borderHover}`,".inline-switch-label":{color:E.colors.text.primary}}}),disabled:(0,a.css)({backgroundColor:v?"transparent":"rgba(204, 204, 220, 0.04)",color:"rgba(204, 204, 220, 0.6)",border:`1px solid ${v?"transparent":"rgba(204, 204, 220, 0.04)"}`}),inlineLabel:(0,a.css)({cursor:"pointer",paddingRight:E.spacing(1),color:E.colors.text.secondary,whiteSpace:"nowrap"}),inlineLabelEnabled:(0,a.css)({color:E.colors.text.primary}),invalid:(0,a.css)({"input + label, input:checked + label, input:hover + label":{border:`1px solid ${E.colors.error.border}`}})})},21348:(ne,A,e)=>{"use strict";e.d(A,{Q:()=>l,j:()=>r});var n=e(74848),a=e(22803);const l={animationName:(0,a.keyframes)({"0%":{opacity:0},"100%":{opacity:1}}),animationDelay:"100ms",animationTimingFunction:"ease-in",animationDuration:"100ms",animationFillMode:"backwards"},r=(c,i)=>Object.assign(c,{Skeleton:h=>(0,n.jsx)(i,{...h,rootProps:{style:l}})})},21539:(ne,A,e)=>{"use strict";e.d(A,{i:()=>s});var n=e(74848);function a(l){return l<20?.9:l<26?.8:.6}const s=({value:l,className:r,style:c,...i})=>{const o=(l.prefix??"").length>0,h=(l.suffix??"").length>0;let f;if(c&&typeof c.fontSize=="number"&&!Number.isNaN(c.fontSize)){const g=c.fontSize,u=a(g);f={fontSize:g*u}}return(0,n.jsx)("div",{className:r,style:c,...i,children:(0,n.jsxs)("div",{children:[o&&(0,n.jsx)("span",{children:l.prefix}),(0,n.jsx)("span",{children:l.text}),h&&(0,n.jsx)("span",{style:f,children:l.suffix})]})})};s.displayName="FormattedDisplayValue"},21764:(ne,A,e)=>{"use strict";e.d(A,{S:()=>a});var n=e(23265);function a({dashboardUID:s,panelId:l,poll:r=!1}){const{result:c,loading:i,error:o}=(0,n.kU)(s,l,r);return{rules:c?c.flatMap(f=>f.groups).flatMap(f=>f.rules):[],errors:o?[o]:[],loading:i}}},21834:(ne,A,e)=>{"use strict";e.d(A,{nE:()=>s,r6:()=>a,xB:()=>n});var n=(l=>(l[l.AlphaAsc=1]="AlphaAsc",l[l.AlphaDesc=2]="AlphaDesc",l[l.Importance=3]="Importance",l[l.TimeAsc=4]="TimeAsc",l[l.TimeDesc=5]="TimeDesc",l))(n||{}),a=(l=>(l.Default="default",l.Custom="custom",l))(a||{}),s=(l=>(l.List="list",l.Stat="stat",l))(s||{})},21875:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>v,MH:()=>i,Nh:()=>o,Oy:()=>u,SH:()=>h,TO:()=>r,jA:()=>l,sr:()=>c});var n=e(65307);const a={settings:{},providerStatuses:{},isLoading:!1,providers:[]},s=(0,n.Z0)({name:"authConfig",initialState:a,reducers:{settingsUpdated:(p,m)=>({...p,settings:m.payload}),providerStatusesLoaded:(p,m)=>({...p,providerStatuses:m.payload}),loadingBegin:p=>({...p,isLoading:!0}),loadingEnd:p=>({...p,isLoading:!1}),setError:(p,m)=>({...p,updateError:m.payload}),resetError:p=>({...p,updateError:void 0}),setWarning:(p,m)=>({...p,warning:m.payload}),resetWarning:p=>({...p,warning:void 0}),providersLoaded:(p,m)=>({...p,providers:m.payload})}}),{settingsUpdated:l,providerStatusesLoaded:r,loadingBegin:c,loadingEnd:i,setError:o,resetError:h,setWarning:f,resetWarning:g,providersLoaded:u}=s.actions,v={authConfig:s.reducer}},22055:(ne,A,e)=>{"use strict";e.d(A,{t:()=>o});var n=e(74848),a=e(22429),s=e(16200),l=e(37680),r=e(66769);const i=`You are an expert in creating Grafana Panels.
You will be given the title and description of the dashboard the panel is in as well as the JSON for the panel.
Your goal is to write a descriptive and concise panel description.
The panel description is meant to explain the purpose of the panel, not just its attributes.
Do not refer to the panel; simply describe its purpose.
There should be no numbers in the description except for thresholds.
The description should be, at most, 200 characters.`,o=({onGenerate:f,panel:g})=>(0,n.jsx)(s.n,{messages:()=>h(g),onGenerate:f,eventTrackingSrc:l.ec.panelDescription,toggleTipTitle:"Improve your panel description"});function h(f){const g=(0,a.UA)().getCurrent(),u=(0,r.hn)(f);return[{content:i,role:r.Xh.system},{content:`The panel is part of a dashboard with the title: ${g.title}
The panel is part of a dashboard with the description: ${g.description}
This is the JSON which defines the panel: ${u}`,role:r.Xh.user}]}},22079:(ne,A,e)=>{"use strict";e.d(A,{Lp:()=>h,e0:()=>o});var n=e(92138),a=e(36490),s=e(45863),l=e(73427),r=e(62635),c=e(8285);function i(f){return locationUtil.getUrlForPartial(locationService.getLocation(),{viewPanel:f.getPathId(),editPanel:void 0})}function o(f){return n.I.getUrlForPartial(a.Ny.getLocation(),{editPanel:f,viewPanel:void 0})}function h(f){const g=f.getPlugin(),u=(0,c.un)(f);if(!l.TP.hasAccessToExplore()||g?.meta.skipDataQuery||!u)return Promise.resolve(void 0);const E=s.jh.getTimeRange(f);return(0,r.Xe)({queries:u.state.queries,dsRef:u.state.datasource,timeRange:E.state.value,scopedVars:{__sceneObject:{value:f}},adhocFilters:u.state.data?.request?.filters})}},22099:(ne,A,e)=>{"use strict";e.d(A,{CP:()=>c,DG:()=>l,RC:()=>i,aR:()=>r});var n=e(74848),a=e(96540),s=e(54092);function l(o){return o?o.type===s.u6.link&&("path"in o||"onClick"in o):!1}function r(o){return o?o.type===s.u6.component&&"component"in o:!1}function c({props:o,components:h,limit:f,pluginId:g}){if(!h.length)return null;const u=[];for(const E of h){const{meta:v}=E;if(!(g&&typeof g=="string"&&g!==v.pluginId)&&!(g&&Array.isArray(g)&&!g.includes(v.pluginId))&&!(g instanceof RegExp&&!g.test(v.pluginId))){if(f===void 0){u.push(E);continue}if(a.createElement(E,o)!==null&&u.push(E),u.length>=f)break}}return u}function i({props:o,components:h,limit:f,pluginId:g}){const u=c({props:o,components:h,limit:f,pluginId:g});return u?.length?(0,n.jsx)(n.Fragment,{children:u.map(E=>(0,n.jsx)(E,{...o},E.meta.id))}):null}},22175:(ne,A,e)=>{"use strict";e.d(A,{$7:()=>F,R4:()=>B,dF:()=>S,dJ:()=>U,m:()=>O,yH:()=>P});var n=e(74848),a=e(96540),s=e(1906),l=e(51898),r=e(92745),c=e(43173),i=e(96822),o=e(63527),h=e(21285),f=e(87105),g=e(22055),u=e(76623),E=e(25797),v=e(51156),p=e(82345),m=e(33143),y=e(81657),d=e(20246),x=e(3688),b=e(70030),D=e(1682),C=e(8285);function P(I){const V=new E.C({title:(0,r.t)("dashboard-scene.get-panel-frame-options.descriptor.title.panel-options","Panel options"),id:"Panel options",isOpenDefault:!0}),M=D.b4.getPanelLinks(I),L=M?.state.rawLinks??[],N=(0,C.YQ)(I),W=I.parent;return V.addItem(new v.v({title:(0,r.t)("dashboard-scene.get-panel-frame-options.title.title","Title"),id:"panel-frame-options-title",value:I.state.title,popularRank:1,render:function(G){return(0,n.jsx)(O,{id:G.props.id,panel:I})},addon:c.$.featureToggles.dashgpt&&(0,n.jsx)(u.h,{onGenerate:R=>U(I,R),panel:(0,b.Z6)(I),dashboard:(0,b.Uy)(N)})})).addItem(new v.v({title:(0,r.t)("dashboard-scene.get-panel-frame-options.title.description","Description"),id:"panel-frame-options-description",value:I.state.description,render:function(G){return(0,n.jsx)(S,{id:G.props.id,panel:I})},addon:c.$.featureToggles.dashgpt&&(0,n.jsx)(g.t,{onGenerate:R=>I.setState({description:R}),panel:(0,b.Z6)(I)})})).addItem(new v.v({title:(0,r.t)("dashboard-scene.get-panel-frame-options.title.transparent-background","Transparent background"),id:"panel-frame-options-transparent-bg",render:function(G){return(0,n.jsx)(B,{id:G.props.id,panel:I})}})).addCategory(new E.C({title:(0,r.t)("dashboard-scene.get-panel-frame-options.title.panel-links","Panel links"),id:"Panel links",isOpenDefault:!1,itemsCount:L?.length}).addItem(new v.v({title:(0,r.t)("dashboard-scene.get-panel-frame-options.title.panel-links","Panel links"),id:"panel-frame-options-panel-links",render:()=>(0,n.jsx)(T,{panelLinks:M??void 0})}))),(0,x.y)(W)&&W.getOptions?.().forEach(R=>V.addCategory(R)),V}function T({panelLinks:I}){const{rawLinks:V}=I?I.useState():{rawLinks:[]};return(0,n.jsx)(i.e,{links:V,onChange:M=>I?.setState({rawLinks:M}),getSuggestions:p.Fq,data:[]})}function O({panel:I,isNewElement:V,id:M}){const{title:L}=I.useState(),N=I.getPanelContext().app!==s.Jk.PanelEditor,[W,R]=a.useState(I.state.title);let G=(0,d.z4)({autoFocus:N&&V});return(0,n.jsx)(o.p,{ref:G,"data-testid":l.Tp.components.PanelEditor.OptionsPane.fieldInput("Title"),id:M,value:L,onFocus:()=>R(L),onBlur:()=>U(I,L,W),onChange:w=>K(I,w.currentTarget.value)})}function S({panel:I,id:V}){const{description:M}=I.useState(),[L,N]=a.useState(I.state.description);return(0,n.jsx)(f.f,{id:V,value:M,onChange:W=>I.setState({description:W.currentTarget.value}),onFocus:()=>N(I.state.description),onBlur:()=>{m.cc.edit({description:(0,r.t)("dashboard.edit-actions.panel-description","Change panel description"),source:I,perform:()=>I.setState({description:M}),undo:()=>I.setState({description:L})})}})}function B({panel:I,id:V}){const{displayMode:M="default"}=I.useState(),L=()=>{const N=M==="default"?"transparent":"default";m.cc.edit({description:(0,r.t)("dashboard.edit-actions.panel-background","Change panel background"),source:I,perform:()=>I.setState({displayMode:N}),undo:()=>I.setState({displayMode:M})})};return(0,n.jsx)(h.d,{value:M==="transparent",id:V,onChange:L})}function K(I,V){I.setState({title:V,hoverHeader:F(V,I.state.$timeRange)})}function U(I,V,M=I.state.title){V!==M&&m.cc.edit({description:(0,r.t)("dashboard.edit-actions.panel-title","Change panel title"),source:I,perform:()=>K(I,V),undo:()=>K(I,M)})}function F(I,V){return!(I!==""||V instanceof y.v&&!V.state.hideTimeOverride&&(V.state.timeFrom||V.state.timeShift))}},22429:(ne,A,e)=>{"use strict";e.d(A,{UA:()=>u});var n=e(32899),a=e(92745),s=e(45229),l=e(83873),r=e(13956),c=e(87745),i=e(7817),o=e(17097);class h{constructor(){this.onRemovePanel=v=>{const p=this.getCurrent();p&&(0,o.FC)(p,p.getPanelById(v),!0)},s.l.subscribe(c.Vz,v=>this.onRemovePanel(v.payload))}create(v,p){return new i.G(v,p)}setCurrent(v){this.dashboard=v}getCurrent(){return this.dashboard}saveJSONDashboard(v){const p=JSON.parse(v);return(0,r.n)().saveDashboard({dashboard:p,folderUid:this.dashboard?.meta.folderUid||p.folderUid,message:(0,a.t)("dashboard.dashboard-srv.message.edit-dashboard-json","Edit Dashboard JSON"),k8s:this.dashboard?.meta.k8s})}saveDashboard(v,p){return(0,r.n)().saveDashboard({message:v.message,folderUid:v.folderUid,dashboard:v.dashboard.getSaveModelClone(),showErrorAlert:p?.showErrorAlert})}starDashboard(v,p){const m=(0,l.AI)(),y={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+v,method:p?"DELETE":"POST"};return m.request(y).then(()=>{const d=!p;this.dashboard?.uid===v&&(this.dashboard.meta.isStarred=d);const x=d?(0,a.t)("notifications.starred-dashboard","Dashboard starred"):(0,a.t)("notifications.unstarred-dashboard","Dashboard unstarred");return s.l.emit(n.r1.alertSuccess,[x]),d})}}let f;function g(E){f=E}function u(){return f||(f=new h),f}},22465:(ne,A,e)=>{"use strict";e.d(A,{K:()=>l});var n=e(74848),a=e(96540),s=e(79450);class l extends a.Component{static{this.contextType=s.b}constructor(c){super(c),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(c){return{hasError:!0,error:c,errorInfo:null}}componentDidCatch(c,i){this.props.onError?this.props.onError(c,i):console.error(`Plugin "${this.context?.meta.id}" failed to load:`,c,i),this.setState({error:c,errorInfo:i})}render(){const c=this.props.fallback;return this.state.hasError?c?(0,n.jsx)(c,{error:this.state.error,errorInfo:this.state.errorInfo}):null:this.props.children}}},22628:(ne,A,e)=>{"use strict";e.d(A,{DM:()=>l,T:()=>s,a3:()=>n,rh:()=>a});const n="grafana.com/provenance",a="none";var s=(r=>(r.Provenance="grafana.com/provenance",r.InUseRoutes="grafana.com/inUse/routes",r.InUseRules="grafana.com/inUse/rules",r.AccessWrite="grafana.com/access/canWrite",r.AccessAdmin="grafana.com/access/canAdmin",r.AccessDelete="grafana.com/access/canDelete",r))(s||{});const l="user-defined"},22658:(ne,A,e)=>{"use strict";e.d(A,{O:()=>y});var n=e(2543);function a(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function s(d){return!!d&&typeof d==="object"}function l(d){if(d===void 0)return"";if(d===null||typeof d=="object"&&!d.constructor)return"Object";const b=/function ([^(]*)/.exec(d.constructor.toString());return b&&b.length>1?b[1]:""}function r(d){return d===null?"null":typeof d}function c(d,x){const b=r(d);return b==="null"||b==="undefined"?b:(b==="string"&&(x='"'+a(x)+'"'),b==="function"?d.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":x)}let i="";function o(d){return s(d)?(i=l(d),Array.isArray(d)&&(i+="["+d.length+"]")):i=c(d,d.toString()),i}function h(d){return`json-formatter-${d}`}function f(d,x,b){const D=document.createElement(d);return x&&D.classList.add(h(x)),b!==void 0&&(b instanceof Node?D.appendChild(b):D.appendChild(document.createTextNode(String(b)))),D}const g=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,u=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,E=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,v=10,p=typeof window<"u"&&window.requestAnimationFrame||(d=>(d(),0)),m={animateOpen:!0,animateClose:!0};class y{constructor(x,b=1,D=m,C){this.json=x,this.open=b,this.config=D,this.key=C,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(x){this._isOpen=x}get isDate(){return this.type==="string"&&(g.test(this.json)||E.test(this.json)||u.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return s(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return l(this.json)}get type(){return r(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(x=>x||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(h("open")))}openAtDepth(x=1){x<0||(this.open=x,this.isOpen=x!==0,this.element&&(this.removeChildren(!1),x===0?this.element.classList.remove(h("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(h("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,n.isNumber)(this.json[0])||(0,n.isNumber)(this.json[1]))}renderArray(){const x=f("span");return x.appendChild(f("span","bracket","[")),this.isNumberArray()?(this.json.forEach((b,D)=>{D>0&&x.appendChild(f("span","array-comma",",")),x.appendChild(f("span","number",b))}),this.skipChildren=!0):x.appendChild(f("span","number",this.json.length)),x.appendChild(f("span","bracket","]")),x}render(x=!1){this.element=f("div","row");const b=f("a","toggler-link"),D=f("span","toggler");if(this.isObject&&b.appendChild(D),this.hasKey&&b.appendChild(f("span","key",`${this.key}:`)),this.isObject){const P=f("span","value"),T=f("span"),O=f("span","constructor-name",this.constructorName);if(T.appendChild(O),this.isArray){const S=this.renderArray();T.appendChild(S)}P.appendChild(T),b.appendChild(P)}else{const P=this.isUrl?f("a"):f("span");P.classList.add(h(this.type)),this.isDate&&P.classList.add(h("date")),this.isUrl&&(P.classList.add(h("url")),P.setAttribute("href",this.json));const T=c(this.json,this.json);P.appendChild(document.createTextNode(T)),b.appendChild(P)}const C=f("div","children");return this.isObject&&C.classList.add(h("object")),this.isArray&&C.classList.add(h("array")),this.isEmpty&&C.classList.add(h("empty")),this.config&&this.config.theme&&this.element.classList.add(h(this.config.theme)),this.isOpen&&this.element.classList.add(h("open")),x||this.element.appendChild(b),this.skipChildren?b.removeChild(D):this.element.appendChild(C),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&b.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(x=!1){const b=this.element&&this.element.querySelector(`div.${h("children")}`);if(!(!b||this.isEmpty))if(x){let D=0;const C=()=>{const P=this.keys[D],T=new y(this.json[P],this.open-1,this.config,P);b.appendChild(T.render()),D+=1,D<this.keys.length&&(D>v?C():p(C))};p(C)}else this.keys.forEach(D=>{const C=new y(this.json[D],this.open-1,this.config,D);b.appendChild(C.render())})}removeChildren(x=!1){const b=this.element&&this.element.querySelector(`div.${h("children")}`);if(x){let D=0;const C=()=>{b&&b.children.length&&(b.removeChild(b.children[0]),D+=1,D>v?C():p(C))};p(C)}else b&&(b.innerHTML="")}}},22747:(ne,A,e)=>{"use strict";e.d(A,{H:()=>i,j:()=>h});var n=e(77154),a=e(45229),s=e(52161),l=e(4735),r=e(87745),c=e(8095);function i(f,g){return new Promise(u=>{if(f.datasource?.uid===s.vv){o(g,f),u(!0);return}a.A.publish(new r.bY({title:"Change to panel embedded data",text:"If you want to change the data shown in this panel Grafana will need to remove the panels current query and replace it with a snapshot of the current data. This enables you to edit the data.",yesText:"Continue",icon:"pen",onConfirm:()=>{o(g,f),u(!0)},onDismiss:()=>{u(!1)}}))})}function o(f,g){const u=f.map(v=>(0,n.Nw)(v)),E={refId:"A",queryType:c.nj.Snapshot,snapshot:u,datasource:{uid:s.vv}};g.updateQueries({dataSource:{uid:s.vv},queries:[E]}),g.refresh()}function h(f){return(g,u,E)=>{(0,l.v)(g).subscribe(async v=>{const p=[];v.dataFrames.forEach(m=>{const y=(0,n.Nw)(m);p.push(y)}),f({...c.dx,snapshot:p,file:v.file},u)})}}},22787:(ne,A,e)=>{"use strict";e.d(A,{a:()=>v});var n=e(74848),a=e(22803),s=e(18828),l=e(43107),r=e(93225),c=e(59875),i=e(96540),o=e(92745),h=e(63142),f=e(76319),g=e(41654),u=e(53428),E=e(35621);function v(y){const{title:d,children:x,isOpen:b=!1,closeOnEscape:D=!0,closeOnBackdropClick:C=!0,className:P,contentClassName:T,onDismiss:O,onClickBackdrop:S,trapFocus:B=!0}=y,K=(0,h.of)(E.o),U=(0,i.useRef)(null),{overlayProps:F,underlayProps:I}=(0,r.e)({isKeyboardDismissDisabled:!D,isOpen:b,onClose:O},U),{dialogProps:V,titleProps:M}=(0,s.s)({},U);if(!b)return null;const L=(0,a.cx)(K.modalHeader,typeof d!="string"&&K.modalHeaderWithTabs);return(0,n.jsxs)(c.Sf,{children:[(0,n.jsx)("div",{role:"presentation",className:K.modalBackdrop,onClick:S||(C?O:void 0),...I}),(0,n.jsx)(l.n1,{contain:B,autoFocus:!0,restoreFocus:!0,children:(0,n.jsxs)("div",{className:(0,a.cx)(K.modal,P),ref:U,...F,...V,children:[(0,n.jsxs)("div",{className:L,children:[typeof d=="string"&&(0,n.jsx)(m,{...y,title:d,id:M.id}),typeof d!="string"&&d,(0,n.jsx)("div",{className:K.modalHeaderClose,children:(0,n.jsx)(f.K,{name:"times",size:"xl",onClick:O,"aria-label":(0,o.t)("grafana-ui.modal.close-tooltip","Close")})})]}),(0,n.jsx)("div",{className:(0,a.cx)(K.modalContent,T),children:x})]})})]})}function p({leftItems:y,children:d}){const x=(0,h.of)(E.o);return y?(0,n.jsx)("div",{className:x.modalButtonRow,children:(0,n.jsxs)(g.B,{justifyContent:"space-between",children:[(0,n.jsx)(g.B,{justifyContent:"flex-start",gap:2,children:y}),(0,n.jsx)(g.B,{justifyContent:"flex-end",gap:2,children:d})]})}):(0,n.jsx)("div",{className:x.modalButtonRow,children:(0,n.jsx)(g.B,{justifyContent:"flex-end",gap:2,wrap:"wrap",children:d})})}v.ButtonRow=p;function m({icon:y,iconTooltip:d,title:x,id:b}){return(0,n.jsx)(u.r,{icon:y,iconTooltip:d,title:x,id:b})}},22914:(ne,A,e)=>{"use strict";e.d(A,{u:()=>Xe,c:()=>Ae});var n={};e.r(n),e.d(n,{default:()=>W});var a={};e.r(a),e.d(a,{getPrecision:()=>ae,getScaledDecimals:()=>w,getStringPrecision:()=>q,grafanaTimeFormat:()=>_,logp:()=>Q,tickStep:()=>G});var s=e(11594),l=e(78830),r=e(94644),c=e(1906),i=e(43173),o=e(35216),h=e(29090),f=e(63827),g=e(19203),u=e(6223),E=e(34796),v=e.n(E),p=e(54087),m=e(80851),y=e(32176),d=e(31221),x=e(91520),b=e(92275),D=e(82013),C=e(2341),P=e(19538),T=e(16207),O=e(98215),S=e(33239),B=e(92243),K=e(11244),U=e(873),F=e(65642),I=e(73427),V=e(83873),M=e(67020),L=e(58047),N=e(49344);function W(Me,Te){Te=Te||{};const $e=Te.delimiter||".";let Re=Te.maxDepth||3,Ke=1;const Ve={};function Se(Ye,Ue){Object.entries(Ye).forEach(([je,Qe])=>{const He=Te?.safe&&Array.isArray(Qe),de=Object.prototype.toString.call(Qe)==="[object Object]",ve=Ue?Ue+$e+je:je;if(Te?.maxDepth||(Re=Ke+1),!He&&de&&Object.keys(Qe).length&&Ke<Re)return++Ke,Se(Qe,ve);Ve[ve]=Qe})}return Se(Me,null),Ve}var R=e(77197);function G(Me,Te,$e){const Re=Math.sqrt(50),Ke=Math.sqrt(10),Ve=Math.sqrt(2),Se=Math.abs(Te-Me)/Math.max(0,$e);let Ye=Math.pow(10,Math.floor(Math.log(Se)/Math.LN10));const Ue=Se/Ye;return Ue>=Re?Ye*=10:Ue>=Ke?Ye*=5:Ue>=Ve&&(Ye*=2),Te<Me?-Ye:Ye}function w(Me,Te){return Me-Math.floor(Math.log(Te)/Math.LN10)}function _(Me,Te,$e){if(Te&&$e&&Me){const Re=$e-Te,Ke=Re/Me/1e3,Ve=864e5,Se=31536e6;return Ke<=45?"HH:mm:ss":Ke<=7200||Re<=Ve?"HH:mm":Ke<=8e4?"MM/DD HH:mm":Ke<=2419200||Re<=Se?"MM/DD":"YYYY-MM"}return"HH:mm"}function Q(Me,Te){return Math.log(Me)/Math.log(Te)}function ae(Me){const Te=Me.toString();return q(Te)}function q(Me){if(isNaN(Me))return 0;const Te=Me.indexOf(".");return Te===-1?0:Me.length-Te-1}const k=K;k.PanelPlugin=T.m,k.DataSourcePlugin=r.tD,k.AppPlugin=c.hX,k.DataSourceApi=r.mA;const ee=["jquery.flot.crosshair","jquery.flot.events","jquery.flot.fillbelow","jquery.flot.gauge","jquery.flot.pie","jquery.flot.selection","jquery.flot.stack","jquery.flot.stackpercent","jquery.flot.time","jquery.flot"].reduce((Me,Te)=>({...Me,[Te]:{fakeDep:1}}),{}),j={"@emotion/css":()=>Promise.resolve().then(e.bind(e,22803)),"@emotion/react":()=>Promise.resolve().then(e.bind(e,17437)),"@grafana/data":O,"@grafana/data/unstable":()=>e.e(2223).then(e.bind(e,2223)),"@grafana/runtime":B,"@grafana/runtime/unstable":()=>e.e(3259).then(e.bind(e,83259)),"@grafana/slate-react":()=>Promise.resolve().then(e.bind(e,29317)),"@grafana/ui":k,"@grafana/ui/unstable":()=>Promise.all([e.e(1142),e.e(1492)]).then(e.bind(e,58045)),"@kusto/monaco-kusto":()=>Promise.all([e.e(630),e.e(7396),e.e(4350)]).then(e.bind(e,20582)),"app/core/app_events":{default:I.lE,__useDefault:!0},"app/core/config":{default:F.Ay,__useDefault:!0},"app/core/core":{appEvents:I.lE,contextSrv:I.TP},"app/core/services/backend_srv":{BackendSrv:V.Mf,getBackendSrv:V.AI},"app/core/table_model":{default:U.A,__useDefault:!0},"app/core/time_series":{default:L.A,__useDefault:!0},"app/core/time_series2":{default:L.A,__useDefault:!0},"app/core/utils/datemath":S,"app/core/utils/flatten":n,"app/core/utils/kbn":{default:R.A,__useDefault:!0},"app/core/utils/ticks":a,"app/features/dashboard/impression_store":{impressions:M.A},d3:()=>Promise.all([e.e(407),e.e(5995)]).then(e.bind(e,55995)),emotion:()=>Promise.resolve().then(e.bind(e,22803)),i18next:()=>e.e(5757).then(e.bind(e,55757)).then(Me=>Me.getI18nInstance()),jquery:{default:v(),__useDefault:!0},...ee,lodash:()=>Promise.resolve().then(e.t.bind(e,2543,23)).then(Me=>({...Me,move:N.b,__useDefault:!0})),moment:()=>Promise.resolve().then(e.t.bind(e,95093,23)).then(Me=>({...Me,__useDefault:!0})),prismjs:()=>Promise.resolve().then(e.t.bind(e,28848,23)),react:()=>Promise.resolve().then(e.t.bind(e,96540,19)),"react-dom":()=>Promise.resolve().then(e.t.bind(e,40961,19)),"react-inlinesvg":()=>Promise.resolve().then(e.bind(e,55494)),"react-redux":()=>Promise.resolve().then(e.bind(e,71468)),"react-router-dom":()=>Promise.resolve().then(e.bind(e,71519)),"react-router":()=>Promise.resolve().then(e.bind(e,35557)),redux:()=>Promise.resolve().then(e.bind(e,14644)),rxjs:()=>Promise.all([e.e(4251),e.e(5091)]).then(e.bind(e,75091)),"rxjs/operators":()=>Promise.all([e.e(4251),e.e(2975)]).then(e.bind(e,32975)),slate:()=>Promise.resolve().then(e.bind(e,82611)),"slate-plain-serializer":()=>Promise.resolve().then(e.bind(e,75226)),"slate-react":()=>Promise.resolve().then(e.bind(e,29317))};var J=e(52060),Z=e(98060),te=e(61844);async function se(Me,Te,$e){const Re=await Me(Te,$e),Ke=Re.headers.get("content-type")||"";if(Z.Bu.test(Ke)){let Se=await Re.text();if((0,te.OD)(Re.url)){const Ye=(0,J.N)({url:Re.url,source:Se});return new Response(new Blob([Ye],{type:"text/javascript"}))}return new Response(new Blob([Se],{type:"text/javascript"}))}return Re}function ie(Me,Te,$e){try{const Re=Me.apply(this,[Te,$e]),Ke=re(Re);return(Ke.endsWith(".js")||Ke.endsWith(".css"))&&!(0,te.OD)(Ke)?(0,g.ni)(Ke):Ke}catch{if(Z.$b.test(Te)){const Ke=ue(Te),Ve=Me.apply(this,[Ke,$e]);return(0,g.ni)(Ve)}return console.warn(`SystemJS: failed to resolve '${Te}'`),Te}}function ce(Me,Te){if(new URL(Te,window.location.origin).pathname.endsWith(".css")&&!Me){const Ke=u.z.get(Te)?.default;Ke&&(document.adoptedStyleSheets=[...document.adoptedStyleSheets,Ke])}}function re(Me){return Me.startsWith(`${Z.XV}:`)?Me:(Me.endsWith("!")&&(Me=Me.slice(0,-1)),["css","js","json","wasm"].some(Re=>Me.endsWith(Re))?Me:Me+".js")}function ue(Me){const Te=Me.split("/")[1];let $e="";for(const[Ve]of u.z.entries())if(Ve.includes(Te)){$e=Ve;break}const Re=$e.lastIndexOf("/plugins");return Re===-1?`${i.$.appSubUrl??""}/public/${Me}`:`${$e.substring(0,Re)}/${Me}`}const X=(0,te.kB)(j);u.z.addImportMap({imports:X});const le=u.z.constructor.prototype;le.shouldFetch=function(Me){const Te=(0,g.QO)(Me);return/^[^#?]+\.(js)([?#].*)?$/.test(Me)?Te?.loadingStrategy!==s.xf.script:!0};const he=le.import;le.import=function(...Me){return he.apply(this,Me).then(Te=>Te&&Te.__useDefault?Te.default:Te)};const fe=le.fetch;le.fetch=function(Me,Te){return se(fe,Me,Te)};const Ce=le.resolve;le.resolve=ie.bind(le,Ce),le.onload=ce;function Ae(Me){if(i.$.featureToggles.enablePluginImporter)return f.y.importDataSource(Me);(0,l.M)(Me);const Te=Me.loadingStrategy??s.xf.fetch;return(0,h.j)({path:Me.module,version:Me.info?.version,loadingStrategy:Te,pluginId:Me.id,moduleHash:Me.moduleHash,translations:Me.translations}).then($e=>{if($e.plugin){const Re=$e.plugin;return Re.meta=Me,Re}if($e.Datasource){const Re=new r.tD($e.Datasource);return Re.setComponentsFromLegacyExports($e),Re.meta=Me,Re}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}const _e={};async function Xe(Me){if(i.$.featureToggles.enablePluginImporter)return f.y.importApp(Me);const Te=Me.id;return _e[Te]===void 0&&(_e[Te]=De(Me)),_e[Te]}async function De(Me){(0,l.M)(Me);const Te=await(0,h.j)({path:Me.module,version:Me.info?.version,pluginId:Me.id,loadingStrategy:Me.loadingStrategy??s.xf.fetch,moduleHash:Me.moduleHash,translations:Me.translations}),{plugin:$e=new c.hX}=Te;return $e.init(Me),$e.meta=Me,$e.setComponentsFromLegacyExports(Te),o.eY.register({pluginId:Me.id,configs:$e.exposedComponentConfigs||[]}),o.a9.register({pluginId:Me.id,configs:$e.addedComponentConfigs||[]}),o.lQ.register({pluginId:Me.id,configs:$e.addedLinkConfigs||[]}),o.rH.register({pluginId:Me.id,configs:$e.addedFunctionConfigs||[]}),$e}},22940:(ne,A,e)=>{"use strict";e.d(A,{K:()=>n});var n=(a=>(a[a.Isolate=0]="Isolate",a[a.Hide=1]="Hide",a))(n||{})},22971:(ne,A,e)=>{"use strict";e.d(A,{sF:()=>te,ZI:()=>X});var n=e(74848),a=e(22803),s=e(96540),l=e(70255),r=e(92745),c=e(63142),i=e(34213),o=e(45967),h=e(95943),f=e(70327),g=e(55143),u=e(74869),E=e(80218),v=e(23265),p=e(11940),m=e(74048),y=e(98127),d=e(17305),x=e(76267),b=e(95443),D=e(52161),C=e(29609),P=e(6106),T=e(57487),O=e(1972),S=e(40360),B=e(9368),K=e(3969),U=e(43173),F=e(30703),I=e(182);function V({rule:he}){const fe=(0,c.of)(M),Ce=C.p.grafana.rule(he.rulerRule);return(0,s.useMemo)(()=>Ce?(0,I.qf)(he.group.interval).exceedsLimit:!1,[he.group.interval,Ce])?(0,n.jsx)(o.m,{theme:"error",content:(0,n.jsx)("div",{children:(0,n.jsxs)(r.x6,{i18nKey:"alerting.rule-config-status.tooltip-min-interval",values:{minInterval:U.$.unifiedAlerting.minInterval,ruleInterval:he.group.interval},children:["A minimum evaluation interval of ",(0,n.jsx)("span",{className:fe.globalLimitValue,children:"{{minInterval}}"})," has been configured in Grafana and will be used instead of the ","{{ruleInterval}}"," interval configured for the Rule Group."]})}),children:(0,n.jsx)(F.I,{name:"stopwatch-slash",className:fe.icon})}):null}function M(he){return{globalLimitValue:(0,a.css)({fontWeight:he.typography.fontWeightBold}),icon:(0,a.css)({fill:he.colors.warning.text})}}var L=e(90186),N=e(22973);const W=({rule:he})=>{const fe=(0,c.of)(R);return(0,N.lf)(he.health)?(0,n.jsx)(o.m,{theme:"error",content:he.lastError||"No error message provided.",children:(0,n.jsxs)("div",{className:fe.warn,children:[(0,n.jsx)(F.I,{name:"exclamation-triangle"}),(0,n.jsx)("span",{children:(0,n.jsx)(r.x6,{i18nKey:"alerting.rule-health.error",children:"error"})})]})}):(0,n.jsx)(n.Fragment,{children:he.health})},R=he=>({warn:(0,a.css)({display:"inline-flex",flexDirection:"row",alignItems:"center",gap:he.spacing(1),color:he.colors.warning.text})});var G=e(74529),w=e(41654),_=e(68079),Q=e(24619),ae=e(67834),q=e(65420);const k=({rule:he,isDeleting:fe,isCreating:Ce,isPaused:Ae})=>{const _e=(0,c.of)(ee),{promRule:Xe,rulerRule:De}=he,Me=()=>Ae&&C.p.grafana.recordingRule(De)?(0,n.jsx)(o.m,{content:(0,r.t)("alerting.rule-state.recording-rule-state.content-recording-rule-evaluation-is-currently-paused","Recording rule evaluation is currently paused"),placement:"top",children:(0,n.jsxs)(ae.O,{state:"warning",children:[(0,n.jsx)(F.I,{name:"pause",size:"xs"}),(0,n.jsx)(r.x6,{i18nKey:"alerting.rule-state.paused",children:"Paused"})]})}):(0,n.jsx)(r.x6,{i18nKey:"alerting.rule-state.recording-rule",children:"Recording rule"}),Te=(0,s.useMemo)(()=>{if(C.R$.alertingRule(Xe)&&Xe.alerts?.length&&Xe.state!==Q.cF.Inactive){const $e=Xe.activeAt?new Date(Xe.activeAt):(0,C.Om)(Xe);if($e)return(0,n.jsxs)("span",{title:String($e),className:_e.for,children:[(0,n.jsxs)(r.x6,{i18nKey:"alerting.rule-state.for",values:{duration:(0,G.dU)({start:$e,end:new Date},!1)},children:["for ","{{duration}}"]})," "]})}return null},[Xe,_e]);return fe?(0,n.jsxs)(w.B,{gap:1,children:[(0,n.jsx)(_.y,{}),(0,n.jsx)(r.x6,{i18nKey:"alerting.rule-state.deleting",children:"Deleting"})]}):Ce?(0,n.jsxs)(w.B,{gap:1,children:[(0,n.jsx)(_.y,{}),(0,n.jsx)(r.x6,{i18nKey:"alerting.rule-state.creating",children:"Creating"})]}):C.R$.alertingRule(Xe)?(0,n.jsxs)(w.B,{gap:1,children:[(0,n.jsx)(q.C,{state:Xe.state,isPaused:Ae}),!Ae&&Te]}):Xe&&C.R$.recordingRule(Xe)?(0,n.jsx)(Me,{}):(0,n.jsx)(r.x6,{i18nKey:"alerting.rule-state.na",children:"n/a"})},ee=he=>({for:(0,a.css)({fontSize:he.typography.bodySmall.fontSize,color:he.colors.text.secondary,whiteSpace:"nowrap",paddingTop:"2px"})}),j=(0,u.wS)(),{useLazyGetRuleGroupForNamespaceQuery:J}=f.hK,{useLazyDiscoverDsFeaturesQuery:Z}=g.L,te=({rules:he,className:fe,showGuidelines:Ce=!1,emptyMessage:Ae="No rules found.",showGroupColumn:_e=!1,showSummaryColumn:Xe=!1,showNextEvaluationColumn:De=!1})=>{const Me=(0,c.of)(ie),Te=(0,a.cx)(Me.wrapper,fe,{[Me.wrapperMargin]:Ce}),{pageItems:$e,page:Re,numberOfPages:Ke,onPageChange:Ve}=(0,m.W)(he,1,h.FG),{result:Se,status:Ye}=se($e),Ue=Ye==="loading",je=(0,s.useMemo)(()=>Se.map((Je,de)=>({id:`${Je.namespace.name}-${Je.group.name}-${Je.name}-${de}`,data:Je})),[Se]),Qe=ce(Xe,_e,De,Ue);if(!$e.length)return(0,n.jsx)("div",{className:(0,a.cx)(Te,Me.emptyMessage),children:Ae});const He=Ce?T.B:P.E;return(0,n.jsxs)("div",{className:Te,"data-testid":"rules-table",children:[(0,n.jsx)(He,{cols:Qe,isExpandable:!0,items:je,renderExpandedContent:({data:Je})=>(0,n.jsx)(L.DI,{rule:Je})}),(0,n.jsx)(i.d,{currentPage:Re,numberOfPages:Ke,onNavigate:Ve,hideWhenSinglePage:!0,className:Me.pagination})]})};function se(he){const[fe]=J(),[Ce]=Z(),[Ae,_e]=(0,E.Yb)(async()=>Promise.all(he.map(async De=>{const Me=await Ce({rulesSourceName:(0,D.EV)(De.namespace.rulesSource)},!0).unwrap();if(Me.rulerConfig&&De.namespace.rulesSource!==D.hY){const Te=await fe({namespace:De.namespace.name,group:De.group.name,rulerConfig:Me.rulerConfig},!0).unwrap();(0,v.yh)(De,Te)}return De})),he);return(0,s.useEffect)(()=>{j?Ae.execute():Ae.reset()},[he,Ae]),_e}const ie=he=>({wrapperMargin:(0,a.css)({[he.breakpoints.up("md")]:{marginLeft:"36px"}}),emptyMessage:(0,a.css)({padding:he.spacing(1)}),wrapper:(0,a.css)({width:"auto",borderRadius:he.shape.radius.default}),skeletonWrapper:(0,a.css)({flex:1}),pagination:(0,a.css)({display:"flex",margin:0,paddingTop:he.spacing(1),paddingBottom:he.spacing(.25),justifyContent:"center",borderLeft:`1px solid ${he.colors.border.medium}`,borderRight:`1px solid ${he.colors.border.medium}`,borderBottom:`1px solid ${he.colors.border.medium}`,float:"none"})});function ce(he,fe,Ce,Ae){return(0,s.useMemo)(()=>{const _e=[{id:"state",label:(0,r.t)("alerting.use-columns.columns.label.state","State"),renderCell:({data:Xe})=>(0,n.jsx)(re,{rule:Xe}),size:"165px"},{id:"name",label:(0,r.t)("alerting.use-columns.columns.label.name","Name"),renderCell:({data:Xe})=>Xe.name,size:Ce?4:5},{id:"metadata",label:"",renderCell:({data:Xe})=>{const{promRule:De,rulerRule:Me}=Xe,Te=(0,C.uo)(De??Me);return Te?(0,n.jsx)(d.T,{pluginId:Te.pluginId}):C.p.grafana.rule(Me)&&Me.grafana_alert.provenance?(0,n.jsx)(O.rS,{}):null},size:"100px"},{id:"warnings",label:"",renderCell:({data:Xe})=>(0,n.jsx)(V,{rule:Xe}),size:"45px"},{id:"health",label:(0,r.t)("alerting.use-columns.columns.label.health","Health"),renderCell:({data:{promRule:Xe,group:De}})=>Xe?(0,n.jsx)(W,{rule:Xe}):null,size:"75px"}];return he&&_e.push({id:"summary",label:(0,r.t)("alerting.use-columns.label.summary","Summary"),renderCell:({data:Xe})=>(0,n.jsx)(B.Y,{input:Xe.annotations[b.YH.summary]??""}),size:Ce?4:5}),Ce&&_e.push({id:"nextEvaluation",label:(0,r.t)("alerting.use-columns.label.next-evaluation","Next evaluation"),renderCell:({data:Xe})=>{const De=(0,x.C)(Xe.promRule?.lastEvaluation,Xe.group.interval);return De&&(0,n.jsx)(o.m,{placement:"top",content:`${De?.fullDate}`,theme:"info",children:(0,n.jsx)("span",{children:De?.humanized})})},size:2}),fe&&_e.push({id:"group",label:(0,r.t)("alerting.use-columns.label.group","Group"),renderCell:({data:Xe})=>{const{namespace:De,group:Me}=Xe;return Me.name==="default"?(0,n.jsx)(S.c,{namespace:De.name}):(0,n.jsx)(S.c,{namespace:De.name,group:Me.name})},size:5}),_e.push({id:"actions",label:(0,r.t)("alerting.use-columns.label.actions","Actions"),renderCell:({data:Xe})=>(0,n.jsx)(ue,{rule:Xe,isLoadingRuler:Ae}),size:"215px"}),_e},[Ce,he,fe,Ae])}function re({rule:he}){const{isDeleting:fe,isCreating:Ce,isPaused:Ae}=le(he);return(0,n.jsx)(k,{rule:he,isDeleting:fe,isCreating:Ce,isPaused:Ae})}function ue({rule:he,isLoadingRuler:fe}){const Ce=(0,c.of)(ie),{isDeleting:Ae,isCreating:_e}=le(he);return fe?(0,n.jsx)(l.A,{containerClassName:Ce.skeletonWrapper}):(0,n.jsx)(K.l,{compact:!0,showViewButton:!Ae&&!_e,rule:he,rulesSource:he.namespace.rulesSource})}function X(he){const fe=(0,y.$)(_e=>_e.rulerRules),Ce=(0,D.EV)(he);return!!fe[Ce]?.result}function le(he){const fe=he.namespace.rulesSource,Ce=X(fe),{hasRuler:Ae}=(0,p.y)(fe),{promRule:_e,rulerRule:Xe}=he;if(j&&!C.p.grafana.rule(Xe))return{isDeleting:!1,isCreating:!1,isPaused:!1};const De=!!(Ae&&Ce&&_e&&!Xe),Me=!!(Ae&&Ce&&Xe&&!_e),Te=C.p.grafana.rule(Xe)&&(0,C.hC)(Xe);return{isDeleting:De,isCreating:Me,isPaused:Te}}},22973:(ne,A,e)=>{"use strict";e.d(A,{gQ:()=>Qt,rf:()=>Oa,Ay:()=>ya,lf:()=>Zn,P5:()=>da});var n=e(74848),a=e(22803),s=e(2543),l=e(96540),r=e(49185),c=e(92745),i=e(41654),o=e(34999),h=e(13941),f=e(63142),g=e(89640),u=e(66404),E=e(45861),v=e(36303),p=e(47327),m=e(70958),y=e(85311),d=e(3969),x=e(86791),b=e(24619),D=e(74268),C=e(28390),P=e(74869),T=e(80218),O=e(44109),S=e(11940),B=e(80276),K=e(39187),U=e(17305),F=e(95443),I=e(52161),V=e(39659),M=e(77256),L=e(29442),N=e(29609),W=e(7840),R=e(36826),G=e(1972),w=e(2401),_=e(88589),Q=e(14050),ae=e(87281),q=e(41517),k=e(30703);function ee(){return(0,n.jsx)(u.E,{variant:"bodySmall",color:"warning",children:(0,n.jsxs)(i.B,{direction:"row",alignItems:"center",gap:.25,wrap:"nowrap",flex:"0 0 auto",children:[(0,n.jsx)(k.I,{name:"pause",size:"xs"})," ",(0,n.jsx)(c.x6,{i18nKey:"alerting.paused-badge.paused",children:"Paused"})]})})}var j=e(54552);const J=({color:Dt,includeState:wt})=>{const Zt=(0,f.of)(Z,{color:Dt,includeState:wt});return(0,n.jsx)(i.B,{direction:"row",gap:.5,children:(0,n.jsx)("div",{className:Zt.dot})})},Z=(Dt,wt)=>{const Zt=Dt.spacing(1.25),cn=`calc(${Zt} / 2.5)`,nn=wt.color==="error",ut=wt.color==="success",Ut=wt.color==="warning";return{dot:(0,a.css)({width:Zt,height:Zt,borderRadius:Dt.shape.radius.circle,backgroundColor:Dt.colors.secondary.main,outline:`solid ${cn} ${Dt.colors.secondary.transparent}`,margin:cn},ut&&(0,a.css)({backgroundColor:Dt.colors.success.main,outlineColor:Dt.colors.success.transparent}),Ut&&(0,a.css)({backgroundColor:Dt.colors.warning.main,outlineColor:Dt.colors.warning.transparent}),nn&&(0,a.css)({backgroundColor:Dt.colors.error.main,outlineColor:Dt.colors.error.transparent}))}},te=({health:Dt})=>{const wt=Zn(Dt),Zt=wt?"error":"success",cn=wt?"Recording error":"Recording";return(0,n.jsx)(ie,{color:Zt,text:cn})},se=({state:Dt,health:wt})=>{let Zt,cn;switch(Dt){case b.cF.Inactive:cn="success",Zt="Normal";break;case b.cF.Firing:cn="error",Zt="Firing";break;case b.cF.Pending:cn="warning",Zt="Pending";break;case b.cF.Recovering:cn="warning",Zt="Recovering";break;case b.cF.Unknown:cn="info",Zt="Unknown";break}return Zn(wt)&&(cn="error",Zt="Error"),wt==="nodata"&&(cn="warning",Zt="No data"),(0,n.jsx)(ie,{color:cn,text:Zt})};function ie({color:Dt,text:wt}){return(0,n.jsxs)(i.B,{direction:"row",gap:.5,wrap:"nowrap",flex:"0 0 auto",children:[(0,n.jsx)(J,{color:Dt}),(0,n.jsx)(u.E,{variant:"bodySmall",color:Dt,children:wt})]})}var ce=e(3845),re=e(45746),ue=e(43173),X=e(58138);const le=(0,l.lazy)(()=>e.e(2835).then(e.bind(e,32835))),he=(0,l.lazy)(()=>Promise.all([e.e(8706),e.e(483)]).then(e.bind(e,50483))),fe=({rule:Dt})=>{const wt=ue.$.unifiedAlerting.stateHistory?.backend,Zt=ue.$.unifiedAlerting.stateHistory?.primary,nn=[wt,Zt].some(Ut=>Ut===X.Q.Loki)?X.Q.Loki:X.Q.Annotations,ut=Dt.grafana_alert.uid;return(0,n.jsxs)(l.Suspense,{fallback:"Loading...",children:[nn===X.Q.Loki&&(0,n.jsx)(he,{ruleUID:ut}),nn===X.Q.Annotations&&(0,n.jsx)(le,{ruleUID:ut})]})};var Ce=e(95943),Ae=e(66773);const _e=({rule:Dt})=>(0,n.jsx)(Ae.s,{rule:Dt,pagination:{itemsPerPage:Ce.FG},enableFiltering:!0});var Xe=e(17548),De=e(5556),Me=e(27074),Te=e(99887),$e=e(44022),Re=e(4651),Ke=e(2954),Ve=e(49779),Se=e(51993),Ye=e(55376),Ue=e(89144);function je({data:Dt,thresholds:wt}){return Dt?(0,n.jsx)(Ue.j,{data:Dt,thresholds:wt?.config,thresholdsType:wt?.mode}):null}var Qe=e(20382),He=e(20437),Je=e(65232);const de=({expression:Dt})=>(0,n.jsx)(Je.m,{options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastColumn:0,scrollBeyondLastLine:!1,lineNumbers:"off",cursorWidth:0,overviewRulerLanes:0},defaultLanguage:"sql",height:80,defaultValue:Dt,width:"100%"});function ve(Dt){return"rawSql"in Dt}const me=null,xe=l.lazy(()=>e.e(3659).then(e.bind(e,33659))),Ee=l.lazy(()=>e.e(4964).then(e.bind(e,24964)));function Pe({model:Dt,dataSource:wt}){return(0,I.bS)(wt.type)&&(0,He.Bu)(Dt)?(0,n.jsx)(xe,{query:Dt.expr}):wt.type===I.ol.Loki&&(0,He.Bu)(Dt)?(0,n.jsx)(Ee,{query:Dt.expr??""}):ve(Dt)?(0,n.jsx)(de,{expression:Dt.rawSql}):(0,n.jsx)("pre",{children:(0,n.jsx)("code",{children:(0,Qe.Bh)(Dt)})})}var Oe=e(16692);function We({rule:Dt,queries:wt,condition:Zt,evalDataByQuery:cn={}}){const nn=(0,s.keyBy)(Object.values(ue.$.datasources),gt=>gt.uid),ut=wt.filter(gt=>!(0,$e.f)(gt.model)),Ut=wt.filter(gt=>(0,$e.f)(gt.model)),Ot=(0,f.of)(en),ct=(0,Ye.an)(wt,Zt);return(0,n.jsxs)(i.B,{gap:1,direction:"column",flex:"1 1 320px",children:[(0,n.jsx)("div",{className:Ot.maxWidthContainer,children:(0,n.jsx)(i.B,{gap:1,wrap:"wrap","data-testid":"queries-container",children:ut.map(({model:gt,relativeTimeRange:Ct,refId:Wt,datasourceUid:Ft},Vt)=>{const Ht=nn[Ft];return(0,n.jsx)(Fe,{rule:Dt,refId:Wt,model:gt,relativeTimeRange:Ct,dataSource:Ht,thresholds:ct[Wt],queryData:cn[Wt]},Vt)})})}),(0,n.jsx)("div",{className:Ot.maxWidthContainer,children:(0,n.jsx)(i.B,{gap:1,wrap:"wrap","data-testid":"expressions-container",children:Ut.map(({model:gt,refId:Ct,datasourceUid:Wt},Ft)=>(0,$e.f)(gt)&&(0,n.jsx)(Ze,{refId:Ct,isAlertCondition:Zt===Ct,model:gt,evalData:cn[Ct]},Ft))})})]})}function Fe({refId:Dt,rule:wt,thresholds:Zt,model:cn,dataSource:nn,queryData:ut,relativeTimeRange:Ut}){const Ot=(0,f.of)(Ge),ct=(0,$e.f)(cn),[gt,Ct]=(0,Oe.mh)(wt,Oe.j5.Explore),Wt=gt&&Ct,Ft=[];if(nn){const Ht=nn.name??"[[Data source not found]]",dn=nn.meta.info.logos.small;Ft.push((0,n.jsx)(Le,{name:Ht,imgUrl:dn},"datasource"))}Ut&&Ft.push((0,n.jsx)(u.E,{color:"secondary",children:(0,n.jsxs)(c.x6,{i18nKey:"alerting.query-preview.relative-time-range",values:{from:Xe.secondsToHms(Ut.from)},children:[(0,n.jsx)("code",{children:"{{from}}"})," to now"]})},"timerange"));let Vt;return!ct&&Wt&&(Vt=nn&&Be(nn,cn)),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(qe,{refId:Dt,headerItems:Ft,exploreLink:Vt,children:(0,n.jsx)("div",{className:Ot.queryPreviewWrapper,children:(0,n.jsx)(v.Xw,{children:cn&&nn&&(0,n.jsx)(Pe,{model:cn,dataSource:nn})})})}),nn&&(0,n.jsx)(je,{data:ut,thresholds:Zt})]})}function Be(Dt,wt){const{uid:Zt,type:cn}=Dt,{refId:nn,...ut}=wt;return De.kM.renderUrl(`${ue.$.appSubUrl}/explore`,{left:JSON.stringify({datasource:Dt.uid,queries:[{refId:"A",...ut,datasource:{type:cn,uid:Zt}}],range:{from:"now-1h",to:"now"}})})}function Le({name:Dt,imgUrl:wt}){const Zt=(0,f.of)(Ge);return(0,n.jsxs)("div",{className:Zt.dataSource,children:[(0,n.jsx)("img",{src:wt,width:16,alt:Dt}),Dt]},"datasource")}const Ge=Dt=>({queryPreviewWrapper:(0,a.css)({margin:Dt.spacing(1)}),contentBox:(0,a.css)({flex:"1 0 100%"}),dataSource:(0,a.css)({border:`1px solid ${Dt.colors.border.weak}`,borderRadius:Dt.shape.radius.default,padding:Dt.spacing(.5,1),display:"flex",alignItems:"center",gap:Dt.spacing(1)})});function Ze({refId:Dt,model:wt,evalData:Zt,isAlertCondition:cn}){const nn=(0,f.of)(at);function ut(){switch(wt.type){case Re.Tz.math:return(0,n.jsx)(st,{model:wt});case Re.Tz.reduce:return(0,n.jsx)(mt,{model:wt});case Re.Tz.resample:return(0,n.jsx)(rt,{model:wt});case Re.Tz.classic:return(0,n.jsx)(ht,{model:wt});case Re.Tz.threshold:return(0,n.jsx)(Gt,{model:wt});case Re.Tz.sql:return(0,n.jsx)(Me.l,{rawSql:wt.expression||"",datasourceType:wt.datasource?.type});default:return(0,n.jsxs)(c.x6,{i18nKey:"alerting.expression-preview.expression-not-supported",values:{type:wt.type},children:["Expression not supported: ","{{type}}"]})}}return(0,n.jsxs)(qe,{refId:Dt,headerItems:[(0,n.jsx)(u.E,{color:"secondary",children:(0,s.startCase)(wt.type)},"expression-type")],isAlertCondition:cn,children:[(0,n.jsxs)("div",{className:nn.previewWrapper,children:[Zt?.errors?.map(Ut=>(0,n.jsx)(o.F,{title:(0,c.t)("alerting.expression-preview.title-expression-failed","Expression failed"),severity:"error",bottomSpacing:1,children:Ut.message},(0,s.uniqueId)())),ut()]}),(0,n.jsx)(Ve.h,{}),Zt&&(0,n.jsx)(Se.GX,{series:Zt.series,isAlertCondition:cn})]})}function qe({refId:Dt,headerItems:wt=[],children:Zt,isAlertCondition:cn,exploreLink:nn}){const ut=(0,f.of)(at);return(0,n.jsxs)("div",{className:(0,a.cx)(ut.container),children:[(0,n.jsxs)("header",{className:ut.header,children:[(0,n.jsx)("span",{className:ut.refId,children:Dt}),wt,(0,n.jsx)(Ve.h,{}),cn&&(0,n.jsx)(Te.E,{color:"green",icon:"check",text:(0,c.t)("alerting.query-box.text-alert-condition","Alert condition")}),nn&&(0,n.jsx)(w.d,{component:(0,n.jsx)(E.z9,{size:"md",variant:"secondary",icon:"compass",href:nn,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.query-box.view-in-explore",children:"View in Explore"})})})]}),Zt]})}const at=Dt=>({container:(0,a.css)({flex:"1 0 25%",border:`1px solid ${Dt.colors.border.weak}`,maxWidth:"100%",borderRadius:Dt.shape.radius.default,display:"flex",flexDirection:"column"}),header:(0,a.css)({display:"flex",alignItems:"center",gap:Dt.spacing(1),padding:Dt.spacing(1),backgroundColor:Dt.colors.background.secondary}),textBlock:(0,a.css)({border:`1px solid ${Dt.colors.border.weak}`,padding:Dt.spacing(.5,1),backgroundColor:Dt.colors.background.primary,borderRadius:Dt.shape.radius.default}),refId:(0,a.css)({color:Dt.colors.text.link,padding:Dt.spacing(.5,1),border:`1px solid ${Dt.colors.border.weak}`,borderRadius:Dt.shape.radius.default}),previewWrapper:(0,a.css)({padding:Dt.spacing(1)})});function ht({model:Dt}){const wt=(0,f.of)(Et),Zt=(0,s.keyBy)(Ke.A.reducerTypes,ut=>ut.value),cn=(0,s.keyBy)(Ke.A.evalOperators,ut=>ut.value),nn=(0,s.keyBy)(Ke.A.evalFunctions,ut=>ut.value);return(0,n.jsx)("div",{className:wt.container,children:Dt.conditions?.map(({query:ut,operator:Ut,reducer:Ot,evaluator:ct},gt)=>{const Ct=xn(ct);return(0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)("div",{className:wt.blue,children:gt===0?(0,c.t)("alerting.classic-condition-viewer.when","WHEN"):!!Ut?.type&&cn[Ut?.type]?.text}),(0,n.jsx)("div",{className:wt.bold,children:Ot?.type&&Zt[Ot.type]?.text}),(0,n.jsx)("div",{className:wt.blue,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.classic-condition-viewer.of",children:"OF"})}),(0,n.jsx)("div",{className:wt.bold,children:ut.params[0]}),(0,n.jsx)("div",{className:wt.blue,children:nn[ct.type].text}),(0,n.jsx)("div",{className:wt.bold,children:Ct?`(${ct.params[0]}; ${ct.params[1]})`:ct.params[0]})]},gt)})})}const Et=Dt=>({container:(0,a.css)({display:"grid",gridTemplateColumns:"repeat(6, max-content)",gap:Dt.spacing(0,1)}),...$t(Dt)});function mt({model:Dt}){const wt=(0,f.of)(Pt),{reducer:Zt,expression:cn,settings:nn}=Dt,ut=Re.Cu.find(ct=>ct.value===Zt),Ut=nn?.mode??Re.Mt.Strict,Ot=Re.HZ.find(ct=>ct.value===Ut);return(0,n.jsxs)("div",{className:wt.container,children:[(0,n.jsx)("div",{className:wt.label,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.reduce-condition-viewer.function",children:"Function"})}),(0,n.jsx)("div",{className:wt.value,children:ut?.label}),(0,n.jsx)("div",{className:wt.label,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.reduce-condition-viewer.input",children:"Input"})}),(0,n.jsx)("div",{className:wt.value,children:cn}),(0,n.jsx)("div",{className:wt.label,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.reduce-condition-viewer.mode",children:"Mode"})}),(0,n.jsx)("div",{className:wt.value,children:Ot?.label})]})}const Pt=Dt=>({container:(0,a.css)({display:"grid",gap:Dt.spacing(.5),gridTemplateRows:"1fr 1fr",gridTemplateColumns:"repeat(4, 1fr)","> :nth-child(6)":{gridColumn:"span 3"}}),...$t(Dt)});function rt({model:Dt}){const wt=(0,f.of)(Kt),{expression:Zt,window:cn,downsampler:nn,upsampler:ut}=Dt,Ut=Re.PN.find(ct=>ct.value===nn),Ot=Re.iX.find(ct=>ct.value===ut);return(0,n.jsxs)("div",{className:wt.container,children:[(0,n.jsx)("div",{className:wt.label,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.resample-expression-viewer.input",children:"Input"})}),(0,n.jsx)("div",{className:wt.value,children:Zt}),(0,n.jsx)("div",{className:wt.label,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.resample-expression-viewer.resample-to",children:"Resample to"})}),(0,n.jsx)("div",{className:wt.value,children:cn}),(0,n.jsx)("div",{className:wt.label,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.resample-expression-viewer.downsample",children:"Downsample"})}),(0,n.jsx)("div",{className:wt.value,children:Ut?.label}),(0,n.jsx)("div",{className:wt.label,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.resample-expression-viewer.upsample",children:"Upsample"})}),(0,n.jsx)("div",{className:wt.value,children:Ot?.label})]})}const Kt=Dt=>({container:(0,a.css)({display:"grid",gap:Dt.spacing(.5),gridTemplateColumns:"repeat(4, 1fr)",gridTemplateRows:"1fr 1fr"}),...$t(Dt)});function Gt({model:Dt}){const wt=(0,f.of)(en),{expression:Zt,conditions:cn}=Dt,nn=cn&&cn[0]?.evaluator,ut=Re.zd.find(Ct=>Ct.value===nn?.type),Ut=nn?xn(nn):!1,Ot=cn&&cn[0]?.unloadEvaluator,ct=Re.zd.find(Ct=>Ct.value===Ot?.type),gt=Ot?xn(Ot):!1;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:wt.container,children:[(0,n.jsx)("div",{className:wt.label,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.threshold-expression-viewer.input",children:"Input"})}),(0,n.jsx)("div",{className:wt.value,children:Zt}),nn&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:wt.blue,children:ut?.label}),(0,n.jsx)("div",{className:wt.bold,children:Ut?`(${nn.params[0]}; ${nn.params[1]})`:nn.params[0]})]})]}),(0,n.jsx)("div",{className:wt.container,children:Ot&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:wt.label,children:(0,n.jsxs)(c.x6,{i18nKey:"alerting.threshold-expression-viewer.stop-alerting-when",children:["Stop alerting (or pending state) when"," "]})}),(0,n.jsx)("div",{className:wt.value,children:Zt}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:wt.blue,children:ct?.label}),(0,n.jsx)("div",{className:wt.bold,children:gt?`(${Ot.params[0]}; ${Ot.params[1]})`:Ot.params[0]})]})]})})]})}const en=Dt=>{const{blue:wt,bold:Zt,...cn}=$t(Dt);return{...cn,maxWidthContainer:(0,a.css)({maxWidth:"100%"}),container:(0,a.css)({display:"flex",gap:Dt.spacing(.5)}),blue:(0,a.css)(wt,{margin:"auto 0"}),bold:(0,a.css)(Zt,{margin:"auto 0"})}};function st({model:Dt}){const wt=(0,f.of)(en),{expression:Zt}=Dt;return(0,n.jsxs)("div",{className:wt.container,children:[(0,n.jsx)("div",{className:wt.label,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.math-expression-viewer.input",children:"Input"})}),(0,n.jsx)("div",{className:wt.value,children:Zt})]})}const $t=Dt=>({blue:(0,a.css)({color:Dt.colors.text.link}),bold:(0,a.css)({fontWeight:Dt.typography.fontWeightBold}),label:(0,a.css)({display:"flex",alignItems:"center",padding:Dt.spacing(.5,1),backgroundColor:Dt.colors.background.secondary,fontSize:Dt.typography.bodySmall.fontSize,lineHeight:Dt.typography.bodySmall.lineHeight,fontWeight:Dt.typography.fontWeightBold,borderRadius:Dt.shape.radius.default}),value:(0,a.css)({padding:Dt.spacing(.5,1),border:`1px solid ${Dt.colors.border.weak}`,borderRadius:Dt.shape.radius.default})});function xn(Dt){return Dt.type===Ke.p.IsWithinRange||Dt.type===Ke.p.IsOutsideRange||Dt.type===Ke.p.IsOutsideRangeIncluded||Dt.type===Ke.p.IsWithinRangeIncluded}var pn=e(55096),_n=e(1932),kn=e(15629);function Jn(Dt){if(!Dt)return[];const{namespace:wt,rulerRule:Zt}=Dt,{rulesSource:cn}=wt;if(N.p.grafana.rule(Zt)){const nn=Zt.grafana_alert.data;return pt(nn,Zt.for??"",Dt.group.interval)}if((0,I.Eb)(cn)){const nn=Mt(cn,Dt);return[Rt(nn,cn.uid)]}return[]}function pt(Dt,wt,Zt){const cn=(0,kn.P8)(wt)??(0,kn.P8)(Zt??"1m"),nn=Math.floor(cn/1e3);return Dt.map(ut=>(0,_n.jM)(ut,Ut=>{const Ot=Ut.relativeTimeRange?.from??0,ct=Math.max(nn*3,Ot+nn*2);Ut.relativeTimeRange={from:ct,to:0}}))}function Rt(Dt,wt){return{refId:Dt.refId,datasourceUid:wt,queryType:"",model:Dt,relativeTimeRange:{from:360,to:0}}}function Mt(Dt,wt){if(!(0,I.cl)(Dt.type))throw new Error(`Query for datasource type ${Dt.type} is currently not supported by cloud alert rules.`);return{refId:"A",expr:wt.query}}var Bt=e(54513);const Nt=({rule:Dt})=>{const{queryPreviewData:wt,runQueries:Zt,isPreviewLoading:cn}=(0,Bt.Y)(),nn=(0,l.useMemo)(()=>Jn(Dt),[Dt]),{allDataSourcesAvailable:ut}=(0,pn.g)(nn),Ut=(0,l.useCallback)(()=>{if(nn.length>0&&ut){let ct;Dt&&N.p.grafana.rule(Dt.rulerRule)&&(ct=Dt.rulerRule.grafana_alert.condition),Zt(nn,ct??"A")}},[nn,ut,Dt,Zt]);(0,l.useEffect)(()=>{ut&&Ut()},[ut,Ut]);const Ot=(0,N.YN)(Dt.group);return cn?(0,n.jsx)(c.x6,{i18nKey:"alerting.common.loading",children:"Loading..."}):(0,n.jsxs)(n.Fragment,{children:[N.p.grafana.rule(Dt.rulerRule)&&!Ot&&(0,n.jsx)(We,{rule:Dt,condition:Dt.rulerRule.grafana_alert.condition,queries:nn,evalDataByQuery:wt}),!N.p.grafana.rule(Dt.rulerRule)&&!Ot&&wt&&Object.keys(wt).length>0&&(0,n.jsx)(i.B,{direction:"column",gap:1,children:nn.map(ct=>(0,n.jsx)(Fe,{rule:Dt,refId:ct.refId,model:ct.model,dataSource:Object.values(ue.$.datasources).find(gt=>gt.uid===ct.datasourceUid),queryData:wt[ct.refId],relativeTimeRange:ct.relativeTimeRange},ct.refId))}),!Ot&&!ut&&(0,n.jsx)(o.F,{title:(0,c.t)("alerting.rule-view.query.datasources-na.title","Query not available"),severity:"warning",children:(0,n.jsx)(c.x6,{i18nKey:"alerting.rule-view.query.datasources-na.description",children:"Cannot display the query preview. Some of the data sources used in the queries are not available."})})]})},Yt=()=>(0,n.jsx)(c.x6,{i18nKey:"alerting.routing.routing",children:"Routing"});var Qt=(Dt=>(Dt.Query="query",Dt.Instances="instances",Dt.History="history",Dt.Routing="routing",Dt.Details="details",Dt.VersionHistory="version-history",Dt))(Qt||{});const En=(0,P.wS)(),vn=(0,P.sk)(),Sn=()=>{const{rule:Dt,identifier:wt}=(0,j.k)(),{pageNav:Zt,activeTab:cn}=Xn(Dt),nn=(0,N.A4)(wt)?!1:En||vn,[ut,Ut]=(0,l.useState)(),{returnTo:Ot}=(0,K.h)("/alerting/list"),{annotations:ct,promRule:gt,rulerRule:Ct}=Dt,Wt=Zn(gt?.health),Ft=(0,N.YN)(Dt.group),Vt=N.p.grafana.rule(Ct)&&!!Ct.grafana_alert.provenance,Ht=N.p.grafana.rule(Ct)&&(0,N.hC)(Ct),dn=Wt&&!Ht,sn=Ct?(0,N.uo)(Ct):(0,N.uo)(gt),Rn=ct[F.YH.summary];return(0,n.jsxs)(R.d,{pageNav:Zt,navId:"alert-list",isLoading:!1,renderTitle:rn=>(0,n.jsx)(wn,{name:rn,paused:Ht,state:N.R$.alertingRule(gt)?gt.state:void 0,health:gt?.health,ruleType:gt?.type,ruleOrigin:sn,returnToHref:Ot}),actions:(0,n.jsx)(d.l,{rule:Dt,rulesSource:Dt.namespace.rulesSource}),info:mn(Dt),subTitle:(0,n.jsxs)(i.B,{direction:"column",children:[Rn,Ht&&(0,n.jsx)(y.A,{}),Ft&&(0,n.jsx)(q.X,{}),Vt&&(0,n.jsx)(G.Yi,{resource:G.hk.AlertRule,bottomSpacing:0,topSpacing:2}),dn&&(0,n.jsx)(o.F,{title:(0,c.t)("alerting.rule-viewer.title-something-wrong-evaluating-alert","Something went wrong when evaluating this alert rule"),bottomSpacing:0,topSpacing:2,children:(0,n.jsx)("pre",{style:{marginBottom:0},children:(0,n.jsx)("code",{children:Dt.promRule?.lastError??"No error message"})})})]}),children:[nn&&(0,n.jsx)(Ln,{ruleIdentifier:wt}),(0,n.jsx)(i.B,{direction:"column",gap:2,children:(0,n.jsxs)(h.J,{children:[cn==="query"&&(0,n.jsx)(Nt,{rule:Dt}),cn==="instances"&&(0,n.jsx)(_e,{rule:Dt}),cn==="history"&&N.p.grafana.rule(Dt.rulerRule)&&(0,n.jsx)(fe,{rule:Dt.rulerRule}),cn==="routing"&&(0,n.jsx)(Yt,{}),cn==="details"&&(0,n.jsx)(re.B,{rule:Dt}),cn==="version-history"&&N.p.grafana.rule(Dt.rulerRule)&&(0,n.jsx)(ce.f,{rule:Dt.rulerRule})]})}),ut&&(0,n.jsx)(Q.Z,{redirectTo:!0,identifier:ut,isProvisioned:Vt,onDismiss:()=>Ut(void 0)})]})},mn=Dt=>{const{labels:wt,annotations:Zt,group:cn,rulerRule:nn}=Dt,ut=[],Ut=Zt[F.YH.runbookURL],Ot=Zt[F.YH.dashboardUID],ct=Zt[F.YH.panelID],gt=Ot&&ct,Ct=Ot,Wt=(0,V.rm)(wt)>0,Ft=cn.interval,Vt=(0,f.of)(ba);if(N.p.grafana.alertingRule(nn)){const Ht=nn.grafana_alert.notification_settings?.receiver;Ht&&ut.push({label:(0,c.t)("alerting.create-metadata.label.contact-point","Notifications are delivered to"),value:(0,n.jsx)(ae.z,{name:Ht,variant:"bodySmall"})})}if(Ut){const Ht=(0,s.truncate)(Ut,{length:42}),dn=oa(Ut)?(0,n.jsx)(g.Y,{variant:"bodySmall",className:Vt.url,href:Ut,external:!0,children:Ht}):(0,n.jsx)(u.E,{variant:"bodySmall",children:Ht});ut.push({label:(0,c.t)("alerting.create-metadata.label.runbook-url","Runbook URL"),value:dn})}if(gt?ut.push({label:(0,c.t)("alerting.create-metadata.label.dashboard-and-panel","Dashboard and panel"),value:(0,n.jsx)(w.d,{title:Dt.name,component:(0,n.jsx)(g.Y,{variant:"bodySmall",href:(0,M.D2)(Ot,ct),children:(0,n.jsx)(c.x6,{i18nKey:"alerting.create-metadata.view-panel",children:"View panel"})})})}):Ct&&ut.push({label:(0,c.t)("alerting.create-metadata.label.dashboard","Dashboard"),value:(0,n.jsx)(w.d,{title:Dt.name,component:(0,n.jsx)(g.Y,{title:Dt.name,variant:"bodySmall",href:(0,M.JM)(Ot),children:(0,n.jsx)(c.x6,{i18nKey:"alerting.create-metadata.view-dashboard",children:"View dashboard"})})})}),N.p.grafana.recordingRule(Dt.rulerRule)){const Ht=Dt.rulerRule?.grafana_alert.record?.metric??"";ut.push({label:(0,c.t)("alerting.create-metadata.label.metric-name","Metric name"),value:(0,n.jsx)(u.E,{color:"primary",children:Ht})})}return Ft&&ut.push({label:(0,c.t)("alerting.create-metadata.label.evaluation-interval","Evaluation interval"),value:(0,n.jsx)(u.E,{color:"primary",children:(0,n.jsxs)(c.x6,{i18nKey:"alerting.rule-viewer.evaluation-interval",children:["Every ",{interval:Ft}]})})}),Wt&&ut.push({label:(0,c.t)("alerting.create-metadata.label.labels","Labels"),value:(0,n.jsx)(W.m,{labels:wt,size:"sm"})}),ut},wn=({name:Dt,paused:wt=!1,state:Zt,health:cn,ruleType:nn,ruleOrigin:ut,returnToHref:Ut=""})=>{const Ot=nn===b.JS.Recording,{returnTo:ct}=(0,K.h)(Ut);return(0,n.jsxs)(i.B,{direction:"row",gap:1,minWidth:0,alignItems:"center",children:[Ut&&(0,n.jsx)(E.z9,{"aria-label":(0,c.t)("alerting.rule-viewer.aria-label-return-to","Return to previous view"),variant:"secondary",icon:"angle-left",href:ct}),ut&&(0,n.jsx)(U.T,{pluginId:ut.pluginId,size:"lg"}),(0,n.jsx)(u.E,{variant:"h1",truncate:!0,children:Dt}),wt?(0,n.jsx)(ee,{}):(0,n.jsxs)(n.Fragment,{children:[Zt&&(0,n.jsx)(se,{state:Zt,health:cn}),Ot&&(0,n.jsx)(te,{health:cn})]})]})},Ln=(0,v.Xc)(({ruleIdentifier:Dt})=>{const[wt,{width:Zt}]=(0,r.A)(),{hasRuler:cn}=(0,S.w)((0,I.bt)(Dt)),{result:nn}=(0,O.FY)(Dt),{waitForGroupConsistency:ut,groupConsistent:Ut}=(0,B.zx)(),[Ot,ct]=(0,T.Yb)(gt=>ut(gt));return(0,l.useEffect)(()=>{nn&&cn&&Ot.execute(nn.groupIdentifier)},[nn,cn,Ot]),(0,T.bJ)(ct)?(0,n.jsx)(o.F,{title:(0,c.t)("alerting.prometheus-consistency-check.title-unable-to-check-the-rule-status","Unable to check the rule status"),bottomSpacing:0,topSpacing:2,children:(0,M.JZ)(ct.error)}):Ut===!1?(0,n.jsxs)(i.B,{direction:"column",gap:0,ref:wt,children:[(0,n.jsx)(p.G,{width:Zt}),(0,n.jsx)(o.F,{title:(0,c.t)("alerting.rule-viewer.prometheus-consistency-check.alert-title","Update in progress"),severity:"info",children:(0,n.jsx)(c.x6,{i18nKey:"alerting.rule-viewer.prometheus-consistency-check.alert-message",children:"Alert rule has been added or updated. Changes may take up to a minute to appear on the Alert rules list view."})})]}):null},{errorLogger:D.vV}),Zn=Dt=>Dt==="error"||Dt==="err";function da(){const[Dt,wt]=(0,m.s)(),Zt=Dt.tab;return[Pa(Zt)?Zt:"query",ut=>{wt({tab:ut})}]}function Pa(Dt){return typeof Dt=="string"&&Object.values(Qt).includes(Dt)}function Xn(Dt){const[wt,Zt]=da(),{annotations:cn,promRule:nn,rulerRule:ut}=Dt,Ut=cn[F.YH.summary],ct=N.R$.alertingRule(nn)?Oa(Dt.instanceTotals):void 0,gt=(0,_.EL)(Dt.namespace).name,Ct=Dt.group.name,Wt=N.p.grafana.alertingRule(ut),Ft=N.p.grafana.recordingRule(ut),Vt=N.R$.recordingRule(nn),Ht=(0,I.v0)(Dt.namespace.rulesSource),dn=Na(Dt),sn=L.TN.detailsPageLink(Ht,dn,Ct);return{pageNav:{...C.defaultPageNav,text:Dt.name,subTitle:Ut,children:[{text:(0,c.t)("alerting.use-page-nav.page-nav.text.query-and-conditions","Query and conditions"),active:wt==="query",onClick:()=>{Zt("query")}},{text:(0,c.t)("alerting.use-page-nav.page-nav.text.instances","Instances"),active:wt==="instances",onClick:()=>{Zt("instances")},tabCounter:ct,hideFromTabs:Vt},{text:(0,c.t)("alerting.use-page-nav.page-nav.text.history","History"),active:wt==="history",onClick:()=>{Zt("history")},hideFromTabs:!Wt},{text:(0,c.t)("alerting.use-page-nav.page-nav.text.details","Details"),active:wt==="details",onClick:()=>{Zt("details")}},{text:(0,c.t)("alerting.use-page-nav.page-nav.text.versions","Versions"),active:wt==="version-history",onClick:()=>{Zt("version-history")},hideFromTabs:!Wt&&!Ft}],parentItem:{text:Ct,url:sn,parentItem:{text:gt,url:(0,L.tx)([["namespace",gt]])}}},activeTab:wt}}const Oa=Dt=>(0,s.chain)(Dt).pick([x.$7.Alerting,x.$7.Pending,x.$7.Recovering,x.$7.Normal,x.$7.NoData,x.$7.Error]).values().sum().value(),ba=()=>({url:(0,a.css)({wordBreak:"break-all"})});function oa(Dt){const wt=Dt.startsWith("/");let Zt=!1;try{new URL(Dt),Zt=!0}catch{return!1}return wt||Zt}function Na(Dt){if(Dt.namespace.uid)return Dt.namespace.uid;const wt=N.p.dataSource.rule(Dt.rulerRule),Zt=N.R$.rule(Dt.promRule)&&!N.R$.grafana.rule(Dt.promRule);return wt||Zt?Dt.namespace.name:N.p.grafana.rule(Dt.rulerRule)?Dt.rulerRule?.grafana_alert.namespace_uid:N.R$.grafana.rule(Dt.promRule)?Dt.promRule.folderUid:Dt.namespace.name}const ya=Sn},23117:(ne,A,e)=>{"use strict";e.d(A,{d:()=>s,m:()=>a});class n{constructor(){this.extraRenderActions=[],this.keyedScopedExtraRenderActions=new Map}addExtraRenderAction(r){this.extraRenderActions=this.extraRenderActions.concat(r)}addKeyedExtraRenderAction(r,c){this.keyedScopedExtraRenderActions.set(r,c)}getAllExtraRenderAction(){return this.extraRenderActions}getScopedExtraRenderAction(r){return Array.from(this.keyedScopedExtraRenderActions,i=>i[1]).filter(i=>i.scope===r).map(i=>i.queryActionComponent)}}const a=new n,s=new n},23130:(ne,A,e)=>{"use strict";e.d(A,{KQ:()=>c});const n="12.2.1";var a=(i=>(i.Donut="donut",i.Pie="pie",i))(a||{}),s=(i=>(i.Name="name",i.Percent="percent",i.Value="value",i))(s||{}),l=(i=>(i.Percent="percent",i.Value="value",i))(l||{});const r={values:[]},c={displayLabels:[]}},23207:(ne,A,e)=>{"use strict";e.d(A,{G:()=>R});var n=e(74848),a=e(85891),s=e(73628),l=e(96540),r=e(92745),c=e(22787),i=e(45861),o=e(22803),h=e(63142),f=e(50275),g=e(37386),u=e(21285),E=e(97095),v=e(18027),p=e(77824),m=e(35427),y=e(17200),d=e(41654),x=e(63527),b=e(43243),D=e(76319);const C=({value:G,onChange:w})=>{const[_,Q]=(0,l.useState)(""),[ae,q]=(0,l.useState)(""),[k,ee]=(0,l.useState)(a.VR.String),j=re=>{Q(re)},J=re=>{q(re)},Z=re=>{ee(re.value)},te=()=>{let re;G?re=G.filter(ue=>ue.key!==_):re=[],re.push({key:_,name:ae,type:k}),re.sort((ue,X)=>ue.key.localeCompare(X.key)),w(re),Q(""),q(""),ee(a.VR.String)},se=re=>()=>{const ue=G.filter(X=>X.key!==re);w(ue)},ie=ae===""||_==="",ce=[{label:"string",value:a.VR.String}];return(0,n.jsxs)("div",{children:[(0,n.jsxs)(d.B,{direction:"row",children:[(0,n.jsx)(x.p,{value:_,onChange:re=>j(re.currentTarget.value),placeholder:(0,r.t)("actions.params-editor.placeholder-key","Key"),width:300}),(0,n.jsx)(x.p,{value:ae,onChange:re=>J(re.currentTarget.value),placeholder:(0,r.t)("actions.params-editor.placeholder-name","Name"),width:300}),(0,n.jsx)(b.G,{value:k,onChange:Z,placeholder:(0,r.t)("actions.variables-editor.placeholder-type","Type"),options:ce,maxWidth:100,minWidth:10,width:"auto"}),(0,n.jsx)(D.K,{"aria-label":(0,r.t)("actions.params-editor.aria-label-add","Add"),name:"plus-circle",onClick:()=>te(),disabled:ie})]}),(0,n.jsx)(d.B,{direction:"column",children:G.map(re=>(0,n.jsxs)(d.B,{direction:"row",children:[(0,n.jsx)(x.p,{disabled:!0,value:re.key,width:300}),(0,n.jsx)(x.p,{disabled:!0,value:re.name,width:300}),(0,n.jsx)(x.p,{disabled:!0,value:re.type,width:100}),(0,n.jsx)(D.K,{"aria-label":(0,r.t)("actions.params-editor.aria-label-delete","Delete"),onClick:se(re.key),name:"trash-alt"})]},re.key))})]})};var P=e(78282),T=e(43173),O=e(18857),S=e(73163);const B="direct",K=()=>(0,P.l)().getList({filter:w=>w.type===S.AL}),U=({actionType:G,datasourceUid:w,onChange:_})=>{const Q=(0,l.useMemo)(()=>{const ee=[{label:(0,r.t)("grafana-ui.action-editor.modal.connection-direct-label","Direct from browser"),value:B,description:(0,r.t)("grafana-ui.action-editor.modal.connection-direct-description","Make request directly from browser"),icon:"adjust-circle"}];return T.$.featureToggles.vizActionsAuth&&K().forEach(J=>{ee.push({label:J.name,value:J.uid,imgUrl:J.meta.info.logos.small})}),ee},[]),ae=()=>G===a.X2.Fetch?B:G===a.X2.Infinity&&w?w:B,q=ee=>{if(ee===B)_(B);else{const J=K().find(Z=>Z.uid===ee);J?_(J):console.error("ConnectionPicker: Could not find datasource with UID:",ee)}},k=ae();return(0,n.jsx)(O.l6,{value:k,options:Q,onChange:ee=>q(ee.value),placeholder:(0,r.t)("grafana-ui.action-editor.modal.connection-placeholder","Select connection")})},F=({value:G,onChange:w,suggestions:_,contentTypeHeader:Q=!1})=>{const ae=(0,h.of)(I),q=G.find(([fe,Ce])=>fe==="Content-Type"),[k,ee]=(0,l.useState)(""),[j,J]=(0,l.useState)(""),[Z,te]=(0,l.useState)("");(0,l.useEffect)(()=>{Z!==""?te(Z):q&&te(q[1])},[Z,q]);const[se,ie]=(0,l.useState)(Math.random().toString()),ce=fe=>{J(fe)},re=fe=>{ee(fe)},ue=fe=>()=>{const Ce=G.filter(Ae=>Ae[0]!==fe);w(Ce)},X=fe=>{let Ce;G?Ce=G.filter(Ae=>Ae[0]!==(fe?fe[0]:k)):Ce=[],Ce.push(fe??[k,j]),Ce.sort((Ae,_e)=>Ae[0].localeCompare(_e[0])),w(Ce),ee(""),J(""),ie(Math.random().toString())},le=fe=>{te(fe),X(["Content-Type",fe])},he=k===""||j==="";return(0,n.jsxs)("div",{children:[(0,n.jsxs)(d.B,{direction:"row",children:[(0,n.jsx)(y.y,{value:k,onChange:re,suggestions:_,placeholder:(0,r.t)("actions.params-editor.placeholder-key","Key"),style:{width:332}}),(0,n.jsx)(y.y,{value:j,onChange:ce,suggestions:_,placeholder:(0,r.t)("actions.params-editor.placeholder-value","Value"),style:{width:332}}),(0,n.jsx)(D.K,{"aria-label":(0,r.t)("actions.params-editor.aria-label-add","Add"),name:"plus-circle",onClick:()=>X(),disabled:he})]},se),(0,n.jsx)(d.B,{direction:"column",children:Array.from(G.filter(fe=>fe[0]!=="Content-Type")||[]).map(fe=>(0,n.jsxs)(d.B,{direction:"row",children:[(0,n.jsx)(x.p,{disabled:!0,value:fe[0]}),(0,n.jsx)(x.p,{disabled:!0,value:fe[1]}),(0,n.jsx)(D.K,{"aria-label":(0,r.t)("actions.params-editor.aria-label-delete","Delete"),onClick:ue(fe[0]),name:"trash-alt"})]},fe[0]))}),Q&&(0,n.jsx)("div",{className:ae.extraHeader,children:(0,n.jsxs)(d.B,{direction:"row",children:[(0,n.jsx)(x.p,{value:"Content-Type",disabled:!0}),(0,n.jsx)(O.l6,{onChange:fe=>le(fe.value),options:a.Ur,value:Z})]})})]})},I=G=>({extraHeader:(0,o.css)({marginTop:G.spacing(1),marginBottom:G.spacing(1),maxWidth:673})}),V=13,M={method:a.DO.POST,url:"",body:"{}",queryParams:[],headers:[["Content-Type","application/json"]]},L=(0,l.memo)(({index:G,value:w,onChange:_,suggestions:Q,showOneClick:ae})=>{const q=(0,h.of)(N),k=(0,h.$j)(),ee=()=>w.type===a.X2.Infinity?w[a.X2.Infinity]||{...M,datasourceUid:""}:w[a.X2.Fetch]||M,j=Xe=>{const De=w.type===a.X2.Infinity?a.X2.Infinity:a.X2.Fetch,Me=ee(),Te={...Me,...Xe,...w.type===a.X2.Infinity&&{datasourceUid:Me.datasourceUid||""}};_(G,{...w,[De]:Te})},J=Xe=>De=>{j({[Xe]:De})},Z=Xe=>{_(G,{...w,title:Xe})},te=Xe=>{_(G,{...w,confirmation:Xe})},se=Xe=>{_(G,{...w,variables:Xe})},ie=()=>{_(G,{...w,oneClick:!w.oneClick})},ce=J("url"),re=J("body"),ue=J("method"),X=J("queryParams"),le=J("headers"),he=Xe=>{_(G,{...w,style:{...w.style,backgroundColor:Xe}})},fe=Xe=>{const De={title:w.title,confirmation:w.confirmation,oneClick:w.oneClick,variables:w.variables,style:w.style};typeof Xe=="string"?_(G,{...De,type:a.X2.Fetch,[a.X2.Fetch]:ee()}):_(G,{...De,type:a.X2.Infinity,[a.X2.Infinity]:{...ee(),datasourceUid:Xe.uid}})},Ce=(Xe="{}")=>{try{const De=JSON.parse(Xe);return(0,n.jsx)(f.B,{json:De})}catch(De){return De instanceof Error?`Invalid JSON provided: ${De.message}`:"Invalid JSON provided"}},Ae=ee(),_e=Ae.method!==a.DO.GET&&Ae.headers?.some(([Xe,De])=>Xe==="Content-Type"&&De==="application/json");return(0,n.jsxs)("div",{className:q.listItem,children:[(0,n.jsx)(g.D,{label:(0,r.t)("grafana-ui.action-editor.modal.action-title","Title"),className:q.inputField,children:(0,n.jsx)(y.y,{value:w.title,onChange:Z,suggestions:Q,autoFocus:w.title==="",placeholder:(0,r.t)("grafana-ui.action-editor.modal.action-title-placeholder","Action title")})}),(0,n.jsx)(g.D,{label:(0,r.t)("grafana-ui.viz-tooltip.actions-confirmation-label","Confirmation message"),description:(0,r.t)("grafana-ui.viz-tooltip.actions-confirmation-message","Provide a descriptive prompt to confirm or cancel the action."),className:q.inputField,children:(0,n.jsx)(y.y,{value:w.confirmation,onChange:te,suggestions:Q,placeholder:(0,r.t)("grafana-ui.viz-tooltip.actions-confirmation-input-placeholder","Are you sure you want to {{ actionTitle }}?",{actionTitle:w.title||"... "})})}),ae&&(0,n.jsx)(g.D,{label:(0,r.t)("grafana-ui.data-link-inline-editor.one-click","One click"),description:(0,r.t)("grafana-ui.action-editor.modal.one-click-description","Only one link or action can have one click enabled at a time"),children:(0,n.jsx)(u.d,{value:w.oneClick||!1,onChange:ie})}),(0,n.jsx)(E.C,{children:(0,n.jsx)(v.I,{label:(0,r.t)("grafana-ui.action-editor.modal.connection","Connection"),labelWidth:V,children:(0,n.jsx)(U,{actionType:w.type,datasourceUid:w?.[a.X2.Infinity]?.datasourceUid,onChange:fe})})}),(0,n.jsx)(E.C,{children:(0,n.jsx)(v.I,{label:(0,r.t)("grafana-ui.action-editor.modal.action-method","Method"),labelWidth:V,children:(0,n.jsx)(p.z,{value:Ae.method,options:a.ki,onChange:ue,fullWidth:!0})})}),(0,n.jsx)(E.C,{children:(0,n.jsx)(v.I,{label:(0,r.t)("actions.action-editor.label-url","URL"),labelWidth:V,grow:!0,children:(0,n.jsx)(y.y,{value:Ae.url,onChange:ce,suggestions:Q,placeholder:(0,r.t)("actions.action-editor.placeholder-url","URL")})})}),(0,n.jsx)(g.D,{label:(0,r.t)("grafana-ui.action-editor.modal.action-variables","Variables"),className:q.fieldGap,noMargin:!0,children:(0,n.jsx)(C,{onChange:se,value:w.variables??[]})}),(0,n.jsx)(g.D,{label:(0,r.t)("grafana-ui.action-editor.modal.action-query-params","Query parameters"),className:q.fieldGap,children:(0,n.jsx)(F,{value:Ae.queryParams??[],onChange:X,suggestions:Q})}),(0,n.jsx)(g.D,{label:(0,r.t)("actions.action-editor.label-headers","Headers"),children:(0,n.jsx)(F,{value:Ae.headers??[],onChange:le,suggestions:Q,contentTypeHeader:!0})}),Ae.method!==a.DO.GET&&(0,n.jsx)(g.D,{label:(0,r.t)("grafana-ui.action-editor.modal.action-body","Body"),className:q.inputField,children:(0,n.jsx)(y.y,{value:Ae.body,onChange:re,suggestions:Q,type:y.c.TextAreaElement})}),_e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),Ce(Ae.body)]}),(0,n.jsx)(g.D,{label:(0,r.t)("grafana-ui.action-editor.button.style","Button style"),style:{marginTop:"8px"},children:(0,n.jsx)(v.I,{label:(0,r.t)("actions.action-editor.button.style.background-color","Color"),labelWidth:V,className:q.colorPicker,children:(0,n.jsx)(m.sk,{color:w?.style?.backgroundColor||k.colors.secondary.main,onChange:he})})})]})}),N=G=>({listItem:(0,o.css)({marginBottom:G.spacing()}),infoText:(0,o.css)({paddingBottom:G.spacing(2),marginLeft:"66px",color:G.colors.text.secondary}),fieldGap:(0,o.css)({marginTop:G.spacing(2)}),inputField:(0,o.css)({marginRight:4}),colorPicker:(0,o.css)({display:"flex",alignItems:"center"})});L.displayName="ActionEditor";const W=({action:G,index:w,onSave:_,onCancel:Q,getSuggestions:ae,showOneClick:q})=>{const[k,ee]=(0,l.useState)(G),j=k.title.trim()===""||!k[k.type]?.url?.trim()||k.type===a.X2.Infinity&&!k[a.X2.Infinity]?.datasourceUid;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L,{value:k,index:w,onChange:(J,Z)=>{ee(Z)},suggestions:ae(),showOneClick:q}),(0,n.jsxs)(c.a.ButtonRow,{children:[(0,n.jsx)(i.$n,{variant:"secondary",onClick:()=>Q(w),fill:"outline",children:(0,n.jsx)(r.x6,{i18nKey:"action-editor.modal.cancel-button",children:"Cancel"})}),(0,n.jsx)(i.$n,{onClick:()=>{_(w,k)},disabled:j,children:(0,n.jsx)(r.x6,{i18nKey:"action-editor.modal.save-button",children:"Save"})})]})]})},R=({actions:G,getSuggestions:w,showOneClick:_=!1,...Q})=>(0,n.jsx)(s.J,{type:"action",items:G,...Q,children:(ae,q,k,ee)=>(0,n.jsx)(W,{index:q,action:ae??a.mx,data:Q.data,onSave:k,onCancel:ee,getSuggestions:w,showOneClick:_})})},23237:(ne,A,e)=>{"use strict";e.d(A,{EX:()=>i,Wb:()=>l,Zk:()=>r,zG:()=>c});var n=e(2543),a=e.n(n),s=e(25229);const l=(o,h)=>{const f={from:(0,s.yT)(h.from),to:(0,s.yT)(h.to)},g=(f.to.valueOf()-f.from.valueOf())/2;let u,E;return o===-1?(u=f.to.valueOf()-g,E=f.from.valueOf()-g):o===1?(u=f.to.valueOf()+g,E=f.from.valueOf()+g,u>Date.now()&&f.to.valueOf()<Date.now()&&(u=Date.now(),E=f.from.valueOf())):(u=f.to.valueOf(),E=f.from.valueOf()),{from:E,to:u}},r=(o,h)=>{const f=o.to.valueOf()-o.from.valueOf(),g=o.to.valueOf()-f/2,u=f===0?3e4:f*h,E=g+u/2;return{from:g-u/2,to:E}};async function c(){const o=await navigator.clipboard.readText();let h;try{return h=JSON.parse(o),!h.from||!h.to?{range:o,isError:!0}:{range:h,isError:!1}}catch{return{range:o,isError:!0}}}const i=o=>(0,n.isString)(o)&&o.includes("Z")?(0,s.KQ)(o).utc():o},23265:(ne,A,e)=>{"use strict";e.d(A,{Jr:()=>d,NW:()=>P,O6:()=>p,Tj:()=>T,Ug:()=>C,dy:()=>E,gt:()=>v,kU:()=>F,yh:()=>m});var n=e(2543),a=e.n(n),s=e(96540),l=e(86791),r=e(24619),c=e(70327),i=e(55143),o=e(95443),h=e(52161),f=e(94646),g=e(29609),u=e(98127);function E(V,M){const L=(0,u.$)(G=>G.promRules),N=(0,u.$)(G=>G.rulerRules),W=(0,s.useRef)({}),R=(0,s.useMemo)(()=>{if(V){const G=(0,h.Zw)(V);if(!G)throw new Error(`Unknown rules source: ${V}`);return[G]}return(0,h.lS)()},[V]);return(0,s.useMemo)(()=>R.map(G=>{const w=(0,h.Eb)(G)?G.name:G,_=N[w]?.result;let Q=L[w]?.result;w===h.hY&&M&&(Q=M);const ae=W.current[w];if(ae&&ae.promRules===Q&&ae.rulerRules===_)return ae.result;const q={};Object.entries(_||{}).forEach(([ee,j])=>{const J={rulesSource:G,name:ee,groups:[]};g.p.grafana.rule(j[0].rules[0])&&(J.uid=j[0].rules[0].grafana_alert.namespace_uid),q[ee]=J,b(J,j)}),Q?.forEach(({name:ee,groups:j})=>{const J=q[ee]=q[ee]||{rulesSource:G,name:ee,groups:[]};D(J,j)});const k=Object.values(q);return W.current[w]={promRules:Q,rulerRules:_,result:k},k}).flat(),[L,N,R,M])}function v(V,M,L){const N={};return Object.entries(L||{}).forEach(([W,R])=>{const G={rulesSource:V,name:W,groups:[]};N[W]=G,b(G,R)}),M?.forEach(({name:W,groups:R})=>{const G=N[W]=N[W]||{rulesSource:V,name:W,groups:[]};D(G,R)}),Object.values(N)}function p(V,M,L){const N={rulesSource:V,name:M.name,groups:[]};return b(N,L),D(N,M.groups),N.groups.forEach(W=>{W.rules=W.rules.filter(R=>R.promRule)}),N}function m(V,M){if(!V.promRule)return;const N=M.rules.map(R=>B(R,V.namespace,V.group)).reduce((R,G)=>{const w=R.get(I(G));return w?w.push(G):R.set(I(G),[G]),R},new Map),W=K(V.promRule,N,V.namespace.rulesSource);W&&(V.rulerRule=W.rulerRule,V.query=W.query,V.labels=W.labels,V.annotations=W.annotations)}function y(V,M,L){return b(V,L),D(V,M),V}function d(V){return V.map(M=>{const L={...M,groups:[]};return L.groups.push({name:"default",rules:x(M.groups.flatMap(N=>N.rules)),totals:O(M.groups)}),L})}function x(V){return V.sort((M,L)=>M.name.localeCompare(L.name))}function b(V,M=[]){V.groups=M.map(L=>{const N=L.rules.filter(G=>g.p.any.recordingRule(G)).length,W=L.rules.filter(G=>g.p.grafana.alertingRule(G)&&(0,g.hC)(G)).length,R={name:L.name,interval:L.interval,source_tenants:L.source_tenants,rules:[],totals:{paused:W,recording:N}};return R.rules=L.rules.map(G=>B(G,V,R)),R})}function D(V,M){const L=new Map;V.groups.forEach(N=>L.set(N.name,N)),M.forEach(N=>{let W=L.get(N.name);W||(W={name:N.name,rules:[],totals:T(N)},V.groups.push(W),L.set(N.name,W)),W.totals={...W.totals,...T(N)};const R=new Map;W.rules.forEach(G=>{const w=R.get(I(G));w?w.push(G):R.set(I(G),[G])}),(N.rules??[]).forEach(G=>{const w=K(G,R,V.rulesSource);w?(w.promRule=G,w.instanceTotals=g.R$.alertingRule(G)?C(G):{},w.filteredInstanceTotals=g.R$.alertingRule(G)?P(G):{}):W.rules.push(S(G,V,W))})})}function C(V){const M=(0,n.countBy)(V.alerts,"state");if(V.totals){const{normal:L,...N}=V.totals;return{...N,inactive:L}}return{alerting:M[l.$7.Alerting]||M.firing,pending:M[l.$7.Pending],recovering:M[l.$7.Recovering],inactive:M[l.$7.Normal],nodata:M[l.$7.NoData],error:M[l.$7.Error]||M.err||void 0}}function P(V){if(V.totalsFiltered){const{normal:M,...L}=V.totalsFiltered;return{...L,inactive:M}}return{}}function T(V){if(V.totals){const{firing:W,...R}=V.totals;return{...R,alerting:W}}const M=(0,n.countBy)(V.rules,W=>g.R$.alertingRule(W)&&W.state),L=(0,n.countBy)(V.rules,W=>W.health),N=V.rules.filter(W=>g.R$.recordingRule(W)).length;return{alerting:M[r.cF.Firing],error:L.error,nodata:L.nodata,inactive:M[r.cF.Inactive],pending:M[r.cF.Pending],recovering:M[r.cF.Recovering],recording:N}}function O(V){const M={};return V.forEach(L=>{const N=L.totals;Object.entries(N).forEach(([W,R])=>{M[W]||(M[W]=0),R!=null&&(M[W]+=R)})}),M}function S(V,M,L){return{name:V.name,query:V.query,labels:V.labels||{},annotations:g.R$.alertingRule(V)?(0,g.Rh)(V):{},promRule:V,namespace:M,group:L,instanceTotals:g.R$.alertingRule(V)?C(V):{},filteredInstanceTotals:g.R$.alertingRule(V)?P(V):{}}}function B(V,M,L){const N={labels:V.labels||{},rulerRule:V,namespace:M,group:L,instanceTotals:{},filteredInstanceTotals:{},uid:g.p.grafana.rule(V)?V.grafana_alert.uid:void 0};return g.p.dataSource.alertingRule(V)?{...N,name:V.alert,query:V.expr,annotations:V.annotations||{}}:g.p.dataSource.recordingRule(V)?{...N,name:V.record,query:V.expr,annotations:{}}:{...N,name:V.grafana_alert.title,query:"",annotations:V.annotations||{}}}function K(V,M,L){const N=I(V),W=M.get(N);if(!W)return;if((0,h.z2)(L))return W[0];const R=W.find(w=>!w.promRule&&U(w,V,!0));if(R)return R;const G=W.find(w=>!w.promRule&&U(w,V,!1));if(G)return G}function U(V,M,L=!0){const N=g.R$.alertingRule(M)?(0,g.Rh)(M):{},W=M.labels??{},R=L?(0,f.h1)(M.query):"",G=V.annotations,w=V.labels,_=L?(0,f.h1)(V.query):"";return V.name===M.name?(0,n.isEqual)([_,w,G],[R,W,N]):!1}function F(V,M,L){const N=!V,{currentData:W,isLoading:R,error:G}=c.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:h.hY,dashboardUid:V??void 0,panelId:M},{skip:N,pollingInterval:L?o.HH:void 0}),{currentData:w,isLoading:_,error:Q}=c.hK.endpoints.rulerRules.useQuery({rulerConfig:i.b,filter:{dashboardUID:V??void 0,panelId:M}},{pollingInterval:L?o.HH:void 0,skip:N}),ae=(0,s.useRef)({}),q=(0,h.Zw)(h.hY),k=(0,s.useMemo)(()=>{if(!q)return[];const ee=ae.current[h.hY];if(ee&&ee.promRules===W&&ee.rulerRules===w)return ee.result;const j={};Object.entries(w||{}).forEach(([Z,te])=>{const se={rulesSource:q,name:Z,groups:[]};g.p.grafana.rule(te[0].rules[0])&&(se.uid=te[0].rules[0].grafana_alert.namespace_uid),j[Z]=se,b(se,te)}),W?.forEach(({name:Z,groups:te})=>{const se=j[Z]=j[Z]||{rulesSource:q,name:Z,groups:[]};D(se,te)});const J=Object.values(j);return ae.current[h.hY]={promRules:W,rulerRules:w,result:J},J},[W,w,q]);return{loading:R||_,error:G??Q,result:k}}function I(V){return V.uid?V.uid??"":V.name}},23289:(ne,A,e)=>{"use strict";e.d(A,{c:()=>l});var n=e(43173),a=e(27489);let s=!1;const l={dashboardInitialized:i=>{r("init_dashboard_completed",{...i})},panelLinkClicked:i=>{r("panelheader_datalink_clicked",i)},panelStatusMessageClicked:i=>{r("panelheader_statusmessage_clicked",i)},panelCancelQueryClicked:i=>{r("panelheader_cancelquery_clicked",i)},toolbarFavoritesClick:()=>{r("toolbar_actions_clicked",{item:"favorites"})},toolbarSettingsClick:()=>{r("toolbar_actions_clicked",{item:"settings"})},toolbarShareClick:()=>{r("toolbar_actions_clicked",{item:"share"})},toolbarShareDropdownClick:()=>{r("toolbar_actions_clicked",{item:"share_dropdown"})},toolbarAddClick:()=>{r("toolbar_actions_clicked",{item:"add"})},sharingCategoryClicked:i=>{c("sharing_category_clicked",i)},shareLinkCopied:i=>{c("sharing_link_copy_clicked",i)},embedSnippetCopy:i=>{c("sharing_embed_copy_clicked",i)},generatePanelImageClicked:i=>{c("sharing_link_generate_image_clicked",i)},downloadPanelImageClicked:i=>{c("sharing_link_download_image_clicked",i)},publishSnapshotClicked:i=>{c("sharing_snapshot_publish_clicked",i)},publishSnapshotLocalClicked:i=>{c("sharing_snapshot_local_clicked",i)},exportDownloadJsonClicked:i=>{c("sharing_export_download_json_clicked",i)},exportCopyJsonClicked:i=>{c("sharing_export_copy_json_clicked",i)},exportSaveJsonClicked:i=>{c("sharing_export_save_json_clicked",i)},exportViewJsonClicked:i=>{c("sharing_export_view_json_clicked",i)},generatePublicDashboardUrlClicked:i=>{c("sharing_public_generate_url_clicked",i)},revokePublicDashboardEmailClicked:i=>{c("sharing_public_email_revoke_clicked",i)},resendPublicDashboardEmailClicked:i=>{c("sharing_public_email_resend_clicked",i)},publicDashboardEmailInviteClicked:i=>{c("sharing_public_email_invite_clicked",i)},publicDashboardShareTypeChange:i=>{c("sharing_public_can_view_clicked",i)},publicDashboardTimeSelectionChanged:i=>{c("sharing_public_time_picker_clicked",i)},publicDashboardAnnotationsSelectionChanged:i=>{c("sharing_public_annotations_clicked",i)},publicDashboardUrlCopied:i=>{c("sharing_public_copy_url_clicked",i)},publicDashboardPauseSharingClicked:i=>{c("sharing_public_pause_clicked",i)},revokePublicDashboardClicked:i=>{c("sharing_public_revoke_clicked",i)},emptyDashboardButtonClicked:i=>{r("emptydashboard_clicked",i)},toolbarAddButtonClicked:i=>{r("toolbar_add_clicked",i)},setScenesContext:()=>(s=!0,()=>{s=!1}),versionRestoreClicked:i=>{r("version_restore_clicked",i)},showMoreVersionsClicked:()=>{r("show_more_versions_clicked")},generateDashboardImageClicked:i=>{r("dashboard_image_generated",i)},downloadDashboardImageClicked:i=>{r("dashboard_image_downloaded",i)}},r=(i,o)=>{const h=s?{scenesView:!0}:{},f=n.$.featureToggles?.dashboardNewLayouts??!1;o?(0,a.rR)(`dashboards_${i}`,{...o,...h,isDynamicDashboard:f}):(0,a.rR)(`dashboards_${i}`,{isDynamicDashboard:f})},c=(i,o)=>{const h=s?{scenesView:!0}:{};o?(0,a.rR)(`dashboards_${i}`,{...o,...h}):(0,a.rR)(`dashboards_${i}`)}},23390:(ne,A,e)=>{"use strict";e.d(A,{d:()=>g,pU:()=>u});var n=e(1932),a=e(2543),s=e.n(a),l=e(92745),r=e(70327),c=e(96137),i=e(29609),o=e(80218),h=e(75756),f=e(71639);function g(){const[p]=(0,f.D)(),[m]=r.hK.endpoints.upsertRuleGroupForNamespace.useMutation(),y=(0,l.t)("alerting.rules.add-rule.success","Rule added successfully");return(0,o.Yb)(async(d,x,b)=>{const{namespaceName:D}=d,C=(0,c.Qn)({rule:x,interval:b,groupName:d.groupName}),{newRuleGroupDefinition:P,rulerConfig:T}=await p(d,[C]);return m({rulerConfig:T,namespace:D,payload:P,notificationOptions:{successMessage:y}}).unwrap()})}function u(){const[p]=(0,f.D)(),[m]=E(),[y]=r.hK.endpoints.upsertRuleGroupForNamespace.useMutation(),d=(0,l.t)("alerting.rules.update-rule.success","Rule updated successfully");return(0,o.Yb)(async(x,b,D,C,P)=>{const{namespaceName:T}=x,O=v(b,D),S=(0,a.isEqual)(x,C);if(C&&!S)return m.execute(x,C,b,D,P);const B=(0,c.Wu)({identifier:b,rule:O}),{newRuleGroupDefinition:K,rulerConfig:U}=await p(x,[B]);return y({rulerConfig:U,namespace:T,payload:K,notificationOptions:{successMessage:d}}).unwrap()})}function E(){const[p]=(0,f.D)(),[m]=(0,h.Y)(),[y]=r.hK.endpoints.upsertRuleGroupForNamespace.useMutation(),d=(0,l.t)("alerting.rules.update-rule.success","Rule updated successfully");return(0,o.Yb)(async(x,b,D,C,P)=>{const T=v(D,C),O=(0,c.Qn)({rule:T,interval:P}),{newRuleGroupDefinition:S,rulerConfig:B}=await p(b,[O]),K=await y({rulerConfig:B,namespace:b.namespaceName,payload:S,notificationOptions:{successMessage:d}}).unwrap();return(0,i.A4)(D)||await m.execute(x,D),K})}function v(p,m){const y=(0,i.A4)(p);return(0,n.jM)(m,d=>{const x=i.p.grafana.rule(d);y&&x&&(d.grafana_alert.uid=p.uid)})}},23414:(ne,A,e)=>{"use strict";e.d(A,{Zj:()=>y,pi:()=>h,zH:()=>m});var n=e(79243),a=e(55386),s=e(5421),l=e(80011),r=e(739),c=e(53568),i=e(62748),o=e(42073);const h=12,f=150,g=30,u=15,E=40,v=18,p=8;class m extends i.R{merge(P){this.props.size=(0,o.Y)("max",this.props.size,P.size),this.props.label||(this.props.label=P.label),this.props.placement===r.vM.Auto&&(this.props.placement=P.placement)}getConfig(){let{scaleKey:P,label:T,show:O=!0,placement:S=r.vM.Auto,grid:B={show:!0},ticks:K,space:U,filter:F,gap:I=5,formatValue:V,splits:M,values:L,incrs:N,isTime:W,timeZone:R,theme:G,tickLabelRotation:w,size:_,color:Q,border:ae,decimals:q,distr:k=r.L4.Linear}=this.props;const ee=`${h}px ${G.typography.fontFamily}`,j=G.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,a.j9)(P)&&(M=[0,1]),q===0&&k===r.L4.Linear&&(F=(Z,te)=>te.map(se=>Number.isInteger(se)?se:null));let J={scale:P,show:O,stroke:Q??G.colors.text.primary,side:D(S),font:ee,size:_??((Z,te,se)=>b(Z,te,se)),rotate:w,gap:I,labelGap:0,grid:{show:B.show,stroke:j,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:ae?.show?Q??G.colors.text.primary:j,width:1/devicePixelRatio,size:4},K),splits:M,values:L,space:U??((Z,te,se,ie,ce)=>x(Z,te,se,ie,ce,V)),filter:F,incrs:N};return ae?.show&&(J.border={stroke:Q??G.colors.text.primary,width:1/devicePixelRatio,...ae}),T!=null&&T.length>0&&(J.label=T,J.labelSize=h+p,J.labelFont=ee,J.labelGap=p),L?J.values=L:W?J.values=d:V&&(J.values=(Z,te,se,ie,ce)=>{let re=(0,n.E)((0,n.h)(ce,6));return te.map(ue=>ue==null?null:V(ue,re>0?re:void 0))}),J.timeZone=R,J}}const y={second:1e3,minute:60*1e3,hour:3600*1e3,day:1440*60*1e3,month:672*60*60*1e3,year:365*24*60*60*1e3};function d(C,P,T,O,S){const B=C.axes[T],K="timeZone"in B&&typeof B.timeZone=="string"?B.timeZone:void 0,U=C.scales.x,F=(U?.max??0)-(U?.min??0),I=Math.round(y.year/y.day)*y.day,V=Math.round(S/y.day)*y.day;let M=s.WC.interval.year;return S<y.second?M=s.WC.interval.millisecond:S<=y.minute?M=s.WC.interval.second:F<=y.day?M=s.WC.interval.minute:S<=y.day?M=s.WC.interval.hour:F<y.year?M=s.WC.interval.day:V===I?M=s.WC.interval.year:S<=y.year&&(M=s.WC.interval.month),P.map(L=>L==null?"":(0,l.LE)(L,{format:M,timeZone:K}))}function x(C,P,T,O,S,B){const K=C.axes[P],U=C.scales[K.scale];if(K.side!==2||!U)return S<=f?u:g;const F=S/E,I=(O-T)/F,V=Math.max(Math.abs(T),Math.abs(O));let M="";if(U.time)M=d(C,[V],P,E,I)[0];else if(B!=null)M=B(V);else return E;return(0,c.kD)(M,h).width+v}function b(C,P,T){const O=C.axes[T];let S=O.ticks.size;if(O.side===2)S+=O.gap+h;else if(P?.length){let B=P.reduce((U,F)=>Math.max(U,(0,c.kD)(F,h).width),0);const K=Math.min(C.width*.4,B);S+=O.gap+O.labelGap+K}return Math.ceil(S)}function D(C){switch(C){case r.vM.Top:return 0;case r.vM.Right:return 1;case r.vM.Bottom:return 2;case r.vM.Left:}return 3}},23656:(ne,A,e)=>{"use strict";e.d(A,{L:()=>Ot});var n=e(2543),a=e(92745),s=e(36490),l=e(43173),r=e(45863),c=e(68373),i=e(77731),o=e(30124),h=e(33143),f=e(3204),g=e(17862),u=e(29700),E=e(93389),v=e(3688),p=e(70030),m=e(8285);class y extends r.Bs{constructor(gt){super({source:gt.source,data:gt.source.resolve().state.data}),this.addActivationHandler(()=>{this._subs.add(this.state.source.resolve().subscribeToState((Ct,Wt)=>{Ct.data!==Wt.data&&this.setState({data:Ct.data})}))})}setContainerWidth(gt){this.state.source.resolve().setContainerWidth?.(gt)}isDataReadyToDisplay(){return this.state.source.resolve().isDataReadyToDisplay?.()??!0}cancelQuery(){this.state.source.resolve().cancelQuery?.()}getResultsStream(){return this.state.source.resolve().getResultsStream()}}var d=e(74848),x=e(22803),b=e(51898),D=e(63142),C=e(54314),P=e(92807),T=e(13941),O=e(32881),S=e(65642),B=e(73427),K=e(54),U=e(52161),F=e(34999),I=e(6975),V=e(60208),M=e(22971),L=e(21764),N=e(77256),W=e(54148),R=e(16817),G=e(5556),w=e(25992),_=e(45861),Q=e(74268),ae=e(20437);const q=({panel:ct,className:gt})=>{const Ct=(0,W.zy)(),{loading:Wt,value:Ft}=(0,R.A)(()=>(0,ae.J6)(ct),[ct]);if(Wt)return(0,d.jsx)(_.$n,{disabled:!0,children:(0,d.jsx)(a.x6,{i18nKey:"dashboard-scene.scenes-new-rule-from-panel-button.new-alert-rule",children:"New alert rule"})});if(!Ft)return(0,d.jsx)(F.F,{severity:"info",title:(0,a.t)("dashboard-scene.scenes-new-rule-from-panel-button.title-no-alerting-capable-query-found","No alerting capable query found"),children:(0,d.jsx)(a.x6,{i18nKey:"dashboard-scene.scenes-new-rule-from-panel-button.body-no-alerting-capable-query-found",children:"Cannot create alerts from this panel because no query to an alerting capable datasource is found."})});const Vt=async()=>{(0,w.fH)(Q.le.alertRuleFromPanel);const Ht=await(0,ae.J6)(ct),dn=G.kM.renderUrl("/alerting/new",{defaults:JSON.stringify(Ht),returnTo:Ct.pathname+Ct.search});s.Ny.push(dn)};return(0,d.jsx)(_.$n,{icon:"bell",onClick:Vt,className:gt,"data-testid":"create-alert-rule-button",children:(0,d.jsx)(a.x6,{i18nKey:"dashboard-scene.scenes-new-rule-from-panel-button.new-alert-rule",children:"New alert rule"})})};var k=(ct=>(ct.Queries="queries",ct.Transformations="transformations",ct.Alert="alert",ct))(k||{});class ee extends r.Bs{constructor(){super(...arguments),this.tabId=k.Alert}static{this.Component=j}renderTab(gt){return(0,d.jsx)(Z,{model:this,...gt},this.getTabLabel())}getTabLabel(){return(0,a.t)("dashboard-scene.panel-data-alerting-tab.tab-label","Alert")}getDashboardUID(){return this.getDashboard().state.uid}getDashboard(){return(0,m.YQ)(this)}getLegacyPanelId(){return(0,m.Cs)(this.state.panelRef.resolve())}getCanCreateRules(){const gt=(0,K.Wd)("grafana");return l.$.unifiedAlerting&&this.getDashboard().state.meta.canSave&&B.TP.hasPermission(gt.create)}}function j({model:ct}){const gt=(0,D.of)(J),{errors:Ct,loading:Wt,rules:Ft}=(0,L.S)({dashboardUID:ct.getDashboardUID(),panelId:ct.getLegacyPanelId()}),Vt=Ct.length?(0,d.jsx)(F.F,{title:(0,a.t)("dashboard-scene.panel-data-alerting-tab-rendered.alert.title-errors-loading-rules","Errors loading rules"),severity:"error",children:Ct.map((rn,Yn)=>(0,d.jsx)("div",{children:(0,d.jsxs)(a.x6,{i18nKey:"dashboard-scene.panel-data-alerting-tab-rendered.error-failed-to-load",values:{errorToDisplay:(0,N.JZ)(rn)},children:["Failed to load Grafana rules state: ","{{errorToDisplay}}"]})},Yn))}):null;if(Wt&&!Ft.length)return(0,d.jsxs)(d.Fragment,{children:[Vt,(0,d.jsx)(I._,{text:(0,a.t)("dashboard-scene.panel-data-alerting-tab-rendered.text-loading-rules","Loading rules...")})]});const Ht=ct.state.panelRef.resolve(),dn=ct.getCanCreateRules();if(Ft.length)return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(M.sF,{rules:Ft}),dn&&(0,d.jsx)(q,{className:gt.newButton,panel:Ht})]});const sn=!ct.getDashboardUID(),Rn=ct.getDashboard();return(0,d.jsxs)("div",{className:gt.noRulesWrapper,children:[!sn&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{children:(0,d.jsx)(a.x6,{i18nKey:"dashboard.panel-edit.alerting-tab.no-rules",children:"There are no alert rules linked to this panel."})}),dn&&(0,d.jsx)(q,{panel:Ht})]}),sn&&!!Rn.state.meta.canSave&&(0,d.jsx)(F.F,{severity:"info",title:(0,a.t)("dashboard-scene.panel-data-alerting-tab-rendered.title-dashboard-not-saved","Dashboard not saved"),children:(0,d.jsx)(a.x6,{i18nKey:"dashboard.panel-edit.alerting-tab.dashboard-not-saved",children:"Dashboard must be saved before alerts can be added."})})]})}const J=ct=>({newButton:(0,x.css)({marginTop:ct.spacing(3)}),noRulesWrapper:(0,x.css)({margin:ct.spacing(2),backgroundColor:ct.colors.background.secondary,padding:ct.spacing(3)})});function Z(ct){const{model:gt}=ct,{rules:Ct}=(0,L.S)({dashboardUID:gt.getDashboardUID(),panelId:gt.getLegacyPanelId(),poll:!1});return(0,d.jsx)(V.o,{label:gt.getTabLabel(),icon:"bell",counter:Ct.length,active:ct.active,onChangeTab:ct.onChangeTab})}var te=e(48480),se=e(1906),ie=e(78282),ce=e(41654),re=e(1404),ue=e(7078),X=e(29328),le=e(52900),he=e(82779),fe=e(26689),Ce=e(23117),Ae=e(65966),_e=e(32154),Xe=e(57204),De=e(73601),Me=e(18615),Te=e(98838),$e=e(4651),Re=e(28998),Ke=e(60249),Ve=e(81657),Se=e(22175);class Ye extends r.Bs{constructor(gt){super(gt),this.tabId=k.Queries,this.onOpenInspector=()=>{(0,m.YQ)(this).showModal(new Ke.C({panelRef:this.state.panelRef,currentTab:fe.q.Query}))},this.onChangeDataSource=async(Ct,Wt)=>{const{dsSettings:Ft}=this.state,Vt=this.queryRunner,Ht=Ft?await(0,ie.l)().get({uid:Ft.uid}):void 0,dn=await(0,ie.l)().get({uid:Ct.uid}),sn=Vt.state.queries,Rn=Wt||await(0,Xe.y)(dn,Ct.uid,sn,Ht);Vt.setState({datasource:(0,te.p$)(Ct),queries:Rn}),Wt&&Vt.runQueries(),this.loadDataSource()},this.onQueryOptionsChange=Ct=>{const Wt=this.state.panelRef.resolve(),Ft=this.queryRunner,Vt={},Ht={};Ct.maxDataPoints!==Ft.state.maxDataPoints&&(Vt.maxDataPoints=Ct.maxDataPoints??void 0),Ct.minInterval!==Ft.state.minInterval&&(Vt.minInterval=Ct.minInterval??void 0);const dn=Ct.timeRange?.from??void 0,sn=Ct.timeRange?.shift??void 0,Rn=Ct.timeRange?.hide;dn!==void 0||sn!==void 0?(Ht.$timeRange=new Ve.v({timeFrom:dn,timeShift:sn,hideTimeOverride:Rn}),Ht.hoverHeader=(0,Se.$7)(Wt.state.title,Ht.$timeRange)):(Ht.$timeRange=void 0,Ht.hoverHeader=(0,Se.$7)(Wt.state.title,void 0)),Ct.cacheTimeout!==Ft?.state.cacheTimeout&&(Vt.cacheTimeout=Ct.cacheTimeout),Ct.queryCachingTTL!==Ft?.state.queryCachingTTL&&(Vt.queryCachingTTL=Ct.queryCachingTTL),Wt.setState(Ht),Ft.setState(Vt),Ft.runQueries()},this.onQueriesChange=Ct=>{this.queryRunner.setState({queries:Ct})},this.onRunQueries=()=>{this.queryRunner.runQueries()},this.addQueryClick=()=>{const Ct=this.getQueries();this.onQueriesChange((0,re.U7)(Ct,this.newQuery()))},this.onAddQuery=Ct=>{const Wt=this.getQueries(),Ft=this.state.dsSettings;this.onQueriesChange((0,re.U7)(Wt,Ct,Ft?(0,te.p$)(Ft):{type:void 0,uid:void 0}))},this.onAddExpressionOfType=Ct=>{const Wt=this.getQueries(),Vt={...X.Ex.newQuery(),type:Ct},Ht=(0,he.rV)(Vt);this.onQueriesChange((0,re.U7)(Wt,Ht))},this.updateDatasourceIfNeeded=async Ct=>{const{datasource:Wt}=this.state;if(Wt?.uid!==Ct.uid){const Vt=(0,Re.tR)().getInstanceSettings(Ct);Vt&&await this.onChangeDataSource(Vt)}},this.addActivationHandler(()=>this.onActivate())}static{this.Component=Ue}getTabLabel(){return(0,a.t)("dashboard-scene.panel-data-queries-tab.tab-label","Queries")}getItemsCount(){return this.getQueries().length}renderTab(gt){return(0,d.jsx)(Qe,{model:this,...gt},this.getTabLabel())}onActivate(){this.loadDataSource()}async loadDataSource(){if(!this.state.panelRef.resolve().state.$data)return;let Wt=this.queryRunner.state.datasource;try{let Ft,Vt;if(Wt)Ft=await(0,ie.l)().get(Wt),Vt=(0,ie.l)().getInstanceSettings(Wt);else{const dn=(0,m.YQ)(this).state.uid??"",sn=(0,i.CW)(dn);sn?.datasourceUid!==null&&(Vt=(0,ie.l)().getInstanceSettings({uid:sn?.datasourceUid}),Vt&&(Ft=await(0,ie.l)().get({uid:sn?.datasourceUid,type:Vt.type}),this.queryRunner.setState({datasource:{...(0,te.p$)(Vt),uid:sn?.datasourceUid}})))}Ft&&Vt&&(this.setState({datasource:Ft,dsSettings:Vt}),(0,ue.tw)((0,te.p$)(Vt)||{default:!0}))}catch(Ft){const Vt=await(0,ie.l)().get(l.$.defaultDatasource),Ht=(0,ie.l)().getInstanceSettings(l.$.defaultDatasource);Vt&&Ht&&(this.setState({datasource:Vt,dsSettings:Ht}),this.queryRunner.setState({datasource:(0,te.p$)(Ht)})),console.error(Ft)}}buildQueryOptions(){const gt=this.state.panelRef.resolve(),Ct=(0,m.un)(gt),Wt=r.jh.getTimeRange(gt);let Ft={from:void 0,shift:void 0,hide:void 0};Wt instanceof Ve.v&&(Ft={from:Wt.state.timeFrom,shift:Wt.state.timeShift,hide:Wt.state.hideTimeOverride});let Vt=Ct.state.queries;const Ht=this.state.dsSettings;return{cacheTimeout:Ht?.meta.queryOptions?.cacheTimeout?Ct.state.cacheTimeout:void 0,queryCachingTTL:Ht?.cachingConfig?.enabled?Ct.state.queryCachingTTL:void 0,dataSource:{default:Ht?.isDefault,...Ht?(0,te.p$)(Ht):{type:void 0,uid:void 0}},queries:Vt,maxDataPoints:Ct.state.maxDataPoints,minInterval:Ct.state.minInterval,timeRange:Ft}}getQueries(){return this.queryRunner.state.queries}newQuery(){const{dsSettings:gt,datasource:Ct}=this.state;let Wt;return gt?.meta.mixed?Ct?.meta.mixed?Wt=(0,ie.l)().getInstanceSettings(l.$.defaultDatasource):Wt=Ct:Wt=gt,{...Ct?.getDefaultQuery?.(se.Jk.PanelEditor),datasource:{uid:Wt?.uid,type:Wt?.type}}}isExpressionsSupported(gt){return(gt.meta.backend||gt.meta.alerting||gt.meta.mixed)===!0}renderExtraActions(){return Ce.m.getAllExtraRenderAction().map((gt,Ct)=>gt({onAddQuery:this.onAddQuery,onChangeDataSource:this.onChangeDataSource,key:Ct})).filter(Boolean)}get queryRunner(){return(0,m.un)(this.state.panelRef.resolve())}}function Ue({model:ct}){const{datasource:gt,dsSettings:Ct}=ct.useState(),{data:Wt,queries:Ft}=ct.queryRunner.useState(),{openDrawer:Vt,queryLibraryEnabled:Ht}=(0,Te.Y)();if(!gt||!Ct||!Wt)return null;const dn=!(0,De.k)(Ct.name),sn=async Rn=>{const rn=Ft.map(ea=>ea.datasource?ea:{...ea,datasource:gt.getRef()}),Yn=(0,re.U7)(rn,Rn);if(ct.onQueriesChange(Yn),Rn.datasource?.uid){const Fa={uid:new Set(Yn.map(jt=>jt.datasource?.uid).filter(jt=>jt!==$e.Uj)).size>1?Me.uv:Rn.datasource.uid};await ct.updateDatasourceIfNeeded(Fa)}};return(0,d.jsxs)("div",{"data-testid":b.Tp.components.QueryTab.content,children:[(0,d.jsx)(_e.K,{data:Wt,dsSettings:Ct,dataSource:gt,options:ct.buildQueryOptions(),onDataSourceChange:ct.onChangeDataSource,onOptionsChange:ct.onQueryOptionsChange,onOpenQueryInspector:ct.onOpenInspector}),(0,d.jsx)(Ae.L,{data:Wt,queries:Ft,dsSettings:Ct,onAddQuery:ct.onAddQuery,onQueriesChange:ct.onQueriesChange,onRunQueries:ct.onRunQueries,onUpdateDatasources:Ht?ct.updateDatasourceIfNeeded:void 0,app:se.Jk.PanelEditor}),(0,d.jsxs)(ce.B,{gap:2,children:[dn&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(_.$n,{icon:"plus",onClick:ct.addQueryClick,variant:"secondary","data-testid":b.Tp.components.QueryTab.addQuery,children:(0,d.jsx)(a.x6,{i18nKey:"dashboard-scene.panel-data-queries-tab-rendered.add-query",children:"Add query"})}),Ht&&(0,d.jsx)(_.$n,{icon:"plus",onClick:()=>Vt({datasourceFilters:je(gt,Ft),onSelectQuery:sn,options:{context:se.Jk.PanelEditor}}),variant:"secondary","data-testid":b.Tp.components.QueryTab.addQueryFromLibrary,children:(0,d.jsx)(a.x6,{i18nKey:"dashboards.panel-queries.add-from-saved-queries",children:"Add from saved queries"})})]}),l.$.expressionsEnabled&&ct.isExpressionsSupported(Ct)&&(0,d.jsx)(le.m,{handleOnSelect:ct.onAddExpressionOfType,children:(0,d.jsx)(_.$n,{icon:"plus",variant:"secondary","data-testid":b.Tp.components.QueryTab.addExpression,children:(0,d.jsx)(a.x6,{i18nKey:"dashboard-scene.panel-data-queries-tab-rendered.expression",children:"Expression\xA0"})})}),ct.renderExtraActions()]})]})}function je(ct,gt){if(ct.uid==="-- Mixed --"){const Ct=(0,ie.l)();return gt.map(Wt=>Ct.getInstanceSettings(Wt.datasource)?.name).filter(Wt=>Wt!==void 0)}else return[ct.name]}function Qe(ct){const{model:gt}=ct,Ct=gt.queryRunner.useState();return(0,d.jsx)(V.o,{label:gt.getTabLabel(),icon:"database",counter:Ct.queries.length,active:ct.active,onChangeTab:ct.onChangeTab})}var He=e(21835),Je=e(96540),de=e(93256),ve=e(71599),me=e(47350),xe=e(80849),Ee=e(8642),Pe=e(76319),Oe=e(76808),We=e(34176);function Fe(ct){const{isOpen:gt,series:Ct,onClose:Wt,onTransformationAdd:Ft}=ct,[Vt,Ht]=(0,Je.useState)({search:"",showIllustrations:!0}),dn=An=>Ht({...Vt,search:An.currentTarget.value}),sn=An=>Ht({...Vt,showIllustrations:An}),Rn=An=>Ht({...Vt,selectedFilter:An}),rn=(0,Je.useMemo)(()=>Ee.h.list().sort((An,Fa)=>An.name>Fa.name?1:Fa.name>An.name?-1:0),[]),Yn=rn.filter(An=>{if(Vt.selectedFilter&&Vt.selectedFilter!==We.e&&!An.categories?.has(Vt.selectedFilter))return!1;const Fa=Vt.search.toLocaleLowerCase(),jt=An.name.toLocaleLowerCase().includes(Fa)||An.description?.toLocaleLowerCase().includes(Fa),tn=An.tags?.size?Array.from(An.tags).some(an=>an.toLocaleLowerCase().includes(Fa)):!1;return jt||tn}),ea=(0,d.jsxs)(d.Fragment,{children:[Yn.length," / ",rn.length," \xA0\xA0",(0,d.jsx)(Pe.K,{name:"times",onClick:()=>{Ht({...Vt,search:""})},tooltip:(0,a.t)("dashboard-scene.transformations-drawer.search-box-suffix.tooltip-clear-search","Clear search")})]});if(gt)return(0,d.jsx)(Oe.R,{data:Ct,onTransformationAdd:Ft,xforms:Yn,search:Vt.search,noTransforms:!1,suffix:Vt.search!==""?ea:(0,d.jsx)(d.Fragment,{}),selectedFilter:Vt.selectedFilter,onSearchChange:dn,onSearchKeyDown:()=>{},showIllustrations:Vt.showIllustrations,onShowIllustrationsChange:sn,onSelectedFilterChange:Rn,onClose:Wt})}class Be extends r.Bs{constructor(){super(...arguments),this.tabId=k.Transformations}static{this.Component=Le}getTabLabel(){return(0,a.t)("dashboard-scene.panel-data-transformations-tab.tab-label","Transformations")}renderTab(gt){return(0,d.jsx)(qe,{model:this,...gt},this.getTabLabel())}getQueryRunner(){return(0,m.un)(this.state.panelRef.resolve())}getDataTransformer(){const gt=this.state.panelRef.resolve().state.$data;if(!gt||!(gt instanceof r.Es))throw new Error("Could not find SceneDataTransformer for panel");return gt}onChangeTransformations(gt){const Ct=this.getDataTransformer();Ct.setState({transformations:gt}),Ct.reprocessTransformations()}}function Le({model:ct}){const gt=(0,D.of)(Ze),Ct=ct.getQueryRunner().useState(),{data:Wt,transformations:Ft}=ct.getDataTransformer().useState(),Vt=Ft,[Ht,dn]=(0,Je.useState)(!1),[sn,Rn]=(0,Je.useState)(!1),rn=()=>dn(!0),Yn=()=>dn(!1);if(!Wt||!Ct.data)return;const ea=(0,d.jsx)(Fe,{onClose:Yn,onTransformationAdd:An=>{An.value!==void 0&&(ct.onChangeTransformations([...Vt,{id:An.value,options:{}}]),Yn())},isOpen:Ht,series:Wt.series});return Vt.length<1?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(xe.p,{onShowPicker:rn}),ea]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Ge,{data:Ct.data,transformations:Vt,model:ct}),(0,d.jsxs)(de.e,{children:[(0,d.jsx)(_.$n,{icon:"plus",variant:"secondary",onClick:rn,"data-testid":b.Tp.components.Transforms.addTransformationButton,children:(0,d.jsx)(a.x6,{i18nKey:"dashboard-scene.panel-data-transformations-tab-rendered.add-another-transformation",children:"Add another transformation"})}),(0,d.jsx)(_.$n,{"data-testid":b.Tp.components.Transforms.removeAllTransformationsButton,className:gt.removeAll,icon:"times",variant:"secondary",onClick:()=>Rn(!0),children:(0,d.jsx)(a.x6,{i18nKey:"dashboard-scene.panel-data-transformations-tab-rendered.delete-all-transformations",children:"Delete all transformations"})})]}),(0,d.jsx)(ve.u,{isOpen:sn,title:(0,a.t)("dashboard-scene.panel-data-transformations-tab-rendered.title-delete-all-transformations","Delete all transformations?"),body:(0,a.t)("dashboard-scene.panel-data-transformations-tab-rendered.body-delete-all-transformations","By deleting all transformations, you will go back to the main selection screen."),confirmText:(0,a.t)("dashboard-scene.panel-data-transformations-tab-rendered.confirmText-delete-all","Delete all"),onConfirm:()=>{ct.onChangeTransformations([]),Rn(!1)},onDismiss:()=>Rn(!1)}),ea]})}function Ge({transformations:ct,model:gt,data:Ct}){const Wt=ct.map((Vt,Ht)=>({id:`${Ht} - ${Vt.id}`,transformation:Vt})),Ft=Vt=>{if(!Vt||!Vt.destination)return;const Ht=Vt.source.index,dn=Vt.destination.index;if(Ht===dn)return;const sn=Array.from(Wt),[Rn]=sn.splice(Ht,1);sn.splice(dn,0,Rn),gt.onChangeTransformations(sn.map(rn=>rn.transformation))};return(0,d.jsx)(He.JY,{onDragEnd:Ft,children:(0,d.jsx)(He.gL,{droppableId:"transformations-list",direction:"vertical",children:Vt=>(0,d.jsxs)("div",{ref:Vt.innerRef,...Vt.droppableProps,children:[(0,d.jsx)(me.A,{onChange:(Ht,dn)=>{const sn=ct.slice();sn[Ht]=dn,gt.onChangeTransformations(sn)},onRemove:Ht=>{const dn=ct.slice();dn.splice(Ht,1),gt.onChangeTransformations(dn)},configs:Wt,data:Ct}),Vt.placeholder]})})})}const Ze=ct=>({removeAll:(0,x.css)({marginLeft:ct.spacing(2)})});function qe(ct){const{model:gt}=ct,Ct=gt.getDataTransformer().useState();return(0,d.jsx)(V.o,{label:gt.getTabLabel(),icon:"process",counter:Ct.transformations.length,active:ct.active,onChangeTab:ct.onChangeTab})}class at extends r.Bs{constructor(){super(...arguments),this._urlSync=new r.So(this,{keys:["tab"]}),this.onChangeTab=gt=>{this.setState({tab:gt.tabId})}}static{this.Component=ht}static createFor(gt){const Ct=gt.getRef(),Wt=[new Ye({panelRef:Ct}),new Be({panelRef:Ct})];return Et(gt.state.pluginId)&&Wt.push(new ee({panelRef:Ct})),new at({panelRef:Ct,tabs:Wt,tab:k.Queries})}getUrlState(){return{tab:this.state.tab}}updateFromUrl(gt){gt.tab&&typeof gt.tab=="string"&&this.setState({tab:gt.tab})}}function ht({model:ct}){const{tab:gt,tabs:Ct}=ct.useState(),Wt=(0,D.of)(mt);if(!Ct||!Ct.length)return;const Ft=Ct.find(Vt=>Vt.tabId===gt);return(0,d.jsxs)("div",{className:Wt.dataPane,"data-testid":b.Tp.components.PanelEditor.DataPane.content,children:[(0,d.jsx)(C.U,{className:Wt.tabsBar,children:Ct.map(Vt=>Vt.renderTab({active:Vt.tabId===gt,onChangeTab:()=>ct.onChangeTab(Vt)}))}),(0,d.jsx)(P.P,{backgroundColor:"primary",children:(0,d.jsx)(T.J,{className:Wt.tabContent,children:(0,d.jsx)(O.mc,{children:Ft&&(0,d.jsx)(Ft.Component,{model:Ft})})})})]})}function Et(ct){const{unifiedAlertingEnabled:gt=!1}=(0,S.zj)(),Ct=B.TP.hasPermission((0,K.Wd)(U.hY).read);return gt&&Ct?ct==="graph"||ct==="timeseries":!1}function mt(ct){return{dataPane:(0,x.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0,height:"100%",width:"100%"}),tabContent:(0,x.css)({padding:ct.spacing(2),border:`1px solid ${ct.colors.border.weak}`,borderLeft:"none",borderBottom:"none",borderTopRightRadius:ct.shape.radius.default,flexGrow:1}),tabsBar:(0,x.css)({flexShrink:0,paddingLeft:ct.spacing(2)})}}var Pt=e(7895),rt=e(68079),Kt=e(66483),Gt=e(12161),en=e(17732),st=e(82754),$t=e(49045);const xn="(max-height: 540px)";function pn(){return(0,$t.A)(xn)}function _n({model:ct}){const gt=(0,m.YQ)(ct),{optionsPane:Ct}=ct.useState(),Wt=(0,D.of)(pt),[Ft,Vt]=(0,h.dt)(),Ht=pn(),{containerProps:dn,primaryProps:sn,secondaryProps:Rn,splitterProps:rn,splitterState:Yn,onToggleCollapse:ea}=(0,st.L)({direction:"row",dragPosition:"end",initialSize:330,usePixels:!0,collapsed:Ft,collapseBelowPixels:250,disabled:Ht});return(0,Je.useEffect)(()=>{Vt(Yn.collapsed)},[Yn.collapsed,Vt]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Kt.c,{dashboard:gt}),(0,d.jsxs)("div",{...dn,className:(0,x.cx)(dn.className,Wt.content),"data-testid":b.Tp.components.PanelEditor.General.content,children:[(0,d.jsx)("div",{...sn,className:(0,x.cx)(sn.className,Wt.body),children:(0,d.jsx)(kn,{model:ct})}),(0,d.jsx)("div",{...rn}),(0,d.jsxs)("div",{...Rn,className:(0,x.cx)(Rn.className,Wt.optionsPane),children:[Yn.collapsed&&(0,d.jsx)("div",{className:Wt.expandOptionsWrapper,children:(0,d.jsx)(Pt.I,{tooltip:(0,a.t)("dashboard-scene.panel-editor-renderer.tooltip-open-options-pane","Open options pane"),icon:"arrow-to-right",onClick:ea,variant:"canvas",className:Wt.rotate180,"aria-label":(0,a.t)("dashboard-scene.panel-editor-renderer.aria-label-open-options-pane","Open options pane")})}),!Yn.collapsed&&Ct&&(0,d.jsx)(Ct.Component,{model:Ct}),!Yn.collapsed&&!Ct&&(0,d.jsx)(rt.y,{})]})]})]})}function kn({model:ct}){const gt=(0,m.YQ)(ct),{dataPane:Ct,showLibraryPanelSaveModal:Wt,showLibraryPanelUnlinkModal:Ft,tableView:Vt}=ct.useState(),Ht=ct.getPanel(),dn=(0,m.iL)(Ht),{controls:sn}=gt.useState(),Rn=(0,D.of)(pt),rn=pn(),{containerProps:Yn,primaryProps:ea,secondaryProps:An,splitterProps:Fa,splitterState:jt,onToggleCollapse:tn}=(0,st.L)({direction:"column",dragPosition:"start",initialSize:.5,collapseBelowPixels:150,disabled:rn});return Yn.className=(0,x.cx)(Yn.className,Rn.container),!Ct&&!rn&&(ea.style.flexGrow=1),(0,d.jsxs)("div",{className:(0,x.cx)(Rn.pageContainer,sn&&Rn.pageContainerWithControls),children:[sn&&(0,d.jsx)("div",{className:Rn.controlsWrapper,children:(0,d.jsx)(sn.Component,{model:sn})}),(0,d.jsxs)("div",{...Yn,children:[(0,d.jsx)("div",{...ea,className:(0,x.cx)(ea.className,rn&&Rn.fixedSizeViz),children:(0,d.jsx)(Jn,{panel:Ht,tableView:Vt})}),Wt&&dn&&(0,d.jsx)(en.Z,{libraryPanel:dn,onDismiss:ct.onDismissLibraryPanelSaveModal,onConfirm:ct.onConfirmSaveLibraryPanel,onDiscard:ct.onDiscard}),Ft&&dn&&(0,d.jsx)(Gt.l,{onDismiss:ct.onDismissUnlinkLibraryPanelModal,onConfirm:ct.onConfirmUnlinkLibraryPanel,isOpen:!0}),Ct&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{...Fa}),(0,d.jsxs)("div",{...An,className:(0,x.cx)(An.className,rn&&Rn.fullSizeEditor),children:[jt.collapsed&&(0,d.jsx)("div",{className:Rn.expandDataPane,children:(0,d.jsx)(_.$n,{tooltip:(0,a.t)("dashboard-scene.viz-and-data-pane.tooltip-open-query-pane","Open query pane"),icon:"arrow-to-right",onClick:tn,variant:"secondary",size:"sm",className:Rn.openDataPaneButton,"aria-label":(0,a.t)("dashboard-scene.viz-and-data-pane.aria-label-open-query-pane","Open query pane")})}),!jt.collapsed&&(0,d.jsx)(Ct.Component,{model:Ct})]})]})]})]})}function Jn({panel:ct,tableView:gt}){const Ct=(0,D.of)(pt),Wt=gt??ct;return(0,d.jsx)("div",{className:Ct.vizWrapper,children:(0,d.jsx)(Wt.Component,{model:Wt})})}function pt(ct){const gt="@media "+xn;return{pageContainer:(0,x.css)({display:"grid",gridTemplateAreas:`
        "panels"`,gridTemplateColumns:"1fr",gridTemplateRows:"1fr",height:"100%",[gt]:{gridTemplateColumns:"100%"}}),pageContainerWithControls:(0,x.css)({gridTemplateAreas:`
        "controls"
        "panels"`,gridTemplateRows:"auto 1fr"}),container:(0,x.css)({gridArea:"panels",height:"100%"}),canvasContent:(0,x.css)({label:"canvas-content",display:"flex",flexDirection:"column",flexBasis:"100%",flexGrow:1,minHeight:0,width:"100%"}),content:(0,x.css)({position:"absolute",width:"100%",height:"100%",overflow:"unset",[gt]:{height:"auto",display:"grid",gridTemplateColumns:"minmax(470px, 1fr) 330px",gridTemplateRows:"1fr",gap:ct.spacing(1),width:"100%"}}),body:(0,x.css)({label:"body",flexGrow:1,display:"flex",flexDirection:"column",minHeight:0}),optionsPane:(0,x.css)({flexDirection:"column",borderLeft:`1px solid ${ct.colors.border.weak}`,background:ct.colors.background.primary,marginTop:ct.spacing(2),borderTop:`1px solid ${ct.colors.border.weak}`,borderTopLeftRadius:ct.shape.radius.default}),expandOptionsWrapper:(0,x.css)({display:"flex",flexDirection:"column",padding:ct.spacing(2,1)}),expandDataPane:(0,x.css)({display:"flex",flexDirection:"row",padding:ct.spacing(1),borderTop:`1px solid ${ct.colors.border.weak}`,borderRight:`1px solid ${ct.colors.border.weak}`,background:ct.colors.background.primary,flexGrow:1,justifyContent:"space-around"}),rotate180:(0,x.css)({rotate:"180deg"}),controlsWrapper:(0,x.css)({display:"flex",flexDirection:"column",flexGrow:0,gridArea:"controls"}),openDataPaneButton:(0,x.css)({width:ct.spacing(8),justifyContent:"center",svg:{rotate:"-90deg"}}),vizWrapper:(0,x.css)({height:"100%",width:"100%",paddingLeft:ct.spacing(2)}),fixedSizeViz:(0,x.css)({height:"100vh"}),fullSizeEditor:(0,x.css)({height:"max-content"})}}var Rt=e(42941),Mt=e(69168),Bt=e(27489),Nt=e(37386),Yt=e(12737),Qt=e(41097),En=e(52193),vn=e(25531),Sn=e(56424),mn=e(7094);const wn=Je.memo(({panel:ct,searchQuery:gt,listMode:Ct,data:Wt})=>{const{options:Ft,fieldConfig:Vt,_pluginInstanceState:Ht}=ct.useState(),dn=(0,Je.useMemo)(()=>(0,Se.yH)(ct),[ct]),sn=(0,Je.useMemo)(()=>{const An=ct.getPlugin();if(An)return(0,Sn.Z4)({panel:ct,data:Wt,plugin:An,eventBus:ct.getPanelContext().eventBus,instanceState:Ht})},[Wt,ct,Ft,Vt,Ht]),Rn=(0,Je.useMemo)(()=>{if(ct instanceof r.Eb&&(0,m.ME)(ct)){const An=(0,m.iL)(ct);return An instanceof mn.u?(0,Sn.tN)(An):void 0}},[ct]),rn=(0,Je.useMemo)(()=>(0,vn.v)(Vt,ct.getPlugin()?.fieldConfigRegistry,Wt?.series??[],gt,An=>{ct.onFieldConfigChange(An,!0)}),[Wt,gt,ct,Vt]),Yn=gt.length>0,ea=[];if(Yn)ea.push((0,c.Po)([dn,...Rn?[Rn]:[],...sn??[]],rn,gt));else switch(Ct){case c.gs.All:Rn&&ea.push(Rn.render()),ea.push(dn.render());for(const An of sn??[])ea.push(An.render());for(const An of rn)ea.push(An.render());break;case c.gs.Overrides:for(const An of rn)ea.push(An.render());default:break}return ea});wn.displayName="PanelOptions";var Ln=e(78685),Zn=e(77824),da=e(95943),Pa=e(62667),Xn=e(82472),Oa=e(72165),ba=e(33380);const oa="dashboards_panel_plugin_picker_clicked",Na={TOGGLE_DROPDOWN:"toggle_panel_plugin_picker",SELECT_PANEL_PLUGIN:"select_panel_plugin",CHANGE_TAB:"change_tab",SEARCH:"search"};function ya({panel:ct,data:gt,onChange:Ct,onClose:Wt}){const Ft=(0,D.of)(Dt),[Vt,Ht]=(0,Je.useState)(""),dn=(0,Je.useMemo)(()=>(0,n.debounce)((an,Pn)=>{an&&(0,Bt.rR)(oa,{item:Na.SEARCH,query:an,result_count:Pn,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"})},300),[]),sn=an=>{Ht(an)},Rn=da.wV,rn=Pa.__.Visualizations,Yn=(0,Je.useMemo)(()=>new ba.R(ct),[ct]),ea=(0,Je.useMemo)(()=>new Set([Pa.__.Visualizations,Pa.__.Suggestions]),[]),[An,Fa]=(0,Ln.A)(Rn,rn),jt=an=>{(0,Bt.rR)(oa,{item:Na.CHANGE_TAB,tab:Pa.__[an],creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"}),Fa(an)};(0,Je.useEffect)(()=>{An&&!ea.has(An)&&Fa(rn)},[rn,An,Fa,ea]);const tn=[{label:(0,a.t)("dashboard-scene.panel-viz-type-picker.radio-options.label.visualizations","Visualizations"),value:Pa.__.Visualizations},{label:(0,a.t)("dashboard-scene.panel-viz-type-picker.radio-options.label.suggestions","Suggestions"),value:Pa.__.Suggestions}];return(0,d.jsxs)("div",{className:Ft.wrapper,children:[(0,d.jsxs)("div",{className:Ft.searchRow,children:[(0,d.jsx)(Yt.Z,{className:Ft.filter,value:Vt,onChange:sn,autoFocus:!0,placeholder:(0,a.t)("dashboard-scene.panel-viz-type-picker.placeholder-search-for","Search for...")}),(0,d.jsx)(_.$n,{"aria-label":(0,a.t)("dashboard-scene.panel-viz-type-picker.title-close","Close"),variant:"secondary",icon:"angle-up",className:Ft.closeButton,"data-testid":b.Tp.components.PanelEditor.toggleVizPicker,onClick:Wt})]}),(0,d.jsx)(Nt.D,{className:Ft.customFieldMargin,children:(0,d.jsx)(Zn.z,{options:tn,value:An,onChange:jt,fullWidth:!0})}),(0,d.jsxs)(P.P,{children:[An===Pa.__.Visualizations&&(0,d.jsx)(Oa.G,{pluginId:ct.state.pluginId,searchQuery:Vt,trackSearch:dn,onChange:Ct}),An===Pa.__.Suggestions&&(0,d.jsx)(Xn.a,{onChange:Ct,trackSearch:dn,searchQuery:Vt,panel:Yn,data:gt})]})]})}const Dt=ct=>({wrapper:(0,x.css)({display:"flex",flexDirection:"column",flexGrow:1,padding:ct.spacing(2,1),height:"100%",gap:ct.spacing(2),border:`1px solid ${ct.colors.border.weak}`,borderRight:"none",borderBottom:"none",borderTopLeftRadius:ct.shape.radius.default}),searchRow:(0,x.css)({display:"flex",marginBottom:ct.spacing(1)}),closeButton:(0,x.css)({marginLeft:ct.spacing(1)}),customFieldMargin:(0,x.css)({marginBottom:ct.spacing(1)}),filter:(0,x.css)({minHeight:ct.spacing(4)})});class wt extends r.Bs{constructor(){super(...arguments),this._cachedPluginOptions={},this.onToggleVizPicker=()=>{(0,Bt.rR)(oa,{item:Na.TOGGLE_DROPDOWN,open:!this.state.isVizPickerOpen}),this.setState({isVizPickerOpen:!this.state.isVizPickerOpen})},this.onChangePanelPlugin=gt=>{const Ct=this.state.panelRef.resolve(),{options:Wt,fieldConfig:Ft,pluginId:Vt}=Ct.state,Ht=gt.pluginId;(0,Bt.rR)(oa,{item:Na.SELECT_PANEL_PLUGIN,plugin_id:Ht});let dn={defaults:{...Ft.defaults,custom:{}},overrides:(0,Mt.aW)(Ft.overrides,Mt.nx)};this._cachedPluginOptions[Vt]={options:Wt,fieldConfig:Ft};const sn=this._cachedPluginOptions[Ht]?.options,Rn=this._cachedPluginOptions[Ht]?.fieldConfig;Rn&&(dn=(0,Mt.H9)(dn,Rn)),Ct.changePluginType(Ht,sn,dn),gt.options&&Ct.onOptionsChange(gt.options,!0),gt.fieldConfig&&Ct.onFieldConfigChange(gt.fieldConfig,!0),this.onToggleVizPicker()},this.onSetSearchQuery=gt=>{this.setState({searchQuery:gt})},this.onSetListMode=gt=>{this.setState({listMode:gt})},this.onOpenPanelJSON=gt=>{s.Ny.partial({inspect:gt.state.key,inspectTab:"json"})}}getOptionRadioFilters(){return[{label:c.gs.All,value:c.gs.All},{label:c.gs.Overrides,value:c.gs.Overrides}]}static{this.Component=Zt}}function Zt({model:ct}){const{isVizPickerOpen:gt,searchQuery:Ct,listMode:Wt,panelRef:Ft}=ct.useState(),Vt=Ft.resolve(),{pluginId:Ht}=Vt.useState(),{data:dn}=r.jh.getData(Vt).useState(),sn=(0,D.of)(cn),rn=!(Ct.length>0)&&!Vt.getPlugin()?.fieldConfigRegistry.isEmpty(),[Yn,ea]=(0,Rt.A)(!1),An=Wt===c.gs.Overrides,Fa=pn();return(0,d.jsxs)(d.Fragment,{children:[!gt&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:sn.top,children:[(0,d.jsx)(Nt.D,{label:(0,a.t)("dashboard.panel-edit.visualization-button-label","Visualization"),noMargin:!0,children:(0,d.jsxs)(ce.B,{gap:1,children:[(0,d.jsx)(nn,{pluginId:Ht,onOpen:ct.onToggleVizPicker}),(0,d.jsx)(_.$n,{icon:"search",variant:"secondary",onClick:ea,tooltip:(0,a.t)("dashboard.panel-edit.visualization-button-tooltip","Search options")}),rn&&(0,d.jsx)(Pt.I,{icon:"filter",tooltip:(0,a.t)("dashboard.panel-edit.only-overrides-button-tooltip","Show only overrides"),variant:An?"active":"canvas",onClick:()=>{ct.onSetListMode(An?c.gs.All:c.gs.Overrides)}})]})}),Yn&&(0,d.jsx)(Yt.Z,{className:sn.searchOptions,value:Ct,placeholder:(0,a.t)("dashboard.panel-edit.placeholder-search-options","Search options"),onChange:ct.onSetSearchQuery,autoFocus:!0,onBlur:()=>{Ct.length===0&&ea(!1)}})]}),(0,d.jsx)(P.P,{minHeight:Fa?"max-content":0,children:(0,d.jsx)(wn,{panel:Vt,searchQuery:Ct,listMode:Wt,data:dn})})]}),gt&&(0,d.jsx)(ya,{panel:Vt,onChange:ct.onChangePanelPlugin,onClose:ct.onToggleVizPicker,data:dn})]})}function cn(ct){return{top:(0,x.css)({display:"flex",flexDirection:"column",padding:ct.spacing(1,2,2,2),gap:ct.spacing(2)}),searchOptions:(0,x.css)({minHeight:ct.spacing(4)}),searchWrapper:(0,x.css)({padding:ct.spacing(2,2,2,0)}),rotateIcon:(0,x.css)({rotate:"180deg"})}}function nn({pluginId:ct,onOpen:gt}){const Ct=(0,D.of)(ut);let Wt=(0,Je.useMemo)(()=>(0,En.A4)().filter(Ft=>Ft.id===ct)[0],[ct]);return Wt||(Wt=(0,Qt.$)(`Panel plugin not found (${ct})`,!0).meta),(0,d.jsx)(Pt.I,{className:Ct.vizButton,tooltip:(0,a.t)("dashboard-scene.visualization-button.tooltip-click-to-change-visualization","Click to change visualization"),imgSrc:Wt.info.logos.small,onClick:gt,"data-testid":b.Tp.components.PanelEditor.toggleVizPicker,"aria-label":(0,a.t)("dashboard-scene.visualization-button.aria-label-change-visualization","Change visualization"),variant:"canvas",isOpen:!1,fullWidth:!0,children:Wt.name})}function ut(ct){return{vizButton:(0,x.css)({textAlign:"left"})}}class Ut extends r.Bs{constructor(gt){super(gt),this._changesHaveBeenMade=!1,this.debounceSaveModelDiff=!0,this.onDiscard=()=>{this.setState({isDirty:!1});const Ft=this.state.panelRef.resolve();this.state.isNewPanel?(0,m.YQ)(this).removePanel(Ft):this._layoutItem.setState(this._layoutItemState),s.Ny.partial({editPanel:null})},this.onSaveLibraryPanel=()=>{this.setState({showLibraryPanelSaveModal:!0})},this.onConfirmSaveLibraryPanel=()=>{(0,o.DW)(this.state.panelRef.resolve()),this.setState({isDirty:!1}),s.Ny.partial({editPanel:null})},this.onDismissLibraryPanelSaveModal=()=>{this.setState({showLibraryPanelSaveModal:!1})},this.onUnlinkLibraryPanel=()=>{this.setState({showLibraryPanelUnlinkModal:!0})},this.onDismissUnlinkLibraryPanelModal=()=>{this.setState({showLibraryPanelUnlinkModal:!1})},this.onConfirmUnlinkLibraryPanel=()=>{const Ft=(0,m.iL)(this.getPanel());Ft&&(Ft.unlink(),this.setState({showLibraryPanelUnlinkModal:!1}))},this.onToggleTableView=()=>{if(this.state.tableView){this.setState({tableView:void 0});return}const Vt=this.state.panelRef.resolve().state.$data;Vt&&this.setState({tableView:r.d0.table().setTitle("").setOption("showTypeIcons",!0).setOption("showHeader",!0).setData(new y({source:Vt.getRef()})).build()})};const Wt=this.state.panelRef.resolve().parent;if(!Wt||!(0,v.y)(Wt))throw new Error("Panel must have a parent of type DashboardLayoutItem");this._layoutItem=Wt,this.setOriginalState(this.state.panelRef),this.addActivationHandler(this._activationHandler.bind(this))}static{this.Component=_n}_activationHandler(){const gt=this.state.panelRef.resolve();gt.state.pluginId===u.r&&gt.changePluginType("timeseries"),this._subs.add(this._layoutItem.subscribeToEvent(h.BF,({payload:Wt})=>{Wt.perform()}));const Ct=(0,m.sf)(gt);return this.waitForPlugin(),()=>{this.commitChanges(),Ct&&Ct()}}commitChanges(){if(!this.state.isDirty&&!this._changesHaveBeenMade)return;const gt=this._layoutItem,Ct=gt.state,Wt=this._layoutItemState;if(this._layoutItem instanceof E.U&&!l.$.featureToggles.dashboardNewLayouts){this._layoutItem.handleEditChange();return}const Ft=new h.BF({description:(0,a.t)("dashboard.edit-actions.panel-edit","Panel changes"),source:this._layoutItem,perform:()=>{gt.state!==Ct&&gt.setState(Ct)},undo:()=>gt.setState(Wt)});(0,m.YQ)(this).state.editPane.setPanelEditAction(Ft)}waitForPlugin(gt=0){const Ct=this.getPanel(),Wt=Ct.getPlugin();if(!Wt||Wt.meta.id!==Ct.state.pluginId){gt<100?setTimeout(()=>this.waitForPlugin(gt+1),gt*10):this.setState({pluginLoadErrror:"Failed to load panel plugin"});return}this.gotPanelPlugin(Wt)}setOriginalState(gt){const Ct=gt.resolve();this._originalSaveModel=(0,p.Z6)(Ct),this._layoutItemState=r.Go.cloneSceneObjectState(this._layoutItem.state)}_setupChangeDetection(){const gt=this.state.panelRef.resolve(),Ct=()=>{const{hasChanges:Vt}=(0,g.yO)(this._originalSaveModel,(0,p.Z6)(gt));this.setState({isDirty:Vt})},Wt=this.debounceSaveModelDiff?(0,n.debounce)(Ct,250):Ct,Ft=Vt=>{f.l.isUpdatingPersistedState(Vt)&&Wt()};this._subs.add(this._layoutItem.subscribeToEvent(r.bZ,Ft))}getPanel(){return this.state.panelRef?.resolve()}gotPanelPlugin(gt){const Ct=this.getPanel();this.state.isInitializing?(this.setOriginalState(this.state.panelRef),this._setupChangeDetection(),this._updateDataPane(gt),this._subs.add(Ct.subscribeToState((Wt,Ft)=>{Wt.pluginId!==Ft.pluginId&&this.waitForPlugin()})),this.setState({optionsPane:new wt({panelRef:this.state.panelRef,searchQuery:"",listMode:c.gs.All}),isInitializing:!1})):this._updateDataPane(gt)}_updateDataPane(gt){const Ct=gt.meta.skipDataQuery,Wt=this.state.panelRef.resolve();if(Ct&&(this.state.dataPane&&(s.Ny.partial({tab:null},!0),this.setState({dataPane:void 0})),Wt.state.$data&&Wt.setState({$data:void 0})),!Ct&&(this.state.dataPane||this.setState({dataPane:at.createFor(this.getPanel())}),!Wt.state.$data)){let Ft=(0,i.CW)((0,m.YQ)(this).state.uid)?.datasourceUid;Ft||(Ft=l.$.defaultDatasource),Wt.setState({$data:new r.Es({$data:new r.dt({datasource:{uid:Ft},queries:[{refId:"A"}]}),transformations:[]})})}}getUrlKey(){return this.getPanelId().toString()}getPanelId(){return(0,m.Cs)(this.state.panelRef.resolve())}getPageNav(gt,Ct){const Wt=(0,m.YQ)(this);return{text:(0,a.t)("dashboard-scene.panel-editor.text.edit-panel","Edit panel"),parentItem:Wt.getPageNav(gt,Ct)}}dashboardSaved(){this.setOriginalState(this.state.panelRef),this.setState({isDirty:!1}),this._changesHaveBeenMade=!0}}function Ot(ct,gt=!1){return new Ut({isInitializing:!0,panelRef:ct.getRef(),isNewPanel:gt})}},23659:(ne,A,e)=>{"use strict";e.d(A,{L:()=>i});var n=e(74848),a=e(2543),s=e.n(a),l=e(92745),r=e(45861),c=e(94959);const i=({label:o="Password",labelWidth:h,inputWidth:f=12,onReset:g,isConfigured:u,tooltip:E,placeholder:v="Password",interactive:p,...m})=>(0,n.jsx)(c.z,{label:o,tooltip:E,interactive:p,labelWidth:h,inputEl:u?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"text",className:`gf-form-input width-${f}`,disabled:!0,value:"configured",...(0,a.omit)(m,"value")}),(0,n.jsx)(r.$n,{onClick:g,variant:"secondary",type:"button",children:(0,n.jsx)(l.x6,{i18nKey:"grafana-ui.secret-form-field.reset",children:"Reset"})})]}):(0,n.jsx)("input",{type:"password",className:`gf-form-input width-${f}`,placeholder:v,...m})});i.displayName="SecretFormField"},23675:(ne,A,e)=>{"use strict";e.d(A,{d:()=>c});var n=e(74848),a=e(51898),s=e(92745),l=e(32442),r=e(49602);function c({onChange:i,constantValue:o}){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Y,{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.constant-variable-form.constant-options",children:"Constant options"})}),(0,n.jsx)(r._,{defaultValue:o,name:"Value",placeholder:(0,s.t)("dashboard-scene.constant-variable-form.placeholder-your-metric-prefix","Your metric prefix"),onBlur:i,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30})]})}},23753:(ne,A,e)=>{"use strict";e.d(A,{Zy:()=>_e});var n=e(74848),a=e(96540),s=e(92745),l=e(52792),r=e(22787),c=e(13941),i=e(63142),o=e(65642),h=e(73427),f=e(82298),g=e(24313),u=e(23289),E=e(75515),v=e(11257),p=e(24209),m=e(4213),y=e(37386),d=e(21285),x=e(45861),b=e(2543),D=e(7389),C=e(78282),P=e(30124),T=e(99305),O=e(97583),S=e(67933);function B(Xe){return!!(Xe.libraryPanel?.name&&Xe.libraryPanel?.uid)}class K{async makeExportable(De){De.cleanUpRepeats();const Me=De.getSaveModelCloneOld();Me.id=null,De.processRepeats();const Te=[],$e={},Re={},Ke={},Ve=new Map;for(const je of Me.getVariables())Ke[je.name]=je;const Se=(je,Qe)=>{if(je.datasource===void 0){je.datasource=Qe;return}let He=je.datasource,Je=null;const de=He?.uid,ve=de&&T.SY.exec(de);if(ve){const me=ve[1]||ve[2]||ve[4];Je=Ke[me],Je&&Je.current&&(He=Je.current.value)}return(0,C.l)().get(He).then(me=>{if(me.meta?.builtIn||($e["datasource"+me.meta?.id]={type:"datasource",id:me.meta.id,name:me.meta.name,version:me.meta.info.version||"1.0.0"},Je))return;const xe=je.libraryPanel,Ee=xe?"-for-library-panel":"";let Pe="DS_"+me.name.replace(" ","_").toUpperCase()+Ee.toUpperCase();if(Re[Pe]={name:Pe,label:me.name,description:"",type:"datasource",pluginId:me.meta?.id,pluginName:me.meta?.name,usage:Re[Pe]?.usage},xe){const Oe=Re[Pe]?.usage?.libraryPanels||[];Oe.push({name:xe.name,uid:xe.uid}),Re[Pe].usage={libraryPanels:Oe}}je.datasource={type:me.meta.id,uid:"${"+Pe+"}"}})},Ye=async je=>{if(je.type!=="row"){if(await Se(je),je.targets)for(const He of je.targets)await Se(He,je.datasource);const Qe=o.Ay.panels[je.type];Qe&&($e["panel"+Qe.id]={type:"panel",id:Qe.id,name:Qe.name,version:Qe.info.version})}},Ue=async je=>{if((0,E.X)(je)){const{name:Qe,uid:He}=je.libraryPanel;let Je=je.libraryPanel.model;Je||(Je=(await(0,P.Yr)(He,!0)).model),await Se(Je);const{gridPos:de,id:ve,...me}=Je;Ve.has(He)||Ve.set(He,{name:Qe,uid:He,kind:O.i.Panel,model:me})}};try{for(const He of Me.panels)if(await Ye(He),He.collapsed!==void 0&&He.collapsed===!0&&He.panels)for(const Je of He.panels)await Ye(Je);for(const He of Me.getVariables())He.type==="query"?(await Se(He),He.options=[],He.current={},He.refresh=He.refresh!==D.CO.never?He.refresh:D.CO.onDashboardLoad):He.type==="datasource"&&(He.current={});for(const He of Me.annotations.list)await Se(He);$e.grafana={type:"grafana",id:"grafana",name:"Grafana",version:o.Ay.buildInfo.version};for(const He of Me.panels)if(await Ue(He),He.collapsed!==void 0&&He.collapsed===!0&&He.panels)for(const Je of He.panels)await Ue(Je);(0,b.each)(Re,He=>{Te.push(He)});for(const He of Me.getVariables())if((0,S.VO)(He)){const Je="VAR_"+He.name.replace(" ","_").toUpperCase();Te.push({name:Je,type:"constant",label:He.label||He.name,value:He.query,description:""}),He.query="${"+Je+"}",He.current={value:He.query,text:He.query,selected:!1},He.options=[He.current]}const je=[...Ve.entries()].reduce((He,[Je,de])=>(He[Je]=de,He),{}),Qe=(0,b.defaults)({__inputs:Te,__elements:je,__requires:(0,b.sortBy)($e,["id"])},Me);for(let He=0;He<Qe.panels.length;He++){const Je=Qe.panels[He];B(Je)&&(Qe.panels[He]={gridPos:Je.gridPos,id:Je.id,libraryPanel:{uid:Je.libraryPanel.uid,name:Je.libraryPanel.name}})}return Qe}catch(je){return console.error("Export failed:",je),{error:je}}}}var U=e(26604),F=e(87745),I=e(70713),V=e(50992),M=e(47931);function L({json:Xe,onDismiss:De}){const Me=(0,a.useCallback)(()=>Xe,[Xe]);return(0,n.jsxs)(r.a,{title:(0,s.t)("dashboard.view-json-modal.title-json","JSON"),onDismiss:De,onClickBackdrop:De,isOpen:!0,children:[(0,n.jsx)(I.Ay,{disableHeight:!0,children:({width:Te})=>(0,n.jsx)(V.B,{value:Xe,language:"json",showMiniMap:!1,height:"500px",width:Te})}),(0,n.jsx)(r.a.ButtonRow,{children:(0,n.jsx)(M.b,{icon:"copy",getText:Me,onClipboardCopy:()=>{u.c.exportCopyJsonClicked()},children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.view-json.copy-button",children:"Copy to Clipboard"})})})]})}var N=e(58662);class W extends a.PureComponent{constructor(De){super(De),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onSaveAsFile=()=>{const{dashboard:Me}=this.props,{shareExternally:Te}=this.state;u.c.exportSaveJsonClicked({externally:Te,shareResource:(0,N.hD)(this.props.panel)}),Te?(0,U.E)(Me).then($e=>{this.openSaveAsDialog($e)}):this.openSaveAsDialog(Me.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:Me}=this.props,{shareExternally:Te}=this.state;u.c.exportViewJsonClicked({externally:Te,shareResource:(0,N.hD)(this.props.panel)}),Te?this.exporter.makeExportable(Me).then($e=>{this.openJsonModal($e)}):this.openJsonModal(Me.getSaveModelClone())},this.openSaveAsDialog=Me=>{const Te=JSON.stringify(Me,null,2),$e=new Blob([Te],{type:"application/json;charset=utf-8"}),Re=new Date().getTime();(0,m.saveAs)($e,`${Me.title}-${Re}.json`)},this.openJsonModal=Me=>{h.lE.publish(new F.S8({props:{json:JSON.stringify(Me,null,2)},component:L})),this.props.onDismiss?.()},this.state={shareExternally:!1},this.exporter=new K}render(){const{onDismiss:De}=this.props,{shareExternally:Me}=this.state,Te=(0,s.t)("share-modal.export.share-externally-label","Export for sharing externally");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.export.info-text",children:"Export this dashboard."})}),(0,n.jsx)(y.D,{label:Te,children:(0,n.jsx)(d.d,{id:"share-externally-toggle",value:Me,onChange:this.onShareExternallyChange})}),(0,n.jsxs)(r.a.ButtonRow,{children:[(0,n.jsx)(x.$n,{variant:"secondary",onClick:De,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.export.cancel-button",children:"Cancel"})}),(0,n.jsx)(x.$n,{variant:"secondary",onClick:this.onViewJson,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.export.view-button",children:"View JSON"})}),(0,n.jsx)(x.$n,{variant:"primary",onClick:this.onSaveAsFile,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.export.save-button",children:"Save to file"})})]})]})}}var R=e(65241),G=e(51898),w=e(16780),_=e(63527),Q=e(89640),ae=e(34999),q=e(29216);class k extends a.PureComponent{constructor(De){super(De),this.buildUrl=async()=>{const{panel:Me,dashboard:Te}=this.props,{useCurrentTimeRange:$e,useShortUrl:Re,selectedTheme:Ke}=this.state,Ve=await(0,N.Xe)($e,Ke,Me,Re),Se=(0,N.Lb)($e,Te.uid,Ke,Me);this.setState({shareUrl:Ve,imageUrl:Se})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=Me=>{this.setState({selectedTheme:Me})},this.getShareUrl=()=>this.state.shareUrl,this.onCopy=()=>{u.c.shareLinkCopied({currentTimeRange:this.state.useCurrentTimeRange,theme:this.state.selectedTheme,shortenURL:this.state.useShortUrl,shareResource:(0,N.hD)(this.props.panel)})},this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){this.buildUrl()}componentDidUpdate(De,Me){const{useCurrentTimeRange:Te,useShortUrl:$e,selectedTheme:Re}=this.state;(Me.useCurrentTimeRange!==Te||Me.selectedTheme!==Re||Me.useShortUrl!==$e)&&this.buildUrl()}render(){const{panel:De,dashboard:Me}=this.props,Te=Me?Me.time.to==="now":!1,{useCurrentTimeRange:$e,useShortUrl:Re,selectedTheme:Ke,shareUrl:Ve,imageUrl:Se}=this.state,Ye=G.Tp.pages.SharePanelModal,Ue=!!Me.id,je=(0,s.t)("share-modal.link.time-range-label","Lock time range"),Qe=(0,s.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),He=(0,s.t)("share-modal.link.shorten-url","Shorten URL"),Je=(0,s.t)("share-modal.link.link-url","Link URL");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.link.info-text",children:"Create a direct link to this dashboard or panel, customized with the options below."})}),(0,n.jsxs)(w.n,{children:[(0,n.jsx)(y.D,{label:je,description:Te?Qe:"",children:(0,n.jsx)(d.d,{id:"share-current-time-range",value:$e,onChange:this.onUseCurrentTimeRangeChange})}),(0,n.jsx)(q.w,{selectedTheme:Ke,onChange:this.onThemeChange}),(0,n.jsx)(y.D,{label:He,children:(0,n.jsx)(d.d,{id:"share-shorten-url",value:Re,onChange:this.onUrlShorten})}),(0,n.jsx)(y.D,{label:Je,children:(0,n.jsx)(_.p,{id:"link-url-input",value:Ve,readOnly:!0,addonAfter:(0,n.jsx)(M.b,{icon:"copy",variant:"primary",getText:this.getShareUrl,onClipboardCopy:this.onCopy,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.link.copy-link-button",children:"Copy"})})})})]}),De&&o.Ay.rendererAvailable&&(0,n.jsxs)(n.Fragment,{children:[Ue&&(0,n.jsx)(Q.Y,{href:Se,external:!0,icon:"camera","aria-label":Ye.linkToRenderedImage,children:(0,s.t)("share-modal.link.rendered-image","Direct link rendered image")}),!Ue&&(0,n.jsx)(ae.F,{severity:"info",title:(0,s.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.link.save-dashboard",children:"To render a panel image, you must save the dashboard first."})})]}),De&&!o.Ay.rendererAvailable&&(0,n.jsx)(ae.F,{severity:"info",title:(0,s.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0,children:(0,n.jsxs)(s.x6,{i18nKey:"share-modal.link.render-instructions",children:["To render an image, you must install the"," ",(0,n.jsx)(Q.Y,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0,children:"Grafana image renderer plugin"}),". Please contact your Grafana administrator to install the plugin."]})})]})}}var ee=e(3594),j=e(68143),J=e(18857),Z=e(41654),te=e(68079),se=e(75421),ie=e(8735);class ce extends a.PureComponent{constructor(De){super(De),this.createSnapshot=Me=>()=>{const{timeoutSeconds:Te}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,Me)},Te*1e3)},this.saveSnapshot=async(Me,Te)=>{const{snapshotExpires:$e,timeoutSeconds:Re}=this.state,Ke=this.dashboard.getSaveModelCloneOld();this.scrubDashboard(Ke);const Ve={dashboard:Ke,name:Ke.title,expires:$e,external:Te};try{const Se=await(0,ie.s)().create(Ve);this.setState({deleteUrl:Se.deleteUrl,snapshotUrl:Se.url,step:2})}finally{Te?u.c.publishSnapshotClicked({expires:$e,timeout:Re,shareResource:(0,N.hD)(this.props.panel)}):u.c.publishSnapshotLocalClicked({expires:$e,timeout:Re,shareResource:(0,N.hD)(this.props.panel)}),this.setState({isLoading:!1})}},this.scrubDashboard=Me=>{const{panel:Te}=this.props,{snapshotName:$e}=this.state;Me.title=$e,Me.time=(0,se.jG)().timeRange(),Me.links=[],Me.panels.forEach(Ke=>{Ke.targets=[],Ke.links=[],Ke.datasource=null});const Re=Me.annotations.list.filter(Ke=>Ke.enable);if(Me.annotations.list=Re.map(Ke=>({name:Ke.name,enable:Ke.enable,iconColor:Ke.iconColor,snapshotData:Ke.snapshotData,type:Ke.type,builtIn:Ke.builtIn,hide:Ke.hide})),Me.getVariables().forEach(Ke=>{"query"in Ke&&(Ke.query=""),"options"in Ke&&(Ke.options=Ke.current&&!(0,ee.R)(Ke.current)?[Ke.current]:[]),"refresh"in Ke&&(Ke.refresh=D.CO.never)}),Te){const Ke=Te.getSaveModel();Ke.gridPos.w=24,Ke.gridPos.x=0,Ke.gridPos.y=0,Ke.gridPos.h=20,Me.panels=[Ke]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(Ke=>{delete Ke.snapshotData}),this.dashboard.annotations.list.forEach(Ke=>{delete Ke.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:Me}=this.state;await(0,j.AI)().get(Me),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=Me=>{this.setState({snapshotName:Me.target.value})},this.onTimeoutChange=Me=>{this.setState({timeoutSeconds:Number(Me.target.value)})},this.onExpireChange=Me=>{this.setState({selectedExpireOption:Me,snapshotExpires:Me.value})},this.dashboard=De.dashboard,this.expireOptions=[{label:(0,s.t)("share-modal.snapshot.expire-hour","1 Hour"),value:3600},{label:(0,s.t)("share-modal.snapshot.expire-day","1 Day"),value:3600*24},{label:(0,s.t)("share-modal.snapshot.expire-week","1 Week"),value:3600*24*7},{label:(0,s.t)("share-modal.snapshot.expire-never","Never"),value:0}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[2],snapshotExpires:this.expireOptions[2].value,snapshotName:De.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const De=await(0,ie.s)().getSharingOptions();this.setState({sharingButtonText:De.externalSnapshotName,externalEnabled:De.externalEnabled})}renderStep1(){const{onDismiss:De}=this.props,{snapshotName:Me,selectedExpireOption:Te,timeoutSeconds:$e,isLoading:Re,sharingButtonText:Ke,externalEnabled:Ve}=this.state,Se=(0,s.t)("share-modal.snapshot.name","Snapshot name"),Ye=(0,s.t)("share-modal.snapshot.expire","Expire"),Ue=(0,s.t)("share-modal.snapshot.timeout","Timeout (seconds)"),je=(0,s.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.info-text-1",children:"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard."})}),(0,n.jsx)("p",{children:(0,n.jsxs)(s.x6,{i18nKey:"share-modal.snapshot.info-text-2",children:["Keep in mind, your snapshot ",(0,n.jsx)("em",{children:"can be viewed by anyone"})," that has the link and can access the URL. Share wisely."]})})]}),(0,n.jsx)(y.D,{label:Se,children:(0,n.jsx)(_.p,{id:"snapshot-name-input",width:30,value:Me,onChange:this.onSnapshotNameChange})}),(0,n.jsx)(y.D,{label:Ye,children:(0,n.jsx)(J.l6,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:Te,onChange:this.onExpireChange})}),(0,n.jsx)(y.D,{label:Ue,description:je,children:(0,n.jsx)(_.p,{id:"timeout-input",type:"number",width:21,value:$e,onChange:this.onTimeoutChange})}),(0,n.jsxs)(r.a.ButtonRow,{children:[(0,n.jsx)(x.$n,{variant:"secondary",onClick:De,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.cancel-button",children:"Cancel"})}),Ve&&(0,n.jsx)(x.$n,{variant:"secondary",disabled:Re,onClick:this.createSnapshot(!0),children:Ke}),(0,n.jsx)(x.$n,{variant:"primary",disabled:Re,onClick:this.createSnapshot(),children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.local-button",children:"Publish Snapshot"})})]})]})}renderStep2(){const{snapshotUrl:De}=this.state;return(0,n.jsxs)(Z.B,{direction:"column",gap:0,children:[(0,n.jsx)(y.D,{label:(0,s.t)("share-modal.snapshot.url-label","Snapshot URL"),children:(0,n.jsx)(_.p,{id:"snapshot-url-input",value:De,readOnly:!0,addonAfter:(0,n.jsx)(M.b,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.copy-link-button",children:"Copy"})})})}),(0,n.jsxs)("div",{style:{alignSelf:"flex-end",padding:"5px"},children:[(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.mistake-message",children:"Did you make a mistake? "}),"\xA0",(0,n.jsx)(x.z9,{fill:"text",target:"_blank",onClick:this.deleteSnapshot,children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.delete-button",children:"Delete snapshot."})})]})]})}renderStep3(){return(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.snapshot.deleted-message",children:"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."})})}render(){const{isLoading:De,step:Me}=this.state;return(0,n.jsxs)(n.Fragment,{children:[Me===1&&this.renderStep1(),Me===2&&this.renderStep2(),Me===3&&this.renderStep3(),De&&(0,n.jsx)(te.y,{inline:!0})]})}}const re=[],ue=[];function X(Xe){re.push(Xe)}function le(Xe){ue.push(Xe)}function he(Xe,De,Me){const $e=[{label:(0,s.t)("share-modal.tab-title.link","Link"),value:N.wr.link,component:k}];if(h.TP.isSignedIn&&o.$W.snapshotEnabled&&h.TP.hasPermission(v.w.SnapshotsCreate)){const Ke=(0,s.t)("share-modal.tab-title.snapshot","Snapshot");$e.push({label:Ke,value:N.wr.snapshot,component:ce})}if(De){const Ke=(0,s.t)("share-modal.tab-title.embed","Embed");if($e.push({label:Ke,value:N.wr.embed,component:fe}),!(0,E.X)(De)){const Ve=(0,s.t)("share-modal.tab-title.library-panel","Library panel");$e.push({label:Ve,value:N.wr.libraryPanel,component:R.j})}$e.push(...ue)}else{const Ke=(0,s.t)("share-modal.tab-title.export","Export");$e.push({label:Ke,value:N.wr.export,component:W}),$e.push(...re),(0,g.iR)()&&$e.push({label:(0,s.t)("share-modal.tab-title.public-dashboard-title","Public dashboard"),value:N.wr.publicDashboard,component:f.b})}const Re=$e.find(Ke=>Ke.value===Me);return{tabs:$e,activeTab:Re?.value??$e[0].value}}function fe(Xe){return(0,n.jsx)(p.D,{dashboard:Xe.dashboard,panelId:String(Xe.panel?.id),timeFrom:Xe.panel?.timeFrom,onDismiss:Xe.onDismiss})}function Ce(Xe){const{tabs:De,activeTab:Me}=he(Xe.dashboard.canEditDashboard(),Xe.panel,Xe.activeTab);return{tabs:De,activeTab:Me}}class Ae extends a.Component{constructor(De){super(De),this.onSelectTab=Me=>{this.setState(Te=>({...Te,activeTab:Me.value})),u.c.sharingCategoryClicked({item:Me.value,shareResource:(0,N.hD)(this.props.panel)})},this.state=Ce(De)}getActiveTab(){const{tabs:De,activeTab:Me}=this.state;return De.find(Te=>Te.value===Me)}renderTitle(){const{panel:De}=this.props,{activeTab:Me}=this.state,Te=De?(0,s.t)("share-modal.panel.title","Share Panel"):(0,s.t)("share-modal.dashboard.title","Share"),$e=this.props.dashboard.canEditDashboard(),Re=he($e,this.props.panel,this.state.activeTab).tabs;return(0,n.jsx)(l.J,{title:Te,icon:"share-alt",tabs:Re,activeTab:Me,onChangeTab:this.onSelectTab})}render(){const{dashboard:De,panel:Me}=this.props,$e=this.getActiveTab().component;return(0,n.jsx)(r.a,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss,children:(0,n.jsx)(c.J,{children:(0,n.jsx)($e,{dashboard:De,panel:Me,onDismiss:this.props.onDismiss})})})}}const _e=(0,i.cV)(Ae)},24158:(ne,A,e)=>{"use strict";e.r(A),e.d(A,{SilencesEditor:()=>Ce,default:()=>Xe});var n=e(74848),a=e(22803),s=e(2543),l=e(96540),r=e(49785),c=e(54148),i=e(40996),o=e(74529),h=e(25229),f=e(92745),g=e(68143),u=e(36490),E=e(6975),v=e(34999),p=e(63142),m=e(16780),y=e(37386),d=e(63527),x=e(87105),b=e(41654),D=e(45861),C=e(62421),P=e(95443),T=e(52161),O=e(84266),S=e(15130),B=e(16692),K=e(5358),U=e(86017),F=e(77256),I=e(88547),V=e(36826),M=e(35526),L=e(3271),N=e(18857),W=e(76319),R=e(70327);const G=({className:De,required:Me,ruleUid:Te})=>{const $e=(0,p.of)(w),Re=(0,r.xW)(),{control:Ke,register:Ve,formState:{errors:Se}}=Re,{fields:Ye=[],append:Ue,remove:je}=(0,r.jz)({name:"matchers"}),[Qe,{data:He}]=R.hK.endpoints.getAlertRule.useLazyQuery();return(0,l.useEffect)(()=>{Te&&Qe({uid:Te})},[Qe,Te]),(0,n.jsx)("div",{className:De,children:(0,n.jsx)(y.D,{label:(0,f.t)("alerting.matchers-field.label-refine-affected-alerts","Refine affected alerts"),required:Me,children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:(0,a.cx)($e.matchers,$e.indent),children:[He&&(0,n.jsxs)("div",{children:[(0,n.jsx)(y.D,{label:(0,f.t)("alerting.matchers-field.label-alert-rule","Alert rule"),disabled:!0,children:(0,n.jsx)(d.p,{id:"alert-rule-name",defaultValue:He.grafana_alert.title,disabled:!0})}),(0,n.jsx)(L.c,{})]}),Ye.map((Je,de)=>(0,n.jsxs)("div",{className:$e.row,"data-testid":"matcher",children:[(0,n.jsx)(y.D,{label:(0,f.t)("alerting.matchers-field.label-label","Label"),invalid:!!Se?.matchers?.[de]?.name,error:Se?.matchers?.[de]?.name?.message,children:(0,n.jsx)(d.p,{...Ve(`matchers.${de}.name`,{required:{value:Me,message:(0,f.t)("alerting.matchers-field.message.required","Required.")}}),defaultValue:Je.name,placeholder:(0,f.t)("alerting.matchers-field.placeholder-label","label"),id:`matcher-${de}-label`})}),(0,n.jsx)(y.D,{label:(0,f.t)("alerting.matchers-field.label-operator","Operator"),children:(0,n.jsx)(r.xI,{control:Ke,render:({field:{onChange:ve,ref:me,...xe}})=>(0,n.jsx)(N.l6,{...xe,onChange:Ee=>ve(Ee.value),className:$e.matcherOptions,options:U.xH,"aria-label":(0,f.t)("alerting.matchers-field.aria-label-operator","operator"),id:`matcher-${de}-operator`}),defaultValue:Je.operator||U.xH[0].value,name:`matchers.${de}.operator`,rules:{required:{value:Me,message:(0,f.t)("alerting.matchers-field.message.required","Required.")}}})}),(0,n.jsx)(y.D,{label:(0,f.t)("alerting.matchers-field.label-value","Value"),invalid:!!Se?.matchers?.[de]?.value,error:Se?.matchers?.[de]?.value?.message,children:(0,n.jsx)(d.p,{...Ve(`matchers.${de}.value`,{required:{value:Me,message:(0,f.t)("alerting.matchers-field.message.required","Required.")}}),defaultValue:Je.value,placeholder:(0,f.t)("alerting.matchers-field.placeholder-value","value"),id:`matcher-${de}-value`})}),(Ye.length>1||!Me)&&(0,n.jsx)(W.K,{"aria-label":(0,f.t)("alerting.matchers-field.aria-label-remove-matcher","Remove matcher"),className:$e.removeButton,name:"trash-alt",onClick:()=>je(de),children:(0,n.jsx)(f.x6,{i18nKey:"alerting.matchers-field.remove",children:"Remove"})})]},`${Je.id}`))]}),(0,n.jsx)(D.$n,{className:$e.indent,tooltip:(0,f.t)("alerting.matchers-field.tooltip-refine-which-alert-instances-silenced-selecting","Refine which alert instances are silenced by selecting label matchers"),type:"button",icon:"plus",variant:"secondary",onClick:()=>{const Je={name:"",value:"",operator:O.ho.equal};Ue(Je)},children:(0,n.jsx)(f.x6,{i18nKey:"alerting.matchers-field.add-matcher",children:"Add matcher"})})]})})})},w=De=>({wrapper:(0,a.css)({marginTop:De.spacing(2)}),row:(0,a.css)({marginTop:De.spacing(1),display:"flex",alignItems:"flex-start",flexDirection:"row",backgroundColor:De.colors.background.secondary,padding:`${De.spacing(1)} ${De.spacing(1)} 0 ${De.spacing(1)}`,"& > * + *":{marginLeft:De.spacing(2)}}),removeButton:(0,a.css)({marginLeft:De.spacing(1),marginTop:De.spacing(2.5)}),matcherOptions:(0,a.css)({minWidth:"140px"}),matchers:(0,a.css)({maxWidth:`${De.breakpoints.values.sm}px`,margin:`${De.spacing(1)} 0`,paddingTop:De.spacing(.5)}),indent:(0,a.css)({marginLeft:De.spacing(2)})}),_=G;var Q=e(56265);const ae=()=>{const{control:De,getValues:Me}=(0,r.xW)(),{field:{onChange:Te,value:$e},fieldState:{invalid:Re}}=(0,r.as)({name:"startsAt",control:De,rules:{validate:Je=>Me().endsAt>Je}}),{field:{onChange:Ke,value:Ve},fieldState:{invalid:Se}}=(0,r.as)({name:"endsAt",control:De,rules:{validate:Je=>Me().startsAt<Je}}),{field:{onChange:Ye,value:Ue}}=(0,r.as)({name:"timeZone",control:De}),je=Re||Se,Qe=(0,h.KQ)($e),He=(0,h.KQ)(Ve);return(0,n.jsx)(y.D,{className:q.timeRange,label:(0,f.t)("alerting.silence-period.label-silence-start-and-end","Silence start and end"),error:je?"To is before or the same as from":"",invalid:je,children:(0,n.jsx)(Q.b,{value:{from:Qe,to:He,raw:{from:Qe,to:He}},timeZone:Ue,onChange:Je=>{Te((0,h.KQ)(Je.from)),Ke((0,h.KQ)(Je.to))},onChangeTimeZone:Je=>Ye(Je),hideTimeZone:!1,hideQuickRanges:!0,placeholder:(0,f.t)("alerting.silence-period.placeholder-select-time-range","Select time range")})})},q={timeRange:(0,a.css)({width:"400px"})};var k=e(45214),ee=e(45967),j=e(30703),J=e(99887),Z=e(91984),te=e(15629),se=e(7840),ie=e(6106),ce=e(83903);const re=(De,Me,Te)=>{const[$e,Re]=(0,l.useState)();(0,i.A)(De,Me,[$e]),(0,k.A)(()=>{Re(Te)},[Te])},ue=({amSourceName:De,matchers:Me,ruleUid:Te})=>{const $e=[...Te?[{name:P.kW,value:Te,operator:O.ho.equal}]:[],...Me].map(U.Wc),Re=Z.m.endpoints.getAlertmanagerAlerts.useLazyQuery,Ke=(0,p.of)(le),Ve=X(),Se=Te||Me.some(Je=>Je.value&&Je.name),[Ye,{currentData:Ue=[],isFetching:je,isError:Qe}]=Re();if(re(()=>{Se&&Ye({amSourceName:De,filter:{matchers:$e}})},500,[De,$e]),Qe)return(0,n.jsx)(v.F,{title:(0,f.t)("alerting.silenced-instances-preview.title-preview-not-available","Preview not available"),severity:"error",children:(0,n.jsx)(f.x6,{i18nKey:"alerting.silenced-instances-preview.error-generating-preview",children:"Error occurred when generating preview of affected alerts. Are your matchers valid?"})});const He=Ue.map(Je=>({id:Je.fingerprint,data:Je}));return(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:Ke.title,children:[(0,n.jsx)(f.x6,{i18nKey:"alerting.silences.affected-instances",children:"Affected alert instances"}),(0,n.jsx)(ee.m,{content:(0,n.jsxs)("div",{children:[(0,n.jsx)(f.x6,{i18nKey:"alerting.silences.preview-affected-instances",children:"Preview the alert instances affected by this silence."}),(0,n.jsx)("br",{}),(0,n.jsx)(f.x6,{i18nKey:"alerting.silences.only-firing-instances",children:"Only alert instances in the firing state are displayed."})]}),children:(0,n.jsxs)("span",{children:["\xA0",(0,n.jsx)(j.I,{name:"info-circle",size:"sm"})]})}),He.length>0?(0,n.jsx)(J.E,{className:Ke.badge,color:"blue",text:He.length}):null]}),!Se&&(0,n.jsx)("span",{children:(0,n.jsx)(f.x6,{i18nKey:"alerting.silenced-instances-preview.valid-matcher-affected-alerts",children:"Add a valid matcher to see affected alerts"})}),je&&(0,n.jsx)(E._,{text:(0,f.t)("alerting.silenced-instances-preview.text-loading-affected-alert-rule-instances","Loading affected alert rule instances...")}),!je&&!Qe&&Se&&(0,n.jsx)("div",{className:Ke.table,children:He.length>0?(0,n.jsx)(ie.E,{items:He,isExpandable:!1,cols:Ve,pagination:{itemsPerPage:10}}):(0,n.jsx)("span",{children:(0,n.jsx)(f.x6,{i18nKey:"alerting.silenced-instances-preview.no-firing-alert-instances-found",children:"No firing alert instances found"})})})]})};function X(){const De=(0,p.of)(le);return[{id:"state",label:(0,f.t)("alerting.use-columns.label.state","State"),renderCell:function({data:Te}){return(0,n.jsx)(ce.y,{state:Te.status.state})},size:"120px",className:De.stateColumn},{id:"labels",label:(0,f.t)("alerting.use-columns.label.labels","Labels"),renderCell:function({data:Te}){return(0,n.jsx)(se.m,{labels:Te.labels,size:"sm"})},size:"auto"},{id:"created",label:(0,f.t)("alerting.use-columns.label.created","Created"),renderCell:function({data:Te}){return(0,n.jsx)(n.Fragment,{children:(0,te.mo)(Te.startsAt)?"-":(0,h.KQ)(Te.startsAt).format("YYYY-MM-DD HH:mm:ss")})},size:"180px"}]}const le=De=>({table:(0,a.css)({maxWidth:`${De.breakpoints.values.lg}px`}),moreMatches:(0,a.css)({marginTop:De.spacing(1)}),title:(0,a.css)({display:"flex",alignItems:"center"}),badge:(0,a.css)({marginLeft:De.spacing(1)}),stateColumn:(0,a.css)({display:"flex",alignItems:"center"})});var he=e(39947);const fe=()=>{const{id:De=""}=(0,c.g)(),{selectedAlertmanager:Me=""}=(0,K.VI)(),{data:Te,isLoading:$e,error:Re}=C.F.endpoints.getSilence.useQuery({id:De,datasourceUid:(0,T.w5)(Me),ruleMetadata:!0,accessControl:!0}),Ke=Te?.matchers?.find(je=>je.name===P.kW)?.value,Ve=Me===T.hY,Se=(0,l.useMemo)(()=>{if(!Te)return;const je=Te.matchers?.filter(Qe=>Qe.name!==P.kW);return(0,he.Ee)({...Te,matchers:je})},[Te]);return De&&$e?(0,n.jsx)(E._,{text:(0,f.t)("alerting.existing-silence-editor.text-loading-existing-silence-information","Loading existing silence information...")}):(0,g.NF)(Re)&&Re.status===404?(0,n.jsx)(v.F,{title:(0,f.t)("alerting.existing-silence-editor.title-silence-not-found",'Existing silence "{{silenceId}}" not found',{silenceId:De}),severity:"warning"}):(Ve?Te?.accessControl?.write:!0)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.e,{currentAlertmanager:Me}),(0,n.jsx)(Ce,{ruleUid:Ke,formValues:Se,alertManagerSourceName:Me})]}):(0,n.jsx)(v.F,{title:(0,f.t)("alerting.existing-silence-editor.title-permission-editrecreate-silence","You do not have permission to edit/recreate this silence"),severity:"error"})},Ce=({formValues:De=(0,he.Di)(),alertManagerSourceName:Me,onSilenceCreated:Te,onCancel:$e,ruleUid:Re})=>{const[Ke,Ve]=(0,B.L7)(B.QI.PreviewSilencedInstances),Se=Ke&&Ve,[Ye,{isLoading:Ue}]=C.F.endpoints.createSilence.useMutation(),je=(0,r.mN)({defaultValues:De}),Qe=(0,p.of)(Ae),{register:He,handleSubmit:Je,formState:de,watch:ve,setValue:me,clearErrors:xe}=je,[Ee,Pe,Oe,We]=ve(["duration","startsAt","endsAt","matchers"]),Fe=()=>{u.Ny.push((0,F.nL)("/alerting/silences",Me))},Be=Te||Fe,Le=$e||Fe,Ge=async ht=>{const{id:Et,startsAt:mt,endsAt:Pt,comment:rt,createdBy:Kt,matchers:Gt}=ht;Re&&Gt.push({name:P.kW,value:Re,operator:O.ho.equal});const en=Gt.map(U.Wc).filter($t=>$t.name&&$t.value),st=(0,s.pickBy)({id:Et,startsAt:mt,endsAt:Pt,comment:rt,createdBy:Kt,matchers:en},$t=>!!$t);await Ye({datasourceUid:(0,T.w5)(Me),payload:st}).unwrap().then($t=>{Be?.($t)})},[Ze,qe]=(0,l.useState)(Ee);(0,i.A)(()=>{if((0,o.vd)(Pe)&&(0,o.vd)(Oe))if(Ee!==Ze)me("endsAt",(0,h.KQ)((0,o.Ri)(new Date(Pe),(0,o.E9)(Ee))).toISOString()),qe(Ee);else{const ht=new Date(Pe).valueOf();if(new Date(Oe).valueOf()>ht){const mt=(0,o.dU)({start:new Date(Pe),end:new Date(Oe)});me("duration",mt),qe(mt)}}},700,[xe,Ee,Oe,Ze,me,Pe]);const at=!!(S.TP.user.isSignedIn&&S.TP.user.name);return(0,n.jsx)(r.Op,{...je,children:(0,n.jsxs)("form",{onSubmit:Je(Ge),children:[(0,n.jsxs)(m.n,{className:Qe.formContainer,children:[(0,n.jsxs)("div",{className:Qe.silencePeriod,children:[(0,n.jsx)(ae,{}),(0,n.jsx)(y.D,{label:(0,f.t)("alerting.silences-editor.label-duration","Duration"),invalid:!!de.errors.duration,error:de.errors.duration&&(de.errors.duration.type==="required"?"Required field":de.errors.duration.message),children:(0,n.jsx)(d.p,{...He("duration",{validate:ht=>Object.keys((0,o.E9)(ht)).length===0?"Invalid duration. Valid example: 1d 4h (Available units: y, M, w, d, h, m, s)":void 0}),id:"duration"})})]}),(0,n.jsx)(_,{required:!Re,ruleUid:Re}),(0,n.jsx)(y.D,{label:(0,f.t)("alerting.silences-editor.label-comment","Comment"),required:!0,error:de.errors.comment?.message,invalid:!!de.errors.comment,children:(0,n.jsx)(x.f,{...He("comment",{required:{value:!0,message:(0,f.t)("alerting.silences-editor.message.required","Required.")}}),rows:5,placeholder:(0,f.t)("alerting.silences-editor.comment-placeholder-details-about-the-silence","Details about the silence"),id:"comment"})}),!at&&(0,n.jsx)(y.D,{label:(0,f.t)("alerting.silences-editor.label-created-by","Created By"),required:!0,error:de.errors.createdBy?.message,invalid:!!de.errors.createdBy,children:(0,n.jsx)(d.p,{...He("createdBy",{required:{value:!0,message:(0,f.t)("alerting.silences-editor.message.required","Required.")}}),placeholder:(0,f.t)("alerting.silences-editor.placeholder-whos-creating-the-silence","Who's creating the silence")})}),Se&&(0,n.jsx)(ue,{amSourceName:Me,matchers:We,ruleUid:Re})]}),(0,n.jsxs)(b.B,{gap:1,children:[Ue&&(0,n.jsx)(D.$n,{disabled:!0,icon:"spinner",variant:"primary",children:(0,n.jsx)(f.x6,{i18nKey:"alerting.silences-editor.saving",children:"Saving..."})}),!Ue&&(0,n.jsx)(D.$n,{type:"submit",children:(0,n.jsx)(f.x6,{i18nKey:"alerting.silences-editor.save-silence",children:"Save silence"})}),(0,n.jsx)(D.z9,{onClick:Le,variant:"secondary",children:(0,n.jsx)(f.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})})]})]})})},Ae=De=>({formContainer:(0,a.css)({maxWidth:De.breakpoints.values.md}),alertRule:(0,a.css)({paddingBottom:De.spacing(2)}),silencePeriod:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"flex-start",gap:De.spacing(1),maxWidth:De.breakpoints.values.sm,paddingTop:De.spacing(2)})});function _e(){const De={id:"silence-edit",text:(0,f.t)("alerting.existing-silence-editor-page.page-nav.text.edit-silence","Edit silence"),subTitle:"Recreate existing silence to stop notifications from a particular alert rule"};return(0,n.jsx)(V.y,{navId:"silences",pageNav:De,accessType:"instance",children:(0,n.jsx)(fe,{})})}const Xe=(0,I.S)(_e)},24209:(ne,A,e)=>{"use strict";e.d(A,{D:()=>m});var n=e(74848),a=e(96540),s=e(92745),l=e(43173),r=e(47931),c=e(22787),i=e(45861),o=e(41654),h=e(72636),f=e(37386),g=e(21285),u=e(87105),E=e(23289),v=e(29216),p=e(58662);function m({panelId:y,timeFrom:d,dashboard:x,range:b,onCancelClick:D,buildIframe:C=p.CF}){const[P,T]=(0,a.useState)(!0),[O,S]=(0,a.useState)("current"),[B,K]=(0,a.useState)("");(0,a.useEffect)(()=>{const M=C(P,x.uid,O,y,d,b);K(M)},[O,P,x,y,d,b,C]);const U=M=>{K(M.currentTarget.value)},F=()=>{T(M=>!M)},I=M=>{S(M)},V=(0,n.jsx)(r.b,{icon:"copy",variant:"primary",getText:()=>B,onClipboardCopy:()=>{E.c.embedSnippetCopy({currentTimeRange:P,theme:O,shareResource:(0,p.hD)(y)})},children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.embed.copy",children:"Copy to clipboard"})});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.embed.info",children:"Generate HTML for embedding an iframe with this panel"})}),(0,n.jsx)(f.D,{children:(0,n.jsxs)(o.B,{gap:1,alignItems:"start",children:[(0,n.jsx)(g.d,{label:(0,s.t)("share-modal.embed.time-range","Lock time range"),id:"share-current-time-range",value:P,onChange:F}),(0,n.jsx)(h.J,{description:(0,s.t)("embed.share.time-range-description","Change the current relative time range to an absolute time range"),children:(0,n.jsx)(s.x6,{i18nKey:"embed.share.time-range-label",children:"Lock time range"})})]})}),(0,n.jsx)(v.w,{selectedTheme:O,onChange:I}),(0,n.jsx)(f.D,{label:(0,s.t)("share-modal.embed.html","Embed HTML"),description:(0,s.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the users viewing that page need to be signed into Grafana for the graph to load."),children:(0,n.jsx)(u.f,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:B,onChange:U})}),l.$.featureToggles.newDashboardSharingComponent?(0,n.jsxs)(o.B,{gap:1,justifyContent:"start",children:[V,(0,n.jsx)(i.$n,{variant:"secondary",fill:"outline",onClick:D,children:(0,n.jsx)(s.x6,{i18nKey:"snapshot.share.cancel-button",children:"Cancel"})})]}):(0,n.jsx)(c.a.ButtonRow,{children:V})]})}},24313:(ne,A,e)=>{"use strict";e.d(A,{AY:()=>m,Xo:()=>o,_A:()=>g,_l:()=>v,gN:()=>E,iR:()=>p,kD:()=>h,lI:()=>f,mL:()=>u});var n=e(43173),a=e(62061),s=e(36580),l=e(65642),r=e(28998),c=e(58662),i=e(35143),o=(y=>(y.PUBLIC="public",y.EMAIL="email",y))(o||{});const h=y=>y.length>0,f=y=>y?.uid!==""&&y?.uid!==void 0,g=async y=>{let d=new Set;for(const x of y)for(const b of x.targets){const D=b?.datasource?.type;D&&(i.z.has(D)&&await(0,r.tR)().get(b.datasource)instanceof s.iy||d.add(D))}return Array.from(d).sort()},u=y=>`${(0,l.zj)().appUrl}public-dashboards/${y}`,E=(y,d)=>`/d/${y}/${d}?shareView=${c.wr.publicDashboard}`,v=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i,p=()=>n.$.publicDashboardsEnabled,m=()=>p()&&!!n.$.featureToggles.publicDashboardsEmailSharing&&(0,a.a)("publicDashboardsEmailSharing")},24343:(ne,A,e)=>{"use strict";e.d(A,{X:()=>$e});var n=e(74848),a=e(96540),s=e(32885),l=e(46644),r=e(95004),c=e(17503),i=e(36638),o=e(51898),h=e(92745),f=e(739),g=e(63142),u=e(52718),E=e(34213),v=e(64780);function p(Re,Ke){(0,a.useEffect)(()=>{if(Re.current&&Ke.current){const Ve=Re.current.querySelector(".track-vertical"),Se=Ke.current.firstChild;Se&&Ve&&(Ve.remove(),Se instanceof HTMLElement&&(Se.querySelector(":scope > .track-vertical")?.remove(),Se.append(Ve)))}})}function m(Re,Ke,Ve,Se){const Ye=JSON.stringify(Object.keys(Re.expanded));(0,a.useEffect)(()=>{let Ue=0;Se||(Number.isFinite(Re.lastExpandedOrCollapsedIndex)&&(Ue=Re.lastExpandedOrCollapsedIndex),Ue=Re.pageIndex===0?Ue-1:Ue-Re.pageIndex-Re.pageIndex*Re.pageSize),Ke.current?.resetAfterIndex(Math.max(Ue,0))},[Re.lastExpandedOrCollapsedIndex,Re.pageSize,Re.pageIndex,Ke,Ve,Ye,Se])}var y=e(16515);function d({onColumnResize:Re,onSortByChange:Ke,data:Ve}){return(0,a.useCallback)((Se,Ye)=>{switch(Ye.type){case"columnDoneResizing":if(Re){const je=Se.columnResizing?.headerIdWidths?.[0]?.[0],Qe=parseInt(je,10),He=Math.round(Se.columnResizing.columnWidths?.[je]),Je=Ve.fields?.[Qe];if(!Je)return Se;const de=(0,y.Ct)(Je,Ve);Re(de,He)}case"toggleSortBy":if(Ke){const Ue=[];for(const je of Se.sortBy){const Qe=Ve.fields[parseInt(je.id,10)];Qe&&Ue.push({displayName:(0,y.Ct)(Qe,Ve),desc:je.desc})}Ke(Ue)}case"toggleRowExpanded":if(Ye.id)return{...Se,lastExpandedOrCollapsedIndex:parseInt(Ye.id,10)}}return Se},[Ve,Re,Ke])}function x(Re,Ke){const Ve={};if(Re){Ve.sortBy=[];for(const Se of Re)for(const Ye of Ke)Ye.Header===Se.displayName&&Ve.sortBy.push({id:Ye.id,desc:Se.desc})}return Ve}var b=e(74198),D=e(74533),C=e(97958),P=e(30703),T=e(22803),O=e(2381),S=e(91793),B=e(55386),K=e(15356),U=e(12737),F=e(32635),I=e(72636),V=e(41654);const M=28,L=M*5,N={Contains:{label:"Contains",value:"Contains",description:"Contains"},"=":{label:"=",value:"=",description:"Equals"},"!=":{label:"!=",value:"!=",description:"Not equals"},">":{label:">",value:">",description:"Greater"},">=":{label:">=",value:">=",description:"Greater or Equal"},"<":{label:"<",value:"<",description:"Less"},"<=":{label:"<=",value:"<=",description:"Less or Equal"},Expression:{label:"Expression",value:"Expression",description:'Bool Expression (Char $ represents the column value in the expression, e.g. "$ >= 10 && $ <= 12")'}},W=Object.values(N),R=N.Contains,G=N.Expression,w=Re=>{if(Re=Re.trim().replace(/\\/g,""),/^(\d{4}-\d{2}-\d{2}|\d{4}\/\d{2}\/\d{2})/.test(Re)){const Se=new Date(Re);if(!isNaN(Se.getTime())){const Ye=(0,B.j_)("dateTimeAsIso");return(0,B.cN)(Ye(Se.getTime()))}}const Ke=parseFloat(Re);if(!isNaN(Ke))return Ke;const Ve=Re.toLowerCase();return Ve==="true"||Ve==="false"?Ve==="true":Re},_=({options:Re,values:Ke,caseSensitive:Ve,showOperators:Se,onChange:Ye,searchFilter:Ue,setSearchFilter:je,operator:Qe,setOperator:He})=>{const Je=(0,a.useMemo)(()=>new RegExp(Ue,Ve?void 0:"i"),[Ue,Ve]),de=(0,a.useMemo)(()=>Re.filter(Ze=>{if(!Se||!Ue||Qe.value===R.value)return Ze.label===void 0?!1:Je.test(Ze.label);if(Qe.value===G.value){if(Ze.value===void 0)return!1;try{const qe=Ue.replace(/\\/g,""),at=new Function("$",`'use strict'; return ${qe};`),ht=w(Ze.value);return at(ht)}catch{}return!1}else{if(Ze.value===void 0)return!1;const qe=w(Ze.value),at=w(Ue);switch(Qe.value){case"=":return qe===at;case"!=":return qe!==at;case">":return qe>at;case">=":return qe>=at;case"<":return qe<at;case"<=":return qe<=at}return!1}}),[Re,Je,Se,Qe,Ue]),ve=(0,a.useMemo)(()=>de.filter(Ze=>Ke.includes(Ze)),[de,Ke]),me=(0,a.useMemo)(()=>de.length===ve.length,[de,ve]),xe=(0,a.useMemo)(()=>ve.length>0&&de.length>ve.length,[de,ve]),Ee=(0,a.useMemo)(()=>ve.length?`${ve.length} selected`:"Select all",[ve]),Pe=(0,a.useMemo)(()=>de.length!==ve.length?"Add all displayed values to the filter":"Remove all displayed values from the filter",[de,ve]),Oe=(0,g.of)(ae),Fe=(0,g.$j)().spacing.gridSize,Be=(0,a.useMemo)(()=>Math.min(de.length*M,L)+Fe,[Fe,de.length]),Le=(0,a.useCallback)(Ze=>qe=>{const at=qe.currentTarget.checked?Ke.concat(Ze):Ke.filter(ht=>ht.value!==Ze.value);Ye(at)},[Ye,Ke]),Ge=(0,a.useCallback)(()=>{if(de.length===ve.length){const Ze=Ke.filter(qe=>!de.includes(qe));Ye(Ze)}else{const Ze=[...new Set([...Ke,...de])];Ye(Ze)}},[Ye,Ke,de,ve]);return(0,n.jsxs)(V.B,{direction:"column",gap:.25,children:[!Se&&(0,n.jsx)(U.Z,{placeholder:(0,h.t)("grafana-ui.table.filter-placeholder","Filter values"),onChange:je,value:Ue}),Se&&(0,n.jsxs)(V.B,{direction:"row",gap:0,children:[(0,n.jsx)(K.f,{variant:"canvas",options:W,onChange:He,value:Qe,tooltip:Qe.description}),(0,n.jsx)(U.Z,{placeholder:(0,h.t)("grafana-ui.table.filter-placeholder","Filter values"),onChange:je,value:Ue})]}),de.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.Y1,{height:Be,itemCount:de.length,itemSize:M,itemData:{items:de,values:ve,onCheckedChanged:Le,className:Oe.filterListRow},width:"100%",className:Oe.filterList,children:Q}),(0,n.jsxs)(V.B,{direction:"column",gap:.25,children:[(0,n.jsx)("div",{className:(0,T.cx)(Oe.selectDivider)}),(0,n.jsx)("div",{className:(0,T.cx)(Oe.filterListRow),children:(0,n.jsx)(F.S,{value:me,indeterminate:xe,label:Ee,description:Pe,onChange:Ge})})]})]}):(0,n.jsx)(I.J,{className:Oe.noValuesLabel,children:(0,n.jsx)(h.x6,{i18nKey:"grafana-ui.table.no-values-label",children:"No values"})})]})};function Q({index:Re,style:Ke,data:{onCheckedChanged:Ve,items:Se,values:Ye,className:Ue}}){const je=Se[Re],{value:Qe,label:He}=je,Je=Ye.find(de=>de.value===Qe)!==void 0;return(0,n.jsx)("div",{className:Ue,style:Ke,title:He,children:(0,n.jsx)(F.S,{value:Je,label:He,onChange:Ve(je)})})}const ae=Re=>({filterList:(0,T.css)({label:"filterList"}),filterListRow:(0,T.css)({label:"filterListRow",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:Re.spacing(.5),":hover":{backgroundColor:Re.colors.action.hover}}),selectDivider:(0,T.css)({label:"selectDivider",width:"100%",borderTop:`1px solid ${Re.colors.border.medium}`,padding:Re.spacing(.5,2)}),noValuesLabel:(0,T.css)({paddingTop:Re.spacing(1)})});var q=e(45861),k=e(8135),ee=e(76319);const j=({column:{preFilteredRows:Re,filterValue:Ke,setFilter:Ve},onClose:Se,field:Ye,searchFilter:Ue,setSearchFilter:je,operator:Qe,setOperator:He})=>{const Je=(0,g.$j)(),de=(0,a.useMemo)(()=>(0,b.MY)(Re,Ye),[Re,Ye]),ve=(0,a.useMemo)(()=>(0,b.Yz)(de),[de]),me=(0,a.useMemo)(()=>(0,b.Sj)(ve,Ke),[ve,Ke]),[xe,Ee]=(0,a.useState)(me),[Pe,Oe]=(0,a.useState)(!1),We=(0,a.useCallback)(Ze=>Se(),[Se]),Fe=(0,a.useCallback)(Ze=>{const qe=xe.length?xe:void 0;Ve(qe),Se()},[Ve,xe,Se]),Be=(0,a.useCallback)(Ze=>{Ve(void 0),Se()},[Ve,Se]),Le=(0,a.useMemo)(()=>Ke!==void 0,[Ke]),Ge=(0,g.of)(J);return(0,n.jsx)(k.N,{onClick:We,useCapture:!0,children:(0,n.jsx)("div",{className:(0,T.cx)(Ge.filterContainer),onClick:Z,children:(0,n.jsxs)(V.B,{direction:"column",gap:3,children:[(0,n.jsxs)(V.B,{direction:"column",gap:.5,children:[(0,n.jsxs)(V.B,{justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(I.J,{className:Ge.label,children:(0,n.jsx)(h.x6,{i18nKey:"grafana-ui.table.filter-popup-heading",children:"Filter by values:"})}),(0,n.jsx)(ee.K,{name:"text-fields",tooltip:(0,h.t)("grafana-ui.table.filter-popup-match-case","Match case"),style:{color:Pe?Je.colors.text.link:Je.colors.text.disabled},onClick:()=>{Oe(Ze=>!Ze)}})]}),(0,n.jsx)("div",{className:(0,T.cx)(Ge.listDivider)}),(0,n.jsx)(_,{onChange:Ee,values:xe,options:ve,caseSensitive:Pe,showOperators:!0,searchFilter:Ue,setSearchFilter:je,operator:Qe,setOperator:He})]}),(0,n.jsxs)(V.B,{gap:3,children:[(0,n.jsxs)(V.B,{children:[(0,n.jsx)(q.$n,{size:"sm",onClick:Fe,children:(0,n.jsx)(h.x6,{i18nKey:"grafana-ui.table.filter-popup-apply",children:"Ok"})}),(0,n.jsx)(q.$n,{size:"sm",variant:"secondary",onClick:We,children:(0,n.jsx)(h.x6,{i18nKey:"grafana-ui.table.filter-popup-cancel",children:"Cancel"})})]}),Le&&(0,n.jsx)(V.B,{children:(0,n.jsx)(q.$n,{fill:"text",size:"sm",onClick:Be,children:(0,n.jsx)(h.x6,{i18nKey:"grafana-ui.table.filter-popup-clear",children:"Clear filter"})})})]})]})})})},J=Re=>({filterContainer:(0,T.css)({label:"filterContainer",width:"100%",minWidth:"250px",height:"100%",maxHeight:"400px",backgroundColor:Re.colors.background.primary,border:`1px solid ${Re.colors.border.weak}`,padding:Re.spacing(2),boxShadow:Re.shadows.z3,borderRadius:Re.shape.radius.default}),listDivider:(0,T.css)({label:"listDivider",width:"100%",borderTop:`1px solid ${Re.colors.border.medium}`,padding:Re.spacing(.5,2)}),label:(0,T.css)({marginBottom:0})}),Z=Re=>{Re.stopPropagation()},te=({column:Re,field:Ke,tableStyles:Ve})=>{const Se=(0,a.useRef)(null),[Ye,Ue]=(0,a.useState)(!1),je=(0,g.of)(se),Qe=(0,a.useMemo)(()=>!!Re.filterValue,[Re.filterValue]),He=(0,a.useCallback)(()=>Ue(!0),[Ue]),Je=(0,a.useCallback)(()=>Ue(!1),[Ue]),[de,ve]=(0,a.useState)(""),[me,xe]=(0,a.useState)(R);return!Ke||!Ke.config.custom?.filterable?null:(0,n.jsxs)("button",{className:(0,T.cx)(Ve.headerFilter,Qe?je.filterIconEnabled:je.filterIconDisabled),ref:Se,type:"button",onClick:He,children:[(0,n.jsx)(P.I,{name:"filter"}),Ye&&Se.current&&(0,n.jsx)(O.A,{content:(0,n.jsx)(j,{column:Re,tableStyles:Ve,field:Ke,onClose:Je,searchFilter:de,setSearchFilter:ve,operator:me,setOperator:xe}),placement:"bottom-start",referenceElement:Se.current,show:!0})]})},se=Re=>({filterIconEnabled:(0,T.css)({label:"filterIconEnabled",color:Re.colors.primary.text}),filterIconDisabled:(0,T.css)({label:"filterIconDisabled",color:Re.colors.text.disabled})}),ie=Re=>{const{headerGroups:Ke,showTypeIcons:Ve,tableStyles:Se}=Re,Ye=o.Tp.components.Panels.Visualization.Table;return(0,n.jsx)("div",{role:"rowgroup",className:Se.headerRow,children:Ke.map(Ue=>{const{key:je,...Qe}=Ue.getHeaderGroupProps();return(0,a.createElement)("div",{className:Se.thead,...Qe,key:je,"aria-label":Ye.header,role:"row"},Ue.headers.map((He,Je)=>ce(He,Se,Ve)))})})};function ce(Re,Ke,Ve){const{key:Se,...Ye}=Re.getHeaderProps(),Ue=Re.field??null,je=Ue?.config.custom;Re.canResize&&(Ye.style.userSelect=Re.isResizing?"none":"auto"),Ye.style.position="absolute",Ye.style.justifyContent=Re.justifyContent,Ye.style.left=Re.totalLeft;let Qe=Re.render("Header"),He=Re.canSort&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{...Re.getSortByToggleProps(),className:Ke.headerCellLabel,children:[Ve&&(0,n.jsx)(P.I,{name:(0,C.SS)(Ue),title:Ue?.type,size:"sm",className:Ke.typeIcon}),(0,n.jsx)("div",{children:Qe}),Re.isSorted&&(Re.isSortedDesc?(0,n.jsx)(P.I,{size:"lg",name:"arrow-down",className:Ke.sortIcon}):(0,n.jsx)(P.I,{name:"arrow-up",size:"lg",className:Ke.sortIcon}))]}),Re.canFilter&&(0,n.jsx)(te,{column:Re,tableStyles:Ke,field:Ue})]});return He&&je?.headerComponent?He=(0,n.jsx)(je.headerComponent,{field:Ue,defaultContent:He}):je?.headerComponent&&(Qe=(0,n.jsx)(je.headerComponent,{field:Ue,defaultContent:Qe})),(0,n.jsxs)("div",{className:Ke.headerCell,...Ye,role:"columnheader",children:[Re.canSort&&He,!Re.canSort&&Qe,!Re.canSort&&Re.canFilter&&(0,n.jsx)(te,{column:Re,tableStyles:Ke,field:Ue}),Re.canResize&&(0,n.jsx)("div",{...Re.getResizerProps(),className:Ke.resizeHandle})]},Se)}var re=e(64423),ue=e(56978),X=e(57852),le=e(64400),he=e(28533);function fe({tableStyles:Re,nestedData:Ke,rowIndex:Ve,width:Se,cellHeight:Ye}){const Ue=Ke.values,je=[],Qe=(0,g.$j)(),He=(0,g.of)(Ce);let Je=Re.rowHeight+Qe.spacing.gridSize;return Ue[Ve].forEach((de,ve)=>{const me=!!de.meta?.custom?.noHeader,xe=Re.rowHeight*(de.length+(me?0:1)),Ee={height:xe,paddingLeft:b.jV,position:"absolute",top:Je,backgroundColor:Qe.colors.background.primary,color:Qe.colors.text.primary};Je+=xe+Qe.spacing.gridSize,je.push((0,n.jsx)("div",{style:Ee,children:(0,n.jsx)($e,{data:de,width:Se-b.jV,height:Re.rowHeight*(de.length+1),noHeader:me,cellHeight:Ye})},`subTable_${Ve}_${ve}`))}),(0,n.jsx)("div",{className:He.subTables,children:je})}const Ce=Re=>({subTables:(0,T.css)({"&:before":{content:'""',position:"absolute",width:"1px",top:Re.spacing(5),left:Re.spacing(1),bottom:Re.spacing(2),background:Re.colors.border.medium}})});function Ae(Re,Ke,Ve){return Re.values[Ke].reduce((Ue,je)=>{if(je.length){const Qe=!!je.meta?.custom?.noHeader;return Ue+Ve.rowHeight*(je.length+(Qe?0:1))+8}return Ue},Ve.rowHeight)??Ve.rowHeight}const _e=Re=>{const{data:Ke,rows:Ve,headerHeight:Se,footerPaginationEnabled:Ye,rowHeight:Ue,itemCount:je,pageIndex:Qe,tableState:He,prepareRow:Je,onCellFilterAdded:de,width:ve,cellHeight:me=f.qM.Sm,timeRange:xe,tableStyles:Ee,nestedDataField:Pe,listHeight:Oe,listRef:We,enableSharedCrosshair:Fe=!1,initialRowIndex:Be=void 0,headerGroups:Le,longestField:Ge,textWrapField:Ze,getActions:qe,replaceVariables:at,setInspectCell:ht}=Re,[Et,mt]=(0,a.useState)(Be);Be===void 0&&Et!==void 0&&mt(void 0);const Pt=(0,g.$j)(),rt=(0,le.d2)();let Kt=null;window.OffscreenCanvas!==void 0&&(Kt=new OffscreenCanvas(256,1024).getContext("2d")),Kt!=null&&(Kt.font=`${Pt.typography.fontSize}px ${Pt.typography.body.fontFamily}`);const Gt=(0,a.useMemo)(()=>{const Mt=Ke.fields.find(Bt=>Bt.type===r.PU.time);return Mt?(0,b.HY)(Mt):0},[Ke]),en=(0,a.useCallback)((Mt,Bt)=>{if(!rt||!Fe)return;const Nt=Bt.fields.find(Yt=>Yt.type===r.PU.time);Nt&&rt.eventBus.publish(new X.b_({point:{time:Nt.values[Mt]}}))},[Fe,rt]),st=(0,a.useCallback)(()=>{!rt||!Fe||rt.eventBus.publish(new X.ql)},[Fe,rt]),$t=(0,a.useCallback)(Mt=>{if(Mt.payload.point?.time&&Mt.payload.rowIndex!==void 0){const Bt=Ke.fields.find(En=>En.type===r.PU.time),Nt=Bt.values[Mt.payload.rowIndex],Yt=Mt.payload.point.time;if((0,b.Iy)(Yt,Nt,Gt)){mt(Mt.payload.rowIndex);return}const Qt=Bt.values.findIndex(En=>(0,b.Iy)(Yt,En,Gt));if(Qt!==-1){mt(Qt);return}mt(void 0)}},[Ke.fields,Gt]);(0,a.useEffect)(()=>{if(!rt||!Fe||!(0,c.S1)(Ke)||Ye)return;const Mt=new re.yU;return Mt.add(rt.eventBus.getStream(X.b_).pipe((0,ue.B)(250)).subscribe({next:Bt=>{rt.eventBus!==Bt.origin&&$t(Bt)}})),Mt.add(rt.eventBus.getStream(X.ql).pipe((0,ue.B)(250)).subscribe({next:Bt=>{rt.eventBus!==Bt.origin&&mt(void 0)}})),()=>{Mt.unsubscribe()}},[Ke,Fe,Ye,$t,rt]);let xn;if(Et!==void 0){const Mt=Ve.findIndex(Bt=>Bt.index===Et);Mt!==-1&&(xn=Se+(Mt-1)*Ue)}const pn=(0,a.useCallback)(Mt=>He.pageIndex*He.pageSize+Mt,[He.pageIndex,He.pageSize]);let _n,kn;for(const Mt of Ke.fields){const Bt=Mt.config.custom;Bt!==void 0&&Bt.cellOptions!==void 0&&Bt.cellOptions.type===f.ob.ColorBackground&&Bt.cellOptions.applyToRow&&(_n=Yt=>{const Qt=Mt.display(Mt.values.get(Yt));return(0,b.HW)(Ee.theme,Bt.cellOptions,Qt)}),Ze!==void 0?kn=Ze:Ge!==void 0&&(kn=Ge)}const Jn=(0,a.useCallback)(({index:Mt,style:Bt,rowHighlightIndex:Nt})=>{const Yt=pn(Mt),Qt=Ve[Yt];let En={};Je(Qt);const vn=He.expanded[Qt.id]?(0,T.css)({"&:hover":{background:"inherit"}}):{},Sn=Pe&&He.expanded[Qt.id];if(Nt!==void 0&&Qt.index===Nt&&(Bt={...Bt,backgroundColor:Pt.components.table.rowSelected},En={"aria-selected":"true"}),_n){const{bgColor:Ln,textColor:Zn}=_n(Qt.index);Bt.background=Ln,Bt.color=Zn,Bt.borderLeft=`2px solid ${Ln}`}if(kn){const Zn=Ke.fields.filter(Xn=>!Xn.config.custom?.hidden).findIndex(Xn=>Xn.name===kn.name),da=Pt.typography.body.lineHeight*Pt.typography.fontSize,Pa=(0,b.M2)(kn.values[Qt.index],Le[0].headers[Zn],Kt,da,Ee.rowHeight,Ee.cellPadding);Bt.height=Pa.height}const{key:mn,...wn}=Qt.getRowProps({style:Bt,...En});return(0,n.jsxs)("div",{...wn,className:(0,T.cx)(Ee.row,vn),onMouseEnter:()=>en(Qt.index,Ke),onMouseLeave:st,children:[Sn&&(0,n.jsx)(fe,{nestedData:Pe,tableStyles:Ee,rowIndex:Qt.index,width:ve,cellHeight:me}),Qt.cells.map((Ln,Zn)=>(0,n.jsx)(he.n,{tableStyles:Ee,cell:Ln,onCellFilterAdded:de,columnIndex:Zn,columnCount:Qt.cells.length,timeRange:xe,frame:Ke,rowStyled:_n!==void 0,rowExpanded:Sn,textWrapped:kn!==void 0,height:Number(Bt.height)-1,getActions:qe,replaceVariables:at,setInspectCell:ht},Zn))]},mn)},[pn,Ve,Je,He.expanded,Pe,_n,kn,Ee,st,ve,me,Pt.components.table.rowSelected,Pt.typography.body.lineHeight,Pt.typography.fontSize,Ke,Le,Kt,en,de,xe,qe,at,ht]),pt=Mt=>{const Bt=pn(Mt),Nt=Ve[Bt];if(He.expanded[Nt.id]&&Pe)return Ae(Pe,Nt.index,Ee);if(kn){const Qt=Ke.fields.filter(vn=>!vn.config.custom?.hidden).findIndex(vn=>vn.name===kn.name),En=Pt.typography.fontSize*Pt.typography.body.lineHeight;return(0,b.M2)(kn.values[Nt.index],Le[0].headers[Qt],Kt,En,Ee.rowHeight,Ee.cellPadding).height}return Ee.rowHeight},Rt=Mt=>{const{scrollTop:Bt}=Mt.currentTarget;We.current!==null&&We.current.scrollTo(Bt)};return(0,a.useEffect)(()=>{We.current&&We.current.resetAfterIndex(0)},[Ve,We]),(0,n.jsx)(u.A,{onScroll:Rt,hideHorizontalTrack:!0,scrollTop:xn,children:(0,n.jsx)(S._m,{height:Oe,itemCount:je,itemSize:pt,width:"100%",ref:We,style:{overflow:void 0},children:({index:Mt,style:Bt})=>Jn({index:Mt,style:Bt,rowHighlightIndex:Et})},`${Ue}${Qe}`)})};var Xe=e(59692);const De=150,Me=36,Te="No data",$e=(0,a.memo)(Re=>{const{ariaLabel:Ke,data:Ve,height:Se,onCellFilterAdded:Ye,onColumnResize:Ue,width:je,columnMinWidth:Qe=De,noHeader:He,resizable:Je=!0,initialSortBy:de,footerOptions:ve,showTypeIcons:me,footerValues:xe,enablePagination:Ee,cellHeight:Pe=f.qM.Sm,timeRange:Oe,enableSharedCrosshair:We=!1,initialRowIndex:Fe=void 0,fieldConfig:Be,getActions:Le,replaceVariables:Ge}=Re,Ze=(0,a.useRef)(null),qe=(0,a.useRef)(null),at=(0,a.useRef)(null),ht=(0,g.$j)(),Et=(0,Xe.k)(ht,Pe),mt=He?0:Et.rowHeight,[Pt,rt]=(0,a.useState)(xe),Kt=Be?.defaults?.noValue??Te,[Gt,en]=(0,a.useState)(null),st=(0,a.useMemo)(()=>{const wt=Me;let Zt=0;if(!Pt)return 0;for(const cn of Pt)Array.isArray(cn)&&cn.length>Zt&&(Zt=cn.length);return Zt>1?wt*Zt:wt},[Pt]),$t=(0,a.useMemo)(()=>Ve.fields.length?Array(Ve.length).fill(0):[],[Ve]),xn=!!(ve?.countRows&&ve.reducer&&ve.reducer.length&&ve.reducer[0]===l.gy.count),pn=Ve.fields.find(wt=>wt.type===r.PU.nestedFrames),_n=pn!==void 0,kn=(0,a.useMemo)(()=>(0,b.GH)(Ve,je,Qe,_n,Pt,xn),[Ve,je,Qe,_n,Pt,xn]),Jn=(0,a.useRef)(),pt=d({onColumnResize:Ue,onSortByChange:wt=>{Jn.current(!1),Re.onSortByChange&&Re.onSortByChange(wt)},data:Ve}),Rt=!!Ve.meta?.uniqueRowIdFields?.length,Mt=(0,a.useMemo)(()=>{const wt={columns:kn,data:$t,disableResizing:!Je,stateReducer:pt,autoResetPage:!1,initialState:x(de,kn),autoResetFilters:!1,sortTypes:{number:b.Ok,"alphanumeric-insensitive":b.IM}};return Rt&&(wt.getRowId=(Zt,cn)=>(0,c.t9)(Ve,cn),wt.autoResetExpanded=!1),wt},[de,kn,$t,Je,pt,Rt,Ve]),{getTableProps:Bt,headerGroups:Nt,footerGroups:Yt,rows:Qt,prepareRow:En,totalColumnsWidth:vn,page:Sn,state:mn,gotoPage:wn,setPageSize:Ln,pageOptions:Zn,toggleAllRowsExpanded:da}=(0,s.useTable)(Mt,s.useFilters,s.useSortBy,s.useAbsoluteLayout,s.useResizeColumns,s.useExpanded,s.usePagination),Pa=mn;Jn.current=da,(0,a.useEffect)(()=>{ve||rt(xe)},[xe,ve]),(0,a.useEffect)(()=>{if(!ve)return;if(!ve.show){rt(void 0);return}if(xn){const Zt=[];Zt[0]=Qt.length.toString()??Ve.length.toString(),rt(Zt);return}const wt=(0,b.Ux)(Nt[0].headers,(0,b.XX)(Qt),ve,ht);rt(wt)},[ve,ht,mn.filters,Ve]);let Xn=Se-(mt+st);Ee&&(Xn-=Et.cellHeight);const Oa=Math.round(Xn/Et.rowHeight)-1;(0,a.useEffect)(()=>{Oa<=0||Ln(Oa)},[Oa,Ln]),(0,a.useEffect)(()=>{Ve.length/Oa<mn.pageIndex&&wn(0)},[Ve]),m(Pa,Ze,Ve,Rt),p(at,qe);const ba=(0,a.useCallback)(wt=>{wn(wt-1)},[wn]),oa=Ee?Sn.length:Qt.length;let Na=null;if(Ee){const wt=mn.pageIndex*mn.pageSize+1;let Zt=wt+mn.pageSize-1;const cn=je<550;Zt>Ve.length&&(Zt=Ve.length);const nn=Qt.length,ut=Zt<Qt.length?Zt:Qt.length;Na=(0,n.jsxs)("div",{className:Et.paginationWrapper,children:[(0,n.jsx)(E.d,{currentPage:mn.pageIndex+1,numberOfPages:Zn.length,showSmallVersion:cn,onNavigate:ba}),cn?null:(0,n.jsx)("div",{className:Et.paginationSummary,children:(0,n.jsxs)(h.x6,{i18nKey:"grafana-ui.table.pagination-summary",children:[{itemsRangeStart:wt}," - ",{displayedEnd:ut}," of ",{numRows:nn}," rows"]})})]})}const ya=Be?(0,b.O4)(Be,Ve):void 0;let Dt;return Be!==void 0&&Ve.fields.forEach(wt=>{Be.overrides.forEach(Zt=>{if((0,i.NS)(Zt.matcher)(wt,Ve,[Ve]))for(const nn of Zt.properties)nn.id==="custom.cellOptions"&&nn.value.wrapText&&(Dt=wt)})}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{...Bt(),className:Et.table,"aria-label":Ke,role:"table",ref:qe,style:{width:je,height:Se},children:[(0,n.jsx)(u.E,{hideVerticalTrack:!0,children:(0,n.jsxs)("div",{className:Et.tableContentWrapper(vn),children:[!He&&(0,n.jsx)(ie,{headerGroups:Nt,showTypeIcons:me,tableStyles:Et}),oa>0?(0,n.jsx)("div",{"data-testid":o.Tp.components.Panels.Visualization.Table.body,ref:at,children:(0,n.jsx)(_e,{headerGroups:Nt,data:Ve,rows:Qt,width:je,cellHeight:Pe,headerHeight:mt,rowHeight:Et.rowHeight,itemCount:oa,pageIndex:mn.pageIndex,listHeight:Xn,listRef:Ze,tableState:mn,prepareRow:En,timeRange:Oe,onCellFilterAdded:Ye,nestedDataField:pn,tableStyles:Et,footerPaginationEnabled:!!Ee,enableSharedCrosshair:We,initialRowIndex:Fe,longestField:ya,textWrapField:Dt,getActions:Le,replaceVariables:Ge,setInspectCell:en})}):(0,n.jsx)("div",{style:{height:Se-mt,width:je},className:Et.noData,children:Kt}),Pt&&(0,n.jsx)(D.u,{isPaginationVisible:!!Ee,footerValues:Pt,footerGroups:Yt,totalColumnsWidth:vn,tableStyles:Et})]})}),Na]}),Gt!==null&&(0,n.jsx)(v.s,{mode:Gt.mode,value:Gt.value,onDismiss:()=>{en(null)}})]})});$e.displayName="Table"},24381:(ne,A,e)=>{"use strict";e.d(A,{Xb:()=>s,c4:()=>r,d9:()=>l,w_:()=>i,yd:()=>c});var n=e(65307),a=e(28105);const s={loadingState:a.Gu.Loading,libraryPanels:[],totalCount:0,perPage:40,page:1,numberOfPages:0,currentPanelId:void 0},l=(0,n.VP)("libraryPanels/view/initSearch"),r=(0,n.VP)("libraryPanels/view/searchCompleted"),c=(0,n.VP)("libraryPanels/view/changePage"),i=(o,h)=>{if(l.match(h))return{...o,loadingState:a.Gu.Loading};if(r.match(h)){const{libraryPanels:f,page:g,perPage:u,totalCount:E}=h.payload,v=Math.ceil(E/u);return{...o,libraryPanels:f,perPage:u,totalCount:E,loadingState:a.Gu.Done,numberOfPages:v,page:g>v?g-1:g}}return c.match(h)?{...o,page:h.payload.page}:o}},24438:(ne,A,e)=>{"use strict";e.d(A,{j:()=>B,s:()=>S});var n=e(74848),a=e(22803),s=e(96540),l=e(40996),r=e(92745),c=e(63142),i=e(41654),o=e(12737),h=e(76459),f=e.n(h),g=e(45861),u=e(18857),E=e(30703),v=e(65642),p=e(83873),m=e(55860),y=e(83458),d=e(70590);function x({onChange:I,maxMenuHeight:V}){const M=(0,c.of)(D),[L,N]=(0,s.useState)(!1),W=(0,s.useCallback)(Q=>b(Q,N),[]),R=(0,s.useMemo)(()=>f()(W,300),[W]),[G,w]=(0,s.useState)([]),_=(0,s.useCallback)(Q=>{const ae=Q.filter(q=>!!q.value).map(q=>q.value);I(ae),w(Q)},[I]);return(0,n.jsxs)("div",{className:M.container,children:[G.length>0&&(0,n.jsx)(g.$n,{size:"xs",icon:"trash-alt",fill:"text",className:M.clear,onClick:()=>I([]),children:(0,n.jsx)(r.x6,{i18nKey:"folder-filter.clear-folder-button",children:"Clear folders"})}),(0,n.jsx)(u.Iv,{value:G,onChange:_,isLoading:L,loadOptions:R,maxMenuHeight:V,placeholder:(0,r.t)("folder-filter.select-placeholder","Filter by folder"),noOptionsMessage:(0,r.t)("folder-filter.noOptionsMessage-no-folders-found","No folders found"),prefix:(0,n.jsx)(E.I,{name:"filter"}),"aria-label":(0,r.t)("folder-filter.select-aria-label","Folder filter"),defaultOptions:!0})]})}async function b(I,V){if(V(!0),v.$W.featureToggles.unifiedStorageSearchUI){const G=(await(0,m.S)().search({query:I,kind:["folder"],limit:100,permission:d.RG.View})).view.map(w=>({label:w.name,value:{uid:w.uid,title:w.name}}));return(!I||"dashboards".includes(I.toLowerCase()))&&G.unshift({label:"Dashboards",value:{uid:"general",title:"Dashboards"}}),V(!1),G}const M={query:I,type:y.G.DashFolder,permission:d.RG.View},N=(await(0,p.AI)().search(M)).map(W=>({label:W.title,value:{uid:W.uid,title:W.title}}));return(!I||"dashboards".includes(I.toLowerCase()))&&N.unshift({label:"Dashboards",value:{uid:"general",title:"Dashboards"}}),V(!1),N}function D(I){return{container:(0,a.css)({label:"container",position:"relative",minWidth:"180px",flexGrow:1}),clear:(0,a.css)({label:"clear",fontSize:I.spacing(1.5),position:"absolute",top:-I.spacing(4.5),right:0})}}var C=e(92100),P=e(18552),T=e(95943),O=e(90232),S=(I=>(I.Tight="tight",I.Spacious="spacious",I))(S||{});const B=({onClick:I,variant:V="spacious",currentPanelId:M,currentFolderUID:L,perPage:N=T.FG,showPanelFilter:W=!1,showFolderFilter:R=!1,showSort:G=!1,showSecondaryActions:w=!1})=>{const _=(0,c.of)(K,V),[Q,ae]=(0,s.useState)(""),[q,k]=(0,s.useState)("");(0,l.A)(()=>k(Q),200,[Q]);const[ee,j]=(0,s.useState)({}),[J,Z]=(0,s.useState)(L?[L]:[]),[te,se]=(0,s.useState)([]),ie=G||W||R,ce=V==="tight"?3:.5;return(0,n.jsx)("div",{className:_.container,children:(0,n.jsxs)(i.B,{direction:"column",gap:ce,children:[(0,n.jsxs)("div",{className:(0,a.cx)(_.gridContainer,{[_.tightLayout]:V==="tight"}),children:[(0,n.jsx)("div",{className:_.filterInputWrapper,children:(0,n.jsx)(o.Z,{value:Q,onChange:ae,placeholder:(0,r.t)("library-panels.library-panels-search.placeholder-search-by-name-or-description","Search by name, description or folder name"),width:0,escapeRegex:!1})}),ie&&(0,n.jsx)(U,{showSort:G,showPanelFilter:W,showFolderFilter:R,onSortChange:j,onFolderFilterChange:Z,onPanelFilterChange:se,sortDirection:ee.value,variant:V})]}),(0,n.jsx)("div",{className:_.libraryPanelsView,children:(0,n.jsx)(O.y,{onClickCard:I,searchString:q,sortDirection:ee.value,panelFilter:te,folderFilter:J,currentPanelId:M,showSecondaryActions:w,perPage:N})})]})})};function K(I,V){return{filterInputWrapper:(0,a.css)({flexGrow:V==="tight"?1:"initial"}),container:(0,a.css)({width:"100%",overflowY:"auto",padding:I.spacing(1)}),libraryPanelsView:(0,a.css)({width:"100%"}),gridContainer:(0,a.css)({display:"flex",flexDirection:"column",width:"100%",columnGap:I.spacing(1),rowGap:I.spacing(1),paddingBottom:I.spacing(2)}),tightLayout:(0,a.css)({flexDirection:"row",rowGap:I.spacing(1)})}}const U=(0,s.memo)(({variant:I="spacious",showSort:V,showPanelFilter:M,showFolderFilter:L,sortDirection:N,onSortChange:W,onFolderFilterChange:R,onPanelFilterChange:G})=>{const w=(0,c.of)(F),_=(0,s.useCallback)(ae=>G(ae.map(q=>q.id)),[G]),Q=(0,s.useCallback)(ae=>R(ae.map(q=>q.uid??"")),[R]);return(0,n.jsxs)("div",{className:(0,a.cx)(w.container,{[w.containerTight]:I==="tight"}),children:[V&&(0,n.jsx)(P.r,{value:N,onChange:W,filter:["alpha-asc","alpha-desc"]}),(L||M)&&(0,n.jsxs)("div",{className:(0,a.cx)(w.filterContainer,{[w.filterContainerTight]:I==="tight"}),children:[L&&(0,n.jsx)(x,{onChange:Q}),M&&(0,n.jsx)(C.$,{onChange:_})]})]})});U.displayName="SearchControls";function F(I){return{container:(0,a.css)({display:"flex",gap:I.spacing(1),flexGrow:1,flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),containerTight:(0,a.css)({flexGrow:"initial",flexDirection:"column",justifyContent:"normal"}),filterContainer:(0,a.css)({display:"flex",flexDirection:"row",gap:I.spacing(1)}),filterContainerTight:(0,a.css)({flexDirection:"column",marginLeft:"initial"})}}},24619:(ne,A,e)=>{"use strict";e.d(A,{$k:()=>c,Gi:()=>a,JS:()=>o,N1:()=>h,Q8:()=>f,Si:()=>s,cF:()=>n,lh:()=>i,qr:()=>r,s1:()=>l});var n=(g=>(g.Firing="firing",g.Inactive="inactive",g.Pending="pending",g.Recovering="recovering",g.Unknown="unknown",g))(n||{}),a=(g=>(g.Normal="Normal",g.Alerting="Alerting",g.Pending="Pending",g.Recovering="Recovering",g.NoData="NoData",g.Error="Error",g))(a||{});function s(g){return Object.values(n).includes(g)}function l(g){return Object.values(a).some(u=>u===g)}function r(g){const u=Object.values(n);return g!=null&&!u.includes(g)}function c(g){const u=g.match(/\((.*?)\)/);return u?u[1]:""}function i(g){return r(g)?g.split(" ")[0]:g}var o=(g=>(g.Alerting="alerting",g.Recording="recording",g))(o||{}),h=(g=>(g.Cortex="Cortex",g.Mimir="Mimir",g.Prometheus="Prometheus",g.Thanos="Thanos",g))(h||{}),f=(g=>(g.Alerting="Alerting",g.NoData="NoData",g.KeepLast="KeepLast",g.OK="OK",g.Error="Error",g))(f||{})},24898:(ne,A,e)=>{"use strict";e.d(A,{_:()=>r});var n=e(74848),a=e(2543),s=e.n(a),l=e(16692);const r=({actions:g,children:u})=>{const E=(0,a.filter)(g,h),v=(0,a.filter)(g,f);return E.length?(0,n.jsx)(c,{actions:E,children:u}):v.length?(0,n.jsx)(i,{actions:v,children:u}):null},c=({actions:g,children:u})=>{const E=(0,l.iI)();return o(E,g)?(0,n.jsx)(n.Fragment,{children:u}):null},i=({actions:g,children:u})=>{const E=(0,l.e2)();return o(E,g)?(0,n.jsx)(n.Fragment,{children:u}):null};function o(g,u){return(0,a.chain)(g).pick(u).values().value().some(([E,v])=>v===!0)}function h(g){return Object.values(l.QI).includes(g)}function f(g){return Object.values(l.RY).includes(g)}},24961:(ne,A,e)=>{"use strict";e.d(A,{z8:()=>k,yz:()=>J});var n=e(74848),a=e(22803),s=e(2543),l=e(96540),r=e(25229),c=e(92745),i=e(63142),o=e(41654),h=e(30703),f=e(66404),g=e(45967),u=e(16194),E=e(87063),v=e(89640),p=e(45861),m=e(88559),y=e(10427),d=e(8307),x=e(28141),b=e(5358),D=e(22628),C=e(56476),P=e(16692),T=e(92367),O=e(50072),S=e(1972),B=e(49779),K=e(99887);const U=()=>(0,n.jsx)(K.E,{text:(0,c.t)("alerting.unused-contact-point-badge.text-unused","Unused"),"aria-label":(0,c.t)("alerting.unused-contact-point-badge.aria-label-unused","unused"),color:"orange",icon:"exclamation-triangle",tooltip:(0,c.t)("alerting.unused-contact-point-badge.tooltip-unused","This contact point is not used in any notification policy or alert rule")});var F=e(66056);const I=({contactPoint:se,onDelete:ie})=>{const{name:ce,id:re,provisioned:ue,policies:X=[]}=se,le=(0,i.of)(V),[he,fe]=(0,l.useState)(!1),{selectedAlertmanager:Ce}=(0,b.VI)(),Ae=(0,C.dM)(Ce),[_e,Xe]=(0,P.L7)(P.QI.ExportContactPoint),[De,Me]=(0,P.L7)(P.QI.UpdateContactPoint),[Te,$e]=(0,P.L7)(P.QI.UpdateContactPoint),[Re,Ke]=(0,d.G)(),Ve=(0,F.T8)(Ce,se),Se=X.filter(Be=>Be.route.type!=="auto-generated"),Ye=(0,C.gw)(se,D.T.InUseRoutes),Ue=Ae?Number(Ye):X.length,je=Ae?Number(Ye):Se.length,Qe=Number((0,C.gw)(se,D.T.InUseRules))||0,He=Ae?!!(Ue||Qe):X.length>0,Je=Ae?(0,C.Au)(se):Me,ve=De&&Je&&!ue,me=Ae?(0,C.zl)(se):$e,Ee=Te&&me&&(!ue&&!je&&!Qe),Pe=[];if(Ve&&Pe.push((0,n.jsx)(l.Fragment,{children:(0,n.jsx)(E.W.Item,{icon:"unlock",label:(0,c.t)("alerting.contact-point-header.label-manage-permissions","Manage permissions"),onClick:()=>fe(!0)})},"manage-permissions")),_e&&Pe.push((0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)(E.W.Item,{icon:"download-alt",label:(0,c.t)("alerting.contact-point-header.export-label-export","Export"),ariaLabel:(0,c.t)("alerting.contact-point-header.export-ariaLabel-export","Export"),disabled:!Xe,"data-testid":"export",onClick:()=>Ke(ce)}),(0,n.jsx)(E.W.Divider,{})]},"export-contact-point")),Te){const Be=(0,c.t)("alerting.contact-points.delete-reasons.no-permissions","You do not have the required permission to delete this contact point"),Le=(0,c.t)("alerting.contact-points.delete-reasons.provisioned","Contact point is provisioned and cannot be deleted via the UI"),Ge=(0,c.t)("alerting.contact-points.delete-reasons.policies","Contact point is referenced by one or more notification policies"),Ze=(0,c.t)("alerting.contact-points.delete-reasons.rules","Contact point is referenced by one or more alert rules"),qe=[me?"":Be,ue?Le:"",je>0?Ge:"",Qe?Ze:""].filter(Boolean),at=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.x6,{i18nKey:"alerting.contact-points.delete-reasons.heading",children:"Contact point cannot be deleted for the following reasons:"}),(0,n.jsx)("br",{}),qe.map(ht=>(0,n.jsx)("li",{children:ht},ht))]});Pe.push((0,n.jsx)(y.A,{shouldWrap:!Ee,wrap:ht=>(0,n.jsx)(g.m,{content:at,placement:"top",children:(0,n.jsx)("span",{children:ht})}),children:(0,n.jsx)(E.W.Item,{label:(0,c.t)("alerting.contact-point-header.label-delete","Delete"),ariaLabel:(0,c.t)("alerting.contact-point-header.ariaLabel-delete","Delete"),icon:"trash-alt",destructive:!0,disabled:!Ee,onClick:()=>ie(se)})},"delete-contact-point"))}const Oe=(0,c.t)("alerting.contact-points.used-by","Used by {{ count }} notification policy",{count:Ue}),We=(0,c.t)("alerting.contact-points.used-by-rules","Used by {{ count }} alert rule",{count:Qe}),Fe=re||ce;return(0,n.jsxs)("div",{className:le.headerWrapper,children:[(0,n.jsxs)(o.B,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsx)(o.B,{alignItems:"center",gap:1,minWidth:0,children:(0,n.jsx)(f.E,{element:"h2",variant:"body",weight:"medium",truncate:!0,children:ce})}),Ue>0&&(0,n.jsx)(v.Y,{href:(0,T.G)("/alerting/routes",{contactPoint:ce}),variant:"bodySmall",color:"primary",inline:!1,children:Oe}),Qe>0&&(0,n.jsx)(v.Y,{href:(0,T.G)("/alerting/list",{search:`contactPoint:"${ce}"`}),variant:"bodySmall",color:"primary",inline:!1,children:We}),ue&&(0,n.jsx)(S.rS,{tooltip:!0,provenance:(0,C.gw)(se,D.T.Provenance)}),!He&&(0,n.jsx)(U,{}),(0,n.jsx)(B.h,{}),(0,n.jsx)(p.z9,{tooltipPlacement:"top",tooltip:ue?(0,c.t)("alerting.contact-point-header.tooltip-provisioned-contact-points","Provisioned contact points cannot be edited in the UI"):void 0,variant:"secondary",size:"sm",icon:ve?"pen":"eye",type:"button","data-testid":`${ve?"edit":"view"}-action`,href:`/alerting/notifications/receivers/${encodeURIComponent(Fe)}/edit`,children:ve?(0,c.t)("alerting.contact-point-header.button-edit","Edit"):(0,c.t)("alerting.contact-point-header.button-view","View")}),Pe.length>0&&(0,n.jsx)(m.m,{overlay:(0,n.jsx)(E.W,{children:Pe}),children:(0,n.jsx)(O.A,{"aria-label":(0,c.t)("alerting.contact-point-header.aria-label-more-actions",'More actions for contact point "{{contactPointName}}"',{contactPointName:se.name})})})]}),Re,he&&(0,n.jsx)(x.v,{resource:"receivers",resourceId:se.id,resourceName:se.name,onClose:()=>fe(!1)})]})},V=se=>({headerWrapper:(0,a.css)({background:`${se.colors.background.secondary}`,padding:`${se.spacing(1)} ${se.spacing(1.5)}`,borderBottom:`solid 1px ${se.colors.border.weak}`,borderTopLeftRadius:`${se.shape.radius.default}`,borderTopRightRadius:`${se.shape.radius.default}`})});var M=e(22787),L=e(77256);const N=se=>{const[ie,ce]=(0,l.useState)(!1),[re,ue]=(0,l.useState)(),[X,le]=(0,l.useState)(),[he,fe]=(0,l.useState)(!1),Ce=(0,l.useCallback)(()=>{he||(ue(void 0),ce(!1),le(void 0))},[he]),Ae=(0,l.useCallback)(({name:De,resourceVersion:Me})=>{ue({name:De,resourceVersion:Me}),ce(!0),le(void 0)},[]),_e=(0,l.useCallback)(()=>{re&&(fe(!0),se(re).then(()=>ce(!1)).catch(le).finally(()=>{fe(!1)}))},[se,re]);return[(0,l.useMemo)(()=>X?(0,n.jsx)(W,{isOpen:ie,onDismiss:Ce,error:X}):(0,n.jsxs)(M.a,{isOpen:ie,onDismiss:Ce,closeOnBackdropClick:!he,closeOnEscape:!he,title:(0,c.t)("alerting.use-delete-contact-point-modal.modal-element.title-delete-contact-point","Delete contact point"),children:[(0,n.jsx)("p",{children:(0,n.jsx)(c.x6,{i18nKey:"alerting.use-delete-contact-point-modal.modal-element.deleting-contact-point-permanently-remove",children:"Deleting this contact point will permanently remove it."})}),(0,n.jsx)("p",{children:(0,n.jsx)(c.x6,{i18nKey:"alerting.use-delete-contact-point-modal.modal-element.delete-contact-point",children:"Are you sure you want to delete this contact point?"})}),(0,n.jsxs)(M.a.ButtonRow,{children:[(0,n.jsx)(p.$n,{type:"button",variant:"destructive",onClick:_e,disabled:he,children:he?(0,c.t)("alerting.use-delete-contact-point-modal.deleting","Deleting..."):(0,c.t)("alerting.use-delete-contact-point-modal.delete-confirm","Yes, delete contact point")}),(0,n.jsx)(p.$n,{type:"button",variant:"secondary",onClick:Ce,disabled:he,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})})]})]}),[X,Ce,_e,he,ie]),Ae,Ce]},W=({isOpen:se,onDismiss:ie,error:ce})=>(0,n.jsxs)(M.a,{isOpen:se,onDismiss:ie,closeOnBackdropClick:!0,closeOnEscape:!0,title:(0,c.t)("alerting.error-modal.title-something-went-wrong","Something went wrong"),children:[(0,n.jsx)("p",{children:(0,n.jsx)(c.x6,{i18nKey:"alerting.error-modal.failed-to-update-your-configuration",children:"Failed to update your configuration:"})}),(0,n.jsx)("pre",{children:(0,n.jsx)("code",{children:(0,L.JZ)(ce)})})]});var R=e(97507);const G={pagerduty:"PagerDuty",pushover:"Pushover",slack:"Slack",opsgenie:"OpsGenie",webhook:"Webhook",victorops:"VictorOps",wechat:"WeChat",discord:"Discord",webex:"Cisco Webex Teams",sns:"Amazon SNS",telegram:"Telegram",msteams:"Microsoft Teams"},w={discord:"discord",email:"envelope",googlechat:"google-hangouts-alt",hipchat:"hipchat",line:"line",pagerduty:"pagerduty",slack:"slack",teams:"microsoft",telegram:"telegram-alt",webhook:"link",sns:"amazon"};var _=e(1625);const Q=({metadata:{icon:se,title:ie,externalUrl:ce,warning:re}})=>{const ue=(0,i.of)(ae);return(0,n.jsxs)(o.B,{alignItems:"center",gap:.5,children:[(0,n.jsxs)(o.B,{direction:"row",alignItems:"center",gap:.5,children:[re?(0,n.jsx)(g.m,{content:re,theme:"error",children:(0,n.jsx)(h.I,{name:"exclamation-triangle",className:ue.warnIcon})}):(0,n.jsx)("img",{src:se,alt:ie,height:"16px"}),(0,n.jsx)("span",{children:ie})]}),ce&&(0,n.jsx)(p.z9,{"aria-label":(0,c.t)("alerting.receiver-metadata-badge.aria-label-open-external-link","Open external link"),icon:"external-link-alt",href:ce,target:"_blank",variant:"secondary",size:"sm"})]})},ae=se=>({warnIcon:(0,a.css)({fill:se.colors.warning.text})});var q=e(3887);const k=({contactPoint:se})=>{const{grafana_managed_receiver_configs:ie}=se,ce=(0,i.of)(te),{selectedAlertmanager:re}=(0,b.VI)(),[ue]=(0,R.$x)({alertmanager:re}),[X,le]=N(ue.execute),he=ie.some(fe=>!!fe[q.MX]);return(0,n.jsxs)("div",{className:ce.contactPointWrapper,"data-testid":"contact-point",children:[(0,n.jsxs)(o.B,{direction:"column",gap:0,children:[(0,n.jsx)(I,{contactPoint:se,onDelete:fe=>le({name:fe.id||fe.name,resourceVersion:fe.metadata?.resourceVersion})}),he?(0,n.jsx)("div",{children:ie.map((fe,Ce)=>{const Ae=fe[q.v4],_e=fe[q.MX],Xe=!fe.disableResolveMessage,De=fe[q.sW],Me=_e.name+Ce;return(0,n.jsx)(ee,{name:_e.name,type:fe.type,description:(0,F.aM)(fe),diagnostics:Ae,pluginMetadata:De,sendingResolved:Xe},Me)})}):(0,n.jsx)("div",{className:ce.integrationWrapper,children:(0,n.jsx)(J,{receivers:ie})})]}),X]})},ee=se=>{const{name:ie,type:ce,description:re,diagnostics:ue,pluginMetadata:X,sendingResolved:le=!0}=se,he=(0,i.of)(te),fe=ue!==void 0;return(0,n.jsx)("div",{className:he.integrationWrapper,children:(0,n.jsxs)(o.B,{direction:"column",gap:.5,children:[(0,n.jsx)(j,{name:ie,type:ce,description:re,pluginMetadata:X}),fe&&(0,n.jsx)(Z,{diagnostics:ue,sendingResolved:le})]})})};function j(se){const{name:ie,type:ce,description:re,pluginMetadata:ue}=se,X=w[ce];return(0,n.jsxs)(o.B,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsxs)(o.B,{direction:"row",alignItems:"center",gap:.5,children:[X&&(0,n.jsx)(h.I,{name:X}),ue?(0,n.jsx)(Q,{metadata:ue}):(0,n.jsx)(f.E,{variant:"body",color:"primary",children:ie})]}),re&&(0,n.jsx)(f.E,{variant:"bodySmall",color:"secondary",children:re})]})}const J=({receivers:se,limit:ie})=>{const ce=ie??Number.MAX_VALUE,re=(0,s.groupBy)(se,he=>he.type),ue=(0,s.size)(re),X=Object.entries(re).slice(0,ce),le=ue-ce;return(0,n.jsx)(o.B,{direction:"column",gap:0,children:(0,n.jsxs)(o.B,{direction:"row",alignItems:"center",gap:1,children:[X.length===0&&(0,n.jsx)(_.P,{color:"warning",icon:"exclamation-triangle",children:(0,n.jsx)(c.x6,{i18nKey:"alerting.contact-points.no-integrations",children:"No integrations configured"})}),X.map(([he,fe],Ce)=>{const Ae=w[he],_e=G[he]??(0,s.upperFirst)(he),Xe=(0,s.size)(re)-1===Ce,De=fe[0];return(0,n.jsxs)(l.Fragment,{children:[(0,n.jsxs)(o.B,{direction:"row",alignItems:"center",gap:.5,children:[De[q.sW]?.icon&&(0,n.jsx)("img",{width:"14px",src:De[q.sW]?.icon,alt:De[q.sW]?.title}),Ae&&(0,n.jsx)(h.I,{name:Ae}),(0,n.jsxs)("span",{children:[_e,fe.length>1&&` (${fe.length})`]})]}),!Xe&&"\u22C5"]},he)}),le>0&&(0,n.jsx)("span",{children:`+${le} more`})]})})},Z=({diagnostics:se,sendingResolved:ie})=>{const ce=(0,i.of)(te),re=!!se.lastNotifyAttemptError,ue=(0,r.KQ)(se.lastNotifyAttempt),X=se.lastNotifyAttemptDuration,le=ue.isValid();return(0,n.jsx)("div",{className:ce.metadataRow,children:(0,n.jsx)(o.B,{direction:"row",gap:1,children:re?(0,n.jsx)(_.P,{color:"error",icon:"exclamation-circle",children:(0,n.jsx)(g.m,{content:se.lastNotifyAttemptError,children:(0,n.jsx)("span",{children:(0,n.jsx)(c.x6,{i18nKey:"alerting.contact-points.last-delivery-failed",children:"Last delivery attempt failed"})})})}):(0,n.jsxs)(n.Fragment,{children:[le&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(_.P,{icon:"clock-nine",children:[(0,n.jsx)(c.x6,{i18nKey:"alerting.contact-points.last-delivery-attempt",children:"Last delivery attempt"}),(0,n.jsx)(g.m,{content:ue.toLocaleString(),children:(0,n.jsx)("span",{children:(0,n.jsx)(f.E,{color:"primary",children:ue.locale("en").fromNow()})})})]}),(0,n.jsx)(_.P,{icon:"stopwatch",children:(0,n.jsxs)(c.x6,{i18nKey:"alerting.contact-points.delivery-duration",children:["Last delivery took ",(0,n.jsx)(u.S,{content:X})]})})]}),!le&&(0,n.jsx)(_.P,{icon:"clock-nine",children:(0,n.jsx)(c.x6,{i18nKey:"alerting.contact-points.no-delivery-attempts",children:"No delivery attempts"})}),!ie&&(0,n.jsx)(_.P,{icon:"info-circle",children:(0,n.jsxs)(c.x6,{i18nKey:"alerting.contact-points.only-firing",children:["Delivering ",(0,n.jsx)(f.E,{color:"primary",children:"only firing"})," notifications"]})})]})})})},te=se=>({contactPointWrapper:(0,a.css)({borderRadius:se.shape.radius.default,border:`solid 1px ${se.colors.border.weak}`,borderBottom:"none"}),integrationWrapper:(0,a.css)({position:"relative",background:`${se.colors.background.primary}`,padding:`${se.spacing(1)} ${se.spacing(1.5)}`,borderBottom:`solid 1px ${se.colors.border.weak}`}),metadataRow:(0,a.css)({borderBottomLeftRadius:`${se.shape.radius.default}`,borderBottomRightRadius:`${se.shape.radius.default}`}),noIntegrationsContainer:(0,a.css)({paddingTop:`${se.spacing(1.5)}`,paddingLeft:`${se.spacing(1.5)}`})})},25076:(ne,A,e)=>{"use strict";e.d(A,{l:()=>a,r:()=>s});let n;function a(l){n=l}function s(){return n}},25149:(ne,A,e)=>{"use strict";e.d(A,{m:()=>r});var n=e(74848),a=e(92745),s=e(8207),l=e(29855);function r({activeTab:c,onTabChange:i,children:o,onClose:h,formatProviders:f,title:g="Export"}){const u=Object.values(f).map(v=>({label:v.name,value:v.exportFormat})),E=f.length>1?(0,a.t)("alerting.export.subtitle.formats","Select the format and download the file or copy the contents to clipboard"):(0,a.t)("alerting.export.subtitle.one-format","Download the file or copy the contents to clipboard");return(0,n.jsx)(s._,{title:g,subtitle:E,tabs:(0,n.jsx)(l.sb,{tabs:u,setActiveTab:i,activeTab:c}),onClose:h,size:"md",children:o})}},25157:(ne,A,e)=>{"use strict";e.d(A,{fP:()=>ce,Ay:()=>ue});var n=e(74848),a=e(96540),s=e(22803),l=e(71468),r=e(54148),c=e(63704),i=e(92745),o=e(36490),h=e(79104),f=e(71599),g=e(93256),u=e(7895),E=e(8515),v=e(36219),p=e(6890),m=e(43707),y=e(5423),d=e(65642),x=e(64762),b=e(73427),D=e(94232),C=e(38206),P=e(43550),T=e(51898),O=e(88559),S=e(45861),B=e(30703),K=e(87063),U=e(77731),F=e(23289),I=e(52763),V=e(37918);const L=({dashboard:le})=>{const he=(0,a.useMemo)(()=>(0,U._u)(),[]),fe=(0,I.wA)(),Ce=(0,I.d4)(Ae=>Ae.dashboard.initialDatasource);return(0,n.jsxs)(K.W,{children:[(0,n.jsx)(K.W.Item,{testId:T.Tp.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,i.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const Ae=(0,U.OK)(le,Ce);F.c.toolbarAddButtonClicked({item:"add_visualization"}),o.Ny.partial({editPanel:Ae}),fe((0,V.Ub)(void 0))}},"add-visualisation"),(0,n.jsx)(K.W.Item,{testId:T.Tp.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,i.t)("dashboard.add-menu.row","Row"),onClick:()=>{F.c.toolbarAddButtonClicked({item:"add_row"}),(0,U.SD)(le)}},"add-row"),(0,n.jsx)(K.W.Item,{testId:T.Tp.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,i.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{F.c.toolbarAddButtonClicked({item:"import_from_library"}),(0,U.s3)(le)}},"add-panel-lib"),(0,n.jsx)(K.W.Item,{testId:T.Tp.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,i.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{F.c.toolbarAddButtonClicked({item:"paste_panel"}),(0,U.no)(le,he)},disabled:!he},"add-panel-clipboard")]})},W=({dashboard:le,onToolbarAddMenuOpen:he})=>{const[fe,Ce]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{fe&&he&&he()},[fe,he]),(0,n.jsx)(O.m,{overlay:()=>(0,n.jsx)(L,{dashboard:le}),placement:"bottom",offset:[0,6],onVisibleChange:Ce,children:(0,n.jsxs)(S.$n,{variant:"secondary",size:"sm",fill:"outline","data-testid":T.Tp.components.PageToolbar.itemButton("Add button"),children:[(0,n.jsx)(i.x6,{i18nKey:"dashboard.toolbar.add",children:"Add"}),(0,n.jsx)(B.I,{name:fe?"angle-up":"angle-down",size:"lg"})]})})};var R=e(37010),G=e(22429),w=e(98036),_=e(4590),Q=e(69289),ae=e(87745),q=e(75541),k=e(34339),ee=e(74618),j=e(58662);const J=({dashboard:le})=>(0,n.jsx)(S.$n,{"data-testid":T.Tp.pages.Dashboard.DashNav.shareButton,variant:"primary",size:"sm",onClick:()=>{F.c.toolbarShareClick(),o.Ny.partial({shareView:j.wr.link})},children:(0,n.jsx)(i.x6,{i18nKey:"dashboard.toolbar.share-button",children:"Share"})}),Z={removeNavIndex:P.Im,setStarred:C.ci,updateTimeZoneForSession:Q.Cj,updateNavIndex:p.Vz},te=le=>({navIndex:le.navIndex}),se=(0,l.connect)(te,Z);function ie(le){registerDynamicDashNavAction("left",le)}function ce(le){(0,q.Y)("right",le)}const re=(0,a.memo)(le=>{(0,r.zy)();const he=(0,h.C)();(0,D.u)(le.dashboard.events,ae.Cf);const fe=le.dashboard.snapshot?.originalUrl??"",Ce=()=>{window.location.href=c.sQ.sanitizeUrl(le.dashboard.snapshot.originalUrl)},Ae=(0,x._2)(),_e=()=>{try{const je=new URL(c.sQ.sanitizeUrl(fe),d.Ay.appUrl),Qe=new URL(d.Ay.appUrl);je.host!==Qe.host?b.lE.publish(new ae.S8({component:f.u,props:{title:(0,i.t)("dashboard.dash-nav.on-open-snapshot-original.title.proceed-to-external-site","Proceed to external site?"),modalClass:X,body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["This link connects to an external website at"," ",(0,n.jsx)("code",{children:fe})]}),(0,n.jsx)("p",{children:"Are you sure you'd like to proceed?"})]}),confirmVariant:"primary",confirmText:(0,i.t)("dashboard.dash-nav.on-open-snapshot-original.confirmText.proceed","Proceed"),onConfirm:Ce}})):Ce()}catch(je){Ae.error("Invalid URL",je instanceof Error?je.message:void 0)}},Xe=()=>{F.c.toolbarFavoritesClick();const je=(0,G.UA)(),{dashboard:Qe,navIndex:He,removeNavIndex:Je,setStarred:de,updateNavIndex:ve}=le;je.starDashboard(Qe.uid,!!Qe.meta.isStarred).then(me=>{de({id:Qe.uid,title:Qe.title,url:Qe.meta.url??"",isStarred:me});const xe=He.starred;if(me)xe.children?.push({id:C.L1+Qe.uid,text:Qe.title,url:Qe.meta.url??"",parentItem:xe});else{Je(C.L1+Qe.uid);const Ee=xe.children?.findIndex(Pe=>Pe.id===C.L1+Qe.uid);Ee&&xe.children?.splice(Ee,1)}ve(xe),Qe.meta.isStarred=me,he()})},De=()=>{F.c.toolbarSettingsClick(),o.Ny.partial({editview:"settings"})},Me=()=>{_._o.prev()},Te=()=>{_._o.next()},$e=()=>{_._o.stop(),he()},Re=(je,Qe)=>{je.map((He,Je)=>{const de=He.component,ve=(0,a.createElement)(de,{...le,key:`button-custom-${Je}`});typeof He.index=="number"?Qe.splice(He.index,0,ve):Qe.push(ve)})},Ke=()=>_._o.state.isPlaying,Ve=()=>{const je=d.Ay.buildInfo.env==="development",{dashboard:Qe,kioskMode:He}=le,{canStar:Je,isStarred:de}=Qe.meta,ve=[];if(He||Ke())return[];if(Je){let me=de?(0,i.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,i.t)("dashboard.toolbar.mark-favorite","Mark as favorite");ve.push((0,n.jsx)(k._,{tooltip:me,icon:de?"favorite":"star",iconType:de?"mono":"default",iconSize:"lg",onClick:Xe},"button-star"))}return Qe.uid&&ve.push((0,n.jsx)(w.u,{uid:Qe.uid},"public-dashboard-badge")),je&&d.Ay.featureToggles.dashboardScene&&ve.push((0,n.jsx)(k._,{tooltip:(0,i.t)("dashboard.dash-nav.render-left-actions.tooltip-view-as-scene","View as Scene"),icon:"apps",onClick:()=>{o.Ny.partial({scenes:!0})}},"button-scenes")),Re(q.C.left,ve),ve},Se=()=>(0,n.jsxs)(g.e,{children:[(0,n.jsx)(u.I,{tooltip:(0,i.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:Me,narrow:!0}),(0,n.jsx)(u.I,{onClick:$e,children:(0,n.jsx)(i.x6,{i18nKey:"dashboard.toolbar.playlist-stop",children:"Stop playlist"})}),(0,n.jsx)(u.I,{tooltip:(0,i.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:Te,narrow:!0})]},"playlist-buttons"),Ye=()=>{const{dashboard:je,updateTimeZoneForSession:Qe,hideTimePicker:He}=le;return He?null:(0,n.jsx)(ee.$,{dashboard:je,onChangeTimeZone:Qe},"time-controls")},Ue=()=>{const{dashboard:je,isFullscreen:Qe,hideTimePicker:He}=le,{canSave:Je,canEdit:de,showSettings:ve,canShare:me}=je.meta,{snapshot:xe}=je,Ee=xe&&xe.originalUrl,Pe=[];return Ke()?[Se(),Ye()]:(Ee&&Pe.push((0,n.jsx)(u.I,{tooltip:(0,i.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:_e,icon:"link"},"button-snapshot")),Je&&!Qe&&Pe.push((0,n.jsx)(E.$s,{children:({showModal:Oe,hideModal:We})=>(0,n.jsx)(u.I,{tooltip:(0,i.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{Oe(R.$,{dashboard:je,onDismiss:We})}})},"button-save")),Re(q.C.right,Pe),ve&&Pe.push((0,n.jsx)(u.I,{tooltip:(0,i.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:De},"button-settings")),de&&!Qe&&Pe.push((0,n.jsx)(W,{onToolbarAddMenuOpen:F.c.toolbarAddClick,dashboard:je},"panel-add-dropdown")),me&&Pe.push((0,n.jsx)(J,{dashboard:je},"button-share")),He||Pe.push((0,n.jsx)(y.K,{},"toolbar-separator")),Pe.push(Ye()),Pe)};return(0,n.jsx)(m.H,{actions:(0,n.jsxs)(n.Fragment,{children:[Ve(),(0,n.jsx)(y.K,{leftActionsSeparator:!0}),(0,n.jsx)(v.U,{alignment:"right",children:Ue()})]})})});re.displayName="DashNav";const ue=se(re),X=(0,s.css)({width:"max-content",maxWidth:"80vw"})},25206:(ne,A,e)=>{"use strict";e.d(A,{AA:()=>g,D$:()=>o,E2:()=>h,MK:()=>r,qZ:()=>f,xt:()=>i});var n=e(65307),a=e(88813),s=e(93612),l=e(96120);const r={...a.Vg,type:"adhoc",datasource:null,filters:[]},c=(0,n.Z0)({name:"templating/adhoc",initialState:l.j,reducers:{filterAdded:(u,E)=>{const v=(0,s.Fs)(u,E.payload.id);v.type==="adhoc"&&v.filters.push(E.payload.data)},filterRemoved:(u,E)=>{const v=(0,s.Fs)(u,E.payload.id);if(v.type!=="adhoc")return;const p=E.payload.data;v.filters.splice(p,1)},filterUpdated:(u,E)=>{const v=(0,s.Fs)(u,E.payload.id);if(v.type!=="adhoc")return;const{filter:p,index:m}=E.payload.data;v.filters[m]=p},filtersRestored:(u,E)=>{const v=(0,s.Fs)(u,E.payload.id);v.type==="adhoc"&&(v.filters=E.payload.data)}}}),{filterAdded:i,filterRemoved:o,filterUpdated:h,filtersRestored:f}=c.actions,g=c.reducer},25240:(ne,A,e)=>{"use strict";e.d(A,{S5:()=>r,k0:()=>s});var n=e(60379),a=e(20720);function s(c,i=!1){return new Promise(o=>{const h=document.createElement("script");h.onload=o,h.src=c,h.async=i,document.head.appendChild(h)})}const l=(0,n.h)("EchoSrv"),r=l.logger;(0,a.h)("echo",void 0,l)},25260:(ne,A,e)=>{"use strict";e.d(A,{_:()=>E,l:()=>f});var n=e(81160),a=e(41119),s=e(16515),l=e(95004),r=e(79319),c=e(46644),i=e(47433),o=e(64761),h=e(91146);const f=!0,g=2;var u=(x=>(x.aggregate="aggregate",x.groupBy="groupby",x))(u||{});const E={id:o.F.groupToNestedTable,name:"Group to nested tables",description:"Group data by a field value and create nested tables with the grouped data",defaultOptions:{showSubframeHeaders:f,fields:{}},isApplicable:x=>(0,h.f)(x)>=g?r.M.Applicable:r.M.NotApplicable,isApplicableDescription:x=>{const b=(0,h.f)(x);return`The Group to nested table transformation requires a series with at least ${g} fields to work. The maximum number of fields found on a series is ${b}`},operator:x=>b=>b.pipe((0,n.T)(D=>{if(!Object.keys(x.fields).find(T=>x.fields[T].operation==="groupby"))return D;const P=[];for(const T of D){const O=T.fields.filter(U=>p(U,x));if(O.length===0)continue;const S=(0,i.Y2)(T,O),B=(0,i.Ce)(O,S),K=d(S,x);for(let U=0;U<T.fields.length;U++){const F=T.fields[U];if(!m(F,x))continue;const I=(0,s.Ct)(F),V=x.fields[I].aggregations,M={};S.forEach(L=>{const N=L[I],W=(0,c.Nw)({field:N,reducers:V});for(const R of V)Array.isArray(M[R])||(M[R]=[]),M[R].push(W[R])});for(const L of V){const N={name:`${I} (${L})`,values:M[L],type:l.PU.other,config:{}};N.type=y(L,F,N),B.push(N)}}B.push({config:{},name:"__nestedFrames",type:l.PU.nestedFrames,values:K}),P.push({fields:B,length:S.size})}return P}))};function v(x,b,D){return{meta:{custom:{noHeader:!(D.showSubframeHeaders===void 0?f:D.showSubframeHeaders)}},length:b,fields:x}}const p=(x,b)=>{const D=(0,s.Ct)(x);return b?.fields[D]?.operation==="groupby"},m=(x,b)=>{const D=(0,s.Ct)(x);return b?.fields[D]?.operation==="aggregate"&&Array.isArray(b?.fields[D].aggregations)&&b?.fields[D].aggregations.length>0},y=(x,b,D)=>{switch(x){case c.gy.allIsNull:return l.PU.boolean;case c.gy.last:case c.gy.lastNotNull:case c.gy.first:case c.gy.firstNotNull:return b.type;default:return(0,a.dF)(D)??l.PU.string}};function d(x,b){const D=[];for(const[,C]of x){const P=[];for(const[T,O]of Object.entries(C)){const S=b.fields[T];(S===void 0||S.aggregations===void 0||S.operation==="aggregate"&&S.aggregations.length===0||S.operation===null||S.operation===void 0)&&P.push(O)}P.length>0?D.push([v(P,P[0].values.length,b)]):D.push([v([],0,b)])}return D}},25274:(ne,A,e)=>{"use strict";e.d(A,{JD:()=>i,Kj:()=>c,YW:()=>l,oF:()=>s,oG:()=>o,xG:()=>r});var n=e(47184),a=e(36656);function s(h){return`SELECT ${h.map(g=>{let u="";return g.name&&g.alias?u+=`${g.name}(${g.parameters?.map(E=>`${E.name}`)}) AS ${g.alias}`:g.name?u+=`${g.name}(${g.parameters?.map(E=>`${E.name}`)})`:g.alias?u+=`${g.parameters?.map(E=>`${E.name}`)} AS ${g.alias}`:u+=`${g.parameters?.map(E=>`${E.name}`)}`,u}).join(", ")} `}const l=h=>{if(!h)return!1;const f=h.some(u=>u.parameters?.length||u.parameters?.some(E=>E.name)),g=h.some(u=>u.name);return f||g};function r(h){return{type:a._.GroupBy,property:{type:a.D.String,name:h}}}function c(h){return{type:a._.Property,property:{type:a.D.String,name:h}}}function i(h){return{type:a._.Function,name:h,parameters:[]}}function o(h){return h?.name?(0,n.z)(h.name):null}},25346:(ne,A,e)=>{"use strict";e.d(A,{K:()=>a});const n="12.2.1",a={showImage:!0}},25379:(ne,A,e)=>{"use strict";e.d(A,{$:()=>o,Z:()=>i});var n=e(74848),a=e(22803),s=e(92145),l=e(37386),r=e(87105),c=e(63142);function i({value:h,defaultValue:f,name:g,description:u,placeholder:E,onChange:v,onBlur:p,ariaLabel:m,required:y,width:d,testId:x}){const b=(0,c.of)(o),D=(0,s.Bi)();return(0,n.jsx)(l.D,{label:g,description:u,htmlFor:D,children:(0,n.jsx)(r.f,{id:D,rows:2,value:h,defaultValue:f,onChange:v,onBlur:p,placeholder:E,required:y,"aria-label":m,cols:d,className:b.textarea,"data-testid":x})})}function o(h){return{textarea:(0,a.css)({whiteSpace:"pre-wrap",minHeight:h.spacing(4),height:"auto",overflow:"auto",padding:`${h.spacing(.75)} ${h.spacing(1)}`,width:"inherit",[h.breakpoints.down("sm")]:{width:"100%"}})}}},25460:(ne,A,e)=>{"use strict";e.d(A,{N:()=>l});var n=e(74848),a=e(22803),s=e(63142);function l(){const c=(0,s.of)(r);return(0,n.jsx)("div",{className:c.divider})}const r=c=>({divider:(0,a.css)({height:1,backgroundColor:c.colors.border.weak,margin:c.spacing(.5,0)})})},25531:(ne,A,e)=>{"use strict";e.d(A,{v:()=>K});var n=e(74848),a=e(22803),s=e(2543),l=e(36638),r=e(83340),c=e(92745),i=e(63152),o=e(59695),h=e(63142),f=e(82345),g=e(96540),u=e(23257),E=e.n(u),v=e(41654),p=e(72636),m=e(72489),y=e(76319),d=e(37386),x=e(74098);const b=({property:V,context:M,registry:L,onChange:N,onRemove:W,isSystemOverride:R,searchQuery:G})=>{const w=(0,h.of)(D),_=L?.getIfExists(V.id),Q=(0,g.useId)();if(!_)return null;const ae=Array.isArray(V.value)||V.id===r.uo.Thresholds||V.id===r.uo.Links||V.id===r.uo.Mappings,q=_.category?.filter(j=>j!==_.name);let k;const ee=(j=!0,J=!1)=>(Z=!1)=>(0,n.jsxs)(v.B,{justifyContent:"space-between",children:[(0,n.jsxs)(p.J,{category:q,description:j?_.description:void 0,htmlFor:Q,children:[(0,n.jsx)(E(),{textToHighlight:_.name,searchWords:[G],highlightClassName:"search-fragment-highlight"}),!Z&&J&&_.getItemsCount&&(0,n.jsx)(m.p,{value:_.getItemsCount(V.value)})]}),!R&&(0,n.jsx)("div",{children:(0,n.jsx)(y.K,{name:"times",onClick:W,tooltip:(0,c.t)("dashboard.dynamic-config-value-editor.render-label.tooltip-remove-property","Remove property")})})]});return ae?k=(0,n.jsx)(x.D,{id:_.name,renderTitle:ee(!1,!0),className:(0,a.css)({paddingLeft:0,paddingRight:0}),isNested:!0,isOpenDefault:V.value!==void 0,children:(0,n.jsx)(_.override,{value:V.value,onChange:j=>{N(j)},item:_,context:M})}):k=(0,n.jsx)("div",{children:(0,n.jsx)(d.D,{label:ee()(),description:_.description,children:(0,n.jsx)(_.override,{value:V.value,onChange:j=>{N(j)},item:_,context:M,id:Q})})}),(0,n.jsx)("div",{className:(0,a.cx)(ae&&w.collapsibleOverrideEditor,!ae&&"dynamicConfigValueEditor--nonCollapsible"),children:k})},D=V=>({collapsibleOverrideEditor:(0,a.css)({label:"collapsibleOverrideEditor","& + .dynamicConfigValueEditor--nonCollapsible":{marginTop:V.spacing(1)}})});var C=e(25797),P=e(51156),T=e(45861),O=e(30703);const S=({isExpanded:V,registry:M,matcherUi:L,overrideName:N,override:W,onOverrideRemove:R})=>{const G=(0,h.of)(B),_=W.properties.map(ae=>M.getIfExists(ae.id)).filter(ae=>!!ae).map(ae=>ae?.name).join(", "),Q=L.optionsToLabel(W.matcher.options);return(0,n.jsxs)("div",{children:[(0,n.jsxs)(v.B,{justifyContent:"space-between",children:[(0,n.jsx)("div",{children:N}),(0,n.jsx)(T.$n,{variant:"secondary",fill:"text",icon:"trash-alt",onClick:R,tooltip:(0,c.t)("dashboard.override-category-title.tooltip-remove-override","Remove override"),"aria-label":(0,c.t)("dashboard.override-category-title.aria-label-remove-override","Remove override")})]}),!V&&(0,n.jsx)("div",{className:G.overrideDetails,children:(0,n.jsxs)("div",{className:G.options,title:Q,children:[Q," ",(0,n.jsx)(O.I,{name:"angle-right"})," ",_]})})]})};S.displayName="OverrideTitle";const B=V=>({matcherUi:(0,a.css)({padding:V.spacing(1)}),propertyPickerWrapper:(0,a.css)({marginTop:V.spacing(2)}),overrideDetails:(0,a.css)({fontSize:V.typography.bodySmall.fontSize,color:V.colors.text.secondary,fontWeight:V.typography.fontWeightRegular}),options:(0,a.css)({overflow:"hidden",paddingRight:V.spacing(4)}),unknownLabel:(0,a.css)({marginBottom:0})});function K(V,M,L,N,W){const R=[],G=V;if(!M||M.isEmpty())return[];const w=(q,k)=>{let ee=(0,s.cloneDeep)(G.overrides);ee[q]=k,W({...G,overrides:ee})},_=q=>{let k=(0,s.cloneDeep)(G.overrides);k.splice(q,1),W({...G,overrides:k})},Q=q=>{const k=l.sJ.get(q.value);k&&W({...G,overrides:[...G.overrides,{matcher:{id:k.id,options:k.defaultOptions},properties:[]}]})},ae={data:L,getSuggestions:q=>(0,f.Hf)(L,q),isOverride:!0};for(let q=0;q<G.overrides.length;q++){const k=G.overrides[q],ee=(0,c.t)("dashboard.get-field-override-categories.override-name","Override {{overrideNum}}",{overrideNum:q+1}),j=`panel-options-override-${q}`,J=i.g.get(k.matcher.id),Z=U(M),te=(0,r.Ow)(k),se=k.properties.length===0,ie=new C.C({title:ee,id:j,forceOpen:se,renderTitle:function(le){return(0,n.jsx)(S,{override:k,isExpanded:le,registry:M,overrideName:ee,matcherUi:J,onOverrideRemove:()=>_(q)})}}),ce=X=>{w(q,{...k,matcher:{...k.matcher,options:X}})},re=(X,le)=>{const he=M.get(le.value),fe={id:he.id,value:he.defaultValue},Ce=X.properties??[];Ce.push(fe),w(q,{...X,properties:Ce})},ue=`${j}-matcher`;ie.addItem(new P.v({id:ue,title:J.name,render:function(){return(0,n.jsx)(J.component,{id:ue,matcher:J.matcher,data:L??[],options:k.matcher.options,onChange:ce})}}));for(let X=0;X<k.properties.length;X++){const le=k.properties[X];if(!M.getIfExists(le.id))continue;const fe=_e=>{w(q,{...k,properties:k.properties.map((Xe,De)=>De===X?{...Xe,value:_e}:Xe)})},Ce=()=>{w(q,{...k,properties:k.properties.filter((_e,Xe)=>Xe!==X)})},Ae=`${j}-property-${le.id}`;ie.addItem(new P.v({skipField:!0,id:Ae,render:function(){return(0,n.jsx)(b,{isSystemOverride:te,onChange:fe,onRemove:Ce,property:le,registry:M,context:ae,searchQuery:N},Ae)}}))}!te&&k.matcher.options&&ie.addItem(new P.v({skipField:!0,id:`${j}-add-button`,render:function(){return(0,n.jsx)(o.i,{label:(0,c.t)("dashboard.get-field-override-categories.label-add-override-property","Add override property"),variant:"secondary",isFullWidth:!0,icon:"plus",menuPlacement:"auto",options:Z,onChange:le=>re(k,le)},"Add override property")}})),R.push(ie)}return R.push(new C.C({title:(0,c.t)("dashboard.get-field-override-categories.title.add-button","add button"),id:"add button",customRender:function(){return(0,n.jsx)(F,{children:(0,n.jsx)(o.i,{icon:"plus",label:(0,c.t)("dashboard.get-field-override-categories.label-add-field-override","Add field override"),variant:"secondary",menuPlacement:"auto",isFullWidth:!0,size:"md",options:i.g.list().filter(k=>!k.excludeFromPicker).map(k=>({label:k.name,value:k.id,description:k.description})),onChange:k=>Q(k)})},"Add override")}})),R}function U(V){return V.list().filter(M=>!M.hideFromOverrides).map(M=>{let L=M.name;return M.category&&(L=[...M.category,M.name].join(" > ")),{label:L,value:M.id,description:M.description}})}function F({children:V}){const M=(0,h.of)(I);return(0,n.jsx)("div",{className:M,children:V})}function I(V){return(0,a.css)({borderTop:`1px solid ${V.colors.border.weak}`,padding:`${V.spacing(2)}`,display:"flex"})}},25797:(ne,A,e)=>{"use strict";e.d(A,{C:()=>l});var n=e(74848),a=e(31286),s=e(74098);class l{constructor(c){this.props=c,this.items=[],this.categories=[]}addItem(c){return c.parent=this,this.items.push(c),this}addCategory(c){return c.props.isNested=!0,c.parent=this,this.categories.push(c),this}getCategory(c){let i=this.categories.find(o=>o.props.id===c);return i||(i=new l({title:c,id:c}),this.addCategory(i)),i}render(c){return this.props.customRender?this.props.customRender():this.props.title===""?(0,n.jsx)(a.a,{padding:2,paddingBottom:1,children:this.items.map(i=>i.render(c))},this.props.title):(0,n.jsxs)(s.D,{...this.props,children:[this.items.map(i=>i.render(c)),this.categories.map(i=>i.render(c))]},this.props.title)}}},25953:(ne,A,e)=>{"use strict";e.d(A,{X:()=>S});var n=e(2543),a=e(96540),s=e(45863),l=e(6048),r=e(33143),c=e(3371),i=e(8285),o=e(41667),h=e(74848),f=e(92745),g=e(25797),u=e(51156),E=e(31819),v=e(78725);function p(B){const K=new g.C({title:(0,f.t)("dashboard.auto-grid.item-options.repeat.title","Repeat options"),id:"repeat-options",isOpenDefault:!1}).addItem(new u.v({title:(0,f.t)("dashboard.auto-grid.item-options.repeat.variable.title","Repeat by variable"),id:"auto-grid-repeat-by-variable",description:(0,f.t)("dashboard.auto-grid.item-options.repeat.variable.description","Repeat this panel for each value in the selected variable. This is not visible while in edit mode. You need to go back to dashboard and then update the variable or reload the dashboard."),render:F=>(0,h.jsx)(m,{id:F.props.id,item:B})})),U=(0,v.h)(B.state.conditionalRendering);return[K,U]}function m({item:B,id:K}){const{variableName:U}=B.useState();return(0,h.jsx)(E.U,{id:K,sceneContext:B,repeat:U,onChange:F=>{r.cc.edit({description:(0,f.t)("dashboard.edit-actions.panel-repeat-variable","Panel repeat by"),source:B,perform:()=>B.setRepeatByVariable(F),undo:()=>B.setRepeatByVariable(U)})}})}var y=e(22803),d=e(63142),x=e(86292),b=e(96691),D=e(20246),C=e(39242);function P({model:B}){const{body:K,repeatedPanels:U=[],key:F}=B.useState(),{draggingKey:I}=B.getParentGrid().useState(),{isEditing:V,preload:M}=(0,i.TN)(B),[L,N,W,R]=(0,x.H)(B),G=(0,d.of)(T),w=(0,b.MK)(),_=(0,a.useMemo)(()=>(0,D.DP)(M),[M]),Q=(0,a.useMemo)(()=>(0,a.memo)(({item:k,addDndContainer:ee,isDragged:j,isDragging:J,isRepeat:Z=!1})=>L&&!V&&!R?null:(0,h.jsxs)("div",{...ee?{ref:B.containerRef,"data-auto-grid-item-drop-target":J?F:void 0}:{},className:(0,y.cx)(L&&!V&&G.hidden),children:[j&&(0,h.jsx)("div",{className:G.draggedPlaceholder}),_&&(!L||!R)?(0,h.jsxs)(s.w1,{className:(0,y.cx)(N,G.wrapper,j&&!Z&&G.draggedWrapper,j&&Z&&G.draggedRepeatWrapper),children:[(0,h.jsx)(k.Component,{model:k}),W]},k.state.key):(0,h.jsxs)("div",{className:(0,y.cx)(N,G.wrapper,j&&!Z&&G.draggedWrapper,j&&Z&&G.draggedRepeatWrapper),children:[(0,h.jsx)(k.Component,{model:k}),W]})]})),[N,W,_,F,B.containerRef,G,L,V,R]);if(w)return(0,b.mN)(w,[K,...U]);const ae=!!I,q=I===F;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Q,{item:K,addDndContainer:!0,isDragged:q,isDragging:ae},K.state.key),U.map(k=>(0,h.jsx)(Q,{item:k,addDndContainer:!1,isDragged:q,isDragging:ae,isRepeat:!0},k.state.key))]})}const T=B=>({wrapper:(0,y.css)({width:"100%",height:"100%",position:"relative"}),draggedWrapper:(0,y.css)({position:"absolute",zIndex:1e3,top:`var(${C.hM})`,left:`var(${C.PS})`,width:`var(${C.MS})`,height:`var(${C.PP})`,opacity:.8}),draggedRepeatWrapper:(0,y.css)({visibility:"hidden"}),draggedPlaceholder:(0,y.css)({width:"100%",height:"100%",boxShadow:`0 0 ${B.spacing(.5)} ${B.colors.primary.border}`,background:`${B.colors.primary.transparent}`,zIndex:-1}),hidden:(0,y.css)({display:"none"})});var O=e(29425);class S extends s.Bs{constructor(K){super({...K,conditionalRendering:K?.conditionalRendering??l.M.createEmpty()}),this._variableDependency=new s.Sh(this,{variableNames:this.state.variableName?[this.state.variableName]:[],onVariableUpdateCompleted:()=>this.performRepeat()}),this.isDashboardLayoutItem=!0,this.containerRef=a.createRef(),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=P}_activationHandler(){this.state.variableName&&this.performRepeat(),this._subs.add(this.subscribeToEvent(r.WG,()=>this.handleEditChange()));const K=this.state.conditionalRendering?.activate();return()=>{K&&K()}}getOptions(){return p(this)}setElementBody(K){this.setState({body:K})}performRepeat(){if(!this.state.variableName||s.jh.hasVariableDependencyInLoadingState(this))return;const K=s.jh.lookupVariable(this.state.variableName,this)??new s.yP({name:"_____default_sys_repeat_var_____",options:[],value:"",text:"",query:"A"});if(!(K instanceof s.n8)){console.error("DashboardGridItem: Variable is not a MultiValueVariable");return}const{values:U,texts:F}=(0,i.a7)(K);if((0,n.isEqual)(this._prevRepeatValues,U))return;const I=this.state.body,V=[],M={values:[""],texts:K.hasAllValue()?["All"]:["None"]},L=U.length?U:M.values,N=F.length?F:M.texts;for(let W=0;W<L.length;W++){const G=W===0?I:I.clone({key:(0,c.lv)(I.state.key,W),repeatSourceKey:I.state.key});G.setState({$variables:(0,c.D1)(K,L[W],N[W])}),W>0&&V.push(G)}this.setState({repeatedPanels:V}),this._prevRepeatValues=U}getPanelCount(){return(this.state.repeatedPanels?.length??0)+1}setRepeatByVariable(K){const U={variableName:K};this.state.body.state.$variables&&this.state.body.setState({$variables:void 0}),this._variableDependency.setVariableNames(K?[K]:[]),this.setState(U),this.performRepeat()}getParentGrid(){if(!(this.parent instanceof O.o))throw new Error("Parent is not a AutoGridLayout");return this.parent}getBoundingBox(){const K=this.containerRef.current.getBoundingClientRect();return{width:K.width,height:K.height,top:this.containerRef.current.offsetTop,left:this.containerRef.current.offsetLeft}}handleEditChange(){this._prevRepeatValues=void 0,this.performRepeat()}scrollIntoView(){(0,o.d)(this,this.containerRef)}}},25992:(ne,A,e)=>{"use strict";e.d(A,{DW:()=>h,FF:()=>r,MD:()=>c,fH:()=>l,l$:()=>o,vV:()=>i});var n=e(32631),a=e(37930),s=e(43173);function l(f,g){s.$.grafanaJavascriptAgent.enabled&&n.P.api.pushLog([f],{level:a.$b.INFO,context:g})}function r(f,g){s.$.grafanaJavascriptAgent.enabled&&n.P.api.pushLog([f],{level:a.$b.WARN,context:g})}function c(f,g){s.$.grafanaJavascriptAgent.enabled&&n.P.api.pushLog([f],{level:a.$b.DEBUG,context:g})}function i(f,g){s.$.grafanaJavascriptAgent.enabled&&n.P.api.pushError(f,{context:g})}function o(f,g,u){s.$.grafanaJavascriptAgent.enabled&&n.P.api.pushMeasurement({type:f,values:g},{context:u})}function h(f,g){const u=E=>({source:f,...g,...E});return{logDebug:(E,v)=>c(E,u(v)),logInfo:(E,v)=>l(E,u(v)),logWarning:(E,v)=>r(E,u(v)),logError:(E,v)=>i(E,u(v)),logMeasurement:(E,v,p)=>o(E,v,u(p))}}},26332:(ne,A,e)=>{"use strict";e.d(A,{Km:()=>r,P4:()=>s,WK:()=>l,g6:()=>a,r4:()=>n,xB:()=>c});const n=(i,o)=>({name:i,columns:o}),a=i=>i.columns,s=(i,o)=>i.columns[o],l=(i,o,h)=>i.columns[o].values[h],r=(i,o,h)=>i.columns.map(f=>f.values[h]),c=(i,o)=>i[o]},26437:(ne,A,e)=>{"use strict";e.d(A,{b:()=>a,q:()=>n});const n="connections",a={Base:`/${n}`,DataSources:`/${n}/datasources`,DataSourcesNew:`/${n}/datasources/new`,DataSourcesEdit:`/${n}/datasources/edit/:uid`,DataSourcesDashboards:`/${n}/datasources/edit/:uid/dashboards`,AddNewConnection:`/${n}/add-new-connection`,DataSourcesDetails:`/${n}/datasources/:id`,ConnectDataOutdated:`/${n}/connect-data`,YourConnectionsOutdated:`/${n}/your-connections`}},26604:(ne,A,e)=>{"use strict";e.d(A,{E:()=>m,j:()=>d});var n=e(2543),a=e.n(n),s=e(7389),l=e(78282),r=e(6890),c=e(65642),i=e(64762),o=e(50803),h=e(30124),f=e(99305),g=e(8535),u=e(75515),E=e(97583),v=e(67933);function p(x){return!!(x.libraryPanel?.name&&x.libraryPanel?.uid)}async function m(x){x.cleanUpRepeats();const b=x.getSaveModelCloneOld();b.id=null,x.processRepeats();const D=[],C={},P={},T={},O=new Map;for(const U of b.getVariables())T[U.name]=U;const S=(U,F)=>{if(U.datasource===void 0){U.datasource=F;return}let I=U.datasource,V=null;const M=I?.uid,L=M&&f.SY.exec(M);if(L){const N=L[1]||L[2]||L[4];V=T[N],V&&V.current&&(I=V.current.value)}return(0,l.l)().get(I).then(N=>{if(N.meta?.builtIn||(C["datasource"+N.meta?.id]={type:"datasource",id:N.meta.id,name:N.meta.name,version:N.meta.info.version||"1.0.0"},V))return;const W=U.libraryPanel,R=W?"-for-library-panel":"";let G="DS_"+N.name.replace(" ","_").toUpperCase()+R.toUpperCase();if(P[G]={name:G,label:N.name,description:"",type:"datasource",pluginId:N.meta?.id,pluginName:N.meta?.name,usage:P[G]?.usage},W){const w=P[G]?.usage?.libraryPanels||[];w.push({name:W.name,uid:W.uid}),P[G].usage={libraryPanels:w}}U.datasource={type:N.meta.id,uid:"${"+G+"}"}})},B=async U=>{if(U.type!=="row"){if(await S(U),U.targets)for(const I of U.targets)await S(I,U.datasource);const F=c.Ay.panels[U.type];F&&(C["panel"+F.id]={type:"panel",id:F.id,name:F.name,version:F.info.version})}},K=async U=>{if((0,u.X)(U)){const{name:F,uid:I}=U.libraryPanel;let V=U.libraryPanel.model;V||(V=(await(0,h.Yr)(I,!0)).model),await S(V);const{gridPos:M,id:L,...N}=V;O.has(I)||O.set(I,{name:F,uid:I,kind:E.i.Panel,model:N})}};try{for(const I of b.panels)if(await B(I),I.collapsed!==void 0&&I.collapsed===!0&&I.panels)for(const V of I.panels)await B(V);for(const I of b.getVariables())I.type==="query"?(await S(I),I.options=[],I.current={},I.refresh=I.refresh!==s.CO.never?I.refresh:s.CO.onDashboardLoad):I.type==="datasource"?I.current={}:I.type==="adhoc"&&await S(I);for(const I of b.annotations.list)await S(I);C.grafana={type:"grafana",id:"grafana",name:"Grafana",version:c.Ay.buildInfo.version};for(const I of b.panels)if(await K(I),I.collapsed!==void 0&&I.collapsed===!0&&I.panels)for(const V of I.panels)await K(V);(0,n.each)(P,I=>{D.push(I)});for(const I of b.getVariables())if((0,v.VO)(I)){const V="VAR_"+I.name.replace(" ","_").toUpperCase();D.push({name:V,type:"constant",label:I.label||I.name,value:I.query,description:""}),I.query="${"+V+"}",I.current={value:I.query,text:I.query,selected:!1},I.options=[I.current]}const U=[...O.entries()].reduce((I,[V,M])=>(I[V]=M,I),{}),F=(0,n.defaults)({__inputs:D,__elements:U,__requires:(0,n.sortBy)(C,["id"])},b);for(let I=0;I<F.panels.length;I++){const V=F.panels[I];p(V)&&(F.panels[I]={gridPos:V.gridPos,id:V.id,libraryPanel:{uid:V.libraryPanel.uid,name:V.libraryPanel.name}})}return F}catch(U){return console.error("Export failed:",U),{error:U}}}async function y(x){const{libraryPanel:b,id:D,title:C}=x.spec;try{const T=(await(0,h.Yr)(b.uid,!0)).model,O=(0,o.Ln)(T);return O.spec.id=D,O}catch(P){console.error(`Failed to load library panel ${b.uid}:`,P);const T=P instanceof Error?P.message:"Unknown error";return(0,g.JD)((0,r.dx)((0,i.gi)(`Unable to load library panel "${b.name}": ${T}. It will appear as a placeholder in the export.`))),{kind:"Panel",spec:{id:D,title:C||`Library Panel: ${b.name}`,description:"",links:[],data:{kind:"QueryGroup",spec:{queries:[],transformations:[],queryOptions:{}}},vizConfig:{kind:"VizConfig",group:"text",version:"",spec:{options:{content:`**Library Panel Load Error**

Unable to load library panel: ${b.name} (${b.uid})

Error: ${P instanceof Error?P.message:"Unknown error"}`,mode:"markdown"},fieldConfig:{defaults:{},overrides:[]}}}}}}}async function d(x,b=!1){const D={},C=x.variables.filter(O=>O.kind==="DatasourceVariable");for(const O of x.variables)D[O.spec.name]=O.spec;const P=O=>{const S=O.query?.datasource?.name;if(S?.startsWith("${")&&S?.endsWith("}")){const B=S.slice(2,-1);if(C.find(U=>U.spec.name===B))return}O.query&&(O.query.datasource=void 0)},T=O=>{if(O.spec.data.spec.queries)for(const S of O.spec.data.spec.queries)P(S.spec)};try{const O=x.elements;for(const[S,B]of Object.entries(O))if(B.kind==="Panel")T(B);else if(B.kind==="LibraryPanel"&&b){const K=await y(B);T(K),O[S]=K}for(const S of x.variables)S.kind==="QueryVariable"?(P(S.spec),S.spec.options=[],S.spec.current={text:"",value:""}):S.kind==="DatasourceVariable"&&(S.spec.current={text:"",value:""});for(const S of x.annotations)P(S.spec);return x}catch(O){return console.error("Export failed:",O),{error:O}}}},26689:(ne,A,e)=>{"use strict";e.d(A,{q:()=>n});var n=(a=>(a.Data="data",a.Meta="meta",a.Error="error",a.Stats="stats",a.JSON="json",a.Query="query",a.Help="help",a))(n||{})},26987:(ne,A,e)=>{"use strict";e.d(A,{e:()=>a});var n=e(49785);const a=n.xI},27044:(ne,A,e)=>{"use strict";e.d(A,{aw:()=>f,md:()=>o,uT:()=>h});var n=e(68143),a=e(99090),s=e(55860),l=e(93854),r=e(11257),c=e(73427),i=e(62963);const o=50;async function h(g,u,E=1,v=o){const p=(0,n.AI)();let m=[];return c.TP.hasPermission(r.w.FoldersRead)&&(m=await p.get("/api/folders",{parentUid:g,page:E,limit:v})),m.map(y=>({kind:"folder",uid:y.uid,title:y.title,parentTitle:u,parentUID:g,managedBy:y.managedBy,url:(0,i.I2)(y.uid)?void 0:(0,i._0)(y.uid)}))}async function f(g,u=1,E=o){const p=await(0,s.S)().search({kind:["dashboard"],query:"*",location:g||"general",from:(u-1)*E,limit:E,offset:(u-1)*E});return p.view.map(m=>{const y=(0,l.hI)(m,p.view);return y.parentUID===a.TF&&(y.parentUID=void 0),y})}},27074:(ne,A,e)=>{"use strict";e.d(A,{l:()=>g});var n=e(74848),a=e(22803),s=e(73287),l=e(92745),r=e(27489),c=e(76319),i=e(50992),o=e(37386),h=e(63142),f=e(52308);function g({rawSql:E,datasourceType:v}){const[p,m]=(0,s.A)(),y=(0,h.of)(u),d=b=>{m(b),(0,r.rR)("grafana_sql_preview_copied",{datasource:v})},x=(0,n.jsxs)("div",{className:y.labelWrapper,children:[(0,n.jsx)("span",{className:y.label,children:(0,n.jsx)(l.x6,{i18nKey:"grafana-sql.components.preview.label-element.preview",children:"Preview"})}),(0,n.jsx)(c.K,{tooltip:(0,l.t)("grafana-sql.components.preview.label-element.tooltip-copy-to-clipboard","Copy to clipboard"),onClick:()=>d(E),name:"copy"})]});return(0,n.jsx)(o.D,{label:x,className:y.grow,children:(0,n.jsx)(i.B,{language:"sql",height:80,value:(0,f.s)(E),monacoOptions:{scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1},readOnly:!0,showMiniMap:!1})})}function u(E){return{grow:(0,a.css)({flexGrow:1}),label:(0,a.css)({fontSize:12,fontWeight:E.typography.fontWeightMedium}),labelWrapper:(0,a.css)({display:"flex",justifyContent:"space-between",paddingBottom:E.spacing(.5)})}}},27104:(ne,A,e)=>{"use strict";e.d(A,{$T:()=>E,$u:()=>i,Ay:()=>d,EC:()=>c,L5:()=>r,Q9:()=>l,dJ:()=>o,jE:()=>h,tC:()=>v});var n=e(65307);const a={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},s=(0,n.Z0)({name:"teams",initialState:a,reducers:{teamsLoaded:(x,b)=>{const{totalCount:D,perPage:C,...P}=b.payload,T=Math.ceil(D/C);return{...x,...P,totalPages:T,perPage:C,hasFetched:!0}},queryChanged:(x,b)=>({...x,page:1,query:b.payload}),pageChanged:(x,b)=>({...x,page:b.payload}),sortChanged:(x,b)=>({...x,sort:b.payload,page:1}),rolesFetchBegin:x=>({...x,rolesLoading:!0}),rolesFetchEnd:x=>({...x,rolesLoading:!1})}}),{teamsLoaded:l,queryChanged:r,pageChanged:c,sortChanged:i,rolesFetchBegin:o,rolesFetchEnd:h}=s.actions,f=s.reducer,g={team:{},members:[],groups:[],searchMemberQuery:""},u=(0,n.Z0)({name:"team",initialState:g,reducers:{teamLoaded:(x,b)=>({...x,team:b.payload}),teamMembersLoaded:(x,b)=>({...x,members:b.payload}),setSearchMemberQuery:(x,b)=>({...x,searchMemberQuery:b.payload}),teamGroupsLoaded:(x,b)=>({...x,groups:b.payload})}}),{teamLoaded:E,teamGroupsLoaded:v,teamMembersLoaded:p,setSearchMemberQuery:m}=u.actions,y=u.reducer,d={teams:f,team:y}},27164:(ne,A,e)=>{"use strict";e.d(A,{Dv:()=>s,RU:()=>n,n9:()=>a});function n(l){return new Set(["equals","not-equals","one-of","not-one-of"]).has(l)}const a={"=":"equals","!=":"not-equals","=~":"regex-match","!~":"regex-not-match","=|":"one-of","!=|":"not-one-of"},s=Object.fromEntries(Object.entries(a).map(([l,r])=>[r,l]))},27228:(ne,A,e)=>{"use strict";e.d(A,{U:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({title:c})=>{const i=(0,s.of)(r);return c?(0,n.jsx)("span",{className:i.title,children:c}):null},r=c=>({title:(0,a.css)({fontWeight:c.typography.fontWeightRegular,textOverflow:"ellipsis"})})},27282:(ne,A,e)=>{"use strict";e.d(A,{K:()=>U});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(46885),c=e(18828),i=e(43107),o=e(93225),h=e(96540),f=e(93581),g=e(49045),u=e(60188),E=e(25229),v=e(80011),p=e(51898),m=e(92745),y=e(63142),d=e(45861),x=e(18027),b=e(30703),D=e(63527),C=e(41654),P=e(35621),T=e(15245),O=e(11527),S=e(66630),B=e(62348),K=e(41e3);const U=({date:M,maxDate:L,minDate:N,label:W,onChange:R,disabledHours:G,disabledMinutes:w,disabledSeconds:_,timeZone:Q,showSeconds:ae=!0,clearable:q=!1})=>{const[k,ee]=(0,h.useState)(!1),j=(0,h.useRef)(null),{overlayProps:J,underlayProps:Z}=(0,o.e)({onClose:()=>ee(!1),isDismissable:!0,isOpen:k,shouldCloseOnInteractOutside:Ce=>{const Ae=document.getElementsByClassName(O.i)[0];return!(Ae&&Ae.contains(Ce))}},j),{dialogProps:te}=(0,c.s)({},j),se=(0,y.$j)(),{modalBackdrop:ie}=(0,y.of)(P.o),ce=(0,g.A)(`(min-width: ${se.breakpoints.values.lg}px)`),re=(0,y.of)(V),ue=[(0,s.UU)({crossAxis:!1,boundary:document.body}),(0,s.BN)()],{refs:X,floatingStyles:le}=(0,l.we)({open:k,placement:"bottom-start",onOpenChange:ee,middleware:ue,whileElementsMounted:r.ll,strategy:"fixed"}),he=(0,h.useCallback)(Ce=>{ee(!1),R(Ce)},[R]),fe=(0,h.useCallback)(Ce=>{Ce.preventDefault(),ee(!0)},[ee]);return(0,n.jsxs)("div",{"data-testid":"date-time-picker",style:{position:"relative"},children:[(0,n.jsx)(F,{date:M,onChange:R,isFullscreen:ce,onOpen:fe,label:W,ref:X.setReference,showSeconds:ae,clearable:q,timeZone:Q}),k?ce?(0,n.jsx)(T.ZL,{children:(0,n.jsx)(i.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("div",{ref:j,...J,...te,children:(0,n.jsx)(I,{date:M,onChange:he,isFullscreen:!0,onClose:()=>ee(!1),maxDate:L,minDate:N,ref:X.setFloating,style:le,showSeconds:ae,disabledHours:G,disabledMinutes:w,disabledSeconds:_,timeZone:Q})})})}):(0,n.jsxs)(T.ZL,{children:[(0,n.jsx)("div",{className:ie,...Z}),(0,n.jsx)(i.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("div",{ref:j,...J,...te,children:(0,n.jsx)("div",{className:re.modal,children:(0,n.jsx)(I,{date:M,maxDate:L,minDate:N,onChange:he,isFullscreen:!1,onClose:()=>ee(!1),showSeconds:ae,disabledHours:G,disabledMinutes:w,disabledSeconds:_,timeZone:Q})})})})]}):null]})},F=h.forwardRef(({date:M,label:L,onChange:N,onOpen:W,timeZone:R,showSeconds:G=!0,clearable:w=!1},_)=>{const Q=(0,y.of)(V),ae=G?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[q,k]=(0,h.useState)(()=>({value:M?(0,v.LE)(M,{timeZone:R}):w?"":(0,v.LE)((0,E.KQ)(),{timeZone:R}),invalid:!1}));(0,h.useEffect)(()=>{if(M){const te=(0,v.LE)(M,{format:ae,timeZone:R});k({invalid:!(0,B.f)(te),value:(0,E.Ar)(M)?te:M})}},[M,ae,R]);const ee=(0,h.useCallback)(te=>{const se=!(0,B.f)(te.currentTarget.value);k({value:te.currentTarget.value,invalid:se})},[]),j=(0,h.useCallback)(()=>{if(!q.invalid&&q.value){const te=(0,E.oZ)((0,u.O)({timeZone:R}),q.value);N(te)}},[q,N,R]),J=(0,h.useCallback)(()=>{k({value:"",invalid:!1}),N()},[N]),Z=(0,n.jsx)(d.$n,{"aria-label":(0,m.t)("grafana-ui.date-time-picker.calendar-icon-label","Time picker"),icon:"calendar-alt",variant:"secondary",onClick:W});return(0,n.jsx)(x.I,{label:L,invalid:!!(q.value&&q.invalid),className:Q.field,children:(0,n.jsx)(D.p,{onChange:ee,addonAfter:Z,value:q.value,onBlur:j,"data-testid":p.XF.DateTimePicker.input,placeholder:(0,m.t)("grafana-ui.date-time-picker.select-placeholder","Select date/time"),ref:_,suffix:w&&q.value&&(0,n.jsx)(b.I,{name:"times",className:Q.clearIcon,onClick:J})})})});F.displayName="DateTimeInput";const I=h.forwardRef(({date:M,onClose:L,onChange:N,isFullscreen:W,maxDate:R,minDate:G,style:w,showSeconds:_=!0,disabledHours:Q,disabledMinutes:ae,disabledSeconds:q,timeZone:k},ee)=>{const j=(0,y.of)(S.h2),J=(0,y.of)(V),[Z,te]=(0,h.useState)(()=>M&&M.isValid()?(0,E.oZ)((0,u.O)({timeZone:k}),M):(0,E.oZ)((0,u.O)({timeZone:k}),new Date)),[se,ie]=(0,h.useState)(()=>M&&M.isValid()?(0,K.Q)(M.toDate(),(0,u.O)({timeZone:k})):(0,K.Q)(new Date,(0,u.O)({timeZone:k}))),ce=(0,h.useCallback)(X=>{X&&!Array.isArray(X)&&ie(X)},[]),re=(0,h.useCallback)(X=>{te(X)},[]),ue=()=>{const X=(0,E.KQ)(Z);X.set("date",se.getDate()),X.set("month",se.getMonth()),X.set("year",se.getFullYear()),N(X)};return(0,n.jsxs)("div",{className:(0,a.cx)(J.container,{[J.fullScreen]:W}),style:w,ref:ee,children:[(0,n.jsx)(f.Ay,{next2Label:null,prev2Label:null,value:se,nextLabel:(0,n.jsx)(b.I,{name:"angle-right"}),nextAriaLabel:(0,m.t)("grafana-ui.date-time-picker.next-label","Next month"),prevLabel:(0,n.jsx)(b.I,{name:"angle-left"}),prevAriaLabel:(0,m.t)("grafana-ui.date-time-picker.previous-label","Previous month"),onChange:ce,locale:"en",className:j.body,tileClassName:j.title,maxDate:R,minDate:G}),(0,n.jsx)("div",{className:J.time,children:(0,n.jsx)(O.R,{showSeconds:_,onChange:re,value:Z,disabledHours:Q,disabledMinutes:ae,disabledSeconds:q})}),(0,n.jsxs)(C.B,{children:[(0,n.jsx)(d.$n,{type:"button",onClick:ue,children:(0,n.jsx)(m.x6,{i18nKey:"grafana-ui.date-time-picker.apply",children:"Apply"})}),(0,n.jsx)(d.$n,{variant:"secondary",type:"button",onClick:L,children:(0,n.jsx)(m.x6,{i18nKey:"grafana-ui.date-time-picker.cancel",children:"Cancel"})})]})]})});I.displayName="DateTimeCalendar";const V=M=>({container:(0,a.css)({padding:M.spacing(1),border:`1px ${M.colors.border.weak} solid`,borderRadius:M.shape.radius.default,backgroundColor:M.colors.background.primary,zIndex:M.zIndex.modal}),fullScreen:(0,a.css)({position:"absolute"}),time:(0,a.css)({marginBottom:M.spacing(2)}),modal:(0,a.css)({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:M.zIndex.modal,maxWidth:"280px"}),clearIcon:(0,a.css)({cursor:"pointer"}),field:(0,a.css)({marginBottom:0,width:"100%"})})},27321:(ne,A,e)=>{"use strict";e.d(A,{F:()=>c});var n=e(29189),a=e(90382),s=e(43173),l=e(83793),r=e(73427);function c(i){const o=r.TP.user.orgRole===a.X.None,h=!s.$.featureToggles.provisioning||o,f=(0,l.F9)(i||h?n.hT:void 0);return i||(i=f.data),i?.items?.some(g=>g.target==="instance")}},27359:(ne,A,e)=>{"use strict";e.d(A,{I:()=>l,f:()=>s});var n=e(95004),a=e(41119);class s{constructor(o,h){return this.fields=[],this.length=0,l(o,h)}}function l(i,o){const h={fields:[],length:i.length};if(!i?.length)return h;if(o){if(!c(i))throw new Error("source is not an array of objects");for(const g of o)h.fields.push(r(g,i.map(u=>u&&u[g])));return h}if(i.find(g=>g)===null)return h;if(c(i)){const g=i.find(u=>u);h.fields=Object.keys(g||{}).map(u=>r(u,i.map(E=>E&&E[u])))}else h.fields.push(r(n.Bc,i));return h}function r(i,o){const h={name:i,config:{},values:o,type:n.PU.other};return h.type=(0,a.dF)(h)??n.PU.other,h}function c(i){const o=i.find(h=>h);return i.length>0&&typeof o=="object"}},27489:(ne,A,e)=>{"use strict";e.d(A,{G$:()=>l,Jy:()=>r,Xp:()=>i,rR:()=>c});var n=e(43173),a=e(36490),s=e(78646);const l=o=>{(0,s.x$)().addEvent({type:s.on.MetaAnalytics,payload:o})},r=()=>{const o=a.Ny.getLocation(),h=`${n.$.appSubUrl??""}${o.pathname}${o.search}${o.hash}`;(0,s.x$)().addEvent({type:s.on.Pageview,payload:{page:h}})},c=(o,h)=>{n.$.reportingStaticContext&&n.$.reportingStaticContext instanceof Object&&(h={...h,...n.$.reportingStaticContext}),(0,s.x$)().addEvent({type:s.on.Interaction,payload:{interactionName:o,properties:h}})},i=(o,h,f)=>{(0,s.x$)().addEvent({type:s.on.ExperimentView,payload:{experimentId:o,experimentGroup:h,experimentVariant:f}})}},27594:(ne,A,e)=>{"use strict";e.d(A,{j:()=>x});var n=e(74848),a=e(22803),s=e(2543),l=e(96540),r=e(32885),c=e(28105),i=e(63142),o=e(30703),h=e(34213),f=e(45967),g=e(92745),u=e(76319);const E=(0,a.css)({display:"flex",alignItems:"center",height:"100%"});function v({row:P,__rowID:T}){return(0,n.jsx)("div",{className:E,children:(0,n.jsx)(u.K,{tooltip:(0,g.t)("grafana-ui.interactive-table.expand-row-tooltip","Toggle row expanded"),"aria-controls":T,name:P.isExpanded?"angle-down":"angle-right","aria-expanded":P.isExpanded,...P.getToggleRowExpandedProps(),size:"lg"})})}function p({isAllRowsExpanded:P,toggleAllRowsExpanded:T}){return(0,n.jsx)("div",{className:E,children:(0,n.jsx)(u.K,{"aria-label":P?(0,g.t)("grafana-ui.interactive-table.aria-label-collapse-all","Collapse all rows"):(0,g.t)("grafana-ui.interactive-table.aria-label-expand-all","Expand all rows"),name:P?"table-collapse-all":"table-expand-all",onClick:()=>T(),size:"lg",tooltip:P?(0,g.t)("grafana-ui.interactive-table.tooltip-collapse-all","Collapse all rows"):(0,g.t)("grafana-ui.interactive-table.tooltip-expand-all","Expand all rows"),variant:"secondary"})})}const m="__expander";function y(P,T=!1){return[{id:m,Cell:v,...T&&{Header:p},disableSortBy:!0,width:0},...P.map(O=>({id:O.id,accessor:O.id,Header:O.header||(()=>null),sortType:O.sortType||"alphanumeric",disableSortBy:!O.sortType,width:O.disableGrow?0:void 0,visible:O.visible,...O.cell&&{Cell:O.cell}}))]}const d=P=>{const T=P.colors.emphasize(P.colors.background.primary,.03);return{container:(0,a.css)({display:"flex",gap:P.spacing(2),flexDirection:"column",width:"100%",overflowX:"auto"}),cell:(0,a.css)({padding:P.spacing(1),minWidth:P.spacing(3)}),table:(0,a.css)({borderRadius:P.shape.radius.default,width:"100%"}),disableGrow:(0,a.css)({width:0}),header:(0,a.css)({borderBottom:`1px solid ${P.colors.border.weak}`,minWidth:P.spacing(3),"&, & > button":{position:"relative",whiteSpace:"nowrap",padding:P.spacing(1)},"& > button":{"&:after":{content:'"\\00a0"'},width:"100%",height:"100%",background:"none",border:"none",paddingRight:P.spacing(2.5),textAlign:"left",fontWeight:P.typography.fontWeightMedium}}),row:(0,a.css)({label:"row",borderBottom:`1px solid ${P.colors.border.weak}`,"&:hover":{backgroundColor:T},"&:last-child":{borderBottom:0}}),expandedRow:(0,a.css)({label:"expanded-row-content",borderBottom:"none"}),expandedContentCell:(0,a.css)({borderBottom:`1px solid ${P.colors.border.weak}`,position:"relative",padding:P.spacing(2,2,2,5),"&:before":{content:'""',position:"absolute",width:"1px",top:0,left:"16px",bottom:P.spacing(2),background:P.colors.border.medium}}),expandedContentRow:(0,a.css)({label:"expanded-row-content"}),sortableHeader:(0,a.css)({"&&":{padding:0}})}};function x({className:P,columns:T,data:O,getRowId:S,headerTooltips:B,pageSize:K=0,renderExpandedRow:U,showExpandAll:F=!1,fetchData:I,initialSortBy:V=[]}){const M=(0,i.of)(d),L=(0,l.useMemo)(()=>y(T,F),[T,F]),N=b(),W=(0,l.useCallback)(j=>`${N}-${j.id}`.replace(/\s/g,""),[N]),R=[r.useSortBy,r.useExpanded],G=O.length>K,w=K>0;w&&R.push(r.usePagination);const _=(0,r.useTable)({columns:L,data:O,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,manualSortBy:!!I,getRowId:S,initialState:{hiddenColumns:[!U&&m,...L.filter(j=>!(!j.visible||j.visible(O))).map(j=>j.id).filter(c.zz)].filter(c.zz),sortBy:V}},...R),{getTableProps:Q,getTableBodyProps:ae,headerGroups:q,prepareRow:k}=_,{sortBy:ee}=_.state;return(0,l.useEffect)(()=>{I&&I({sortBy:ee})},[ee,I]),(0,l.useEffect)(()=>{w&&_.setPageSize(K)},[w,K,_.setPageSize,_]),(0,n.jsxs)("div",{className:M.container,children:[(0,n.jsxs)("table",{...Q(),className:(0,a.cx)(M.table,P),children:[(0,n.jsx)("thead",{children:q.map(j=>{const{key:J,...Z}=j.getHeaderGroupProps();return(0,n.jsx)("tr",{...Z,children:j.headers.map(te=>{const{key:se,...ie}=te.getHeaderProps(),ce=B?.[te.id];return(0,n.jsx)("th",{className:(0,a.cx)(M.header,{[M.disableGrow]:te.width===0,[M.sortableHeader]:te.canSort}),...ie,...te.isSorted&&{"aria-sort":te.isSortedDesc?"descending":"ascending"},children:(0,n.jsx)(C,{column:te,headerTooltip:ce})},se)})},J)})}),(0,n.jsx)("tbody",{...ae(),children:(w?_.page:_.rows).map(j=>{k(j);const{key:J,...Z}=j.getRowProps(),te=W(j),se=j.isExpanded;return(0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)("tr",{...Z,className:(0,a.cx)(M.row,se&&M.expandedRow),children:j.cells.map(ie=>{const{key:ce,...re}=ie.getCellProps();return(0,n.jsx)("td",{className:M.cell,...re,children:ie.render("Cell",{__rowID:te})},ce)})}),se&&U&&(0,n.jsx)("tr",{...Z,id:te,className:M.expandedContentRow,children:(0,n.jsx)("td",{className:M.expandedContentCell,colSpan:j.cells.length,children:U(j.original)})})]},J)})})]}),w&&G&&(0,n.jsx)("span",{children:(0,n.jsx)(h.d,{currentPage:_.state.pageIndex+1,numberOfPages:_.pageOptions.length,onNavigate:j=>_.gotoPage(j-1)})})]})}const b=()=>(0,l.useMemo)(()=>(0,s.uniqueId)("InteractiveTable"),[]),D=P=>({sortIcon:(0,a.css)({position:"absolute",top:P.spacing(1)}),headerTooltipIcon:(0,a.css)({marginLeft:P.spacing(.5)})});function C({column:{canSort:P,render:T,isSorted:O,isSortedDesc:S,getSortByToggleProps:B},headerTooltip:K}){const U=(0,i.of)(D),{onClick:F}=B(),I=(0,n.jsxs)(n.Fragment,{children:[T("Header"),K&&(0,n.jsx)(f.m,{theme:"info-alt",content:K.content,placement:"top-end",children:(0,n.jsx)(o.I,{className:U.headerTooltipIcon,name:K.iconName||"info-circle","data-testid":"header-tooltip-icon"})}),O&&(0,n.jsx)("span",{"aria-hidden":"true",className:U.sortIcon,children:(0,n.jsx)(o.I,{name:S?"angle-down":"angle-up"})})]});return P?(0,n.jsx)("button",{type:"button",onClick:F,children:I}):I}},27629:(ne,A,e)=>{"use strict";e.d(A,{$:()=>n});function n(a,s=!1){return window.grafanaBootData?.settings.featureToggles[a]??s}},27690:(ne,A,e)=>{"use strict";e.d(A,{i:()=>i});var n=e(74848),a=e(96540),s=e(22787);const l=({nodes:o,edges:h,direction:f,width:g,height:u})=>{const E=(0,a.useRef)(null),v=(0,a.useRef)(null);return(0,a.useEffect)(()=>{(async()=>{const m=await Promise.all([e.e(9020),e.e(502)]).then(e.bind(e,33450)),y=await e.e(9020).then(e.bind(e,22172)),d={nodes:r(y,o),edges:c(y,h)},x={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:f??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};v.current&&(E.current=new m.Network(v.current,d,x))})()},[f,h,o]),(0,n.jsx)("div",{children:(0,n.jsx)("div",{ref:v,style:{width:g??"100%",height:u??"60vh"}})})};function r(o,h){const f=h.map(g=>({...g,shape:"box"}));return new o.DataSet(f)}function c(o,h){const f=h.map(g=>({...g,arrows:"to",dashes:!0}));return new o.DataSet(f)}function i({edges:o,nodes:h,show:f,title:g,children:u}){const[E,v]=(0,a.useState)(f),p=(0,a.useCallback)(()=>v(!0),[v]),m=(0,a.useCallback)(()=>v(!1),[v]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.a,{isOpen:E,title:g,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:m,onDismiss:m,children:(0,n.jsx)(l,{nodes:h,edges:o})}),u({showModal:p})]})}},27838:(ne,A,e)=>{"use strict";e.d(A,{H:()=>v});var n=e(74848),a=e(92745),s=e(41654),l=e(31286),r=e(66404),c=e(96540),i=e(45967),o=e(30703),h=e(27594);const f=({groups:p})=>{const m=(0,c.useMemo)(()=>p,[p]),y=(0,c.useMemo)(()=>[{id:"groupDN",header:"LDAP Group"},{id:"orgName",header:"Organization",cell:d=>d.value&&d.row.original.orgRole?d.value:""},{id:"orgRole",header:"Role",cell:d=>d.value||(0,n.jsxs)(s.B,{alignItems:"center",wrap:!0,children:[(0,n.jsx)(a.x6,{i18nKey:"admin.ldap-user-groups.no-org-found",children:"No match"}),(0,n.jsx)(i.m,{content:(0,a.t)("admin.ldap-user-groups.columns.content-no-matching-organizations-found","No matching organizations found"),children:(0,n.jsx)(o.I,{name:"info-circle"})})]})}],[]);return(0,n.jsx)(h.j,{headerTooltips:{orgName:{content:"Only the first match for an Organization will be used",iconName:"info-circle"}},columns:y,data:m,getRowId:d=>d.orgId+d.orgRole+d.groupDN})},g=({info:p})=>{const m=(0,c.useMemo)(()=>[{id:"userInfo",header:"User Information",disableGrow:!0},{id:"ldapValue"},{id:"cfgAttrValue",header:"LDAP attribute"}],[]),y=(0,c.useMemo)(()=>[{userInfo:"First name",ldapValue:p.name.ldapValue,cfgAttrValue:p.name.cfgAttrValue},{userInfo:"Surname",ldapValue:p.surname.ldapValue,cfgAttrValue:p.surname.cfgAttrValue},{userInfo:"Username",ldapValue:p.login.ldapValue,cfgAttrValue:p.login.cfgAttrValue},{userInfo:"Email",ldapValue:p.email.ldapValue,cfgAttrValue:p.email.cfgAttrValue}],[p]);return(0,n.jsx)(h.j,{columns:m,data:y,getRowId:d=>d.userInfo})},u=({permissions:p})=>{const m=(0,c.useMemo)(()=>[{id:"permission",header:"Permissions",disableGrow:!0},{id:"value"}],[]),y=(0,c.useMemo)(()=>[{permission:"Grafana admin",value:p.isGrafanaAdmin?(0,n.jsxs)(a.x6,{i18nKey:"admin.ldap-permissions.admin",children:[(0,n.jsx)(o.I,{name:"shield"})," Yes"]}):"No"},{permission:"Status",value:p.isDisabled?(0,n.jsxs)(a.x6,{i18nKey:"admin.ldap-permissions.inactive",children:[(0,n.jsx)(o.I,{name:"times"})," Inactive"]}):(0,n.jsxs)(a.x6,{i18nKey:"admin.ldap-permissions.active",children:[(0,n.jsx)(o.I,{name:"check"})," Active"]})}],[p]);return(0,n.jsx)(h.j,{data:y,columns:m,getRowId:d=>d.permission})},E=({teams:p})=>{const m=(0,c.useMemo)(()=>[{id:"groupDN",header:"LDAP Group"},{id:"orgName",header:"Organization",cell:({row:{original:{orgName:y}}})=>(0,n.jsx)(n.Fragment,{children:y||"No matching teams found"})},{id:"teamName",header:"Team",cell:({row:{original:{teamName:y,orgName:d}}})=>y&&d?y:""}],[]);return(0,n.jsx)(h.j,{data:p,columns:m,getRowId:y=>y.teamName})},v=({ldapUser:p})=>(0,n.jsxs)(s.B,{direction:"column",gap:4,children:[(0,n.jsx)(g,{info:p.info}),(0,n.jsx)(u,{permissions:p.permissions}),p.roles&&p.roles.length>0&&(0,n.jsx)(f,{groups:p.roles}),p.teams&&p.teams.length>0?(0,n.jsx)(E,{teams:p.teams}):(0,n.jsx)(l.a,{children:(0,n.jsx)(r.E,{children:(0,n.jsx)(a.x6,{i18nKey:"admin.ldap-user-info.no-team",children:"No teams found via LDAP"})})})]})},27963:(ne,A,e)=>{"use strict";e.d(A,{Il:()=>l,YE:()=>s,iQ:()=>c,ni:()=>r});var n=e(96540),a=e(36490);const s=(0,n.createContext)(void 0);function l(){const i=(0,n.useContext)(s);if(!i)throw new Error("No GrafanaContext found");return i}function r(){const{chrome:i}=l();return(0,n.useCallback)((o,h)=>{const{pathname:f,search:g}=a.Ny.getLocation();i.setReturnToPrevious({title:o,href:h??f+g})},[i])}function c(){const{chrome:i}=l();return[i.useState().megaMenuOpen,i.setMegaMenuOpen]}},28105:(ne,A,e)=>{"use strict";e.d(A,{Gu:()=>n,Gv:()=>c,Nx:()=>a,UW:()=>s,zz:()=>l});var n=(i=>(i.NotStarted="NotStarted",i.Loading="Loading",i.Streaming="Streaming",i.Done="Done",i.Error="Error",i))(n||{});const a=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var s=(i=>(i.Null="null",i.Ignore="connected",i.AsZero="null as zero",i))(s||{});const l=i=>!!i;function r(i){return i}function c(i){return typeof i=="object"&&i!==null?!0:!1}},28141:(ne,A,e)=>{"use strict";e.d(A,{k:()=>h,v:()=>i});var n=e(74848),a=e(96540),s=e(92745),l=e(8207),r=e(45861),c=e(54384);const i=({resourceName:f,title:g,onClose:u,...E})=>{const v=(0,s.t)("alerting.manage-permissions.title","Manage permissions");return(0,n.jsx)(l._,{onClose:u,title:g||v,subtitle:f,children:(0,n.jsx)(c.x,{...E,canSetPermissions:!0})})},o=({onClick:f})=>(0,n.jsx)(r.$n,{variant:"secondary",onClick:f,icon:"unlock",children:(0,n.jsx)(s.x6,{i18nKey:"alerting.manage-permissions.button",children:"Manage permissions"})}),h=({resource:f,resourceId:g,resourceName:u,title:E,renderButton:v})=>{const[p,m]=(0,a.useState)(!1),y=()=>m(!1),d=()=>m(!0);return(0,n.jsxs)(n.Fragment,{children:[v?v({onClick:d}):(0,n.jsx)(o,{onClick:d}),p&&(0,n.jsx)(i,{resource:f,resourceId:g,resourceName:u,title:E,onClose:y})]})}},28337:(ne,A,e)=>{"use strict";e.d(A,{AZ:()=>g,OG:()=>i,TX:()=>o,ZV:()=>f,ov:()=>h});var n=e(74848),a=e(96540);const s=(0,a.createContext)(void 0),l=(0,a.createContext)(void 0),r=(0,a.createContext)(void 0),c=(0,a.createContext)(void 0);function i(){const u=(0,a.useContext)(s);if(!u)throw new Error("No `AddedLinksRegistryContext` found.");return u}function o(){const u=(0,a.useContext)(l);if(!u)throw new Error("No `AddedComponentsRegistryContext` found.");return u}function h(){const u=(0,a.useContext)(r);if(!u)throw new Error("No `AddedFunctionsRegistry` found.");return u}function f(){const u=(0,a.useContext)(c);if(!u)throw new Error("No `ExposedComponentsRegistryContext` found.");return u}const g=({registries:u,children:E})=>(0,n.jsx)(s.Provider,{value:u.addedLinksRegistry,children:(0,n.jsx)(l.Provider,{value:u.addedComponentsRegistry,children:(0,n.jsx)(r.Provider,{value:u.addedFunctionsRegistry,children:(0,n.jsx)(c.Provider,{value:u.exposedComponentsRegistry,children:E})})})})},28390:(ne,A,e)=>{"use strict";e.r(A),e.d(A,{default:()=>d,defaultPageNav:()=>m});var n=e(74848),a=e(96540),s=e(54148),l=e(92745),r=e(68143),c=e(34999),i=e(1506),o=e(36826),h=e(54552),f=e(22973),g=e(44109),u=e(77256),E=e(94646),v=e(88547);const p=()=>{const x=(0,s.g)(),b=(0,E.uE)(x),[D]=(0,f.P5)(),P=D===f.gQ.Instances?void 0:0,T=(0,a.useMemo)(()=>{if(!b)throw new Error("Rule ID is required");return(0,E.qg)(b,!0)},[b]),{loading:O,error:S,result:B}=(0,g.ZU)({ruleIdentifier:T,limitAlerts:P});return S?(0,n.jsx)(o.d,{pageNav:m,navId:"alert-list",children:(0,n.jsx)(y,{error:S})}):O?(0,n.jsx)(o.d,{pageNav:m,navId:"alert-list",isLoading:!0}):B?(0,n.jsx)(h.K,{identifier:T,rule:B,children:(0,n.jsx)(f.Ay,{})}):!B&&!O?(0,n.jsx)(o.d,{pageNav:m,navId:"alert-list",children:(0,n.jsx)(i.L,{entity:"Rule"})}):null},m={id:"alert-rule-view",text:""};function y({error:x}){return(0,r.NF)(x)&&x.status===404?(0,n.jsx)(i.L,{entity:"Rule"}):(0,n.jsx)(c.F,{title:(0,l.t)("alerting.rule-viewer.error-loading","Something went wrong loading the rule"),children:(0,u.JZ)(x)})}const d=(0,v.S)(p)},28405:(ne,A,e)=>{"use strict";e.d(A,{h:()=>l});var n=e(74848),a=e(3986);const s=({children:r,plugin:c,loadingComponent:i,notInstalledFallback:o})=>{const{loading:h,installed:f}=usePluginBridge(c);return h?i??null:f?jsx(Fragment,{children:r}):o??null};function l(r,c,i){const o=new URLSearchParams(i).toString();return`/a/${r}${c}`+(o?"?"+o:"")}},28473:(ne,A,e)=>{"use strict";e.d(A,{i:()=>n});function n(a){const l=a.lastIndexOf("."),r=a.substring(l),c=a.substring(0,l);return c.length<16?a:`${c.substring(0,16)}...${r}`}},28533:(ne,A,e)=>{"use strict";e.d(A,{n:()=>a});var n=e(74848);const a=({cell:s,tableStyles:l,onCellFilterAdded:r,timeRange:c,userProps:i,frame:o,rowStyled:h,rowExpanded:f,textWrapped:g,height:u,getActions:E,replaceVariables:v,setInspectCell:p})=>{const m=s.getCellProps(),y=s.column.field;if(!y?.display)return null;if(m.style){m.style.wordBreak="break-word",m.style.minWidth=m.style.width;const b=s.column.justifyContent;b==="flex-end"&&!y.config.unit?(m.style.textAlign="right",m.style.direction="rtl",m.style.unicodeBidi="plaintext"):m.style.justifyContent=b}let d=(typeof s.column.width=="number"?s.column.width:24)-l.cellPadding*2;const x=E?E(o,y,s.row.index,v):[];return(0,n.jsx)(n.Fragment,{children:s.render("Cell",{field:y,tableStyles:l,onCellFilterAdded:r,cellProps:m,innerWidth:d,timeRange:c,userProps:i,frame:o,rowStyled:h,rowExpanded:f,textWrapped:g,height:u,actions:x,setInspectCell:p})})}},28807:(ne,A,e)=>{"use strict";e.d(A,{E:()=>r});var n=e(55386),a=e(95004),s=e(739),l=e(59427);function r(i,o){const h=o.field?(0,l.UI)(i,o.field):i?.fields.find(f=>f.type===a.PU.string);return c(h,o)}function c(i,o){let h=o.fixed;const f=o.mode??s.RU.Fixed;if(f===s.RU.Fixed)return{isAssumed:!h,fixed:h,value:()=>h,get:u=>h};if(f===s.RU.Template){const u=E=>`TEMPLATE[${o.fixed} // ${E}]`;return i?{field:i,get:E=>u(i.values[E]),value:()=>u((0,l.sB)(i))}:(h=u(""),{isAssumed:!0,fixed:h,value:()=>h,get:E=>h})}if(!i)return{isAssumed:!0,fixed:h,value:()=>h,get:u=>h};let g=u=>(0,n.cN)(i.display(u));return{field:i,get:u=>g(i.values[u]),value:()=>g((0,l.sB)(i))}}},28882:(ne,A,e)=>{"use strict";e.d(A,{f:()=>n});var n=(a=>(a[a.Transformations=0]="Transformations",a[a.FieldConfig=1]="FieldConfig",a[a.FieldConfigOverrides=2]="FieldConfigOverrides",a))(n||{})},28998:(ne,A,e)=>{"use strict";e.d(A,{tR:()=>x,xq:()=>p});var n=e(8134),a=e(32899),s=e(94644),l=e(28105),r=e(68143),c=e(78282),i=e(2863),o=e(36580),h=e(55315),f=e(45229),g=e(65642),u=e(29328),E=e(4651),v=e(22914);class p{constructor(D=(0,i.w)()){this.templateSrv=D,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.runtimeDataSources={},this.defaultName=""}init(D,C){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=D,this.defaultName=C;for(const P of Object.values(D))P.uid||(P.uid=P.name),this.settingsMapByUid[P.uid]=P,this.settingsMapById[P.id]=P;for(const P of Object.values(this.runtimeDataSources))this.datasources[P.uid]=P,this.settingsMapByUid[P.uid]=P.instanceSettings;this.datasources[o.dR.type]=u.Ex,this.datasources[E.Uj]=u.Ex,this.settingsMapByUid[o.dR.uid]=u.$i,this.settingsMapByUid[E.Uj]=u.$i}registerRuntimeDataSource(D){if(this.runtimeDataSources[D.dataSource.uid])throw new Error(`A runtime data source with uid ${D.dataSource.uid} has already been registered`);if(this.settingsMapByUid[D.dataSource.uid])throw new Error(`A data source with uid ${D.dataSource.uid} has already been registered`);this.runtimeDataSources[D.dataSource.uid]=D.dataSource,this.datasources[D.dataSource.uid]=D.dataSource,this.settingsMapByUid[D.dataSource.uid]=D.dataSource.instanceSettings}getDataSourceSettingsByUid(D){return this.settingsMapByUid[D]}getInstanceSettings(D,C){let P=m(D);if((0,o.s9)(P))return u.$i;if(P==="default"||P==null){if(d(D)&&D.type){const T=this.findDatasourceByType(D.type);if(T)return T}return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName]}if(P[0]==="$"){const T=this.templateSrv.replace(P,C,y);let O;return T==="default"?O=this.settingsMapByName[this.defaultName]:O=this.settingsMapByUid[T]??this.settingsMapByName[T],O?{...O,isDefault:!1,name:P,uid:P,rawRef:{type:O.type,uid:O.uid}}:void 0}return this.settingsMapByUid[P]??this.settingsMapByName[P]??this.settingsMapById[P]}get(D,C){let P=m(D);if(!P){if(d(D)&&D.type){const O=this.findDatasourceByType(D.type);return O?this.get(O.uid):Promise.reject("no datasource of type")}return this.get(this.defaultName)}if((0,o.s9)(D))return Promise.resolve(this.datasources[E.Uj]);const T=this.settingsMapByName[P];return T&&(P=T.uid),this.datasources[P]?Promise.resolve(this.datasources[P]):(P=this.templateSrv.replace(P,C,y),P==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[P]?Promise.resolve(this.datasources[P]):this.loadDatasource(P))}findDatasourceByType(D){const C=this.getList({type:D});if(C?.length)return C.find(P=>P.isDefault)??C[0]}async loadDatasource(D){if(this.datasources[D])return Promise.resolve(this.datasources[D]);const C=this.getInstanceSettings(D);if(!C)return Promise.reject({message:`Datasource ${D} was not found`});try{const P=await(0,v.c)(C.meta);if(this.datasources[D])return this.datasources[D];const T=new P.DataSourceClass(C);if(T.components=P.components,T.userStorage||(T.userStorage=new h.X(C.type)),!(T instanceof s.mA)){const O=T;O.name=C.name,O.id=C.id,O.type=C.type,O.meta=C.meta,O.uid=C.uid,O.getRef=s.mA.prototype.getRef}return this.datasources[D]=T,this.datasources[T.uid]=T,T}catch(P){return P instanceof Error&&f.A.emit(a.r1.alertError,[C.name+" plugin failed",P.toString()]),Promise.reject({message:`Datasource: ${D} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(D={}){const C=Object.values(this.settingsMapByName).filter(T=>{if(T.meta.id==="grafana"||T.meta.id==="mixed"||T.meta.id==="dashboard"||D.metrics&&!T.meta.metrics||D.tracing&&!T.meta.tracing||D.logs&&T.meta.category!=="logging"&&!T.meta.logs||D.annotations&&!T.meta.annotations||D.alerting&&!T.meta.alerting||D.pluginId&&!(0,n._)(D.pluginId,T.meta)||D.filter&&!D.filter(T))return!1;if(D.type){if(Array.isArray(D.type)){if(!D.type.includes(T.type))return!1}else if(!(T.type===D.type||T.meta.aliasIDs?.includes(D.type)))return!1}return!(!D.all&&T.meta.metrics!==!0&&T.meta.annotations!==!0&&T.meta.tracing!==!0&&T.meta.logs!==!0&&T.meta.alerting!==!0)});if(D.variables)for(const T of this.templateSrv.getVariables()){if(T.type!=="datasource")continue;let O=T.current.value==="default"?this.defaultName:T.current.value;Array.isArray(O)&&(O=O[0]);const S=!Array.isArray(O)&&(this.settingsMapByName[O]||this.settingsMapByUid[O]);if(S){const B=`\${${T.name}}`;C.push({...S,isDefault:!1,name:B,uid:B})}}const P=C.sort((T,O)=>T.name.toLowerCase()>O.name.toLowerCase()?1:T.name.toLowerCase()<O.name.toLowerCase()?-1:0);if(!D.pluginId&&!D.alerting){if(D.mixed){const T=this.getInstanceSettings("-- Mixed --");T&&C.push(T)}if(D.dashboard){const T=this.getInstanceSettings("-- Dashboard --");T&&C.push(T)}if(!D.tracing){const T=this.getInstanceSettings("-- Grafana --");T&&D.filter?.(T)!==!1&&C.push(T)}}return P}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(D=>({name:D.name,value:D.name,meta:D.meta}))}getMetricSources(D){return this.getList({metrics:!0,variables:!D?.skipVariables}).map(C=>({name:C.name,value:C.name,meta:C.meta}))}async reload(){const D=await(0,r.AI)().get("/api/frontend/settings");g.Ay.datasources=D.datasources,g.Ay.defaultDatasource=D.defaultDatasource,this.init(D.datasources,D.defaultDatasource)}}function m(b){return(0,o.s9)(b)?o.dR.uid:typeof b=="string"?b:b?.uid}function y(b){return Array.isArray(b)?b[0]:b}const d=b=>!!(b&&(0,l.Gv)(b)&&"type"in b),x=()=>(0,c.l)()},29043:(ne,A,e)=>{"use strict";e.d(A,{A:()=>a});var n=e(78012);const a=n.M},29090:(ne,A,e)=>{"use strict";e.d(A,{j:()=>nn});var n=e(57002),a=e(92745),s=e(43173);const ee={"core:plugin/graphite":async()=>await e.e(6134).then(e.bind(e,28947)),"core:plugin/cloudwatch":async()=>await Promise.all([e.e(5074),e.e(9570),e.e(3766)]).then(e.bind(e,79570)),"core:plugin/dashboard":async()=>await e.e(9473).then(e.bind(e,39473)),"core:plugin/elasticsearch":async()=>await Promise.all([e.e(5074),e.e(8393),e.e(6260),e.e(1717)]).then(e.bind(e,96260)),"core:plugin/opentsdb":async()=>await e.e(747).then(e.bind(e,90400)),"core:plugin/grafana":async()=>await e.e(3648).then(e.bind(e,51309)),"core:plugin/influxdb":async()=>await e.e(9404).then(e.bind(e,21965)),"core:plugin/mixed":async()=>await e.e(2513).then(e.bind(e,95637)),"core:plugin/prometheus":async()=>await Promise.all([e.e(5074),e.e(8393),e.e(9546)]).then(e.bind(e,68935)),"core:plugin/alertmanager":async()=>await Promise.all([e.e(5074),e.e(4737)]).then(e.bind(e,30876)),"core:plugin/text":async()=>await e.e(404).then(e.bind(e,16373)),"core:plugin/timeseries":async()=>await Promise.all([e.e(9348),e.e(5428),e.e(563)]).then(e.bind(e,55569)),"core:plugin/trend":async()=>await Promise.all([e.e(5428),e.e(2666)]).then(e.bind(e,96827)),"core:plugin/state-timeline":async()=>await Promise.all([e.e(8706),e.e(9348),e.e(6199)]).then(e.bind(e,44372)),"core:plugin/status-history":async()=>await Promise.all([e.e(8706),e.e(9348),e.e(8259)]).then(e.bind(e,24181)),"core:plugin/candlestick":async()=>await Promise.all([e.e(9348),e.e(5428),e.e(3090)]).then(e.bind(e,80959)),"core:plugin/xychart":async()=>await Promise.all([e.e(348),e.e(5594)]).then(e.bind(e,64406)),"core:plugin/geomap":async()=>await Promise.all([e.e(3326),e.e(8706),e.e(3474),e.e(6104),e.e(2739),e.e(190)]).then(e.bind(e,12739)),"core:plugin/canvas":async()=>await Promise.all([e.e(6104),e.e(7523)]).then(e.bind(e,75016)),"core:plugin/dashlist":async()=>await e.e(8995).then(e.bind(e,61369)),"core:plugin/alertlist":async()=>await e.e(3375).then(e.bind(e,12915)),"core:plugin/annolist":async()=>await e.e(4979).then(e.bind(e,80537)),"core:plugin/heatmap":async()=>await Promise.all([e.e(3326),e.e(407),e.e(5995),e.e(9348),e.e(348),e.e(5857)]).then(e.bind(e,17933)),"core:plugin/table":async()=>await Promise.all([e.e(1142),e.e(3525)]).then(e.bind(e,69194)),"core:plugin/news":async()=>await e.e(4940).then(e.bind(e,71786)),"core:plugin/live":async()=>await Promise.all([e.e(1142),e.e(5413)]).then(e.bind(e,8149)),"core:plugin/stat":async()=>await Promise.resolve().then(e.bind(e,75663)),"core:plugin/datagrid":async()=>await Promise.all([e.e(2218),e.e(5939)]).then(e.bind(e,42218)),"core:plugin/debug":async()=>await Promise.all([e.e(3326),e.e(2770)]).then(e.bind(e,54952)),"core:plugin/flamegraph":async()=>await Promise.all([e.e(407),e.e(5995),e.e(4814),e.e(5686)]).then(e.bind(e,27281)),"core:plugin/gettingstarted":async()=>await e.e(9142).then(e.bind(e,38627)),"core:plugin/gauge":async()=>await Promise.resolve().then(e.bind(e,71843)),"core:plugin/piechart":async()=>await e.e(6105).then(e.bind(e,96894)),"core:plugin/bargauge":async()=>await e.e(3851).then(e.bind(e,62493)),"core:plugin/barchart":async()=>await Promise.all([e.e(8706),e.e(3124)]).then(e.bind(e,24131)),"core:plugin/logs":async()=>await Promise.all([e.e(407),e.e(5995),e.e(4814),e.e(3686),e.e(3688),e.e(7691),e.e(7884)]).then(e.bind(e,87691)),"core:plugin/traces":async()=>await Promise.all([e.e(407),e.e(5995),e.e(4814),e.e(3686),e.e(4301)]).then(e.bind(e,3627)),"core:plugin/welcome":async()=>await e.e(8463).then(e.bind(e,21369)),"core:plugin/nodeGraph":async()=>await Promise.all([e.e(3474),e.e(9147),e.e(7317)]).then(e.bind(e,39053)),"core:plugin/histogram":async()=>await e.e(323).then(e.bind(e,65672))};var j=e(19203),J=e(6223),Z=e(61844),te=e(44436),se=e(48307),ie=e(44326),ce=e(11594),re=e(52060);function ue(ut){const Ut=new URL(window.location.href),Ot=new URL(ut);return Ut.host===Ot.host}async function X(ut,Ut){let Ot="";if(ue(ut)?(Ot=await(await fetch(ut)).text(),Ot=(0,re.N)({url:ut,source:Ot,transformSourceMapURL:!0,transformAssets:!1})):(0,Z.OD)(ut)&&(Ot=await(await fetch(ut)).text(),Ot=(0,re.N)({url:ut,source:Ot,transformSourceMapURL:!0,transformAssets:!0})),Ot.length===0)throw new Error("Only same domain scripts are allowed in sandboxed plugins");Ot=fe(Ot),Ut.evaluate(Ot)}async function le(ut){if((0,Z.OD)(ut.module)){const Ut=ut.module;let ct=await(await fetch(Ut)).text();if(!he(ct,ut.moduleHash))throw new Error("Invalid SRI for plugin module file");return ct=(0,re.N)({url:Ut,source:ct,transformSourceMapURL:!0,transformAssets:!0}),ct}else{let Ut=(0,Z.Av)(ut.module);const Ot=(0,j.ni)(Ut);let gt=await(await fetch(Ot)).text();if(!he(gt,ut.moduleHash))throw new Error("Invalid SRI for plugin module file");return gt=(0,re.N)({url:Ot,source:gt,transformSourceMapURL:!0,transformAssets:!1}),gt=fe(gt),gt}}async function he(ut,Ut){if(!s.$.featureToggles.pluginsSriChecks||!Ut||Ut.length===0)return!0;const[Ot,ct]=Ut.split("-"),gt=Ot.replace("sha","SHA-"),Wt=new TextEncoder().encode(ut),Ft=await crypto.subtle.digest(gt,Wt),Vt=btoa(String.fromCharCode(...new Uint8Array(Ft)));return`${Ot}-${Vt}`===Ut}function fe(ut){return ut.replace(/window\.location/gi,"window.locationSandbox")}function Ce(ut){ut.evaluate(`${ie.V.toString()};${ie.V.name}()`)}function Ae(ut){for(const Ut of Object.values(s.$.datasources))if(Ut.type===ut)return Ut.meta;for(const Ut of Object.values(s.$.panels))if(Ut.id===ut)return Ut;for(const Ut of Object.values(s.$.apps))if(Ut.id===ut)return{id:ut,type:ce.QE.app,module:Ut.path,moduleHash:Ut.moduleHash};throw new Error(`Could not find plugin ${ut}`)}var _e=e(99418),Xe=e(2543);const De=["iframe"];var Me=e(7077),Te=e(28848),$e=e.n(Te),Re=e(94644),Ke=e(48592),Ve=e(96540),Se=e(25992);function Ye(ut){return!!ut&&typeof ut=="object"&&ut?.hasOwnProperty("plugin")}function Ue(ut){throw new Error(`Unexpected object: ${ut}. This should never happen.`)}const je=(0,Se.DW)("sandbox");function Qe(ut){return ut instanceof Ve.Component}function He(ut,Ut){je.logWarning(ut,Ut)}function Je(ut,Ut){je.logError(ut,Ut)}function de(ut,Ut){je.logInfo(ut,Ut)}function ve(ut){return ut?.constructor?.name==="RegExp"}function me(ut){return ut&&(ve(ut)&&(0,Me.U)(ut)?new RegExp(ut):Array.isArray(ut)?ut.map(me):typeof ut=="object"?Object.keys(ut).reduce((Ut,Ot)=>(Reflect.set(Ut,Ot,me(Reflect.get(ut,Ot))),Ut),{}):ut)}function xe(ut){return ut&&((0,Me.U)(ut)?(0,Xe.cloneDeep)(ut):Array.isArray(ut)?ut.map(xe):typeof ut=="object"?Object.keys(ut).reduce((Ut,Ot)=>(Reflect.set(Ut,Ot,xe(Reflect.get(ut,Ot))),Ut),{}):ut)}const Ee=Symbol.for("@@SANDBOX_LIVE_VALUE");function Pe(ut,Ut){const Ot=Reflect.get(ut,"nodeName");if(Ot==="body"||ut===document.body)return document.body;if(Ot==="head"||ut===document.head||ut===document.documentElement)return ut;if(De.includes(Ot))throw He("<"+Ot+"> is not allowed in sandboxed plugins",{pluginId:Ut,param:Ot}),new Error("<"+Ot+"> is not allowed in sandboxed plugins");if(Ze(ut,Ut)||ut.parentNode===document.body||ut.closest("#reactRoot")===null)return ut;const ct=document.createElement(Ot);return ct.dataset.grafanaPluginSandboxElement="true",ct}function Oe(ut){if(typeof ut=="object"&&ut instanceof Element)try{return ut.nodeName!==void 0}catch{return!1}return!1}function We(ut){const Ut=Reflect.get(ut,"style");Object.hasOwn(Ut,Ee)||Reflect.defineProperty(Ut,Ee,{})}function Fe(ut){ut&&(Array.isArray(ut)?(ut.forEach(Fe),Be(ut)):typeof ut=="object"&&(Object.values(ut).forEach(Fe),Be(ut)))}function Be(ut){if(ut)return Object.hasOwn(ut,Ee)||Reflect.defineProperty(ut,Ee,{}),ut}function Le(ut){ut&&(Object.hasOwn(ut,Ee)||((0,Me.U)(ut)&&!(ut instanceof Function)&&(Qe(ut)||ut instanceof Re.mA||ut instanceof Ke.f5)?Reflect.defineProperty(ut,Ee,{}):ut===$e().languages&&Object.defineProperty(ut,Ee,{})))}function Ge(ut){return Object.hasOwn(ut,Ee)}function Ze(ut,Ut){return!document.contains(ut)||ut.closest(`[data-plugin-sandbox=${Ut}]`)!==null}let qe;function at(){return qe||(qe=document.createElement("div"),qe.setAttribute("id","grafana-plugin-sandbox-body"),qe.setAttribute("data-plugin-sandbox","true"),qe.dataset.pluginSandbox="sandboxed-plugin",qe.style.width="100%",qe.style.height="0%",qe.style.overflow="hidden",qe.style.top="0",qe.style.left="0",document.body.appendChild(qe)),qe}let ht=!1;function Et(){ht||(ht=!0,Pt(),mt())}function mt(){const ut=Worker.prototype.postMessage;Object.defineProperty(Worker.prototype,"postMessage",{value:function(...Ut){return ut.apply(this,xe(Ut))}})}function Pt(){const ut=window.history.replaceState;Object.defineProperty(window.history,"replaceState",{value:function(...Ut){let Ot=Ut;try{Ot=(0,Xe.cloneDeep)(Ut)}catch(ct){He("Error cloning args in window.history.replaceState",{error:String(ct)})}return Reflect.apply(ut,this,Ot)},writable:!0,configurable:!0,enumerable:!1})}const rt=new Map,Kt=Symbol.for("@SANDBOX_LIVE_API_PATCHED");function Gt(){return rt.size===0&&(st(rt),$t(rt),xn(rt),Jn(rt),kn(rt),pn(rt),_n(rt),pt(rt),Rt(rt),Mt(rt),Bt(rt),Yt(rt)),rt}function en(ut,Ut){return He(`Plugin ${Ut.id} tried to set a sandboxed property`,{pluginId:Ut.id,attrOrMethod:String(ut),entity:"window"}),()=>{throw new Error("Plugins are not allowed to set sandboxed properties")}}function st(ut){const Ut=["contentDocument","contentWindow","src","srcdoc","srcObject","srcset"];for(const ct of Ut){const gt=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,ct);if(gt){let Ct=function(Wt,Ft){const Vt=Ft.id;return He(`Plugin ${Vt} tried to access iframe.${ct}`,{pluginId:Vt,attrOrMethod:ct,entity:"iframe"}),()=>{throw new Error("iframe."+ct+" is not allowed in sandboxed plugins")}};var Ot=Ct;gt.value&&ut.set(gt.value,Ct),gt.set&&ut.set(gt.set,Ct),gt.get&&ut.set(gt.get,Ct)}}}function $t(ut){const Ut=Object.getOwnPropertyDescriptor(window,"console");if(Ut?.value){let ct=function(gt,Ct){const Wt=Ct.id;function Ft(...Vt){console.log(`[plugin ${Wt}]`,...Vt)}return{log:Ft,warn:Ft,error:Ft,info:Ft,debug:Ft,table:Ft}};var Ot=ct;ut.set(Ut.value,ct)}Ut?.set&&ut.set(Ut.set,en)}function xn(ut){function Ut(ct,gt){const Ct=gt.id;return He(`Plugin ${Ct} accessed window.alert`,{pluginId:Ct,attrOrMethod:"alert",entity:"window"}),function(...Wt){console.log(`[plugin ${Ct}]`,...Wt)}}const Ot=Object.getOwnPropertyDescriptor(window,"alert");Ot?.value&&ut.set(Ot.value,Ut),Ot?.set&&ut.set(Ot.set,en)}function pn(ut){function Ut(ct,gt){const Ct=gt.id;return function(...Ft){for(let Vt=0;Vt<Ft.length;Vt++){const Ht=Ft[Vt],dn=String(Ht||"").toLowerCase();for(const sn of De)if(dn.includes("<"+sn))throw He(`Plugin ${Ct} tried to set ${sn} in innerHTML`,{pluginId:Ct,attrOrMethod:"innerHTML",param:sn,entity:"HTMLElement"}),new Error("<"+sn+"> is not allowed in sandboxed plugins");dn.match(/onerror|onload|onsuccess|onbeforeunload/)&&(He(`Plugin ${Ct} tried to set forbidden attribute in innerHTML`,{pluginId:Ct,attrOrMethod:"innerHTML",param:Ht,entity:"HTMLElement"}),Ft[Vt]=_e.A.sanitize(Ft[Vt]))}if((0,Xe.isFunction)(ct))return ct.apply(this,Ft)}}const Ot=[Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML"),Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentHTML"),Object.getOwnPropertyDescriptor(DOMParser.prototype,"parseFromString")];for(const ct of Ot)ct?.set&&ut.set(ct.set,Ut),ct?.value&&ut.set(ct.value,Ut)}function _n(ut){function Ut(ct,gt){const Ct=gt.id;return function(Ft,Vt){if(Ft&&De.includes(Ft))return He(`Plugin ${Ct} tried to create ${Ft}`,{pluginId:Ct,attrOrMethod:"createElement",param:Ft,entity:"document"}),document.createDocumentFragment();if((0,Xe.isFunction)(ct))return ct.apply(this,[Ft,Vt])}}const Ot=Object.getOwnPropertyDescriptor(Document.prototype,"createElement");Ot?.value&&ut.set(Ot.value,Ut)}function kn(ut){function Ut(Ct,Wt){const Ft=Wt.id;return function(Ht,dn){const sn=Ht?.nodeName?.toLowerCase()||"";if(Ht&&De.includes(sn))return He(`Plugin ${Ft} tried to insert ${sn}`,{pluginId:Ft,attrOrMethod:"insertChild",param:sn,entity:"HTMLElement"}),document.createDocumentFragment();if((0,Xe.isFunction)(Ct))return Ct.call(this,Ht,dn)}}function Ot(Ct,Wt){const Ft=Wt.id;return function(Ht,dn){const sn=dn?.nodeName?.toLowerCase()||"";if(dn&&De.includes(sn))return He(`Plugin ${Ft} tried to insert ${sn}`,{pluginId:Ft,attrOrMethod:"insertAdjacentElement",param:sn,entity:"HTMLElement"}),document.createDocumentFragment();if((0,Xe.isFunction)(Ct))return Ct.call(this,Ht,dn)}}const ct=[Object.getOwnPropertyDescriptor(Node.prototype,"insertBefore"),Object.getOwnPropertyDescriptor(Node.prototype,"replaceChild")];for(const Ct of ct)Ct?.value&&ut.set(Ct.set,Ut);const gt=Object.getOwnPropertyDescriptor(Element.prototype,"insertAdjacentElement");gt?.value&&ut.set(gt.set,Ot)}function Jn(ut){function Ut(Ct,Wt){const Ft=Wt.id;return function(...Ht){let dn=Ht;const sn=Ht?.filter(Rn=>!De.includes(Rn.nodeName.toLowerCase()));dn=sn,dn.length!==sn.length&&He(`Plugin ${Ft} tried to append fobiddenElements`,{pluginId:Ft,attrOrMethod:"append",param:Ht?.filter(Rn=>De.includes(Rn.nodeName.toLowerCase()))?.join(",")||"",entity:"HTMLElement"}),(0,Xe.isFunction)(Ct)&&Ct.apply(this,dn)}}function Ot(Ct,Wt,Ft){const Vt=Wt.id;return function(dn){const sn=dn?.nodeName?.toLowerCase()||"";if(dn&&De.includes(sn))return He(`Plugin ${Vt} tried to append ${sn}`,{pluginId:Vt,attrOrMethod:"appendChild",param:sn,entity:"HTMLElement"}),document.createDocumentFragment();if(Ft&&dn&&sn==="script"&&dn instanceof HTMLScriptElement){X(dn.src,Ft).then(()=>{dn.onload?.call(dn,new Event("load"))}).catch(Rn=>{dn.onerror?.call(dn,new ErrorEvent("error",{error:Rn}))});return}if((0,Xe.isFunction)(Ct))return Ct.call(this,dn)}}const ct=[Object.getOwnPropertyDescriptor(Element.prototype,"append"),Object.getOwnPropertyDescriptor(Element.prototype,"prepend"),Object.getOwnPropertyDescriptor(Element.prototype,"after"),Object.getOwnPropertyDescriptor(Element.prototype,"before"),Object.getOwnPropertyDescriptor(Document.prototype,"append"),Object.getOwnPropertyDescriptor(Document.prototype,"prepend")];for(const Ct of ct)Ct?.value&&ut.set(Ct.value,Ut);const gt=Object.getOwnPropertyDescriptor(Node.prototype,"appendChild");gt?.value&&ut.set(gt.value,Ot)}function pt(ut){const Ut=Object.getOwnPropertyDescriptor(Worker.prototype,"postMessage");function Ot(ct){return function(...Ct){try{const Wt=(0,Xe.cloneDeep)(Ct);(0,Xe.isFunction)(ct)&&ct.apply(this,Wt)}catch{throw new Error("postMessage arguments are invalid objects")}}}Ut?.value&&ut.set(Ut.value,Ot)}function Rt(ut){const Ut=Object.getOwnPropertyDescriptor(Document.prototype,"defaultView");Ut?.get&&ut.set(Ut.get,()=>()=>window);const Ot=["write"];for(const ct of Ot){const gt=Object.getOwnPropertyDescriptor(Document.prototype,ct);gt?.set&&ut.set(gt.set,en),gt?.value&&ut.set(gt.value,en)}}async function Mt(ut){const Ut=Reflect.get(window,"monaco");if(!Ut||Object.hasOwn(Ut,Kt))return;const Ot=Ut.languages.setMonarchTokensProvider;function ct(){return function(...gt){return gt.length!==2?Ot.apply(Ut,gt):Ot.call(Ut,gt[0],me(gt[1]))}}ut.set(Ut.languages.setMonarchTokensProvider,ct),Reflect.set(Ut,Kt,{})}async function Bt(ut){const Ut=Object.getOwnPropertyDescriptor(window,"postMessage");function Ot(ct){return function(...Ct){try{const Wt=(0,Xe.cloneDeep)(Ct);(0,Xe.isFunction)(ct)&&ct.apply(this,Wt)}catch{throw new Error("postMessage arguments are invalid objects")}}}Ut?.value&&ut.set(Ut.value,Ot)}function Nt(ut){Mt(rt)}function Yt(ut){function Ut(Ot){return(0,Xe.isFunction)(Ot)?function(...ct){const gt=Ot.apply(this,ct);return Fe(gt),gt}:Ot}ut.set(Xe.cloneDeep,Ut)}var Qt=e(72331),En=e(74848);async function vn(ut,Ut){if(!Ye(ut))return ut;const Ot=await Promise.resolve(ut.plugin);if(Reflect.has(Ot,"panel")&&Reflect.set(Ot,"panel",Sn(Reflect.get(Ot,"panel"),Ut)),Reflect.has(Ot,"components")){const ct=Reflect.get(Ot,"components");Object.entries(ct).forEach(([gt,Ct])=>{Reflect.set(ct,gt,Sn(Ct,Ut))}),Reflect.set(Ot,"components",ct)}if(Reflect.has(Ot,"root")&&Reflect.set(Ot,"root",Sn(Reflect.get(Ot,"root"),Ut)),Reflect.has(Ot,"addedComponentConfigs")){const ct=Reflect.get(Ot,"addedComponentConfigs");for(const gt of ct)Reflect.has(gt,"component")&&Reflect.set(gt,"component",Sn(Reflect.get(gt,"component"),Ut));Reflect.set(Ot,"addedComponentConfigs",ct)}if(Reflect.has(Ot,"exposedComponentConfigs")){const ct=Reflect.get(Ot,"exposedComponentConfigs");for(const gt of ct)Reflect.has(gt,"component")&&Reflect.set(gt,"component",Sn(Reflect.get(gt,"component"),Ut));Reflect.set(Ot,"exposedComponentConfigs",ct)}if(Reflect.has(Ot,"configPages")){const ct=Reflect.get(Ot,"configPages")??[];for(const[gt,Ct]of Object.entries(ct))!Ct.body||!(0,Xe.isFunction)(Ct.body)||Reflect.set(ct,gt,{...Ct,body:Sn(Ct.body,Ut)});Reflect.set(Ot,"configPages",ct)}return ut}const Sn=(ut,Ut)=>{const Ot=Ve.memo(ct=>(0,En.jsx)("div",{"data-plugin-sandbox":Ut.id,style:{height:Ut.type===ce.QE.app||Ut.type===ce.QE.panel?"100%":"auto"},children:(0,En.jsx)(ut,{...ct})}));return Ot.displayName=`GrafanaSandbox(${ut.displayName||ut.name||"Component"})`,Ot},mn=new Map,wn={};async function Ln({pluginId:ut}){Et();try{const Ut=Ae(ut);return mn.has(ut)||mn.set(ut,Zn(Ut)),mn.get(ut)}catch(Ut){const Ot=new Error(`Could not import plugin ${ut} inside sandbox: `+Ut);throw Je(Ot,{pluginId:ut,error:String(Ut)}),Ot}}async function Zn(ut){return de("Loading with sandbox",{pluginId:ut.id}),new Promise(async(Ut,Ot)=>{const ct=Gt();let gt;function Ct(Ft){if(Oe(Ft)){const dn=Pe(Ft,ut.id);return We(dn),dn}else Le(Ft);const Vt=ct.get(Ft);if(Vt)return Vt(Ft,ut,gt);const Ht=Nt(Ft);return Ht||Ft}gt=(0,te.A)(window,{distortionCallback:Ct,defaultPolicy:se.G,liveTargetCallback:Ge,endowments:Object.getOwnPropertyDescriptors({locationSandbox:window.location,setImmediate:function(Ft,...Vt){return setTimeout(Ft,0,...Vt)},get monaco(){return Reflect.get(window,"monaco")},get Prism(){return Reflect.get(window,"Prism")},get jQuery(){return Reflect.get(window,"jQuery")},get $(){return Reflect.get(window,"jQuery")},get grafanaBootData(){if(wn[ut.id+"-grafanaBootData"]||(wn[ut.id+"-grafanaBootData"]=!0,de("Plugin using window.grafanaBootData",{sandbox:"true",pluginId:ut.id,guessedPluginName:ut.id,parent:"window",packageName:"window",key:"grafanaBootData"})),s.$.buildInfo.env==="development")throw new Error(`Error in ${ut.id}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`);return console.error(`${ut.id.toUpperCase()}: Plugins should not use window.grafanaBootData. Use "config" from "@grafana/runtime" instead.`),s.$.bootData},async define(Ft,Vt,Ht){let dn,sn;Array.isArray(Ft)?(dn=Ft,sn=Vt):(dn=Vt,sn=Ht);try{const Rn=await da(dn,ut),rn=sn.apply(null,Rn),Yn=await vn(rn,ut);Ut(Yn)}catch(Rn){const rn=new Error(`Could not execute plugin's define ${ut.id}: `+Rn);Je(rn,{pluginId:ut.id,error:String(Rn)}),Ot(rn)}}})}),Ce(gt);let Wt="";try{Wt=await le(ut)}catch(Ft){const Vt=new Error(`Could not load plugin code ${ut.id}: `+Ft);Je(Vt,{pluginId:ut.id,error:String(Ft)}),Ot(Vt)}try{gt.evaluate(Wt)}catch(Ft){const Vt=new Error(`Could not run plugin ${ut.id} inside sandbox: `+Ft);Je(Vt,{pluginId:ut.id,error:String(Ft)}),Ot(Vt)}})}async function da(ut,Ut){const Ot={},ct={id:Ut.id,uri:Ut.module,exports:Ot},gt=[];for(const Ct of ut){let Wt=Qt.s.get(Ct);if(typeof Wt=="function"&&(Wt=await Wt()),Wt?.__useDefault&&(Wt=Wt.default),Ct==="module"&&(Wt=ct),Ct==="exports"&&(Wt=Ot),!Wt){const Ft=new Error(`[sandbox] Could not resolve dependency ${Ct}`);throw Je(Ft,{pluginId:Ut.id,dependency:Ct,error:String(Ft)}),Ft}gt.push(Wt)}return gt}var Pa=e(73427),Xn=e(59253),Oa=e(95027);let ba=wt;function oa(ut){ba=ut}async function Na({pluginId:ut}){return await ya({pluginId:ut})?ba({pluginId:ut}):!1}async function ya({pluginId:ut}){return!s.$.featureToggles.pluginsFrontendSandbox||window.location.search.includes("nosandbox")&&s.$.buildInfo.env==="development"||!Pa.TP.isSignedIn?!1:Dt({pluginId:ut})}async function Dt({pluginId:ut}){try{const Ut=await(0,Oa.x)(ut,{showErrorAlert:!1});return Ut.signatureType!==ce.kv.grafana&&Ut.signature!=="internal"}catch{try{const Ot=await(0,Xn.CB)(ut);return Ot.signatureType!==ce.kv.grafana&&Ot.signature!=="internal"}catch{return!1}}}async function wt({pluginId:ut}){return!!s.$.enableFrontendSandboxForPlugins?.includes(ut)}var Zt=e(37640);async function cn({resolvedLanguage:ut,fallbackLanguage:Ut,pluginId:Ot,translations:ct}){const gt=ct[ut],Ct=ct[Ut],Wt=gt??Ct;if(!Wt){console.warn(`Could not find any translation for plugin ${Ot}`,{resolvedLanguage:ut,fallbackLanguage:Ut});return}try{const Ft=await J.z.import((0,Z.Av)(Wt));if(!Ft.default){console.warn(`Could not find default export for plugin ${Ot}`,{resolvedLanguage:ut,fallbackLanguage:Ut,path:Wt});return}const Vt=gt?ut:Ut;(0,a.eI)(Vt,Ot,Ft.default)}catch(Ft){console.warn(`Could not load translation for plugin ${Ot}`,{resolvedLanguage:ut,fallbackLanguage:Ut,error:Ft,path:Wt})}}async function nn({path:ut,pluginId:Ut,loadingStrategy:Ot,version:ct,moduleHash:gt,translations:Ct}){ct&&(0,j.GD)({path:ut,version:ct,loadingStrategy:Ot}),Ct&&await cn({resolvedLanguage:(0,a.Ph)(),fallbackLanguage:n.Nm,pluginId:Ut,translations:Ct});const Wt=ee[ut];if(Wt)return typeof Wt=="function"?await Wt():Wt;const Ft=(0,Z.Av)(ut);if(s.$.featureToggles.pluginsSriChecks){const Vt=System.resolve(Ft),Ht=System.getImportMap().integrity;gt&&Ht&&!Ht[Vt]&&J.z.addImportMap({integrity:{[Vt]:gt}})}return await Na({pluginId:Ut})?Ln({pluginId:Ut}):J.z.import(Ft).catch(Vt=>{let Ht=new Error("Could not load plugin: "+Vt);throw console.error(Ht),Zt.z4.logError(Ht,{path:ut,pluginId:Ut,pluginVersion:ct??"",expectedHash:gt??"",loadingStrategy:Ot.toString(),sriChecksEnabled:String(!!s.$.featureToggles.pluginsSriChecks),newPluginLoadingEnabled:String(!!s.$.featureToggles.enablePluginImporter)}),Ht})}},29216:(ne,A,e)=>{"use strict";e.d(A,{w:()=>r});var n=e(74848),a=e(92745),s=e(37386),l=e(77824);const r=({selectedTheme:c="current",onChange:i,description:o})=>{const h=[{label:(0,a.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,a.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,a.t)("share-modal.theme-picker.light","Light"),value:"light"}];return(0,n.jsx)(s.D,{label:(0,a.t)("share-modal.theme-picker.field-name","Theme"),description:o,children:(0,n.jsx)(l.z,{options:h,value:c,onChange:i})})}},29246:(ne,A,e)=>{"use strict";e.d(A,{x:()=>a});var n=e(11594);function a(s){return s&&s!==n.Ac.valid&&s!==n.Ac.internal}},29328:(ne,A,e)=>{"use strict";e.d(A,{Ex:()=>W,$i:()=>N});var n=e(65474),a=e(69862),s=e(75505),l=e(81160),r=e(11594),c=e(36580),i=e(2863),o=e(78282),h=e(68143),f=e(38866),g=e(19729),u=e(74848),E=e(22803),v=e(96540),p=e(92745),m=e(63142),y=e(18027),d=e(45861),x=e(76319),b=e(91073),D=e(52900),C=e(18203),P=e(89931),T=e(4652),O=e(87767),S=e(38610),B=e(4651),K=e(82779);const U=15,F=R=>{const G=B.uQ.find(({value:w})=>w===R)?.description;switch(R){case B.Tz.sql:return(0,u.jsx)(p.x6,{i18nKey:"expressions.expression-query-editor.helper-text-sql",children:'Run MySQL-dialect SQL against the tables returned from your data sources. Data source queries (ie "A", "B") are available as tables and referenced by query-name. Fields are available as columns, as returned from the data source.'});default:return G??""}};function I(){const R=(0,v.useRef)({}),G=(0,v.useCallback)(_=>{switch(_){case B.Tz.math:case B.Tz.reduce:case B.Tz.resample:case B.Tz.threshold:case B.Tz.sql:return R.current[_];case B.Tz.classic:return}},[]),w=(0,v.useCallback)((_,Q)=>{switch(_){case B.Tz.math:R.current.math=Q;break;case B.Tz.reduce:case B.Tz.resample:case B.Tz.threshold:R.current.reduce=Q,R.current.resample=Q,R.current.threshold=Q;break;case B.Tz.sql:R.current.sql=Q}},[]);return{getCachedExpression:G,setCachedExpression:w}}function V(R){const{query:G,queries:w,onRunQuery:_,onChange:Q,app:ae}=R,{getCachedExpression:q,setCachedExpression:k}=I(),ee=(0,m.of)(M);(0,v.useEffect)(()=>{k(G.type,G.expression)},[G.expression,G.type,k]);const j=(0,v.useCallback)(te=>{const se=q(te),ie=(0,K.rV)({...G,type:te});Q({...ie,expression:se??ie.expression})},[G,Q,q]),J=()=>{const te=w.filter(se=>G.refId!==se.refId).map(se=>({value:se.refId,label:se.refId}));switch(G.type){case B.Tz.math:return(0,u.jsx)(C.z,{onChange:Q,query:G,labelWidth:U,onRunQuery:_});case B.Tz.reduce:return(0,u.jsx)(P.Z,{refIds:te,onChange:Q,labelWidth:U,query:G,app:ae});case B.Tz.resample:return(0,u.jsx)(T.C,{query:G,labelWidth:U,onChange:Q,refIds:te});case B.Tz.classic:return(0,u.jsx)(b.z,{onChange:Q,query:G,refIds:te});case B.Tz.threshold:return(0,u.jsx)(S.O,{onChange:Q,query:G,labelWidth:U,refIds:te});case B.Tz.sql:return(0,u.jsx)(O.k,{onChange:Q,query:G,refIds:te,queries:w,metadata:R,onRunQuery:_})}},Z=F(G.type);return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:ee.operationRow,children:[(0,u.jsx)(y.I,{label:(0,p.t)("expressions.expression-query-editor.label-operation","Operation"),labelWidth:U,children:(0,u.jsx)(D.m,{handleOnSelect:j,children:(0,u.jsx)(d.$n,{fill:"outline",icon:"angle-down",iconPlacement:"right",variant:"secondary",children:B.uQ.find(({value:te})=>te===G.type)?.label})})}),Z&&(0,u.jsx)(x.K,{className:ee.infoIcon,name:"info-circle",tooltip:Z})]}),J()]})}const M=R=>({operationRow:(0,E.css)({display:"flex",alignItems:"center",gap:R.spacing(1)}),infoIcon:(0,E.css)({marginBottom:R.spacing(.5)})});class L extends c.iy{constructor(G){super(G),this.instanceSettings=G}applyTemplateVariables(G,w){const _=(0,i.w)();return{...G,expression:_.replace(G.expression,w),window:_.replace(G.window,w)}}getCollapsedText(G){return`Expression: ${G.type}`}query(G){let w=G.targets.map(async Q=>{const ae=await(0,o.l)().get(Q.datasource);return ae.interpolateVariablesInQueries?ae?.interpolateVariablesInQueries([Q],G.scopedVars,G.filters)[0]:Q});return(0,n.H)(Promise.all(w)).pipe((0,a.Z)(Q=>super.query({...G,targets:Q})))}newQuery(G){return{refId:"--",datasource:c.dR,type:G?.type??B.Tz.math,...G}}runMetaSQLExprQuery(G,w,_){const Q=G.refId||"meta",ae={window:"",hide:!1,expression:G.rawSql,datasource:c.dR,refId:Q,type:B.Tz.sql};return(0,s.s)((0,h.AI)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:w.from.valueOf().toString(),to:w.to.valueOf().toString(),queries:[..._,ae]},requestId:Q}).pipe((0,l.T)(q=>(0,f.bE)(q,_).data[0]??{fields:[]})))}}const N={id:-100,uid:B.Uj,name:c.dR.name,type:c.dR.type,access:"proxy",meta:{baseUrl:"",module:"",type:r.QE.datasource,name:c.dR.type,id:c.dR.type,info:{author:{name:"Grafana Labs"},logos:{small:g,large:g},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},W=new L(N);W.meta={id:c.dR.type,info:{logos:{small:g,large:g}}},W.components={QueryEditor:V}},29425:(ne,A,e)=>{"use strict";e.d(A,{o:()=>m});var n=e(96540),a=e(45863),s=e(3371),l=e(8285),r=e(25953),c=e(74848),i=e(22803),o=e(63142),h=e(96691),f=e(6607),g=e(1837),u=e(8835);function E({model:y}){const{children:d,isHidden:x}=y.useState(),b=(0,o.of)(v,y.state),{layoutOrchestrator:D,isEditing:C}=(0,l.TN)(y),P=a.jh.getAncestor(y,u.X2),{fillScreen:T}=P.useState(),O=(0,h.MK)();if(x||!D)return null;const S=!(0,s.bn)(y)&&C;return O?d.map(B=>(0,c.jsx)(B.Component,{model:B},B.state.key)):(0,c.jsxs)("div",{className:(0,i.cx)(b.container,T&&b.containerFillScreen,C&&b.containerEditing),ref:y.containerRef,children:[d.map(B=>(0,c.jsx)(B.Component,{model:B},B.state.key)),S&&(0,c.jsx)(f.f,{layoutManager:P})]})}const v=(y,d)=>({container:(0,i.css)({display:"grid",position:"relative",gridTemplateColumns:d.templateColumns,gridTemplateRows:d.templateRows||"unset",gridAutoRows:d.autoRows||"unset",rowGap:y.spacing(d.rowGap??1),columnGap:y.spacing(d.columnGap??1),justifyItems:d.justifyItems||"unset",alignItems:d.alignItems||"unset",justifyContent:d.justifyContent||"unset",[y.breakpoints.down("md")]:d.md?{gridTemplateRows:d.md.templateRows,gridTemplateColumns:d.md.templateColumns,rowGap:d.md.rowGap?y.spacing(d.md.rowGap??1):void 0,columnGap:d.md.columnGap?y.spacing(d.md.rowGap??1):void 0,justifyItems:d.md.justifyItems,alignItems:d.md.alignItems,justifyContent:d.md.justifyContent}:void 0,...g.u}),containerFillScreen:(0,i.css)({flexGrow:1}),containerEditing:(0,i.css)({paddingBottom:y.spacing(5),position:"relative"})});var p=e(39242);class m extends a.Bs{constructor(d){super({rowGap:1,columnGap:1,templateColumns:"repeat(auto-fit, minmax(400px, 1fr))",autoRows:d.autoRows??"320px",children:d.children??[],...d}),this.containerRef=(0,n.createRef)(),this._draggedGridItem=null,this._initialGridItemPosition=null,this._onDragStart=this._onDragStart.bind(this),this._onDragEnd=this._onDragEnd.bind(this),this._onDrag=this._onDrag.bind(this),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=E}_activationHandler(){return()=>{this._resetPanelPositionAndSize(),document.body.removeEventListener("pointermove",this._onDrag),document.body.removeEventListener("pointerup",this._onDragEnd),document.body.classList.remove("dashboard-draggable-transparent-selection")}}isDraggable(){return(0,s.bn)(this)?!1:this.state.isDraggable??!1}getDragClass(){return`grid-drag-handle-${this.state.key}`}getDragClassCancel(){return"grid-drag-cancel"}getDragHooks(){return{onDragStart:this._onDragStart}}_canDrag(d){return!this.isDraggable()||!(d.target instanceof Element)?!1:!!d.target.closest(`.${this.getDragClass()}`)&&!d.target.closest(`.${this.getDragClassCancel()}`)}_onDragStart(d,x){if(!this._canDrag(d))return;if(d.preventDefault(),d.stopPropagation(),!(x.parent instanceof r.X))throw new Error("Dragging wrong item");this._draggedGridItem=x.parent;const{top:b,left:D,width:C,height:P}=this._draggedGridItem.getBoundingBox();this._initialGridItemPosition={pageX:d.pageX,pageY:d.pageY,top:b,left:D},this._updatePanelSize(C,P),this._updatePanelPosition(b,D),this.setState({draggingKey:this._draggedGridItem.state.key}),document.body.addEventListener("pointermove",this._onDrag),document.body.addEventListener("pointerup",this._onDragEnd),document.body.classList.add("dashboard-draggable-transparent-selection"),(0,l.wP)(this)?.startDraggingSync(d,x)}_onDragEnd(){window.getSelection()?.removeAllRanges(),this._draggedGridItem=null,this._initialGridItemPosition=null,this._resetPanelPositionAndSize(),this.setState({draggingKey:void 0}),document.body.removeEventListener("pointermove",this._onDrag),document.body.removeEventListener("pointerup",this._onDragEnd),document.body.classList.remove("dashboard-draggable-transparent-selection")}_onDrag(d){if(!this._draggedGridItem||!this._initialGridItemPosition){this._onDragEnd();return}this._updatePanelPosition(this._initialGridItemPosition.top+(d.pageY-this._initialGridItemPosition.pageY),this._initialGridItemPosition.left+(d.pageX-this._initialGridItemPosition.pageX));const x=document.elementsFromPoint(d.clientX,d.clientY)?.find(b=>{const D=b.getAttribute("data-auto-grid-item-drop-target");return!!D&&D!==this._draggedGridItem.state.key})?.getAttribute("data-auto-grid-item-drop-target");x&&this._onDragOverItem(x)}_onDragOverItem(d){const x=[...this.state.children],b=x.findIndex(C=>C===this._draggedGridItem),D=x.findIndex(C=>C.state.key===d);b===-1||D===-1||(x.splice(b,1),x.splice(D,0,this._draggedGridItem),this.setState({children:x}))}_updatePanelPosition(d,x){this._setContainerStyle(p.hM,`${d}px`),this._setContainerStyle(p.PS,`${x}px`)}_updatePanelSize(d,x){this._setContainerStyle(p.MS,`${Math.floor(d)}px`),this._setContainerStyle(p.PP,`${Math.floor(x)}px`)}_resetPanelPositionAndSize(){this._removeContainerStyle(p.hM),this._removeContainerStyle(p.PS),this._removeContainerStyle(p.MS),this._removeContainerStyle(p.PP)}_setContainerStyle(d,x){this.containerRef.current?.style.setProperty(d,x)}_removeContainerStyle(d){this.containerRef.current?.style.removeProperty(d)}}},29442:(ne,A,e)=>{"use strict";e.d(A,{Mo:()=>r,PP:()=>i,TN:()=>c,tx:()=>l});var n=e(39187),a=e(94646),s=e(92367);const l=(o,h)=>{const f=new URLSearchParams([["search",o.map(([g,u])=>`${g}:"${u}"`).join(" ")]]);return(0,s.G)("/alerting/list",f,{skipSubPath:h?.skipSubPath})},r=(o={},h)=>(0,s.G)("/alerting/list",o,{skipSubPath:h?.skipSubPath}),c={detailsPageLink:(o,h,f,g)=>{const u=g?.includeReturnTo?{returnTo:(0,n.w)()}:{};return(0,s.G)(`/alerting/${o}/namespaces/${encodeURIComponent(h)}/groups/${encodeURIComponent(f)}/view`,u)},detailsPageLinkFromGroupIdentifier:o=>{const{groupOrigin:h,namespace:f,groupName:g}=o;return h==="grafana"?c.detailsPageLink("grafana",f.uid,g):c.detailsPageLink(o.rulesSource.uid,f.name,g)},editPageLink:(o,h,f,g)=>{const u=g?.includeReturnTo?{returnTo:(0,n.w)()}:{};return(0,s.G)(`/alerting/${o}/namespaces/${encodeURIComponent(h)}/groups/${encodeURIComponent(f)}/edit`,u,{skipSubPath:g?.skipSubPath})},newAlertRuleLink:(o,h,f)=>{const g=(0,n.w)(),u=JSON.stringify({folder:{title:o,uid:h},group:f});return(0,s.G)("/alerting/new",{defaults:u,returnTo:g})},newRecordingRuleLink:(o,h,f)=>{const g=(0,n.w)(),u=JSON.stringify({folder:{title:o,uid:h},group:f});return(0,s.G)("/alerting/new/grafana-recording",{defaults:u,returnTo:g})}},i={detailsPageLink:(o,h,f,g)=>(0,s.G)(`/alerting/${encodeURIComponent(o)}/${encodeURIComponent((0,a.$9)(h))}/view`,f,{skipSubPath:g?.skipSubPath})}},29609:(ne,A,e)=>{"use strict";e.d(A,{$7:()=>B,A4:()=>K,BL:()=>Me,H2:()=>$e,I2:()=>Ce,KC:()=>R,Mj:()=>I,Mu:()=>Xe,Nv:()=>M,O9:()=>le,OF:()=>Te,Om:()=>ce,R$:()=>O,RI:()=>S,Rh:()=>Q,TU:()=>Z,Tm:()=>ee,Wy:()=>se,X4:()=>U,XI:()=>j,YN:()=>re,aw:()=>V,bL:()=>L,dS:()=>te,f6:()=>W,fC:()=>G,hC:()=>p,j_:()=>Ae,jg:()=>X,nf:()=>F,oI:()=>N,p:()=>T,pq:()=>De,qz:()=>ue,s_:()=>Ke,uo:()=>ae,vE:()=>Re,x6:()=>x,xE:()=>Ve});var n=e(2543),a=e.n(n),s=e(76190),l=e(43173),r=e(24619),c=e(56369),i=e(67817),o=e(95443),h=e(52161),f=e(39659),g=e(15629);function u(Se){return typeof Se=="object"&&"grafana_alert"in Se}function E(Se){return u(Se)&&!v(Se)}function v(Se){return u(Se)&&"record"in Se.grafana_alert}function p(Se){return!!Se.grafana_alert.is_paused}function m(Se){return typeof Se=="object"&&"alert"in Se}function y(Se){return typeof Se=="object"&&!u(Se)}function d(Se){return typeof Se=="object"&&"record"in Se}function x(Se){return Se.rules.every(Ye=>y(Ye))}function b(Se){return typeof Se=="object"&&Se.type===r.JS.Alerting}function D(Se){return typeof Se=="object"&&Se.type===r.JS.Recording}function C(Se){return b(Se)&&"folderUid"in Se&&"uid"in Se}function P(Se){return D(Se)&&"folderUid"in Se&&"uid"in Se}const T={grafana:{rule:u,alertingRule:E,recordingRule:v},dataSource:{rule:y,alertingRule:m,recordingRule:d},any:{recordingRule:Se=>d(Se)||v(Se),alertingRule:Se=>m(Se)||E(Se)}},O={rule:Se=>b(Se)||D(Se),alertingRule:b,recordingRule:D,grafana:{rule:Se=>C(Se)||P(Se),alertingRule:C,recordingRule:P}};function S(Se){return JSON.stringify(Se.labels)}function B(Se){return Se.error&&Se.error?.message?.includes(o.UU)}function K(Se){return"uid"in Se}function U(Se){return"rulerRuleHash"in Se}function F(Se){return Object.values(r.JS).includes(Se)}function I(Se){return"ruleHash"in Se}function V(Se){return K(Se)||U(Se)}function M(Se){return u(Se)&&!!Se.grafana_alert.provenance}function L(Se){return O.grafana.rule(Se)&&!!Se.provenance}function N(Se){return Se.rules.some(Ye=>M(Ye))}function W(Se){switch(Se){case"ok":return c.Jc.Ok;case"nodata":return c.Jc.NoData;case"error":case"err":return c.Jc.Error;case"unknown":return c.Jc.Unknown;default:return}}function R(Se){if(Se==="grafana")return c.Eg.Grafana;if(Se==="datasource")return c.Eg.DataSource}function G(Se){if(!T.any.recordingRule(Se.rulerRule)){if(m(Se.rulerRule))return Se.rulerRule.for;if(b(Se.promRule)){const Ye=(Se.promRule.duration??0)*1e3;return(0,g.an)(Ye)}}}function w(Se){return T.any.alertingRule(Se)?Se.for:void 0}function _(Se){if(!T.any.recordingRule(Se.rulerRule)&&E(Se.rulerRule))return Se.rulerRule.keep_firing_for}function Q(Se){return Se?.annotations??{}}function ae(Se){if(!Se)return;const Ye=Se.labels?.[f.lL];if(!Ye)return;const Ue=Ye.match(/^plugin\/(?<pluginId>.+)$/);if(!Ue?.groups)return;const je=Ue.groups.pluginId;if(q(je))return{pluginId:je}}function q(Se){return!!l.$.apps[Se]}function k(Se){return Se.rules.some(Ye=>ee(Ye))}function ee(Se){return!!ae(Se)}function j(Se){return Se===r.cF.Inactive?"Normal":(0,n.capitalize)(Se)}const J=Se=>Se.reduce((Ye,{dataSourceName:Ue,name:je,groups:Qe})=>(Qe.forEach(({name:He,rules:Je})=>{Je.forEach(de=>{b(de)&&Ye.push({dataSourceName:Ue,namespaceName:je,groupName:He,rule:de})})}),Ye),[]),Z=Se=>b(Se.promRule)?Se.promRule:null,te=Se=>Se.reduce((Ye,{rulesSource:Ue,name:je,groups:Qe})=>(Qe.forEach(({name:He,rules:Je})=>{Je.forEach(de=>{de.promRule&&b(de.promRule)&&Ye.push({dataSourceName:(0,h.EV)(Ue),namespaceName:je,groupName:He,...de,namespace:{...de.namespace,uid:de.promRule.folderUid}})})}),Ye),[]);function se(Se){let Ye;return Object.values(s.O).includes(Se)?Ye=Se:Ye=(0,r.lh)(Se),ie[Ye]}const ie={[r.cF.Inactive]:"good",[r.cF.Firing]:"bad",[r.cF.Pending]:"warning",[r.cF.Recovering]:"warning",[r.Gi.Alerting]:"bad",[r.Gi.Error]:"bad",[r.Gi.NoData]:"info",[r.Gi.Normal]:"good",[r.Gi.Pending]:"warning",[r.Gi.Recovering]:"warning",[s.O.NoData]:"info",[s.O.Paused]:"warning",[s.O.Alerting]:"bad",[s.O.OK]:"good",[s.O.Unknown]:"info"};function ce(Se){return Se?.alerts?Se.alerts.reduce((Ye,Ue)=>{const je=(0,r.lh)(Ue.state)!==r.Gi.Normal;if(Ue.activeAt&&je){const Qe=new Date(Ue.activeAt);if(Ye===null||Ye.getTime()>Qe.getTime())return Qe}return Ye},null):null}function re(Se){return Array.isArray(Se.source_tenants)}function ue(Se){return T.grafana.rule(Se)?Se.grafana_alert.title:T.dataSource.alertingRule(Se)?Se.alert:T.dataSource.recordingRule(Se)?Se.record:""}const X=(Se,Ye)=>{const Ue={alertName:"",forDuration:"0s",evaluationsToFire:0};return u(Se)?{alertName:Se.grafana_alert.title,forDuration:Se.for,evaluationsToFire:Se.for?le(Se.for,Ye):null}:m(Se)?{alertName:Se.alert,forDuration:Se.for??"0s",evaluationsToFire:le(Se.for??"0s",Ye)}:Ue},le=(Se,Ye)=>{const Ue=(0,g.P8)(Ye),je=(0,g.P8)(Se);return je===0&&Ue!==0?1:Ue===0||je/Ue<1?0:Math.ceil(je/Ue)+1};function he(Se,Ye){return Se===0?1:Ye===0||Se/Ye<1?0:Math.ceil(Se/Ye)+1}function fe(Se){const Ye=isGrafanaRulesSource(Se.namespace.rulesSource)?Se.namespace.rulesSource:Se.namespace.rulesSource.name,Ue=u(Se.rulerRule)?Se.rulerRule.grafana_alert.namespace_uid:Se.namespace.name;return{dataSourceName:Ye,namespaceName:Ue,groupName:Se.group.name}}function Ce(Se){const Ye=Se.ruleSourceName,Ue=u(Se.rule)?Se.rule.grafana_alert.namespace_uid:Se.namespace,je=Se.group.name;return{dataSourceName:Ye,namespaceName:Ue,groupName:je}}function Ae(Se){const Ye=Se.dataSourceName,Ue=Se.folder?.uid??Se.namespace,je=Se.group;if(!Ye)throw new Error("no datasource name in form values");return{dataSourceName:Ye,namespaceName:Ue,groupName:je}}function _e(Se){return isGrafanaRulesSource(Se)?Se:Se.name}function Xe(Se){return Se===i.Z.grafana}function De(Se){return Se===i.Z.grafanaRecording}function Me(Se){return Se===i.Z.cloudAlerting}function Te(Se){return Se===i.Z.cloudRecording}function $e(Se){return Xe(Se)||De(Se)}function Re(Se){return De(Se)||Te(Se)}function Ke(Se){return Me(Se)||Te(Se)}function Ve(Se){if(!Se)return;let Ye;return"grafana_alert"in Se&&T.grafana.rule(Se)?Ye=Se.grafana_alert.uid:"uid"in Se&&O.grafana.rule(Se)&&(Ye=Se.uid),Ye}},29646:(ne,A,e)=>{"use strict";e.d(A,{S:()=>f});var n=e(96540),a=e(74101),s=e(75735),l=e(55266),r=e(45942),c=e(76701);function i({timestamp:g,pathFromAnnotation:u,slug:E,folderPath:v=""}){let p="";if(u){const y=u.indexOf("#");return y>0?u.substring(0,y):u}return p=`${E||`new-dashboard-${g}`}.json`,v?`${v}/${p}`:p}var o=e(43385);function h({meta:g,defaultTitle:u,defaultDescription:E,loadedFromRef:v}){const p=g.k8s?.annotations,m=p?.[s.LH],y=p?.[s.Jw],d=p?.[s.Y_],{repository:x,folder:b,isLoading:D}=(0,l.T)({name:m==="repo"?y:void 0,folderName:g.folderUid}),C=(0,o.g)(),P=b?.metadata?.annotations?.[s.Y_],T=i({timestamp:C,pathFromAnnotation:d,slug:g.slug,folderPath:P}),O=(0,c.r)(x,v);return D||!x?null:{values:{ref:O==="branch"?`dashboard/${C}`:x?.branch??"",path:T,repo:y||x?.name||"",comment:"",folder:{uid:g.folderUid,title:""},title:u,description:E??"",workflow:(0,c.r)(x,v)},isNew:!g.k8s?.name,repository:x}}function f(g){const{meta:u,title:E,description:v}=g.useState(),[p]=(0,a.z)(),[m,y]=(0,n.useState)(!1),d=p.get("ref")??void 0,x=h({meta:u,defaultTitle:E,defaultDescription:v,loadedFromRef:d});if(!x)return{isReady:!1,isLoading:m,setIsLoading:y,defaultValues:null,repository:void 0,loadedFromRef:d,workflowOptions:[],isNew:!1,readOnly:!0};const{values:b,isNew:D,repository:C}=x,P=(0,c.a)(C);return{isReady:!0,defaultValues:b,repository:C,loadedFromRef:d,workflowOptions:P,isNew:D,readOnly:(0,r.li)(C),isLoading:m,setIsLoading:y}}},29662:(ne,A,e)=>{"use strict";e.d(A,{VV:()=>r,Yj:()=>c,dK:()=>o});var n=e(2543),a=e.n(n),s=e(22480),l=e(57002);const r="grafana",c=s.Y.map(h=>{const f=h.code===l.wi?l.Nm:h.code;return{...h,loader:{[r]:()=>e(7170)(`./${f}/grafana.json`)}}});{const h=e(55905);if(h.keys().includes("app/extensions/locales/localeExtensions")){const{LOCALE_EXTENSIONS:f,ENTERPRISE_I18N_NAMESPACE:g}=h("app/extensions/locales/localeExtensions");for(const u of c){const E=f[u.code];E&&(u.loader[g]=E)}}}const i=c.map(h=>h.code),o=(0,n.uniq)(c.flatMap(h=>Object.keys(h.loader)))},29700:(ne,A,e)=>{"use strict";e.d(A,{r:()=>p});var n=e(74848),a=e(96540),s=e(16207),l=e(92745),r=e(36490),c=e(45863),i=e(87063),o=e(45861),h=e(93256),f=e(31286),g=e(41654),u=e(88559),E=e(8285),v=e(11534);const p="__unconfigured-panel",m=new s.m(y);function y(d){const[x,b]=(0,a.useState)(!1),D=(0,a.useCallback)(O=>{b(O)},[]),C=()=>{r.Ny.partial({editPanel:d.id})},P=()=>{const O=window.__grafanaSceneContext;if(!(O instanceof v.H$))throw new Error("DashboardScene not found");const S=(0,E.vL)(O,(0,E.XA)(d.id));if(!S)throw new Error("Panel not found");O.onShowAddLibraryPanelDrawer(S.getRef())},T=()=>(0,n.jsxs)(i.W,{children:[(0,n.jsx)(i.W.Item,{icon:"pen",label:(0,l.t)("dashboard.new-panel.menu-open-panel-editor","Configure"),onClick:C}),(0,n.jsx)(i.W.Item,{icon:"library-panel",label:(0,l.t)("dashboard.new-panel.menu-use-library-panel","Use library panel"),onClick:P})]});return(0,n.jsx)(g.B,{direction:"row",alignItems:"center",height:"100%",justifyContent:"center",children:(0,n.jsx)(f.a,{paddingBottom:2,children:(0,n.jsxs)(h.e,{children:[(0,n.jsx)(o.$n,{icon:"sliders-v-alt",onClick:C,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.new-panel.configure-button",children:"Configure"})}),(0,n.jsx)(u.m,{overlay:T,placement:"bottom-end",onVisibleChange:D,children:(0,n.jsx)(o.$n,{"aria-label":(0,l.t)("dashboard.new-panel.configure-button-menu","Toggle menu"),icon:x?"angle-up":"angle-down"})})]})})})}c.Go.registerRuntimePanelPlugin({pluginId:p,plugin:m})},29855:(ne,A,e)=>{"use strict";e.d(A,{G_:()=>b,sb:()=>D});var n=e(74848),a=e(22803),s=e(20382),l=e(96540),r=e(49785),c=e(70713),i=e(92745),o=e(30703),h=e(45967),f=e(50992),g=e(54314),u=e(60208),E=e(8207),v=e(45861),p=e(89640),m=e(63142),y=e(20437),d=e(29609);const x=[{label:"Yaml",value:"yaml"}],b=({onClose:B})=>{const[K,U]=(0,l.useState)("yaml"),{setValue:F}=(0,r.xW)(),I=(0,m.of)(S),V=M=>{for(const L in M)F(L,M[L]);B()};return(0,n.jsx)(E._,{title:(0,i.t)("alerting.rule-inspector.title-inspect-alert-rule","Inspect Alert rule"),subtitle:(0,n.jsx)("div",{className:I.subtitle,children:(0,n.jsx)(D,{tabs:x,setActiveTab:U,activeTab:K})}),onClose:B,children:K==="yaml"&&(0,n.jsx)(C,{onSubmit:V})})};function D({tabs:B,activeTab:K,setActiveTab:U}){return(0,n.jsx)(g.U,{children:B.map((F,I)=>(0,n.jsx)(u.o,{label:F.label,value:F.value,onChangeTab:()=>U(F.value),active:K===F.value},`${F.value}-${I}`))})}const C=({onSubmit:B})=>{const K=(0,m.of)(O),{getValues:U}=(0,r.xW)(),F=(0,y.l1)(U()),[I,V]=(0,l.useState)((0,s.Bh)(F)),M=()=>{const L=(0,s.Hh)(I),N=U(),W=T(L);B({...N,...W})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:K.applyButton,children:[(0,n.jsx)(v.$n,{type:"button",onClick:M,children:(0,n.jsx)(i.x6,{i18nKey:"alerting.inspector-yaml-tab.apply",children:"Apply"})}),(0,n.jsx)(h.m,{content:(0,n.jsx)(P,{}),theme:"info",placement:"left-start",interactive:!0,children:(0,n.jsx)(o.I,{name:"exclamation-triangle",size:"xl"})})]}),(0,n.jsx)("div",{className:K.content,children:(0,n.jsx)(c.Ay,{disableWidth:!0,children:({height:L})=>(0,n.jsx)(f.B,{width:"100%",height:L,language:"yaml",value:I,onBlur:V,monacoOptions:{minimap:{enabled:!1}}})})})]})};function P(){return(0,n.jsx)("div",{children:(0,n.jsxs)(i.x6,{i18nKey:"alerting.yaml-content-info.body",children:["The YAML content in the editor only contains alert rule configuration ",(0,n.jsx)("br",{}),"To configure Prometheus, you need to provide the rest of the"," ",(0,n.jsx)(p.Y,{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",external:!0,children:"configuration file content."})]})})}function T(B){return d.p.dataSource.alertingRule(B)?(0,y.Qk)(B):d.p.dataSource.recordingRule(B)?(0,y.XI)(B):{}}const O=B=>({content:(0,a.css)({flexGrow:1,height:"100%",paddingBottom:"16px",marginBottom:B.spacing(2)}),applyButton:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",flexGrow:0,marginBottom:B.spacing(2)})}),S=()=>({subtitle:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-between"})})},30054:(ne,A,e)=>{"use strict";e.d(A,{n:()=>u});var n=e(41053),a=e(88673);function s(E){const p=new DOMParser().parseFromString(E,"text/xml");return{items:Array.from(p.querySelectorAll("entry")).map(y=>({title:i(y,"title"),link:y.querySelector("link")?.getAttribute("href")??"",content:i(y,"content"),pubDate:i(y,"published"),ogImage:y.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function l(E){const p=new DOMParser().parseFromString(E,"text/xml");return{items:Array.from(p.querySelectorAll("item")).map(y=>({title:i(y,"title"),link:i(y,"link"),content:i(y,"description"),pubDate:i(y,"pubDate"),ogImage:y.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function r(E){return await(await fetch(E)).text()}function c(E){return new DOMParser().parseFromString(E,"text/xml").querySelector("feed")!==null}function i(E,v){return E.querySelector(v)?.textContent??""}async function o(E){const v=await r(E);return c(v)?s(v):l(v)}var h=e(25229),f=e(95004);function g(E){const v=[],p=[],m=[],y=[],d=[];for(const x of E.items){const b=(0,h.KQ)(x.pubDate);try{if(v.push(b.valueOf()),p.push(x.title),m.push(x.link),d.push(x.ogImage),x.content){const D=x.content.replace(/<\/?[^>]+(>|$)/g,"");y.push(D)}}catch(D){console.warn("Error reading news item:",D,x)}}return{fields:[{name:"date",type:f.PU.time,config:{displayName:"Date"},values:v},{name:"title",type:f.PU.string,config:{},values:p},{name:"link",type:f.PU.string,config:{},values:m},{name:"content",type:f.PU.string,config:{},values:y},{name:"ogImage",type:f.PU.string,config:{},values:d}],length:v.length}}function u(E){const[v,p]=(0,n.A)(async()=>{const m=await o(E),y=g(m);return new a.R(y)},[E],{loading:!0});return{state:v,getNews:p}}},30124:(ne,A,e)=>{"use strict";e.d(A,{DW:()=>x,GN:()=>p,Yr:()=>f,d7:()=>u,dq:()=>h,e9:()=>g,h4:()=>v,jc:()=>E,xV:()=>m});var n=e(75505),a=e(59857),s=e(7817),l=e(93389),r=e(70030),c=e(8285),i=e(83873),o=e(97583);async function h({searchString:b="",perPage:D=100,page:C=1,excludeUid:P="",sortDirection:T="",typeFilter:O=[],folderFilterUIDs:S=[]}={}){const B=new URLSearchParams;B.append("searchString",b),B.append("sortDirection",T),B.append("typeFilter",O.join(",")),B.append("folderFilterUIDs",S.join(",")),B.append("excludeUid",P),B.append("perPage",D.toString(10)),B.append("page",C.toString(10)),B.append("kind",o.i.Panel.toString(10));const{result:K}=await(0,i.AI)().get(`/api/library-elements?${B.toString()}`);return K}async function f(b,D=!1){const C=await(0,n.s)((0,i.AI)().fetch({method:"GET",url:`/api/library-elements/${b}`,showSuccessAlert:!D,showErrorAlert:!D})),{result:P}=C.data,T=new s.G({...a.Ye,schemaVersion:35,panels:[P.model]}),{scopedVars:O,...S}=T.panels[0].getSaveModel();return delete S.gridPos,delete S.id,delete S.libraryPanel,T.destroy(),{...P,model:S}}async function g(b){const{result:D}=await(0,i.AI)().get(`/api/library-elements/name/${b}`,void 0,void 0,{validatePath:!0});return D}async function u(b,D){const{result:C}=await(0,i.AI)().post("/api/library-elements",{folderUid:D,name:b.libraryPanel.name,model:b,kind:o.i.Panel});return C}async function E(b){const{libraryPanel:D,...C}=b,{uid:P,name:T,version:O,folderUid:S}=D,B=o.i.Panel,{result:K}=await(0,i.AI)().patch(`/api/library-elements/${P}`,{folderUid:S,name:T,model:C,version:O,kind:B});return K}function v(b){return(0,i.AI)().delete(`/api/library-elements/${b}`)}async function p(b){const{result:D}=await(0,i.AI)().get(`/api/library-elements/${b}/connections`);return D}async function m(b){const D=await p(b);return D.length===0?[]:await(0,i.AI)().search({dashboardUIDs:D.map(P=>P.connectionUid)})}function y(b){const D=(0,c.iL)(b),{uid:C,name:P,_loadedPanel:T}=D.state;let O=b.parent;if(!O||!(O instanceof l.U))throw new Error("Trying to save a library panel that does not have a DashboardGridItem parent");return{...T,uid:C,name:P,type:b.state.pluginId,model:(0,r.Z6)(b.clone({$behaviors:void 0}),{x:O.state.x??0,y:O.state.y??0,w:O.state.width??0,h:O.state.height??0},!1,O),kind:o.i.Panel,version:T?.version||0}}async function d(b){const{uid:D,folderUid:C,name:P,model:T,version:O,kind:S}=y(b),{result:B}=await(0,i.AI)().patch(`/api/library-elements/${D}`,{folderUid:C,name:P,model:T,version:O,kind:S});return B}async function x(b){const D=await d(b),C=(0,c.iL)(b);if(!C)throw new Error("Could not find library panel behavior for panel");C.setPanelFromLibPanel(D)}},30362:(ne,A,e)=>{"use strict";e.d(A,{A6:()=>p,CS:()=>u,J0:()=>E,Wk:()=>y,m0:()=>v,n0:()=>d});var n=e(96540),a=e(92745),s=e(43173),l=e(27489),r=e(95943),c=e(43550),i=e(87745),o=e(45229),h=e(10388),f=e(47981),g=e(89409);const u=x=>{let b=x.children||[];if(x.id==="help"){const D=()=>{o.A.publish(new i.S8({component:f.N}))};x.children=[...b,...(0,h.Dd)(),...m(),{id:"keyboard-shortcuts",text:(0,a.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:D}]}return x},E=(x,b,D=!1)=>{const C={...x},P=C.onClick;let T;return C.isNew?T="item":D&&(T="ancestor"),C.onClick=()=>{(0,l.rR)("grafana_navigation_item_clicked",{path:C.url??C.id,menuIsDocked:b,itemIsBookmarked:!!(s.$.featureToggles.pinNavItems&&C?.parentItem?.id==="bookmarks"),bookmarkToggleOn:!!s.$.featureToggles.pinNavItems,isNew:T}),P?.()},C.children&&(C.children=C.children.map(O=>E(O,b,T!==void 0))),C},v=(x,b)=>!!x.children?.some(D=>D===b?!0:v(D,b)),p=(x,b,D)=>{const{id:C,parentItem:P}=b;if(D==="/")return x.find(O=>O.id===c.Id);if(b.id==="profile")return;for(const O of x){const S=!!(O.id&&O.id===C),B=O.text===b.text&&O.url===b.url;if(S||B)return O;if(O.children){const K=p(O.children,b);if(K)return K}}const T=x[0]?.parentItem?.id==="bookmarks";if(P&&!T)return p(x,P)};function m(){const{buildInfo:x,licenseInfo:b}=s.$,D=b.stateInfo?` (${b.stateInfo})`:"",C=[];return C.push({target:"_blank",id:"version",text:`${x.edition}${D}`,url:b.licenseUrl,icon:"external-link-alt"}),x.hasUpdate&&C.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),C}function y(x,b){for(const D of x){if(D.url===b)return D;if(D.children?.length){const C=y(D.children,b);if(C)return C}}return null}function d(x,b){(0,n.useEffect)(()=>{x?document.getElementById(g.iL)?.focus():document.getElementById(r.Ut)?.focus()},[x]),(0,n.useEffect)(()=>{b?document.getElementById(g.t3)?.focus():document.getElementById(r.Ut)?.focus()},[b])}},30643:(ne,A,e)=>{"use strict";e.d(A,{V:()=>G});var n=e(96540),a=e(92745),s=e(45863),l=e(95943),r=e(73427),c=e(29043),i=e(77197),o=e(87745),h=e(6048),f=e(6461),g=e(67350),u=e(8285),E=e(8835),v=e(48492),p=e(41667),m=e(74848),y=e(51898),d=e(37386),x=e(63527),b=e(34999),D=e(89640),C=e(25797),P=e(51156),T=e(31819),O=e(9931),S=e(18615),B=e(78725),K=e(33143),U=e(44802),F=e(20246);function I(w,_){const{layout:Q}=w.useState(),ae=(0,n.useMemo)(()=>new C.C({title:"",id:"tab-item-options"}).addItem(new P.v({title:(0,a.t)("dashboard.tabs-layout.tab-options.title-option","Title"),id:"tab-options-title",render:J=>(0,m.jsx)(V,{id:J.props.id,tab:w,isNewElement:_})})),[w,_]),q=(0,n.useMemo)(()=>new C.C({title:(0,a.t)("dashboard.tabs-layout.tab-options.repeat.title","Repeat options"),id:"repeat-options",isOpenDefault:!1}).addItem(new P.v({title:(0,a.t)("dashboard.tabs-layout.tab-options.repeat.variable.title","Repeat by variable"),id:"tab-options-repeat-variable",description:(0,a.t)("dashboard.tabs-layout.tab-options.repeat.variable.description","Repeat this tab for each value in the selected variable."),render:J=>(0,m.jsx)(M,{id:J.props.id,tab:w})})),[w]),k=(0,U.W)(Q),ee=[ae,...k,q],j=(0,n.useMemo)(()=>(0,B.h)(w.state.conditionalRendering),[w]);return j&&ee.push(j),ee}function V({tab:w,isNewElement:_,id:Q}){const{title:ae}=w.useState(),q=(0,n.useRef)(""),k=(0,F.z4)({autoFocus:_}),ee=w.hasUniqueTitle();return(0,m.jsx)(d.D,{invalid:!ee,error:ee?void 0:(0,a.t)("dashboard.tabs-layout.tab-options.title-not-unique","Title should be unique"),children:(0,m.jsx)(x.p,{id:Q,ref:k,title:(0,a.t)("dashboard.tabs-layout.tab-options.title-option","Title"),value:ae,onFocus:()=>q.current=ae||"",onBlur:()=>L(w,ae||"",q.current||""),onChange:j=>w.onChangeTitle(j.currentTarget.value)})})}function M({tab:w,id:_}){const{layout:Q}=w.useState(),ae=(0,u.MZ)(w),q=Q.getVizPanels().some(k=>{const ee=(0,u.un)(k);return ee?.state.datasource?.uid===O.K||ee?.state.datasource?.uid===S.uv&&ee?.state.queries.some(j=>j.datasource?.uid===O.K)});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(T.U,{id:_,sceneContext:ae,repeat:w.state.repeatByVariable,onChange:k=>w.onChangeRepeat(k)}),q?(0,m.jsxs)(b.F,{"data-testid":y.Tp.pages.Dashboard.Rows.Repeated.ConfigSection.warningMessage,severity:"warning",title:"",topSpacing:3,bottomSpacing:0,children:[(0,m.jsx)("p",{children:(0,m.jsxs)(a.x6,{i18nKey:"dashboard.tabs-layout.tab.repeat.warning",children:["Panels in this tab use the ",{SHARED_DASHBOARD_QUERY:O.K}," data source. These panels will reference the panel in the original tab, not the ones in the repeated tabs."]})}),(0,m.jsx)(D.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/#configure-repeating-tabs",children:(0,m.jsx)(a.x6,{i18nKey:"dashboard.tabs-layout.tab.repeat.learn-more",children:"Learn more"})})]}):void 0]})}function L(w,_,Q){_!==Q&&K.cc.edit({description:(0,a.t)("dashboard.edit-actions.tab-title","Change tab title"),source:w,perform:()=>w.onChangeTitle(_),undo:()=>w.onChangeTitle(Q)})}var N=e(83058);class W{constructor(_){this._tabs=_,this.isEditableDashboardElement=!0}getEditableElementInfo(){return{typeName:(0,a.t)("dashboard.edit-pane.elements.tabs","Tabs"),icon:"folder",instanceName:""}}useEditPaneOptions(){return[]}getTabs(){return this._tabs}onDelete(){this._tabs.forEach(_=>_.onDelete())}}var R=e(98279);class G extends s.Bs{constructor(_){super({..._,title:_?.title??(0,a.t)("dashboard.tabs-layout.tab.new","New tab"),layout:_?.layout??E.X2.createEmpty(),conditionalRendering:_?.conditionalRendering??h.M.createEmpty()}),this._variableDependency=new s.Sh(this,{statePaths:["title"]}),this.isEditableDashboardElement=!0,this.isDashboardDropTarget=!0,this.containerRef=n.createRef(),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=N.O}_activationHandler(){const _=this.state.conditionalRendering?.activate();return()=>{_&&_()}}getEditableElementInfo(){return{typeName:(0,a.t)("dashboard.edit-pane.elements.tab","Tab"),instanceName:s.jh.interpolate(this,this.state.title,void 0,"text"),icon:"layers"}}getOutlineChildren(){return this.state.layout.getOutlineChildren()}getLayout(){return this.state.layout}getSlug(){return i.A.slugifyForUrl(s.jh.interpolate(this,this.state.title??"Tab"))}switchLayout(_){this.setState({layout:_})}useEditPaneOptions(_){return I(this,_)}onDelete(){this.getParentLayout().removeTab(this)}onConfirmDelete(){const _=this.getParentLayout();if(_.shouldUngroup()){_.removeTab(this);return}if(this.getLayout().getVizPanels().length===0){this.onDelete();return}r.lE.publish(new o.bY({title:(0,a.t)("dashboard.tabs-layout.delete-tab-title","Delete tab?"),text:(0,a.t)("dashboard.tabs-layout.delete-tab-text","Deleting this tab will also remove all panels. Are you sure you want to continue?"),yesText:(0,a.t)("dashboard.tabs-layout.delete-tab-yes","Delete"),onConfirm:()=>{this.onDelete()}}))}serialize(){return(0,f.Yz)(this)}onCopy(){const _=(0,g.IC)(this.getLayout(),(0,u.YQ)(this));(0,v.G2)(),c.A.set(l.Gk,JSON.stringify({elements:_,tab:this.serialize()}))}createMultiSelectedElement(_){return new W(_.filter(Q=>Q instanceof G))}onDuplicate(){this.getParentLayout().duplicateTab(this)}duplicate(){return this.clone({key:void 0,layout:this.getLayout().duplicate()})}onAddPanel(_=(0,u.O8)()){this.getLayout().addPanel(_)}onAddTab(){this.getParentLayout().addNewTab()}onChangeTitle(_){this.setState({title:_});const Q=this.getSlug();this.getParentLayout().setState({currentTabSlug:Q})}onChangeName(_){this.onChangeTitle(_)}onChangeRepeat(_){_?this.setState({repeatByVariable:_}):this.setState({repeatedTabs:void 0,$variables:void 0,repeatByVariable:void 0})}setIsDropTarget(_){!!this.state.isDropTarget!==_&&this.setState({isDropTarget:_})}draggedPanelOutside(_){this.getLayout().removePanel?.(_),this.setIsDropTarget(!1)}draggedPanelInside(_){_.clearParent(),this.getLayout().addPanel(_),this.setIsDropTarget(!1);const Q=this.getParentLayout();Q.state.currentTabSlug!==this.getSlug()&&Q.setState({currentTabSlug:this.getSlug()})}getParentLayout(){return s.jh.getAncestor(this,R.K)}scrollIntoView(){const _=this.getParentLayout();_.getCurrentTab()!==this&&_.switchToTab(this),(0,p.d)(this,this.containerRef)}hasUniqueTitle(){return!this.getParentLayout().duplicateTitles().has(this.state.title)}}},30868:(ne,A,e)=>{"use strict";e.d(A,{y:()=>f});var n=e(74848),a=e(55494),s=e(63704),l=e(24726);const r=2,c=5,i=v=>{const p=v.match(new RegExp('<style type="text/css">([\\s\\S]*?)<\\/style>'));return p?p[0]:null},o=v=>v.match(new RegExp(`<svg.*id\\s*=\\s*(['"])(.*?)\\1`))?.[r],h=v=>{let p=o(v);if(!p){p=`x${(0,l.A)()}`;const y=v.indexOf("<svg")+c;v=v.substring(0,y)+`id="${p}" `+v.substring(y)}let m=i(v);if(m){let y=m.replace(/(#(.*?))?\./g,`#${p} .`);v=v.replace(m,y)}return v},f=v=>{const{cleanStyle:p,...m}=v;return(0,n.jsx)(a.default,{...m,cacheRequests:!0,preProcessor:p?E:u})};let g=new Map;function u(v){let p=g.get(v);return p||(p=s.sQ.sanitizeSVGContent(v),g.set(v,p)),p}function E(v){let p=g.get(v);return p||(p=s.sQ.sanitizeSVGContent(v),p.indexOf('<style type="text/css">')>-1&&(p=h(p)),g.set(v,p)),p}},30906:(ne,A,e)=>{"use strict";e.d(A,{l:()=>f});var n=e(74848),a=e(16817),s=e(92745),l=e(34999),r=e(68079),c=e(31286),i=e(41654),o=e(34753),h=e(1199);const f=({diff:g,oldValue:u,newValue:E,hasFolderChanges:v,oldFolder:p,newFolder:m,hasMigratedToV2:y})=>{const d=(0,a.A)(async()=>{const b=JSON.stringify(u??{},null,2),D=JSON.stringify(E??{},null,2);let C;const P=[];let T=0;if(g)for(const[O,S]of Object.entries(g)){const B=(0,n.jsx)(o.D,{diffs:S,title:O},O);O==="schemaVersion"?C=B:P.push(B),T+=S.length}return{schemaChange:C,diffs:P,count:T,showDiffs:T<15,jsonView:(0,n.jsx)(h.M,{oldValue:b,newValue:D})}},[g,u,E]),{value:x}=d;return(0,n.jsxs)(i.B,{direction:"column",gap:1,children:[y&&(0,n.jsx)(c.a,{paddingTop:1,children:(0,n.jsx)(l.F,{title:(0,s.t)("dashboard.save-dashboard-diff.title-because-dashboard-migrated-grafana-format","The diff is hard to read because the dashboard has been migrated to the new Grafana dashboard format"),severity:"info"})}),v&&(0,n.jsx)(o.D,{diffs:[{op:"replace",value:m,originalValue:p,path:[],startLineNumber:0,endLineNumber:0}],title:(0,s.t)("dashboard.save-dashboard-diff.title-folder","folder")},"folder"),(!x||!u)&&(0,n.jsx)(r.y,{}),x&&x.count>=1?(0,n.jsxs)(n.Fragment,{children:[!y&&x&&x.schemaChange&&x.schemaChange,x&&x.showDiffs&&x.diffs,(0,n.jsxs)(c.a,{paddingTop:1,children:[(0,n.jsx)("h4",{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-diff.full-json-diff",children:"Full JSON diff"})}),x.jsonView]})]}):(0,n.jsx)(c.a,{paddingTop:1,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-diff.no-changes-in-the-dashboard-json",children:"No changes in the dashboard JSON"})})]})}},30930:(ne,A,e)=>{"use strict";e.d(A,{r:()=>c});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(63142);const c=({label:o,ariaLabel:h,children:f})=>{const g=(0,r.of)(i),u=`group-label-${(0,s.uniqueId)()}`;return(0,n.jsxs)("div",{role:"group","aria-labelledby":!h&&o?u:void 0,"aria-label":h,children:[o&&(0,n.jsx)("label",{id:u,className:g.groupLabel,"aria-hidden":!0,children:o}),f]})};c.displayName="MenuGroup";const i=o=>({groupLabel:(0,a.css)({color:o.colors.text.secondary,fontSize:o.typography.size.sm,padding:o.spacing(.5,1)})})},31114:(ne,A,e)=>{"use strict";e.d(A,{Gu:()=>s,gB:()=>a});var n=e(739);const a={align:"auto",inspect:!1,wrapHeaderText:!1,cellOptions:{type:n.ob.Auto}};var s=(l=>(l.NotStarted="NotStarted",l.Loading="Loading",l.Streaming="Streaming",l.Done="Done",l.Error="Error",l))(s||{})},31119:(ne,A,e)=>{"use strict";e.d(A,{dj:()=>S});var n=e(2543),a=e.n(n),s=e(43173),l=e(78282),r=e(45863),c=e(11393),i=e(8255),o=e(75735),h=e(54767),f=e(11968),g=e(49e3),u=e(51906),E=e(88632),v=e(88499),p=e(44804),m=e(11534),y=e(8285),d=e(2505),x=e(39557),b=e(59006),D=e(67350),C=e(65333),P=e(3281),T=e(39508);const O="default";function S(R){const{spec:G,metadata:w,apiVersion:_}=R,Q=W(G);Q&&G.annotations.unshift(Q);const ae=G.annotations.map(se=>{const ie=(0,d.U)(se),ce={key:(0,n.uniqueId)("annotations-"),query:ie,name:se.spec.name,isEnabled:!!se.spec.enable,isHidden:!!se.spec.hide};return new g.g(ce)}),q=!!G.editable,k=R.access.canSave!==!1;let ee;w.labels?.[o.Y5]&&(ee=parseInt(w.labels[o.Y5],10));const j={canShare:R.access.canShare!==!1,canSave:k,canStar:R.access.canStar!==!1,canEdit:R.access.canEdit!==!1,canDelete:R.access.canDelete!==!1,canAdmin:R.access.canAdmin!==!1,url:R.access.url,slug:R.access.slug,annotationsPermissions:R.access.annotationsPermissions,created:w.creationTimestamp,createdBy:w.annotations?.[o.hc],updated:w.annotations?.[o.xU],updatedBy:w.annotations?.[o.Qu],folderUid:w.annotations?.[o.ew],isSnapshot:!!w.annotations?.[o.qw],isEmbedded:!!w.annotations?.[o.IC],showSettings:!!R.access.canEdit,canMakeEditable:k&&!q,hasUnsavedFolderChange:!1,version:w.generation,k8s:w};q||(j.canEdit=!1,j.canDelete=!1,j.canSave=!1);const J=b.j.get(G.layout.kind).deserialize(G.layout,G.elements,G.preload),Z=new r.Gg.Hf({enableProfiling:s.$.dashboardPerformanceMetrics.findIndex(se=>se==="*"||se===w.name)!==-1,onProfileComplete:(0,h.a)(w.name,G.title)},(0,h.S)()),te=new m.H$({description:G.description,editable:G.editable,preload:G.preload,id:ee,isDirty:!1,links:G.links,meta:j,tags:G.tags,title:G.title,uid:w.name,version:w.generation,body:J,$timeRange:new r.JZ({from:G.timeSettings.from,to:G.timeSettings.to,fiscalYearStartMonth:G.timeSettings.fiscalYearStartMonth,timeZone:G.timeSettings.timezone,weekStart:G.timeSettings.weekStart,UNSAFE_nowDelay:G.timeSettings.nowDelay}),$variables:B(G,j.isSnapshot??!1),$behaviors:[new r.Gg.K2({sync:(0,P.Y_)(G.cursorSync)}),Z,v.M,C.A2,new r.Gg.en({enabled:G.liveNow}),f.U,new p.s({reloadOnParamsChange:s.$.featureToggles.reloadDashboardsOnParamsChange&&!1,uid:ee?.toString()})],$data:new E.s({annotationLayers:ae}),controls:new u.x({timePicker:new r.KE({quickRanges:G.timeSettings.quickRanges,defaultQuickRanges:s.$.quickRanges}),refreshPicker:new r.WM({refresh:G.timeSettings.autoRefresh,intervals:G.timeSettings.autoRefreshIntervals,withText:!0}),hideTimeControls:G.timeSettings.hideTimepicker})},"v2");return te.setInitialSaveModel(R.spec,R.metadata,_),te}function B(R,G){let w;return G?w=V(R):w=K(R),w}function K(R){const G=R.variables.map(w=>{try{return U(w)}catch(_){return console.error(_),null}}).filter(w=>!!w);return s.$.featureToggles.scopeFilters&&G.push(new r.Kg({enable:!0})),new r.Pj({variables:G})}function U(R){const G={name:R.spec.name,label:R.spec.label,description:R.spec.description,showInControlsMenu:R.spec.showInControlsMenu};if(R.kind===(0,c.l_)().kind){const w=(0,D.DG)({type:R.group,uid:R.datasource?.name},R.group);return new r.H9({...G,description:R.spec.description,skipUrlSync:R.spec.skipUrlSync,hide:(0,P.cc)(R.spec.hide),datasource:w,applyMode:"auto",filters:R.spec.filters??[],baseFilters:R.spec.baseFilters??[],defaultKeys:R.spec.defaultKeys,useQueriesAsFilterForOptions:!0,layout:s.$.featureToggles.newFiltersUI?"combobox":void 0,supportsMultiValueOperators:!!(0,l.l)().getInstanceSettings(w)?.meta.multiValueFilterOperators})}if(R.kind===(0,c.ns)().kind)return new r.yP({...G,value:R.spec.current?.value??"",text:R.spec.current?.text??"",query:R.spec.query,isMulti:R.spec.multi,allValue:R.spec.allValue||void 0,includeAll:R.spec.includeAll,defaultToAll:!!R.spec.includeAll,skipUrlSync:R.spec.skipUrlSync,hide:(0,P.cc)(R.spec.hide)});if(R.kind===(0,c.m6)().kind)return new r.fS({...G,value:R.spec.current?.value??"",text:R.spec.current?.text??"",query:F(R),datasource:(0,D.Kq)(R),sort:(0,P.ES)(R.spec.sort),refresh:(0,P.tH)(R.spec.refresh),regex:R.spec.regex,allValue:R.spec.allValue||void 0,includeAll:R.spec.includeAll,defaultToAll:!!R.spec.includeAll,isMulti:R.spec.multi,skipUrlSync:R.spec.skipUrlSync,hide:(0,P.cc)(R.spec.hide),definition:R.spec.definition});if(R.kind===(0,c.X1)().kind)return new r.mI({...G,value:R.spec.current?.value??"",text:R.spec.current?.text??"",regex:R.spec.regex,pluginId:R.spec.pluginId,allValue:R.spec.allValue||void 0,includeAll:R.spec.includeAll,defaultToAll:!!R.spec.includeAll,skipUrlSync:R.spec.skipUrlSync,isMulti:R.spec.multi,hide:(0,P.cc)(R.spec.hide),defaultOptionEnabled:R.spec.current?.value===O&&R.spec.current?.text==="default"});if(R.kind===(0,c.pK)().kind){const w=(0,y.Sm)(R.spec.query),_=I(R,w);return new r.Yj({...G,value:_,intervals:w,autoEnabled:R.spec.auto,autoStepCount:R.spec.auto_count,autoMinInterval:R.spec.auto_min,refresh:(0,P.tH)(R.spec.refresh),skipUrlSync:R.spec.skipUrlSync,hide:(0,P.cc)(R.spec.hide)})}else{if(R.kind===(0,c.ET)().kind)return new r.x0({...G,value:R.spec.query,skipUrlSync:R.spec.skipUrlSync,hide:(0,P.cc)(R.spec.hide)});if(R.kind===(0,c.t1)().kind){let w;return R?.spec.current?.value?typeof R.spec.current.value=="string"?w=R.spec.current.value:w=R.spec.current.value[0]:w=R.spec.query,new r.TS({...G,value:w,skipUrlSync:R.spec.skipUrlSync,hide:(0,P.cc)(R.spec.hide)})}else if(s.$.featureToggles.groupByVariable&&R.kind===(0,c.uB)().kind){const w=(0,D.DG)({type:R.group,uid:R.datasource?.name},R.group);return new r.ZG({...G,datasource:w,value:R.spec.current?.value||[],text:R.spec.current?.text||[],skipUrlSync:R.spec.skipUrlSync,isMulti:R.spec.multi,hide:(0,P.cc)(R.spec.hide),defaultOptions:R.options})}else throw new Error(`Scenes: Unsupported variable type ${R.kind}`)}}function F(R){return T.sB in R.spec.query.spec?R.spec.query.spec[T.sB]??"":{...R.spec.query.spec,refId:R.spec.query.spec.refId??"A"}}function I(R,G){const w=Array.isArray(R.spec.current.value)?R.spec.current.value[0]:R.spec.current.value;return w.startsWith("$__auto_interval_")?"$__auto":G.includes(w)?w:G[0]}function V(R){const G=R.variables.map(w=>{try{if(w.kind==="AdhocVariable"){const _=(0,D.DG)({type:w.group,uid:w.datasource?.name},w.group);return new r.H9({name:w.spec.name,label:w.spec.label,readOnly:!0,description:w.spec.description,skipUrlSync:w.spec.skipUrlSync,hide:(0,P.cc)(w.spec.hide),datasource:_,applyMode:"auto",filters:w.spec.filters??[],baseFilters:w.spec.baseFilters??[],defaultKeys:w.spec.defaultKeys,useQueriesAsFilterForOptions:!0,layout:s.$.featureToggles.newFiltersUI?"combobox":void 0,supportsMultiValueOperators:!!(0,l.l)().getInstanceSettings(_)?.meta.multiValueFilterOperators})}return M(w)}catch(_){return console.error(_),null}}).filter(w=>!!w);return new r.Pj({variables:G})}function M(R){let G,w;if(R.kind==="IntervalVariable"){const _=(0,y.Sm)(R.spec.query),Q=I(R,_);return G=new x.B({name:R.spec.name,label:R.spec.label,description:R.spec.description,value:Q,text:Q,hide:(0,P.cc)(R.spec.hide)}),G}return R.kind==="ConstantVariable"||R.kind==="AdhocVariable"?w={value:"",text:""}:w={value:R.spec.current?.value??"",text:R.spec.current?.text??""},G=new x.B({name:R.spec.name,label:R.spec.label,description:R.spec.description,value:w?.value??"",text:w?.text??"",hide:(0,P.cc)(R.spec.hide)}),G}function L(R,G){return R.elements[G].kind==="Panel"?R.elements[G]:void 0}function N(R,G){return R.elements[G].kind==="LibraryPanel"?R.elements[G]:void 0}function W(R){return R.annotations.some(_=>_.spec.builtIn)?void 0:{kind:"AnnotationQuery",spec:{query:{kind:"DataQuery",version:(0,c.iM)().version,group:"grafana",datasource:{name:"-- Grafana --"},spec:{}},name:"Annotations & Alerts",iconColor:i.Mk,enable:!0,hide:!0,builtIn:!0}}}},31200:(ne,A,e)=>{"use strict";e.d(A,{$H:()=>a,Nc:()=>n,Rq:()=>s,p0:()=>c});const n=i=>i===""||s(i)?i:`"${i}"`,a=i=>{if(s(i))return i;let h="U__";for(let f=0;f<i.length;f++){const g=i[f],u=i.codePointAt(f);g==="_"?h+="__":u!==void 0&&l(g,f)?h+=g:u===void 0||!r(u)?h+="_FFFD_":(h+="_",h+=u.toString(16),h+="_"),u!==void 0&&u>65535&&f++}return h},s=i=>{if(i.length===0)return!1;for(let o=0;o<i.length;o++){const h=i[o];if(!l(h,o))return!1}return!0},l=(i,o)=>{const h=i.codePointAt(0);return h===void 0?!1:h>=97&&h<=122||h>=65&&h<=90||h===95||h===58||h>=48&&h<=57&&o>0},r=i=>i>=0&&i<=1114111,c=i=>{const o=[],h=/(=~|!=|!~|=)/;let f="",g="",u=!1,E="";const v=()=>{const p=E.match(h);if(p){const m=p[0];[f,g]=E.split(m),o.push(`${n(f.trim())}${m}"${g.slice(1,-1)}"`)}};for(const p of i)p==='"'&&E[E.length-1]!=="\\"?(u=!u,E+=p):p===","&&!u?(v(),E=""):E+=p;return E&&v(),o.join(",")}},31210:(ne,A,e)=>{"use strict";e.d(A,{r:()=>o});var n=e(74848),a=e(96540),s=e(92745),l=e(63142),r=e(45861),c=e(71599),i=e(81538);function o({action:h,...f}){const g=(0,l.$j)(),u=h.style.backgroundColor||g.colors.secondary.main,E=g.colors.getContrastText(u),[v,p]=(0,a.useState)(!1),[m,y]=(0,a.useState)(!1),[d,x]=(0,a.useState)({}),b=h.variables&&h.variables.length>0,D=()=>{b?y(!0):p(!0)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.$n,{variant:"primary",size:"sm",onClick:D,...f,style:{width:"fit-content",backgroundColor:u,color:E},children:h.title}),b&&m&&(0,n.jsx)(i.b,{onDismiss:()=>y(!1),action:h,onShowConfirm:()=>p(!0),variables:d,setVariables:x}),v&&(0,n.jsx)(c.u,{isOpen:!0,title:(0,s.t)("grafana-ui.action-editor.button.confirm-action","Confirm action"),body:h.confirmation(d),confirmText:(0,s.t)("grafana-ui.action-editor.button.confirm","Confirm"),confirmButtonVariant:"primary",onConfirm:()=>{p(!1),h.onClick(new MouseEvent("click"),null,d)},onDismiss:()=>{p(!1)}})]})}},31221:()=>{(function(ne){var A={series:{stack:null}};function e(n){function a(l,r){for(var c=null,i=0;i<r.length&&l!=r[i];++i)r[i].stack==l.stack&&(c=r[i]);return c}function s(l,r,c){if(!(r.stack==null||r.stack===!1)){var i=a(r,l.getData());if(i){for(var o=c.pointsize,h=c.points,f=i.datapoints.pointsize,g=i.datapoints.points,u=[],E,v,p,m,y,d,x=r.lines.show,b=r.bars.horizontal,D=o>2&&(b?c.format[2].x:c.format[2].y),C=x&&r.lines.steps,P=b?1:0,T=b?0:1,O=0,S=0,B,K;!(O>=h.length&&S>=g.length);){if(B=u.length,O<h.length&&h[O]==null){for(K=0;K<o;++K)u.push(h[O+K]);O+=o}else if(O>=h.length){for(K=0;K<o;++K)u.push(g[S+K]);D&&(u[B+2]=g[S+T]),S+=f}else if(S>=g.length){for(K=0;K<o;++K)u.push(h[O+K]);O+=o}else if(S<g.length&&g[S]==null)S+=f;else{if(E=h[O+P],v=h[O+T],m=g[S+P],y=g[S+T],d=0,E==m){for(K=0;K<o;++K)u.push(h[O+K]);u[B+T]+=y,d=y,O+=o,S+=f}else if(E>m){if(O==0){for(K=0;K<o;++K)u.push(g[S+K]);d=y}if(O>0&&h[O-o]!=null){for(p=0,u.push(m),u.push(p+y),K=2;K<o;++K)u.push(h[O+K]);d=y}S+=f}else{for(K=0;K<o;++K)u.push(h[O+K]);S>0&&g[S-f]!=null&&(d=0),u[B+T]+=d,O+=o}fromgap=!1,B!=u.length&&D&&(u[B+2]=d)}if(C&&B!=u.length&&B>0&&u[B]!=null&&u[B]!=u[B-o]&&u[B+1]!=u[B-o+1]){for(K=0;K<o;++K)u[B+o+K]=u[B+K];u[B+1]=u[B-o+1]}}c.points=u}}}n.hooks.processDatapoints.push(s)}ne.plot.plugins.push({init:e,options:A,name:"stack",version:"1.2"})})(jQuery)},31595:(ne,A,e)=>{"use strict";e.d(A,{Q:()=>s});var n=e(96540),a=e(79450);function s(){const l=(0,n.useContext)(a.b);return l||null}},31819:(ne,A,e)=>{"use strict";e.d(A,{G:()=>h,U:()=>f});var n=e(74848),a=e(96540),s=e(92745),l=e(45863),r=e(18857),c=e(43243),i=e(52763),o=e(93612);const h=({repeat:g,onChange:u,id:E})=>{const v=(0,i.d4)(y=>(0,o.SS)((0,o.y7)(y),y)),p=(0,a.useMemo)(()=>{const y=v.map(d=>({label:d.name,value:d.name}));return y.length===0&&y.unshift({label:(0,s.t)("dashboard.repeat-row-select.variable-options.label.no-template-variables-found","No template variables found"),value:null}),y.unshift({label:(0,s.t)("dashboard.repeat-row-select.variable-options.label.disable-repeating","Disable repeating"),value:null}),y},[v]),m=(0,a.useCallback)(y=>u(y.value),[u]);return(0,n.jsx)(r.l6,{inputId:E,value:g,onChange:m,options:p})},f=({sceneContext:g,repeat:u,id:E,onChange:v})=>{const m=(0,a.useMemo)(()=>l.jh.getVariables(g.getRoot()),[g]).useState().variables,y=(0,a.useMemo)(()=>{const b=m.map(D=>({label:D.state.name,value:D.state.name}));return b.unshift({label:(0,s.t)("dashboard.repeat-row-select2.variable-options.label.disable-repeating","Disable repeating"),value:""}),b},[m]),d=(0,a.useCallback)(b=>b&&v(b.value),[v]),x=!u&&y.length<=1;return(0,n.jsx)(c.G,{id:E,value:u,onChange:d,options:y,disabled:x,placeholder:x?(0,s.t)("dashboard.repeat-row-select2.variable-options.label.no-template-variables-found","No template variables found"):(0,s.t)("dashboard.repeat-row-select2.placeholder","Choose")})}},31937:(ne,A,e)=>{"use strict";e.d(A,{UH:()=>i,k9:()=>h,vn:()=>f});var n=e(96540),a=e(43173),s=e(69896),l=e(27963),r=e(51702),c=e(58449);function i(){const{chrome:g}=(0,l.Il)(),u=g.state.getValue(),E=(0,s.b)(),v=(0,r.i)("xl"),[p,m]=(0,n.useState)(o(u,E?.state.enabled,v));return(0,n.useEffect)(()=>{const y=g.state.subscribe(d=>{const x=o(d,E?.state.enabled,v);x!==p&&m(x)});return()=>y.unsubscribe()},[g,p,E,v]),p}function o(g,u=!1,E){return g.kioskMode||g.chromeless?0:u?2:g.actions?g.megaMenuDocked||!a.$.featureToggles.dashboardScene?2:E&&a.$.featureToggles.unifiedNavbars?1:2:1}function h(){const g=i(),{isOpen:u}=(0,c.sA)();return u?0:g*f()}function f(){return 40}},32154:(ne,A,e)=>{"use strict";e.d(A,{g:()=>q,K:()=>ee});var n=e(74848),a=e(22803),s=e(96540),l=e(28105),r=e(22592),c=e(48480),i=e(1906),o=e(51898),h=e(92745),f=e(78282),g=e(36490),u=e(41654),E=e(45861),v=e(92807),p=e(22787),m=e(65240),y=e(51115),d=e(16817),x=e(67458),b=e(68143),D=e(6975);function C({pluginId:J}){const{value:Z,loading:te,error:se}=(0,d.A)(async()=>(0,b.AI)().get(`/api/plugins/${J}/markdown/query_help`),[]),ie=(0,x.G)(Z);return te?(0,n.jsx)(D._,{text:(0,h.t)("plugins.plugin-help.loading","Loading help...")}):se?(0,n.jsx)("h3",{children:(0,n.jsx)(h.x6,{i18nKey:"plugins.plugin-help.error",children:"An error occurred when loading help."})}):Z===""?(0,n.jsx)("h3",{children:(0,n.jsx)(h.x6,{i18nKey:"plugins.plugin-help.not-found",children:"No query help could be found."})}):(0,n.jsx)("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:ie}})}var P=e(65642),T=e(83873),O=e(1404),S=e(41776),B=e(76792),K=e(29328),U=e(73601),F=e(57204),I=e(23117),V=e(65966),M=e(17548),L=e(63142),N=e(79233),W=e(63527),R=e(21285),G=e(85348);const w=s.memo(({options:J,dataSource:Z,data:te,onChange:se})=>{const[ie,ce]=(0,s.useState)(J.timeRange?.from||""),[re,ue]=(0,s.useState)(J.timeRange?.shift||""),[X,le]=(0,s.useState)(J.timeRange?.hide??!1),[he,fe]=(0,s.useState)(!1),[Ce,Ae]=(0,s.useState)(!0),[_e,Xe]=(0,s.useState)(!0),De=(0,L.of)(ae),Me=(0,s.useCallback)(xe=>{ce(xe.target.value)},[]),Te=(0,s.useCallback)(xe=>{ue(xe.target.value)},[]),$e=(0,s.useCallback)(xe=>{const Ee=Q(xe.target.value),Pe=_(Ee);Pe&&J.timeRange?.from!==Ee&&se({...J,timeRange:{...J.timeRange??{},from:Ee}}),Ae(Pe)},[se,J]),Re=(0,s.useCallback)(xe=>{const Ee=Q(xe.target.value),Pe=_(Ee);Pe&&J.timeRange?.shift!==Ee&&se({...J,timeRange:{...J.timeRange??{},shift:Ee}}),Xe(Pe)},[se,J]),Ke=(0,s.useCallback)(()=>{const xe=!X;le(xe),se({...J,timeRange:{...J.timeRange??{},hide:xe}})},[se,J,X]),Ve=(0,s.useCallback)(xe=>{se({...J,cacheTimeout:Q(xe.target.value)})},[se,J]),Se=(0,s.useCallback)(xe=>{let Ee=parseInt(xe.target.value,10);(isNaN(Ee)||Ee===0)&&(Ee=null),se({...J,queryCachingTTL:Ee})},[se,J]),Ye=(0,s.useCallback)(xe=>{let Ee=parseInt(xe.currentTarget.value,10);(isNaN(Ee)||Ee===0)&&(Ee=null),Ee!==J.maxDataPoints&&se({...J,maxDataPoints:Ee})},[se,J]),Ue=(0,s.useCallback)(xe=>{const Ee=Q(xe.target.value);Ee!==J.minInterval&&se({...J,minInterval:Ee})},[se,J]),je=(0,s.useCallback)(()=>{fe(!0)},[]),Qe=(0,s.useCallback)(()=>{fe(!1)},[]),He=()=>{const xe=`If your time series store has a query cache this option can override the default cache timeout. Specify a
    numeric value in seconds.`;return Z.meta.queryOptions?.cacheTimeout?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.c,{tooltip:xe,htmlFor:"cache-timeout-id",children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-options-editor.render-cache-timeout-option.cache-timeout",children:"Cache timeout"})}),(0,n.jsx)(W.p,{id:"cache-timeout-id",type:"text",placeholder:"60",spellCheck:!1,onBlur:Ve,defaultValue:J.cacheTimeout??""})]}):null},Je=()=>{const xe="Cache time-to-live: How long results from this queries in this panel will be cached, in milliseconds. Defaults to the TTL in the caching configuration for this datasource.";return Z.cachingConfig?.enabled?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.c,{tooltip:xe,children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-options-editor.render-query-caching-ttloption.cache-ttl",children:"Cache TTL"})}),(0,n.jsx)(W.p,{type:"number",placeholder:`${Z.cachingConfig.TTLMs}`,spellCheck:!1,onBlur:Se,defaultValue:J.queryCachingTTL??void 0})]}):null},de=()=>{const xe=te.request?.maxDataPoints,Ee=J.maxDataPoints??"",Pe=Ee==="";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.c,{htmlFor:"max-data-points-input",tooltip:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-options-editor.render-max-data-points-option.max-data-points-tooltip",children:"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer."}),children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-options-editor.render-max-data-points-option.max-data-points",children:"Max data points"})}),(0,n.jsx)(W.p,{id:"max-data-points-input",type:"number",placeholder:`${xe}`,spellCheck:!1,onBlur:Ye,defaultValue:Ee}),Pe&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:(0,a.cx)(De.noSquish,De.operator),children:"="}),(0,n.jsx)("span",{className:(0,a.cx)(De.noSquish,De.left),children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-options-editor.render-max-data-points-option.width-of-panel",children:"Width of panel"})})]})]})},ve=()=>{const xe=te.request?.interval,Ee=Z.interval??"No limit";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.c,{className:De.firstColumn,tooltip:(0,n.jsxs)(h.x6,{i18nKey:"query.query-group-options-editor.render-interval-option.min-interval-tooltip",children:["A lower limit for the interval. Recommended to be set to write frequency, for example ",(0,n.jsx)("code",{children:"1m"})," if your data is written every minute. Default value can be set in data source settings for most data sources."]}),htmlFor:"min-interval-input",children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-options-editor.render-interval-option.min-interval",children:"Min interval"})}),(0,n.jsx)(W.p,{id:"min-interval-input",type:"text",placeholder:`${Ee}`,spellCheck:!1,onBlur:Ue,defaultValue:J.minInterval??""}),(0,n.jsx)(N.c,{className:De.firstColumn,tooltip:(0,n.jsxs)(h.x6,{i18nKey:"query.query-group-options-editor.render-interval-option.interval-tooltip",children:["The evaluated interval that is sent to data source and is used in ",(0,n.jsx)("code",{children:"$__interval"})," and"," ",(0,n.jsx)("code",{children:"$__interval_ms"}),". This value is not exactly equal to ",(0,n.jsx)("code",{children:"Time range / max data points"}),", it will approximate a series of magic number."]}),children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-options-editor.render-interval-option.interval",children:"Interval"})}),(0,n.jsx)("span",{className:De.noSquish,children:xe}),(0,n.jsx)("span",{className:(0,a.cx)(De.noSquish,De.operator),children:"="}),(0,n.jsx)("span",{className:(0,a.cx)(De.noSquish,De.left),children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-options-editor.render-interval-option.time-range-max-data-points",children:"Time range / max data points"})})]})},me=()=>{if(he)return;let xe=J.maxDataPoints??"";xe===""&&te.request&&(xe=`auto = ${te.request.maxDataPoints}`);const Ee=te.request?.interval??J.minInterval;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:De.collapsedText,children:(0,n.jsxs)(h.x6,{i18nKey:"query.query-group-options-editor.collapsed-max-data-points",children:["MD = ",{mdDesc:xe}]})}),(0,n.jsx)("span",{className:De.collapsedText,children:(0,n.jsxs)(h.x6,{i18nKey:"query.query-group-options-editor.collapsed-interval",children:["Interval = ",{intervalDesc:Ee}]})})]})};return(0,n.jsx)(G.u,{id:"Query options",index:0,title:(0,h.t)("query.query-group-options-editor.Query options-title-query-options","Query options"),headerElement:me(),isOpen:he,onOpen:je,onClose:Qe,children:(0,n.jsxs)("div",{className:De.grid,children:[de(),ve(),He(),Je(),(0,n.jsx)(N.c,{htmlFor:"relative-time-input",tooltip:(0,n.jsxs)(h.x6,{i18nKey:"query.query-group-options-editor.relative-time-tooltip",values:{relativeFrom:"now-5m",relativeTo:"5m",variable:"$_relativeTime"},children:["Overrides the relative time range for individual panels, which causes them to be different than what is selected in the dashboard time picker in the top-right corner of the dashboard. For example to configure the Last 5 minutes the Relative time should be ",(0,n.jsx)("code",{children:"{{relativeFrom}}"})," and"," ",(0,n.jsx)("code",{children:"{{relativeTo}}"}),", or variables like ",(0,n.jsx)("code",{children:"{{variable}}"}),"."]}),children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-options-editor.relative-time",children:"Relative time"})}),(0,n.jsx)(W.p,{id:"relative-time-input",type:"text",placeholder:"1h",onChange:Me,onBlur:$e,invalid:!Ce,value:ie}),(0,n.jsx)(N.c,{htmlFor:"time-shift-input",className:De.firstColumn,tooltip:(0,n.jsxs)(h.x6,{i18nKey:"query.query-group-options-editor.time-shift-tooltip",values:{relativeFrom:"now-1h",relativeTo:"1h",variable:"$_timeShift"},children:["Overrides the time range for individual panels by shifting its start and end relative to the time picker. For example to configure the Last 1h the Time shift should be ",(0,n.jsx)("code",{children:"{{relativeFrom}}"})," and"," ",(0,n.jsx)("code",{children:"{{relativeTo}}"}),", or variables like ",(0,n.jsx)("code",{children:"{{variable}}"}),"."]}),children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-options-editor.time-shift",children:"Time shift"})}),(0,n.jsx)(W.p,{id:"time-shift-input",type:"text",placeholder:"1h",onChange:Te,onBlur:Re,invalid:!_e,value:re}),(re||ie)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.c,{htmlFor:"hide-time-info-switch",className:De.firstColumn,children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-options-editor.hide-time-info",children:"Hide time info"})}),(0,n.jsx)(R.K,{id:"hide-time-info-switch",className:De.left,value:X,onChange:Ke})]})]})})});w.displayName="QueryGroupOptionsEditor";function _(J){return!J||M.isValidTimeSpan(J)}function Q(J){return J===""?null:J}function ae(J){return{grid:(0,a.css)({display:"grid",gridTemplateColumns:"auto minmax(5em, 1fr) auto 1fr",gap:J.spacing(.5),gridAutoRows:J.spacing(4),whiteSpace:"nowrap"}),firstColumn:(0,a.css)({gridColumn:1}),collapsedText:(0,a.css)({marginLeft:J.spacing(2),fontSize:J.typography.size.sm,color:J.colors.text.secondary}),noSquish:(0,a.css)({display:"flex",alignItems:"center",padding:J.spacing(0,1),fontWeight:J.typography.fontWeightMedium,fontSize:J.typography.size.sm,backgroundColor:J.colors.background.secondary,borderRadius:J.shape.radius.default}),left:(0,a.css)({justifySelf:"left"}),operator:(0,a.css)({color:J.v1.palette.orange})}}class q extends s.PureComponent{constructor(){super(...arguments),this.backendSrv=T.IB,this.dataSourceSrv=(0,f.l)(),this.querySubscription=null,this.state={isDataSourceModalOpen:!!g.Ny.getSearchObject().firstPanel,isLoadingHelp:!1,helpContent:null,isPickerOpen:!1,isHelpOpen:!1,queries:[],data:{state:l.Gu.NotStarted,series:[],timeRange:(0,r.E2)()}},this.onChangeDataSource=async(Z,te)=>{const{dsSettings:se}=this.state,ie=se?await(0,f.l)().get(se.uid):void 0,ce=await(0,f.l)().get(Z.uid),re=te||await(0,F.y)(ce,Z.uid,this.state.queries,ie),ue=await this.dataSourceSrv.get(Z.name);this.onChange({queries:re,dataSource:{name:Z.name,uid:Z.uid,...(0,c.p$)(Z)}}),this.setState({queries:re,dataSource:ue,dsSettings:Z}),te&&this.props.onRunQueries()},this.onAddQueryClick=()=>{const{queries:Z}=this.state;this.onQueriesChange((0,O.U7)(Z,this.newQuery())),this.onScrollBottom()},this.onAddExpressionClick=()=>{this.onQueriesChange((0,O.U7)(this.state.queries,K.Ex.newQuery())),this.onScrollBottom()},this.onScrollBottom=()=>{setTimeout(()=>{this.state.scrollElement&&this.state.scrollElement.scrollTo({top:1e4})},20)},this.onUpdateAndRun=Z=>{this.props.onOptionsChange(Z),this.props.onRunQueries()},this.onOpenHelp=()=>{this.setState({isHelpOpen:!0})},this.onCloseHelp=()=>{this.setState({isHelpOpen:!1})},this.onCloseDataSourceModal=()=>{this.setState({isDataSourceModalOpen:!1})},this.onAddQuery=Z=>{const{dsSettings:te,queries:se}=this.state;this.onQueriesChange((0,O.U7)(se,Z,te?(0,c.p$)(te):{type:void 0,uid:void 0})),this.onScrollBottom()},this.onQueriesChange=Z=>{this.onChange({queries:Z}),this.setState({queries:Z})},this.setScrollRef=Z=>{this.setState({scrollElement:Z})}}async componentDidMount(){const{options:Z,queryRunner:te}=this.props;this.querySubscription=te.getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:se=>this.onPanelDataUpdate(se)}),this.setNewQueriesAndDatasource(Z)}componentWillUnmount(){this.querySubscription&&(this.querySubscription.unsubscribe(),this.querySubscription=null)}async componentDidUpdate(){const{options:Z}=this.props,te=await(0,f.l)().get(Z.dataSource);this.state.dataSource&&te.uid!==this.state.dataSource?.uid&&this.setNewQueriesAndDatasource(Z)}async setNewQueriesAndDatasource(Z){try{const te=await this.dataSourceSrv.get(Z.dataSource),se=this.dataSourceSrv.getInstanceSettings(Z.dataSource),ie=await this.dataSourceSrv.get(),ce=te.getRef(),re=Z.queries.map(ue=>({...(0,O.Ih)(ue)&&te?.getDefaultQuery?.(i.Jk.PanelEditor),datasource:ce,...ue}));this.setState({queries:re,dataSource:te,dsSettings:se,defaultDataSource:ie})}catch(te){console.error("failed to load data source",te)}}onPanelDataUpdate(Z){this.setState({data:Z})}newQuery(){const{dsSettings:Z,defaultDataSource:te}=this.state,se=Z&&!Z.meta.mixed?(0,c.p$)(Z):te?te.getRef():{type:void 0,uid:void 0};return{...this.state.dataSource?.getDefaultQuery?.(i.Jk.PanelEditor),datasource:se}}onChange(Z){this.props.onOptionsChange({...this.props.options,...Z})}renderTopSection(Z){const{onOpenQueryInspector:te,options:se}=this.props,{dataSource:ie,data:ce,dsSettings:re}=this.state;return!re||!ie?null:(0,n.jsx)(ee,{data:ce,dataSource:ie,options:se,dsSettings:re,onOptionsChange:this.onUpdateAndRun,onDataSourceChange:this.onChangeDataSource,onOpenQueryInspector:te})}renderQueries(Z){const{onRunQueries:te}=this.props,{data:se,queries:ie}=this.state;return(0,n.jsx)("div",{"aria-label":o.Tp.components.QueryTab.content,children:(0,n.jsx)(V.L,{queries:ie,dsSettings:Z,onQueriesChange:this.onQueriesChange,onAddQuery:this.onAddQuery,onRunQueries:te,data:se})})}isExpressionsSupported(Z){return(Z.meta.backend||Z.meta.alerting||Z.meta.mixed)===!0}renderExtraActions(){return I.m.getAllExtraRenderAction().map((Z,te)=>Z({onAddQuery:this.onAddQuery,onChangeDataSource:this.onChangeDataSource,key:te})).filter(Boolean)}renderAddQueryRow(Z,te){const se=!(0,U.k)(Z.name);return(0,n.jsxs)(u.B,{gap:2,alignItems:"flex-start",children:[se&&(0,n.jsx)(E.$n,{icon:"plus",onClick:this.onAddQueryClick,variant:"secondary","data-testid":o.Tp.components.QueryTab.addQuery,children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group.add-query",children:"Add query"})}),P.Ay.expressionsEnabled&&this.isExpressionsSupported(Z)&&(0,n.jsx)(E.$n,{icon:"plus",onClick:this.onAddExpressionClick,variant:"secondary",className:te.expressionButton,"data-testid":"query-tab-add-expression",children:(0,n.jsx)("span",{children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group.expression",children:"Expression"})})}),this.renderExtraActions()]})}render(){const{isHelpOpen:Z,dsSettings:te}=this.state,se=k();return(0,n.jsx)(v.P,{minHeight:"100%",ref:this.setScrollRef,children:(0,n.jsxs)("div",{className:se.innerWrapper,children:[this.renderTopSection(se),te&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:se.queriesWrapper,children:this.renderQueries(te)}),this.renderAddQueryRow(te,se),Z&&(0,n.jsx)(p.a,{title:(0,h.t)("query.query-group.title-data-source-help","Data source help"),isOpen:!0,onDismiss:this.onCloseHelp,children:(0,n.jsx)(C,{pluginId:te.meta.id})})]})]})})}}const k=(0,m.N)(()=>{const{theme:J}=P.Ay;return{innerWrapper:(0,a.css)({display:"flex",flexDirection:"column",padding:J.spacing.md}),dataSourceRow:(0,a.css)({display:"flex",marginBottom:J.spacing.md}),dataSourceRowItem:(0,a.css)({marginRight:J.spacing.inlineFormMargin}),dataSourceRowItemOptions:(0,a.css)({flexGrow:1,marginRight:J.spacing.inlineFormMargin}),queriesWrapper:(0,a.css)({paddingBottom:"16px"}),expressionWrapper:(0,a.css)({}),expressionButton:(0,a.css)({marginRight:J.spacing.sm})}});function ee({dataSource:J,options:Z,data:te,dsSettings:se,onDataSourceChange:ie,onOptionsChange:ce,onOpenQueryInspector:re}){const ue=k(),[X,le]=(0,s.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{"data-testid":o.Tp.components.QueryTab.queryGroupTopSection,children:(0,n.jsxs)("div",{className:ue.dataSourceRow,children:[(0,n.jsx)(y.I,{htmlFor:"data-source-picker",width:"auto",children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-top-section.data-source",children:"Data source"})}),(0,n.jsx)("div",{className:ue.dataSourceRowItem,children:(0,n.jsx)(j,{options:Z,onChange:async(he,fe)=>await ie?.(he,fe),isDataSourceModalOpen:!!g.Ny.getSearchObject().firstPanel})}),J&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:ue.dataSourceRowItem,children:(0,n.jsx)(E.$n,{variant:"secondary",icon:"question-circle",tooltip:(0,h.t)("query.query-group-top-section.query-tab-help-button-title-open-data-source-help","Open data source help"),onClick:()=>le(!0),"data-testid":"query-tab-help-button"})}),(0,n.jsx)("div",{className:ue.dataSourceRowItemOptions,children:(0,n.jsx)(w,{options:Z,dataSource:J,data:te,onChange:he=>{ce?.(he)}})}),re&&(0,n.jsx)("div",{className:ue.dataSourceRowItem,children:(0,n.jsx)(E.$n,{variant:"secondary",onClick:re,"aria-label":o.Tp.components.QueryTab.queryInspectorButton,children:(0,n.jsx)(h.x6,{i18nKey:"query.query-group-top-section.query-inspector",children:"Query inspector"})})})]})]})}),X&&(0,n.jsx)(p.a,{title:(0,h.t)("query.query-group-top-section.title-data-source-help","Data source help"),isOpen:!0,onDismiss:()=>le(!1),children:(0,n.jsx)(C,{pluginId:se.meta.id})})]})}function j({options:J,onChange:Z,...te}){const[se,ie]=(0,s.useState)(!!te.isDataSourceModalOpen);(0,s.useEffect)(()=>{g.Ny.getSearchObject().firstPanel&&g.Ny.partial({firstPanel:null},!0)},[]);const ce={metrics:!0,mixed:!0,dashboard:!0,variables:!0,current:J.dataSource,uploadFile:!0,onChange:async(re,ue)=>{await Z(re,ue),ie(!1)}};return(0,n.jsxs)(n.Fragment,{children:[se&&(0,n.jsx)(S.p,{...ce,onDismiss:()=>ie(!1)}),(0,n.jsx)(B.sk,{...ce})]})}},32157:(ne,A,e)=>{"use strict";e.d(A,{Wj:()=>f,rV:()=>h});var n=e(81160),a=e(41119),s=e(16515),l=e(95004),r=e(46644),c=e(36638),i=e(6844),o=e(64761),h=(m=>(m.SeriesToRows="seriesToRows",m.ReduceFields="reduceFields",m))(h||{});const f={id:o.F.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last.",defaultOptions:{reducers:[r.gy.max]},operator:m=>y=>y.pipe((0,n.T)(d=>{if(!m?.reducers?.length)return d;const x=m.fields?(0,c.NS)(m.fields):m.includeTimeField&&m.mode==="reduceFields"?i.Yg:i.zx;if(m.mode==="reduceFields")return v(d,x,m.reducers);const b=g(d,x,m.reducers,m.labelsToFields);return b?[{...b,refId:`${o.F.reduce}-${d.map(D=>D.refId).join("-")}`}]:[]}))};function g(m,y,d,x){const b=r.AS.list(d),D=b.map(T=>T.id),C=[],P=x?u(m):[];for(const T of m){const O=T.fields.filter(I=>y(I,T,m)),S=O.length,B=[],K=new Array(S);B.push({name:"Field",type:l.PU.string,values:K,config:{}});const U={};if(x)for(const I of P)U[I]=new Array(S),B.push({name:I,type:l.PU.string,values:U[I],config:{}});const F={};for(const I of b)F[I.id]=new Array(S),B.push({name:I.name,type:l.PU.other,values:F[I.id],config:{}});for(let I=0;I<O.length;I++){const V=O[I],M=(0,r.Nw)({field:V,reducers:D});if(x){if(K[I]=V.name,V.labels)for(const L in V.labels)U[L][I]=V.labels[L]}else K[I]=(0,s.Ct)(V,T,m);for(const L of b){const N=M[L.id];N===null?F[L.id][I]=NaN:F[L.id][I]=N}}for(const I of B)if(I.type===l.PU.other){const V=(0,a.dF)(I);V&&(I.type=V)}C.push({...T,fields:B,length:S})}return E(C)}function u(m){const y=new Set;for(const d of m)for(const x of d.fields)if(x.labels)for(const b of Object.keys(x.labels))y.add(b);return[...y]}function E(m){if(!m?.length)return;const y=m[0];for(let d=1;d<m.length;d++){const x=m[d];for(let b=0;b<y.fields.length;b++){const D=y.fields[b];for(let C=0;C<x.fields.length;C++){const P=x.fields[C],T=b===0&&C===0,O=D.type===P.type&&D.name===P.name;if(T||O){const S=D.values,B=P.values;D.values=S.concat(B)}}}}return y.name=void 0,y.length=y.fields[0].values.length,y}function v(m,y,d){const b=r.AS.list(d).map(C=>C.id),D=[];for(const C of m){const P=[];for(const T of C.fields)if(y(T,C,m)){const O=(0,r.Nw)({field:T,reducers:b});for(const S of b){const B=O[S],K={...T,labels:{...T.labels},type:p(S,T),values:[B],state:void 0};b.length>1&&(K.labels||(K.labels={}),K.labels.reducer=r.AS.get(S).name),P.push(K)}}P.length&&D.push({...C,fields:P,length:1})}return D}function p(m,y){switch(m){case r.gy.allValues:case r.gy.uniqueValues:return l.PU.other;case r.gy.first:case r.gy.firstNotNull:case r.gy.last:case r.gy.lastNotNull:return y.type;default:return l.PU.number}}},32176:()=>{(function(ne){var A={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(h,f){return f*Math.floor(h/f)}function n(h,f,g,u){if(typeof h.strftime=="function")return h.strftime(f);var E=function(D,C){return D=""+D,C=""+(C??"0"),D.length==1?C+D:D},v=[],p=!1,m=h.getHours(),y=m<12;g==null&&(g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),u==null&&(u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var d;m>12?d=m-12:m==0?d=12:d=m;for(var x=0;x<f.length;++x){var b=f.charAt(x);if(p){switch(b){case"a":b=""+u[h.getDay()];break;case"b":b=""+g[h.getMonth()];break;case"d":b=E(h.getDate(),"");break;case"e":b=E(h.getDate()," ");break;case"h":case"H":b=E(m);break;case"I":b=E(d);break;case"l":b=E(d," ");break;case"m":b=E(h.getMonth()+1,"");break;case"M":b=E(h.getMinutes());break;case"q":b=""+(Math.floor(h.getMonth()/3)+1);break;case"S":b=E(h.getSeconds());break;case"y":b=E(h.getFullYear()%100);break;case"Y":b=""+h.getFullYear();break;case"p":b=y?"am":"pm";break;case"P":b=y?"AM":"PM";break;case"w":b=""+h.getDay();break}v.push(b),p=!1}else b=="%"?p=!0:v.push(b)}return v.join("")}function a(h){function f(v,p,m,y){v[p]=function(){return m[y].apply(m,arguments)}}var g={date:h};h.strftime!=null&&f(g,"strftime",h,"strftime"),f(g,"getTime",h,"getTime"),f(g,"setTime",h,"setTime");for(var u=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],E=0;E<u.length;E++)f(g,"get"+u[E],h,"getUTC"+u[E]),f(g,"set"+u[E],h,"setUTC"+u[E]);return g}function s(h,f){if(f.timezone=="browser")return new Date(h);if(!f.timezone||f.timezone=="utc")return a(new Date(h));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var g=new timezoneJS.Date;return g.setTimezone(f.timezone),g.setTime(h),g}else return a(new Date(h))}var l={second:1e3,minute:60*1e3,hour:3600*1e3,day:1440*60*1e3,month:720*60*60*1e3,quarter:2160*60*60*1e3,year:365.2425*24*60*60*1e3},r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],c=r.concat([[3,"month"],[6,"month"],[1,"year"]]),i=r.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function o(h){h.hooks.processOptions.push(function(f,g){ne.each(f.getAxes(),function(u,E){var v=E.options;v.mode=="time"&&(E.tickGenerator=function(p){var m=[],y=s(p.min,v),d=0,x=v.tickSize&&v.tickSize[1]==="quarter"||v.minTickSize&&v.minTickSize[1]==="quarter"?i:c;v.minTickSize!=null&&(typeof v.tickSize=="number"?d=v.tickSize:d=v.minTickSize[0]*l[v.minTickSize[1]]);for(var b=0;b<x.length-1&&!(p.delta<(x[b][0]*l[x[b][1]]+x[b+1][0]*l[x[b+1][1]])/2&&x[b][0]*l[x[b][1]]>=d);++b);var D=x[b][0],C=x[b][1];if(C=="year"){if(v.minTickSize!=null&&v.minTickSize[1]=="year")D=Math.floor(v.minTickSize[0]);else{var P=Math.pow(10,Math.floor(Math.log(p.delta/l.year)/Math.LN10)),T=p.delta/l.year/P;T<1.5?D=1:T<3?D=2:T<7.5?D=5:D=10,D*=P}D<1&&(D=1)}p.tickSize=v.tickSize||[D,C];var O=p.tickSize[0];C=p.tickSize[1];var S=O*l[C];C=="second"?y.setSeconds(e(y.getSeconds(),O)):C=="minute"?y.setMinutes(e(y.getMinutes(),O)):C=="hour"?y.setHours(e(y.getHours(),O)):C=="month"?y.setMonth(e(y.getMonth(),O)):C=="quarter"?y.setMonth(3*e(y.getMonth()/3,O)):C=="year"&&y.setFullYear(e(y.getFullYear(),O)),y.setMilliseconds(0),S>=l.minute&&y.setSeconds(0),S>=l.hour&&y.setMinutes(0),S>=l.day&&y.setHours(0),S>=l.day*4&&y.setDate(1),S>=l.month*2&&y.setMonth(e(y.getMonth(),3)),S>=l.quarter*2&&y.setMonth(e(y.getMonth(),6)),S>=l.year&&y.setMonth(0);var B=0,K=Number.NaN,U;do if(U=K,K=y.getTime(),m.push(K),C=="month"||C=="quarter")if(O<1){y.setDate(1);var F=y.getTime();y.setMonth(y.getMonth()+(C=="quarter"?3:1));var I=y.getTime();y.setTime(K+B*l.hour+(I-F)*O),B=y.getHours(),y.setHours(0)}else y.setMonth(y.getMonth()+O*(C=="quarter"?3:1));else C=="year"?y.setFullYear(y.getFullYear()+O):y.setTime(K+S);while(K<p.max&&K!=U);return m},E.tickFormatter=function(p,m){var y=s(p,m.options);if(v.timeformat!=null)return n(y,v.timeformat,v.monthNames,v.dayNames);var d=m.options.tickSize&&m.options.tickSize[1]=="quarter"||m.options.minTickSize&&m.options.minTickSize[1]=="quarter",x=m.tickSize[0]*l[m.tickSize[1]],b=m.max-m.min,D=v.twelveHourClock?" %p":"",C=v.twelveHourClock?"%I":"%H",P;x<l.minute?P=C+":%M:%S"+D:x<l.day?b<2*l.day?P=C+":%M"+D:P="%b %d "+C+":%M"+D:x<l.month?P="%b %d":d&&x<l.quarter||!d&&x<l.year?b<l.year?P="%b":P="%b %Y":d&&x<l.year?b<l.year?P="Q%q":P="Q%q %Y":P="%Y";var T=n(y,P,v.monthNames,v.dayNames);return T})})})}ne.plot.plugins.push({init:o,options:A,name:"time",version:"1.0"}),ne.plot.formatDate=n})(jQuery)},32225:(ne,A,e)=>{"use strict";e.r(A),e.d(A,{NestedFolderPicker:()=>_e});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(46885),c=e(76459),i=e.n(c),o=e(96540),h=e(92745),f=e(63142),g=e(41654),u=e(66404),E=e(63527),v=e(30703),p=e(34999),m=e(47327),y=e(98970),d=e(47797),x=e(55860),b=e(93854),D=e(70590),C=e(82151),P=e(70255),T=e(91793),O=e(10022),S=e(76319),B=e(90666),K=e(80231),U=e(52763);const F=40,I="md",V=(De,Me)=>`${De}-${Me||"root"}`;function M({items:De,focusedItemIndex:Me,foldersAreOpenable:Te,idPrefix:$e,selectedFolder:Re,onFolderExpand:Ke,onFolderSelect:Ve,isItemLoaded:Se,requestLoadMore:Ye}){const Ue=(0,o.useRef)(null),je=(0,f.of)(W),Qe=(0,o.useMemo)(()=>({items:De,focusedItemIndex:Me,foldersAreOpenable:Te,selectedFolder:Re,onFolderExpand:Ke,onFolderSelect:Ve,idPrefix:$e}),[De,Me,Te,Re,Ke,Ve,$e]),He=(0,o.useCallback)(de=>Se(de),[Se]),Je=(0,o.useCallback)((de,ve)=>{const{parentUID:me}=De[de];Ye(me)},[Ye,De]);return(0,n.jsx)("div",{className:je.table,role:"tree",children:De.length>0?(0,n.jsx)(O.A,{ref:Ue,itemCount:De.length,isItemLoaded:He,loadMoreItems:Je,children:({onItemsRendered:de,ref:ve})=>(0,n.jsx)(T.Y1,{ref:ve,height:F*Math.min(6.5,De.length),width:"100%",itemData:Qe,itemSize:F,itemCount:De.length,onItemsRendered:de,children:N})}):(0,n.jsx)("div",{className:je.emptyMessage,children:(0,n.jsx)(h.x6,{i18nKey:"browse-dashboards.folder-picker.empty-message",children:"No folders found"})})})}const L=[100,200,130,160,150];function N({index:De,style:Me,data:Te}){const{items:$e,focusedItemIndex:Re,foldersAreOpenable:Ke,selectedFolder:Ve,onFolderExpand:Se,onFolderSelect:Ye,idPrefix:Ue}=Te,{item:je,isOpen:Qe,level:He,parentUID:Je}=$e[De],de=(0,o.useRef)(null),ve=(0,o.useId)(),me=(0,U.d4)(K.ku),xe=(0,U.d4)(K.Am),Ee=(je.uid?xe[je.uid]:me)?.items??[];let Pe=[];je.uid&&(Pe=(Je?xe[Je]:me)?.items??[]);const Oe=(0,f.of)(W),We=(0,o.useCallback)(Be=>{Be.preventDefault(),Be.stopPropagation(),je.uid&&Se(je.uid,!Qe)},[je.uid,Qe,Se]),Fe=(0,o.useCallback)(()=>{je.kind==="folder"&&Ye(je)},[je,Ye]);if(je.kind==="ui"&&je.uiKind==="pagination-placeholder")return(0,n.jsxs)("span",{style:Me,className:Oe.row,children:[(0,n.jsx)(B.T,{level:He,spacing:2}),(0,n.jsx)(P.A,{width:L[De%L.length]})]});if(je.kind!=="folder"){const Be=je.kind,Le=je.uid;return null}return(0,n.jsx)("div",{ref:de,style:Me,className:(0,a.cx)(Oe.row,{[Oe.rowFocused]:De===Re,[Oe.rowSelected]:je.uid===Ve}),tabIndex:-1,onClick:Fe,"aria-expanded":Qe,"aria-selected":je.uid===Ve,"aria-labelledby":ve,"aria-level":He+1,role:"treeitem","aria-owns":Ee.length>0?Ee.map(Be=>V(Ue,Be.uid)).join(" "):void 0,"aria-setsize":Ee.length,"aria-posinset":Pe.findIndex(Be=>Be.uid===je.uid)+1,id:V(Ue,je.uid),children:(0,n.jsxs)("div",{className:Oe.rowBody,children:[(0,n.jsx)(B.T,{level:He,spacing:2}),Ke?(0,n.jsx)(S.K,{size:I,onMouseDown:We,tabIndex:-1,"aria-label":Qe?`Collapse folder ${je.title}`:`Expand folder ${je.title}`,name:Qe?"angle-down":"angle-right"}):(0,n.jsx)("span",{className:Oe.folderButtonSpacer}),(0,n.jsxs)("label",{className:Oe.label,id:ve,children:[(0,n.jsx)(u.E,{truncate:!0,children:je.title}),(0,n.jsx)(C.b,{folder:je})]})]})})}const W=De=>{const Me=(0,a.css)({height:F,display:"flex",position:"relative",alignItems:"center",flexGrow:1,gap:De.spacing(.5),overflow:"hidden",padding:De.spacing(0,1)});return{table:(0,a.css)({background:De.components.input.background}),emptyMessage:(0,a.css)({padding:De.spacing(1),textAlign:"center",width:"100%"}),folderButtonSpacer:(0,a.css)({paddingLeft:De.spacing(.5)}),row:(0,a.css)({display:"flex",position:"relative",alignItems:"center",":not(:first-child)":{borderTop:`solid 1px ${De.colors.border.weak}`}}),rowFocused:(0,a.css)({backgroundColor:De.colors.background.secondary}),rowSelected:(0,a.css)({"&::before":{display:"block",content:'""',position:"absolute",left:0,bottom:0,top:0,width:4,borderRadius:De.shape.radius.default,backgroundImage:De.colors.gradients.brandVertical}}),rowBody:Me,label:(0,a.css)({display:"flex",alignItems:"center",gap:De.spacing(1),lineHeight:F+"px",flexGrow:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","&:hover":{textDecoration:"underline",cursor:"pointer"}})}};var R=e(35484),G=e(35222);function w({handleClearSelection:De,isLoading:Me,invalid:Te,label:$e,...Re},Ke){const Ve=(0,f.$j)(),Se=Q(Ve,Te),Ye=Ue=>{(Ue.key==="Enter"||Ue.key===" ")&&De?.(Ue)};return Me?(0,n.jsx)(G.A,{}):(0,n.jsx)("div",{className:Se.wrapper,children:(0,n.jsxs)("div",{className:Se.inputWrapper,children:[$e?(0,n.jsx)("div",{className:Se.prefix,children:(0,n.jsx)(v.I,{name:"folder"})}):void 0,(0,n.jsxs)("button",{type:"button",className:(0,a.cx)(Se.fakeInput,$e?Se.hasPrefix:void 0),...Re,ref:Ke,children:[$e?(0,n.jsx)(u.E,{truncate:!0,children:$e}):(0,n.jsx)(u.E,{truncate:!0,color:"secondary",children:(0,n.jsx)(h.x6,{i18nKey:"browse-dashboards.folder-picker.button-label",children:"Select folder"})}),!Me&&De&&(0,n.jsx)(v.I,{role:"button",tabIndex:0,"aria-label":(0,h.t)("browse-dashboards.folder-picker.clear-selection","Clear selection"),className:Se.clearIcon,name:"times",onClick:De,onKeyDown:Ye})]}),(0,n.jsx)("div",{className:Se.suffix,children:(0,n.jsx)(v.I,{name:"angle-down"})})]})})}const _=(0,o.forwardRef)(w),Q=(De,Me=!1)=>{const Te=(0,E.n)({theme:De,invalid:Me});return{wrapper:Te.wrapper,inputWrapper:Te.inputWrapper,prefix:(0,a.css)([Te.prefix,{pointerEvents:"none",color:De.colors.text.primary}]),suffix:(0,a.css)([Te.suffix,{pointerEvents:"none"}]),fakeInput:(0,a.css)([Te.input,{textAlign:"left",letterSpacing:"normal","&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,R.getFocusStyles)(De),alignItems:"center",display:"flex",flexWrap:"nowrap",justifyContent:"space-between",paddingRight:28}]),hasPrefix:(0,a.css)({paddingLeft:28}),clearIcon:(0,a.css)({color:De.colors.text.secondary,cursor:"pointer","&:hover":{color:De.colors.text.primary},"&:focus:not(:focus-visible)":(0,R.getMouseFocusStyles)(De),"&:focus-visible":(0,R.getFocusStyles)(De)})}};var ae=e(43173),q=e(25508),k=e(29189),ee=e(2774),j=e(75735),J=e(27044),Z=e(78034),te=e(34624);const se="general",ie=new Intl.Collator;function ce({isBrowsing:De,openFolders:Me,rootFolderUID:Te,rootFolderItem:$e}){const Re=(0,U.wA)(),Ke=(0,o.useRef)([]),[Ve,Se]=(0,o.useState)([]),Ye=(0,o.useMemo)(()=>(0,q.Mz)(Ve,(...He)=>{let Je=!1;const de={};for(const ve of He){ve.status===k.RE.pending&&(Je=!0);const me=ve.originalArgs?.folder;me&&(de[me]=ve)}return{isLoading:Je,responseByParent:de}}),[Ve]),Ue=(0,U.d4)(Ye),je=(0,o.useCallback)(He=>{const Je=He??se;if(Ue.responseByParent[Je]?.status===k.RE.pending)return;const me={folder:Je,type:"folder"},xe=Re(ee.G.endpoints.getSearch.initiate(me)),Ee=ee.G.endpoints.getSearch.select(me);Se(Pe=>Pe.concat(Ee)),Ke.current=Ke.current.concat([xe])},[Ue,Re]);return(0,o.useEffect)(()=>()=>{for(const He of Ke.current)He.unsubscribe()},[]),{items:(0,o.useMemo)(()=>{if(!De)return[];function He(ve,me,xe){let Ee=me?.data?.hits?[...me.data.hits]:[];Ee.sort((Oe,We)=>ie.compare(Oe.title,We.title));const Pe=Ee.flatMap(Oe=>{const We=Oe.name,Fe=Me[We],Be={isOpen:!!Fe,level:xe,item:{kind:"folder",title:Oe.title,uid:We,managedBy:Oe.metadata?.annotations?.[j.LH]}},Le=Fe&&Ue.responseByParent[We];if(Le){const Ge=He(We,Le,xe+1);return[Be,...Ge]}return Be});return me||Pe.push(...(0,Z.T)(J.md,ve,xe)),Pe}const Je=Te??se,de=He(Je,Ue.responseByParent[Je],1);return de.unshift($e||(0,te.K)()),de},[Ue,De,Me,Te,$e]),isLoading:Ue.isLoading,requestNextPage:je}}var re=e(15203);const ue="pending";function X(De){const Me=De.at(-1),Te=Me?.originalArgs?.page,$e=Me?.status===ue;return Me?.data?[Me.data.length<Me.originalArgs.limit,Te,$e]:[!1,Te,$e]}function le({isBrowsing:De,openFolders:Me,permission:Te,rootFolderUID:$e,rootFolderItem:Re}){const Ke=(0,U.wA)(),Ve=(0,o.useRef)([]),[Se,Ye]=(0,o.useState)([]),Ue=(0,o.useMemo)(()=>(0,q.Mz)(Se,(...Je)=>{let de=!1;const ve=[],me={};for(const xe of Je){xe.status===ue&&(de=!0);const Ee=xe.originalArgs?.parentUid;Ee?(me[Ee]||(me[Ee]=[]),me[Ee].push(xe)):ve.push(xe)}return{isLoading:de,rootPages:ve,pagesByParent:me}}),[Se]),je=(0,U.d4)(Ue),Qe=(0,o.useCallback)(Je=>{const de=Je?je.pagesByParent[Je]:je.rootPages,[ve,me,xe]=X(de??[]);if(ve||xe)return;const Ee={parentUid:Je,page:(me??0)+1,limit:J.md,permission:Te},Pe=Ke(re.cU.endpoints.listFolders.initiate(Ee)),Oe=re.cU.endpoints.listFolders.select({parentUid:Pe.arg.parentUid,page:Pe.arg.page,limit:Pe.arg.limit,permission:Pe.arg.permission});Ye(We=>We.concat(Oe)),Ve.current=Ve.current.concat([Pe])},[je,Ke,Te]);return(0,o.useEffect)(()=>()=>{for(const Je of Ve.current)Je.unsubscribe()},[]),{items:(0,o.useMemo)(()=>{if(!De)return[];function Je(me,xe,Ee){const Pe=xe.flatMap(We=>(We.data??[]).flatMap(Be=>{const Le=Me[Be.uid],Ge={isOpen:!!Le,level:Ee,item:{kind:"folder",title:Be.title,uid:Be.uid,managedBy:Be.managedBy}},Ze=Le&&je.pagesByParent[Be.uid];if(Ze){const qe=Je(Be.uid,Ze,Ee+1);return[Ge,...qe]}return Ge})),[Oe]=X(xe);return Oe||Pe.push(...(0,Z.T)(J.md,me,Ee)),Pe}const de=$e?je.pagesByParent[$e]:je.rootPages,ve=Je($e??void 0,de??[],1);return ve.unshift(Re||(0,te.K)()),ve},[je,De,Me,$e,Re]),isLoading:je.isLoading,requestNextPage:Qe}}function he({isBrowsing:De,openFolders:Me,permission:Te,rootFolderUID:$e,rootFolderItem:Re}){const Ke=le({isBrowsing:De,openFolders:Me,permission:Te,rootFolderUID:$e,rootFolderItem:Re}),Ve=ce({isBrowsing:De,openFolders:Me,rootFolderUID:$e,rootFolderItem:Re});return ae.$.featureToggles.foldersAppPlatformAPI?Ve:Ke}function fe({tree:De,handleCloseOverlay:Me,handleFolderSelect:Te,handleFolderExpand:$e,idPrefix:Re,search:Ke,visible:Ve}){const[Se,Ye]=(0,o.useState)(-1);(0,o.useEffect)(()=>{Ve&&Ye(-1)},[Ve]),(0,o.useEffect)(()=>{Ye(0)},[Ke]),(0,o.useEffect)(()=>{document.getElementById(V(Re,De[Se]?.item.uid))?.scrollIntoView({block:"nearest",inline:"nearest"})},[Se,Re,De]);const Ue=(0,o.useCallback)(je=>{const Qe=!Ke;switch(je.key){case"ArrowRight":case"ArrowLeft":Qe&&(je.preventDefault(),$e(De[Se].item.uid,je.key==="ArrowRight"));break;case"ArrowUp":Se>0&&(je.preventDefault(),Ye(Se-1));break;case"ArrowDown":Se<De.length-1&&(je.preventDefault(),Ye(Se+1));break;case"Enter":je.preventDefault();const He=De[Se].item;He.kind==="folder"&&Te(He);break;case"Tab":je.stopPropagation(),Me();break;case"Escape":je.stopPropagation(),je.preventDefault(),Me();break}},[Se,Me,$e,Te,Ke,De]);return{focusedItemIndex:Se,handleKeyDown:Ue}}const Ce=i()(Ae,300);async function Ae(De,Me){const Te=await(0,x.S)().search({query:De,kind:["folder"],limit:100,permission:Me}),$e=Te.view.map(Re=>(0,b.hI)(Re,Te.view));return{...Te,items:$e}}function _e({value:De,invalid:Me,showRootFolder:Te=!0,clearable:$e=!1,excludeUIDs:Re,rootFolderUID:Ke,rootFolderItem:Ve,permission:Se="edit",onChange:Ye,id:Ue}){const je=(0,f.of)(Xe),Qe=(0,y.u$)(De),He=(0,d.do)(Qe.error)===403,[Je,de]=(0,o.useState)(""),[ve,me]=(0,o.useState)(null),[xe,Ee]=(0,o.useState)(!1),[Pe,Oe]=(0,o.useState)(!1),[We,Fe]=(0,o.useState)(!1),[Be,Le]=(0,o.useState)({}),Ge=(0,o.useId)(),[Ze]=(0,o.useState)(void 0),qe=(0,o.useRef)(0),at=(0,o.useMemo)(()=>{if(Se==="view")return D.RG.View;if(Se==="edit")return D.RG.Edit;throw new Error("Invalid permission")},[Se]),ht=!!(We&&!(Je&&ve)),{items:Et,isLoading:mt,requestNextPage:Pt}=he({isBrowsing:ht,openFolders:Be,permission:at,rootFolderUID:Ke,rootFolderItem:Ve});(0,o.useEffect)(()=>{if(!Je){me(null);return}const mn=Date.now();Ee(!0),Ce(Je,at).then(wn=>{if(mn>qe.current){const Ln=wn.view.map(Zn=>(0,b.hI)(Zn,wn.view));me({...wn,items:Ln}),Ee(!1),qe.current=mn}})},[Je,at]);const rt=[(0,s.UU)({crossAxis:!1,boundary:document.body})],{context:Kt,refs:Gt,floatingStyles:en,elements:st}=(0,l.we)({open:We,placement:"bottom",onOpenChange:mn=>{mn&&(de(""),Oe(!0)),Fe(mn)},middleware:rt,whileElementsMounted:r.ll}),$t=(0,l.kp)(Kt),xn=(0,l.s9)(Kt),{getReferenceProps:pn,getFloatingProps:_n}=(0,l.bv)([xn,$t]),kn=(0,o.useCallback)(async(mn,wn)=>{Le(Ln=>({...Ln,[mn]:wn})),wn&&!Be[mn]&&Pt(mn)},[Pt,Be]),Jn=(0,o.useCallback)(mn=>{Ye&&Ye(mn.uid,mn.title),Fe(!1)},[Ye]),pt=(0,o.useCallback)(mn=>{mn.preventDefault(),mn.stopPropagation(),Ye&&Ye(void 0,void 0)},[Ye]),Rt=(0,o.useCallback)(()=>Fe(!1),[Fe]),Mt=(0,o.useCallback)(mn=>{Je||Pt(mn)},[Je,Pt]),Bt=(0,o.useMemo)(()=>{let mn=[];return ht?mn=Et:mn=ve?.items.map(wn=>({isOpen:!1,level:0,item:{kind:"folder",title:wn.title,uid:wn.uid}}))??[],(!Te||Re?.length)&&(mn=mn.filter(wn=>!(!Te&&wn.item.uid===(0,te.K)().item.uid||Re?.includes(wn.item.uid)))),mn},[Et,Re,ht,ve?.items,Te]),Nt=(0,o.useCallback)(mn=>{const wn=Bt[mn];if(!wn)return!1;const Ln=wn.item;return!(Ln.kind==="ui"&&Ln.uiKind==="pagination-placeholder")},[Bt]),Yt=mt||xe,{focusedItemIndex:Qt,handleKeyDown:En}=fe({tree:Bt,handleCloseOverlay:Rt,handleFolderSelect:Jn,handleFolderExpand:kn,idPrefix:Ge,search:Je,visible:We});let vn=Qe.data?.title;De===""&&(vn=(0,h.t)("browse-dashboards.folder-picker.root-title","Dashboards"));const Sn=vn?(0,n.jsxs)(g.B,{alignItems:"center",children:[(0,n.jsx)(u.E,{truncate:!0,children:vn}),(0,n.jsx)(C.b,{folder:Qe.data})]}):"";return We?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.p,{ref:Gt.setReference,autoFocus:!0,prefix:vn?(0,n.jsx)(v.I,{name:"folder"}):null,placeholder:vn??(0,h.t)("browse-dashboards.folder-picker.search-placeholder","Search folders"),value:Je,invalid:Me,className:je.search,onChange:mn=>de(mn.currentTarget.value),"aria-autocomplete":"list","aria-expanded":!0,"aria-haspopup":!0,"aria-controls":Ge,"aria-owns":Ge,"aria-activedescendant":V(Ge,Bt[Qt]?.item.uid),role:"combobox",suffix:(0,n.jsx)(v.I,{name:"search"}),...pn(),onKeyDown:En}),(0,n.jsx)("fieldset",{ref:Gt.setFloating,id:Ge,className:je.tableWrapper,style:{...en,width:st.domReference?.clientWidth},..._n(),children:Ze?(0,n.jsx)(p.F,{className:je.error,severity:"warning",title:(0,h.t)("browse-dashboards.folder-picker.error-title","Error loading folders"),children:Ze.message||Ze.toString?.()||(0,h.t)("browse-dashboards.folder-picker.unknown-error","Unknown error")}):(0,n.jsxs)("div",{children:[Yt&&(0,n.jsx)("div",{className:je.loader,children:(0,n.jsx)(m.G,{width:600})}),(0,n.jsx)(M,{items:Bt,selectedFolder:De,focusedItemIndex:Qt,onFolderExpand:kn,onFolderSelect:Jn,idPrefix:Ge,foldersAreOpenable:!(Je&&ve),isItemLoaded:Nt,requestLoadMore:Mt})]})})]}):(0,n.jsx)(_,{id:Ue,label:Sn,handleClearSelection:$e&&De!==void 0?pt:void 0,invalid:Me,isLoading:Qe.isLoading,autoFocus:Pe,ref:Gt.setReference,"aria-label":vn?(0,h.t)("browse-dashboards.folder-picker.accessible-label","Select folder: {{ label }} currently selected",{label:vn}):void 0,...pn(),disabled:He})}const Xe=De=>({button:(0,a.css)({maxWidth:"100%"}),error:(0,a.css)({marginBottom:0}),tableWrapper:(0,a.css)({boxShadow:De.shadows.z3,position:"relative",zIndex:De.zIndex.portal}),loader:(0,a.css)({position:"absolute",top:0,left:0,right:0,zIndex:De.zIndex.portal+1,overflow:"hidden"}),search:(0,a.css)({input:{cursor:"default"}})})},32380:(ne,A,e)=>{"use strict";e.d(A,{nm:()=>ie,Dh:()=>Z});var n=e(39741),a=e(13752),s=e(64423),l=e(44240),r=e(39697),c=e(81160),i=e(67791),o=e(93031),h=e(71030),f=e(69850),g=e(1005),u=e(65961),E=e(75234),v=e(2543);function p(ce){let re=[];const ue=(0,v.partition)(ce,"id"),X=(0,v.groupBy)(ue[0],"id");return re=(0,v.map)(X,le=>le.length>1&&!(0,v.every)(le,m)?(0,v.find)(le,he=>he.eventType!=="panel-alert"):(0,v.head)(le)),re=(0,v.concat)(re,ue[1]),re}function m(ce){return ce.eventType==="panel-alert"}var y=e(75421),d=e(62467),x=e(65474),b=e(66847),D=e(69862),C=e(16126),P=e(43173),T=e(78282),O=e(42942),S=e(87745),B=e(87033),K=e(92511);class U{canRun(re){return re?!!(!re.annotationQuery||re.annotations):!1}run({annotation:re,datasource:ue,dashboard:X,range:le}){if(!this.canRun(ue))return(0,d.of)([]);const he={};return(0,B.b)({dashboard:X,range:le,panel:he},ue,re).pipe((0,c.T)(fe=>fe.events??[]),(0,b.W)(K.SD))}}var F=e(90696);class I{canRun(re){return re?(0,F.E7)(re)?!0:!!(re.annotationQuery&&!re.annotations):!1}run({annotation:re,datasource:ue,dashboard:X,range:le}){if(!this.canRun(ue))return(0,d.of)([]);if(ue?.annotationQuery===void 0)return console.warn("datasource does not have an annotation query"),(0,d.of)([]);const he=ue.annotationQuery({range:le,rangeRaw:le.raw,annotation:re,dashboard:X});return he===void 0?(console.warn("datasource does not have an annotation query"),(0,d.of)([])):(0,x.H)(he).pipe((0,b.W)(K.SD))}}class V{constructor(re=[new I,new U]){this.runners=re}canWork({dashboard:re}){return!!re.annotations.list.find(V.getAnnotationsToProcessFilter)}work(re){if(!this.canWork(re))return(0,K.$)();const{dashboard:ue,range:X}=re;let le=ue.annotations.list.filter(V.getAnnotationsToProcessFilter);P.$.publicDashboardAccessToken&&le.length>0&&(le=[le[0]]);const he=le.map(fe=>{let Ce;if(P.$.publicDashboardAccessToken){const Ae=new O.X;Ce=(0,d.of)(Ae).pipe((0,b.W)(K.H0))}else Ce=(0,x.H)((0,T.l)().get(fe.datasource)).pipe((0,b.W)(K.H0));return Ce.pipe((0,D.Z)(Ae=>{const _e=this.runners.find(Xe=>Xe.canRun(Ae));return _e?(ue.events.publish(new S.xc(fe)),_e.run({annotation:fe,datasource:Ae,dashboard:ue,range:X}).pipe((0,i.Q)(Z().cancellations().pipe((0,C.p)(Xe=>Xe===fe))),(0,c.T)(Xe=>(ue.snapshot&&(fe.snapshotData=(0,v.cloneDeep)(Xe)),P.$.publicDashboardAccessToken?Xe:(0,K.G9)(fe,Xe))),(0,f.j)(()=>{ue.events.publish(new S.yj(fe))}))):(0,d.of)([])}))});return(0,l.h)(he).pipe((0,o.U)(),(0,h.T)((fe,Ce)=>fe.concat(Ce)),(0,c.T)(fe=>({annotations:fe,alertStates:[]})))}static getAnnotationsToProcessFilter(re){return re.enable&&!re.snapshotData}}var M=e(18030),L=e(76190),N=e(15130),W=e(70327),R=e(78467),G=e(95443),w=e(52161),_=e(29609),Q=e(7498),ae=e(8535),q=e(11257);class k{constructor(){this.hasAlertRules={}}canWork({dashboard:re,range:ue}){return!(!re.uid||P.$.publicDashboardAccessToken||ue.raw.to!=="now"||this.hasAlertRules[re.uid]===!1||!(N.TP.hasPermission(q.w.AlertingRuleRead)&&N.TP.hasPermission(q.w.AlertingRuleExternalRead)))}work(re){if(!this.canWork(re))return(0,K.$)();const{dashboard:ue}=re,X=async()=>(await(0,ae.JD)(W.hK.endpoints.prometheusRuleNamespaces.initiate({ruleSourceName:w.hY,dashboardUid:ue.uid},{forceRefetch:!0}))).data;return(0,x.H)(X()).pipe((0,c.T)(he=>(0,R.Kw)(he))).pipe((0,c.T)(he=>{this.hasAlertRules[ue.uid]=!1;const fe={};return he.forEach(Ce=>Ce.rules.forEach(Ae=>{if(_.R$.alertingRule(Ae)&&Ae.annotations&&Ae.annotations[G.YH.panelID]){this.hasAlertRules[ue.uid]=!0;const _e=Number(Ae.annotations[G.YH.panelID]),Xe=(0,Q.S)(Ae.state);fe[_e]?Xe===L.O.Alerting&&fe[_e].state!==L.O.Alerting?fe[_e].state=L.O.Alerting:Xe===L.O.Pending&&fe[_e].state!==L.O.Alerting&&fe[_e].state!==L.O.Pending&&(fe[_e].state=L.O.Pending):fe[_e]={state:Xe,id:Object.keys(fe).length,panelId:_e,dashboardId:ue.id}}})),{alertStates:Object.values(fe),annotations:[]}}),(0,b.W)(K.Zr))}}class ee{constructor(re,ue=(0,y.jG)(),X=[new k,new M.F,new V]){this.dashboard=re,this.timeSrv=ue,this.workers=X,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new n.m(1),this.runs=new a.B,this.cancellationStream=new a.B,this.runsSubscription=this.runs.subscribe(le=>this.executeRun(le)),this.eventsSubscription=re.events.subscribe(E._,le=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(re){this.runs.next(re)}getResult(re){return this.results.asObservable().pipe((0,c.T)(ue=>{const X=(0,K.FK)(ue.annotations,re),le=ue.alertStates.find(he=>!!re&&he.panelId===re);return{annotations:p(X),alertState:le}}))}executeRun(re){const X=this.workers.filter(Ae=>Ae.canWork(re)).map(Ae=>Ae.work(re)),le=new s.yU,he=(0,l.h)(X).pipe((0,i.Q)(this.runs.asObservable()),(0,o.U)(),(0,h.T)((Ae,_e)=>(Ae.annotations=Ae.annotations.concat(_e.annotations),Ae.alertStates=Ae.alertStates.concat(_e.alertStates),Ae)),(0,f.j)(()=>{le.unsubscribe()}),(0,g.u)()),fe=new s.yU,Ce=(0,r.O)(200).pipe((0,u.u)({annotations:[],alertStates:[]}),(0,i.Q)(he),(0,f.j)(()=>{fe.unsubscribe()}));fe.add(Ce.subscribe(Ae=>{this.results.next(Ae)})),le.add(he.subscribe(Ae=>{this.results.next(Ae)}))}cancel(re){this.cancellationStream.next(re)}cancellations(){return this.cancellationStream.asObservable().pipe((0,g.u)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let j;function J(ce){j&&j.destroy(),j=ce}function Z(){if(!j)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return j}let te;function se(ce){te=ce}function ie(ce){te||(te=({dashboard:ue,timeSrv:X,workers:le})=>new ee(ue,X,le));const re=te(ce);return J(re),re}},32442:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>r});var n=e(74848),a=e(22803),s=e(53487),l=e(63142);function r({className:i,...o}){const h=(0,l.of)(c);return(0,n.jsx)(s.s,{...o,className:(0,a.cx)(h.legend,i)})}function c(i){return{legend:(0,a.css)({marginTop:i.spacing(3),marginBottom:i.spacing(1)})}}},32471:(ne,A,e)=>{"use strict";e.d(A,{F:()=>f});var n=e(74848),a=e(96540),s=e(92745),l=e(76319),r=e(41654),c=e(18857),i=e(77824);const o=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(u=>({label:u,value:u})),h=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(u=>({label:u,value:u})),f=({value:u,onChange:E})=>{const v=[{label:(0,s.t)("timeseries.line-style-editor.line-fill-options.label-solid","Solid"),value:"solid"},{label:(0,s.t)("timeseries.line-style-editor.line-fill-options.label-dash","Dash"),value:"dash"},{label:(0,s.t)("timeseries.line-style-editor.line-fill-options.label-dots","Dots"),value:"dot"}],p=(0,a.useMemo)(()=>u?.fill==="dash"?o:h,[u]),m=(0,a.useMemo)(()=>{if(!u?.dash?.length)return p[0];const y=u.dash?.join(", "),d=p.find(x=>x.value===y);return d||{label:y,value:y}},[u,p]);return(0,n.jsxs)(r.B,{wrap:!0,alignItems:"flex-end",children:[(0,n.jsx)(i.z,{value:u?.fill||"solid",options:v,onChange:y=>{let d;y==="dot"?d=g(h[0].value):y==="dash"&&(d=g(o[0].value)),E({...u,fill:y,dash:d})}}),u?.fill&&u?.fill!=="solid"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.l6,{allowCustomValue:!0,options:p,value:m,width:20,onChange:y=>{E({...u,dash:g(y.value??"")})},formatCreateLabel:y=>`Segments: ${g(y).join(", ")}`}),(0,n.jsxs)("div",{children:["\xA0",(0,n.jsx)("a",{title:(0,s.t)("timeseries.line-style-editor.title-the-input-expects-a-segment-list","The input expects a segment list"),href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer",children:(0,n.jsx)(l.K,{name:"question-circle",tooltip:(0,s.t)("timeseries.line-style-editor.tooltip-help","Help")})})]})]})]})};function g(u){const E=[];for(const v of u.split(/(?:,| )+/)){const p=Number.parseInt(v,10);isNaN(p)||E.push(p)}return E}},32540:(ne,A,e)=>{"use strict";e.d(A,{$:()=>f,m:()=>u});var n=e(74848),a=e(92745),s=e(45863),l=e(30703),r=e(67522),c=e(87063),i=e(7895),o=e(88559),h=e(37040);class f extends s.Bs{constructor(){super(...arguments),this._variableDependency=new s.Sh(this,{onAnyVariableChanged:()=>{this.state.rawLinks&&this.state.rawLinks.length>0&&this.forceRender()}})}static{this.Component=g}}function g({model:v}){const{menu:p,rawLinks:m}=v.useState();if(s.jh.getTimeRange(v).useState(),!(v.parent instanceof s.Eb))throw new Error("VizPanelLinks must be a child of VizPanel");if(!m||m.length===0)return null;if(m.length===1){const y=(0,h.eQ)(v.parent)[0];return(0,n.jsx)(r.NR.TitleItem,{href:y.href,onClick:y.onClick,target:y.target,title:y.title,children:(0,n.jsx)(l.I,{name:"external-link-alt",size:"md"})})}return(0,n.jsx)(o.m,{overlay:()=>(0,n.jsx)(p.Component,{model:p},p.state.key),children:(0,n.jsx)(i.I,{icon:"external-link-alt",iconSize:"md","aria-label":(0,a.t)("dashboard-scene.viz-panel-links-renderer.aria-label-panel-links","Panel links")})})}class u extends s.Bs{static{this.Component=E}}function E({model:v}){const{links:p}=v.useState();return p?(0,n.jsx)(c.W,{children:p?.map((m,y)=>(0,n.jsx)(c.W.Item,{label:m.title,url:m.href,target:m.target,onClick:m.onClick},y))}):null}},32550:(ne,A,e)=>{"use strict";e.d(A,{$:()=>g,A:()=>u});var n=e(74848),a=e(22803),s=e(96540),l=e(7612),r=e(65229),c=e(84140),i=e(6773),o=e(63142),h=e(12173);const f=({color:E,onChange:v})=>{const[p,m]=(0,s.useState)(E);(0,r.A)(b=>{v(i.MV.asHexString(y.visualization.getColorByName(b)))},500,[p]);const y=(0,o.$j)(),d=(0,o.of)(g),x=(0,s.useMemo)(()=>p.startsWith("rgba")?p:(0,c.A)(y.visualization.getColorByName(E)).toRgbString(),[p,y,E]);return(0,n.jsxs)("div",{className:d.wrapper,children:[(0,n.jsx)(l.p9,{className:d.root,color:x,onChange:m}),(0,n.jsx)(h.A,{theme:y,color:x,onChange:m,className:d.colorInput})]})},g=E=>({wrapper:(0,a.css)({flexGrow:1}),root:(0,a.css)({"&.react-colorful":{width:"auto"},".react-colorful":{"&__saturation":{borderRadius:`${E.shape.radius.default} ${E.shape.radius.default} 0 0`},"&__alpha":{borderRadius:`0 0 ${E.shape.radius.default} ${E.shape.radius.default}`},"&__alpha, &__hue":{height:E.spacing(2),position:"relative"},"&__pointer":{height:E.spacing(2),width:E.spacing(2)}}}),colorInput:(0,a.css)({marginTop:E.spacing(2)})}),u=f},32581:(ne,A,e)=>{"use strict";e.d(A,{O:()=>c,p:()=>i});var n=e(74848),a=e(46942),s=e.n(a),l=e(96540),r=e(75745),c=(o=>(o.Invalid="invalid",o.Valid="valid",o))(c||{});class i extends l.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=h=>f=>{const g=(0,r.tf)(f.target.value,h);this.setState(u=>({...u,error:g?g[0]:null}))},this.populateEventPropsWithStatus=(h,f)=>{const g={...h};return f&&Object.keys(r.Pw).forEach(u=>{((0,r.K)(u,f)||h[u])&&(g[u]=async E=>{E.persist(),(0,r.K)(u,f)&&await this.validatorAsync(f[u]).apply(this,[E]),h[u]&&h[u].apply(null,[E,this.status])})}),g}}static{this.defaultProps={className:""}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:h,className:f,hideErrorMessage:g,inputRef:u,...E}=this.props,{error:v}=this.state,p=s()("gf-form-input",{invalid:this.isInvalid},f),m=this.populateEventPropsWithStatus(E,h);return(0,n.jsxs)("div",{style:{flexGrow:1},children:[(0,n.jsx)("input",{...m,ref:u,className:p}),v&&!g&&(0,n.jsx)("span",{children:v})]})}}},32603:(ne,A,e)=>{"use strict";e.d(A,{L9:()=>f,dQ:()=>g,uT:()=>h});var n=e(2543),a=e.n(n),s=e(92745),l=e(25953),r=e(97335),c=e(30643);const i={get panel(){return(0,s.t)("dashboard.edit-pane.elements.panel","Panel")},get row(){return(0,s.t)("dashboard.edit-pane.elements.row","Row")},get tab(){return(0,s.t)("dashboard.edit-pane.elements.tab","Tab")},get element(){return(0,s.t)("dashboard.edit-pane.elements.element","Element")}},o={get panel(){return(0,n.lowerCase)((0,s.t)("dashboard.edit-pane.elements.panel","Panel"))},get row(){return(0,n.lowerCase)((0,s.t)("dashboard.edit-pane.elements.row","Row"))},get tab(){return(0,n.lowerCase)((0,s.t)("dashboard.edit-pane.elements.tab","Tab"))},get element(){return(0,n.lowerCase)((0,s.t)("dashboard.edit-pane.elements.element","Element"))}};function h(u){return i[u]??(0,n.capitalize)(u)}function f(u){return o[u]??u}function g(u){if(u){if(u instanceof l.X)return"panel";if(u instanceof r.o)return"row";if(u instanceof c.V)return"tab"}else return"element";return"element"}},32635:(ne,A,e)=>{"use strict";e.d(A,{S:()=>i});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=e(35484),c=e(72636);const i=s.forwardRef(({label:h,description:f,value:g,htmlValue:u,onChange:E,disabled:v,className:p,indeterminate:m,invalid:y,...d},x)=>{const b=(0,s.useCallback)(P=>{E&&E(P)},[E]),D=(0,l.of)(o,y),C=m?"mixed":void 0;return(0,n.jsxs)("label",{className:(0,a.cx)(D.wrapper,p),children:[(0,n.jsxs)("div",{className:D.checkboxWrapper,children:[(0,n.jsx)("input",{type:"checkbox",className:(0,a.cx)(D.input,m&&D.inputIndeterminate),checked:g,disabled:v,onChange:b,value:u,"aria-checked":C,...d,ref:x}),(0,n.jsx)("span",{className:D.checkmark})]}),h&&(0,n.jsx)("span",{className:D.label,children:h}),f&&(0,n.jsx)("span",{className:D.description,children:f})]})}),o=(h,f=!1)=>{const g=(0,c.f)(h),u=2,E=1,v=p=>f?h.colors.error.border:p;return{wrapper:(0,a.css)({display:"inline-grid",alignItems:"center",columnGap:h.spacing(E),gridAutoRows:"max-content",position:"relative",verticalAlign:"middle"}),input:(0,a.css)({position:"absolute",zIndex:1,top:0,left:0,width:"100% !important",height:"100%",opacity:0,"&:focus + span, &:focus-visible + span":(0,r.getFocusStyles)(h),"&:focus:not(:focus-visible) + span":(0,r.getMouseFocusStyles)(h),"&:checked + span":{background:h.colors.primary.main,border:`1px solid ${v(h.colors.primary.main)}`,"&:hover":{background:h.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:h.spacing(.5),top:0,width:h.spacing(.75),height:h.spacing(1.5),border:`solid ${h.colors.primary.contrastText}`,borderWidth:"0 3px 3px 0",transform:"rotate(45deg)"}},"&:disabled + span":{backgroundColor:h.colors.action.disabledBackground,cursor:"not-allowed",border:`1px solid ${v(h.colors.action.disabledBackground)}`,"&:hover":{backgroundColor:h.colors.action.disabledBackground},"&:after":{borderColor:h.colors.action.disabledText}}}),inputIndeterminate:(0,a.css)({"&[aria-checked='mixed'] + span":{border:`1px solid ${v(h.colors.primary.main)}`,background:h.colors.primary.main,"&:hover":{background:h.colors.primary.shade},"&:after":{content:'""',position:"absolute",zIndex:2,left:"2px",right:"2px",top:"calc(50% - 1.5px)",height:"3px",border:`1.5px solid ${h.colors.primary.contrastText}`,backgroundColor:h.colors.primary.contrastText,width:"auto",transform:"none"}},"&:disabled[aria-checked='mixed'] + span":{backgroundColor:h.colors.action.disabledBackground,border:`1px solid ${v(h.colors.error.transparent)}`,"&:after":{borderColor:h.colors.action.disabledText}}}),checkboxWrapper:(0,a.css)({display:"flex",alignItems:"center",gridColumnStart:1,gridRowStart:1}),checkmark:(0,a.css)({position:"relative",zIndex:2,display:"inline-block",width:h.spacing(u),height:h.spacing(u),borderRadius:h.shape.radius.default,background:h.components.input.background,border:`1px solid ${v(h.components.input.borderColor)}`,"&:hover":{cursor:"pointer",borderColor:v(h.components.input.borderHover)}}),label:(0,a.cx)(g.label,(0,a.css)({gridColumnStart:2,gridRowStart:1,position:"relative",zIndex:2,cursor:"pointer",maxWidth:"fit-content",lineHeight:h.typography.bodySmall.lineHeight,marginBottom:0})),description:(0,a.cx)(g.description,(0,a.css)({gridColumnStart:2,gridRowStart:2,lineHeight:h.typography.bodySmall.lineHeight,marginTop:0,zIndex:1}))}};i.displayName="Checkbox"},32881:(ne,A,e)=>{"use strict";e.d(A,{Gy:()=>i,gW:()=>o,mc:()=>h});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=(E=>(E[E.Horizontal=0]="Horizontal",E[E.Vertical=1]="Vertical",E))(r||{});const c=({children:E,orientation:v=0,spacing:p="sm",justify:m="flex-start",align:y="normal",wrap:d=!1,width:x="100%",height:b="100%",...D})=>{const C=(0,l.of)(f,v,p,m,y,d);return(0,n.jsx)("div",{className:C.layout,style:{width:x,height:b},...D,children:s.Children.toArray(E).filter(Boolean).map((P,T)=>(0,n.jsx)("div",{className:C.childWrapper,children:P},T))})},i=({children:E,spacing:v,justify:p,align:m="center",wrap:y,width:d,height:x})=>(0,n.jsx)(c,{spacing:v,justify:p,orientation:0,align:m,width:d,height:x,wrap:y,children:E}),o=({children:E,spacing:v,justify:p,align:m,width:y,height:d})=>(0,n.jsx)(c,{spacing:v,justify:p,orientation:1,align:m,width:y,height:d,children:E}),h=({children:E,padding:v,margin:p,grow:m,shrink:y})=>{const d=(0,l.of)(u,v,p);return(0,n.jsx)("div",{className:(0,a.cx)(d.wrapper,m!==void 0&&(0,a.css)({flexGrow:m}),y!==void 0&&(0,a.css)({flexShrink:y})),children:E})},f=(E,v,p,m,y,d)=>{const x=p!=="none"?E.spacing(g[p]):0,b=v===0&&!d||v===1?0:`-${x}`,D=v===1?"vertical-group":"horizontal-group";return{layout:(0,a.css)({label:D,display:"flex",flexDirection:v===1?"column":"row",flexWrap:d?"wrap":"nowrap",justifyContent:m,alignItems:y,height:"100%",maxWidth:"100%",marginBottom:b}),childWrapper:(0,a.css)({label:"layoutChildrenWrapper",marginBottom:v===0&&!d?0:x,marginRight:v===0?x:0,display:"flex",alignItems:y,"&:last-child":{marginBottom:v===1?0:void 0,marginRight:v===0?0:void 0}})}},g={none:0,xs:.5,sm:1,md:2,lg:3},u=(E,v,p)=>{const m=v&&v!=="none"&&E.spacing(g[v])||0,y=p&&p!=="none"&&E.spacing(g[p])||0;return{wrapper:(0,a.css)({label:"container",margin:y,padding:m})}}},32899:(ne,A,e)=>{"use strict";e.d(A,{Tq:()=>c,ee:()=>l,kb:()=>r,r1:()=>s});var n=e(36819),a=e(68388);const s={alertSuccess:(0,n.R)("alert-success"),alertWarning:(0,n.R)("alert-warning"),alertError:(0,n.R)("alert-error"),alertInfo:(0,n.R)("alert-info")},l={refresh:(0,n.R)("refresh"),componentDidMount:(0,n.R)("component-did-mount"),dataReceived:(0,n.R)("data-received"),dataError:(0,n.R)("data-error"),dataFramesReceived:(0,n.R)("data-frames-received"),dataSnapshotLoad:(0,n.R)("data-snapshot-load"),editModeInitialized:(0,n.R)("init-edit-mode"),initPanelActions:(0,n.R)("init-panel-actions"),initialized:(0,n.R)("panel-initialized"),panelTeardown:(0,n.R)("panel-teardown"),render:(0,n.R)("render")};class r extends a.x{static{this.type="graph-hover"}}class c extends a.a{constructor(){super(...arguments),this.payload={point:{}}}static{this.type="graph-hover-clear"}}},33005:(ne,A,e)=>{"use strict";e.d(A,{A:()=>a,S:()=>s});let n;function a(l){if(n)throw new Error("setPluginComponentHook() function should only be called once, when Grafana is starting.");n=l}function s(l){if(!n)throw new Error("setPluginComponentHook(options) can only be used after the Grafana instance has started.");return n(l)}},33023:(ne,A,e)=>{"use strict";e.d(A,{o:()=>i});var n=e(2543),a=e.n(n),s=e(81160),l=e(18700),r=e(79319),c=e(64761);const i={id:c.F.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},isApplicable:v=>v.length>1?r.M.Applicable:r.M.NotApplicable,isApplicableDescription:v=>`The merge transformation requires at least 2 data series to work. There is currently ${v.length} data series.`,operator:v=>p=>p.pipe((0,s.T)(m=>{if(!Array.isArray(m)||m.length<=1)return m;const y=m.filter(S=>S.fields.length>0);if(y.length===0)return[m[0]];const d=new Set,x={},b=[],D=new l.k({refId:`${c.F.merge}-${y.map(S=>S.refId).join("-")}`,fields:[]});for(let S=0;S<y.length;S++){const B=y[S];for(let K=0;K<B.fields.length;K++){const U=B.fields[K];d.has(U.name)||(D.addField(o(U)),d.add(U.name)),x[U.name]=x[U.name]||{},x[U.name][S]=K,y.length-1===S&&u(x,U,y)&&b.push(U.name)}}if(b.length===0)return m;const C={},P=[],T=h(y,x,b),O=f(y,d,x);for(let S=0;S<y.length;S++){const B=y[S];for(let K=0;K<B.length;K++){const U=T(S,K),F=O(S,K);if(!Array.isArray(C[U])){C[U]=[F],P.push(E(U,C));continue}let I=!1;C[U]=C[U].map(V=>g(V,F)?(I=!0,{...V,...F}):V),I||(C[U].push(F),P.push(E(U,C)))}}for(const S of P){const B=C[S.key][S.index];B&&D.add(B)}return[D]}))},o=v=>({...(0,n.omit)(v,["values","state","labels","config"]),values:[],config:{...(0,n.omit)(v.config,"displayName")}}),h=(v,p,m)=>{const y=m.reduce((d,x)=>Object.keys(p[x]).reduce((b,D)=>(b[D]=b[D]||[],b[D].push(p[x][D]),b),d),{});return(d,x)=>y[d].reduce((b,D)=>b+v[d].fields[D].values[x],"")},f=(v,p,m)=>(y,d)=>{const x={},b=Array.from(p);for(const D of b){const C=m[D];if(!C)continue;const P=C[y];if(typeof P!="number")continue;const T=v[y];if(!T||!T.fields)continue;const O=T.fields[P];!O||!O.values||(x[D]=O.values[d])}return x},g=(v,p)=>{let m=!0;for(const y in p)if(!(typeof v[y]>"u")&&v[y]!==null&&v[y]!==p[y]){m=!1;break}return m},u=(v,p,m)=>Object.keys(v[p.name]).length===m.length,E=(v,p)=>({key:v,index:p[v].length-1})},33033:(ne,A,e)=>{"use strict";e.d(A,{D:()=>c});var n=e(74848),a=e(96540),s=e(53568),l=e(74660),r=e(63527);const c=a.forwardRef((h,f)=>{const{defaultValue:g="",minWidth:u=10,maxWidth:E,onCommitChange:v,onChange:p,onKeyDown:m,onBlur:y,value:d,placeholder:x,...b}=h,[D,C]=o(d,p),P=D??g,T=(0,a.useMemo)(()=>{const O=P||x||"",S=typeof O=="string"?O:O.toString();return i(S,u,E)},[x,P,u,E]);return(0,n.jsx)(l.W.Provider,{value:!0,children:(0,n.jsx)(r.p,{"data-testid":"autosize-input",...b,placeholder:x,ref:f,value:P.toString(),onChange:O=>{p&&p(O),C(O.currentTarget.value)},width:T,onBlur:O=>{y?y(O):v&&v(O)},onKeyDown:O=>{m?m(O):O.key==="Enter"&&v&&v(O)}})})});function i(h,f,g){if(!h)return f;const E=(0,s.kD)(h.toString(),14).width/8+3;return f&&E<f?f:g&&E>g?g:E}c.displayName="AutoSizeInput";function o(h,f){const g=h!==void 0&&f!==void 0,u=(0,a.useRef)(g),E=(0,a.useRef)(!1);g!==u.current&&!E.current&&(console.warn("An AutoSizeInput is changing from an uncontrolled to a controlled input. If you want to control the input, the empty value should be an empty string."),E.current=!0);const[v,p]=a.useState(h);(0,a.useEffect)(()=>{u.current||p(h)},[h]);const m=(0,a.useCallback)(d=>{u.current||p(d)},[]);return[u.current?h:v,m]}},33143:(ne,A,e)=>{"use strict";e.d(A,{N4:()=>Ee,BF:()=>Pe,WG:()=>Oe,jO:()=>ve,ck:()=>me,su:()=>xe,cc:()=>We,wT:()=>de,JU:()=>Be,dt:()=>Je});var n=e(88544),a=e(68388),s=e(92745),l=e(45863),r=e(11534),c=e(74848),i=e(96540),o=e(51898),h=e(63527),f=e(34999),g=e(89640),u=e(25797),E=e(51156),v=e(31819),p=e(9931),m=e(18615),y=e(8285),d=e(1131),x=e(87308);class b{constructor(Ge){this._row=Ge,this.isEditableDashboardElement=!0}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.row","Row"),instanceName:l.jh.interpolate(this._row,this._row.state.title,void 0,"text"),icon:"list-ul"}}getOutlineChildren(){return this._row.state.children}useEditPaneOptions(){const Ge=this._row,Ze=(0,i.useMemo)(()=>new u.C({title:(0,s.t)("dashboard.default-layout.row-options.title","Row options"),id:"row-options",isOpenDefault:!0}).addItem(new E.v({title:(0,s.t)("dashboard.default-layout.row-options.form.title","Title"),id:"row-options-title",render:at=>(0,c.jsx)(D,{id:at.props.id,row:Ge})})),[Ge]),qe=(0,i.useMemo)(()=>{const at=(0,y.YQ)(Ge);return new u.C({title:(0,s.t)("dashboard.default-layout.row-options.repeat.title","Repeat options"),id:"row-repeat-options",isOpenDefault:!0}).addItem(new E.v({title:(0,s.t)("dashboard.default-layout.row-options.repeat.variable.title","Variable"),id:"row-options-repeat-variable",render:ht=>(0,c.jsx)(C,{id:ht.props.id,row:Ge,dashboard:at})}))},[Ge]);return[Ze,qe]}onDelete(){const Ge=(0,y.h$)(this._row);Ge instanceof d.D&&Ge.removeRow(this._row)}}function D({row:Le,id:Ge}){const{title:Ze}=Le.useState();return(0,c.jsx)(h.p,{id:Ge,value:Ze,onChange:qe=>Le.setState({title:qe.currentTarget.value})})}function C({row:Le,dashboard:Ge,id:Ze}){const{$behaviors:qe,children:at}=Le.useState();let ht=qe?.find(Pt=>Pt instanceof x.L);const mt=(0,i.useMemo)(()=>at.reduce((Pt,rt)=>[...Pt,...l.jh.findDescendents(rt,l.Eb)],[]),[at]).some(Pt=>{const rt=(0,y.un)(Pt);return rt?.state.datasource?.uid===p.K||rt?.state.datasource?.uid===m.uv&&rt?.state.queries.some(Kt=>Kt.datasource?.uid===p.K)});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(v.U,{id:Ze,sceneContext:Ge,repeat:ht?.state.variableName,onChange:Pt=>{Pt?(ht?.removeBehavior(),ht=new x.L({variableName:Pt}),Le.setState({$behaviors:[...Le.state.$behaviors??[],ht]})):ht?.removeBehavior()}}),mt?(0,c.jsxs)(f.F,{"data-testid":o.Tp.pages.Dashboard.Rows.Repeated.ConfigSection.warningMessage,severity:"warning",title:"",topSpacing:3,bottomSpacing:0,children:[(0,c.jsx)("p",{children:(0,c.jsxs)(s.x6,{i18nKey:"dashboard.default-layout.row-options.form.repeat-for.warning.text",children:["Panels in this row use the ",{SHARED_DASHBOARD_QUERY:p.K}," data source. These panels will reference the panel in the original row, not the ones in the repeated rows."]})}),(0,c.jsx)(g.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/#configure-repeating-rows",children:(0,c.jsx)(s.x6,{i18nKey:"dashboard.default-layout.row-options.form.repeat-for.learn-more",children:"Learn more"})})]}):void 0]})}var P=e(95395);function T(Le){return"isEditableDashboardElement"in Le}var O=e(31286),S=e(41654);class B{constructor(Ge){this.variable=Ge,this.isEditableDashboardElement=!0}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.local-variable","Local variable"),icon:"dollar-alt",instanceName:`\xA0$${this.variable.state.name} = ${this.variable.getValueText()}`,isHidden:!0}}useEditPaneOptions(){const Ge=this.variable,Ze=(0,i.useId)(),qe=(0,i.useId)();return(0,i.useMemo)(()=>{const at=new u.C({title:"",id:Ze});return at.addItem(new E.v({title:"",id:qe,skipField:!0,render:()=>(0,c.jsx)(O.a,{paddingBottom:1,children:(0,c.jsx)(S.B,{children:(0,c.jsxs)(S.B,{children:[(0,c.jsxs)("span",{children:["$",Ge.state.name]}),(0,c.jsx)("span",{children:"="}),(0,c.jsx)("span",{children:Ge.getValueText()})]})})})})),[at]},[Ze,qe,Ge])}}var K=e(7389),U=e(36490),F=e(37386),I=e(87105),V=e(45861),M=e(20246),L=e(29),N=e(44741),W=e(21285);function R(Le){const Ge=(0,i.useId)(),Ze=(0,i.useId)(),qe=(0,i.useId)(),at=(0,i.useId)();return(0,i.useMemo)(()=>new u.C({title:(0,s.t)("dashboard.edit-pane.variable.selection-options.category","Selection options"),id:"selection-options-category",isOpenDefault:!0}).addItem(new E.v({title:(0,s.t)("dashboard.edit-pane.variable.selection-options.multi-value","Multi-value"),id:Ge,render:ht=>(0,c.jsx)(G,{id:ht.props.id,variable:Le})})).addItem(new E.v({title:(0,s.t)("dashboard.edit-pane.variable.selection-options.include-all","Include All value"),id:Ze,description:(0,s.t)("dashboard.edit-pane.variable.selection-options.include-all-description","Enables a single option that represent all values"),render:ht=>(0,c.jsx)(w,{id:ht.props.id,variable:Le})})).addItem(new E.v({title:(0,s.t)("dashboard.edit-pane.variable.selection-options.custom-all-value","Custom all value"),id:qe,description:(0,s.t)("dashboard.edit-pane.variable.selection-options.custom-all-value-description","A wildcard regex or other value to represent All"),useShowIf:()=>Le.useState().includeAll??!1,render:ht=>(0,c.jsx)(Q,{id:ht.props.id,variable:Le})})).addItem(new E.v({title:(0,s.t)("dashboard.edit-pane.variable.selection-options.allow-custom-values","Allow custom values"),id:at,description:(0,s.t)("dashboard.edit-pane.variable.selection-options.allow-custom-values-description","Enables users to enter values"),render:ht=>(0,c.jsx)(_,{id:ht.props.id,variable:Le})})),[at,qe,Ze,Ge,Le])}function G({variable:Le,id:Ge}){const{isMulti:Ze}=Le.useState();return(0,c.jsx)(W.d,{id:Ge,value:Ze,onChange:qe=>Le.setState({isMulti:qe.currentTarget.checked})})}function w({variable:Le,id:Ge}){const{includeAll:Ze}=Le.useState();return(0,c.jsx)(W.d,{id:Ge,value:Ze,onChange:qe=>Le.setState({includeAll:qe.currentTarget.checked})})}function _({variable:Le,id:Ge}){const{allowCustomValue:Ze}=Le.useState();return(0,c.jsx)(W.d,{id:Ge,value:Ze,onChange:qe=>Le.setState({allowCustomValue:qe.currentTarget.checked})})}function Q({variable:Le,id:Ge}){const{allValue:Ze}=Le.useState(),qe=(0,i.useRef)(null),at=(0,i.useCallback)(ht=>{const Et=ht.currentTarget.value;Et!==Le.state.allValue&&(Le.setState({allValue:Et}),Le.hasAllValue()&&Le.publishEvent(new l.oh(Le),!0))},[Le]);return(0,c.jsx)(h.p,{id:Ge,ref:qe,defaultValue:Ze??"",onBlur:at})}class ae{constructor(Ge){this.variable=Ge,this.isEditableDashboardElement=!0,this.typeName="Variable"}getEditableElementInfo(){if(this.variable instanceof l.xc)return{typeName:(0,s.t)("dashboard.edit-pane.elements.local-variable","Local variable"),icon:"dollar-alt",instanceName:this.variable.state.name,isHidden:!0};const Ge=(0,N.IO)(this.variable.state.type);return{typeName:(0,s.t)("dashboard.edit-pane.elements.variable","{{type}} variable",{type:Ge.name}),icon:"dollar-alt",instanceName:this.variable.state.name,isHidden:this.variable.state.hide===K.zL.hideVariable}}useEditPaneOptions(Ge){const Ze=this.variable,qe=(0,i.useId)(),at=(0,i.useId)(),ht=(0,i.useId)(),Et=(0,i.useId)(),mt=(0,i.useId)();if(Ze instanceof l.xc)return te(Ze);const rt=[(0,i.useMemo)(()=>new u.C({title:"",id:qe,isOpenDefault:!0}).addItem(new E.v({title:"",id:at,skipField:!0,render:()=>(0,c.jsx)(q,{variable:Ze,isNewElement:Ge})})).addItem(new E.v({title:(0,s.t)("dashboard.edit-pane.variable.label","Label"),id:ht,description:(0,s.t)("dashboard.edit-pane.variable.label-description","Optional display name"),render:Gt=>(0,c.jsx)(k,{id:Gt.props.id,variable:Ze})})).addItem(new E.v({title:(0,s.t)("dashboard.edit-pane.variable.description","Description"),id:Et,render:Gt=>(0,c.jsx)(ee,{id:Gt.props.id,variable:Ze})})).addItem(new E.v({title:"",id:mt,skipField:!0,render:()=>(0,c.jsx)(j,{variable:Ze})})),[qe,at,ht,Et,mt,Ze,Ge])],Kt=J(Ze);return rt.push(Kt),Ze instanceof l.n8&&rt.push(R(Ze)),rt}onDelete(){const Ge=this.variable.parent;Ge instanceof l.Pj&&We.removeVariable({source:Ge,removedObject:this.variable})}onChangeName(Ge){this.variable.setState({name:Ge});const Ze=(0,N.c$)(this.variable,Ge);if(Ze.errorMessage)return Ze}}function q({variable:Le,isNewElement:Ge}){const{name:Ze}=Le.useState(),qe=(0,M.z4)({autoFocus:Ge}),[at,ht]=(0,i.useState)(),Et=(0,i.useId)(),mt=rt=>{const Kt=(0,N.c$)(Le,rt.currentTarget.value);Kt.errorMessage!==at&&ht(Kt.errorMessage),Le.setState({name:rt.currentTarget.value})},Pt=(0,i.useRef)(Ze);return(0,c.jsx)(F.D,{label:(0,s.t)("dashboard.edit-pane.variable.name","Name"),invalid:!!at,error:at,children:(0,c.jsx)(h.p,{id:Et,ref:qe,value:Ze,onFocus:()=>{Pt.current=Ze},onChange:mt,onBlur:rt=>{const Gt=Pt.current===Ze||Be(rt);if(at){ht(void 0),Le.setState({name:Pt.current});return}Gt||We.changeVariableName({source:Le,oldValue:Pt.current,newValue:Ze})},"data-testid":o.Tp.components.PanelEditor.ElementEditPane.variableNameInput,required:!0})})}function k({variable:Le,id:Ge}){const{label:Ze}=Le.useState(),qe=(0,i.useRef)(Ze??"");return(0,c.jsx)(h.p,{id:Ge,value:Ze,onFocus:()=>{qe.current=Ze??""},onChange:at=>Le.setState({label:at.currentTarget.value}),onBlur:at=>{qe.current===at.currentTarget.value||Be(at)||We.changeVariableLabel({source:Le,oldValue:qe.current,newValue:at.currentTarget.value})},"data-testid":o.Tp.components.PanelEditor.ElementEditPane.variableLabelInput})}function ee({variable:Le,id:Ge}){const{description:Ze}=Le.useState(),qe=(0,i.useRef)(Ze??"");return(0,c.jsx)(I.f,{id:Ge,value:Ze??"",placeholder:(0,s.t)("dashboard.edit-pane.variable.description-placeholder","Descriptive text"),onFocus:()=>{qe.current=Ze??""},onChange:at=>Le.setState({description:at.currentTarget.value}),onBlur:at=>{qe.current===at.currentTarget.value||Be(at)||We.changeVariableDescription({source:Le,oldValue:qe.current,newValue:at.currentTarget.value})}})}function j({variable:Le}){const{hide:Ge=K.zL.dontHide}=Le.useState(),Ze=qe=>{We.changeVariableHideValue({source:Le,oldValue:Ge,newValue:qe})};return(0,c.jsx)(L.D,{hide:Ge,type:Le.state.type,onChange:Ze})}function J(Le){const Ge=(0,i.useId)();return(0,i.useMemo)(()=>{const Ze=(0,N.IO)(Le.state.type),qe=(0,s.t)("dashboard.edit-pane.variable.type-category","{{type}} options",{type:Ze.name}),at=new u.C({title:qe,id:"variable-type",isOpenDefault:!0});return Ze.getOptions?Ze.getOptions(Le).forEach(Et=>at.addItem(Et)):at.addItem(new E.v({title:"",id:Ge,skipField:!0,render:()=>(0,c.jsx)(Z,{variable:Le})})),at},[Ge,Le])}function Z({variable:Le}){const Ge=()=>{const Ze=Le.parent;if(!(Ze instanceof l.Pj))return;const qe=Ze.state.variables.indexOf(Le);U.Ny.partial({editview:"variables",editIndex:qe})};return(0,c.jsx)(O.a,{display:"flex",direction:"column",paddingBottom:1,children:(0,c.jsx)(V.$n,{tooltip:(0,s.t)("dashboard.edit-pane.variable.open-editor-tooltip","For more variable options open variable editor"),onClick:Ge,size:"sm",fullWidth:!0,children:(0,c.jsx)(s.x6,{i18nKey:"dashboard.edit-pane.variable.open-editor",children:"Open variable editor"})})})}function te(Le){const Ge=(0,i.useId)(),Ze=(0,i.useId)();return(0,i.useMemo)(()=>{const qe=new u.C({title:"",id:Ge});return qe.addItem(new E.v({title:"",id:Ze,skipField:!0,render:()=>(0,c.jsx)(O.a,{paddingBottom:1,children:(0,c.jsx)(S.B,{children:(0,c.jsxs)(S.B,{children:[(0,c.jsxs)("span",{children:["$",Le.state.name]}),(0,c.jsx)("span",{children:"="}),(0,c.jsx)("span",{children:Le.getValueText()})]})})})})),[qe]},[Ze,Ge,Le])}var se=e(22803),ie=e(42941),ce=e(63142),re=e(66404),ue=e(8073);class X{constructor(Ge){this.set=Ge,this.isEditableDashboardElement=!0,this.typeName="Variable"}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.variable-set","Variables"),icon:"x",instanceName:(0,s.t)("dashboard.edit-pane.elements.variable-set","Variables")}}getOutlineChildren(){return this.set.state.variables}useEditPaneOptions(){const Ge=(0,i.useId)(),Ze=this.set;return[(0,i.useMemo)(()=>new u.C({title:"",id:"variables"}).addItem(new E.v({title:"",id:Ge,skipField:!0,render:()=>(0,c.jsx)(le,{set:Ze})})),[Ze,Ge])]}}function le({set:Le}){const{variables:Ge}=Le.useState(),Ze=(0,ce.of)(fe),[qe,at]=(0,ie.A)(!1),ht=Le.parent instanceof r.H$,Et=Pt=>{const{editPane:rt}=(0,y.YQ)(Le).state;rt.selectObject(Pt,Pt.state.key)},mt=Pt=>{const{variables:rt}=Le.state,Kt=(0,N.e_)(Pt,rt),Gt=(0,N.No)(Pt,{name:Kt});We.addVariable({source:Le,addedObject:Gt}),at(!1)};return qe?(0,c.jsx)(he,{onAddVariable:mt}):(0,c.jsxs)(S.B,{direction:"column",gap:0,children:[Ge.map(Pt=>(0,c.jsxs)("div",{className:Ze.variableItem,onClick:()=>Et(Pt),children:[(0,c.jsxs)(re.E,{children:["$",Pt.state.name]}),(0,c.jsx)(S.B,{direction:"row",gap:1,alignItems:"center",children:(0,c.jsx)(V.$n,{variant:"primary",size:"sm",fill:"outline",children:(0,c.jsx)(s.x6,{i18nKey:"dashboard.edit-pane.variables.select-variable",children:"Select"})})})]},Pt.state.name)),ht&&(0,c.jsx)(O.a,{paddingBottom:1,display:"flex",children:(0,c.jsx)(V.$n,{fullWidth:!0,icon:"plus",size:"sm",variant:"secondary",onClick:at,"data-testid":o.Tp.components.PanelEditor.ElementEditPane.addVariableButton,children:(0,c.jsx)(s.x6,{i18nKey:"dashboard.edit-pane.variables.add-variable",children:"Add variable"})})})]})}function he({onAddVariable:Le}){const Ge=(0,N.B$)(),Ze=(0,ce.of)(fe);return(0,c.jsxs)(S.B,{direction:"column",gap:0,children:[(0,c.jsx)(O.a,{paddingBottom:1,display:"flex",children:(0,c.jsx)(s.x6,{i18nKey:"dashboard.edit-pane.variables.select-type",children:"Choose variable type"})}),Ge.map(qe=>(0,c.jsxs)(ue.Z,{isCompact:!0,onClick:()=>Le(qe.value),title:(0,s.t)("dashboard.edit-pane.variables.select-type-card-tooltip","Click to select type"),"data-testid":o.Tp.components.PanelEditor.ElementEditPane.variableType(qe.value),children:[(0,c.jsx)(ue.Z.Heading,{children:qe.label}),(0,c.jsx)(ue.Z.Description,{className:Ze.cardDescription,children:qe.description})]},qe.value))]})}function fe(Le){return{variableItem:(0,se.css)({display:"flex",flexDirection:"row",justifyContent:"space-between",gap:Le.spacing(1),padding:Le.spacing(.5),borderRadius:Le.shape.radius.default,cursor:"pointer",[Le.transitions.handleMotion("no-preference","reduce")]:{transition:Le.transitions.create(["color"],{duration:Le.transitions.duration.short})},"&:last-child":{marginBottom:Le.spacing(2)},button:{visibility:"hidden"},"&:hover":{color:Le.colors.text.link,button:{visibility:"visible"}}}),cardDescription:(0,se.css)({fontSize:Le.typography.bodySmall.fontSize,marginTop:Le.spacing(0)})}}var Ce=e(44802),Ae=e(30703);const _e=({dashboard:Le})=>(0,c.jsx)(V.$n,{size:"sm",variant:"secondary",tooltip:(0,s.t)("dashboard.toolbar.new.edit-dashboard-v2-schema.tooltip","Edit dashboard v2 schema"),icon:(0,c.jsx)(Ae.I,{name:"brackets-curly",size:"lg",type:"default"}),onClick:()=>Le.openV2SchemaEditor()});class Xe{constructor(Ge){this.dashboard=Ge,this.isEditableDashboardElement=!0}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.dashboard","Dashboard"),icon:"apps",instanceName:(0,s.t)("dashboard.edit-pane.elements.dashboard","Dashboard")}}getOutlineChildren(){const{$variables:Ge,body:Ze}=this.dashboard.state;return[Ge,...Ze.getOutlineChildren()]}useEditPaneOptions(){const Ge=this.dashboard,{body:Ze}=Ge.useState(),qe=(0,i.useId)(),at=(0,i.useId)(),ht=(0,i.useMemo)(()=>new u.C({title:"",id:"dashboard-options"}).addItem(new E.v({title:(0,s.t)("dashboard.options.title-option","Title"),id:qe,render:()=>(0,c.jsx)(De,{id:qe,dashboard:Ge})})).addItem(new E.v({title:(0,s.t)("dashboard.options.description","Description"),id:at,render:()=>(0,c.jsx)(Me,{id:at,dashboard:Ge})})),[Ge,at,qe]),Et=(0,Ce.W)(Ze);return[ht,...Et]}renderActions(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(_e,{dashboard:this.dashboard}),(0,c.jsx)(V.$n,{variant:"secondary",size:"sm",onClick:()=>this.dashboard.onOpenSettings(),tooltip:(0,s.t)("dashboard.toolbar.dashboard-settings.tooltip","Dashboard settings"),icon:"sliders-v-alt",iconPlacement:"right",children:(0,c.jsx)(s.x6,{i18nKey:"dashboard.actions.open-settings",children:"Settings"})})]})}}function De({dashboard:Le,id:Ge}){const{title:Ze}=Le.useState(),qe=(0,i.useRef)("");return(0,c.jsx)(h.p,{id:Ge,value:Ze,onChange:at=>{Le.setState({title:at.currentTarget.value})},onFocus:at=>{qe.current=at.currentTarget.value},onBlur:at=>{qe.current===at.currentTarget.value||Be(at)||We.changeTitle({source:Le,oldValue:qe.current,newValue:at.currentTarget.value})}})}function Me({dashboard:Le,id:Ge}){const{description:Ze}=Le.useState(),qe=(0,i.useRef)("");return(0,c.jsx)(I.f,{id:Ge,value:Ze,onChange:at=>Le.setState({description:at.currentTarget.value}),onFocus:at=>{qe.current=at.currentTarget.value},onBlur:at=>{qe.current===at.currentTarget.value||Be(at)||We.changeDescription({source:Le,oldValue:qe.current,newValue:at.currentTarget.value})}})}var Te=e(73427),$e=e(87745),Re=e(22175),Ke=e(25953),Ve=e(93389),Se=e(3688),Ye=e(1682),Ue=e(24726);class je{constructor(Ge){this._panels=Ge,this.isEditableDashboardElement=!0,this.key=(0,Ue.A)()}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.panels","Panels"),icon:"folder",instanceName:""}}useEditPaneOptions(){return[new u.C({title:"",id:""})]}onConfirmDelete(){Te.lE.publish(new $e.bY({title:(0,s.t)("dashboard.edit-pane.elements.multiple-panels","Multiple panels"),text:(0,s.t)("dashboard.edit-pane.elements.multiple-panels-delete-text","Are you sure you want to delete these panels? All queries will be removed."),onConfirm:()=>this.onDelete()}))}onDelete(){this._panels.forEach(Ge=>{Ge.onDelete()})}}class Qe{constructor(Ge){this.panel=Ge,this.isEditableDashboardElement=!0,this.typeName="Panel"}getEditableElementInfo(){return{typeName:(0,s.t)("dashboard.edit-pane.elements.panel","Panel"),icon:"chart-line",instanceName:l.jh.interpolate(this.panel,this.panel.state.title,void 0,"text")}}useEditPaneOptions(Ge){const Ze=this.panel,qe=Ze.parent,at=(0,i.useId)(),ht=(0,i.useId)(),Et=(0,i.useId)(),mt=(0,i.useId)(),Pt=(0,i.useMemo)(()=>new u.C({title:"",id:"panel-options"}).addItem(new E.v({title:"",id:at,render:()=>(0,c.jsx)(He,{panel:this.panel})})).addItem(new E.v({title:(0,s.t)("dashboard.viz-panel.options.title-option","Title"),id:ht,value:Ze.state.title,popularRank:1,render:Kt=>(0,c.jsx)(Re.m,{id:Kt.props.id,panel:Ze,isNewElement:Ge})})).addItem(new E.v({title:(0,s.t)("dashboard.viz-panel.options.description","Description"),id:Et,value:Ze.state.description,render:Kt=>(0,c.jsx)(Re.dF,{id:Kt.props.id,panel:Ze})})).addItem(new E.v({title:(0,s.t)("dashboard.viz-panel.options.transparent-background","Transparent background"),id:mt,render:Kt=>(0,c.jsx)(Re.R4,{id:Kt.props.id,panel:Ze})})),[at,ht,Ze,Et,mt,Ge]),rt=(0,i.useMemo)(()=>(0,Se.y)(qe)&&qe.getOptions?qe.getOptions():[],[qe]);return[Pt,...rt]}onDelete(){Ye.b4.getLayoutManagerFor(this.panel).removePanel?.(this.panel)}onConfirmDelete(){Te.lE.publish(new $e.bY({title:(0,s.t)("dashboard.viz-panel.delete-panel-title","Delete panel?"),text:(0,s.t)("dashboard.viz-panel.delete-panel-text","Deleting this panel will also remove all queries. Are you sure you want to continue?"),yesText:(0,s.t)("dashboard.viz-panel.delete-panel-yes","Delete"),onConfirm:()=>{this.onDelete()}}))}onDuplicate(){Ye.b4.getLayoutManagerFor(this.panel).duplicatePanel?.(this.panel)}onCopy(){(0,y.YQ)(this.panel).copyPanel(this.panel)}onChangeName(Ge){(0,Re.dJ)(this.panel,Ge)}createMultiSelectedElement(Ge){return new je(Ge)}scrollIntoView(){(this.panel.parent instanceof Ke.X||this.panel.parent instanceof Ve.U)&&this.panel.parent.scrollIntoView()}}const He=({panel:Le})=>(0,c.jsx)(S.B,{alignItems:"center",width:"100%",children:(0,c.jsx)(V.$n,{onClick:()=>{U.Ny.partial({editPanel:(0,y.Cs)(Le)})},icon:"sliders-v-alt",fullWidth:!0,size:"sm",tooltip:(0,s.t)("dashboard.viz-panel.options.configure-button-tooltip","Edit queries and visualization options"),children:(0,c.jsx)(s.x6,{i18nKey:"dashboard.new-panel.configure-button",children:"Configure"})})});function Je(){return(0,n.A)("grafana.dashboards.edit-pane.isCollapsed",!1)}function de(Le){if(Le){if(T(Le))return Le;if(Le instanceof l.Eb)return new Qe(Le);if(Le instanceof l.tI)return new b(Le);if(Le instanceof r.H$)return new Xe(Le);if(Le instanceof l.Pj)return new X(Le);if(Le instanceof l.xc)return new B(Le);if((0,N.VD)(Le))return new ae(Le)}}class ve extends a.x{static{this.type="new-object-added-to-canvas"}}class me extends a.x{static{this.type="object-removed-from-canvas"}}class xe extends a.x{static{this.type="objects-reordered-on-canvas"}}class Ee extends a.x{static{this.type="conditional-rendering-changed"}}class Pe extends a.x{static{this.type="dashboard-edit-action"}}class Oe extends a.x{static{this.type="dashboard-state-changed"}}const We={edit(Le){Le.source.publishEvent(new Pe(Le),!0)},addElement(Le){const{addedObject:Ge,source:Ze,perform:qe,undo:at}=Le,ht=de(Ge);if(!ht)throw new Error("Added object is not an editable element");const Et=ht.getEditableElementInfo().typeName;We.edit({description:(0,s.t)("dashboard.edit-actions.add","Add {{typeName}}",{typeName:Et}),addedObject:Ge,source:Ze,perform:qe,undo:at})},removeElement(Le){const{removedObject:Ge,source:Ze,perform:qe,undo:at}=Le,ht=de(Ge);if(!ht)throw new Error("Removed object is not an editable element");const Et=ht.getEditableElementInfo().typeName;We.edit({description:(0,s.t)("dashboard.edit-actions.remove","Remove {{typeName}}",{typeName:Et}),removedObject:Ge,source:Ze,perform:qe,undo:at})},changeTitle:Fe({description:(0,s.t)("dashboard.title.action","Change dashboard title"),prop:"title"}),changeDescription:Fe({description:(0,s.t)("dashboard.description.action","Change dashboard description"),prop:"description"}),addVariable({source:Le,addedObject:Ge}){const Ze=[...Le.state.variables];We.addElement({source:Le,addedObject:Ge,perform(){Le.setState({variables:[...Ze,Ge]})},undo(){Le.setState({variables:[...Ze]})}})},removeVariable({source:Le,removedObject:Ge}){const Ze=[...Le.state.variables];We.removeElement({source:Le,removedObject:Ge,perform(){Le.setState({variables:Ze.filter(qe=>qe!==Ge)})},undo(){Le.setState({variables:Ze})}})},changeVariableName:Fe({description:(0,s.t)("dashboard.variable.name.action","Change variable name"),prop:"name"}),changeVariableLabel:Fe({description:(0,s.t)("dashboard.variable.label.action","Change variable label"),prop:"label"}),changeVariableDescription:Fe({description:(0,s.t)("dashboard.variable.description.action","Change variable description"),prop:"description"}),changeVariableHideValue:Fe({description:(0,s.t)("dashboard.variable.hide.action","Change variable hide option"),prop:"hide"}),moveElement(Le){const{movedObject:Ge,source:Ze,perform:qe,undo:at}=Le,ht=de(Ge);if(!ht)throw new Error("Moved object is not an editable element");const Et=ht.getEditableElementInfo().typeName;We.edit({description:(0,s.t)("dashboard.edit-actions.move","Move {{typeName}}",{typeName:Et}),movedObject:Ge,source:Ze,perform:qe,undo:at})}};function Fe({description:Le,prop:Ge}){return({source:Ze,oldValue:qe,newValue:at})=>{We.edit({description:Le,source:Ze,perform:()=>{Ze.setState({[Ge]:at})},undo:()=>{Ze.setState({[Ge]:qe})}})}}function Be(Le){return Le.relatedTarget&&(Le.relatedTarget.id===P.Qk||Le.relatedTarget.id===P.aS)}},33184:(ne,A,e)=>{"use strict";e.d(A,{Kh:()=>n.Kh,S8:()=>s,oF:()=>l});var n=e(51388);let a;const s=r=>{a=r},l=()=>a},33352:(ne,A,e)=>{"use strict";e.d(A,{S:()=>i});var n=e(74848),a=e(2543),s=e(96540),l=e(38919);const r=(h,f,g,u)=>{const E=c(h,f,u),v=c(f,h,u),p=Math.max(E,v);let m=Math.floor(h/p),y=Math.ceil(u/m);m=Math.ceil(u/y);const d=m-(m*y-u),x=h/d-g+g/d;return{width:h/m-g+g/m,height:f/y-g+g/y,widthOnLastRow:x,xCount:m,yCount:y}};function c(h,f,g){const u=Math.ceil(Math.sqrt(g*h/f));return Math.floor(u*f/h)*u<g?f/Math.ceil(u*f/h):h/u}class i extends s.PureComponent{static{this.defaultProps={itemSpacing:8}}constructor(f){super(f),this.state={values:f.getValues()}}componentDidUpdate(f){const{renderCounter:g,source:u}=this.props;(g!==f.renderCounter||u!==f.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:f,width:g,height:u}=this.props;return f===l.wV.Auto?g>u?l.wV.Vertical:l.wV.Horizontal:f}renderGrid(){const{renderValue:f,height:g,width:u,itemSpacing:E,getAlignmentFactors:v,orientation:p}=this.props,{values:m}=this.state,y=r(u,g,E,m.length),d=v?v(m,y.width,y.height):{};let x=0,b=0,D=[];for(let C=0;C<m.length;C++){const P=m[C],O=b===y.yCount-1?y.widthOnLastRow:y.width,S=y.height,B=x*O+E*x,K=b*S+E*b,U={position:"absolute",left:B,top:K,width:`${O}px`,height:`${S}px`};D.push((0,n.jsx)("div",{style:U,children:f({value:P,width:O,height:S,alignmentFactors:d,orientation:p,count:m.length})},C)),x++,x===y.xCount&&(x=0,b++)}return(0,n.jsx)("div",{style:{position:"relative"},children:D})}render(){const{renderValue:f,height:g,width:u,itemSpacing:E,getAlignmentFactors:v,autoGrid:p,orientation:m,maxVizHeight:y,minVizWidth:d,minVizHeight:x}=this.props,{values:b}=this.state;if(p&&m===l.wV.Auto)return this.renderGrid();const D={display:"flex"},C={display:"flex",overflow:`${d?"auto":"hidden"} ${x?"auto":"hidden"}`};let P=g,T=u;const O=this.getOrientation();switch(O){case l.wV.Horizontal:const B=(g+E)/b.length-E;C.flexDirection="column",C.height=`${g}px`,C.overflowX="hidden",C.scrollbarWidth="thin",D.marginBottom=`${E}px`,T=u,P=(0,a.clamp)(B,x??0,y??B);break;case l.wV.Vertical:C.flexDirection="row",C.justifyContent="space-between",C.overflowY="hidden",D.marginRight=`${E}px`,P=g,T=Math.max(u/b.length-E+E/b.length,d??0)}D.width=`${T}px`,D.height=`${P}px`;const S=v?v(b,T,P):{};return(0,n.jsx)("div",{style:C,children:b.map((B,K)=>(0,n.jsx)("div",{style:o(D,K,b.length),children:f({value:B,width:T,height:P,alignmentFactors:S,orientation:O,count:b.length})},K))})}}function o(h,f,g){return f===g-1?{...h,marginRight:0,marginBottom:0}:h}},33380:(ne,A,e)=>{"use strict";e.d(A,{R:()=>s});var n=e(45863),a=e(8285);class s{constructor(r){this._vizPanel=r}get id(){const r=(0,a.Cs)(this._vizPanel);return isNaN(r)?(console.error("VizPanel key could not be translated to a legacy numeric panel id",this._vizPanel),0):r}get description(){return this._vizPanel.state.description}get type(){return this._vizPanel.state.pluginId}get title(){return this._vizPanel.state.title}get transformations(){return this._vizPanel.state.$data instanceof n.Es?this._vizPanel.state.$data.state.transformations:[]}get targets(){const r=(0,a.un)(this._vizPanel);return r?r.state.queries:[]}get datasource(){return(0,a.un)(this._vizPanel)?.state.datasource}get options(){return this._vizPanel.state.options}get fieldConfig(){return this._vizPanel.state.fieldConfig}get pluginVersion(){return this._vizPanel.state.pluginVersion}}},33553:(ne,A,e)=>{"use strict";e.d(A,{O:()=>n});var n=(a=>(a.Absolute="absolute",a.Percentage="percentage",a))(n||{})},33604:(ne,A,e)=>{"use strict";e.d(A,{R:()=>a,f:()=>s});let n;function a(l){if(n)throw new Error("setPluginComponentsHook() function should only be called once, when Grafana is starting.");n=l}function s(l){if(!n)throw new Error("setPluginComponentsHook(options) can only be used after the Grafana instance has started.");return n(l)}},33605:(ne,A,e)=>{"use strict";e.d(A,{A:()=>n});const n="__GRAFANA_INTERNAL_MULTICOMBOBOX_ALL_OPTION__"},33707:(ne,A,e)=>{"use strict";e.d(A,{U:()=>a,W:()=>s});let n;function a(l){if(n)throw new Error("setUsePluginFunctionsHook() function should only be called once, when Grafana is starting.");n=l}function s(l){if(!n)throw new Error("usePluginFunctions(options) can only be used after the Grafana instance has started.");return n(l)}},33749:(ne,A,e)=>{"use strict";e.d(A,{fX:()=>s,nB:()=>a,n_:()=>n,p6:()=>l});var n=(r=>(r.DashboardView="dashboard-view",r.DataRequest="data-request",r))(n||{});const a=r=>!!r.payload.page,s=r=>!!r.payload.interactionName,l=r=>!!r.payload.experimentId},33985:(ne,A,e)=>{"use strict";e.d(A,{t:()=>n});const n=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]},33998:(ne,A,e)=>{"use strict";e.d(A,{LQ:()=>o,g2:()=>c,j2:()=>h,jX:()=>f});var n=e(2543),a=e.n(n),s=e(92745),l=e(68143),r=e(77256);const c="alerting.notifications.conflict",i="alerting.notifications.routes.conflictingMatchers";function o(g){const u=(0,r.E2)(g);return u?{[c]:h(u),[i]:(0,s.t)("alerting.policies.update-errors.routes.conflictingMatchers","Cannot add or update route: matchers conflict with an external routing tree if we merged matchers {{-matchers}}. This would make the route unreachable.",{matchers:g.data.details?.causes?.map(v=>v.message).join(", ")??(0,s.t)("alerting.policies.update-errors.routes.unknownMatchers","<unknown matchers>")})}[u]:g.data.message}function h(g){return{[c]:(0,s.t)("alerting.policies.update-errors.conflict","The notification policy tree has been updated by another user.")}[g]}function f(g){return(0,l.NF)(g)&&(0,n.get)(g.data,"kind")==="Status"&&(0,n.get)(g.data,"status")==="Failure"}},34107:(ne,A,e)=>{"use strict";e.d(A,{S:()=>i});var n=e(74848),a=e(2543),s=e.n(a),l=e(96540),r=e(46644),c=e(18857);class i extends l.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:h,allowMultiple:f,defaultStat:g,onChange:u}=this.props,E=r.AS.list(h);if(E.length!==h.length){const v=E.map(m=>m.id),p=(0,a.difference)(h,v);console.warn("Unknown stats",p,h),u(E.map(m=>m.id))}!f&&h.length>1&&(console.warn("Removing extra stat",h),u([h[0]])),g&&h.length<1&&u([g])},this.onSelectionChange=h=>{const{onChange:f}=this.props;Array.isArray(h)?f(h.map(g=>g.value)):f(h&&h.value?[h.value]:[])}}static{this.defaultProps={allowMultiple:!1}}componentDidMount(){this.checkInput()}componentDidUpdate(h){this.checkInput()}render(){const{stats:h,allowMultiple:f,defaultStat:g,placeholder:u,className:E,menuPlacement:v,width:p,inputId:m,filterOptions:y}=this.props,d=r.AS.selectOptions(h,y);return(0,n.jsx)(c.l6,{value:d.current,className:E,isClearable:!g,isMulti:f,width:p,isSearchable:!0,options:d.options,placeholder:u,onChange:this.onSelectionChange,menuPlacement:v,inputId:m})}}},34176:(ne,A,e)=>{"use strict";e.d(A,{o:()=>G,e:()=>W});var n=e(74848),a=e(21835),s=e(96540),l=e(8642),r=e(51898),c=e(92745),i=e(27489),o=e(76319),h=e(45861),f=e(71599),g=e(93256),u=e(92807),E=e(32881),v=e(63142),p=e(65642),m=e(80849),y=e(36490),d=e(41654),x=e(62667);function b({message:w}){const _=(0,s.useCallback)(()=>{y.Ny.partial({tab:x.M8.Query})},[]);return(0,n.jsx)("div",{style:{marginTop:"100px"},children:(0,n.jsx)(d.B,{direction:"row",justifyContent:"center",children:(0,n.jsxs)(d.B,{direction:"column",gap:2,children:[(0,n.jsx)("h2",{children:w}),(0,n.jsx)("div",{children:(0,n.jsx)(h.$n,{size:"md",variant:"secondary",icon:"arrow-left",onClick:_,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.panel-not-supported.go-back-to-queries",children:"Go back to Queries"})})})]})})})}var D=e(47350),C=e(22803),P=e(66615),T=e(28882),O=e(34999),S=e(63527),B=e(8073);const K={[T.f.Transformations]:"https://grafana.com/docs/grafana/latest/panels/transformations",[T.f.FieldConfig]:"https://grafana.com/docs/grafana/latest/panels/field-configuration-options/",[T.f.FieldConfigOverrides]:"https://grafana.com/docs/grafana/latest/panels/field-configuration-options/#override-a-field"},U=w=>K[w];var F=e(85622);const I="dashboard.components.TransformationEditor.featureInfoBox.isDismissed";function V(w){const{noTransforms:_,search:Q,xforms:ae,onSearchChange:q,onSearchKeyDown:k,onTransformationAdd:ee,suffix:j}=w;return(0,n.jsxs)(d.B,{direction:"column",children:[_&&(0,n.jsx)(E.mc,{grow:1,children:(0,n.jsx)(P.b,{storageKey:I,defaultValue:!1,children:(J,Z)=>J?null:(0,n.jsxs)(O.F,{title:(0,c.t)("dashboard.transformation-picker.title-transformations","Transformations"),severity:"info",onRemove:()=>{Z(!0)},children:[(0,n.jsxs)("p",{children:[(0,n.jsx)(c.x6,{i18nKey:"dashboard.transformation-picker.info",children:"Transformations allow you to join, calculate, re-order, hide, and rename your query results before they are visualized."}),(0,n.jsx)("br",{}),(0,n.jsx)(c.x6,{i18nKey:"dashboard.transformation-picker.info-graph-not-suitable",children:"Many transforms are not suitable if you're using the Graph visualization, as it currently only supports time series data."}),(0,n.jsx)("br",{}),(0,n.jsxs)(c.x6,{i18nKey:"dashboard.transformation-picker.info-switch-to-table",children:["It can help to switch to the Table visualization to understand what a transformation is doing."," "]})]}),(0,n.jsx)("a",{href:U(T.f.Transformations),className:"external-link",target:"_blank",rel:"noreferrer",children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.transformation-picker.read-more",children:"Read more"})})]})})}),(0,n.jsx)(S.p,{"data-testid":r.Tp.components.Transforms.searchInput,value:Q??"",autoFocus:!_,placeholder:(0,c.t)("dashboard.transformation-picker.placeholder-search-for-transformation","Search for transformation"),onChange:q,onKeyDown:k,suffix:j}),ae.map(J=>(0,n.jsx)(M,{transform:J,onClick:()=>{ee({value:J.id})}},J.name))]})}function M({transform:w,onClick:_}){const Q=(0,v.of)(L);return(0,n.jsxs)(B.Z,{className:Q.card,"data-testid":r.Tp.components.TransformTab.newTransform(w.name),onClick:_,children:[(0,n.jsx)(B.Z.Heading,{children:w.name}),(0,n.jsx)(B.Z.Description,{children:w.description}),w.state&&(0,n.jsx)(B.Z.Tags,{children:(0,n.jsx)(F.p,{state:w.state})})]})}function L(w){return{card:(0,C.css)({margin:"0",padding:`${w.spacing(1)}`})}}var N=e(76808);const W="viewAll";class R extends s.PureComponent{constructor(_){super(_),this.onSearchChange=q=>{this.setState({search:q.target.value})},this.onSearchKeyDown=q=>{if(q.key==="Enter"){const{search:k}=this.state;if(k){const ee=k.toLowerCase(),j=l.h.list().filter(J=>(J.name+J.description).toLowerCase().indexOf(ee)>=0);j.length>0&&this.onTransformationAdd({value:j[0].id})}}else q.keyCode===27&&(this.setState({search:"",showPicker:!1}),q.stopPropagation())},this.getTransformationNextId=q=>{const{transformations:k}=this.state;let ee=0;const j=k.filter(J=>J.id.startsWith(q)).map(J=>J.id);return j.length!==0&&(ee=Math.max(...j.map(J=>parseInt(J.match(/\d+/)[0],10)))+1),`${q}-${ee}`},this.onTransformationAdd=q=>{let k="panel_editor_tabs_transformations_management";p.Ay.featureToggles.transformationsRedesign&&(k="transformations_redesign_"+k),(0,i.rR)(k,{action:"add",transformationId:q.value});const{transformations:ee}=this.state,j=this.getTransformationNextId(q.value);this.setState({search:"",showPicker:!1}),this.onChange([...ee,{id:j,transformation:{id:q.value,options:{}}}])},this.onTransformationChange=(q,k)=>{const{transformations:ee}=this.state,j=Array.from(ee);let J="panel_editor_tabs_transformations_management";p.Ay.featureToggles.transformationsRedesign&&(J="transformations_redesign_"+J),(0,i.rR)(J,{action:"change",transformationId:j[q].transformation.id}),j[q].transformation=k,this.onChange(j)},this.onTransformationRemove=q=>{const{transformations:k}=this.state,ee=Array.from(k);let j="panel_editor_tabs_transformations_management";p.Ay.featureToggles.transformationsRedesign&&(j="transformations_redesign_"+j),(0,i.rR)(j,{action:"remove",transformationId:ee[q].transformation.id}),ee.splice(q,1),this.onChange(ee)},this.onTransformationRemoveAll=()=>{this.onChange([]),this.setState({showRemoveAllModal:!1})},this.onDragEnd=q=>{const{transformations:k}=this.state;if(!q||!q.destination)return;const ee=q.source.index,j=q.destination.index;if(ee===j)return;const J=Array.from(k),[Z]=J.splice(ee,1);J.splice(j,0,Z),this.onChange(J)},this.renderEmptyMessage=()=>(0,n.jsx)(m.p,{onShowPicker:()=>{this.setState({showPicker:!0})}}),this.renderTransformationEditors=()=>{const{data:q,transformations:k}=this.state;return(0,n.jsx)(a.JY,{onDragEnd:this.onDragEnd,children:(0,n.jsx)(a.gL,{droppableId:"transformations-list",direction:"vertical",children:ee=>(0,n.jsxs)("div",{ref:ee.innerRef,...ee.droppableProps,children:[(0,n.jsx)(D.A,{configs:k,data:q,onRemove:this.onTransformationRemove,onChange:this.onTransformationChange}),ee.placeholder]})})})};const Q=_.panel.transformations||[],ae=this.buildTransformationIds(Q);this.state={transformations:Q.map((q,k)=>({transformation:q,id:ae[k]})),data:{series:[]},search:"",selectedFilter:W,showIllustrations:!0},this.ref=(0,s.createRef)()}buildTransformationIds(_){const Q={},ae=[];for(let q=0;q<_.length;q++){const k=_[q];Q[k.id]===void 0?Q[k.id]=0:Q[k.id]+=1,ae.push(`${_[q].id}-${Q[_[q].id]}`)}return ae}componentDidMount(){this.subscription=this.props.panel.getQueryRunner().getData({withTransforms:!1,withFieldConfig:!1}).subscribe({next:_=>this.setState({data:_})})}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(_,Q){if(p.Ay.featureToggles.transformationsRedesign){const q=!(Q.transformations.length>0)||Q.showPicker,ee=!(this.state.transformations.length>0)||this.state.showPicker;if(q!==ee){const j=Math.random()/2;this.setState({scrollTop:ee?j:Number.MAX_SAFE_INTEGER})}}Q.scrollTop!==this.state.scrollTop&&this.ref.current?.scrollTo({top:this.state.scrollTop})}onChange(_){this.setState({transformations:_}),this.props.panel.setTransformations(_.map(Q=>Q.transformation))}renderTransformsPicker(){let{showPicker:_}=this.state;const{transformations:Q,search:ae}=this.state,{transformationsRedesign:q}=p.Ay.featureToggles,k=!Q?.length,ee=Q.length>0;let j=null,J=l.h.list().sort((ie,ce)=>ie.name>ce.name?1:ce.name>ie.name?-1:0);if(!q&&k&&(_=!0),this.state.selectedFilter!==W&&(J=J.filter(ie=>ie.categories&&this.state.selectedFilter&&ie.categories.has(this.state.selectedFilter))),ae){const ie=ae.toLowerCase(),ce=J.filter(re=>(re.name+re.description).toLowerCase().indexOf(ie)>=0);j=(0,n.jsxs)(n.Fragment,{children:[ce.length," / ",J.length," \xA0\xA0",(0,n.jsx)(o.K,{name:"times",onClick:()=>{this.setState({search:""})},tooltip:(0,c.t)("dashboard.un-themed-transformations-editor.tooltip-clear-search","Clear search")})]}),J=ce}!j&&_&&!k&&(j=(0,n.jsx)(o.K,{name:"times",onClick:()=>{this.setState({showPicker:!1})},tooltip:(0,c.t)("dashboard.un-themed-transformations-editor.tooltip-close-picker","Close picker")}));let Z=null,te=null;q?(Z=(0,n.jsx)(N.R,{noTransforms:k,search:ae,suffix:j,xforms:J,onClose:()=>this.setState({showPicker:!1}),onSelectedFilterChange:ie=>this.setState({selectedFilter:ie}),onShowIllustrationsChange:ie=>this.setState({showIllustrations:ie}),onSearchChange:this.onSearchChange,onSearchKeyDown:this.onSearchKeyDown,onTransformationAdd:this.onTransformationAdd,data:this.state.data.series,selectedFilter:this.state.selectedFilter,showIllustrations:this.state.showIllustrations}),te=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.$n,{icon:"times",variant:"secondary",onClick:()=>this.setState({showRemoveAllModal:!0}),style:{marginLeft:this.props.theme.spacing.md},children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.un-themed-transformations-editor.delete-all-transformations",children:"Delete all transformations"})}),(0,n.jsx)(f.u,{isOpen:!!this.state.showRemoveAllModal,title:(0,c.t)("dashboard.un-themed-transformations-editor.title-delete-all-transformations","Delete all transformations?"),body:(0,c.t)("dashboard.un-theme-transformations-editor.body-delete-all-transformations","By deleting all transformations, you will go back to the main selection screen."),confirmText:(0,c.t)("dashboard.un-themed-transformations-editor.confirmText-delete-all","Delete all"),onConfirm:()=>this.onTransformationRemoveAll(),onDismiss:()=>this.setState({showRemoveAllModal:!1})})]})):Z=(0,n.jsx)(V,{noTransforms:k,search:ae,suffix:j,xforms:J,onSearchChange:this.onSearchChange,onSearchKeyDown:this.onSearchKeyDown,onTransformationAdd:this.onTransformationAdd});const se=(0,n.jsxs)(g.e,{children:[(0,n.jsx)(h.$n,{icon:"plus",variant:"secondary",onClick:()=>{this.setState({showPicker:!0})},"data-testid":r.Tp.components.Transforms.addTransformationButton,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.un-themed-transformations-editor.actions.add-another-transformation",children:"Add another transformation"})}),te]});return(0,n.jsxs)(n.Fragment,{children:[_&&Z,q&&ee&&se||!q&&!_&&ee&&se]})}render(){const{panel:{alert:_}}=this.props,{transformations:Q}=this.state,ae=Q.length>0;if(_){const q=ae?"Transformations can't be used on a panel with alerts":"Transformations can't be used on a panel with existing alerts";return(0,n.jsx)(b,{message:q})}return(0,n.jsx)(u.P,{ref:this.ref,minHeight:"100%",children:(0,n.jsx)(E.mc,{padding:"lg",children:(0,n.jsxs)("div",{"data-testid":r.Tp.components.TransformTab.content,children:[!ae&&p.Ay.featureToggles.transformationsRedesign&&this.renderEmptyMessage(),ae&&this.renderTransformationEditors(),this.renderTransformsPicker()]})})})}}const G=(0,v.SL)(R)},34213:(ne,A,e)=>{"use strict";e.d(A,{d:()=>o});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(63142),c=e(45861),i=e(30703);const o=({currentPage:f,numberOfPages:g,onNavigate:u,hideWhenSinglePage:E,showSmallVersion:v,className:p})=>{const m=(0,r.of)(h),y=v?1:8,d=(0,s.useMemo)(()=>{const D=[...new Array(g).keys()],C=g>y,P=(T,O)=>(0,n.jsx)("li",{className:m.item,children:(0,n.jsx)(c.$n,{size:"sm",variant:O,onClick:()=>u(T),children:T})},T);return D.reduce((T,O)=>{const S=O+1,B=S===f?"primary":"secondary",K=y,U=g-y+1,F=U-K,I=S===1||S===g,V=F>-1&&f>=K&&f<=U,M=v?1:3,L=v?0:2;return C?I||f<K&&S<K||F>=0&&f>U&&S>U||F<0&&f>=K&&S>U||V&&S>=f-L&&S<=f+L?T.push(P(S,B)):(S===K&&f<K||S===U&&f>U||V&&(S===f-M||S===f+M))&&T.push((0,n.jsx)("li",{className:m.item,children:(0,n.jsx)(i.I,{className:m.ellipsis,name:"ellipsis-v","data-testid":"pagination-ellipsis-icon"})},S)):T.push(P(S,B)),T},[])},[f,g,u,y,v,m.ellipsis,m.item]);if(E&&g<=1)return null;const x=(0,l.t)("grafana-ui.pagination.previous-page","previous page"),b=(0,l.t)("grafana-ui.pagination.next-page","next page");return(0,n.jsx)("div",{className:(0,a.cx)(m.container,p),role:"navigation",children:(0,n.jsxs)("ol",{children:[(0,n.jsx)("li",{className:m.item,children:(0,n.jsx)(c.$n,{"aria-label":x,size:"sm",variant:"secondary",onClick:()=>u(f-1),disabled:f===1,children:(0,n.jsx)(i.I,{name:"angle-left"})})}),d,(0,n.jsx)("li",{className:m.item,children:(0,n.jsx)(c.$n,{"aria-label":b,size:"sm",variant:"secondary",onClick:()=>u(f+1),disabled:f===g,children:(0,n.jsx)(i.I,{name:"angle-right"})})})]})})},h=()=>({container:(0,a.css)({float:"right"}),item:(0,a.css)({display:"inline-block",paddingLeft:"10px",marginBottom:"5px"}),ellipsis:(0,a.css)({transform:"rotate(90deg)"})})},34273:(ne,A,e)=>{"use strict";e.d(A,{W:()=>s});var n=e(95004);function a(){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="abcdefghijklmnopqrstuvwxyz",c=l.length,i=new Map;return o=>{const h=i.get(o);if(h!=null)return h;const f=[...o].map(g=>g.toLowerCase()&&g!==g.toUpperCase()?r.charAt(Math.floor(Math.random()*c)):g.toUpperCase()&&g!==g.toUpperCase()?l.charAt(Math.floor(Math.random()*c)):g).join("");return i.set(o,f),f}}function s(l,r){if(!(r.labels||r.names||r.values))return l;const c=new Set(["time","value","exemplar","traceid","id","uid","uuid","__name__","le","name"]),i=a();return l.map(o=>{let{schema:h,data:f}=o;if(h&&f){if(r.labels){for(const g of h.fields)if(g.labels){const u={};for(const[E,v]of Object.entries(g.labels))u[E]=i(v);g.labels=u}}if(r.names)for(const g of h.fields)g.name?.length&&!c.has(g.name.toLowerCase())&&(g.name=i(g.name));r.values&&h.fields.forEach((g,u)=>{if(g.type===n.PU.string&&f){const E=f.values[u].map(v=>i(String(v)));f.values[u]=E}})}return{schema:h,data:f}})}},34339:(ne,A,e)=>{"use strict";e.d(A,{_:()=>r});var n=e(74848),a=e(22803),s=e(76319),l=e(63142);const r=({icon:i,iconType:o,iconSize:h,tooltip:f,onClick:g,children:u})=>{const E=(0,l.of)(c);return(0,n.jsxs)("div",{className:E.noBorderContainer,children:[i&&(0,n.jsx)(s.K,{name:i,size:h,iconType:o,tooltip:f,tooltipPlacement:"bottom",onClick:g}),u]})},c=i=>({noBorderContainer:(0,a.css)({padding:`0 ${i.spacing(.5)}`,display:"flex"})})},34343:(ne,A,e)=>{"use strict";e.d(A,{m:()=>c});var n=e(74848),a=e(22803),s=e(63142),l=e(45861),r=e(30703);const c=({label:o,selected:h,onClick:f,icon:g="check"})=>{const u=(0,s.of)(i),E=(0,s.of)(l.my);return(0,n.jsxs)("button",{type:"button",className:(0,a.cx)(E,u.wrapper,h&&u.selected),onClick:f,children:[(0,n.jsx)("span",{children:o}),h&&(0,n.jsx)(r.I,{name:g,className:u.icon,"data-testid":"filter-pill-icon"})]})},i=o=>({wrapper:(0,a.css)({background:o.colors.background.secondary,borderRadius:o.shape.radius.pill,padding:o.spacing(0,2),fontSize:o.typography.bodySmall.fontSize,fontWeight:o.typography.fontWeightMedium,lineHeight:o.typography.bodySmall.lineHeight,color:o.colors.text.secondary,display:"flex",alignItems:"center",height:"32px",position:"relative",border:`1px solid ${o.colors.background.secondary}`,whiteSpace:"nowrap","&:hover":{background:o.colors.action.hover,color:o.colors.text.primary}}),selected:(0,a.css)({color:o.colors.text.primary,background:o.colors.action.selected,"&:hover":{background:o.colors.action.focus}}),icon:(0,a.css)({marginLeft:o.spacing(.5)})})},34455:(ne,A,e)=>{"use strict";e.d(A,{A:()=>a,C:()=>n});function n(s){return{...s,fields:s.fields.map(l=>{const r=Number(l.config.noValue);return Number.isNaN(r)?l:a(l,r)})}}function a(s,l){const r=s.values.slice();for(let c=0;c<r.length;c++)r[c]===null&&(r[c]=l);return{...s,values:r}}},34621:(ne,A,e)=>{"use strict";e.d(A,{J:()=>o});var n=e(96540),a=e(32899),s=e(92745),l=e(75234),r=e(27044),c=e(44220),i=e(52763);function o({folderUID:f,request:g,workflow:u,handlers:E,successMessage:v,repository:p,resourceType:m}){const y=(0,i.wA)();(0,n.useEffect)(()=>{const x={repoType:p?.type||"git",resourceType:m,workflow:u};if(g.isError){E.onError?.(g.error,x);return}if(g.isSuccess&&g.data){const{ref:b,path:D,urls:C,resource:P}=g.data,T=P.upsert,O=v||h(x);if((0,l.J7)().publish({type:a.r1.alertSuccess.name,payload:[O]}),u==="branch"&&E.onBranchSuccess&&b&&D){const S={ref:b,path:D,urls:C};E.onBranchSuccess?.(S,x,T)}u==="write"&&E.onWriteSuccess&&(f&&y((0,c.bw)({parentUID:f||p?.name,pageSize:r.md})),E.onWriteSuccess(x,T)),E.onDismiss?.()}},[g,u,E,v,p,m,f,y])}function h(f){const{resourceType:g}=f;switch(g){case"dashboard":return(0,s.t)("provisioned-resource-request-handler-dashboard","Dashboard saved successfully");case"folder":return(0,s.t)("provisioned-resource-request-handler-folder","Folder created successfully");default:return(0,s.t)("provisioned-resource-request-handler","Resource saved successfully")}}},34624:(ne,A,e)=>{"use strict";e.d(A,{K:()=>a,P:()=>s});var n=e(92745);const a=()=>({isOpen:!0,level:0,item:{kind:"folder",title:(0,n.t)("browse-dashboards.folder-picker.root-title","Dashboards"),uid:""}}),s=({title:l,managedBy:r,uid:c})=>({isOpen:!0,level:0,item:{kind:"folder",title:l||"",uid:c||"",managedBy:r}})},34734:(ne,A,e)=>{"use strict";e.d(A,{B9:()=>r,OP:()=>n,PP:()=>g,RT:()=>o,SM:()=>E,Sd:()=>i,_N:()=>f,bS:()=>d,fP:()=>v,fo:()=>l,gs:()=>m,h2:()=>y,k1:()=>s,mk:()=>u,o6:()=>a,qb:()=>h,v9:()=>c,vk:()=>p});const n=1e4,a=1e3,s=30,l=25,r="grafana.datasources.prometheus.browser.labels",c=/^$|^\d+(ms|[Mwdhmsy])$/,i=/(\d+)(.+)/,o=/^(0|[1-9]\d*)(\.\d+)?(e\+?\d+)?$/,h="{}",f=4e4,g=1e3,u='{__name__!=""}',E="__name__",v="Value is not valid, you can use number with time unit specifier: y, M, w, d, h, m, s",p="Value is not valid, you can use only numbers or leave it empty to use default limit or set 0 to have no limit.",m="-Instant",y=["api/v1/query","api/v1/query_range","api/v1/series","api/v1/labels","suggestions"],d="none"},34753:(ne,A,e)=>{"use strict";e.d(A,{D:()=>u});var n=e(74848),a=e(22803),s=e(2543),l=e(63142),r=e(30703);const c=({diff:v})=>{const p=(0,l.of)(i),m=!(0,s.isUndefined)(v.originalValue)&&!(0,s.isArray)(v.originalValue)&&!(0,s.isObject)(v.originalValue),y=!(0,s.isUndefined)(v.value)&&!(0,s.isArray)(v.value)&&!(0,s.isObject)(v.value);return(0,n.jsxs)(n.Fragment,{children:[m&&(0,n.jsx)("span",{className:p,children:String(v.originalValue)}),m&&y?(0,n.jsx)(r.I,{name:"arrow-right"}):null,y&&(0,n.jsx)("span",{className:p,children:String(v.value)})]})},i=v=>(0,a.css)({backgroundColor:v.colors.action.hover,borderRadius:v.shape.radius.default,color:v.colors.text.primary,fontSize:v.typography.body.fontSize,margin:v.spacing(0,.5),padding:v.spacing(.25,.5)});var o=e(61371);const h={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0,endLineNumber:0},f=({diff:v,title:p})=>{const m=(0,l.of)(g);return v?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.I,{type:"mono",name:"circle",className:m[v.op],size:"xs"})," ",(0,n.jsx)("span",{className:m.embolden,children:p})," ",(0,n.jsx)("span",{children:(0,o.Fl)(v,v.path?.length>1)})," ",(0,n.jsx)(c,{diff:v})]}):(0,n.jsxs)("div",{className:m.withoutDiff,children:[(0,n.jsx)(r.I,{type:"mono",name:"circle",className:m.replace,size:"xs"})," ",(0,n.jsx)("span",{className:m.embolden,children:p})," ",(0,n.jsx)("span",{children:(0,o.Fl)(h,!1)})]})},g=v=>({embolden:(0,a.css)({fontWeight:v.typography.fontWeightBold}),add:(0,a.css)({color:v.colors.success.main}),replace:(0,a.css)({color:v.colors.warning.main}),move:(0,a.css)({color:v.colors.warning.main}),copy:(0,a.css)({color:v.colors.success.main}),_get:(0,a.css)({color:v.colors.success.main}),test:(0,a.css)({color:v.colors.success.main}),remove:(0,a.css)({color:v.colors.error.main}),withoutDiff:(0,a.css)({marginBottom:v.spacing(1)})}),u=({diffs:v,title:p})=>{const m=(0,l.of)(E);return v.length===1?(0,n.jsx)("div",{className:m.container,"data-testid":"diffGroup",children:(0,n.jsx)(f,{title:p,diff:v[0]})}):(0,n.jsxs)("div",{className:m.container,"data-testid":"diffGroup",children:[(0,n.jsx)(f,{title:p}),(0,n.jsx)("ul",{className:m.list,children:v.map((y,d)=>(0,n.jsxs)("li",{className:m.listItem,children:[(0,n.jsx)("span",{children:(0,o.Fl)(y)})," ",(0,n.jsx)(c,{diff:y})]},`${(0,s.last)(y.path)}__${d}`))})]})},E=v=>({container:(0,a.css)({}),list:(0,a.css)({marginLeft:v.spacing(4)}),listItem:(0,a.css)({marginBottom:v.spacing(1),"&:last-child":{marginBottom:0}})})},34788:(ne,A,e)=>{"use strict";e.d(A,{E:()=>r});var n=e(74848),a=e(22803),s=e(96540),l=e(63142);const r=({info:o})=>{const h=(0,l.of)(i),f=c(o);return o?(0,n.jsx)("div",{className:h.description,children:f}):null},c=o=>(0,s.useMemo)(()=>{const h=[];if(!o)return"";if(o.name==="Europe/Simferopol")return"Ukraine, EEST";if(o.countries.length>0){const f=o.countries[0];h.push(f.name)}return o.abbreviation&&h.push(o.abbreviation),h.join(", ")},[o]),i=o=>({description:(0,a.css)({fontWeight:"normal",fontSize:o.typography.size.sm,color:o.colors.text.secondary,whiteSpace:"normal",textOverflow:"ellipsis"})})},34950:(ne,A,e)=>{"use strict";e.d(A,{c:()=>l});var n=e(74848),a=e(96540),s=e(46559);class l extends a.PureComponent{render(){return(0,n.jsx)(s.p,{inline:!0,...this.props})}}},34984:(ne,A,e)=>{"use strict";e.d(A,{O:()=>n,q:()=>a});const n=s=>s.timeZone,a=s=>s.fiscalYearStartMonth},34999:(ne,A,e)=>{"use strict";e.d(A,{F:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(51898),r=e(92745),c=e(63142),i=e(45861),o=e(30703),h=e(31286),f=e(66404);const g=s.forwardRef(({title:v,onRemove:p,children:m,buttonContent:y,elevated:d,bottomSpacing:x,topSpacing:b,className:D,severity:C="error",...P},T)=>{const O=(0,c.$j)(),B=E(O,C,!!v,d,x,b),K={error:"alert",warning:"alert",info:"status",success:"status"},U=P.role||K[C],F=P["aria-label"]||v,I=(0,r.t)("grafana-ui.alert.close-button","Close alert");return(0,n.jsx)("div",{ref:T,className:(0,a.cx)(B.wrapper,D),role:U,"aria-label":F,...P,children:(0,n.jsxs)(h.a,{"data-testid":l.Tp.components.Alert.alertV2(C),display:"flex",backgroundColor:C,borderRadius:"default",paddingY:1,paddingX:2,borderStyle:"solid",borderColor:C,alignItems:"stretch",boxShadow:d?"z3":void 0,children:[(0,n.jsx)(h.a,{paddingTop:1,paddingRight:2,children:(0,n.jsx)("div",{className:B.icon,children:(0,n.jsx)(o.I,{size:"xl",name:u(C)})})}),(0,n.jsxs)(h.a,{paddingY:1,grow:1,children:[(0,n.jsx)(f.E,{color:"primary",weight:"medium",children:v}),m&&(0,n.jsx)("div",{className:B.content,children:m})]}),p&&!y&&(0,n.jsx)("div",{className:B.close,children:(0,n.jsx)(i.$n,{"aria-label":I,icon:"times",onClick:p,type:"button",fill:"text",variant:"secondary"})}),p&&y&&(0,n.jsx)(h.a,{marginLeft:1,display:"flex",alignItems:"center",children:(0,n.jsx)(i.$n,{"aria-label":I,variant:"secondary",onClick:p,type:"button",children:y})})]})})});g.displayName="Alert";const u=v=>{switch(v){case"error":return"exclamation-circle";case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},E=(v,p,m,y,d,x)=>{const b=v.colors[p];return{wrapper:(0,a.css)({flexGrow:1,marginBottom:v.spacing(d??2),marginTop:v.spacing(x??0),position:"relative","&:before":{content:'""',position:"absolute",top:0,left:0,bottom:0,right:0,background:v.colors.background.primary,zIndex:-1}}),icon:(0,a.css)({color:b.text,position:"relative",top:"-1px"}),content:(0,a.css)({color:v.colors.text.primary,paddingTop:m?v.spacing(.5):0,maxHeight:"50vh",overflowY:"auto"}),close:(0,a.css)({position:"relative",color:v.colors.text.secondary,background:"none",display:"flex",top:"-6px",right:"-14px"})}}},35137:(ne,A,e)=>{"use strict";e.d(A,{$:()=>s});var n=e(74848),a=e(31286);const s=({v:l=0,h:r=0,layout:c})=>(0,n.jsx)(a.a,{paddingRight:r,paddingBottom:l,display:c==="inline"?"inline-block":"block"})},35143:(ne,A,e)=>{"use strict";e.d(A,{z:()=>n});const n=new Set(["__expr__","aggregations-io-datasource","apache-iotdb-datasource","aquaqanalytics-kdbbackend-datasource","arabian9ts-mux-datasource","axiomhq-axiom-datasource","cloudwatch","cnos-cnosdb-datasource","criblcloud-search-datasource","datasource","dlopes7-appdynamics-datasource","dvelop-odata-datasource","elasticsearch","factry-historian-datasource","fiskaly-surrealdb-datasource","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-adobeanalytics-datasource","grafana-amazonprometheus-datasource","grafana-athena-datasource","grafana-aurora-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-azurecosmosdb-datasource","grafana-bigquery-datasource","grafana-catchpoint-datasource","grafana-clickhouse-datasource","grafana-cloudflare-datasource","grafana-cockroachdb-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-dynamodb-datasource","grafana-dynatrace-datasource","grafana-falconlogscale-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-looker-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-pagerduty-datasource","grafana-postgresql-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-sumologic-datasource","grafana-surrealdb-datasource","grafana-testdata-datasource","grafana-timestream-datasource","grafana-vercel-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","grafana-yugabyte-datasource","grafana-zendesk-datasource","graphite","gridprotectionalliance-osisoftpi-datasource","hadesarchitect-cassandra-datasource","ibm-aql-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","manassehzhou-maxcompute-datasource","maormil-rabbitmq-datasource","marcusolsson-csv-datasource","mssql","mysql","nagasudhirpulla-api-datasource","needleinajaystack-haystack-datasource","oci-metrics-datasource","opentsdb","parseable-parseable-datasource","prometheus","questdb-questdb-datasource","quickwit-quickwit-datasource","redis-datasource","retrodaredevil-wildgraphql-datasource","stackdriver","tdengine-datasource","trino-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","victoriametrics-logs-datasource","victoriametrics-metrics-datasource","ydbtech-ydb-datasource","yesoreyeram-infinity-datasource"])},35195:(ne,A,e)=>{"use strict";e.d(A,{t:()=>i});var n=e(74848),a=e(51898),s=e(92745),l=e(43173),r=e(34999);const c=a.Tp.pages.ShareDashboardModal.PublicDashboard,i=({mode:o})=>{const h=l.$.featureToggles.newDashboardSharingComponent?(0,s.t)("public-dashboard.share-externally.no-upsert-perm-alert-title","You don\u2019t have permission to {{ action }} a shared dashboard",{action:o}):(0,s.t)("public-dashboard.modal-alerts.no-upsert-perm-alert-title","You don\u2019t have permission to {{ action }} a public dashboard",{action:o});return(0,n.jsx)(r.F,{severity:"warning",title:h,"data-testid":c.NoUpsertPermissionsWarningAlert,bottomSpacing:0,children:l.$.featureToggles.newDashboardSharingComponent?(0,n.jsxs)(s.x6,{i18nKey:"public-dashboard.share-externally.no-upsert-perm-alert-desc",children:["Contact your admin to get permission to ",{action:o}," shared dashboards"]}):(0,n.jsxs)(s.x6,{i18nKey:"public-dashboard.modal-alerts.no-upsert-perm-alert-desc",children:["Contact your admin to get permission to ",{action:o}," public dashboards"]})})}},35216:(ne,A,e)=>{"use strict";e.d(A,{a9:()=>R,rH:()=>_,lQ:()=>w,eY:()=>G,qm:()=>Q});var n=e(54092),a=e(74848),s=e(96540);const l=(0,s.lazy)(()=>Promise.all([e.e(8706),e.e(483),e.e(100)]).then(e.bind(e,90100))),c=ae=>(0,a.jsx)(s.Suspense,{fallback:"Loading...",children:(0,a.jsx)(l,{...ae})});var i=e(73427),o=e(8535),h=e(11257),f=e(96016),g=e(3260),u=e(35231),E=e(19050),v=e(49987),p=e(39338);function m(){try{return[(0,g.xJ)({title:"Add to dashboard",description:"Use the query and panel from explore and create/add it to a dashboard",targets:[n.SM.ExploreToolbarAction],icon:"apps",category:"Dashboards",configure:()=>{if(i.TP.hasPermission(h.w.DashboardsCreate)||i.TP.hasPermission(h.w.DashboardsWrite))return{}},onClick:(ae,{context:q,openModal:k})=>{k({title:(0,p.t)(),body:({onDismiss:ee})=>(0,a.jsx)(v.H,{onClose:ee,exploreId:q?.exploreId})})}}),(0,g.xJ)({title:"Add correlation",description:"Create a correlation from this query",targets:[n.SM.ExploreToolbarAction],icon:"link",configure:ae=>ae?.shouldShowAddCorrelation?{}:void 0,onClick:(ae,{context:q})=>{(0,o.JD)((0,u.am)({editorMode:!0})),(0,o.JD)((0,E.Od)({exploreId:q.exploreId}))}})]}catch(ae){return f.R.warning(`Could not configure extensions for Explore due to: "${ae}"`),[]}}function y(){return[...m()]}var d=e(4745),x=e(9453),b=e(13752),D=e(39741),C=e(29405),P=e(96222),T=e(81160),O=e(72985);const S="Cannot register to a read-only registry";class B{constructor(q){if(this.resultSubject=new b.B,this.logger=q.log??f.R,this.isReadOnly=!1,q.registrySubject){this.registrySubject=q.registrySubject,this.isReadOnly=!0;return}this.registrySubject=new D.m(1),this.resultSubject.pipe((0,C.S)(this.mapToRegistry.bind(this),q.initialState??{}),(0,P.Z)(q.initialState??{}),(0,T.T)(k=>(0,g.ol)(k))).subscribe(this.registrySubject)}register(q){if(this.isReadOnly)throw new Error(S);this.resultSubject.next(q)}asObservable(){return this.registrySubject.asObservable()}getState(){return(0,O._)(this.asObservable())}}const K="Could not register component extension. Reason:";class U extends B{constructor(q={}){super(q)}mapToRegistry(q,k){const{pluginId:ee,configs:j}=k;for(const J of j){const Z=this.logger.child({description:J.description,title:J.title,pluginId:ee});if(!J.title){Z.error(`${K} ${d.o2}`);continue}if(ee!=="grafana"&&(0,g.V2)()&&(0,x.dt)(ee,J,Z))continue;const te=Array.isArray(J.targets)?J.targets:[J.targets];for(const se of te){const ie=Z.child({extensionPointId:se}),ce={pluginId:ee,component:(0,g.nv)({pluginId:ee,extensionTitle:J.title,Component:J.component,log:ie}),description:J.description,title:J.title};ie.debug("Added component extension successfully registered"),se in q?q[se].push(ce):q[se]=[ce]}}return q}readOnly(){return new U({registrySubject:this.registrySubject})}}var F=e(2543);const I="Could not register function extension. Reason:";class V extends B{constructor(q={}){super(q)}mapToRegistry(q,k){const{pluginId:ee,configs:j}=k;for(const J of j){const Z=this.logger.child({title:J.title,pluginId:ee});if(!J.title){Z.error(`${I} ${d.o2}`);continue}if(!(0,F.isFunction)(J.fn)){Z.error(`${I} ${d.bw}`);continue}if(ee!=="grafana"&&(0,g.V2)()&&(0,x.SY)(ee,J,Z))continue;const te=Array.isArray(J.targets)?J.targets:[J.targets];for(const se of te){const ie=Z.child({extensionPointId:se}),ce={pluginId:ee,fn:J.fn,description:J.description,title:J.title,extensionPointId:se};ie.debug("Added function extension successfully registered"),se in q?q[se].push(ce):q[se]=[ce]}}return q}readOnly(){return new V({registrySubject:this.registrySubject})}}const M="Could not register link extension. Reason:";class L extends B{constructor(q={}){super(q)}mapToRegistry(q,k){const{pluginId:ee,configs:j}=k;for(const J of j){const{path:Z,title:te,description:se,configure:ie,onClick:ce,targets:re}=J,ue=this.logger.child({path:Z??"",description:se??"",title:te,pluginId:ee,onClick:typeof ce});if(!te){ue.error(`${M} ${d.o2}`);continue}if(!(0,x.jk)(ie)){ue.error(`${M} ${d.O6}`);continue}if(!Z&&!ce){ue.error(`${M} ${d.H$}`);continue}if(Z&&!(0,x.kl)(ee,Z)){ue.error(`${M} ${d.Cf}`);continue}if(ee!=="grafana"&&(0,g.V2)()&&(0,x.OO)(ee,J,ue))continue;const X=Array.isArray(re)?re:[re];for(const le of X){const he=ue.child({extensionPointId:le}),{targets:fe,...Ce}=J;le in q||(q[le]=[]),he.debug("Added link extension successfully registered"),q[le].push({...Ce,pluginId:ee,extensionPointId:le})}}return q}readOnly(){return new L({registrySubject:this.registrySubject})}}const N="Could not register exposed component. Reason:";class W extends B{constructor(q={}){super(q)}mapToRegistry(q,{pluginId:k,configs:ee}){if(!ee)return q;for(const j of ee){const{id:J,description:Z,title:te}=j,se=this.logger.child({extensionPointId:J,description:Z??"",title:te,pluginId:k});if(!J.startsWith(k)){se.error(`${N} ${d.vT}`);continue}if(q[J]){se.error(`${N} ${d.Td}`);continue}if(!te){se.error(`${N} ${d.o2}`);continue}k!=="grafana"&&(0,g.V2)()&&(0,x.nl)(k,j,se)||(se.debug("Exposed component extension successfully registered"),q[J]={...j,pluginId:k})}return q}readOnly(){return new W({registrySubject:this.registrySubject})}}const R=new U,G=new W,w=new L,_=new V,Q={addedComponentsRegistry:R,exposedComponentsRegistry:G,addedLinksRegistry:w,addedFunctionsRegistry:_};w.register({pluginId:"grafana",configs:y()}),G.register({pluginId:"grafana",configs:[{id:n.L9.CentralAlertHistorySceneV1,title:"Central alert history scene",description:"Central alert history scene",component:c}]})},35222:(ne,A,e)=>{"use strict";e.d(A,{A:()=>c});var n=e(74848),a=e(22803),s=e(70255),l=e(63527),r=e(63142);function c(){const o=(0,r.of)(i);return(0,n.jsx)("div",{className:o.wrapper,children:(0,n.jsx)("div",{className:o.inputWrapper,children:(0,n.jsx)("button",{type:"button",className:o.fakeInput,"aria-disabled":!0,children:(0,n.jsx)(s.A,{width:100})})})})}const i=o=>{const h=(0,l.n)({theme:o});return{wrapper:h.wrapper,inputWrapper:h.inputWrapper,fakeInput:(0,a.css)([h.input,{textAlign:"left"}])}}},35231:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>M,D:()=>y,J8:()=>P,JA:()=>C,Ju:()=>x,U2:()=>p,Ve:()=>O,am:()=>K,bZ:()=>d,fj:()=>m,nD:()=>b,ow:()=>U,qz:()=>v,tP:()=>D,ve:()=>S});var n=e(65307),a=e(2543),s=e.n(a),l=e(19379),r=e(92138),c=e(36490),i=e(62635),o=e(59373),h=e(52763),f=e(80144),g=e(2513),u=e(51845),E=e(83953);const v=(0,n.VP)("explore/syncTimes"),p=(0,n.VP)("explore/richHistoryUpdated"),m=(0,n.VP)("explore/richHistoryStorageFullAction"),y=(0,n.VP)("explore/richHistoryLimitExceededAction"),d=(0,n.VP)("explore/richHistorySettingsUpdated"),x=(0,n.VP)("explore/richHistorySearchFiltersUpdatedAction"),b=(0,n.VP)("explore/splitSizeUpdateAction"),D=(0,n.VP)("explore/maximizePaneAction"),C=(0,n.VP)("explore/evenPaneResizeAction"),P=(0,n.VP)("explore/splitClose"),T=(0,n.VP)("explore/setPaneState"),O=(0,n.VP)("explore/clearPanes"),S=(0,h.zD)("explore/splitOpen",async(L,{getState:N,dispatch:W})=>{const R=Object.values(N().explore.panes)[0],G=L?.queries??R?.queries??[];Object.keys(N().explore.panes).forEach((Q,ae)=>{ae>=1&&W(P(Q))});const w=L?.range||R?.range.raw||g.kn;let _=(0,i.o$)();for(;N().explore.panes[_];)_=(0,i.o$)();await W(B({exploreId:_,datasource:L?.datasourceUid||R?.datasourceInstance?.getRef(),queries:(0,f.v)(G),range:w,panelsState:L?.panelsState||R?.panelsState,correlationHelperData:L?.correlationHelperData,eventBridge:new l.o,compact:!!L?.compact})),R?.range&&await W(v({syncedTimes:(0,a.isEqual)(R.range.raw,w)}))}),B=(0,h.zD)("explore/createNewSplitOpen",async(L,{dispatch:N})=>{await N((0,u.Gd)(L))}),K=(0,n.VP)("explore/changeCorrelationEditorDetails"),U=(L,N)=>async W=>{const{timeRange:R,getExploreUrl:G,openInNewWindow:w}=N,_=await G({queries:L.targets,dsRef:L.datasource,scopedVars:L.scopedVars,timeRange:R,adhocFilters:(0,o.w)().getAdhocFilters(L.datasource?.uid??"",!0)});if(w&&_){w(_);return}c.Ny.push(r.I.stripBaseFromUrl(_))},F=()=>(0,E.HZ)(),I={syncedTimes:!1,panes:{},correlationEditorDetails:{editorMode:!1,correlationDirty:!1,queryEditorDirty:!1,isExiting:!1},richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,richHistory:[]},M={explore:(L=I,N)=>{if(P.match(N)){const{[N.payload]:R,...G}={...L.panes};return{...L,panes:G,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(b.match(N)){const{largerExploreId:R}=N.payload;return{...L,largerExploreId:R,maxedExploreId:void 0,evenSplitPanes:R===void 0}}if(D.match(N)){const{exploreId:R}=N.payload;return{...L,largerExploreId:R,maxedExploreId:R,evenSplitPanes:!1}}if(C.match(N))return{...L,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(v.match(N))return{...L,syncedTimes:N.payload.syncedTimes};if(m.match(N))return{...L,richHistoryStorageFull:!0};if(y.match(N))return{...L,richHistoryLimitExceededWarningShown:!0};if(d.match(N)){const R=N.payload;return{...L,richHistorySettings:R}}if(p.match(N)){const{richHistory:R,total:G}=N.payload.richHistoryResults;return{...L,richHistory:R,richHistoryTotal:G}}if(x.match(N)){const R=N.payload.filters;return{...L,richHistorySearchFilters:R}}if(B.pending.match(N))return{...L,panes:{...L.panes,[N.meta.arg.exploreId]:F()}};if(u.Gd?.pending.match(N)){const R=Object.entries(L.panes),G=R.slice(0,N.meta.arg.position),w=R.slice(G.length),_=[...G,[N.meta.arg.exploreId,F()],...w].reduce((Q,[ae,q])=>({...Q,[ae]:q}),{});return{...L,panes:_}}if(O.match(N))return{...L,panes:{}};if(K.match(N)){const{editorMode:R,label:G,description:w,canSave:_,correlationDirty:Q,queryEditorDirty:ae,isExiting:q,postConfirmAction:k,transformations:ee}=N.payload;return{...L,correlationEditorDetails:{editorMode:!!(R??L.correlationEditorDetails?.editorMode),canSave:!!(_??L.correlationEditorDetails?.canSave),label:G??L.correlationEditorDetails?.label,description:w??L.correlationEditorDetails?.description,transformations:ee??L.correlationEditorDetails?.transformations,correlationDirty:!!(Q??L.correlationEditorDetails?.correlationDirty),queryEditorDirty:!!(ae??L.correlationEditorDetails?.queryEditorDirty),isExiting:!!(q??L.correlationEditorDetails?.isExiting),postConfirmAction:k}}}const W=N.payload?.exploreId;return typeof W=="string"?{...L,panes:Object.entries(L.panes).reduce((R,[G,w])=>({...R,[G]:G===W?(0,u.LJ)(w,N):w}),{})}:L}}},35307:(ne,A,e)=>{"use strict";e.d(A,{m:()=>p});var n=e(74848),a=e(96540),s=e(60519),l=e(60188),r=e(69168),c=e(20877),i=e(92745),o=e(2863),h=e(64400),f=e(36303),g=e(63142),u=e(73427),E=e(92391);const v={defaults:{},overrides:[]};function p(y){const{pluginId:d,data:x,timeZone:b=(0,l.O)(),options:D={},width:C,height:P,title:T,onOptionsChange:O=()=>{},onChangeTimeRange:S=()=>{},onFieldConfigChange:B=()=>{},fieldConfig:K=v}=y,U=(0,g.$j)(),F=(0,o.w)(),I=(0,a.useMemo)(()=>F.replace.bind(F),[F]),[V,M]=(0,a.useState)((0,E.PY)(d)),[L,N]=(0,a.useState)(),W=m(V,D,K),{dataLinkPostProcessor:R}=(0,h.d2)(),G=(0,s.rJ)(V,W?.fieldConfig,x,b,U,I,R);if((0,a.useEffect)(()=>{V&&V.hasPluginId(d)||(0,E.TV)(d).then(_=>M(_)).catch(_=>{N(_.message)})},[d,V]),L)return(0,n.jsx)("div",{children:(0,n.jsxs)(i.x6,{i18nKey:"panel.panel-renderer.failed-to-load-plugin",children:["Failed to load plugin: ",{error:L}]})});if(!V||!V.hasPluginId(d))return(0,n.jsx)("div",{children:(0,n.jsx)(i.x6,{i18nKey:"panel.panel-renderer.loading-plugin-panel",children:"Loading plugin panel..."})});if(!V.panel)return(0,n.jsx)("div",{children:(0,n.jsx)(i.x6,{i18nKey:"panel.panel-renderer.no-panel-component",children:"Seems like the plugin you are trying to load does not have a panel component."})});if(!G)return(0,n.jsx)("div",{children:(0,n.jsx)(i.x6,{i18nKey:"panel.panel-renderer.no-panel-data",children:"No panel data"})});const w=V.panel;return(0,n.jsx)(f.Xw,{dependencies:[V,x],children:(0,n.jsx)(c.a,{meta:V.meta,children:(0,n.jsx)(w,{id:1,data:G,title:T,timeRange:G.timeRange,timeZone:b,options:W.options,fieldConfig:K,transparent:!1,width:C,height:P,renderCounter:0,replaceVariables:_=>_,onOptionsChange:O,onFieldConfigChange:B,onChangeTimeRange:S,eventBus:u.lE})})})}function m(y,d,x){return(0,a.useMemo)(()=>{if(y)return(0,r.F)({plugin:y,currentOptions:d,currentFieldConfig:x,isAfterPluginChange:!1})},[y,x,d])}},35427:(ne,A,e)=>{"use strict";e.d(A,{Dp:()=>v,sk:()=>E});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=e(65240),c=e(14226),i=e(2381),o=e(43533),h=e(89772),f=e(13409),g=e(57339);const u=(m,y="ColorPicker")=>class extends s.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,s.createRef)()}static{this.displayName=y}render(){const{theme:x,children:b,onChange:D,color:C,id:P}=this.props,T=p(x),O=s.createElement(m,{...this.props,children:null,onChange:D});return(0,n.jsx)(o.I,{content:O,hideAfter:300,children:(S,B,K)=>(0,n.jsxs)(n.Fragment,{children:[this.pickerTriggerRef.current&&(0,n.jsx)(i.A,{...K,referenceElement:this.pickerTriggerRef.current,wrapperClassName:T.colorPicker,onMouseLeave:B,onMouseEnter:S,onKeyDown:U=>(0,c.Q)(U,B)}),b?b({ref:this.pickerTriggerRef,showColorPicker:S,hideColorPicker:B}):(0,n.jsx)(f.q,{id:P,ref:this.pickerTriggerRef,onClick:S,onMouseLeave:B,color:x.visualization.getColorByName(C||"#000000"),"aria-label":C})]})})}},E=(0,l.cV)(u(h.$,"ColorPicker")),v=(0,l.cV)(u(g.o,"SeriesColorPicker")),p=(0,r.N)(m=>({colorPicker:(0,a.css)({position:"absolute",zIndex:m.zIndex.tooltip,color:m.colors.text.primary,maxWidth:"400px",fontSize:m.typography.size.sm,maxHeight:"100vh",overflow:"auto"})}))},35458:(ne,A,e)=>{"use strict";e.d(A,{dF:()=>s,mO:()=>l,yx:()=>a});var n=e(82611);const a={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},s=(r,c)=>{const i=r.split(`
`).map(h=>n.Block.create({type:"code_line",nodes:[n.Text.create(h)]})),o=n.Block.create({data:{syntax:c},type:"code_block",nodes:i});return n.Document.create({nodes:[o]})},l=(r,c)=>{const i=s(r,c);return n.Value.create({document:i})}},35479:(ne,A,e)=>{"use strict";e.d(A,{x:()=>s});var n=e(94777),a=e(18700);class s extends a.k{constructor(r){super(void 0,c=>new n.$({...r,buffer:c}))}}},35526:(ne,A,e)=>{"use strict";e.d(A,{e:()=>g});var n=e(74848),a=e(22803),s=e(92745),l=e(34999),r=e(63142),c=e(84266),i=e(91984),o=e(16692),h=e(15633),f=e(52161);function g({currentAlertmanager:p}){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u,{currentAlertmanager:p}),(0,n.jsx)(E,{currentAlertmanager:p})]})}function u({currentAlertmanager:p}){const m=(0,r.of)(v),y=p!==f.hY,[d,x]=(0,o.Ej)(o.RY.ReadConfigurationStatus),b=d&&x,{currentData:D}=i.m.endpoints.getGrafanaAlertingConfigurationStatus.useQuery(void 0,{skip:y||!b});if(!(D?.alertmanagersChoice&&[c.nA.External,c.nA.All].includes(D?.alertmanagersChoice))||y)return null;const P=D.numExternalAlertmanagers>0;return D.alertmanagersChoice===c.nA.External?(0,n.jsxs)(l.F,{title:(0,s.t)("alerting.grafana-alertmanager-delivery-warning.title-grafana-alerts-delivered-alertmanager","Grafana alerts are not delivered to Grafana Alertmanager"),children:[(0,n.jsx)(s.x6,{i18nKey:"alerting.grafana-alertmanager-delivery-warning.configuration-changes-external",children:"Grafana is configured to send alerts to external Alertmanagers only. Changing Grafana Alertmanager configuration will not affect delivery of your alerts."}),(0,n.jsx)("div",{className:m.adminHint,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.grafana-alertmanager-delivery-warning.admin-hint-external",children:"To change your Alertmanager setup, go to the Alerting Admin page. If you do not have access, contact your Administrator."})})]}):D.alertmanagersChoice===c.nA.All&&P?(0,n.jsxs)(l.F,{title:(0,s.t)("alerting.grafana-alertmanager-delivery-warning.title-you-have-additional-alertmanagers-to-configure","You have additional Alertmanagers to configure"),severity:"warning",children:[(0,n.jsx)(s.x6,{i18nKey:"alerting.grafana-alertmanager-delivery-warning.configuration-changes-all",children:"Ensure you make configuration changes in the correct Alertmanagers; both internal and external. Changing one will not affect the others."}),(0,n.jsx)("div",{className:m.adminHint,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.grafana-alertmanager-delivery-warning.admin-hint-all",children:"To change your Alertmanager setup, go to the Alerting Admin page. If you do not have access, contact your Administrator."})})]}):null}function E({currentAlertmanager:p}){return p&&(0,h.b)(p)?(0,n.jsx)(l.F,{title:(0,s.t)("alerting.alert-manager-picker.extra-config-warning.title","Imported configuration"),children:(0,n.jsx)(s.x6,{i18nKey:"alerting.alert-manager-picker.extra-config-warning.content",children:"This shows the merged configuration of Grafana alertmanager with imported configurations. This merged view is read-only in the UI."})}):null}const v=p=>({adminHint:(0,a.css)({fontSize:p.typography.bodySmall.fontSize,fontWeight:p.typography.bodySmall.fontWeight})})},35621:(ne,A,e)=>{"use strict";e.d(A,{o:()=>a});var n=e(22803);const a=s=>{const l=s.shape.radius.default;return{modal:(0,n.css)({position:"fixed",zIndex:s.zIndex.modal,background:s.colors.background.primary,boxShadow:s.shadows.z3,borderRadius:l,border:`1px solid ${s.colors.border.weak}`,backgroundClip:"padding-box",outline:"none",width:"750px",maxWidth:"100%",left:0,right:0,marginLeft:"auto",marginRight:"auto",top:"10%",maxHeight:"80%",display:"flex",flexDirection:"column","@media (max-height: 750px)":{maxHeight:"100%",top:"50%",transform:"translateY(-50%)"}}),modalBackdrop:(0,n.css)({position:"fixed",zIndex:s.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0,backgroundColor:s.components.overlay.background}),modalHeader:(0,n.css)({label:"modalHeader",display:"flex",alignItems:"center",minHeight:"42px",margin:s.spacing(1,2,0,2)}),modalHeaderWithTabs:(0,n.css)({borderBottom:`1px solid ${s.colors.border.weak}`}),modalHeaderTitle:(0,n.css)({fontSize:s.typography.size.lg,margin:s.spacing(0,4,0,1),display:"flex",alignItems:"center",position:"relative",top:"2px"}),modalHeaderIcon:(0,n.css)({marginRight:s.spacing(2),fontSize:"inherit","&:before":{verticalAlign:"baseline"}}),modalHeaderClose:(0,n.css)({height:"100%",display:"flex",alignItems:"center",color:s.colors.text.secondary,flexGrow:1,justifyContent:"flex-end"}),modalContent:(0,n.css)({overflow:"auto",padding:s.spacing(3),width:"100%"}),modalButtonRow:(0,n.css)({paddingTop:s.spacing(3)})}}},35718:(ne,A,e)=>{"use strict";e.d(A,{C:()=>h});var n=e(57852),a=e(1906),s=e(43173),l=e(78282),r=e(45863),c=e(78767),i=e(1682),o=e(8285);function h(v,p){const m=(0,o.YQ)(v);p.app=m.state.editPanel?a.Jk.PanelEditor:a.Jk.Dashboard,m.subscribeToState(y=>{y.editPanel?p.app=a.Jk.PanelEditor:p.app=a.Jk.Dashboard}),p.canAddAnnotations=()=>{const y=(0,o.YQ)(v);return!f(y)||!s.$.featureToggles.annotationPermissionUpdate&&!y.canEditDashboard()?!1:!!y.state.meta.annotationsPermissions?.dashboard.canAdd},p.canEditAnnotations=y=>{const d=(0,o.YQ)(v);return!s.$.featureToggles.annotationPermissionUpdate&&!d.canEditDashboard()?!1:y?!!d.state.meta.annotationsPermissions?.dashboard.canEdit:!!d.state.meta.annotationsPermissions?.organization.canEdit},p.canDeleteAnnotations=y=>{const d=(0,o.YQ)(v);return!s.$.featureToggles.annotationPermissionUpdate&&!d.canEditDashboard()?!1:y?!!d.state.meta.annotationsPermissions?.dashboard.canDelete:!!d.state.meta.annotationsPermissions?.organization.canDelete},p.onAnnotationCreate=async y=>{const d=(0,o.YQ)(v),x=y.from!==y.to,b={dashboardUID:d.state.uid,panelId:(0,o.Cs)(v),isRegion:x,time:y.from,timeEnd:x?y.to:0,tags:y.tags,text:y.description};await(0,c.vJ)(b),g(d),p.eventBus.publish(new n.We(b))},p.onAnnotationUpdate=async y=>{const d=(0,o.YQ)(v),x=y.from!==y.to,b={id:y.id,dashboardUID:d.state.uid,panelId:(0,o.Cs)(v),isRegion:x,time:y.from,timeEnd:x?y.to:0,tags:y.tags,text:y.description};await(0,c.rJ)(b),g(d),p.eventBus.publish(new n.We(b))},p.onAnnotationDelete=async y=>{await(0,c.Xm)({id:y}),g((0,o.YQ)(v)),p.eventBus.publish(new n.We({id:y}))},p.onAddAdHocFilter=y=>{const d=(0,o.YQ)(v),x=(0,o.un)(v);if(!x)return;const b=u(d,x.state.datasource);E(b,y)},p.canExecuteActions=()=>(0,o.YQ)(v).canEditDashboard(),p.onUpdateData=y=>Promise.resolve(!0)}function f(v){const p=i.b4.getDataLayers(v);for(const m of p.state.annotationLayers)if(m instanceof r.tV.g&&m.state.isEnabled&&m.state.query.builtIn)return m}function g(v){const p=f(v);p&&p.runLayer()}function u(v,p){const m=r.jh.getVariables(v);for(const d of m.state.variables)if(r.Go.isAdHocVariable(d)){const x=d.state.datasource;if(x===p||x?.uid===p?.uid)return d}const y=new r.H9({name:"Filters",datasource:p,supportsMultiValueOperators:!!(0,l.l)().getInstanceSettings(p)?.meta.multiValueFilterOperators,useQueriesAsFilterForOptions:!0,layout:s.$.featureToggles.newFiltersUI?"combobox":void 0});return m.setState({variables:[...m.state.variables,y]}),y}function E(v,p){const m=v.state.filters.findIndex(y=>y.key===p.key&&y.value===p.value&&y.operator!==p.operator);if(m>=0){const y=v.state.filters.slice();y.splice(m,1,p),v.updateFilters(y);return}v.updateFilters([...v.state.filters,p])}},35748:(ne,A,e)=>{"use strict";e.d(A,{Uz:()=>c,n6:()=>i});var n=e(92745);const a=["by","group_left","group_right","ignoring","on","offset","without"],s=null,l=()=>[{label:"acos",insertText:"acos",detail:"acos(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-acos","calculates the arccosine of all elements in {{argument}}",{argument:"v"})},{label:"acosh",insertText:"acosh",detail:"acosh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-acosh","calculates the inverse hyperbolic cosine of all elements in {{argument}}",{argument:"v"})},{label:"asin",insertText:"asin",detail:"asin(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-asin","calculates the arcsine of all elements in {{argument}}",{argument:"v"})},{label:"asinh",insertText:"asinh",detail:"asinh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-asinh","calculates the inverse hyperbolic sine of all elements in {{argument}}",{argument:"v"})},{label:"atan",insertText:"atan",detail:"atan(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-atan","calculates the arctangent of all elements in {{argument}}",{argument:"v"})},{label:"atanh",insertText:"atanh",detail:"atanh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-atanh","calculates the inverse hyperbolic tangent of all elements in {{argument}}",{argument:"v"})},{label:"cos",insertText:"cos",detail:"cos(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-cos","calculates the cosine of all elements in {{argument}}",{argument:"v"})},{label:"cosh",insertText:"cosh",detail:"cosh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-cosh","calculates the hyperbolic cosine of all elements in {{argument}}",{argument:"v"})},{label:"sin",insertText:"sin",detail:"sin(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-sin","calculates the sine of all elements in {{argument}}",{argument:"v"})},{label:"sinh",insertText:"sinh",detail:"sinh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-sinh","calculates the hyperbolic sine of all elements in {{argument}}",{argument:"v"})},{label:"tan",insertText:"tan",detail:"tan(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-tan","calculates the tangent of all elements in {{argument}}",{argument:"v"})},{label:"tanh",insertText:"tanh",detail:"tanh(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getTrigonometricFunctions.documentation-tanh","calculates the hyperbolic tangent of all elements in {{argument}}",{argument:"v"})}],r=()=>[{label:"sum",insertText:"sum",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-sum","Calculate sum over dimensions")},{label:"min",insertText:"min",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-min","Select minimum over dimensions")},{label:"max",insertText:"max",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-max","Select maximum over dimensions")},{label:"avg",insertText:"avg",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-avg","Calculate the average over dimensions")},{label:"group",insertText:"group",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-group","All values in the resulting vector are 1")},{label:"stddev",insertText:"stddev",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-stddev","Calculate population standard deviation over dimensions")},{label:"stdvar",insertText:"stdvar",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-stdvar","Calculate population standard variance over dimensions")},{label:"count",insertText:"count",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-count","Count number of elements in the vector")},{label:"count_values",insertText:"count_values",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-count-values","Count number of elements with the same value")},{label:"bottomk",insertText:"bottomk",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-bottomk","Smallest k elements by sample value")},{label:"topk",insertText:"topk",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-topk","Largest k elements by sample value")},{label:"quantile",insertText:"quantile",documentation:(0,n.t)("grafana-prometheus.promql.getAggregationOptions.documentation-quantile","Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions")}],c=()=>[...r(),...l(),{insertText:"abs",label:"abs",detail:"abs(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-abs","Returns the input vector with all sample values converted to their absolute value.")},{insertText:"absent",label:"absent",detail:"absent(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-absent","Returns an empty vector if the vector passed to it has any elements and a 1-element vector with the value 1 if the vector passed to it has no elements. This is useful for alerting on when no time series exist for a given metric name and label combination.")},{insertText:"absent_over_time",label:"absent_over_time",detail:"absent(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-absent-over-time","Returns an empty vector if the range vector passed to it has any elements and a 1-element vector with the value 1 if the range vector passed to it has no elements.")},{insertText:"ceil",label:"ceil",detail:"ceil(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-ceil","Rounds the sample values of all elements in `v` up to the nearest integer.")},{insertText:"changes",label:"changes",detail:"changes(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-changes","For each input time series, `changes(v range-vector)` returns the number of times its value has changed within the provided time range as an instant vector.")},{insertText:"clamp",label:"clamp",detail:"clamp(v instant-vector, min scalar, max scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-clamp","Clamps the sample values of all elements in `v` to have a lower limit of `min` and an upper limit of `max`.")},{insertText:"clamp_max",label:"clamp_max",detail:"clamp_max(v instant-vector, max scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-clamp-max","Clamps the sample values of all elements in `v` to have an upper limit of `max`.")},{insertText:"clamp_min",label:"clamp_min",detail:"clamp_min(v instant-vector, min scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-clamp-min","Clamps the sample values of all elements in `v` to have a lower limit of `min`.")},{insertText:"count_scalar",label:"count_scalar",detail:"count_scalar(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-count-scalar","Returns the number of elements in a time series vector as a scalar. This is in contrast to the `count()` aggregation operator, which always returns a vector (an empty one if the input vector is empty) and allows grouping by labels via a `by` clause.")},{insertText:"deg",label:"deg",detail:"deg(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-deg","Converts radians to degrees for all elements in v")},{insertText:"day_of_month",label:"day_of_month",detail:"day_of_month(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-day-of-month","Returns the day of the month for each of the given times in UTC. Returned values are from 1 to 31.")},{insertText:"day_of_week",label:"day_of_week",detail:"day_of_week(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-day-of-week","Returns the day of the week for each of the given times in UTC. Returned values are from 0 to 6, where 0 means Sunday etc.")},{insertText:"day_of_year",label:"day_of_year",detail:"day_of_year(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-day-of-year","Returns the day of the year for each of the given times in UTC. Returned values are from 1 to 365 for non-leap years, and 1 to 366 in leap years.")},{insertText:"days_in_month",label:"days_in_month",detail:"days_in_month(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-days-in-month","Returns number of days in the month for each of the given times in UTC. Returned values are from 28 to 31.")},{insertText:"delta",label:"delta",detail:"delta(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-delta","Calculates the difference between the first and last value of each time series element in a range vector `v`, returning an instant vector with the given deltas and equivalent labels. The delta is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if the sample values are all integers.")},{insertText:"deriv",label:"deriv",detail:"deriv(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-deriv","Calculates the per-second derivative of the time series in a range vector `v`, using simple linear regression.")},{insertText:"double_exponential_smoothing",label:"double_exponential_smoothing",detail:"double_exponential_smoothing(v range-vector, sf scalar, tf scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-double-exponential-smoothing","Produces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1.")},{insertText:"drop_common_labels",label:"drop_common_labels",detail:"drop_common_labels(instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-drop-common-labels","Drops all labels that have the same name and value across all series in the input vector.")},{insertText:"exp",label:"exp",detail:"exp(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-exp","Calculates the exponential function for all elements in `v`.\nSpecial cases are:\n* `Exp(+Inf) = +Inf` \n* `Exp(NaN) = NaN`")},{insertText:"floor",label:"floor",detail:"floor(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-floor","Rounds the sample values of all elements in `v` down to the nearest integer.")},{insertText:"histogram_quantile",label:"histogram_quantile",detail:"histogram_quantile(\u03C6 float, b instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-quantile","Calculates the \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) from the buckets `b` of a histogram. The samples in `b` are the counts of observations in each bucket. Each sample must have a label `le` where the label value denotes the inclusive upper bound of the bucket. (Samples without such a label are silently ignored.) The histogram metric type automatically provides time series with the `_bucket` suffix and the appropriate labels.")},{insertText:"holt_winters",label:"holt_winters",detail:"holt_winters(v range-vector, sf scalar, tf scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-holt-winters","Renamed as double_exponential_smoothing in prometheus v3.x. For prometheus versions equal and greater than v3.0 please use double_exponential_smoothing. \n\nProduces a smoothed value for time series based on the range in `v`. The lower the smoothing factor `sf`, the more importance is given to old data. The higher the trend factor `tf`, the more trends in the data is considered. Both `sf` and `tf` must be between 0 and 1.")},{insertText:"hour",label:"hour",detail:"hour(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-hour","Returns the hour of the day for each of the given times in UTC. Returned values are from 0 to 23.")},{insertText:"idelta",label:"idelta",detail:"idelta(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-idelta","Calculates the difference between the last two samples in the range vector `v`, returning an instant vector with the given deltas and equivalent labels.")},{insertText:"increase",label:"increase",detail:"increase(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-increase","Calculates the increase in the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. The increase is extrapolated to cover the full time range as specified in the range vector selector, so that it is possible to get a non-integer result even if a counter increases only by integer increments.")},{insertText:"info",label:"info",detail:"info(v instant-vector, [data-label-selector instant-vector])",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-info","Returns latest details and metadata about a group of metrics, such as their labels and current values, without doing any calculations")},{insertText:"irate",label:"irate",detail:"irate(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-irate","Calculates the per-second instant rate of increase of the time series in the range vector. This is based on the last two data points. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for.")},{insertText:"label_join",label:"label_join",detail:"label_join(v instant-vector, dst_label string, separator string, src_label_1 string, src_label_2 string, ...)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-label-join","For each timeseries in `v`, joins all the values of all the `src_labels` using `separator` and returns the timeseries with the label `dst_label` containing the joined value. There can be any number of `src_labels` in this function.")},{insertText:"label_replace",label:"label_replace",detail:"label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-label-replace","For each timeseries in `v`, `label_replace(v instant-vector, dst_label string, replacement string, src_label string, regex string)`  matches the regular expression `regex` against the label `src_label`.  If it matches, then the timeseries is returned with the label `dst_label` replaced by the expansion of `replacement`. `$1` is replaced with the first matching subgroup, `$2` with the second etc. If the regular expression doesn't match then the timeseries is returned unchanged.")},{insertText:"ln",label:"ln",detail:"ln(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-ln","Calculates the natural logarithm for all elements in `v`.\nSpecial cases are:\n * `ln(+Inf) = +Inf`\n * `ln(0) = -Inf`\n * `ln(x < 0) = NaN`\n * `ln(NaN) = NaN`")},{insertText:"log2",label:"log2",detail:"log2(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-log2","Calculates the binary logarithm for all elements in `v`. The special cases are equivalent to those in `ln`.")},{insertText:"log10",label:"log10",detail:"log10(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-log10","Calculates the decimal logarithm for all elements in `v`. The special cases are equivalent to those in `ln`.")},{insertText:"minute",label:"minute",detail:"minute(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-minute","Returns the minute of the hour for each of the given times in UTC. Returned values are from 0 to 59.")},{insertText:"month",label:"month",detail:"month(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-month","Returns the month of the year for each of the given times in UTC. Returned values are from 1 to 12, where 1 means January etc.")},{insertText:"pi",label:"pi",detail:"pi()",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-pi","Returns pi")},{insertText:"predict_linear",label:"predict_linear",detail:"predict_linear(v range-vector, t scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-predict-linear","Predicts the value of time series `t` seconds from now, based on the range vector `v`, using simple linear regression.")},{insertText:"rad",label:"rad",detail:"rad(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-rad","Converts degrees to radians for all elements in v")},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-rate","Calculates the per-second average rate of increase of the time series in the range vector. Breaks in monotonicity (such as counter resets due to target restarts) are automatically adjusted for. Also, the calculation extrapolates to the ends of the time range, allowing for missed scrapes or imperfect alignment of scrape cycles with the range's time period.")},{insertText:"resets",label:"resets",detail:"resets(v range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-resets","For each input time series, `resets(v range-vector)` returns the number of counter resets within the provided time range as an instant vector. Any decrease in the value between two consecutive samples is interpreted as a counter reset.")},{insertText:"round",label:"round",detail:"round(v instant-vector, to_nearest=1 scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-round","Rounds the sample values of all elements in `v` to the nearest integer. Ties are resolved by rounding up. The optional `to_nearest` argument allows specifying the nearest multiple to which the sample values should be rounded. This multiple may also be a fraction.")},{insertText:"scalar",label:"scalar",detail:"scalar(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-scalar","Given a single-element input vector, `scalar(v instant-vector)` returns the sample value of that single element as a scalar. If the input vector does not have exactly one element, `scalar` will return `NaN`.")},{insertText:"sgn",label:"sgn",detail:"sgn(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-sgn","Returns a vector with all sample values converted to their sign, defined as this: 1 if v is positive, -1 if v is negative and 0 if v is equal to zero.")},{insertText:"sort",label:"sort",detail:"sort(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-sort","Returns vector elements sorted by their sample values, in ascending order.")},{insertText:"sort_desc",label:"sort_desc",detail:"sort_desc(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-sort-desc","Returns vector elements sorted by their sample values, in descending order.")},{insertText:"sqrt",label:"sqrt",detail:"sqrt(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-sqrt","Calculates the square root of all elements in `v`.")},{insertText:"time",label:"time",detail:"time()",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-time","Returns the number of seconds since January 1, 1970 UTC. Note that this does not actually return the current time, but the time at which the expression is to be evaluated.")},{insertText:"timestamp",label:"timestamp",detail:"timestamp(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-timestamp","Returns the timestamp of each of the samples of the given vector as the number of seconds since January 1, 1970 UTC.")},{insertText:"vector",label:"vector",detail:"vector(s scalar)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-vector","Returns the scalar `s` as a vector with no labels.")},{insertText:"year",label:"year",detail:"year(v=vector(time()) instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-year","Returns the year for each of the given times in UTC.")},{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-avg-over-time","The average value of all points in the specified interval.")},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-min-over-time","The minimum value of all points in the specified interval.")},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-max-over-time","The maximum value of all points in the specified interval.")},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-sum-over-time","The sum of all values in the specified interval.")},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-count-over-time","The count of all values in the specified interval.")},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-quantile-over-time","The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval.")},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-stddev-over-time","The population standard deviation of the values in the specified interval.")},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-stdvar-over-time","The population standard variance of the values in the specified interval.")},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-last-over-time","The most recent point value in specified interval.")},{insertText:"present_over_time",label:"present_over_time",detail:"present_over_time(range-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-present-over-time","The value 1 for any series in the specified interval.")},{insertText:"histogram_avg",label:"histogram_avg",detail:"histogram_avg(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-avg","Returns the arithmetic average of observed values stored in a native histogram. Samples that are not native histograms are ignored and do not show up in the returned vector.")},{insertText:"histogram_count",label:"histogram_count",detail:"histogram_count(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-count","Returns the count of observations stored in a native histogram.")},{insertText:"histogram_sum",label:"histogram_sum",detail:"histogram_sum(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-sum","Returns the sum of observations stored in a native histogram.")},{insertText:"histogram_fraction",label:"histogram_fraction",detail:"histogram_fraction(lower scalar, upper scalar, v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-fraction","Returns the estimated fraction of observations between the provided lower and upper values.")},{insertText:"histogram_stddev",label:"histogram_stddev",detail:"histogram_stddev(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-stddev","Returns the estimated standard deviation of observations in a native histogram, based on the geometric mean of the buckets where the observations lie.")},{insertText:"histogram_stdvar",label:"histogram_stdvar",detail:"histogram_stdvar(v instant-vector)",documentation:(0,n.t)("grafana-prometheus.promql.getFunctions.documentation-histogram-stdvar","Returns the estimated standard variance of observations in a native histogram.")}],i={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((by|without)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},function:new RegExp(`\\b(?:${c().map(o=>o.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],idList:{pattern:/\d+(\|\d+)+/,alias:"number"},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:new RegExp(`/[-+*/=%^~]|&&?|\\|?\\||!=?|<(?:=>?|<|>)?|>[>=]?|\\b(?:${a.join("|")})\\b`,"i"),punctuation:/[{};()`,.]/}},35814:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>n});function n(a){return new Proxy(a,{apply(s,l,r){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(s,r,l.constructor)}})}},35886:(ne,A,e)=>{"use strict";e.d(A,{N1:()=>r,W1:()=>s});var n=e(99090);const a=c=>c?!!(c.query||c.tag?.length>0||c.starred||c.sort):!1,s=()=>{const c=n.G3+".";for(let i=0;i<window.localStorage.length;i++){const o=window.localStorage.key(i);o?.startsWith(c)&&window.localStorage.removeItem(o)}},l=(c="General")=>`${SECTION_STORAGE_KEY}.${c.toLowerCase()}`,r=c=>{const i=Object.entries(c).reduce((o,[h,f])=>{if(f){if(h==="tag"&&!Array.isArray(f))return{...o,tag:[f]}}else return o;return{...o,[h]:f}},{});if(c.folder){const o=`folder:${c.folder}`;return{...i,query:`${o} ${(i.query??"").replace(o,"")}`}}return{...i}}},35987:(ne,A,e)=>{"use strict";e.d(A,{An:()=>c,Zz:()=>l,bh:()=>i});var n=e(36394),a=e(8934),s=e(18600);function l(h,f){for(const g of h)switch(g.type){case s.d.ValueToText:if(f==null)continue;const u=g.options[f];if(u)return u;break;case s.d.RangeToText:if(f==null)continue;const E=parseFloat(f);if(isNaN(E))continue;const v=g.options.from??-1/0;if(!isNaN(v)&&E<v)continue;const m=g.options.to??1/0;if(!isNaN(m)&&E>m)continue;return g.options.result;case s.d.RegexToText:if(f==null||typeof f!="string")continue;const d=(0,a.dO)(g.options.pattern);if(f.match(d)){const x={...g.options.result};return x.text!=null&&(x.text=f.replace(d,g.options.result.text||"")),x}case s.d.SpecialValue:switch(g.options.match){case s.W.Null:{if(f==null)return g.options.result;break}case s.W.NaN:{if(typeof f=="number"&&isNaN(f))return g.options.result;break}case s.W.NullAndNaN:{if(typeof f=="number"&&isNaN(f)||f==null)return g.options.result;break}case s.W.True:{if(f===!0||f==="true")return g.options.result;break}case s.W.False:{if(f===!1||f==="false")return g.options.result;break}case s.W.Empty:{if(f==="")return g.options.result;break}}}return null}function r(h){return(typeof h=="number"||typeof h=="string"&&h.trim()!=="")&&!isNaN(h)}var c=(h=>(h[h.ValueToText=1]="ValueToText",h[h.RangeToText=2]="RangeToText",h))(c||{});function i(h,f){const g=[];let u=h.mappingType;if(h.mappingType||(h.valueMaps&&h.valueMaps.length?u=1:h.rangeMaps&&h.rangeMaps.length&&(u=2)),u===1)for(let E=0;E<h.valueMaps.length;E++){const v=h.valueMaps[E];g.push(o({...v,id:E,type:s.d.ValueToText},h.fieldConfig?.defaults?.thresholds||f))}else if(u===2)for(let E=0;E<h.rangeMaps.length;E++){const v=h.rangeMaps[E];g.push(o({...v,id:E,type:s.d.RangeToText},h.fieldConfig?.defaults?.thresholds||f))}return g}function o(h,f){const g={type:s.d.ValueToText,options:{}},u=[];let E;const v=parseFloat(h.text);if(f&&!isNaN(v)){const p=(0,n.yQ)(v,f.steps);p&&p.color&&(E=p.color)}switch(h.type){case 1:case s.d.ValueToText:h.value!=null&&(h.value==="null"?u.push({type:s.d.SpecialValue,options:{match:s.W.Null,result:{text:h.text,color:E}}}):g.options[String(h.value)]={text:h.text,color:E});break;case 2:case s.d.RangeToText:h.from==="null"||h.to==="null"?u.push({type:s.d.SpecialValue,options:{match:s.W.Null,result:{text:h.text,color:E}}}):u.push({type:s.d.RangeToText,options:{from:+h.from,to:+h.to,result:{text:h.text,color:E}}});break}return Object.keys(g.options).length>0&&u.unshift(g),u[0]}},36100:(ne,A,e)=>{"use strict";e.d(A,{Zi:()=>a,mc:()=>n});const n="=",a="!="},36192:(ne,A,e)=>{"use strict";e.d(A,{NN:()=>o,Tz:()=>f,UO:()=>m,bq:()=>u,ro:()=>g,sw:()=>E,uY:()=>d});var n=e(11576),a=e(46644),s=e(739),l=e(20720),r=e(60379),c=e(70332);const i=(x,b,D)=>{let C=b%2?D[0]||D[2]:D[1]||D[3];return D[b]||!C?0:8},o={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[i,i,i,i],series:[],hooks:{}};var h=(x=>(x[x.Pos=1]="Pos",x[x.Neg=-1]="Neg",x))(h||{});function f(x){let b=[],{series:D,dir:C}=x,P=D.length-1,T=D.slice().reverse();return T.forEach((O,S)=>{if(S!==P){let B=T[S+1];b.push({series:[O,B],dir:-1*C})}}),b}function g(x){let b=new Map;return x.fields.forEach(({config:D,values:C,type:P},T)=>{if(T===0)return;let{custom:O}=D;if(O==null||O.hideFrom?.viz)return;let{stacking:S}=O;if(S==null)return;let{mode:B,group:K}=S;if(B===s.gs.None)return;let U=O.transform,F=v(U,C),I=O.drawStyle,V=I===s.GR.Bars?O.barAlignment:I===s.GR.Line?O.lineInterpolation:null,M=`${F}|${B}|${K}|${(0,c.M)(D,P)}|${I}|${V}`,L=b.get(M);L==null&&(L={series:[],dir:F},b.set(M,L)),L.series.push(T)}),[...b.values()]}function u(x,b,D){let C=Array(x.fields.length),P=b.length,T=x.length,O=P>0?Array(T).fill(0):[],S=P>0?Array(T).fill(!1):[],B=Array.from({length:P},()=>O.slice()),K=Array.from({length:P},()=>S.slice());if(b.forEach((U,F)=>{let I=K[F];U.series.forEach(V=>{let M=x.fields[V];if(M.config.custom?.hideFrom?.viz)return;let L=M.values;for(let N=0;N<T;N++)L[N]!=null&&(I[N]=!0)})}),x.fields.forEach((U,F)=>{let I=U.values;if(F===0){C[F]=I;return}let{custom:V}=U.config;if(!V||V.hideFrom?.viz){C[F]=I;return}if(V.transform===s.NU.Constant){let L=I.findIndex(W=>W!=null),N=I[L];I=Array(I.length).fill(void 0),I[L]=N}else if(I=I.slice(),V.transform===s.NU.NegativeY)for(let L=0;L<I.length;L++)I[L]!=null&&(I[L]*=-1);let M=V.stacking?.mode;if(!M||M===s.gs.None)C[F]=I;else{let L=b.findIndex(G=>G.series.indexOf(F)>-1),N=B[L],W=K[L],R=C[F]=Array(T);for(let G=0;G<T;G++){let w=I[G];w!=null?R[G]=N[G]+=w:R[G]=W[G]?N[G]:w}}}),D){let U=C.map((F,I)=>{let V=b.findIndex(M=>M.series.indexOf(I)>-1);return V!==-1?B[V]:F});D({totals:U})}return x.fields.forEach((U,F)=>{if(F===0||U.config.custom?.hideFrom?.viz)return;if(U.config.custom?.stacking?.mode===s.gs.Percent){let V=b.findIndex(W=>W.series.indexOf(F)>-1),M=B[V],L=b[V],N=C[F];for(let W=0;W<T;W++){let R=N[W];R!=null&&(N[W]=M[W]===0?0:L.dir*(R/M[W]))}}}),C}function E(x,b){let D,C=1,P=1,T=x.data[1][b],O=x.data[1][b];for(let S=1;S<x.data.length;S++){const K=x.data[S][b];K!=null&&(T==null?T=K:K>T&&(T=x.data[S][b],C=S),O==null?O=K:K<O&&(O=x.data[S][b],P=S))}return O==null&&T==null?D=void 0:O!=null&&T!=null?D=(x.valToPos(O,x.series[P].scale)+x.valToPos(T,x.series[C].scale))/2:D=x.valToPos(O||T,x.series[C||P].scale),D!==void 0&&D<0&&(D=x.bbox.height/devicePixelRatio),D}function v(x,b){const D=p(b);return x===s.NU.NegativeY?D?1:-1:D?-1:1}function p(x,b=100){const D=x.length;if(D===0)return!1;let C=0,P=D-1;for(;C<=P&&x[C]==null;)C++;for(;P>=C&&x[P]==null;)P--;let T=0,O=0;if(P>=C){const S=Math.max(1,Math.floor((P-C+1)/b));for(let B=C;B<=P;B+=S){const K=x[B];K!=null&&typeof K=="number"&&(K<0||Object.is(K,-0)?T++:K>0&&O++)}if(T>O)return!0}return!1}const m=(x,b,D)=>{if(!x?.length)return[];const C=S=>S==null?"-":S.toFixed(1),P=b.display??C;let T=null;const O=(0,a.Nw)({field:b,reducers:x});return x.map(S=>{const B=a.AS.get(S);let K=P;return B.id===a.gy.diffperc&&(K=(0,n.J)({field:{...b,config:{...b.config,unit:"percent"}},theme:D})),(B.id===a.gy.count||B.id===a.gy.changeCount||B.id===a.gy.distinctCount)&&(T||(T=(0,n.J)({field:{...b,config:{...b.config,unit:"none"}},theme:D})),K=T),{...K(O[S]),title:B.name,description:B.description}})},y=(0,r.h)("uPlot"),d=y.logger;(0,l.h)("graphng",void 0,y)},36200:(ne,A,e)=>{"use strict";e.d(A,{$I:()=>g,BU:()=>D,CZ:()=>v,J7:()=>h,ML:()=>C,Vf:()=>x,Xw:()=>f,jA:()=>i,p0:()=>p,t4:()=>b,v5:()=>u});var n=e(65307),a=e(32899),s=e(68143),l=e(73427),r=e(74268),c=e(77256);const i=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function o(P,T=i,O){if(P.pending.match(O))return{result:T.result,loading:!0,error:T.error,dispatched:!0,requestId:O.meta.requestId};if(P.fulfilled.match(O)){if(T.requestId===void 0||T.requestId===O.meta.requestId)return{...T,result:O.payload,loading:!1,error:void 0}}else if(P.rejected.match(O)&&T.requestId===O.meta.requestId)return{...T,loading:!1,error:O.error};return T}function h(P,T){return(0,n.Z0)({name:P,initialState:i,reducers:{},extraReducers:O=>O.addDefaultCase((S,B)=>o(T,S,B))})}function f(P,T,O){return(0,n.Z0)({name:P,initialState:{},reducers:{},extraReducers:S=>S.addDefaultCase((B,K)=>{if((0,n.$S)(T)(K)){const U=K,F=O(U.meta.arg);return{...B,[F]:o(T,B[F],U)}}return B})})}function g(P){return P.catch(T=>{throw{message:v(T),code:T.statusCode}})}function u(P,T){return P.then(O=>(T.successMessage&&l.lE.emit(a.r1.alertSuccess,[T.successMessage]),O)).catch(O=>{const S=v(O);throw l.lE.emit(a.r1.alertError,[`${T.errorMessage??"Error"}: ${S}`]),O})}const E="Unknown Error";function v(P){if((0,s.NF)(P))if(P.data?.message){let T=P.data?.message;return typeof P.data?.error=="string"&&(T+=`; ${P.data.error}`),T}else{if(Array.isArray(P.data)&&P.data.length&&P.data[0]?.message)return P.data.map(T=>T?.message).filter(T=>!!T).join(" ");if(P.statusText)return P.statusText}return(0,c.u7)(P)?P.message:((0,r.fH)(r.le.unknownMessageFromError,{error:JSON.stringify(P)}),E)}function p(P){return Object.values(P).every(m)}function m(P){return P.dispatched&&!P.loading}function y(P){return Object.values(P).every(d)}function d(P){return P.dispatched&&!P.loading&&!P.error}function x(P){return Object.values(P).some(C)}function b(P){return Object.values(P).some(T=>T.dispatched)}function D(P){return Object.values(P).some(d)}function C(P){return P?P.dispatched&&P.loading:!1}},36219:(ne,A,e)=>{"use strict";e.d(A,{U:()=>g});var n=e(74848),a=e(22803),s=e(18828),l=e(43107),r=e(93225),c=e(96540),i=e(92745),o=e(63142),h=e(15245),f=e(7895);const g=(0,c.forwardRef)(({alignment:E="left",className:v,children:p,...m},y)=>{const d=c.Children.toArray(p).filter(I=>I!=null),[x,b]=(0,c.useState)(Array(d.length).fill(!1)),D=(0,c.useRef)(null),[C,P]=(0,c.useState)(!1),T=(0,c.useRef)(null),O=(0,c.createRef)(),{overlayProps:S}=(0,r.e)({onClose:()=>P(!1),isDismissable:!0,isOpen:C,shouldCloseOnInteractOutside:I=>{const V=(0,h.gF)();return!T.current?.contains(I)&&!V.contains(I)}},O),{dialogProps:B}=(0,s.s)({},O),K=(0,o.$j)(),U=E==="left"?x.indexOf(!1)-1:x.length,F=u(K,U,E);return(0,c.useLayoutEffect)(()=>{const I=new IntersectionObserver(V=>{V.forEach(M=>{if(M.target instanceof HTMLElement&&M.target.parentNode){const L=Array.prototype.indexOf.call(M.target.parentNode.children,M.target);b(N=>{const W=[...N];return W[L]=M.isIntersecting,W})}})},{threshold:1,root:D.current});return D.current&&Array.from(D.current.children).forEach(V=>{V instanceof HTMLElement&&V!==T.current&&I.observe(V)}),()=>I.disconnect()},[p]),(0,n.jsxs)("div",{ref:D,className:(0,a.cx)(F.container,v),...m,children:[d.map((I,V)=>(0,n.jsx)("div",{style:{order:V,visibility:x[V]?"visible":"hidden"},className:F.childWrapper,children:I},V)),x.includes(!1)&&(0,n.jsxs)("div",{ref:T,className:F.overflowButton,children:[(0,n.jsx)(f.I,{variant:C?"active":"default",tooltip:(0,i.t)("grafana-ui.toolbar-button-row.show-more","Show more items"),onClick:()=>P(!C),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),C&&(0,n.jsx)(l.n1,{contain:!0,autoFocus:!0,children:(0,n.jsx)("div",{className:F.overflowItems,ref:O,...S,...B,children:d.map((I,V)=>!x[V]&&I)})})]})]})});g.displayName="ToolbarButtonRow";const u=(E,v,p)=>({overflowButton:(0,a.css)({order:v}),overflowItems:(0,a.css)({alignItems:"center",backgroundColor:E.colors.background.primary,borderRadius:E.shape.radius.default,boxShadow:E.shadows.z2,display:"flex",flexWrap:"wrap",gap:E.spacing(1),marginTop:E.spacing(1),maxWidth:"80vw",padding:E.spacing(.5,1),position:"absolute",right:0,top:"100%",width:"max-content",zIndex:E.zIndex.dropdown}),container:(0,a.css)({alignItems:"center",display:"flex",gap:E.spacing(1),justifyContent:p==="left"?"flex-start":"flex-end",minWidth:0,position:"relative"}),childWrapper:(0,a.css)({alignItems:"center",display:"flex",gap:E.spacing(1)})})},36303:(ne,A,e)=>{"use strict";e.d(A,{Xc:()=>o,Xw:()=>i,tH:()=>c});var n=e(74848),a=e(96540),s=e(32631),l=e(34999),r=e(56297);class c extends a.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(f,g){const u=this.props.errorLogger??s.P?.api?.pushError;u&&u(f),this.setState({error:f,errorInfo:g}),this.props.onError&&this.props.onError(f)}componentDidUpdate(f){const{dependencies:g,onRecover:u}=this.props;if(this.state.error&&g&&f.dependencies){for(let E=0;E<g.length;E++)if(g[E]!==f.dependencies[E]){this.setState({error:null,errorInfo:null}),u&&u();break}}}render(){const{children:f}=this.props,{error:g,errorInfo:u}=this.state;return f({error:g,errorInfo:u})}}class i extends a.PureComponent{static{this.defaultProps={title:"An unexpected error happened",style:"alertbox"}}render(){const{title:f,children:g,style:u,dependencies:E,errorLogger:v}=this.props;return(0,n.jsx)(c,{dependencies:E,errorLogger:v,children:({error:p,errorInfo:m})=>m?u==="alertbox"?(0,n.jsx)(l.F,{title:f||"",children:(0,n.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[p&&p.toString(),(0,n.jsx)("br",{}),m.componentStack]})}):(0,n.jsx)(r.D,{title:f||"",error:p,errorInfo:m}):g})}}function o(h,f={}){const g=u=>(0,n.jsx)(i,{...f,children:(0,n.jsx)(h,{...u})});return g.displayName="WithErrorBoundary",g}},36324:(ne,A,e)=>{"use strict";e.d(A,{C:()=>s,b:()=>a});var n=e(96540);function a(c=10){let i={x:0,y:0};return{set:f=>{i=l(f)},check:(f,g=c)=>r(i,l(f),g)}}function s(c=10){const i=n.useRef({x:0,y:0}),o=(0,n.useCallback)(f=>{i.current=l(f)},[]),h=(0,n.useCallback)((f,g=c)=>r(i.current,l(f),g),[c]);return(0,n.useMemo)(()=>({set:o,check:h}),[o,h])}function l(c){return{x:c.clientX,y:c.clientY}}function r(c,i,o){return Math.hypot(c.x-i.x,c.y-i.y)>o}},36394:(ne,A,e)=>{"use strict";e.d(A,{QS:()=>s,RU:()=>c,k5:()=>r,yQ:()=>l});var n=e(64394),a=e(33553);const s={value:0,color:n.F};function l(i,o){if(!o||o.length===0)return s;let h=o[0];for(const f of o)if(i>=f.value)h=f;else break;return h}function r(i,o,h){const{thresholds:f}=i.config;return f?.mode===a.O.Percentage?l(h*100,f?.steps):l(o,f?.steps)}function c(i){return i.sort((o,h)=>o.value-h.value)}},36490:(ne,A,e)=>{"use strict";e.d(A,{K9:()=>f,Lc:()=>p,Ny:()=>u,SE:()=>g,_K:()=>d,at:()=>y,vG:()=>E});var n=e(74848),a=e(44499),s=e(96540),l=e(49426),r=e(5556),c=e(37615),i=e(60379),o=e(20720),h=e(43173);class f{constructor(b){this.history=b||a.zR({basename:h.$.appSubUrl??"/"}),this.locationObservable=new l.t(this.history.location),this.history.listen(D=>{this.locationObservable.next(D)}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getLocationObservable(){return this.locationObservable.asObservable()}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(b,D){const C=this.history.location,P=this.getSearchObject();for(const O in b)b[O]===null||b[O]===void 0?delete P[O]:P[O]=b[O];const T=r.kM.renderUrl(C.pathname,P);D?this.history.replace(T,this.history.location.state):this.history.push(T,this.history.location.state)}push(b){this.history.push(b)}replace(b){this.history.replace(b)}reload(){const b=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:b?b+1:1}})}getLocation(){return this.history.location}getSearchObject(){return g(this.history.location.search)}update(b){if((0,c.l)("LocationSrv","update","partial, push or replace"),b.partial&&b.query)this.partial(b.query,b.partial);else{const D={pathname:b.path};b.query&&(D.search=r.kM.toUrlParams(b.query)),b.replace?this.replace(D):this.push(D)}}}function g(x){let b=typeof x=="number"?String(x):x;return b.length>0?b.startsWith("?")?r.kM.parseKeyValue(b.substring(1)):r.kM.parseKeyValue(b):{}}let u=new f;const E=x=>{throw new Error("locationService can be only overriden in test environment")},v=(0,i.h)("Router"),p=v.logger;(0,o.h)("location",u,v);const m=s.createContext(void 0);function y(){const x=(0,s.useContext)(m);if(!x)throw new Error("useLocationService must be used within a LocationServiceProvider");return x}const d=({service:x,children:b})=>(0,n.jsx)(m.Provider,{value:x,children:b})},36580:(ne,A,e)=>{"use strict";e.d(A,{iy:()=>S,dR:()=>D,b1:()=>P,VQ:()=>T,s9:()=>C});var n=e(62467),a=e(75505),s=e(44240),l=e(63720),r=e(66847),c=e(94644),i=e(48480),o=e(1906),h=e(38619),f=e(77154),g=e(35814),u=e(27489),E=e(43173),v=e(78282),p=e(68143),m=e(33184),y=e(51388),d=e(38866);function x(U){const{intervalMs:F,maxDataPoints:I,requestId:V,panelId:M,queryCachingTTL:L,range:{from:N,to:W}}=U;if(!U.targets.length)return(0,n.of)({data:[]});const R={intervalMs:F,maxDataPoints:I,queryCachingTTL:L,timeRange:{from:N.valueOf().toString(),to:W.valueOf().toString(),timezone:U.timezone}};return(0,p.AI)().fetch({url:`/api/public/dashboards/${E.$.publicDashboardAccessToken}/panels/${M}/query`,method:"POST",data:R,requestId:V}).pipe((0,l.n)(G=>(0,n.of)((0,d.bE)(G,U.targets))),(0,r.W)(G=>(0,n.of)((0,d.bE)(G))))}var b=e(55315);const D=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function C(U){if(!U)return!1;const F=typeof U=="string"?U:U.type;return F===D.type||F===D.name||F==="-100"}class P extends Error{constructor(F,I){super(F),this.details=I,this.name="HealthCheckError"}}var T=(U=>(U.Unknown="UNKNOWN",U.OK="OK",U.Error="ERROR",U))(T||{}),O=(U=>(U.PluginID="X-Plugin-Id",U.DatasourceUID="X-Datasource-Uid",U.DashboardUID="X-Dashboard-Uid",U.PanelID="X-Panel-Id",U.PanelPluginId="X-Panel-Plugin-Id",U.QueryGroupID="X-Query-Group-Id",U.FromExpression="X-Grafana-From-Expr",U.SkipQueryCache="X-Cache-Skip",U.DashboardTitle="X-Dashboard-Title",U.PanelTitle="X-Panel-Title",U))(O||{});class S extends c.mA{constructor(F){super(F),this.streamOptionsProvider=K,this.userStorage=new b.X(F.type)}query(F){if(E.$.publicDashboardAccessToken)return x(F);const{intervalMs:I,maxDataPoints:V,queryCachingTTL:M,range:L,requestId:N,hideFromInspector:W=!1}=F;let R=F.targets,G=!1;const w=new Set,_=new Set,Q=R.map(ee=>{let j=this.getRef(),J=this.id,Z=!0;if(C(ee.datasource))return G=!0,{...ee,datasource:D};if(ee.datasource){const te=(0,v.l)().getInstanceSettings(ee.datasource,F.scopedVars);if(!te)throw new Error(`Unknown Datasource: ${JSON.stringify(ee.datasource)}`);const se=te.rawRef??(0,i.p$)(te),ie=te.id;(se.uid!==j.uid||J!==ie)&&(j=se,J=ie,Z=!1)}return j.type?.length&&w.add(j.type),j.uid?.length&&_.add(j.uid),{...Z?this.applyTemplateVariables(ee,F.scopedVars,F.filters):ee,datasource:j,datasourceId:J,intervalMs:I,maxDataPoints:V,queryCachingTTL:M}});if(!Q.length)return(0,n.of)({data:[]});const ae={queries:Q,from:L?.from.valueOf().toString(),to:L?.to.valueOf().toString()},q=F.headers??{};q["X-Plugin-Id"]=Array.from(w).join(", "),q["X-Datasource-Uid"]=Array.from(_).join(", ");let k="/api/ds/query?ds_type="+this.type;if(E.$.featureToggles.queryServiceFromExplore&&F.app===o.Jk.Explore){const ee=E.$.featureToggles.queryService,j=E.$.featureToggles.grafanaAPIServerWithExperimentalAPIs;!ee&&!j?console.warn("feature toggle queryServiceFromExplore also requires the queryService to be running"):k=`/apis/query.grafana.app/v0alpha1/namespaces/${E.$.namespace}/query?ds_type=${this.type}`}return E.$.featureToggles.queryServiceFromUI&&(E.$.featureToggles.queryService||E.$.featureToggles.grafanaAPIServerWithExperimentalAPIs?k=`/apis/query.grafana.app/v0alpha1/namespaces/${E.$.namespace}/query?ds_type=${this.type}`:console.warn("feature toggle queryServiceFromUI also requires the queryService to be running")),G&&(q["X-Grafana-From-Expr"]="true",k+="&expression=true"),N&&(k+=`&requestId=${N}`),F.dashboardUID&&(q["X-Dashboard-Uid"]=F.dashboardUID,F.dashboardTitle&&(q["X-Dashboard-Title"]=F.dashboardTitle),F.panelId&&(q["X-Panel-Id"]=`${F.panelId}`),F.panelName&&(q["X-Panel-Title"]=F.panelName)),F.panelPluginId&&(q["X-Panel-Plugin-Id"]=`${F.panelPluginId}`),F.queryGroupId&&(q["X-Query-Group-Id"]=`${F.queryGroupId}`),F.skipQueryCache&&(q["X-Cache-Skip"]="true"),(0,p.AI)().fetch({url:k,method:"POST",data:ae,requestId:N,hideFromInspector:W,headers:q}).pipe((0,l.n)(ee=>{const j=(0,d.bE)(ee,Q);return j.data?.length&&j.data.find(J=>J.meta?.channel)?B(j,F,this.streamOptionsProvider):(0,n.of)(j)}),(0,r.W)(ee=>(0,n.of)((0,d.bE)(ee))))}getRequestHeaders(){const F={};return F["X-Plugin-Id"]=this.type,F["X-Datasource-Uid"]=this.uid,F}interpolateVariablesInQueries(F,I,V){return F.map(M=>this.applyTemplateVariables(M,I,V))}applyTemplateVariables(F,I,V){return F}async getResource(F,I,V){const M=this.getRequestHeaders();return(await(0,a.s)((0,p.AI)().fetch({...V,method:"GET",headers:V?.headers?{...V.headers,...M}:M,params:I??V?.params,url:`/api/datasources/uid/${this.uid}/resources/${F}`}))).data}async postResource(F,I,V){const M=this.getRequestHeaders();return(await(0,a.s)((0,p.AI)().fetch({...V,method:"POST",headers:V?.headers?{...V.headers,...M}:M,data:I??{...I},url:`/api/datasources/uid/${this.uid}/resources/${F}`}))).data}async callHealthCheck(){return(0,a.s)((0,p.AI)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(F=>F.data).catch(F=>{let I={plugin_id:this.meta?.id||"",plugin_version:this.meta?.info?.version||"",datasource_healthcheck_status:F?.data?.status||"error",datasource_healthcheck_message:F?.data?.message||""};return(0,u.rR)("datasource_health_check_completed",I),F.data})}async testDatasource(){return this.callHealthCheck().then(F=>F.status==="OK"?{status:"success",message:F.message}:Promise.reject({status:"error",message:F.message,error:new P(F.message,F.details)}))}}function B(U,F,I){const V=(0,m.oF)();if(!V)return(0,n.of)(U);const M=[],L=[];for(const N of U.data){const W=(0,h.DG)(N.meta?.channel);if(W){const R=N;L.push(V.getDataStream({addr:W,buffer:I(F,R),frame:(0,f.Nw)(N)}))}else M.push(N)}return M.length&&L.push((0,n.of)({...U,data:M})),L.length===1?L[0]:(0,s.h)(...L)}const K=(U,F)=>{const I={maxLength:U.maxDataPoints??500,action:y.Kh.Append};return U.rangeRaw?.to==="now"&&(I.maxDelta=U.range.to.valueOf()-U.range.from.valueOf()),I};S=(0,g.Y)(S)},36605:(ne,A,e)=>{"use strict";e.d(A,{L:()=>r});var n=e(45863),a=e(9931),s=e(18615),l=e(8285);class r extends n.Bs{constructor(i){super(i),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){const i=this.parent;let o,h,f;if(!(i instanceof n.dt))throw new Error("DashboardDatasourceBehaviour must be attached to a SceneQueryRunner");if(!this.containsDashboardDSQueries(i))return;try{f=(0,l.YQ)(i)}catch{return}const g=i.state.queries.find(d=>d.panelId!==void 0);if(!g)return;const u=g.panelId,E=(0,l.XA)(u),v=(0,l.vL)(f,E);if(!(v instanceof n.Eb))return;const p=(0,l.iL)(v);if(p&&!p.state.isLoaded){o=p.subscribeToState(d=>{this.handleLibPanelStateUpdates(d,i,v)});return}const m=(0,l.un)(v);if(!m)throw new Error("Could not find SceneQueryRunner for panel");const y=m.parent;return y instanceof n.Es&&y.state.transformations.length&&(h=y.subscribeToState((d,x)=>{d.data!==x.data&&i.runQueries()})),this.prevRequestId&&this.prevRequestId!==m.state.data?.request?.requestId&&i.runQueries(),()=>{this.prevRequestId=m?.state.data?.request?.requestId,o&&o.unsubscribe(),h&&h.unsubscribe()}}containsDashboardDSQueries(i){return i.state.datasource?.uid===a.K?!0:i.state.datasource?.uid===s.uv&&i.state.queries.some(o=>o.datasource?.uid===a.K)}handleLibPanelStateUpdates(i,o,h){if(i&&i?.isLoaded){if(!((0,l.un)(h)instanceof n.dt))throw new Error("Could not find SceneQueryRunner for library panel");o.runQueries()}}}},36638:(ne,A,e)=>{"use strict";e.d(A,{sJ:()=>_,RE:()=>Q,NS:()=>q,Dq:()=>k,kK:()=>ee,hI:()=>ae});var n=e(42954),a=e(95004),s=e(57866);const l={id:s.Ct.byType,name:"Field Type",description:"match based on the field type",defaultOptions:a.PU.number,get:j=>(J,Z,te)=>j===J.type,getOptionsDisplayText:j=>`Field type: ${j}`},r={id:s.Ct.byTypes,name:"Field Type",description:"match based on the field types",defaultOptions:new Set,get:j=>(J,Z,te)=>j.has(J.type),getOptionsDisplayText:j=>`Field types: ${[...j].join(" | ")}`},c={id:s.Ct.numeric,name:"Numeric Fields",description:"Fields with type number",get:()=>l.get(a.PU.number),getOptionsDisplayText:()=>"Numeric Fields"},i={id:s.Ct.time,name:"Time Fields",description:"Fields with type time",get:()=>l.get(a.PU.time),getOptionsDisplayText:()=>"Time Fields"};function o(){return[l,r,c,i]}var h=e(739),f=e(46644),g=e(53685);function u(j){return j===f.gy.allIsNull||j===f.gy.allIsZero}const E={id:s.Ct.byValue,name:"By value (reducer)",description:"Reduce a field to a single value and test for inclusion",defaultOptions:{reducer:f.gy.allIsZero,op:h.zT.GTE,value:0},get:j=>{if(!j||!j.reducer)return()=>!1;let{reducer:J,op:Z,value:te}=j;const se=u(J);return Z||(Z=h.zT.EQ),(ie,ce,re)=>{const ue=(0,f.Nw)({field:ie,reducers:[J]})[J];return se?!!ue:(0,g.c)(ue,Z,te)}},getOptionsDisplayText:j=>`By value (${j.reducer})`};var v=e(4575),p=e(6844),m=e(8934);const y={id:s.jR.byRefId,name:"Query refId",description:"match the refId",defaultOptions:"A",get:j=>{let J=null;if((0,m.AP)(j))try{J=(0,m.dO)(j)}catch(Z){Z instanceof Error&&console.warn(Z.message)}else if(j.includes("|")){const Z=j.split("|").map(m.jD).join("|");J=new RegExp(`^(?:${Z})$`)}return Z=>J?.test(Z.refId||"")??Z.refId===j},getOptionsDisplayText:j=>`RefID: ${j}`};function d(){return[y]}const x={id:s.Ct.first,name:"First Field",description:"The first field in the frame",get:j=>(J,Z,te)=>J===Z.fields[0],getOptionsDisplayText:()=>"First field"},b={id:s.Ct.firstTimeField,name:"First time field",description:"The first field of type time in a frame",get:j=>(J,Z,te)=>J.type===a.PU.time&&J===Z.fields.find(se=>se.type===a.PU.time),getOptionsDisplayText:()=>"First time field"};function D(){return[x,b]}const C={id:s.Js.equal,name:"Is equal",description:"Match where value for given field is equal to options value.",get:j=>(J,Z)=>Z.values[J]==j.value,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},P={id:s.Js.notEqual,name:"Is not equal",description:"Match where value for given field is not equal to options value.",get:j=>(J,Z)=>Z.values[J]!=j.value,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({value:""})},T=()=>[C,P],O={id:s.Js.isNull,name:"Is null",description:"Match where value for given field is null.",get:()=>(j,J)=>J.values[j]==null,getOptionsDisplayText:()=>"Matches all rows where field is null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},S={id:s.Js.isNotNull,name:"Is not null",description:"Match where value for given field is not null.",get:()=>(j,J)=>J.values[j]!=null,getOptionsDisplayText:()=>"Matches all rows where field is not null.",isApplicable:()=>!0,getDefaultOptions:()=>({})},B=()=>[O,S],K={id:s.Js.greater,name:"Is greater",description:"Match when field value is greater than option.",get:j=>(J,Z)=>{const te=Z.values[J];return isNaN(te)?!1:te>j.value},getOptionsDisplayText:j=>`Matches all rows where field value is greater than: ${j.value}.`,isApplicable:j=>j.type===a.PU.number,getDefaultOptions:()=>({value:0})},U={id:s.Js.greaterOrEqual,name:"Is greater or equal",description:"Match when field value is greater than or equal to option.",get:j=>(J,Z)=>{const te=Z.values[J];return isNaN(te)?!1:te>=j.value},getOptionsDisplayText:j=>`Matches all rows where field value is greater than or equal to: ${j.value}.`,isApplicable:j=>j.type===a.PU.number,getDefaultOptions:()=>({value:0})},F={id:s.Js.lower,name:"Is lower",description:"Match when field value is lower than option.",get:j=>(J,Z)=>{const te=Z.values[J];return isNaN(te)?!1:te<j.value},getOptionsDisplayText:j=>`Matches all rows where field value is lower than: ${j.value}.`,isApplicable:j=>j.type===a.PU.number,getDefaultOptions:()=>({value:0})},I={id:s.Js.lowerOrEqual,name:"Is lower or equal",description:"Match when field value is lower or equal than option.",get:j=>(J,Z)=>{const te=Z.values[J];return isNaN(te)?!1:te<=j.value},getOptionsDisplayText:j=>`Matches all rows where field value is lower or equal than: ${j.value}.`,isApplicable:j=>j.type===a.PU.number,getDefaultOptions:()=>({value:0})},V=()=>[K,U,F,I],M={id:s.Js.between,name:"Is between",description:"Match when field value is between given option values.",get:j=>(J,Z)=>{const te=Z.values[J];if(isNaN(te))return!1;const se=typeof j.from!="number"?parseInt(j.from,10):j.from,ie=typeof j.to!="number"?parseInt(j.to,10):j.to;return te>se&&te<ie},getOptionsDisplayText:j=>`Matches all rows where field value is between ${j.from} and ${j.to}.`,isApplicable:j=>j.type===a.PU.number||j.type===a.PU.time,getDefaultOptions:j=>j.type===a.PU.time?{from:"$__from",to:"$__to"}:{from:0,to:100}},L=()=>[M],N={id:s.Js.regex,name:"Regex",description:"Match when field value is matching regex.",get:j=>{const J=new RegExp(j.value);return(Z,te)=>{const se=te.values[Z];return J.test(se)}},getOptionsDisplayText:j=>`Matches all rows where field value is matching regex: ${j.value}`,isApplicable:()=>!0,getDefaultOptions:()=>({value:".*"})},W=()=>[N],R={id:s.Js.substring,name:"Contains substring",description:"Match where value for given field is a substring to options value.",get:j=>(J,Z)=>{const te=Z.values[J];return te&&j.value&&typeof te=="string"&&te.toLowerCase().includes(j.value.toLowerCase())||j.value===""},getOptionsDisplayText:()=>"Matches all rows where field is similar to the value.",isApplicable:j=>j.type===a.PU.string,getDefaultOptions:()=>({value:""})},G={id:s.Js.notSubstring,name:"Does not contain substring",description:"Match where value for given field is not a substring to options value.",get:j=>(J,Z)=>{const te=Z.values[J];return typeof te=="string"&&j.value&&te&&j.value!==""&&!te.toLowerCase().includes(j.value.toLowerCase())},getOptionsDisplayText:()=>"Matches all rows where field is not similar to the value.",isApplicable:j=>j.type===a.PU.string,getDefaultOptions:()=>({value:""})},w=()=>[R,G],_=new n.O(()=>[...(0,p.nz)(),...o(),...(0,v.P7)(),...D(),E]),Q=new n.O(()=>[...(0,p.UM)(),...(0,v.Y7)(),...d()]),ae=new n.O(()=>[...B(),...V(),...T(),...w(),...L(),...W()]);function q(j){const J=_.get(j.id);if(!J)throw new Error("Unknown field matcher: "+j.id);return J.get(j.options)}function k(j){const J=Q.get(j.id);if(!J)throw new Error("Unknown frame matcher: "+j.id);return J.get(j.options)}function ee(j){const J=ae.get(j.id);if(!J)throw new Error("Unknown value matcher: "+j.id);return J.get(j.options)}},36656:(ne,A,e)=>{"use strict";e.d(A,{D:()=>n,_:()=>a});var n=(s=>(s.String="string",s))(n||{}),a=(s=>(s.Property="property",s.Operator="operator",s.Or="or",s.And="and",s.GroupBy="groupBy",s.Function="function",s.FunctionParameter="functionParameter",s))(a||{})},36819:(ne,A,e)=>{"use strict";e.d(A,{R:()=>a});const n=new Set;function a(s){if(n.has(s))throw new Error(`There is already an event defined with type '${s}'`);return n.add(s),{name:s}}},36826:(ne,A,e)=>{"use strict";e.d(A,{d:()=>C,y:()=>P});var n=e(74848),a=e(87586),s=e(13791),l=e(5358),r=e(22803),c=e(96540),i=e(92745),o=e(63142),h=e(18027),f=e(18857),g=e(72508),u=e(15633),E=e(52161);function v(S){return S.name===E.hY?"Grafana":S.displayName||S.name}const p=({disabled:S=!1})=>{const B=(0,o.of)(m),{selectedAlertmanager:K,availableAlertManagers:U,setSelectedAlertmanager:F}=(0,l.VI)(),I=(0,c.useMemo)(()=>{const L=U.find(G=>G.name===E.hY),N=U.find(G=>(0,u.b)(G.name)),W=U.filter(G=>G.name!==E.hY&&!(0,u.b)(G.name)),R=[];return L&&R.push({label:v(L),value:L.name,imgUrl:L.imgUrl,meta:L.meta}),N&&R.push({label:v(N),value:N.name,imgUrl:N.imgUrl,meta:N.meta}),W.length>0&&R.push({label:(0,i.t)("alerting.alert-manager-picker.external-alertmanagers-group","External Alertmanagers"),options:W.map(G=>({label:v(G),value:G.name,imgUrl:G.imgUrl,meta:G.meta}))}),R},[U]),V=S||I.length===1,M=V?"Alertmanager":"Choose Alertmanager";return(0,n.jsx)(h.I,{className:B.field,label:M,disabled:V,"data-testid":"alertmanager-picker",children:(0,n.jsx)(f.l6,{"aria-label":M,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:L=>{L?.value&&F(L.value)},options:I,noOptionsMessage:(0,i.t)("alerting.alert-manager-picker.noOptionsMessage-no-datasources-found","No datasources found"),value:K,getOptionLabel:L=>L.label,components:{Option:y}})})},m=S=>({field:(0,r.css)({margin:0}),optionContent:(0,r.css)({display:"flex",alignItems:"center",gap:S.spacing(1),whiteSpace:"pre-line"})}),y=S=>{const B=(0,o.of)(m);return(0,n.jsx)(g.o5,{...S,renderOptionLabel:({label:K})=>(0,n.jsx)("div",{className:B.optionContent,children:K})})};var d=e(34999);const x=()=>(0,n.jsx)(d.F,{title:(0,i.t)("alerting.no-alert-managers-available.title-no-alertmanager-found","No Alertmanager found"),severity:"warning",children:(0,n.jsx)(i.x6,{i18nKey:"alerting.no-alert-managers-available.body-no-alertmanager-found",children:"We could not find any external Alertmanagers and you may not have access to the built-in Grafana Alertmanager."})}),b=()=>(0,n.jsx)(d.F,{title:(0,i.t)("alerting.other-alert-managers-available.title-selected-alertmanager-not-found","Selected Alertmanager not found."),severity:"warning",children:(0,n.jsx)(i.x6,{i18nKey:"alerting.other-alert-managers-available.body-selected-alertmanager-not-found",children:"The selected Alertmanager no longer exists or you may not have permission to access it. You can select a different Alertmanager from the dropdown."})}),D=({availableAlertManagers:S})=>{const B=S.length>0;return(0,n.jsx)("div",{children:B?(0,n.jsx)(b,{}):(0,n.jsx)(x,{})})},C=({children:S,isLoading:B,...K})=>(0,n.jsx)(s.Y,{...K,children:(0,n.jsx)(s.Y.Contents,{isLoading:B,children:S})}),P=({children:S,accessType:B,...K})=>{const U=T();return(0,n.jsx)(l.b9,{accessType:B,children:(0,n.jsx)(C,{...K,actions:(0,n.jsx)(p,{disabled:U}),children:(0,n.jsx)(O,{children:S})})})};function T(){const S=(0,a.A)();return["/edit","/new"].some(K=>S?.pathname?.includes(K))}const O=({children:S})=>{const{availableAlertManagers:B,selectedAlertmanager:K}=(0,l.VI)();return K?(0,n.jsx)(n.Fragment,{children:S}):(0,n.jsx)(D,{availableAlertManagers:B})}},37010:(ne,A,e)=>{"use strict";e.d(A,{$:()=>Ue});var n=e(74848),a=e(96540),s=e(92745),l=e(68143),r=e(43173),c=e(8207),i=e(54314),o=e(60208),h=e(61371),f=e(22803),g=e(16817),u=e(63142),E=e(34999),v=e(83873);function p({dashboard:je}){const Qe=(0,u.of)(m),{loading:He,value:Je,error:de}=(0,g.A)(async()=>{const me=je.getSaveModelCloneOld();return v.IB.validateDashboard(me).catch(Ee=>{if(Ee.status>=500)throw Ee;return Ee.data})},[je]);let ve;if(He)ve=(0,n.jsx)(E.F,{severity:"info",title:(0,s.t)("dashboard.dashboard-validation.title-checking-dashboard-validity","Checking dashboard validity")});else if(Je)Je.isValid||(ve=(0,n.jsxs)(E.F,{severity:"warning",title:(0,s.t)("dashboard.dashboard-validation.title-dashboard-failed-schema-validation","Dashboard failed schema validation"),children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.dashboard-validation.body-dashboard-failed-schema-validation",children:"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"})}),(0,n.jsx)("div",{className:Qe.error,children:Je.message})]}));else{const me=de?.message??"Unknown error";ve=(0,n.jsx)(E.F,{severity:"info",title:(0,s.t)("dashboard.dashboard-validation.title-error-checking-dashboard-validity","Error checking dashboard validity"),children:(0,n.jsx)("p",{className:Qe.error,children:me})})}return ve?(0,n.jsx)("div",{className:Qe.root,children:ve}):null}const m=je=>({root:(0,f.css)({marginTop:je.spacing(1)}),error:(0,f.css)({fontFamily:je.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),y=p;var d=e(30906),x=e(71599),b=e(22787),D=e(45861),C=e(78159),P=e(2543),T=e(41053),O=e(92138),S=e(27489),B=e(36490),K=e(45229),U=e(64762),F=e(38206),I=e(15203),V=e(87745),M=e(52763),L=e(77731);const N=async(je,Qe,He,Je)=>{const de=await Je({dashboard:je,folderUid:Qe.folderUid??He.meta.folderUid??je.meta?.folderUid,message:Qe.message,overwrite:Qe.overwrite,k8s:He.meta.k8s});if("error"in de)throw de.error;return de.data},W=(je=!1)=>{const Qe=(0,M.wA)(),He=(0,U._2)(),[Je]=(0,I.e8)(),[de,ve]=(0,T.A)(async(me,xe,Ee)=>{try{const Pe=await N(me,xe,Ee,Je);Ee.version=Pe.version,me=(0,P.cloneDeep)(me),me.version=Pe.version,Ee.clearUnsavedChanges(me,xe),K.A.publish(new V.Eu),He.success((0,s.t)("dashboard.save-dashboard.message-dashboard-saved","Dashboard saved")),(0,L.ko)(Pe.uid),je?(0,S.rR)("grafana_dashboard_copied",{name:Ee.title,url:Pe.url}):(0,S.rR)(`grafana_dashboard_${Ee.id?"saved":"created"}`,{name:Ee.title,url:Pe.url});const Oe=B.Ny.getLocation().pathname,We=O.I.stripBaseFromUrl(Pe.url);return We!==Oe&&Pe.url&&setTimeout(()=>B.Ny.replace(We)),Ee.meta.isStarred&&Qe((0,F.TU)({id:Ee.uid,title:Ee.title,url:We})),Pe}catch(Pe){throw Pe instanceof Error&&He.error(Pe.message??"Error saving dashboard"),Pe}},[Qe,He]);return{state:de,onDashboardSave:ve}},R=({dashboard:je,dashboardSaveModel:Qe,error:He,onDismiss:Je,setErrorIsHandled:de})=>{const{onDashboardSave:ve}=W(),me=r.$.featureToggles.restoreDashboards;return(0,n.jsxs)(n.Fragment,{children:[He.data&&He.data.status==="version-mismatch"&&(0,n.jsx)(x.u,{isOpen:!0,title:(0,s.t)("dashboard.save-dashboard-error-proxy.title-version-mismatch","Conflict"),body:(0,n.jsx)("div",{children:(0,n.jsxs)(s.x6,{i18nKey:"dashboard.save-dashboard-error-proxy.body-version-mismatch",children:["Someone else has updated this dashboard",(0,n.jsx)("br",{}),(0,n.jsx)("small",{children:"Would you still like to save this dashboard?"})]})}),confirmText:(0,s.t)("dashboard.save-dashboard-error-proxy.confirmText-save-and-overwrite","Save and overwrite"),onConfirm:async()=>{await ve(Qe,{overwrite:!0},je),Je()},onDismiss:Je}),He.data&&He.data.status==="name-exists"&&(0,n.jsx)(n.Fragment,{children:me?(0,n.jsxs)(b.a,{isOpen:!0,title:(0,s.t)("save-dashboards.name-exists.title","Dashboard name already exists"),onDismiss:Je,children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"save-dashboards.name-exists.message-info",children:"A dashboard with the same name in the selected folder already exists, including recently deleted dashboards."})}),(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"save-dashboards.name-exists.message-suggestion",children:"Please choose a different name or folder."})})]}):(0,n.jsx)(x.u,{isOpen:!0,title:(0,s.t)("dashboard.save-dashboard-error-proxy.title-name-exists","Conflict"),body:(0,n.jsx)("div",{children:(0,n.jsxs)(s.x6,{i18nKey:"dashboard.save-dashboard-error-proxy.body-name-exists",children:["A dashboard with the same name in selected folder already exists.",(0,n.jsx)("br",{}),(0,n.jsx)("small",{children:"Would you still like to save this dashboard?"})]})}),confirmText:(0,s.t)("dashboard.save-dashboard-error-proxy.confirmText-save-and-overwrite","Save and overwrite"),onConfirm:async()=>{await ve(Qe,{overwrite:!0},je),Je()},onDismiss:Je})}),He.data&&He.data.status==="plugin-dashboard"&&(0,n.jsx)(G,{dashboard:je,onDismiss:()=>{de(!0),Je()}})]})},G=({onDismiss:je,dashboard:Qe})=>{const{onDashboardSave:He}=W(),Je=(0,u.of)(_);return(0,n.jsxs)(b.a,{className:Je.modal,title:(0,s.t)("dashboard.confirm-plugin-dashboard-save-modal.title-plugin-dashboard","Plugin dashboard"),icon:"copy",isOpen:!0,onDismiss:je,children:[(0,n.jsx)("div",{className:Je.modalText,children:(0,n.jsxs)(s.x6,{i18nKey:"dashboard.confirm-plugin-dashboard-save-modal.body-plugin-dashboard",children:["Your changes will be lost when you update the plugin.",(0,n.jsx)("br",{}),(0,n.jsxs)("small",{children:["Use ",(0,n.jsx)("strong",{children:"Save As"})," to create custom version."]})]})}),(0,n.jsxs)(b.a.ButtonRow,{children:[(0,n.jsx)(D.$n,{variant:"secondary",onClick:je,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.confirm-plugin-dashboard-save-modal.cancel",children:"Cancel"})}),(0,n.jsx)(C.m,{onClick:je,dashboard:Qe,onSaveSuccess:je}),(0,n.jsx)(D.$n,{variant:"destructive",onClick:async()=>{await He(Qe.getSaveModelClone(),{overwrite:!0},Qe),je()},children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.confirm-plugin-dashboard-save-modal.overwrite",children:"Overwrite"})})]})]})},w=je=>{switch(je){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},_=je=>({modal:(0,f.css)({width:"500px"}),modalText:(0,f.css)({fontSize:je.typography.h4.fontSize,color:je.colors.text.primary,marginBottom:je.spacing(4),paddingTop:je.spacing(2)}),modalButtonRow:(0,f.css)({marginBottom:"14px","a, button":{marginRight:je.spacing(2)}})});var Q=e(50426),ae=e(26987),q=e(37386),k=e(41654),ee=e(72636),j=e(63527),J=e(87105),Z=e(21285),te=e(91156),se=e(89223),ie=e(42357),ce=e(70969);const re=je=>{const Qe=je.getSaveModelClone();return Qe.id=null,Qe.uid="",Qe.title+=" Copy",Qe.editable=!0,je.id>0&&Qe.panels&&Qe.panels.forEach(He=>{He.type==="graph"&&He.alert&&delete He.thresholds,delete He.alert}),Qe},ue=({dashboard:je,isLoading:Qe,isNew:He,onSubmit:Je,onCancel:de,onSuccess:ve})=>{const me={title:He?je.title:`${je.title} Copy`,description:je.description,$folder:{uid:je.meta.folderUid,title:je.meta.folderTitle},copyTags:!1},xe=Ee=>async Pe=>{if(Pe&&Pe===Ee().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await se.P.validateNewDashboardName(Ee().$folder.uid??"general",Pe),!0}catch(Oe){return Oe instanceof Error?Oe.message:"Dashboard name is invalid"}};return(0,n.jsx)(Q.l,{defaultValues:me,onSubmit:async Ee=>{if(!Je)return;const Pe=re(je);Pe.title=Ee.title,Pe.description=Ee.description,!He&&!Ee.copyTags&&(Pe.tags=[]),(await Je(Pe,{folderUid:Ee.$folder.uid},je)).status==="success"&&ve()},children:({register:Ee,control:Pe,errors:Oe,getValues:We})=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ae.e,{render:({field:{ref:Fe,...Be}})=>(0,n.jsx)(q.D,{label:(0,n.jsxs)(k.B,{justifyContent:"space-between",children:[(0,n.jsx)(ee.J,{htmlFor:"title",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-as-form.title",children:"Title"})}),r.$.featureToggles.dashgpt&&He&&(0,n.jsx)(ce.Z,{onGenerate:Le=>Be.onChange(Le)})]}),invalid:!!Oe.title,error:Oe.title?.message,children:(0,n.jsx)(j.p,{...Be,onChange:Le=>Be.onChange(Le.target.value),"aria-label":(0,s.t)("dashboard.save-dashboard-as-form.aria-label-save-dashboard-title-field","Save dashboard title field"),autoFocus:!0})}),control:Pe,name:"title",rules:{validate:xe(We)}}),(0,n.jsx)(ae.e,{render:({field:{ref:Fe,...Be}})=>(0,n.jsx)(q.D,{label:(0,n.jsxs)(k.B,{justifyContent:"space-between",children:[(0,n.jsx)(ee.J,{htmlFor:"description",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-as-form.description",children:"Description"})}),r.$.featureToggles.dashgpt&&He&&(0,n.jsx)(ie.V,{onGenerate:Le=>Be.onChange(Le)})]}),invalid:!!Oe.description,error:Oe.description?.message,children:(0,n.jsx)(J.f,{...Be,onChange:Le=>Be.onChange(Le.target.value),"aria-label":(0,s.t)("dashboard.save-dashboard-as-form.aria-label-save-dashboard-description-field","Save dashboard description field"),autoFocus:!0})}),control:Pe,name:"description"}),(0,n.jsx)(q.D,{label:(0,s.t)("dashboard.save-dashboard-as-form.label-folder","Folder"),children:(0,n.jsx)(ae.e,{render:({field:{ref:Fe,...Be}})=>(0,n.jsx)(te.d,{...Be,onChange:(Le,Ge)=>Be.onChange({uid:Le,title:Ge}),value:Be.value?.uid}),control:Pe,name:"$folder"})}),!He&&(0,n.jsx)(q.D,{label:(0,s.t)("dashboard.save-dashboard-as-form.label-copy-tags","Copy tags"),children:(0,n.jsx)(Z.d,{...Ee("copyTags")})}),(0,n.jsxs)(k.B,{children:[(0,n.jsx)(D.$n,{type:"button",variant:"secondary",onClick:de,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-as-form.cancel",children:"Cancel"})}),(0,n.jsx)(D.$n,{disabled:Qe,type:"submit","aria-label":(0,s.t)("dashboard.save-dashboard-as-form.aria-label-save-dashboard-button","Save dashboard button"),children:Qe?(0,s.t)("dashboard.save-dashboard-as-form.saving","Saving..."):(0,s.t)("dashboard.save-dashboard-as-form.save","Save")})]})]})})};var X=e(51898),le=e(32635),he=e(87056),fe=e(16200),Ce=e(37680),Ae=e(66769);const _e=["You are an expert in Grafana Dashboards","Your goal is to write a description of the changes for a dashboard to display to the user","You will be given human-readable diffs with most irrelevant lines filtered out"].join(`.
`),Xe=["Respond only with the diff description, which is meant to be loaded directly into the application for the user.",'If there are no substantial user or migration changes, the correct description is "Minor changes only"',`If there are too many changes of either kind, and those changes have a message saying 'too long', the correct response for that section is "Too many changes to auto-summarize"`,"In a diff, lines beginning with - are removed, and lines beginning with + are added.","Lines with neither + nor - are included for context. Be careful not to mark them as added or removed if they do not start with + or -.","If a line is changed, it will show a previous version removed and a new version added","When referring to panel changes, use the panel title","When using panel title, wrap it with double quotes","When the panel changes position, just mention that the panel has changed position","When an entire panel is added or removed, use the panel title and only say it was added or removed and disregard the rest of the changes for that panel","Group together similar changes into one line when multiple panels are affected","Refer to templating elements as variables","Try to make the response as short as possible"].join(`.
`),De=({dashboard:je,onGenerate:Qe,disabled:He})=>{const Je=(0,a.useCallback)(()=>Me(je),[je]);return(0,n.jsx)(fe.n,{messages:Je,onGenerate:Qe,temperature:0,model:he.Kx.BASE,eventTrackingSrc:Ce.ec.dashboardChanges,toggleTipTitle:"Improve your dashboard changes summary",disabled:He})};function Me(je){let{userChanges:Qe,migrationChanges:He}=(0,Ae.Yy)(je);return Qe.length>8e3&&(Qe="User changes were too long, fill in the user changes section with 'User changes too long to auto-summarize'"),He.split(`
`).length<10?He="No significant migration changes":He.length>8e3&&(He="Migration changes were too long, fill in the migration changes section with 'Migration changes too long to auto-summarize'"),[{content:_e,role:Ae.Xh.system},{content:`Summarize the following user changes diff under "User changes":
${Qe}`,role:Ae.Xh.system},{content:`Be sure to only include substantial user changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Do not include "User Changes" section if there are no substantial user changes to report.`,role:Ae.Xh.system},{content:`Summarize the following migration changes diff under "Migration changes":
${He}`,role:Ae.Xh.system},{content:`Be sure to only include substantial migration changes, such as adding or removing entire panels, changing panel titles or descriptions, etc.
Ignore any threshold step changes or templating list changes.
Ignore other changes and do not include them in the summary. Do not include "Migration Changes" section if there are no substantial migration changes to report.
If there are substantial migration changes, add "Some autogenerated changes are included to update the dashboard to the latest valid schema version" at the end.`,role:Ae.Xh.system},{content:Xe,role:Ae.Xh.system}]}const Te=({dashboard:je,isLoading:Qe,saveModel:He,options:Je,onSubmit:de,onCancel:ve,onSuccess:me,onOptionsChange:xe})=>{const Ee=(0,a.useMemo)(()=>je.hasTimeChanged(),[je]),Pe=(0,a.useMemo)(()=>je.hasVariablesChanged(),[je]),[Oe,We]=(0,a.useState)(!1),[Fe,Be]=(0,a.useState)(Je.message),Le=(0,u.of)($e);return(0,n.jsx)("form",{onSubmit:async Ge=>{if(Ge.preventDefault(),!de)return;We(!0),Je={...Je,message:Fe},(await de(He.clone,Je,je)).status==="success"?me():We(!1)},style:{maxWidth:600},children:(0,n.jsxs)(k.B,{gap:2,direction:"column",alignItems:"flex-start",children:[Ee&&(0,n.jsx)(le.S,{checked:!!Je.saveTimerange,onChange:()=>xe({...Je,saveTimerange:!Je.saveTimerange}),label:(0,s.t)("dashboard.save-dashboard-form.label-current-range-dashboard-default","Save current time range as dashboard default"),"aria-label":X.Tp.pages.SaveDashboardModal.saveTimerange}),Pe&&(0,n.jsx)(le.S,{checked:!!Je.saveVariables,onChange:()=>xe({...Je,saveVariables:!Je.saveVariables}),label:(0,s.t)("dashboard.save-dashboard-form.label-current-variable-values-dashboard-default","Save current variable values as dashboard default"),"aria-label":X.Tp.pages.SaveDashboardModal.saveVariables}),(0,n.jsxs)("div",{className:Le.message,children:[r.$.featureToggles.aiGeneratedDashboardChanges&&(0,n.jsx)(De,{dashboard:je,onGenerate:Ge=>{xe({...Je,message:Ge}),Be(Ge)},disabled:!He.hasChanges}),(0,n.jsx)(J.f,{value:Fe,onChange:Ge=>{xe({...Je,message:Ge.currentTarget.value}),Be(Ge.currentTarget.value)},placeholder:(0,s.t)("dashboard.save-dashboard-form.placeholder-describe-changes","Add a note to describe your changes."),autoFocus:!0,rows:5})]}),(0,n.jsxs)(k.B,{alignItems:"center",children:[(0,n.jsx)(D.$n,{variant:"secondary",onClick:ve,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-form.cancel",children:"Cancel"})}),(0,n.jsx)(D.$n,{type:"submit",disabled:!He.hasChanges||Qe,icon:Oe?"spinner":void 0,"aria-label":X.Tp.pages.SaveDashboardModal.save,children:Qe?(0,s.t)("dashboard.save-dashboard-form.saving","Saving..."):(0,s.t)("dashboard.save-dashboard-form.save","Save")}),!He.hasChanges&&(0,n.jsx)("div",{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-form.no-changes-to-save",children:"No changes to save"})})]})]})})};function $e(je){return{message:(0,f.css)({display:"flex",alignItems:"end",flexDirection:"column",width:"100%"})}}var Re=e(4213),Ke=e(89640),Ve=e(47931);const Se=({dashboard:je,onCancel:Qe})=>{const[He,Je]=(0,a.useState)(()=>{const ve=je.getSaveModelClone();return delete ve.id,JSON.stringify(ve,null,2)}),de=(0,a.useCallback)(()=>{const ve=new Blob([He],{type:"application/json;charset=utf-8"});(0,Re.saveAs)(ve,je.title+"-"+new Date().getTime()+".json")},[je.title,He]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(k.B,{direction:"column",gap:2,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.cannot-be-saved",children:"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source."}),(0,n.jsx)("br",{}),(0,n.jsx)("i",{children:(0,n.jsxs)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.see-docs",children:["See"," ",(0,n.jsx)(Ke.Y,{href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",external:!0,children:"documentation"})," ","for more information about provisioning."]})}),(0,n.jsx)("br",{})," ",(0,n.jsx)("br",{}),(0,n.jsxs)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.file-path",values:{filePath:je.meta.provisionedExternalId},children:[(0,n.jsx)("strong",{children:"File path:"})," ","{{filePath}}"]})]}),(0,n.jsx)(J.f,{spellCheck:!1,value:He,onChange:ve=>{Je(ve.currentTarget.value)},className:Ye.json}),(0,n.jsxs)(k.B,{children:[(0,n.jsx)(D.$n,{variant:"secondary",onClick:Qe,fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.cancel",children:"Cancel"})}),(0,n.jsx)(Ve.b,{icon:"copy",getText:()=>He,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.copy-json-to-clipboard",children:"Copy JSON to clipboard"})}),(0,n.jsx)(D.$n,{type:"submit",onClick:de,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-provisioned-dashboard-form.save-json-to-file",children:"Save JSON to file"})})]})]})})},Ye={json:(0,f.css)({height:"400px",width:"100%",overflow:"auto",resize:"none",fontFamily:"monospace"})},Ue=({dashboard:je,onDismiss:Qe,onSaveSuccess:He,isCopy:Je})=>{const[de,ve]=(0,a.useState)({}),me=je.getOriginalDashboard(),xe=je.meta.provisioned,Ee=je.version===0,Pe=!!je.meta.hasUnsavedFolderChange,[Oe,We]=(0,a.useState)(!1),Fe=(0,a.useMemo)(()=>{const Et=je.getSaveModelClone({saveTimerange:!!de.saveTimerange,saveVariables:!!de.saveVariables});if(!me)return{clone:Et,diff:{},diffCount:0,hasChanges:!1};const mt=(0,h.G4)(me,Et);let Pt=0;for(const rt of Object.values(mt))Pt+=rt.length;return{clone:Et,diff:mt,diffCount:Pt,hasChanges:(Pt>0||Pe)&&!Ee}},[je,me,de,Ee,Pe]),[Be,Le]=(0,a.useState)(!1),{state:Ge,onDashboardSave:Ze}=W(Je),qe=He?()=>{Qe(),He()}:Qe,at=()=>Be?(0,n.jsx)(d.l,{diff:Fe.diff,oldValue:me,newValue:Fe.clone}):Ee||Je?(0,n.jsx)(ue,{dashboard:je,isLoading:Ge.loading,onCancel:Qe,onSuccess:qe,onSubmit:Ze,isNew:Ee}):xe?(0,n.jsx)(Se,{dashboard:je,onCancel:Qe,onSuccess:qe}):(0,n.jsx)(Te,{dashboard:je,isLoading:Ge.loading,saveModel:Fe,onCancel:Qe,onSuccess:qe,onSubmit:Ze,options:de,onOptionsChange:ve});if(Ge.error&&!Oe&&(0,l.NF)(Ge.error)&&w(Ge.error.data.status))return(0,n.jsx)(R,{error:Ge.error,dashboard:je,dashboardSaveModel:Fe.clone,onDismiss:Qe,setErrorIsHandled:We});let ht=(0,s.t)("dashboard.save-dashboard-drawer.title","Save dashboard");return Je?ht=(0,s.t)("dashboard.save-dashboard-drawer.title-copy","Save dashboard copy"):xe&&(ht=(0,s.t)("dashboard.save-dashboard-drawer.title-provisioned","Provisioned dashboard")),(0,n.jsxs)(c._,{title:ht,onClose:Qe,subtitle:je.title,tabs:(0,n.jsxs)(i.U,{children:[(0,n.jsx)(o.o,{label:(0,s.t)("dashboard.save-dashboard-drawer.label-details","Details"),active:!Be,onChangeTab:()=>Le(!1)}),Fe.hasChanges&&(0,n.jsx)(o.o,{label:(0,s.t)("dashboard.save-dashboard-drawer.label-changes","Changes"),active:Be,onChangeTab:()=>Le(!0),counter:Fe.diffCount})]}),children:[at(),r.$.featureToggles.showDashboardValidationWarnings&&(0,n.jsx)(y,{dashboard:je})]})}},37040:(ne,A,e)=>{"use strict";e.d(A,{eQ:()=>ee,MI:()=>J,oV:()=>k,_i:()=>Q,vR:()=>te});var n=e(92138),a=e(54092),s=e(60188),l=e(5556),r=e(92745),c=e(36490),i=e(43173),o=e(45863),h=e(45229),f=e(64762),g=e(12066),u=e(15130),E=e(47797),v=e(54),p=e(20437),m=e(58662),y=e(26689),d=e(302),x=e(8001),b=e(35216),D=e(3260),C=e(8535),P=e(11257),T=e(87745),O=e(60249),S=e(91782),B=e(99949),K=e(3371),U=e(23289),F=e(22079),I=e(8285),V=e(11534),M=e(32540),L=e(74848),N=e(12161);class W extends o.Bs{constructor(){super(...arguments),this.onDismiss=()=>{(0,I.YQ)(this).closeModal()},this.onConfirm=()=>{const ce=(0,I.YQ)(this);ce.unlinkLibraryPanel(this.state.panelRef.resolve()),ce.closeModal()}}static{this.Component=R}}function R({model:ie}){return(0,L.jsx)(N.l,{isOpen:!0,onConfirm:()=>{ie.onConfirm(),ie.onDismiss()},onDismiss:ie.onDismiss})}let G;function w(){return G||(G=(0,x.dp)(b.qm),G)}const _="metrics-drilldown";function Q(ie){(async()=>{const re=ie.parent,ue=re.getPlugin(),X=[],le=[],he=(0,I.YQ)(re),{isEmbedded:fe}=he.state.meta,Ce=await ae(re),Ae=(0,K.bn)(re);if(fe){Ce&&ie.setState({items:[Ce]});return}const _e=!!he.state.editPanel;if(_e||X.push({text:(0,r.t)("panel.header-menu.view","View"),iconClassName:"eye",shortcut:"v",href:n.I.getUrlForPartial(c.Ny.getLocation(),{viewPanel:re.getPathId(),editPanel:void 0})}),he.canEditDashboard()&&he.state.editable&&!Ae&&!_e&&X.push({text:(0,r.t)("panel.header-menu.edit","Edit"),iconClassName:"edit",shortcut:"e",href:(0,F.e0)((0,I.Cs)(re))}),i.$.featureToggles.newDashboardSharingComponent){const Me=[];Me.push({text:(0,r.t)("share-panel.menu.share-link-title","Share link"),iconClassName:"link",shortcut:"p u",onClick:()=>{U.c.sharingCategoryClicked({item:m.wr.link,shareResource:(0,m.hD)(re?.getRef())});const Te=new S.j({shareView:m.wr.link,panelRef:re.getRef()});he.showModal(Te)}}),Me.push({text:(0,r.t)("share-panel.menu.share-embed-title","Share embed"),iconClassName:"arrow",shortcut:"p e",onClick:()=>{U.c.sharingCategoryClicked({item:m.wr.embed,shareResource:(0,m.hD)(re.getRef())});const Te=new S.j({shareView:m.wr.embed,panelRef:re.getRef()});he.showModal(Te)}}),u.TP.isSignedIn&&i.$.snapshotEnabled&&u.TP.hasPermission(P.w.SnapshotsCreate)&&Me.push({text:(0,r.t)("share-panel.menu.share-snapshot-title","Share snapshot"),iconClassName:"camera",shortcut:"p s",onClick:()=>{U.c.sharingCategoryClicked({item:m.wr.snapshot,shareResource:(0,m.hD)(re.getRef())});const Te=new S.j({shareView:m.wr.snapshot,panelRef:re.getRef()});he.showModal(Te)}}),X.push({type:"submenu",text:(0,r.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",subMenu:Me,onClick:Te=>{Te.preventDefault()}})}else X.push({text:(0,r.t)("panel.header-menu.share","Share"),iconClassName:"share-alt",onClick:()=>{he.showModal(new B.Z({panelRef:re.getRef()}))},shortcut:"p s"});he.state.isEditing&&!Ae&&!_e&&le.push({text:(0,r.t)("panel.header-menu.duplicate","Duplicate"),iconClassName:"file-copy-alt",onClick:()=>{he.duplicatePanel(re)},shortcut:"p d"}),_e||le.push({text:(0,r.t)("panel.header-menu.copy","Copy"),iconClassName:"copy",onClick:()=>{he.copyPanel(re)}}),he.state.isEditing&&!Ae&&!_e&&((0,I.ME)(re)?(le.push({text:(0,r.t)("panel.header-menu.unlink-library-panel","Unlink library panel"),iconClassName:"link-broken",onClick:()=>{he.showModal(new W({panelRef:re.getRef()}))}}),le.push({text:(0,r.t)("panel.header-menu.replace-library-panel","Replace library panel"),iconClassName:"library-panel",onClick:()=>{he.onShowAddLibraryPanelDrawer(re.getRef())}})):i.$.featureToggles.newDashboardSharingComponent?le.push({text:(0,r.t)("share-panel.menu.new-library-panel-title","New library panel"),iconClassName:"plus-square",onClick:()=>{const Me=new S.j({shareView:m.wr.libraryPanel,panelRef:re.getRef()});he.showModal(Me)}}):le.push({text:(0,r.t)("panel.header-menu.create-library-panel","Create library panel"),onClick:()=>{he.showModal(new B.Z({panelRef:re.getRef(),activeTab:m.wr.libraryPanel}))}})),(0,v.q0)()&&le.push({text:(0,r.t)("panel.header-menu.new-alert-rule","New alert rule"),iconClassName:"bell",onClick:Me=>Z(re)}),se(re.state.options)&&!_e&&le.push({text:re.state.options.legend.showLegend?(0,r.t)("panel.header-menu.hide-legend","Hide legend"):(0,r.t)("panel.header-menu.show-legend","Show legend"),iconClassName:re.state.options.legend.showLegend?"legend-hide":"legend-show",onClick:Me=>{Me.preventDefault(),te(re)},shortcut:"p l"}),he.canEditDashboard()&&ue&&!ue.meta.skipDataQuery&&!Ae&&le.push({text:(0,r.t)("panel.header-menu.get-help","Get help"),iconClassName:"question-circle",onClick:Me=>{Me.preventDefault(),he.showModal(new O.C({panelRef:re.getRef(),currentTab:y.q.Help}))}}),Ce&&X.push(Ce),X.push(q(ue,re,he)),w();const{extensions:De}=G({extensionPointId:a.SM.DashboardPanelMenu,context:j(re,he),limitPerPlugin:3});if(De.length>0&&!he.state.isEditing){const Me=De.filter(Re=>Re.type===a.u6.link),[Te,$e]=Me.reduce(([Re,Ke],Ve)=>(Ve.category===_?Re.push(Ve):Ke.push(Ve),[Re,Ke]),[[],[]]);Te.length>0&&X.push({text:(0,r.t)("dashboard-scene.panel-menu-behavior.async-func.text.metrics-drilldown","Metrics drilldown"),iconClassName:"code-branch",type:"submenu",subMenu:(0,D.N9)(Te)}),$e.length>0&&X.push({text:(0,r.t)("dashboard-scene.panel-menu-behavior.async-func.text.extensions","Extensions"),iconClassName:"plug",type:"submenu",subMenu:(0,D.N9)($e)})}le.length&&X.push({type:"submenu",text:(0,r.t)("panel.header-menu.more","More..."),iconClassName:"cube",subMenu:le,onClick:Me=>{Me.preventDefault()}}),he.state.isEditing&&!Ae&&!_e&&(X.push({text:"",type:"divider"}),X.push({text:(0,r.t)("panel.header-menu.remove","Remove"),iconClassName:"trash-alt",onClick:()=>{J(he,re)},shortcut:"p r"})),ie.setState({items:X})})()}async function ae(ie){const ce=await(0,F.Lp)(ie);if(ce)return{text:(0,r.t)("panel.header-menu.explore","Explore"),iconClassName:"compass",shortcut:"p x",href:ce}}function q(ie,ce,re){const ue=[];return ie&&!ie.meta.skipDataQuery&&(ue.push({text:(0,r.t)("panel.header-menu.inspect-data","Data"),onClick:X=>{X.preventDefault(),re.showModal(new O.C({panelRef:ce.getRef(),currentTab:y.q.Data}))}}),re instanceof V.H$&&re.state.meta.canEdit&&ue.push({text:(0,r.t)("panel.header-menu.query","Query"),onClick:X=>{X.preventDefault(),re.showModal(new O.C({panelRef:ce.getRef(),currentTab:y.q.Query}))}})),ue.push({text:(0,r.t)("panel.header-menu.inspect-json","Panel JSON"),onClick:X=>{X.preventDefault(),re.showModal(new O.C({panelRef:ce.getRef(),currentTab:y.q.JSON}))}}),{text:(0,r.t)("panel.header-menu.inspect","Inspect"),iconClassName:"info-circle",shortcut:"i",onClick:X=>{X.isDefaultPrevented()||re.showModal(new O.C({panelRef:ce.getRef(),currentTab:y.q.Data}))},subMenu:ue.length>0?ue:void 0}}function k(ie){if(!(ie.parent instanceof M.$))throw new Error("parent of VizPanelLinksMenu must be VizPanelLinks");const ce=ie.parent.parent;if(!(ce instanceof o.Eb))throw new Error("parent of VizPanelLinks must be VizPanel");ie.setState({links:ee(ce)})}function ee(ie){const ce=(X,le)=>o.jh.interpolate(ie,X,le),re=(0,d.CH)(ie,ce);if(!re)return[];const ue=re.getLinks(ce);return ue.map(X=>({...X,onClick:(he,fe)=>{U.c.panelLinkClicked({has_multiple_links:ue.length>1}),X.onClick?.(he,fe)}}))}function j(ie,ce){const re=o.jh.getTimeRange(ie);let ue=(0,I.un)(ie);const X=ue?.state.queries,le=(0,I.Cs)(ie);let he={};return ie.state.$variables&&ie.state.$variables.state.variables.forEach(fe=>{fe instanceof o.xc&&(he={...he,[fe.state.name]:{value:fe.getValue(),text:fe.getValueText()}})}),{id:le,pluginId:ie.state.pluginId,title:ie.state.title,timeRange:re.state.value.raw,timeZone:(0,s.O)({timeZone:re.getTimeZone()}),dashboard:{uid:ce.state.uid,title:ce.state.title,tags:ce.state.tags||[]},targets:X,scopedVars:he,data:ue?.state.data}}function J(ie,ce){h.A.publish(new T.bY({title:(0,r.t)("dashboard-scene.on-remove-panel.title.remove-panel","Remove panel"),text:(0,r.t)("dashboard-scene.on-remove-panel.text.remove-panel","Are you sure you want to remove this panel?"),icon:"trash-alt",yesText:"Remove",onConfirm:()=>ie.removePanel(ce)}))}const Z=async ie=>{try{const ce=await(0,p.J6)(ie),re=l.kM.renderUrl("/alerting/new",{defaults:JSON.stringify(ce),returnTo:window.location.pathname+window.location.search});c.Ny.push(re)}catch(ce){const re=`Error getting rule values from the panel: ${(0,E.q6)(ce)}`;(0,C.JD)((0,g.dx)((0,f.gi)(re)));return}};function te(ie){const ce=ie.state.options;se(ce)&&typeof ce.legend.showLegend=="boolean"&&ie.onOptionsChange({legend:{showLegend:!ce.legend.showLegend}})}function se(ie){return ie!=null&&typeof ie=="object"&&"legend"in ie}},37168:(ne,A,e)=>{"use strict";e.d(A,{X:()=>Q,v:()=>ae});var n=e(74848),a=e(84057),s=e(65307),l=e(96540),r=e(54148),c=e(20877),i=e(90382),o=e(32899),h=e(11594),f=e(92745),g=e(43173),u=e(36490),E=e(56297),v=e(34999),p=e(13791),m=e(11098),y=e(1506),d=e(27963),x=e(73427);function b(q){return console.error(q),C("Exception thrown","See console for details")}function D(){return C("Page not found","404 Error")}function C(q,k){const ee={text:q,subTitle:k,icon:"exclamation-triangle"};return{node:ee,main:ee}}var P=e(47797),T=e(28337),O=e(22914),S=e(95027),B=e(37640),K=e(22465),U=e(70715),F=e(3548);const I={loading:!0,loadingError:!1,pluginNav:null,plugin:null};function V({pluginId:q,pluginNavSection:k}){const{pluginId:ee=""}=(0,r.g)();q=q||ee;const j=(0,T.OG)(),J=(0,T.TX)(),Z=(0,T.ZV)(),te=(0,T.ov)(),se=(0,r.zy)(),[ie,ce]=(0,l.useReducer)(M.reducer,I),re=g.$.appSubUrl+se.pathname+se.search,{plugin:ue,loading:X,loadingError:le,pluginNav:he}=ie,fe=(0,B.Wy)(re,k),Ce=(0,l.useMemo)(()=>(0,u.SE)(se.search),[se.search]),Ae=(0,l.useMemo)(()=>(0,U.S)(fe),[fe]),_e=(0,d.Il)();(0,l.useEffect)(()=>{L(q,ce)},[q]);const Xe=(0,l.useCallback)($e=>ce(M.actions.changeNav($e)),[]);if(!ue||q!==ue.meta.id){const $e=_e.chrome.state.getValue().layout;return(0,n.jsxs)(p.Y,{navModel:fe,pageNav:{text:""},layout:$e,children:[X&&(0,n.jsx)(m.A,{}),!X&&le&&(0,n.jsx)(y.L,{entity:"App"})]})}if(!ue.root)return(0,n.jsx)(p.Y,{navModel:fe??C("Plugin load error"),children:(0,n.jsx)("div",{children:(0,n.jsx)(f.x6,{i18nKey:"plugins.app-root-page.no-root-app-page-component-found",children:"No root app page component found"})})});const De=ue.root&&(0,n.jsx)(c.a,{meta:ue.meta,children:(0,n.jsx)(K.K,{fallback:({error:$e,errorInfo:Re})=>(0,n.jsx)(E.D,{title:(0,f.t)("plugins.app-root-page.error-loading-plugin","Plugin failed to load"),error:$e,errorInfo:Re}),children:(0,n.jsx)(F.i,{pluginId:q,children:(0,n.jsx)(T.AZ,{registries:{addedLinksRegistry:j.readOnly(),addedComponentsRegistry:J.readOnly(),exposedComponentsRegistry:Z.readOnly(),addedFunctionsRegistry:te.readOnly()},children:(0,n.jsx)(ue.root,{meta:ue.meta,basename:se.pathname,onNavChanged:Xe,query:Ce,path:se.pathname})})})})}),Me=()=>{if(!ue.meta?.includes)return!0;const $e=ue.meta?.includes.find(Ke=>Ke.path===se.pathname);if(!$e)return!0;if($e?.action)return x.TP.hasPermission($e.action);if(x.TP.isGrafanaAdmin||x.TP.user.orgRole===i.X.Admin)return!0;const Re=$e?.role||"";return!Re||x.TP.isEditor&&Re===i.X.Viewer?!0:x.TP.hasRole(Re)},Te=()=>(0,n.jsx)(v.F,{severity:"warning",title:(0,f.t)("plugins.app-root-page.access-denied.title-access-denied","Access denied"),children:(0,n.jsx)(f.x6,{i18nKey:"plugins.app-root-page.access-denied.permission",children:"You do not have permission to see this page."})});return Me()?he?(0,n.jsx)(n.Fragment,{children:fe?(0,n.jsx)(p.Y,{navModel:fe,pageNav:he?.node,children:(0,n.jsx)(p.Y.Contents,{isLoading:X,children:De})}):(0,n.jsx)(p.Y,{children:De})}):(0,n.jsx)(U.A.Provider,{value:Ae,children:De}):(0,n.jsx)(Te,{})}const M=(0,s.Z0)({name:"prom-builder-container",initialState:I,reducers:{setState:(q,k)=>{Object.assign(q,k.payload)},changeNav:(q,k)=>{let ee=k.payload;ee&&ee.node.children&&(ee={...ee,node:{...ee.main,hideFromBreadcrumbs:!0}}),q.pluginNav=ee}}});async function L(q,k){try{const ee=await(0,S.x)(q).then(j=>{const J=N(j);return J?(x.lE.emit(o.r1.alertError,[J]),k(M.actions.setState({pluginNav:C(J)})),null):(0,O.u)(j)});k(M.actions.setState({plugin:ee,loading:!1,loadingError:!1,pluginNav:null}))}catch(ee){k(M.actions.setState({plugin:null,loading:!1,loadingError:!0,pluginNav:D()}));const j=ee instanceof Error?ee:new Error((0,P.q6)(ee));B.z4.logError(j),console.error(j)}}function N(q){return q?q.type!==h.QE.app?"Plugin must be an app":q.enabled?null:"Application Not Enabled":"Unknown Plugin"}const W=V;var R=e(8535);const G=q=>"pluginId"in q&&"id"in q,w=q=>q.startsWith("standalone-plugin-page-/");function _(q){const k=(0,a.rH)(q),ee=`/a/${q.pluginId}`,j=w(q.id)&&q.url||ee,J=w(q.id)&&!q.url?.startsWith("/a/");return{path:`${j}/*`,sensitive:J,component:()=>(0,n.jsx)(W,{pluginId:q.pluginId,pluginNavSection:k})}}function Q(){const q=(0,R.Gu)(),{navIndex:k}=q;return[...Object.values(k).filter(G).map(_),{path:"/a/:pluginId/*",component:()=>(0,n.jsx)(W,{pluginNavSection:k.home})}]}function ae(q){const k=(0,R.Gu)(),{navIndex:ee}=k,j=Object.values(ee).filter(G).find(J=>J.pluginId===q);return j?_(j):{path:"/a/:pluginId/*",component:()=>(0,n.jsx)(W,{pluginNavSection:ee.home})}}},37234:(ne,A,e)=>{"use strict";e.d(A,{yR:()=>K,cZ:()=>F,HT:()=>Q,M0:()=>G,f8:()=>ue,J9:()=>w,Wr:()=>ce,sg:()=>ie});var n=e(88838),a=e(2543),s=e(88483),l=e(50832),r=e(65474),c=e(67770),i=e(739),o=e(41119),h=e(10279),f=e(95004),g=e(64394),u=e(25229),E=e(71642),v=e(63704),p=e(80011),m=e(17548),y=e(28105),d=e(50204),x=e(92745),b=e(43173),D=e(8255),C=e(65642);function P(X,le){return C.Ay.bootData?.user?.lightTheme?le:X}var T=e(12282),O=e(46072),S=e(74746);const B="Line limit",K="Common labels",U="Total lines",F={[c.$b.critical]:D.Tj[7],[c.$b.error]:D.Tj[4],[c.$b.warning]:D.Tj[1],[c.$b.info]:D.Tj[0],[c.$b.debug]:D.Tj[5],[c.$b.trace]:D.Tj[2],[c.$b.unknown]:P("#8e8e8e","#bdc4cd")},I=1,V=1e3*I,M=60*V,L=60*M,N=24*L,W=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function R(X,le,he){switch(he){case i.fY.exact:return X.entry.replace(W,"")===le.entry.replace(W,"");case i.fY.numbers:return X.entry.replace(/\d/g,"")===le.entry.replace(/\d/g,"");case i.fY.signature:return X.entry.replace(/\w/g,"")===le.entry.replace(/\w/g,"");default:return!1}}function G(X,le){return le===i.fY.none?X:X.reduce((he,fe,Ce)=>{const Ae=he[he.length-1];return Ce>0&&R(fe,Ae,le)?Ae.duplicates++:he.push({...fe,duplicates:0}),he},[])}function w(X,le){const he={},fe=[];for(const Ce of X){let Ae=he[Ce.logLevel];Ae||(he[Ce.logLevel]=Ae={lastTs:null,datapoints:[],target:Ce.logLevel,color:F[Ce.logLevel]},fe.push(Ae));const _e=Math.floor(Ce.timeEpochMs/le)*le;_e===Ae.lastTs?Ae.datapoints[Ae.datapoints.length-1][0]++:(Ae.datapoints.push([1,_e]),Ae.lastTs=_e);for(const Xe of fe)Xe!==Ae&&Xe.lastTs!==_e&&(Xe.datapoints.push([0,_e]),Xe.lastTs=_e)}return fe.map((Ce,Ae)=>{Ce.datapoints.sort((Me,Te)=>Me[1]-Te[1]);const _e=(0,o.Vc)(Ce),De=new h.L(_e).getFirstFieldOfType(f.PU.number);return _e.fields[De.index].config.min=0,_e.fields[De.index].config.decimals=0,_e.fields[De.index].config.color={mode:g.Y.Fixed,fixedColor:Ce.color},_e.fields[De.index].config.custom={drawStyle:i.GR.Bars,barAlignment:i.Nj.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:Ce.color,pointColor:Ce.color,fillColor:Ce.color,lineWidth:0,fillOpacity:100,stacking:{mode:i.gs.Normal,group:"A"}},_e})}function _(X){return X.fields.some(le=>le.type===f.PU.time)&&X.fields.some(le=>le.type===f.PU.string)}function Q(X,le,he,fe,Ce){const{logSeries:Ae}=q(X),_e=ee(Ae,fe,!!Ce);if(_e){if(_e.queries=fe,le&&_e.rows.length>0){const Xe=_e.rows.sort(S.M1),{visibleRange:De,bucketSize:Me,visibleRangeMs:Te,requestedRangeMs:$e}=ae(Xe,le,he);_e.visibleRange=De,_e.bucketSize=Me,_e.series=w(Xe,Me),_e.meta&&(_e.meta=j(_e,Te,$e))}else _e.series=[];return _e}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:fe}}function ae(X,le,he,fe=20,Ce=1e3){let Ae=he,_e=le,Xe=Math.max(_e*fe,Ce),De,Me;if(he){const Te=X[0].timeEpochMs,$e=X[X.length-1].timeEpochMs,Re=Te<$e?Te:$e,Ke=he.to-Re;if(Me=he.to-he.from,De=Math.abs(Te-$e),De>0){const Ve=Ke/Me;_e*=Ve,Xe=Math.max(Math.ceil(_e*fe),Ce),Ae={from:Math.floor(Re/Xe)*Xe,to:he.to}}else De=1}return{bucketSize:Xe,visibleRange:Ae,visibleRangeMs:De,requestedRangeMs:Me}}function q(X){const le=[],he=[];for(const fe of X){if(_(fe)||!fe.fields.length){he.push(fe);continue}fe.length>0&&le.push(fe)}return{logSeries:he,metricSeries:le}}function k(X,le,he){const fe=X.values[he],Ae=(0,u.yT)(fe).valueOf();if(le)return{ts:fe,timeEpochMs:Ae,timeEpochNs:le.values[he]};if(X.nanos!==void 0){const _e=X.nanos[he].toString().padStart(6,"0"),Xe=`${Ae}${_e}`;return{ts:fe,timeEpochMs:Ae,timeEpochNs:Xe}}return{ts:fe,timeEpochMs:Ae,timeEpochNs:Ae+"000000"}}function ee(X,le=[],he=!1){if(X.length===0)return;const fe=[];let Ce=[];const Ae=X.filter(Qe=>Qe.fields.length);Ae.length&&Ae.forEach(Qe=>{const He=(0,O.Os)(Qe);if(He!=null){const Je=He.getLogFrameLabelsAsLabels()??void 0,de={rawFrame:Qe,logsFrame:He,frameLabels:Je};Ce.push(de),Je&&Je.length>0&&fe.push(Je)}});const _e=fe.flat(),Xe=_e.length>0?(0,E.yO)(_e):{};let De=[],Me=!1;const Te=(0,S.kA)();for(const Qe of Ce){const{logsFrame:He,rawFrame:Je,frameLabels:de}=Qe,{timeField:ve,timeNanosecondField:me,bodyField:xe,severityField:Ee,idField:Pe}=He;for(let Oe=0;Oe<Je.length;Oe++){const{ts:We,timeEpochMs:Fe,timeEpochNs:Be}=k(ve,me??void 0,Oe),Le=xe.values[Oe]??"",Ge=typeof Le=="string"?Le:JSON.stringify(Le),Ze=v.sQ.hasAnsiCodes(Ge),qe=!!Ge.match(/\\n|\\t|\\r/),at=Je.meta?.custom?.searchWords??Je.meta?.searchWords??[],ht=Ze?n.Ay.strip(Ge):Ge,Et=de?.[Oe],mt=(0,E.s6)(Et,Xe);Object.keys(mt).length>0&&(Me=!0);let Pt=c.$b.unknown;const rt=Ee&&Ee.values[Oe]||(Et?.level??Et?.detected_level);typeof rt=="number"||typeof rt=="string"?Pt=(0,S.EK)(rt):Pt=(0,S.XM)(ht);const Kt=le.find($t=>$t.refId===Je.refId)?.datasource,Gt=Kt?.type,en=Kt?.uid,st={entryFieldIndex:xe.index,rowIndex:Oe,dataFrame:Je,logLevel:Pt,timeFromNow:(0,p.fq)(We),timeEpochMs:Fe,timeEpochNs:Be,timeLocal:(0,p.LE)(We,{timeZone:"browser"}),timeUtc:(0,p.LE)(We,{timeZone:"utc"}),uniqueLabels:mt,hasAnsi:Ze,hasUnescapedContent:qe,searchWords:at,entry:ht,raw:Ge,labels:Et||{},uid:`${Je.refId}_${Pe?Pe.values[Oe]:Oe.toString()}`,datasourceType:Gt,datasourceUid:en};Pe!==null&&(st.rowId=Pe.values[Oe]),!(he&&Te(st))&&De.push(st)}}const $e=[],Ke=X.filter(Qe=>Qe?.meta?.custom?.limit??Qe?.meta?.limit).reduce((Qe,He)=>(Qe[He.refId??""]=He.meta?.custom?.limit??He.meta?.limit??0,Qe),{}),Ve=Object.values(Ke).reduce((Qe,He)=>Qe+=He,0);Ve>0&&$e.push({label:B,value:Ve,kind:c.tG.Number});const Se=X.reduce((Qe,He)=>Qe+=He.meta?.custom?.total,0);Se>0&&$e.push({label:U,value:Se,kind:c.tG.Number});let Ye=0;const Ue={};let je=!1;for(const Qe of X){const He=Qe.meta?.custom?.lokiQueryStatKey,{refId:Je}=Qe;if(!je&&Qe.meta?.custom?.error&&($e.push({label:"",value:Qe.meta?.custom.error,kind:c.tG.Error}),je=!0),Je&&!Ue[Je]){if(He&&Qe.meta?.stats){const de=Qe.meta.stats.find(ve=>ve.displayName===He);de&&(Ye+=de.value)}Ue[Je]=!0}}if(Ye>0){const{text:Qe,suffix:He}=(0,d.rT)("B")(Ye);$e.push({label:(0,x.t)("logs.log-series-to-logs-model.label.total-bytes-processed","Total bytes processed"),value:`${Qe} ${He}`,kind:c.tG.String})}return(0,a.size)(Xe)>0&&$e.push({label:K,value:Xe,kind:c.tG.LabelsMap}),{hasUniqueLabels:Me,meta:$e,rows:De}}function j(X,le,he){if(!X.meta)return[];let fe=[...X.meta];const Ce=fe.findIndex(_e=>_e.label===B),Ae=Ce>=0&&fe[Ce]?.value;if(Ae&&typeof Ae=="number"&&Ae>0){let _e;if(Ae===X.rows.length&&le&&he){if(_e=`${Ae} reached`,!X.queries?.some(De=>"direction"in De&&De.direction===T.ti.Scan)){const De=(le/he*100).toFixed(2);_e=`${Ae} lines shown \u2014 ${De}% (${m.msRangeToTimeString(le)}) of ${m.msRangeToTimeString(he)}`}}else{const Xe=b.$.featureToggles.logsInfiniteScrolling?"displayed":"returned";_e=`${X.rows.length} ${X.rows.length>1?"lines":"line"} ${Xe}`}fe[Ce]={label:"",value:_e,kind:c.tG.String}}return fe}function J(X,le){const he=le&&X===c.$b.unknown?"logs":X,fe=F[X];return{displayNameFromDS:he,color:{mode:g.Y.Fixed,fixedColor:fe},custom:{drawStyle:i.GR.Bars,barAlignment:i.Nj.Center,lineColor:fe,pointColor:fe,fillColor:fe,lineWidth:1,fillOpacity:100,stacking:{mode:i.gs.Normal,group:"A"}}}}const Z=(X,le,he)=>(X.fields=X.fields.map(fe=>(fe.type===f.PU.number&&(fe.config={...fe.config,...J(le(X),he)}),fe)),X);function te(X){let le;try{le=new h.L(X).getFirstFieldOfType(f.PU.number)}catch{}return le?.labels?se(le.labels):c.$b.unknown}function se(X){const le=X.level??X.detected_level??X.lvl??X.loglevel??"";return le?(0,S.EK)(le):c.$b.unknown}function ie(X,le,he){const fe=le.range,Ce=he.targets,Ae=te,_e=fe.to.valueOf()-fe.from.valueOf(),Xe=re(le.scopedVars,_e);return le.interval=Xe.interval,le.scopedVars.__interval={value:Xe.interval,text:Xe.interval},Xe.intervalMs!==void 0&&(le.intervalMs=Xe.intervalMs,le.scopedVars.__interval_ms={value:Xe.intervalMs,text:Xe.intervalMs}),le.hideFromInspector=!0,new s.c(De=>{let Me=[];De.next({state:y.Gu.Loading,error:void 0,data:[]});const Te=X.query(le),Re=((0,l.A)(Te)?Te:(0,r.H)(Te)).subscribe({complete:()=>{De.complete()},next:Ke=>{const{error:Ve}=Ke;if(Ve!==void 0)De.next({state:y.Gu.Error,error:Ve,data:Ke.data}),De.error(Ve);else{const Se=(0,a.groupBy)(Ke.data,"refId");Me=Ke.data.map(Ye=>{if(Ye.meta?.dataTopic===i.QR.Annotations)return Ye;let Ue=Ye.refId||"";Ue.startsWith("log-volume-")&&(Ue=Ue.substr(11));const je={logsVolumeType:c.Aj.FullRange,absoluteRange:{from:fe.from.valueOf(),to:fe.to.valueOf()},datasourceName:X.name,sourceQuery:Ce.find(Qe=>Qe.refId===Ue)};return Ye.meta={...Ye.meta,custom:{...Ye.meta?.custom,...je}},Z(Ye,Ae,Se[Ye.refId].length===1)}),De.next({state:Ke.state,error:void 0,data:Me})}},error:Ke=>{De.next({state:y.Gu.Error,error:Ke,data:[]}),De.error(Ke)}});return()=>{Re?.unsubscribe()}})}function ce(X,le){return le.hideFromInspector=!0,new s.c(he=>{let fe=[];he.next({state:y.Gu.Loading,error:void 0,data:[]});const Ce=X.query(le),_e=((0,l.A)(Ce)?Ce:(0,r.H)(Ce)).subscribe({complete:()=>{he.next({state:y.Gu.Done,error:void 0,data:fe}),he.complete()},next:Xe=>{const{error:De}=Xe;De!==void 0?(he.next({state:y.Gu.Error,error:De,data:[]}),he.error(De)):fe=Xe.data.map(Me=>{const Te=(0,o.Vc)(Me),{timeIndex:$e}=(0,o.KR)(Te);return(0,o.ES)(Te,$e)})},error:Xe=>{he.next({state:y.Gu.Error,error:Xe,data:[]}),he.error(Xe)}});return()=>{_e?.unsubscribe()}})}function re(X,le){if(X.__interval_ms){let he=X.__interval_ms.value,fe="";return le<V*5?(he=I,fe="1ms"):he>L?(he=N,fe="1d"):he>M?(he=L,fe="1h"):he>V?(he=M,fe="1m"):(he=V,fe="1s"),{interval:fe,intervalMs:he}}else return{interval:"$__interval"}}function ue(X){const le=X.dataFrame;return le.length===0||le.length<=X.rowIndex?null:(0,o.EI)({fields:le.fields.map(fe=>({...fe,values:[fe.values[X.rowIndex]]})),refId:le.refId})}},37235:(ne,A,e)=>{"use strict";e.d(A,{j:()=>o});var n=e(74848),a=e(22803),s=e(92745),l=e(94959),r=e(30703),c=e(45967),i=e(45558);const o=({dataSourceConfig:h,onChange:f})=>{const g=h.secureJsonFields&&h.secureJsonFields.tlsCACert,u=h.secureJsonFields&&h.secureJsonFields.tlsClientCert,E=h.secureJsonFields&&h.secureJsonFields.tlsClientKey,v=h.jsonData&&h.jsonData.serverName,p=b=>D=>{D.preventDefault();const C={...h.secureJsonFields};C[b]=!1,f({...h,secureJsonFields:C})},m=b=>D=>{const C={...h.secureJsonData};C[b]=D.currentTarget.value,f({...h,secureJsonData:C})},y=b=>{const D={...h.jsonData,serverName:b.currentTarget.value};f({...h,jsonData:D})},d="-----BEGIN CERTIFICATE-----";return(0,n.jsxs)("div",{className:"gf-form-group",children:[(0,n.jsxs)("div",{className:(0,a.cx)("gf-form",(0,a.css)({alignItems:"baseline"})),children:[(0,n.jsx)("h6",{children:(0,n.jsx)(s.x6,{i18nKey:"grafana-ui.data-source-settings.tls-heading",children:"TLS/SSL Auth Details"})}),(0,n.jsx)(c.m,{placement:"right-end",content:(0,s.t)("grafana-ui.data-source-settings.tls-tooltip","TLS/SSL Certs are encrypted and stored in the Grafana database."),theme:"info",children:(0,n.jsx)(r.I,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})})]}),(0,n.jsxs)("div",{children:[h.jsonData.tlsAuthWithCACert&&(0,n.jsx)(i.K,{hasCert:!!g,onChange:m("tlsCACert"),placeholder:(0,s.t)("grafana-ui.data-source-settings.tls-certification-placeholder","Begins with {{certificateBeginsWith}}",{certificateBeginsWith:d}),label:(0,s.t)("grafana-ui.data-source-settings.tls-certification-label","CA Cert"),onClick:p("tlsCACert")}),h.jsonData.tlsAuth&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)(l.z,{label:(0,s.t)("grafana-ui.data-source-settings.tls-server-name-label","ServerName"),labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:v&&h.jsonData.serverName,onChange:y})}),(0,n.jsx)(i.K,{hasCert:!!u,label:(0,s.t)("grafana-ui.data-source-settings.tls-client-certification-label","Client Cert"),onChange:m("tlsClientCert"),placeholder:(0,s.t)("grafana-ui.data-source-settings.tls-certification-placeholder","Begins with {{certificateBeginsWith}}",{certificateBeginsWith:d}),onClick:p("tlsClientCert")}),(0,n.jsx)(i.K,{hasCert:!!E,label:(0,s.t)("grafana-ui.data-source-settings.tls-client-key-label","Client Key"),placeholder:(0,s.t)("grafana-ui.data-source-settings.tls-client-key-placeholder","Begins with {{privateKeyBeginsWith}}",{privateKeyBeginsWith:"-----BEGIN RSA PRIVATE KEY-----"}),onChange:m("tlsClientKey"),onClick:p("tlsClientKey")})]})]})]})}},37256:(ne,A,e)=>{"use strict";e.d(A,{JC:()=>S,JJ:()=>d,LR:()=>y,NJ:()=>K,aU:()=>b,ai:()=>T,h9:()=>B,mj:()=>m,nT:()=>O,t5:()=>x,y7:()=>U});var n=e(65307),a=e(75505),s=e(45650),l=e(65474),r=e(62467),c=e(66847),i=e(12974),o=e(68143),h=e(43173),f=e(92391),g=e(19203),u=e(59253),E=e(95256),v=e(4476),p=e(13660);const m=(0,n.zD)(`${E.fu}/fetchAll`,async(I,V)=>{try{V.dispatch({type:`${E.fu}/fetchLocal/pending`}),V.dispatch({type:`${E.fu}/fetchRemote/pending`});const M=h.$.pluginAdminExternalManageEnabled?(0,l.H)((0,u.Ap)()):(0,r.of)(void 0),L=h.$.pluginAdminExternalManageEnabled?(0,l.H)((0,u.XP)()):(0,r.of)(void 0),N=500,W=(0,l.H)((0,u.Bj)()),R=(0,l.H)((0,u.Gd)()),G=(0,l.H)((0,u.T_)()).pipe((0,c.W)(w=>(V.dispatch({type:`${E.fu}/fetchRemote/rejected`}),console.error(w),(0,r.of)([]))));return(0,s.p)({local:R,remote:G,instance:M,provisioned:L,pluginErrors:W}).pipe((0,i.w)({each:N,with:()=>(G.subscribe(async w=>{if(V.dispatch({type:`${E.fu}/fetchRemote/fulfilled`}),w.length>0){const _=await(0,a.s)(R),Q=await(0,a.s)(M),ae=await(0,a.s)(L),q=await(0,a.s)(W);V.dispatch(b((0,v.td)({local:_,remote:w,instance:Q,provisioned:ae,pluginErrors:q})))}}),(0,s.p)({local:R,instance:M,provisioned:L,pluginErrors:W}))})).subscribe(({local:w,remote:_,instance:Q,provisioned:ae,pluginErrors:q})=>{w&&_?(V.dispatch({type:`${E.fu}/fetchLocal/fulfilled`}),V.dispatch({type:`${E.fu}/fetchRemote/fulfilled`}),V.dispatch(b((0,v.td)({local:w,remote:_,instance:Q,provisioned:ae,pluginErrors:q})))):w&&(V.dispatch({type:`${E.fu}/fetchLocal/fulfilled`}),V.dispatch(b((0,v.td)({local:w,pluginErrors:q}))))},w=>(console.log(w),V.dispatch({type:`${E.fu}/fetchLocal/rejected`}),V.dispatch({type:`${E.fu}/fetchRemote/rejected`}),V.rejectWithValue("Unknown error."))),null}catch{return V.rejectWithValue("Unknown error.")}}),y=(0,n.zD)(`${E.fu}/fetchAllLocal`,async(I,V)=>{try{return(await(0,u.Gd)()).map(L=>(0,v.kH)(L))}catch{return V.rejectWithValue("Unknown error.")}}),d=(0,n.zD)(`${E.fu}/fetchRemotePlugins`,async(I,V)=>{try{return await(0,u.T_)()}catch(M){return(0,o.NF)(M)&&(M.isHandled=!0),V.rejectWithValue([])}}),x=(0,n.zD)(`${E.fu}/fetchDetails`,async(I,V)=>{try{const M=await(0,u.CB)(I);return{id:I,changes:{details:M}}}catch{return V.rejectWithValue("Unknown error.")}}),b=(0,n.VP)(`${E.fu}/addPlugins`),D=(0,n.VP)(`${E.fu}/addLocalPlugins`),C=(0,n.VP)(`${E.fu}/addLocalPlugins`),P=(0,n.VP)(`${E.fu}/addLocalPlugins`),T=(0,n.zD)(`${E.fu}/install`,async({id:I,version:V,installType:M=p.u8.INSTALL},L)=>{const N={isInstalled:!0,installedVersion:V};M===p.u8.UPDATE&&(N.hasUpdate=!1),M===p.u8.DOWNGRADE&&(N.hasUpdate=!0);try{return await(0,u.xZ)(I,V),await F(),M!==p.u8.INSTALL&&(0,g.sk)(I),{id:I,changes:N}}catch(W){return console.error(W),(0,o.NF)(W)?(W.data.id=I,L.rejectWithValue(W.data)):L.rejectWithValue("Unknown error.")}}),O=(0,n.zD)(`${E.fu}/install`,async()=>({})),S=(0,n.zD)(`${E.fu}/uninstall`,async(I,V)=>{try{return await(0,u.cu)(I),await F(),(0,g.sk)(I),{id:I,changes:{isInstalled:!1,installedVersion:void 0,isFullyInstalled:!1}}}catch(M){return console.error(M),V.rejectWithValue("Unknown error.")}}),B=(0,n.zD)(`${E.fu}/loadPluginDashboards`,async(I,V)=>{const N=`api/plugins/${V.getState().dataSources.dataSource.type}/dashboards`;return(0,o.AI)().get(N)}),K=(0,n.VP)(`${E.fu}/panelPluginLoaded`),U=I=>async(V,M)=>{let L=M().plugins.panels[I];return L||(L=await(0,f.TV)(I),M().plugins.panels[I]||V(K(L))),L};function F(){return(0,o.AI)().get("/api/frontend/settings").then(I=>{h.$.panels=I.panels})}},37297:(ne,A,e)=>{"use strict";e.d(A,{O:()=>l});var n=e(76803),a=e(53543),s=e(52205);function l(c={},i){const o=new n.K,h=a.G.list(),f={};if(c.useCustomConfig){const g=new s.bk;c.useCustomConfig(g);for(const u of g.getRegistry().list())if(u.isCustom=!0,u.id="custom."+u.id,r(u,h)){const E=f[u.category[0]]??[];E.push(u),f[u.category[0]]=E}else o.register(u)}for(let g of h){const u=g.id;if(!(c.disableStandardOptions&&c.disableStandardOptions.indexOf(u)>-1)){if(c.standardOptions){const E=c.standardOptions[u]?.hideFromDefaults,v=c.standardOptions[u]?.defaultValue,p=c.standardOptions[u]?.settings;E!==void 0&&(g={...g,hideFromDefaults:E}),v&&(g={...g,defaultValue:v}),p&&(g={...g,settings:g.settings?{...g.settings,...p}:p})}if(o.register(g),g.category&&f[g.category[0]])for(let E of f[g.category[0]])o.register(E)}}for(const g of o.list())if(g.path.indexOf("[")>0)throw new Error(`[${i}] Field config paths do not support arrays: ${g.id}`);return o}function r(c,i){return!!i.find(o=>c.category&&o.category&&c.category[0]===o.category[0])}},37386:(ne,A,e)=>{"use strict";e.d(A,{D:()=>o});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=e(44019),c=e(12594),i=e(72636);const o=s.forwardRef(({label:g,description:u,horizontal:E,invalid:v,loading:p,disabled:m,required:y,error:d,children:x,className:b,validationMessageHorizontalOverflow:D,htmlFor:C,noMargin:P,...T},O)=>{const S=(0,l.of)(f,P),B=C??(0,r.getChildId)(x),K=typeof g=="string"?(0,n.jsx)(i.J,{htmlFor:B,description:u,children:`${g}${y?" *":""}`}):g,U=h({invalid:v,disabled:m,loading:p});return(0,n.jsxs)("div",{className:(0,a.cx)(S.field,E&&S.fieldHorizontal,b),...T,children:[K,(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{ref:O,children:s.cloneElement(x,U)}),v&&d&&!E&&(0,n.jsx)("div",{className:(0,a.cx)(S.fieldValidationWrapper,{[S.validationMessageHorizontalOverflow]:!!D}),children:(0,n.jsx)(c.P,{children:d})})]}),v&&d&&E&&(0,n.jsx)("div",{className:(0,a.cx)(S.fieldValidationWrapper,S.fieldValidationWrapperHorizontal,{[S.validationMessageHorizontalOverflow]:!!D}),children:(0,n.jsx)(c.P,{children:d})})]})});o.displayName="Field";function h(g){for(const u in g)g[u]===void 0&&delete g[u];return g}const f=(g,u)=>({field:(0,a.css)({display:"flex",flexDirection:"column",marginBottom:g.spacing(u?0:2)}),fieldHorizontal:(0,a.css)({flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"}),fieldValidationWrapper:(0,a.css)({marginTop:g.spacing(.5)}),fieldValidationWrapperHorizontal:(0,a.css)({flex:"1 1 100%"}),validationMessageHorizontalOverflow:(0,a.css)({width:0,overflowX:"visible","& > *":{whiteSpace:"nowrap"}})})},37640:(ne,A,e)=>{"use strict";e.d(A,{W3:()=>c,Wy:()=>i,z4:()=>o});var n=e(11594),a=e(25992),s=e(92391),l=e(22914),r=e(95027);async function c(h){const f=await(0,r.x)(h);let g;if(f.type===n.QE.app&&(g=await(0,l.u)(f)),f.type===n.QE.datasource&&(g=await(0,l.c)(f)),f.type===n.QE.panel&&(g=await(0,s.Kk)(f)),f.type===n.QE.renderer&&(g={meta:f}),!g)throw new Error("Unknown Plugin type: "+f.type);return g}function i(h,f){if(!f)return;const g=10;let u={...f},E;function v(m,y){return!y.startsWith(m.url??"")||E&&(E.url?.length??0)>(m.url?.length??0)?m:(E&&(E.active=!1),E={...m,active:!0},E)}function p(m,y=0){if(y>g)return m;if(m.children){const d=m.children.map(x=>p(x,y+1));return{...v(m,h),children:d}}return v(m,h)}return u.children=(u?.children??[]).map(p),{main:u,node:E??u}}const o=(0,a.DW)("features.plugins")},37658:(ne,A,e)=>{"use strict";e.d(A,{L:()=>f});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(63142),c=e(21348),i=e(94018);const o=(0,s.memo)((0,s.forwardRef)(({displayMax:E,tags:v,icon:p,onClick:m,className:y,getAriaLabel:d,getColorIndex:x},b)=>{const D=(0,r.$j)(),C=u(D,!!(E&&E>0)),P=v.length,T=E?v.slice(0,E):v;return(0,n.jsxs)("ul",{className:(0,a.cx)(C.wrapper,y),"aria-label":(0,l.t)("grafana-ui.tags.list-label","Tags"),ref:b,children:[T.map((O,S)=>(0,n.jsx)("li",{className:C.li,children:(0,n.jsx)(i.v,{name:O,icon:p,onClick:m,"aria-label":d?.(O,S),"data-tag-id":S,colorIndex:x?.(O,S)})},O)),E&&E>0&&P-E>0&&(0,n.jsx)("li",{className:C.li,children:(0,n.jsxs)("span",{className:C.moreTagsLabel,children:["+ ",P-E]})})]})}));o.displayName="TagList";const h=({rootProps:E})=>{const v=(0,r.of)(g);return(0,n.jsxs)("div",{className:v.container,...E,children:[(0,n.jsx)(i.v.Skeleton,{}),(0,n.jsx)(i.v.Skeleton,{})]})},f=(0,c.j)(o,h),g=E=>({container:(0,a.css)({display:"flex",gap:E.spacing(1)})}),u=(E,v)=>({wrapper:(0,a.css)({position:"relative",alignItems:v?"center":"unset",display:"flex",flex:"1 1 auto",flexWrap:"wrap",flexShrink:v?0:1,justifyContent:"flex-end",gap:"6px"}),moreTagsLabel:(0,a.css)({color:E.colors.text.secondary,fontSize:E.typography.size.sm}),li:(0,a.css)({listStyle:"none"})})},37666:(ne,A,e)=>{"use strict";e.d(A,{o:()=>a});var n=e(22803);function a(s){return{myTable:(0,n.css)({maxHeight:"204px",overflowY:"auto",marginTop:"11px",marginBottom:"28px",borderRadius:s.shape.radius.default,border:`1px solid ${s.colors.action.hover}`,background:s.colors.background.primary,color:s.colors.text.secondary,fontSize:s.typography.h6.fontSize,width:"100%",thead:{color:"#538ade",fontSize:s.typography.bodySmall.fontSize},"th, td":{padding:"6px 13px",height:s.spacing(4)},"tbody > tr:nth-child(odd)":{background:s.colors.background.secondary}}),noteTextbox:(0,n.css)({marginBottom:s.spacing(4)}),textInfo:(0,n.css)({color:s.colors.text.secondary,fontSize:s.typography.size.sm}),dashboardSearch:(0,n.css)({marginTop:s.spacing(2)}),modal:(0,n.css)({width:"500px"}),modalText:(0,n.css)({fontSize:s.typography.h4.fontSize,color:s.colors.text.primary,marginBottom:s.spacing(4),paddingTop:s.spacing(2)})}}},37672:(ne,A,e)=>{"use strict";e.d(A,{s:()=>g});var n=e(74848),a=e(22803),s=e(46942),l=e.n(s),r=e(51898),c=e(92745),i=e(43173),o=e(34999),h=e(63142);const f=r.Tp.pages.ShareDashboardModal.PublicDashboard,g=({unsupportedDataSources:E})=>{const v=(0,h.of)(u);return(0,n.jsxs)(o.F,{severity:"warning",title:(0,c.t)("public-dashboard.modal-alerts.unsupported-data-source-alert-title","Unsupported data sources"),"data-testid":f.UnsupportedDataSourcesWarningAlert,bottomSpacing:0,children:[(0,n.jsx)("p",{className:v.unsupportedDataSourceDescription,children:i.$.featureToggles.newDashboardSharingComponent?(0,n.jsxs)(c.x6,{i18nKey:"public-dashboard.share-externally.unsupported-data-source-alert-desc",children:["There are data sources in this dashboard that are unsupported for shared dashboards. Panels that use these data sources may not function properly: ",{unsupportedDataSources:E},"."]}):(0,n.jsxs)(c.x6,{i18nKey:"public-dashboard.modal-alerts.unsupported-data-source-alert-desc",children:["There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",{unsupportedDataSources:E},"."]})}),(0,n.jsx)("a",{href:i.$.featureToggles.newDashboardSharingComponent?"https://grafana.com/docs/grafana/next/dashboards/share-dashboards-panels/shared-dashboards/#supported-data-sources":"https://grafana.com/docs/grafana/v11.2/dashboards/dashboard-public/#supported-data-sources",target:"blank",className:l()("text-link",v.unsupportedDataSourceDescription),children:(0,n.jsx)(c.x6,{i18nKey:"public-dashboard.modal-alerts.unsupport-data-source-alert-readmore-link",children:"Read more about supported data sources"})})]})},u=E=>({unsupportedDataSourceDescription:(0,a.css)({color:E.colors.text.secondary,marginBottom:E.spacing(1)})})},37680:(ne,A,e)=>{"use strict";e.d(A,{KR:()=>l,XX:()=>r,ec:()=>s});var n=e(27489);const a="dashboards_autogenerate_clicked";var s=(c=>(c.panelDescription="panel-description",c.panelTitle="panel-title",c.dashboardChanges="dashboard-changes",c.dashboardTitle="dashboard-title",c.dashboardDescription="dashboard-description",c.sqlExpressions="sql-expressions",c.unknown="unknown",c))(s||{}),l=(c=>(c.autoGenerateButton="auto-generate-button",c.erroredRetryButton="errored-retry-button",c.stopGenerationButton="stop-generating-button",c.improveButton="improve-button",c.backHistoryItem="back-history-item",c.forwardHistoryItem="forward-history-item",c.quickFeedback="quick-feedback",c.linkToDocs="link-to-docs",c.customFeedback="custom-feedback",c.applySuggestion="apply-suggestion",c))(l||{});function r(c,i,o){(0,n.rR)(a,{src:c,item:i,...o})}},37864:(ne,A,e)=>{"use strict";e.d(A,{m:()=>a});var n=e(22803);const a=s=>({segment:(0,n.css)({cursor:"pointer",width:"auto"}),queryPlaceholder:(0,n.css)({color:s.colors.text.disabled}),disabled:(0,n.css)({cursor:"not-allowed",opacity:.65,boxShadow:"none"})})},37918:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>m,O9:()=>f,Ub:()=>v,X1:()=>g,ig:()=>h,p0:()=>u,xS:()=>o});var n=e(65307),a=e(92745),s=e(59857),l=e(6262),r=e(7817);const c={initPhase:l._g.NotStarted,getModel:()=>null,initError:null,initialDatasource:void 0},i=(0,n.Z0)({name:"dashboard",initialState:c,reducers:{dashboardInitFetching:y=>{y.initPhase=l._g.Fetching},dashboardInitServices:y=>{y.initPhase=l._g.Services},dashboardInitCompleted:(y,d)=>{y.getModel=()=>d.payload,y.initPhase=l._g.Completed},dashboardInitFailed:(y,d)=>{y.initPhase=l._g.Failed,y.initError=d.payload,y.getModel=()=>new r.G({...s.Ye,title:(0,a.t)("dashboard.dashboard-slice.title.dashboard-init-failed","Dashboard init failed")},{canSave:!1,canEdit:!1})},cleanUpDashboard:y=>{y.initPhase=l._g.NotStarted,y.initError=null,y.getModel=()=>null},addPanel:(y,d)=>{},setInitialDatasource:(y,d)=>{y.initialDatasource=d.payload}}}),{dashboardInitFetching:o,dashboardInitFailed:h,dashboardInitCompleted:f,dashboardInitServices:g,cleanUpDashboard:u,addPanel:E,setInitialDatasource:v}=i.actions,m={dashboard:i.reducer}},37946:(ne,A,e)=>{"use strict";e.d(A,{I:()=>n,s:()=>a});const n={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"},a=["grafana-lokiexplore-app","grafana-exploretraces-app","grafana-metricsdrilldown-app","grafana-pyroscope-app","grafana-monitoring-app","grafana-troubleshooting-app","grafana-assistant-app"]},38036:(ne,A,e)=>{"use strict";e.d(A,{c:()=>s,u:()=>l});var n=e(92138),a=e(5556);const s={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function l(o){const{onClickFn:h,replaceVariables:f,link:g,scopedVars:u,range:E,field:v,internalLink:p}=o,m=typeof g.internal?.query=="function"?g.internal.query({replaceVariables:f,scopedVars:u}):p.query,y=c(m,u,f),d=c(g.internal?.panelsState,u,f),x=c(g.meta?.correlationData,u,f),b=g.title?g.title:p.datasourceName;return{title:f(b,u),href:r(p.datasourceUid,y,E,d),onClick:h?D=>{D.preventDefault&&D.preventDefault(),h({datasourceUid:p.datasourceUid,queries:[y],panelsState:d,correlationHelperData:x,range:E})}:void 0,target:g?.targetBlank?"_blank":"_self",origin:v}}function r(o,h,f,g){return n.I.assureBaseUrl(`/explore?left=${encodeURIComponent((0,a.Pp)({...f?.raw?{range:(0,a.sQ)(f.raw)}:{},datasource:o,queries:[h],panelsState:g}))}`)}function c(o,h,f){if(!o)return o;if(typeof o=="string")return f(o,h);const g=JSON.parse(JSON.stringify(o));return i(g,h,f)}function i(o,h,f){for(const g of Object.keys(o))typeof o[g]=="string"?o[g]=f(o[g],h):typeof o[g]=="object"&&o[g]!==null&&(o[g]=i(o[g],h,f));return o}},38055:(ne,A,e)=>{"use strict";e.d(A,{B:()=>f});var n=e(74848),a=e(22803),s=e(46942),l=e.n(s),r=e(96540),c=e(43533),i=e(2381),o=e(41654),h=e(63142);const f=({children:u,header:E,content:v,footer:p,arrow:m,showAfter:y=300,wrapperClassName:d,disabled:x=!1,showOn:b="hover",disableBlur:D=!1,isOpen:C,onClose:P,onToggle:T,...O})=>{const S=(0,r.useRef)(null),B=(0,h.of)(g);if(x)return u;const K=b==="hover",U=b==="click",F=(0,n.jsxs)(o.B,{direction:"column",gap:0,role:"tooltip",children:[E&&(0,n.jsx)("div",{className:B.card.header,children:E}),(0,n.jsx)("div",{className:B.card.body,children:v}),p&&(0,n.jsx)("div",{className:B.card.footer,children:p})]});return(0,n.jsx)(c.I,{content:F,hideAfter:100,children:(I,V,M)=>{const L=C!==void 0,N=L?C:M.show,W=()=>{P?P():V()},R=()=>{L||I()},G={onClick:T||(L?W:I)},w={onMouseLeave:W,onMouseEnter:R},_={onBlur:W,onFocus:R};return(0,n.jsxs)(n.Fragment,{children:[S.current&&(0,n.jsx)(i.A,{...M,show:N,...O,wrapperClassName:l()(B.popover,d),referenceElement:S.current,renderArrow:m,...D?{}:_,...K?w:{},hidePopper:W}),(0,r.cloneElement)(u,{ref:S,onFocus:R,onBlur:D?void 0:W,tabIndex:0,...K?w:{},...U&&(T||!L)?G:{}})]})}})},g=u=>({popover:(0,a.css)({borderRadius:u.shape.radius.default,boxShadow:u.shadows.z3,background:u.colors.background.primary,border:`1px solid ${u.colors.border.weak}`}),card:{body:(0,a.css)({padding:u.spacing(1)}),header:(0,a.css)({padding:u.spacing(1),background:u.colors.background.secondary,borderBottom:`solid 1px ${u.colors.border.medium}`}),footer:(0,a.css)({padding:u.spacing(.5,1),background:u.colors.background.secondary,borderTop:`solid 1px ${u.colors.border.medium}`})}})},38076:(ne,A,e)=>{"use strict";e.d(A,{a:()=>o});var n=e(74848),a=e(22803),s=e(49785),l=e(45861),r=e(99887),c=e(63142),i=e(29609);const o=({isCondition:f,onSetCondition:g,refId:u})=>{const E=(0,c.of)(h),{watch:v}=(0,s.xW)(),p=v("type"),m=p?(0,i.pq)(p):!1,y=m?"Recording rule output":"Alert condition",d=u?`Set "${u}" as alert condition`:"Set as alert condition",x=m?"Set as recording rule output":d;return f?(0,n.jsx)(r.E,{color:"green",icon:"check",text:y},"condition"):(0,n.jsx)("button",{type:"button",className:E.actionLink,onClick:()=>g&&g(),children:x},"make-condition")},h=f=>{const g=(0,l.my)(f);return{actionLink:(0,a.css)(g,{color:f.colors.text.link,cursor:"pointer","&:hover":{textDecoration:"underline"}})}}},38206:(ne,A,e)=>{"use strict";e.d(A,{I_:()=>u,L1:()=>c,TU:()=>f,ci:()=>o,fc:()=>h,ve:()=>g});var n=e(65307),a=e(43173),s=e(18832);const l=a.$.bootData?.navTree??[];function r(E){return E.map(v=>{const p=v.children&&r(v.children);return{...v,children:p,text:(0,s.C)(v.id)??v.text,subTitle:(0,s.o)(v.id)??v.subTitle,emptyMessage:(0,s.C)(v.emptyMessageId)}})}const c="starred/",i=(0,n.Z0)({name:"navBarTree",initialState:()=>r(a.$.bootData?.navTree??[]),reducers:{setStarred:(E,v)=>{const p=E.find(b=>b.id==="starred"),{id:m,title:y,url:d,isStarred:x}=v.payload;if(p)if(x){p.children||(p.children=[]);const b={id:c+m,text:y,url:d};p.children.push(b),p.children.sort((D,C)=>D.text.localeCompare(C.text))}else{const b=p.children?.findIndex(D=>D.id===c+m)??-1;b>-1&&p?.children?.splice(b,1)}},setBookmark:(E,v)=>{if(!a.$.featureToggles.pinNavItems)return;const p=E.find(d=>d.id==="bookmarks"),{item:m,isSaved:y}=v.payload;if(p)if(y){p.children||=[];const d={...m,children:[],sortWeight:0,emptyMessageId:"",emptyMessage:"",parentItem:{id:p.id,text:p.text}};p.children.push(d)}else p.children=p.children?.filter(d=>d.url!==m.url)??[]},updateDashboardName:(E,v)=>{const{id:p,title:m,url:y}=v.payload,d=E.find(x=>x.id==="starred");if(d){const x=d.children?.find(b=>b.id===p);x&&(x.text=m,x.url=y,d.children?.sort((b,D)=>b.text.localeCompare(D.text)))}},removePluginFromNavTree:(E,v)=>{const p="plugin-page-"+v.payload.pluginID,m=E.findIndex(y=>y.id===p);m>-1&&E.splice(m,1)}}}),{setStarred:o,removePluginFromNavTree:h,updateDashboardName:f,setBookmark:g}=i.actions,u=i.reducer},38221:(ne,A,e)=>{"use strict";e.d(A,{H:()=>h,x:()=>f});var n=e(14644),a=e(17752),s=e(99703),l=e(99598),r=e(74276),c=e(96120),i=e(77839);let o;function h(){return o||(o=(0,n.combineReducers)({editor:a.wf,variables:i.Y,optionsPicker:l.ho,transaction:r.Dd,inspect:s.t4})),o}function f(){return{editor:a.nS,variables:c.j,optionsPicker:l.$z,transaction:r.i3,inspect:s.WT}}},38242:(ne,A,e)=>{"use strict";e.d(A,{Dw:()=>c,Rx:()=>s,_M:()=>i,_W:()=>r,d$:()=>a});const n={statistics:[]};var a=(h=>(h[h.Insights=1]="Insights",h[h.Search=0]="Search",h))(a||{}),s=(h=>(h[h.Builder=0]="Builder",h[h.Code=1]="Code",h))(s||{});const l={parameters:[]};var r=(h=>(h.And="and",h.Function="function",h.FunctionParameter="functionParameter",h.GroupBy="groupBy",h.Operator="operator",h.Or="or",h.Property="property",h))(r||{}),c=(h=>(h.String="string",h))(c||{}),i=(h=>(h.CWLI="CWLI",h.PPL="PPL",h.SQL="SQL",h))(i||{});const o={logGroupNames:[],logGroups:[],statsGroups:[]}},38353:(ne,A,e)=>{"use strict";e.d(A,{LZ:()=>l,aX:()=>c,xt:()=>i});var n=e(43173),a=e(68143),s=e(36580);function l(o){return o instanceof s.iy&&"hasBackendMigration"in o&&"shouldMigrate"in o}async function r(o){if(!(n.$.featureToggles.grafanaAPIServerWithExperimentalAPIs||n.$.featureToggles.datasourceAPIServers))return console.warn("migrateQuery is only available with the experimental API server"),o;const u=`/apis/${`${o[0].datasource?.type?.replace(/^(grafana-)?(.*?)(-datasource)?$/,"$2")}.datasource.grafana.app`}/v0alpha1/namespaces/${n.$.namespace}/queryconvert`,E={queries:o.map(p=>({...p,JSON:p}))};return(await(0,a.AI)().post(u,E)).queries.map(p=>p.JSON)}async function c(o,h){return!o.hasBackendMigration||!o.shouldMigrate(h)?h:(await r([h]))[0]}async function i(o,h){if(!o.hasBackendMigration||!h.targets.some(g=>o.shouldMigrate(g)))return h;const f=await r(h.targets);return{...h,targets:f}}},38388:(ne,A,e)=>{"use strict";e.d(A,{Oq:()=>n,bQ:()=>c,bs:()=>s});function n({searchWords:i,textToHighlight:o}){const h=[];for(const f of i)typeof f=="string"&&h.push(...s(o,f));return h}const a=i=>i.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function s(i,o){if(!i||!o)return[];const h=[],{cleaned:f,flags:g}=c(a(o));let u;try{u=new RegExp(`(?:${f})`,g)}catch{return h}return i.replace(u,(E,...v)=>{if(E){const p=v[v.length-2];h.push({text:E,start:p,length:E.length,end:p+E.length})}return""}),h}const l="-",r=/\(\?([ims-]+)\)/g;function c(i){const o=new Set(["g"]);return{cleaned:i.replace(r,(f,g)=>{const u=g.startsWith(l);for(let E=0;E<g.length;++E){const v=g.charAt(E);u||g.charAt(E-1)===l?o.delete(v):v!==l&&o.add(v)}return""}),flags:Array.from(o).join("")}}},38610:(ne,A,e)=>{"use strict";e.d(A,{O:()=>K});var n=e(74848),a=e(22803),s=e(2543),l=e(96540),r=e(92745),c=e(63142),i=e(97095),o=e(18027),h=e(18857),f=e(63527),g=e(21285),u=e(41654),E=e(2954),v=e(4651),p=e(81988),m=e(66258),y=e(65307);const d=(0,y.VP)("thresold/updateRefId"),x=(0,y.VP)("thresold/updateThresholdType"),b=(0,y.VP)("thresold/updateThresholdParams"),D=(0,y.VP)("thresold/updateHysteresis"),C=(0,y.VP)("thresold/updateUnloadParams"),P=(0,y.vy)({type:v.Tz.threshold,refId:"",conditions:[]},I=>{I.addCase(d,(V,M)=>{V.expression=M.payload}),I.addCase(x,(V,M)=>{const L=M.payload.evalFunction,N=M.payload.onError;if(V.conditions[0].evaluator.type=L,!!V.conditions[0].unloadEvaluator){const R=T(V.conditions[0].evaluator.type);N&&N(void 0),V.conditions[0].evaluator.type=L;const G={type:R,params:V.conditions[0].evaluator?.params??[0,0]};V.conditions[0].unloadEvaluator=G}}),I.addCase(b,(V,M)=>{const{param:L,index:N}=M.payload;V.conditions[0].evaluator.params[N]=L}),I.addCase(D,(V,M)=>{const{hysteresisChecked:L,onError:N}=M.payload;L?V.conditions[0].unloadEvaluator={type:T(V.conditions[0].evaluator.type),params:V.conditions[0].evaluator?.params??[0,0]}:(V.conditions[0].unloadEvaluator=void 0,N&&N(void 0))}),I.addCase(C,(V,M)=>{const{param:L,index:N,onError:W}=M.payload;V.conditions[0].unloadEvaluator?V.conditions[0].unloadEvaluator.params[N]=L:V.conditions[0].unloadEvaluator={type:T(V.conditions[0].evaluator.type),params:V.conditions[0].evaluator?.params??[0,0]};const R=O(V.conditions[0]),{errorMsg:G,errorMsgFrom:w,errorMsgTo:_}=R??{};W&&W(G||w||_)})});function T(I){return I===E.p.IsAbove?E.p.IsBelow:I===E.p.IsBelow?E.p.IsAbove:I===E.p.IsEqual?E.p.IsNotEqual:I===E.p.IsNotEqual?E.p.IsEqual:I===E.p.IsGreaterThanEqual?E.p.IsLessThanEqual:I===E.p.IsLessThanEqual?E.p.IsGreaterThanEqual:I===E.p.IsWithinRange?E.p.IsOutsideRange:I===E.p.IsOutsideRange?E.p.IsWithinRange:I===E.p.IsWithinRangeIncluded?E.p.IsOutsideRangeIncluded:I===E.p.IsOutsideRangeIncluded?E.p.IsWithinRangeIncluded:E.p.IsBelow}function O(I){const{unloadEvaluator:V,evaluator:M}=I;if(!M)return;if(V?.params[0]===void 0||Number.isNaN(V?.params[0]))return{errorMsg:"This value cannot be empty"};const{type:L,params:N}=M,{params:W}=V;if(L===E.p.IsWithinRange||L===E.p.IsOutsideRange||L===E.p.IsWithinRangeIncluded||L===E.p.IsOutsideRangeIncluded){if(W[0]===void 0||Number.isNaN(W[0]))return{errorMsgFrom:"This value cannot be empty"};if(W[1]===void 0||Number.isNaN(W[1]))return{errorMsgTo:"This value cannot be empty"}}const[R,G]=V.params,[w,_]=N;switch(L){case E.p.IsAbove:if(R>w)return{errorMsg:`Enter a number less than or equal to ${w}`};break;case E.p.IsBelow:if(R<w)return{errorMsg:`Enter a number more than or equal to ${w}`};break;case E.p.IsEqual:if(R===w)return{errorMsg:`Enter a different number than ${w}`};break;case E.p.IsNotEqual:if(R!==w)return{errorMsg:`Enter the same number as ${w}`};break;case E.p.IsGreaterThanEqual:if(R>=w)return{errorMsg:`Enter a number less than ${w}`};break;case E.p.IsLessThanEqual:if(R<=w)return{errorMsg:`Enter a number more than ${w}`};break;case E.p.IsOutsideRange:if(R<w)return{errorMsgFrom:`Enter a number more than or equal to ${w}`};if(G>_)return{errorMsgTo:`Enter a number less than or equal to ${_}`};break;case E.p.IsWithinRange:if(R>w)return{errorMsgFrom:`Enter a number less than or equal to ${w}`};if(G<_)return{errorMsgTo:`Enter a number be more than or equal to ${_}`};break;case E.p.IsOutsideRangeIncluded:if(R<=w)return{errorMsgFrom:`Enter a number more than ${w}`};if(G>=_)return{errorMsgTo:`Enter a number less than ${_}`};break;case E.p.IsWithinRangeIncluded:if(R>=w)return{errorMsgFrom:`Enter a number less than ${w}`};if(G<=_)return{errorMsgTo:`Enter a number be more than ${_}`};break;default:throw new Error(`evaluator function type ${L} not supported.`)}}const S=E.p.IsAbove,B={type:"query",evaluator:{type:S,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},K=({labelWidth:I,onChange:V,refIds:M,query:L,onError:N,useHysteresis:W=!1})=>{const R=(0,c.of)(F),G={...L,conditions:L.conditions?.length?L.conditions:[B]},[w,_]=(0,l.useReducer)(P,G),Q=w.conditions[0],ae=v.zd.find(te=>te.value===w.conditions[0].evaluator?.type),q=te=>{_(d(te.value))};(0,l.useEffect)(()=>{w&&V(w)},[w]);const k=te=>{_(x({evalFunction:te.value??S,onError:N}))},ee=(te,se)=>{_(b({param:parseFloat(te.currentTarget.value),index:se}))},j=Q.evaluator.type===E.p.IsWithinRange||Q.evaluator.type===E.p.IsOutsideRange||Q.evaluator.type===E.p.IsOutsideRangeIncluded||Q.evaluator.type===E.p.IsWithinRangeIncluded,J=(0,s.uniqueId)("threshold-");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.C,{children:(0,n.jsx)(o.I,{label:(0,r.t)("expressions.threshold.label-input","Input"),labelWidth:I,htmlFor:J,children:(0,n.jsx)(h.l6,{inputId:J,onChange:q,options:M,value:L.expression,width:20})})}),(0,n.jsxs)(i.C,{children:[(0,n.jsx)(p.E,{onChange:k,value:ae}),j?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.p,{type:"number",width:10,onChange:te=>ee(te,0),defaultValue:Q.evaluator.params[0]}),(0,n.jsx)(m.Y,{}),(0,n.jsx)(f.p,{type:"number",width:10,onChange:te=>ee(te,1),defaultValue:Q.evaluator.params[1]})]}):(0,n.jsx)(f.p,{type:"number",width:10,onChange:te=>ee(te,0),defaultValue:Q.evaluator.params[0]||0})]}),W&&(0,n.jsx)(Z,{isRange:j,onError:N})]});function Z({isRange:te,onError:se}){const ie=!!Q.unloadEvaluator,ce=X=>{_(D({hysteresisChecked:X.currentTarget.checked,onError:se})),re.current=!0},re=l.useRef(!0),ue=()=>{re.current=!1};return(0,n.jsxs)("div",{className:R.hysteresis,children:[(0,n.jsx)("div",{onMouseDown:ue,children:(0,n.jsx)(g.K,{showLabel:!0,label:(0,r.t)("alerting.rule-form.threshold.recovery.title","Custom recovery threshold"),value:ie,onChange:ce,className:R.switch})}),ie&&(0,n.jsx)(U,{isRange:te,condition:Q,onError:se,dispatch:_,allowOnblur:re})]})}};function U({isRange:I,condition:V,onError:M,dispatch:L,allowOnblur:N}){const W=(0,c.of)(F),R=(k,ee)=>{const j=parseFloat(k.currentTarget.value);L(C({param:j,index:ee,onError:M}))},G=O(V),{errorMsg:w,errorMsgFrom:_,errorMsgTo:Q}=G??{};if(I)return(0,n.jsx)(ae,{allowOnblur:N});return(0,n.jsx)(q,{allowOnblur:N});function ae({allowOnblur:k}){switch(V.evaluator.type){case E.p.IsWithinRange:if(V.evaluator.type===E.p.IsWithinRange)return(0,n.jsx)(i.C,{className:W.hysteresis,children:(0,n.jsx)(o.I,{label:(0,r.t)("alerting.rule-form.threshold.recovery.stop-alerting-outside-range","Stop alerting (or pending state) when outside range"),labelWidth:"auto",children:(0,n.jsxs)(u.B,{direction:"row",gap:0,children:[(0,n.jsx)("div",{className:W.range,children:(0,n.jsx)(o.I,{invalid:!!_,error:_,className:W.noMargin,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>k.current&&R(ee,0),defaultValue:V.unloadEvaluator?.params[0]})})}),(0,n.jsx)(m.Y,{}),(0,n.jsx)("div",{className:W.range,children:(0,n.jsx)(o.I,{invalid:!!Q,error:Q,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>k.current&&R(ee,1),defaultValue:V.unloadEvaluator?.params[1]})})})]})})});case E.p.IsOutsideRange:return(0,n.jsx)(i.C,{className:W.hysteresis,children:(0,n.jsx)(o.I,{label:(0,r.t)("alerting.rule-form.threshold.recovery.stop-alerting-inside-range","Stop alerting (or pending state) when inside range"),labelWidth:"auto",children:(0,n.jsxs)(u.B,{direction:"row",gap:0,children:[(0,n.jsx)("div",{className:W.range,children:(0,n.jsx)(o.I,{invalid:!!_,error:_,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>k.current&&R(ee,0),defaultValue:V.unloadEvaluator?.params[0]})})}),(0,n.jsx)(m.Y,{}),(0,n.jsx)("div",{className:W.range,children:(0,n.jsx)(o.I,{invalid:!!Q,error:Q,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>k.current&&R(ee,1),defaultValue:V.unloadEvaluator?.params[1]})})})]})})});case E.p.IsOutsideRangeIncluded:return(0,n.jsx)(i.C,{className:W.hysteresis,children:(0,n.jsx)(o.I,{label:(0,r.t)("alerting.rule-form.threshold.recovery.stop-alerting-inside-range","Stop alerting (or pending state) when inside range"),labelWidth:"auto",children:(0,n.jsxs)(u.B,{direction:"row",gap:0,children:[(0,n.jsx)("div",{className:W.range,children:(0,n.jsx)(o.I,{invalid:!!_,error:_,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>k.current&&R(ee,0),defaultValue:V.unloadEvaluator?.params[0]})})}),(0,n.jsx)(m.Y,{}),(0,n.jsx)("div",{className:W.range,children:(0,n.jsx)(o.I,{invalid:!!Q,error:Q,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>k.current&&R(ee,1),defaultValue:V.unloadEvaluator?.params[1]})})})]})})});case E.p.IsWithinRangeIncluded:return(0,n.jsx)(i.C,{className:W.hysteresis,children:(0,n.jsx)(o.I,{label:(0,r.t)("alerting.rule-form.threshold.recovery.stop-alerting-outside-range","Stop alerting (or pending state) when outside range"),labelWidth:"auto",children:(0,n.jsxs)(u.B,{direction:"row",gap:0,children:[(0,n.jsx)("div",{className:W.range,children:(0,n.jsx)(o.I,{invalid:!!_,error:_,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>k.current&&R(ee,0),defaultValue:V.unloadEvaluator?.params[0]})})}),(0,n.jsx)(m.Y,{}),(0,n.jsx)("div",{className:W.range,children:(0,n.jsx)(o.I,{invalid:!!Q,error:Q,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>k.current&&R(ee,1),defaultValue:V.unloadEvaluator?.params[1]})})})]})})});default:return null}}function q({allowOnblur:k}){switch(V.evaluator.type){case E.p.IsAbove:return(0,n.jsx)(i.C,{className:W.hysteresis,children:(0,n.jsx)(o.I,{label:(0,r.t)("alerting.rule-form.threshold.recovery.stop-alerting-bellow","Stop alerting (or pending state) when below"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>{k.current&&R(ee,0)},defaultValue:V.unloadEvaluator?.params[0]})})});case E.p.IsBelow:return(0,n.jsx)(i.C,{className:W.hysteresis,children:(0,n.jsx)(o.I,{label:(0,r.t)("alerting.rule-form.threshold.recovery.stop-alerting-above","Stop alerting (or pending state) when above"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>{k.current&&R(ee,0)},defaultValue:V.unloadEvaluator?.params[0]})})});case E.p.IsEqual:return(0,n.jsx)(i.C,{className:W.hysteresis,children:(0,n.jsx)(o.I,{label:(0,r.t)("alerting.rule-form.threshold.recovery.stop-alerting-equal","Stop alerting (or pending state) when equal to"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>{k.current&&R(ee,0)},defaultValue:V.unloadEvaluator?.params[0]})})});case E.p.IsNotEqual:return(0,n.jsx)(i.C,{className:W.hysteresis,children:(0,n.jsx)(o.I,{label:(0,r.t)("alerting.rule-form.threshold.recovery.stop-alerting-not-equal","Stop alerting (or pending state) when not equal to"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>{k.current&&R(ee,0)},defaultValue:V.unloadEvaluator?.params[0]})})});case E.p.IsGreaterThanEqual:return(0,n.jsx)(i.C,{className:W.hysteresis,children:(0,n.jsx)(o.I,{label:(0,r.t)("alerting.rule-form.threshold.recovery.stop-alerting-less","Stop alerting (or pending state) when less than"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>{k.current&&R(ee,0)},defaultValue:V.unloadEvaluator?.params[0]})})});case E.p.IsLessThanEqual:return(0,n.jsx)(i.C,{className:W.hysteresis,children:(0,n.jsx)(o.I,{label:(0,r.t)("alerting.rule-form.threshold.recovery.stop-alerting-more","Stop alerting (or pending state) when more than"),labelWidth:"auto",invalid:!!w,error:w,children:(0,n.jsx)(f.p,{type:"number",width:10,onBlur:ee=>{k.current&&R(ee,0)},defaultValue:V.unloadEvaluator?.params[0]})})});default:return null}}}const F=I=>({range:(0,a.css)({width:"min-content"}),hysteresis:(0,a.css)({marginTop:I.spacing(2)}),switch:(0,a.css)({paddingLeft:I.spacing(1)}),noMargin:(0,a.css)({margin:0})})},38619:(ne,A,e)=>{"use strict";e.d(A,{Cz:()=>c,DG:()=>h,Qp:()=>g,Z7:()=>o,ZF:()=>s,aj:()=>f,ew:()=>r,jQ:()=>i,o4:()=>l,os:()=>a,qD:()=>n});var n=(u=>(u.DataSource="ds",u.Plugin="plugin",u.Grafana="grafana",u.Stream="stream",u.Watch="watch",u))(n||{}),a=(u=>(u.DataStream="stream",u.DataFrame="frame",u.JSON="json",u))(a||{}),s=(u=>(u.Pending="pending",u.Connected="connected",u.Connecting="connecting",u.Disconnected="disconnected",u.Shutdown="shutdown",u.Invalid="invalid",u))(s||{}),l=(u=>(u.Status="status",u.Join="join",u.Leave="leave",u.Message="message",u))(l||{});function r(u){return u.type==="status"}function c(u){return u.type==="join"}function i(u){return u.type==="leave"}function o(u){return u.type==="message"}function h(u){if(u?.length){let E=u.trim().split("/");if(E.length>=3)return{scope:E[0],namespace:E[1],path:E.slice(2).join("/")}}}function f(u){return!!(u?.path&&u.namespace&&u.scope)}function g(u){if(!u.scope)return"";let E=u.scope;return!u.namespace||(E+="/"+u.namespace,!u.path)?E:E+"/"+u.path}},38669:(ne,A,e)=>{"use strict";e.d(A,{a:()=>o});var n=e(74848),a=e(22803),s=e(92745),l=e(76319),r=e(35427),c=e(63142),i=e(13409);const o=({value:f,settings:g,onChange:u,details:E,id:v})=>{const p=(0,c.$j)(),m=(0,c.of)(h);return(0,n.jsx)(r.sk,{color:f??"",onChange:u,enableNamedColors:g?.enableNamedColors!==!1,children:({ref:y,showColorPicker:d,hideColorPicker:x})=>(0,n.jsxs)("div",{className:m.spot,children:[(0,n.jsx)("div",{className:m.colorPicker,children:(0,n.jsx)(i.q,{ref:y,id:v,onClick:d,onMouseLeave:x,color:f?p.visualization.getColorByName(f):p.components.input.borderColor})}),E&&(0,n.jsxs)(n.Fragment,{children:[f?(0,n.jsx)("span",{className:m.colorText,onClick:d,children:f}):(0,n.jsx)("span",{className:m.placeholderText,onClick:d,children:g?.placeholder??"Select color"}),g?.isClearable&&f&&(0,n.jsx)(l.K,{name:"times",onClick:()=>u(void 0),tooltip:(0,s.t)("options-ui.color.clear-tooltip","Clear settings")})]})]})})},h=f=>({spot:(0,a.css)({cursor:"pointer",color:f.colors.text.primary,background:f.components.input.background,padding:"3px",height:f.v1.spacing.formInputHeight,border:`1px solid ${f.components.input.borderColor}`,display:"flex",flexDirection:"row",alignItems:"center",alignContent:"flex-end","&:hover":{border:`1px solid ${f.components.input.borderHover}`}}),colorPicker:(0,a.css)({padding:`0 ${f.spacing(1)}`}),colorText:(0,a.css)({flexGrow:2}),placeholderText:(0,a.css)({flexGrow:2,color:f.colors.text.secondary})})},38681:(ne,A,e)=>{"use strict";e.d(A,{y:()=>i});var n=e(74848),a=e(96540),s=e(2863),l=e(22914),r=e(67933),c=e(56404);async function i(h,f=l.c){if((0,r.zs)(h))return h.variables.editor;if((0,r.X3)(h)){const g=await f(h.meta);if(!g.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return g.components.QueryEditor??null}return(0,r.Hf)(h)?o:(0,r.d5)(h)?(await f(h.meta)).components.VariableQueryEditor??c.z:null}function o({datasource:h,query:f,onChange:g}){const u=(0,a.useCallback)(E=>{g({refId:"StandardVariableQuery",query:E})},[g]);return(0,n.jsx)(c.z,{query:f.query,onChange:u,datasource:h,templateSrv:(0,s.w)()})}},38748:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>o,Tp:()=>l});var n=e(65307),a=e(61666);const s=(0,n.pU)({selectId:h=>h.code}),l=s.getSelectors(),r=s.getInitialState({status:"idle"}),o={invites:(0,n.Z0)({name:"invites",initialState:r,reducers:{},extraReducers:h=>{h.addCase(a.G7.pending,f=>{f.status="loading"}).addCase(a.G7.fulfilled,(f,{payload:g})=>{s.setAll(f,g),f.status="succeeded"}).addCase(a.G7.rejected,f=>{f.status="failed"}).addCase(a.eb.fulfilled,(f,{payload:g})=>{s.removeOne(f,g),f.status="succeeded"})}}).reducer}},38809:(ne,A,e)=>{"use strict";e.d(A,{AM:()=>s,Ch:()=>l,FM:()=>g,N7:()=>h,OU:()=>o,X4:()=>u,cz:()=>r,hL:()=>i,hS:()=>n,lG:()=>f,m0:()=>a,xT:()=>c});const n=E=>E,a=(E,v,p)=>{if(E!=null)return parseFloat(String(E))},s=(E,v,p)=>(delete v.field?.state?.displayName,o(E,v,p)),l=(E,v,p)=>E,r=(E,v,p)=>E,c=(E,v,p)=>E,i=(E,v,p)=>E,o=(E,v,p)=>E==null?E:p&&p.expandTemplateVars&&v.replaceVariables&&typeof E=="string"?v.replaceVariables(E,v.field.state.scopedVars):`${E}`,h=(E,v,p)=>E,f=(E,v,p)=>E,g=(E,v,p)=>E;var u=(E=>(E.IncludeAll="all",E.ExcludeBaseNames="exclude",E.OnlyBaseNames="only",E))(u||{})},38866:(ne,A,e)=>{"use strict";e.d(A,{$h:()=>g,bE:()=>i});var n=e(41119),a=e(77154),s=e(95004),l=e(28105),r=e(97534);const c={severity:"info",text:"Cached response"};function i(u,E){const v={data:[],state:l.Gu.Done},p="traceId"in u?u.traceId:void 0;p!=null&&(v.traceIds=[p]);const m=u;if(m.data?.results){const y=m.data.results,d=E?.length?E.map(D=>D.refId):Object.keys(y),x=o(m),b=[];for(const D of d){const C=y[D];C&&(C.refId=D,b.push(C))}for(const D of b){if(D.error){const C={refId:D.refId,message:D.error,status:D.status};p!=null&&(C.traceId=p),v.error||(v.error={...C}),v.errors?v.errors.push({...C}):v.errors=[{...C}],v.state=l.Gu.Error}if(D.frames?.length){for(let C of D.frames){x&&(C=h(C));const P=(0,a.or)(C);P.refId||(P.refId=D.refId),v.data.push(P)}continue}if(D.series?.length)for(const C of D.series)C.refId||(C.refId=D.refId),v.data.push((0,n.Vc)(C));if(D.tables?.length)for(const C of D.tables)C.refId||(C.refId=D.refId),v.data.push((0,n.Vc)(C))}}return m.status&&m.status!==200&&(v.state!==l.Gu.Error&&(v.state=l.Gu.Error),v.error||(v.error=(0,r.u)(u))),v}function o(u){const E=u?.headers;return!E||!E.get?!1:E.get("X-Cache")==="HIT"}function h(u){return{...u,schema:{...u.schema,fields:[...u.schema?.fields??[]],meta:{...u.schema?.meta,notices:[...u.schema?.meta?.notices??[],c],isCachedResponse:!0}}}}function f(u){const E=i(u);if(E.error?.data?.message)return{status:"error",message:E.error.data.message,details:E.error?.data?.error?{message:E.error.data.error}:void 0};if(E.error?.refId&&E.error?.message)return{status:"error",message:E.error.message};throw u}function g(u){if(!u||!u.length)return[];const E=[];let v=u.fields.find(p=>p.type===s.PU.string);if(v||(v=u.fields.find(p=>p.type!==s.PU.time)),v)for(let p=0;p<v.values.length;p++)E.push({text:""+v.values[p]});return E}},38919:(ne,A,e)=>{"use strict";e.d(A,{NV:()=>i,nQ:()=>r,v2:()=>c,wV:()=>l});var n=e(2543),a=e.n(n),s=e(95004),l=(o=>(o.Auto="auto",o.Vertical="vertical",o.Horizontal="horizontal",o))(l||{}),r=(o=>(o[o.Best=100]="Best",o[o.Good=70]="Good",o[o.OK=50]="OK",o))(r||{});class c{constructor(h,f){this.list=[],this.data=h,this.panel=f,this.dataSummary=this.computeDataSummary()}getListAppender(h){return new i(this.list,h)}computeDataSummary(){const h=this.data?.series||[];let f=0,g=0,u=0,E=0,v=0,p=0,m;for(const y of h){E+=y.length,y.meta?.preferredVisualisationType&&(m=y.meta.preferredVisualisationType);for(const d of y.fields)switch(p++,d.type){case s.PU.number:f+=1;break;case s.PU.time:g+=1;break;case s.PU.string:u+=1;break}y.length>v&&(v=y.length)}return{numberFieldCount:f,timeFieldCount:g,stringFieldCount:u,rowCountTotal:E,rowCountMax:v,fieldCount:p,preferredVisualisationType:m,frameCount:h.length,hasData:E>0,hasTimeField:g>0,hasNumberField:f>0,hasStringField:u>0}}getList(){return this.list}}class i{constructor(h,f){this.list=h,this.defaults=f}append(h){this.list.push((0,n.defaultsDeep)(h,this.defaults))}}},39050:(ne,A,e)=>{"use strict";e.d(A,{B:()=>a});var n=e(76732);const a=(s,l)=>{let r=1;return l?.structureRev&&l.series&&(r=l.structureRev,(0,n.J3)(s.series,l.series,n.bW)||r++),s.structureRev=r,s}},39064:(ne,A,e)=>{"use strict";e.d(A,{S:()=>p});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(63142),c=e(31210),i=e(45861),o=e(5753),h=e(30703),f=e(41654);const g="add-annotation-button";function u(y,d,x){return(D,C)=>{if(D.length===0)return;const P=D.find(T=>T.oneClick===!0);return P!=null?(0,n.jsx)("div",{className:C.footerSection,children:(0,n.jsx)(f.B,{direction:"column",justifyContent:"flex-start",gap:.5,children:(0,n.jsxs)("span",{className:C.oneClickWrapper,children:[(0,n.jsx)(h.I,{name:"info-circle",size:"lg",className:C.infoIcon}),y(P.title)]})})}):(0,n.jsx)("div",{className:C.footerSection,children:(0,n.jsx)(f.B,{direction:"column",justifyContent:"flex-start",gap:x,children:D.map((T,O)=>d(T,O,C))})})}}const E=u(y=>(0,n.jsxs)(l.x6,{i18nKey:"grafana-ui.viz-tooltip.footer-click-to-navigate",children:["Click to open ",{linkTitle:y}]}),(y,d,x)=>(0,n.jsx)(o.R,{link:y,buttonProps:{className:x.dataLinkButton,fill:"text"}},d),.5),v=u(y=>(0,n.jsxs)(l.x6,{i18nKey:"grafana-ui.viz-tooltip.footer-click-to-action",children:["Click to ",{actionTitle:y}]}),(y,d)=>(0,n.jsx)(c.r,{action:y,variant:"secondary"},d)),p=({dataLinks:y,actions:d=[],annotate:x,adHocFilters:b=[]})=>{const D=(0,r.of)(m),C=(0,s.useMemo)(()=>y.some(T=>T.oneClick===!0),[y]),P=(0,s.useMemo)(()=>d.some(T=>T.oneClick===!0),[d]);return(0,n.jsxs)("div",{className:D.wrapper,children:[!P&&E(y,D),!C&&v(d,D),!C&&!P&&b.length>0&&(0,n.jsx)("div",{className:D.footerSection,children:b.map((T,O)=>(0,n.jsx)(i.$n,{icon:"filter",variant:"secondary",size:"sm",onClick:T.onClick,children:(0,n.jsxs)(l.x6,{i18nKey:"grafana-ui.viz-tooltip.footer-filter-for-value",children:["Filter for '",{value:T.value},"'"]})},O))}),!C&&!P&&x!=null&&(0,n.jsx)("div",{className:D.footerSection,children:(0,n.jsx)(i.$n,{icon:"comment-alt",variant:"secondary",size:"sm",id:g,onClick:x,children:(0,n.jsx)(l.x6,{i18nKey:"grafana-ui.viz-tooltip.footer-add-annotation",children:"Add annotation"})})})]})},m=y=>({wrapper:(0,a.css)({display:"flex",flexDirection:"column",flex:1,padding:y.spacing(0)}),footerSection:(0,a.css)({borderTop:`1px solid ${y.colors.border.medium}`,padding:y.spacing(1)}),dataLinkButton:(0,a.css)({cursor:"pointer","&:hover":{textDecoration:"underline",background:"none"},padding:0,height:"auto","& span":{whiteSpace:"normal",textAlign:"left"}}),oneClickWrapper:(0,a.css)({display:"flex",alignItems:"center"}),infoIcon:(0,a.css)({color:y.colors.primary.main,paddingRight:y.spacing(.5)})})},39167:(ne,A,e)=>{"use strict";e.d(A,{Y7:()=>Ye,TI:()=>j,_q:()=>Ke,RK:()=>De,t9:()=>le,x7:()=>re,Hn:()=>Te,mZ:()=>Ue,kl:()=>X,us:()=>fe});var n=e(2543),a=e(7389),s=e(3594),l=e(28105),r=e(48480),c=e(36490),i=e(25992),o=e(43173),h=e(6890),f=e(15130),g=e(75421),u=e(8535),E=e(64762),v=e(73427),p=e(83873),m=e(68220),y=e(28998),d=e(59373),x=e(54742),b=e(8921),D=e(17752),C=e(67933),P=e(47969),T=e(99598),O=e(78763),S=e(88813),B=e(99305),K=e(21275),U=e(37918),F=e(74887),I=e(38221);const V=(de,ve=-1,me=!1,xe=!1)=>{const Ee={};if(xe){const Pe={...initialVariableModelState,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"A dashboard title",uid:"An dashboard UID",toString:()=>"A dashboard title"}}},Oe={...initialVariableModelState,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{name:"An org name",id:1,toString:()=>"1"}}},We={...initialVariableModelState,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:VariableHide.hideVariable,current:{value:{login:"admin",id:1,email:"admin@test",toString:()=>"1"}}};Ee[Pe.id]=Pe,Ee[Oe.id]=Oe,Ee[We.id]=We}for(let Pe=0;Pe<de;Pe++)Ee[Pe]=createQueryVariable({id:Pe.toString(),name:`Name-${Pe}`,label:`Label-${Pe}`,index:Pe});return me&&(Ee[NEW_VARIABLE_ID]=createQueryVariable({id:NEW_VARIABLE_ID,name:`Name-${NEW_VARIABLE_ID}`,label:`Label-${NEW_VARIABLE_ID}`,index:de})),Ee},M=(de,ve={})=>{const me={id:"0",rootStateKey:"key",index:0,name:"0"};return{initialState:{0:{...{...de.initialState,...me},...ve}}}},L=()=>combineReducers({dashboard:dashboardReducer,templating:keyedVariablesReducer}),N=()=>combineReducers({templating:keyedVariablesReducer});function W(de,ve){return{templating:{lastKey:de,keys:{[de]:{...getInitialTemplatingState(),...ve}}}}}function R(de,ve){return de.find(xe=>xe.name===ve)}function G(de){return(de.type==="query"||de.type==="datasource"||de.type==="interval")&&de.refresh===K.CO.onTimeRangeChanged}var w=e(93612),_=e(88681),Q=e(74276),ae=e(77839);const q=(de,ve)=>(me,xe)=>{let Ee=0;const Pe=ve.templating.list;for(let We=0;We<Pe.length;We++){const Fe=k(Pe[We]);Fe.rootStateKey=de,x.B.getIfExists(Fe.type)&&me((0,F.kb)(de,(0,_.QV)((0,B.qD)(Fe,{global:!1,index:Ee++,model:Fe}))))}(0,d.w)().updateTimeRange((0,g.jG)().timeRange());const Oe=(0,w.SS)(de,xe());for(const We of Oe)me((0,F.kb)(de,(0,_.wB)((0,B.qD)(We))))};function k(de){if(!(0,C.SP)(de))return de;let ve=!1;for(const me of de.options)if(me.selected=!1,Array.isArray(de.current.value))for(const xe of de.current.value)me.value===xe&&(me.selected=ve=!0);else me.value===de.current.value&&(me.selected=ve=!0);return!ve&&de.options.length&&(de.options[0].selected=!0),de}const ee=(de,ve)=>me=>{const xe={...S.Vg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:a.zL.hideVariable,current:{value:{name:ve.title,uid:ve.uid,toString:()=>ve.title}}};me((0,F.kb)(de,(0,_.QV)((0,B.qD)(xe,{global:xe.global,index:xe.index,model:xe}))));const Ee={...S.Vg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:a.zL.hideVariable,current:{value:{name:f.TP.user.orgName,id:f.TP.user.orgId,toString:()=>f.TP.user.orgId.toString()}}};me((0,F.kb)(de,(0,_.QV)((0,B.qD)(Ee,{global:Ee.global,index:Ee.index,model:Ee}))));const Pe={...S.Vg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:a.zL.hideVariable,current:{value:{login:f.TP.user.login,id:f.TP.user.id,email:f.TP.user.email,toString:()=>f.TP.user.id.toString()}}};me((0,F.kb)(de,(0,_.QV)((0,B.qD)(Pe,{global:Pe.global,index:Pe.index,model:Pe}))))},j=(de,ve)=>(me,xe)=>{const{rootStateKey:Ee}=de,Pe=(0,w.dn)(de,xe());if(!(0,C.iv)(Pe)||(0,s.R)(Pe.current))return;const Oe=(0,O.C)(Pe.current,ve);me((0,F.kb)(Ee,(0,_.QP)((0,B.qD)(de,{propName:"multi",propValue:ve})))),me((0,F.kb)(Ee,(0,_.QP)((0,B.qD)(de,{propName:"current",propValue:Oe}))))},J=async(de,ve)=>{if(!de.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${de.id}`);if(Z(de,ve))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const me=te(de,ve);se(de.rootStateKey,me,ve)&&await new Promise(xe=>{const Ee=u.M_.subscribe(()=>{if(!de.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${de.id}`);se(de.rootStateKey,me,u.M_.getState())||(Ee(),xe())})})},Z=(de,ve,me=new Set)=>me.has(de.id)?!0:(me=new Set([...me,de.id]),te(de,ve).some(xe=>Z(xe,ve,me))),te=(de,ve)=>{if(!de.rootStateKey)return[];const me=[];for(const xe of(0,w.SS)(de.rootStateKey,ve))de!==xe&&x.B.getIfExists(de.type)&&x.B.get(de.type).dependsOn(de,xe)&&me.push(xe);return me},se=(de,ve,me)=>{if(ve.length===0)return!1;const xe=(0,w.SS)(de,me);return ve.filter(Pe=>xe.some(Oe=>Oe.id===Pe.id&&(Oe.state===l.Gu.NotStarted||Oe.state===l.Gu.Loading))).length>0},ie=(de,ve)=>async(me,xe)=>{const Ee=(0,w.dn)(de,xe());await J(Ee,xe());const Pe=ve[b.qz+Ee.name];if(Pe!==void 0){const Oe=(0,B.QT)(Pe);await x.B.get(Ee.type).setValueFromUrl(Ee,Oe);return}if(Ee.hasOwnProperty("refresh")){const Oe=Ee;if(Oe.refresh===a.CO.onDashboardLoad||Oe.refresh===a.CO.onTimeRangeChanged){await me(Ue((0,B.jX)(Oe)));return}}if(Ee.type==="custom"){await me(Ue((0,B.jX)(Ee)));return}me(Qe(de))},ce=de=>async(ve,me)=>{const xe=c.Ny.getSearchObject(),Ee=(0,w.SS)(de,me()).map(async Pe=>await ve(ie((0,B.jX)(Pe),xe)));await Promise.all(Ee)},re=(de,ve)=>async(me,xe)=>{const Ee=(0,B.QT)(ve),Pe=(0,w.dn)(de,xe());(0,B.q$)(Pe)!==a.CO.never&&await me(Ue((0,B.jX)(Pe)));const Oe=(0,w.dn)((0,B.jX)(Pe),xe());if(!(0,C.SP)(Oe))return;if(!Oe)throw new Error(`Couldn't find variable with name: ${Pe.name}`);let We=Oe.options.find(Fe=>Fe.text===Ee||Fe.value===Ee);if(!We&&(0,C.iv)(Oe)&&Oe.allValue&&Ee===Oe.allValue&&(We={text:b.Zm,value:b.To,selected:!1}),!We){let Fe=Ee;const Be=Ee;Array.isArray(Ee)&&(Fe=Ee.reduce((Le,Ge)=>{const Ze=Oe.options.find(qe=>qe.value===Ge);return Ze?[].concat(Le,[Ze.text]):[].concat(Le,[Ge])},[])),We={text:Fe,value:Be,selected:!1}}(0,C.iv)(Oe)&&(We=(0,O.C)({text:(0,n.castArray)(We.text),value:(0,n.castArray)(We.value),selected:!1},Oe.multi)),await x.B.get(Pe.type).setValue(Oe,We)},ue=de=>{let ve,me,xe,Ee;const Pe=[];for(ve=0;ve<de.options.length;ve++)if(Ee={...de.options[ve]},Ee.selected=!1,Array.isArray(de.current.value))for(me=0;me<de.current.value.length;me++)xe=de.current.value[me],Ee.value===xe&&(Ee.selected=!0,Pe.push(Ee));else Ee.value===de.current.value&&(Ee.selected=!0,Pe.push(Ee));return Pe},X=(de,ve)=>(me,xe)=>{const Ee=(0,w.dn)(de,xe());if(!(0,C.SP)(Ee))return Promise.resolve();const Pe=Ee.current||{},Oe=x.B.get(Ee.type).setValue;if(Array.isArray(Pe.value)){const Le=ue(Ee);if(Le.length===0){const Ze=Ee.options[0];return Oe(Ee,{value:typeof Ze.value=="string"?[Ze.value]:Ze.value,text:typeof Ze.text=="string"?[Ze.text]:Ze.text,selected:!0})}const Ge={value:Le.map(Ze=>Ze.value),text:Le.map(Ze=>Ze.text),selected:!0};return Oe(Ee,Ge)}let We=null;const Fe=(0,B.Nz)(Ee),Be=(0,B.Lz)(Ee);if(We=Ee.options?.find(Le=>Le.text===Fe||Le.value===Be),We||ve&&(We=Ee.options?.find(Le=>Le.text===ve||Le.value===ve),We))return Oe(Ee,We);if(Ee.options){const Le=Ee.options[0];if(Le)return Oe(Ee,Le)}return Promise.resolve()},le=(de,ve,me)=>async xe=>{const{rootStateKey:Ee}=de;return xe((0,F.kb)(Ee,(0,_.dE)((0,B.qD)(de,{option:ve})))),await xe(fe(de,me))},he=de=>{const ve=new m.TS;return de.forEach(me=>{ve.createNode(me.name)}),de.forEach(me=>{de.forEach(xe=>{if(me!==xe&&x.B.get(me.type).dependsOn(me,xe))try{ve.link(me.name,xe.name)}catch(Ee){const Pe=Ee instanceof Error?Ee.message:"Unknown error";(0,i.FF)("Error linking variables",{error:Pe})}})}),ve},fe=(de,ve,me=v.lE)=>async(xe,Ee)=>{const Pe=Ee(),{rootStateKey:Oe}=de,We=(0,w.dn)(de,Pe);if((0,w.nx)(Oe,Pe).transaction.status===S.x8.Fetching)return(0,B.q$)(We)===a.CO.never&&(await xe(He((0,B.jX)(We))),xe(Qe(de))),Promise.resolve();const Fe=(0,w.SS)(Oe,Pe),Be=he(Fe),Le=Pe.dashboard?.getModel()?.panels??[],Ge=(0,P.P5)(Le),Ze=We.type==="adhoc"?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,P.xU)([We.id],Be,Ge)),variable:(0,w.dn)(de,Pe)},qe=Be.getNode(We.name);let at=[];return qe&&(at=qe.getOptimizedInputEdges().map(ht=>{const Et=Fe.find(mt=>mt.name===ht.inputNode?.name);return Et?xe(Ue((0,B.jX)(Et))):Promise.resolve()})),Promise.all(at).then(()=>{ve&&(me.publish(new S.og(Ze)),c.Ny.partial(Re(Oe,Ee)))})},Ce=(de,ve,me,xe)=>(ve.includes(de.name)||ve.push(de.name),de.outputEdges.forEach(Ee=>{const Pe=Ee.outputNode;if(Pe&&!ve.includes(Pe.name)){const Oe=me.find(We=>We.name===Pe.name);Oe&&Oe.refresh===a.CO.onTimeRangeChanged&&xe.indexOf(Oe)===-1?(xe.push(Oe),ve.push(Pe.name)):Ce(Pe,ve,me,xe)}}),xe),Ae=(de,ve)=>de.outputEdges.every(me=>{const xe=me.outputNode;if(xe){const Ee=R(ve,xe.name);if(Ee&&Ee.type==="query")return Ee.refresh!==a.CO.onTimeRangeChanged}return!0}),_e=(de,ve)=>{const me=(0,w.SS)(de,ve),xe=he(me),Ee=[],Pe=[];return me.forEach(Oe=>{const We=xe.getNode(Oe.name);if(!Ee.includes(Oe.name)&&We){const Fe=R(me,We.name);if(!Fe)return;const Be=G(Fe);Be&&We.outputEdges.length===0&&Pe.push(Fe),Be&&Pe.includes(Fe)&&We.outputEdges.length>0&&(Pe.push(Fe),Ce(We,Ee,me,Pe)),Be&&We.outputEdges.length>0&&Ae(We,me)&&(Pe.includes(Fe)||Pe.push(Fe)),!Be&&We.outputEdges.length>0&&Ce(We,Ee,me,Pe)}}),Pe},Xe=(de,ve)=>(0,w.SS)(de,ve).filter(Ee=>"refresh"in Ee&&"options"in Ee?Ee.refresh===a.CO.onTimeRangeChanged:!1),De=(de,ve,me={templateSrv:(0,d.w)(),events:v.lE})=>async(xe,Ee)=>{me.templateSrv.updateTimeRange(ve);let Pe=[];o.$.featureToggles.refactorVariablesTimeRange?Pe=_e(de,Ee()):Pe=Xe(de,Ee());const Oe=Pe.map(Fe=>Fe.id),We=Pe.map(Fe=>xe(Me((0,B.jX)(Fe))));try{await Promise.all(We),me.events.publish(new S.BS({variableIds:Oe}))}catch(Fe){console.error(Fe),xe((0,h.dx)(je("Template variable service failed",Fe)))}},Me=de=>async(ve,me)=>{const xe=(0,w.dn)(de,me());if(!(0,C.SP)(xe))return;const Ee=xe.options.slice();await ve(Ue((0,B.jX)(xe),!0));const Pe=(0,w.dn)(de,me());if(!(0,C.SP)(Pe))return;const Oe=Pe.options;JSON.stringify(Ee)!==JSON.stringify(Oe)&&me().dashboard.getModel()?.templateVariableValueUpdated()},Te=(de,ve,me=v.lE)=>async(xe,Ee)=>{const Pe=[],Oe=Ee().dashboard.getModel(),We=(0,w.SS)(de,Ee());for(const Ze of We){const qe=b.qz+Ze.name;if(!ve.hasOwnProperty(qe)||!$e(Ze,ve[qe].value))continue;let at=ve[qe].value;if(ve[qe].removed){const Et=Oe?.templating.list.find(mt=>mt.name===Ze.name);Et&&(0,C.m8)(Et)&&(at=Et.current.value),Et&&Et.type==="constant"&&(at=Et.query)}const ht=x.B.get(Ze.type).setValueFromUrl(Ze,at);Pe.push(ht)}const Fe=We.filter(Ze=>{const qe=b.qz+Ze.name;return ve.hasOwnProperty(qe)&&$e(Ze,ve[qe].value)&&Ze.type!=="adhoc"}),Be=he(We),Le=(0,P.P5)(Oe?.panels??[]),Ge=(0,P.xU)(Fe.map(Ze=>Ze.id),Be,Le);Pe.length&&(await Promise.all(Pe),me.publish(new S.eF({refreshAll:Ge.size===0,panelIds:Array.from(Ge)})))};function $e(de,ve){const me=x.B.get(de.type).getValueForUrl(de);let xe=(0,B.QT)(ve);return Array.isArray(me)&&!Array.isArray(xe)&&(xe=[xe]),!(0,n.isEqual)(me,xe)}const Re=(de,ve)=>{const me=c.Ny.getSearchObject(),xe=Object.keys(me).filter(Ee=>Ee.indexOf(b.qz)===-1).reduce((Ee,Pe)=>(Ee[Pe]=me[Pe],Ee),{});for(const Ee of(0,w.SS)(de,ve())){if(Ee.skipUrlSync)continue;const Pe=x.B.get(Ee.type);xe[b.qz+Ee.name]=Pe.getValueForUrl(Ee)}return xe},Ke=(de,ve)=>async(me,xe)=>{try{const Ee=(0,B.q4)(de),Pe=xe(),Oe=(0,w.Tk)(Pe);Oe&&(0,w.nx)(Oe,Pe).transaction.status===S.x8.Fetching&&me(Ye(Oe)),me((0,F.kb)(Ee,(0,Q.kH)({uid:Ee}))),me(ee(Ee,ve)),me(q(Ee,ve)),me(Ve(Ee)),await me(ce(Ee)),me((0,F.kb)(Ee,(0,Q.$O)({uid:Ee})))}catch(Ee){me((0,h.dx)(je("Templating init failed",Ee))),console.error(Ee)}};function Ve(de,ve=y.tR){return(me,xe)=>{const Ee=(0,w.SS)(de,xe());for(const Pe of Ee){if(Pe.type!=="adhoc"&&Pe.type!=="query")continue;const{datasource:Oe}=Pe;if((0,r.fN)(Oe))continue;const We=ve().getInstanceSettings(Oe),Fe=We?(0,r.p$)(We):{uid:Oe};me((0,F.kb)(de,(0,_.QP)((0,B.qD)(Pe,{propName:"datasource",propValue:Fe}))))}}}const Se=de=>ve=>{ve((0,F.kb)(de,(0,ae.v)())),ve((0,F.kb)(de,(0,D.y8)())),ve((0,F.kb)(de,(0,T.jR)())),ve((0,F.kb)(de,(0,Q.pu)()))},Ye=(de,ve={getBackendSrv:p.AI})=>me=>{ve.getBackendSrv().cancelAllInFlightRequests(),me(Se(de))},Ue=(de,ve=!1)=>async(me,xe)=>{const{rootStateKey:Ee}=de;try{if(!(0,B.sN)(Ee,xe()))return;const Pe=(0,w.dn)(de,xe());me((0,F.kb)(Ee,(0,_.a7)((0,B.qD)(Pe)))),await me(He((0,B.jX)(Pe))),await x.B.get(Pe.type).updateOptions(Pe),me(Qe(de))}catch(Pe){if(me((0,F.kb)(Ee,(0,_.Te)((0,B.qD)(de,{error:Pe})))),ve||(console.error(Pe),me((0,h.dx)(je("Error updating options:",Pe,de)))),ve)throw Pe}},je=(de,ve,me)=>(0,E.gi)(`${me?`Templating [${me.id}]`:"Templating"}`,ve instanceof Error?`${de} ${ve.message}`:`${de}`),Qe=de=>(ve,me)=>{const{rootStateKey:xe}=de;if(!(0,B.sN)(xe,me()))return;const Ee=(0,w.dn)(de,me());Ee.state!==l.Gu.Done&&ve((0,F.kb)(de.rootStateKey,(0,_.Pu)((0,B.qD)(Ee))))};function He(de,ve=y.tR){return async function(me,xe){const{id:Ee,rootStateKey:Pe}=de;if(!(0,B.sN)(Pe,xe()))return;const Oe=(0,w.dn)(de,xe());if(Oe.type==="query")try{const We=await ve().get(Oe.datasource??"");if((0,C.d5)(We)||!(0,C.Hf)(We)||Je(Oe.query))return;const Fe={refId:`${We.name}-${Ee}-Variable-Query`,query:Oe.query};me((0,F.kb)(Pe,(0,_.QP)((0,B.qD)(de,{propName:"query",propValue:Fe}))))}catch(We){me((0,h.dx)(je("Failed to upgrade legacy queries",We))),console.error(We)}}}function Je(de){return(0,l.Gv)(de)&&"refId"in de&&typeof de.refId=="string"}},39187:(ne,A,e)=>{"use strict";e.d(A,{h:()=>c,w:()=>i});var n=e(63704),a=e(43173),s=e(36490),l=e(74268),r=e(20962);function c(h){const f={returnTo:h},[g]=(0,r.l)(),u=g.get("returnTo");if(!u)return f;const E=n.sQ.sanitizeUrl(u),v=`${window.location.origin}/${a.$.appSubUrl}`,p=o(E,v);if(!p)return(0,l.FF)("Malformed returnTo parameter",{returnTo:u}),f;const{protocol:m,origin:y,pathname:d,search:x}=p;return["http:","https:"].includes(m)===!1||y!==window.location.origin?((0,l.FF)("Malformed returnTo parameter",{returnTo:u}),f):{returnTo:`${d}${x}`}}function i(h=!0){const{pathname:f,search:g}=s.Ny.getLocation();return f+(h?g:"")}function o(h,f){try{return new URL(h,f)}catch{return null}}},39242:(ne,A,e)=>{"use strict";e.d(A,{MS:()=>s,PP:()=>l,PS:()=>a,hM:()=>n});const n="--responsive-grid-dragged-item-top",a="--responsive-grid-dragged-item-left",s="--responsive-grid-dragged-item-width",l="--responsive-grid-dragged-item-height"},39302:(ne,A,e)=>{"use strict";e.d(A,{d:()=>r});var n=e(74848),a=e(22803),s=e(45861),l=e(63142);const r=({children:i,...o})=>{const h=(0,l.of)(c);return(0,n.jsx)("div",{className:h.buttonWrapper,children:(0,n.jsx)(s.$n,{icon:"plus",...o,children:i})})},c=i=>({buttonWrapper:(0,a.css)({padding:`${i.spacing(3)} 0`})})},39338:(ne,A,e)=>{"use strict";e.d(A,{t:()=>s});var n=e(15130),a=e(11257);function s(){const l=n.TP.hasPermission(a.w.DashboardsCreate),r=n.TP.hasPermission(a.w.DashboardsWrite);return l&&!r?"Add panel to new dashboard":r&&!l?"Add panel to existing dashboard":"Add panel to dashboard"}},39443:(ne,A,e)=>{"use strict";e.d(A,{m:()=>n});var n=(a=>(a.TimeSeriesWide="timeseries-wide",a.TimeSeriesLong="timeseries-long",a.TimeSeriesMany="timeseries-many",a.TimeSeriesMulti="timeseries-multi",a.NumericWide="numeric-wide",a.NumericMulti="numeric-multi",a.NumericLong="numeric-long",a.LogLines="log-lines",a.DirectoryListing="directory-listing",a.HeatmapRows="heatmap-rows",a.HeatmapCells="heatmap-cells",a.Histogram="histogram",a))(n||{})},39468:(ne,A,e)=>{"use strict";e.d(A,{d:()=>u});var n=e(74848),a=e(92745),s=e(10928),l=e(74475),r=e(45861),c=e(37386),i=e(18857),o=e(63527),h=e(32635),f=e(86871);const g=Object.keys(f.G).map(E=>({label:E,value:E}));function u({link:E,onUpdate:v,onGoBack:p}){const m=[{value:"dashboards",label:(0,a.t)("dashboard-scene.dashboard-link-form.link-type-options.label.dashboards","Dashboards")},{value:"link",label:(0,a.t)("dashboard-scene.dashboard-link-form.link-type-options.label.link","Link")}],y=C=>{v({...E,tags:C})},d=C=>{const P={...E,type:C.value};P.type==="dashboards"?(P.url="",P.tooltip=""):P.tags=[],v(P)},x=C=>{v({...E,icon:C.value})},b=C=>{const P=C.currentTarget;v({...E,[P.name]:P.type==="checkbox"?P.checked:P.value})},D=E.title===f.q.title;return(0,n.jsxs)("div",{style:{maxWidth:"600px"},children:[(0,n.jsx)(c.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-title","Title"),children:(0,n.jsx)(o.p,{name:"title",id:"title",value:E.title,onChange:b,autoFocus:D})}),(0,n.jsx)(c.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-type","Type"),children:(0,n.jsx)(i.l6,{inputId:"link-type-input",value:E.type,options:m,onChange:d})}),E.type==="dashboards"&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-with-tags","With tags"),children:(0,n.jsx)(s.u,{tags:E.tags,onChange:y})})}),E.type==="link"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-url","URL"),children:(0,n.jsx)(o.p,{name:"url",value:E.url,onChange:b})}),(0,n.jsx)(c.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-tooltip","Tooltip"),children:(0,n.jsx)(o.p,{name:"tooltip",value:E.tooltip,onChange:b,placeholder:(0,a.t)("dashboard-scene.dashboard-link-form.placeholder-open-dashboard","Open dashboard")})}),(0,n.jsx)(c.D,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-icon","Icon"),children:(0,n.jsx)(i.l6,{value:E.icon,options:g,onChange:x})})]}),(0,n.jsxs)(l.M,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-options","Options"),isOpen:!0,children:[E.type==="dashboards"&&(0,n.jsx)(c.D,{children:(0,n.jsx)(h.S,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-show-as-dropdown","Show as dropdown"),name:"asDropdown",value:E.asDropdown,onChange:b})}),(0,n.jsx)(c.D,{children:(0,n.jsx)(h.S,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-include-current-time-range","Include current time range"),name:"keepTime",value:E.keepTime,onChange:b})}),(0,n.jsx)(c.D,{children:(0,n.jsx)(h.S,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-include-current-template-variable-values","Include current template variable values"),name:"includeVars",value:E.includeVars,onChange:b})}),(0,n.jsx)(c.D,{children:(0,n.jsx)(h.S,{label:(0,a.t)("dashboard-scene.dashboard-link-form.label-open-link-in-new-tab","Open link in new tab"),name:"targetBlank",value:E.targetBlank,onChange:b})})]}),(0,n.jsx)(r.$n,{variant:"secondary",onClick:p,children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.dashboard-link-form.back-to-list",children:"Back to list"})})]})}},39508:(ne,A,e)=>{"use strict";e.d(A,{Jc:()=>f,LY:()=>o,MM:()=>h,NB:()=>i,k6:()=>r,qJ:()=>c,sB:()=>l});var n=e(21275),a=e(739),s=e(11393);const l="__legacyStringValue";function r(g){switch(g){case 0:return"Off";case 1:return"Crosshair";case 2:return"Tooltip";default:return(0,s.xE)().cursorSync}}function c(g){switch(g){case 0:return"never";case 1:return"onDashboardLoad";case 2:return"onTimeRangeChanged";default:return(0,s.FM)()}}function i(g){switch(g){case 0:return"dontHide";case 1:return"hideLabel";case 2:return"hideVariable";default:return(0,s.SR)()}}function o(g){switch(g){case 0:return"disabled";case 1:return"alphabeticalAsc";case 2:return"alphabeticalDesc";case 3:return"numericalAsc";case 4:return"numericalDesc";default:return(0,s.G9)()}}function h(g){switch(g){case"annotations":return a.QR.Annotations;case"alertStates":return a.QR.AlertStates;case"series":return a.QR.Series;default:return}}function f(g){switch(g){case n.Yb.Thresholds:return"thresholds";case n.Yb.PaletteClassic:return"palette-classic";case n.Yb.PaletteClassicByName:return"palette-classic-by-name";case n.Yb.ContinuousGrYlRd:return"continuous-GrYlRd";case n.Yb.ContinuousRdYlGr:return"continuous-RdYlGr";case n.Yb.ContinuousBlYlRd:return"continuous-BlYlRd";case n.Yb.ContinuousYlRd:return"continuous-YlRd";case n.Yb.ContinuousBlPu:return"continuous-BlPu";case n.Yb.ContinuousYlBl:return"continuous-YlBl";case n.Yb.ContinuousBlues:return"continuous-blues";case n.Yb.ContinuousReds:return"continuous-reds";case n.Yb.ContinuousGreens:return"continuous-greens";case n.Yb.ContinuousPurples:return"continuous-purples";case n.Yb.Fixed:return"fixed";case n.Yb.Shades:return"shades";default:return}}},39557:(ne,A,e)=>{"use strict";e.d(A,{B:()=>r});var n=e(74848),a=e(62467),s=e(81160),l=e(45863);class r extends l.n8{constructor(i){super({name:"",type:"snapshot",isReadOnly:!0,query:"",value:"",text:"",options:[],...i}),this._variableDependency=new l.Sh(this,{statePaths:[]})}getValueOptions(i){const f=(l.jh.interpolate(this,this.state.query).match(/(?:\\,|[^,])+/g)??[]).map(g=>{g=g.replace(/\\,/g,",");const u=/^(.+)\s:\s(.+)$/g.exec(g)??[];if(u.length===3){const[,E,v]=u;return{label:E.trim(),value:v.trim()}}else return{label:g.trim(),value:g.trim()}});return(0,a.of)(f)}validateAndUpdate(){return this.getValueOptions({}).pipe((0,s.T)(i=>(this.state.options!==i&&this._updateValueGivenNewOptions(i),{})))}static{this.Component=({model:i})=>(0,n.jsx)(l.WY,{model:i})}_updateValueGivenNewOptions(i){const{value:o,text:h}=this.state,f={options:i,loading:!1,value:o??[],text:h??[]};this.setState(f)}}},39659:(ne,A,e)=>{"use strict";e.d(A,{Dd:()=>l,F2:()=>h,M4:()=>s,lL:()=>i,rm:()=>o,w0:()=>f,x4:()=>c,zm:()=>r});var n=e(2543),a=e.n(n);function s(g){return Object.entries(g).map(([u,E])=>`${u}=${E}`).sort()}function l(g){return Object.entries(g)}function r(g){const u={};return g.forEach(E=>{u[E[0]]=E[1]}),u}function c(g){const u={};return g.forEach(E=>{E.key&&(u[E.key]=E.value)}),u}const i="__grafana_origin";function o(g){return(0,n.isEmpty)(g)?0:Object.keys(g).filter(u=>!h(u)).length}function h(g){return g.startsWith("__")&&g.endsWith("__")||g===i}const f=([g,u])=>h(g)},39698:(ne,A,e)=>{"use strict";e.d(A,{PL:()=>a,o:()=>r,se:()=>l});var n=e(43173);async function a(c){try{const i=n.$.bootData.user.theme==="light"?c.light:c.dark;return window.System.import(i)}catch(i){console.error(i)}}let s;function l(c){if(s)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");s=c}function r(){if(!s)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return s}},39796:(ne,A,e)=>{"use strict";e.d(A,{M:()=>n});const n=s=>{for(let l=0;;l++){const r=a(l);if(!s.some(c=>c.refId===r))return r}};function a(s){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return s<l.length?l[s]:a(Math.floor(s/l.length)-1)+l[s%l.length]}},39884:(ne,A,e)=>{"use strict";e.d(A,{I:()=>o});var n=e(74848),a=e(22803),s=e(51898),l=e(92745),r=e(63142),c=e(30703),i=e(45967);const o=({onCancel:g,loading:u})=>{const E=window.matchMedia("(prefers-reduced-motion: reduce)").matches,v=(0,r.of)(f);return u?(0,n.jsx)(i.m,{content:(0,l.t)("grafana-ui.panel-chrome.tooltip-cancel-loading","Cancel query"),children:(0,n.jsx)(c.I,{className:(0,a.cx)(v.spin,{[v.clickable]:!!g}),name:E?"hourglass":"sync",size:"sm",onClick:g,"data-testid":s.Tp.components.LoadingIndicator.icon})}):null},h=(0,a.keyframes)({"0%":{transform:"rotate(0deg) scaleX(-1)"},"100%":{transform:"rotate(359deg) scaleX(-1)"}}),f=g=>({clickable:(0,a.css)({cursor:"pointer"}),spin:(0,a.css)({[g.transitions.handleMotion("no-preference")]:{animation:`${h} 3s linear infinite`}})})},39947:(ne,A,e)=>{"use strict";e.d(A,{Di:()=>g,Ee:()=>f,LP:()=>h});var n=e(25229),a=e(74529),s=e(22592),l=e(86017),r=e(95443),c=e(63895),i=e(84266),o=e(15130);const h=u=>{const E={},v=u.get("comment"),m=u.getAll("matcher").filter(d=>!d.startsWith(r.kW)),y=(0,c.ou)(m);return y.length&&(E.matchers=y.map(l.MU)),v&&(E.comment=v),E},f=u=>{const E=new Date,p=Date.parse(u.endsAt)<Date.now()?{start:E,end:(0,a.Ri)(E,{hours:2})}:{start:new Date(u.startsAt),end:new Date(u.endsAt)};return{id:u.id,startsAt:p.start.toISOString(),endsAt:p.end.toISOString(),comment:u.comment,createdBy:u.createdBy,duration:(0,a.dU)(p),isRegex:!1,matchers:u.matchers?.map(l.MU)||[],matcherName:"",matcherValue:"",timeZone:s.lE}},g=u=>{const E=new Date,v=(0,a.Ri)(E,{hours:2});return{id:"",startsAt:E.toISOString(),endsAt:v.toISOString(),comment:`created ${(0,n.KQ)().format("YYYY-MM-DD HH:mm")}`,createdBy:o.TP.user.name,duration:"2h",isRegex:!1,matcherName:"",matcherValue:"",timeZone:s.lE,matchers:[{name:"",value:"",operator:i.ho.equal}],...u}}},40041:(ne,A,e)=>{"use strict";e.d(A,{gs:()=>i,yt:()=>f});var n=e(81160),a=e(95004),s=e(79319),l=e(36638),r=e(57866),c=e(64761),i=(u=>(u.UpperCase="Upper Case",u.LowerCase="Lower Case",u.SentenceCase="Sentence Case",u.TitleCase="Title Case",u.PascalCase="Pascal Case",u.CamelCase="Camel Case",u.SnakeCase="Snake Case",u.KebabCase="Kebab Case",u.Trim="Trim",u.Substring="Substring",u))(i||{});const o=u=>{const E=u.split(" ");for(let v=0;v<E.length;v++)E[v]=E[v].charAt(0).toUpperCase()+E[v].slice(1).toLowerCase();return E},h=u=>E=>E.values.map(v=>{switch(u.outputFormat){case"Upper Case":return v.toUpperCase();case"Lower Case":return v.toLowerCase();case"Sentence Case":return v.charAt(0).toUpperCase()+v.slice(1);case"Title Case":return o(v).join(" ");case"Pascal Case":return o(v).join("");case"Camel Case":return v=o(v).join(""),v.charAt(0).toLowerCase()+v.slice(1);case"Snake Case":return v.toLowerCase().split(" ").join("_");case"Kebab Case":return v.toLowerCase().split(" ").join("-");case"Trim":return v.trim();case"Substring":return v.substring(u.substringStart,u.substringEnd)}}),f={id:c.F.formatString,name:"Format string",description:"Manipulate string fields formatting",defaultOptions:{stringField:"",outputFormat:"Upper Case"},isApplicable:u=>{for(const E of u)for(const v of E.fields)if(v.type==="string")return s.M.Applicable;return s.M.NotApplicable},operator:u=>E=>E.pipe((0,n.T)(v=>{if(v.length===0)return v;const p=l.sJ.get(r.Ct.byName).get(u.stringField),m=h(u),y=g(p,m);return v.map(d=>({...d,fields:y(d,v)}))}))},g=(u,E)=>(v,p)=>v.fields.map(m=>{if(u(m,v,p)){const y=E(m);return{...m,type:a.PU.string,values:y}}return m})},40165:(ne,A,e)=>{"use strict";e.d(A,{X:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({className:c,label:i,horizontal:o,children:h,childrenWrapperClassName:f})=>{const g=(0,s.of)(r);return(0,n.jsxs)("div",{className:(0,a.cx)(g.field,o?g.fieldHorizontal:g.fieldVertical,c),children:[(0,n.jsx)("div",{children:i}),(0,n.jsx)("div",{className:f,children:h})]})},r=c=>({fieldHorizontal:(0,a.css)({flexDirection:"row",[c.breakpoints.down("md")]:{flexDirection:"column"}}),fieldVertical:(0,a.css)({flexDirection:"column"}),field:(0,a.css)({display:"flex",margin:`${c.spacing(2)} 0`,"& > div:first-child":{width:"110px",paddingRight:c.spacing(1),fontSize:c.typography.size.sm,fontWeight:c.typography.fontWeightBold,lineHeight:1.8},"& > div:nth-child(2)":{flex:1,color:c.colors.text.secondary}})})},40203:(ne,A,e)=>{"use strict";e.d(A,{G:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({children:c,wrap:i,className:o})=>{const h=(0,s.$j)(),f=r(h,i);return(0,n.jsx)("div",{className:(0,a.cx)(f.container,o),children:c})},r=(c,i)=>({container:(0,a.css)({display:"flex",flexDirection:"row",flexWrap:i?"wrap":"nowrap","& > *":{marginBottom:c.spacing(),marginRight:c.spacing()},"& > *:last-child":{marginRight:0}})})},40279:(ne,A,e)=>{"use strict";e.d(A,{gH:()=>E,wI:()=>m});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(96540),c=e(10824),i=e(55386),o=e(92745),h=e(63142),f=e(34999),g=e(30703),u=e(48431);function E({options:D,children:C,readAs:P,onLoad:T,fileListRenderer:O,onFileRemove:S}){const[B,K]=(0,r.useState)([]),[U,F]=(0,r.useState)([]),I=(0,i.j_)("decbytes")(D?.maxSize?D?.maxSize:0),V=(0,r.useCallback)((k,ee)=>{K(j=>j.map(J=>(J.id===k.id&&ee(J),J)))},[]),M=(0,r.useCallback)((k,ee,j)=>{let J=k.map(x);if(D?.multiple===!1?K(J):K(Z=>[...Z,...J]),Q(ee),D?.onDrop)D.onDrop(k,ee,j);else for(const Z of J){const te=new FileReader,se=()=>{P?te[P](Z.file):te.readAsText(Z.file)};V(Z,ie=>{ie.abortUpload=()=>{te.abort()},ie.retryUpload=()=>{V(Z,ce=>{ce.error=null,ce.progress=void 0}),se()}}),te.onabort=()=>{V(Z,ie=>{ie.error=new DOMException("Aborted")})},te.onprogress=ie=>{V(Z,ce=>{ce.progress=ie.loaded})},te.onload=()=>{T?.(te.result)},te.onerror=()=>{V(Z,ie=>{ie.error=te.error})},se()}},[T,D,P,V]),L=k=>{const ee=B.filter(j=>k.id!==j.id);K(ee),S?.(k)},{getRootProps:N,getInputProps:W,isDragActive:R}=(0,c.VB)({...D,useFsAccessApi:!1,onDrop:M,accept:p(D?.accept)}),G=(0,h.$j)(),w=b(G,R),_=B.map(k=>O?O(k,L):(0,n.jsx)(u.I,{file:k,removeFile:L},k.id)),Q=k=>{let ee=[];k.map(j=>{j.errors.map(J=>{ee.findIndex(Z=>Z.code===J.code&&Z.message===J.message)===-1&&ee.push(J)})}),F(ee)},ae=k=>{const ee=(0,i.cN)(I);return(0,n.jsx)("div",{className:w.errorAlert,children:(0,n.jsx)(f.F,{title:(0,o.t)("grafana-ui.file-dropzone.error-title","Upload failed"),severity:"error",onRemove:q,children:k.map(j=>{switch(j.code){case c.O4.FileTooLarge:return(0,n.jsx)("div",{children:(0,n.jsxs)(o.x6,{i18nKey:"grafana-ui.file-dropzone.file-too-large",children:["File is larger than ",{size:ee}]})},j.message+j.code);default:return(0,n.jsx)("div",{children:j.message},j.message+j.code)}})})})},q=()=>{F([])};return(0,n.jsxs)("div",{className:w.container,children:[(0,n.jsxs)("div",{"data-testid":"dropzone",...N({className:w.dropzone}),children:[(0,n.jsx)("input",{...W()}),C??(0,n.jsx)(m,{primaryText:y(B,D)})]}),U.length>0&&ae(U),(0,n.jsxs)("small",{className:(0,a.cx)(w.small,w.acceptContainer),children:[D?.maxSize&&`Max file size: ${(0,i.cN)(I)}`,D?.maxSize&&D?.accept&&(0,n.jsx)("span",{className:w.acceptSeparator,children:"|"}),D?.accept&&d(D.accept)]}),_]})}function v(D){return["txt","json","csv","xls","yml"].some(C=>D.match(C))?"text/plain":"application/octet-stream"}function p(D){return(0,s.isString)(D)?{[v(D)]:[D]}:Array.isArray(D)?D.reduce((C,P)=>{const T=v(P);return C[T]=C[T]?[...C[T],P]:[P],C},{}):D}function m({primaryText:D="Drop file here or click to upload",secondaryText:C=""}){const P=(0,h.$j)(),T=b(P);return(0,n.jsxs)("div",{className:(0,a.cx)(T.defaultDropZone),"data-testid":"file-drop-zone-default-children",children:[(0,n.jsx)(g.I,{className:(0,a.cx)(T.icon),name:"upload",size:"xl"}),(0,n.jsx)("h6",{className:(0,a.cx)(T.primaryText),children:D}),(0,n.jsx)("small",{className:T.small,children:C})]})}function y(D,C){return C?.multiple===void 0||C?.multiple?"Upload file":D.length?"Replace file":"Upload file"}function d(D){return(0,s.isString)(D)?`Accepted file type: ${D}`:Array.isArray(D)?`Accepted file types: ${D.join(", ")}`:`Accepted file types: ${Object.values(D).flat().join(", ")}`}function x(D){return{id:(0,s.uniqueId)("file"),file:D,error:null}}function b(D,C){return{container:(0,a.css)({display:"flex",flexDirection:"column",width:"100%",padding:D.spacing(2),borderRadius:D.shape.radius.default,border:`1px dashed ${D.colors.border.strong}`,backgroundColor:C?D.colors.background.secondary:D.colors.background.primary,cursor:"pointer",alignItems:"center",justifyContent:"center"}),dropzone:(0,a.css)({height:"100%",width:"100%",display:"flex",flexDirection:"column"}),defaultDropZone:(0,a.css)({textAlign:"center"}),icon:(0,a.css)({marginBottom:D.spacing(1)}),primaryText:(0,a.css)({marginBottom:D.spacing(1)}),acceptContainer:(0,a.css)({textAlign:"center",margin:0}),acceptSeparator:(0,a.css)({margin:`0 ${D.spacing(1)}`}),small:(0,a.css)({color:D.colors.text.secondary}),errorAlert:(0,a.css)({paddingTop:"10px"})}}},40360:(ne,A,e)=>{"use strict";e.d(A,{c:()=>l});var n=e(74848),a=e(30703),s=e(66404);const l=({namespace:r,group:c})=>c?(0,n.jsxs)(s.E,{element:"h3",variant:"body",children:[r," ",(0,n.jsx)(a.I,{name:"angle-right","aria-label":">"})," ",c]}):(0,n.jsx)(s.E,{element:"h3",variant:"body",children:r})},40601:(ne,A,e)=>{"use strict";e.d(A,{lp:()=>g});var n=e(74848),a=e(22803),s=e(63142),l=e(45861),r=e(31286),c=e(41654),i=e(87105);const o="configured",h="Reset",f=u=>({configuredStyle:(0,a.css)({minHeight:u.spacing(u.components.height.md),paddingTop:u.spacing(.5),resize:"none"})}),g=({isConfigured:u,onReset:E,...v})=>{const p=(0,s.of)(f);return(0,n.jsxs)(c.B,{children:[(0,n.jsxs)(r.a,{children:[!u&&(0,n.jsx)(i.f,{...v}),u&&(0,n.jsx)(i.f,{...v,rows:1,disabled:!0,value:o,className:(0,a.cx)(p.configuredStyle)})]}),u&&(0,n.jsx)(l.$n,{onClick:E,variant:"secondary",children:h})]})}},41e3:(ne,A,e)=>{"use strict";e.d(A,{Q:()=>a});var n=e(62717);function a(s,l){const r=(0,n.HD)(l);if(!r)return s;const c=r.utcOffset(s.getTime()),i=s.getTimezoneOffset(),o=c-i;return new Date(s.getTime()-o*1e3*60)}},41069:(ne,A,e)=>{"use strict";e.d(A,{H:()=>l});var n=e(53543),a=e(92745),s=e(739);function l(r,c=!0,i=!0){const o=[(0,a.t)("grafana-ui.builder.legend.category","Legend")];r.addBooleanSwitch({path:"legend.showLegend",name:(0,a.t)("grafana-ui.builder.legend.name-visibility","Visibility"),category:o,description:"",defaultValue:i}).addRadio({path:"legend.displayMode",name:(0,a.t)("grafana-ui.builder.legend.name-mode","Mode"),category:o,description:"",defaultValue:s.lm.List,settings:{options:[{value:s.lm.List,label:(0,a.t)("grafana-ui.builder.legend.mode-options.label-list","List")},{value:s.lm.Table,label:(0,a.t)("grafana-ui.builder.legend.mode-options.label-table","Table")}]},showIf:h=>h.legend.showLegend}).addRadio({path:"legend.placement",name:(0,a.t)("grafana-ui.builder.legend.name-placement","Placement"),category:o,description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:(0,a.t)("grafana-ui.builder.legend.placement-options.label-bottom","Bottom")},{value:"right",label:(0,a.t)("grafana-ui.builder.legend.placement-options.label-right","Right")}]},showIf:h=>h.legend.showLegend}).addNumberInput({path:"legend.width",name:(0,a.t)("grafana-ui.builder.legend.name-width","Width"),category:o,settings:{placeholder:"Auto"},showIf:h=>h.legend.showLegend&&h.legend.placement==="right"}),c&&r.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:(0,a.t)("grafana-ui.builder.legend.name-values","Values"),category:o,description:(0,a.t)("grafana-ui.builder.legend.description-values","Select values or calculations to show in legend"),editor:n.D.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:h=>h.legend.showLegend!==!1})}},41071:(ne,A,e)=>{"use strict";e.d(A,{_:()=>a,i:()=>s});let n;const a=l=>{n=l},s=()=>n?n():()=>console.error("ReturnToPrevious hook not found")},41097:(ne,A,e)=>{"use strict";e.d(A,{$:()=>g,W:()=>f});var n=e(74848),a=e(96540),s=e(16207),l=e(11594),r=e(92745),c=e(34999),i=e(96221),o=e(42581);class h extends a.PureComponent{constructor(E){super(E)}render(){const E={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return(0,n.jsx)("div",{style:E,children:(0,n.jsx)(c.F,{severity:i.Qd.Error,...this.props})})}}function f(u,E){const v=class extends a.PureComponent{render(){const y=(0,n.jsxs)(r.x6,{i18nKey:"panel.panel-plugin-error.text-load-error",children:["Check the server startup logs for more information. ",(0,n.jsx)("br",{}),"If this plugin was loaded from Git, then make sure it was compiled."]});return(0,n.jsx)(h,{title:(0,r.t)("panel.panel-plugin-error.title-load-error","Error loading: {{panelId}}",{panelId:u.id}),text:y})}},p=new s.m(v);return p.meta=u,p.loadError=!0,p}function g(u,E){const v=class extends a.PureComponent{render(){return(0,n.jsx)(h,{title:(0,r.t)("panel.panel-plugin-error.title-not-found","Panel plugin not found: {{id}}",{id:u})})}},p=new s.m(E?()=>null:v);return p.meta={id:u,name:u,sort:100,type:l.QE.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:o},screenshots:[],updated:"",version:""}},p}},41119:(ne,A,e)=>{"use strict";e.d(A,{Bt:()=>V,By:()=>U,EI:()=>L,ES:()=>O,HW:()=>y,KR:()=>F,Kl:()=>K,LI:()=>C,N$:()=>M,Vc:()=>P,XQ:()=>x,Yn:()=>B,by:()=>p,ci:()=>D,dF:()=>d,oE:()=>m,pH:()=>b,q7:()=>S,w3:()=>T});var n=e(2543),a=e.n(n),s=e(25229),l=e(92446),r=e(16515),c=e(28105),i=e(95004),o=e(27359),h=e(77154);function f(N){const W=N.columns.map(R=>{const{text:G,type:w,..._}=R,Q=[];return{name:G?.length?G:R,config:_||{},values:Q,type:w&&Object.values(i.PU).includes(w)?w:i.PU.other}});if(!(0,n.isArray)(N.rows))throw new Error(`Expected table rows to be array, got ${typeof N.rows}.`);for(const R of N.rows)for(let G=0;G<W.length;G++)W[G].values.push(R[G]);for(const R of W)if(R.type===i.PU.other){const G=d(R);G&&(R.type=G)}return{fields:W,refId:N.refId,meta:N.meta,name:N.name,length:N.rows.length}}function g(N){const W=[],R=[],G=N.datapoints||N.points;for(const _ of G)R.push(_[0]),W.push(_[1]);const w=[{name:i.LE,type:i.PU.time,config:{},values:W},{name:i.Bc,type:i.PU.number,config:{unit:N.unit},values:R,labels:N.tags}];return N.title&&(w[1].config.displayNameFromDS=N.title),{name:N.target||N.name,refId:N.refId,meta:N.meta,fields:w,length:R.length}}function u(N){const W=[],R=[];for(let G=0;G<N.data.length;G++){const w=N.data[G];W.push(w[1]),R.push(w[0])}return{name:N.label,fields:[{name:N.label||i.Bc,type:i.PU.number,config:{},values:W},{name:i.LE,type:i.PU.time,config:{unit:"dateTimeAsIso"},values:R}],length:W.length}}function E(N){const W=[{name:N.target,type:i.PU.other,labels:N.tags,config:{unit:N.unit,filterable:N.filterable},values:[]}];for(const R of N.datapoints)W[0].values.push(R);return{name:N.target,refId:N.target,meta:{json:!0},fields:W,length:N.datapoints.length}}const v=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function p(N,W){return N&&(N=N.toLowerCase(),N==="date"||N==="time")?i.PU.time:y(W)}function m(N){return N instanceof Date||(0,s.Ar)(N)?i.PU.time:(0,n.isNumber)(N)?i.PU.number:(0,n.isString)(N)?i.PU.string:(0,n.isBoolean)(N)?i.PU.boolean:i.PU.other}function y(N){return N instanceof Date||(0,s.Ar)(N)?i.PU.time:(0,n.isNumber)(N)?i.PU.number:(0,n.isString)(N)?v.test(N)?i.PU.number:N==="true"||N==="TRUE"||N==="True"||N==="false"||N==="FALSE"||N==="False"?i.PU.boolean:i.PU.string:(0,n.isBoolean)(N)?i.PU.boolean:i.PU.other}function d(N){if(N.name){const W=N.name.toLowerCase();if(W==="date"||W==="time")return i.PU.time}for(let W=0;W<N.values.length;W++){const R=N.values[W];if(R!=null)return y(R)}}const x=(N,W=!1)=>{for(const R of N.fields)if(!R.type||R.type===i.PU.other||W)return{...N,fields:N.fields.map(G=>G.type&&G.type!==i.PU.other&&!W?G:{...G,type:d(G)||i.PU.other})};return N},b=N=>!!(N&&N.hasOwnProperty("columns")),D=N=>!!(N&&N.hasOwnProperty("fields")),C=N=>!!(D(N)&&N.hasOwnProperty("value"));function P(N){if("fields"in N)return"length"in N&&N.fields[0]?.values?.get?N:L(N);if(N.hasOwnProperty("type")&&N.type==="docs")return E(N);if(N.hasOwnProperty("datapoints")||N.hasOwnProperty("points"))return g(N);if(N.hasOwnProperty("data"))return N.hasOwnProperty("schema")?(0,h.or)(N):u(N);if(N.hasOwnProperty("columns"))return f(N);if(Array.isArray(N))return(0,o.I)(N);throw console.warn("Can not convert",N),new Error("Unsupported data format")}const T=N=>{const{fields:W}=N,R=N.length,G=[];if(W.length===2){const{timeField:w,timeIndex:_}=F(N);if(w){const ae=W[_===0?1:0],q=W[_];for(let k=0;k<R;k++)G.push([ae.values[k],q.values[k]]);return{alias:N.name,target:(0,r.Ct)(ae,N),datapoints:G,unit:W[0].config?W[0].config.unit:void 0,refId:N.refId,meta:N.meta}}}for(let w=0;w<R;w++){const _=[];for(let Q=0;Q<W.length;Q++)_.push(W[Q].values[w]);G.push(_)}return N.meta&&N.meta.json?{alias:W[0].name||N.name,target:W[0].name||N.name,datapoints:W[0].values,filterable:W[0].config?W[0].config.filterable:void 0,type:"docs"}:{columns:W.map(w=>{const{name:_,config:Q}=w;if(Q){const{...ae}=Q;return ae.text=_,ae}return{text:_}}),type:"table",refId:N.refId,meta:N.meta,rows:G}};function O(N,W,R=!1){const G=N.fields[W];if(!G)return N;const w=[];for(let Q=0;Q<N.length;Q++)w.push(Q);const _=(0,l.i)(G,R);return w.sort(_),{...N,fields:N.fields.map(Q=>{const ae={...Q,values:Q.values.map((k,ee)=>Q.values[w[ee]])},{nanos:q}=Q;return q!==void 0&&(ae.nanos=q.map((k,ee)=>q[w[ee]])),ae})}}function S(N){return{...N,fields:N.fields.map(W=>{const R=[...W.values];R.reverse();const G={...W,values:R},{nanos:w}=W;if(w!==void 0){const _=[...w];_.reverse(),G.nanos=_}return G})}}function B(N,W){const R=[];for(const G of N.fields)R.push(G.values[W]);return R}function K(N){return U(N)}function U(N,W){return{fields:(W?N.fields.filter(W):N.fields).map(w=>{let _=w.values;return{name:w.name,type:w.type,config:w.config,values:_,labels:w.labels}}),refId:N.refId,meta:N.meta,name:N.name}}const F=N=>{for(let W=0;W<N.fields.length;W++)if(N.fields[W].type===i.PU.time)return{timeField:N.fields[W],timeIndex:W};return{}};function I(N){const W=x(P(N));if(W.fields&&W.fields.length)for(const R of W.fields)R.state=null;return W}function V(N){return!N||!(0,n.isArray)(N)?[]:N.map(W=>I(W))}function M(N,W){const{series:R,annotations:G}=N;if(N.state===c.Gu.Loading&&R.length===0)return W||(W=N),{...W,state:c.Gu.Loading,request:N.request};const w=performance.now(),_=R.map(q=>I(q)),Q=V(G),ae=performance.now();return{...N,series:_,annotations:Q,timings:{dataProcessingTime:ae-w}}}function L(N){let W=0;const R=N.fields.map((G,w)=>{const{state:_,...Q}=G;return Q.name||(Q.name=`Field ${w+1}`),Q.config||(Q.config={}),Q.values?Q.values.length>W&&(W=Q.values.length):Q.values=new Array(W),Q.type||(Q.type=d(Q)??i.PU.other),Q});return{...N,fields:R,length:W}}},41185:(ne,A,e)=>{"use strict";e.d(A,{g:()=>r});var n=e(74848),a=e(96540),s=e(63527),l=e(87105);const r=({value:c,onChange:i,item:o,suffix:h,id:f})=>{const g=o.settings?.useTextarea?l.f:s.p,u=(0,a.useCallback)(E=>{let v=c??"";"key"in E?E.key==="Enter"&&!o.settings?.useTextarea&&(v=E.currentTarget.value.trim()):v=E.currentTarget.value.trim(),v!==c&&i(v===""?void 0:v)},[c,o.settings?.useTextarea,i]);return(0,n.jsx)(g,{id:f,placeholder:o.settings?.placeholder,defaultValue:c||"",rows:o.settings?.useTextarea&&o.settings.rows||5,onBlur:u,onKeyDown:u,suffix:h})}},41479:(ne,A,e)=>{"use strict";e.d(A,{n:()=>l});var n=e(74848),a=e(96540),s=e(97375);const l=({children:r,renderMenuItems:c,focusOnOpen:i=!0})=>{const[o,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)({x:0,y:0});return(0,n.jsxs)(n.Fragment,{children:[r({openMenu:u=>{h(!0),g({x:u.pageX,y:u.pageY-window.scrollY})}}),o&&(0,n.jsx)(s.t,{onClose:()=>h(!1),x:f.x,y:f.y,renderMenuItems:c,focusOnOpen:i})]})}},41517:(ne,A,e)=>{"use strict";e.d(A,{X:()=>c});var n=e(74848),a=e(92745),s=e(34999),l=e(45861),r=e(41654);function c(){return(0,n.jsx)(s.F,{severity:"info",title:(0,a.t)("alerting.federated-rule-warning.title-federated-group","This rule is part of a federated rule group."),bottomSpacing:0,topSpacing:2,children:(0,n.jsxs)(r.B,{direction:"column",children:[(0,n.jsx)(a.x6,{i18nKey:"alerting.federated-rule-warning.experimental",children:"Federated rule groups are currently an experimental feature."}),(0,n.jsx)(l.$n,{fill:"text",icon:"book",children:(0,n.jsx)("a",{href:"https://grafana.com/docs/metrics-enterprise/latest/tenant-management/tenant-federation/#cross-tenant-alerting-and-recording-rule-federation",children:(0,n.jsx)(a.x6,{i18nKey:"alerting.federated-rule-warning.read-documentation",children:"Read documentation"})})})]})})}},41607:(ne,A,e)=>{"use strict";e.d(A,{r:()=>n});var n=(a=>(a.OpenSource="Open Source",a.Pro="Pro",a.Enterprise="Enterprise",a))(n||{})},41644:(ne,A,e)=>{"use strict";e.d(A,{m6:()=>B,sP:()=>M});var n=e(92138),a=e(92745),s=e(68143),l=e(43173),r=e(36490),c=e(45863),i=e(64975),o=e(5114),h=e(47797),f=e(60017),g=e(75735),u=e(50803),E=e(95407),v=e(60171),p=e(48600),m=e(22429),y=e(83127),d=e(95710),x=e(6262),b=e(84019),D=e(31119),C=e(65333),P=e(17788),T=e(75570);const O=500,S="loadDashboardScene",B="__grafana_home_uid__";class K extends o.Q{constructor(){super(...arguments),this.cache={}}getCache(){return this.cache}async fetchHomeDashboard(){const N=await(0,s.AI)().get("/api/dashboards/home");if((0,x.U)(N)){const W=n.I.stripBaseFromUrl(N.redirectUri);return r.Ny.replace(W),null}return(0,v.aK)(N.dashboard)&&(N.dashboard=(0,u.Sb)(N.dashboard,{name:"",generation:0,resourceVersion:"0",creationTimestamp:""})),N?.meta&&(N.meta.canSave=!1,N.meta.canShare=!1,N.meta.canStar=!1),N}async loadHomeDashboard(){const N=await this.fetchHomeDashboard();return N?(0,C.wM)(N):null}async loadSnapshot(N){try{const W=await this.loadSnapshotScene(N);this.setState({dashboard:W,isLoading:!1})}catch(W){const R=(0,h.do)(W),G=(0,h.q6)(W),w=(0,h.rE)(W);if(this.setState({isLoading:!1,loadError:{status:R,message:G,messageId:w}}),W instanceof E.P)throw W}}async loadProvisioningDashboard(N,W){const G=new URLSearchParams(window.location.search).get("ref")??void 0,w=`${i.C}/repositories/${N}/files/${W}`;return(0,s.AI)().get(w,G?{ref:G}:void 0).then(_=>{const Q=_.resource.dryRun;return Q?Q.apiVersion.startsWith("dashboard.grafana.app")?this.processDashboardFromProvisioning(N,W,Q,{file:w,ref:G,repo:N}):Promise.reject("unexpected resource type: "+Q.apiVersion):Promise.reject("failed to read provisioned dashboard")})}processDashboardFromProvisioning(N,W,R,G){if(R.apiVersion.split("/")[1]==="v2beta1")return{...R,kind:"DashboardWithAccessInfo",access:{canStar:!1,isSnapshot:!1,canShare:!1,canDelete:!0,canSave:!0,canEdit:!0}};let w=R.metadata.annotations;w||(R.metadata.annotations={}),w[g.LH]="repo",w[g.Jw]=N,w[g.Y_]=G.ref?W+"#"+G.ref:W;const _={...R.spec,version:R.metadata.generation||0};return{meta:{canStar:!1,isSnapshot:!1,canShare:!1,canDelete:!0,canSave:!0,canEdit:!0,k8s:R.metadata,provisioning:G},dashboard:_}}async loadDashboard(N){try{(0,f.j)(S);const W=await this.loadScene(N);if(!W)return;l.$.featureToggles.preserveDashboardStateWhenNavigating&&N.uid&&(0,P.Gq)(W),this.setState({dashboard:W,isLoading:!1});const R=(0,f.z)(S),G=c.jh.getQueryController(W);(0,d.Dd)(W,R?.duration),G?.startProfile("dashboard_view"),N.route!==x.Z4.New&&(0,y.B)({meta:W.state.meta,uid:W.state.uid,title:W.state.title,id:W.state.id})}catch(W){const R=(0,h.do)(W),G=(0,h.q6)(W),w=(0,h.rE)(W);if(this.setState({isLoading:!1,loadError:{status:R,message:G,messageId:w}}),(0,s.NF)(W)||console.error("Error loading dashboard:",W),W instanceof E.P)throw W}}async loadScene(N){if(this.setState({dashboard:void 0,isLoading:!0}),N.route===x.Z4.Home)return await this.loadHomeDashboard();const W=await this.fetchDashboard(N);return W?this.transformResponseToScene(W,N):null}getDashboardFromCache(N){const W=this.dashboardCache;return W&&W.cacheKey===N&&Date.now()-W?.ts<O?W.dashboard:null}clearState(){(0,m.UA)().setCurrent(void 0),this.setState({dashboard:void 0,loadError:void 0,isLoading:!1,panelEditor:void 0})}setDashboardCache(N,W){this.dashboardCache={dashboard:W,ts:Date.now(),cacheKey:N}}clearDashboardCache(){this.dashboardCache=void 0}getSceneFromCache(N){return this.cache[N]}setSceneCache(N,W){this.cache[N]=W}removeSceneCache(N){delete this.cache[N]}clearSceneCache(){this.cache={}}}class U extends K{transformResponseToScene(N,W){const R=this.getSceneFromCache(W.uid);if(R&&R.state.version===N?.dashboard.version&&R.state.meta.created===N?.meta.created)return R;if(N?.dashboard){const G=(0,C.wM)(N);return W.uid&&this.setSceneCache(W.uid,G),G}throw new Error("Dashboard not found")}async loadSnapshotScene(N){const W=await p.np.loadSnapshot(N);if(W?.dashboard)return(0,C.wM)(W);throw new Error("Snapshot not found")}async fetchDashboard({type:N,slug:W,uid:R,route:G,urlFolderUid:w}){const _=G===x.Z4.Home?B:R,Q=this.getDashboardFromCache(_);if(Q)return Q;let ae;try{switch(G){case x.Z4.Home:const q=await this.fetchHomeDashboard();if(!q)return null;ae=q;break;case x.Z4.New:ae=await(0,b.X)(w);break;case x.Z4.Provisioning:return this.loadProvisioningDashboard(W||"",R);case x.Z4.Public:return await p.np.loadDashboard("public","",R);default:if(l.$.featureToggles.reloadDashboardsOnParamsChange){const k=(0,T.h)();ae=await p.np.loadDashboard(N||"db",W||"",R,k)}else ae=await p.np.loadDashboard(N||"db",W||"",R);G===x.Z4.Embedded&&(ae.meta.isEmbedded=!0)}if(ae.meta.url&&G===x.Z4.Normal){const q=n.I.stripBaseFromUrl(ae.meta.url),k=r.Ny.getLocation().pathname;q!==k&&(r.Ny.replace({...r.Ny.getLocation(),pathname:q}),console.log("not correct url correcting",q,k))}ae.meta.folderUid&&await(0,T.Q)(ae.meta.folderUid),this.setDashboardCache(_,ae)}catch(q){if((0,s.NF)(q)&&q.cancelled)return null;throw q}return ae}async reloadDashboard(N){const W=this.state.dashboard;if(!W||!W.state.uid)return;const R=W.state.uid;try{this.setState({isLoading:!0});const G=await p.np.loadDashboard("db",W.state.meta.slug,R,N),w=this.getSceneFromCache(R);if(w&&w.state.version===G?.dashboard.version&&w.state.version===this.state.dashboard?.state.version){this.setState({isLoading:!1});return}if(!G?.dashboard){this.setState({isLoading:!1,loadError:{status:404,message:(0,a.t)("dashboard-scene.dashboard-scene-page-state-manager.message.dashboard-not-found","Dashboard not found")}});return}const _=(0,C.wM)(G);l.$.featureToggles.preserveDashboardStateWhenNavigating&&R&&(0,P.Gq)(_),this.setSceneCache(R,_),this.setState({dashboard:_,isLoading:!1})}catch(G){const w=(0,h.do)(G),_=(0,h.q6)(G);if(this.setState({isLoading:!1,loadError:{message:_,status:w}}),G instanceof E.P)throw G}}}class F extends K{constructor(){super(...arguments),this.dashboardLoader=new p.t0}async loadSnapshotScene(N){const W=await this.dashboardLoader.loadSnapshot(N);if(W?.spec)return(0,D.dj)(W);throw new Error("Snapshot not found")}transformResponseToScene(N,W){const R=this.getSceneFromCache(W.uid);if(R&&R.state.version===N?.metadata.generation)return R;if(N){const G=(0,D.dj)(N);return W.uid&&this.setSceneCache(W.uid,G),G}throw new Error("Dashboard not found")}async fetchDashboard({type:N,slug:W,uid:R,route:G,urlFolderUid:w}){const _=G===x.Z4.Home?B:R,Q=this.getDashboardFromCache(_);if(Q)return Q;let ae;try{switch(G){case x.Z4.New:ae=await(0,b.V)(w);break;case x.Z4.Provisioning:return await this.loadProvisioningDashboard(W||"",R);case x.Z4.Public:return await this.dashboardLoader.loadDashboard("public","",R);default:ae=await this.dashboardLoader.loadDashboard(N||"db",W||"",R),G===x.Z4.Embedded&&(ae.metadata.annotations=ae.metadata.annotations||{},ae.metadata.annotations[g.IC]="embedded")}if(ae.access.url&&G===x.Z4.Normal){const q=n.I.stripBaseFromUrl(ae.access.url),k=r.Ny.getLocation().pathname;q!==k&&(r.Ny.replace({...r.Ny.getLocation(),pathname:q}),console.log("not correct url correcting",q,k))}ae.metadata.annotations?.[g.ew]&&await(0,T.Q)(ae.metadata.annotations?.[g.ew]),this.setDashboardCache(_,ae)}catch(q){if((0,s.NF)(q)&&q.cancelled)return null;throw q}return ae}async reloadDashboard(N){const W=this.state.dashboard;if(!W||!W.state.uid)return;const R=W.state.uid;try{this.setState({isLoading:!0});const G=await this.dashboardLoader.loadDashboard("db",W.state.meta.slug,R,N),w=this.getSceneFromCache(R);if(w&&w.state.version===G?.metadata.generation&&w.state.version===this.state.dashboard?.state.version){this.setState({isLoading:!1});return}if(!G?.spec){this.setState({isLoading:!1,loadError:{status:404,message:(0,a.t)("dashboard-scene.dashboard-scene-page-state-manager-v2.message.dashboard-not-found","Dashboard not found")}});return}const _=(0,D.dj)(G);l.$.featureToggles.preserveDashboardStateWhenNavigating&&R&&(0,P.Gq)(_),this.setSceneCache(R,_),this.setState({dashboard:_,isLoading:!1})}catch(G){const w=(0,h.do)(G),_=(0,h.q6)(G);if(this.setState({isLoading:!1,loadError:{message:_,status:w}}),G instanceof E.P)throw G}}}class I extends K{constructor(N){super(N),this.v1Manager=new U(N),this.v2Manager=new F(N),this.activeManager=this.v1Manager}async withVersionHandling(N){try{return await N(this.activeManager)}catch(W){if(W instanceof E.P){const R=(0,v.Y)(W.data.storedVersion)?this.v2Manager:this.v1Manager;return this.activeManager=R,await N(R)}else throw W}finally{this.setState(this.activeManager.state)}}async fetchDashboard(N){return this.withVersionHandling(W=>W.fetchDashboard(N))}async reloadDashboard(N){return this.withVersionHandling(W=>W.reloadDashboard.call(this,N))}getDashboardFromCache(N){return this.activeManager.getDashboardFromCache(N)}transformResponseToScene(N,W){return N?(0,v.HG)(N)?(this.activeManager=this.v2Manager,this.v2Manager.transformResponseToScene(N,W)):this.v1Manager.transformResponseToScene(N,W):null}async loadSnapshotScene(N){try{return await this.v1Manager.loadSnapshotScene(N)}catch(W){if(W instanceof E.P&&(0,v.Y)(W.data.storedVersion))return await this.v2Manager.loadSnapshotScene(N);throw new Error("Snapshot not found")}}async loadSnapshot(N){return this.withVersionHandling(W=>W.loadSnapshot.call(this,N))}clearDashboardCache(){this.v1Manager.clearDashboardCache(),this.v2Manager.clearDashboardCache()}clearSceneCache(){this.v1Manager.clearSceneCache(),this.v2Manager.clearSceneCache(),this.cache={}}getSceneFromCache(N){return this.activeManager.getSceneFromCache(N)}setSceneCache(N,W){this.activeManager.setSceneCache(N,W)}removeSceneCache(N){this.v1Manager.removeSceneCache(N),this.v2Manager.removeSceneCache(N)}getCache(){return this.activeManager.getCache()}setDashboardCache(N,W){(0,v.HG)(W)?this.v2Manager.setDashboardCache(N,W):this.v1Manager.setDashboardCache(N,W)}async loadDashboard(N){if(N.route===x.Z4.New){const W=l.$.featureToggles.dashboardNewLayouts?"v2":"v1";this.setActiveManager(W)}return this.withVersionHandling(W=>W.loadDashboard.call(this,N))}setActiveManager(N){N==="v1"?this.activeManager=this.v1Manager:this.activeManager=this.v2Manager}resetActiveManager(){this.setActiveManager("v1")}}const V={v1:void 0,v2:void 0,unified:void 0};function M(L){return L==="v1"?(V.v1||(V.v1=new U({})),V.v1):L==="v2"?(V.v2||(V.v2=new F({})),V.v2):(V.unified||(V.unified=new I({})),V.unified)}},41667:(ne,A,e)=>{"use strict";e.d(A,{R:()=>c,d:()=>r});var n=e(45863),a=e(97335),s=e(30643),l=e(98279);function r(i,o){if(o.current?.isConnected){c(o.current);return}let h=i.parent;for(;h;){if(h instanceof a.o&&h.state.collapse&&h.onCollapseToggle(),h instanceof n.tI&&h.state.isCollapsed&&h.onCollapseToggle(),h instanceof s.V){const f=h.parent;f instanceof l.K&&f.getCurrentTab()!==h&&f.switchToTab(h)}h=h.parent}setTimeout(()=>{o.current?.isConnected&&c(o.current)},10)}function c(i){i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}},41776:(ne,A,e)=>{"use strict";e.d(A,{p:()=>S});var n=e(74848),a=e(22803),s=e(2543),l=e(96540),r=e(92745),c=e(27489),i=e(43173),o=e(63142),h=e(22787),f=e(63527),g=e(30703),u=e(92807),E=e(40279),v=e(44515),p=e(22747),m=e(42227),y=e(6079),d=e(51898),x=e(85032),b=e(7078);function D(K){switch(K){case"grafana":return(0,r.t)("data-source-picker.built-in-list.description-grafana","Discover visualizations using mock data");case"-- Mixed --":return(0,r.t)("data-source-picker.built-in-list.description-mixed","Use multiple data sources");case"-- Dashboard --":return(0,r.t)("data-source-picker.built-in-list.description-dashboard","Reuse query results from other visualizations");default:return""}}function C({className:K,current:U,onChange:F,tracing:I,dashboard:V,mixed:M,metrics:L,type:N,annotations:W,variables:R,alerting:G,pluginId:w,logs:_,filter:Q}){const q=(0,m.Kr)({tracing:I,dashboard:V,mixed:M,metrics:L,type:N,annotations:W,variables:R,alerting:G,pluginId:w,logs:_}).filter(k=>(Q?Q?.(k):!0)&&!!k.meta.builtIn);return(0,n.jsx)("div",{className:K,"data-testid":d.Tp.components.DataSourcePicker.advancedModal.builtInDataSourceList,children:q.map(k=>(0,n.jsx)(x.A,{ds:k,description:D(k.uid),selected:(0,b.Df)(k,U),onClick:()=>F(k)},k.uid))})}var P=e(93602);const T="dashboards_dspickermodal_clicked",O={SELECT_DS:"select_ds",UPLOAD_FILE:"upload_file",CONFIG_NEW_DS:"config_new_ds",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",SEARCH:"search",DISMISS:"dismiss"};function S({tracing:K,dashboard:U,mixed:F,metrics:I,type:V,annotations:M,variables:L,alerting:N,pluginId:W,logs:R,uploadFile:G,filter:w,onChange:_,current:Q,onDismiss:ae,reportedInteractionFrom:q}){const k=(0,o.of)(B),[ee,j]=(0,l.useState)(""),J=q||"modal",Z=()=>{ae(),(0,c.rR)(T,{item:O.DISMISS,src:J})},te=ue=>{_(ue),(0,c.rR)(T,{item:O.SELECT_DS,ds_type:ue.type,src:J})},se=(0,l.useMemo)(()=>(0,s.once)(()=>{(0,c.rR)(T,{item:"search",src:J})}),[J]),ie=(0,m.ps)("-- Grafana --"),ce=(0,p.j)((ue,X)=>{ie&&(_(ie,[ue]),(0,c.rR)(T,{item:O.UPLOAD_FILE,src:J}),X.length<1&&ae())}),re=({className:ue})=>(0,n.jsx)(C,{className:ue,onChange:te,current:Q,filter:w,variables:L,tracing:K,metrics:I,type:V,annotations:M,alerting:N,pluginId:W,logs:R,dashboard:U,mixed:F});return(0,n.jsxs)(h.a,{title:(0,r.t)("data-source-picker.modal.title","Select data source"),closeOnEscape:!0,closeOnBackdropClick:!0,isOpen:!0,className:k.modal,contentClassName:k.modalContent,onClickBackdrop:Z,onDismiss:Z,children:[(0,n.jsxs)("div",{className:k.leftColumn,children:[(0,n.jsx)(f.p,{type:"search",autoFocus:!0,className:k.searchInput,value:ee,prefix:(0,n.jsx)(g.I,{name:"search"}),placeholder:(0,r.t)("data-source-picker.modal.input-placeholder","Select data source"),onChange:ue=>{j(ue.currentTarget.value),se()}}),(0,n.jsxs)(u.P,{children:[(0,n.jsx)(P.S,{onChange:te,current:Q,onClickEmptyStateCTA:()=>(0,c.rR)(T,{item:O.CONFIG_NEW_DS_EMPTY_STATE,src:J}),filter:ue=>(w?w?.(ue):!0)&&(0,b.Zn)(ue,ee)&&!ue.meta.builtIn,variables:L,tracing:K,metrics:I,type:V,annotations:M,alerting:N,pluginId:W,logs:R,dashboard:U,mixed:F}),(0,n.jsx)(re,{className:k.appendBuiltInDataSourcesList})]})]}),(0,n.jsxs)("div",{className:k.rightColumn,children:[(0,n.jsxs)("div",{className:k.builtInDataSources,children:[(0,n.jsx)("div",{className:k.builtInDataSourcesList,children:(0,n.jsx)(u.P,{children:(0,n.jsx)(re,{})})}),G&&i.$.featureToggles.editPanelCSVDragAndDrop&&(0,n.jsx)(E.gH,{readAs:"readAsArrayBuffer",fileListRenderer:()=>{},options:{maxSize:v.o,multiple:!1,accept:v.Z,onDrop:ce},children:(0,n.jsx)(E.wI,{})})]}),(0,n.jsxs)("div",{className:k.newDSSection,children:[(0,n.jsx)("span",{className:k.newDSDescription,children:(0,n.jsx)(r.x6,{i18nKey:"data-source-picker.modal.configure-new-data-source",children:"Open a new tab and configure a data source"})}),(0,n.jsx)(y.r,{variant:"secondary",onClick:()=>{(0,c.rR)(T,{item:O.CONFIG_NEW_DS,src:J}),ae()}})]})]})]})}function B(K){return{modal:(0,a.css)({width:"80%",maxWidth:"1200px",minHeight:"80%",[K.breakpoints.down("md")]:{width:"100%"}}),modalContent:(0,a.css)({display:"flex",flexDirection:"row",flex:1,[K.breakpoints.down("md")]:{flexDirection:"column"}}),leftColumn:(0,a.css)({display:"flex",flexDirection:"column",width:"50%",maxHeight:"100%",paddingRight:K.spacing(4),borderRight:`1px solid ${K.colors.border.weak}`,[K.breakpoints.down("md")]:{width:"100%",borderRight:0,paddingRight:0,flex:1,overflowY:"auto"}}),rightColumn:(0,a.css)({display:"flex",flexDirection:"column",width:"50%",minHeight:"100%",justifyItems:"space-evenly",alignItems:"stretch",paddingLeft:K.spacing(4),[K.breakpoints.down("md")]:{width:"100%",paddingLeft:0,flexShrink:0}}),builtInDataSources:(0,a.css)({flex:"1 1",marginBottom:K.spacing(4),[K.breakpoints.down("md")]:{flex:0}}),builtInDataSourcesList:(0,a.css)({[K.breakpoints.down("md")]:{display:"none",marginBottom:0},marginBottom:K.spacing(4)}),appendBuiltInDataSourcesList:(0,a.css)({[K.breakpoints.up("md")]:{display:"none"}}),newDSSection:(0,a.css)({display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"center"}),newDSDescription:(0,a.css)({flex:"1 0",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",color:K.colors.text.secondary}),searchInput:(0,a.css)({width:"100%",minHeight:"32px",marginBottom:K.spacing(1)})}}},42004:(ne,A,e)=>{"use strict";e.d(A,{PE:()=>j,OJ:()=>Ce});var n=e(74848),a=e(22803),s=e(2543),l=e(55127),r=e.n(l),c=e(96540),i=e(42941),o=e(92745),h=e(63142),f=e(41654),g=e(76319),u=e(45861),E=e(88559),v=e(87063),p=e(66404),m=e(45967),y=e(99887),d=e(30703),x=e(89640),b=e(48542),D=e(10427),C=e(50072),P=e(16194),T=e(24961),O=e(84266),S=e(16692),B=e(86017),K=e(63895),U=e(77256),F=e(48442),I=e(24898),V=e(38055),M=e(78793),L=e(1625),N=e(1972),W=e(49779),R=e(6975),G=e(70327),w=e(77880),_=e(25149),Q=e(78102);const ae=({exportFormat:Te,onClose:$e})=>{const{currentData:Re="",isFetching:Ke}=G.hK.useExportPoliciesQuery({format:Te}),Ve=`policies-${new Date().getTime()}`;return Ke?(0,n.jsx)(R._,{text:(0,o.t)("alerting.grafana-policies-exporter-preview.text-loading","Loading....")}):(0,n.jsx)(w.J,{format:Te,textDefinition:Re,downloadFileName:Ve,onClose:$e})},q=({onClose:Te})=>{const[$e,Re]=(0,c.useState)("yaml");return(0,n.jsx)(_.m,{activeTab:$e,onTabChange:Re,onClose:Te,formatProviders:Object.values(Q.sl),children:(0,n.jsx)(ae,{exportFormat:$e,onClose:Te})})};var k=e(92125);const ee=20,j=Te=>{const{receivers:$e=[],contactPointsState:Re,readOnly:Ke=!1,provisioned:Ve=!1,alertManagerSourceName:Se,currentRoute:Ye,inheritedProperties:Ue,routesMatchingFilters:je={filtersApplied:!1,matchedRoutesWithPath:new Map},matchingInstancesPreview:Qe={enabled:!1},onEditPolicy:He,onAddPolicy:Je,onDeletePolicy:de,onShowAlertInstances:ve,isAutoGenerated:me=!1,isDefaultPolicy:xe=!1}=Te,Ee=(0,h.of)(Me),Pe=Ye.receiver,Oe=Ye.continue??!1,We=(0,K.J$)(Ye),Fe=!!(We&&We.length),{filtersApplied:Be,matchedRoutesWithPath:Le}=je,Ge=Array.from(Le.keys()),Ze=Be&&Ge.some(Xn=>Xn.id===Ye.id),qe=Array.from(Le.values()).flat(),at=qe.some(Xn=>Xn.id===Ye.id),ht=[],Et=!Fe&&!xe&&!Oe,mt=Pe??Ue?.receiver??"",Pt=Re?_e(mt,Re):[],rt=Ye.routes??[],Kt=Be?rt.filter(Xn=>qe.some(Oa=>Oa.id===Xn.id)):rt,Gt=Kt.length>0,[en,st]=(0,i.A)(!1),$t=Qe?.groupsMap?.get(Ye.id),xn=$t?(0,s.sumBy)($t,Xn=>Xn.alerts.length):void 0,[pn,_n]=(0,S.L7)(S.QI.ViewAutogeneratedPolicyTree),kn=se(Ye),[Jn,pt]=(0,i.A)(!kn),Rt=Ye.group_by,Mt=Ye.mute_time_intervals??[],Bt=Ye.active_time_intervals??[],Nt={group_wait:Ye.group_wait,group_interval:Ye.group_interval,repeat_interval:Ye.repeat_interval};Pt.forEach(Xn=>{ht.push(Xn)});const[Yt,Qt]=(0,c.useState)(ee),En=Z(me,xe,Ve,He,Ye,st,de);if(me&&(!_n||!pn)||Be&&!at)return null;const mn=xe||kn,wn=Kt.filter(Xn=>qe.some(Oa=>Oa.id===Xn.id)),Ln=Be?wn:Kt,Zn=Ln.slice(0,Yt),da=Ln.length-Zn.length,Pa=da>0;return(0,n.jsxs)(f.B,{direction:"column",gap:1.5,children:[(0,n.jsxs)("div",{className:Ee.policyWrapper(Ze),"data-testid":xe?"am-root-route-container":"am-route-container",children:[Oe&&(0,n.jsx)(re,{}),Et&&(0,n.jsx)(ue,{}),(0,n.jsx)("div",{className:Ee.policyItemWrapper,children:(0,n.jsxs)(f.B,{direction:"column",gap:1,children:[(0,n.jsx)("div",{children:(0,n.jsxs)(f.B,{direction:"row",alignItems:"center",gap:1,children:[Gt?(0,n.jsx)(g.K,{name:Jn?"angle-down":"angle-right",onClick:pt,"aria-label":Jn?(0,o.t)("alerting.policies.aria-label-collapse","Collapse"):(0,o.t)("alerting.policies.aria-label-expand","Expand")}):null,mn&&(0,n.jsx)(n.Fragment,{children:kn?(0,n.jsx)(le,{}):(0,n.jsx)(X,{})}),!mn&&(0,n.jsx)(n.Fragment,{children:Fe?(0,n.jsx)(k.s,{matchers:We??[],formatter:(0,B.VE)(Se)}):(0,n.jsx)("span",{className:Ee.metadata,children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.no-matchers",children:"No matchers"})})}),(0,n.jsx)(W.h,{}),ht.length>0&&(0,n.jsx)(ce,{errors:ht}),Ve&&(0,n.jsx)(N.rS,{}),(0,n.jsxs)(f.B,{direction:"row",gap:.5,children:[!me&&!Ke&&(0,n.jsx)(I._,{actions:[S.QI.CreateNotificationPolicy],children:(0,n.jsx)(D.A,{shouldWrap:Ve,wrap:ie,children:xe?(0,n.jsx)(u.$n,{variant:"secondary",icon:"plus",size:"sm",disabled:Ve,type:"button",onClick:()=>Je(Ye,"child"),children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.new-child",children:"New child policy"})}):(0,n.jsx)(E.m,{overlay:(0,n.jsxs)(v.W,{children:[(0,n.jsx)(v.W.Item,{label:(0,o.t)("alerting.policy.label-new-sibling-above","New sibling above"),icon:"arrow-up",onClick:()=>Je(Ye,"above")}),(0,n.jsx)(v.W.Item,{label:(0,o.t)("alerting.policy.label-new-sibling-below","New sibling below"),icon:"arrow-down",onClick:()=>Je(Ye,"below")}),(0,n.jsx)(v.W.Divider,{}),(0,n.jsx)(v.W.Item,{label:(0,o.t)("alerting.policy.label-new-child-policy","New child policy"),icon:"plus",onClick:()=>Je(Ye,"child")})]}),children:(0,n.jsx)(u.$n,{size:"sm",variant:"secondary",disabled:Ve,icon:"angle-down",type:"button",children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.new-policy",children:"Add new policy"})})})})}),En.length>0&&(0,n.jsx)(E.m,{overlay:(0,n.jsx)(v.W,{children:En}),children:(0,n.jsx)(C.A,{"aria-label":xe?(0,o.t)("alerting.policies.aria-label-more-default","more actions for default policy"):(0,o.t)("alerting.policies.aria-label-more","more actions for policy"),"data-testid":"more-actions"})})]})]})}),(0,n.jsx)(J,{matchingInstancesPreview:Qe,numberOfAlertInstances:xn,contactPoint:Pe??void 0,groupBy:Rt,muteTimings:Mt,activeTimings:Bt,timingOptions:Nt,inheritedProperties:Ue,alertManagerSourceName:Se,receivers:$e,matchingAlertGroups:$t,matchers:We,isDefaultPolicy:xe,onShowAlertInstances:ve})]})})]}),(0,n.jsx)("div",{className:Ee.childPolicies,children:Jn&&(0,n.jsxs)(n.Fragment,{children:[Zn.map(Xn=>{const Oa=(0,F.W$)(Ye,Xn,Ue),ba=se(Xn)||me,oa=Ke||Ve||me;return(0,n.jsx)(j,{currentRoute:Xn,receivers:$e,contactPointsState:Re,readOnly:oa,inheritedProperties:Oa,onAddPolicy:Je,onEditPolicy:He,onDeletePolicy:de,onShowAlertInstances:ve,alertManagerSourceName:Se,routesMatchingFilters:je,matchingInstancesPreview:Qe,isAutoGenerated:ba,provisioned:Ve},Xn.id)}),Pa&&(0,n.jsx)(u.$n,{size:"sm",icon:"angle-down",variant:"secondary",className:Ee.moreButtons,onClick:()=>Qt(Yt+ee),children:(0,n.jsxs)(o.x6,{i18nKey:"alerting.policies.n-more-policies",count:da,children:[{count:da}," additional policies"]})})]})}),en&&(0,n.jsx)(q,{onClose:st})]})};function J({numberOfAlertInstances:Te,isDefaultPolicy:$e,timingOptions:Re,groupBy:Ke,muteTimings:Ve=[],activeTimings:Se=[],matchingInstancesPreview:Ye,inheritedProperties:Ue,matchingAlertGroups:je,onShowAlertInstances:Qe,matchers:He,contactPoint:Je,alertManagerSourceName:de,receivers:ve}){const me=(0,h.of)(Me),xe=Ue&&Ue.group_by,Ee=Ue&&Object.keys(Ue).length>0,Pe=(0,s.isArray)(Ke)&&Ke[0]==="...",Oe=!Pe&&(0,s.isArray)(Ke)&&Ke.length>0,We=$e&&(0,s.isArray)(Ke)&&Ke.length===0,Fe=!!Ve.length,Be=!!Se.length;return(0,n.jsx)("div",{className:me.metadataRow,children:(0,n.jsxs)(f.B,{direction:"row",alignItems:"center",gap:1,children:[Ye.enabled&&(0,n.jsxs)(L.P,{icon:"layers-alt",onClick:()=>{je&&Qe(je,He,(0,B.VE)(de))},"data-testid":"matching-instances",children:[(0,n.jsx)(p.E,{color:"primary",children:Te??"-"}),(0,n.jsx)("span",{children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.metadata.n-instances",count:Te??0,children:"instance"})})]}),Je&&(0,n.jsxs)(L.P,{icon:"at","data-testid":"contact-point",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.metadata.delivered-to",children:"Delivered to"})," "]}),(0,n.jsx)(Ae,{alertManagerSourceName:de,receivers:ve,contactPoint:Je})]}),!xe&&(0,n.jsxs)(n.Fragment,{children:[Oe&&(0,n.jsxs)(L.P,{icon:"layer-group","data-testid":"grouping",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.metadata.grouped-by",children:"Grouped by"})," "]}),(0,n.jsx)(p.E,{color:"primary",children:Ke.join(", ")})]}),We&&(0,n.jsx)(L.P,{icon:"layer-group",children:(0,n.jsx)("span",{children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.metadata.grouping.single-group",children:"Single group"})})}),Pe&&(0,n.jsx)(L.P,{icon:"layer-group",children:(0,n.jsx)("span",{children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.metadata.grouping.none",children:"Not grouping"})})})]}),Fe&&(0,n.jsxs)(L.P,{icon:"calendar-slash","data-testid":"mute-timings",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.metadata.mute-time",children:"Muted when"})," "]}),(0,n.jsx)(fe,{timings:Ve,alertManagerSourceName:de})]}),Be&&(0,n.jsxs)(L.P,{icon:"calendar-alt","data-testid":"active-timings",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.metadata.active-time",children:"Active when"})," "]}),(0,n.jsx)(fe,{timings:Se,alertManagerSourceName:de})]}),Re&&(0,n.jsx)(Ce,{timingOptions:Re}),Ee&&(0,n.jsxs)(L.P,{icon:"corner-down-right-alt","data-testid":"inherited-properties",children:[(0,n.jsx)("span",{children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.metadata.inherited",children:"Inherited"})}),(0,n.jsx)(he,{properties:Ue})]})]})})}const Z=(Te,$e,Re,Ke,Ve,Se,Ye)=>{const[[Ue,je],[Qe,He],[Je,de]]=(0,S.Hl)([S.QI.UpdateNotificationPolicyTree,S.QI.DeleteNotificationPolicy,S.QI.ExportNotificationPolicies]),ve=[],me=de&&Je&&$e&&!Te,xe=Ue&&je,Ee=Qe&&He&&!$e&&!Te;return xe&&ve.push((0,n.jsx)(c.Fragment,{children:(0,n.jsx)(D.A,{shouldWrap:Re,wrap:ie,children:(0,n.jsx)(v.W.Item,{icon:"edit",disabled:Re||Te,label:(0,o.t)("alerting.use-create-dropdown-menu-actions.label-edit","Edit"),onClick:()=>Ke(Ve,$e)})})},"edit-policy")),me&&ve.push((0,n.jsx)(v.W.Item,{icon:"download-alt",label:(0,o.t)("alerting.use-create-dropdown-menu-actions.label-export","Export"),onClick:Se},"export-policy")),Ee&&ve.push((0,n.jsxs)(c.Fragment,{children:[(0,n.jsx)(v.W.Divider,{}),(0,n.jsx)(D.A,{shouldWrap:Re,wrap:ie,children:(0,n.jsx)(v.W.Item,{destructive:!0,icon:"trash-alt",disabled:Re||Te,label:(0,o.t)("alerting.use-create-dropdown-menu-actions.label-delete","Delete"),onClick:()=>Ye(Ve)})})]},"delete-policy")),ve},te="__grafana_autogenerated__";function se(Te){return Te.object_matchers?Te.object_matchers.some($e=>$e[0]===te&&$e[1]===O.ho.equal&&$e[2]==="true")??!1:!1}const ie=Te=>(0,n.jsx)(m.m,{content:(0,o.t)("alerting.provisioned-tooltip.content-provisioned-items-cannot-edited","Provisioned items cannot be edited in the UI"),placement:"top",children:(0,n.jsx)("span",{children:Te})}),ce=({errors:Te})=>(0,n.jsx)(V.B,{arrow:!0,placement:"top",content:(0,n.jsx)(f.B,{direction:"column",gap:.5,children:Te.map($e=>(0,n.jsx)(c.Fragment,{children:$e},(0,s.uniqueId)()))}),children:(0,n.jsx)("span",{children:(0,n.jsx)(y.E,{icon:"exclamation-circle",color:"red",text:r()("error",Te.length,!0)})})}),re=()=>{const Te=(0,h.of)(Me);return(0,n.jsx)(m.m,{placement:"top",content:(0,o.t)("alerting.continue-matching-indicator.content-route-continue-matching-other-policies","This route will continue matching other policies"),children:(0,n.jsx)("div",{className:Te.gutterIcon,"data-testid":"continue-matching",children:(0,n.jsx)(d.I,{name:"arrow-down"})})})},ue=()=>{const Te=(0,h.of)(Me);return(0,n.jsx)(m.m,{placement:"top",content:(0,o.t)("alerting.all-matches-indicator.content-this-policy-matches-all-labels","This policy matches all labels"),children:(0,n.jsx)("div",{className:Te.gutterIcon,"data-testid":"matches-all",children:(0,n.jsx)(d.I,{name:"exclamation-triangle"})})})};function X(){const Te=(0,h.of)(Me);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.E,{element:"h2",variant:"body",weight:"medium",children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.default-policy.title",children:"Default policy"})}),(0,n.jsx)("span",{className:Te.metadata,children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.default-policy.description",children:"All alert instances will be handled by the default policy if no other matching policies are found."})})]})}function le(){return(0,n.jsx)(p.E,{element:"h3",variant:"body",weight:"medium",children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.generated-policies",children:"Auto-generated policies"})})}const he=({properties:Te})=>(0,n.jsx)(V.B,{arrow:!0,placement:"top",content:(0,n.jsx)(f.B,{direction:"row",gap:.5,children:Object.entries(Te).map(([$e,Re])=>Re?(0,n.jsx)(M.J,{label:Xe($e),value:De($e,Re)},$e):null)}),children:(0,n.jsx)("div",{children:(0,n.jsx)(p.E,{color:"primary",children:r()("property",Object.keys(Te).length,!0)})})}),fe=({timings:Te,alertManagerSourceName:$e})=>{const[,Re]=(0,S.L7)(S.QI.ViewTimeInterval);return(0,n.jsx)("div",{children:Te.map((Ke,Ve)=>{const Se=Re?x.Y:p.E;return(0,n.jsxs)(c.Fragment,{children:[(0,n.jsx)(Se,{href:(0,U.i7)(Ke,$e),color:Re?"primary":"secondary",variant:"bodySmall",inline:Re?!1:void 0,children:Ke}),Ve<Te.length-1&&", "]},Ke)})})},Ce=({timingOptions:Te})=>{const $e=Te.group_wait,Re=Te.group_interval,Ke=Te.repeat_interval;if(!$e&&!Re&&!Ke)return null;const Ve=[];return $e&&Ve.push((0,n.jsx)(m.m,{placement:"top",content:(0,o.t)("alerting.policies.metadata.timingOptions.groupWait.description","How long to initially wait to send a notification for a group of alert instances."),children:(0,n.jsx)("span",{children:(0,n.jsxs)(o.x6,{i18nKey:"alerting.policies.metadata.timingOptions.groupWait.label",children:["Wait ",(0,n.jsx)(P.S,{content:$e})," to group instances"]})})})),Re&&Ve.push((0,n.jsx)(m.m,{placement:"top",content:(0,o.t)("alerting.policies.metadata.timingOptions.groupInterval.description","How long to wait before sending a notification about new alerts that are added to a group of alerts for which an initial notification has already been sent."),children:(0,n.jsx)("span",{children:(0,n.jsxs)(o.x6,{i18nKey:"alerting.policies.metadata.timingOptions.groupInterval.label",children:["Wait ",(0,n.jsx)(P.S,{content:Re})," before sending updates"]})})})),Ke&&Ve.push((0,n.jsx)(m.m,{placement:"top",content:(0,o.t)("alerting.policies.metadata.timingOptions.repeatInterval.description","How often notifications are sent if the group of alerts has not changed since the last notification."),children:(0,n.jsx)("span",{children:(0,n.jsxs)(o.x6,{i18nKey:"alerting.policies.metadata.timingOptions.repeatInterval.label",children:["Repeated every ",(0,n.jsx)(P.S,{content:Ke})]})})})),(0,n.jsx)(L.P,{icon:"hourglass","data-testid":"timing-options",children:Ve.map((Se,Ye)=>(0,n.jsxs)("span",{children:[Se,Ye<Ve.length-1&&" \xB7 "]},(0,s.uniqueId)()))})},Ae=({alertManagerSourceName:Te,contactPoint:$e,receivers:Re})=>{const Ke=Re.find(Ye=>Ye.name===$e);if(!Ke)return(0,n.jsx)(p.E,{color:"secondary",variant:"bodySmall",children:$e});const Ve=Ke.grafana_managed_receiver_configs,Se="id"in Ke&&Ke.id?(0,U.bg)(Ke.id,Te):(0,U.bI)(Ke.name,Te);return(0,n.jsx)(V.B,{disabled:!Ve,arrow:!0,placement:"top",header:(0,n.jsx)(L.P,{icon:"at",children:(0,n.jsx)(p.E,{color:"primary",children:$e})}),content:(0,n.jsx)(p.E,{variant:"bodySmall",color:"secondary",children:(0,n.jsx)(T.yz,{receivers:Ke.grafana_managed_receiver_configs||[],limit:3})}),children:(0,n.jsx)(x.Y,{href:Se,color:"primary",variant:"bodySmall",inline:!1,children:$e})},(0,s.uniqueId)())};function _e(Te,$e){return Object.entries($e[Te]?.notifiers??[]).reduce((Ve=[],[Se,Ye])=>{const Ue=Ye.filter(je=>je.lastNotifyAttemptError).map(je=>(0,n.jsx)(M.J,{icon:"at",label:(0,o.t)("alerting.contact-point-errors.label-contact-point","Contact Point \u203A {{name}}",{name:je.name}),value:je.lastNotifyAttemptError},(0,s.uniqueId)()));return Ve.concat(Ue)},[])}const Xe=Te=>{switch(Te){case"receiver":return"Contact Point";case"group_by":return"Group by";case"group_interval":return"Group interval";case"group_wait":return"Group wait";case"repeat_interval":return"Repeat interval";default:return Te}},De=(Te,$e)=>{const Re=Te==="group_by"&&Array.isArray($e)&&$e[0]==="...",Ke=Te==="group_by"&&Array.isArray($e)&&$e.length===0;return Re?(0,n.jsx)(p.E,{variant:"bodySmall",color:"secondary",children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.metadata.grouping.none",children:"Not grouping"})}):Ke?(0,n.jsx)(p.E,{variant:"bodySmall",color:"secondary",children:(0,n.jsx)(o.x6,{i18nKey:"alerting.policies.metadata.grouping.single-group",children:"Single group"})}):Array.isArray($e)?$e.join(", "):$e},Me=Te=>({matcher:$e=>{const{color:Re,borderColor:Ke}=(0,b.MC)($e);return{wrapper:(0,a.css)({color:"#fff",background:Re,padding:`${Te.spacing(.33)} ${Te.spacing(.66)}`,fontSize:Te.typography.bodySmall.fontSize,border:`solid 1px ${Ke}`,borderRadius:Te.shape.radius.default})}},childPolicies:(0,a.css)({marginLeft:Te.spacing(4),position:"relative","&:before":{content:'""',position:"absolute",height:"calc(100% - 10px)",borderLeft:`solid 1px ${Te.colors.border.weak}`,marginTop:0,marginLeft:"-20px"}}),policyItemWrapper:(0,a.css)({padding:Te.spacing(1.5)}),metadataRow:(0,a.css)({borderBottomLeftRadius:Te.shape.borderRadius(2),borderBottomRightRadius:Te.shape.borderRadius(2)}),policyWrapper:($e=!1)=>(0,a.css)({flex:1,position:"relative",background:Te.colors.background.secondary,borderRadius:Te.shape.radius.default,border:`solid 1px ${Te.colors.border.weak}`,...$e&&{borderColor:Te.colors.primary.border,background:Te.colors.primary.transparent}}),metadata:(0,a.css)({color:Te.colors.text.secondary,fontSize:Te.typography.bodySmall.fontSize,fontWeight:Te.typography.bodySmall.fontWeight}),break:(0,a.css)({width:"100%",height:0,marginBottom:Te.spacing(2)}),gutterIcon:(0,a.css)({position:"absolute",top:0,transform:"translateY(50%)",left:`-${Te.spacing(4)}`,color:Te.colors.text.secondary,background:Te.colors.background.primary,width:"25px",height:"25px",textAlign:"center",border:`solid 1px ${Te.colors.border.weak}`,borderRadius:Te.shape.radius.default,padding:0}),moreButtons:(0,a.css)({marginTop:Te.spacing(.5),marginBottom:Te.spacing(1.5)})})},42073:(ne,A,e)=>{"use strict";e.d(A,{G:()=>c,Y:()=>i});var n=e(36613),a=e(74261),s=e(55386),l=e(739),r=e(62748);class c extends r.R{merge(h){this.props.min=i("min",this.props.min,h.min),this.props.max=i("max",this.props.max,h.max)}getConfig(){let{isTime:h,auto:f,scaleKey:g,min:u,max:E,softMin:v,softMax:p,range:m,direction:y,orientation:d,centeredZero:x,decimals:b,stackingMode:D,padMinBy:C=.1,padMaxBy:P=.1}=this.props;D===l.gs.Percent&&(u==null&&v==null&&(v=0),E==null&&p==null&&(p=1));const T=this.props.distribution,O=h?{}:{distr:T===l.L4.Symlog?4:T===l.L4.Log?3:T===l.L4.Ordinal?2:1,log:T===l.L4.Log||T===l.L4.Symlog?this.props.log??2:void 0,asinh:T===l.L4.Symlog?this.props.linearThreshold??1:void 0};if(T===l.L4.Log){let M=this.props.log,L=M===2?Math.log2:Math.log10;u!=null&&(u<=0?u=null:u=M**Math.floor(L(u))),E!=null&&(E<=0?E=null:E=M**Math.ceil(L(E))),v!=null&&(v<=0?v=null:v=M**Math.floor(L(v))),p!=null&&(p<=0?p=null:p=M**Math.ceil(L(p)))}let S=v==null?3:1,B=p==null?3:1;const K={min:{pad:C,hard:u??-1/0,soft:v||0,mode:S},max:{pad:P,hard:E??1/0,soft:p||0,mode:B}};let U=v==null&&u!=null,F=p==null&&E!=null,I=U&&F;const V=(M,L,N,W)=>{const R=M.scales[W];let G=[L,N];if(!I&&L==null&&N==null)return G;let w=R.log??10;if(R.distr===1||R.distr===2||R.distr===4){if(x){let _=Math.abs(L),Q=Math.abs(N),ae=Math.max(_,Q);ae===0&&(ae=80),L=-ae,N=ae}R.distr===4?G=n.A.rangeAsinh(L,N,w,!0):G=n.A.rangeNum(U?u:L,F?E:N,K)}else R.distr===3&&(G=n.A.rangeLog(u??L,E??N,w,!0));if(b===0)if(R.distr===1||R.distr===2)G[0]=(0,a.rs)(G[0],1),G[1]=(0,a.Uh)(G[1],1);else if(R.distr===3){let _=R.log===2?Math.log2:Math.log10;if(G[0]<=1)G[0]=1;else{let ae=Math.floor(_(G[0]));G[0]=w**ae}let Q=Math.ceil(_(G[1]));G[1]=w**Q,G[0]===G[1]&&(G[1]*=w)}else R.distr===4&&(G[0]=(0,a.rs)(G[0],1),G[1]=(0,a.Uh)(G[1],1));return(R.distr===1||R.distr===4)&&(U&&(G[0]=u),F&&(G[1]=E)),G[0]>=G[1]&&(G[0]=R.distr===3?1:0,G[1]=100),G};return f??=!h&&!I,(0,s.j9)(g)&&(f=!1,m=[0,1]),{[g]:{time:h,auto:f,range:m??V,dir:y,ori:d,...O}}}}function i(o,h,f){const g=h!=null,u=f!=null;return g?u?o==="min"?h<f?h:f:h>f?h:f:h:f}},42227:(ne,A,e)=>{"use strict";e.d(A,{Kr:()=>c,TX:()=>r,dR:()=>o,ps:()=>i});var n=e(96540),a=e(78685),s=e(78282);const l="grafana.features.datasources.components.picker.DataSourceDropDown.history";function r(){const[h=[],f]=(0,a.A)(l,[]),g=(0,n.useCallback)(u=>{if(!u.meta.builtIn)if(h.includes(u.uid))h.splice(h.findIndex(E=>u.uid===E),1),f([...h,u.uid]);else{const E=[...h,u.uid];E.length>5?f(E.slice(1,6)):f(E)}},[h,f]);return[h,g]}function c(h,f){return f||(0,s.l)().getList(h)}function i(h){const f=(0,s.l)();return f.getInstanceSettings(h)}function o(h){const{keyboardEvents:f,containerRef:g}=h,u=(0,n.useRef)(0),E="data-role",v="keyboardSelectableItem",p={[E]:v},m=`[${E}="${v}"`,y="data-selectedItem",d=`[${y}="true"]`,x=(0,n.useCallback)(D=>{const C=g?.current?.querySelectorAll(m),P=C?.item(D%C?.length);C?.forEach(T=>T.setAttribute(y,"false")),P&&(P.scrollIntoView({block:"center"}),P.setAttribute(y,"true"))},[g,m]),b=(0,n.useCallback)(()=>{g?.current?.querySelector(d)?.querySelector("button")?.click()},[g,d]);return(0,n.useEffect)(()=>{if(!f)return;const D=f.subscribe({next:C=>{switch(C?.code){case"ArrowDown":{x(++u.current),C.preventDefault();break}case"ArrowUp":u.current=u.current>0?u.current-1:u.current,x(u.current),C.preventDefault();break;case"Enter":b();break}}});return()=>D.unsubscribe()},[f,x,b]),(0,n.useEffect)(()=>{const D=new MutationObserver(C=>{C.some(T=>T.addedNodes&&T.addedNodes.length>0||T.removedNodes&&T.removedNodes.length>0)&&x(0)});return g.current&&D.observe(g.current,{childList:!0}),()=>{D.disconnect()}},[g,m,x]),[p,d]}},42240:(ne,A,e)=>{"use strict";e.d(A,{M:()=>i,x:()=>c});var n=e(74848),a=e(96540),s=e(57866),l=e(92745),r=e(88531);const c=({value:o,context:h,onChange:f,id:g})=>{const u=(0,a.useCallback)(E=>{f(E?.length?{id:s.jR.byRefId,options:E}:void 0)},[f]);return(0,n.jsx)(r.XL,{id:g,value:o?.options,onChange:u,data:h.data,placeholder:(0,l.t)("geomap.frame-selection-editor.placeholder-change-filter","Change filter")})},i=({value:o,context:h,onChange:f})=>{const g=(0,a.useCallback)(u=>{f(u?.length?{id:s.jR.byRefId,options:(0,r.h)(u)}:void 0)},[f]);return(0,n.jsx)(r.gK,{value:o?.options,onChange:g,data:h.data,placeholder:(0,l.t)("geomap.frame-multi-selection-editor.placeholder-change-filter","Change filter")})}},42272:(ne,A,e)=>{"use strict";e.d(A,{y:()=>o});var n=e(74848),a=e(51898),s=e(92745),l=e(52847),r=e(32442),c=e(68577),i=e(49602);function o({query:h,regex:f,optionTypes:g,allowCustomValue:u,onChange:E,onRegExBlur:v,multi:p,includeAll:m,allValue:y,onMultiChange:d,onIncludeAllChange:x,onAllValueChange:b,onAllowCustomValueChange:D}){const C=g.find(P=>P.value===h);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Y,{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.data-source-variable-form.data-source-options",children:"Data source options"})}),(0,n.jsx)(c.v,{name:(0,s.t)("dashboard-scene.data-source-variable-form.name-type","Type"),value:C,options:g,onChange:E,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),(0,n.jsx)(i._,{defaultValue:f,name:(0,s.t)("dashboard-scene.data-source-variable-form.name-instance-name-filter","Instance name filter"),placeholder:"/.*-(.*)-.*/",onBlur:v,description:(0,n.jsxs)("div",{children:[(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.data-source-variable-form.description-instance-name-filter",children:"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all."}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)(s.x6,{i18nKey:"dashboard-scene.data-source-variable-form.example-instance-name-filter",components:{codeExample:(0,n.jsx)("code",{children:"/^prod/"})},children:["Example: ","<codeExample />"]})]})}),(0,n.jsx)(r.Y,{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.data-source-variable-form.selection-options",children:"Selection options"})}),(0,n.jsx)(l.B,{multi:p,includeAll:m,allValue:y,allowCustomValue:u,onMultiChange:d,onIncludeAllChange:x,onAllValueChange:b,onAllowCustomValueChange:D})]})}},42357:(ne,A,e)=>{"use strict";e.d(A,{V:()=>o});var n=e(74848),a=e(22429),s=e(16200),l=e(37680),r=e(66769);const i=`You are an expert in creating Grafana Dashboards.
Your goal is to write a descriptive and concise dashboard description.
You will be given the title and description of the dashboard's panels.
The dashboard description is meant to explain the purpose of the dashboard and what its panels show.
If the dashboard has no panels, the description should be "Empty dashboard"
There should be no numbers in the description except where they are important.
The dashboard description should not have the dashboard title or any quotation marks in it.
The description should be, at most, 300 characters.
Respond with only the description of the dashboard.`,o=({onGenerate:f})=>{const g=(0,a.UA)().getCurrent(),u=(0,r.N3)(g);return(0,n.jsx)(s.n,{messages:h(g),onGenerate:f,eventTrackingSrc:l.ec.dashboardDescription,toggleTipTitle:"Improve your dashboard description",disabled:u.length===0,tooltip:u.length===0?r.ZN:void 0})};function h(f){return[{content:i,role:r.Xh.system},{content:`The title of the dashboard is "${f.title}"
${(0,r.BB)(f)}`,role:r.Xh.user}]}},42361:(ne,A,e)=>{"use strict";e.d(A,{v:()=>r});var n=e(66402),a=e(13956),s=e(93854);class l{constructor(){this.cache=null,this.promise=null}async get(){if(this.cache!==null)return this.cache;if(this.promise!==null)return this.promise;this.promise=this.fetch();try{return this.cache=await this.promise,this.cache}catch(i){throw this.promise=null,i}}clear(){this.cache=null,this.promise=null}async fetch(){try{const o=await(0,a.n)().listDeletedDashboards({limit:1e3});return(0,n.F)(o)?(0,s.A5)(o):[]}catch(i){return console.error("Failed to fetch deleted dashboards:",i),[]}}}const r=new l},42656:(ne,A,e)=>{"use strict";e.d(A,{c:()=>f});var n=e(74848),a=e(92745),s=e(43173),l=e(45863),r=e(24209),c=e(58662),i=e(81657),o=e(52043),h=e(8285);class f extends l.Bs{constructor(v){super(v),this.tabId=c.wr.embed}static{this.Component=g}getTabLabel(){return s.$.featureToggles.newDashboardSharingComponent?(0,a.t)("share-panel.drawer.share-embed-title","Share embed"):(0,a.t)("share-modal.tab-title.panel-embed","Embed")}}function g({model:E}){const{panelRef:v}=E.useState(),p=v.resolve(),m=(0,h.YQ)(E),{uid:y}=m.useState(),d=l.jh.getTimeRange(p),x=d instanceof i.v?d.state.timeFrom:void 0;return(0,n.jsx)(r.D,{panelId:p.getPathId(),timeFrom:x,range:d.state.value,dashboard:{uid:y??"",time:d.state.value},buildIframe:u(m),onCancelClick:()=>m.closeModal()})}const u=E=>(v,p,m,y,d,x)=>{const b=(0,c.XV)({useCurrentTimeRange:v,selectedTheme:m,panelId:y,timeFrom:d,range:x}),D=b.get("editPanel")??b.get("viewPanel")??"";return b.set("panelId",D),b.delete("editPanel"),b.delete("viewPanel"),b.set("__feature.dashboardSceneSolo","true"),`<iframe src="${(0,o.u)({absolute:!0,soloRoute:!0,uid:E.state.uid,slug:E.state.meta.slug,currentQueryParams:b.toString()})}" width="450" height="200" frameborder="0"></iframe>`}},42795:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>x,GU:()=>g,MJ:()=>E,Ox:()=>v,eK:()=>m,fR:()=>p,kw:()=>y,wi:()=>i});var n=e(65307),a=e(22592),s=e(28105),l=e(29043),r=e(82612),c=e(62667);const i="grafana.dashboard.editor.ui",o={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:c.q5.Fill},h=()=>{const b=l.A.getObject(i,o);let D={...b};return typeof b.topPaneSize=="string"&&(D={...b,topPaneSize:parseFloat(b.topPaneSize)/100}),{getPanel:()=>new r.a9({}),getSourcePanel:()=>new r.a9({}),getData:()=>({state:s.Gu.NotStarted,series:[],timeRange:(0,a.E2)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...o,...D}}},f=(0,n.Z0)({name:"panelEditor",initialState:h(),reducers:{updateEditorInitState:(b,D)=>{b.getPanel=()=>D.payload.panel,b.getSourcePanel=()=>D.payload.sourcePanel,b.initDone=!0,b.isOpen=!0,b.shouldDiscardChanges=!1},setEditorPanelData:(b,D)=>{b.getData=()=>D.payload},setDiscardChanges:(b,D)=>{b.shouldDiscardChanges=D.payload},setPanelEditorUIState:(b,D)=>{b.ui={...b.ui,...D.payload},!b.ui.isPanelOptionsVisible&&b.isVizPickerOpen&&(b.isVizPickerOpen=!1)},toggleVizPicker:(b,D)=>{b.isVizPickerOpen=D.payload,b.isVizPickerOpen&&(b.ui.isPanelOptionsVisible=!0)},toggleTableView(b){b.tableViewEnabled=!b.tableViewEnabled},closeEditor:b=>{b.getPanel=()=>new r.a9({}),b.getSourcePanel=()=>new r.a9({}),b.isOpen=!1,b.initDone=!1,b.isVizPickerOpen=!1,b.tableViewEnabled=!1}}}),{updateEditorInitState:g,setEditorPanelData:u,setDiscardChanges:E,closeEditor:v,setPanelEditorUIState:p,toggleVizPicker:m,toggleTableView:y}=f.actions,x={panelEditor:f.reducer}},42801:(ne,A,e)=>{"use strict";e.d(A,{a:()=>l,o:()=>s});var n=e(2543),a=e.n(n);function s(r,c){let i=c.trim();if(!i.match(/\{\{\s*define/)){const o=i.split(`
`).map(h=>"  "+h).join(`
`);i=`{{ define "${r}" }}
${o}
{{ end }}`}return i}function l(r){const c=(i,o)=>`{{ define "${o}_NEW_${(0,n.now)()}" }}`;return r.replace(/\{\{\s*define\s*\"(?<defineName>.*)\"\s*\}\}/g,c)}},42836:(ne,A,e)=>{"use strict";e.d(A,{q:()=>F});var n=e(74848),a=e(2543),s=e(96540),l=e(70713),r=e(64761),c=e(2197),i=e(60519),o=e(51898),h=e(92745),f=e(27489),g=e(2863),u=e(45861),E=e(68079),v=e(24343),p=e(65642),m=e(37234),y=e(16515),d=e(63142),x=e(41654),b=e(37386),D=e(18857),C=e(21285),P=e(85348),T=e(22803);const O=V=>(0,T.css)({padding:V.spacing(0,2),fontSize:V.typography.bodySmall.fontSize,color:V.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis"}),S=({children:V})=>{const M=(0,d.of)(O);return(0,n.jsx)("div",{className:M,children:V})};var B=e(89460);const K=({options:V,actions:M,formattedDataDescription:L,onOptionsChange:N,hasTransformations:W,data:R,dataFrames:G,transformationOptions:w,selectedDataFrame:_,onDataFrameChange:Q,excelCompatibilityMode:ae,toggleExcelCompatibilityMode:q})=>{const k=(0,d.of)(B.A);let ee=G;_===r.F.joinByField&&(ee=R);const j=ee.map((te,se)=>({value:se,label:`${(0,y.Ri)(te)} (${se})`})),J=[...w,...j];function Z(){let te="";if(!R)return te;const se=[];return _===r.F.joinByField?se.push((0,h.t)("dashboard.inspect-data.series-to-columns","Series joined by time")):R.length>1&&se.push((0,y.Ri)(R[_])),(V.withTransforms||V.withFieldConfig)&&(V.withTransforms&&se.push((0,h.t)("dashboard.inspect-data.panel-transforms","Panel transforms")),V.withTransforms&&V.withFieldConfig,V.withFieldConfig&&se.push((0,h.t)("dashboard.inspect-data.formatted","Formatted data"))),se.join(", ")}return(0,n.jsx)("div",{className:k.dataDisplayOptions,children:(0,n.jsx)(P.u,{id:"Data options",index:0,title:(0,h.t)("dashboard.inspect-data.data-options","Data options"),headerElement:(0,n.jsx)(S,{children:Z()}),isOpen:!1,actions:M,children:(0,n.jsx)("div",{className:k.options,"data-testid":"dataOptions",children:(0,n.jsxs)(x.B,{direction:"column",gap:0,children:[R.length>1&&(0,n.jsx)(b.D,{label:(0,h.t)("dashboard.inspect-data.dataframe-label","Show data frame"),children:(0,n.jsx)(D.l6,{options:J,value:_,onChange:Q,width:30,"aria-label":(0,h.t)("dashboard.inspect-data.dataframe-aria-label","Select dataframe")})}),(0,n.jsxs)(x.B,{children:[W&&N&&(0,n.jsx)(b.D,{label:(0,h.t)("dashboard.inspect-data.transformations-label","Apply panel transformations"),description:(0,h.t)("dashboard.inspect-data.transformations-description","Table data is displayed with transformations defined in the panel Transform tab."),children:(0,n.jsx)(C.d,{value:!!V.withTransforms,onChange:()=>N({...V,withTransforms:!V.withTransforms})})}),N&&(0,n.jsx)(b.D,{label:(0,h.t)("dashboard.inspect-data.formatted-data-label","Formatted data"),description:L||(0,h.t)("dashboard.inspect-data.formatted-data-description","Table data is formatted with options defined in the Field and Override tabs."),children:(0,n.jsx)(C.d,{id:"formatted-data-toggle",value:!!V.withFieldConfig,onChange:()=>N({...V,withFieldConfig:!V.withFieldConfig})})}),(0,n.jsx)(b.D,{label:(0,h.t)("dashboard.inspect-data.excel-compatibility-mode-label","Download for Excel"),description:(0,h.t)("dashboard.inspect-data.excel-compatibility-mode-description","Generates a CSV file that's compatible with most Excel versions"),children:(0,n.jsx)(C.d,{id:"excel-compatibility-mode-toggle",value:ae,onChange:q})})]})]})})})})};var U=e(7542);class F extends s.PureComponent{constructor(M){super(M),this.onExportLogsAsTxt=()=>{const{data:L,dataName:N,app:W}=this.props;(0,f.rR)("grafana_logs_download_logs_clicked",{app:W,format:"logs",area:"inspector"});const R=(0,m.HT)(L||[]);(0,U.Zy)(R,N)},this.onExportTracesAsJson=()=>{const{data:L,dataName:N,app:W}=this.props;if(L)for(const R of L){if(R.meta?.preferredVisualisationType!=="trace")continue;const G=(0,U.ek)(R,N+"-traces");(0,f.rR)("grafana_traces_download_traces_clicked",{app:W,grafana_version:p.$W.buildInfo.version,trace_format:G,location:"inspector"})}},this.onExportServiceGraph=()=>{const{data:L,dataName:N,app:W}=this.props;(0,f.rR)("grafana_traces_download_service_graph_clicked",{app:W,grafana_version:p.$W.buildInfo.version,location:"inspector"}),L&&(0,U.ny)(L,N)},this.onDataFrameChange=L=>{this.setState({transformId:L.value===r.F.joinByField?r.F.joinByField:r.F.noop,dataFrameIndex:typeof L.value=="number"?L.value:0,selectedDataFrame:L.value})},this.onToggleExcelCompatibilityMode=()=>{this.setState(L=>({excelCompatibilityMode:!L.excelCompatibilityMode}))},this.state={selectedDataFrame:0,dataFrameIndex:0,transformId:r.F.noop,transformationOptions:I(),transformedData:M.data??[],excelCompatibilityMode:!1}}componentDidUpdate(M,L){if(!this.props.data){this.setState({transformedData:[]});return}if(this.props.options.withTransforms){this.setState({transformedData:this.props.data});return}if(M.data!==this.props.data||L.transformId!==this.state.transformId){const N=this.state.transformationOptions.find(W=>W.value===this.state.transformId);if(N&&N.transformer.id!==r.F.noop){const W=this.state.selectedDataFrame,R=this.state.dataFrameIndex,G=(0,c.m)([N.transformer],this.props.data).subscribe(w=>{this.setState({transformedData:w,selectedDataFrame:W,dataFrameIndex:R},()=>G.unsubscribe())});return}this.setState({transformedData:this.props.data});return}}exportCsv(M,L){const{dataName:N}=this.props,{transformId:W}=this.state,R=M[this.state.dataFrameIndex];L&&(0,f.rR)("grafana_logs_download_clicked",{app:this.props.app,format:"csv"}),(0,U.EM)(R,N,{},W,this.state.excelCompatibilityMode)}getProcessedData(){const{options:M,panelPluginId:L,fieldConfig:N,timeZone:W}=this.props,R=this.state.transformedData;if(!M.withFieldConfig)return(0,i.K3)(R);let G=N??{defaults:{},overrides:[]};return L==="table"&&N&&(G=this.cleanTableConfigFromFieldConfig(N)),(0,i.we)({data:R,theme:p.$W.theme2,fieldConfig:G,timeZone:W,replaceVariables:(w,_,Q)=>(0,g.w)().replace(w,_,Q)})}cleanTableConfigFromFieldConfig(M){M=(0,a.cloneDeep)(M),M.defaults.custom={};for(const L of M.overrides)for(const N of L.properties)if(N.id.startsWith("custom.")){const W=L.properties.indexOf(N);L.properties.slice(W,1)}return M}renderActions(M,L,N,W){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.$n,{variant:"primary",onClick:()=>this.exportCsv(M,L),size:"sm",children:(0,n.jsx)(h.x6,{i18nKey:"dashboard.inspect-data.download-csv",children:"Download CSV"})}),L&&!p.$W.exploreHideLogsDownload&&(0,n.jsx)(u.$n,{variant:"primary",onClick:this.onExportLogsAsTxt,size:"sm",children:(0,n.jsx)(h.x6,{i18nKey:"dashboard.inspect-data.download-logs",children:"Download logs"})}),N&&(0,n.jsx)(u.$n,{variant:"primary",onClick:this.onExportTracesAsJson,size:"sm",children:(0,n.jsx)(h.x6,{i18nKey:"dashboard.inspect-data.download-traces",children:"Download traces"})}),W&&(0,n.jsx)(u.$n,{variant:"primary",onClick:this.onExportServiceGraph,size:"sm",children:(0,n.jsx)(h.x6,{i18nKey:"dashboard.inspect-data.download-service",children:"Download service graph"})})]})}render(){const{isLoading:M,options:L,data:N,formattedDataDescription:W,onOptionsChange:R,hasTransformations:G}=this.props,{dataFrameIndex:w,transformationOptions:_,selectedDataFrame:Q,excelCompatibilityMode:ae}=this.state,q=(0,B.c)();if(M)return(0,n.jsxs)("div",{children:[(0,n.jsx)(E.y,{inline:!0})," ",(0,n.jsx)(h.x6,{i18nKey:"inspector.inspect-data-tab.loading",children:"Loading"})]});const k=this.getProcessedData();if(!k||!k.length)return(0,n.jsx)("div",{children:(0,n.jsx)(h.x6,{i18nKey:"inspector.inspect-data-tab.no-data",children:"No data"})});const ee=k[w]?w:0,j=k[ee],J=k.some(se=>se?.meta?.preferredVisualisationType==="logs"),Z=k.some(se=>se?.meta?.preferredVisualisationType==="trace"),te=k.some(se=>se?.meta?.preferredVisualisationType==="nodeGraph");return(0,n.jsxs)("div",{className:q.wrap,"aria-label":o.Tp.components.PanelInspector.Data.content,children:[(0,n.jsx)("div",{className:q.toolbar,children:(0,n.jsx)(K,{data:N,hasTransformations:G,options:L,dataFrames:k,transformationOptions:_,selectedDataFrame:Q,formattedDataDescription:W,onOptionsChange:R,onDataFrameChange:this.onDataFrameChange,excelCompatibilityMode:ae,toggleExcelCompatibilityMode:this.onToggleExcelCompatibilityMode,actions:this.renderActions(k,J,Z,te)})}),(0,n.jsx)("div",{className:q.content,children:(0,n.jsx)(l.Ay,{children:({width:se,height:ie})=>se===0?null:(0,n.jsx)(v.X,{width:se,height:ie,data:j,showTypeIcons:!0})})})]})}}function I(){return[{value:r.F.joinByField,label:(0,h.t)("dashboard.inspect-data.transformation","Series joined by time"),transformer:{id:r.F.joinByField,options:{byField:void 0}}}]}},42942:(ne,A,e)=>{"use strict";e.d(A,{X:()=>f});var n=e(65474),a=e(62467),s=e(41119),l=e(94644),r=e(68143),c=e(43173),i=e(52161),o=e(8095);const h="-- Public --";class f extends l.mA{constructor(){let u={};super({name:"public-ds",id:0,type:"public-ds",meta:u,uid:h,jsonData:{},access:"proxy",readOnly:!0}),this.annotations={prepareQuery(E){return{...E,queryType:o.nj.Annotations,refId:"anno"}}}}query(u){return u.targets.length?u.targets[0]?.datasource?.uid===i.vv?(0,n.H)(this.getAnnotations(u)):(0,a.of)({data:[]}):(0,a.of)({data:[]})}async getAnnotations(u){const{range:{to:E,from:v}}=u,p={from:v.valueOf(),to:E.valueOf()},m=await(0,r.AI)().get(`/api/public/dashboards/${c.$.publicDashboardAccessToken}/annotations`,p);return{data:[(0,s.Vc)(m)]}}testDatasource(){return Promise.resolve({message:"",status:""})}}},42970:(ne,A,e)=>{"use strict";e.d(A,{p_:()=>v,qQ:()=>E,vL:()=>c,wz:()=>i});var n=e(2543),a=e.n(n),s=e(68220),l=e(44022),r=e(4651);function c(d){const x=new s.TS,b=[],D=d.map(C=>C.refId);if(x.createNodes(D),d.forEach(C=>{if(!(0,l.f)(C.model))return;const P=C.refId;h(C.model).forEach(O=>{if(P&&O)try{x.link(O,P)}catch(S){b.push({source:P,target:O,error:S})}})}),b.length>0)throw new o("failed to create DAG from queries",{cause:b});return x}function i(d,x=[]){try{return[c(d),x]}catch(b){if(b instanceof o){const D=b.cause;x.push(...D);const C=(0,n.reject)(d,P=>D.some(T=>T.source===P.refId));return i(C,x)}}return[new s.TS,x]}class o extends Error{constructor(x,b){super(x,b),this.cause=b?.cause??[]}}function h(d){const x=d.type===r.Tz.math,b=d.type===r.Tz.classic,D=d.type===r.Tz.sql;return x?f(d.expression??""):b?d.conditions?.map(C=>C.query.params[0])??[]:D?g(d.expression??""):[d.expression]}function f(d){const x=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),b=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),D=Array.from(d.matchAll(x)).map(P=>P.groups?.var),C=Array.from(d.matchAll(b)).map(P=>P.groups?.var);return(0,n.compact)((0,n.uniq)([...D,...C]))}function g(d){if(!d)return[];const C=d.split(`
`).filter(S=>!S.trim().startsWith("--")).join(" ").replace(/\s+/g," ").replace(/\/\*[\s\S]*?\*\//g,""),P=[],T=/from\s+([^;]*?)(?:\s+(?:join|where|group|having|order|limit)|\s*$)/gi;for(const S of C.matchAll(T)){const K=S[1].trim().split(",").map(U=>U.trim());for(const U of K)P.push(u(U))}const O=/join\s+([a-zA-Z0-9_."]+)/gi;for(const S of C.matchAll(O))P.push(u(S[1]));return(0,n.compact)((0,n.uniq)(P))}function u(d){let x=d.replace(/['"]/g,"");return x.includes(" as ")?x=x.split(" as ")[0]:x.includes(" ")&&(x=x.split(" ")[0]),x.includes(".")&&(x=x.split(".").pop()||""),x.trim()}const E=(0,n.memoize)(p,(d,x)=>d+y(x)),v=(0,n.memoize)(m,(d,x)=>d+y(x));function p(d,x){const b=x.getNode(d);if(!b)return[];const D=[];function C(P){const T=P.inputEdges;T.length>0?T.forEach(O=>{O.inputNode&&C(O.inputNode)}):D.push(P)}return C(b),D.map(P=>P.name)}function m(d,x){const b=x.getNode(d);if(!b)return[];const D=[];function C(P){P.outputEdges.forEach(O=>{O.outputNode&&(D.push(O.outputNode),C(O.outputNode))})}return C(b),D.map(P=>P.name)}function y(d){return Object.keys(d.nodes).map(x=>{const b=d.nodes[x],D=b.outputEdges.map(P=>P.outputNode?.name).join(", "),C=b.inputEdges.map(P=>P.inputNode?.name).join(", ");return`${b.name}:${D}:${C}`}).join(" ")}},43100:(ne,A,e)=>{"use strict";e.d(A,{d:()=>v});var n=e(34632),a=e(91984),s=e(72748),l=e(78045),r=e(55614),c=e(15518),i=e(5358);function o(...p){return{error:p.find(m=>m.error),isUninitialized:p.every(m=>m.isUninitialized),isSuccess:p.every(m=>m.isSuccess),isError:p.some(m=>m.isError),isLoading:p.some(m=>m.isLoading)}}const h=new Error("no active Alertmanager"),{useLazyGetAlertmanagerConfigurationQuery:f,useUpdateAlertmanagerConfigurationMutation:g}=a.m,u={alertmanager_config:{receivers:[],route:{},time_intervals:[],mute_time_intervals:[],inhibit_rules:[],templates:[]},template_files:{}},E=(0,n.A)(u,s.f1,c.NF,r.r0,l.B8);function v(){const{selectedAlertmanager:p}=(0,i.VI)(),[m,y]=f(),[d,x]=g(),b=o(y,x);if(!p)throw h;return[async C=>{const P=await m(p).unwrap(),T=E(P,C);return d({selectedAlertmanager:p,config:T}).unwrap()},b]}},43122:(ne,A,e)=>{"use strict";e.d(A,{f:()=>n,p:()=>a});let n=()=>{throw new Error("EmbeddedDashboard requires runtime initialization")};function a(s){n=s}},43243:(ne,A,e)=>{"use strict";e.d(A,{G:()=>D});var n=e(74848),a=e(22803),s=e(72181),l=e(76698),r=e(96540),c=e(92745),i=e(63142),o=e(30703),h=e(33033),f=e(63527),g=e(15245),u=e(70733),E=e(92842),v=e(74440),p=e(98869),m=e(75168),y=e(5320),d=e(93521);const x=()=>{},b=4,D=C=>{const{options:P,onChange:T,value:O,placeholder:S,isClearable:B,createCustomValue:K=!1,id:U,width:F,minWidth:I,maxWidth:V,"aria-labelledby":M,"data-testid":L,autoFocus:N,onBlur:W,disabled:R,portalContainer:G,invalid:w}=C,_=typeof O=="object"?O?.value:O,Q=(0,r.useId)().replace(/:/g,"--"),{options:ae,groupStartIndices:q,updateOptions:k,asyncLoading:ee,asyncError:j}=(0,y.I)(C.options,K),J=typeof P=="function",Z=(0,r.useMemo)(()=>{if(J||O==null)return null;const Ue=P.findIndex(je=>je.value===_);return Ue===-1?null:Ue},[O,P,_,J]),te=(0,r.useMemo)(()=>O==null?null:Z!==null&&!J?P[Z]:typeof O=="object"?O:{value:O,label:O.toString()},[Z,J,O,P]),se=`${Q}-downshift-menu`,ie=`${Q}-downshift-label`,ce=(0,i.of)(p.C3),re=(0,r.useCallback)(Ue=>{const je=Math.max(0,Ue.startIndex-Ue.overscan),Qe=Math.min(ae.length-1,Ue.endIndex+Ue.overscan),He=Array.from({length:Qe-je+1},(de,ve)=>je+ve),Je=ae[He[0]];if(Je?.group){const de=q.get(Je.group);de!==void 0&&de<He[0]&&He.unshift(de)}return He},[ae,q]),ue=(0,s.Te)({count:ae.length,getScrollElement:()=>Me.current,estimateSize:Ue=>{const je=(0,d.S)(ae[Ue],Ue>0?ae[Ue-1]:void 0),Qe="description"in ae[Ue],He="group"in ae[Ue];let Je=p.Aj;return Qe&&(Je=p.pg),je&&He&&(Je+=p.Aj),Je},overscan:b,rangeExtractor:re}),{isOpen:X,highlightedIndex:le,getInputProps:he,getMenuProps:fe,getItemProps:Ce,selectItem:Ae}=(0,l.Bp)({menuId:se,labelId:ie,inputId:U,items:ae,itemToString:v.y,selectedItem:te,onSelectedItemChange:({selectedItem:Ue})=>{(B||Ue!==null)&&T(Ue)},defaultHighlightedIndex:Z??0,scrollIntoView:()=>{},onIsOpenChange:({isOpen:Ue,inputValue:je})=>{Ue&&je===""&&k(je)},onHighlightedIndexChange:({highlightedIndex:Ue,type:je})=>{je!==l.Bp.stateChangeTypes.MenuMouseLeave&&ue.scrollToIndex(Ue)},onStateChange:({inputValue:Ue,type:je,selectedItem:Qe})=>{switch(je){case l.Bp.stateChangeTypes.InputChange:k(Ue??"");break;default:break}},stateReducer(Ue,je){let{changes:Qe}=je;const He=Ue.isOpen===!1&&Qe.isOpen===!0,Je=Ue.isOpen===!0&&Qe.isOpen===!1;return He&&Qe.inputValue===Ue.inputValue&&(Qe={...Qe,inputValue:""}),Je&&(Qe.selectedItem?Qe={...Qe,inputValue:(0,v.y)(Qe.selectedItem)}:Qe.inputValue!==""&&(Qe={...Qe,inputValue:""})),Qe}}),{inputRef:_e,floatingRef:Xe,floatStyles:De,scrollRef:Me}=(0,m.l)(ae,X),Te=F==="auto",$e=Te?h.D:f.p,Re=(X?(0,v.y)(te):null)||S,Ke=C.loading||ee,Ve=(0,n.jsxs)(n.Fragment,{children:[_!==void 0&&_===te?.value&&B&&(0,n.jsx)(o.I,{name:"times",className:ce.clear,title:(0,c.t)("combobox.clear.title","Clear value"),tabIndex:0,role:"button",onClick:()=>{Ae(null)},onKeyDown:Ue=>{(Ue.key==="Enter"||Ue.key===" ")&&Ae(null)}}),(0,n.jsx)(E.f,{isLoading:Ke||!1,isOpen:X})]}),{Wrapper:Se,wrapperProps:Ye}=Te?{Wrapper:"div",wrapperProps:{className:ce.adaptToParent}}:{Wrapper:r.Fragment};return(0,n.jsxs)(Se,{...Ye,children:[(0,n.jsx)($e,{width:Te?void 0:F,...Te?{minWidth:I,maxWidth:V}:{},autoFocus:N,onBlur:W,disabled:R,invalid:w,className:ce.input,suffix:Ve,...he({ref:_e,onChange:x,"aria-labelledby":M,placeholder:Re,"data-testid":L})}),(0,n.jsx)(g.ZL,{root:G,children:(0,n.jsx)("div",{className:(0,a.cx)(ce.menu,!X&&ce.menuClosed),style:{...De,pointerEvents:"auto"},...fe({ref:Xe,"aria-labelledby":M}),children:X&&(0,n.jsx)(u.e,{options:ae,highlightedIndex:le,selectedItems:te?[te]:[],scrollRef:Me,getItemProps:Ce,error:j})})})]})}},43260:(ne,A,e)=>{"use strict";e.d(A,{A:()=>o,q:()=>i});var n=e(74848),a=e(22803),s=e(51898),l=e(76319),r=e(63142);function c(f){const g=(0,r.of)(h);return(0,n.jsx)("div",{className:(0,a.cx)(g.icon,"active"in f&&f.active&&g.active),children:(0,n.jsx)(l.K,{name:f.icon,tooltip:f.title,className:g.icon,disabled:!!f.disabled,onClick:f.onClick,type:"button","data-testid":f.dataTestId??s.Tp.components.QueryEditorRow.actionButton(f.title),..."active"in f&&{"aria-pressed":f.active}})})}function i(f){return(0,n.jsx)(c,{...f})}const o=f=>(0,n.jsx)(c,{...f}),h=f=>({icon:(0,a.css)({display:"flex",position:"relative",color:f.colors.text.secondary}),active:(0,a.css)({"&:before":{display:"block",content:'" "',position:"absolute",left:-1,right:2,height:3,borderRadius:f.shape.radius.default,bottom:-8,backgroundImage:f.colors.gradients.brandHorizontal}})})},43385:(ne,A,e)=>{"use strict";e.d(A,{g:()=>l});var n=e(97677),a=e.n(n),s=e(25229);function l(){const r=new n.Chance;return`${(0,s.KQ)().format("YYYY-MM-DD")}-${r.string({length:5,alpha:!0})}`}},43482:(ne,A,e)=>{"use strict";e.d(A,{l:()=>u});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(46885),c=e(96540),i=e(25229),o=e(63142),h=e(63527),f=e(96396);const g=v=>(0,i.KQ)(v).format("L"),u=(0,c.forwardRef)(({value:v,minDate:p,maxDate:m,onChange:y,closeOnSelect:d,placeholder:x="Date",...b},D)=>{const[C,P]=(0,c.useState)(!1),T=(0,o.of)(E),O=[(0,s.UU)({crossAxis:!1,boundary:document.body}),(0,s.BN)()],{context:S,refs:B,floatingStyles:K}=(0,l.we)({open:C,placement:"bottom-start",onOpenChange:P,middleware:O,whileElementsMounted:r.ll,strategy:"fixed"}),U=(0,l.kp)(S),F=(0,l.s9)(S),{getReferenceProps:I,getFloatingProps:V}=(0,l.bv)([F,U]);return(0,c.useImperativeHandle)(D,()=>B.domReference.current,[B.domReference]),(0,n.jsxs)("div",{className:T.container,children:[(0,n.jsx)(h.p,{ref:B.setReference,type:"text",autoComplete:"off",placeholder:x,value:v&&g(v),onChange:M=>{M.target.value===""&&y("")},className:T.input,...b,...I()}),(0,n.jsx)("div",{className:T.popover,ref:B.setFloating,style:K,...V(),children:(0,n.jsx)(f.l,{isOpen:C,value:v&&typeof v!="string"?v:(0,i.KQ)().toDate(),minDate:p,maxDate:m,onChange:M=>{y(M),d&&P(!1)},onClose:()=>P(!1)})})]})});u.displayName="DatePickerWithInput";const E=v=>({container:(0,a.css)({position:"relative"}),input:(0,a.css)({"input[type='date']::-webkit-inner-spin-button, input[type='date']::-webkit-calendar-picker-indicator":{display:"none",WebkitAppearance:"none"}}),popover:(0,a.css)({zIndex:v.zIndex.tooltip})})},43533:(ne,A,e)=>{"use strict";e.d(A,{I:()=>a});var n=e(96540);class a extends n.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:l,content:r,placement:c="auto"}=this.props,{show:i}=this.state;return l(this.showPopper,this.hidePopper,{show:i,placement:c,content:r})}}},43550:(ne,A,e)=>{"use strict";e.d(A,{Id:()=>c,Im:()=>E,Vz:()=>g,YA:()=>u,_h:()=>p,s2:()=>i});var n=e(65307),a=e(2543),s=e.n(a),l=e(65642),r=e(18832);const c="home";function i(){const m={},y=(0,a.cloneDeep)(l.Ay.bootData.navTree),d=y.find(b=>b.id===c),x=y.filter(b=>b.id!==c);return d&&o(m,[d]),o(m,x,m[c]),m}function o(m,y,d){const x=[];for(const b of y){const D={...b,text:(0,r.C)(b.id)??b.text,subTitle:(0,r.o)(b.id)??b.subTitle,emptyMessage:(0,r.C)(b.emptyMessageId),parentItem:d};D.id&&(m[D.id]=D),D.children&&o(m,D.children,D),x.push(D)}d&&(d.children=x),m["not-found"]={...h("Page not found","404 Error").node},m.error={...h("Page error","An unexpected error").node}}function h(m,y){const d={text:m,subTitle:y,icon:"exclamation-triangle"};return{node:d,main:d}}const f={},g=(0,n.VP)("navIndex/updateNavIndex"),u=(0,n.VP)("navIndex/updateConfigurationSubtitle"),E=(0,n.VP)("navIndex/removeNavIndex"),v=(m,y)=>({...m,parentItem:{...m.parentItem,text:m.parentItem?.text??"",subTitle:y}}),p=(m=f,y)=>{if(g.match(y)){let x=function(C){if(C.children)for(const P of C.children)b[P.id]={...P,parentItem:C};C.parentItem&&x(C.parentItem)};var d=x;const b={},D=y.payload;return x(D),{...m,...b}}else if(u.match(y)){const x=`Organization: ${y.payload}`;return{...m,cfg:{...m.cfg,subTitle:x},datasources:v(m.datasources,x),correlations:v(m.correlations,x),users:v(m.users,x),teams:v(m.teams,x),plugins:v(m.plugins,x),"org-settings":v(m["org-settings"],x),apikeys:v(m.apikeys,x)}}else E.match(y)&&delete m[y.payload];return m}},43652:(ne,A,e)=>{"use strict";e.d(A,{b:()=>m,o:()=>y});var n=e(74848),a=e(96540),s=e(16817),l=e(40996),r=e(92745),c=e(68143),i=e(43173),o=e(22787),h=e(45861),f=e(41654),g=e(37386),u=e(63527),E=e(91156),v=e(30124),p=e(12048);const m=({panel:d,initialFolderUid:x,onCreateLibraryPanel:b,onDismiss:D})=>{const[C,P]=(0,a.useState)(x),[T,O]=(0,a.useState)(d.title),[S,B]=(0,a.useState)(d.title),[K,U]=(0,a.useState)(!1);(0,a.useEffect)(()=>U(!0),[T]),(0,l.A)(()=>B(T),350,[T]);const{saveLibraryPanel:F}=(0,p.b)(),I=(0,a.useCallback)(()=>{d.libraryPanel={uid:"",name:T},F(d,C).then(L=>{(0,c.NF)(L)?d.libraryPanel=void 0:(D?.(),b?.(L))})},[d,T,F,C,D,b]),V=(0,s.A)(async()=>{try{return!(await(0,v.e9)(T)).some(L=>L.folderUid===C)}catch(L){return(0,c.NF)(L)&&(L.isHandled=!0),!0}finally{U(!1)}},[S,C]),M=!V?.value&&V.value!==void 0&&T===S&&!K;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.D,{label:(0,r.t)("library-panel.add-modal.name","Library panel name"),invalid:M,error:M?(0,r.t)("library-panel.add-modal.error","Library panel with this name already exists"):"",children:(0,n.jsx)(u.p,{id:"share-panel-library-panel-name-input",name:"name",value:T,onChange:L=>O(L.currentTarget.value)})}),(0,n.jsx)(g.D,{label:(0,r.t)("library-panel.add-modal.folder","Save in folder"),description:(0,r.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions"),children:(0,n.jsx)(E.d,{onChange:L=>P(L),value:C})}),i.$.featureToggles.newDashboardSharingComponent?(0,n.jsxs)(f.B,{gap:1,justifyContent:"start",children:[(0,n.jsx)(h.$n,{onClick:I,disabled:M,children:(0,n.jsx)(r.x6,{i18nKey:"share-panel.new-library-panel.create-button",children:"Create library panel"})}),(0,n.jsx)(h.$n,{variant:"secondary",onClick:D,fill:"outline",children:(0,n.jsx)(r.x6,{i18nKey:"share-panel.new-library-panel.cancel-button",children:"Cancel"})})]}):(0,n.jsxs)(o.a.ButtonRow,{children:[(0,n.jsx)(h.$n,{variant:"secondary",onClick:D,fill:"outline",children:(0,n.jsx)(r.x6,{i18nKey:"library-panel.add-modal.cancel",children:"Cancel"})}),(0,n.jsx)(h.$n,{onClick:I,disabled:M,children:(0,n.jsx)(r.x6,{i18nKey:"library-panel.add-modal.create",children:"Create library panel"})})]})]})},y=({isOpen:d=!1,panel:x,initialFolderUid:b,...D})=>(0,n.jsx)(o.a,{title:(0,r.t)("library-panels.add-library-panel-modal.title-create-library-panel","Create library panel"),isOpen:d,onDismiss:D.onDismiss,children:(0,n.jsx)(m,{panel:x,initialFolderUid:b,onDismiss:D.onDismiss})})},43707:(ne,A,e)=>{"use strict";e.d(A,{H:()=>s});var n=e(96540),a=e(27963);const s=n.memo(({actions:l,breadcrumbActions:r})=>{const{chrome:c}=(0,a.Il)();return(0,n.useLayoutEffect)(()=>()=>{c.update({actions:void 0,breadcrumbActions:void 0})},[c]),(0,n.useLayoutEffect)(()=>{c.update({actions:l,breadcrumbActions:r})}),null});s.displayName="TopNavUpdate"},43856:(ne,A,e)=>{"use strict";e.d(A,{Q:()=>i,i:()=>o});var n=e(74848),a=e(22803),s=e(63142),l=e(35484);const r=({children:h,href:f})=>{const{inner:g}=(0,s.of)(c);return f?(0,n.jsx)("a",{className:g,href:f,children:h}):(0,n.jsx)(n.Fragment,{children:h})},c=h=>({inner:(0,a.css)({display:"flex",width:"100%",padding:h.spacing(2)})}),i=({children:h,disableEvents:f,disableHover:g,isSelected:u,className:E,href:v,noMargin:p,...m})=>{const{oldContainer:y}=(0,s.of)(o,f,g,u,void 0,p);return(0,n.jsx)("div",{...m,className:(0,a.cx)(y,E),children:(0,n.jsx)(r,{href:v,children:h})})},o=(h,f=!1,g=!1,u,E,v=!1)=>{const p=u!==void 0;return{container:(0,a.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:h.spacing(E?1:2),background:h.colors.background.secondary,borderRadius:h.shape.radius.default,marginBottom:h.spacing(v?0:1),pointerEvents:f?"none":"auto",[h.transitions.handleMotion("no-preference","reduce")]:{transition:h.transitions.create(["background-color","box-shadow","border-color","color"],{duration:h.transitions.duration.short})},...!g&&{"&:hover":{background:h.colors.emphasize(h.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":(0,l.getFocusStyles)(h)},...p&&{cursor:"pointer"},...u&&{outline:`solid 2px ${h.colors.primary.border}`}}),oldContainer:(0,a.css)({display:"flex",width:"100%",background:h.colors.background.secondary,borderRadius:h.shape.radius.default,position:"relative",pointerEvents:f?"none":"auto",marginBottom:h.spacing(v?0:1),[h.transitions.handleMotion("no-preference","reduce")]:{transition:h.transitions.create(["background-color","box-shadow","border-color","color"],{duration:h.transitions.duration.short})},...!g&&{"&:hover":{background:h.colors.emphasize(h.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":(0,l.getFocusStyles)(h)}})}}},43951:(ne,A,e)=>{"use strict";e.d(A,{c:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({message:c,callToActionElement:i,footer:o,className:h})=>{const f=(0,s.of)(r);return(0,n.jsxs)("div",{className:(0,a.cx)([f.wrapper,h]),children:[c&&(0,n.jsx)("div",{className:f.message,children:c}),i,o&&(0,n.jsx)("div",{className:f.footer,children:o})]})},r=c=>({wrapper:(0,a.css)({label:"call-to-action-card",background:c.colors.background.secondary,borderRadius:c.shape.radius.default,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,padding:c.spacing(3),[c.breakpoints.down("sm")]:{padding:c.spacing(3,1)}}),message:(0,a.css)({marginBottom:c.spacing(3),fontStyle:"italic"}),footer:(0,a.css)({marginTop:c.spacing(3)})})},44017:(ne,A,e)=>{"use strict";e.d(A,{T4:()=>p,W1:()=>v,Wq:()=>m,rg:()=>u});var n=e(74848),a=e(38809),s=e(95004),l=e(92745),r=e(739),c=e(37386),i=e(77824),o=e(63527),h=e(41654),f=e(18857),g=e(99555);function u(y,d){m(y);const x=[(0,l.t)("grafana-ui.builder.axis.category-axis","Axis")];y.addTextInput({path:"axisLabel",name:(0,l.t)("grafana-ui.builder.axis.name-label","Label"),category:x,defaultValue:"",settings:{placeholder:(0,l.t)("grafana-ui.builder.axis.placeholder-label","Optional text"),expandTemplateVars:!0},showIf:b=>b.axisPlacement!==r.vM.Hidden,shouldApply:b=>b.type!==s.PU.time&&b.type!==s.PU.string}),p(y),y.addRadio({path:"axisGridShow",name:(0,l.t)("grafana-ui.builder.axis.name-grid-lines","Show grid lines"),category:x,defaultValue:void 0,settings:{options:[{value:void 0,label:(0,l.t)("grafana-ui.builder.axis.grid-line-options.label-auto","Auto")},{value:!0,label:(0,l.t)("grafana-ui.builder.axis.grid-line-options.label-on","On")},{value:!1,label:(0,l.t)("grafana-ui.builder.axis.grid-line-options.label-off","Off")}]},showIf:b=>b.axisPlacement!==r.vM.Hidden}).addRadio({path:"axisColorMode",name:(0,l.t)("grafana-ui.builder.axis.color-label","Color"),category:x,defaultValue:r.Y$.Text,settings:{options:[{value:r.Y$.Text,label:(0,l.t)("grafana-ui.builder.axis.color-options.label-text","Text")},{value:r.Y$.Series,label:(0,l.t)("grafana-ui.builder.axis.color-options.label-series","Series")}]},showIf:b=>b.axisPlacement!==r.vM.Hidden}).addBooleanSwitch({path:"axisBorderShow",name:(0,l.t)("grafana-ui.builder.axis.name-show-border","Show border"),category:x,defaultValue:!1,showIf:b=>b.axisPlacement!==r.vM.Hidden}),y.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:(0,l.t)("grafana-ui.builder.axis.name-scale","Scale"),category:x,editor:v,override:v,defaultValue:{type:r.L4.Linear},shouldApply:b=>b.type===s.PU.number,process:a.hS}).addBooleanSwitch({path:"axisCenteredZero",name:(0,l.t)("grafana-ui.builder.axis.name-centered-zero","Centered zero"),category:x,defaultValue:!1,showIf:b=>b.scaleDistribution?.type!==r.L4.Log}).addNumberInput({path:"axisSoftMin",name:(0,l.t)("grafana-ui.builder.axis.name-soft-min","Soft min"),defaultValue:d.axisSoftMin,category:x,settings:{placeholder:(0,l.t)("grafana-ui.builder.axis.placeholder-soft-min","See: Standard options > Min")}}).addNumberInput({path:"axisSoftMax",name:(0,l.t)("grafana-ui.builder.axis.name-soft-max","Soft max"),defaultValue:d.axisSoftMax,category:x,settings:{placeholder:(0,l.t)("grafana-ui.builder.axis.placeholder-soft-max","See: Standard options > Max")}})}const E=[{label:"2",value:2},{label:"10",value:10}],v=({value:y,onChange:d})=>{const x=y?.type??r.L4.Linear,b=y?.log??2,D=[{label:(0,l.t)("grafana-ui.builder.axis.scale-distribution-editor.distribution-options.label-linear","Linear"),value:r.L4.Linear},{label:(0,l.t)("grafana-ui.builder.axis.scale-distribution-editor.distribution-options.label-log","Logarithmic"),value:r.L4.Log},{label:(0,l.t)("grafana-ui.builder.axis.scale-distribution-editor.distribution-options.label-symlog","Symlog"),value:r.L4.Symlog}];return(0,n.jsxs)(h.B,{direction:"column",gap:2,children:[(0,n.jsx)(i.z,{value:x,options:D,onChange:C=>{d({...y,type:C,log:C===r.L4.Linear?void 0:b})}}),(x===r.L4.Log||x===r.L4.Symlog)&&(0,n.jsx)(c.D,{label:(0,l.t)("grafana-ui.axis-builder.log-base","Log base"),children:(0,n.jsx)(f.l6,{options:E,value:b,onChange:C=>{d({...y,log:C.value})}})}),x===r.L4.Symlog&&(0,n.jsx)(c.D,{label:(0,l.t)("grafana-ui.axis-builder.linear-threshold","Linear threshold"),style:{marginBottom:0},children:(0,n.jsx)(o.p,{placeholder:"1",value:y?.linearThreshold,onChange:C=>{d({...y,linearThreshold:Number(C.currentTarget.value)})}})})]})};function p(y){y.addNumberInput({path:"axisWidth",name:(0,l.t)("grafana-ui.builder.axis.name-width","Width"),category:[(0,l.t)("grafana-ui.builder.axis.category-axis","Axis")],settings:{placeholder:(0,l.t)("grafana-ui.builder.axis.placeholder-width","Auto")},showIf:d=>d.axisPlacement!==r.vM.Hidden})}function m(y,d=x=>!0){const x=(0,g.P)();y.addRadio({path:"axisPlacement",name:(0,l.t)("grafana-ui.builder.axis.name-placement","Placement"),category:[(0,l.t)("grafana-ui.builder.axis.category-axis","Axis")],defaultValue:x.axisPlacement[0].value,settings:{options:x.axisPlacement.filter(b=>d(b.value))}})}},44019:(ne,A,e)=>{"use strict";e.r(A),e.d(A,{getChildId:()=>a,renderOrCallToRender:()=>s});var n=e(96540);function a(l){let r;const c=n.Children.only(l);return"id"in c?.props?r=c.props.id:"inputId"in c.props&&(r=c?.props.inputId),typeof r=="string"?r:void 0}function s(l,r){if(n.isValidElement(l)||typeof l=="string"||typeof l=="number")return l;if(typeof l=="function"&&r)return l(r);throw new Error(`${l} is not a React element nor a function that returns React element`)}},44022:(ne,A,e)=>{"use strict";e.d(A,{f:()=>s,z:()=>l});var n=e(36580),a=e(4651);const s=r=>{if(!r)return!1;if((0,n.s9)(r.datasource))return!0;const c=r;return typeof c.type!="string"?!1:Object.values(a.Tz).includes(c.type)};function l(r){return["avg","min","max","sum","count","last","median","diff","diff_abs","percent_diff","percent_diff_abs","count_non_null"].includes(r)}},44109:(ne,A,e)=>{"use strict";e.d(A,{FY:()=>v,Ll:()=>m,O3:()=>y,ZU:()=>E,we:()=>u});var n=e(29189),a=e(96540),s=e(16817),l=e(52161),r=e(70327),c=e(55143),i=e(67598),o=e(94646),h=e(29609),f=e(23265),g=e(18404);function u(d,x,b){const D=(0,l.oh)(x),{dsFeatures:C,isLoadingDsFeatures:P}=y(x),{currentData:T,isLoading:O,error:S}=r.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:x,ruleName:d,namespace:b?.namespace,groupName:b?.groupName}),[B]=r.hK.endpoints.getRuleGroupForNamespace.useLazyQuery(),{loading:K,error:U,value:F}=(0,s.A)(async()=>{if(!D)throw new Error("Unable to obtain data source settings");if(S)throw new Error("Unable to obtain Prometheus rules");const I=T||[],V=[];if(C?.rulerConfig){const N=C.rulerConfig,W=I.map(R=>R.groups.map(G=>({namespace:R,group:G}))).flat();await Promise.allSettled(W.map(async R=>{const G=await B({rulerConfig:N,namespace:R.namespace.name,group:R.group.name}).unwrap();V.push(G)}))}return I.map(N=>(0,f.O6)(D,N,V)).flatMap(N=>N.groups.flatMap(W=>W.rules))},[D,C,O,S,T,B]);return{loading:P||K,error:U,rules:F}}function E({ruleIdentifier:d,limitAlerts:x}){const{ruleSourceName:b}=d,D=p(d),{dsFeatures:C,isLoadingDsFeatures:P}=y(b),{loading:T,error:O,result:S}=v(d),{currentData:B=[],isLoading:K,error:U}=r.hK.endpoints.prometheusRuleNamespaces.useQuery({ruleSourceName:d.ruleSourceName,namespace:S?.namespace,groupName:S?.group,ruleName:S?.ruleName,limitAlerts:x},{skip:!S||T,refetchOnMountOrArgChange:!0}),F=(0,l.z2)(b),I=(0,g.a)(F?S?.namespace:void 0),V=F&&I.folder?(0,g.W)(I.folder):S?.namespace,[M,{currentData:L,isLoading:N,error:W}]=r.hK.endpoints.getRuleGroupForNamespace.useLazyQuery();(0,a.useEffect)(()=>{!C?.rulerConfig||!S||M({rulerConfig:C.rulerConfig,namespace:S.namespace,group:S.group})},[C,M,S]);const R=(0,a.useMemo)(()=>{if(!D||!S)return;const G=L&&V?{[V]:[L]}:{};return(0,f.gt)(D,B,G).flatMap(ae=>ae.groups).flatMap(ae=>ae.rules).find(ae=>o.LC(o.UP(b,ae),d))},[d,b,B,L,D,S,V]);return{loading:T||P||K||N,error:O??U??W,result:R}}function v(d){const x=(0,h.A4)(d)&&d.uid!==""?{uid:d.uid}:n.hT,{isLoading:b,currentData:D,error:C,isUninitialized:P}=r.hK.endpoints.getAlertRule.useQuery(x,{refetchOnMountOrArgChange:!0});return(0,a.useMemo)(()=>{if((0,h.Mj)(d)||(0,h.X4)(d))try{return{result:{datasource:d.ruleSourceName,namespace:d.namespace,group:d.groupName,ruleName:d.ruleName,groupIdentifier:i.HA.fromRuleIdentifier(d)},loading:!1}}catch(T){return{loading:!1,error:T}}return(0,h.A4)(d)?b||P?{loading:!0}:C?{loading:!1,error:C}:D?{result:{datasource:d.ruleSourceName,namespace:D.grafana_alert.namespace_uid,group:D.grafana_alert.rule_group,ruleName:D.grafana_alert.title,groupIdentifier:{namespace:{uid:D.grafana_alert.namespace_uid},groupName:D.grafana_alert.rule_group,groupOrigin:"grafana"}},loading:!1}:{loading:!1,error:new Error(`Unable to obtain rule location for rule ${d.uid}`)}:{loading:!1,error:new Error("Unsupported rule identifier")}},[d,b,P,C,D])}function p(d){return(0,h.A4)(d)?"grafana":(0,l.oh)(d.ruleSourceName)}function m({ruleIdentifier:d}){const x=p(d),{data:b,isLoading:D}=c.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:d.ruleSourceName}),{loading:C,error:P,result:T}=v(d),[O,{currentData:S,isLoading:B,isUninitialized:K,error:U}]=r.hK.endpoints.getRuleGroupForNamespace.useLazyQuery();(0,a.useEffect)(()=>{!b?.rulerConfig||!T||O({rulerConfig:b.rulerConfig,namespace:T.namespace,group:T.group})},[b,O,T]);const F=(0,a.useMemo)(()=>{const{ruleSourceName:I}=d;if(!S||!x||!T)return;const V=S.rules.find(M=>{const L=o.P1(I,T.namespace,T.group,M);return o.LC(L,d)});if(V)return{ruleSourceName:I,group:S,namespace:T.namespace,rule:V}},[d,S,x,T]);return{loading:C||D||B||K,error:P??U,result:F}}function y(d){const{currentData:x,isLoading:b}=c.L.endpoints.discoverDsFeatures.useQuery({rulesSourceName:d});return{isLoadingDsFeatures:b,dsFeatures:x}}},44173:(ne,A,e)=>{"use strict";e.d(A,{D:()=>c});var n=e(74848),a=e(51898),s=e(92745),l=e(34999);const r=a.Tp.pages.ShareDashboardModal.PublicDashboard,c=({showDescription:i=!0})=>(0,n.jsx)(l.F,{severity:"warning",title:(0,s.t)("public-dashboard.modal-alerts.unsupported-template-variable-alert-title","Template variables are not supported"),"data-testid":r.TemplateVariablesWarningAlert,bottomSpacing:0,children:i&&(0,n.jsx)(s.x6,{i18nKey:"public-dashboard.modal-alerts.unsupported-template-variable-alert-desc",children:"This public dashboard may not work since it uses template variables"})})},44220:(ne,A,e)=>{"use strict";e.d(A,{Ii:()=>i,Zw:()=>r,bw:()=>c});var n=e(99090),a=e(52763),s=e(27044),l=e(78034);const r=(0,a.zD)("browseDashboards/refreshParents",async(o,{getState:h,dispatch:f})=>{const{browseDashboards:g}=h(),{rootItems:u,childrenByParentUID:E}=g,v=new Set;for(const p of o){const m=(0,l.R)(u?.items??[],E,p);v.add(m?.parentUID)}for(const p of v)f(c({parentUID:p,pageSize:s.md}))}),c=(0,a.zD)("browseDashboards/refetchChildren",async({parentUID:o,pageSize:h})=>{const f=o===n.TF?void 0:o;let g=1,u="folder",E=await(0,s.uT)(f,void 0,g,h),v=E.length<h;if(u==="folder"&&v){u="dashboard",g=1;const p=await(0,s.aw)(f,g,h);v=p.length<h,E=E.concat(p)}return{children:E,lastPageOfKind:v,page:g,kind:u}}),i=(0,a.zD)("browseDashboards/fetchNextChildrenPage",async({parentUID:o,excludeKinds:h=[],pageSize:f},g)=>{const u=!h.includes("dashboard"),E=o===n.TF?void 0:o,v=g.getState().browseDashboards,p=E?v.childrenByParentUID[E]:v.rootItems;let m=1,y;if(p?p.lastFetchedKind==="dashboard"&&!p.lastKindHasMoreItems?console.warn(`fetchNextChildrenPage called for ${E} but that collection is fully loaded`):p.lastFetchedKind==="folder"&&p.lastKindHasMoreItems?(m=p.lastFetchedPage+1,y="folder"):u&&(m=p.lastFetchedKind==="folder"?1:p.lastFetchedPage+1,y="dashboard"):(m=1,y="folder"),!y)return;let d=y==="folder"?await(0,s.uT)(E,void 0,m,f):await(0,s.aw)(E,m,f),x=d.length<f;if(y==="folder"&&x&&u){y="dashboard",m=1;const b=await(0,s.aw)(E,m,f);x=b.length<f,d=d.concat(b)}return{children:d,lastPageOfKind:x,page:m,kind:y}})},44229:(ne,A,e)=>{"use strict";e.d(A,{X:()=>i,t:()=>o});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(80011),c=e(63142);const i=f=>{const{timestamp:g,timeZone:u,className:E}=f,v=(0,c.of)(h);return(0,s.isString)(u)?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:(0,a.cx)(v.offset,E),children:o(g,u)})}):null},o=(f,g)=>`UTC${(0,r.LE)(f,{timeZone:g,format:"Z"})}`,h=f=>{const g=(0,a.css)({fontWeight:"normal",fontSize:f.typography.size.sm,color:f.colors.text.secondary,whiteSpace:"normal"});return{offset:(0,a.css)(g,{color:f.colors.text.primary,background:f.colors.background.secondary,padding:"2px 5px",borderRadius:f.shape.radius.default,marginLeft:"4px"})}}},44232:(ne,A,e)=>{"use strict";e.d(A,{PI:()=>y,Pm:()=>m,XS:()=>C,Zo:()=>O,a_:()=>p,eG:()=>D,k3:()=>g,k_:()=>v,nF:()=>E,py:()=>u});var n=e(2543),a=e.n(n),s=e(88673),l=e(41119),r=e(46644),c=e(36638),i=e(57866),o=e(95004),h=e(11576),f=e(16515);const g="__series.name",u="__field.displayName",E="__field.labels",v="__calc",p="__cell_",m=25,y=B=>{const{replaceVariables:K,reduceOptions:U,timeZone:F,theme:I}=B,V=U.calcs.length?U.calcs:[r.gy.last],M=[],L=(0,c.NS)(U.fields?{id:i.Ct.byRegexp,options:U.fields}:{id:i.Ct.numeric}),N=B.data??[],W=U.limit?U.limit:m;let R=!1;for(let G=0;G<N.length&&!R;G++){const w=N[G],{timeField:_}=(0,l.KR)(w),Q=new s.R(w);for(let ae=0;ae<w.fields.length&&!R;ae++){const q=w.fields[ae],k=q.getLinks;if(!L(q,w,N))continue;let ee=q.config;q.state?.range&&(ee={...ee,...q.state?.range});let j=q.config.displayName??"";const J=q.display??(0,h.J)({field:q,theme:B.theme,timeZone:F});if(U.values)for(let Z=0;Z<q.values.length;Z++){q.state=x(q,M.length);const te=S(q,Z),se=J(q.values[Z]),ie=d(w,q,Z,K,te),ce=b(ie,B.fieldConfig,I);if(M.push({name:"",field:ee,display:{...se,title:ie,color:ce??se.color},view:Q,colIndex:ae,rowIndex:Z,getLinks:k?()=>k({valueRowIndex:Z}):()=>[],hasLinks:D(q)}),M.length>=W){R=!0;break}}else{const Z=(0,r.Nw)({field:q,reducers:V});for(const te of V){const se=q.state?.scopedVars??{};se[v]={value:te,text:te};const ie=J(Z[te]);j!==""?ie.title=K(j,se):ie.title=(0,f.Ct)(q,w,N),ie.percentChange=B.percentChange?(0,r.Nw)({field:q,reducers:[r.gy.diffperc]}).diffperc:void 0;let ce;B.sparkline&&(ce={y:w.fields[ae],x:_},te===r.gy.last?ce.highlightIndex=ce.y.values.length-1:te===r.gy.first&&(ce.highlightIndex=0));const re=w.length===1?0:void 0;M.push({name:te,field:ee,display:ie,sparkline:ce,view:Q,colIndex:ae,getLinks:k?()=>k({calculatedValue:ie,valueRowIndex:re}):()=>[],hasLinks:D(q)})}}}}return M.length===0&&M.push(P(B)),M};function d(B,K,U,F,I){const V=K.config.displayName;if(V)return V.indexOf(p)?F(O(V),I):F(V,I);let M=[],L=0;for(const N of B.fields)if(N!==K)if(N.type===o.PU.string){const W=N.values[U]??"",R=N.display?N.display(W).text:W;R.length>0&&M.push(R)}else N.type===o.PU.number&&L++;return(L||M.length===0)&&M.push((0,f.Ct)(K,B)),M.join(" ")}function x(B,K){return{...B.state,seriesIndex:K}}function b(B,K,U){for(const F of K.overrides)if(F.matcher.id==="byName"&&F.matcher.options===B){for(const I of F.properties)if(I.id==="color"&&I.value)return U.visualization.getColorByName(I.value.fixedColor)}return null}function D(B){return B.config?.links?.length?B.config.links.length>0:!1}function C(B){let K="",U="",F="",I="";for(let V=0;V<B.length;V++){const M=B[V].display;M.text&&M.text.length>U.length&&(U=M.text),M.title&&M.title.length>K.length&&(K=M.title),M.prefix&&M.prefix.length>F.length&&(F=M.prefix),M.suffix&&M.suffix.length>I.length&&(I=M.suffix)}return{text:U,title:K,suffix:I,prefix:F}}function P(B){const K="No data",{fieldConfig:U,timeZone:F}=B,{defaults:I}=U,M=(0,h.J)({field:{name:"",type:o.PU.other,config:I},theme:B.theme,timeZone:F})(null),L=T(M,K);return{name:K,field:{...I,max:I.max??0,min:I.min??0},display:{text:L,numeric:0,color:M.color},hasLinks:!1}}function T(B,K){return!B||(0,n.isEmpty)(B.text)?K:B.text}function O(B){return B.replace(/\${__cell_(\d+)(.*?)}|\[\[__cell_(\d+)(.*?)\]\]|\$__cell_(\d+)(\S*)/g,(K,U,F,I,V,M,L)=>`\${__data.fields[${U??I??M}]${F??V??L}}`)}function S(B,K){return B.state?.scopedVars?.__dataContext?{...B.state?.scopedVars,__dataContext:{value:{...B.state?.scopedVars?.__dataContext.value,rowIndex:K}}}:B.state?.scopedVars}},44326:(ne,A,e)=>{"use strict";e.d(A,{V:()=>n});function n(){Object.getOwnPropertyDescriptor(Array.prototype,"toArray")||Object.defineProperties(Array.prototype,{get:{value:function(a){return this[a]},writable:!0,enumerable:!1,configurable:!0},set:{value:function(a,s){this[a]=s},writable:!0,enumerable:!1,configurable:!0},add:{value:function(a){this.push(a)},writable:!0,enumerable:!1,configurable:!0},toArray:{value:function(){return this},writable:!0,enumerable:!1,configurable:!0}})}n()},44398:(ne,A,e)=>{"use strict";e.d(A,{l:()=>v});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(63142),c=e(47087),i=e(24726),o=e(35484);const h=b=>({container:(0,a.css)({display:"flex",alignItems:"center",flexDirection:"row-reverse",justifyContent:"space-between",position:"relative"}),radio:(0,a.css)({opacity:0,width:"0 !important","&:focus-visible + label":(0,o.getFocusStyles)(b)}),label:(0,a.css)({cursor:"pointer",flex:1,padding:b.spacing(1),borderRadius:b.shape.radius.default,"&:hover":{background:b.colors.action.hover,cursor:"pointer"}}),labelSelected:(0,a.css)({background:b.colors.action.selected,"&::before":{backgroundImage:b.colors.gradients.brandVertical,borderRadius:b.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",width:b.spacing(.5),left:0,top:0}})}),f=(0,s.memo)(({value:b,onSelect:D,selected:C=!1,name:P})=>{const T=(0,r.of)(h),O=(0,i.A)();return(0,n.jsxs)("li",{className:T.container,children:[(0,n.jsx)("input",{className:T.radio,checked:C,name:P,type:"checkbox","data-role":"item",tabIndex:-1,id:O,onChange:()=>D(b)}),(0,n.jsx)("label",{className:(0,a.cx)(T.label,C&&T.labelSelected),htmlFor:O,children:b.display})]})});f.displayName="TimeRangeOption";const g=(b,D)=>(b%D+D)%D,u=["ArrowUp","ArrowDown","Home","End","Enter","Tab"],E=({localRef:b,options:D})=>{const[C,P]=(0,s.useState)(0);return(0,s.useEffect)(()=>{const O=b.current?.querySelectorAll('[data-role="item"]')||[],S=Array.from(O).findIndex(K=>K.checked),B=S>=0?S:0;O.forEach((K,U)=>{K.tabIndex=U===B?0:-1}),P(B)},[b,D]),[O=>{const S=b?.current?.querySelectorAll('[data-role="item"]'),B=S?.length??0;u.indexOf(O.key)>-1&&(O.preventDefault(),O.key!=="Tab"&&O.stopPropagation());let K=null;switch(O.key){case"ArrowUp":K=g(C-1,B);break;case"ArrowDown":K=g(C+1,B);break;case"Home":K=0;break;case"End":K=B-1;break;case"Enter":S?.[C]?.click();break;default:break}K!==null&&(P(K),S?.[K]?.focus(),S?.forEach((U,F)=>{U.tabIndex=F===K?0:-1}))}]},v=b=>{const D=(0,r.of)(d),{title:C,options:P,placeholderEmpty:T}=b;return typeof T<"u"&&P.length<=0?(0,n.jsx)(n.Fragment,{children:T}):C?(0,n.jsx)("section",{"aria-label":C,children:(0,n.jsxs)("fieldset",{children:[(0,n.jsx)("div",{className:D.title,children:(0,n.jsx)(c.e,{children:C})}),(0,n.jsx)(p,{...b})]})}):(0,n.jsx)(p,{...b})},p=({options:b,value:D,onChange:C,title:P})=>{const T=(0,r.of)(x),O=(0,s.useRef)(null),[S]=E({localRef:O,options:b});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("ul",{role:"presentation",onKeyDown:S,ref:O,"aria-roledescription":(0,l.t)("time-picker.time-range.aria-role","Time range selection"),className:T.list,children:b.map((B,K)=>(0,n.jsx)(f,{value:B,selected:y(B,D),onSelect:C,name:P??(0,l.t)("time-picker.time-range.default-title","Time ranges")},m(B,K)))})})};function m(b,D){return`${b.from}-${b.to}-${D}`}function y(b,D){return!D||!b?!1:D.from===b.from&&D.to===b.to}const d=()=>({title:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px 5px 9px"})}),x=b=>({list:(0,a.css)({padding:b.spacing(.5)})})},44410:(ne,A,e)=>{"use strict";e.d(A,{K:()=>i,O:()=>o});var n=e(47070),a=e(75234),s=e(45229),l=e(65642),r=e(73427),c=e(69738);async function i(h,f){const g=l.$W.theme2,u=(0,n.g)(h);if(s.A.publish(new a.E8(u)),g.colors.mode!==u.colors.mode){const v=document.createElement("link");v.rel="stylesheet",v.href=l.$W.bootData.assets[u.colors.mode],v.onload=()=>{const p=document.getElementsByTagName("link");for(let m=0;m<p.length;m++){const y=p[m];y.href&&y.href.includes(`build/grafana.${g.colors.mode}`)&&y.remove()}},document.head.insertBefore(v,document.head.firstChild)}if(f||!r.TP.isSignedIn)return;await new c.W("user").patch({theme:h})}async function o(h){const f=l.$W.theme2;i(f.isDark?"light":"dark",h)}},44458:(ne,A,e)=>{"use strict";e.d(A,{e:()=>r});var n=e(74848),a=e(92745),s=e(45861),l=e(7075);const r=({size:c,disabled:i,onConfirm:o,"aria-label":h,closeOnConfirm:f})=>(0,n.jsx)(l.Z,{confirmText:(0,a.t)("grafana-ui.confirm-button.confirmText-delete","Delete"),confirmVariant:"destructive",size:c||"md",disabled:i,onConfirm:o,closeOnConfirm:f,children:(0,n.jsx)(s.$n,{"aria-label":h??(0,a.t)("grafana-ui.confirm-button.aria-label-delete","Delete"),variant:"destructive",icon:"times",size:c||"sm"})})},44515:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>n,o:()=>a});const n={"text/plain":[".csv",".txt"],"application/json":[".json"]},a=5e5},44580:(ne,A,e)=>{"use strict";e.d(A,{F:()=>r,g:()=>c});var n=e(74848),a=e(17548),s=e(92745),l=e(63527),r=(i=>(i.LessThan="lessthan",i.GreaterThan="greaterthan",i))(r||{});const c=({value:i,onChange:o,inputPrefix:h,isTime:f})=>{let g=a.secondsToHms(i/1e3);f||(g="10");const u=m=>{let y=!1;if(m)try{f&&a.isValidTimeSpan(m)?y=a.intervalToMs(m):y=Number(m)}catch(d){console.warn("ERROR",d)}o(y)},E=m=>{m.key==="Enter"&&u(m.currentTarget.value)},v=m=>{u(m.currentTarget.value)},p=h==="greaterthan"?(0,n.jsx)("div",{children:">"}):h==="lessthan"?(0,n.jsx)("div",{children:"<"}):null;return(0,n.jsx)(l.p,{autoFocus:!1,placeholder:(0,s.t)("timeseries.nulls-threshold-input.placeholder-never","Never"),width:10,defaultValue:g,onKeyDown:E,onBlur:v,prefix:p,spellCheck:!1})}},44720:(ne,A,e)=>{"use strict";e.d(A,{a:()=>i,d:()=>o});var n=e(74848),a=e(22803),s=e(34734),l=e(63142),r=e(3642);const c=(h,f)=>({valueNavigation:(0,a.css)({width:r.QH,fontWeight:"bold"}),valueNavigationWrapper:(0,a.css)({display:"flex",justifyContent:"flex-end"}),itemLabelsWrap:(0,a.css)({borderBottom:f?`1px solid ${h.colors.border.medium}`:""})}),i=h=>h.includes(s.gs)?h.replace(s.gs,""):h,o=({valueLabels:h,expanded:f})=>{const g=(0,l.of)(c,f);return(0,n.jsx)("div",{className:g.itemLabelsWrap,children:(0,n.jsx)("div",{className:g.valueNavigationWrapper,children:h.map((u,E)=>(0,n.jsx)("span",{className:g.valueNavigation,children:i(u.name)},u.name))})})}},44741:(ne,A,e)=>{"use strict";e.d(A,{cH:()=>Oe,mJ:()=>We,Ao:()=>me,IO:()=>Ye,e_:()=>de,e4:()=>xe,kh:()=>Je,CD:()=>Qe,No:()=>He,B$:()=>je,n_:()=>ve,bZ:()=>Ve,VD:()=>Ee,c7:()=>Pe,c$:()=>Fe});var n=e(2543),a=e(92745),s=e(43173),l=e(78282),r=e(45863),c=e(59857),i=e(8285),o=e(74848),h=e(16817),f=e(48480),g=e(51156),u=e(99584);function E(Be){const{variable:Le}=Be,{datasource:Ge,defaultKeys:Ze,allowCustomValue:qe}=Le.useState(),{value:at}=(0,h.A)(async()=>await(0,l.l)().get(Ge),[Ge]),ht=at?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters.",Et=rt=>{const Kt=(0,f.p$)(rt);Le.setState({datasource:Kt,supportsMultiValueOperators:rt.meta.multiValueFilterOperators})},mt=rt=>{Le.setState({defaultKeys:rt})},Pt=rt=>{Le.setState({allowCustomValue:rt.currentTarget.checked})};return(0,o.jsx)(u.Q,{datasource:Ge??void 0,infoText:ht,allowCustomValue:qe,onDataSourceChange:Et,defaultKeys:Ze,onDefaultKeysChange:mt,onAllowCustomValueChange:Pt,inline:Be.inline,datasourceSupported:!!at?.getTagKeys})}function v(Be){return Be instanceof r.H9?[new g.v({id:`variable-${Be.state.name}-value`,render:()=>(0,o.jsx)(E,{variable:Be,onRunQuery:n.noop,inline:!0})})]:(console.warn("getAdHocFilterOptions: variable is not an AdHocFiltersVariable"),[])}var p=e(75505),m=e(63527),y=e(23675);function d({variable:Be}){const{value:Le}=Be.useState(),Ge=Ze=>{Be.setState({value:Ze.currentTarget.value})};return(0,o.jsx)(y.d,{constantValue:Le.toString(),onChange:Ge})}function x(Be){return Be instanceof r.x0?[new g.v({title:(0,a.t)("dashboard-scene.constant-variable-form.label-value","Value"),id:"constant-variable-value",render:Le=>(0,o.jsx)(b,{id:Le.props.id,variable:Be})})]:(console.warn("getConstantVariableOptions: variable is not a ConstantVariable"),[])}function b({variable:Be,id:Le}){const{value:Ge}=Be.useState(),Ze=async qe=>{Be.setState({value:qe.currentTarget.value}),await(0,p.s)(Be.validateAndUpdate())};return(0,o.jsx)(m.p,{id:Le,defaultValue:Ge.toString(),onBlur:Ze,placeholder:(0,a.t)("dashboard-scene.constant-variable-form.placeholder-your-metric-prefix","Your metric prefix")})}var D=e(51898),C=e(87105),P=e(70430);function T({variable:Be,onRunQuery:Le}){const{query:Ge,isMulti:Ze,allValue:qe,includeAll:at,allowCustomValue:ht}=Be.useState(),Et=Gt=>{Be.setState({isMulti:Gt.currentTarget.checked})},mt=Gt=>{Be.setState({includeAll:Gt.currentTarget.checked})},Pt=Gt=>{Be.setState({query:Gt.currentTarget.value}),Le()},rt=Gt=>{Be.setState({allValue:Gt.currentTarget.value})},Kt=Gt=>{Be.setState({allowCustomValue:Gt.currentTarget.checked})};return(0,o.jsx)(P.w,{query:Ge??"",multi:!!Ze,allValue:qe??"",includeAll:!!at,allowCustomValue:ht,onMultiChange:Et,onIncludeAllChange:mt,onQueryChange:Pt,onAllValueChange:rt,onAllowCustomValueChange:Kt})}function O(Be){return Be instanceof r.yP?[new g.v({title:(0,a.t)("dashboard.edit-pane.variable.custom-options.values","Values separated by comma"),id:"custom-variable-values",render:({props:Le})=>(0,o.jsx)(S,{id:Le.id,variable:Be})})]:[]}function S({variable:Be,id:Le}){const{query:Ge}=Be.useState(),Ze=async qe=>{Be.setState({query:qe.currentTarget.value}),await(0,p.s)(Be.validateAndUpdate())};return(0,o.jsx)(C.f,{id:Le,rows:2,defaultValue:Ge,onBlur:Ze,placeholder:(0,a.t)("dashboard.edit-pane.variable.custom-options.values-placeholder","1, 10, mykey : myvalue, myvalue, escaped,value"),required:!0,"data-testid":D.Tp.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput})}var B=e(43243),K=e(42272);function U({variable:Be,onRunQuery:Le}){const{pluginId:Ge,regex:Ze,isMulti:qe,allValue:at,includeAll:ht,allowCustomValue:Et}=Be.useState(),mt=xe(),Pt=$t=>{Be.setState({pluginId:$t.value}),Le()},rt=$t=>{Be.setState({regex:$t.currentTarget.value}),Le()},Kt=$t=>{Be.setState({isMulti:$t.currentTarget.checked})},Gt=$t=>{Be.setState({includeAll:$t.currentTarget.checked})},en=$t=>{Be.setState({allValue:$t.currentTarget.value})},st=$t=>{Be.setState({allowCustomValue:$t.currentTarget.checked})};return(0,o.jsx)(K.y,{query:Ge,regex:Ze,multi:qe||!1,allValue:at,includeAll:ht||!1,optionTypes:mt,allowCustomValue:Et,onChange:Pt,onRegExBlur:rt,onMultiChange:Kt,onIncludeAllChange:Gt,onAllValueChange:en,onAllowCustomValueChange:st})}function F(Be){return Be instanceof r.mI?[new g.v({title:(0,a.t)("dashboard.edit-pane.variable.datasource-options.type","Type"),id:"datasource-options-type",render:({props:Le})=>(0,o.jsx)(I,{id:Le.id,variable:Be})}),new g.v({title:(0,a.t)("dashboard.edit-pane.variable.datasource-options.name-filter","Name filter"),id:"datasource-options-name-filter",description:(0,a.t)("dashboard.edit-pane.variable.datasource-options.name-filter-description","Regex filter for which data source instances to include. Leave empty for all."),render:({props:Le})=>(0,o.jsx)(V,{id:Le.id,variable:Be})})]:[]}function I({variable:Be,id:Le}){const{pluginId:Ge}=Be.useState(),Ze=xe(),qe=async at=>{Be.setState({pluginId:at.value}),await(0,p.s)(Be.validateAndUpdate())};return(0,o.jsx)(B.G,{id:Le,options:Ze,value:Ge,onChange:qe,placeholder:(0,a.t)("dashboard.edit-pane.variable.datasource-options.type-placeholder","Choose data source type"),"data-testid":D.Tp.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect})}function V({variable:Be,id:Le}){const{regex:Ge}=Be.useState(),Ze=async qe=>{Be.setState({regex:qe.currentTarget.value}),await(0,p.s)(Be.validateAndUpdate())};return(0,o.jsx)(m.p,{id:Le,defaultValue:Ge,onBlur:Ze,"data-testid":D.Tp.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.nameFilter,placeholder:(0,a.t)("dashboard.edit-pane.variable.datasource-options.name-filter-placeholder","Example: /^prod/")})}var M=e(96540),L=e(68125),N=e(30048),W=e(31286),R=e(34999),G=e(37386),w=e(21285),_=e(50992),Q=e(76792),ae=e(69076),q=e(32442);function k({datasource:Be,defaultOptions:Le,infoText:Ge,onDataSourceChange:Ze,onDefaultOptionsChange:qe,allowCustomValue:at,onAllowCustomValueChange:ht,inline:Et,datasourceSupported:mt}){const Pt=(0,M.useCallback)(rt=>{const Kt=(0,L.Jh)(`key,value
`+rt)[0],Gt=[];for(let en=0;en<Kt.length;en++)Gt.push({text:Kt.fields[0].values[en],value:Kt.fields[1].values[en]});qe(Gt)},[qe]);return(0,o.jsxs)(o.Fragment,{children:[!Et&&(0,o.jsx)(q.Y,{children:(0,o.jsx)(a.x6,{i18nKey:"dashboard-scene.group-by-variable-form.group-by-options",children:"Group by options"})}),(0,o.jsx)(W.a,{marginBottom:2,children:(0,o.jsx)(N.c,{label:(0,a.t)("dashboard-scene.group-by-variable-form.label-data-source","Data source"),htmlFor:"data-source-picker",tooltip:Ge,children:(0,o.jsx)(Q.sk,{current:Be,onChange:Ze,width:30,variables:!0,noDefault:!0})})}),mt?null:(0,o.jsx)(R.F,{title:(0,a.t)("dashboard-scene.group-by-variable-form.alert-not-supported","This data source does not support group by variables"),severity:"warning","data-testid":D.Tp.pages.Dashboard.Settings.Variables.Edit.GroupByVariable.infoText}),mt&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(G.D,{label:(0,a.t)("dashboard-scene.group-by-variable-form.label-use-static-group-by-dimensions","Use static group dimensions"),description:(0,a.t)("dashboard-scene.group-by-variable-form.description-provide-dimensions-as-csv-dimension-name-dimension-id","Provide dimensions as CSV: {{name}}, {{value}}",{name:"dimensionName",value:"dimensionId"}),children:(0,o.jsx)(w.d,{"data-testid":D.Tp.pages.Dashboard.Settings.Variables.Edit.GroupByVariable.modeToggle,value:Le!==void 0,onChange:rt=>{qe(Le===void 0?[]:void 0)}})}),Le!==void 0&&(0,o.jsx)(_.B,{height:300,language:"csv",value:Le.map(rt=>`${rt.text},${rt.value}`).join(`
`),onBlur:Pt,onSave:Pt,showMiniMap:!1,showLineNumbers:!0})]}),mt&&!Et&&ht&&(0,o.jsx)(ae.c,{value:at,name:(0,a.t)("dashboard-scene.group-by-variable-form.name-allow-custom-values","Allow custom values"),description:(0,a.t)("dashboard-scene.group-by-variable-form.description-enables-users-custom-values","Enables users to add custom values to the list"),onChange:ht,testId:D.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsAllowCustomValueSwitch})]})}function ee(Be){const{variable:Le,onRunQuery:Ge,inline:Ze}=Be,{datasource:qe,defaultOptions:at,allowCustomValue:ht=!0}=Le.useState(),{value:Et}=(0,h.A)(async()=>await(0,l.l)().get(qe),[Le.state]),mt=Et?.getTagKeys!==void 0,Pt=mt?"Group by dimensions are applied automatically to all queries that target this data source":"This data source does not support group by variable yet.",rt=async en=>{const st=(0,f.p$)(en);Le.setState({datasource:st}),Ge()},Kt=async en=>{Le.setState({defaultOptions:en}),Ge()},Gt=en=>{Le.setState({allowCustomValue:en.currentTarget.checked})};return(0,o.jsx)(k,{defaultOptions:at,datasource:qe??void 0,infoText:qe?Pt:void 0,onDataSourceChange:rt,onDefaultOptionsChange:Kt,allowCustomValue:ht,onAllowCustomValueChange:Gt,inline:Ze,datasourceSupported:mt})}function j(Be){return Be instanceof r.ZG?[new g.v({id:`variable-${Be.state.name}-value`,render:()=>(0,o.jsx)(ee,{variable:Be,onRunQuery:n.noop,inline:!0})})]:(console.warn("getAdHocFilterOptions: variable is not an AdHocFiltersVariable"),[])}var J=e(1096);function Z({variable:Be,onRunQuery:Le,inline:Ge}){const{intervals:Ze,autoStepCount:qe,autoEnabled:at,autoMinInterval:ht,value:Et}=Be.useState(),mt=(0,i.bx)(Ze),Pt=en=>{const st=(0,i.Sm)(en.currentTarget.value),$t=st.includes(Et)?Et:st[0];Be.setState({intervals:st,value:$t}),Le()},rt=en=>{Be.setState({autoStepCount:en.value})},Kt=en=>{Be.setState({autoEnabled:en.target.checked})},Gt=en=>{Be.setState({autoMinInterval:en.currentTarget.value})};return(0,o.jsx)(J.s,{intervals:mt,autoStepCount:qe,autoEnabled:at,onAutoCountChanged:rt,onIntervalsChange:Pt,onAutoEnabledChange:Kt,onAutoMinIntervalChanged:Gt,autoMinInterval:ht,inline:Ge})}function te(Be){return Be instanceof r.Yj?[new g.v({id:`variable-${Be.state.name}-value`,render:()=>(0,o.jsx)(Z,{variable:Be,onRunQuery:n.noop,inline:!0})})]:(console.warn("getIntervalVariableOptions: variable is not an IntervalVariable"),[])}var se=e(45861),ie=e(22787),ce=e(89640),re=e(66698),ue=e(38681),X=e(56620),le=e(83501),he=e(81053),fe=e(25379),Ce=e(18387);function Ae({variable:Be,onRunQuery:Le}){const{datasource:Ge,regex:Ze,sort:qe,refresh:at,isMulti:ht,includeAll:Et,allValue:mt,query:Pt,allowCustomValue:rt,staticOptions:Kt,staticOptionsOrder:Gt}=Be.useState(),{value:en}=r.jh.getTimeRange(Be).useState(),st=Nt=>{Be.setState({regex:Nt.currentTarget.value})},$t=Nt=>{Be.setState({sort:Nt.value})},xn=Nt=>{Be.setState({refresh:Nt})},pn=Nt=>{Be.setState({isMulti:Nt.currentTarget.checked})},_n=Nt=>{Be.setState({includeAll:Nt.currentTarget.checked})},kn=Nt=>{Be.setState({allValue:Nt.currentTarget.value})},Jn=Nt=>{Be.setState({allowCustomValue:Nt.currentTarget.checked})},pt=Nt=>{const Yt=(0,f.p$)(Nt);if((Be.state.datasource?.type||"")!==Yt.type){Be.setState({datasource:Yt,query:"",definition:""});return}Be.setState({datasource:Yt})},Rt=Nt=>{Be.setState({query:Nt,definition:Me(Nt)}),Le()},Mt=Nt=>{Le(),Be.setState({staticOptions:Nt})},Bt=Nt=>{Le(),Be.setState({staticOptionsOrder:Nt})};return(0,o.jsx)(he.u,{datasource:Ge??void 0,onDataSourceChange:pt,query:Pt,onQueryChange:Rt,onLegacyQueryChange:Rt,timeRange:en,regex:Ze,onRegExChange:st,sort:qe,onSortChange:$t,refresh:at,onRefreshChange:xn,isMulti:!!ht,onMultiChange:pn,includeAll:!!Et,onIncludeAllChange:_n,allValue:mt??"",onAllValueChange:kn,allowCustomValue:rt,onAllowCustomValueChange:Jn,staticOptions:Kt,staticOptionsOrder:Gt,onStaticOptionsChange:Mt,onStaticOptionsOrderChange:Bt})}function _e(Be){return Be instanceof r.fS?[new g.v({id:`variable-${Be.state.name}-value`,render:()=>(0,o.jsx)(Xe,{variable:Be})})]:(console.warn("getQueryVariableOptions: variable is not a QueryVariable"),[])}function Xe({variable:Be}){const[Le,Ge]=(0,M.useState)(!1),Ze=()=>{Be.refreshOptions()};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(W.a,{display:"flex",direction:"column",paddingBottom:1,children:(0,o.jsx)(se.$n,{tooltip:(0,a.t)("dashboard.edit-pane.variable.open-editor-tooltip","For more variable options open variable editor"),onClick:()=>Ge(!0),size:"sm",fullWidth:!0,"data-testid":D.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsOpenButton,children:(0,o.jsx)(a.x6,{i18nKey:"dashboard.edit-pane.variable.open-editor",children:"Open variable editor"})})}),(0,o.jsxs)(ie.a,{title:(0,a.t)("dashboard.edit-pane.variable.query-options.modal-title","Query Variable"),isOpen:Le,onDismiss:()=>Ge(!1),children:[(0,o.jsx)(De,{variable:Be}),(0,o.jsxs)(ie.a.ButtonRow,{children:[(0,o.jsx)(se.$n,{variant:"primary",fill:"outline",onClick:Ze,"data-testid":D.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.previewButton,children:(0,o.jsx)(a.x6,{i18nKey:"dashboard.edit-pane.variable.query-options.preview",children:"Preview"})}),(0,o.jsx)(se.$n,{variant:"secondary",fill:"outline",onClick:()=>Ge(!1),"data-testid":D.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.closeButton,children:(0,o.jsx)(a.x6,{i18nKey:"dashboard.edit-pane.variable.query-options.close",children:"Close"})})]})]})]})}function De({variable:Be}){const{datasource:Le,sort:Ge,refresh:Ze,query:qe,regex:at}=Be.useState(),{value:ht}=r.jh.getTimeRange(Be).useState(),{value:Et}=(0,h.A)(async()=>{const xn=await(0,l.l)().get(Le??""),pn=await(0,ue.y)(xn),_n=xn?.variables?.getDefaultQuery?.();if(!qe&&_n){const kn=typeof _n=="string"?_n:{..._n,refId:_n.refId??"A"};Kt(kn)}return{datasource:xn,VariableQueryEditor:pn}},[Le]),{datasource:mt,VariableQueryEditor:Pt}=Et??{},rt=xn=>{const pn=(0,f.p$)(xn);if((Be.state.datasource?.type||"")!==pn.type){Be.setState({datasource:pn,query:"",definition:""});return}Be.setState({datasource:pn})},Kt=xn=>{Be.setState({query:xn,definition:Me(xn)})},Gt=xn=>{Be.setState({regex:xn.currentTarget.value})},en=xn=>{Be.setState({sort:xn.value})},st=xn=>{Be.setState({refresh:xn})},$t=ve(Be);return(0,o.jsxs)("div",{"data-testid":D.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.editor,children:[(0,o.jsx)(G.D,{label:(0,a.t)("dashboard-scene.query-variable-editor-form.label-target-data-source","Target data source"),htmlFor:"data-source-picker",children:(0,o.jsx)(Q.sk,{current:mt,onChange:rt,variables:!0,width:30})}),mt&&Pt&&(0,o.jsx)(re.w,{onQueryChange:Kt,onLegacyQueryChange:Kt,datasource:mt,query:qe,VariableQueryEditor:Pt,timeRange:ht}),(0,o.jsx)(fe.Z,{defaultValue:at??"",name:(0,a.t)("dashboard-scene.query-variable-editor-form.name-regex","Regex"),description:(0,o.jsxs)("div",{children:[(0,o.jsx)(a.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.description-optional",children:"Optional, if you want to extract part of a series name or metric node segment."}),(0,o.jsx)("br",{}),(0,o.jsxs)(a.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.description-examples",children:["Named capture groups can be used to separate the display text and value (",(0,o.jsx)(ce.Y,{href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",external:!0,children:"see examples"}),")."]})]}),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onBlur:Gt,testId:D.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),(0,o.jsx)(le.z,{testId:D.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,onChange:en,sort:Ge}),(0,o.jsx)(X.U,{testId:D.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRefreshSelectV2,onChange:st,refresh:Ze}),$t&&(0,o.jsx)(Ce.j,{options:Be.getOptionsForSelect(!1)})]})}function Me(Be){return typeof Be=="string"?Be:Be.hasOwnProperty("query")&&typeof Be.query=="string"?Be.query:""}var Te=e(49602);function $e({defaultValue:Be,value:Le,onChange:Ge,onBlur:Ze,inline:qe}){return(0,o.jsxs)(o.Fragment,{children:[!qe&&(0,o.jsx)(q.Y,{children:(0,o.jsx)(a.x6,{i18nKey:"dashboard-scene.text-box-variable-form.text-options",children:"Text options"})}),(0,o.jsx)(Te._,{value:Le,defaultValue:Be,name:qe?void 0:(0,a.t)("dashboard-scene.text-box-variable.name-default-value","Default value"),placeholder:(0,a.t)("dashboard-scene.text-box-variable-form.placeholder-default-value-if-any","(optional)"),onChange:Ge,onBlur:Ze,width:30,testId:D.Tp.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2})]})}function Re({variable:Be,inline:Le}){const{value:Ge}=Be.useState(),Ze=qe=>{Be.setState({value:qe.currentTarget.value})};return(0,o.jsx)($e,{defaultValue:Ge,onBlur:Ze,inline:Le})}function Ke(Be){return Be instanceof r.TS?[new g.v({title:(0,a.t)("dashboard-scene.textbox-variable-form.label-value","Value"),id:`variable-${Be.state.name}-value`,render:()=>(0,o.jsx)(Re,{onChange:n.noop,variable:Be,inline:!0})})]:(console.warn("getTextBoxVariableOptions: variable is not a TextBoxVariable"),[])}function Ve(Be){return Be!=="system"}const Se=()=>({custom:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.custom","Custom"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.values-are-static-and-defined-manually","Values are static and defined manually"),editor:T,getOptions:O},query:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.query","Query"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.values-fetched-source-query","Values are fetched from a data source query"),editor:Ae,getOptions:_e},constant:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.constant","Constant"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.hidden-constant-variable","A hidden constant variable, useful for metric prefixes in dashboards you want to share"),editor:d,getOptions:x},interval:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.interval","Interval"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.values-timespans","Values are timespans, ex 1m, 1h, 1d"),editor:Z,getOptions:te},datasource:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.data-source","Data source"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.dynamically-switch-source-multiple-panels","Dynamically switch the data source for multiple panels"),editor:U,getOptions:F},adhoc:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.ad-hoc-filters","Ad hoc filters"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.add-keyvalue-filters-on-the-fly","Add key/value filters on the fly"),editor:E,getOptions:v},groupby:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.group-by","Group by"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.group","Add keys to group by on the fly"),editor:ee,getOptions:j},textbox:{name:(0,a.t)("dashboard-scene.get-editable-variables.name.textbox","Textbox"),description:(0,a.t)("dashboard-scene.get-editable-variables.description.users-enter-arbitrary-strings-textbox","Users can enter any arbitrary strings in a textbox"),editor:Re,getOptions:Ke}});function Ye(Be){const Ge=Se()[Be];if(!Ge)throw new Error(`Variable type ${Be} not found`);return Ge}const Ue=["query","custom","textbox","constant","datasource","interval","adhoc","groupby"];function je(){const Be=Se(),Le=Ue.map(Ge=>({label:Be[Ge].name,value:Ge,description:Be[Ge].description}));return s.$.featureToggles.groupByVariable?Le:Le.filter(Ge=>Ge.value!=="groupby")}function Qe(Be){return Se()[Be].editor}function He(Be,Le){switch(Be){case"custom":return new r.yP(Le);case"query":return new r.fS(Le);case"constant":return new r.x0({...Le,hide:c.zL.hideVariable});case"interval":return new r.Yj(Le);case"datasource":return new r.mI(Le);case"adhoc":return new r.H9({...Le,layout:s.$.featureToggles.newFiltersUI?"combobox":void 0});case"groupby":return new r.ZG(Le);case"textbox":return new r.TS(Le)}}function Je(Be){const Ge=de("query",Be);return new r.fS({name:Ge})}function de(Be,Le){let Ge=0,Ze=`${Be}${Ge}`;for(;Le.find(qe=>qe.state.name===Ze);)Ze=`${Be}${++Ge}`;return Ze}function ve(Be){return"options"in Be.state||"intervals"in Be.state}function me(Be){let Le="";return Be instanceof r.fS?Le=Be.state.definition||(typeof Be.state.query=="string"?Be.state.query:""):Be instanceof r.mI?Le=String(Be.state.pluginId):Be instanceof r.yP?Le=Be.state.query:Be instanceof r.Yj?Le=(0,i.bx)(Be.state.intervals):(Be instanceof r.TS||Be instanceof r.x0)&&(Le=String(Be.state.value)),Le}function xe(){const Be=(0,l.l)().getList({metrics:!0,variables:!0});return(0,n.chain)(Be).uniqBy("meta.id").map(Ge=>({label:Ge.meta.name,value:Ge.meta.id})).value()}function Ee(Be){return"type"in Be.state&&"getValue"in Be}function Pe(Be){return Ee(Be)?r.Go.isAdHocVariable(Be)||r.Go.isConstantVariable(Be)||r.Go.isCustomVariable(Be)||r.Go.isDataSourceVariable(Be)||r.Go.isIntervalVariable(Be)||r.Go.isQueryVariable(Be)||r.Go.isTextBoxVariable(Be)||r.Go.isGroupByVariable(Be):!1}const Oe=/^(?!__).*$/,We=/^\w+$/;function Fe(Be,Le){const Ge=Be.parent;if(!(Ge instanceof r.Pj))throw new Error("Variable parent is not a SceneVariableSet");if(!Oe.test(Le))return{isValid:!1,errorMessage:"Template names cannot begin with '__', that's reserved for Grafana's global variables"};if(!We.test(Le))return{isValid:!1,errorMessage:"Only word characters are allowed in variable names"};const Ze=Ge.getByName(Le);return Ze&&Ze!==Be?{isValid:!1,errorMessage:"Variable with the same name already exists"}:{isValid:!0}}},44802:(ne,A,e)=>{"use strict";e.d(A,{W:()=>m});var n=e(74848),a=e(96540),s=e(92745),l=e(31286),r=e(77824),c=e(25797),i=e(51156),o=e(15759),h=e(42954),f=e(8835),g=e(1131),u=e(97883),E=e(98279);const v=new h.O(()=>[g.D.descriptor,f.X2.descriptor,u.V.descriptor,E.K.descriptor]);function p({layoutManager:y}){const d=y.descriptor.isGridLayout,x=v.list().filter(C=>C.isGridLayout===d),b=(0,a.useCallback)(C=>{const P=y.parent;P&&(0,o.l)(P)&&P.switchLayout(C.createFromLayout(y))},[y]),D=x.map(C=>({value:C,label:C.name,icon:C.icon,description:C.description,ariaLabel:`layout-selection-option-${C.name}`}));return(0,n.jsx)(l.a,{paddingBottom:2,display:"flex",grow:1,alignItems:"center",children:(0,n.jsx)(r.z,{fullWidth:!0,value:y.descriptor,options:D,onChange:b})})}function m(y){return(0,a.useMemo)(()=>{const d=y.descriptor.isGridLayout,x=new c.C({title:(0,s.t)("dashboard.layout.common.group-layout","Group layout"),id:"dash-group-layout",isOpenDefault:!1}),b=new c.C({title:(0,s.t)("dashboard.layout.common.panel-layout","Panel layout"),id:"dash-grid-layout",isOpenDefault:!1});if(b.addItem(new i.v({title:"",id:"dash-grid-layout-option",skipField:!0,render:()=>(0,n.jsx)(p,{layoutManager:y})})),d?x.props.disabledText=(0,s.t)("dashboard.layout.common.group-layout-disabled","No groups exists on this level"):(x.addItem(new i.v({title:"",id:"dash-group-layout-option",skipField:!0,render:()=>(0,n.jsx)(p,{layoutManager:y})})),b.props.disabledText=(0,s.t)("dashboard.layout.common.panel-layout-disabled","Select a row or tab to change panel layout options")),y.getOptions)for(const D of y.getOptions())b.addItem(D);return[x,b]},[y])}},44804:(ne,A,e)=>{"use strict";e.d(A,{s:()=>i});var n=e(2543),a=e.n(n),s=e(45863),l=e(60379),r=e(41644),c=e(11534);class i extends s.Bs{constructor(h){super(h),this._log=(0,l.h)("DashboardReloadBehavior"),this.reloadDashboard=(0,n.debounce)(this.reloadDashboard).bind(this);const f=!!this.state.uid&&!!this.state.reloadOnParamsChange;this.addActivationHandler(()=>{f&&(this._dashboardScene=s.jh.getAncestor(this,c.H$),this._variableDependency=new s.Sh(this,{onAnyVariableChanged:g=>{this._log.logger("onAnyVariableChanged",g.state.name,JSON.stringify(g.getValue())),this.reloadDashboard()},dependsOnScopes:!0}))})}getCurrentState(){const h=s.jh.getScopes(this)??[],f=s.jh.getTimeRange(this).state.value;return{scopes:h.map(g=>g.metadata.name),from:f.from.toISOString(),to:f.to.toISOString(),...s.Go.getUrlState(this._dashboardScene?.state.$variables),version:this._dashboardScene?.state.version}}isEditing(){return!!this._dashboardScene?.state.isEditing}isWaitingForVariables(){const h=s.jh.getVariables(this.parent);return h.state.variables.some(f=>h.isVariableLoadingOrWaitingToUpdate(f))}reloadDashboard(){if(this.isEditing()||this.isWaitingForVariables()){this._log.logger("DashboardReloadBehavior reloadDashboard isEditing or waiting for variables, skipping reload");return}const h=this.getCurrentState(),f=this._prevState??{};f.from=h.from,f.to=h.to;const g=!(0,n.isEqual)(h,this._prevState);this._log.logger(`DashboardReloadBehavior reloadDashboard stateChanged ${g?"true":"false"}`,this._prevState,h),g&&(this._prevState=h,setTimeout(()=>{(0,r.sP)().reloadDashboard(h)}))}}},45012:(ne,A,e)=>{"use strict";e.d(A,{$:()=>a,x:()=>s});let n;const a=l=>{n=l},s=()=>n?n():[!1,()=>console.error("MegaMenuOpen hook not found")]},45013:(ne,A,e)=>{"use strict";e.d(A,{e:()=>o});var n=e(74848),a=e(2543),s=e.n(a),l=e(96540),r=e(34343),c=e(41654);const i=({value:h,onChange:f})=>{const g=(0,l.useCallback)(u=>{f({...h,[u]:!h[u]})},[h,f]);return(0,n.jsx)(c.B,{gap:.5,children:Object.keys(h).map(u=>{const E=u;return(0,n.jsx)(r.m,{icon:h[E]?"eye-slash":"eye",onClick:()=>g(E),label:(0,a.startCase)(E),selected:h[E]},E)})})};function o(h){h.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:i,override:i,shouldApply:()=>!0,hideFromDefaults:!0,process:f=>f})}},45173:(ne,A,e)=>{"use strict";e.d(A,{P:()=>u,_:()=>g});var n=e(92138),a=e(92745),s=e(83873),l=e(47797),r=e(77197),c=e(54115),i=e(75735),o=e(52043),h=e(95407),f=e(60171);const g={group:"dashboard.grafana.app",version:"v1beta1",resource:"dashboards"};class u{constructor(){this.client=new c.ws(g)}saveDashboard(v){const p=v.dashboard,m={metadata:{...v?.k8s},spec:{...p,title:p.title??"",uid:p.uid??""}};return v.message?m.metadata.annotations={...m.metadata.annotations,[i.fY]:v.message}:m.metadata.annotations&&delete m.metadata.annotations[i.fY],v.folderUid&&(m.metadata.annotations={...m.metadata.annotations,[i.ew]:v.folderUid}),delete m.metadata.resourceVersion,p.uid?(m.metadata.name=p.uid,this.client.update(m,{fieldValidation:"Ignore"}).then(y=>this.asSaveDashboardResponseDTO(y))):(m.metadata.annotations={...m.metadata.annotations,[i.AI]:"default"},delete m.metadata.name,this.client.create(m,{fieldValidation:"Ignore"}).then(y=>this.asSaveDashboardResponseDTO(y)))}asSaveDashboardResponseDTO(v){const p=r.A.slugifyForUrl(v.spec.title.trim()),m=n.I.assureBaseUrl((0,o.u)({uid:v.metadata.name,currentQueryParams:"",slug:p}));return{uid:v.metadata.name,version:v.metadata.generation??0,id:v.spec.id??0,status:"success",url:m,slug:p}}deleteDashboard(v,p){return this.client.delete(v,p).then(m=>({id:0,message:m.message,title:(0,a.t)("dashboard.k8s-dashboard-api.title.deleted","deleted")}))}async getDashboardDTO(v,p){try{const m=await this.client.subresource(v,"dto",p);if(m.status?.conversion?.failed&&(0,f.Y)(m.status.conversion.storedVersion))throw new h.P(m.status.conversion.storedVersion,m.status.conversion.error);const y={meta:{...m.access,slug:r.A.slugifyForUrl(m.spec.title.trim()),isNew:!1,isFolder:!1,uid:m.metadata.name,k8s:m.metadata,version:m.metadata.generation,created:m.metadata.creationTimestamp},dashboard:{...m.spec,version:m.metadata.generation,uid:m.metadata.name}};m.metadata.annotations?.[i.fW]&&(y.meta.reloadOnParamsChange=!0);const d=m.metadata.annotations??{},x=d[i.LH];if(x&&(y.meta.provisioned=d[i.Ms]==="true"||x===i.Sf.Repo,y.meta.provisionedExternalId=d[i.Y_]),m.metadata.labels?.[i.Y5]&&(y.dashboard.id=parseInt(m.metadata.labels[i.Y5],10)),m.metadata.annotations?.[i.ew])try{const b=await s.IB.getFolderByUid(m.metadata.annotations[i.ew]);y.meta.folderTitle=b.title,y.meta.folderUrl=b.url,y.meta.folderUid=b.uid,y.meta.folderId=b.id}catch(b){if((0,l.do)(b)!==403)throw new Error("Failed to load folder");y.meta.folderUid=m.metadata.annotations?.[i.ew]}return y}catch(m){const y=(0,l.do)(m);throw(0,l.q6)(m).includes("not found")&&y!==404&&(m.status=404,m.data.message="Dashboard not found"),m}}async listDeletedDashboards(v){return await this.client.list({...v,labelSelector:"grafana.app/get-trash=true"})}restoreDashboard(v){return v.metadata.resourceVersion="",this.client.create(v)}}},45311:(ne,A,e)=>{"use strict";e.d(A,{U:()=>s});var n=e(2543),a=e.n(n);function s(l){const r=(0,n.pick)(l,["alerting","pending","inactive","recording","recovering"]);return(0,n.sum)(Object.values(r))}},45450:(ne,A,e)=>{"use strict";e.d(A,{J:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({id:c,name:i,label:o,checked:h,value:f,disabled:g,description:u,onChange:E,...v})=>{const p=(0,s.of)(r);return(0,n.jsxs)("label",{title:u,className:p.label,children:[(0,n.jsx)("input",{...v,id:c,name:i,type:"radio",checked:h,value:f,disabled:g,className:p.input,onChange:()=>E&&E(c)}),(0,n.jsxs)("div",{children:[o,u&&(0,n.jsx)("div",{className:p.description,children:u})]})]})},r=c=>({input:(0,a.css)({position:"relative",appearance:"none",outline:"none",backgroundColor:c.colors.background.canvas,width:`${c.spacing(2)} !important`,height:c.spacing(2),border:`1px solid ${c.colors.border.medium}`,borderRadius:c.shape.radius.circle,cursor:"pointer",margin:"3px 0",":checked":{backgroundColor:c.v1.palette.white,border:`5px solid ${c.colors.primary.main}`},":disabled":{backgroundColor:`${c.colors.action.disabledBackground} !important`,borderColor:c.colors.border.weak},":disabled:checked":{border:`1px solid ${c.colors.border.weak}`},":disabled:checked::after":{content:'""',width:"6px",height:"6px",backgroundColor:c.colors.text.disabled,borderRadius:c.shape.radius.circle,display:"inline-block",position:"absolute",top:"4px",left:"4px"},":focus":{outline:"none !important",boxShadow:`0 0 0 1px ${c.colors.background.canvas}, 0 0 0 3px ${c.colors.primary.main}`}}),label:(0,a.css)({fontSize:c.typography.fontSize,lineHeight:"22px",display:"grid",gridTemplateColumns:`${c.spacing(2)} auto`,gap:c.spacing(1),cursor:"pointer"}),description:(0,a.css)({fontSize:c.typography.size.sm,color:c.colors.text.secondary})})},45558:(ne,A,e)=>{"use strict";e.d(A,{K:()=>o});var n=e(74848),a=e(92745),s=e(45861),l=e(18027),r=e(97095),c=e(63527),i=e(87105);const o=({hasCert:h,label:f,onChange:g,onClick:u,placeholder:E,useGrow:v})=>(0,n.jsxs)(r.C,{children:[(0,n.jsx)(l.I,{label:f,labelWidth:14,disabled:h,grow:v,children:h?(0,n.jsx)(c.p,{type:"text",value:"configured",width:24}):(0,n.jsx)(i.f,{rows:7,onChange:g,placeholder:E,required:!0})}),h&&(0,n.jsx)(s.$n,{variant:"secondary",onClick:u,style:{marginLeft:4},children:(0,n.jsx)(a.x6,{i18nKey:"grafana-ui.data-source-settings.cert-key-reset",children:"Reset"})})]})},45746:(ne,A,e)=>{"use strict";e.d(A,{$:()=>F,B:()=>U});var n=e(74848),a=e(22803),s=e(74226),l=e(2543),r=e(80011),c=e(92745),i=e(41654),o=e(66404),h=e(63142),f=e(30703),g=e(20941),u=e(89640),E=e(42227),v=e(11504),p=e(77256),m=e(29609),y=e(15629),d=e(9368),x=e(31286),b=e(45967),D=e(47931),C=e(10427);const P=({id:M,label:L,value:N,monospace:W,showCopyButton:R,copyValue:G,tooltipValue:w})=>{const _=(0,c.t)("alerting.copy-to-clipboard",'Copy "{{label}}" to clipboard',{label:L});return(0,n.jsx)(x.a,{children:(0,n.jsxs)(i.B,{direction:"column",gap:0,children:[(0,n.jsx)(o.E,{color:"secondary",id:M,children:L}),(0,n.jsxs)(o.E,{"aria-labelledby":M,color:"primary",variant:W?"code":"body",children:[(0,n.jsx)(C.A,{shouldWrap:!!w,wrap:Q=>(0,n.jsx)(b.m,{content:w,children:Q}),children:(0,n.jsx)("span",{children:N})}),R&&(0,n.jsx)(D.b,{"aria-label":_,fill:"text",variant:"secondary",icon:"copy",size:"sm",getText:()=>G})]})]})})};var T=e(42004),O=e(87281),S=e(49914),B=(M=>(M.GrafanaManagedAlertRule="Grafana-managed alert rule",M.GrafanaManagedRecordingRule="Grafana-managed recording rule",M.CloudAlertRule="Cloud alert rule",M.CloudRecordingRule="Cloud recording rule",M.Unknown="Unknown",M))(B||{});const K=({title:M,children:L})=>(0,n.jsxs)(i.B,{direction:"column",gap:1,children:[(0,n.jsx)(o.E,{variant:"h4",children:M}),(0,n.jsx)(i.B,{direction:"column",gap:2,children:L})]}),U=({rule:M})=>{const L=(0,h.of)(V),N=(0,v.G)(M),W=m.p.grafana.alertingRule(M.rulerRule)?M.rulerRule.keep_firing_for:void 0;let R="Unknown";m.p.grafana.alertingRule(M.rulerRule)?R="Grafana-managed alert rule":m.p.grafana.recordingRule(M.rulerRule)?R="Grafana-managed recording rule":m.p.dataSource.alertingRule(M.rulerRule)?R="Cloud alert rule":m.p.dataSource.recordingRule(M.rulerRule)&&(R="Cloud recording rule");const G=m.p.grafana.recordingRule(M.rulerRule)?M.rulerRule.grafana_alert.record?.target_datasource_uid:null,w=(0,E.ps)(G),_=G&&G!=="grafana",Q=M.promRule?.evaluationTime,ae=M.promRule?.lastEvaluation,q=m.R$.alertingRule(M.promRule)?(0,m.Rh)(M.promRule):void 0,k=Number.isFinite(Q),ee=m.p.grafana.rule(M.rulerRule)?M.rulerRule.grafana_alert.updated:void 0,j=m.p.grafana.rule(M.rulerRule)&&(0,m.hC)(M.rulerRule),J=m.p.grafana.rule(M.rulerRule)&&!(0,l.isUndefined)(M.rulerRule.grafana_alert.missing_series_evals_to_resolve)?String(M.rulerRule.grafana_alert.missing_series_evals_to_resolve):void 0,Z=(0,n.jsxs)(i.B,{children:[(0,n.jsx)(o.E,{color:"warning",children:(0,n.jsx)(f.I,{name:"pause-circle"})}),(0,n.jsx)(o.E,{children:(0,n.jsx)(c.x6,{i18nKey:"alerting.alert.evaluation-paused",children:"Alert evaluation currently paused"})})]});return(0,n.jsxs)("div",{className:L.metadata,children:[(0,n.jsxs)(K,{title:(0,c.t)("alerting.alert.rule","Rule"),children:[(0,n.jsx)(P,{id:"rule-type",label:(0,c.t)("alerting.alert.rule-type","Rule type"),value:R}),m.p.grafana.rule(M.rulerRule)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P,{id:"rule-type",label:(0,c.t)("alerting.alert.rule-identifier","Rule identifier"),value:M.rulerRule.grafana_alert.uid,monospace:!0,showCopyButton:!0,copyValue:M.rulerRule.grafana_alert.uid}),(0,n.jsx)(P,{id:"last-updated-by",label:(0,c.t)("alerting.alert.last-updated-by","Last updated by"),value:(0,n.jsx)(S.m,{user:M.rulerRule.grafana_alert.updated_by})}),ee&&(0,n.jsx)(P,{id:"date-of-last-update",label:(0,c.t)("alerting.alert.last-updated-at","Last updated at"),value:(0,r.LE)(ee)+` (${(0,r.fq)(ee)})`})]}),_&&(0,n.jsx)(P,{id:"target-datasource-uid",label:(0,c.t)("alerting.alert.target-datasource-uid","Target data source"),value:(0,n.jsx)(g.N,{href:`/connections/datasources/edit/${w?.uid}`,children:(0,n.jsxs)(i.B,{direction:"row",gap:1,children:[(0,n.jsx)("img",{style:{width:"16px"},src:w?.meta.info.logos.small,alt:"datasource logo"}),w?.name]})})})]}),(0,n.jsxs)(K,{title:(0,c.t)("alerting.alert.evaluation","Evaluation"),children:[j?Z:(0,n.jsxs)(n.Fragment,{children:[k&&ae&&(0,n.jsx)(P,{id:"last-evaluated",label:(0,c.t)("alerting.alert.last-evaluated","Last evaluated"),value:(0,y.mo)(ae)?"-":(0,s.B)(new Date(ae),{addSuffix:!0}),tooltipValue:(0,y.mo)(ae)?void 0:(0,r.LE)(ae)}),k&&(0,n.jsx)(P,{id:"last-evaluation-duration",label:(0,c.t)("alerting.alert.last-evaluation-duration","Last evaluation duration"),value:`${Q} ms`}),J&&(0,n.jsx)(P,{id:"missing-series-resolve",label:(0,c.t)("alerting.alert.missing-series-resolve","Missing series evaluations to resolve"),value:J,tooltipValue:(0,c.t)("alerting.alert.description-missing-series-evaluations","The number of consecutive evaluation intervals a dimension must be missing before the alert instance becomes stale, and is then automatically resolved and evicted. Defaults to 2 if empty.")})]}),N&&(0,n.jsx)(P,{id:"pending-period",label:(0,c.t)("alerting.alert.pending-period","Pending period"),value:N}),W&&(0,n.jsx)(P,{id:"keep-firing-for",label:(0,c.t)("alerting.alert.keep-firing-for","Keep firing for"),value:W})]}),m.p.grafana.alertingRule(M.rulerRule)&&!(0,l.isEmpty)(M.rulerRule.grafana_alert.notification_settings)&&(0,n.jsx)(I,{rulerRule:M.rulerRule}),m.p.grafana.rule(M.rulerRule)&&M.rulerRule.grafana_alert.no_data_state&&M.rulerRule.grafana_alert.exec_err_state&&(0,n.jsxs)(K,{title:(0,c.t)("alerting.alert.alert-state","Alert state"),children:[k&&(0,n.jsx)(P,{id:"alert-state-no-data",label:(0,c.t)("alerting.alert.state-no-data","Alert state if no data or all values are null"),value:M.rulerRule.grafana_alert.no_data_state}),N&&(0,n.jsx)(P,{id:"alert-state-exec-err",label:(0,c.t)("alerting.alert.state-error-timeout","Alert state if execution error or timeout"),value:M.rulerRule.grafana_alert.exec_err_state})]}),q&&(0,n.jsx)(K,{title:(0,c.t)("alerting.alert.annotations","Annotations"),children:Object.keys(q).length===0?(0,n.jsx)("div",{children:(0,n.jsx)(o.E,{color:"secondary",italic:!0,children:(0,n.jsx)(c.x6,{i18nKey:"alerting.alert.no-annotations",children:"No annotations"})})}):Object.entries(q).map(([te,se])=>{const ie=`annotation-${te.replace(/\s/g,"-")}`;return(0,n.jsx)(P,{id:ie,label:te,value:(0,n.jsx)(F,{value:se})},te)})})]})};function F({value:M}){const L=M&&M.startsWith("http"),N=(0,n.jsx)(d.Y,{input:M,delimiter:["{{","}}"]});return L?(0,n.jsx)(u.Y,{href:M,external:!0,children:M}):(0,n.jsx)(o.E,{color:"primary",children:N})}const I=({rulerRule:M})=>{const L=M.grafana_alert.notification_settings;return L?(0,n.jsxs)(K,{title:(0,c.t)("alerting.alert.notification-configuration.group-title","Notification configuration"),children:[(0,n.jsx)(P,{id:"receiver",label:(0,c.t)("alerting.alert.notification-configuration.contact-point","Contact point"),value:(0,n.jsx)(O.z,{name:L.receiver})}),L.mute_time_intervals&&(0,n.jsx)(P,{id:"mute-timings",label:(0,c.t)("alerting.alert.notification-configuration.mute-timings","Mute timings"),value:(0,n.jsx)(n.Fragment,{children:L.mute_time_intervals.map((N,W)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Y,{href:(0,p.NJ)(N,{alertmanager:"grafana"}),children:N}),W<L.mute_time_intervals.length-1&&", "]},N))})}),L.active_time_intervals&&(0,n.jsx)(P,{id:"active-time-intervals",label:(0,c.t)("alerting.alert.notification-configuration.active-timings","Active time intervals"),value:(0,n.jsx)(n.Fragment,{children:L.active_time_intervals.map((N,W)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Y,{href:(0,p.NJ)(N,{alertmanager:"grafana"}),children:N}),W<L.active_time_intervals.length-1&&", "]},N))})}),L.group_by&&(0,n.jsx)(P,{id:"group-by",label:(0,c.t)("alerting.alert.notification-configuration.group-by","Grouped by"),value:L.group_by.join(", ")}),(L.group_interval||L.group_wait||L.repeat_interval)&&(0,n.jsx)(P,{id:"timing-options",label:(0,c.t)("alerting.alert.notification-configuration.timing-options","Timings"),value:(0,n.jsx)(T.OJ,{timingOptions:{group_interval:L.group_interval,group_wait:L.group_wait,repeat_interval:L.repeat_interval}})})]}):null},V=M=>({metadata:(0,a.css)({display:"grid",gap:M.spacing(4),gridTemplateColumns:"1fr 1fr 1fr",[M.breakpoints.down("lg")]:{gridTemplateColumns:"1fr 1fr"},[M.breakpoints.down("sm")]:{gridTemplateColumns:"1fr"}})})},45776:(ne,A,e)=>{"use strict";e.d(A,{C:()=>s});var n=e(52763),a=e(84057);const s=l=>{const r=(0,n.d4)(c=>c.navIndex);return(0,a.tc)(r,l)}},45897:(ne,A,e)=>{"use strict";e.d(A,{l:()=>a});var n=e(22803);const a=(s,l)=>{const r=l||"middle",c=s.colors.emphasize(s.colors.background.secondary,.15),i=s.colors.primary.border,o=s.spacing(2),h=4,f=200;let g="50%",u="50%";switch(r){case"start":{g="0%",u="0%";break}case"end":{g="100%",u="100%";break}}const E=(0,n.css)({position:"relative","&:before":{content:'""',position:"absolute",transition:s.transitions.create("border-color"),zIndex:1},"&:after":{background:c,content:'""',position:"absolute",transition:s.transitions.create("background"),transform:"translate(-50%, -50%)",borderRadius:s.shape.radius.pill,zIndex:1},"&:hover":{"&:before":{borderColor:i},"&:after":{background:i}}}),v={borderRight:"1px solid transparent",height:"100%",left:g,transform:"translateX(-50%)"},p={borderTop:"1px solid transparent",top:u,transform:"translateY(-50%)"};return{dragHandleVertical:(0,n.cx)(E,(0,n.css)({cursor:"col-resize",width:o,"&:before":v,"&:after":{left:g,top:"50%",height:f,width:h}})),dragHandleHorizontal:(0,n.cx)(E,(0,n.css)({height:o,cursor:"row-resize","&:before":p,"&:after":{left:"50%",top:u,height:h,width:f}})),dragHandleBaseVertical:(0,n.cx)(E,(0,n.css)({cursor:"col-resize",width:o,"&:before":v})),dragHandleBaseHorizontal:(0,n.cx)(E,(0,n.css)({cursor:"row-resize",height:o,"&:before":p}))}}},45942:(ne,A,e)=>{"use strict";e.d(A,{Te:()=>c,Ym:()=>i,li:()=>r,rn:()=>l});var n=e(92745),a=e(75735),s=e(78034);function l(o){return o?.length===0}function r(o){return o?l(o.workflows):!1}const c=({isLocal:o=!1})=>o?(0,n.t)("provisioning.read-only-local-tooltip","This folder is read-only and provisioned through file provisioning. To make any changes in the folder, update the connected file repository. To modify the folder settings go to Administration > Provisioning > Repositories."):(0,n.t)("provisioning.read-only-remote-tooltip","This folder is read-only and provisioned through Git. To make any changes in the folder, update the connected repository. To modify the folder settings go to Administration > Provisioning > Repositories.");function i(o,h,f){if(o.managedBy===a.Sf.Repo&&!o.parentUID&&o.kind==="folder")return o.uid;let g=o;for(;g.parentUID;){const u=(0,s.R)(h,f,g.parentUID);if(!u)break;if(u.managedBy===a.Sf.Repo&&!u.parentUID)return g.parentUID;g=u}return"non_provisioned"}},46072:(ne,A,e)=>{"use strict";e.d(A,{nC:()=>E,ww:()=>v,Os:()=>p});var n=e(10279),a=e(95004),s=e(39443);function l(m,y){const d=m.labels;if(d!==void 0){const x=new Array(y);return x.fill(d),x}else return null}function r(m,y,d){const x=m.getFieldByName("labels");if(x!==void 0&&x.type===a.PU.other){const b=x.values.map(E);return[x,()=>b]}else return[null,()=>l(y,d.length)]}function c(m){const y=new n.L(m),d=y.getFirstFieldOfType(a.PU.time),x=y.getFirstFieldOfType(a.PU.string);if(d===void 0||x===void 0)return null;const b=y.getFieldByName("tsNs")??null,D=y.getFieldByName("level")??y.getFieldByName("detected_level")??null,C=y.getFieldByName("id")??null,[P,T]=r(y,x,m),O=y.fields.filter((S,B)=>B!==d.index&&B!==x.index&&B!==b?.index&&B!==D?.index&&B!==C?.index&&B!==P?.index);return{timeField:d,bodyField:x,timeNanosecondField:b,severityField:D,idField:C,getLogFrameLabels:T,getLogFrameLabelsAsLabels:T,getLabelFieldName:()=>P?.name??null,extraFields:O}}function i(m,y,d){const x=m.getFieldByName(y);if(x!==void 0)return x.type===d?x:void 0}const o="timestamp",h="body",f="severity",g="id",u="labels";function E(m){let y=!1;for(const d in m)if(typeof m[d]!="string"){y=!0;break}if(y){let d={};for(const x in m){const b=m[x];d[x]=typeof b=="string"?b:JSON.stringify(b)}return d}return m}function v(m){const y=new n.L(m),d=i(y,o,a.PU.time),x=i(y,h,a.PU.string);if(d===void 0||x===void 0)return null;const b=i(y,f,a.PU.string)??null,D=i(y,g,a.PU.string)??null,C=i(y,u,a.PU.other)??null,P=C===null?null:C.values,T=y.fields.filter((O,S)=>S!==d.index&&S!==x.index&&S!==b?.index&&S!==D?.index&&S!==C?.index);return{timeField:d,bodyField:x,severityField:b,idField:D,getLogFrameLabels:()=>P,timeNanosecondField:null,getLogFrameLabelsAsLabels:()=>P!==null?P.map(E):null,getLabelFieldName:()=>C!==null?C.name:null,extraFields:T}}function p(m){return m.meta?.type===s.m.LogLines?v(m):c(m)}},46189:(ne,A,e)=>{"use strict";e.d(A,{fx:()=>v,q3:()=>p});var n=e(70915),a=e(44294),s=e(41119),l=e(95004),r=e(11365);function c(m){const y=new r.A().readFeatures(m,{featureProjection:"EPSG:3857"}),d=y.length,x=new Array(d).fill(null),b=[],D=new Map,C=S=>{let B=D.get(S);return B||(B={types:new Set,values:new Array(d).fill(null),count:0},b.push(S),D.set(S,B)),B},P=(...S)=>{for(const B of S)if(!D.has(B))return B;return"___"+S[0]},T={types:new Set,values:new Array(d).fill(null),count:0};for(let S=0;S<d;S++){const B=y[S];x[S]=B.getGeometry();const K=B.getId();K!=null&&(T.values[S]=K,T.types.add((0,s.oE)(K)),T.count++);for(const U of B.getKeys()){const F=B.get(U);if(F===x[S]||F==null)continue;const I=C(U);I.values[S]=F,I.types.add((0,s.oE)(F)),I.count++}}const O=[];if(T.count>0){const S=i(T);O.push({name:P("id","_id","__id"),type:S,values:T.values,config:{}})}O.push({name:P("geo","geometry"),type:l.PU.geo,values:x,config:{}});for(const S of b){const B=D.get(S);if(!B)continue;const K=i(B);O.push({name:S,type:K,values:B.values,config:{}})}return{fields:O,length:d}}function i(m){return m.count<1?l.PU.other:m.types.size>1?(m.values=m.values.map(y=>y!=null?`${y}`:y),l.PU.string):m.types.values().next().value??l.PU.other}var o=e(98643),h=e(43067);function f(m,y){let d=0;const x=new Map;for(const b of y){const D=new a.A((0,h.Rb)([b.longitude,b.latitude])),C={point:()=>D,geometry:()=>D};if(b.name&&(x.set(b.name,C),x.set(b.name.toUpperCase(),C)),b.key&&(x.set(b.key,C),x.set(b.key.toUpperCase(),C)),b.keys)for(const P of b.keys)x.set(P,C),x.set(P.toUpperCase(),C);d++}return{path:m,find:b=>{let D=x.get(b);return!D&&typeof b=="string"&&(D=x.get(b.toUpperCase())),D},count:d,examples:b=>{const D=[];if(x.size<1)D.push("no values found");else for(const C of x.keys())if(D.push(C),D.length>=b)break;return D}}}function g(m,y){let d;if(Array.isArray(y)){const x=y[0];if(x.latitude&&x.longitude&&(x.key||x.keys))return f(m,y)}else Array.isArray(y?.features)&&y?.type==="FeatureCollection"&&(d=c(y));if(!d)try{d=(0,s.Vc)(y)}catch(x){return{path:m,error:`${x}`,find:b=>{},examples:b=>[]}}return u(d,{path:m})}function u(m,y){const d=[];let x,b,D,C,P;for(const S of m.fields)if(S.type===l.PU.geo&&(x=S),!P&&S.type===l.PU.string&&(P=S),S.name){y.keys&&y.keys.includes(S.name)&&d.push(S);const B=S.name.toUpperCase();switch(B){case"LAT":case"LATITUTE":b=S;break;case"LON":case"LNG":case"LONG":case"LONGITUE":D=S;break;case"GEOHASH":C=S;break;case"ID":case"UID":case"KEY":case"CODE":y.keys||d.push(S);break;default:y.keys||(B.endsWith("_ID")||B.endsWith("_CODE"))&&d.push(S)}}!d.length&&P&&d.push(P);let T=!1;x?T=x.values[0]?.getType()==="Point":C?(x=(0,o.qy)(C),T=!0):b&&D&&(x=(0,o.Pz)(D,b),T=!0);const O=new Map;return d.forEach(S=>{S.values.forEach((B,K)=>{const U=`${B}`;O.set(U.toUpperCase(),K),O.set(U,K)})}),{path:y.path,find:S=>{const B=O.get(S);if(B!=null){const K=x?.values[B];return{frame:m,index:B,point:()=>!K||T?K:new a.A((0,n.q1)(K.getExtent())),geometry:()=>K}}},examples:S=>{const B=[];for(let K of O.keys())if(B.push(K),B.length>S)break;return B},frame:()=>m,count:m.length}}const E={},v=`${window.__grafana_public_path__}build/gazetteer/countries.json`;async function p(m){m||(m=v);let y=E[m];if(!y){try{const x=await(await fetch(m)).json();y=g(m,x)}catch(d){console.warn("Error loading placename lookup",m,d),y={path:m,error:"Error loading URL",find:x=>{},examples:x=>[]}}E[m]=y}return y}},46202:(ne,A,e)=>{"use strict";e.d(A,{g0:()=>B,a1:()=>S,yV:()=>P,F:()=>O});var n=e(2543),a=e(47078),s=e.n(a),l=e(84266),r=e(85618),c=e(91984),i=e(80218),o=e(43100),h=e(5709);const f=["RoutingTree"],g=h.H.enhanceEndpoints({addTagTypes:f}).injectEndpoints({endpoints:M=>({listNamespacedRoutingTree:M.query({query:L=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${L.namespace}/routingtrees`,params:{pretty:L.pretty,allowWatchBookmarks:L.allowWatchBookmarks,continue:L.continue,fieldSelector:L.fieldSelector,labelSelector:L.labelSelector,limit:L.limit,resourceVersion:L.resourceVersion,resourceVersionMatch:L.resourceVersionMatch,sendInitialEvents:L.sendInitialEvents,timeoutSeconds:L.timeoutSeconds,watch:L.watch}}),providesTags:["RoutingTree"]}),replaceNamespacedRoutingTree:M.mutation({query:L=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${L.namespace}/routingtrees/${L.name}`,method:"PUT",body:L.comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1RoutingTree,params:{pretty:L.pretty,dryRun:L.dryRun,fieldManager:L.fieldManager,fieldValidation:L.fieldValidation}}),invalidatesTags:["RoutingTree"]})}),overrideExisting:!1});var u=e(78045),E=e(20443),v=e(22628),p=e(56476),m=e(48442),y=e(67923);const d=s()(K,{maxSize:1}),{useListNamespacedRoutingTreeQuery:x,useReplaceNamespacedRoutingTreeMutation:b,useLazyListNamespacedRoutingTreeQuery:D}=g,{useGetAlertmanagerConfigurationQuery:C}=c.m,P=({alertmanager:M},{skip:L}={})=>{const N=(0,p.dM)(M),W=x({namespace:(0,r.Ge)()},{skip:L||!N,selectFromResult:G=>({...G,currentData:G.currentData?d(G.currentData.items):void 0,data:G.data?d(G.data.items):void 0})}),R=C(M,{skip:L||N,selectFromResult:G=>({...G,currentData:G.currentData?.alertmanager_config?.route?[T(G.currentData.alertmanager_config.route)]:void 0,data:G.data?.alertmanager_config?.route?[T(G.data.alertmanager_config.route)]:void 0})});return N?W:R},T=s()(M=>({...M,[l.uz]:{provisioned:!!(M.provenance&&M.provenance!==v.rh)}}));function O({alertmanager:M}){const L=(0,p.dM)(M),[N]=b(),[W]=(0,o.d)(),[R]=D(),G=(0,i.Yb)(async _=>{const Q=(0,r.Ge)(),ae=await R({namespace:Q}),[q]=ae.data?d(ae.data.items):[];if(!q)throw new Error(`no root route found for namespace ${Q}`);const k=(0,E.QM)(q),ee=(0,y.AB)(M,_,k),j=V(ee);return N({name:v.DM,namespace:Q,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1RoutingTree:(0,y.HO)(j)}).unwrap()}),w=(0,i.Yb)(async _=>{const Q=(0,u.LY)({update:_,alertmanager:M});return W(Q)});return L?G:w}function S({alertmanager:M}){const L=(0,p.dM)(M),[N]=(0,o.d)(),[W]=D(),[R]=b(),G=(0,i.Yb)(async _=>{const Q=(0,r.Ge)(),ae=await W({namespace:Q}),[q]=ae.data?d(ae.data.items):[];if(!q)throw new Error(`no root route found for namespace ${Q}`);const k=(0,E.QM)(q),ee=(0,y.AS)(_,k),j=V(ee);return R({name:v.DM,namespace:Q,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1RoutingTree:j}).unwrap()}),w=(0,i.Yb)(async _=>{const Q=(0,u.Z8)({id:_});return N(Q)});return L?G:w}function B({alertmanager:M}){const L=(0,p.dM)(M),[N]=(0,o.d)(),[W]=D(),[R]=b(),G=(0,i.Yb)(async({partialRoute:_,referenceRouteIdentifier:Q,insertPosition:ae})=>{const q=(0,r.Ge)(),k=await W({namespace:q}),[ee]=k.data?d(k.data.items):[];if(!ee)throw new Error(`no root route found for namespace ${q}`);const j=(0,E.QM)(ee),J=(0,y.I8)(M??"",_,Q,j,ae),Z=V(J);return R({name:v.DM,namespace:q,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1RoutingTree:(0,y.HO)(Z)}).unwrap()}),w=(0,i.Yb)(async({partialRoute:_,referenceRouteIdentifier:Q,insertPosition:ae})=>{const q=(0,u.tD)({partialRoute:_,referenceRouteIdentifier:Q,insertPosition:ae,alertmanager:M});return N(q)});return L?G:w}function K(M){return M?.map(L=>({...L.spec.defaults,routes:L.spec.routes?.map(F),[l.uz]:{provisioned:(0,p.Uo)(L),resourceVersion:L.metadata.resourceVersion,name:L.metadata.name}}))}function U(M){return Object.values(l.ho).includes(M)}function F(M){return{...M,routes:M.routes?.map(F),matchers:void 0,object_matchers:M.matchers?.map(({label:L,type:N,value:W})=>{if(!U(N))throw new Error(`Invalid matcher operator from API: ${N}`);return[L,N,W]})}}function I(M){const{object_matchers:L,...N}=M;return{...N,receiver:M.receiver??void 0,matchers:L?.map(([W,R,G])=>({label:W,type:R,value:G})),routes:M.routes?.map(I)}}function V(M){const N={...(0,n.pick)(M,m.Rs),receiver:M.receiver??""},W=M.routes?.map(I)??[];return{spec:{defaults:N,routes:W},metadata:{name:v.DM,resourceVersion:M[l.uz]?.resourceVersion}}}},46383:(ne,A,e)=>{"use strict";e.d(A,{_w:()=>a,o$:()=>c,ot:()=>s});var n=e(41119),a=(i=>(i.NewValuesSameSchema="NewValuesSameSchema",i.FullFrame="FullFrame",i))(a||{});const s=(i,o)=>"type"in i&&i.type===o,l=Object.values(a),r=i=>"type"in i&&l.includes(i.type),c=i=>(0,n.ci)(i)&&"packetInfo"in i},46429:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>u});var n=e(74848),a=e(96540),s=e(36490),l=e(22803),r=e(63142),c=e(7895),i=e(30703),o=e(45967),h=e(35484);const f=({notice:E,onClick:v})=>{const p=(0,r.of)(g),m=E.severity==="error"||E.severity==="warning"?"exclamation-triangle":"file-landscape-alt";return E.inspect&&v?(0,n.jsx)(c.I,{className:p.notice,icon:m,iconSize:"md",tooltip:E.text,onClick:y=>v(y,E.inspect)},E.severity):E.link?(0,n.jsx)("a",{className:p.notice,"aria-label":E.text,href:E.link,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(i.I,{name:m,style:{marginRight:"8px"},size:"md"})}):(0,n.jsx)(o.m,{content:E.text,children:(0,n.jsx)("span",{className:p.iconTooltip,children:(0,n.jsx)(i.I,{name:m,size:"md"})})},E.severity)},g=E=>({notice:(0,l.css)({background:"inherit",border:"none",borderRadius:E.shape.radius.default}),iconTooltip:(0,l.css)({color:`${E.colors.text.secondary}`,backgroundColor:"inherit",cursor:"auto",border:"none",borderRadius:`${E.shape.radius.default}`,padding:`${E.spacing(0,1)}`,height:` ${E.spacing(E.components.height.md)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,h.getFocusStyles)(E),zIndex:1},"&: focus:not(:focus-visible)":(0,h.getMouseFocusStyles)(E),"&:hover ":{boxShadow:`${E.shadows.z1}`,color:`${E.colors.text.primary}`,background:`${E.colors.background.secondary}`}})}),u=({frames:E,panelId:v})=>{const p=(0,a.useCallback)((y,d)=>{y.stopPropagation(),s.Ny.partial({inspect:v,inspectTab:d})},[v]),m={};for(const y of E)if(!(!y.meta||!y.meta.notices))for(const d of y.meta.notices)m[d.severity]=d;return(0,n.jsx)(n.Fragment,{children:Object.values(m).map(y=>(0,n.jsx)(f,{notice:y,onClick:p},y.severity))})}},46559:(ne,A,e)=>{"use strict";e.d(A,{p:()=>c});var n=e(74848),a=e(22803),s=e(96540),l=e(65240);const r=(0,l.N)((i=!1)=>({list:(0,a.css)({listStyleType:"none",margin:0,padding:0}),item:(0,a.css)({display:i&&"inline-block"||"block"})}));class c extends s.PureComponent{constructor(o){super(o)}render(){const{items:o,renderItem:h,getItemKey:f,className:g,inline:u}=this.props,E=r(u);return(0,n.jsx)("ul",{className:(0,a.cx)(E.list,g),children:o.map((v,p)=>(0,n.jsx)("li",{className:E.item,children:h(v,p)},f?f(v):p))})}}},46635:(ne,A,e)=>{"use strict";e.r(A),e.d(A,{insertAfterImmutably:()=>l,insertBeforeImmutably:()=>s,moveItemImmutably:()=>a,sortValues:()=>i});var n=e(739);function a(o,h,f){const g=[...o];return Array.prototype.splice.call(g,f,0,Array.prototype.splice.call(g,h,1)[0]),g}function s(o,h,f){if(f<0||f>o.length)throw new Error("Index out of bounds");const g=[...o];return g.splice(f,0,h),g}function l(o,h,f){if(f<0||f>o.length)throw new Error("Index out of bounds");const g=[...o];return g.splice(f+1,0,h),g}const r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),c=(o,h)=>o-h;function i(o){return(h,f)=>{if(h===f)return 0;if(f==null||typeof f=="string"&&f.trim()==="")return-1;if(h==null||typeof h=="string"&&h?.trim()==="")return 1;let g=r.compare;return typeof h=="number"&&typeof f=="number"&&(g=c),o===n.xB.Descending?g(f,h):g(h,f)}}},46644:(ne,A,e)=>{"use strict";e.d(A,{AH:()=>i,AS:()=>f,C6:()=>u,Em:()=>o,H3:()=>E,Nw:()=>h,gy:()=>c});var n=e(2543),a=e.n(n),s=e(28105),l=e(95004),r=e(42954),c=(P=>(P.sum="sum",P.max="max",P.min="min",P.logmin="logmin",P.mean="mean",P.variance="variance",P.stdDev="stdDev",P.last="last",P.median="median",P.first="first",P.count="count",P.countAll="countAll",P.range="range",P.diff="diff",P.diffperc="diffperc",P.delta="delta",P.step="step",P.firstNotNull="firstNotNull",P.lastNotNull="lastNotNull",P.changeCount="changeCount",P.distinctCount="distinctCount",P.allIsZero="allIsZero",P.allIsNull="allIsNull",P.allValues="allValues",P.uniqueValues="uniqueValues",P.p1="p1",P.p2="p2",P.p3="p3",P.p4="p4",P.p5="p5",P.p6="p6",P.p7="p7",P.p8="p8",P.p9="p9",P.p10="p10",P.p11="p11",P.p12="p12",P.p13="p13",P.p14="p14",P.p15="p15",P.p16="p16",P.p17="p17",P.p18="p18",P.p19="p19",P.p20="p20",P.p21="p21",P.p22="p22",P.p23="p23",P.p24="p24",P.p25="p25",P.p26="p26",P.p27="p27",P.p28="p28",P.p29="p29",P.p30="p30",P.p31="p31",P.p32="p32",P.p33="p33",P.p34="p34",P.p35="p35",P.p36="p36",P.p37="p37",P.p38="p38",P.p39="p39",P.p40="p40",P.p41="p41",P.p42="p42",P.p43="p43",P.p44="p44",P.p45="p45",P.p46="p46",P.p47="p47",P.p48="p48",P.p49="p49",P.p50="p50",P.p51="p51",P.p52="p52",P.p53="p53",P.p54="p54",P.p55="p55",P.p56="p56",P.p57="p57",P.p58="p58",P.p59="p59",P.p60="p60",P.p61="p61",P.p62="p62",P.p63="p63",P.p64="p64",P.p65="p65",P.p66="p66",P.p67="p67",P.p68="p68",P.p69="p69",P.p70="p70",P.p71="p71",P.p72="p72",P.p73="p73",P.p74="p74",P.p75="p75",P.p76="p76",P.p77="p77",P.p78="p78",P.p79="p79",P.p80="p80",P.p81="p81",P.p82="p82",P.p83="p83",P.p84="p84",P.p85="p85",P.p86="p86",P.p87="p87",P.p88="p88",P.p89="p89",P.p90="p90",P.p91="p91",P.p92="p92",P.p93="p93",P.p94="p94",P.p95="p95",P.p96="p96",P.p97="p97",P.p98="p98",P.p99="p99",P))(c||{});function i(P,T){return P==="count"||P==="distinctCount"||P==="changeCount"||P==="countAll"?l.PU.number:P==="allIsNull"||P==="allIsZero"?l.PU.boolean:T}function o(P){return Object.keys(c).includes(P)}function h(P){const{field:T,reducers:O}=P;if(!T||!O||O.length<1)return{};if(T.state?.calcs){const V=[];for(const M of O)T.state.calcs.hasOwnProperty(M)||V.push(M);if(V.length<1)return{...T.state.calcs}}T.state||(T.state={});const S=f.list(O),B=T.values;if(B&&B.length<1){const V={...T.state.calcs};for(const M of S)V[M.id]=M.emptyInputResult!==null?M.emptyInputResult:null;return T.state.calcs=V}const{nullValueMode:K=s.UW.Ignore}=T.config,U=K===s.UW.Ignore,F=K===s.UW.AsZero;if(S.length===1&&S[0].reduce){const V=S[0].reduce(T,U,F);return T.state.calcs={...T.state.calcs,...V},V}let I=E(T,U,F);for(const V of S)!I.hasOwnProperty(V.id)&&V.reduce&&(I={...I,...V.reduce(T,U,F)});return T.state.calcs={...T.state.calcs,...I},I}const f=new r.O(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value (also excludes NaNs)",standard:!0,aliasIds:["current"],reduce:y,preservesUnits:!0},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:m,preservesUnits:!0},{id:"firstNotNull",name:"First *",description:"First non-null value (also excludes NaNs)",standard:!0,reduce:p,preservesUnits:!0},{id:"first",name:"First",description:"First Value",standard:!0,reduce:v,preservesUnits:!0},{id:"min",name:"Min",description:"Minimum Value",standard:!0,preservesUnits:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0,preservesUnits:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"],preservesUnits:!0},{id:"median",name:"Median",description:"Median Value",standard:!1,reduce:C,aliasIds:["median"],preservesUnits:!0},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:d,preservesUnits:!0},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:d,preservesUnits:!0},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"],preservesUnits:!0},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0,preservesUnits:!1},{id:"countAll",name:"Count all",description:"Number of values (including empty)",emptyInputResult:0,standard:!1,reduce:P=>({countAll:P.values.length}),preservesUnits:!1},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0,preservesUnits:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0,preservesUnits:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0,preservesUnits:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0,preservesUnits:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0,preservesUnits:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0,preservesUnits:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0,preservesUnits:!1},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:x,preservesUnits:!1},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:b,preservesUnits:!1},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0,preservesUnits:!1},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:P=>({allValues:[...P.values]}),preservesUnits:!1},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:P=>({uniqueValues:[...new Set(P.values)]}),preservesUnits:!1},...g()]),g=(P=[...Array.from({length:99},(T,O)=>O+1)])=>{const T=[],O=S=>S>3&&S<21?"th":S%10===1?"st":S%10===2?"nd":S%10===3?"rd":"th";return P.forEach(S=>{const B=S/100,K=`p${S}`,U=`${S}${O(S)} %`,F=`${S}${O(S)} percentile value`;T.push({id:K,name:U,description:F,standard:!1,reduce:(I,V,M)=>({[K]:D(I,B,V,M)}),preservesUnits:!0})}),T},u={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0};function E(P,T,O){const S={...u},B=P.values;if(!B)return S;const K=P.type===l.PU.number||P.type===l.PU.time;for(let U=0;U<B.length;U++){let F=B[U];if(U===0&&(S.first=F),S.last=F,F==null){if(T)continue;O&&(F=0)}if(S.count++,F!=null&&!Number.isNaN(F)){const I=S.firstNotNull===null;if(I&&(S.firstNotNull=F),K){if(S.sum+=F,S.allIsNull=!1,S.nonNullCount++,!I){const V=F-S.lastNotNull;S.step>V&&(S.step=V),S.lastNotNull>F?S.previousDeltaUp=!1:(S.previousDeltaUp&&(S.delta+=V),S.previousDeltaUp=!0)}F>S.max&&(S.max=F),F<S.min&&(S.min=F),F<S.logmin&&F>0&&(S.logmin=F)}F!==0&&(S.allIsZero=!1),S.lastNotNull=F}}return S.max===-Number.MAX_VALUE&&(S.max=null),S.min===Number.MAX_VALUE&&(S.min=null),S.step===Number.MAX_VALUE&&(S.step=null),S.nonNullCount>0&&(S.mean=S.sum/S.nonNullCount),S.allIsNull&&(S.allIsZero=!1),S.max!==null&&S.min!==null&&(S.range=S.max-S.min),(0,n.isNumber)(S.firstNotNull)&&(0,n.isNumber)(S.lastNotNull)&&(S.diff=S.lastNotNull-S.firstNotNull),(0,n.isNumber)(S.firstNotNull)&&(0,n.isNumber)(S.diff)&&(S.diffperc=S.diff/S.firstNotNull*100),S}function v(P,T,O){return{first:P.values[0]}}function p(P,T,O){const S=P.values;for(let B=0;B<S.length;B++){const K=S[B];if(K!=null&&!Number.isNaN(K))return{firstNotNull:K}}return{firstNotNull:null}}function m(P,T,O){const S=P.values;return{last:S[S.length-1]}}function y(P,T,O){const S=P.values;let B=S.length-1;for(;B>=0;){const K=S[B--];if(K!=null&&!Number.isNaN(K))return{lastNotNull:K}}return{lastNotNull:null}}function d(P,T,O){if(!(P.type===l.PU.number||P.type===l.PU.time))return{variance:0,stdDev:0};let S=0,B=0,K=0;const U=P.values;for(let F=0;F<U.length;F++){const I=U[F];if(I!=null){K++;let V=B;B+=(I-V)/K,S+=(I-V)*(I-B)}}if(K>0){const F=S/K;return{variance:F,stdDev:Math.sqrt(F)}}return{variance:0,stdDev:0}}function x(P,T,O){const S=P.values;let B=0,K=!0,U=null;for(let F=0;F<S.length;F++){let I=S[F];if(I===null){if(T)continue;O&&(I=0)}!K&&U!==I&&B++,K=!1,U=I}return{changeCount:B}}function b(P,T,O){const S=P.values,B=new Set;for(let K=0;K<S.length;K++){let U=S[K];if(U===null){if(T)continue;O&&(U=0)}B.add(U)}return{distinctCount:B.size}}function D(P,T,O,S){let B=P.values;O&&(B=B.filter(F=>F!==null)),S&&(B=B.map(F=>F===null?0:F));const K=B.slice().sort((F,I)=>F-I),U=Math.round((K.length-1)*T);return K[U]}function C(P,T,O){const S=[];for(let K=0;K<P.values.length;K++){let U=P.values[K];if(U==null){if(T)continue;O&&(U=0)}S.push(U)}S.sort((K,U)=>K-U);const B=Math.floor(S.length/2);return S.length%2===0?{median:(S[B-1]+S[B])/2}:{median:S[B]}}},46672:(ne,A,e)=>{"use strict";e.d(A,{M_:()=>v,j7:()=>m,kc:()=>y});var n=e(74848),a=e(2543),s=e.n(a),l=e(55127),r=e.n(l),c=e(96540),i=e(92745),o=e(41654),h=e(99887),f=e(86791),g=e(24619),u=e(45311);const E={recording:0,alerting:0,[g.cF.Pending]:0,[g.cF.Inactive]:0,[g.cF.Recovering]:0,paused:0,error:0,nodata:0},v=c.memo(({namespaces:d})=>{const x=(0,c.useDeferredValue)(d),b=(0,c.useMemo)(()=>p(x),[x]),D=(0,u.U)(b),C=y(b),P=!!C.length;return C.unshift((0,n.jsxs)(c.Fragment,{children:[D," ",r()("rule",D)]},"total")),(0,n.jsx)(o.B,{direction:"row",children:P&&(0,n.jsx)("div",{children:(0,n.jsx)(o.B,{gap:.5,children:C})})})});v.displayName="RuleStats";function p(d){const x={...E};return d.forEach(({groups:b})=>{b.forEach(D=>{const C=(0,a.omitBy)(D.totals,a.isUndefined);for(const P in C)x[P]+=C[P]})}),x}const m=({group:d})=>{const x=d.totals,b=d?.interval,D=y(x),C=!!D.length;return(0,n.jsxs)(o.B,{direction:"row",children:[C&&(0,n.jsx)("div",{children:(0,n.jsx)(o.B,{gap:.5,children:D})}),b&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:"|"}),(0,n.jsx)(h.E,{text:b,icon:"clock-nine",color:"blue"})]})]})};function y(d){const x=[];if(d[f.$7.Alerting]&&x.push((0,n.jsx)(h.E,{color:"red",text:(0,i.t)("alerting.rule-stats.firing","{{alertingStats}} firing",{alertingStats:d[f.$7.Alerting]})},"firing")),d.error&&x.push((0,n.jsx)(h.E,{color:"red",text:(0,i.t)("alerting.rule-stats.error","{{count}} errors",{count:d.error})},"errors")),d.nodata&&x.push((0,n.jsx)(h.E,{color:"blue",text:(0,i.t)("alerting.rule-stats.nodata","{{nodataStats}} no data",{nodataStats:d.nodata})},"nodata")),d[f.$7.Pending]){const b=d[f.$7.Pending];x.push((0,n.jsx)(h.E,{color:"orange",text:(0,i.t)("alerting.rule-stats.pending","{{pendingStats}} pending",{pendingStats:b})},"pending"))}if(d[f.$7.Recovering]){const b=d[f.$7.Recovering];x.push((0,n.jsx)(h.E,{color:"orange",text:(0,i.t)("alerting.rule-stats.recovering","{{recoveringStats}} recovering",{recoveringStats:b})},"recovering"))}if(d[f.$7.Normal]&&d.paused){const b=d[f.$7.Normal],D=d.paused;x.push((0,n.jsx)(h.E,{color:"green",text:(0,i.t)("alerting.rule-stats.paused","{{normalStats}} normal ({{pausedStats}} paused)",{normalStats:b,pausedStats:D})},"paused"))}if(d[f.$7.Normal]&&!d.paused){const b=d[f.$7.Normal];x.push((0,n.jsx)(h.E,{color:"green",text:(0,i.t)("alerting.rule-stats.inactive","{{normalStats}} normal",{normalStats:b})},"inactive"))}if(d.recording){const b=d.recording;x.push((0,n.jsx)(h.E,{color:"purple",text:(0,i.t)("alerting.rule-stats.recording","{{recordingStats}} recording",{recordingStats:b})},"recording"))}return x}},46831:(ne,A,e)=>{"use strict";e.d(A,{K:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(70255),r=e(63704),c=e(80011),i=e(63142),o=e(21348);function h({width:E,showImage:v,data:p,index:m}){const y=(0,s.useId)(),d=(0,i.of)(u),x=E>600,b=p.get(m);return(0,n.jsxs)("article",{"aria-labelledby":y,className:(0,a.cx)(d.item,x&&d.itemWide),children:[v&&b.ogImage&&(0,n.jsx)("a",{tabIndex:-1,href:r.sQ.sanitizeUrl(b.link),target:"_blank",rel:"noopener noreferrer",className:(0,a.cx)(d.socialImage,x&&d.socialImageWide),"aria-hidden":!0,children:(0,n.jsx)("img",{src:b.ogImage,alt:b.title})}),(0,n.jsxs)("div",{className:d.body,children:[(0,n.jsxs)("time",{className:d.date,dateTime:(0,c.LE)(b.date,{format:"MMM DD"}),children:[(0,c.LE)(b.date,{format:"MMM DD"})," "]}),(0,n.jsx)("a",{className:d.link,href:r.sQ.sanitizeUrl(b.link),target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)("h3",{className:d.title,id:y,children:b.title})}),(0,n.jsx)("div",{className:d.content,dangerouslySetInnerHTML:{__html:r.sQ.sanitize(b.content)}})]})]})}const f=({width:E,showImage:v,rootProps:p})=>{const m=(0,i.of)(u),y=E>600;return(0,n.jsxs)("div",{className:(0,a.cx)(m.item,y&&m.itemWide),...p,children:[v&&(0,n.jsx)(l.A,{containerClassName:(0,a.cx)(m.socialImage,y&&m.socialImageWide),width:y?"250px":"100%",height:y?"150px":E*.5}),(0,n.jsxs)("div",{className:m.body,children:[(0,n.jsx)(l.A,{containerClassName:m.date,width:60}),(0,n.jsx)(l.A,{containerClassName:m.title,width:250}),(0,n.jsx)(l.A,{containerClassName:m.content,width:"100%",count:6})]})]})},g=(0,o.j)(h,f),u=E=>({container:(0,a.css)({height:"100%"}),item:(0,a.css)({display:"flex",padding:E.spacing(1),position:"relative",marginBottom:E.spacing(.5),marginRight:E.spacing(1),borderBottom:`2px solid ${E.colors.border.weak}`,background:E.colors.background.primary,flexDirection:"column",flexShrink:0}),itemWide:(0,a.css)({flexDirection:"row"}),body:(0,a.css)({display:"flex",flexDirection:"column",flex:1}),socialImage:(0,a.css)({display:"flex",alignItems:"center",marginBottom:E.spacing(1),"> img":{width:"100%",borderRadius:`${E.shape.radius.default} ${E.shape.radius.default} 0 0`}}),socialImageWide:(0,a.css)({marginRight:E.spacing(2),marginBottom:0,"> img":{width:"250px",borderRadius:E.shape.radius.default}}),link:(0,a.css)({color:E.colors.text.link,display:"inline-block","&:hover":{color:E.colors.text.link,textDecoration:"underline"}}),title:(0,a.css)({fontSize:"16px",marginBottom:E.spacing(.5)}),content:(0,a.css)({p:{marginBottom:E.spacing(.5),color:E.colors.text.primary}}),date:(0,a.css)({marginBottom:E.spacing(.5),fontWeight:500,borderRadius:`0 0 0 ${E.shape.radius.default}`,color:E.colors.text.secondary})})},46907:(ne,A,e)=>{"use strict";e.d(A,{U:()=>s,q:()=>a});let n;function a(l){if(n)throw new Error("setPluginLinksHook() function should only be called once, when Grafana is starting.");n=l}function s(l){if(!n)throw new Error("setPluginLinksHook(options) can only be used after the Grafana instance has started.");return n(l)}},46933:(ne,A,e)=>{"use strict";e.d(A,{D_:()=>n,Ee:()=>s,FL:()=>a});var n=(l=>(l.Equal="Equal",l.NotEqual="NotEqual",l.EqualRegEx="EqualRegEx",l.NotEqualRegEx="NotEqualRegEx",l))(n||{});const a=l=>!l||typeof l!="object"?!1:"importFromAbstractQueries"in l,s=l=>!l||typeof l!="object"?!1:"exportToAbstractQueries"in l},47087:(ne,A,e)=>{"use strict";e.d(A,{e:()=>c});var n=e(74848),a=e(22803),s=e(96540),l=e(63142);const r=i=>({text:(0,a.css)({fontSize:i.typography.size.md,fontWeight:i.typography.fontWeightMedium,color:i.colors.text.primary,margin:0,display:"flex"})}),c=(0,s.memo)(({children:i})=>{const o=(0,l.of)(r);return(0,n.jsx)("h3",{className:o.text,children:i})});c.displayName="TimePickerTitle"},47215:(ne,A,e)=>{"use strict";e.d(A,{f:()=>a});var n=e(91984);function a(s,l){const r=n.m.endpoints.getAlertmanagerConfiguration.useQuery(s??"",{refetchOnMountOrArgChange:!0,...l,skip:!s});return{...r,error:r.error}}},47276:(ne,A,e)=>{"use strict";e.d(A,{e:()=>b});var n=e(2543),a=e(36613),s=e(22592),l=e(62717),r=e(739),c=e(36192),i=e(23414),o=e(42073),h=e(64394),f=e(6773),g=e(62748),u=e(66650);class E extends g.R{getConfig(){const{facets:C,drawStyle:P,pathBuilder:T,pointsBuilder:O,pointsFilter:S,lineInterpolation:B,lineWidth:K,lineStyle:U,barAlignment:F,barWidthFactor:I,barMaxWidth:V,showPoints:M,pointSize:L,scaleKey:N,pxAlign:W,spanNulls:R,show:G=!0}=this.props;let w={},_=this.getLineColor();w.stroke=_,w.width=K,U&&U.fill!=="solid"&&(U.fill==="dot"&&(w.cap="round"),w.dash=U.dash??[10,10]),T!=null?w.paths=T:P===r.GR.Points?w.paths=()=>null:P!=null&&(w.paths=(q,k,ee,j)=>p(P,B,F,I,V)(q,k,ee,j));const Q=typeof _=="string"?_:(q,k)=>q.series[k]._stroke,ae={points:{stroke:Q,fill:Q,size:!L||L<K?void 0:L,filter:S}};return O!=null?ae.points.show=O:P===r.GR.Points?ae.points.show=!0:M===r.yL.Auto?P===r.GR.Bars&&(ae.points.show=!1):M===r.yL.Never?ae.points.show=!1:M===r.yL.Always&&(ae.points.show=!0),{scale:N,facets:C,spanGaps:typeof R=="number"?!1:R,value:()=>"",pxAlign:W,show:G,fill:this.getFill(),...w,...ae}}getLineColor(){const{lineColor:C,gradientMode:P,colorMode:T,thresholds:O,theme:S,hardMin:B,hardMax:K,softMin:U,softMax:F,dynamicSeriesColor:I}=this.props;return P===r.on.None&&I?(V,M)=>I(M)??C??h.F:P===r.on.Scheme&&T?.id!==h.Y.Fixed?(0,u.pl)(1,S,T,O,B,K,U,F):P===r.on.Hue?(0,u.B5)(C??h.F,1,S):C??h.F}getFill(){const{lineColor:C,fillColor:P,gradientMode:T,fillOpacity:O,colorMode:S,thresholds:B,theme:K,hardMin:U,hardMax:F,softMin:I,softMax:V,dynamicSeriesColor:M}=this.props;if(P)return P;const L=T??r.on.None,N=(O??0)/100;if(L===r.on.None&&M&&N>0)return(W,R)=>{let G=W.series[R]._stroke;return f.MV.alpha(G??"",N)};switch(L){case r.on.Opacity:return(0,u.WO)(P??C,N);case r.on.Hue:return(0,u.B5)(P??C,N,K);case r.on.Scheme:if(S?.id!==h.Y.Fixed)return(0,u.pl)(N,K,S,B,U,F,I,V);default:if(N>0)return f.MV.alpha(C??"",N)}}}let v;function p(D,C,P=r.Nj.Center,T=.6,O=200){const S=a.A.paths;if(v||(v={linear:S.linear(),smooth:S.spline(),stepBefore:S.stepped({align:-1}),stepAfter:S.stepped({align:1})}),D===r.GR.Bars){let B=`bars|${P}|${T}|${O}`;return v[B]||(v[B]=S.bars({size:[T,O],align:P})),v[B]}else if(D===r.GR.Line){if(C===r.dx.StepBefore)return v.stepBefore;if(C===r.dx.StepAfter)return v.stepAfter;if(C===r.dx.Smooth)return v.smooth}return v.linear}var m=e(84140),y=e(33553);function d(D){const C=D.config.mode===r.Ly.Dashed||D.config.mode===r.Ly.DashedAndArea?[10,10]:[];function P(M,L,N,W){let R=M.ctx,G=0;for(let w=0;w<N.length;w++)if(N[w].color==="transparent"){G=w;break}R.lineWidth=2,R.setLineDash(C);for(let w=1;w<N.length;w++){const _=N[w];let Q;G>=w&&w>0?Q=(0,m.A)(W.visualization.getColorByName(N[w-1].color)):Q=(0,m.A)(W.visualization.getColorByName(_.color)),Q.getAlpha()===1&&Q.setAlpha(.7);const ae=M.scales.x.ori===r.Lt.Horizontal,q=M.valToPos(_.value,L,!0);let k=Math.round(ae?M.bbox.left:q),ee=Math.round(ae?q:M.bbox.top),j=Math.round(ae?M.bbox.left+M.bbox.width:q),J=Math.round(ae?q:M.bbox.top+M.bbox.height);R.beginPath(),R.moveTo(k,ee),R.lineTo(j,J),R.strokeStyle=Q.toString(),R.stroke()}}function T(M,L,N,W){let R=M.ctx,G=(0,u.Z8)(M,L,N.map(w=>{let _=(0,m.A)(W.visualization.getColorByName(w.color));return _.getAlpha()===1&&_.setAlpha(.15),[w.value,_.toString()]}),!0);R.fillStyle=G,R.fillRect(M.bbox.left,M.bbox.top,M.bbox.width,M.bbox.height)}const{scaleKey:O,thresholds:S,theme:B,config:K,hardMin:U,hardMax:F,softMin:I,softMax:V}=D;return M=>{const L=M.ctx,{min:N,max:W}=M.scales.x,{min:R,max:G}=M.scales[O];if(N==null||W==null||R==null||G==null)return;let{steps:w,mode:_}=S;if(_===y.O.Percentage){let[Q,ae]=(0,u.EJ)(M,O,U,F,I,V),q=ae-Q;w=w.map(k=>({...k,value:Q+q*(k.value/100)}))}switch(L.save(),K.mode){case r.Ly.Line:case r.Ly.Dashed:P(M,O,w,B);break;case r.Ly.Area:T(M,O,w,B);break;case r.Ly.LineAndArea:case r.Ly.DashedAndArea:T(M,O,w,B),P(M,O,w,B)}L.restore()}}const x={drag:{setScale:!1},points:{size:(D,C)=>D.series[C].points.size*2,width:(D,C,P)=>P/4},focus:{prox:30}};class b{constructor(C=s.lE){this.uid=Math.random().toString(36).slice(2),this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.mode=1,this.frames=void 0,this.thresholds={},this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=P=>{let T=new Date(P);return this.tz?a.A.tzDate(T,this.tz):T},this.tz=(0,l.QZ)(C,Date.now())?.ianaName}addHook(C,P){(0,c.uY)("UPlotConfigBuilder",!1,"addHook",C),this.hooks[C]||(this.hooks[C]=[]),this.hooks[C].push(P)}addThresholds(C){this.thresholds[C.scaleKey]||(this.thresholds[C.scaleKey]=C,this.addHook("drawClear",d(C)))}addAxis(C){C.placement=C.placement??r.vM.Auto,C.grid=C.grid??{};let P=C.scaleKey;if(P==="x"&&(P+=C.timeZone??""),this.axes[P]){this.axes[P].merge(C);return}C.placement===r.vM.Auto&&(C.placement=this.hasLeftAxis?r.vM.Right:r.vM.Left),C.placement===r.vM.Left&&(this.hasLeftAxis=!0),C.placement===r.vM.Hidden&&(C.grid.show=!1,C.size=0),this.axes[P]=new i.zH(C)}getAxisPlacement(C){return this.axes[C]?.props.placement??r.vM.Left}setCursor(C){this.cursor=(0,n.merge)({},this.cursor,C)}setMode(C){this.mode=C}setSelect(C){this.select=C}addSeries(C){this.series.push(new E(C))}getSeries(){return this.series}addScale(C){const P=this.scales.find(T=>T.props.scaleKey===C.scaleKey);if(P){P.merge(C);return}this.scales.push(new o.G(C))}addBand(C){this.bands.push(C)}setStackingGroups(C){this.stackingGroups=C}getStackingGroups(){return this.stackingGroups}setPrepData(C){this.prepData=P=>(this.frames=P,C(P,this.getStackingGroups()))}setPadding(C){this.padding=C}getConfig(){if(this.cachedConfig)return this.cachedConfig;const C={...c.NN,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};C.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(T=>T.getConfig()),C.series=[...C.series,...this.series.map(T=>T.getConfig())],C.scales=this.scales.reduce((T,O)=>({...T,...O.getConfig()}),{}),C.hooks=this.hooks,C.select=this.select;const P=(T="")=>(O,S)=>{let B=O.series[S].points._stroke;if(typeof B!="string"){let K=this.frames[0].fields[S];B=K.display(K.values[O.cursor.idxs[S]]).color}return B+T};return C.cursor=(0,n.merge)({},x,{points:{stroke:P("80"),fill:P()}},this.cursor),C.tzDate=this.tzDate,Array.isArray(this.padding)&&(C.padding=this.padding),this.stackingGroups.forEach(T=>{(0,c.Tz)(T).forEach(O=>{this.addBand(O)})}),this.bands.length&&(C.bands=this.bands),this.cachedConfig=C,C}ensureNonOverlappingAxes(C){const P=C.find(S=>S.props.scaleKey==="x"),T=C.filter(S=>S.props.grid?.show===void 0),O=T.findIndex(S=>S.props.placement===r.vM.Left||S.props.placement===r.vM.Right||S.props.placement===r.vM.Bottom&&S!==P);for(let S=0;S<T.length;S++)T[S]===P||S===O?T[S].props.grid.show=!0:T[S].props.grid.show=!1;return C}}},47327:(ne,A,e)=>{"use strict";e.d(A,{G:()=>f});var n=e(74848),a=e(22803),s=e(63142);const l=28,r=2.4,c=500,i=4e3,o=300,h=100/l*100;function f({width:u,delay:E=o,ariaLabel:v="Loading bar"}){const p=Math.min(Math.max(Math.round(u*r),c),i),m=(0,s.of)(g,E,p),y={overflow:"hidden"};return(0,n.jsx)("div",{style:y,children:(0,n.jsx)("div",{"aria-label":v,role:"status",className:m.bar})})}const g=(u,E,v)=>{const p=(0,a.keyframes)({"0%":{transform:"translateX(-100%)"},"85%, 100%":{transform:`translateX(${h}%)`}});return{bar:(0,a.css)({width:l+"%",height:1,background:`linear-gradient(90deg, transparent 0%, ${u.colors.primary.main} 80.75%, transparent 100%)`,transform:"translateX(-100%)",willChange:"transform",[u.transitions.handleMotion("no-preference")]:{animationName:p,animationDelay:`${E}ms`,animationTimingFunction:"linear",animationIterationCount:"infinite",animationDuration:`${v}ms`},[u.transitions.handleMotion("reduce")]:{animationName:p,animationDelay:`${E}ms`,animationTimingFunction:"linear",animationIterationCount:"infinite",animationDuration:`${4*v}ms`}})}}},47350:(ne,A,e)=>{"use strict";e.d(A,{A:()=>N});var n=e(74848),a=e(8642),s=e(96540),l=e(42941),r=e(69862),c=e(57866),i=e(36638),o=e(2197),h=e(51898),f=e(92745),g=e(27489),u=e(2863),E=e(71599),v=e(43260),p=e(85348),m=e(65642),y=e(85622),d=e(22803),x=e(63142),b=e(8207),D=e(50275),C=e(30703);const P=({input:W,output:R,debugMode:G,index:w,uiConfig:_,configs:Q,onChange:ae,toggleShowDebug:q})=>{const k=(0,x.of)(T),ee=(0,s.useMemo)(()=>Q[w],[Q,w]),j=(0,s.useMemo)(()=>(0,s.createElement)(_.editor,{options:{..._.transformation.defaultOptions,...ee.transformation.options},input:W,onChange:J=>{ae(w,{...ee.transformation,options:J})}}),[_.editor,_.transformation.defaultOptions,ee.transformation,W,ae,w]);return(0,n.jsxs)("div",{"data-testid":h.Tp.components.TransformTab.transformationEditor(_.name),children:[j,G&&(0,n.jsx)(b._,{title:(0,f.t)("dashboard.transformation-editor.title-debug-transformation","Debug transformation"),subtitle:_.name,onClose:q,children:(0,n.jsxs)("div",{className:k.debugWrapper,"data-testid":h.Tp.components.TransformTab.transformationEditorDebugger(_.name),children:[(0,n.jsxs)("div",{className:k.debug,children:[(0,n.jsx)("div",{className:k.debugTitle,children:(0,n.jsx)(f.x6,{i18nKey:"dashboard.transformation-editor.input-data",children:"Input data"})}),(0,n.jsx)("div",{className:k.debugJson,children:(0,n.jsx)(D.B,{json:W})})]}),(0,n.jsx)("div",{className:k.debugSeparator,children:(0,n.jsx)(C.I,{name:"arrow-right"})}),(0,n.jsxs)("div",{className:k.debug,children:[(0,n.jsx)("div",{className:k.debugTitle,children:(0,n.jsx)(f.x6,{i18nKey:"dashboard.transformation-editor.output-data",children:"Output data"})}),(0,n.jsx)("div",{className:k.debugJson,children:R&&(0,n.jsx)(D.B,{json:R})})]})]})})]})},T=W=>({debugWrapper:(0,d.css)({display:"flex",flexDirection:"row"}),debugSeparator:(0,d.css)({width:"48px",minHeight:"300px",display:"flex",alignItems:"center",alignSelf:"stretch",justifyContent:"center",margin:`0 ${W.spacing(.5)}`,color:W.colors.primary.text}),debugTitle:(0,d.css)({padding:`${W.spacing(1)} ${W.spacing(.25)}`,fontFamily:W.typography.fontFamilyMonospace,fontSize:W.typography.bodySmall.fontSize,color:W.colors.text.primary,borderBottom:`1px solid ${W.colors.border.weak}`,flexGrow:0,flexShrink:1}),debug:(0,d.css)({marginTop:W.spacing(1),padding:`0 ${W.spacing(1,1,1)}`,border:`1px solid ${W.colors.border.weak}`,background:`${W.isLight?W.v1.palette.white:W.v1.palette.gray05}`,borderRadius:W.shape.radius.default,width:"100%",minHeight:"300px",display:"flex",flexDirection:"column",alignSelf:"stretch"}),debugJson:(0,d.css)({flexGrow:1,height:"100%",overflow:"hidden",padding:W.spacing(.5)})});var O=e(68805),S=e(84510);const B=({isOpen:W,onCloseClick:R,transformer:G})=>{const{transformation:{name:w},help:_}=G,Q=_||(0,S.$n)(),ae=(0,n.jsx)(b._,{title:w,subtitle:"Transformation help",onClose:()=>R(!1),children:(0,n.jsx)(O.j,{markdown:Q,styleOverrides:{borderTop:"2px solid"}})});return W?ae:null};var K=e(739),U=e(37386),F=e(18857),I=e(42240);const V=({index:W,annotations:R,config:G,onChange:w,data:_})=>{const Q=(0,x.of)(M),ae=(0,s.useMemo)(()=>({context:{data:_},showTopic:!0,showFilter:G.topic!==K.QR.Annotations,source:[{value:K.QR.Series,label:"Query and Transformation results"},{value:K.QR.Annotations,label:"Annotation data"}]}),[_,R?.length,G.topic]);return(0,n.jsx)("div",{className:Q.wrapper,children:(0,n.jsx)(U.D,{label:(0,f.t)("dashboard.transformation-filter.label-apply-transformation-to","Apply transformation to"),children:(0,n.jsxs)(n.Fragment,{children:[ae.showTopic&&(0,n.jsx)(F.l6,{isClearable:!0,options:ae.source,value:ae.source.find(q=>q.value===G.topic),placeholder:ae.source[0].label,className:Q.padded,onChange:q=>{w(W,{...G,topic:q?.value})}}),ae.showFilter&&(0,n.jsx)(I.M,{value:G.filter,context:ae.context,onChange:q=>w(W,{...G,filter:q})})]})})})},M=W=>{const R=W.shape.radius.default;return{wrapper:(0,d.css)({padding:W.spacing(2),border:`2px solid ${W.colors.background.secondary}`,borderTop:"none",borderRadius:`0 0 ${R} ${R}`,position:"relative",top:"-4px"}),padded:(0,d.css)({marginBottom:W.spacing(1)})}},L=({onRemove:W,index:R,id:G,data:w,configs:_,uiConfig:Q,onChange:ae})=>{const[q,k]=(0,l.A)(!1),[ee,j]=(0,l.A)(!1),[J,Z]=(0,l.A)(!1),te=!!_[R].transformation.disabled,se=_[R].transformation.topic,ie=_[R].transformation.filter!=null||se!=null,ce=ie||w.series.length>0||(w.annotations?.length??0)>0,[re,ue]=(0,s.useState)([]),[X,le]=(0,s.useState)([]),[he,fe]=(0,s.useState)([]),Ce=(0,s.useCallback)(De=>{const Me=_[De].transformation;ae(De,{...Me,disabled:Me.disabled?void 0:!0})},[ae,_]),Ae=(0,s.useCallback)(()=>{let De={..._[R].transformation};De.filter?delete De.filter:De.filter={id:c.jR.byRefId,options:""},ae(R,De)},[ae,R,_]),_e=(0,s.useCallback)((De,Me,Te)=>$e=>{let Re="panel_editor_tabs_transformations_toggle";m.Ay.featureToggles.transformationsRedesign&&(Re="transformations_redesign_"+Re),(0,g.rR)(Re,{action:Te?"off":"on",toggleId:Me,transformationId:_[R].transformation.id}),De($e)},[_,R]);(0,s.useEffect)(()=>{const De=_[R].transformation,Me=De.filter?.options?(0,i.Dq)(De.filter):void 0,Te=R-1;let $e=[],Re=[];Te>=0&&($e=_.slice(0,Te).map(Qe=>Qe.transformation),Re=_.slice(Te,R).map(Qe=>Qe.transformation));const Ke=_.slice(0,R).map(Qe=>Qe.transformation),Ve=_.slice(R,R+1).map(Qe=>Qe.transformation),Se={interpolate:Qe=>(0,u.w)().replace(Qe)},Ye=(0,o.m)(Ke,w.series,Se).subscribe(Qe=>{Me&&(Qe=Qe.filter(He=>Me(He))),ue(Qe)}),Ue=(0,o.m)(Ke,w.series,Se).pipe((0,r.Z)(Qe=>(0,o.m)(Ve,Qe,Se))).subscribe(le),je=(0,o.m)($e,w.series,Se).pipe((0,r.Z)(Qe=>(0,o.m)(Re,Qe,Se))).subscribe(Qe=>{let He=[...Qe];w.request?.targets.forEach(Je=>{He.some(ve=>ve.refId===Je.refId)||He.push({refId:Je.refId,fields:[],length:0})}),fe(He)});return function(){Ye.unsubscribe(),Ue.unsubscribe(),je.unsubscribe()}},[R,w,_]);const Xe=()=>(0,n.jsxs)(n.Fragment,{children:[Q.state&&(0,n.jsx)(y.p,{state:Q.state}),(0,n.jsx)(v.A,{title:(0,f.t)("dashboard.transformation-operation-row.render-actions.title-show-transform-help","Show transform help"),icon:"info-circle",onClick:_e(Z,"help",J),active:J}),ce&&(0,n.jsx)(v.A,{title:(0,f.t)("dashboard.transformation-operation-row.render-actions.title-filter","Filter"),icon:"filter",onClick:_e(Ae,"filter",ie),active:ie}),(0,n.jsx)(v.A,{title:(0,f.t)("dashboard.transformation-operation-row.render-actions.title-debug","Debug"),icon:"bug",onClick:_e(j,"debug",ee),active:ee}),(0,n.jsx)(v.A,{title:(0,f.t)("dashboard.transformation-operation-row.render-actions.title-disable-transformation","Disable transformation"),icon:te?"eye-slash":"eye",onClick:_e(()=>Ce(R),"disabled",te),active:te,dataTestId:h.Tp.components.Transforms.disableTransformationButton}),(0,n.jsx)(v.q,{title:(0,f.t)("dashboard.transformation-operation-row.render-actions.title-remove","Remove"),icon:"trash-alt",onClick:()=>m.Ay.featureToggles.transformationsRedesign?k(!0):W(R)}),m.Ay.featureToggles.transformationsRedesign&&(0,n.jsx)(E.u,{isOpen:q,title:(0,f.t)("dashboard.transformation-operation-row.title-delete","Delete {{name}}?",{name:Q.name}),body:(0,f.t)("dashboard.transformation-operation-row.body-delete","Note that removing one transformation may break others. If there is only a single transformation, you will go back to the main selection screen."),confirmText:(0,f.t)("dashboard.transformation-operation-row.render-actions.confirmText-delete","Delete"),onConfirm:()=>{k(!1),W(R)},onDismiss:()=>k(!1)})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.u,{id:G,index:R,title:`${R+1} - ${Q.name}`,draggable:!0,actions:Xe,disabled:te,expanderMessages:{close:"Collapse transformation row",open:"Expand transformation row"},children:[ie&&(0,n.jsx)(V,{data:he,index:R,config:_[R].transformation,annotations:w.annotations,onChange:ae}),(0,n.jsx)(P,{input:re,output:X,debugMode:ee,index:R,configs:_,uiConfig:Q,onChange:ae,toggleShowDebug:j})]}),(0,n.jsx)(B,{transformer:Q,isOpen:J,onCloseClick:Z})]})},N=({data:W,onChange:R,onRemove:G,configs:w})=>(0,n.jsx)(n.Fragment,{children:w.map((_,Q)=>{const ae=a.h.getIfExists(_.transformation.id);return ae?(0,n.jsx)(L,{index:Q,id:`${_.id}`,data:W,configs:w,uiConfig:ae,onRemove:G,onChange:R},`${_.id}`):null})})},47433:(ne,A,e)=>{"use strict";e.d(A,{Ce:()=>v,R3:()=>f,Y2:()=>E,of:()=>g});var n=e(81160),a=e(16515),s=e(79319),l=e(46644),r=e(36638),c=e(57866),i=e(64761),o=e(91146);const h=1;var f=(p=>(p.aggregate="aggregate",p.groupBy="groupby",p))(f||{});const g={id:i.F.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group.",defaultOptions:{fields:{}},isApplicable:p=>(0,o.f)(p)>=h?s.M.Applicable:s.M.NotApplicable,isApplicableDescription:p=>{const m=(0,o.f)(p);return`The Group by transformation requires a series with at least ${h} fields to work. The maximum number of fields found on a series is ${m}`},operator:p=>m=>m.pipe((0,n.T)(y=>{const d=[];for(const[D,C]of Object.entries(p.fields))C.operation==="groupby"&&d.push(D);if(d.length===0)return y;const x=(0,r.NS)({id:c.Ct.byNames,options:{names:d}}),b=[];for(const D of y){const C=D.fields.filter(O=>x(O,D,y));if(C.length===0)continue;const P=E(D,C),T=v(C,P);for(const O of D.fields){if(!u(O,p))continue;const S=(0,a.Ct)(O),B=p.fields[S].aggregations,K={};P.forEach(U=>{const F=U[S],I=(0,l.Nw)({field:F,reducers:B});for(const V of B)Array.isArray(K[V])||(K[V]=[]),K[V].push(I[V])});for(const U of B){const F={name:`${S} (${U})`,values:K[U]??[],type:(0,l.AH)(U,O.type),config:{}};T.push(F)}}b.push({refId:D.refId,fields:T,length:P.size})}return b}))},u=(p,m)=>{const y=(0,a.Ct)(p),{operation:d,aggregations:x=[]}=m.fields[y]??{};return Array.isArray(x)?d==="aggregate"?x.length>0:d==="groupby"?x.length===1&&x[0]===l.gy.count:!1:!1};function E(p,m){const y=new Map;for(let d=0;d<p.length;d++){const x=String(m.map(D=>D.values[d])),b=y.get(x)??{};y.has(x)||y.set(x,b);for(let D of p.fields){const C=(0,a.Ct)(D);b[C]||(b[C]={name:C,type:D.type,config:{...D.config},values:[]}),b[C].values.push(D.values[d])}}return y}function v(p,m){const y=[];for(const d of p){const x=[],b=(0,a.Ct)(d);m.forEach(D=>{x.push(D[b].values[0])}),y.push({name:d.name,type:d.type,config:{...d.config},values:x})}return y}},47520:(ne,A,e)=>{"use strict";e.d(A,{k:()=>r});var n=e(44240),a=e(39697),s=e(65961),l=e(67791);function r({whileLoading:c,source:i}){return(0,n.h)((0,a.O)(200).pipe((0,s.u)(c),(0,l.Q)(i)),i)}},47700:(ne,A,e)=>{"use strict";e.d(A,{N:()=>s,d:()=>l});var n=e(74848);let a;function s(r){a=r}function l(r){return a?(0,n.jsx)(a,{...r}):null}},47797:(ne,A,e)=>{"use strict";e.d(A,{do:()=>s,ee:()=>r,q6:()=>a,rE:()=>l});var n=e(68143);function a(c){if(typeof c=="string")return c;if(c){if(c instanceof Error)return c.message;if((0,n.NF)(c)){if(c.data&&c.data.message)return c.data.message;if(c.statusText)return c.statusText}else if(c.hasOwnProperty("message"))return c.message}return JSON.stringify(c)}function s(c){if(typeof c!="string"&&c){if(c instanceof Error)return;if((0,n.NF)(c))return c.status;if(c.hasOwnProperty("status"))return c.status}}function l(c){if(typeof c!="string"&&c){if(c instanceof Error)return;if((0,n.NF)(c))return c.data?.messageId;if(c.hasOwnProperty("messageId"))return c.messageId}}function r(c){const i=c.config?.method??"GET",o=c.config?.url;return i&&o?`${i} ${o}`:"request"}},47931:(ne,A,e)=>{"use strict";e.d(A,{b:()=>f});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(63142),c=e(45861),i=e(30703),o=e(53371);const h=2*1e3;function f({onClipboardCopy:E,onClipboardError:v,children:p,getText:m,icon:y,variant:d,...x}){const b=(0,r.of)(u),[D,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let S;return D&&(S=setTimeout(()=>{C(!1)},h)),()=>{window.clearTimeout(S)}},[D]);const P=(0,s.useRef)(null),T=(0,s.useCallback)(async()=>{const S=m();try{await g(S,P),C(!0),E?.(S)}catch(B){v?.(S,B)}},[m,E,v]),O=(0,l.t)("clipboard-button.inline-toast.success","Copied");return(0,n.jsxs)(n.Fragment,{children:[D&&(0,n.jsx)(o.r,{placement:"top",referenceElement:P.current,children:O}),(0,n.jsxs)(c.$n,{onClick:T,icon:y,variant:D?"success":d,...x,className:(0,a.cx)(b.button,D&&b.successButton,x.className),ref:P,children:[p,D&&(0,n.jsx)("div",{className:b.successOverlay,children:(0,n.jsx)(i.I,{name:"check"})})]})]})}const g=async(E,v)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(E);{const p=document.createElement("textarea");v.current?.appendChild(p),p.value=E,p.focus(),p.select(),document.execCommand("copy"),p.remove()}},u=E=>({button:(0,a.css)({position:"relative"}),successButton:(0,a.css)({"> *":(0,a.css)({visibility:"hidden"})}),successOverlay:(0,a.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},47938:(ne,A,e)=>{"use strict";e.d(A,{By:()=>f,VO:()=>h,WS:()=>r,f4:()=>o,nd:()=>i,vk:()=>c});var n=e(75505),a=e(28105),s=e(68143),l=e(52161);async function r(p){try{const m=await(0,n.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,l.w5)(p)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:m.data.template_files??{},template_file_provenances:m.data.template_file_provenances??{},alertmanager_config:m.data.alertmanager_config??{},last_applied:m.data.last_applied,id:m.data.id,extra_config:m.data.extra_config}}catch(m){if(p===l.hY&&(0,s.NF)(m)&&m.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw m}}async function c(p,m){await(0,n.s)((0,s.AI)().fetch({method:"POST",url:`/api/alertmanager/${(0,l.w5)(p)}/config/api/v1/alerts`,data:m,showErrorAlert:!1,showSuccessAlert:!1}))}async function i(p){await(0,n.s)((0,s.AI)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,l.w5)(p)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function o(p){return(await(0,n.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,l.w5)(p)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function h(p){return(await(0,n.s)((0,s.AI)().fetch({url:`/api/alertmanager/${(0,l.w5)(p)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function f(p,m,y){const d={receivers:m,alert:y};try{const x=await(0,n.s)((0,s.AI)().fetch({method:"POST",data:d,url:`/api/alertmanager/${(0,l.w5)(p)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(g(x.data))throw new Error(v(x.data))}catch(x){throw(0,s.NF)(x)&&u(x.data)&&g(x.data)?new Error(v(x.data)):x}}function g(p){return p.receivers.some(m=>m.grafana_managed_receiver_configs.some(y=>y.status==="failed"))}function u(p){return(0,a.Gv)(p)&&"receivers"in p&&Array.isArray(p.receivers)?p.receivers.every(E):!1}function E(p){return(0,a.Gv)(p)&&"name"in p&&typeof p.name=="string"&&"grafana_managed_receiver_configs"in p&&Array.isArray(p.grafana_managed_receiver_configs)}function v(p){return p.receivers.flatMap(m=>m.grafana_managed_receiver_configs.filter(y=>y.status==="failed").map(y=>y.error??"Unknown error.")).join("; ")}},47969:(ne,A,e)=>{"use strict";e.d(A,{qJ:()=>g,hI:()=>h,hM:()=>m,H7:()=>f,xU:()=>x,P5:()=>S,Jx:()=>p,g0:()=>y,PK:()=>T,Ow:()=>C});var n=e(38036),a=e(92745);function s(B,K){const U=new Set;for(const F of B)U.add(K(F));return U}var l=e(82612),r=e(62635),c=e(54742),i=e(67933),o=e(99305);const h=B=>{const K=[];for(const U of B)K.push({id:U.id,label:`${U.id}`});return K},f=(B,K)=>B.filter(U=>K.some(F=>F.from===U.id||F.to===U.id)),g=B=>{const K=[];for(const U of B)for(const F of B){if(U===F)continue;c.B.get(U.type).dependsOn(U,F)&&K.push({from:U.id,to:F.id})}return K};function u(B){const K=(0,o.t4)(B);if(!K)return;const U=K.slice(1).find(F=>F!==void 0);if(!(U in{}))return U}const E=(B,K)=>{o.SY.lastIndex=0;const U=[],I=(0,r.MA)(K,2).match(o.SY);if(!I)return U;for(const V of I){if(!V||V.indexOf("$__")!==-1||V.indexOf("${__")!==-1||V.indexOf("$hashKey")!==-1)continue;const M=u(V);B.some(L=>L.id===M)||U.find(L=>L===M)||M&&U.push(M)}return U},v={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},p=(B,K,U)=>{const F=Object.keys(K.value).reduce((V,M)=>{const L=K.value[M];if(!L||typeof L!="string")return V;const N=v[M]?v[M].find(R=>R.test(B)):void 0;let W=(0,o.wJ)(L,B);return M==="repeat"&&L===B&&(W=!0),!N&&W&&(V={...V,[M]:L}),V},{}),I=Object.keys(K.value).reduce((V,M)=>{const L=K.value[M];if(L&&typeof L=="object"&&Object.keys(L).length){let N=L.title||L.name||L.id||M;Array.isArray(K.value)&&K.key==="panels"&&(N=`${N}[${L.id}]`);const W=p(B,{key:M,value:L},{});Object.keys(W).length&&(V={...V,[N]:W})}return V},{});return(Object.keys(F).length||Object.keys(I).length)&&(U={...U,...F,...I}),U},m=(B,K)=>{if(!K)return{unUsed:[],usages:[]};const U=[];let F=[];const I=K.getSaveModelCloneOld();for(const V of B){const M=V.id,L=p(M,{key:"model",value:I},{});!Object.keys(L).length&&!(0,i.EW)(V)&&U.push(V),Object.keys(L).length&&F.push({variable:V,tree:L})}return{unUsed:U,usages:F}};async function y(B,K){return new Promise((U,F)=>{setTimeout(()=>{try{const I=d(B,K);U(C(I))}catch(I){F(I)}},200)})}function d(B,K){if(!K)return[];let U=[];const F=K.getSaveModelCloneOld(),I=E(B,F);for(const V of I){const M=p(V,{key:"model",value:F},{});if(Object.keys(M).length){const L={id:V,name:V};U.push({variable:L,tree:M})}}return U}function x(B,K,U){const F=s(K.descendants(B),V=>V.name);F.add(n.c.includeVars);for(const V of B)F.add(V);return b([...F],U)}function b(B,K){const U=[];for(const F of B)K[F]&&U.push(...K[F]);return new Set(U)}const D=(B,K)=>{const{id:U,value:F}=K,{nodes:I,edges:V}=B;if(F&&typeof F=="string"){const M=`${K.id}-${F}`;return I.push({id:M,label:F}),V.push({from:M,to:U}),B}if(F&&typeof F=="object"){const M=Object.keys(F);for(const L of M){const N=`${K.id}-${L}`;I.push({id:N,label:L}),V.push({from:N,to:U}),B=D(B,{id:N,value:F[L]})}return B}return B},C=B=>{const K=[];for(const U of B){const{variable:F,tree:I}=U,V={variable:F,nodes:[{id:"dashboard",label:(0,a.t)("variables.transform-usages-to-network.result.label.dashboard","dashboard")}],edges:[],showGraph:!1};K.push(D(V,{id:"dashboard",value:I}))}return K},P=B=>Object.values(B).reduce((U,F)=>typeof F=="object"?U+P(F):U+1,0),T=(B,K)=>{const U=K.find(F=>F.variable.id===B);return U?P(U.tree):0};function O(B){const K=[];for(const U of B)K.push(U),U.panels?.length&&K.push(...O(U.panels.map(F=>new PanelModel(F))));return K}function S(B){const K={};for(const U of B){const F=(0,l.tw)(U),I=[...F.matchAll(/"repeat":"([^"]+)"/g)].map(L=>L[1]),V=F.match(o.SY)?.map(L=>u(L))??[],M=[...I,...V];for(const L of M)L in K?K[L].add(U.id):K[L]=new Set([U.id])}return K}},47981:(ne,A,e)=>{"use strict";e.d(A,{N:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(22787),c=e(66404),i=e(13943),o=e(63142),h=e(9628);const f=p=>[{category:(0,l.t)("help-modal.shortcuts-category.global","Global"),shortcuts:[{keys:["g","h"],description:(0,l.t)("help-modal.shortcuts-description.go-to-home-dashboard","Go to Home Dashboard")},{keys:["g","d"],description:(0,l.t)("help-modal.shortcuts-description.go-to-dashboards","Go to Dashboards")},{keys:["g","e"],description:(0,l.t)("help-modal.shortcuts-description.go-to-explore","Go to Explore")},{keys:["g","p"],description:(0,l.t)("help-modal.shortcuts-description.go-to-profile","Go to Profile")},{keys:[`${p} + k`],description:(0,l.t)("help-modal.shortcuts-description.open-search","Open search")},{keys:["esc"],description:(0,l.t)("help-modal.shortcuts-description.exit-edit/setting-views","Exit edit/setting views")},{keys:["?"],description:(0,l.t)("help-modal.shortcuts-description.show-all-shortcuts","Show all keyboard shortcuts")},{keys:["c","t"],description:(0,l.t)("help-modal.shortcuts-description.change-theme","Change theme")}]},{category:(0,l.t)("help-modal.shortcuts-category.time-range","Time range"),shortcuts:[{keys:["t","z"],description:(0,l.t)("help-modal.shortcuts-description.zoom-out-time-range","Zoom out time range")},{keys:["t","\u2190"],description:(0,l.t)("help-modal.shortcuts-description.move-time-range-back","Move time range back")},{keys:["t","\u2192"],description:(0,l.t)("help-modal.shortcuts-description.move-time-range-forward","Move time range forward")},{keys:["t","a"],description:(0,l.t)("help-modal.shortcuts-description.make-time-range-permanent","Make time range absolute/permanent")},{keys:["t","c"],description:(0,l.t)("help-modal.shortcuts-description.copy-time-range","Copy time range")},{keys:["t","v"],description:(0,l.t)("help-modal.shortcuts-description.paste-time-range","Paste time range")}]},{category:(0,l.t)("help-modal.shortcuts-category.dashboard","Dashboard"),shortcuts:[{keys:[`${p} + s`],description:(0,l.t)("help-modal.shortcuts-description.save-dashboard","Save dashboard")},{keys:["d","r"],description:(0,l.t)("help-modal.shortcuts-description.refresh-all-panels","Refresh all panels")},{keys:["d","s"],description:(0,l.t)("help-modal.shortcuts-description.dashboard-settings","Dashboard settings")},{keys:["d","v"],description:(0,l.t)("help-modal.shortcuts-description.toggle-active-mode","Toggle in-active / view mode")},{keys:["d","k"],description:(0,l.t)("help-modal.shortcuts-description.toggle-kiosk","Toggle kiosk mode (hides top nav)")},{keys:["d","\u21E7 + e"],description:(0,l.t)("help-modal.shortcuts-description.expand-all-rows","Expand all rows")},{keys:["d","\u21E7 + c"],description:(0,l.t)("help-modal.shortcuts-description.collapse-all-rows","Collapse all rows")},{keys:["d","a"],description:(0,l.t)("help-modal.shortcuts-description.toggle-auto-fit","Toggle auto fit panels (experimental feature)")},{keys:[`${p} + o`],description:(0,l.t)("help-modal.shortcuts-description.toggle-graph-crosshair","Toggle shared graph crosshair")},{keys:["d","l"],description:(0,l.t)("help-modal.shortcuts-description.toggle-all-panel-legends","Toggle all panel legends")},{keys:["d","x"],description:(0,l.t)("help-modal.shortcuts-description.toggle-exemplars","Toggle exemplars in all panel")}]},{category:(0,l.t)("help-modal.shortcuts-category.focused-panel","Focused panel"),shortcuts:[{keys:["e"],description:(0,l.t)("help-modal.shortcuts-description.toggle-panel-edit","Toggle panel edit view")},{keys:["v"],description:(0,l.t)("help-modal.shortcuts-description.toggle-panel-fullscreen","Toggle panel fullscreen view")},{keys:["p","u"],description:(0,l.t)("help-modal.shortcuts-description.open-share-link-drawer","Share panel link")},{keys:["p","e"],description:(0,l.t)("help-modal.shortcuts-description.open-share-embed-drawer","Share panel embed")},{keys:["p","s"],description:(0,l.t)("help-modal.shortcuts-description.open-shared-modal","Share panel snapshot")},{keys:["p","x"],description:(0,l.t)("help-modal.shortcuts-description.explore-panel","Explore panel")},{keys:["i"],description:(0,l.t)("help-modal.shortcuts-description.inspect-panel","Inspect panel")},{keys:["p","d"],description:(0,l.t)("help-modal.shortcuts-description.duplicate-panel","Duplicate Panel")},{keys:["p","r"],description:(0,l.t)("help-modal.shortcuts-description.remove-panel","Remove Panel")},{keys:["p","l"],description:(0,l.t)("help-modal.shortcuts-description.toggle-panel-legend","Toggle panel legend")}]}],g=({onDismiss:p})=>{const m=(0,o.of)(v),y=(0,s.useMemo)(()=>(0,h.gn)(),[]),d=(0,s.useMemo)(()=>f(y),[y]);return(0,n.jsx)(r.a,{title:(0,l.t)("help-modal.title","Shortcuts"),isOpen:!0,onDismiss:p,onClickBackdrop:p,children:(0,n.jsx)(i.x,{columns:{xs:1,sm:2},gap:3,tabIndex:0,children:Object.values(d).map(({category:x,shortcuts:b})=>(0,n.jsx)("section",{children:(0,n.jsxs)("table",{className:m.table,children:[(0,n.jsx)("caption",{children:(0,n.jsx)(c.E,{element:"p",variant:"h5",children:x})}),(0,n.jsx)("thead",{className:"sr-only",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)(l.x6,{i18nKey:"help-modal.column-headers.keys",children:"Keys"})}),(0,n.jsx)("th",{children:(0,n.jsx)(l.x6,{i18nKey:"help-modal.column-headers.description",children:"Description"})})]})}),(0,n.jsx)("tbody",{children:b.map(({keys:D,description:C})=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:m.keys,children:D.map(P=>(0,n.jsx)(u,{children:P},P))}),(0,n.jsx)("td",{children:(0,n.jsx)(c.E,{variant:"bodySmall",element:"p",children:C})})]},D.join()))})]})},x))})})},u=({children:p})=>{const m=(0,o.of)(v),y=(0,s.useMemo)(()=>E(p),[p]),d=(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:y}});return(0,n.jsx)("kbd",{className:m.shortcutTableKey,children:(0,n.jsx)(c.E,{variant:"code",children:d})})};function E(p){let m,y;if(p.includes("ctrl"))m="ctrl",y="Control";else if(p.includes("esc"))m="esc",y="Escape";else return p;return p.replace(m,`<span class="sr-only">${y}</span><span aria-hidden="true" role="none">${m}</span>`)}function v(p){return{table:(0,a.css)({borderCollapse:"separate",borderSpacing:p.spacing(2),"& caption":{captionSide:"top"}}),keys:(0,a.css)({textAlign:"end",whiteSpace:"nowrap",minWidth:83}),shortcutTableKey:(0,a.css)({display:"inline-block",textAlign:"center",marginRight:p.spacing(.5),padding:"3px 5px",lineHeight:"10px",verticalAlign:"middle",border:`solid 1px ${p.colors.border.medium}`,borderRadius:p.shape.radius.default,color:p.colors.text.primary,backgroundColor:p.colors.background.secondary})}}},48072:(ne,A,e)=>{"use strict";e.d(A,{T:()=>a,X:()=>s});let n;function a(l){n=l}function s(){return n}},48233:(ne,A,e)=>{"use strict";e.d(A,{_:()=>a,j:()=>s});var n=e(42954),a=(l=>(l.Abs="abs",l.Exp="exp",l.Ln="ln",l.Round="round",l.Floor="floor",l.Ceil="ceil",l.Percent="percent",l))(a||{});const s=new n.O(()=>[{id:"abs",name:"Absolute value",operation:l=>Math.abs(l),unaryOperationID:"abs"},{id:"exp",name:"Natural exponent",operation:l=>Math.exp(l),unaryOperationID:"exp"},{id:"ln",name:"Natural logarithm",operation:l=>Math.log(l),unaryOperationID:"ln"},{id:"round",name:"Round",operation:l=>Math.round(l),unaryOperationID:"round"},{id:"floor",name:"Floor",operation:l=>Math.floor(l),unaryOperationID:"floor"},{id:"ceil",name:"Ceiling",operation:l=>Math.ceil(l),unaryOperationID:"ceil"},{id:"percent",name:"Percentage",operation:(l,r=1)=>l/(r||1),unaryOperationID:"percent"}])},48264:(ne,A,e)=>{"use strict";e.d(A,{Nb:()=>y,VQ:()=>b,eE:()=>m,m4:()=>E,yJ:()=>d});var n=e(81160),a=e(16515),s=e(64761),l=e(74261),r=e(55386),c=e(79319),i=e(39443),o=e(95004),h=e(8721),f=e(92745),g=e(739),u=e(16553);const E=()=>({id:s.F.heatmap,name:(0,f.t)("transformers.get-heatmap-transformer.name.create-heatmap","Create heatmap"),description:(0,f.t)("transformers.get-heatmap-transformer.description.generate-heatmap-data-from-source","Generate heatmap data from source data."),defaultOptions:{},isApplicable:T=>{const{xField:O,yField:S,xs:B,ys:K}=D(T);return O||S||!B.length||!K.length?c.M.NotPossible:c.M.Applicable},isApplicableDescription:"The Heatmap transformation requires fields with Heatmap compatible data. No fields with Heatmap data could be found.",operator:(T,O)=>S=>S.pipe((0,n.T)(B=>E().transformer(T,O)(B))),transformer:T=>O=>{const S=b(O,T);return T.keepOriginalData?[S,...O]:[S]}});function v(T){return T==="+Inf"?1/0:T==="-Inf"?-1/0:+(T??0)}function p(T,O){return v(T)-v(O)}function m(T){return T?.meta?.custom??{}}function y(T){let O=!1;for(let S of T.fields)switch(S.name){case"y":case"yMin":case"yMax":if(O)return!1;O=!0}return O}function d(T){const O=T.frame.fields[0],S=O.values,B=T.frame.fields.filter((R,G)=>R.type===o.PU.number&&G>0),K=S.length*B.length,U=new Array(K),F=new Array(K),I=new Array(K),V=B.map(R=>R.values.slice());V.forEach((R,G)=>{for(let w=0;w<R.length;w++)I[V.length*w+G]=R[w]});const M=Array.from({length:B.length},(R,G)=>G);for(let R=0,G=0,w=0;R<K;G=++R%M.length)F[R]=M[G],G===0&&R>=M.length&&w++,U[R]=S[w];let L=B[0].labels?.le!=null?"yMax":"y";switch(T.layout){case g.D7.le:L="yMax";break;case g.D7.ge:L="yMin";break;case g.D7.unknown:L="y";break}const N={yOrdinalDisplay:B.map(R=>(0,a.Ct)(R,T.frame)),yMatchWithLabel:Object.keys(B[0].labels??{})[0]};if(N.yMatchWithLabel&&(N.yOrdinalLabel=B.map(R=>R.labels?.[N.yMatchWithLabel]??""),N.yMatchWithLabel==="le"&&(N.yMinDisplay="0.0")),T.unit?.length||T.decimals!=null){const R=(0,r.j_)(T.unit??"short");N.yMinDisplay&&(N.yMinDisplay=(0,r.cN)(R(0,T.decimals))),N.yOrdinalDisplay=N.yOrdinalDisplay.map(G=>{let w=+G;return Number.isNaN(w)?G:(0,r.cN)(R(w,T.decimals))})}const W={...B[0].config};return W.displayNameFromDS&&delete W.displayNameFromDS,{length:U.length,refId:T.frame.refId,meta:{type:i.m.HeatmapCells,custom:N},fields:[{name:O.type===o.PU.time?"xMax":"x",type:O.type,values:U,config:O.config},{name:L,type:o.PU.number,values:F,config:{unit:"short"}},{name:T.value?.length?T.value:"Value",type:o.PU.number,values:I,config:W,display:B[0].display}]}}function x(T){T=T.slice(),T.sort((S,B)=>p(S.name,B.name));const O=T.map(S=>S.fields[1].values.slice());return O.reverse(),O.forEach((S,B)=>{if(B<O.length-1)for(let K=0;K<S.length;K++)S[K]-=O[B+1][K]}),O.reverse(),T.map((S,B)=>({...S,fields:[S.fields[0],{...S.fields[1],values:O[B]}]}))}function b(T,O){const{xField:S,yField:B,xs:K,ys:U}=D(T);if(!S||!B)throw"no heatmap fields found";if(!K.length||!U.length)throw"no values found";const F=O.xBuckets??{},I=O.yBuckets??{};if(F.scale?.type===g.L4.Log)throw"X axis only supports linear buckets";const V=O.yBuckets?.scale??{type:g.L4.Linear},M=C(K,U,{xSorted:(0,h.g2)(K),xTime:S.type===o.PU.time,xMode:F.mode,xSize:F.mode===g.J1.Size?(0,u.Fv)(F.value??""):F.value?+F.value:void 0,yMode:I.mode,ySize:I.value?+I.value:void 0,yLog:V?.type===g.L4.Log?V?.log:void 0,xMin:O.timeRange?.from.valueOf(),xMax:O.timeRange?.to.valueOf()});return{length:M.x.length,name:(0,a.Ct)(B),meta:{type:i.m.HeatmapCells},fields:[{name:"xMin",type:S.type,values:M.x,config:S.config},{name:"yMin",type:o.PU.number,values:M.y,config:{...B.config,custom:{scaleDistribution:V}}},{name:"Count",type:o.PU.number,values:M.count,config:{unit:"short"}}]}}function D(T){let O,S,B=0;for(let I of T)I.fields.find(M=>M.type===o.PU.time)&&(B+=I.length);let K=Array(B),U=Array(B),F=0;for(let I of T){const V=I.fields.find(L=>L.type===o.PU.time);if(!V)continue;O||(O=V);const M=V.values;for(let L of I.fields)if(L!==V&&L.type===o.PU.number){const N=L.values;for(let W=0;W<M.length;W++,F++)K[F]=M[W],U[F]=N[W];S||(S=L)}}return{xField:O,yField:S,xs:K,ys:U}}function C(T,O,S){let B=T.length,K=S?.xSorted??!1,U=S?.ySorted??!1,F=S?.xMin??(K?T[0]:1/0),I=U?O[0]:1/0,V=S?.xMax??(K?T[B-1]:-1/0),M=U?O[B-1]:-1/0,L=S?.yLog,N=S?.xMin!=null&&S?.xMax!=null,W=S?.yMin!=null&&S?.yMax!=null;for(let ce=0;ce<B;ce++)!K&&!N&&(F=Math.min(F,T[ce]),V=Math.max(V,T[ce])),!U&&!W&&(!L||O[ce]>0)&&(I=Math.min(I,O[ce]),M=Math.max(M,O[ce]));let R=S?.xSize??0,G=S?.ySize??0,w=S?.xMode,_=S?.yMode;if((!Number.isFinite(R)||R<=0)&&(w=g.J1.Count,R=20),(!Number.isFinite(G)||G<=0)&&(_=g.J1.Count,G=10),w===g.J1.Count){let ce=(V-F)/Math.max(R-1,1),re=S?.xTime?u.q_:u.eO,ue=re.findIndex(X=>X>ce)-1;R=re[Math.max(ue,0)]}if(_===g.J1.Count){let ce=(M-I)/Math.max(G-1,1),re=S?.yTime?u.q_:u.eO,ue=re.findIndex(X=>X>ce)-1;G=re[Math.max(ue,0)]}let Q=S?.xCeil?ce=>(0,l.Uh)(ce,R):ce=>(0,l.rs)(ce,R),ae=S?.yCeil?ce=>(0,l.Uh)(ce,G):ce=>(0,l.rs)(ce,G);if(L){G=1/(S?.ySize??1);let ce=L===2?Math.log2:Math.log10;ae=S?.yCeil?re=>(0,l.Uh)(ce(re),G):re=>(0,l.rs)(ce(re),G)}let q=Q(F),k=Q(V),ee=ae(I),j=ae(M),J=Math.round((k-q)/R)+1,Z=Math.round((j-ee)/G)+1,[te,se,ie]=P(J,Z,q,R,ee,G,L);for(let ce=0;ce<B;ce++){if(L&&O[ce]<=0)continue;const re=(Q(T[ce])-q)/R,ue=(ae(O[ce])-ee)/G,X=re*Z+ue;ie[X]++}return{x:te,y:se,count:ie}}function P(T,O,S,B,K,U,F){const I=T*O,V=new Array(I),M=new Array(I),L=new Array(I);for(let N=0,W=0,R=S;N<I;W=++N%O)L[N]=0,F?M[N]=F**(K+W*U):M[N]=K+W*U,W===0&&N>=O&&(R+=B),V[N]=R;return[V,M,L]}},48390:(ne,A,e)=>{"use strict";e.d(A,{K:()=>s});var n=e(739);const a="12.2.1",s={displayMode:n.eX.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:n.TZ.Auto,showUnfilled:!0,sizing:n.T6.Auto,valueMode:n.$l.Color}},48421:(ne,A,e)=>{"use strict";e.d(A,{$u:()=>v,D4:()=>y,Iv:()=>d,U2:()=>m,VT:()=>p,z_:()=>E});var n=e(2543),a=e.n(n),s=e(28998),l=e(17752),r=e(67933),c=e(39167),i=e(74887),o=e(93612),h=e(88681),f=e(99305),g=e(25206);const u="Filters",E=D=>async(C,P)=>{let T=b(D,P());if(!T&&(C(x(D)),T=b(D,P()),!T))return;const O=T.filters.findIndex(B=>B.key===D.key&&B.value===D.value);if(O===-1){const{value:B,key:K,operator:U}=D,F={value:B,key:K,operator:U};return await C(m((0,f.jX)(T),F))}const S={...T.filters[O],operator:D.operator};return await C(v((0,f.jX)(T),{index:O,filter:S}))},v=(D,C)=>async(P,T)=>{const O=(0,o.dn)(D,T());P((0,i.kb)(D.rootStateKey,(0,g.E2)((0,f.qD)(O,C)))),await P((0,c.us)((0,f.jX)(O),!0))},p=(D,C)=>async(P,T)=>{const O=(0,o.dn)(D,T());P((0,i.kb)(D.rootStateKey,(0,g.D$)((0,f.qD)(O,C)))),await P((0,c.us)((0,f.jX)(O),!0))},m=(D,C)=>async(P,T)=>{const O=(0,o.dn)(D,T());P((0,i.kb)(D.rootStateKey,(0,g.xt)((0,f.qD)(O,C)))),await P((0,c.us)((0,f.jX)(O),!0))},y=(D,C)=>async(P,T)=>{const O=(0,o.dn)(D,T());P((0,i.kb)(D.rootStateKey,(0,g.qZ)((0,f.qD)(O,C)))),await P((0,c.us)((0,f.jX)(O),!0))},d=(D,C)=>async(P,T)=>{const O=(0,o.dn)(D,T());P((0,i.kb)(D.rootStateKey,(0,h.QP)((0,f.qD)(O,{propName:"datasource",propValue:C}))));const B=(await(0,s.tR)().get(C))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";P((0,i.kb)(D.rootStateKey,(0,l.BC)({infoText:B})))},x=D=>(C,P)=>{const T=(0,o.y7)(P()),O={...(0,n.cloneDeep)(g.MK),datasource:D.datasource,name:u,id:u,rootStateKey:T},S=!1,B=(0,o.hk)(T,P()),K={type:"adhoc",id:O.id,rootStateKey:T};C((0,i.kb)(T,(0,h.QV)((0,f.qD)(K,{global:S,model:O,index:B}))))},b=(D,C)=>{const P=(0,o.y7)(C),T=(0,o.nx)(P,C);let O;for(const S of Object.values(T.variables))if((0,r.EW)(S)&&S.datasource?.uid===D.datasource.uid){O=S;break}return O}},48431:(ne,A,e)=>{"use strict";e.d(A,{I:()=>g});var n=e(74848),a=e(22803),s=e(55386),l=e(92745),r=e(63142),c=e(28473),i=e(45861),o=e(30703),h=e(76319);const f="Remove file";function g({file:E,removeFile:v}){const p=(0,r.of)(u),{file:m,progress:y,error:d,abortUpload:x,retryUpload:b}=E,D=()=>d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:p.error,children:d.message}),b&&(0,n.jsx)(h.K,{name:"sync",tooltip:(0,l.t)("grafana-ui.file-dropzone.item-retry","Retry"),tooltipPlacement:"top",onClick:b}),v&&(0,n.jsx)(h.K,{className:b?p.marginLeft:"",name:"trash-alt",onClick:()=>v(E),tooltip:f})]}):y&&m.size>y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("progress",{className:p.progressBar,max:m.size,value:y}),(0,n.jsxs)("span",{className:p.paddingLeft,children:[Math.round(y/m.size*100),"%"]}),x&&(0,n.jsx)(i.$n,{variant:"secondary",type:"button",fill:"text",onClick:x,children:(0,n.jsx)(l.x6,{i18nKey:"grafana-ui.file-dropzone.cancel-upload",children:"Cancel upload"})})]}):v&&(0,n.jsx)(h.K,{name:"trash-alt",onClick:()=>v(E),tooltip:f,tooltipPlacement:"top"}),C=(0,s.j_)("decbytes")(m.size);return(0,n.jsxs)("div",{className:p.fileListContainer,children:[(0,n.jsxs)("span",{className:p.fileNameWrapper,children:[(0,n.jsx)(o.I,{name:"file-blank",size:"lg","aria-hidden":!0}),(0,n.jsx)("span",{className:p.padding,children:(0,c.i)(m.name)}),(0,n.jsx)("span",{children:(0,s.cN)(C)})]}),(0,n.jsx)("div",{className:p.fileNameWrapper,children:D()})]})}function u(E){return{fileListContainer:(0,a.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:E.spacing(2),border:`1px dashed ${E.colors.border.medium}`,backgroundColor:`${E.colors.background.secondary}`,marginTop:E.spacing(1)}),fileNameWrapper:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"center"}),padding:(0,a.css)({padding:E.spacing(0,1)}),paddingLeft:(0,a.css)({paddingLeft:E.spacing(2)}),marginLeft:(0,a.css)({marginLeft:E.spacing(1)}),error:(0,a.css)({paddingRight:E.spacing(2),color:E.colors.error.text}),progressBar:(0,a.css)({borderRadius:E.shape.radius.default,height:"4px","::-webkit-progress-bar":{backgroundColor:E.colors.border.weak,borderRadius:E.shape.radius.default},"::-webkit-progress-value":{backgroundColor:E.colors.primary.main,borderRadius:E.shape.radius.default}})}}},48442:(ne,A,e)=>{"use strict";e.d(A,{Rs:()=>l,W$:()=>f,Wn:()=>u,_I:()=>g,rJ:()=>i});var n=e(2543),a=e.n(n),s=e(63895);const l=["receiver","group_by","group_wait","group_interval","repeat_interval"];function r(E,v){const p=matchLabelsSet(E,v),m=new Map(v.map(y=>[y,{match:!1,matcher:null}]));return E.forEach(y=>{const d=v.find(x=>isLabelMatch(y,x));d&&m.set(d,{match:!0,matcher:y})}),{matches:p,labelsMatch:m}}function c(E,v){let p=[];const m=r(E.object_matchers??[],v);if(!m.matches)return[];if(E.routes)for(const y of E.routes){const d=c(y,v);if(p=p.concat(d),d.length&&!y.continue)break}return p.length===0&&p.push({route:E,labelsMatch:m.labelsMatch}),p}function i(E){function v(m){m.object_matchers=(0,s.J$)(m),delete m.matchers,delete m.match,delete m.match_re,m.routes?.forEach(v)}const p=structuredClone(E);return v(p),p}function o(E){function v(m){m.object_matchers=m.object_matchers?.map(([y,d,x])=>[unquoteWithUnescape(y),d,unquoteWithUnescape(x)]),m.routes?.forEach(v)}const p=structuredClone(E);return v(p),p}function h(E,v,p){const m=[];return p.reduce((y,d)=>{const x=d.alerts.filter(b=>{const D=Object.entries(b.labels);return c(E,D).some(C=>C.route===v)});return x.length&&y.push({...d,alerts:x}),y},m)}function f(E,v,p){const y={...(0,n.pick)(E,l),...p};return(0,n.reduce)(y,(x,b,D)=>{const C=b!=null,O=[void 0,"",null].some(K=>v[D]===K)&&C,S=D==="group_by"&&C&&(0,n.isArray)(v[D])&&v[D]?.length===0;return(O||S)&&(x[D]=b),x},{})}function g(E){return{...E,routes:E.routes?.map(v=>{const p=f(E,v);return g({...v,...p})})}}function u(E,v,p){const m={...E};return m.receiver===v&&(m.receiver=p),m.routes&&(m.routes=m.routes.map(y=>u(y,v,p))),m}},48457:(ne,A,e)=>{"use strict";e.d(A,{O:()=>c});var n=e(74848),a=e(96540),s=e(92745),l=e(18857),r=e(56755);const c=({value:i,onChange:o,context:h,item:f,id:g})=>{const u=f.settings??{},E=(0,r.sE)(h.data,u?.filter),v=(0,r.m3)(E,i,void 0,void 0,u.baseNameMode),p=(0,a.useCallback)(y=>{if(!(y&&!(0,r.v3)(y.value,E)))return o(y?.value)},[E,o]),m=v.find(y=>y.value===i);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.l6,{inputId:g,value:m,placeholder:u.placeholderText??(0,s.t)("grafana-ui.matchers-ui.field-name-picker.placeholder","Select field"),options:v,onChange:p,noOptionsMessage:u.noFieldsMessage,width:u.width,isClearable:u.isClearable!==!1})})}},48480:(ne,A,e)=>{"use strict";e.d(A,{BD:()=>h,EX:()=>f,Iz:()=>r,PG:()=>i,QP:()=>m,fN:()=>l,lO:()=>v,mn:()=>o,p$:()=>s,pN:()=>E,wY:()=>g,wp:()=>p,yV:()=>u,zX:()=>c});var n=e(2543),a=e.n(n);function s(y){const d={uid:y.uid,type:y.type};return y.apiVersion&&(d.apiVersion=y.apiVersion),d}function l(y){if(typeof y!="object"||y===null)return!1;const d="uid"in y&&typeof y.uid=="string",x="type"in y&&typeof y.type=="string";return d||x}function r(y){if(l(y))return y.uid;if((0,n.isString)(y))return y}const c=(y,d)=>x=>{E(y,d,x.currentTarget.value)},i=(y,d)=>x=>{v(y,d,x.currentTarget.value)},o=(y,d)=>x=>{p(y,d,x.currentTarget.value)},h=(y,d)=>x=>{v(y,d,x.value)},f=(y,d)=>x=>{v(y,d,x.currentTarget.checked)},g=(y,d)=>x=>{p(y,d,x.value)},u=(y,d)=>x=>{m(y,d)};function E(y,d,x){const b=y.options;y.onOptionsChange({...b,[d]:x})}const v=(y,d,x)=>{const b=y.options;y.onOptionsChange({...b,jsonData:{...b.jsonData,[d]:x}})},p=(y,d,x)=>{const b=y.options;y.onOptionsChange({...b,secureJsonData:{...b.secureJsonData?b.secureJsonData:{},[d]:x}})},m=(y,d)=>{const x=y.options;y.onOptionsChange({...x,secureJsonData:{...x.secureJsonData?x.secureJsonData:{},[d]:""},secureJsonFields:{...x.secureJsonFields,[d]:!1}})}},48492:(ne,A,e)=>{"use strict";e.d(A,{$v:()=>g,G2:()=>f,dp:()=>v,qY:()=>p,sN:()=>u});var n=e(95943),a=e(29043),s=e(4974),l=e(17340),r=e(76584),c=e(6461),i=e(1682),o=e(25953),h=e(93389);function f(){a.A.delete(n.tH),a.A.delete(n.rt),a.A.delete(n.Gk)}function g(y){const d=a.A.get(n.rt),x=JSON.parse(d);f();const b=m(i.b4.getNextPanelId(y));let D;try{D=(0,r.g5)(x.row,x.elements,!1,b)}catch{throw new Error("Error pasting row from clipboard, please try to copy again")}return D}function u(y){const d=a.A.get(n.Gk),x=JSON.parse(d);f();const b=m(i.b4.getNextPanelId(y));let D;try{D=(0,c.zE)(x.tab,x.elements,!1,b)}catch{throw new Error("Error pasting tab from clipboard, please try to copy again")}return D}function E(y){const d=a.A.get(n.tH),{elements:x,gridItem:b}=JSON.parse(d);return b.kind==="GridLayoutItem"?(0,l.ve)(b,x,m(i.b4.getNextPanelId(y))):(0,s.i6)(b,x,m(i.b4.getNextPanelId(y)))}function v(y){const d=E(y);return d instanceof o.X?d:new o.X({body:d.state.body,key:d.state.key,variableName:d.state.variableName})}function p(y,d){const x=E(y);return x instanceof h.U?x:new h.U({...d,body:x.state.body,key:x.state.key,variableName:x.state.variableName})}function m(y){let d=y;return()=>d++}},48542:(ne,A,e)=>{"use strict";e.d(A,{JF:()=>s,MC:()=>l,yC:()=>r});const n=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],a=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function s(o=""){const h=c(o.toLowerCase());return Math.abs(h%n.length)}function l(o=""){const h=s(o);return r(h)}function r(o){return{color:n[o],borderColor:a[o]}}function c(o){let h=5381;for(let f=0;f<o.length;f++)h=(h<<5)+h+o.charCodeAt(f);return h}var i={getTagColorsFromName:l}},48588:(ne,A,e)=>{"use strict";e.d(A,{En:()=>s,d1:()=>a,tw:()=>n});const n=0,a=100,s="SAML"},48592:(ne,A,e)=>{"use strict";e.d(A,{J$:()=>s,Qz:()=>n,ZV:()=>r,f5:()=>l,xi:()=>a});var n=(c=>(c.Legacy="legacy",c.Standard="standard",c.Custom="custom",c.Datasource="datasource",c))(n||{});class a{}class s extends a{getType(){return"standard"}}class l extends a{getType(){return"custom"}}class r extends a{getType(){return"datasource"}}},48600:(ne,A,e)=>{"use strict";e.d(A,{np:()=>O,t0:()=>T});var n=e(34796),a=e.n(n),s=e(2543),l=e.n(s),r=e(95093),c=e.n(r),i=e(33239),o=e(32899),h=e(68143),f=e(36490),g=e(83873),u=e(67020),E=e(77197),v=e(41644),p=e(28998),m=e(73427),y=e(50803),d=e(13956),x=e(95407),b=e(22429),D=e(8735);class C{loadScriptedDashboard(K){const U="public/dashboards/"+K.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,h.AI)().get(U,void 0,void 0,{validatePath:!0}).then(this.executeScript.bind(this)).then(F=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:F.data}),F=>{throw console.error("Script dashboard error "+F),m.lE.emit(o.r1.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),F})}executeScript(K){const U={dashboardSrv:(0,b.UA)(),datasourceSrv:(0,p.tR)()},I=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",K)(f.Ny.getSearchObject(),E.A,i,l(),c(),window,document,a(),a(),U);return(0,s.isFunction)(I)?new Promise(V=>{I(M=>{V({data:M})})}):{data:I}}}class P extends C{loadDashboard(K,U,F,I){const V=(0,v.sP)("v1");let M;if(K==="script"&&U)M=this.loadScriptedDashboard(U);else if(K==="snapshot"&&U)M=(0,D.s)().getSnapshot(U);else if(K==="public"&&F)M=g.IB.getPublicDashboardByUid(F).then(L=>L);else if(F){if(!I){const L=V.getDashboardFromCache(F);if(L)return Promise.resolve(L)}M=(0,d.n)("v1").getDashboardDTO(F,I).then(L=>L).catch(L=>{throw(0,h.NF)(L)&&!(L instanceof x.P)&&(console.error("Failed to load dashboard",L),L.isHandled=!0,L.status===404&&m.lE.emit(o.r1.alertError,["Dashboard not found"])),L})}else throw new Error("Dashboard uid or slug required");return M.then(L=>(u.A.addDashboardImpression(L.dashboard.uid),L)),M}loadSnapshot(K){const U=(0,D.s)().getSnapshot(K);return U.then(F=>(u.A.addDashboardImpression(F.dashboard.uid),F)),U}}class T extends C{loadDashboard(K,U,F,I){const V=(0,v.sP)("v2");let M;if(K==="script"&&U)M=this.loadScriptedDashboard(U).then(L=>y.Op.ensureV2Response(L));else if(K==="public"&&F)M=g.IB.getPublicDashboardByUid(F).then(L=>y.Op.ensureV2Response(L));else if(F){if(!I){const L=V.getDashboardFromCache(F);if(L)return Promise.resolve(L)}M=(0,d.n)("v2").getDashboardDTO(F,I).then(L=>L).catch(L=>{throw(0,h.NF)(L)&&!(L instanceof x.P)&&(console.error("Failed to load dashboard",L),L.isHandled=!0,L.status===404&&m.lE.emit(o.r1.alertError,["Dashboard not found"])),L})}else throw new Error("Dashboard uid or slug required");return M.then(L=>(u.A.addDashboardImpression(L.metadata.name),L)),M}loadSnapshot(K){const U=(0,D.s)().getSnapshot(K).then(F=>y.Op.ensureV2Response(F));return U.then(F=>(u.A.addDashboardImpression(F.metadata.name),F)),U}}let O=new P;const S=B=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},48767:(ne,A,e)=>{"use strict";e.d(A,{L4:()=>i});var n=e(74848),a=e(45861),s=e(63527),l=e(41654);const r="configured",c="Reset",i=({isConfigured:o,onReset:h,...f})=>(0,n.jsxs)(l.B,{children:[!o&&(0,n.jsx)(s.p,{...f,type:"password"}),o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{...f,type:"text",disabled:!0,value:r}),(0,n.jsx)(a.$n,{onClick:h,variant:"secondary",children:c})]})]})},48850:(ne,A,e)=>{"use strict";e.d(A,{KQ:()=>a});const n="12.2.1",a={layers:[]},s={allLayers:!0,id:"zero",lat:0,lon:0,noRepeat:!1,zoom:1};var l=(c=>(c.Details="details",c.None="none",c))(l||{}),r=(c=>(c.Coords="coords",c.Fit="fit",c.Zero="zero",c))(r||{})},49e3:(ne,A,e)=>{"use strict";e.d(A,{g:()=>i});var n=e(739),a=e(27359),s=e(22592),l=e(43173),r=e(45863),c=e(42942);class i extends r.tV.g{async resolveDataSource(h){return l.$.publicDashboardAccessToken?new c.X:super.resolveDataSource(h)}processEvents(h,f){if(l.$.publicDashboardAccessToken){const g={series:[],timeRange:(0,s.E2)(),state:f.state},u=(0,a.I)(f.events);return u.meta={...u.meta,dataTopic:n.QR.Annotations},g.annotations=[u],g}else return super.processEvents(h,f)}}},49256:(ne,A,e)=>{"use strict";e.d(A,{B:()=>n});var n=(a=>(a.ToggleSelection="select",a.AppendToSelection="append",a))(n||{})},49297:(ne,A,e)=>{"use strict";e.d(A,{I:()=>c,z:()=>r});var n=e(81160),a=e(36638),s=e(64761),l=e(1027);const r={id:s.F.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(i,o)=>h=>!i.include&&!i.exclude?h.pipe(l.W.operator({},o)):(typeof i.include?.options=="string"?i.include.options=i.include?.options:typeof i.include?.options?.pattern=="string"&&(i.include.options.pattern=i.include?.options.pattern),typeof i.exclude?.options=="string"?i.exclude.options=i.exclude?.options:typeof i.exclude?.options?.pattern=="string"&&(i.exclude.options.pattern=i.exclude?.options.pattern),h.pipe((0,n.T)(f=>{const g=i.include?(0,a.NS)(i.include):null,u=i.exclude?(0,a.NS)(i.exclude):null,E=[];for(const v of f){const p=[];for(let y=0;y<v.fields.length;y++){const d=v.fields[y];if(u){if(u(d,v,f))continue;g||p.push(d)}g&&g(d,v,f)&&p.push(d)}if(!p.length)continue;const m={...v,fields:p};E.push(m)}return E})))},c={id:s.F.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(i,o)=>h=>!i.include&&!i.exclude?h.pipe(l.W.operator({},o)):h.pipe((0,n.T)(f=>{const g=i.include?(0,a.Dq)(i.include):null,u=i.exclude?(0,a.Dq)(i.exclude):null,E=[];for(const v of f){if(u){if(u(v))continue;g||E.push(v)}g&&g(v)&&E.push(v)}return E}))}},49314:(ne,A,e)=>{"use strict";e.d(A,{q:()=>n});function n({baseUrl:a="/dashboards",paramName:s,paramValue:l,repoType:r}){const c=new URLSearchParams;s&&l&&c.set(s,l),r&&c.set("repo_type",r);const i=c.toString();return i?`${a}?${i}`:a}},49344:(ne,A,e)=>{"use strict";e.d(A,{b:()=>n});const n=(a,s,l)=>(a.splice(l,0,a.splice(s,1)[0]),a)},49602:(ne,A,e)=>{"use strict";e.d(A,{_:()=>r});var n=e(74848),a=e(92145),s=e(37386),l=e(63527);function r({value:c,defaultValue:i,name:o,placeholder:h="",onChange:f,testId:g,width:u,required:E,onBlur:v,grow:p,description:m,invalid:y,error:d,maxLength:x}){const b=(0,a.Bi)(o);return(0,n.jsx)(s.D,{label:o,description:m,invalid:y,error:d,htmlFor:b,children:(0,n.jsx)(l.p,{type:"text",id:b,placeholder:h,value:c,defaultValue:i,onChange:f,onBlur:v,width:p?void 0:u??30,"data-testid":g,maxLength:x,required:E})})}},49779:(ne,A,e)=>{"use strict";e.d(A,{h:()=>s});var n=e(74848),a=e(22803);const s=()=>(0,n.jsx)("span",{className:(0,a.css)({flex:1})})},49914:(ne,A,e)=>{"use strict";e.d(A,{m:()=>h});var n=e(74848),a=e(22803),s=e(92745),l=e(30703),r=e(45967),c=e(99887),i=e(63142),o=e(21241);const h=({user:g})=>{const u=(0,s.t)("alerting.alertVersionHistory.unknown","Unknown"),E=(0,o.J8)(),v=(0,i.of)(f),p=(0,n.jsx)(r.m,{content:(0,s.t)("alerting.alertVersionHistory.unknown-change-description","This update was made prior to the implementation of alert rule version history. The user who made the change is not tracked, but future changes will include the user"),children:(0,n.jsxs)("span",{children:[(0,n.jsxs)("span",{className:v.underline,children:[u," "]}),(0,n.jsx)(l.I,{name:"question-circle"})]})});if(!g)return p;const m=E[g.uid];return m||!g?(0,n.jsx)(r.m,{content:m.tooltipContent,children:(0,n.jsx)("span",{children:(0,n.jsx)(c.E,{className:v.badge,text:m.name,color:m.badgeColor,icon:m.icon})})}):g.name?g.name:g.uid?(0,s.t)("alerting.alertVersionHistory.user-id","User ID {{uid}}",{uid:g.uid}):p},f=()=>({badge:(0,a.css)({cursor:"help"}),underline:(0,a.css)({textDecoration:"underline dotted",textUnderlineOffset:"5px",cursor:"help"})})},49987:(ne,A,e)=>{"use strict";e.d(A,{H:()=>N});var n=e(74848),a=e(2543),s=e(96540),l=e(49785),r=e(92745),c=e(27489),i=e(37386),o=e(77824),h=e(34999),f=e(22787),g=e(45861),u=e(95506),E=e(73427),v=e(11257),p=e(92138),m=e(43173),y=e(36490),d=e(29043),x=e(4604),b=e(6262),D=(W=>(W.UNKNOWN="unknown-error",W.NAVIGATION="navigation-error",W))(D||{}),C=(W=>(W.FETCH_DASHBOARD="fetch-dashboard",W.SET_DASHBOARD_LS="set-dashboard-ls-error",W))(C||{});function P({panel:W,dashboardUid:R,openInNewTab:G,timeRange:w}){let _={meta:{},dashboard:{title:"",uid:"",panels:[W],schemaVersion:x.O2}};if(w){const ae=w.raw;_.dashboard.time={from:typeof ae.from=="string"?ae.from:ae.from.toISOString(),to:typeof ae.to=="string"?ae.to:ae.to.toISOString()}}try{d.A.setObject(b.us,_)}catch{return{error:"set-dashboard-ls-error",message:(0,r.t)("dashboard-scene.add-to-dashboard.message.could-panel-dashboard-please-again","Could not add panel to dashboard. Please try again.")}}const Q=T(R);if(G)return!e.g.open(m.$.appUrl+Q,"_blank")?(d.A.delete(b.us),{error:"navigation-error",message:(0,r.t)("dashboard-scene.add-to-dashboard.message.could-navigate-selected-dashboard-please-again","Could not navigate to the selected dashboard. Please try again.")}):void 0;y.Ny.push(p.I.stripBaseFromUrl(Q))}function T(W){return W?`d/${W}`:"dashboard/new"}var O=(W=>(W.NewDashboard="new-dashboard",W.ExistingDashboard="existing-dashboard",W))(O||{});function S({onClose:W,buildPanel:R,timeRange:G,options:w,children:_}){const[Q,ae]=(0,s.useState)(),{handleSubmit:q,control:k,formState:{errors:ee},watch:j}=(0,l.mN)({defaultValues:{saveTarget:"new-dashboard"}}),J=E.TP.hasPermission(v.w.DashboardsCreate),Z=E.TP.hasPermission(v.w.DashboardsWrite),te=[];J&&te.push({label:(0,r.t)("dashboard-scene.add-to-dashboard-form.label.new-dashboard","New dashboard"),value:"new-dashboard"}),Z&&te.push({label:(0,r.t)("dashboard-scene.add-to-dashboard-form.label.existing-dashboard","Existing dashboard"),value:"existing-dashboard"});const se=te.length>1?j("saveTarget"):te[0].value,ie=(ce,re)=>{ae(void 0);const ue=re.saveTarget==="existing-dashboard"?re.dashboardUid:void 0,X=R(w);(0,c.rR)("e_2_d_submit",{newTab:ce,saveTarget:re.saveTarget,queries:X.targets});const le=P({dashboardUid:ue,panel:X,openInNewTab:ce,timeRange:G});if(le){ae(le);return}W()};return(0,s.useEffect)(()=>{(0,c.rR)("e_2_d_open")},[]),(0,n.jsxs)("form",{children:[_,te.length>1&&(0,n.jsx)(l.xI,{control:k,render:({field:{ref:ce,...re}})=>(0,n.jsx)(i.D,{label:(0,r.t)("dashboard-scene.add-to-dashboard-form.label-target-dashboard","Target dashboard"),description:(0,r.t)("dashboard-scene.add-to-dashboard-form.description-choose-where-to-add-the-panel","Choose where to add the panel."),children:(0,n.jsx)(o.z,{options:te,...re,id:"e2d-save-target"})}),name:"saveTarget"}),se==="existing-dashboard"&&(0,n.jsx)(l.xI,{render:({field:{ref:ce,value:re,onChange:ue,...X}})=>(0,n.jsx)(i.D,{label:(0,r.t)("dashboard-scene.add-to-dashboard-form.label-dashboard","Dashboard"),description:(0,r.t)("dashboard-scene.add-to-dashboard-form.description-select-which-dashboard-panel-created","Select in which dashboard the panel will be created."),error:ee.dashboardUid?.message,invalid:!!ee.dashboardUid,children:(0,n.jsx)(u.b,{...X,inputId:"e2d-dashboard-picker",defaultOptions:!0,onChange:le=>ue(le?.uid)})}),control:k,name:"dashboardUid",shouldUnregister:!0,rules:{required:{value:!0,message:(0,r.t)("dashboard-scene.add-to-dashboard-form.message.this-field-is-required","This field is required.")}}}),Q&&(0,n.jsx)(h.F,{severity:"error",title:(0,r.t)("dashboard-scene.add-to-dashboard-form.title-error-adding-the-panel","Error adding the panel"),children:Q.message}),(0,n.jsxs)(f.a.ButtonRow,{children:[(0,n.jsx)(g.$n,{type:"reset",onClick:W,fill:"outline",variant:"secondary",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.add-to-dashboard-form.cancel",children:"Cancel"})}),(0,n.jsx)(g.$n,{type:"submit",variant:"secondary",onClick:q((0,a.partial)(ie,!0)),icon:"external-link-alt",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.add-to-dashboard-form.open-in-new-tab",children:"Open in new tab"})}),(0,n.jsx)(g.$n,{type:"submit",variant:"primary",onClick:q((0,a.partial)(ie,!1)),icon:"apps",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.add-to-dashboard-form.open-dashboard",children:"Open dashboard"})})]})]})}function B(W){}var K=e(52763),U=e(20718);function F(W,R){let G=[];return W==="table"&&R.panelState?.logs?.columns&&(R.panelState.logs?.labelFieldName&&G.push({id:"extractFields",options:{source:R.panelState.logs.labelFieldName}}),G.push({id:"organize",options:{indexByName:Object.values(R.panelState.logs.columns).reduce((w,_,Q)=>({...w,[_]:Q}),{}),includeByName:Object.values(R.panelState.logs.columns).reduce((w,_)=>({...w,[_]:!0}),{})}})),G}function I(W){const R=L(W.queries,W.queryResponse,W?.panelState);return{targets:W.queries,type:R,title:(0,r.t)("explore.build-dashboard-panel-from-explore-state.title.new-panel","New Panel"),gridPos:{x:0,y:0,w:12,h:8},datasource:W.datasource,transformations:F(R,W)}}const V=W=>!W.hide,M=W=>R=>R.refId===W;function L(W,R,G){for(const{refId:w}of W.filter(V)){const _=M(w);if(R.flameGraphFrames.some(_))return"flamegraph";if(R.graphFrames.some(_))return"timeseries";if(R.logsFrames.some(_))return G?.logs?.visualisationType?G.logs.visualisationType:"logs";if(R.nodeGraphFrames.some(_))return"nodeGraph";if(R.traceFrames.some(_))return"traces";if(R.customFrames.some(_))return R.customFrames.find(_)?.meta?.preferredVisualisationPluginId??"table"}return"table"}function N(W){const{exploreId:R,onClose:G}=W,w=(0,K.d4)((0,U.qq)(R)),_=()=>I({datasource:w.datasourceInstance?.getRef(),queries:w.queries,queryResponse:w.queryResponse,panelState:w?.panelsState});return(0,n.jsx)(S,{onClose:G,buildPanel:_,timeRange:w.range,options:void 0})}},50072:(ne,A,e)=>{"use strict";e.d(A,{A:()=>o});var n=e(74848),a=e(96540),s=e(92745),l=e(30703),r=e(45861),c=e(41654);const o=(0,a.forwardRef)(function(f,g){return(0,n.jsx)(r.$n,{variant:"secondary",size:"sm",type:"button","aria-label":f.title??(0,s.t)("alerting.more-button.aria-label","More"),ref:g,...f,children:(0,n.jsxs)(c.B,{direction:"row",alignItems:"center",gap:0,children:[f.title??(0,n.jsx)(s.x6,{i18nKey:"alerting.more-button.button-text",children:"More"}),(0,n.jsx)(l.I,{name:"angle-down"})]})})})},50201:(ne,A,e)=>{"use strict";e.d(A,{p:()=>D});var n=e(74848),a=e(22803),s=e(55494),l=e(63142),r=e(31286),c=e(41654),i=e(66404),o=e(36348);const h=({width:T="auto",height:O})=>{const S=(0,l.of)(f);return(0,n.jsx)(s.default,{src:o,className:S.svg,height:O,width:T})};h.displayName="GrotCTA";const f=T=>({svg:(0,a.css)({"#grot-cta-cactus-1, #grot-cta-cactus-2":{fill:T.isDark?"#58558c":"#c9c5f4"}})});var g=e(96540),u=e(22687);const E=-20,v=5,p=-5,m=5,y=({width:T="auto",height:O})=>{const S=(0,g.useRef)(null),B=(0,l.of)(d);return(0,g.useEffect)(()=>{const K=U=>{if(window.matchMedia("(prefers-reduced-motion: reduce").matches)return;const F=S.current?.querySelector("#grot-not-found-arm"),I=S.current?.querySelector("#grot-not-found-magnifier"),{clientX:V,clientY:M}=U,{innerWidth:L,innerHeight:N}=window,W=M/N,R=V/L,G=x(W,E,v),w=x(R,p,m);window.requestAnimationFrame(()=>{F?.setAttribute("style",`transform: rotate(${G}deg) translateX(${w}%)`),I?.setAttribute("style",`transform: rotate(${G}deg) translateX(${w}%)`)})};return window.addEventListener("mousemove",K),()=>{window.removeEventListener("mousemove",K)}},[]),(0,n.jsx)(s.default,{innerRef:S,src:u,className:B.svg,height:O,width:T})};y.displayName="GrotNotFound";const d=T=>({svg:(0,a.css)({"#grot-not-found-arm, #grot-not-found-magnifier":{transformOrigin:"center"}})}),x=(T,O,S)=>T*(S-O)+O;var b=e(9886);const D=({button:T,children:O,image:S,message:B,hideImage:K=!1,variant:U,role:F})=>{const I=(0,l.of)(P),V=S??C(U);return(0,n.jsx)(r.a,{paddingY:4,display:"flex",direction:"column",alignItems:"center",role:F,children:(0,n.jsxs)("div",{className:I.container,children:[!K&&V,(0,n.jsxs)(c.B,{direction:"column",alignItems:"center",children:[(0,n.jsx)(i.E,{variant:"h4",textAlignment:"center",children:B}),O&&(0,n.jsx)(i.E,{color:"secondary",textAlignment:"center",children:O})]}),T]})})};function C(T){switch(T){case"call-to-action":return(0,n.jsx)(h,{width:300});case"not-found":return(0,n.jsx)(y,{width:300});case"completed":return(0,n.jsx)(s.default,{src:b,width:300});default:throw new Error(`Unknown variant: ${T}`)}}const P=T=>({container:(0,a.css)({display:"flex",flexDirection:"column",alignItems:"center",gap:T.spacing(4),maxWidth:"600px"})})},50275:(ne,A,e)=>{"use strict";e.d(A,{B:()=>l});var n=e(74848),a=e(96540),s=e(22658);class l extends a.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,a.createRef)(),this.renderJson=()=>{const{json:c,config:i,open:o,onDidRender:h}=this.props,f=this.wrapperRef.current,g=new s.O(c,o,i);f.hasChildNodes()?f.replaceChild(g.render(),f.lastChild):f.appendChild(g.render()),h&&h(g.json)}}static{this.defaultProps={open:3,config:{animateOpen:!0}}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:c}=this.props;return(0,n.jsx)("div",{className:c,ref:this.wrapperRef})}}},50426:(ne,A,e)=>{"use strict";e.d(A,{l:()=>r});var n=e(74848),a=e(22803),s=e(96540),l=e(49785);function r({defaultValues:c,onSubmit:i,validateOnMount:o=!1,validateFieldsOnMount:h,children:f,validateOn:g="onSubmit",maxWidth:u=600,...E}){const{handleSubmit:v,trigger:p,formState:m,...y}=(0,l.mN)({mode:g,defaultValues:c});return(0,s.useEffect)(()=>{o&&p(h)},[p,h,o]),(0,n.jsx)("form",{className:(0,a.css)({maxWidth:u!=="none"?u+"px":u,width:"100%"}),onSubmit:v(i),...E,children:f({errors:m.errors,formState:m,trigger:p,...y})})}},50803:(ne,A,e)=>{"use strict";e.d(A,{Ln:()=>B,Op:()=>p,Sb:()=>G,nV:()=>O});var n=e(43173),a=e(21275),s=e(11393),l=e(5857),r=e(75735),c=e(2505),i=e(78320),o=e(84500),h=e(62265),f=e(3281),g=e(39508),u=e(60171);function E(w){if((0,u.HG)(w))return w;let _;(0,u.b_)(w)?_=w.spec:_=w.dashboard;const Q=(0,s.ft)(),ae=(0,s.xE)(),[q,k]=m(_.panels||[]),ee=U(_.templating?.list||[]),j=F(_.annotations?.list||[]);let J,Z,te,se;(0,u.b_)(w)?(J=w.access,Z={...w.metadata.annotations,[r.hm]:_.gnetId??void 0},se=w.metadata.creationTimestamp,te={[r.Y5]:w.metadata.labels?.[r.Y5]}):(J={url:w.meta.url,slug:w.meta.slug,canSave:w.meta.canSave,canEdit:w.meta.canEdit,canDelete:w.meta.canDelete,canShare:w.meta.canShare,canStar:w.meta.canStar,canAdmin:w.meta.canAdmin,annotationsPermissions:w.meta.annotationsPermissions},Z={[r.hc]:w.meta.createdBy,[r.Qu]:w.meta.updatedBy,[r.xU]:w.meta.updated,[r.ew]:w.meta.folderUid,[r.hX]:w.meta.slug},_.gnetId&&(Z[r.hm]=_.gnetId),w.meta.isSnapshot&&(Z[r.qw]="true"),se=w.meta.created,te={[r.Y5]:_.id?.toString()??void 0}),Z?.[r.qw]&&(Z[r.UL]=_.snapshot?.originalUrl);const ie={title:_.title,description:_.description,tags:_.tags??[],cursorSync:(0,g.k6)(_.graphTooltip),preload:_.preload||ae.preload,liveNow:_.liveNow,editable:_.editable,revision:_.revision,timeSettings:{from:_.time?.from||Q.from,to:_.time?.to||Q.to,timezone:_.timezone||Q.timezone,autoRefresh:_.refresh||Q.autoRefresh,autoRefreshIntervals:_.timepicker?.refresh_intervals||Q.autoRefreshIntervals,fiscalYearStartMonth:_.fiscalYearStartMonth||Q.fiscalYearStartMonth,hideTimepicker:_.timepicker?.hidden||Q.hideTimepicker,quickRanges:_.timepicker?.quick_ranges,weekStart:x(_.weekStart,Q.weekStart),nowDelay:_.timepicker?.nowDelay||Q.nowDelay},links:_.links||[],annotations:j,variables:ee,elements:q,layout:k};return{apiVersion:"v2beta1",kind:"DashboardWithAccessInfo",metadata:{creationTimestamp:se||"",name:_.uid,resourceVersion:_.version?.toString()||"0",annotations:Z,labels:te},spec:ie,access:J}}function v(w){if(!(0,u.b_)(w))return w;const _=w.spec;return(0,u._5)(_)?{meta:{...w.access,isNew:!1,isFolder:!1,uid:w.metadata.name,k8s:w.metadata,version:w.metadata.generation},dashboard:_}:{meta:{created:w.metadata.creationTimestamp,createdBy:w.metadata.annotations?.[r.hc]??"",updated:w.metadata.annotations?.[r.xU],updatedBy:w.metadata.annotations?.[r.Qu],folderUid:w.metadata.annotations?.[r.ew],slug:w.metadata.annotations?.[r.hX],url:w.access.url,canAdmin:w.access.canAdmin,canDelete:w.access.canDelete,canEdit:w.access.canEdit,canSave:w.access.canSave,canShare:w.access.canShare,canStar:w.access.canStar,annotationsPermissions:w.access.annotationsPermissions},dashboard:G(_,w.metadata)}}const p={ensureV2Response:E,ensureV1Response:v};function m(w){const _={},Q={kind:"GridLayout",spec:{items:[]}};if(!w)return[_,Q];if(w.some(d))return y(w);for(const ae of w){const[q,k]=P(ae);_[k]=q,Q.spec.items.push(D(ae,k))}return[_,Q]}function y(w){let _=null,Q=0;const ae={},q={kind:"RowsLayout",spec:{rows:[]}};for(const k of w)if(d(k)){Q=k.gridPos.y,_&&q.spec.rows.push(_);const ee=[];for(const j of k.panels||[]){const[J,Z]=P(j);ae[Z]=J,ee.push(D(j,Z,C(j,Q)))}_=b(k,ee)}else{const[ee,j]=P(k);if(ae[j]=ee,_)if(_.spec.layout.kind==="GridLayout")_.spec.layout.spec.items.push(D(k,j,C(k,Q)));else throw new Error("RowsLayoutRow from legacy row must have a GridLayout");else{const J={kind:"GridLayout",spec:{items:[D(k,j)]}};Q=-1,_={kind:"RowsLayoutRow",spec:{collapse:!1,title:"",hideHeader:!0,layout:J}}}}return _&&q.spec.rows.push(_),[ae,q]}function d(w){return w.type==="row"}function x(w,_){return!w||!(0,l.rE)(w)?_:w}function b(w,_){return{kind:"RowsLayoutRow",spec:{collapse:w.collapsed,title:w.title??"",repeat:w.repeat?{value:w.repeat,mode:"variable"}:void 0,layout:{kind:"GridLayout",spec:{items:_}}}}}function D(w,_,Q){return{kind:"GridLayoutItem",spec:{x:w.gridPos.x,y:Q??w.gridPos.y,width:w.gridPos.w,height:w.gridPos.h,repeat:w.repeat?{value:w.repeat,mode:"variable",direction:w.repeatDirection,maxPerRow:w.maxPerRow}:void 0,element:{kind:"ElementReference",name:_}}}}function C(w,_){return w.gridPos.y-_-i.o}function P(w){const _=`panel-${w.id}`;return w.libraryPanel?[{kind:"LibraryPanel",spec:{libraryPanel:{uid:w.libraryPanel.uid,name:w.libraryPanel.name},id:w.id,title:w.title??""}},_]:[B(w),_]}function T(){return(0,h.Ic)()?.type??"grafana"}function O(){const w=(0,h.Ic)()??{type:"grafana",uid:"-- Grafana --"};if(w.uid&&!w.apiVersion){const _=n.$.datasources[w.uid];w.apiVersion=_.apiVersion??void 0}return{apiVersion:w.apiVersion,type:w.type,uid:w.uid}}function S(w,_){return w.map(Q=>{const{refId:ae,hide:q,datasource:k,...ee}=Q;return{kind:"PanelQuery",spec:{refId:Q.refId,hidden:Q.hide??!1,query:{kind:"DataQuery",version:(0,s.iM)().version,group:Q.datasource?.type||_.type,datasource:{name:Q.datasource?.uid||_.uid},spec:{...ee}}}}})}function B(w){const _=S(w.targets||[],w.datasource||O()),Q=K(w.transformations||[]);return{kind:"Panel",spec:{title:w.title||"",description:w.description||"",vizConfig:{kind:"VizConfig",group:w.type,version:w.pluginVersion,spec:{fieldConfig:w.fieldConfig||(0,s.bt)(),options:w.options}},links:w.links?.map(q=>({title:q.title,url:q.url||"",targetBlank:q.targetBlank}))||[],id:w.id,data:{kind:"QueryGroup",spec:{queries:_,transformations:Q,queryOptions:{cacheTimeout:w.cacheTimeout,maxDataPoints:w.maxDataPoints,interval:w.interval,hideTimeOverride:w.hideTimeOverride,queryCachingTTL:w.queryCachingTTL,timeFrom:w.timeFrom,timeShift:w.timeShift}}}}}}function K(w){return w.map(_=>({kind:_.id,spec:{..._,topic:(0,g.MM)(_.topic)}}))}function U(w){const _=[];for(const Q of w){const ae={name:Q.name,label:Q.label,...Q.description&&{description:Q.description},skipUrlSync:!!Q.skipUrlSync,hide:(0,g.NB)(Q.hide)};let q,k;switch(Q.type){case"query":let ee=Q.query||{};typeof ee=="string"&&(console.warn("Query variable query is a string which is deprecated in the schema v2. It should extend DataQuery"),ee={[g.sB]:ee});const j={kind:"QueryVariable",spec:{...ae,multi:!!Q.multi,includeAll:!!Q.includeAll,...Q.allValue&&{allValue:Q.allValue},current:{value:Q.current?.value,text:Q.current?.text},options:Q.options||[],refresh:(0,g.qJ)(Q.refresh),...Q.datasource&&{datasource:Q.datasource},regex:Q.regex||"",sort:(0,g.LY)(Q.sort),query:{kind:"DataQuery",version:(0,s.iM)().version,group:Q.datasource?.type??T(),datasource:{name:Q.datasource?.uid},spec:ee},allowCustomValue:Q.allowCustomValue??!0}};_.push(j);break;case"datasource":let J=T();Q.query&&typeof Q.query=="string"&&(J=Q.query);const Z={kind:"DatasourceVariable",spec:{...ae,multi:!!Q.multi,includeAll:!!Q.includeAll,...Q.allValue&&{allValue:Q.allValue},current:{value:Q.current.value,text:Q.current.text},options:Q.options||[],refresh:(0,g.qJ)(Q.refresh),pluginId:J,regex:Q.regex||"",allowCustomValue:Q.allowCustomValue??!0}};_.push(Z);break;case"custom":const te={kind:"CustomVariable",spec:{...ae,query:Q.query,current:{value:Q.current.value,text:Q.current.text},options:Q.options,multi:Q.multi,includeAll:Q.includeAll,...Q.allValue&&{allValue:Q.allValue},allowCustomValue:Q.allowCustomValue??!0}};_.push(te);break;case"adhoc":q=Q.datasource||O(),k=q.type??T();const se={kind:"AdhocVariable",group:k,spec:{...ae,baseFilters:(0,o.Gs)(Q.baseFilters)||[],filters:(0,o.Gs)(Q.filters)||[],defaultKeys:Q.defaultKeys||[],allowCustomValue:Q.allowCustomValue??!0}};q.uid&&(se.datasource={name:q.uid}),_.push(se);break;case"constant":const ie={kind:"ConstantVariable",spec:{...ae,current:{value:Q.current.value,text:Q.current.value},query:Q.query}};_.push(ie);break;case"interval":const ce={kind:"IntervalVariable",spec:{...ae,current:{value:Q.current.value,text:Q.current.value},query:Q.query,refresh:"onTimeRangeChanged",options:Q.options,auto:Q.auto,auto_min:Q.auto_min,auto_count:Q.auto_count}};_.push(ce);break;case"textbox":const re={kind:"TextVariable",spec:{...ae,current:{value:Q.current.value,text:Q.current.value},query:Q.query}};_.push(re);break;case"groupby":q=Q.datasource||O(),k=q.type??T();const ue={kind:"GroupByVariable",group:k,spec:{...ae,options:Q.options,current:{value:Q.current.value,text:Q.current.text},multi:Q.multi}};q.uid&&(ue.datasource={name:q.uid}),_.push(ue);break;default:console.error(`Variable transformation not implemented: ${Q.type}`)}}return _}function F(w){return w.map(_=>({kind:"AnnotationQuery",spec:{name:_.name,..._.datasource&&{datasource:_.datasource},enable:_.enable,hide:!!_.hide,iconColor:_.iconColor,builtIn:!!_.builtIn,query:{kind:"DataQuery",version:(0,s.iM)().version,group:_.datasource?.type||T(),datasource:{name:_.datasource?.uid},spec:{..._.target}},filter:_.filter}}))}function I(w){const _=[];for(const Q of w){const ae={name:Q.spec.name,label:Q.spec.label,...Q.spec.description&&{description:Q.spec.description},skipUrlSync:Q.spec.skipUrlSync,hide:(0,f.cc)(Q.spec.hide),type:R(Q)};switch(Q.kind){case"QueryVariable":const q={...ae,current:Q.spec.current,options:Q.spec.options,query:g.sB in Q.spec.query.spec?Q.spec.query.spec[g.sB]:Q.spec.query.spec,datasource:{type:Q.spec.query?.spec.group,uid:Q.spec.query?.spec.datasource?.name},sort:(0,f.ES)(Q.spec.sort),refresh:(0,f.tH)(Q.spec.refresh),regex:Q.spec.regex,allValue:Q.spec.allValue,includeAll:Q.spec.includeAll,multi:Q.spec.multi,definition:Q.spec.definition};_.push(q);break;case"DatasourceVariable":const k={...ae,current:Q.spec.current,options:[],regex:Q.spec.regex,refresh:(0,f.tH)(Q.spec.refresh),query:Q.spec.pluginId,multi:Q.spec.multi,allValue:Q.spec.allValue,includeAll:Q.spec.includeAll};_.push(k);break;case"CustomVariable":const ee={...ae,current:{text:Q.spec.current.value,value:Q.spec.current.value},options:Q.spec.options,query:Q.spec.query,multi:Q.spec.multi,allValue:Q.spec.allValue,includeAll:Q.spec.includeAll};_.push(ee);break;case"ConstantVariable":const j={...ae,current:{text:Q.spec.current.value,value:Q.spec.current.value},hide:(0,f.cc)(Q.spec.hide),query:Q.spec.current.value};_.push(j);break;case"IntervalVariable":const J={...ae,current:{text:Q.spec.current.value,value:Q.spec.current.value},hide:(0,f.cc)(Q.spec.hide),query:Q.spec.query,refresh:(0,f.tH)(Q.spec.refresh),options:Q.spec.options,auto:Q.spec.auto,auto_min:Q.spec.auto_min,auto_count:Q.spec.auto_count};_.push(J);break;case"TextVariable":const Z={text:Q.spec.current.value,value:Q.spec.current.value},te={...ae,current:{text:Q.spec.current.value,value:Q.spec.current.value},options:[{...Z,selected:!0}],query:Q.spec.query};_.push(te);break;case"GroupByVariable":const se={...ae,datasource:{uid:Q.datasource?.name,type:Q.group},current:Q.spec.current,options:Q.spec.options};_.push(se);break;case"AdhocVariable":const ie={...ae,datasource:{uid:Q.datasource?.name,type:Q.group},baseFilters:Q.spec.baseFilters,filters:Q.spec.filters,defaultKeys:Q.spec.defaultKeys};_.push(ie);break;default:console.error(`Variable transformation not implemented: ${Q}`)}}return _}function V(w,_){const Q=[];let ae=0;if(_.kind!=="GridLayout")throw new Error("Cannot convert non-GridLayout layout to v1");for(const q of _.spec.items){const k=w[q.spec.element.name],ee=M(k,q);Q.push(ee),(ee.id??0>ae)&&(ae=ee.id??0)}for(const q of Q)q.type==="row"&&q.id===-1&&(q.id=++ae);return Q}function M(w,_,Q){const{x:ae,y:q,width:k,height:ee,repeat:j}=_?.spec||{x:0,y:0,width:0,height:0},J={x:ae,y:Q??q,w:k,h:ee};if(w.kind==="Panel"){const Z=w.spec;return{id:Z.id,type:Z.vizConfig.group,title:Z.title,description:Z.description,fieldConfig:L(Z.vizConfig.spec.fieldConfig),options:Z.vizConfig.spec.options,pluginVersion:Z.vizConfig.version,links:Z.links?.map(te=>({title:te.title,url:te.url,...te.targetBlank&&{targetBlank:te.targetBlank}}))||[],targets:Z.data.spec.queries.map(te=>({refId:te.spec.refId,hide:te.spec.hidden,datasource:{uid:te.spec.query.spec.datasource?.uid,type:te.spec.query.spec.group},...te.spec.query.spec})),transformations:Z.data.spec.transformations.map(te=>te.spec),gridPos:J,cacheTimeout:Z.data.spec.queryOptions.cacheTimeout,maxDataPoints:Z.data.spec.queryOptions.maxDataPoints,interval:Z.data.spec.queryOptions.interval,hideTimeOverride:Z.data.spec.queryOptions.hideTimeOverride,queryCachingTTL:Z.data.spec.queryOptions.queryCachingTTL,timeFrom:Z.data.spec.queryOptions.timeFrom,timeShift:Z.data.spec.queryOptions.timeShift,transparent:Z.transparent,...j?.value&&{repeat:j.value},...j?.direction&&{repeatDirection:j.direction},...j?.maxPerRow&&{maxPerRow:j.maxPerRow}}}else if(w.kind==="LibraryPanel"){const Z=w.spec;return{id:Z.id,title:Z.title,gridPos:J,libraryPanel:{uid:Z.libraryPanel.uid,name:Z.libraryPanel.name},type:"library-panel-ref"}}else throw new Error(`Unknown element kind: ${w}`)}function L(w){const _=ae=>{switch(ae){case"absolute":return a.Ol.Absolute;case"percentage":return a.Ol.Percentage;default:return a.Ol.Absolute}},Q={...w.defaults};return w.defaults.mappings&&(Q.mappings=w.defaults.mappings.map(ae=>{switch(ae.type){case"value":return{...ae,type:a.dM.ValueToText};case"range":return{...ae,type:a.dM.RangeToText};case"regex":return{...ae,type:a.dM.RegexToText};case"special":return{...ae,options:{...ae.options,match:W(ae.options.match)},type:a.dM.SpecialValue};default:return ae}})),w.defaults.thresholds&&(Q.thresholds={...w.defaults.thresholds,mode:_(w.defaults.thresholds.mode)}),w.defaults.color?.mode&&(Q.color={...w.defaults.color,mode:N(w.defaults.color.mode)}),{...w,defaults:Q}}function N(w){switch(w){case"thresholds":return a.Yb.Thresholds;case"palette-classic":return a.Yb.PaletteClassic;case"palette-classic-by-name":return a.Yb.PaletteClassicByName;case"continuous-GrYlRd":return a.Yb.ContinuousGrYlRd;case"continuous-RdYlGr":return a.Yb.ContinuousRdYlGr;case"continuous-BlYlRd":return a.Yb.ContinuousBlYlRd;case"continuous-YlRd":return a.Yb.ContinuousYlRd;case"continuous-BlPu":return a.Yb.ContinuousBlPu;case"continuous-YlBl":return a.Yb.ContinuousYlBl;case"continuous-blues":return a.Yb.ContinuousBlues;case"continuous-reds":return a.Yb.ContinuousReds;case"continuous-greens":return a.Yb.ContinuousGreens;case"continuous-purples":return a.Yb.ContinuousPurples;case"fixed":return a.Yb.Fixed;case"shades":return a.Yb.Shades;default:return a.Yb.Thresholds}}function W(w){switch(w){case"true":return a.WL.True;case"false":return a.WL.False;case"null":return a.WL.Null;case"nan":return a.WL.NaN;case"null+nan":return a.WL.NullAndNan;case"empty":return a.WL.Empty;default:throw new Error(`Unknown match type: ${w}`)}}function R(w){switch(w.kind){case"QueryVariable":return"query";case"DatasourceVariable":return"datasource";case"CustomVariable":return"custom";case"ConstantVariable":return"constant";case"IntervalVariable":return"interval";case"TextVariable":return"textbox";case"GroupByVariable":return"groupby";case"AdhocVariable":return"adhoc";default:throw new Error(`Unknown variable type: ${w}`)}}function G(w,_){const Q=w.annotations.map(c.U),ae=I(w.variables),q=V(w.elements,w.layout);return{uid:_.name,title:w.title,description:w.description,tags:w.tags,schemaVersion:40,graphTooltip:(0,f.Y_)(w.cursorSync),preload:w.preload,liveNow:w.liveNow,editable:w.editable,gnetId:_.annotations?.[r.hm],revision:w.revision,time:{from:w.timeSettings.from,to:w.timeSettings.to},timezone:w.timeSettings.timezone,refresh:w.timeSettings.autoRefresh,timepicker:{refresh_intervals:w.timeSettings.autoRefreshIntervals,hidden:w.timeSettings.hideTimepicker,quick_ranges:w.timeSettings.quickRanges,nowDelay:w.timeSettings.nowDelay},fiscalYearStartMonth:w.timeSettings.fiscalYearStartMonth,weekStart:w.timeSettings.weekStart,version:_.generation,links:w.links,annotations:{list:Q},panels:q,templating:{list:ae}}}},51115:(ne,A,e)=>{"use strict";e.d(A,{I:()=>i});var n=e(74848),a=e(46942),s=e.n(a),l=e(30703),r=e(45967);const i=({children:o,isFocused:h,isInvalid:f,className:g,htmlFor:u,tooltip:E,width:v,interactive:p,...m})=>{const y=s()(g,`gf-form-label width-${v||"10"}`,{"gf-form-label--is-focused":h,"gf-form-label--is-invalid":f});return(0,n.jsxs)("label",{className:y,...m,htmlFor:u,children:[o,E&&(0,n.jsx)(r.m,{placement:"top",content:E,theme:"info",interactive:p,children:(0,n.jsx)(l.I,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})})]})}},51155:(ne,A,e)=>{"use strict";e.d(A,{l:()=>T,u:()=>C});var n=e(74848),a=e(5805),s=e(51898),l=e(92745),r=e(68143),c=e(45863),i=e(47931),o=e(22787),h=e(45861),f=e(41654),g=e(37386),u=e(77824),E=e(63527),v=e(6890),p=e(64762),m=e(58662),y=e(8735),d=e(8535),x=e(70030),b=e(23289);const D=s.Tp.pages.ShareDashboardModal.SnapshotScene,C=()=>{const S={label:(0,l.t)("share-modal.snapshot.expire-week","1 Week"),value:604800};return[{label:(0,l.t)("share-modal.snapshot.expire-hour","1 Hour"),value:3600},{label:(0,l.t)("share-modal.snapshot.expire-day","1 Day"),value:3600*24},S,{label:(0,l.t)("share-modal.snapshot.expire-never","Never"),value:0}]},P=()=>C()[2];class T extends c.Bs{constructor(B){super({...B,snapshotName:B.dashboardRef.resolve().state.title,selectedExpireOption:P()}),this.tabId=m.wr.snapshot,this.onSnasphotNameChange=K=>{this.setState({snapshotName:K})},this.onExpireChange=K=>{this.setState({selectedExpireOption:C().find(U=>U.value===K)})},this.onSnapshotCreate=async(K=!1)=>{const{selectedExpireOption:U}=this.state,F=this.prepareSnapshot(),I={dashboard:F,name:F.title,expires:U?.value,external:K};try{const V=await(0,y.s)().create(I);return(0,d.JD)((0,v.dx)((0,p.tZ)((0,l.t)("snapshot.share.success-creation","Your snapshot has been created")))),V}finally{K?b.c.publishSnapshotClicked({expires:I.expires,shareResource:(0,m.hD)(this.state.panelRef)}):b.c.publishSnapshotLocalClicked({expires:I.expires,shareResource:(0,m.hD)(this.state.panelRef)})}},this.onSnapshotDelete=async K=>{const U=await(0,r.AI)().get(K);return(0,d.JD)((0,v.dx)((0,p.tZ)((0,l.t)("snapshot.share.success-delete","Your snapshot has been deleted")))),U},this.addActivationHandler(()=>{this._onActivate()})}static{this.Component=O}_onActivate(){(0,y.s)().getSharingOptions().then(B=>{this.isActive&&this.setState({snapshotSharingOptions:B})})}getTabLabel(){return(0,l.t)("share-modal.tab-title.snapshot","Snapshot")}prepareSnapshot(){const B=c.jh.getTimeRange(this),{dashboardRef:K,panelRef:U}=this.state,F=(0,x.Uy)(K.resolve(),!0);return(0,x.c)(this.state.snapshotName.trim()||"",B.state.value,F,U?.resolve())}}function O({model:S}){const{snapshotName:B,selectedExpireOption:K,modalRef:U,snapshotSharingOptions:F}=S.useState(),[I,V]=(0,a.default)(async(N=!1)=>S.onSnapshotCreate(N)),[M,L]=(0,a.default)(async N=>await(0,r.AI)().get(N));return M.value?(0,n.jsx)(l.x6,{i18nKey:"share-modal.snapshot.deleted-message",children:"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches."}):(0,n.jsxs)(n.Fragment,{children:[!I.value&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:(0,n.jsx)(l.x6,{i18nKey:"share-modal.snapshot.info-text-1",children:"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard."})}),(0,n.jsx)("p",{children:(0,n.jsxs)(l.x6,{i18nKey:"share-modal.snapshot.info-text-2",children:["Keep in mind, your snapshot ",(0,n.jsx)("em",{children:"can be viewed by anyone"})," that has the link and can access the URL. Share wisely."]})})]}),(0,n.jsx)(g.D,{label:(0,l.t)("share-modal.snapshot.name","Snapshot name"),children:(0,n.jsx)(E.p,{id:"snapshot-name-input",width:30,defaultValue:B,onBlur:N=>S.onSnasphotNameChange(N.target.value)})}),(0,n.jsx)(g.D,{label:(0,l.t)("share-modal.snapshot.expire","Expire"),children:(0,n.jsx)(u.z,{id:"expire-select-input",options:C(),value:K?.value,onChange:S.onExpireChange})}),(0,n.jsxs)(o.a.ButtonRow,{children:[(0,n.jsx)(h.$n,{variant:"secondary",onClick:()=>{U?.resolve().onDismiss()},fill:"outline",children:(0,n.jsx)(l.x6,{i18nKey:"share-modal.snapshot.cancel-button",children:"Cancel"})}),F?.externalEnabled&&(0,n.jsx)(h.$n,{variant:"secondary",disabled:I.loading,onClick:()=>V(!0),children:F?.externalSnapshotName}),(0,n.jsx)(h.$n,{variant:"primary",disabled:I.loading,onClick:()=>V(),"data-testid":D.PublishSnapshot,children:(0,n.jsx)(l.x6,{i18nKey:"share-modal.snapshot.local-button",children:"Publish Snapshot"})})]})]}),I.value&&(0,n.jsxs)(f.B,{direction:"column",gap:0,children:[(0,n.jsx)(g.D,{label:(0,l.t)("share-modal.snapshot.url-label","Snapshot URL"),children:(0,n.jsx)(E.p,{"data-testid":D.CopyUrlInput,id:"snapshot-url-input",value:I.value.url,readOnly:!0,addonAfter:(0,n.jsx)(i.b,{"data-testid":D.CopyUrlButton,icon:"copy",variant:"primary",getText:()=>I.value.url,children:(0,n.jsx)(l.x6,{i18nKey:"share-modal.snapshot.copy-link-button",children:"Copy"})})})}),(0,n.jsxs)("div",{style:{alignSelf:"flex-end",padding:"5px"},children:[(0,n.jsx)(l.x6,{i18nKey:"share-modal.snapshot.mistake-message",children:"Did you make a mistake? "}),"\xA0",(0,n.jsx)(h.$n,{fill:"outline",size:"md",variant:"destructive",onClick:()=>{L(I.value.deleteUrl)},children:(0,n.jsx)(l.x6,{i18nKey:"share-modal.snapshot.delete-button",children:"Delete snapshot."})})]})]})]})}},51156:(ne,A,e)=>{"use strict";e.d(A,{v:()=>u});var n=e(74848),a=e(22803),s=e(23257),l=e.n(s),r=e(51898),c=e(37386),i=e(72636),o=e(63142),h=e(45967);function f({overrides:d}){const x=(0,o.of)(g);return(0,n.jsx)("div",{className:x.wrapper,children:d.map((b,D)=>(0,n.jsx)(h.m,{content:b.tooltip,placement:"top",children:(0,n.jsx)("div",{"aria-label":b.description,className:x[b.type]})},D.toString()))})}const g=d=>{const x={width:8,height:8,borderRadius:d.shape.radius.circle,marginLeft:d.spacing(1),top:"-1px"};return{wrapper:(0,a.css)({display:"flex"}),rule:(0,a.css)({...x,position:"relative",backgroundColor:d.colors.primary.main}),data:(0,a.css)({...x,position:"relative",backgroundColor:d.colors.warning.main})}};class u{constructor(x){this.props={...x}}render(x){return(0,n.jsx)(E,{itemDescriptor:this,searchQuery:x},this.props.id)}useShowIf(){return this.props.useShowIf?this.props.useShowIf():this.props.showIf?this.props.showIf():!0}}function E({itemDescriptor:d,searchQuery:x}){const{title:b,description:D,id:C,render:P,skipField:T}=d.props,O=`${d.parent.props.id} ${b}`;return d.useShowIf()?T?P(d):(0,n.jsx)(c.D,{label:v(d,x),description:D,"aria-label":r.Tp.components.PanelEditor.OptionsPane.fieldLabel(O),htmlFor:C,children:P(d)},O):null}function v(d,x){const{title:b,description:D,overrides:C,id:P,addon:T}=d.props;if(!b)return null;if(!x)return d.parent.props.title===b&&!C?.length?null:(0,n.jsx)(m,{title:b,description:D,overrides:C,addon:T,htmlFor:P});const O=[];return d.parent.parent&&O.push(p(d.parent.parent.props.title,x)),d.parent.props.title!==b&&O.push(p(d.parent.props.title,x)),(0,n.jsxs)(i.J,{description:D&&p(D,x),category:O,htmlFor:P,children:[p(b,x),C&&C.length>0&&(0,n.jsx)(f,{overrides:C})]})}function p(d,x){return(0,n.jsx)(l(),{textToHighlight:d,searchWords:[x],highlightClassName:"search-fragment-highlight"})}function m({title:d,description:x,overrides:b,addon:D,htmlFor:C}){const P=(0,o.of)(y);return(0,n.jsxs)("div",{className:P.container,children:[(0,n.jsxs)(i.J,{description:x,htmlFor:C,children:[d,b&&b.length>0&&(0,n.jsx)(f,{overrides:b})]}),D]})}function y(d){return{container:(0,a.css)({display:"flex",justifyContent:"space-between"})}}},51158:(ne,A,e)=>{"use strict";e.d(A,{mR:()=>E});var n=e(74848),a=e(2543),s=e.n(a),l=e(66615),r=e(17548),c=e(25229),i=e(32899),o=e(92745),h=e(91867),f=e(45229);const g="grafana.dashboard.timepicker.history",u=4,E=D=>(0,n.jsx)(l.b,{storageKey:g,defaultValue:[],children:(C,P)=>{const T=v(C),O=p(T);return(0,n.jsx)(h.$6,{...D,history:O,onChange:S=>{m(S,T,P),D.onChange(S)},onError:S=>f.A.emit(i.r1.alertError,[(0,o.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,o.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:S})])})}});function v(D){const C=[];if(!Array.isArray(D))return C;for(let P of D){const T=x(P);T&&C.push(T)}return C}function p(D){return D.map(C=>r.convertRawToRange(C,"utc",void 0,"YYYY-MM-DD HH:mm:ss"))}function m(D,C,P){if(!y(D))return;const T={from:b(D.raw.from),to:b(D.raw.to)},O=d([T,...C]);P(O)}function y(D){return(0,c.Ar)(D.raw.from)||(0,c.Ar)(D.raw.to)}function d(D){return(0,a.uniqBy)(D,C=>C.from+C.to).slice(0,u)}function x(D){if(typeof D!="object"||D===null||Object.keys(D).length!==2||!("from"in D)||!("to"in D))return null;const{from:C,to:P}=D;return typeof C=="string"&&typeof P=="string"?{from:C,to:P}:null}function b(D){if(typeof D=="string")return D;if(!D?.toISOString)throw console.error("Invalid DateTime object passed to convertToISOString");return D.toISOString()}},51250:(ne,A,e)=>{"use strict";e.d(A,{KQ:()=>c});const n="12.2.1";var a=(i=>(i.Code="code",i.HTML="html",i.Markdown="markdown",i))(a||{}),s=(i=>(i.Go="go",i.Html="html",i.Json="json",i.Markdown="markdown",i.Plaintext="plaintext",i.Sql="sql",i.Typescript="typescript",i.Xml="xml",i.Yaml="yaml",i))(s||{});const l="plaintext",r={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},c={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"}},51388:(ne,A,e)=>{"use strict";e.d(A,{Kh:()=>i,Ls:()=>E,k9:()=>f,m8:()=>g});var n=e(8721),a=e(95004),s=e(71642),l=e(428),r=e(77154),c=e(41119),i=(b=>(b.Append="append",b.Replace="replace",b))(i||{});const o="__name__";var h=(b=>(b[b.wide=0]="wide",b[b.labels=1]="labels",b))(h||{});class f{constructor(D){this.options=D,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:"replace",length:0},this.serialize=(C,P,T)=>{const O=P?Object.assign({},{...this.options,...P}):this.options,S=(0,c.By)(this,C),B=d(S.fields.map(U=>U.values??[]),typeof T?.maxLength=="number"?Math.min(T.maxLength,O.maxLength):O.maxLength,this.timeFieldIndex,O.maxDelta);S.fields=S.fields.map(U=>({...U,values:U.values?.slice(B)}));const K=S.fields[0]?.values?.length??0;return{...S,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:K,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:O}},this.initFromSerialized=C=>{this.name=C.name,this.refId=C.refId,this.meta=C.meta,this.length=C.length,this.labels=C.labels,this.schemaFields=C.schemaFields,this.timeFieldIndex=C.timeFieldIndex,this.pushMode=C.pushMode,this.packetInfo.length=C.packetInfo.length,this.packetInfo.number=C.packetInfo.number,this.packetInfo.action="replace",this.packetInfo.schemaChanged=!0,this.fields=C.fields.map(P=>({...P,type:P.type??a.PU.other,config:P.config??{},values:P.values??[]})),y(this.fields.map(P=>P.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:C,maxDelta:P})=>{const T=C&&this.options.maxLength<C,O=P&&this.options.maxDelta<P,S=P&&this.options.maxDelta===1/0;return!!(T||O||S)},this.resize=({maxLength:C,maxDelta:P})=>{P&&(this.options.maxDelta===1/0?this.options.maxDelta=P:this.options.maxDelta=Math.max(P,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,C??0)},this.pushNewValues=C=>{if(!C?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=C[0].length,this.packetInfo.schemaChanged=!1,this.options.action==="append"?m(this.fields.map(T=>T.values),C,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(C.forEach((T,O)=>{this.fields[O]&&(this.fields[O].values=T)}),y(this.fields.map(T=>T.values),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const P=this.fields?.[0]?.values.length;P!==void 0&&(this.length=P)},this.resetStateCalculations=()=>{this.fields.forEach(C=>{C.state={...C.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=C=>this.fields.map((P,T)=>C(P)?T:void 0).filter(P=>P!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(C=>{const P=C.values;return P.slice(Math.max(P.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>!!this.packetInfo.length,this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}static{this.deserialize=D=>{const C=new f(D.options);return C.initFromSerialized(D),C}}static{this.empty=D=>new f(g(D))}static{this.fromDataFrameJSON=(D,C)=>{const P=new f(g(C));return P.push(D),P}}get alwaysReplace(){return this.options.action==="replace"}push(D){const{schema:C,data:P}=D;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,C){this.pushMode=0,this.timeFieldIndex=C.fields.findIndex(B=>B.type===a.PU.time);const T=C.fields[0];this.timeFieldIndex===1&&T.type===a.PU.string&&(T.name==="labels"||T.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const O=this.pushMode===1?C.fields.slice(1):C.fields;this.refId=C.refId,C.meta&&(this.meta={...C.meta});const{displayNameFormat:S}=this.options;if(x(this.schemaFields,O)){const B=O.length;this.fields.forEach((K,U)=>{const F=O[U%B];K.config=F.config??{},K.labels=F.labels}),S&&this.fields.forEach(K=>{const U={[o]:K.name,...K.labels};K.config.displayNameFromDS=(0,l.j)(S,U)})}else{this.packetInfo.schemaChanged=!0;const B=this.pushMode===0;this.fields=O.map(K=>{const U=K.config??{};if(S){const F={[o]:K.name,...K.labels};U.displayNameFromDS=(0,l.j)(S,F)}return{config:U,name:K.name,labels:K.labels,type:K.type??a.PU.other,values:B?this.fields.find(F=>F.name===K.name&&K.type===F.type)?.values??Array(this.length).fill(void 0):[]}})}this.schemaFields=O}if(P&&P.values.length&&P.values[0].length){let{values:T,entities:O}=P;if(O&&O.forEach((B,K)=>{B&&(0,r.t)(B,T[K])}),this.pushMode===1){const B=u(T);for(const F of B.keys())this.labels.has(F)||(this.packetInfo.schemaChanged=!0,this.addLabel(F));let K=Array(this.schemaFields.length).fill([]),U=[];this.labels.forEach(F=>{U.push(B.get(F)??K)}),T=(0,n.fj)(U)}if(T.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${T.length} (labels=${this.pushMode===1})`);this.fields=T.map((B,K)=>{let U=`Field ${K}`,F=(0,c.HW)(B[0]);return K===0&&F===a.PU.number&&B[0]>1600016688632&&(F=a.PU.time,U="Time"),{name:U,type:F,config:{},values:[]}})}let S=T;this.packetInfo.length=T[0].length,this.alwaysReplace||!this.length?this.packetInfo.action="replace":(this.packetInfo.action="append",S=this.fields.map(B=>B.values),m(S,T,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),S.forEach((B,K)=>{const U=this.fields[K],{state:F}=U;U.values=B,F&&(F.calcs=void 0)}),this.length=S[0].length}return{...this.packetInfo}}addLabel(D){const{displayNameFormat:C}=this.options,P=this.labels.size,T=v(D);if(P===0)this.fields.forEach((O,S)=>{if(S>0&&(O.labels=T,C)){const B={[o]:O.name,...T};O.config.displayNameFromDS=(0,l.j)(C,B)}});else for(let O=1;O<this.schemaFields.length;O++){let S=this.schemaFields[O];const B=S.config??{};if(C){const K={[o]:S.name,...T};B.displayNameFromDS=(0,l.j)(C,K)}this.fields.push({...S,config:B,labels:T,values:Array(this.length).fill(void 0)})}this.labels.add(D)}}function g(b){return{maxLength:b?.maxLength??1e3,maxDelta:b?.maxDelta??1/0,action:b?.action??"append",displayNameFormat:b?.displayNameFormat}}function u(b){let D=new Set(b[0]),C=new Map;D.forEach(P=>{let T=Array(b.length-1).fill(null).map(()=>[]);C.set(P,T)});for(let P=0;P<b[0].length;P++){let T=C.get(b[0][P]);for(let O=1;O<b.length;O++)T[O-1].push(b[O][P])}return C}function E(b,D,C,P){let T;C=C||0,P=P||D.length-1;let O=P<=2147483647;for(;P-C>1;)T=O?C+P>>1:Math.floor((C+P)/2),D[T]<b?C=T:P=T;return b-D[C]<=D[P]-b?C:P}function v(b){if(!b.length)return{};if(b.charAt(0)==="{")return(0,s.Xy)(b);const D={};return b.split(",").forEach(C=>{const[P,T]=C.trim().split("=");D[P]=T}),D}function p(b){if(b instanceof f)return b.packetInfo.action}function m(b,D,C=1/0,P=0,T=1/0){for(let O=0;O<b.length;O++)for(let S=0;S<D[O].length;S++)b[O].push(D[O][S]);return y(b,C,P,T)}function y(b,D=1/0,C=0,P=1/0){const T=d(b,D,C,P);if(T)for(let O=0;O<b.length;O++)b[O].splice(0,T);return T}function d(b,D=1/0,C=0,P=1/0){if(!b[0]?.length)return 0;const T=b[0].length;let O=0;if(T>D&&(O=T-D),P!==1/0&&C>=0){const S=b[C],B=S[O],K=S[T-1];K-B>P&&(O=E(K-P,S,O))}return O}function x(b,D){if(b?.length!==D.length)return!1;for(let C=0;C<b.length;C++){const P=b[C],T=D[C];if(P.name!==T.name||P.type!==T.type)return!1}return!0}},51515:(ne,A,e)=>{"use strict";e.d(A,{Rx:()=>n.Rx,YZ:()=>a,_M:()=>n._M,b4:()=>s,d$:()=>n.d$});var n=e(38242),a=(l=>(l.Scheduled="Scheduled",l.Running="Running",l.Complete="Complete",l.Failed="Failed",l.Cancelled="Cancelled",l.Timeout="Timeout",l))(a||{}),s=(l=>(l.Regions="regions",l.Namespaces="namespaces",l.Metrics="metrics",l.DimensionKeys="dimensionKeys",l.DimensionValues="dimensionValues",l.EBSVolumeIDs="ebsVolumeIDs",l.EC2InstanceAttributes="ec2InstanceAttributes",l.ResourceArns="resourceARNs",l.Statistics="statistics",l.LogGroups="logGroups",l.Accounts="accounts",l))(s||{})},51702:(ne,A,e)=>{"use strict";e.d(A,{i:()=>s});var n=e(96540),a=e(63142);function s(l){const r=(0,a.$j)(),c=(0,n.useMemo)(()=>window.matchMedia(`(min-width: ${r.breakpoints.values[l]}px)`),[r,l]),[i,o]=(0,n.useState)(c.matches);return(0,n.useEffect)(()=>{const h=f=>o(f.matches);return c.addEventListener("change",h),()=>c.removeEventListener("change",h)},[c]),i}},51740:(ne,A,e)=>{"use strict";e.d(A,{U:()=>h,r:()=>o});var n=e(43173),a=e(72930);const s=(0,a.u)("basic_auth","Basic auth","Sets the `Authorization` header with the configured username and password. Password and password_file are mutually exclusive.",{element:"subform",subformOptions:[(0,a.u)("username","Username",""),(0,a.u)("password","Password",""),(0,a.u)("password_file","Password file","")]}),l=(0,a.u)("tls_config","TLS config","Configures the TLS settings.",{element:"subform",subformOptions:[(0,a.u)("ca_file","CA file","CA certificate to validate the server certificate with."),(0,a.u)("cert_file","Cert file","Certificate for client cert authentication to the server."),(0,a.u)("key_file","Key file","Key file for client cert authentication to the server."),(0,a.u)("server_name","Server name","ServerName extension to indicate the name of the server."),(0,a.u)("insecure_skip_verify","Skip verify","Disable validation of the server certificate.",{element:"checkbox"})]}),r=(0,a.u)("oauth2","OAuth2","Configures the OAuth2 settings.",{element:"subform",subformOptions:[(0,a.u)("client_id","Client ID","The OAuth2 client ID",{required:!0}),(0,a.u)("client_secret","Client secret","The OAuth2 client secret",{required:!0}),(0,a.u)("token_url","Token URL","The OAuth2 token exchange URL",{required:!0}),(0,a.u)("scopes","Scopes","Comma-separated list of scopes",{element:"string_array"}),(0,a.u)("endpoint_params","Additional parameters","",{element:"key_value_map"})]}),c=(0,a.u)("http_config","HTTP Config","Note that `basic_auth`, `bearer_token` and `bearer_token_file` options are mutually exclusive.",{element:"subform",subformOptions:[(0,a.u)("bearer_token","Bearer token","Sets the `Authorization` header with the configured bearer token."),(0,a.u)("bearer_token_file","Bearer token file","Sets the `Authorization` header with the bearer token read from the configured file."),(0,a.u)("proxy_url","Proxy URL","Optional proxy URL."),s,l,r]}),i={name:"Jira",description:"Send notifications to Jira Service Management",type:"jira",info:"",heading:"Jira settings",options:[(0,a.u)("api_url","API URL","The host to send Jira API requests to",{required:!0}),(0,a.u)("project","Project Key","The project key where issues are created",{required:!0}),(0,a.u)("summary","Summary","Issue summary template",{placeholder:'{{ template "jira.default.summary" . }}'}),(0,a.u)("description","Description","Issue description template",{placeholder:'{{ template "jira.default.description" . }}'}),(0,a.u)("labels","Labels"," Labels to be added to the issue",{element:"string_array"}),(0,a.u)("priority","Priority","Priority of the issue",{placeholder:'{{ template "jira.default.priority" . }}'}),(0,a.u)("issue_type","Issue Type","Type of the issue (e.g. Bug)",{required:!0}),(0,a.u)("reopen_transition","Reopen transition",'Name of the workflow transition to reopen an issue. The target status should not have the category "done"'),(0,a.u)("resolve_transition","Resolve transition",'Name of the workflow transition to resolve an issue. The target status must have the category "done"'),(0,a.u)("wont_fix_resolution","Won't fix resolution",'If "Reopen transition" is defined, ignore issues with that resolution'),(0,a.u)("reopen_duration","Reopen duration",'If "Reopen transition" is defined, reopen the issue when it is not older than this value (rounded down to the nearest minute)',{placeholder:"Use duration format, for example: 1.2s, 100ms"}),(0,a.u)("fields","Fields","Other issue and custom fields",{element:"key_value_map"}),c]},o=[{name:"Email",description:"Send notification over SMTP",type:"email",info:"",heading:"Email settings",options:[(0,a.u)("to","To",'The email address to send notifications to. You can enter multiple addresses using a "," separator',{required:!0}),(0,a.u)("from","From","The sender address."),(0,a.u)("smarthost","SMTP host","The SMTP host through which emails are sent."),(0,a.u)("hello","Hello","The hostname to identify to the SMTP server."),(0,a.u)("auth_username","Username","SMTP authentication information"),(0,a.u)("auth_password","Password","SMTP authentication information"),(0,a.u)("auth_secret","Secret","SMTP authentication information"),(0,a.u)("auth_identity","Identity","SMTP authentication information"),(0,a.u)("require_tls","Require TLS","The SMTP TLS requirement",{element:"checkbox"}),(0,a.u)("html","Email HTML body","The HTML body of the email notification.",{placeholder:'{{ template "email.default.html" . }}',element:"textarea"}),(0,a.u)("text","Email text body","The text body of the email notification.",{element:"textarea"}),(0,a.u)("headers","Headers","Further headers email header key/value pairs. Overrides any headers previously set by the notification implementation.",{element:"key_value_map"}),l]},{name:"PagerDuty",description:"Send notifications to PagerDuty",type:"pagerduty",info:"",heading:"PagerDuty settings",options:[(0,a.u)("routing_key","Routing key","The PagerDuty integration key (when using PagerDuty integration type `Events API v2`)"),(0,a.u)("service_key","Service key","The PagerDuty integration key (when using PagerDuty integration type `Prometheus`)."),(0,a.u)("url","URL","The URL to send API requests to"),(0,a.u)("client","Client","The client identification of the Alertmanager.",{placeholder:'{{ template "pagerduty.default.client" . }}'}),(0,a.u)("client_url","Client URL","A backlink to the sender of the notification.",{placeholder:'{{ template "pagerduty.default.clientURL" . }}'}),(0,a.u)("description","Description","A description of the incident.",{placeholder:'{{ template "pagerduty.default.description" .}}'}),(0,a.u)("severity","Severity","Severity of the incident.",{placeholder:"error"}),(0,a.u)("details","Details","A set of arbitrary key/value pairs that provide further detail about the incident.",{element:"key_value_map"}),(0,a.u)("images","Images","Images to attach to the incident.",{element:"subform_array",subformOptions:[(0,a.u)("href","URL","",{required:!0}),(0,a.u)("source","Source","",{required:!0}),(0,a.u)("alt","Alt","",{required:!0})]}),(0,a.u)("links","Links","Links to attach to the incident.",{element:"subform_array",subformOptions:[(0,a.u)("href","URL","",{required:!0}),(0,a.u)("text","Text","",{required:!0})]}),c]},{name:"Pushover",description:"Send notifications to Pushover",type:"pushover",info:"",heading:"Pushover settings",options:[(0,a.u)("user_key","User key","The recipient user\u2019s user key.",{required:!0}),(0,a.u)("token","Token","Your registered application\u2019s API token, see https://pushover.net/app",{required:!0}),(0,a.u)("title","Title","Notification title.",{placeholder:'{{ template "pushover.default.title" . }}'}),(0,a.u)("message","Message","Notification message.",{placeholder:'{{ template "pushover.default.message" . }}'}),(0,a.u)("url","URL","A supplementary URL shown alongside the message.",{placeholder:'{{ template "pushover.default.url" . }}'}),(0,a.u)("priority","Priority","Priority, see https://pushover.net/api#priority",{placeholder:'{{ if eq .Status "firing" }}2{{ else }}0{{ end }}'}),(0,a.u)("retry","Retry","How often the Pushover servers will send the same notification to the user. Must be at least 30 seconds.",{placeholder:"1m"}),(0,a.u)("expire","Expire","How long your notification will continue to be retried for, unless the user acknowledges the notification.",{placeholder:"1h"}),(0,a.u)("ttl","TTL","The number of seconds before a message expires and is deleted automatically. Examples: 10s, 5m30s, 8h.",{validationRule:"^(\\d+[s|m|h])+$|^$",element:"input"}),c]},{name:"Slack",description:"Send notifications to Slack",type:"slack",info:"",heading:"Slack settings",options:[(0,a.u)("api_url","Webhook URL","The Slack webhook URL."),(0,a.u)("channel","Channel","The #channel or @user to send notifications to.",{required:!0}),(0,a.u)("icon_emoji","Emoji icon",""),(0,a.u)("icon_url","Icon URL",""),(0,a.u)("link_names","Names link","",{element:"checkbox"}),(0,a.u)("username","Username","",{placeholder:'{{ template "slack.default.username" . }}'}),(0,a.u)("callback_id","Callback ID","",{placeholder:'{{ template "slack.default.callbackid" . }}'}),(0,a.u)("color","Color","",{placeholder:'{{ if eq .Status "firing" }}danger{{ else }}good{{ end }}'}),(0,a.u)("fallback","Fallback","",{placeholder:'{{ template "slack.default.fallback" . }}'}),(0,a.u)("footer","Footer","",{placeholder:'{{ template "slack.default.footer" . }}'}),(0,a.u)("mrkdwn_in","Mrkdwn fields","An array of field names that should be formatted by mrkdwn syntax.",{element:"string_array"}),(0,a.u)("pretext","Pre-text","",{placeholder:'{{ template "slack.default.pretext" . }}'}),(0,a.u)("short_fields","Short fields","",{element:"checkbox"}),(0,a.u)("text","Message body","",{element:"textarea",placeholder:'{{ template "slack.default.text" . }}'}),(0,a.u)("title","Title","",{placeholder:'{{ template "slack.default.title" . }}'}),(0,a.u)("title_link","Title link","",{placeholder:'{{ template "slack.default.titlelink" . }}'}),(0,a.u)("image_url","Image URL",""),(0,a.u)("thumb_url","Thumbnail URL",""),(0,a.u)("actions","Actions","",{element:"subform_array",subformOptions:[(0,a.u)("text","Text","",{required:!0}),(0,a.u)("type","Type","",{required:!0}),(0,a.u)("url","URL","Either url or name and value are mandatory."),(0,a.u)("name","Name",""),(0,a.u)("value","Value",""),(0,a.u)("confirm","Confirm","",{element:"subform",subformOptions:[(0,a.u)("text","Text","",{required:!0}),(0,a.u)("dismiss_text","Dismiss text",""),(0,a.u)("ok_text","OK text",""),(0,a.u)("title","Title","")]}),(0,a.u)("style","Style","")]}),(0,a.u)("fields","Fields","",{element:"subform_array",subformOptions:[(0,a.u)("title","Title","",{required:!0}),(0,a.u)("value","Value","",{required:!0}),(0,a.u)("short","Short","",{element:"checkbox"})]}),c]},...n.$.featureToggles?.alertingJiraIntegration?[i]:[],{name:"OpsGenie",description:"Send notifications to OpsGenie",type:"opsgenie",info:"",heading:"OpsGenie settings",options:[(0,a.u)("api_key","API key","The API key to use when talking to the OpsGenie API."),(0,a.u)("api_url","API URL","The host to send OpsGenie API requests to."),(0,a.u)("message","Message","Alert text limited to 130 characters."),(0,a.u)("description","Description","A description of the incident.",{placeholder:'{{ template "opsgenie.default.description" . }}'}),(0,a.u)("source","Source","A backlink to the sender of the notification.",{placeholder:'{{ template "opsgenie.default.source" . }}'}),(0,a.u)("details","Details","A set of arbitrary key/value pairs that provide further detail about the incident.",{element:"key_value_map"}),(0,a.u)("tags","Tags","Comma separated list of tags attached to the notifications."),(0,a.u)("note","Note","Additional alert note."),(0,a.u)("priority","Priority","Priority level of alert. Possible values are P1, P2, P3, P4, and P5."),(0,a.u)("responders","Responders","List of responders responsible for notifications.",{element:"subform_array",subformOptions:[(0,a.u)("type","Type",'"team", "user", "escalation" or schedule".',{required:!0}),(0,a.u)("id","ID","Exactly one of these fields should be defined."),(0,a.u)("name","Name","Exactly one of these fields should be defined."),(0,a.u)("username","Username","Exactly one of these fields should be defined.")]}),c]},{name:"VictorOps",description:"Send notifications to VictorOps",type:"victorops",info:"",heading:"VictorOps settings",options:[(0,a.u)("api_key","API key","The API key to use when talking to the VictorOps API."),(0,a.u)("api_url","API URL","The VictorOps API URL."),(0,a.u)("routing_key","Routing key","A key used to map the alert to a team.",{required:!0}),(0,a.u)("message_type","Message type","Describes the behavior of the alert (CRITICAL, WARNING, INFO)."),(0,a.u)("entity_display_name","Entity display name","Contains summary of the alerted problem.",{placeholder:'{{ template "victorops.default.entity_display_name" . }}'}),(0,a.u)("state_message","State message","Contains long explanation of the alerted problem.",{placeholder:'{{ template "victorops.default.state_message" . }}'}),(0,a.u)("monitoring_tool","Monitoring tool","The monitoring tool the state message is from.",{placeholder:'{{ template "victorops.default.monitoring_tool" . }}'}),c]},{name:"Webhook",description:"Send notifications to a webhook",type:"webhook",info:"",heading:"Webhook settings",options:[(0,a.u)("url","URL","The endpoint to send HTTP POST requests to.",{required:!0}),(0,a.u)("max_alerts","Max alerts","The maximum number of alerts to include in a single webhook message. Alerts above this threshold are truncated. When leaving this at its default value of 0, all alerts are included.",{placeholder:"0",inputType:"number",validationRule:"(^\\d+$|^$)",setValueAs:f=>{const g=Number(f);return Number.isFinite(g)?g:0}}),(0,a.u)("timeout","Timeout","The maximum time to wait for a webhook request to complete, before failing the request and allowing it to be retried. The default value of 0s indicates that no timeout should be applied. NOTE: This will have no effect if set higher than the group_interval.",{placeholder:"Use duration format, for example: 1.2s, 100ms"}),c]},{name:"Discord",description:"Sends notifications to Discord",type:"discord",info:"",heading:"Discord settings",options:[(0,a.u)("title","Title","Templated title of the message",{placeholder:'{{ template "discord.default.title" . }}'}),(0,a.u)("message","Message Content","Mention a group using @ or a user using <@ID> when notifying in a channel",{placeholder:'{{ template "discord.default.message" . }}'}),(0,a.u)("webhook_url","Webhook URL","",{placeholder:"Discord webhook URL",required:!0}),c]},{name:"Cisco Webex Teams",description:"Sends notifications to Cisco Webex Teams",type:"webex",info:"",heading:"Cisco Webex Teams settings",options:[(0,a.u)("api_url","API URL","The Webex Teams API URL",{placeholder:"https://webexapis.com/v1/messages"}),(0,a.u)("room_id","Room ID","ID of the Webex Teams room where to send the messages",{required:!0}),(0,a.u)("message","Message","Message template",{placeholder:'{{ template "webex.default.message" .}}'}),{...c,required:!0}]},{name:"Telegram",description:"Sends notifications to Telegram",type:"telegram",info:"",heading:"Telegram settings",options:[(0,a.u)("api_url","API URL","The Telegram API URL",{placeholder:"https://api.telegram.org"}),(0,a.u)("bot_token","Bot token","Telegram bot token",{required:!0}),(0,a.u)("chat_id","Chat ID","ID of the chat where to send the messages",{required:!0,setValueAs:f=>typeof f=="string"?parseInt(f,10):f}),(0,a.u)("message","Message","Message template",{placeholder:'{{ template "webex.default.message" .}}'}),(0,a.u)("disable_notifications","Disable notifications","Disable telegram notifications",{element:"checkbox"}),(0,a.u)("parse_mode","Parse mode","Parse mode for telegram message",{element:"select",defaultValue:{label:"None",value:""},selectOptions:[{label:"None",value:""},{label:"MarkdownV2",value:"MarkdownV2"},{label:"Markdown",value:"Markdown"},{label:"HTML",value:"HTML"}]}),c]},{name:"Amazon SNS",description:"Sends notifications to Amazon SNS",type:"sns",info:"",heading:"Amazon SNS settings",options:[(0,a.u)("api_url","API URL","The Amazon SNS API URL"),(0,a.u)("sigv4","SigV4 authentication","Configures AWS's Signature Verification 4 signing process to sign requests",{element:"subform",subformOptions:[(0,a.u)("region","Region","The AWS region. If blank, the region from the default credentials chain is used"),(0,a.u)("access_key","Access key",'The AWS API access_key. If blank the environment variable "AWS_ACCESS_KEY_ID" is used'),(0,a.u)("secret_key","Secret key",'The AWS API secret_key. If blank the environment variable "AWS_ACCESS_SECRET_ID" is used'),(0,a.u)("profile","Profile","Named AWS profile used to authenticate"),(0,a.u)("role_arn","Role ARN","AWS Role ARN, an alternative to using AWS API keys")]}),(0,a.u)("topic_arn","SNS topic ARN","If you don't specify this value, you must specify a value for the phone_number or target_arn. If you are using a FIFO SNS topic you should set a message group interval longer than 5 minutes to prevent messages with the same group key being deduplicated by the SNS default deduplication window"),(0,a.u)("phone_number","Phone number","Phone number if message is delivered via SMS in E.164 format. If you don't specify this value, you must specify a value for the topic_arn or target_arn"),(0,a.u)("target_arn","Target ARN","The  mobile platform endpoint ARN if message is delivered via mobile notifications. If you don't specify this value, you must specify a value for the topic_arn or phone_number"),(0,a.u)("subject","Subject","Subject line when the message is delivered",{placeholder:'{{ template "sns.default.subject" .}}'}),(0,a.u)("message","Message","The message content of the SNS notification",{placeholder:'{{ template "sns.default.message" .}}'}),(0,a.u)("attributes","Attributes","SNS message attributes",{element:"key_value_map"}),c]},{name:"WeChat",description:"Sends notifications to WeChat",type:"wechat",info:"",heading:"WeChat settings",options:[(0,a.u)("api_url","API URL","The WeChat API URL"),(0,a.u)("api_secret","API Secret","The API key to use when talking to the WeChat API"),(0,a.u)("corp_id","Corp ID","The corp id for authentication"),(0,a.u)("message","Message","API request data as defined by the WeChat API",{placeholder:'{{ template "wechat.default.message" . }}'}),(0,a.u)("message_type","Message type","Type of the message type",{element:"select",defaultValue:{label:"Text",value:"text"},selectOptions:[{label:"Text",value:"text"},{label:"Markdown",value:"markdown"}]}),(0,a.u)("agent_id","Agent ID","",{placeholder:'{{ template "wechat.default.agent_id" . }}'}),(0,a.u)("to_user","to user","",{placeholder:'{{ template "wechat.default.to_user" . }}'}),(0,a.u)("to_party","to party","",{placeholder:'{{ template "wechat.default.to_party" . }}'}),(0,a.u)("to_tag","to tag","",{placeholder:'{{ template "wechat.default.to_tag" . }}'})]},{name:"Microsoft Teams",description:"Sends notifications to Microsoft Teams",type:"msteams",info:"",heading:"Microsoft Teams settings",options:[(0,a.u)("webhook_url","Webhook URL","The incoming webhook URL."),(0,a.u)("title","Title","Message title template.",{placeholder:'{{ template "teams.default.title" . }}'}),(0,a.u)("text","Text","Message body template.",{placeholder:'{{ template "teams.default.text" . }}'})]}],h=[(0,a.u)("smtp_from","SMTP from","The default SMTP From header field."),(0,a.u)("smtp_smarthost","SMTP smarthost","The default SMTP smarthost used for sending emails, including port number. Port number usually is 25, or 587 for SMTP over TLS (sometimes referred to as STARTTLS). Example: smtp.example.org:587"),(0,a.u)("smtp_hello","SMTP hello","The default hostname to identify to the SMTP server.",{placeholder:"localhost"}),(0,a.u)("smtp_auth_username","SMTP auth username","SMTP Auth using CRAM-MD5, LOGIN and PLAIN. If empty, Alertmanager doesn't authenticate to the SMTP server."),(0,a.u)("smtp_auth_password","SMTP auth password","SMTP Auth using LOGIN and PLAIN."),(0,a.u)("smtp_auth_identity","SMTP auth identity","SMTP Auth using PLAIN."),(0,a.u)("smtp_auth_secret","SMTP auth secret","SMTP Auth using CRAM-MD5."),(0,a.u)("smtp_require_tls","SMTP require TLS","The default SMTP TLS requirement. Note that Go does not support unencrypted connections to remote SMTP endpoints.",{element:"checkbox"}),(0,a.u)("slack_api_url","Slack API URL",""),(0,a.u)("victorops_api_key","VictorOps API key",""),(0,a.u)("victorops_api_url","VictorOps API URL","",{placeholder:"https://alert.victorops.com/integrations/generic/20131114/alert/"}),(0,a.u)("pagerduty_url","PagerDuty URL","https://events.pagerduty.com/v2/enqueue"),(0,a.u)("opsgenie_api_key","OpsGenie API key",""),(0,a.u)("opsgenie_api_url","OpsGenie API URL","",{placeholder:"https://api.opsgenie.com/"}),(0,a.u)("wechat_api_url","WeChat API URL","",{placeholder:"https://qyapi.weixin.qq.com/cgi-bin/"}),(0,a.u)("wechat_api_secret","WeChat API secret",""),(0,a.u)("wechat_api_corp_id","WeChat API corp id",""),(0,a.u)("webex_api_url","Cisco Webex Teams API URL",""),(0,a.u)("telegram_api_url","The Telegram API URL",""),c,(0,a.u)("resolve_timeout","Resolve timeout","ResolveTimeout is the default value used by alertmanager if the alert does not include EndsAt, after this time passes it can declare the alert as resolved if it has not been updated. This has no impact on alerts from Prometheus, as they always include EndsAt.",{placeholder:"5m"})]},51845:(ne,A,e)=>{"use strict";e.d(A,{$0:()=>g,EA:()=>E,Fb:()=>d,Gd:()=>D,LJ:()=>C,QZ:()=>x,RE:()=>b,_9:()=>p,fx:()=>u,nE:()=>v});var n=e(65307),a=e(62635),s=e(6219),l=e(34984),r=e(52763),c=e(707),i=e(19050),o=e(94543),h=e(83953);const f=(0,n.VP)("explore/changeSize"),g=(0,n.VP)("explore/changeCompactMode"),u=(0,n.VP)("explore/changePanels");function E(P,T,O){return async(S,B)=>{const K=B().explore.panes[P];if(K===void 0)return;const{panelsState:U}=K;S(u({exploreId:P,panelsState:{...U,[T]:O}}))}}const v=(0,n.VP)("explore/changeCorrelationHelperData"),p=(0,n.VP)("explore/updateQueryLibraryRef"),m=(0,n.VP)("explore/initializeExploreAction"),y=(0,n.VP)("explore/setUrlReplaced"),d=(0,n.VP)("explore/saveCorrelationsAction");function x(P,{width:T}){return f({exploreId:P,width:T})}function b(P,T){return g({exploreId:P,compact:T})}const D=(0,r.zD)("explore/initializeExplore",async({exploreId:P,datasource:T,queries:O,range:S,panelsState:B,compact:K,correlationHelperData:U,eventBridge:F,queryLibraryRef:I},{dispatch:V,getState:M,fulfillWithValue:L})=>{let N,W=[];if(T){const R=M().user.orgId,G=await(0,h.BE)(R,T);N=G.instance,W=G.history}if(V(m({exploreId:P,queries:O,range:(0,h.eO)(S,(0,l.O)(M().user)),datasourceInstance:N,history:W,compact:K,eventBridge:F,queryLibraryRef:I})),B!==void 0&&V(u({exploreId:P,panelsState:B})),V((0,o.JA)({exploreId:P})),N){const R=(0,h.dq)(N.uid,O),G=await(0,s.J6)(R);V(d({exploreId:P,correlations:G.correlations||[]})),V((0,i.Od)({exploreId:P}))}return U!==void 0&&M().explore.correlationEditorDetails?.editorMode&&V(v({exploreId:P,correlationEditorHelperData:U})),L({exploreId:P,state:M().explore.panes[P]})}),C=(P=(0,h.HZ)(),T)=>{if(P=(0,i.JQ)(P,T),P=(0,c.YR)(P,T),P=(0,o.QP)(P,T),f.match(T)){const O=Math.floor(T.payload.width);return{...P,containerWidth:O}}if(g.match(T)){const O=T.payload.compact;return{...P,compact:O}}if(u.match(T)){const{panelsState:O}=T.payload;return{...P,panelsState:O}}if(v.match(T)){const{correlationEditorHelperData:O}=T.payload;return{...P,correlationEditorHelperData:O}}if(d.match(T))return{...P,correlations:T.payload.correlations};if(p.match(T))return{...P,queryLibraryRef:T.payload.queryLibraryRef};if(m.match(T)){const{queries:O,range:S,datasourceInstance:B,history:K,eventBridge:U,compact:F,queryLibraryRef:I}=T.payload;return{...P,range:S,queries:O,initialized:!0,eventBridge:U,queryKeys:(0,a.dY)(O),datasourceInstance:B,history:K,queryResponse:(0,h.RA)(),cache:[],correlations:[],queryLibraryRef:I,compact:F}}return P}},51906:(ne,A,e)=>{"use strict";e.d(A,{x:()=>I});var n=e(74848),a=e(22803),s=e(7389),l=e(51898),r=e(45863),c=e(63142),i=e(31286),o=e(41654),h=e(92745),f=e(21285);function g({panelEditor:N}){const{tableView:W,dataPane:R}=N.useState();return(0,n.jsx)(n.Fragment,{children:R&&(0,n.jsx)(f.K,{label:(0,h.t)("dashboard-scene.panel-edit-controls.table-view-label-table-view","Table view"),showLabel:!0,id:"table-view",value:!!W,onClick:N.onToggleTableView,"aria-label":(0,h.t)("dashboard-scene.panel-edit-controls.table-view-aria-label-toggletableview","Toggle table view"),"data-testid":l.Tp.components.PanelEditor.toggleTableView})})}var u=e(8285),E=e(63704),v=e(45967),p=e(4137),m=e(82345),y=e(86871);function d({links:N,dashboard:W}){r.jh.getTimeRange(W).useState();const R=W.state.uid;return!N||!R?null:(0,n.jsx)(n.Fragment,{children:N.map((G,w)=>{const _=(0,m.mQ)().getAnchorInfo(G),Q=`${G.title}-$${w}`;if(G.type==="dashboards")return(0,n.jsx)(p.aK,{link:G,linkInfo:_,dashboardUID:R},Q);const ae=y.G[G.icon],q=(0,n.jsx)(p.Zx,{icon:ae,href:(0,E.Jf)(_.href),target:G.targetBlank?"_blank":void 0,rel:"noreferrer","data-testid":l.Tp.components.DashboardLinks.link,children:_.title});return(0,n.jsx)("div",{"data-testid":l.Tp.components.DashboardLinks.container,children:G.tooltip?(0,n.jsx)(v.m,{content:_.tooltip,children:q}):q},Q)})})}var x=e(88559),b=e(87063),D=e(7895),C=e(56887);function P({dashboard:N}){const{variables:W}=r.jh.getVariables(N).useState();return(0,n.jsx)(n.Fragment,{children:W.filter(R=>!R.state.showInControlsMenu).map(R=>(0,n.jsx)(T,{variable:R},R.state.key))})}function T({variable:N}){const W=(0,r.gn)(N,{shouldActivateOrKeepAlive:!0}),{isSelected:R,onSelect:G,isSelectable:w}=(0,C.y)(N.state.key),_=(0,c.of)(S);if(W.hide===s.zL.hideVariable)return N.UNSAFE_renderAsHidden?(0,n.jsx)(N.Component,{model:N}):null;const Q=ae=>{if(w){if(ae.target instanceof Element&&!ae.target.closest("label")){ae.stopPropagation();return}w&&G&&(ae.stopPropagation(),G(ae))}};return(0,n.jsxs)("div",{className:(0,a.cx)(_.container,R&&"dashboard-selected-element",w&&!R&&"dashboard-selectable-element"),onPointerDown:Q,"data-testid":l.Tp.pages.Dashboard.SubMenu.submenuItem,children:[(0,n.jsx)(O,{variable:N,className:(0,a.cx)(w&&_.labelSelectable)}),(0,n.jsx)(N.Component,{model:N})]})}function O({variable:N,className:W}){const{state:R}=N;if(N.state.hide===s.zL.hideLabel)return null;const G=R.label||R.name,w=`var-${R.key}`;return(0,n.jsx)(r.Zx,{htmlFor:w,isLoading:R.loading,onCancel:()=>N.onCancel?.(),label:G,error:R.error,layout:"horizontal",description:R.description??void 0,className:W})}const S=N=>({container:(0,a.css)({display:"flex","> :nth-child(2)":(0,a.css)({borderTopLeftRadius:"unset",borderBottomLeftRadius:"unset"})}),labelWrapper:(0,a.css)({display:"flex",alignItems:"center"}),labelSelectable:(0,a.css)({cursor:"pointer"})}),B="Dashboard controls menu",K="Dashboard controls";function U({dashboard:N}){const W=(0,c.of)(F),R=r.jh.getVariables(N).useState().variables.filter(G=>G.state.showInControlsMenu===!0);return R.length===0?null:(0,n.jsx)(x.m,{overlay:(0,n.jsx)(b.W,{onClick:G=>{G.stopPropagation()},children:R.map(G=>(0,n.jsx)("div",{className:W.menuItem,children:(0,n.jsx)(T,{variable:G})},G.state.key))}),children:(0,n.jsx)(D.I,{"aria-label":(0,h.t)("dashboard.controls.menu.aria-label",B),title:(0,h.t)("dashboard.controls.menu.title",K),icon:"ellipsis-v",iconSize:"md",narrow:!0})})}const F=N=>({menuItem:(0,a.css)({padding:N.spacing(.5)})});class I extends r.Bs{constructor(W){super({timePicker:W.timePicker??new r.KE({}),refreshPicker:W.refreshPicker??new r.WM({}),...W}),this._variableDependency=new r.Sh(this,{onAnyVariableChanged:this._onAnyVariableChanged.bind(this)}),this._urlSync=new r.So(this,{keys:["_dash.hideTimePicker","_dash.hideVariables","_dash.hideLinks"]}),this.addActivationHandler(()=>{let R;return this.state.hideTimeControls&&(R=this.state.refreshPicker.activate()),()=>{R&&R()}})}static{this.Component=V}getUrlState(){return{}}updateFromUrl(W){const{hideTimeControls:R,hideVariableControls:G,hideLinksControls:w}=this.state,_=Q=>W[Q]==="true"||W[Q]==="";!R&&_("_dash.hideTimePicker")&&this.setState({hideTimeControls:!0}),!G&&_("_dash.hideVariables")&&this.setState({hideVariableControls:!0}),!w&&_("_dash.hideLinks")&&this.setState({hideLinksControls:!0})}_onAnyVariableChanged(){(0,u.YQ)(this).state.links?.length>0&&this.forceRender()}hasControls(){const W=r.jh.getVariables(this)?.state.variables.some(ae=>ae.state.hide!==s.zL.hideVariable),R=r.jh.getDataLayers(this).some(ae=>ae.state.isEnabled&&!ae.state.isHidden),G=(0,u.YQ)(this).state.links?.length>0,w=this.state.hideLinksControls||!G,_=this.state.hideVariableControls||!R&&!W,Q=this.state.hideTimeControls;return!(_&&w&&Q)}}function V({model:N}){const{refreshPicker:W,timePicker:R,hideTimeControls:G,hideVariableControls:w,hideLinksControls:_}=N.useState(),Q=(0,u.YQ)(N),{links:ae,editPanel:q}=Q.useState(),k=(0,c.of)(L),ee=window.location.search.includes("scene-debugger");return N.hasControls()?(0,n.jsxs)("div",{"data-testid":l.Tp.pages.Dashboard.Controls,className:(0,a.cx)(k.controls,q&&k.controlsPanelEdit),children:[(0,n.jsxs)(o.B,{grow:1,wrap:"wrap",children:[!w&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P,{dashboard:Q}),(0,n.jsx)(M,{dashboard:Q})]}),(0,n.jsx)(i.a,{grow:1}),!_&&!q&&(0,n.jsx)(d,{links:ae,dashboard:Q}),q&&(0,n.jsx)(g,{panelEditor:q})]}),!G&&(0,n.jsxs)("div",{className:(0,a.cx)(k.timeControls,q&&k.timeControlsWrap),children:[(0,n.jsx)(R.Component,{model:R}),(0,n.jsx)(W.Component,{model:W})]}),(0,n.jsx)(o.B,{children:(0,n.jsx)(U,{dashboard:Q})}),ee&&(0,n.jsx)(r.or,{scene:N},"scene-debugger")]}):(0,n.jsx)(i.a,{padding:1})}function M({dashboard:N}){const W=r.jh.getDataLayers(N,!0);return(0,n.jsx)(n.Fragment,{children:W.map(R=>(0,n.jsx)(R.Component,{model:R},R.state.key))})}function L(N){return{controls:(0,a.css)({display:"flex",alignItems:"flex-start",flex:"100%",gap:N.spacing(1),padding:N.spacing(2),flexDirection:"row",flexWrap:"nowrap",position:"relative",width:"100%",marginLeft:"auto",[N.breakpoints.down("sm")]:{flexDirection:"column-reverse",alignItems:"stretch"}}),controlsPanelEdit:(0,a.css)({flexWrap:"wrap-reverse",paddingRight:0}),embedded:(0,a.css)({background:"unset",position:"unset"}),timeControls:(0,a.css)({display:"flex",justifyContent:"flex-end",gap:N.spacing(1)}),timeControlsWrap:(0,a.css)({flexWrap:"wrap",marginLeft:"auto"})}}},51993:(ne,A,e)=>{"use strict";e.d(A,{GX:()=>W,r4:()=>L});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(96540),c=e(49785),i=e(17503),o=e(80011),h=e(1906),f=e(28105),g=e(92745),u=e(76319),E=e(34999),v=e(45861),p=e(66404),m=e(41654),y=e(33033),d=e(63142),x=e(91073),b=e(18203),D=e(89931),C=e(4652),P=e(87767),T=e(38610),O=e(4651),S=e(24619),B=e(74048),K=e(29609),U=e(38055),F=e(49779),I=e(65420),V=e(38076),M=e(88589);const L=({queries:J=[],query:Z,data:te,error:se,warning:ie,isAlertCondition:ce,onSetCondition:re,onUpdateRefId:ue,onRemoveExpression:X,onUpdateExpressionType:le,onChangeQuery:he})=>{const fe=(0,d.of)(j),Ce=Z?.type,{setError:Ae,clearErrors:_e,watch:Xe}=(0,c.xW)(),De=Xe("type"),Me=De?(0,K.pq)(De):!1,Te=(0,r.useCallback)(He=>{He?Ae("queries",{type:"custom",message:He}):_e("queries")},[Ae,_e]),$e=te&&Object.values(te).some(He=>!!He&&He.state===f.Gu.Loading),Re=Array.isArray(te?.series)&&!$e,Ke=te?.series??[],Ve=ce??!1,{seriesCount:Se,groupedByState:Ye}=G(Ke),Ue=(0,r.useCallback)(He=>{const Je=J.filter(de=>He.refId!==de.refId).map(de=>({value:de.refId,label:de.refId}));switch(He.type){case O.Tz.math:return(0,n.jsx)(b.z,{onChange:he,query:He,labelWidth:"auto",onRunQuery:()=>{}});case O.Tz.reduce:return(0,n.jsx)(D.Z,{onChange:he,refIds:Je,labelWidth:"auto",app:h.Jk.UnifiedAlerting,query:He});case O.Tz.resample:return(0,n.jsx)(C.C,{onChange:he,query:He,labelWidth:"auto",refIds:Je});case O.Tz.classic:return(0,n.jsx)(x.z,{onChange:he,query:He,refIds:Je});case O.Tz.threshold:return(0,n.jsx)(T.O,{onChange:he,query:He,labelWidth:"auto",refIds:Je,onError:Te,useHysteresis:!0});case O.Tz.sql:return(0,n.jsx)(P.k,{onChange:de=>he(de),query:He,refIds:Je,alerting:!0,queries:[]});default:return(0,n.jsxs)(g.x6,{i18nKey:"alerting.expression.not-supported",values:{expression:He.type},children:["Expression not supported: ","{{expression}}"]})}},[he,J,Te]),Qe=O.uQ.find(He=>He.value===Ce)?.description??"";return(0,n.jsx)("div",{className:(0,a.cx)(fe.expression.wrapper,Ve&&fe.expression.alertCondition,Ce===O.Tz.classic&&fe.expression.classic,Ce!==O.Tz.classic&&fe.expression.nonClassic),children:(0,n.jsxs)("div",{className:fe.expression.stack,children:[(0,n.jsx)(w,{refId:Z.refId,queryType:Ce,onRemoveExpression:()=>X(Z.refId),onUpdateRefId:He=>ue(Z.refId,He),onSetCondition:re,query:Z,alertCondition:Ve}),(0,n.jsxs)("div",{className:fe.expression.body,children:[se&&(0,n.jsx)(E.F,{title:(0,g.t)("alerting.expression.title-expression-failed","Expression failed"),severity:"error",children:se.message}),ie&&(0,n.jsx)(E.F,{title:(0,g.t)("alerting.expression.title-expression-warning","Expression warning"),severity:"warning",children:ie.message}),(0,n.jsx)("div",{className:fe.expression.description,children:Qe}),Ue(Z)]}),Re&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W,{series:Ke,isAlertCondition:ce,isRecordingRule:Me}),!Me&&(0,n.jsx)("div",{className:fe.footer,children:(0,n.jsxs)(m.B,{direction:"row",alignItems:"center",children:[(0,n.jsx)(F.h,{}),(0,n.jsx)(R,{isCondition:!!ce,firing:Ye[S.cF.Firing].length,normal:Ye[S.cF.Inactive].length,seriesCount:Se})]})})]})]})})},N=20,W=({series:J,isAlertCondition:Z,isRecordingRule:te=!1})=>{const{pageItems:se,previousPage:ie,nextPage:ce,numberOfPages:re,pageStart:ue,pageEnd:X}=(0,B.W)(J,1,N),le=(0,d.of)(j),he=(0,M.PI)(J),fe=!he&&(0,i.jq)(J),Ce=re>1;return(0,n.jsxs)("div",{className:le.expression.results,children:[!he&&fe&&(0,n.jsx)("div",{children:se.map((Ae,_e)=>(0,n.jsx)(ee,{frame:Ae,index:ue+_e,isAlertCondition:Z},(0,s.uniqueId)()))}),!he&&!fe&&se.map((Ae,_e)=>(0,n.jsx)(k,{frame:Ae,index:ue+_e,isAlertCondition:Z,isRecordingRule:te},(0,s.uniqueId)())),he&&(0,n.jsx)("div",{className:(0,a.cx)(le.expression.noData,le.mutedText),children:(0,n.jsx)(g.x6,{i18nKey:"alerting.expression-result.no-data",children:"No data"})}),Ce&&(0,n.jsx)("div",{className:le.pagination.wrapper,"data-testid":"paginate-expression",children:(0,n.jsxs)(m.B,{children:[(0,n.jsx)(v.$n,{variant:"secondary",fill:"outline",onClick:ie,icon:"angle-left",size:"sm","aria-label":(0,g.t)("alerting.expression-result.aria-label-previouspage","previous-page")}),(0,n.jsx)(F.h,{}),(0,n.jsx)("span",{className:le.mutedText,children:(0,n.jsxs)(g.x6,{i18nKey:"alerting.expression-result.page-counter",values:{pageStart:ue,pageEnd:X,numPages:J.length},children:["{{pageStart}}"," - ","{{pageEnd}}"," of ","{{numPages}}"]})}),(0,n.jsx)(F.h,{}),(0,n.jsx)(v.$n,{variant:"secondary",fill:"outline",onClick:ce,icon:"angle-right",size:"sm","aria-label":(0,g.t)("alerting.expression-result.aria-label-nextpage","next-page")})]})})]})},R=({firing:J,normal:Z,isCondition:te,seriesCount:se})=>{const{mutedText:ie}=(0,d.of)(j);return se===0?(0,n.jsx)("span",{className:ie,children:(0,n.jsx)(g.x6,{i18nKey:"alerting.preview-summary.no-series",children:"No series"})}):te?(0,n.jsx)("span",{className:ie,children:`${se} series: ${J} firing, ${Z} normal`}):(0,n.jsx)("span",{className:ie,children:`${se} series`})};function G(J){const Z=J.filter(ie=>(0,M.Lm)(ie)===void 0).length,te={[S.cF.Firing]:J.filter(ie=>(0,M.Lm)(ie)!==void 0&&(0,M.Lm)(ie)!==0),[S.cF.Inactive]:J.filter(ie=>(0,M.Lm)(ie)===0)},se=J.length-Z;return{groupedByState:te,seriesCount:se}}const w=({refId:J,queryType:Z,onUpdateRefId:te,onRemoveExpression:se,onSetCondition:ie,alertCondition:ce,query:re})=>{const ue=(0,d.of)(j),X=(0,d.of)(v.my),[le,he]=(0,r.useState)(!1),Ce=le!==!1&&le==="refId";return(0,n.jsx)("header",{className:ue.header.wrapper,children:(0,n.jsxs)(m.B,{direction:"row",gap:.5,alignItems:"center",children:[(0,n.jsxs)(m.B,{direction:"row",gap:1,alignItems:"center",children:[!Ce&&(0,n.jsx)("button",{type:"button",className:(0,a.cx)(X,ue.editable),onClick:()=>he("refId"),children:(0,n.jsx)("div",{className:ue.expression.refId,children:J})}),Ce&&(0,n.jsx)(y.D,{autoFocus:!0,defaultValue:J,minWidth:5,onFocus:Ae=>Ae.target.select(),onBlur:Ae=>{te(Ae.currentTarget.value),he(!1)}}),(0,n.jsx)("div",{children:(0,O.NI)(Z)})]}),(0,n.jsx)(F.h,{}),(0,n.jsx)(V.a,{refId:J,onSetCondition:()=>ie(re.refId),isCondition:ce}),(0,n.jsx)(u.K,{name:"trash-alt",variant:"secondary",className:ue.mutedIcon,onClick:se,tooltip:(0,g.t)("alerting.header.tooltip-remove",'Remove expression "{{refId}}"',{refId:J})})]})})},_=()=>(0,n.jsx)("span",{children:"{"}),Q=()=>(0,n.jsx)("span",{children:"}"}),ae=()=>(0,n.jsx)("span",{children:'"'}),q=()=>(0,n.jsx)("span",{children:"="});function k({frame:J,index:Z,isAlertCondition:te,isRecordingRule:se}){const ie=(0,d.of)(j),ce=(0,M.Jw)(J)||"Series "+Z,re=(0,M.Lm)(J),ue=(0,M.JQ)(J),X=Object.entries(ue),le=X.length>0,he=te&&re!==0,fe=te&&re===0,Ce=`${le?"":ce}${le?`{${(0,M.h6)(ue)}}`:""}`,Ae=!se;return(0,n.jsx)("div",{className:ie.expression.resultsRow,children:(0,n.jsxs)(m.B,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)("div",{className:ie.expression.resultLabel,title:Ce,children:(0,n.jsx)(p.E,{variant:"code",children:le?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_,{}),X.map(([_e,Xe],De)=>(0,n.jsxs)(p.E,{variant:"body",children:[(0,n.jsx)("span",{className:ie.expression.labelKey,children:_e}),(0,n.jsx)(q,{}),(0,n.jsx)(ae,{}),(0,n.jsx)("span",{className:ie.expression.labelValue,children:Xe}),(0,n.jsx)(ae,{}),De<X.length-1&&(0,n.jsx)("span",{children:", "})]},(0,s.uniqueId)())),(0,n.jsx)(Q,{})]}):(0,n.jsx)("span",{className:ie.expression.labelKey,children:Ce})})}),(0,n.jsx)("div",{className:ie.expression.resultValue,children:(0,M.Cs)(re)}),Ae&&(0,n.jsxs)(n.Fragment,{children:[he&&(0,n.jsx)(I.C,{state:S.cF.Firing,size:"sm"}),fe&&(0,n.jsx)(I.C,{state:S.cF.Inactive,size:"sm"})]})]})})}const ee=({frame:J,index:Z})=>{const te=(0,d.of)(j),se=J.fields[1],ie=se.labels,re=se.config?.displayNameFromDS??(ie?(0,M.h6)(se.labels??{}):"Series "+Z),ue=J.fields[0].values,X=he=>J.fields[0].values[he],le=he=>J.fields[1].values[he];return(0,n.jsx)("div",{className:te.expression.resultsRow,children:(0,n.jsxs)(m.B,{direction:"row",alignItems:"center",children:[(0,n.jsx)("span",{className:(0,a.cx)(te.mutedText,te.expression.resultLabel),title:re,children:re}),(0,n.jsx)("div",{className:te.expression.resultValue,children:(0,n.jsx)(U.B,{placement:"right",wrapperClassName:te.timeseriesTableWrapper,content:(0,n.jsxs)("table",{className:te.timeseriesTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)(g.x6,{i18nKey:"alerting.timeseries-row.timestamp",children:"Timestamp"})}),(0,n.jsx)("th",{children:(0,n.jsx)(g.x6,{i18nKey:"alerting.timeseries-row.value",children:"Value"})})]})}),(0,n.jsx)("tbody",{children:ue.map((he,fe)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:te.mutedText,children:(0,o.LE)(X(fe))}),(0,n.jsx)("td",{className:te.expression.resultValue,children:le(fe)})]},fe))})]}),children:(0,n.jsx)("span",{children:(0,n.jsx)(g.x6,{i18nKey:"alerting.timeseries-row.time-series-data",children:"Time series data"})})})})]})})},j=J=>({expression:{wrapper:(0,a.css)({display:"flex",border:`solid 1px ${J.colors.border.medium}`,flex:1,flexBasis:"400px",borderRadius:J.shape.radius.default}),stack:(0,a.css)({display:"flex",flexDirection:"column",flexWrap:"nowrap",gap:0,width:"100%",minWidth:"0"}),classic:(0,a.css)({maxWidth:"100%"}),nonClassic:(0,a.css)({maxWidth:"640px"}),alertCondition:(0,a.css)({}),body:(0,a.css)({padding:J.spacing(1),flex:1}),description:(0,a.css)({marginBottom:J.spacing(1),fontSize:J.typography.size.xs,color:J.colors.text.secondary}),refId:(0,a.css)({fontWeight:J.typography.fontWeightBold,color:J.colors.primary.text}),results:(0,a.css)({display:"flex",flexDirection:"column",flexWrap:"nowrap",borderTop:`solid 1px ${J.colors.border.medium}`}),noResults:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"center"}),resultsRow:(0,a.css)({padding:`${J.spacing(.75)} ${J.spacing(1)}`,"&:nth-child(odd)":{backgroundColor:J.colors.background.secondary},"&:hover":{backgroundColor:J.colors.background.canvas}}),labelKey:(0,a.css)({color:J.isDark?"#73bf69":"#56a64b"}),labelValue:(0,a.css)({color:J.isDark?"#ce9178":"#a31515"}),resultValue:(0,a.css)({textAlign:"right"}),resultLabel:(0,a.css)({flex:1,overflowX:"auto",display:"inline-block",whiteSpace:"nowrap"}),noData:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:J.spacing()})},mutedText:(0,a.css)({color:J.colors.text.secondary,fontSize:"0.9em",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),header:{wrapper:(0,a.css)({background:J.colors.background.secondary,padding:`${J.spacing(.5)} ${J.spacing(1)}`,borderBottom:`solid 1px ${J.colors.border.weak}`})},footer:(0,a.css)({background:J.colors.background.secondary,padding:J.spacing(1),borderTop:`solid 1px ${J.colors.border.weak}`}),draggableIcon:(0,a.css)({cursor:"grab"}),mutedIcon:(0,a.css)({color:J.colors.text.secondary}),editable:(0,a.css)({padding:`${J.spacing(.5)} ${J.spacing(1)}`,border:`solid 1px ${J.colors.border.weak}`,borderRadius:J.shape.radius.default,display:"flex",flexDirection:"row",alignItems:"center",gap:J.spacing(1),cursor:"pointer"}),timeseriesTableWrapper:(0,a.css)({maxHeight:"500px",overflowY:"scroll"}),timeseriesTable:(0,a.css)({tableLayout:"auto",width:"100%",height:"100%","td, th":{padding:J.spacing(1)},td:{background:J.colors.background.primary},th:{background:J.colors.background.secondary},tr:{borderBottom:`1px solid ${J.colors.border.medium}`,"&:last-of-type":{borderBottom:"none"}}}),pagination:{wrapper:(0,a.css)({borderTop:`1px solid ${J.colors.border.medium}`,padding:J.spacing()})}})},52042:(ne,A,e)=>{"use strict";e.d(A,{L:()=>c});var n=e(74848),a=e(22803),s=e(63142),l=e(97095),r=e(79233);const c=({label:o,htmlFor:h,children:f,fill:g})=>{const u=(0,s.of)(i);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.C,{children:[(0,n.jsx)(r.c,{htmlFor:h,width:12,className:u.label,children:o}),f,g&&(0,n.jsx)("div",{className:u.fill,children:(0,n.jsx)(r.c,{children:""})})]})})},i=o=>({label:(0,a.css)({color:o.colors.primary.text}),fill:(0,a.css)({flexGrow:1,marginBottom:o.spacing(.5)})})},52043:(ne,A,e)=>{"use strict";e.d(A,{u:()=>l});var n=e(5556),a=e(43173),s=e(36490);function l(r){let c=`/d/${r.uid}`;r.uid||(c="/dashboard/new"),r.isSnapshot&&(c=`/dashboard/snapshot/${r.uid}`),r.soloRoute&&(c=`/d-solo/${r.uid}`),r.slug&&(c+=`/${r.slug}`),r.subPath&&(c+=r.subPath),r.render&&(c="/render"+c,r.updateQuery={...r.updateQuery,width:r.updateQuery?.width||1e3,height:r.updateQuery?.height||500,tz:r.timeZone}),r.isHomeDashboard&&(c="/");const i=r.currentQueryParams?(0,s.SE)(r.currentQueryParams):{};if(delete i.shareView,r.updateQuery)for(const h in r.updateQuery)r.updateQuery[h]===null||r.updateQuery[h]===void 0?delete i[h]:i[h]=r.updateQuery[h];const o=n.kM.renderUrl(c,i);return r.absolute?a.$.appUrl+o.slice(1):o}},52060:(ne,A,e)=>{"use strict";e.d(A,{N:()=>n});function n({url:a,source:s,transformSourceMapURL:l=!1,transformAssets:r=!0}){const c=a.split("/public/plugins/"),i=c[0],o=c[1].split("/")[0];let h=s;return r&&(h=h.replace(/(\/?)(public\/plugins)/g,`${i}/$2`),h=h.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${i}/public/$2$3`)),l&&(h=h.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${i}/public/plugins/${o}/$2.map`)),h}},52161:(ne,A,e)=>{"use strict";e.d(A,{$e:()=>ee,AL:()=>Q,EV:()=>G,Eb:()=>_,Gb:()=>Xe,Iz:()=>se,TG:()=>W,Zw:()=>J,at:()=>Ce,bD:()=>K,bS:()=>le,bt:()=>X,cl:()=>fe,cy:()=>M,gR:()=>N,hP:()=>re,hY:()=>d,iV:()=>F,k5:()=>ie,lS:()=>R,o_:()=>_e,of:()=>O,oh:()=>k,ol:()=>D,qi:()=>C,r3:()=>j,r6:()=>b,sq:()=>L,v0:()=>w,vv:()=>x,w5:()=>te,y9:()=>ce,yc:()=>ae,z2:()=>q});var n=e(78282),a=e(15130),s=e(66513),l=e(88114),r=e(84266),c=e(11257),i=e(86791),o=e(42581),h=e(91984),f=e(76070),g=e(17349),u=e(93395),E=e(5358),v=e(54),p=e(15633),m=e(182),y=e(29609);const d="grafana",x="-- Grafana --",b={uid:i.l$,name:d,ruleSourceType:"grafana"};var D=(De=>(De.Alertmanager="alertmanager",De.Loki="loki",De.Prometheus="prometheus",De.AmazonPrometheus="grafana-amazonprometheus-datasource",De.AzurePrometheus="grafana-azureprometheus-datasource",De))(D||{});function C(){const De=a.TP.hasPermission(c.w.AlertingRuleExternalRead),Me=a.TP.hasPermission(c.w.AlertingRuleExternalWrite);return!De&&!Me?[]:(0,m.k7)().filter(Te=>fe(Te.type)).filter(Te=>re(Te)).sort((Te,$e)=>Te.name.localeCompare($e.name))}function P(De){return q(De)?"grafana":De.uid??De.id}function T(De){return C().find(Me=>Me.name===De)}function O(De){return C().find(Me=>Me.uid===De)}function S(){return(0,m.k7)().filter(B).sort((De,Me)=>De.name.localeCompare(Me.name))}function B(De){return De.type==="alertmanager"}function K(De){return De.type==="alertmanager"}function U(){return S().filter(De=>De.jsonData.handleGrafanaManagedAlerts)}function F(De){return De.jsonData.handleGrafanaManagedAlerts===!0}const I={name:d,imgUrl:o,hasConfigurationAPI:!0};function V(){return[I,...S().map(De=>({name:De.name,displayName:De.name,imgUrl:De.meta.info.logos.small,meta:De.meta}))]}function M(De){const Me=(0,u.W)(De),Te=Me.availableExternalDataSources.filter(Ve=>Ve.handleGrafanaManagedAlerts),$e=Me.availableInternalDataSources,{currentData:Re}=h.m.endpoints.getGrafanaAlertingConfigurationStatus.useQuery();switch(Re?.alertmanagersChoice){case r.nA.Internal:return $e;case r.nA.External:return Te;default:return[...$e,...Te]}}function L(De){const Me=[],Te=[],$e={instance:v.HL.read,notification:v.VQ.read,silence:v.nU.read};if([...Object.values($e).flatMap(Ve=>Ve.grafana),...f.w6,...l.Im,...g.X,...s.GK].some(Ve=>a.TP.hasPermission(Ve))&&Me.push(I),a.TP.hasPermission($e[De].external)){const Ve=S().map(Se=>({name:Se.name,displayName:Se.name,imgUrl:Se.meta.info.logos.small,meta:Se.meta,hasConfigurationAPI:(0,E.Kh)(Se.jsonData),handleGrafanaManagedAlerts:Se.jsonData.handleGrafanaManagedAlerts}));Te.push(...Ve)}return{availableInternalDataSources:Me,availableExternalDataSources:Te}}function N(){const De=C().map(Me=>Me.name);return a.TP.hasPermission(c.w.AlertingRuleRead)&&De.push(d),De}function W(){return C().map(De=>({name:De.name,uid:De.uid,ruleSourceType:"datasource"}))}function R(){const De=C();return a.TP.hasPermission(c.w.AlertingRuleRead)&&De.unshift(d),De}function G(De){return _(De)?De.name:De}function w(De){return _(De)?De.uid:d}function _(De){return De!==d}function Q(De){return De!==d&&j(De)?.jsonData?.implementation===r.Oz.prometheus}function ae(De){return De.readOnly===!0}function q(De){return De===d}function k(De){return(0,m.k7)().find(Me=>Me.name===De)}function ee(De){return(0,m.k7)().find(Me=>Me.uid===De)}function j(De){return(0,m.k7)().filter(B).find(Me=>Me.name===De)}function J(De){return De===d?d:k(De)}function Z(De){if(De===d)return d;const Me=k(De);if(!Me)throw new Error(`Datasource "${De}" not found`);return String(Me.id)}function te(De){if(De===d)return d;if((0,p.b)(De))return De;const Me=k(De);if(!Me)throw new Error(`Datasource "${De}" not found`);return Me.uid}function se(De){if("uid"in De)return De.uid;if(De.rulesSourceName===d)return i.l$;const Me=T(De.rulesSourceName);if(Me)return Me.uid}function ie(){return(0,n.l)().getList({alerting:!0})[0]}function ce(){const De=(0,n.l)().getInstanceSettings("default");return De?.meta.alerting??!1?De:ie()}function re(De){return De.jsonData.manageAlerts!==!1}function ue(De){return De.jsonData.allowAsRecordingRulesTarget!==!1}function X(De){return(0,y.A4)(De)?{uid:i.l$,name:d,ruleSourceType:"grafana"}:{uid:te(De.ruleSourceName),name:De.ruleSourceName,ruleSourceType:"datasource"}}function le(De){return he.find(Me=>Me===De)!==void 0}const he=["prometheus","grafana-amazonprometheus-datasource","grafana-azureprometheus-datasource"];function fe(De){return Ce.find(Me=>Me===De)!==void 0}const Ce=["loki",...he];function Ae(De){return De===d||fe(De)}const _e=[d,...Ce];function Xe(De){return le(De.type)&&ue(De)}},52193:(ne,A,e)=>{"use strict";e.d(A,{A4:()=>l,CO:()=>i});var n=e(8934),a=e(11594),s=e(65642);function l(){const o=s.$W.panels;return Object.keys(o).filter(h=>o[h].hideFromList===!1).map(h=>o[h]).sort((h,f)=>h.sort-f.sort)}function r(){return l().filter(o=>!!o.skipDataQuery)}function c(){return l().filter(o=>!o.skipDataQuery)}function i(o,h,f){if(!h.length)return o.filter(p=>p.state===a.pn.deprecated?f===p.id:!0);const g=(0,n.xb)(h).toLowerCase(),u=[],E=[],v="graph".startsWith(g);for(const p of o){if(p.state===a.pn.deprecated&&f!==p.id)continue;const y=p.name.toLowerCase().indexOf(g);y===0?u.push(p):y>0?E.push(p):v&&p.id==="timeseries"&&u.push(p)}return u.concat(E)}},52205:(ne,A,e)=>{"use strict";e.d(A,{bk:()=>i,pv:()=>f,iF:()=>h});var n=e(2543),a=e(38809),s=e(53543),l=e(42954);class r{constructor(){this.properties=[]}addCustomEditor(u){return this.properties.push(u),this}getRegistry(){return new l.O(()=>this.properties)}getItems(){return this.properties}}var c=e(28105);class i extends r{addNumberInput(u){return this.addCustomEditor({...u,id:u.path,override:s.D.get("number").editor,editor:s.D.get("number").editor,process:a.m0,shouldApply:u.shouldApply??(()=>!0),settings:u.settings||{}})}addSliderInput(u){return this.addCustomEditor({...u,id:u.path,override:s.D.get("slider").editor,editor:s.D.get("slider").editor,process:a.m0,shouldApply:u.shouldApply??(()=>!0),settings:u.settings||{}})}addTextInput(u){return this.addCustomEditor({...u,id:u.path,override:s.D.get("text").editor,editor:s.D.get("text").editor,process:a.OU,shouldApply:u.shouldApply??(()=>!0),settings:u.settings||{}})}addSelect(u){return this.addCustomEditor({...u,id:u.path,override:s.D.get("select").editor,editor:s.D.get("select").editor,process:a.hL,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{options:[]}})}addRadio(u){return this.addCustomEditor({...u,id:u.path,override:s.D.get("radio").editor,editor:s.D.get("radio").editor,process:a.hL,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{options:[]}})}addBooleanSwitch(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("boolean").editor,override:s.D.get("boolean").editor,process:a.FM,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{}})}addColorPicker(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("color").editor,override:s.D.get("color").editor,process:a.hS,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{}})}addUnitPicker(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("unit").editor,override:s.D.get("unit").editor,process:a.lG,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{}})}addFieldNamePicker(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("field-name").editor,override:s.D.get("field-name").editor,process:a.hS,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{}})}addGenericEditor(u,E){return this.addCustomEditor({...u,id:u.path,editor:E,override:E,process:a.hS,shouldApply:u.shouldApply?u.shouldApply:()=>!0,settings:u.settings||{}})}}class o{constructor(u){this.cfg=u,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=E=>{const v=this.cfg.values;return v?v(E):{getValue:p=>E.getValue(`${this.path}.${p}`),onChange:(p,m)=>E.onChange(`${this.path}.${p}`,m)}},this.path=u.path,this.category=u.category,this.defaultValue=this.getDefaultValue(u)}getDefaultValue(u){let E=(0,c.Gv)(u.defaultValue)?(0,n.cloneDeep)(u.defaultValue):{};const v=new f;u.build(v,{data:[]});for(const p of v.getItems())p.defaultValue!=null&&(0,n.set)(E,p.path,p.defaultValue);return E}}function h(g){return(0,c.Gv)(g)&&"id"in g&&g.id==="nested-panel-options"}class f extends r{addNestedOptions(u){const E=new o(u);return this.addCustomEditor(E)}addNumberInput(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("number").editor})}addSliderInput(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("slider").editor})}addTextInput(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("text").editor})}addStringArray(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("strings").editor})}addSelect(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("select").editor})}addMultiSelect(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("multi-select").editor})}addRadio(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("radio").editor})}addBooleanSwitch(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("boolean").editor})}addColorPicker(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("color").editor,settings:u.settings||{}})}addTimeZonePicker(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("timezone").editor,settings:u.settings||{}})}addUnitPicker(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("unit").editor})}addFieldNamePicker(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("field-name").editor})}addDashboardPicker(u){return this.addCustomEditor({...u,id:u.path,editor:s.D.get("dashboard-uid").editor})}}},52258:(ne,A,e)=>{"use strict";e.d(A,{t:()=>n});function n(a){let s=5381;for(let l=0;l<a.length;l++)s=s*33^a.charCodeAt(l);return s>>>0}},52308:(ne,A,e)=>{"use strict";e.d(A,{s:()=>a});var n=e(27633);function a(s){return n.Ay.format(s).replace(/(\$ \{ .* \})|(\$ __)|(\$ \w+)/g,l=>l.replace(/\s/g,""))}},52315:(ne,A,e)=>{"use strict";e.d(A,{Uw:()=>a,gv:()=>n.gv,oK:()=>M,u$:()=>U,To:()=>I.T,oF:()=>ee.oF,se:()=>L.s,YW:()=>ee.YW});var n=e(11194);const a=[{name:"AVG"},{name:"COUNT"},{name:"MAX"},{name:"MIN"},{name:"SUM"}],s={name:"Interval",required:!0,options:()=>Promise.resolve([{label:"$__interval",value:"$__interval"}])},l={name:"Fill",required:!1,options:()=>Promise.resolve([{label:"0",value:"0"},{label:"NULL",value:"NULL"},{label:"previous",value:"previous"}])},r=se=>[{name:"$__timeGroup",description:"Time grouping function",parameters:[se,s,l]},{name:"$__timeGroupAlias",description:"Time grouping function with time as alias",parameters:[se,s,l]},{name:"$__time",description:"An expression to rename the column to time",parameters:[se]},{name:"$__timeEpoch",parameters:[se]},{name:"$__unixEpochGroup",parameters:[se,s,l]},{name:"$__unixEpochGroupAlias",parameters:[se,s,l]}],c=["$__time","$__timeEpoch","$__timeFilter","$__timeFrom","$__timeTo","$__timeGroup","$__timeGroupAlias","$__unixEpochFilter","$__unixEpochNanoFilter","$__unixEpochNanoFrom","$__unixEpochNanoTo","$__unixEpochGroup","$__unixEpochGroupAlias"];var i=e(13288),o=e(75505),h=e(81160),f=e(1906),g=e(94452),u=e(22592),E=e(88673),v=e(41778),p=e(36580),m=e(2863),y=e(27489),d=e(68143),x=e(38866),b=e(2543);class D{transformMetricFindResponse(ie){const ce=[],re=ie.fields.find(X=>X.name==="__text"),ue=ie.fields.find(X=>X.name==="__value");if(re&&ue)for(let X=0;X<re.values.length;X++)ce.push({text:""+re.values[X],value:""+ue.values[X]});else for(const X of ie.fields)for(const le of X.values)ce.push({text:le});return(0,b.uniqBy)(ce,"text")}}var C=e(74848),P=e(22803),T=e(96540),O=e(92745),S=e(63142),B=e(6975);const K=(0,T.lazy)(()=>e.e(168).then(e.bind(e,47805)));function U(se){const ie=(0,S.of)(F);return(0,C.jsx)(T.Suspense,{fallback:(0,C.jsx)(B._,{text:(0,O.t)("grafana-sql.components.sql-query-editor-lazy.text-loading-editor","Loading editor"),className:ie.container}),children:(0,C.jsx)(K,{...se})})}const F=se=>({container:(0,P.css)({marginBottom:"unset",marginLeft:se.spacing(1)})});var I=e(81045);function V(se){const ie=typeof se.rawQuery=="string"?se.rawQuery:null;if(!ie)return se;const ce=(0,I.T)({refId:"Annotation",...se.target??{},rawSql:ie});return{...se,rawQuery:void 0,workspace:void 0,subscription:void 0,queryType:void 0,target:ce}}class M extends p.iy{constructor(ie,ce=(0,m.w)()){super(ie),this.templateSrv=ce,this.interpolateVariable=(ue,X)=>typeof ue=="string"?X.multi||X.includeAll?this.getQueryModel().quoteLiteral(ue):String(ue).replace(/'/g,"''"):typeof ue=="number"?ue:Array.isArray(ue)?ue.map(he=>this.getQueryModel().quoteLiteral(he)).join(","):ue,this.name=ie.name,this.responseParser=new D,this.id=ie.id;const re=ie.jsonData||{};this.interval=re.timeInterval||"1m",this.db=this.getDB(),this.preconfiguredDatabase=re.database??"",this.annotations={prepareAnnotation:V,QueryEditor:U}}getResponseParser(){return this.responseParser}interpolateVariablesInQueries(ie,ce){let re=ie;return ie&&ie.length>0&&(re=ie.map(ue=>({...ue,datasource:this.getRef(),rawSql:this.templateSrv.replace(ue.rawSql,ce,this.interpolateVariable),rawQuery:!0}))),re}filterQuery(ie){return!ie.hide}applyTemplateVariables(ie,ce){return{refId:ie.refId,datasource:this.getRef(),rawSql:this.templateSrv.replace(ie.rawSql,ce,this.interpolateVariable),format:ie.format}}query(ie){const ce=this.checkForDatabaseIssue(ie);if(ce){const re=new Error(ce);return(0,i.$)(()=>re)}return ie.targets.forEach(re=>{ie.app===f.Jk.Dashboard||ie.app===f.Jk.PanelViewer||(0,y.rR)("grafana_sql_query_executed",{datasource:re.datasource?.type,editorMode:re.editorMode,format:re.format,app:ie.app})}),super.query(ie)}checkForDatabaseIssue(ie){if(this.type==="grafana-postgresql-datasource"&&!this.preconfiguredDatabase)return`You do not currently have a default database configured for this data source. Postgres requires a default
             database with which to connect. Please configure one through the Data Sources Configuration page, or if you
             are using a provisioning file, update that configuration file with a default database.`;if(ie.app!==f.Jk.Explore&&this.preconfiguredDatabase){for(const ce of ie.targets)if(ce.editorMode===v.lX.Builder&&ce.dataset&&ce.dataset!==this.preconfiguredDatabase)return`The configuration for this panel's data source has been modified. The previous database used in this panel's
                   saved query is no longer available. Please update the query to use the new database option.
                   Previous query parameters will be preserved until the query is updated.`}}async metricFindQuery(ie,ce){const re=ce?.range;if(re==null)return[];let ue="tempvar";ce&&ce.variable&&ce.variable.name&&(ue=ce.variable.name);const X={...ce?.scopedVars,...(0,g.c)({query:ie,wildcardChar:"%",options:ce})},le=this.templateSrv.replace(ie,X,this.interpolateVariable),he={refId:ue,datasource:this.getRef(),rawSql:le,format:n.gv.Table};let fe;try{fe=await this.runMetaQuery(he,re)}catch(Ce){throw console.error(Ce),new Error("error when executing the sql query")}return this.getResponseParser().transformMetricFindResponse(fe)}async runSql(ie,ce){const re=(0,u.E2)(),ue=await this.runMetaQuery({rawSql:ie,format:n.gv.Table,refId:ce?.refId},re);return new E.R(ue)}runMetaQuery(ie,ce){const re=ie.refId||"meta",ue=[{...ie,datasource:ie.datasource||this.getRef(),refId:re}];return(0,o.s)((0,d.AI)().fetch({url:"/api/ds/query",method:"POST",headers:this.getRequestHeaders(),data:{from:ce.from.valueOf().toString(),to:ce.to.valueOf().toString(),queries:ue},requestId:re}).pipe((0,h.T)(X=>(0,x.bE)(X,ue).data[0]??{fields:[]})))}targetContainsTemplate(ie){let ce=ie.rawSql;return c.forEach(re=>{ce=ce?.replace(re,"")||""}),this.templateSrv.containsTemplate(ce)}}var L=e(52308);function N({value:se,defaultValue:ie,onChange:ce,width:re}){const[ue,X]=useState(!1);return jsx(Input,{type:"number",placeholder:String(ie),value:ue?"":se,onChange:le=>{if(le.currentTarget.value?.trim()==="")X(!0),ce(ie);else{X(!1);const he=Number(le.currentTarget.value);Number.isNaN(he)||ce(he)}},width:re})}function W({labelWidth:se,onMaxLifetimeChanged:ie,jsonData:ce}){return jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.connection-limits.max-lifetime",children:"Max lifetime"})}),jsx(Tooltip,{content:jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.connection-limits.content-max-lifetime",children:"The maximum amount of time in seconds a connection may be reused. If set to 0, connections are reused forever."})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(NumberInput,{value:ce.connMaxLifetime,defaultValue:config.sqlConnectionLimits.connMaxLifetime,onChange:ie,width:se})})}function R({labelWidth:se,onMaxConnectionsChanged:ie,jsonData:ce}){return jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.connection-limits.max-open",children:"Max open"})}),jsx(Tooltip,{content:jsx("span",{children:jsxs(Trans,{i18nKey:"grafana-sql.components.connection-limits.content-max-open",children:["The maximum number of open connections to the database. If ",jsx("i",{children:"Max idle connections"})," is greater than 0 and the ",jsx("i",{children:"Max open connections"})," is less than ",jsx("i",{children:"Max idle connections"}),", then",jsx("i",{children:"Max idle connections"})," will be reduced to match the ",jsx("i",{children:"Max open connections"})," limit. If set to 0, there is no limit on the number of open connections."]})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(NumberInput,{value:ce.maxOpenConns,defaultValue:config.sqlConnectionLimits.maxOpenConns,onChange:ie,width:se})})}const G=se=>{const{onOptionsChange:ie,options:ce}=se,re=ce.jsonData,ue=re.maxIdleConnsAuto!==void 0?re.maxIdleConnsAuto:!1,X=Ae=>{const _e={...ce,jsonData:{...re,...Ae}};return ie(_e)},le=Ae=>_e=>{X({[Ae]:_e})},he=Ae=>{X(ue&&Ae?{maxOpenConns:Ae,maxIdleConns:Ae}:{maxOpenConns:Ae})},fe=()=>{let Ae,_e;ue?(_e=re.maxOpenConns,Ae=re.maxIdleConns):re.maxOpenConns!==void 0&&(_e=re.maxOpenConns,Ae=re.maxOpenConns),X({maxIdleConnsAuto:!ue,maxIdleConns:Ae,maxOpenConns:_e})},Ce=40;return jsxs(ConfigSubSection,{title:t("grafana-sql.components.connection-limits.title-connection-limits","Connection limits"),children:[jsx(MaxOpenConnectionsField,{labelWidth:Ce,onMaxConnectionsChanged:he,jsonData:re}),jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.connection-limits.auto-max-idle",children:"Auto max idle"})}),jsx(Tooltip,{content:jsx("span",{children:jsxs(Trans,{i18nKey:"grafana-sql.components.connection-limits.content-auto-max-idle",values:{defaultMaxIdle:config.sqlConnectionLimits.maxIdleConns},children:["If enabled, automatically set the number of ",jsx("i",{children:"Maximum idle connections"})," to the same value as",jsx("i",{children:" Max open connections"}),". If the number of maximum open connections is not set it will be set to the default (","{{defaultMaxIdle}}",")."]})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(Switch,{value:ue,onChange:fe})}),jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.connection-limits.max-idle",children:"Max idle"})}),jsx(Tooltip,{content:jsx("span",{children:jsxs(Trans,{i18nKey:"grafana-sql.components.connection-limits.content-max-idle",children:["The maximum number of connections in the idle connection pool.If ",jsx("i",{children:"Max open connections"})," is greater than 0 but less than the ",jsx("i",{children:"Max idle connections"}),", then the ",jsx("i",{children:"Max idle connections"})," ","will be reduced to match the ",jsx("i",{children:"Max open connections"})," limit. If set to 0, no idle connections are retained."]})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:ue?jsx(InlineLabel,{width:Ce,children:ce.jsonData.maxIdleConns}):jsx(NumberInput,{value:re.maxIdleConns,defaultValue:config.sqlConnectionLimits.maxIdleConns,onChange:Ae=>{le("maxIdleConns")(Ae)},width:Ce})}),jsx(MaxLifetimeField,{labelWidth:Ce,onMaxLifetimeChanged:le("connMaxLifetime"),jsonData:re})]})},w=()=>{const se=useStyles2(_);return jsx("hr",{className:se.horizontalDivider})},_=se=>({horizontalDivider:css({borderTop:`1px solid ${se.colors.border.weak}`,margin:se.spacing(2,0),width:"100%"})}),Q=se=>{const{editorProps:ie,showCACert:ce,showKeyPair:re=!0}=se,{secureJsonFields:ue}=ie.options;return jsxs(Fragment,{children:[re?jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.tlsssl-client-certificate",children:"TLS/SSL Client Certificate"})}),jsx(Tooltip,{content:jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.content-tlsssl-client-certificate",children:"To authenticate with an TLS/SSL client certificate, provide the client certificate here."})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(SecretTextArea,{placeholder:"-----BEGIN CERTIFICATE-----",cols:45,rows:7,isConfigured:ue&&ue.tlsClientCert,onChange:onUpdateDatasourceSecureJsonDataOption(ie,"tlsClientCert"),onReset:()=>{updateDatasourcePluginResetOption(ie,"tlsClientCert")}})}):null,ce?jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.tlsssl-root-certificate",children:"TLS/SSL Root Certificate"})}),jsx(Tooltip,{content:jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.content-tlsssl-root-certificate",children:"If the selected TLS/SSL mode requires a server root certificate, provide it here"})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(SecretTextArea,{placeholder:"-----BEGIN CERTIFICATE-----",cols:45,rows:7,isConfigured:ue&&ue.tlsCACert,onChange:onUpdateDatasourceSecureJsonDataOption(ie,"tlsCACert"),onReset:()=>{updateDatasourcePluginResetOption(ie,"tlsCACert")}})}):null,re?jsx(Field,{label:jsx(Label,{children:jsxs(Stack,{gap:.5,children:[jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.tlsssl-client-key",children:"TLS/SSL Client Key"})}),jsx(Tooltip,{content:jsx("span",{children:jsx(Trans,{i18nKey:"grafana-sql.components.tlssecrets-config.content-tlsssl-client-key",children:"To authenticate with a client TLS/SSL certificate, provide the key here."})}),children:jsx(Icon,{name:"info-circle",size:"sm"})})]})}),children:jsx(SecretTextArea,{placeholder:"-----BEGIN RSA PRIVATE KEY-----",cols:45,rows:7,isConfigured:ue&&ue.tlsClientKey,onChange:onUpdateDatasourceSecureJsonDataOption(ie,"tlsClientKey"),onReset:()=>{updateDatasourcePluginResetOption(ie,"tlsClientKey")}})}):null]})};var ae=e(25992);const q=(0,ae.DW)("features.plugins.sql");function k({onOptionsChange:se,options:ie}){useEffect(()=>{const ce=ie.jsonData;let re={...ie},ue=!1;if(ie.database&&(sqlPluginLogger.logDebug(`Migrating from options.database with value ${ie.database} for ${ie.name}`),re.database="",re.jsonData={...ce,database:ie.database},ue=!0),ce.maxOpenConns===void 0&&ce.maxIdleConns===void 0&&ce.maxIdleConnsAuto===void 0){const{maxOpenConns:X,maxIdleConns:le}=config.sqlConnectionLimits;sqlPluginLogger.logDebug(`Setting default max open connections to ${X} and setting max idle connection to ${le}`),re.jsonData={...re.jsonData,maxOpenConns:X,maxIdleConns:le,maxIdleConnsAuto:!0},ue=!0}if(ce.connMaxLifetime===void 0){const{connMaxLifetime:X}=config.sqlConnectionLimits;re.jsonData={...re.jsonData,connMaxLifetime:X},ue=!0}ue&&se(re)},[se,ie])}var ee=e(25274),j=e(36656),J=e(22480);const Z=J.Y.reduce((se,ie)=>(se[ie.code]=async()=>await e(55644)(`./${ie.code}/grafana-sql.json`),se),{}),te=async se=>(await Z[se]()).default},52513:(ne,A,e)=>{"use strict";e.d(A,{T:()=>f});var n=e(57746),a=e(82611),s=e(75226);const l=(0,n.Sn)("mod+["),r=(0,n.Sn)("shift+tab"),c=(0,n.Sn)("mod+]"),i="  ",o=(g,u,E)=>{const{startBlock:v,endBlock:p,selection:{start:{offset:m,key:y},end:{offset:d,key:x}}}=u.value;if(s.default.serialize(u.value)==="")return;g.preventDefault();const b=v.getFirstText();b&&m===0&&y===b.key&&d===b.text.length&&x===b.key||!v.equals(p)?h(u,"right"):u.insertText(i)},h=(g,u)=>{const E=g.value.selection,v=g.value.document.getLeafBlocksAtRange(E).toArray();if(u==="left")for(const p of v){const m=p.text.length-p.text.trimLeft().length,y=p.getFirstText().key,d={anchor:{key:y,offset:m,path:[]},focus:{key:y,offset:m,path:[]}};g.deleteBackwardAtRange(a.Range.create(d),Math.min(i.length,m))}else{const{startText:p}=g.value,m=p.text.slice(0,E.start.offset),y=/^\s*$/.test(m);for(const d of v)g.insertTextByKey(d.getFirstText().key,0,i);y&&g.moveStartBackward(i.length)}};function f(){return{onKeyDown(g,u,E){if(l(g)||r(g))g.preventDefault(),h(u,"left");else if(c(g))g.preventDefault(),h(u,"right");else if(g.key==="Tab")o(g,u,E);else return E();return!0}}}},52645:(ne,A,e)=>{"use strict";e.d(A,{c:()=>Me});var n=e(84691),a=e(9287),s=e(406),l=e(81160),r=e(739),c=e(64761),i=(Te=>(Te.Exemplar="exemplar",Te.TimeRegion="timeRegion",Te.Annotation="annotation",Te))(i||{});const o={id:c.F.convertFrameType,name:"Convert frame type",description:"Convert data frame(s) to another type.",operator:Te=>$e=>$e.pipe((0,l.T)(Re=>h(Te,Re)))};function h(Te,$e){const{targetType:Re}=Te;return Re==="exemplar"?$e.map(f):$e}function f(Te){return{...Te,name:"exemplar",meta:{...Te.meta,dataTopic:r.QR.Annotations,custom:{...Te.meta?.custom,resultType:"exemplar"}}}}var g=e(882),u=e(49297),E=e(359),v=e(57866);const p={id:c.F.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(Te,$e)=>Re=>{const Ke={};return Te.include&&(Ke.include={id:v.jR.byRefId,options:Te.include}),Te.exclude&&(Ke.exclude={id:v.jR.byRefId,options:Te.exclude}),Re.pipe(u.I.operator(Ke,$e))}};var m=e(68779),y=e(40041),d=e(16515),x=e(79319);const b={id:c.F.formatTime,name:"Format time",description:"Set the output format of a time field",defaultOptions:{timeField:"",outputFormat:"",useTimezone:!0},isApplicable:Te=>{for(const $e of Te)for(const Re of $e.fields)if(Re.type==="time")return x.M.Applicable;return x.M.NotApplicable},isApplicableDescription:"The Format time transformation requires a time field to work. No time field could be found.",operator:(Te,$e)=>Re=>Re.pipe((0,l.T)(Ke=>D(Te,Ke,$e)))},D=({timeField:Te,outputFormat:$e,timezone:Re},Ke,Ve)=>!Array.isArray(Ke)||Ke.length===0?Ke:((0,d.Fm)(Ke),$e=Ve?.interpolate($e)??$e,Ke.map(Se=>({...Se,fields:Se.fields.map(Ye=>(Ye.state?.displayName===Te&&(Ye=(0,s.Xv)(Ye,$e,{timeZone:Re})),Ye))})));var C=e(47433),P=e(25260),T=e(95004),O=e(36638),S=e(91146);const B="Time",K="Time",U="Value",F=x.N.Empty,I=window.grafanaBootData?.settings?.featureToggles?.dataplaneFrontendFallback,V={id:c.F.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:B,rowField:K,valueField:U},isApplicable:Te=>{let $e=0;for(const Re of Te)$e+=Re.fields.length;return $e>=3?x.M.Applicable:x.M.NotApplicable},isApplicableDescription:Te=>{let $e=0;for(const Re of Te)$e+=Re.fields.length;return`Grouping to matrix requires at least 3 fields to work. Currently there are ${$e} fields.`},operator:(Te,$e)=>Re=>Re.pipe((0,l.T)(Ke=>{const Ve=Te.columnField||B,Se=Te.rowField||K,Ye=Te.valueField||U,Ue=Te.emptyValue||F;if(Ke.length!==1)return Ke;const je=Ke[0],Qe=L(je,Ve),He=L(je,Se),Je=L(je,Ye),de=`${Se}\\${Ve}`;if(!Qe||!He||!Je)return Ke;const ve=M(Qe.values),me=M(He.values),xe={};for(let Pe=0;Pe<Je.values.length;Pe++){const Oe=Qe.values[Pe],We=He.values[Pe],Fe=Je.values[Pe];xe[Oe]||(xe[Oe]={}),xe[Oe][We]=Fe}const Ee=[{name:de,values:me,type:He.type,config:{...He.config}}];for(const Pe of ve){let Oe=[];for(const We of me){const Fe=xe[Pe][We]??(Je.type===T.PU.frame?void 0:(0,S.v)(Ue));Oe.push(Fe)}I&&typeof Pe=="number"&&(Je.config={...Je.config,displayNameFromDS:void 0}),delete Je.config.displayName,Ee.push({name:Pe?.toString()??null,values:Oe,config:Je.config,type:Je.type})}return[{fields:Ee,length:me.length}]}))};function M(Te){const $e=new Set(Te);return Array.from($e)}function L(Te,$e){for(let Re=0;Re<Te.fields.length;Re++){const Ke=Te.fields[Re];let Ve;if(I?Ve=O.sJ.get(v.Ct.byName).get($e)(Ke,Te,[Te]):Ve=$e===(0,d.Ct)(Ke),Ve)return Ke}return null}var N=e(74261),W=e(6684),R=e(79184);const G=10,w={id:c.F.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:G},operator:(Te,$e)=>Re=>Re.pipe((0,l.T)(Ke=>{let Ve=G;return Te.limitField!==void 0&&(typeof Te.limitField=="string"?Ve=parseInt(Te.limitField,10):Ve=Te.limitField),Ke.map(Se=>Se.length>Ve?{...Se,fields:Se.fields.map(Ye=>({...Ye,state:{...Ye.state,calcs:void 0},values:Ve>=0?Ye.values.slice(0,Ve):Ye.values.slice(Ye.values.length+Ve,Ye.values.length)})),length:Math.abs(Ve)}:Se)}))};var _=e(33023),Q=e(1027),ae=e(95575);const q={id:c.F.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:Te=>$e=>$e.pipe((0,l.T)(Re=>{const Ke=k(Te.renameByName);return!Array.isArray(Re)||Re.length===0?Re:Re.map(Ve=>({...Ve,fields:Ke(Ve)}))}))},k=Te=>$e=>!Te||Object.keys(Te).length===0?$e.fields:$e.fields.map(Re=>{const Ke=(0,d.Ct)(Re,$e),Ve=Te[Ke];return typeof Ve!="string"||Ve.length===0?Re:{...Re,config:{...Re.config,displayName:Ve},state:{...Re.state,displayName:Ve}}}),ee={id:c.F.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{},includeByName:{}},isApplicable:Te=>Te.length>1?x.M.NotPossible:x.M.Applicable,operator:(Te,$e)=>Re=>Re.pipe(E.D.operator({include:Te.includeByName?{names:j(Te.includeByName)}:void 0,exclude:{names:j(Te.excludeByName)}},$e),ae.xQ.operator(Te,$e),q.operator(Te,$e))},j=Te=>Te?Object.keys(Te).filter($e=>Te[$e]):[];var J=e(32157),Z=e(8934);const te={id:c.F.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:Te=>$e=>$e.pipe((0,l.T)(Re=>!Array.isArray(Re)||Re.length===0?Re:Re.map(se(Te))))},se=Te=>$e=>{const Re=(0,Z.dO)(Te.regex),Ke=$e.fields.map(Ve=>{const Se=(0,d.Ct)(Ve,$e);if(!Re.test(Se))return Ve;const Ye=Se.replace(Re,Te.renamePattern);return{...Ve,config:{...Ve.config,displayName:Ye},state:{...Ve.state,displayName:Ye}}});return{...$e,fields:Ke}};var ie=e(2543),ce=e(18700),re=e(41119),ue=e(17503);const X={id:c.F.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:Te=>$e=>$e.pipe((0,l.T)(Re=>{if(!Array.isArray(Re)||Re.length===0||(Re=Re.filter(Ue=>Ue.length>0),!(0,ue.jq)(Re)))return Re;const Ke={},Ve=new Set,Se=new ce.k({refId:`${c.F.seriesToRows}-${Re.map(Ue=>Ue.refId).join("-")}`,fields:[]}),Ye={name:T.aI,values:[],config:{},type:T.PU.string};for(let Ue=0;Ue<Re.length;Ue++){const je=Re[Ue];for(let Qe=0;Qe<je.fields.length;Qe++){const He=je.fields[Qe];if(He.type===T.PU.time){Ke[Ue]=Qe,Ve.has(T.LE)||(Se.addField(le(He,T.LE)),Se.addField(Ye),Ve.add(T.LE));continue}Ve.has(T.Bc)||(Se.addField(le(He,T.Bc)),Ve.add(T.Bc))}}for(let Ue=0;Ue<Re.length;Ue++){const je=Re[Ue];for(let Qe=0;Qe<je.length;Qe++){const He=Ke[Ue],Je=He===0?1:0;Se.add({[T.LE]:je.fields[He].values[Qe],[T.aI]:(0,d.Ri)(je),[T.Bc]:je.fields[Je].values[Qe]})}}return[(0,re.ES)(Se,0,!0)]}))},le=(Te,$e)=>({...(0,ie.omit)(Te,["values","state","labels","config","name"]),name:$e,values:[],config:{...(0,ie.omit)(Te.config,["displayName","displayNameFromDS"])}}),he={id:c.F.sortBy,name:"Sort by",description:"Sort fields in a frame.",defaultOptions:{fields:{}},operator:(Te,$e)=>Re=>Re.pipe((0,l.T)(Ke=>!Array.isArray(Ke)||Ke.length===0||!Te?.sort?.length?Ke:fe(Ke,Te.sort,$e)))};function fe(Te,$e,Re){return Te.map(Ke=>{const Ve=Ce(Ke,$e,Re);return Ve.length&&Ve[0].index!=null?(0,re.ES)(Ke,Ve[0].index,Ve[0].desc):Ke})}function Ce(Te,$e,Re){return $e.map(Ke=>Ke.index!=null?Ke:{...Ke,index:Te.fields.findIndex(Ve=>Ke.field===(0,d.Ct)(Ve,Te))})}const Ae={id:c.F.transpose,name:"Transpose",description:"Transpose the data frame",defaultOptions:{},operator:Te=>$e=>$e.pipe((0,l.T)(Re=>Re.length===0?Re:_e(Te,Re)))};function _e(Te,$e){(0,d.Fm)($e);const Re=Te.emptyValue??x.N.Empty;return $e.map(Ke=>{const Ve=Ke.fields[0],Se=Te.firstFieldName?Te.firstFieldName:"Field",Ye=Te.restFieldsName?Te.restFieldsName:"Value",Ue=Ve.type===T.PU.string||Ve.type===T.PU.time||Ve.type===T.PU.enum,je=Ue?[Se,...De(Ve,Ve.values,Re)]:[Se,...Ve.values.map((de,ve)=>Ye)],Qe=Ue?Ke.fields.map(de=>de.state?.displayName??de.name).slice(1):Ke.fields.map(de=>de.state?.displayName??de.name),He=Xe(Ue?Ke.fields.map(de=>de.type).slice(1):Ke.fields.map(de=>de.type)),Je=je.map((de,ve)=>{if(ve===0)return{name:Se,type:T.PU.string,config:{},values:Qe};const me=Ke.fields.map(Pe=>He===T.PU.string?De(Pe,[Pe.values[ve-1]],Re)[0]:Pe.values[ve-1]),xe=Ue?Ve.name:"row",Ee=Ue?de:ve;return{name:Ue?Ye:de,labels:{[xe]:Ee},type:He,config:{},values:Ue?me.slice(1):me}});return{...Ke,fields:Je,length:Math.max(...Je.map(de=>de.values.length)),refId:`${c.F.transpose}-${Ke.refId}`}})}function Xe(Te){const $e=new Set(Te);return $e.size===1?[...$e][0]:T.PU.string}function De(Te,$e,Re){switch(Te.type){case T.PU.time:case T.PU.number:case T.PU.boolean:case T.PU.string:return $e.map(Ke=>Ke!=null?`${Ke}`:(0,S.v)(Re));case T.PU.enum:return $e.map(Ke=>Te.config.type.enum.text[Ke]??(0,S.v)(Re));default:return $e.map(Ke=>Ke!=null?JSON.stringify(Ke):(0,S.v)(Re))}}const Me={noopTransformer:Q.W,filterFieldsTransformer:u.z,filterFieldsByNameTransformer:E.D,filterFramesTransformer:u.I,filterFramesByRefIdTransformer:p,filterByValueTransformer:m.Sv,formatStringTransformer:y.yt,formatTimeTransformer:b,orderFieldsTransformer:ae.xQ,organizeFieldsTransformer:ee,reduceTransformer:J.Wj,concatenateTransformer:a.vz,calculateFieldTransformer:n.SC,joinByFieldTransformer:W.L,seriesToColumnsTransformer:W.L,seriesToRowsTransformer:X,renameFieldsTransformer:q,labelsToFieldsTransformer:R.V,ensureColumnsTransformer:g.b,groupByTransformer:C.of,sortByTransformer:he,mergeTransformer:_.o,renameByRegexTransformer:te,histogramTransformer:N.OA,convertFieldTypeTransformer:s.zM,convertFrameTypeTransformer:o,groupingToMatrixTransformer:V,limitTransformer:w,groupToNestedTable:P._,transposeTransformer:Ae}},52695:(ne,A,e)=>{"use strict";e.d(A,{$u:()=>K,Ay:()=>R,Cj:()=>P,D1:()=>y,EC:()=>S,G_:()=>v,L5:()=>O,Mb:()=>C,Nf:()=>h,OF:()=>p,OR:()=>o,PV:()=>d,TW:()=>f,V$:()=>i,Vv:()=>r,ag:()=>m,g4:()=>T,iK:()=>L,jX:()=>B,kh:()=>M,o3:()=>V,pH:()=>c,xx:()=>N,zi:()=>l});var n=e(65307);const a={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},s=(0,n.Z0)({name:"ldap",initialState:a,reducers:{ldapConnectionInfoLoadedAction:(G,w)=>({...G,ldapError:void 0,connectionInfo:w.payload}),ldapFailedAction:(G,w)=>({...G,ldapError:w.payload}),ldapSyncStatusLoadedAction:(G,w)=>({...G,syncInfo:w.payload}),userMappingInfoLoadedAction:(G,w)=>({...G,user:w.payload,userError:void 0}),userMappingInfoFailedAction:(G,w)=>({...G,user:void 0,userError:w.payload}),clearUserMappingInfoAction:(G,w)=>({...G,user:void 0}),clearUserErrorAction:(G,w)=>({...G,userError:void 0})}}),{clearUserErrorAction:l,clearUserMappingInfoAction:r,ldapConnectionInfoLoadedAction:c,ldapFailedAction:i,ldapSyncStatusLoadedAction:o,userMappingInfoFailedAction:h,userMappingInfoLoadedAction:f}=s.actions,g=s.reducer,u={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},E=(0,n.Z0)({name:"userAdmin",initialState:u,reducers:{userProfileLoadedAction:(G,w)=>({...G,user:w.payload}),userOrgsLoadedAction:(G,w)=>({...G,orgs:w.payload}),userSessionsLoadedAction:(G,w)=>({...G,sessions:w.payload}),userAdminPageLoadedAction:(G,w)=>({...G,isLoading:!w.payload}),userAdminPageFailedAction:(G,w)=>({...G,error:w.payload,isLoading:!1})}}),{userProfileLoadedAction:v,userOrgsLoadedAction:p,userSessionsLoadedAction:m,userAdminPageLoadedAction:y,userAdminPageFailedAction:d}=E.actions,x=E.reducer,b={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!0},D=(0,n.Z0)({name:"userListAdmin",initialState:b,reducers:{usersFetched:(G,w)=>{const{totalCount:_,perPage:Q,...ae}=w.payload,q=Math.ceil(_/Q);return{...G,...ae,totalPages:q,perPage:Q,showPaging:q>1,isLoading:!1}},usersFetchBegin:G=>({...G,isLoading:!0}),usersFetchEnd:G=>({...G,isLoading:!1}),queryChanged:(G,w)=>({...G,query:w.payload,page:0}),pageChanged:(G,w)=>({...G,page:w.payload}),sortChanged:(G,w)=>({...G,page:0,sort:w.payload}),filterChanged:(G,w)=>{const{name:_,value:Q}=w.payload;return G.filters.some(ae=>ae.name===_)?{...G,page:0,filters:G.filters.map(ae=>ae.name===_?{...ae,value:Q}:ae)}:{...G,page:0,filters:[...G.filters,w.payload]}}}}),{usersFetched:C,usersFetchBegin:P,usersFetchEnd:T,queryChanged:O,pageChanged:S,filterChanged:B,sortChanged:K}=D.actions,U=D.reducer,F={devices:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!0}]},I=(0,n.Z0)({name:"userListAnonymousDevices",initialState:F,reducers:{usersAnonymousDevicesFetched:(G,w)=>{const{totalCount:_,perPage:Q,...ae}=w.payload,q=Math.ceil(_/Q);return{...G,...ae,totalPages:q,perPage:Q,showPaging:q>1}},anonQueryChanged:(G,w)=>({...G,query:w.payload,page:0}),anonPageChanged:(G,w)=>({...G,page:w.payload}),anonUserSortChanged:(G,w)=>({...G,page:0,sort:w.payload}),filterChanged:(G,w)=>{const{name:_,value:Q}=w.payload;return G.filters.some(ae=>ae.name===_)?{...G,page:0,filters:G.filters.map(ae=>ae.name===_?{...ae,value:Q}:ae)}:{...G,page:0,filters:[...G.filters,w.payload]}}}}),{usersAnonymousDevicesFetched:V,anonUserSortChanged:M,anonPageChanged:L,anonQueryChanged:N}=I.actions,W=I.reducer,R={ldap:g,userAdmin:x,userListAdmin:U,userListAnonymousDevices:W}},52718:(ne,A,e)=>{"use strict";e.d(A,{E:()=>o,A:()=>h});var n=e(74848),a=e(22803),s=e(96540),l=e(62295),r=e(63142);const c=({children:u})=>{const[E,v]=(0,s.useState)(!1),[p,m]=(0,s.useState)(!1),y=(0,s.useRef)(null),d=(0,s.useRef)(null),x=(0,r.of)(i);return(0,s.useEffect)(()=>{const b=new IntersectionObserver(D=>{D.forEach(C=>{C.target===y.current?v(!C.isIntersecting):C.target===d.current&&m(!C.isIntersecting)})});return[y,d].forEach(D=>{D.current&&b.observe(D.current)}),()=>b.disconnect()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,a.cx)(x.scrollIndicator,x.scrollTopIndicator,{[x.scrollIndicatorVisible]:E})}),(0,n.jsxs)("div",{className:x.scrollContent,children:[(0,n.jsx)("div",{ref:y}),u,(0,n.jsx)("div",{ref:d})]}),(0,n.jsx)("div",{className:(0,a.cx)(x.scrollIndicator,x.scrollBottomIndicator,{[x.scrollIndicatorVisible]:p})})]})},i=u=>({scrollContent:(0,a.css)({flex:1,position:"relative"}),scrollIndicator:(0,a.css)({height:u.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,[u.transitions.handleMotion("no-preference","reduce")]:{transition:u.transitions.create("opacity")},zIndex:1}),scrollTopIndicator:(0,a.css)({background:`linear-gradient(0deg, transparent, ${u.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,a.css)({background:`linear-gradient(180deg, transparent, ${u.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,a.css)({opacity:1})}),o=({autoHide:u=!1,autoHideTimeout:E=200,setScrollTop:v,className:p,testId:m,autoHeightMin:y="0",autoHeightMax:d="100%",hideTracksWhenNotNeeded:x=!1,hideHorizontalTrack:b,hideVerticalTrack:D,scrollRefCallback:C,showScrollIndicators:P=!1,updateAfterMountMs:T,scrollTop:O,onScroll:S,children:B,divId:K})=>{const U=(0,s.useRef)(null),F=(0,r.of)(f);(0,s.useEffect)(()=>{U.current&&C&&C(U.current.view)},[U,C]),g(U.current,O),(0,s.useEffect)(()=>{T&&setTimeout(()=>{const G=U.current;G?.update&&G.update()},T)},[T]);function I(G,w,_){return _.style&&w&&(_.style.display="none"),(0,n.jsx)("div",{..._,className:G})}const V=(0,s.useCallback)(G=>I("track-horizontal",b,G),[b]),M=(0,s.useCallback)(G=>I("track-vertical",D,G),[D]),L=(0,s.useCallback)(G=>(0,n.jsx)("div",{...G,className:"thumb-horizontal"}),[]),N=(0,s.useCallback)(G=>(0,n.jsx)("div",{...G,className:"thumb-vertical"}),[]),W=(0,s.useCallback)(G=>(G.style&&G.style.WebkitOverflowScrolling==="touch"&&(G.style.WebkitOverflowScrolling="auto"),(0,n.jsx)("div",{...G,className:"scrollbar-view",id:K})),[K]),R=(0,s.useCallback)(()=>{U.current&&v&&v(U.current.getValues())},[v]);return(0,n.jsx)(l.Ay,{"data-testid":m,ref:U,className:(0,a.cx)(F.customScrollbar,p,{[F.scrollbarWithScrollIndicators]:P}),onScrollStop:R,autoHeight:!0,autoHide:u,autoHideTimeout:E,hideTracksWhenNotNeeded:x,autoHeightMax:d,autoHeightMin:y,renderTrackHorizontal:V,renderTrackVertical:M,renderThumbHorizontal:L,renderThumbVertical:N,renderView:W,onScroll:S,children:P?(0,n.jsx)(c,{children:B}):B})},h=o,f=u=>({customScrollbar:(0,a.css)({display:"flex",flexGrow:1,".scrollbar-view":{display:"flex",flexGrow:1,flexDirection:"column"},".track-vertical":{borderRadius:u.shape.borderRadius(2),width:`${u.spacing(1)} !important`,right:0,bottom:u.spacing(.25),top:u.spacing(.25)},".track-horizontal":{borderRadius:u.shape.borderRadius(2),height:`${u.spacing(1)} !important`,right:u.spacing(.25),bottom:u.spacing(.25),left:u.spacing(.25)},".thumb-vertical":{background:u.colors.action.focus,borderRadius:u.shape.borderRadius(2),opacity:0},".thumb-horizontal":{background:u.colors.action.focus,borderRadius:u.shape.borderRadius(2),opacity:0},"&:hover":{".thumb-vertical, .thumb-horizontal":{opacity:1,transition:"opacity 0.3s ease-in-out"}}}),scrollbarWithScrollIndicators:(0,a.css)({".scrollbar-view":{position:"static !important"}})});function g(u,E){(0,s.useEffect)(()=>{u&&E!=null&&u.scrollTop(E)},[E,u])}},52763:(ne,A,e)=>{"use strict";e.d(A,{ch:()=>c,d4:()=>l,wA:()=>s,zD:()=>r});var n=e(65307),a=e(71468);const s=a.useDispatch,l=a.useSelector,r=(i,o,h)=>(0,n.zD)(i,o,h),c=n.ch},52792:(ne,A,e)=>{"use strict";e.d(A,{J:()=>r});var n=e(74848),a=e(60208),s=e(54314),l=e(53428);const r=({icon:c,title:i,tabs:o,activeTab:h,onChangeTab:f})=>(0,n.jsx)(l.r,{icon:c,title:i,children:(0,n.jsx)(s.U,{hideBorder:!0,children:o.map((g,u)=>(0,n.jsx)(a.o,{label:g.label,icon:g.icon,suffix:g.tabSuffix,active:g.value===h,onChangeTab:()=>f(g)},`${g.value}-${u}`))})})},52830:(ne,A,e)=>{"use strict";e.d(A,{YZ:()=>o,sz:()=>i,tU:()=>r});var n=e(74848),a=e(96540),s=e(52763),l=e(20718),r=(h=>(h.RichHistory="Query history",h.Starred="Starred",h.Settings="Settings",h))(r||{});const c=(0,a.createContext)({selectedTab:"Query history",setSelectedTab:()=>{},drawerOpened:!1,setDrawerOpened:()=>{}});function i(){return(0,a.useContext)(c)}function o({children:h}){const[f,g]=(0,a.useState)("Query history"),[u,E]=(0,a.useState)(!1),v=(0,s.d4)(l.i6);return(0,a.useEffect)(()=>{v&&g(v.starredTabAsFirstTab?"Starred":"Query history")},[v,g]),(0,n.jsx)(c.Provider,{value:{selectedTab:f,setSelectedTab:g,drawerOpened:u,setDrawerOpened:E},children:h})}},52847:(ne,A,e)=>{"use strict";e.d(A,{B:()=>i});var n=e(74848),a=e(51898),s=e(92745),l=e(41654),r=e(69076),c=e(49602);function i({multi:o,allowCustomValue:h,includeAll:f,allValue:g,onMultiChange:u,onAllowCustomValueChange:E,onIncludeAllChange:v,onAllValueChange:p}){return(0,n.jsxs)(l.B,{direction:"column",gap:2,height:"inherit",alignItems:"start",children:[(0,n.jsx)(r.c,{value:o,name:(0,s.t)("dashboard-scene.selection-options-form.name-multi-value","Multi-value"),description:(0,s.t)("dashboard-scene.selection-options-form.description-enables-multiple-values-selected","Enables multiple values to be selected at the same time"),onChange:u,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsMultiSwitch}),E&&(0,n.jsx)(r.c,{value:h??!0,name:(0,s.t)("dashboard-scene.selection-options-form.name-allow-custom-values","Allow custom values"),description:(0,s.t)("dashboard-scene.selection-options-form.description-enables-users-custom-values","Enables users to add custom values to the list"),onChange:E,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsAllowCustomValueSwitch}),(0,n.jsx)(r.c,{value:f,name:(0,s.t)("dashboard-scene.selection-options-form.name-include-all-option","Include All option"),description:(0,s.t)("dashboard-scene.selection-options-form.description-enables-option-include-variables","Enables an option to include all values"),onChange:v,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsIncludeAllSwitch}),f&&(0,n.jsx)(c._,{defaultValue:g??"",onBlur:p,name:(0,s.t)("dashboard-scene.selection-options-form.name-custom-all-value","Custom all value"),testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInput})]})}},52860:(ne,A,e)=>{"use strict";e.d(A,{F0:()=>o,bQ:()=>h,lW:()=>f});var n=e(41053),a=e(75505),s=e(78282),l=e(27963),r=e(6219);const c=({sourceUID:g,...u})=>{const E=(0,s.l)().getInstanceSettings(g),v=u.type==="query"?(0,s.l)().getInstanceSettings(u.targetUID):void 0;if((u?.orgId===void 0||u?.orgId===null||u?.orgId===0)&&r.kb.logWarning("Invalid correlation config: Missing org id."),E&&E?.uid!==void 0&&v?.uid!==void 0&&u.type==="query")return{...u,source:E,target:v};if(E&&E?.uid!==void 0&&v?.uid===void 0&&u.type==="external")return{...u,source:E};r.kb.logWarning("Invalid correlation config: Missing source or target.",{source:JSON.stringify(E),target:JSON.stringify(v)})},i=g=>!!g,o=g=>({...g,correlations:g.correlations.map(c).filter(i)});function h(g){return g.data}const f=()=>{const{backend:g}=(0,l.Il)(),[u,E]=(0,n.A)(b=>(0,a.s)(g.fetch({url:"/api/datasources/correlations",params:{page:b.page},method:"GET",showErrorAlert:!1})).then(h).then(o),[g]),[v,p]=(0,n.A)(({sourceUID:b,...D})=>g.post(`/api/datasources/uid/${b}/correlations`,D).then(C=>{const P=c(C.result);if(P!==void 0)return P;throw new Error("invalid sourceUID")}),[g]),[m,y]=(0,n.A)(({sourceUID:b,uid:D})=>g.delete(`/api/datasources/uid/${b}/correlations/${D}`),[g]),[d,x]=(0,n.A)(({sourceUID:b,uid:D,...C})=>g.patch(`/api/datasources/uid/${b}/correlations/${D}`,C).then(P=>{const T=c(P.result);if(T!==void 0)return T;throw new Error("invalid sourceUID")}),[g]);return{create:{execute:p,...v},update:{execute:x,...d},get:{execute:E,...u},remove:{execute:y,...m}}}},52900:(ne,A,e)=>{"use strict";e.d(A,{m:()=>v});var n=e(74848),a=e(22803),s=e(96540),l=e(1906),r=e(30703),c=e(45967),i=e(87063),o=e(991),h=e(88559),f=e(63142),g=e(4651);const u={[g.Tz.math]:"calculator-alt",[g.Tz.reduce]:"compress-arrows",[g.Tz.resample]:"sync",[g.Tz.classic]:"cog",[g.Tz.threshold]:"sliders-v-alt",[g.Tz.sql]:"database"},E=(0,s.memo)(({item:m,onSelect:y})=>{const{value:d,label:x,description:b}=m,D=(0,f.of)(p),C=(0,s.useCallback)(()=>y(d),[d,y]);return(0,n.jsx)(i.W.Item,{component:()=>(0,n.jsxs)("div",{className:D.expressionTypeItem,role:"menuitem",children:[(0,n.jsxs)("div",{className:D.expressionTypeItemContent,"data-testid":`expression-type-${d}`,children:[(0,n.jsx)(r.I,{className:D.icon,name:u[d],"aria-hidden":"true"}),x,d===g.Tz.sql&&(0,n.jsx)(o.y,{featureState:l.Ay.new})]}),(0,n.jsx)(c.m,{placement:"right",content:b,children:(0,n.jsx)(r.I,{className:D.infoIcon,name:"info-circle"})})]}),label:"",onClick:C},d)});E.displayName="ExpressionMenuItem";const v=(0,s.memo)(({handleOnSelect:m,children:y})=>{const d=(0,s.useMemo)(()=>g.uQ.map(b=>(0,n.jsx)(E,{item:b,onSelect:m},b.value)),[m]),x=(0,s.useMemo)(()=>(0,n.jsx)(i.W,{role:"menu",children:d}),[d]);return(0,n.jsx)(h.m,{placement:"bottom-start",overlay:x,children:y})});v.displayName="ExpressionTypeDropdown";const p=m=>({expressionTypeItem:(0,a.css)({width:"100%",display:"flex",alignItems:"center",gap:m.spacing(1)}),expressionTypeItemContent:(0,a.css)({flexGrow:1,display:"flex",alignItems:"center",gap:m.spacing(1)}),icon:(0,a.css)({color:m.colors.text.secondary,flexShrink:0}),infoIcon:(0,a.css)({opacity:.7,color:m.colors.text.secondary,flexShrink:0})})},53222:(ne,A,e)=>{"use strict";e.d(A,{tU:()=>m,a:()=>p,gQ:()=>y});var n=e(43173),a=e(73427),s=e(80977),l=e(66594),r=e(75505),c=e(68143),i=e(78282),o=e(69738);const h=d=>{const x=(0,i.l)().getInstanceSettings({uid:d.datasourceUid});return{id:d.uid,createdAt:d.createdAt*1e3,datasourceName:x?.name||"",datasourceUid:d.datasourceUid,starred:d.starred,comment:d.comment,queries:d.queries}},f=d=>({uid:d.id,createdAt:Math.floor(d.createdAt/1e3),datasourceUid:d.datasourceUid,starred:d.starred,comment:d.comment,queries:d.queries});class g{constructor(){this.preferenceService=new o.W("user")}async addToRichHistory(x){const{result:b}=await(0,c.AI)().post("/api/query-history",{dataSourceUid:x.datasourceUid,queries:x.queries});return{richHistoryQuery:h(b)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(x){(0,c.AI)().delete(`/api/query-history/${x}`)}async getRichHistory(x){const b=u(x);let D="query-history-get-all";x.starred&&(D="query-history-get-starred");const P=(await(0,r.s)((0,c.AI)().fetch({method:"GET",url:`/api/query-history?${b}`,requestId:D}))).data,T=(P.result.queryHistory||[]).map(h),O=P.result.totalCount||0;return{richHistory:T,total:O}}async getSettings(){return{activeDatasourcesOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(x,b){const D=await(0,c.AI)().patch(`/api/query-history/${x}`,{comment:b});return h(D.result)}updateSettings(x){return this.preferenceService.patch({queryHistory:{homeTab:x.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(x,b){let D;return b?D=await(0,c.AI)().post(`/api/query-history/star/${x}`):D=await(0,c.AI)().delete(`/api/query-history/star/${x}`),h(D.result)}}function u(d){let x=`${d.datasourceFilters.map(b=>{const D=(0,i.l)().getInstanceSettings(b).uid;return`datasourceUid=${encodeURIComponent(D)}`}).join("&")}`;return d.search&&(x=x+`&searchString=${d.search}`),d.sortOrder&&(x=x+`&sort=${d.sortOrder===s.x.Ascending?"time-asc":"time-desc"}`),d.starred||(x=x+`&to=${d.to}`,x=x+`&from=${d.from}`),x=x+"&limit=100",x=x+`&page=${d.page||1}`,d.starred&&(x=x+`&onlyStarred=${d.starred}`),x}const E=new l.Ay,v=new g,p=()=>n.$.queryHistoryEnabled?v:E,m=()=>E,y=()=>n.$.queryHistoryEnabled?{availableFilters:[s.x.Descending,s.x.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:a.TP.isSignedIn}:{availableFilters:[s.x.Descending,s.x.Ascending,s.x.DatasourceAZ,s.x.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},53226:(ne,A,e)=>{"use strict";e.d(A,{U0:()=>E,VY:()=>y});var n=e(74848),a=e(1932),s=e(96540),l=e(92745),r=e(68143),c=e(99887),i=e(182),o=e(64762),h=e(77788),f=e(3986),g=e(72930),u=e(6135),E=(d=>(d.NewIntegration="new_oncall_integration",d.ExistingIntegration="existing_oncall_integration",d))(E||{}),v=(d=>(d.IntegrationType="integration_type",d.IntegrationName="integration_name",d))(v||{}),p=(d=>(d.Disabled="disabled",d.V1="v1",d.V2="v2",d))(p||{});function m(){const{installed:d,loading:x,error:b}=(0,f._)((0,i.BO)()),{data:D=[],error:C,isLoading:P}=h.WG.endpoints.features.useQuery(void 0,{skip:!d}),T=(0,s.useMemo)(()=>d?D.includes(h.Pc)?"v2":"v1":"disabled",[d,D]),O=(0,s.useMemo)(()=>T==="v2",[T]);return{isOnCallEnabled:d,integrationStatus:T,isAlertingV2IntegrationEnabled:O,isOnCallStatusLoading:x||P,onCallError:b??C}}function y(){const d=(0,o._2)(),{isOnCallEnabled:x,integrationStatus:b,isAlertingV2IntegrationEnabled:D,isOnCallStatusLoading:C,onCallError:P}=m(),{useCreateIntegrationMutation:T,useGrafanaOnCallIntegrationsQuery:O,useLazyValidateIntegrationNameQuery:S}=h.WG,[B,{isFetching:K}]=S(),[U]=T(),{data:F=[],isLoading:I,isError:V}=O(void 0,{skip:!D}),M=(0,s.useMemo)(()=>({integration_name:async R=>{try{return await B(R).unwrap(),!0}catch(G){if((0,r.NF)(G)&&G.status===409)return(0,l.t)("alerting.irm-integration.integration-name-exists","Integration of this name already exists in IRM");throw d.error((0,l.t)("alerting.irm-integration.validation-failed","Failed to validate IRM integration name. Is the OnCall API available?")),G}},url:R=>D?F.map(G=>G.integration_url).includes(R)?!0:(0,l.t)("alerting.irm-integration.integration-required","Selection of existing IRM integration is required"):!0}),[F,B,D,d]),L=(0,s.useCallback)(R=>D?(0,a.jM)(R,G=>{G.grafana_managed_receiver_configs?.forEach(w=>{w.type===u.J4.OnCall&&(w.settings.integration_type="existing_oncall_integration")})}):R,[D]),N=(0,s.useCallback)(async R=>{if(!D)return R;const _=(R.grafana_managed_receiver_configs?.filter(Q=>Q.type===u.J4.OnCall)??[]).filter(Q=>Q.settings.integration_type==="new_oncall_integration").map(async Q=>{const ae=await U({integration:u.FI,verbal_name:Q.settings.integration_name}).unwrap();Q.settings.url=ae.integration_url});return await Promise.all(_),(0,a.jM)(R,Q=>{Q.grafana_managed_receiver_configs?.forEach(ae=>{ae.type===u.J4.OnCall&&(delete ae.settings.integration_type,delete ae.settings.integration_name)})})},[D,U]),W=(0,s.useCallback)(R=>{if(R.type===u.J4.OnCall&&D){const G=R.options.filter(Q=>Q.propertyName!=="url"),w={value:"new_oncall_integration",label:(0,l.t)("alerting.irm-integration.new-integration","New IRM integration"),description:(0,l.t)("alerting.irm-integration.new-integration-description","A new IRM integration without escalation chains will be automatically created")},_={value:"existing_oncall_integration",label:(0,l.t)("alerting.irm-integration.existing-integration","Existing IRM integration"),description:(0,l.t)("alerting.irm-integration.existing-integration-description","Use an existing IRM integration")};return G.unshift((0,g.u)("integration_type",(0,l.t)("alerting.irm-integration.connection-method","How to connect to IRM"),"",{required:!0,element:"radio",defaultValue:w,selectOptions:[w,_]}),(0,g.u)("integration_name",(0,l.t)("alerting.irm-integration.integration-name","Integration name"),(0,l.t)("alerting.irm-integration.integration-name-description","The name of the new IRM integration"),{required:!0,showWhen:{field:"integration_type",is:"new_oncall_integration"}}),(0,g.u)("url",(0,l.t)("alerting.irm-integration.integration","IRM Integration"),(0,l.t)("alerting.irm-integration.integration-description","The IRM integration to send alerts to"),{element:"select",required:!0,showWhen:{field:"integration_type",is:"existing_oncall_integration"},selectOptions:F.map(Q=>({label:Q.display_name,description:Q.integration_url,value:Q.integration_url}))})),{...R,options:G}}return R},[F,D]);return{integrationStatus:b,onCallNotifierMeta:{enabled:!!x,order:-1,description:x?(0,l.t)("alerting.irm-integration.enabled-description","Seamless way to handle alerts and manage incidents"):(0,l.t)("alerting.irm-integration.disabled-description","Enable IRM through a Webhook integration"),badge:(0,n.jsx)(c.E,{color:"blue",text:(0,l.t)("alerting.irm-integration.recommended","Recommended")})},extendOnCallNotifierFeatures:W,extendOnCallReceivers:L,createOnCallIntegrations:N,onCallFormValidators:M,isLoadingOnCallIntegration:I||C,isValidating:K,hasOnCallError:!!P||V}}},53247:(ne,A,e)=>{"use strict";e.d(A,{ED:()=>l,Hv:()=>s,NY:()=>c,hF:()=>r});var n=e(43173);const a=["provisioning","kubernetesDashboards"],s=()=>{const i=n.$.featureToggles||{};return a.every(o=>i[o])},l=()=>!!(n.$.appUrl&&n.$.appUrl.indexOf("://localhost")<0),r=()=>!!n.$.rendererAvailable,c=()=>{const i=s(),o=l(),h=r();return{hasRequiredFeatures:i,hasPublicAccess:o,hasImageRenderer:h,missingOnlyOptionalFeatures:i&&(!o||!h),missingRequiredFeatures:!i,everythingConfigured:i&&o&&h}}},53371:(ne,A,e)=>{"use strict";e.d(A,{r:()=>f});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(46885),c=e(96540),i=e(63142),o=e(30703),h=e(15245);function f({referenceElement:E,children:v,suffixIcon:p,placement:m}){const y=(0,i.of)(g),d=(0,i.$j)(),x=[(0,s.cY)(8),(0,s.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,s.BN)()],{context:b,refs:D,floatingStyles:C}=(0,l.we)({open:!0,placement:m,middleware:x,whileElementsMounted:r.ll,strategy:"fixed"});(0,c.useLayoutEffect)(()=>{D.setReference(E)},[E,D]);const{styles:P}=(0,l.DL)(b,{initial:({side:T})=>({opacity:0,transform:u(T,d)}),duration:d.transitions.duration.shortest});return(0,n.jsx)(h.ZL,{children:(0,n.jsx)("div",{style:{display:"inline-block",...C},ref:D.setFloating,"aria-live":"polite",children:(0,n.jsxs)("span",{className:(0,a.cx)(y.root),style:P,children:[v&&(0,n.jsx)("span",{children:v}),p&&(0,n.jsx)(o.I,{name:p})]})})})}const g=E=>({root:(0,a.css)({...E.typography.bodySmall,willChange:"transform",background:E.components.tooltip.background,color:E.components.tooltip.text,padding:E.spacing(.5,1.5),borderRadius:E.shape.radius.pill,display:"inline-flex",gap:E.spacing(.5),alignItems:"center"})}),u=(E,v)=>{switch(E){case"top":return`translateY(${v.spacing(1)})`;case"bottom":return`translateY(-${v.spacing(1)})`;case"left":return`translateX(${v.spacing(1)})`;case"right":return`translateX(-${v.spacing(1)})`}}},53428:(ne,A,e)=>{"use strict";e.d(A,{r:()=>l});var n=e(74848),a=e(63142),s=e(35621);const l=({icon:r,iconTooltip:c,title:i,children:o,id:h})=>{const f=(0,a.of)(s.o);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:f.modalHeaderTitle,id:h,children:i}),o]})}},53431:(ne,A,e)=>{"use strict";e.d(A,{O:()=>d});var n=e(74848),a=e(2543),s=e(96540),l=e(34455),r=e(76732),c=e(95004),i=e(76637),o=e(739),h=e(92790),f=e(47276),g=e(36192),u=e(8721),E=e(41119),v=e(63409);function p(x,b){const D=x.y.values.length,C={...x.y.config,...b},P=x.x??{name:"",values:[...Array(D).keys()],type:c.PU.number,config:{}};let T={refId:"sparkline",fields:[P,{...x.y,config:C}],length:D};return(0,u.g2)(P.values)||(T=(0,E.ES)(T,0)),(0,v.M)({frame:T,refFieldPseudoMin:x.timeRange?.from.valueOf(),refFieldPseudoMax:x.timeRange?.to.valueOf()})}function m(x,b){let{min:D,max:C}=b.fields[1].state?.range;D=Math.max(D,x.config.min??-1/0),C=Math.min(C,x.config.max??1/0);const P=+b.fields[1].config?.noValue;return Number.isNaN(P)||(D=Math.min(D,P),C=Math.max(C,P)),D===C&&(D===0?C=100:D<0?(C=0,D*=2):(D=0,C*=2)),[D,C]}const y={drawStyle:o.GR.Line,showPoints:o.yL.Auto,axisPlacement:o.vM.Hidden,pointSize:2};class d extends s.PureComponent{constructor(b){super(b);const D=p(b.sparkline,b.config);this.state={data:(0,g.bq)(D,(0,g.ro)(D)),alignedDataFrame:D,configBuilder:this.prepareConfig(D)}}static getDerivedStateFromProps(b,D){const C=p(b.sparkline,b.config),P=(0,l.C)(C);return P?{...D,data:(0,g.bq)(P,(0,g.ro)(P)),alignedDataFrame:P}:{...D}}componentDidUpdate(b,D){const{alignedDataFrame:C}=this.state;if(!C)return;let P=!1;if(b.sparkline!==this.props.sparkline){const T=!(0,r.bW)(this.state.alignedDataFrame,D.alignedDataFrame),O=!(0,a.isEqual)(C.fields[1].state?.range,D.alignedDataFrame.fields[1].state?.range);P=T||O}else P=!(0,a.isEqual)(b.config,this.props.config);P&&this.setState({configBuilder:this.prepareConfig(C)})}getYRange(b){return m(b,this.state.alignedDataFrame)}prepareConfig(b){const{theme:D}=this.props,C=new f.e;C.setCursor({show:!1,x:!1,y:!1});const P=b.fields[0];C.addScale({scaleKey:"x",orientation:o.Lt.Horizontal,direction:o.ON.Right,isTime:!1,range:()=>{const{sparkline:T}=this.props;if(T.x){if(T.timeRange&&T.x.type===c.PU.time)return[T.timeRange.from.valueOf(),T.timeRange.to.valueOf()];const O=T.x.values;return[O[0],O[O.length-1]]}return[0,T.y.values.length-1]}}),C.addAxis({scaleKey:"x",theme:D,placement:o.vM.Hidden});for(let T=0;T<b.fields.length;T++){const O=b.fields[T],S=O.config,B={...y,...S.custom};if(O===P||O.type!==c.PU.number)continue;const K=S.unit||"__fixed";C.addScale({scaleKey:K,orientation:o.Lt.Vertical,direction:o.ON.Up,range:()=>this.getYRange(O)}),C.addAxis({scaleKey:K,theme:D,placement:o.vM.Hidden});const U=(0,i.Qi)(O),F=U.getCalculator(O,D)(0,0),I=B.drawStyle===o.GR.Points?o.yL.Always:B.showPoints;C.addSeries({pxAlign:!1,scaleKey:K,theme:D,colorMode:U,thresholds:S.thresholds,drawStyle:B.drawStyle,lineColor:B.lineColor??F,lineWidth:B.lineWidth,lineInterpolation:B.lineInterpolation,showPoints:I,pointSize:B.pointSize,fillOpacity:B.fillOpacity,fillColor:B.fillColor,lineStyle:B.lineStyle,gradientMode:B.gradientMode,spanNulls:B.spanNulls})}return C}render(){const{data:b,configBuilder:D}=this.state,{width:C,height:P}=this.props;return(0,n.jsx)(h.Z,{data:b,config:D,width:C,height:P})}}},53478:(ne,A,e)=>{"use strict";e.d(A,{K:()=>a});const n="12.2.1",a={selectedSeries:0}},53487:(ne,A,e)=>{"use strict";e.d(A,{s:()=>r});var n=e(74848),a=e(22803),s=e(63142);const l=c=>({legend:(0,a.css)({fontSize:c.typography.h3.fontSize,fontWeight:c.typography.fontWeightRegular,margin:c.spacing(0,0,2,0)})}),r=({children:c,className:i,...o})=>{const h=(0,s.of)(l);return(0,n.jsx)("legend",{className:(0,a.cx)(h.legend,i),...o,children:c})}},53543:(ne,A,e)=>{"use strict";e.d(A,{D:()=>l,G:()=>s});var n=e(42954),a=e(76803);const s=new a.K,l=new n.O},53567:(ne,A,e)=>{"use strict";e.d(A,{w:()=>v});var n=e(74848),a=e(96540),s=e(92745),l=e(36490),r=e(71599),c=e(8535),i=e(74869),o=e(75756),h=e(80276),f=e(11018),g=e(67598),u=e(29609);const E=(0,i.wS)(),v=(p=!1)=>{const[m,y]=(0,a.useState)(),[d]=(0,o.Y)(),{waitForRemoval:x}=(0,h.IH)(),b=(0,i.f2)(),D=(0,a.useCallback)(()=>{y(void 0)},[]),C=(0,a.useCallback)((O,S)=>{y({ruleIdentifier:O,groupIdentifier:S})},[]),P=(0,a.useCallback)(async()=>{if(!m)return;const{ruleIdentifier:O,groupIdentifier:S}=m,B=(0,g.Rc)(S),K=B.dataSourceName;await d.execute(B,O),(0,c.JD)((0,f.Lc)({rulesSourceName:K})),E&&(0,u.X4)(O)?await x(O):await(0,c.JD)((0,f.eB)({rulesSourceName:K})),D(),p&&l.Ny.replace("/alerting/list")},[d,D,m,p,x]);return[(0,a.useMemo)(()=>(0,n.jsx)(r.u,{isOpen:!!m,title:(0,s.t)("alerting.delete-rule-modal.title","Delete rule"),body:b?(0,s.t)("alerting.delete-rule-modal.with-soft-delete","Are you sure you want to delete this rule? This rule will be recoverable from the Recently deleted page by a user with an admin role."):(0,s.t)("alerting.delete-rule-modal.without-soft-delete","Deleting this rule will permanently remove it from your alert rule list. Are you sure you want to delete this rule?"),confirmText:(0,s.t)("alerting.use-delete-modal.modal.confirmText-yes-delete","Yes, delete"),icon:"exclamation-triangle",onConfirm:P,onDismiss:D}),[m,P,D,b]),C,D]}},53568:(ne,A,e)=>{"use strict";e.d(A,{Vr:()=>i,Yc:()=>r,kD:()=>c});let n;const a=new Map,s=500;let l="";function r(){return n||(n=document.createElement("canvas").getContext("2d")),n}function c(o,h,f=400){const g=`${f} ${h}px 'Inter'`,u=o+g,E=a.get(u);if(E)return E;const v=r();l!==g&&(v.font=l=g);const p=v.measureText(o);return a.size===s&&a.clear(),a.set(u,p),p}function i(o,h,f,g,u,E){const v=c(o,14,E),p=h/(v.width+2)*14,m=f/g,y=Math.min(m,p);return Math.min(y,u??y)}},53593:(ne,A,e)=>{"use strict";e.d(A,{E:()=>s,M:()=>a});var n=e(55386);const a=" ",s=l=>{const r={},c=[],i=l.fields.filter(f=>!["Time"].includes(f.name));let o=i.find(f=>f.name==="__name__")?.values??[];!o.length&&i.length&&i[0].values.length&&(o=Array(i[0].values.length).fill(""));const h=l.fields.filter(f=>!["__name__"].includes(f.name));return o.forEach(function(f,g){r[f]={};const u=r[f][g]??{};for(const E of h){const v=E.name;if(v!=="Time")if(typeof E?.display=="function"){const p=E?.display(E.values[g]);if(!isNaN(p.numeric))u[v]=p.numeric.toString(10);else{const m=(0,n.cN)(p);m?u[v]=m:v.includes("Value #")&&(u[v]=a)}}else console.warn("Field display method is missing!")}c.push({...u,__name__:f})}),c}},53685:(ne,A,e)=>{"use strict";e.d(A,{c:()=>a});var n=e(739);function a(s,l,r){switch((s==null||r==null)&&(s==null&&(s="null"),r==null&&(r="null"),(l===n.zT.GTE||l===n.zT.LTE)&&(l=n.zT.EQ)),l){case n.zT.EQ:return`${s}`==`${r}`;case n.zT.NEQ:return`${s}`!=`${r}`;case n.zT.GT:return s>r;case n.zT.GTE:return s>=r;case n.zT.LT:return s<r;case n.zT.LTE:return s<=r;default:return!1}}},53926:(ne,A,e)=>{"use strict";e.d(A,{I:()=>n});var n=(a=>(a.GroupTitle="GroupTitle",a))(n||{})},54024:(ne,A,e)=>{"use strict";e.d(A,{s:()=>s});const n=(l,r,c)=>{if(!l.length)return;const i=l.slice(0,-1).join("").length+l.length-1;return l.join(`
`).slice(r,i+c)},a=l=>l?.replace(/[\uFEFF]/g,"");function s(){const l={onCopy(r,c,i){r.preventDefault();const{document:o,selection:h}=c.value,{start:{offset:f},end:{offset:g}}=h,u=o.getLeafBlocksAtRange(h).toArray().map(v=>v.text),E=a(n(u,f,g));return E&&r.clipboardData&&r.clipboardData.setData("Text",E),!0},onPaste(r,c,i){if(r.preventDefault(),r.clipboardData){const h=a(r.clipboardData.getData("Text"))?.split(`
`);if(h&&h.length){c.insertText(h[0]);for(const f of h.slice(1))c.splitBlock().insertText(f)}}return!0}};return{...l,onCut(r,c,i){return l.onCopy(r,c,i),c.deleteAtRange(c.value.selection),!0}}}},54044:(ne,A,e)=>{"use strict";e.d(A,{b:()=>m});var n=e(74848),a=e(22803),s=e(70255),l=e(29246),r=e(11594),c=e(51898),i=e(92745),o=e(76319),h=e(63509),f=e(63142),g=e(21348),u=e(85622);const E=38,v=({isCurrent:b,title:D,plugin:C,onClick:P,onDelete:T,disabled:O,showBadge:S,description:B,children:K})=>{const U=(0,f.of)(d),F=O||C.state===r.pn.deprecated,I=(0,a.cx)({[U.item]:!0,[U.itemDisabled]:F,[U.current]:b});return(0,n.jsxs)("div",{className:I,"aria-label":c.Tp.components.PluginVisualization.item(C.name),"data-testid":c.Tp.components.PluginVisualization.item(C.name),onClick:F?void 0:P,title:b?(0,i.t)("panel.panel-type-card.title-click-to-close","Click again to close this section"):C.name,children:[(0,n.jsx)("img",{className:(0,a.cx)(U.img,{[U.disabled]:F}),src:C.info.logos.small,alt:""}),(0,n.jsxs)("div",{className:(0,a.cx)(U.itemContent,{[U.disabled]:F}),children:[(0,n.jsx)("div",{className:U.name,children:D}),B?(0,n.jsx)("span",{className:U.description,children:B}):null,K]}),S&&(0,n.jsx)("div",{className:(0,a.cx)(U.badge,{[U.disabled]:F}),children:(0,n.jsx)(x,{plugin:C})}),T&&(0,n.jsx)(o.K,{name:"trash-alt",onClick:V=>{V.stopPropagation(),T()},className:U.deleteButton,"aria-label":(0,i.t)("panel.panel-type-card.aria-label-delete-button-on-panel-type-card","Delete button on panel type card"),tooltip:(0,i.t)("panel.panel-type-card.tooltip-delete","Delete")})]})};v.displayName="PanelTypeCard";const p=({children:b,hasDescription:D,hasDelete:C,rootProps:P})=>{const T=(0,f.of)(d),O=(0,f.of)(y);return(0,n.jsxs)("div",{className:T.item,...P,children:[(0,n.jsx)(s.A,{className:(0,a.cx)(T.img,O.image),width:E,height:E}),(0,n.jsxs)("div",{className:T.itemContent,children:[(0,n.jsx)("div",{className:T.name,children:(0,n.jsx)(s.A,{width:160})}),D?(0,n.jsx)(s.A,{containerClassName:T.description,width:80}):null,b]}),C&&(0,n.jsx)(s.A,{containerClassName:(0,a.cx)(T.deleteButton,O.deleteButton),width:16,height:16})]})},m=(0,g.j)(v,p),y=()=>({deleteButton:(0,a.css)({lineHeight:1}),image:(0,a.css)({lineHeight:1})}),d=b=>({item:(0,a.css)({position:"relative",display:"flex",flexShrink:0,cursor:"pointer",background:b.colors.background.secondary,borderRadius:b.shape.radius.default,boxShadow:b.shadows.z1,border:`1px solid ${b.colors.background.secondary}`,alignItems:"center",padding:b.spacing(1),width:"100%",overflow:"hidden",[b.transitions.handleMotion("no-preference","reduce")]:{transition:b.transitions.create(["background"],{duration:b.transitions.duration.short})},"&:hover":{background:b.colors.emphasize(b.colors.background.secondary,.03)}}),itemContent:(0,a.css)({overflow:"hidden",position:"relative",padding:b.spacing(0,1)}),itemDisabled:(0,a.css)({cursor:"default","&, &:hover":{background:b.colors.action.disabledBackground}}),current:(0,a.css)({label:"currentVisualizationItem",border:`1px solid ${b.colors.primary.border}`,background:b.colors.action.selected}),disabled:(0,a.css)({opacity:.6,filter:"grayscale(1)",cursor:"default",pointerEvents:"none"}),name:(0,a.css)({textOverflow:"ellipsis",overflow:"hidden",fontSize:b.typography.size.sm,fontWeight:b.typography.fontWeightMedium,width:"100%"}),description:(0,a.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",color:b.colors.text.secondary,fontSize:b.typography.bodySmall.fontSize,fontWeight:b.typography.fontWeightLight,width:"100%",maxHeight:"4.5em"}),img:(0,a.css)({maxHeight:E,width:E,display:"flex",alignItems:"center"}),badge:(0,a.css)({background:b.colors.background.primary}),deleteButton:(0,a.css)({cursor:"pointer",marginLeft:"auto"})}),x=({plugin:b})=>(0,l.x)(b.signature)?(0,n.jsx)(h.B,{status:b.signature}):(0,n.jsx)(u.p,{state:b.state});x.displayName="PanelPluginBadge"},54087:()=>{(function(ne){ne.color={},ne.color.make=function(e,n,a,s){var l={};return l.r=e||0,l.g=n||0,l.b=a||0,l.a=s??1,l.add=function(r,c){for(var i=0;i<r.length;++i)l[r.charAt(i)]+=c;return l.normalize()},l.scale=function(r,c){for(var i=0;i<r.length;++i)l[r.charAt(i)]*=c;return l.normalize()},l.toString=function(){return l.a>=1?"rgb("+[l.r,l.g,l.b].join(",")+")":"rgba("+[l.r,l.g,l.b,l.a].join(",")+")"},l.normalize=function(){function r(c,i,o){return i<c?c:i>o?o:i}return l.r=r(0,parseInt(l.r),255),l.g=r(0,parseInt(l.g),255),l.b=r(0,parseInt(l.b),255),l.a=r(0,l.a,1),l},l.clone=function(){return ne.color.make(l.r,l.b,l.g,l.a)},l.normalize()},ne.color.extract=function(e,n){var a;do{if(a=e.css(n).toLowerCase(),a!=""&&a!="transparent")break;e=e.parent()}while(e.length&&!ne.nodeName(e.get(0),"body"));return a=="rgba(0, 0, 0, 0)"&&(a="transparent"),ne.color.parse(a)},ne.color.parse=function(e){var n,a=ne.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return a(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return a(parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55);if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return a(parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55,parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return a(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return a(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var s=ne.trim(e).toLowerCase();return s=="transparent"?a(255,255,255,0):(n=A[s]||[0,0,0],a(n[0],n[1],n[2]))};var A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(ne){var A=Object.prototype.hasOwnProperty;ne.fn.detach||(ne.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(s,l){var r=l.children("."+s)[0];if(r==null&&(r=document.createElement("canvas"),r.className=s,ne(r).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(l),!r.getContext))if(window.G_vmlCanvasManager)r=window.G_vmlCanvasManager.initElement(r);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=r;var c=this.context=r.getContext("2d"),i=window.devicePixelRatio||1,o=c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1;this.pixelRatio=i/o,this.resize(l.width(),l.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(s,l){if(s<=0||l<=0)throw new Error("Invalid dimensions for plot, width = "+s+", height = "+l);var r=this.element,c=this.context,i=this.pixelRatio;this.width!=s&&(r.width=s*i,r.style.width=s+"px",this.width=s),this.height!=l&&(r.height=l*i,r.style.height=l+"px",this.height=l),c.restore(),c.save(),c.scale(i,i)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var s=this._textCache;for(var l in s)if(A.call(s,l)){var r=this.getTextLayer(l),c=s[l];r.hide();for(var i in c)if(A.call(c,i)){var o=c[i];for(var h in o)if(A.call(o,h)){for(var f=o[h].positions,g=0,u;u=f[g];g++)u.active?u.rendered||(r.append(u.element),u.rendered=!0):(f.splice(g--,1),u.rendered&&u.element.detach());f.length==0&&delete o[h]}}r.show()}},e.prototype.getTextLayer=function(s){var l=this.text[s];return l==null&&(this.textContainer==null&&(this.textContainer=ne("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),l=this.text[s]=ne("<div></div>").addClass(s).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),l},e.prototype.getTextInfo=function(s,l,r,c,i){var o,h,f,g;if(l=""+l,typeof r=="object"?o=r.style+" "+r.variant+" "+r.weight+" "+r.size+"px/"+r.lineHeight+"px "+r.family:o=r,h=this._textCache[s],h==null&&(h=this._textCache[s]={}),f=h[o],f==null&&(f=h[o]={}),g=f[l],g==null){var u=ne("<div></div>").html(l).css({position:"absolute","max-width":i,top:-9999}).appendTo(this.getTextLayer(s));typeof r=="object"?u.css({font:o,color:r.color}):typeof r=="string"&&u.addClass(r),g=f[l]={element:u,positions:[]};var E=this._textSizeCache[l];E?(g.width=E.width,g.height=E.height):(g.width=u.outerWidth(!0),g.height=u.outerHeight(!0),this._textSizeCache[l]={width:g.width,height:g.height}),u.detach()}return g},e.prototype.addText=function(s,l,r,c,i,o,h,f,g){var u=this.getTextInfo(s,c,i,o,h),E=u.positions;f=="center"?l-=u.width/2:f=="right"&&(l-=u.width),g=="middle"?r-=u.height/2:g=="bottom"&&(r-=u.height);for(var v=0,p;p=E[v];v++)if(p.x==l&&p.y==r){p.active=!0;return}p={active:!0,rendered:!1,element:E.length?u.element.clone():u.element,x:l,y:r},E.push(p),p.element.css({top:Math.round(r),left:Math.round(l),"text-align":f})},e.prototype.removeText=function(s,l,r,c,i,o){if(c==null){var h=this._textCache[s];if(h!=null){for(var f in h)if(A.call(h,f)){var g=h[f];for(var u in g)if(A.call(g,u))for(var E=g[u].positions,v=0,p;p=E[v];v++)p.active=!1}}}else for(var E=this.getTextInfo(s,c,i,o).positions,v=0,p;p=E[v];v++)p.x==l&&p.y==r&&(p.active=!1)};function n(s,l,r,c){var i=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},h=null,f=null,g=null,u=null,E=null,v=[],p=[],m={left:0,right:0,top:0,bottom:0},y=0,d=0,x={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},b=this;b.setData=T,b.setupGrid=Q,b.draw=J,b.getPlaceholder=function(){return s},b.getCanvas=function(){return h.element},b.getPlotOffset=function(){return m},b.width=function(){return y},b.height=function(){return d},b.offset=function(){var de=g.offset();return de.left+=m.left,de.top+=m.top,de},b.getData=function(){return i},b.getAxes=function(){var de={},ve;return ne.each(v.concat(p),function(me,xe){xe&&(de[xe.direction+(xe.n!=1?xe.n:"")+"axis"]=xe)}),de},b.getXAxes=function(){return v},b.getYAxes=function(){return p},b.c2p=K,b.p2c=U,b.getOptions=function(){return o},b.highlight=Ye,b.unhighlight=Ue,b.triggerRedrawOverlay=Ve,b.pointOffset=function(de){return{left:parseInt(v[S(de,"x")-1].p2c(+de.x)+m.left,10),top:parseInt(p[S(de,"y")-1].p2c(+de.y)+m.top,10)}},b.shutdown=N,b.destroy=function(){N(),s.removeData("plot").empty(),i=[],o=null,h=null,f=null,g=null,u=null,E=null,v=[],p=[],x=null,Ae=[],b=null},b.resize=function(){var de=s.width(),ve=s.height();h.resize(de,ve),f.resize(de,ve)},b.hooks=x,C(b),P(r),M(),T(l),Q(),J(),L();function D(de,ve){ve=[b].concat(ve);for(var me=0;me<de.length;++me)de[me].apply(this,ve)}function C(){for(var de={Canvas:e},ve=0;ve<c.length;++ve){var me=c[ve];me.init(b,de),me.options&&ne.extend(!0,o,me.options)}}function P(de){ne.extend(!0,o,de),de&&de.colors&&(o.colors=de.colors),o.xaxis.color==null&&(o.xaxis.color=ne.color.parse(o.grid.color).scale("a",.22).toString()),o.yaxis.color==null&&(o.yaxis.color=ne.color.parse(o.grid.color).scale("a",.22).toString()),o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color),o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color),o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color),o.grid.tickColor==null&&(o.grid.tickColor=ne.color.parse(o.grid.color).scale("a",.22).toString());var ve,me,xe,Ee=s.css("font-size"),Pe=Ee?+Ee.replace("px",""):13,Oe={style:s.css("font-style"),size:Math.round(.8*Pe),variant:s.css("font-variant"),weight:s.css("font-weight"),family:s.css("font-family")};for(xe=o.xaxes.length||1,ve=0;ve<xe;++ve)me=o.xaxes[ve],me&&!me.tickColor&&(me.tickColor=me.color),me=ne.extend(!0,{},o.xaxis,me),o.xaxes[ve]=me,me.font&&(me.font=ne.extend({},Oe,me.font),me.font.color||(me.font.color=me.color),me.font.lineHeight||(me.font.lineHeight=Math.round(me.font.size*1.15)));for(xe=o.yaxes.length||1,ve=0;ve<xe;++ve)me=o.yaxes[ve],me&&!me.tickColor&&(me.tickColor=me.color),me=ne.extend(!0,{},o.yaxis,me),o.yaxes[ve]=me,me.font&&(me.font=ne.extend({},Oe,me.font),me.font.color||(me.font.color=me.color),me.font.lineHeight||(me.font.lineHeight=Math.round(me.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=ne.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",o.x2axis.min==null&&(o.xaxes[1].min=null),o.x2axis.max==null&&(o.xaxes[1].max=null)),o.y2axis&&(o.yaxes[1]=ne.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",o.y2axis.min==null&&(o.yaxes[1].min=null),o.y2axis.max==null&&(o.yaxes[1].max=null)),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&ne.extend(!0,o.series.lines,o.lines),o.points&&ne.extend(!0,o.series.points,o.points),o.bars&&ne.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),ve=0;ve<o.xaxes.length;++ve)F(v,ve+1).options=o.xaxes[ve];for(ve=0;ve<o.yaxes.length;++ve)F(p,ve+1).options=o.yaxes[ve];for(var We in x)o.hooks[We]&&o.hooks[We].length&&(x[We]=x[We].concat(o.hooks[We]));D(x.processOptions,[o])}function T(de){i=O(de),I(),V()}function O(de){for(var ve=[],me=0;me<de.length;++me){var xe=ne.extend(!0,{},o.series);de[me].data!=null?(xe.data=de[me].data,delete de[me].data,ne.extend(!0,xe,de[me]),de[me].data=xe.data):xe.data=de[me],ve.push(xe)}return ve}function S(de,ve){var me=de[ve+"axis"];return typeof me=="object"&&(me=me.n),typeof me!="number"&&(me=1),me}function B(){return ne.grep(v.concat(p),function(de){return de})}function K(de){var ve={},me,xe;for(me=0;me<v.length;++me)xe=v[me],xe&&(ve["x"+xe.n]=xe.c2p(de.left));for(me=0;me<p.length;++me)xe=p[me],xe&&(ve["y"+xe.n]=xe.c2p(de.top));return ve.x1!==void 0&&(ve.x=ve.x1),ve.y1!==void 0&&(ve.y=ve.y1),ve}function U(de){var ve={},me,xe,Ee;for(me=0;me<v.length;++me)if(xe=v[me],xe&&xe.used&&(Ee="x"+xe.n,de[Ee]==null&&xe.n==1&&(Ee="x"),de[Ee]!=null)){ve.left=xe.p2c(de[Ee]);break}for(me=0;me<p.length;++me)if(xe=p[me],xe&&xe.used&&(Ee="y"+xe.n,de[Ee]==null&&xe.n==1&&(Ee="y"),de[Ee]!=null)){ve.top=xe.p2c(de[Ee]);break}return ve}function F(de,ve){return de[ve-1]||(de[ve-1]={n:ve,direction:de==v?"x":"y",options:ne.extend(!0,{},de==v?o.xaxis:o.yaxis)}),de[ve-1]}function I(){var de=i.length,ve=-1,me;for(me=0;me<i.length;++me){var xe=i[me].color;xe!=null&&(de--,typeof xe=="number"&&xe>ve&&(ve=xe))}de<=ve&&(de=ve+1);var Ee,Pe=[],Oe=o.colors,We=Oe.length,Fe=0;for(me=0;me<de;me++)Ee=ne.color.parse(Oe[me%We]||"#666"),me%We==0&&me&&(Fe>=0?Fe<.5?Fe=-Fe-.2:Fe=0:Fe=-Fe),Pe[me]=Ee.scale("rgb",1+Fe);var Be=0,Le;for(me=0;me<i.length;++me){if(Le=i[me],Le.color==null?(Le.color=Pe[Be].toString(),++Be):typeof Le.color=="number"&&(Le.color=Pe[Le.color].toString()),Le.lines.show==null){var Ge,Ze=!0;for(Ge in Le)if(Le[Ge]&&Le[Ge].show){Ze=!1;break}Ze&&(Le.lines.show=!0)}Le.lines.zero==null&&(Le.lines.zero=!!Le.lines.fill),Le.xaxis=F(v,S(Le,"x")),Le.yaxis=F(p,S(Le,"y"))}}function V(){var de=Number.POSITIVE_INFINITY,ve=Number.NEGATIVE_INFINITY,me=Number.MAX_VALUE,xe,Ee,Pe,Oe,We,Fe,Be,Le,Ge,Ze,qe,at,ht,Et,mt,Pt;function rt(kn,Jn,pt){Jn<kn.datamin&&Jn!=-me&&(kn.datamin=Jn),pt>kn.datamax&&pt!=me&&(kn.datamax=pt)}for(ne.each(B(),function(kn,Jn){Jn.datamin=de,Jn.datamax=ve,Jn.used=!1}),xe=0;xe<i.length;++xe)Fe=i[xe],Fe.datapoints={points:[]},D(x.processRawData,[Fe,Fe.data,Fe.datapoints]);for(xe=0;xe<i.length;++xe){if(Fe=i[xe],mt=Fe.data,Pt=Fe.datapoints.format,!Pt){if(Pt=[],Pt.push({x:!0,number:!0,required:!0}),Pt.push({y:!0,number:!0,required:!0}),Fe.stack||Fe.bars.show||Fe.lines.show&&Fe.lines.fill){var Kt=!!(Fe.bars.show&&Fe.bars.zero||Fe.lines.show&&Fe.lines.zero);Pt.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:Kt}),Fe.bars.horizontal&&(delete Pt[Pt.length-1].y,Pt[Pt.length-1].x=!0)}Fe.datapoints.format=Pt}if(Fe.datapoints.pointsize==null){Fe.datapoints.pointsize=Pt.length,Le=Fe.datapoints.pointsize,Be=Fe.datapoints.points;var Gt=Fe.lines.show&&Fe.lines.steps;for(Fe.xaxis.used=Fe.yaxis.used=!0,Ee=Pe=0;Ee<mt.length;++Ee,Pe+=Le){Et=mt[Ee];var en=Et==null;if(!en)for(Oe=0;Oe<Le;++Oe)at=Et[Oe],ht=Pt[Oe],ht&&(ht.number&&at!=null&&(at=+at,isNaN(at)?at=null:at==1/0?at=me:at==-1/0&&(at=-me)),at==null&&(ht.required&&(en=!0),ht.defaultValue!=null&&(at=ht.defaultValue))),Be[Pe+Oe]=at;if(en)for(Oe=0;Oe<Le;++Oe)at=Be[Pe+Oe],at!=null&&(ht=Pt[Oe],ht.autoscale!==!1&&(ht.x&&rt(Fe.xaxis,at,at),ht.y&&rt(Fe.yaxis,at,at))),Be[Pe+Oe]=null;if(Gt&&Pe>0&&(!en||Be[Pe-Le]!=null)){for(Oe=0;Oe<Le;++Oe)Be[Pe+Le+Oe]=Be[Pe+Oe];Be[Pe+1]=Be[Pe-Le+1]||0,en&&(Be[Pe]=Et[0]),Pe+=Le}}}}for(xe=0;xe<i.length;++xe){if(Fe=i[xe],Be=Fe.datapoints.points,Le=Fe.datapoints.pointsize,Fe.transform==="negative-Y")for(Ee=0;Ee<Be.length;Ee+=Le)Be[Ee]!=null&&(at=Be[Ee+1],Be[Ee+1]=-at);D(x.processDatapoints,[Fe,Fe.datapoints])}for(xe=0;xe<i.length;++xe){Fe=i[xe],Be=Fe.datapoints.points,Le=Fe.datapoints.pointsize,Pt=Fe.datapoints.format;var st=de,$t=de,xn=ve,pn=ve;for(Ee=0;Ee<Be.length;Ee+=Le)if(Be[Ee]!=null)for(Oe=0;Oe<Le;++Oe)at=Be[Ee+Oe],ht=Pt[Oe],!(!ht||ht.autoscale===!1||at==me||at==-me)&&(ht.x&&(at<st&&(st=at),at>xn&&(xn=at)),ht.y&&(at<$t&&($t=at),at>pn&&(pn=at)));if(Fe.bars.show){var _n;switch(Fe.bars.align){case"left":_n=0;break;case"right":_n=-Fe.bars.barWidth;break;default:_n=-Fe.bars.barWidth/2}Fe.bars.horizontal?($t+=_n,pn+=_n+Fe.bars.barWidth):(st+=_n,xn+=_n+Fe.bars.barWidth)}rt(Fe.xaxis,st,xn),rt(Fe.yaxis,$t,pn)}ne.each(B(),function(kn,Jn){Jn.datamin==de&&(Jn.datamin=null),Jn.datamax==ve&&(Jn.datamax=null)})}function M(){s.find(".flot-temp-elem").remove(),s.css("position")=="static"&&s.css("position","relative"),h=new e("flot-base",s),f=new e("flot-overlay",s),u=h.context,E=f.context,g=ne(f.element).unbind();var de=s.data("plot");de&&(de.shutdown(),f.clear()),s.data("plot",b)}function L(){o.grid.hoverable&&(g.mousemove(De),g.bind("mouseleave",Me),ne(document).bind("touchend",$e)),o.grid.clickable&&g.click(Te),D(x.bindEvents,[g])}function N(){_e&&clearTimeout(_e),g.unbind("mousemove",De),g.unbind("mouseleave",Me),g.unbind("click",Te),ne(document).unbind("touchend",$e),D(x.shutdown,[g])}function W(de){function ve(Oe){return Oe}var me,xe,Ee=de.options.transform||ve,Pe=de.options.inverseTransform;de.direction=="x"?(me=de.scale=y/Math.abs(Ee(de.max)-Ee(de.min)),xe=Math.min(Ee(de.max),Ee(de.min))):(me=de.scale=d/Math.abs(Ee(de.max)-Ee(de.min)),me=-me,xe=Math.max(Ee(de.max),Ee(de.min))),Ee==ve?de.p2c=function(Oe){return(Oe-xe)*me}:de.p2c=function(Oe){return(Ee(Oe)-xe)*me},Pe?de.c2p=function(Oe){return Pe(xe+Oe/me)}:de.c2p=function(Oe){return xe+Oe/me}}function R(de){for(var ve=de.options,me=de.ticks||[],xe=ve.labelWidth||0,Ee=ve.labelHeight||0,Pe=xe||(de.direction=="x"?Math.floor(h.width/(me.length||1)):null),Oe=de.direction+"Axis "+de.direction+de.n+"Axis",We="flot-"+de.direction+"-axis flot-"+de.direction+de.n+"-axis "+Oe,Fe=ve.font||"flot-tick-label tickLabel",Be=0;Be<me.length;++Be){var Le=me[Be];if(Le.label){var Ge=h.getTextInfo(We,Le.label,Fe,null,Pe);xe=Math.max(xe,Ge.width+1),Ee=Math.max(Ee,Ge.height)}}de.labelWidth=ve.labelWidth||xe,de.labelHeight=ve.labelHeight||Ee}function G(de){var ve=de.labelWidth,me=de.labelHeight,xe=de.options.position,Ee=de.direction==="x",Pe=de.options.tickLength,Oe=o.grid.axisMargin,We=o.grid.labelMargin,Fe=o.grid.eventSectionHeight,Be=!0,Le=!0,Ge=!0,Ze=!1;ne.each(Ee?v:p,function(qe,at){at&&(at.show||at.reserveSpace)&&(at===de?Ze=!0:at.options.position===xe&&(Ze?Le=!1:Be=!1),Ze||(Ge=!1))}),Le&&(Oe=0),Pe==null&&(Pe=Ge?"full":5),isNaN(+Pe)||(We+=+Pe),Ee?(me+=We,me+=Fe,xe=="bottom"?(m.bottom+=me+Oe,de.box={top:h.height-m.bottom,height:me}):(de.box={top:m.top+Oe,height:me},m.top+=me+Oe)):(ve+=We,xe=="left"?(de.box={left:m.left+Oe,width:ve},m.left+=ve+Oe):(m.right+=ve+Oe,de.box={left:h.width-m.right,width:ve})),de.position=xe,de.tickLength=Pe,de.box.padding=We,de.box.eventSectionPadding=Fe,de.innermost=Be}function w(de){de.direction=="x"?(de.box.left=m.left-de.labelWidth/2,de.box.width=h.width-m.left-m.right+de.labelWidth):(de.box.top=m.top-de.labelHeight/2,de.box.height=h.height-m.bottom-m.top+de.labelHeight)}function _(){var de=o.grid.minBorderMargin,ve,me;if(de==null)for(de=0,me=0;me<i.length;++me)de=Math.max(de,2*(i[me].points.radius+i[me].points.lineWidth/2));var xe={left:de,right:de,top:de,bottom:de};ne.each(B(),function(Ee,Pe){Pe.reserveSpace&&Pe.ticks&&Pe.ticks.length&&(Pe.direction==="x"?(xe.left=Math.max(xe.left,Pe.labelWidth/2),xe.right=Math.max(xe.right,Pe.labelWidth/2)):(xe.bottom=Math.max(xe.bottom,Pe.labelHeight/2),xe.top=Math.max(xe.top,Pe.labelHeight/2)))}),m.left=Math.ceil(Math.max(xe.left,m.left)),m.right=Math.ceil(Math.max(xe.right,m.right)),m.top=Math.ceil(Math.max(xe.top,m.top)),m.bottom=Math.ceil(Math.max(xe.bottom,m.bottom))}function Q(){var de,ve=B(),me=o.grid.show;for(var xe in m){var Ee=o.grid.margin||0;m[xe]=typeof Ee=="number"?Ee:Ee[xe]||0}D(x.processOffset,[m]);for(var xe in m)typeof o.grid.borderWidth=="object"?m[xe]+=me?o.grid.borderWidth[xe]:0:m[xe]+=me?o.grid.borderWidth:0;if(ne.each(ve,function(We,Fe){var Be=Fe.options;Fe.show=Be.show==null?Fe.used:Be.show,Fe.reserveSpace=Be.reserveSpace==null?Fe.show:Be.reserveSpace,ae(Fe)}),D(x.processRange,[]),me){for(var Pe=ne.grep(ve,function(We){return We.show||We.reserveSpace}),Oe=!1,de=0;de<2&&(ne.each(Pe,function(Fe,Be){k(Be),ee(Be),Oe=j(Be,Be.ticks)||Oe,R(Be)}),Oe&&x.processRange.length>0);de++)D(x.processRange,[]),Oe=!1;for(de=Pe.length-1;de>=0;--de)G(Pe[de]);_(),ne.each(Pe,function(We,Fe){w(Fe)})}y=h.width-m.left-m.right,d=h.height-m.bottom-m.top,ne.each(ve,function(We,Fe){W(Fe)}),me&&ie(),Ce()}function ae(de){var ve=de.options,me=+(ve.min!=null?ve.min:de.datamin),xe=+(ve.max!=null?ve.max:de.datamax),Ee=xe-me;if(Ee==0){var Pe=.25,Oe=Math.abs(xe==0?1:xe*Pe);ve.min==null&&(me-=Oe),(ve.max==null||ve.min!=null)&&(xe+=Oe)}else{var We=ve.autoscaleMargin;We!=null&&(ve.min==null&&(me-=Ee*We,me<0&&de.datamin!=null&&de.datamin>=0&&(me=0)),ve.max==null&&(xe+=Ee*We,xe>0&&de.datamax!=null&&de.datamax<=0&&(xe=0)))}de.min=me,de.max=xe}function q(de){if(de=Math.abs(String(de).replace(".","")),de==0)return 0;for(;de!=0&&de%10==0;)de/=10;return Math.floor(Math.log(de)/Math.LN10)+1}function k(de){var ve=de.options,me;typeof ve.ticks=="number"&&ve.ticks>0?me=ve.ticks:me=.3*Math.sqrt(de.direction=="x"?h.width:h.height);var xe=(de.max-de.min)/me,Ee=-Math.floor(Math.log(xe)/Math.LN10),Pe=ve.tickDecimals;Pe!=null&&Ee>Pe&&(Ee=Pe);var Oe=Math.pow(10,-Ee),We=xe/Oe,Fe;if(We<1.5?Fe=1:We<3?(Fe=2,We>2.25&&(Pe==null||Ee+1<=Pe)&&(Fe=2.5,++Ee)):We<7.5?Fe=5:Fe=10,Fe*=Oe,ve.minTickSize!=null&&Fe<ve.minTickSize&&(Fe=ve.minTickSize),de.delta=xe,de.tickDecimals=Math.max(0,Pe??Ee),de.tickSize=ve.tickSize||Fe,ve.mode=="time"&&!de.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(de.tickGenerator||(de.tickGenerator=function(qe){var at=[],ht=a(qe.min,qe.tickSize),Et=0,mt=Number.NaN,Pt;do Pt=mt,mt=ht+Et*qe.tickSize,at.push(mt),++Et;while(mt<qe.max&&mt!=Pt);return at},de.tickFormatter=function(qe,at){var ht=at.tickDecimals?Math.pow(10,at.tickDecimals):1,Et=""+Math.round(qe*ht)/ht;if(at.tickDecimals!=null){var mt=Et.indexOf("."),Pt=mt==-1?0:Et.length-mt-1;if(Pt<at.tickDecimals)return(Pt?Et:Et+".")+(""+ht).substr(1,at.tickDecimals-Pt)}return Et}),ne.isFunction(ve.tickFormatter)&&(de.tickFormatter=function(qe,at){return""+ve.tickFormatter(qe,at)}),ve.alignTicksWithAxis!=null){var Be=(de.direction=="x"?v:p)[ve.alignTicksWithAxis-1];if(Be&&Be.used&&Be!=de){var Le=de.tickGenerator(de);if(Le.length>0&&(ve.min==null&&(de.min=Math.min(de.min,Le[0])),ve.max==null&&Le.length>1&&(de.max=Math.max(de.max,Le[Le.length-1]))),de.tickGenerator=function(qe){var at=[],ht,Et;for(Et=0;Et<Be.ticks.length;++Et)ht=(Be.ticks[Et].v-Be.min)/(Be.max-Be.min),ht=qe.min+ht*(qe.max-qe.min),at.push(ht);return at},!de.mode&&ve.tickDecimals==null){var Ge=Math.max(0,-Math.floor(Math.log(de.delta)/Math.LN10)+1),Ze=de.tickGenerator(de);Ze.length>1&&/\..*0$/.test((Ze[1]-Ze[0]).toFixed(Ge))||(de.tickDecimals=Ge)}}}}function ee(de){var ve=de.options.ticks,me=[];ve==null||typeof ve=="number"&&ve>0?me=de.tickGenerator(de):ve&&(ne.isFunction(ve)?me=ve(de):me=ve);var xe,Ee;for(de.ticks=[],xe=0;xe<me.length;++xe){var Pe=null,Oe=me[xe];typeof Oe=="object"?(Ee=+Oe[0],Oe.length>1&&(Pe=Oe[1])):Ee=+Oe,Pe==null&&(Pe=de.tickFormatter(Ee,de)),isNaN(Ee)||de.ticks.push({v:Ee,label:Pe})}}function j(de,ve){var me=!1;return de.options.autoscaleMargin&&ve.length>0&&(de.options.min==null&&(de.min=Math.min(de.min,ve[0].v),me=!0),de.options.max==null&&ve.length>1&&(de.max=Math.max(de.max,ve[ve.length-1].v),me=!0)),me}function J(){h.clear(),D(x.drawBackground,[u]);var de=o.grid;de.show&&de.backgroundColor&&te(),de.show&&!de.aboveData&&se();for(var ve=0;ve<i.length;++ve)D(x.drawSeries,[u,i[ve]]),re(i[ve]);D(x.draw,[u]),de.show&&de.aboveData&&se(),h.render(),Ve()}function Z(de,ve){for(var me,xe,Ee,Pe,Oe=B(),We=0;We<Oe.length;++We)if(me=Oe[We],me.direction==ve&&(Pe=ve+me.n+"axis",!de[Pe]&&me.n==1&&(Pe=ve+"axis"),de[Pe])){xe=de[Pe].from,Ee=de[Pe].to;break}if(de[Pe]||(me=ve=="x"?v[0]:p[0],xe=de[ve+"1"],Ee=de[ve+"2"]),xe!=null&&Ee!=null&&xe>Ee){var Fe=xe;xe=Ee,Ee=Fe}return{from:xe,to:Ee,axis:me}}function te(){u.save(),u.translate(m.left,m.top),u.fillStyle=Je(o.grid.backgroundColor,d,0,"rgba(255, 255, 255, 0)"),u.fillRect(0,0,y,d),u.restore()}function se(){var de,ve,me,xe;u.save(),u.translate(m.left,m.top);var Ee=o.grid.markings;if(Ee)for(ne.isFunction(Ee)&&(ve=b.getAxes(),ve.xmin=ve.xaxis.min,ve.xmax=ve.xaxis.max,ve.ymin=ve.yaxis.min,ve.ymax=ve.yaxis.max,Ee=Ee(ve)),de=0;de<Ee.length;++de){var Pe=Ee[de],Oe=Z(Pe,"x"),We=Z(Pe,"y");if(Oe.from==null&&(Oe.from=Oe.axis.min),Oe.to==null&&(Oe.to=Oe.axis.max),We.from==null&&(We.from=We.axis.min),We.to==null&&(We.to=We.axis.max),!(Oe.to<Oe.axis.min||Oe.from>Oe.axis.max||We.to<We.axis.min||We.from>We.axis.max)){Oe.from=Math.max(Oe.from,Oe.axis.min),Oe.to=Math.min(Oe.to,Oe.axis.max),We.from=Math.max(We.from,We.axis.min),We.to=Math.min(We.to,We.axis.max);var Fe=Oe.from===Oe.to,Be=We.from===We.to;if(!(Fe&&Be))if(Oe.from=Math.floor(Oe.axis.p2c(Oe.from)),Oe.to=Math.floor(Oe.axis.p2c(Oe.to)),We.from=Math.floor(We.axis.p2c(We.from)),We.to=Math.floor(We.axis.p2c(We.to)),Fe||Be){var Le=Pe.lineWidth||o.grid.markingsLineWidth,Ge=Le%2?.5:0;u.beginPath(),u.strokeStyle=Pe.color||o.grid.markingsColor,u.lineWidth=Le,Fe?(u.moveTo(Oe.to+Ge,We.from),u.lineTo(Oe.to+Ge,We.to)):(u.moveTo(Oe.from,We.to+Ge),u.lineTo(Oe.to,We.to+Ge)),u.stroke()}else u.fillStyle=Pe.color||o.grid.markingsColor,u.fillRect(Oe.from,We.to,Oe.to-Oe.from,We.from-We.to)}}ve=B(),me=o.grid.borderWidth;for(var Ze=0;Ze<ve.length;++Ze){var qe=ve[Ze],at=qe.box,ht=qe.tickLength,Et,mt,Pt,rt;if(!(!qe.show||qe.ticks.length==0)){for(u.lineWidth=1,qe.direction=="x"?(Et=0,ht=="full"?mt=qe.position=="top"?0:d:mt=at.top-m.top+(qe.position=="top"?at.height:0)):(mt=0,ht=="full"?Et=qe.position=="left"?0:y:Et=at.left-m.left+(qe.position=="left"?at.width:0)),qe.innermost||(u.strokeStyle=qe.options.color,u.beginPath(),Pt=rt=0,qe.direction=="x"?Pt=y+1:rt=d+1,u.lineWidth==1&&(qe.direction=="x"?mt=Math.floor(mt)+.5:Et=Math.floor(Et)+.5),u.moveTo(Et,mt),u.lineTo(Et+Pt,mt+rt),u.stroke()),u.strokeStyle=qe.options.tickColor,u.beginPath(),de=0;de<qe.ticks.length;++de){var Kt=qe.ticks[de].v;Pt=rt=0,!(isNaN(Kt)||Kt<qe.min||Kt>qe.max||ht=="full"&&(typeof me=="object"&&me[qe.position]>0||me>0)&&(Kt==qe.min||Kt==qe.max))&&(qe.direction=="x"?(Et=qe.p2c(Kt),rt=ht=="full"?-d:ht,qe.position=="top"&&(rt=-rt)):(mt=qe.p2c(Kt),Pt=ht=="full"?-y:ht,qe.position=="left"&&(Pt=-Pt)),u.lineWidth==1&&(qe.direction=="x"?Et=Math.floor(Et)+.5:mt=Math.floor(mt)+.5),u.moveTo(Et,mt),u.lineTo(Et+Pt,mt+rt))}u.stroke()}}me&&(xe=o.grid.borderColor,typeof me=="object"||typeof xe=="object"?(typeof me!="object"&&(me={top:me,right:me,bottom:me,left:me}),typeof xe!="object"&&(xe={top:xe,right:xe,bottom:xe,left:xe}),me.top>0&&(u.strokeStyle=xe.top,u.lineWidth=me.top,u.beginPath(),u.moveTo(0-me.left,0-me.top/2),u.lineTo(y,0-me.top/2),u.stroke()),me.right>0&&(u.strokeStyle=xe.right,u.lineWidth=me.right,u.beginPath(),u.moveTo(y+me.right/2,0-me.top),u.lineTo(y+me.right/2,d),u.stroke()),me.bottom>0&&(u.strokeStyle=xe.bottom,u.lineWidth=me.bottom,u.beginPath(),u.moveTo(y+me.right,d+me.bottom/2),u.lineTo(0,d+me.bottom/2),u.stroke()),me.left>0&&(u.strokeStyle=xe.left,u.lineWidth=me.left,u.beginPath(),u.moveTo(0-me.left/2,d+me.bottom),u.lineTo(0-me.left/2,0),u.stroke())):(u.lineWidth=me,u.strokeStyle=o.grid.borderColor,u.strokeRect(-me/2,-me/2,y+me,d+me))),u.restore()}function ie(){ne.each(B(),function(de,ve){var me=ve.box,xe=ve.direction+"Axis "+ve.direction+ve.n+"Axis",Ee="flot-"+ve.direction+"-axis flot-"+ve.direction+ve.n+"-axis "+xe,Pe=ve.options.font||"flot-tick-label tickLabel",Oe,We,Fe,Be,Le;if(h.removeText(Ee),!(!ve.show||ve.ticks.length==0))for(var Ge=0;Ge<ve.ticks.length;++Ge)Oe=ve.ticks[Ge],!(!Oe.label||Oe.v<ve.min||Oe.v>ve.max)&&(ve.direction=="x"?(Be="center",We=m.left+ve.p2c(Oe.v),ve.position=="bottom"?Fe=me.top+me.padding+me.eventSectionPadding:(Fe=me.top+me.height-me.padding,Le="bottom")):(Le="middle",Fe=m.top+ve.p2c(Oe.v),ve.position=="left"?(We=me.left+me.width-me.padding,Be="right"):We=me.left+me.padding),h.addText(Ee,We,Fe,Oe.label,Pe,null,null,Be,Le))})}function ce(de){for(var ve=[],me=null,xe=null,Ee=de.datapoints,Pe=[],Oe=0;Oe<Ee.pointsize-2;Oe++)Pe.push(0);for(var We=0;We<Ee.points.length;We+=Ee.pointsize){var Fe=Ee.points[We],Be=Ee.points[We+1];We===Ee.points.length-Ee.pointsize?xe=null:xe=Ee.points[We+Ee.pointsize],Fe!==null&&Be!==null&&me===null&&xe===null&&(ve.push(Fe),ve.push(Be),ve.push.apply(ve,Pe)),me=Fe}var Le=Ee.points;Ee.points=ve,de.points.radius=de.lines.lineWidth/2,X(de),Ee.points=Le}function re(de){de.lines.show&&(ue(de),!de.points.show&&!de.bars.show&&ce(de)),de.bars.show&&he(de),de.points.show&&X(de)}function ue(de){function ve(We,Fe,Be,Le,Ge){var Ze=We.points,qe=We.pointsize,at=null,ht=null;u.beginPath();for(var Et=qe;Et<Ze.length;Et+=qe){var mt=Ze[Et-qe],Pt=Ze[Et-qe+1],rt=Ze[Et],Kt=Ze[Et+1];if(!(mt==null||rt==null)){if(Pt<=Kt&&Pt<Ge.min){if(Kt<Ge.min)continue;mt=(Ge.min-Pt)/(Kt-Pt)*(rt-mt)+mt,Pt=Ge.min}else if(Kt<=Pt&&Kt<Ge.min){if(Pt<Ge.min)continue;rt=(Ge.min-Pt)/(Kt-Pt)*(rt-mt)+mt,Kt=Ge.min}if(Pt>=Kt&&Pt>Ge.max){if(Kt>Ge.max)continue;mt=(Ge.max-Pt)/(Kt-Pt)*(rt-mt)+mt,Pt=Ge.max}else if(Kt>=Pt&&Kt>Ge.max){if(Pt>Ge.max)continue;rt=(Ge.max-Pt)/(Kt-Pt)*(rt-mt)+mt,Kt=Ge.max}if(mt<=rt&&mt<Le.min){if(rt<Le.min)continue;Pt=(Le.min-mt)/(rt-mt)*(Kt-Pt)+Pt,mt=Le.min}else if(rt<=mt&&rt<Le.min){if(mt<Le.min)continue;Kt=(Le.min-mt)/(rt-mt)*(Kt-Pt)+Pt,rt=Le.min}if(mt>=rt&&mt>Le.max){if(rt>Le.max)continue;Pt=(Le.max-mt)/(rt-mt)*(Kt-Pt)+Pt,mt=Le.max}else if(rt>=mt&&rt>Le.max){if(mt>Le.max)continue;Kt=(Le.max-mt)/(rt-mt)*(Kt-Pt)+Pt,rt=Le.max}(mt!=at||Pt!=ht)&&u.moveTo(Le.p2c(mt)+Fe,Ge.p2c(Pt)+Be),at=rt,ht=Kt,u.lineTo(Le.p2c(rt)+Fe,Ge.p2c(Kt)+Be)}}u.stroke()}function me(We,Fe,Be){for(var Le=We.points,Ge=We.pointsize,Ze=Math.min(Math.max(0,Be.min),Be.max),qe=0,at,ht=!1,Et=1,mt=0,Pt=0;!(Ge>0&&qe>Le.length+Ge);){qe+=Ge;var rt=Le[qe-Ge],Kt=Le[qe-Ge+Et],Gt=Le[qe],en=Le[qe+Et];if(ht){if(Ge>0&&rt!=null&&Gt==null){Pt=qe,Ge=-Ge,Et=2;continue}if(Ge<0&&qe==mt+Ge){u.fill(),ht=!1,Ge=-Ge,Et=1,qe=mt=Pt+Ge;continue}}if(!(rt==null||Gt==null)){if(rt<=Gt&&rt<Fe.min){if(Gt<Fe.min)continue;Kt=(Fe.min-rt)/(Gt-rt)*(en-Kt)+Kt,rt=Fe.min}else if(Gt<=rt&&Gt<Fe.min){if(rt<Fe.min)continue;en=(Fe.min-rt)/(Gt-rt)*(en-Kt)+Kt,Gt=Fe.min}if(rt>=Gt&&rt>Fe.max){if(Gt>Fe.max)continue;Kt=(Fe.max-rt)/(Gt-rt)*(en-Kt)+Kt,rt=Fe.max}else if(Gt>=rt&&Gt>Fe.max){if(rt>Fe.max)continue;en=(Fe.max-rt)/(Gt-rt)*(en-Kt)+Kt,Gt=Fe.max}if(ht||(u.beginPath(),u.moveTo(Fe.p2c(rt),Be.p2c(Ze)),ht=!0),Kt>=Be.max&&en>=Be.max){u.lineTo(Fe.p2c(rt),Be.p2c(Be.max)),u.lineTo(Fe.p2c(Gt),Be.p2c(Be.max));continue}else if(Kt<=Be.min&&en<=Be.min){u.lineTo(Fe.p2c(rt),Be.p2c(Be.min)),u.lineTo(Fe.p2c(Gt),Be.p2c(Be.min));continue}var st=rt,$t=Gt;Kt<=en&&Kt<Be.min&&en>=Be.min?(rt=(Be.min-Kt)/(en-Kt)*(Gt-rt)+rt,Kt=Be.min):en<=Kt&&en<Be.min&&Kt>=Be.min&&(Gt=(Be.min-Kt)/(en-Kt)*(Gt-rt)+rt,en=Be.min),Kt>=en&&Kt>Be.max&&en<=Be.max?(rt=(Be.max-Kt)/(en-Kt)*(Gt-rt)+rt,Kt=Be.max):en>=Kt&&en>Be.max&&Kt<=Be.max&&(Gt=(Be.max-Kt)/(en-Kt)*(Gt-rt)+rt,en=Be.max),rt!=st&&u.lineTo(Fe.p2c(st),Be.p2c(Kt)),u.lineTo(Fe.p2c(rt),Be.p2c(Kt)),u.lineTo(Fe.p2c(Gt),Be.p2c(en)),Gt!=$t&&(u.lineTo(Fe.p2c(Gt),Be.p2c(en)),u.lineTo(Fe.p2c($t),Be.p2c(en)))}}}u.save(),u.translate(m.left,m.top),u.lineJoin="round";var xe=de.lines.lineWidth,Ee=de.shadowSize;if(xe>0&&Ee>0){u.lineWidth=Ee,u.strokeStyle="rgba(0,0,0,0.1)";var Pe=Math.PI/18;ve(de.datapoints,Math.sin(Pe)*(xe/2+Ee/2),Math.cos(Pe)*(xe/2+Ee/2),de.xaxis,de.yaxis),u.lineWidth=Ee/2,ve(de.datapoints,Math.sin(Pe)*(xe/2+Ee/4),Math.cos(Pe)*(xe/2+Ee/4),de.xaxis,de.yaxis)}u.lineWidth=xe,u.strokeStyle=de.color;var Oe=fe(de.lines,de.color,0,d);Oe&&(u.fillStyle=Oe,me(de.datapoints,de.xaxis,de.yaxis)),xe>0&&ve(de.datapoints,0,0,de.xaxis,de.yaxis),u.restore()}function X(de){function ve(We,Fe,Be,Le,Ge,Ze,qe,at){for(var ht=We.points,Et=We.pointsize,mt=0;mt<ht.length;mt+=Et){var Pt=ht[mt],rt=ht[mt+1];Pt==null||Pt<Ze.min||Pt>Ze.max||rt<qe.min||rt>qe.max||(u.beginPath(),Pt=Ze.p2c(Pt),rt=qe.p2c(rt)+Le,at=="circle"?u.arc(Pt,rt,Fe,0,Ge?Math.PI:Math.PI*2,!1):at(u,Pt,rt,Fe,Ge),u.closePath(),Be&&(u.fillStyle=Be,u.fill()),u.stroke())}}u.save(),u.translate(m.left,m.top);var me=de.points.lineWidth,xe=de.shadowSize,Ee=de.points.radius,Pe=de.points.symbol;if(me==0&&(me=1e-4),me>0&&xe>0){var Oe=xe/2;u.lineWidth=Oe,u.strokeStyle="rgba(0,0,0,0.1)",ve(de.datapoints,Ee,null,Oe+Oe/2,!0,de.xaxis,de.yaxis,Pe),u.strokeStyle="rgba(0,0,0,0.2)",ve(de.datapoints,Ee,null,Oe/2,!0,de.xaxis,de.yaxis,Pe)}u.lineWidth=me,u.strokeStyle=de.color,ve(de.datapoints,Ee,fe(de.points,de.color),0,!1,de.xaxis,de.yaxis,Pe),u.restore()}function le(de,ve,me,xe,Ee,Pe,Oe,We,Fe,Be,Le){var Ge,Ze,qe,at,ht,Et,mt,Pt,rt;Be?(Pt=Et=mt=!0,ht=!1,Ge=me,Ze=de,at=ve+xe,qe=ve+Ee,Ze<Ge&&(rt=Ze,Ze=Ge,Ge=rt,ht=!0,Et=!1)):(ht=Et=mt=!0,Pt=!1,Ge=de+xe,Ze=de+Ee,qe=me,at=ve,at<qe&&(rt=at,at=qe,qe=rt,Pt=!0,mt=!1)),!(Ze<Oe.min||Ge>Oe.max||at<We.min||qe>We.max)&&(Ge<Oe.min&&(Ge=Oe.min,ht=!1),Ze>Oe.max&&(Ze=Oe.max,Et=!1),qe<We.min&&(qe=We.min,Pt=!1),at>We.max&&(at=We.max,mt=!1),Ge=Oe.p2c(Ge),qe=We.p2c(qe),Ze=Oe.p2c(Ze),at=We.p2c(at),Pe&&(Fe.fillStyle=Pe(qe,at),Fe.fillRect(Ge,at,Ze-Ge,qe-at)),Le>0&&(ht||Et||mt||Pt)&&(Fe.beginPath(),Fe.moveTo(Ge,qe),ht?Fe.lineTo(Ge,at):Fe.moveTo(Ge,at),mt?Fe.lineTo(Ze,at):Fe.moveTo(Ze,at),Et?Fe.lineTo(Ze,qe):Fe.moveTo(Ze,qe),Pt?Fe.lineTo(Ge,qe):Fe.moveTo(Ge,qe),Fe.stroke()))}function he(de){function ve(Ee,Pe,Oe,We,Fe,Be){for(var Le=Ee.points,Ge=Ee.pointsize,Ze=0;Ze<Le.length;Ze+=Ge)Le[Ze]!=null&&le(Le[Ze],Le[Ze+1],Le[Ze+2],Pe,Oe,We,Fe,Be,u,de.bars.horizontal,de.bars.lineWidth)}u.save(),u.translate(m.left,m.top),u.lineWidth=de.bars.lineWidth,u.strokeStyle=de.color;var me;switch(de.bars.align){case"left":me=0;break;case"right":me=-de.bars.barWidth;break;default:me=-de.bars.barWidth/2}var xe=de.bars.fill?function(Ee,Pe){return fe(de.bars,de.color,Ee,Pe)}:null;ve(de.datapoints,me,me+de.bars.barWidth,xe,de.xaxis,de.yaxis),u.restore()}function fe(de,ve,me,xe){var Ee=de.fill;if(!Ee)return null;if(de.fillColor)return Je(de.fillColor,me,xe,ve);var Pe=ne.color.parse(ve);return Pe.a=typeof Ee=="number"?Ee:.4,Pe.normalize(),Pe.toString()}function Ce(){if(o.legend.container!=null?ne.find(o.legend.container).html(""):s.find(".legend").remove(),!!o.legend.show){for(var de=[],ve=[],me=!1,xe=o.legend.labelFormatter,Ee,Pe,Oe=0;Oe<i.length;++Oe)Ee=i[Oe],Ee.label&&(Pe=xe?xe(Ee.label,Ee):Ee.label,Pe&&ve.push({label:Pe,color:Ee.color}));if(o.legend.sorted)if(ne.isFunction(o.legend.sorted))ve.sort(o.legend.sorted);else if(o.legend.sorted=="reverse")ve.reverse();else{var We=o.legend.sorted!="descending";ve.sort(function(Et,mt){return Et.label==mt.label?0:Et.label<mt.label!=We?1:-1})}for(var Oe=0;Oe<ve.length;++Oe){var Fe=ve[Oe];Oe%o.legend.noColumns==0&&(me&&de.push("</tr>"),de.push("<tr>"),me=!0),de.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+Fe.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+Fe.label+"</td>")}if(me&&de.push("</tr>"),de.length!=0){var Be='<table style="font-size:smaller;color:'+o.grid.color+'">'+de.join("")+"</table>";if(o.legend.container!=null)ne(o.legend.container).html(Be);else{var Le="",Ge=o.legend.position,Ze=o.legend.margin;Ze[0]==null&&(Ze=[Ze,Ze]),Ge.charAt(0)=="n"?Le+="top:"+(Ze[1]+m.top)+"px;":Ge.charAt(0)=="s"&&(Le+="bottom:"+(Ze[1]+m.bottom)+"px;"),Ge.charAt(1)=="e"?Le+="right:"+(Ze[0]+m.right)+"px;":Ge.charAt(1)=="w"&&(Le+="left:"+(Ze[0]+m.left)+"px;");var qe=ne('<div class="legend">'+Be.replace('style="','style="position:absolute;'+Le+";")+"</div>").appendTo(s);if(o.legend.backgroundOpacity!=0){var at=o.legend.backgroundColor;at==null&&(at=o.grid.backgroundColor,at&&typeof at=="string"?at=ne.color.parse(at):at=ne.color.extract(qe,"background-color"),at.a=1,at=at.toString());var ht=qe.children();ne('<div style="position:absolute;width:'+ht.width()+"px;height:"+ht.height()+"px;"+Le+"background-color:"+at+';"> </div>').prependTo(qe).css("opacity",o.legend.backgroundOpacity)}}}}}var Ae=[],_e=null;function Xe(de,ve,me){var xe=o.grid.mouseActiveRadius,Ee=xe*xe+1,Pe=null,Oe=!1,We,Fe,Be;for(We=i.length-1;We>=0;--We)if(me(i[We])){var Le=i[We],Ge=Le.xaxis,Ze=Le.yaxis,qe=Le.datapoints.points,at=Ge.c2p(de),ht=Ze.c2p(ve),Et=xe/Ge.scale,mt=xe/Ze.scale;if(Be=Le.datapoints.pointsize,Ge.options.inverseTransform&&(Et=Number.MAX_VALUE),Ze.options.inverseTransform&&(mt=Number.MAX_VALUE),Le.lines.show||Le.points.show)for(Fe=0;Fe<qe.length;Fe+=Be){var Pt=qe[Fe],rt=qe[Fe+1];if(Pt!=null&&!(Pt-at>Et||Pt-at<-Et||rt-ht>mt||rt-ht<-mt)){var Kt=Math.abs(Ge.p2c(Pt)-de),Gt=Math.abs(Ze.p2c(rt)-ve),en=Kt*Kt+Gt*Gt;en<Ee&&(Ee=en,Pe=[We,Fe/Be])}}if(Le.bars.show&&!Pe){var st,$t;switch(Le.bars.align){case"left":st=0;break;case"right":st=-Le.bars.barWidth;break;default:st=-Le.bars.barWidth/2}for($t=st+Le.bars.barWidth,Fe=0;Fe<qe.length;Fe+=Be){var Pt=qe[Fe],rt=qe[Fe+1],xn=qe[Fe+2];Pt!=null&&(i[We].bars.horizontal?at<=Math.max(xn,Pt)&&at>=Math.min(xn,Pt)&&ht>=rt+st&&ht<=rt+$t:at>=Pt+st&&at<=Pt+$t&&ht>=Math.min(xn,rt)&&ht<=Math.max(xn,rt))&&(Pe=[We,Fe/Be])}}}return Pe?(We=Pe[0],Fe=Pe[1],Be=i[We].datapoints.pointsize,{datapoint:i[We].datapoints.points.slice(Fe*Be,(Fe+1)*Be),dataIndex:Fe,series:i[We],seriesIndex:We}):null}function De(de){o.grid.hoverable&&Ke("plothover",de,function(ve){return ve.hoverable!=!1})}function Me(de){o.grid.hoverable&&Ke("plothover",de,function(ve){return!1})}function Te(de){b.isSelecting||Ke("plotclick",de,function(ve){return ve.clickable!=!1})}function $e(de){if(de.cancelable){if(!g.is(de.target)&&g.has(de.target).length===0){Ke("plotleave",de,function(ve){});return}De(Re(de)),de.preventDefault()}}function Re(de){if(!de||!de.originalEvent||de.pageX&&de.pageY)return de;var ve=de.originalEvent;if(ve.changedTouches.length===0)return de;var me=ve.changedTouches[0];return de.pageX=me.pageX,de.pageY=me.pageY,de}function Ke(de,ve,me){var xe=g.offset(),Ee=ve.pageX-xe.left-m.left,Pe=ve.pageY-xe.top-m.top,Oe=K({left:Ee,top:Pe});Oe.pageX=ve.pageX,Oe.pageY=ve.pageY,Oe.ctrlKey=ve.ctrlKey,Oe.metaKey=ve.metaKey;var We=Xe(Ee,Pe,me);if(We&&(We.pageX=parseInt(We.series.xaxis.p2c(We.datapoint[0])+xe.left+m.left,10),We.pageY=parseInt(We.series.yaxis.p2c(We.datapoint[1])+xe.top+m.top,10)),o.grid.autoHighlight){for(var Fe=0;Fe<Ae.length;++Fe){var Be=Ae[Fe];Be.auto==de&&!(We&&Be.series==We.series&&Be.point[0]==We.datapoint[0]&&Be.point[1]==We.datapoint[1])&&Ue(Be.series,Be.point)}We&&Ye(We.series,We.datapoint,de)}s.trigger(de,[Oe,We])}function Ve(){var de=o.interaction.redrawOverlayInterval;if(de==-1){Se();return}_e||(_e=setTimeout(Se,de))}function Se(){_e=null,E.save(),f.clear(),E.translate(m.left,m.top);var de,ve;for(de=0;de<Ae.length;++de)ve=Ae[de],ve.series.bars.show?He(ve.series,ve.point):Qe(ve.series,ve.point);E.restore(),D(x.drawOverlay,[E])}function Ye(de,ve,me){if(typeof de=="number"&&(de=i[de]),typeof ve=="number"){var xe=de.datapoints.pointsize;ve=de.datapoints.points.slice(xe*ve,xe*(ve+1))}var Ee=je(de,ve);Ee==-1?(Ae.push({series:de,point:ve,auto:me}),Ve()):me||(Ae[Ee].auto=!1)}function Ue(de,ve){if(de==null&&ve==null){Ae=[],Ve();return}if(typeof de=="number"&&(de=i[de]),typeof ve=="number"){var me=de.datapoints.pointsize;ve=de.datapoints.points.slice(me*ve,me*(ve+1))}var xe=je(de,ve);xe!=-1&&(Ae.splice(xe,1),Ve())}function je(de,ve){for(var me=0;me<Ae.length;++me){var xe=Ae[me];if(xe.series==de&&xe.point[0]==ve[0]&&xe.point[1]==ve[1])return me}return-1}function Qe(de,ve){var me=ve[0],xe=ve[1],Ee=de.xaxis,Pe=de.yaxis,Oe=typeof de.highlightColor=="string"?de.highlightColor:ne.color.parse(de.color).scale("a",.5).toString();if(!(me<Ee.min||me>Ee.max||xe<Pe.min||xe>Pe.max)){var We=de.points.radius+de.points.lineWidth/2;E.lineWidth=We,E.strokeStyle=Oe;var Fe=1.5*We;me=Ee.p2c(me),xe=Pe.p2c(xe),E.beginPath(),de.points.symbol=="circle"?E.arc(me,xe,Fe,0,2*Math.PI,!1):de.points.symbol(E,me,xe,Fe,!1),E.closePath(),E.stroke()}}function He(de,ve){var me=typeof de.highlightColor=="string"?de.highlightColor:ne.color.parse(de.color).scale("a",.5).toString(),xe=me,Ee;switch(de.bars.align){case"left":Ee=0;break;case"right":Ee=-de.bars.barWidth;break;default:Ee=-de.bars.barWidth/2}E.lineWidth=de.bars.lineWidth,E.strokeStyle=me,le(ve[0],ve[1],ve[2]||0,Ee,Ee+de.bars.barWidth,function(){return xe},de.xaxis,de.yaxis,E,de.bars.horizontal,de.bars.lineWidth)}function Je(de,ve,me,xe){if(typeof de=="string")return de;for(var Ee=u.createLinearGradient(0,me,0,ve),Pe=0,Oe=de.colors.length;Pe<Oe;++Pe){var We=de.colors[Pe];if(typeof We!="string"){var Fe=ne.color.parse(xe);We.brightness!=null&&(Fe=Fe.scale("rgb",We.brightness)),We.opacity!=null&&(Fe.a*=We.opacity),We=Fe.toString()}Ee.addColorStop(Pe/(Oe-1),We)}return Ee}}ne.plot=function(s,l,r){var c=new n(ne(s),l,r,ne.plot.plugins);return c},ne.plot.version="0.8.3",ne.plot.plugins=[],ne.fn.plot=function(s,l){return this.each(function(){ne.plot(this,s,l)})};function a(s,l){return l*Math.floor(s/l)}}(jQuery)},54092:(ne,A,e)=>{"use strict";e.d(A,{L9:()=>s,SM:()=>a,u6:()=>n});var n=(l=>(l.link="link",l.component="component",l.function="function",l))(n||{}),a=(l=>(l.AlertInstanceAction="grafana/alerting/instance/action",l.AlertingHomePage="grafana/alerting/home",l.AlertingAlertingRuleAction="grafana/alerting/alertingrule/action",l.AlertingRecordingRuleAction="grafana/alerting/recordingrule/action",l.AlertingRuleQueryEditor="grafana/alerting/alertingrule/queryeditor",l.CommandPalette="grafana/commandpalette/action",l.DashboardPanelMenu="grafana/dashboard/panel/menu",l.DataSourceConfig="grafana/datasources/config",l.DataSourceConfigActions="grafana/datasources/config/actions",l.DataSourceConfigErrorStatus="grafana/datasources/config/error-status",l.DataSourceConfigStatus="grafana/datasources/config/status",l.ExploreToolbarAction="grafana/explore/toolbar/action",l.UserProfileTab="grafana/user/profile/tab",l.TraceViewDetails="grafana/traceview/details",l.TraceViewHeaderActions="grafana/traceview/header/actions",l.QueryEditorRowAdaptiveTelemetryV1="grafana/query-editor-row/adaptivetelemetry/v1",l.TraceViewResourceAttributes="grafana/traceview/resource-attributes",l.LogsViewResourceAttributes="grafana/logsview/resource-attributes",l.AppChrome="grafana/app/chrome/v1",l.ExtensionSidebar="grafana/extension-sidebar/v0-alpha",l))(a||{}),s=(l=>(l.CentralAlertHistorySceneV1="grafana/central-alert-history-scene/v1",l))(s||{})},54115:(ne,A,e)=>{"use strict";e.d(A,{H1:()=>m,ws:()=>v});var n=e(65474),a=e(66847),s=e(16126),l=e(81160),r=e(69862),c=e(33160),i=e(38619),o=e(68143),h=e(43173),f=e(33184),g=e(73427),u=e(85618),E=e(75735);class v{constructor(x,b=!0){this.parseListOptionsSelector=y;const D=b?`namespaces/${(0,u.Ge)()}/`:"";this.gvr=x,this.url=`/apis/${x.group}/${x.version}/${D}${x.resource}`}async get(x){return(0,o.AI)().get(`${this.url}/${x}`)}watch(x){const b={watch:!0,labelSelector:this.parseListOptionsSelector(x?.labelSelector),fieldSelector:this.parseListOptionsSelector(x?.fieldSelector)};if(x?.name&&(b.fieldSelector=`metadata.name=${x.name}`),this.gvr.group==="provisioning.grafana.app"){let C="";return b.fieldSelector?.startsWith("metadata.name=")&&(C=b.fieldSelector.substring(13)),(0,f.oF)().getStream({scope:i.qD.Watch,namespace:this.gvr.group,path:`${this.gvr.version}/${this.gvr.resource}${C}/${g.TP.user.uid}`}).pipe((0,s.p)(P=>(0,i.Z7)(P)),(0,l.T)(P=>P.message))}const D=new TextDecoder;return(0,o.AI)().chunked({url:this.url,params:b,method:"GET"}).pipe((0,s.p)(C=>C.ok&&C.data instanceof Uint8Array),(0,l.T)(C=>D.decode(C.data).split(`
`)),(0,r.Z)(C=>(0,n.H)(C)),(0,s.p)(C=>C.length>0),(0,l.T)(C=>{try{return JSON.parse(C)}catch(P){return console.warn("Invalid JSON in watch stream:",P,C),null}}),(0,s.p)(C=>C!==null),(0,c.L)({count:3,delay:1e3}),(0,a.W)(C=>{throw console.error("Watch stream error:",C),C}))}async subresource(x,b,D){return(0,o.AI)().get(`${this.url}/${x}/${b}`,D)}async list(x){const b=x||{};return b.labelSelector=this.parseListOptionsSelector(b?.labelSelector),b.fieldSelector=this.parseListOptionsSelector(b?.fieldSelector),(0,o.AI)().get(this.url,x)}async create(x,b){if(!x.metadata.name&&!x.metadata.generateName){const D=g.TP.user.login,C=D?D.replace(/[^a-zA-Z]/g,"").slice(0,2):"";x.metadata.generateName=C||"g"}return p(x.metadata),(0,o.AI)().post(this.url,x,{params:b})}async update(x,b){p(x.metadata);const D=`${this.url}/${x.metadata.name}`;return(0,o.AI)().put(D,x,{params:b})}async delete(x,b){return(0,o.AI)().delete(`${this.url}/${x}`,void 0,{showSuccessAlert:b})}}function p(d){d.annotations||(d.annotations={}),d.annotations[E.Pd]=h.$.buildInfo.versionString}class m{async get(x){if(this.apiVersions)return this.apiVersions[x];const b=await(0,o.AI)().get("/apis"),D={};return b.groups.forEach(C=>{if(C.name.includes("datasource.grafana.app")){const P=C.name.split(".")[0];D[P]=C.preferredVersion.version,P.endsWith("-datasource")||(P.includes("-")?D[`${P}-datasource`]=C.preferredVersion.version:D[`grafana-${P}-datasource`]=C.preferredVersion.version)}}),this.apiVersions=D,D[x]}}const y=d=>Array.isArray(d)?d.map(x=>{const b=String(x.key),D=x.operator;switch(D){case"=":case"!=":return`${b}${D}${x.value}`;case"in":case"notin":return`${b} ${D} (${x.value.join(",")})`;case"":case"!":return`${D}${b}`;default:return null}}).filter(Boolean).join(","):d},54314:(ne,A,e)=>{"use strict";e.d(A,{U:()=>r});var n=e(74848),a=e(22803),s=e(96540),l=e(63142);const r=(0,s.forwardRef)(({children:i,className:o,hideBorder:h=!1},f)=>{const g=(0,l.of)(c);return(0,n.jsx)("div",{className:(0,a.cx)(g.tabsWrapper,h&&g.noBorder,o),ref:f,children:(0,n.jsx)("div",{className:g.tabs,role:"tablist",children:i})})}),c=i=>({tabsWrapper:(0,a.css)({borderBottom:`1px solid ${i.colors.border.weak}`,overflowX:"auto"}),noBorder:(0,a.css)({borderBottom:0}),tabs:(0,a.css)({position:"relative",display:"flex",alignItems:"center"})});r.displayName="TabsBar"},54384:(ne,A,e)=>{"use strict";e.d(A,{x:()=>W});var n=e(74848),a=e(22803),s=e(2543),l=e(96540),r=e(92745),c=e(63142),i=e(31286),o=e(66404),h=e(45861),f=e(63722),g=e(83873),u=e(78059),E=e(90382),v=e(41654),p=e(18857),m=e(15840),y=e(76459),d=e.n(y),x=e(68143);class b extends l.Component{constructor(ee){super(ee),this.search=d()(async j=>(this.setState({isLoading:!0}),(0,s.isNil)(j)&&(j=""),(0,x.AI)().get(`/api/serviceaccounts/search?query=${j}&perpage=100`).then(J=>J.serviceAccounts.map(Z=>({id:Z.id,uid:Z.uid,value:Z,label:Z.login,imgUrl:Z.avatarUrl,login:Z.login}))).finally(()=>{this.setState({isLoading:!1})})),300,{leading:!0}),this.state={isLoading:!1}}render(){const{className:ee,onSelected:j,inputId:J}=this.props,{isLoading:Z}=this.state;return(0,n.jsx)("div",{className:"service-account-picker","data-testid":"serviceAccountPicker",children:(0,n.jsx)(p.DW,{isClearable:!0,className:ee,inputId:J,isLoading:Z,defaultOptions:!0,loadOptions:this.search,onChange:j,placeholder:(0,r.t)("service-account-picker.select-placeholder","Start typing to search for service accounts"),noOptionsMessage:(0,r.t)("service-account-picker.noOptionsMessage-no-service-accounts-found","No service accounts found"),"aria-label":(0,r.t)("service-account-picker.select-aria-label","Service account picker")})})}}class D extends l.Component{constructor(ee){super(ee),this.search=d()(async j=>(this.setState({isLoading:!0}),(0,s.isNil)(j)&&(j=""),(0,x.AI)().get(`/api/teams/search?perpage=100&page=1&query=${j}`).then(J=>{const Z=J.teams.map(te=>({value:te,label:te.name,imgUrl:te.avatarUrl}));return this.setState({isLoading:!1}),Z})),300,{leading:!0}),this.state={isLoading:!1}}componentDidMount(){const{teamId:ee}=this.props;ee&&(0,x.AI)().get(`/api/teams/${ee}`).then(j=>{this.setState({value:{value:j,label:j.name,imgUrl:j.avatarUrl}})})}render(){const{onSelected:ee,className:j}=this.props,{isLoading:J,value:Z}=this.state;return(0,n.jsx)("div",{className:"user-picker","data-testid":"teamPicker",children:(0,n.jsx)(p.DW,{isLoading:J,defaultOptions:!0,loadOptions:this.search,value:Z,onChange:ee,className:j,placeholder:(0,r.t)("team-picker.select-placeholder","Select a team"),noOptionsMessage:(0,r.t)("team-picker.noOptionsMessage-no-teams-found","No teams found"),"aria-label":(0,r.t)("team-picker.select-aria-label","Team picker")})})}}class C extends l.Component{constructor(ee){super(ee),this.search=d()(async j=>(this.setState({isLoading:!0}),(0,s.isNil)(j)&&(j=""),(0,x.AI)().get(`/api/org/users/lookup?query=${j}&limit=100`).then(J=>J.map(Z=>({id:Z.userId,uid:Z.uid,value:Z,label:Z.login,imgUrl:Z.avatarUrl,login:Z.login}))).finally(()=>{this.setState({isLoading:!1})})),300,{leading:!0}),this.state={isLoading:!1}}render(){const{className:ee,onSelected:j,inputId:J}=this.props,{isLoading:Z}=this.state;return(0,n.jsx)("div",{className:"user-picker","data-testid":"userPicker",children:(0,n.jsx)(p.DW,{isClearable:!0,className:ee,inputId:J,isLoading:Z,defaultOptions:!0,loadOptions:this.search,onChange:j,placeholder:(0,r.t)("user-picker.select-placeholder","Start typing to search for user"),noOptionsMessage:(0,r.t)("user-picker.noOptionsMessage-no-users-found","No users found"),"aria-label":(0,r.t)("user-picker.select-aria-label","User picker")})})}}var P=(k=>(k.None="None",k.Team="Team",k.User="User",k.ServiceAccount="ServiceAccount",k.BuiltInRole="builtInRole",k))(P||{});const T=({title:k=(0,r.t)("access-control.add-permission.title","Add permission for"),permissions:ee,assignments:j,onAdd:J,onCancel:Z})=>{const[te,se]=(0,l.useState)(P.None),[ie,ce]=(0,l.useState)(""),[re,ue]=(0,l.useState)(""),[X,le]=(0,l.useState)(""),[he,fe]=(0,l.useState)(""),Ce=(0,l.useMemo)(()=>{const _e=[];return j.users&&_e.push({value:P.User,label:(0,r.t)("access-control.add-permission.user-label","User")}),j.serviceAccounts&&_e.push({value:P.ServiceAccount,label:(0,r.t)("access-control.add-permission.serviceaccount-label","Service Account")}),j.teams&&_e.push({value:P.Team,label:(0,r.t)("access-control.add-permission.team-label","Team")}),j.builtInRoles&&_e.push({value:P.BuiltInRole,label:(0,r.t)("access-control.add-permission.role-label","Role")}),_e},[j]);(0,l.useEffect)(()=>{ee.length>0&&fe(ee[0])},[ee]);const Ae=()=>te===P.Team&&ie||te===P.User&&re||te===P.ServiceAccount&&re||P.BuiltInRole&&E.X.hasOwnProperty(X);return(0,n.jsxs)("div",{className:"cta-form","aria-label":(0,r.t)("access-control.add-permission.permissions-aria-label","Permissions slider"),children:[(0,n.jsx)(m.J,{onClick:Z}),(0,n.jsx)("h5",{children:k}),(0,n.jsx)("form",{name:"addPermission",onSubmit:_e=>{_e.preventDefault(),J({userUid:re,teamUid:ie,builtInRole:X,permission:he,target:te})},children:(0,n.jsxs)(v.B,{gap:1,direction:"row",children:[(0,n.jsx)(p.l6,{"aria-label":(0,r.t)("access-control.add-permission.role-select-aria-label","Role to add new permission to"),value:te,options:Ce,onChange:_e=>se(_e.value),disabled:Ce.length===0,width:"auto"}),te===P.User&&(0,n.jsx)(C,{onSelected:_e=>ue(_e?.value?.uid||"")}),te===P.ServiceAccount&&(0,n.jsx)(b,{onSelected:_e=>ue(_e?.value?.uid||"")}),te===P.Team&&(0,n.jsx)(D,{onSelected:_e=>ce(_e.value?.uid||"")}),te===P.BuiltInRole&&(0,n.jsx)(p.l6,{"aria-label":(0,r.t)("access-control.add-permission.built-in-aria-label","Built-in role picker"),options:Object.values(E.X).filter(_e=>_e!==E.X.None).map(_e=>({value:_e,label:_e})),onChange:_e=>le(_e.value||""),width:"auto"}),(0,n.jsx)(p.l6,{"aria-label":(0,r.t)("access-control.add-permission.level-aria-label","Permission level"),width:"auto",value:ee.find(_e=>_e===he),options:ee.map(_e=>({label:_e,value:_e})),onChange:_e=>fe(_e.value||"")}),(0,n.jsx)(h.$n,{type:"submit",disabled:!Ae(),children:(0,n.jsx)(r.x6,{i18nKey:"access-control.add-permissions.save",children:"Save"})})]})})]})};var O=e(45967),S=e(30703);const B=({item:k,permissionLevels:ee,canSet:j,onRemove:J,onChange:Z})=>{const te=(0,c.of)(V);return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:K(k)}),(0,n.jsx)("td",{children:F(k)}),(0,n.jsx)("td",{children:k.isInherited&&(0,n.jsx)("em",{className:te.inherited,children:(0,n.jsx)(r.x6,{i18nKey:"access-control.permission-list-item.inherited",children:"Inherited from folder"})})}),(0,n.jsx)("td",{children:(0,n.jsx)(p.l6,{disabled:!j||!k.isManaged,onChange:se=>Z(k,se.value),value:ee.find(se=>se===k.permission),options:ee.map(se=>({value:se,label:se}))})}),(0,n.jsx)("td",{children:k.warning?(0,n.jsx)(O.m,{content:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.a,{marginBottom:1,children:k.warning}),I(k)]}),children:(0,n.jsx)(S.I,{name:"exclamation-triangle",className:te.warning})}):(0,n.jsx)(O.m,{content:I(k),children:(0,n.jsx)(S.I,{name:"info-circle"})})}),(0,n.jsx)("td",{children:k.isManaged?(0,n.jsx)(h.$n,{size:"sm",icon:"times",variant:"destructive",disabled:!j,onClick:()=>J(k),"aria-label":(0,r.t)("access-control.permission-list-item.remove-aria-label","Remove permission for {{identifier}}",{identifier:U(k)})}):(0,n.jsx)(O.m,{content:k.isInherited?(0,r.t)("access-control.permission-list-item.tooltip-inherited-permission","Inherited permission"):(0,r.t)("access-control.permission-list-item.tooltip-provisioned-permission","Provisioned permission"),children:(0,n.jsx)(h.$n,{size:"sm",icon:"lock","aria-label":(0,r.t)("access-control.permission-list-item.locked-aria-label","Locked permission indicator")})})})]})},K=k=>k.teamId?(0,n.jsx)("img",{className:"filter-table__avatar",src:k.teamAvatarUrl,alt:`Avatar for team ${k.teamId}`}):k.userId?(0,n.jsx)("img",{className:"filter-table__avatar",src:k.userAvatarUrl,alt:`Avatar for user ${k.userId}`}):(0,n.jsx)(S.I,{size:"xl",name:"shield"}),U=k=>k.userId?k.userLogin:k.teamId?k.team:k.builtInRole,F=k=>k.userId?(0,n.jsxs)("span",{children:[k.userLogin," "]},"name"):k.teamId?(0,n.jsxs)("span",{children:[k.team," "]},"name"):k.builtInRole?(0,n.jsxs)("span",{children:[k.builtInRole," "]},"name"):(0,n.jsx)("span",{},"name"),I=k=>`Actions: ${[...new Set(k.actions)].sort().join(" ")}`,V=k=>({warning:(0,a.css)({color:k.colors.warning.main}),inherited:(0,a.css)({color:k.colors.text.secondary,flexWrap:"nowrap"})}),M=({title:k,items:ee,compareKey:j,permissionLevels:J,canSet:Z,onRemove:te,onChange:se})=>{const ie=(0,l.useMemo)(()=>{const ce={};for(let re of ee){const ue=re[j];if(!ce[ue]){ce[ue]=re;continue}if(re.actions.length>ce[ue].actions.length){ce[ue]=re;continue}re.actions.length===ce[ue].actions.length&&ce[ue].isManaged&&!re.isManaged&&(ce[ue]=re)}return Object.keys(ce).map(re=>ce[re])},[ee,j]);return ie.length===0?null:(0,n.jsx)("div",{children:(0,n.jsxs)("table",{className:"filter-table gf-form-group",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{width:"1%"}}),(0,n.jsx)("th",{children:k}),(0,n.jsx)("th",{style:{width:"1%"}}),(0,n.jsx)("th",{style:{width:"40%"},children:(0,n.jsx)(r.x6,{i18nKey:"access-control.permission-list.permission",children:"Permission"})}),(0,n.jsx)("th",{style:{width:"1%"}}),(0,n.jsx)("th",{style:{width:"1%"}})]})}),(0,n.jsx)("tbody",{children:ie.map((ce,re)=>(0,n.jsx)(B,{item:ce,onRemove:te,onChange:se,canSet:Z,permissionLevels:J},`${re}-${ce.userId}`))})]})})},L="",N={permissions:[],assignments:{teams:!1,users:!1,serviceAccounts:!1,builtInRoles:!1}},W=({title:k=(0,r.t)("access-control.permissions.title","Permissions"),buttonLabel:ee=(0,r.t)("access-control.permissions.add-label","Add a permission"),emptyLabel:j=(0,r.t)("access-control.permissions.no-permissions","There are no permissions"),resource:J,resourceId:Z,canSetPermissions:te,addPermissionTitle:se,getWarnings:ie,epilogue:ce})=>{const re=(0,c.of)(q),[ue,X]=(0,l.useState)(!1),[le,he]=(0,l.useState)([]),[fe,Ce]=(0,l.useState)(N),Ae=(0,l.useCallback)(async()=>{let Ue=await G(J,Z);ie&&(Ue=ie(Ue)),he(Ue)},[J,Z,ie]);(0,l.useEffect)(()=>{R(J).then(Ue=>(Ce(Ue),Ae()))},[J,Z,Ae]);const _e=Ue=>{let je=null;Ue.target===P.User||Ue.target===P.ServiceAccount?je=w(J,Z,Ue.userUid,Ue.permission):Ue.target===P.Team?je=_(J,Z,Ue.teamUid,Ue.permission):Ue.target===P.BuiltInRole&&(je=Q(J,Z,Ue.builtInRole,Ue.permission)),je!==null&&je.then(Ae)},Xe=Ue=>{let je=null;Ue.userUid?je=w(J,Z,Ue.userUid,L):Ue.teamUid?je=_(J,Z,Ue.teamUid,L):Ue.builtInRole&&(je=Q(J,Z,Ue.builtInRole,L)),je!==null&&je.then(Ae)},De=(Ue,je)=>{console.log("onChange",Ue,je),Ue.permission!==je&&(Ue.userUid||Ue.isServiceAccount?_e({permission:je,userUid:Ue.userUid,target:P.User}):Ue.teamUid?_e({permission:je,teamUid:Ue.teamUid,target:P.Team}):Ue.builtInRole&&_e({permission:je,builtInRole:Ue.builtInRole,target:P.BuiltInRole}))},Me=(0,l.useMemo)(()=>(0,s.sortBy)(le.filter(Ue=>Ue.teamId),["team","isManaged"]),[le]),Te=(0,l.useMemo)(()=>(0,s.sortBy)(le.filter(Ue=>Ue.userId&&!Ue.isServiceAccount),["userLogin","isManaged"]),[le]),$e=(0,l.useMemo)(()=>(0,s.sortBy)(le.filter(Ue=>Ue.userId&&Ue.isServiceAccount),["userLogin","isManaged"]),[le]),Re=(0,l.useMemo)(()=>(0,s.sortBy)(le.filter(Ue=>Ue.builtInRole),["builtInRole","isManaged"]),[le]),Ke=(0,r.t)("access-control.permissions.role","Role"),Ve=(0,r.t)("access-control.permissions.user","User"),Se=(0,r.t)("access-control.permissions.serviceaccount","Service Account"),Ye=(0,r.t)("access-control.permissions.team","Team");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[te&&J==="folders"&&(0,n.jsxs)(i.a,{paddingBottom:2,children:[(0,n.jsx)(r.x6,{i18nKey:"access-control.permissions.permissions-change-warning",children:"This will change permissions for this folder and all its descendants. In total, this will affect:"}),(0,n.jsx)(u.x,{selectedItems:{folder:{[Z]:!0},dashboard:{},panel:{},$all:!1}})]}),le.length===0&&(0,n.jsx)(i.a,{children:(0,n.jsx)(o.E,{children:j})}),(0,n.jsx)(M,{title:Ke,items:Re,compareKey:"builtInRole",permissionLevels:fe.permissions,onChange:De,onRemove:Xe,canSet:te}),(0,n.jsx)(M,{title:Ve,items:Te,compareKey:"userLogin",permissionLevels:fe.permissions,onChange:De,onRemove:Xe,canSet:te}),(0,n.jsx)(M,{title:Se,items:$e,compareKey:"userLogin",permissionLevels:fe.permissions,onChange:De,onRemove:Xe,canSet:te}),(0,n.jsx)(M,{title:Ye,items:Me,compareKey:"team",permissionLevels:fe.permissions,onChange:De,onRemove:Xe,canSet:te}),te&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.$n,{className:re.addPermissionButton,variant:"primary",onClick:()=>X(!0),icon:"plus",children:ee},"add-permission"),(0,n.jsx)(f.a,{in:ue,children:(0,n.jsx)(T,{title:se,onAdd:_e,permissions:fe.permissions,assignments:fe.assignments,onCancel:()=>X(!1)})})]})]}),ce&&ce(le)]})},R=async k=>{try{return await(0,g.AI)().get(`/api/access-control/${k}/description`)}catch(ee){return console.error("failed to load resource description: ",ee),N}},G=(k,ee)=>(0,g.AI)().get(`/api/access-control/${k}/${ee}`),w=(k,ee,j,J)=>ae(k,ee,"users",j,J),_=(k,ee,j,J)=>ae(k,ee,"teams",j,J),Q=(k,ee,j,J)=>ae(k,ee,"builtInRoles",j,J),ae=(k,ee,j,J,Z)=>(0,g.AI)().post(`/api/access-control/${k}/${ee}/${j}/${J}`,{permission:Z}),q=k=>({breakdown:(0,a.css)({...k.typography.bodySmall,color:k.colors.text.secondary,marginBottom:k.spacing(2)}),addPermissionButton:(0,a.css)({marginBottom:k.spacing(2)})})},54513:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>Q});var n=e(96540),a=e(28105),s=e(2543),l=e(39741),r=e(62467),c=e(66847),i=e(1005),o=e(81160),h=e(24726),f=e(41119),g=e(47520),u=e(17548),E=e(22592),v=e(77154),p=e(92745),m=e(78282),y=e(36580),d=e(97534),x=e(83873),b=e(44022),D=e(77526),C=e(39050),P=e(42970),T=e(4651);const O={from:21600,to:0},S=(ae,q)=>{const k=B(ae,q);if(!k)return O;const{from:ee,to:j}=U(k,q);return!ee.length&&!j.length?O:{from:Math.max(...ee),to:Math.min(...j)}},B=(ae,q)=>{switch(ae.type){case T.Tz.classic:return K(ae);case T.Tz.math:case T.Tz.sql:return F(ae,q);case T.Tz.resample:case T.Tz.reduce:case T.Tz.threshold:return I(ae)}},K=ae=>ae.conditions?.map(q=>q.query.params[0]),U=(ae,q)=>{const k=[],ee=[O.to];for(const j of ae){const J=q.find(Z=>Z.refId===j);!J||!J.relativeTimeRange||(k.push(J.relativeTimeRange.from),ee.push(J.relativeTimeRange.to))}return{from:k,to:ee}},F=(ae,q)=>q.filter(k=>k.queryType==="query"&&ae.expression?.includes(k.refId)).map(k=>k.refId),I=ae=>ae.expression?[ae.expression]:void 0;class V{constructor(q=(0,x.AI)(),k=(0,m.l)()){this.backendSrv=q,this.dataSourceSrv=k,this.subject=new l.m(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(q,k){const ee=await this.prepareQueries(q);if(ee.length===0)return;const J=ee.some(Z=>Z.refId===k)?k:"";this.subscription=M(this.backendSrv,ee,J).subscribe({next:Z=>{const te=G(Z,(ce,re)=>{const ue=this.lastResult[ce],X=(0,f.N$)(re,ue);return(0,C.B)(X,ue)}),[se,ie]=(0,P.wz)(q);ie.forEach(ce=>{te[ce.source]=w(ce)}),this.lastResult=te,this.subject.next(this.lastResult)},error:Z=>{this.lastResult=R(this.lastResult,Z),this.subject.next(this.lastResult)}})}async prepareQueries(q){const k=[];for(const Z of q){const te=Z.model.refId;if((0,b.f)(Z.model))continue;const se=await this.dataSourceSrv.get(Z.datasourceUid);se instanceof y.iy&&se.filterQuery&&!se.filterQuery(Z.model)&&k.push(te)}const[ee]=(0,P.wz)(q),j=Object.keys(ee.nodes);return k.forEach(Z=>{const te=(0,P.p_)(Z,ee);k.push(...te)}),q.filter(Z=>!j.includes(Z.refId)).forEach(Z=>{k.push(Z.refId)}),(0,s.reject)(q,Z=>k.includes(Z.refId))}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let q=!1;const k=G(this.lastResult,(ee,j)=>(j.state===a.Gu.Loading&&(q=!0),{...j,state:a.Gu.Done}));q&&this.subject.next(k)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const M=(ae,q,k)=>{const ee=L(q,a.Gu.Loading),j={data:{data:q,condition:k},url:"/api/v1/eval",method:"POST",requestId:(0,h.A)()};return(0,g.k)({whileLoading:ee,source:ae.fetch(j).pipe(W(ee),(0,c.W)(J=>(0,r.of)(R(ee,J))),(0,D.N)(ae,j.requestId),(0,i.u)())})},L=(ae,q)=>ae.reduce((k,ee)=>(k[ee.refId]={state:q,series:[],timeRange:N(ee,ae)},k),{}),N=(ae,q)=>{if((0,b.f)(ae.model)){const k=S(ae.model,q);return u.relativeToTimeRange(k)}return ae.relativeTimeRange?u.relativeToTimeRange(ae.relativeTimeRange):(console.warn(`Query with refId: ${ae.refId} did not have any relative time range, using default.`),(0,E.E2)())},W=ae=>(0,o.T)(q=>{const{data:k}=q,ee={};for(const[j,J]of Object.entries(k.results)){const{error:Z,status:te,frames:se=[]}=J,ie=Z?[{message:Z,refId:j,status:te}]:[];ee[j]={errors:ie,timeRange:ae[j].timeRange,state:a.Gu.Done,series:se.map(v.or)}}return ee}),R=(ae,q)=>{const k=(0,d.u)(q);return G(ae,(ee,j)=>j.state===a.Gu.Error?j:{...j,state:a.Gu.Error,error:k})},G=(ae,q)=>{const k={};for(const[ee,j]of Object.entries(ae))k[ee]=q(ee,j);return k},w=ae=>({series:[],state:a.Gu.Error,errors:[{message:_(ae)}],timeRange:(0,E.E2)()});function _(ae){return ae.source===ae.target?(0,p.t)("alerting.dag.self-reference","You can't link an expression to itself"):(0,p.t)("alerting.dag.missing-reference",'Expression "{{source}}" failed to run because "{{target}}" is missing or also failed.',{source:ae.source,target:ae.target})}function Q(){const[ae,q]=(0,n.useState)({}),k=(0,n.useRef)(new V);(0,n.useEffect)(()=>{const te=k.current;return te.get().subscribe(se=>{q(se)}),()=>{te.destroy()}},[]);const ee=(0,n.useCallback)(()=>{q({})},[]),j=(0,n.useCallback)(()=>{k.current.cancel()},[]),J=(0,n.useCallback)((te,se)=>{k.current.run(te,se)},[]),Z=(0,n.useMemo)(()=>Object.values(ae).some(te=>te.state===a.Gu.Loading),[ae]);return{queryPreviewData:ae,runQueries:J,cancelQueries:j,isPreviewLoading:Z,clearPreviewData:ee}}},54552:(ne,A,e)=>{"use strict";e.d(A,{K:()=>l,k:()=>r});var n=e(74848),a=e(96540);const s=a.createContext(void 0),l=({children:c,rule:i,identifier:o})=>{const h={rule:i,identifier:o};return(0,n.jsx)(s.Provider,{value:h,children:c})},r=()=>{const c=a.useContext(s);if(c===void 0)throw new Error("useAlertRule must be used within a AlertRuleContext");return c}},54687:(ne,A,e)=>{"use strict";e.d(A,{AI:()=>r,Ff:()=>u});var n=e(65307),a=e(95256),s=e(13660),l=e(37256);const r=(0,n.pU)(),c=E=>new RegExp(`${a.fu}/(.*)/pending`).test(E.type),i=E=>new RegExp(`${a.fu}/(.*)/fulfilled`).test(E.type),o=E=>new RegExp(`${a.fu}/(.*)/rejected`).test(E.type),h=E=>{const v=E.lastIndexOf("/");return E.substring(0,v)},f={items:r.getInitialState(),requests:{},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},u=(0,n.Z0)({name:"plugins",initialState:f,reducers:{},extraReducers:E=>E.addCase(l.aU,(v,p)=>{r.upsertMany(v.items,p.payload)}).addCase(l.LR.fulfilled,(v,p)=>{r.upsertMany(v.items,p.payload)}).addCase(l.t5.fulfilled,(v,p)=>{r.updateOne(v.items,p.payload)}).addCase(l.ai.fulfilled,(v,p)=>{r.updateOne(v.items,p.payload)}).addCase(l.JC.fulfilled,(v,p)=>{r.updateOne(v.items,p.payload)}).addCase(l.NJ,(v,p)=>{v.panels[p.payload.meta.id]=p.payload}).addCase(l.h9.pending,(v,p)=>{v.isLoadingPluginDashboards=!0,v.dashboards=[]}).addCase(l.h9.fulfilled,(v,p)=>{v.isLoadingPluginDashboards=!1,v.dashboards=p.payload}).addMatcher(c,(v,p)=>{v.requests[h(p.type)]={status:s.IZ.Pending}}).addMatcher(i,(v,p)=>{v.requests[h(p.type)]={status:s.IZ.Fulfilled}}).addMatcher(o,(v,p)=>{v.requests[h(p.type)]={status:s.IZ.Rejected,error:p.payload}})}).reducer},54735:(ne,A,e)=>{"use strict";e.d(A,{KU:()=>i});var n=e(74848),a=e(22803),s=e(49185),l=e(63142),r=e(35484),c=e(92807);const i=({width:f,height:g,legend:u,children:E})=>{const v=(0,l.$j)(),p=(0,l.of)(o),m={display:"flex",width:`${f}px`,height:`${g}px`},[y,d]=(0,s.A)();if(!u)return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:m,className:p.viz,children:E(f,g)})});let{placement:x,maxHeight:b="35%",maxWidth:D="60%"}=u.props;document.body.clientWidth<v.breakpoints.values.lg&&(x="bottom");let C=null;const P={};switch(x){case"bottom":m.flexDirection="column",P.maxHeight=b,d.height&&(C={width:f,height:g-d.height});break;case"right":m.flexDirection="row",P.maxWidth=D,d.width&&(C={width:f-d.width,height:g}),u.props.width&&(P.width=u.props.width,C={width:f-u.props.width,height:g});break}return C?.width===0&&(C.width=f),C?.height===0&&(C.height=g),(0,n.jsxs)("div",{style:m,children:[(0,n.jsx)("div",{className:p.viz,children:C&&E(C.width,C.height)}),(0,n.jsx)("div",{style:P,ref:y,children:(0,n.jsx)(c.P,{children:u})})]})},o=f=>({viz:(0,a.css)({flexGrow:2,borderRadius:f.shape.radius.default,"&:focus-visible":(0,r.getFocusStyles)(f)})}),h=({children:f})=>(0,n.jsx)(n.Fragment,{children:f});i.Legend=h},54742:(ne,A,e)=>{"use strict";e.d(A,{B:()=>a});var n=e(42954);const a=new n.O},54767:(ne,A,e)=>{"use strict";e.d(A,{S:()=>r,a:()=>c});var n=e(27489),a=e(25992),s=e(45863);let l;function r(){return l||(l=new s.yd),l}function c(i,o){return h=>{const f={duration:h.duration,networkDuration:h.networkDuration,processingTime:h.duration-h.networkDuration,startTs:h.startTs,endTs:h.endTs,totalJSHeapSize:h.totalJSHeapSize,usedJSHeapSize:h.usedJSHeapSize,jsHeapSizeLimit:h.jsHeapSizeLimit,timeSinceBoot:performance.measure("time_since_boot","frontend_boot_js_done_time_seconds").duration};(0,n.rR)("dashboard_render",{interactionType:h.origin,uid:i,...f}),(0,a.l$)("dashboard_render",f,{interactionType:h.origin,dashboard:i,title:o})}}},54825:(ne,A,e)=>{"use strict";e.d(A,{K:()=>r});var n=e(76637),a=e(79118),s=e(11576),l=e(59427);function r(i,o,h){return c((0,l.UI)(i,o.field),o,h)}function c(i,o,h){if(!i){const u=h.visualization.getColorByName(o.fixed??"grey");return{isAssumed:!!o.field?.length||!o.fixed,fixed:u,value:()=>u,get:E=>u}}const f=(0,n.Qi)(i);if(f.isByValue||i.config.mappings?.length){const u=(0,a.xg)(i,!0);u!==i.config&&(i={...i,config:u},i.state=void 0);const E=(0,s.J)({field:i,theme:h}),v=p=>E(p).color??"#ccc";return{field:i,get:p=>v(i.values[p]),value:()=>v((0,l.sB)(i))}}const g=f.getCalculator(i,h)(0,0);return{fixed:g,value:()=>g,get:u=>g,field:i}}},55066:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>s});var n=e(96540),a=e(24313);const s=l=>{const[r,c]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(async()=>await(0,a._A)(l.panels))().then(o=>{c(o)})},[l.panels]),{unsupportedDataSources:r}}},55072:(ne,A,e)=>{"use strict";e.d(A,{N:()=>v});var n=e(74848),a=e(22803),s=e(51898),l=e(92745),r=e(11576),c=e(95004),i=e(55386),o=e(63142);const h=({timeZone:m,name:y,stats:d})=>{const x=(0,o.$j)(),b=(0,o.of)(g);return!d||!d.length?null:(0,n.jsxs)("div",{className:b.wrapper,children:[(0,n.jsx)("div",{className:b.heading,children:y}),(0,n.jsx)("table",{className:"filter-table width-30",children:(0,n.jsx)("tbody",{children:d.map((D,C)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:D.displayName}),(0,n.jsx)("td",{className:b.cell,children:f(D,m,x)})]},`${D.displayName}-${C}`))})})]})};function f(m,y,d){const x=(0,r.J)({field:{type:c.PU.number,config:m},theme:d,timeZone:y});return(0,i.cN)(x(m.value))}const g=m=>({heading:(0,a.css)({fontSize:m.typography.body.fontSize,marginBottom:m.spacing(1)}),wrapper:(0,a.css)({paddingBottom:m.spacing(2)}),cell:(0,a.css)({textAlign:"right"})}),u=({name:m,traceIds:y})=>{const d=(0,o.of)(E);return y.length===0?null:(0,n.jsxs)("div",{className:d.wrapper,children:[(0,n.jsx)("div",{className:d.heading,children:m}),(0,n.jsx)("table",{className:"filter-table width-30",children:(0,n.jsx)("tbody",{children:y.map((x,b)=>(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:x})},`${x}-${b}`))})})]})},E=m=>({heading:(0,a.css)({fontSize:m.typography.body.fontSize,marginBottom:m.spacing(1)}),wrapper:(0,a.css)({paddingBottom:m.spacing(2)}),cell:(0,a.css)({textAlign:"right"})}),v=({data:m,timeZone:y})=>{if(!m.request)return null;let d=[];const x=m.request.endTime?m.request.endTime-m.request.startTime:-1,b=m.timings?.dataProcessingTime||-1;let D=0;for(const S of m.series)D+=S.length;x>0&&d.push({displayName:(0,l.t)("dashboard.inspect-stats.request-time","Total request time"),value:x,unit:"ms"}),b>0&&d.push({displayName:(0,l.t)("dashboard.inspect-stats.processing-time","Data processing time"),value:b,unit:"ms"}),d.push({displayName:(0,l.t)("dashboard.inspect-stats.queries","Number of queries"),value:m.request.targets?.length??0}),d.push({displayName:(0,l.t)("dashboard.inspect-stats.rows","Total number rows"),value:D});let C=[];for(const S of m.series)S.meta&&S.meta.stats&&(C=C.concat(S.meta.stats));const P=(0,l.t)("dashboard.inspect-stats.table-title","Stats"),T=(0,l.t)("dashboard.inspect-stats.data-title","Data source stats"),O=(0,l.t)("dashboard.inspect-stats.data-traceids","Trace IDs");return(0,n.jsxs)("div",{"aria-label":s.Tp.components.PanelInspector.Stats.content,className:p,children:[(0,n.jsx)(h,{timeZone:y,name:P,stats:d}),(0,n.jsx)(h,{timeZone:y,name:T,stats:C}),(0,n.jsx)(u,{name:O,traceIds:m.traceIds??[]})]})},p=(0,a.css)({height:"100%",overflowY:"scroll"})},55096:(ne,A,e)=>{"use strict";e.d(A,{g:()=>l});var n=e(96540),a=e(78282),s=e(36580);function l(r){return{allDataSourcesAvailable:(0,n.useMemo)(()=>r.filter(i=>!(0,s.s9)(i.datasourceUid)).every(i=>!!(0,a.l)().getInstanceSettings(i.datasourceUid)),[r])}}},55133:(ne,A,e)=>{"use strict";e.d(A,{m:()=>ee,s:()=>J});var n=e(96540),a=e(27963),s=e(64762),l=e(52763),r=e(20718),c=e(2513);const i={parse:Z=>{if(!Z.left&&!Z.right)return{to:{left:{datasource:null,queries:[],range:{from:c.kn.from,to:c.kn.to}},schemaVersion:0},error:!1};let te,se,ie,ce;return typeof Z.left=="string"&&([te,ie]=g(Z.left)),typeof Z.right=="string"?[se,ce]=g(Z.right):Z.right&&(se=f,ce=!0),te||(te=f),{to:{schemaVersion:0,left:te,...se&&{right:se}},error:!!ie||!!ce}}},o=(Z,...te)=>te.some(se=>Z.hasOwnProperty(se));var h=(Z=>(Z[Z.RangeFrom=0]="RangeFrom",Z[Z.RangeTo=1]="RangeTo",Z[Z.Datasource=2]="Datasource",Z[Z.SegmentsStart=3]="SegmentsStart",Z))(h||{});const f={datasource:null,queries:[],range:c.kn};function g(Z){let te;try{te=JSON.parse(Z)}catch{return[f,!0]}if(!Array.isArray(te))return[{queries:[],range:c.kn,...te},!1];if(te.length<=3)return[f,!0];const se={from:te[0],to:te[1]},ie=te[2],ce=te.slice(3),re=ce.filter(X=>!o(X,"ui","mode","__panelsState")),ue=ce.find(X=>o(X,"__panelsState"))?.__panelsState;return[{datasource:ie,queries:re,range:se,panelsState:ue},!1]}var u=e(62635),E=e(8692);const v={parse:Z=>{if(!Z||!Z.panes||typeof Z.panes!="string")return{to:{schemaVersion:1,panes:{[(0,u.o$)()]:p}},error:!1};let te;try{te=JSON.parse(Z.panes)}catch{}if(te==null||typeof te!="object")return{to:{schemaVersion:1,panes:{[(0,u.o$)()]:p}},error:!0};const se=Object.entries(te).map(([ie,ce])=>[ie,m(ce)]).reduce((ie,[ce,re])=>{let ue=ce;return(ue.length!==3||/^\d+$/.test(ue)||ue.split("").some(X=>u.WP.indexOf(X)===-1))&&(ue=(0,u.o$)()),{...ie,[ue]:re}},{});return Object.keys(se).length||(se[(0,u.o$)()]=p),{to:{schemaVersion:1,panes:se},error:!1}},migrate:Z=>({schemaVersion:1,panes:{[(0,u.o$)()]:Z.left,...Z.right&&{[(0,u.o$)()]:Z.right}}})},p={datasource:null,queries:[],range:c.kn};function m(Z){return!Z||typeof Z!="object"?p:{...p,...(0,E.C)("queries",Z)&&Array.isArray(Z.queries)&&{queries:Z.queries},...(0,E.C)("datasource",Z)&&typeof Z.datasource=="string"&&{datasource:Z.datasource},...(0,E.C)("panelsState",Z)&&!!Z.panelsState&&typeof Z.panelsState=="object"&&{panelsState:Z.panelsState},...(0,E.C)("range",Z)&&!!Z.range&&typeof Z.range=="object"&&(0,E.C)("from",Z.range)&&(0,E.C)("to",Z.range)&&typeof Z.range.from=="string"&&typeof Z.range.to=="string"&&{range:{from:Z.range.from,to:Z.range.to}},...(0,E.C)("compact",Z)&&typeof Z.compact=="boolean"&&{compact:Z.compact}}}const y=Z=>x(Z),d=[i,v],x=Z=>{const te=b(Z),[se,...ie]=d.slice(te),{error:ce,to:re}=se.parse(Z);return[ie.reduce((X,le)=>le.migrate?le.migrate(X):X,re),ce]};function b(Z){return!Z||!("schemaVersion"in Z)||!Z.schemaVersion?0:typeof Z.schemaVersion=="number"?Z.schemaVersion:typeof Z.schemaVersion=="string"?Number.parseInt(Z.schemaVersion,10):0}var D=e(2543),C=e(19379),P=e(707),T=e(51845),O=e(35231),S=e(19050),B=e(94543),K=e(83953),U=e(80144),F=e(28105),I=e(1906),V=e(28998),M=e(18615);const L=(Z,te)=>{const se=!(0,D.isEqual)(te?.datasource,Z?.datasource),ie=!(0,D.isEqual)(te?.queries,Z?.queries),ce=!(0,D.isEqual)(te?.range||c.kn,Z?.range||c.kn),re=!(0,D.isEqual)(te?.panelsState,Z?.panelsState);return{datasource:se,queries:ie,range:ce,panelsState:re}};async function N(Z,te,se){if(Z)try{return await(0,V.tR)().get(Z)}catch{}const ie=[...new Set(te.map(ce=>ce.datasource).filter(F.zz).map(ce=>typeof ce=="string"?ce:ce.uid))];try{if(ie.length>=1){const ce=(await Promise.allSettled(ie.map(re=>(0,V.tR)().get(re)))).filter(E.s);if(ce.length>1)return await(0,V.tR)().get(M.uv);if(ce.length===1)return await(0,V.tR)().get(ie[0])}}catch{}return(0,V.tR)().get((0,u.HQ)(se)).catch(()=>(0,V.tR)().get()).catch(()=>{})}function W(Z){return{...Z.getDefaultQuery?.(I.Jk.Explore),refId:"A",datasource:Z.getRef()}}function R(Z){return Z.name===M.uv}function G(Z){return Z&&R(Z)?te=>!!te.datasource:te=>te.datasource?typeof te.datasource=="string"?te.datasource===Z?.uid||te.datasource===Z?.name:te.datasource.uid===Z?.uid:!0}async function w(Z){return(await Promise.allSettled(Z.map(se=>(0,V.tR)().get(se.datasource).then(ie=>({query:se,ds:ie}))))).filter(E.s).map(({value:se})=>se.query)}function _(Z,te,se){const ie=Object.values(Z.panes);if(ie.length>1){const ce=ie.some(({range:re},ue,[{range:X}])=>!(0,D.isEqual)(re,X));se((0,O.qz)({syncedTimes:!ce}))}Object.entries(Z.panes).forEach(async([ce,re],ue)=>{const{datasource:X,queries:le,range:he,panelsState:fe}=re,Ce=te[ce];if(Ce!==void 0){const Ae=L(re,ee(Ce));Promise.resolve().then(async()=>{Ae.datasource&&X&&await se((0,P.wh)({exploreId:ce,datasource:X}))}).then(async()=>{Ae.range&&se((0,B.JA)({exploreId:ce,rawRange:(0,K.Z9)(he)})),Ae.queries&&se((0,S.h9)({exploreId:ce,queries:(0,U.v)(le)})),(Ae.queries||Ae.range)&&(await se((0,S.hS)(ce)),se((0,S.Od)({exploreId:ce}))),Ae.panelsState&&fe&&se((0,T.fx)({exploreId:ce,panelsState:fe}))})}else se((0,T.Gd)({exploreId:ce,datasource:X||"",queries:(0,U.v)(le),range:(0,K.Z9)(he),panelsState:fe,compact:!!re.compact,position:ue,eventBridge:new C.o}))}),Object.keys(te).filter(ce=>!Object.keys(Z.panes).includes(ce)).forEach(ce=>se((0,O.J8)(ce)))}function Q(Z,te,se,ie,ce){ie((0,O.Ve)()),Promise.all(Object.entries(Z.panes).map(([re,{datasource:ue,queries:X,range:le,panelsState:he,compact:fe}])=>N(ue,X,se).then(Ce=>Promise.resolve(Ce?X.length?(0,U.v)(X).filter(G(Ce)).map(R(Ce)?D.identity:Ae=>({...Ae,datasource:Ce.getRef()})):(0,V.tR)().get(R(Ce)?void 0:Ce.getRef()).then(Ae=>[W(Ae)]):[]).then(async Ae=>{let _e=await w(Ae);return!_e.length&&Ce&&(_e=[W(R(Ce)?await(0,V.tR)().get():Ce)]),{exploreId:re,compact:fe,range:le,panelsState:he,queries:_e,datasource:Ce}})))).then(async re=>{const ue=await Promise.all(re.map(({exploreId:Ce,range:Ae,panelsState:_e,queries:Xe,datasource:De,compact:Me})=>ie((0,T.Gd)({exploreId:Ce,datasource:De,queries:Xe,range:(0,K.Z9)(Ae),panelsState:_e,eventBridge:new C.o,compact:!!Me})).unwrap()));if(ue.length>1){const Ce=ue.some(({state:Ae},_e,[{state:Xe}])=>!(0,D.isEqual)(Ae.range.raw,Xe.range.raw));ie((0,O.qz)({syncedTimes:!Ce}))}const X=ue.reduce((Ce,{exploreId:Ae,state:_e})=>({...Ce,[Ae]:ee(_e)}),{}),le=ce.getSearchObject();let he={};for(const[Ce,Ae]of Object.entries(le).filter(([_e])=>!["schemaVersion","panes","orgId","left","right"].includes(_e)))he[Ce]=Ae;const fe=new URLSearchParams({schemaVersion:`${Z.schemaVersion}`,panes:JSON.stringify(X),orgId:`${se}`,...he});ce.replace({pathname:ce.getLocation().pathname,search:fe.toString()}),te.current="done"})}function ae(Z,te){return Z.current=P.wh.pending.type===te.type,[O.J8.type,O.ve.fulfilled.type,S.Od.pending.type,B.eM.type,T.fx.type,P.wh.fulfilled.type,T.$0.type].includes(te.type)&&!Z.current}function q(Z,te,se,ie){const ce=Object.entries(Z.panes).reduce((re,[ue,X])=>X?{...re,[ue]:ee(X)}:re,{});if(!(0,D.isEqual)(te.current.panes,JSON.stringify(ce))){const re=!!te.current.panes&&Object.values(te.current.panes).filter(Boolean).length===0||se.current==="pending";te.current={panes:JSON.stringify(ce)},ie.partial({panes:te.current.panes},re)}}var k=e(5556);function ee(Z){return{datasource:Z.datasourceInstance?.uid||"",queries:Z.queries.map(u.w4),range:(0,k.sQ)(Z.range.raw),panelsState:j(Z.panelsState),compact:Z.compact}}function j(Z){let te=(0,D.mapValues)(Z,se=>{if((0,D.isObject)(se)){if(Array.isArray(se)){const ie=se.map(ce=>(0,D.isObject)(ce)?j(ce):ce).filter(ce=>!(0,D.isEmpty)(ce));return ie.length>0?ie:void 0}return j(se)}return se});if(te=(0,D.omitBy)(te,D.isEmpty),!(0,D.isEmpty)(te))return te}function J(Z){const{location:te}=(0,a.Il)(),se=(0,l.wA)(),ie=(0,l.d4)(r.Qb),ce=(0,n.useRef)(ie),re=(0,l.d4)(fe=>fe.user.orgId),ue=(0,n.useRef)(Z),X=(0,n.useRef)("notstarted"),le=(0,n.useRef)(!1),{warning:he}=(0,s._2)();(0,n.useEffect)(()=>{Z.panes||(X.current="notstarted",ue.current=Z)},[Z]),(0,n.useEffect)(()=>{const fe=se((0,l.ch)({predicate:Ce=>ae(le,Ce),effect:async(Ce,{cancelActiveListeners:Ae,delay:_e,getState:Xe})=>{Ae(),await _e(200),q(Xe().explore,ue,X,te)}}));return()=>fe()},[se,te]),(0,n.useEffect)(()=>{ce.current=ie},[ie]),(0,n.useEffect)(()=>{const fe=ue.current?.panes!==Z.panes,[Ce,Ae]=y(Z);Ae&&he("Could not parse Explore URL","The requested URL contains invalid parameters, a default Explore state has been loaded."),!fe&&X.current==="notstarted"&&(X.current="pending",Q(Ce,X,re,se,te)),ue.current=Z,fe&&X.current==="done"&&_(Ce,ce.current,se)},[se,re,te,Z,he])}},55143:(ne,A,e)=>{"use strict";e.d(A,{L:()=>i,b:()=>c});var n=e(86791),a=e(24619),s=e(52161),l=e(5709),r=e(1895);const c={dataSourceName:"grafana",dataSourceUid:"grafana",apiVersion:"legacy"},i=l.H.injectEndpoints({endpoints:o=>({discoverAmFeatures:o.query({queryFn:async({amSourceName:h})=>{try{return{data:await(0,r._y)(h)}}catch(f){return{error:f}}}}),discoverDsFeatures:o.query({queryFn:async h=>{const f=(0,s.Iz)(h);if(!f)return{error:new Error(`Unable to find data source for ${JSON.stringify(h)}`)};if(f===n.l$)return{data:{name:s.hY,uid:s.hY,application:"grafana",rulerConfig:c}};const g=f?(0,s.of)(f):void 0;if(!g)return{error:new Error(`Missing data source configuration for ${h}`)};try{const u=await(0,r.cc)(g.uid),E=u.features.rulerApiEnabled?{dataSourceName:g.name,dataSourceUid:g.uid,apiVersion:u.application===a.N1.Cortex?"legacy":"config"}:void 0;return{data:{name:g.name,uid:g.uid,application:u.application,rulerConfig:E}}}catch(u){return{error:u}}}})})})},55266:(ne,A,e)=>{"use strict";e.d(A,{T:()=>h});var n=e(29189),a=e(90382),s=e(43173),l=e(87161),r=e(83793),c=e(73427),i=e(75735),o=e(45942);const h=({name:f,folderName:g,skipQuery:u})=>{const E=c.TP.user.orgRole===a.X.None,v=s.$.featureToggles.provisioning,{data:p,isLoading:m}=(0,r.F9)(!v||u||E?n.hT:void 0),y=!g||!v||u||E,{data:d,isLoading:x}=(0,l.kH)(y?n.hT:{name:g});if(!v)return{isLoading:!1,isInstanceManaged:!1,isReadOnlyRepo:!1};if(m||x)return{isLoading:!0,isInstanceManaged:!1,isReadOnlyRepo:!1};const b=p?.items??[];if(!b.length)return{folder:d,isInstanceManaged:!1,isReadOnlyRepo:!1};const D=b.find(P=>P.target==="instance"),C=!!D;if(f){const P=b.find(T=>T.name===f);if(P)return{repository:P,folder:d,isInstanceManaged:C,isReadOnlyRepo:(0,o.li)(P)}}if(g){let P=b.find(O=>O.name===g);if(P)return{repository:P,folder:d,isInstanceManaged:C,isReadOnlyRepo:(0,o.li)(P)};const T=d?.metadata?.annotations?.[i.Jw];if(T&&(P=b.find(O=>O.name===T),P))return{repository:P,folder:d,isInstanceManaged:C,isReadOnlyRepo:(0,o.li)(P)}}return{repository:D,folder:d,isInstanceManaged:C,isReadOnlyRepo:(0,o.li)(D),repoType:D?.type}}},55290:(ne,A,e)=>{"use strict";e.d(A,{IF:()=>v,QC:()=>m,h4:()=>p});var n=e(64423),a=e(65474),s=e(44240),l=e(62467),r=e(39697),c=e(66847),i=e(69850),o=e(65961),h=e(69862),f=e(1005),g=e(67791),u=e(30124),E=e(24381);function v(y){return function(d){const x=new n.yU,b=(0,a.H)((0,u.dq)({searchString:y.searchString,perPage:y.perPage,page:y.page,excludeUid:y.currentPanelId,sortDirection:y.sortDirection,typeFilter:y.panelFilter,folderFilterUIDs:y.folderFilterUIDs})).pipe((0,h.Z)(D=>{const{elements:C}=D;return(0,l.of)({...D,elements:C})}),(0,h.Z)(({perPage:D,elements:C,page:P,totalCount:T})=>(0,l.of)((0,E.c4)({libraryPanels:C,page:P,perPage:D,totalCount:T}))),(0,c.W)(D=>(console.error(D),(0,l.of)((0,E.c4)({...E.Xb,page:y.page,perPage:y.perPage})))),(0,i.j)(()=>x.unsubscribe()),(0,f.u)());x.add((0,s.h)((0,r.O)(50).pipe((0,o.u)((0,E.d9)()),(0,g.Q)(b)),b).subscribe(d))}}function p(y,d){return async function(x){try{await(0,u.h4)(y),v(d)(x)}catch(b){console.error(b)}}}function m(y){return function(d){return d instanceof Function?d(y):y(d)}}},55302:(ne,A,e)=>{"use strict";e.d(A,{Ju:()=>i,L$:()=>o,cp:()=>u});var n=e(76637),a=e(55386),s=e(64394),l=e(95004),r=e(739),c=e(55978);const i=(v=0,p=0,m=0,y=0,d=0,x=0,b=0,D=0)=>{let C=v,P=p;const T=Math.max(v+d+m-(b-d),0),O=Math.abs(Math.min(v-d-m-d,0)),S=T>0,B=O>0,K=Math.max(p+x+y-(D-x),0),U=Math.abs(Math.min(p-x-y-x,0)),F=K>0,I=U>0;return S&&B?C=T>O?d:b-d-m:S?C=v-d-m:C=v+d,F&&I?P=K>U?x:D-x-y:F?P=p-x-y:P=p+x,{x:C,y:P}},o=(v,p)=>{switch(v){case c.fX.series:return p.series;case c.fX.value:return p.value;case c.fX.hexagon:return p.hexagon;case c.fX.pie_1_4:return p.pie_1_4;case c.fX.pie_2_4:return p.pie_2_4;case c.fX.pie_3_4:return p.pie_3_4;case c.fX.marker_sm:return p.marker_sm;case c.fX.marker_md:return p.marker_md;case c.fX.marker_lg:return p.marker_lg;default:return p.value}},h=(v,p)=>v.numeric-p.numeric,f=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),g=(v,p)=>f.compare(`${v.value}`,`${p.value}`),u=(v,p,m,y,d,x,b=P=>!0,D=!1,C)=>{let P=[],T=!0;for(let O=0;O<v.length;O++){const S=v[O];if(S===p||S.type===l.PU.time||!b(S)||S.config.custom?.hideFrom?.tooltip||d===r.$N.Single&&y!==O)continue;let B=m[O];if(B==null)continue;S.type===l.PU.number||S.type===l.PU.boolean||S.type===l.PU.enum||(T=!1);const K=v[O].values[B];if(K==null&&S.config.noValue==null||D&&K===0)continue;const U=S.display(K),F=Number.isNaN(U.numeric)?x===r.xB.Descending?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER:U.numeric,{colorIndicator:I,colorPlacement:V}=E(S);P.push({label:S.state?.displayName??S.name,value:(0,a.cN)(U),color:U.color??s.F,colorIndicator:I,colorPlacement:V,isActive:d===r.$N.Multi&&y===O,numeric:F,lineStyle:S.config.custom?.lineStyle})}if(C?.forEach(O=>{if(!O.config.custom?.hideFrom?.tooltip){const{colorIndicator:S,colorPlacement:B}=E(O),K=O.display(O.values[m[0]]);P.push({label:O.state?.displayName??O.name,value:(0,a.cN)(K),color:s.F,colorIndicator:S,colorPlacement:B,lineStyle:O.config.custom?.lineStyle,isHiddenFromViz:!0})}}),x!==r.xB.None&&P.length>1){const O=T?h:g,S=x===r.xB.Descending?-1:1;P.sort((B,K)=>S*O(B,K))}return P},E=v=>{const p=(0,n.Qi)(v);let m=c.fX.series,y=c.lJ.first;return p.isByValue&&(m=c.fX.value,y=c.lJ.trailing),{colorIndicator:m,colorPlacement:y}}},55315:(ne,A,e)=>{"use strict";e.d(A,{D:()=>f,X:()=>h});var n=e(2543),a=e.n(n),s=e(75505),l=e(31595),r=e(43173),c=e(68143);const i=`/apis/userstorage.grafana.app/v0alpha1/namespaces/${r.$.namespace}/user-storage`;async function o(g){try{const{data:u,...E}=await(0,s.s)((0,c.AI)().fetch({...g,url:i+g.url,data:g.body,showErrorAlert:!1}));return{data:u,meta:E}}catch(u){return g.manageError?g.manageError(u):{error:u}}}class h{constructor(u){this.service=u,this.userUID=r.$.bootData.user.uid===""?r.$.bootData.user.id.toString():r.$.bootData.user.uid,this.resourceName=`${u}:${this.userUID}`,this.canUseUserStorage=r.$.bootData.user.isSignedIn}async init(){if(this.storageSpec!==void 0)return;const u=await o({url:`/${this.resourceName}`,method:"GET",manageError:E=>(0,n.get)(E,"status")===404?(this.storageSpec=null,{error:null}):{error:E}});if("error"in u)return u.error;this.storageSpec=u.data.spec}async getItem(u){return this.canUseUserStorage?(await this.init(),this.storageSpec?this.storageSpec.data[u]:localStorage.getItem(`${this.resourceName}:${u}`)):localStorage.getItem(`${this.resourceName}:${u}`)}async setItem(u,E){if(!this.canUseUserStorage){localStorage.setItem(`${this.resourceName}:${u}`,E);return}const v={data:{[u]:E}};if(await this.init()){localStorage.setItem(`${this.resourceName}:${u}`,E);return}if(!this.storageSpec){await o({url:"/",method:"POST",body:{metadata:{name:this.resourceName,labels:{user:this.userUID,service:this.service}},spec:v},manageError:m=>(localStorage.setItem(`${this.resourceName}:${u}`,E),{error:m})}),this.storageSpec=v;return}this.storageSpec.data[u]=E,await o({headers:{"Content-Type":"application/merge-patch+json"},url:`/${this.resourceName}`,method:"PATCH",body:{spec:v},manageError:m=>(localStorage.setItem(`${this.resourceName}:${u}`,E),{error:m})})}}function f(){const g=(0,l.Q)();if(!g)throw new Error("No PluginContext found. The usePluginUserStorage() hook can only be used from a plugin.");return new h(g?.meta.id)}},55376:(ne,A,e)=>{"use strict";e.d(A,{Cl:()=>p,I3:()=>u,YG:()=>C,an:()=>x,lb:()=>y,xb:()=>v,yW:()=>D,yr:()=>d,zy:()=>m});var n=e(2543),a=e.n(n),s=e(17503),l=e(33553),r=e(28105),c=e(739),i=e(65642),o=e(2954),h=e(44022),f=e(4651),g=e(42970);function u(P,T,O){return P.map(S=>{if(T===O||!(0,h.f)(S.model))return S;const B=S.model.type==="math",K=S.model.type==="reduce",U=S.model.type==="resample",F=S.model.type==="classic_conditions",I=S.model.type==="threshold";if(B)return{...S,model:{...S.model,expression:E(S.model.expression??"",T,O)}};if(U||K||I){const V=S.model.expression===T;return{...S,model:{...S.model,expression:V?O:S.model.expression}}}if(F){const V=S.model.conditions?.map(M=>({...M,query:{...M.query,params:M.query.params.map(L=>L===T?O:L)}}));return{...S,model:{...S.model,conditions:V}}}return S})}function E(P,T,O){const S=new RegExp("(\\$"+T+"\\b)|(\\${"+T+"})","gm"),B="${"+O+"}";return P.replace(S,B)}function v(P,T){return P.find(O=>O.refId===T)!==void 0}function p(P){return P.includes("/")||P.includes("\\")}function m(P){if(P.series.length===0)return;const T=(0,s.jq)(P.series);let O;return T&&(O=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),O}function y(P){if(P.errors?.length)return new Error(P.errors[0].message)}function d(P){const O=(P[0]?.meta?.notices??[]).find(S=>S.severity==="warning")?.text;return O?new Error(O):void 0}function x(P,T){const O={},S=[f.Tz.threshold,f.Tz.classic];if(!T)return O;for(const U of P){if(!(0,h.f)(U.model)||!S.includes(U.model.type)||!Array.isArray(U.model.conditions)||U.model.refId!==T)continue;const F=U.model.conditions.some(b);U.model.conditions.forEach(I=>{const V=I.evaluator.params,M=I.query?.params[0]??U.model.expression;if(!M)return;const L=b(I);try{const N=(0,g.vL)(P),W=(0,g.qQ)(M,N);P.filter(G=>W.includes(G.refId)).forEach(G=>{const w=G.refId,Q=!!(!(0,h.f)(G?.model)&&w);w&&!O[w]&&(O[w]={config:{mode:l.O.Absolute,steps:[]},mode:c.Ly.Line}),w&&Q&&!L&&!F?B(w,V[0]):w&&Q&&L&&(K(w,V,I.evaluator.type),O[w].mode=c.Ly.LineAndArea)})}catch(N){console.error("Failed to parse thresholds",N);return}})}function B(U,F){O[U].config.steps.push({value:-1/0,color:"transparent"},{value:F,color:i.$W.theme2.colors.error.main})}function K(U,F,I){I===o.p.IsWithinRange&&O[U].config.steps.push({value:-1/0,color:"transparent"},{value:F[0],color:i.$W.theme2.colors.error.main},{value:F[1],color:i.$W.theme2.colors.error.main},{value:F[1],color:"transparent"}),I===o.p.IsOutsideRange&&O[U].config.steps.push({value:-1/0,color:i.$W.theme2.colors.error.main},{value:F[0],color:i.$W.theme2.colors.error.main},{value:F[0],color:"transparent"},{value:F[1],color:i.$W.theme2.colors.error.main}),I===o.p.IsWithinRangeIncluded&&O[U].config.steps.push({value:-1/0,color:"transparent"},{value:F[0],color:i.$W.theme2.colors.error.main},{value:F[1],color:i.$W.theme2.colors.error.main},{value:F[1],color:"transparent"}),I===o.p.IsOutsideRangeIncluded&&O[U].config.steps.push({value:-1/0,color:i.$W.theme2.colors.error.main},{value:F[0],color:i.$W.theme2.colors.error.main},{value:F[0],color:"transparent"},{value:F[1],color:i.$W.theme2.colors.error.main}),O[U].config.steps.sort((V,M)=>V.value-M.value),O[U].config.steps=O[U].config.steps.filter(V=>V.value!==void 0)}return O}function b(P){return P.evaluator.type===o.p.IsWithinRange||P.evaluator.type===o.p.IsOutsideRange||P.evaluator.type===o.p.IsOutsideRangeIncluded||P.evaluator.type===o.p.IsWithinRangeIncluded}function D(P){const T="Failed to fetch data";if(P.state!==r.Gu.Error)return;const O=P.errors;return O?.length?O.map(S=>S.message??T).join(", "):P.error?.message??T}function C(P,T){const O=T.filter(U=>!(0,h.f)(U.model)).map(U=>U.refId),S=P.filter(U=>!(0,h.f)(U.model)).map(U=>U.refId),[B,K]=(0,n.xor)(S,O);return[B,K]}},55448:(ne,A,e)=>{"use strict";e.d(A,{KQ:()=>s,QB:()=>l});var n=e(739);const a="12.2.1",s={bucketCount:30,bucketOffset:0},l={fillOpacity:80,gradientMode:n.on.None,lineWidth:1}},55555:(ne,A,e)=>{"use strict";e.d(A,{g:()=>s});var n=e(74848),a=e(25229);const s=({timeInMs:r,className:c,humanize:i})=>(0,n.jsx)("span",{className:c,children:l(r,i)}),l=(r,c=!1)=>{const i=r/1e3;if(!c)return`${i.toFixed(1)}s`;const o=(0,a.Ah)(i,"seconds"),h=o.hours(),f=o.minutes(),g=o.seconds();return h?`${h}h ${f}m ${g}s`:f?`${f}m ${g}s`:`${g}s`}},55614:(ne,A,e)=>{"use strict";e.d(A,{FB:()=>r,JI:()=>i,jS:()=>c,r0:()=>h});var n=e(65307),a=e(2543),s=e.n(a),l=e(42801);const r=(0,n.VP)("notificationTemplate/add"),c=(0,n.VP)("notificationTemplate/update"),i=(0,n.VP)("notificationTemplate/delete"),o={alertmanager_config:{},template_files:{}},h=(0,n.vy)(o,f=>{f.addCase(r,(g,{payload:u})=>{const{alertmanager_config:E={},template_files:v={}}=g,{template:p}=u;if(v[p.title]!==void 0)throw new Error("target template already exists");const y=(0,l.o)(p.title,p.content);v[p.title]=y,E.templates=(0,a.toArray)(E.templates).concat(p.title)}).addCase(c,(g,{payload:u})=>{const{alertmanager_config:E={},template_files:v={}}=g,{name:p,template:m}=u,y=p!==m.title;if(!(v[p]!==void 0))throw new Error(`Expected notification template ${p} to exist, but did not find it in the config`);const x=(0,l.o)(m.title,m.content);if(y){const b=p,D=m.title;if(v[D]!==void 0)throw new Error(`Duplicate template name ${D}`);(0,a.unset)(v,b),(0,a.remove)(E.templates??[],P=>P===b),E.templates=(0,a.toArray)(E.templates).concat(m.title)}v[m.title]=x}).addCase(i,(g,{payload:u})=>{const{name:E}=u,{alertmanager_config:v={},template_files:p={}}=g;(0,a.unset)(p,E),(0,a.remove)(v.templates??[],m=>m===E)})})},55803:(ne,A,e)=>{"use strict";e.d(A,{P:()=>v});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(96540),c=e(92745),i=e(63142),o=e(45861),h=e(94959),f=e(30703),g=e(23659);const u=()=>({layout:(0,a.css)({display:"flex",alignItems:"center",marginBottom:"4px","> *":{marginLeft:"4px",marginBottom:0,height:"100%","&:first-child, &:last-child":{marginLeft:0}}})}),E=({header:m,onBlur:y,onChange:d,onRemove:x,onReset:b})=>{const D=(0,i.of)(u);return(0,n.jsxs)("div",{className:D.layout,children:[(0,n.jsx)(h.z,{label:(0,c.t)("grafana-ui.data-source-settings.custom-headers-header","Header"),name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:m.name||"",onChange:C=>d({...m,name:C.target.value}),onBlur:y}),(0,n.jsx)(g.L,{label:(0,c.t)("grafana-ui.data-source-settings.custom-headers-header-value","Value"),"aria-label":(0,c.t)("grafana-ui.data-source-settings.custom-headers-header-value","Value"),name:"value",isConfigured:m.configured,value:m.value,labelWidth:5,inputWidth:m.configured?11:12,placeholder:(0,c.t)("grafana-ui.data-source-settings.custom-headers-header-placeholder","Header Value"),onReset:()=>b(m.id),onChange:C=>d({...m,value:C.target.value}),onBlur:y}),(0,n.jsx)(o.$n,{type:"button","aria-label":(0,c.t)("grafana-ui.data-source-settings.custom-headers-header-remove","Remove header"),variant:"secondary",size:"xs",onClick:C=>x(m.id),children:(0,n.jsx)(f.I,{name:"trash-alt"})})]})};E.displayName="CustomHeaderRow";class v extends r.PureComponent{constructor(y){super(y),this.state={headers:[]},this.updateSettings=()=>{const{headers:D}=this.state,C=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([T,O])=>!T.startsWith("httpHeaderName"))),P=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([T,O])=>!T.startsWith("httpHeaderValue")));for(const[T,O]of D.entries())C[`httpHeaderName${T+1}`]=O.name,O.configured||(P[`httpHeaderValue${T+1}`]=O.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:C,secureJsonData:P})},this.onHeaderAdd=()=>{this.setState(D=>({headers:[...D.headers,{id:(0,s.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(D,C)=>{this.setState(({headers:P})=>({headers:P.map((T,O)=>D!==O?T:{...C})}))},this.onHeaderReset=D=>{this.setState(({headers:C})=>({headers:C.map((P,T)=>P.id!==D?P:{...P,value:"",configured:!1})}))},this.onHeaderRemove=D=>{this.setState(({headers:C})=>({headers:C.filter(P=>P.id!==D)}),this.updateSettings)};const{jsonData:d,secureJsonData:x,secureJsonFields:b}=this.props.dataSourceConfig;this.state={headers:Object.keys(d).sort().filter(D=>D.startsWith("httpHeaderName")).map((D,C)=>({id:(0,s.uniqueId)(),name:d[D],value:x!==void 0?x[D]:"",configured:b&&b[`httpHeaderValue${C+1}`]||!1}))}}render(){const{headers:y}=this.state,{dataSourceConfig:d}=this.props;return(0,n.jsxs)("div",{className:"gf-form-group",children:[(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)("h6",{children:(0,n.jsx)(c.x6,{i18nKey:"grafana-ui.data-source-settings.custom-headers-title",children:"Custom HTTP Headers"})})}),(0,n.jsx)("div",{children:y.map((x,b)=>(0,n.jsx)(E,{header:x,onChange:D=>{this.onHeaderChange(b,D)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset},x.id))}),!d.readOnly&&(0,n.jsx)("div",{className:"gf-form",children:(0,n.jsx)(o.$n,{variant:"secondary",icon:"plus",type:"button",onClick:x=>{this.onHeaderAdd()},children:(0,n.jsx)(c.x6,{i18nKey:"grafana-ui.data-source-settings.custom-headers-add",children:"Add header"})})})]})}}var p=null},55860:(ne,A,e)=>{"use strict";e.d(A,{S:()=>ae});var n=e(43173),a=e(88673),s=e(41119),l=e(11576),r=e(92745),c=e(68143),i=e(93854);const o="Loading",h="api/search-v2",f="name_sort";class g{constructor(k){this.fallbackSearcher=k}async search(k){if(k.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(k)}async starred(k){if(k.facet?.length)throw new Error("facets not supported!");const ee=await(0,c.AI)().get("api/user/stars");return ee?.length?this.doSearchQuery({uid:ee,query:k.query??"*"}):{view:new a.R({length:0,fields:[]}),totalRows:0,loadMoreItems:async(j,J)=>{},isItemLoaded:j=>!0}}async tags(k){const ee={...k,query:k.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},J=(await(0,c.AI)().post(h,ee)).frames.map(Z=>(0,s.Vc)(Z));if(J[0]?.name===o)return this.fallbackSearcher.tags(k);for(const Z of J)if(Z.fields[0].name==="tag")return v(Z);return[]}getSortOptions(){const k=[{value:f,label:(0,r.t)("search.bluge-searcher.opts.label.alphabetically-az","Alphabetically (A-Z)")},{value:"-name_sort",label:(0,r.t)("search.bluge-searcher.opts.label.alphabetically-za","Alphabetically (Z-A)")}];if(n.$.licenseInfo.enabledFeatures.analytics){for(const ee of p)k.push({value:`-${ee.name}`,label:`${ee.display} (most)`}),k.push({value:`${ee.name}`,label:`${ee.display} (least)`});for(const ee of m)k.push({value:`-${ee.name}`,label:`${ee.display} (recent)`}),k.push({value:`${ee.name}`,label:`${ee.display} (oldest)`})}return Promise.resolve(k)}async doSearchQuery(k){k=await(0,i.u4)(k);const ee={...k,query:k.query??"*",limit:k.limit??u},J=(await(0,c.AI)().post(h,ee)).frames.map(ue=>(0,s.Vc)(ue)),Z=J.length?(0,s.Vc)(J[0]):{fields:[],length:0};if(Z.name===o)return this.fallbackSearcher.search(k);for(const ue of Z.fields)ue.display=(0,l.J)({field:ue,theme:n.$.theme2});Z.meta?.custom||(Z.meta={...Z.meta,custom:{count:Z.length,max_score:1}});const te=Z.meta.custom;if(te.locationInfo||(te.locationInfo={}),te.sortBy?.length){const ue=Z.fields.find(X=>X.name===te.sortBy);if(ue){const X=y(ue.name);te.sortBy=X,ue.name=X}}let se=0,ie;const ce=async()=>{for(;se>re.dataFrame.length;){const ue=re.dataFrame.length;if(ue>=te.count)return;const X=await(0,c.AI)().post(h,{...ee??{},from:ue,limit:E}),le=(0,s.Vc)(X.frames[0]);if(!le){console.log("no results",le);return}if(le.fields.length!==re.dataFrame.fields.length){console.log("invalid shape",le,re.dataFrame);return}const he=le.length+re.dataFrame.length;for(let Ce=0;Ce<le.fields.length;Ce++)re.dataFrame.fields[Ce].values.push(...le.fields[Ce].values);re.dataFrame.length=he;const fe=le.meta?.custom;if(fe?.locationInfo&&te)for(const[Ce,Ae]of Object.entries(fe.locationInfo))te.locationInfo[Ce]=Ae}ie=void 0},re=new a.R(Z);return{totalRows:te.count??Z.length,view:re,loadMoreItems:async(ue,X)=>(se=Math.max(se,X),ie||(ie=ce()),ie),isItemLoaded:ue=>ue<re.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const u=50,E=100;function v(q){const k=q.fields[0].values,ee=q.fields[1].values,j=[];for(let J=0;J<q.length;J++)j.push({term:k[J],count:ee[J]});return j}const p=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],m=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function y(q){for(const k of p)if(k.name===q)return k.display;for(const k of m)if(k.name===q)return k.display;return q}var d=e(84139);class x{constructor(k){this.parent=k,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(k){if(k.facet?.length)throw new Error("facets not supported!");if(k.sort!=null)throw new Error("custom sorting is not supported yet");if(k.tags?.length||k.ds_uid?.length)return this.parent.search(k);const j=(await this.getCache(k.kind)).search(k.query);return{isItemLoaded:()=>!0,loadMoreItems:async(J,Z)=>{},totalRows:j.length,view:j}}async getCache(k){const ee=k?k.sort().join(","):"*",j=this.cache.get(ee);if(j)try{return await j}catch{return this.cache.delete(ee),new b(new a.R({name:"error",fields:[],length:0}))}const J=this.parent.search({kind:k,limit:5e3}).then(Z=>new b(Z.view));return this.cache.set(ee,J),J}async starred(k){return this.parent.starred(k)}async getSortOptions(){return this.parent.getSortOptions()}async tags(k){return this.parent.tags(k)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class b{constructor(k){this.full=k,this.ufuzzy=new d.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values,this.empty=new a.R({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(ee=>({...ee,values:[]})),length:0})}search(k){if(!k?.length||k==="*")return this.full;const ee=this.full.dataFrame.fields,j=this.names,J=ee.map(ie=>[]);let[Z,te,se]=this.ufuzzy.search(j,k,5);for(let ie=0;ie<ee.length;ie++){let ce=ee[ie].values,re=J[ie];if(te&&se)for(let ue=0;ue<se.length;ue++){let X=te.idx[se[ue]];re.push(ce[X])}else if(Z)for(let ue=0;ue<Z.length;ue++){let X=Z[ue];re.push(ce[X])}}return this.empty.dataFrame.fields.forEach((ie,ce)=>{ie.values=J[ce]}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var D=e(95004),C=e(83873),P=e(99090),T=e(42361);class O{constructor(){this.locationInfo={general:{kind:"folder",name:"Dashboards",url:"/dashboards"}},this.getFolderViewSort=()=>""}async composeQuery(k,ee){const j=await(0,i.u4)(ee);return j.query?.length&&j.query!=="*"&&(k.query=j.query),j.kind?.length===1&&P.XJ[j.kind[0]]&&(k.type=P.XJ[j.kind[0]]),j.uid?k.dashboardUID=j.uid:j.location?.length&&(k.folderUIDs=[j.location]),k}async search(k){if(k.facet?.length)throw new Error("facets not supported!");if(k.from!==void 0){if(!k.limit)throw new Error("Must specify non-zero limit parameter when using from");if(k.from/k.limit%1!==0)throw new Error("From parameter must be a multiple of limit")}const ee=k.limit??(k.from!==void 0?1:P.if),j=k.from!==void 0?k.from/ee+1:void 0,J=await this.composeQuery({limit:ee,tag:k.tags,sort:k.sort,permission:k.permission,page:j,deleted:k.deleted},k);return this.doAPIQuery(J)}async starred(k){if(k.facet?.length)throw new Error("facets not supported!");const ee=await this.composeQuery({limit:k.limit??P.if,tag:k.tags,sort:k.sort,starred:k.starred},k);return this.doAPIQuery(ee)}async getSortOptions(){return(await C.IB.get("/api/search/sorting")).sortOptions.map(ee=>({value:ee.name,label:ee.displayName}))}async tags(k){return(await C.IB.get("/api/dashboards/tags")).sort((j,J)=>J.count-j.count)}async doAPIQuery(k){let ee;if(k.deleted){const fe=await T.v.get();ee=(0,i.m6)((0,i.Tm)(fe,k))}else ee=await C.IB.get("/api/search",k);const j=[],J=[],Z=[],te=[],se=[],ie=[],ce=[],re=[],ue=[];let X;for(let fe of ee){const Ce=fe.type==="dash-folder"?"folder":"dashboard";j.push(Ce),J.push(fe.title),Z.push(fe.uid),te.push(fe.url),se.push(fe.tags),ce.push(fe.sortMeta),re.push(fe.isDeleted??!1),ue.push(fe.permanentlyDeleteDate?new Date(fe.permanentlyDeleteDate):void 0);let Ae=fe.folderUid;!Ae&&Ce==="dashboard"&&(Ae=P.TF),ie.push(Ae),fe.sortMetaName?.length&&(X=fe.sortMetaName),fe.folderUid&&fe.folderTitle?this.locationInfo[fe.folderUid]={kind:"folder",name:fe.folderTitle,url:fe.folderUrl,folderUid:fe.folderUid}:Ce==="folder"&&(this.locationInfo[fe.uid]={kind:Ce,name:fe.title,url:fe.url,folderUid:fe.folderUid})}const le={fields:[{name:"kind",type:D.PU.string,config:{},values:j},{name:"name",type:D.PU.string,config:{},values:J},{name:"uid",type:D.PU.string,config:{},values:Z},{name:"url",type:D.PU.string,config:{},values:te},{name:"tags",type:D.PU.other,config:{},values:se},{name:"location",type:D.PU.string,config:{},values:ie},{name:"isDeleted",type:D.PU.boolean,config:{},values:re},{name:"permanentlyDeleteDate",type:D.PU.time,config:{},values:ue}],length:J.length,meta:{custom:{count:J.length,max_score:1,locationInfo:this.locationInfo}}};X?.length&&ce.length&&(le.meta.custom.sortBy=X,le.fields.push({name:X,type:D.PU.number,config:{},values:ce}));for(const fe of le.fields)fe.display=(0,l.J)({field:fe,theme:n.$.theme2});const he=new a.R(le);return{totalRows:le.length,view:he,loadMoreItems:async(fe,Ce)=>{},isItemLoaded:fe=>!0}}}var S=e(2543),B=e(85618),K=e(77197);const U="Loading",I=`${(0,B.TP)("dashboard.grafana.app","v0alpha1")}/search`,V="name_sort";class M{constructor(k){this.fallbackSearcher=k,this.locationInfo=w()}async search(k){if(k.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(k)}async starred(k){if(k.facet?.length)throw new Error("facets not supported!");const ee=await(0,c.AI)().get("api/user/stars");return ee?.length?this.doSearchQuery({...k,name:ee,query:k.query??"*"}):W()}async tags(k){const ee=k.query??"*";let j=`${I}?facet=tags&query=${ee}&limit=1`;return(await(0,c.AI)().get(j)).facets?.tags?.terms||[]}getSortOptions(){const k=[{value:V,label:(0,r.t)("search.unified-searcher.opts.label.alphabetically-az","Alphabetically (A-Z)")},{value:"-name_sort",label:(0,r.t)("search.unified-searcher.opts.label.alphabetically-za","Alphabetically (Z-A)")}];if(n.$.licenseInfo.enabledFeatures.analytics)for(const ee of N)k.push({value:`-${ee.name}`,label:`${ee.display} (most)`}),k.push({value:`${ee.name}`,label:`${ee.display} (least)`});return Promise.resolve(k)}async doSearchQuery(k){const ee=await this.newRequest(k);let j;if(k.deleted){const ue=await T.v.get(),X=(0,i.Tm)(ue,k);j={hits:X,totalHits:X.length}}else j=await this.fetchResponse(ee);const J=G(j,k.sort??"");if(J.name===U)return this.fallbackSearcher.search(k);const Z=J.meta?.custom,te={count:Z?.count??J.length,max_score:Z?.max_score??1,locationInfo:Z?.locationInfo??{},sortBy:Z?.sortBy};if(te.locationInfo=await this.locationInfo,J.meta&&(J.meta.custom=te),te.sortBy?.length){const ue=J.fields.find(X=>X.name===te.sortBy);if(ue){const X=R(ue.name);ue.config.displayName=X}}let se=0,ie;const ce=async()=>{for(;se>re.dataFrame.length;){const ue=re.dataFrame.length;if(ue>=te.count)return;const X=`${ee}&offset=${ue}`,le=await this.fetchResponse(X),he=G(le,k.sort??"");if(!he){console.log("no results",he);return}if(he.fields.length!==re.dataFrame.fields.length){console.log("invalid shape",he,re.dataFrame);return}const fe=he.length+re.dataFrame.length;he.fields.forEach(Ae=>{const _e=re.dataFrame.fields.find(Xe=>Xe.name===Ae.name);_e&&_e.values.push(...Ae.values)}),re.dataFrame.length=fe;const Ce=he.meta?.custom;if(Ce?.locationInfo&&te){const Ae=Ce.locationInfo;Ae&&typeof Ae=="object"&&Object.assign(te.locationInfo,Ae)}}ie=void 0},re=new a.R(J);return{totalRows:te.count??J.length,view:re,loadMoreItems:async(ue,X)=>(se=Math.max(se,X+1),ie||(ie=ce()),ie),isItemLoaded:ue=>ue<re.dataFrame.length}}async fetchResponse(k){const ee=await(0,c.AI)().get(k);if(!await this.isFolderCacheStale(ee.hits)||(this.locationInfo=w(),!await this.isFolderCacheStale(ee.hits)))return ee;const Z=await this.locationInfo,te=ee.hits.map(ie=>ie.folder===void 0?{...ie,location:"general",folder:"general"}:Z[ie.folder]===void 0?{...ie,location:"sharedwithme",folder:"sharedwithme"}:ie),se=ee.totalHits-(ee.hits.length-te.length);return{...ee,hits:te,totalHits:se}}async isFolderCacheStale(k){const ee=await this.locationInfo;return k.some(j=>j.folder!==void 0&&ee[j.folder]===void 0)}async newRequest(k){k=await(0,i.u4)(k);let ee=I;if(ee+=`?query=${encodeURIComponent(k.query??"*")}`,ee+=`&limit=${k.limit??L}`,k.offset&&(ee+=`&offset=${k.offset}`),(0,S.isEmpty)(k.location)||(ee+=`&folder=${k.location}`),k.kind&&(ee+="&"+k.kind.map(j=>`type=${j}`).join("&")),k.tags?.length&&(ee+="&"+k.tags.map(j=>`tag=${encodeURIComponent(j)}`).join("&")),k.sort){const j=k.sort.replace("_sort","").replace("name","title");ee+=`&sort=${j}`;const J=j.startsWith("-")?j.substring(1):j;ee+=`&field=${J}`}return k.name?.length&&(ee+="&"+k.name.map(j=>`name=${encodeURIComponent(j)}`).join("&")),k.uid?.length&&(ee+="&"+k.uid.map(j=>`name=${encodeURIComponent(j)}`).join("&")),k.deleted&&(ee=`${(0,B.TP)("dashboard.grafana.app","v1beta1")}/dashboards/?labelSelector=grafana.app/get-trash=true`),ee}getFolderViewSort(){return"name_sort"}}const L=50,N=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}];function W(){return{view:new a.R({length:0,fields:[]}),totalRows:0,loadMoreItems:async(q,k)=>{},isItemLoaded:q=>!0}}function R(q){for(const k of N)if(k.name===q)return k.display;return q}function G(q,k){const ee=q.hits;if(ee.length<1)return{fields:[],length:0};const j=ee.map(Z=>{let te=Z.folder;Z.resource==="dashboards"&&(0,S.isEmpty)(te)&&(te="general");const se=Object.fromEntries(Object.entries(Z.field??{}).map(([ie,ce])=>[ie,ce??"-"]));return{...Z,uid:Z.name,url:_(Z.resource,Z.name,Z.title),tags:Z.tags||[],folder:Z.folder||"general",location:te,name:Z.title,kind:Z.resource.substring(0,Z.resource.length-1),...se}}),J=(0,s.Vc)(j);J.meta={custom:{count:q.totalHits,max_score:1}},k&&J.meta.custom&&(J.meta.custom.sortBy=k.startsWith("-")?k.substring(1):k);for(const Z of J.fields)Z.display=(0,l.J)({field:Z,theme:n.$.theme2});return J}async function w(){const q=`${I}?type=folders&limit=100000`;return(0,c.AI)().get(q).then(ee=>{const j={general:{kind:"folder",name:"Dashboards",url:"/dashboards"},sharedwithme:{kind:"sharedwithme",name:"Shared with me",url:""}};for(const J of ee.hits)j[J.name]={name:J.title,kind:"folder",url:_("folders",J.name,J.title)};return j})}function _(q,k,ee){if(q==="folders")return`/dashboards/f/${k}`;const j=K.A.slugifyForUrl(ee);return`/d/${k}/${j}`}let Q;function ae(){if(!Q){const q=new O,k=n.$.featureToggles.panelTitleSearch;if(Q=k?new g(q):q,k&&window.location.search.includes("do-frontend-query"))return new x(Q);Q=n.$.featureToggles.unifiedStorageSearchUI?new M(q):q}return Q}},55867:(ne,A,e)=>{"use strict";e.d(A,{A:()=>E});var n=e(74848),a=e(96540),s=e(51898),l=e(92745),r=e(43173),c=e(36490),i=e(87063),o=e(58662),h=e(23289);const f=s.Tp.pages.Dashboard.DashNav.NewExportButton.Menu,g=[];function u(v){g.push(v)}function E({dashboard:v}){const p=d=>{c.Ny.partial({shareView:d})},m=(0,a.useCallback)(()=>{const d=[];g.forEach(b=>d.push(b));const x=r.$.featureToggles.kubernetesDashboards?(0,l.t)("dashboard.toolbar.new.export.tooltip.as-code","Export as code"):(0,l.t)("share-dashboard.menu.export-json-title","Export as JSON");return d.push({shareId:o.wr.export,testId:f.exportAsJson,icon:"arrow",label:x,renderCondition:!0,onClick:()=>p(o.wr.export)}),d.push({shareId:o.wr.image,testId:f.exportAsImage,icon:"camera",label:(0,l.t)("share-dashboard.menu.export-image-title","Export as image"),renderCondition:!!r.$.featureToggles.sharingDashboardImage,onClick:()=>p(o.wr.image)}),d.filter(b=>b.renderCondition)},[]),y=d=>{h.c.sharingCategoryClicked({item:d.shareId,shareResource:(0,o.hD)()}),d.onClick(v)};return(0,n.jsx)(i.W,{ariaLabel:(0,l.t)("dashboard.export.menu.label","Export dashboard menu"),"data-testid":f.container,children:m().map(d=>(0,n.jsx)(i.W.Item,{label:d.label,icon:d.icon,description:d.description,onClick:()=>y(d),testId:d.testId},d.label))})}},55978:(ne,A,e)=>{"use strict";e.d(A,{Ev:()=>s,fX:()=>n,lJ:()=>a});var n=(l=>(l.series="series",l.value="value",l.hexagon="hexagon",l.pie_1_4="pie_1_4",l.pie_2_4="pie_2_4",l.pie_3_4="pie_3_4",l.marker_sm="marker_sm",l.marker_md="marker_md",l.marker_lg="marker_lg",l))(n||{}),a=(l=>(l.hidden="hidden",l.first="first",l.leading="leading",l.trailing="trailing",l))(a||{});const s="series"},56103:(ne,A,e)=>{"use strict";e.d(A,{D:()=>u,R:()=>m});var n=e(28848),a=e.n(n),s=e(82611),l=e(65937),r=e(74848),c=e(49568);function i(y){return y.object==="block"&&y.type==="code_block"}function o(y){return"javascript"}function h(y,d,x){const{decoration:b}=y;if(b.type!==l.A)return x();const D=b.data.get("className");return(0,r.jsx)("span",{className:D,children:y.children})}class f extends(0,c.Record)({onlyIn:i,getSyntax:o,renderDecoration:h}){constructor(d){super(d)}}const g=f;function u(y={},d=a().languages){const x=new g(y);return{decorateNode:(b,D,C)=>{if(!x.onlyIn(b))return C();const P=s.Block.create(b),T=x.getSyntax(P),O=d[T];if(!O)return[];const B=P.getTexts().map(I=>I&&I.getText()).join(`
`),K=a().tokenize(B,O),U=m(K),F=D.value.data.set("tokens",U);return D.setData(F),E(x,K,P)},renderDecoration:(b,D,C)=>x.renderDecoration({children:b.children,decoration:b.decoration},D,C)}}function E(y,d,x){const b=x.getTexts(),D=[];let C=0,P=0;return b.forEach(T=>{P=C+T.getText().length;let O=0;function S(B,K){if(typeof B=="string"){if(K){const U=v({text:T,textStart:C,textEnd:P,start:O,end:O+B.length,className:`prism-token token ${K}`,block:x});U&&D.push(U)}O+=B.length}else if(K=`${K} ${B.type}`,B.alias&&(K+=" "+B.alias),typeof B.content=="string"){const U=v({text:T,textStart:C,textEnd:P,start:O,end:O+B.content.length,className:`prism-token token ${K}`,block:x});U&&D.push(U),O+=B.content.length}else for(let U=0;U<B.content.length;U+=1)S(B.content[U],K)}d.forEach(S),C=P+1}),D}function v({text:y,textStart:d,textEnd:x,start:b,end:D,className:C,block:P}){return b>=x||D<=d?null:(b=Math.max(b,d),D=Math.min(D,x),b-=d,D-=d,P.createDecoration({object:"decoration",anchor:{key:y.key,offset:b,object:"point"},focus:{key:y.key,offset:D,object:"point"},type:l.A,data:{className:C}}))}function p(y){return typeof y=="string"?[{content:y,types:[],aliases:[]}]:Array.isArray(y)?y.flatMap(d=>p(d)):y instanceof a().Token?p(y.content).flatMap(d=>{let x=[];return typeof y.alias=="string"?x=[y.alias]:x=y.alias??[],{content:d.content,types:[y.type,...d.types],aliases:[...x,...d.aliases]}}):[]}function m(y){const d=p(y);if(!d.length)return[];const x=d[0];x.prev=null,x.next=d.length>=2?d[1]:null,x.offsets={start:0,end:x.content.length};for(let D=1;D<d.length-1;D++)d[D].prev=d[D-1],d[D].next=d[D+1],d[D].offsets={start:d[D-1].offsets.end,end:d[D-1].offsets.end+d[D].content.length};const b=d[d.length-1];return b.prev=d.length>=2?d[d.length-2]:null,b.next=null,b.offsets={start:d.length>=2?d[d.length-2].offsets.end:0,end:d.length>=2?d[d.length-2].offsets.end+b.content.length:b.content.length},d}},56265:(ne,A,e)=>{"use strict";e.d(A,{b:()=>y});var n=e(74848),a=e(22803),s=e(83505),l=e(43107),r=e(96540),c=e(25229),i=e(22592),o=e(51898),h=e(63142),f=e(30703),g=e(63527),u=e(4364),E=e(83692),v=e(8431),p=e(62348);const m=()=>{},y=({value:x,onChange:b,onChangeTimeZone:D=m,clearable:C,weekStart:P,hideTimeZone:T=!0,timeZone:O="browser",placeholder:S="Select time range",isReversed:B=!0,hideQuickRanges:K=!1,disabled:U=!1,showIcon:F=!1})=>{const[I,V]=(0,r.useState)(!1),M=(0,h.of)(d,U),L=k=>{k.stopPropagation(),k.preventDefault(),!U&&V(!I)},N=()=>{V(!1)},W=k=>{N(),b(k)},R=k=>{k.stopPropagation();const ee=(0,c.KQ)(null),j=(0,c.KQ)(null);b({from:ee,to:j,raw:{from:ee,to:j}})},{refs:G,floatingStyles:w,context:_}=(0,s.we)({open:I,onOpenChange:V,placement:"bottom-start",strategy:"fixed"}),Q=(0,s.s9)(_,{bubbles:{outsidePress:!1}}),{getReferenceProps:ae,getFloatingProps:q}=(0,s.bv)([Q]);return(0,n.jsxs)("div",{className:M.container,children:[(0,n.jsxs)("button",{type:"button",className:M.pickerInput,"data-testid":o.Tp.components.TimePicker.openButton,onClick:L,ref:G.setReference,...ae(),children:[F&&(0,n.jsx)(f.I,{name:"clock-nine",size:"sm",className:M.icon}),(0,n.jsx)(E.f,{value:x,timeZone:O,placeholder:S}),!U&&(0,n.jsxs)("span",{className:M.caretIcon,children:[(0,p.X)(x)&&C&&(0,n.jsx)(f.I,{className:M.clearIcon,name:"times",size:"lg",onClick:R}),(0,n.jsx)(f.I,{name:I?"angle-up":"angle-down",size:"lg"})]})]}),I&&(0,n.jsx)(l.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("section",{className:M.content,ref:G.setFloating,style:w,...q(),children:(0,n.jsx)(u.r,{timeZone:O,value:(0,p.X)(x)?x:(0,i.E2)(),onChange:W,quickOptions:(0,v.O)(),onChangeTimeZone:D,className:M.content,hideTimeZone:T,isReversed:B,hideQuickRanges:K,weekStart:P})})})]})},d=(x,b=!1)=>{const D=(0,g.n)({theme:x,invalid:!1});return{container:(0,a.css)({display:"flex",position:"relative"}),content:(0,a.css)({marginLeft:0,position:"absolute",top:"116%",zIndex:x.zIndex.modal}),pickerInput:(0,a.cx)(D.input,b&&D.inputDisabled,D.wrapper,(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,lineHeight:`${x.spacing.gridSize*4-2}px`})),caretIcon:(0,a.cx)(D.suffix,(0,a.css)({position:"relative",top:"-1px",marginLeft:x.spacing(.5)})),clearIcon:(0,a.css)({marginRight:x.spacing(.5),"&:hover":{color:x.colors.text.maxContrast}}),placeholder:(0,a.css)({color:x.colors.text.disabled,opacity:1}),icon:(0,a.css)({marginRight:x.spacing(.5)})}}},56291:(ne,A,e)=>{"use strict";e.d(A,{p:()=>d});var n=e(74848),a=e(2543),s=e(96540),l=e(17548),r=e(51898),c=e(92745),i=e(74475),o=e(37386),h=e(59310),f=e(5857),g=e(63527),u=e(21285),E=e(90811),v=e(75421);const p=({refreshIntervals:x,onRefreshIntervalChange:b,getIntervalsFunc:D=y,validateIntervalsFunc:C=m})=>{const[P,T]=(0,s.useState)(D(x??E.cb)),[O,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{const F=D(x??E.cb);T(F)},[D,x]);const B=(0,s.useMemo)(()=>Array.isArray(P)?P.join(","):"",[P]),K=(0,s.useCallback)(F=>{const I=F.currentTarget.value?F.currentTarget.value.split(","):[];T(I)},[T]),U=(0,s.useCallback)(F=>{const I=C(P);I===null&&b(D(P)),S(I)},[D,P,b,C]);return(0,n.jsx)(o.D,{label:(0,c.t)("dashboard-settings.general.auto-refresh-label","Auto refresh"),description:(0,c.t)("dashboard-settings.general.auto-refresh-description","Define the auto refresh intervals that should be available in the auto refresh list. Use the format '5s' for seconds, '1m' for minutes, '1h' for hours, and '1d' for days (e.g.: '5s,10s,30s,1m,5m,15m,30m,1h,2h,1d')."),error:O,invalid:!!O,children:(0,n.jsx)(g.p,{id:"auto-refresh-input",invalid:!!O,value:B,onChange:K,onBlur:U})})},m=(x,b={getTimeSrv:v.jG})=>{try{return y(x,b),null}catch(D){return D instanceof Error?D.message:"Invalid intervals"}},y=(x,b={getTimeSrv:v.jG})=>{const D=x.filter(C=>C.trim()!=="").map(C=>C.replace(/\s+/g,""));return[...new Set(b.getTimeSrv().getValidIntervals(D))]};class d extends s.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=b=>{const D=b.currentTarget.value;if((0,a.isEmpty)(D))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(D);if(l.isValidTimeSpan(D))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(D);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=b=>{typeof b=="string"&&this.props.onTimeZoneChange(b)},this.onWeekStartChange=b=>{this.props.onWeekStartChange(b)}}render(){return(0,n.jsxs)(i.M,{label:(0,c.t)("dashboard-settings.time-picker.time-options-label","Time options"),isOpen:!0,children:[(0,n.jsx)(o.D,{label:(0,c.t)("dashboard-settings.time-picker.time-zone-label","Time zone"),"data-testid":r.Tp.components.TimeZonePicker.containerV2,children:(0,n.jsx)(h.U,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})}),(0,n.jsx)(o.D,{label:(0,c.t)("dashboard-settings.time-picker.week-start-label","Week start"),"data-testid":r.Tp.components.WeekStartPicker.containerV2,children:(0,n.jsx)(f.l6,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})}),(0,n.jsx)(p,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),(0,n.jsx)(o.D,{label:(0,c.t)("dashboard-settings.time-picker.now-delay-label","Now delay"),description:(0,c.t)("dashboard-settings.time-picker.now-delay-description","Exclude recent data that may be incomplete."),children:(0,n.jsx)(g.p,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})}),(0,n.jsx)(o.D,{label:(0,c.t)("dashboard-settings.time-picker.hide-time-picker","Hide time picker"),children:(0,n.jsx)(u.d,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})}),(0,n.jsx)(o.D,{label:(0,c.t)("dashboard-settings.time-picker.refresh-live-dashboards-label","Refresh live dashboards"),description:(0,c.t)("dashboard-settings.time-picker.refresh-live-dashboards-description","Continuously update panels when the time range includes the current time"),children:(0,n.jsx)(u.d,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})})]})}}},56355:(ne,A,e)=>{"use strict";e.d(A,{Dw:()=>c,Wn:()=>r,kW:()=>l,tI:()=>s});var n=e(2543),a=e.n(n);class s{constructor(f){this.type=f.type,this.params=f.params,this.defaultParams=f.defaultParams,this.renderer=f.renderer,this.category=f.category,this.addStrategy=f.addStrategy}}class l{constructor(f,g){if(this.part=f,this.def=g,!this.def)throw{message:"Could not find query part "+f.type};f.params=f.params||(0,n.clone)(this.def.defaultParams),this.params=f.params,this.text="",this.updateText()}render(f){return this.def.renderer(this,f)}hasMultipleParamsInString(f,g){return f.indexOf(",")===-1?!1:this.def.params[g+1]&&this.def.params[g+1].optional}updateParam(f,g){if(this.hasMultipleParamsInString(f,g)){(0,n.each)(f.split(","),(u,E)=>{this.updateParam(u.trim(),E)});return}f===""&&this.def.params[g].optional?this.params.splice(g,1):this.params[g]=f,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let f=this.def.type+"(";f+=this.params.join(", "),f+=")",this.text=f}}function r(h,f){const g=h.def.type+"(",u=(0,n.map)(h.params,(E,v)=>{const p=h.def.params[v];return p.type==="time"&&E==="auto"&&(E="$__interval"),p.quote==="single"?"'"+E+"'":p.quote==="double"?'"'+E+'"':E});return f&&u.unshift(f),g+u.join(", ")+")"}function c(h,f){return f+" "+h.params[0]}function i(h,f){return h.params[0]}function o(h,f){return'"'+h.params[0]+'"'}},56369:(ne,A,e)=>{"use strict";e.d(A,{Jc:()=>q,Eg:()=>k,kL:()=>j,XY:()=>ee});var n=e(24619),a=e(29609);const s=1,l=2,r=3,c=4,i=5,o=6,h=7,f=8,g=9,u=10,E=11,v=12,p=13,m=14,y=15,d=16,x=0,b=1,D=2,C=3,P=4,T=5,O=6,S=7,B=8,K=9,U=10,F=11;var I=e(2543),V=e(48820);const M=V.U1.deserialize({version:14,states:"!vOQOPOOO!OOPO'#ClOOOO'#Cl'#ClOQOPO'#CpOOOO'#Cm'#CmQQOPOOO#POQO'#C^O#UOPO'#CnO#ZOPO,59WOOOO,59[,59[OOOO-E6k-E6kOOOO,58x,58xOOOO,59Y,59YOOOO-E6l-E6l",stateData:"%Q~ORUOTUOUUOVUOWUOXUOYUOZUO[UO]UO^UO_UOePOgQO~OfVOR`XT`XU`XV`XW`XX`XY`XZ`X[`X]`X^`X_`Xe`Xg`X~OSZO~Oe[O~OfVOR`aT`aU`aV`aW`aX`aY`aZ`a[`a]`a^`a_`ae`ag`a~OR~T~U~V~W~Y~Z~[~]~^~_~R_^][ZYXWVUTe~",goto:"!OePPfPPPPPPPPPPPPPfkqPwVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken DashboardToken PluginsToken ContactPointToken RuleSourceToken FreeFormExpression",maxTerm:23,skippedNodes:[0],repeatNodeCount:2,tokenData:"$*nRRtqr#crs&ost#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]+q!]#V#c#V#W-T#W#X@m#X#Z#c#Z#[!/S#[#]!7|#]#`#c#`#a!B`#a#b#c#b#c!KY#c#d#c#d#e#,W#e#f#c#f#g#8S#g#h#?d#h#i$#^#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#jcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cQ$zcSQqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uQ&YP;=`<%l$uQ&`P;=`;NQ$uR&fP;=`<%l#cR&lP;=`;NQ#cR&rrX^(|pq(|qr(|st(|tu(|uv(|vw(|wx(|xy(|yz(|z{(|{|(||!P(|!P!Q(|!Q![(|![!](|!]#y(|#y#z(|#z$f(|$f$g(|$g#BY(|#BY#BZ(|#BZ$Ch(|$IS$I_(|$I|$JO(|$JT$JU(|$JU$KV(|$KV$KW(|$KW&FU(|&FU&FV(|&FV;'S(|;'S;(d+e;(d;(e+k<%lO(|R)PsX^(|pq(|qr(|rs+^st(|tu(|uv(|vw(|wx(|xy(|yz(|z{(|{|(||!P(|!P!Q(|!Q![(|![!](|!]#y(|#y#z(|#z$f(|$f$g(|$g#BY(|#BY#BZ(|#BZ$Ch(|$IS$I_(|$I|$JO(|$JT$JU(|$JU$KV(|$KV$KW(|$KW&FU(|&FU&FV(|&FV;'S(|;'S;(d+e;(d;(e+k<%lO(|R+eOSQgPR+hP;=`<%l(|R+nP;=`;NQ(|R+xcSQfPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR-[eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#d.m#d$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR.teSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#b#c#b#c0V#c$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR0^eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#h#c#h#i1o#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR1veSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U3X#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR3`eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#V#c#V#W4q#W$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR4xeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#h#c#h#i6Z#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR6beSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]!r#c!r!s7s!s$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR7zeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#d9]#d$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR9deSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#]#c#]#^:u#^$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR:|eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#b#c#b#c<_#c$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR<feSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#h#c#h#i=w#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR>OcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]?Z!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR?bcSQ^Pqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR@teSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#UBV#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRB^fSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#g#c#g#hCr#h#i! n#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRCyeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#[#c#[#]E[#]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cREceSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#U#c#U#VFt#V$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRF{eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#dH^#d$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRHeeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#UIv#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRI}eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#f#c#f#gK`#g$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRKgeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#W#c#W#XLx#X$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRMPcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]N[!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cRNccSQ[Pqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR! ueSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U!#W#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!#_eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#g#c#g#h!$p#h$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!$weSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#d!&Y#d$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!&aeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#i#c#i#j!'r#j$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!'yeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#f#c#f#g!)[#g$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!)ceSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#V#c#V#W!*t#W$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!*{eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y!,^#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!,ecSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]!-p!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!-wcSQRPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR!/ZeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#f#c#f#g!0l#g$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!0seSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#d!2U#d$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!2]eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#i#c#i#j!3n#j$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!3ueSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#d#c#d#e!5W#e$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!5_cSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]!6j!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!6qcSQVPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR!8TeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y!9f#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!9meSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U!;O#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!;VeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#`#c#`#a!<h#a$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!<oeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#h#c#h#i!>Q#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!>XeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#[#c#[#]!?j#]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!?qcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]!@|!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!ATcSQZPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR!BgeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U!Cx#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!DPeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#U#c#U#V!Eb#V$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!EieSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y!Fz#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!GReSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#`#c#`#a!Hd#a$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!HkcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]!Iv!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!I}cSQUPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR!KaeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U!Lr#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!LyeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#a#c#a#b!N[#b$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR!NceSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y# t#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR# {eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#g#c#g#h##^#h$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR##eeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#d#c#d#e#$v#e$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#$}eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U#&`#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#&geSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#V#c#V#W#'x#W$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#(PeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y#)b#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#)icSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]#*t!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#*{cSQTPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR#,_eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#`#c#`#a#-p#a$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#-weSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#i#c#i#j#/Y#j$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#/aeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#Z#c#Z#[#0r#[$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#0yeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#]#c#]#^#2[#^$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#2ceSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#b#c#b#c#3t#c$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#3{eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#g#c#g#h#5^#h$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#5ecSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]#6p!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#6wcSQ]Pqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR#8ZeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#i#c#i#j#9l#j$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#9seSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#`#c#`#a#;U#a$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#;]eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y#<n#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#<ucSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]#>Q!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#>XcSQWPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR#?kgSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#c#c#c#d#AS#d#h#c#h#i#I|#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#AZeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#i#c#i#j#Bl#j$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#BseSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#f#c#f#g#DU#g$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#D]eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#V#c#V#W#En#W$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#EueSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y#GW#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#G_cSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]#Hj!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#HqcSQ_Pqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR#JTeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#T#c#T#U#Kf#U$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#KmeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#h#c#h#i#MO#i$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#MVeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y#Nh#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR#NocSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$ z!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR$!RcSQXPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$uR$#eeSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#m#c#m#n$$v#n$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR$$}eSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#d#c#d#e$&`#e$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR$&geSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$u!]#X#c#X#Y$'x#Y$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR$(PcSQePqr#cst#ctu#cuv#cvw#cwx#cxy#cyz#cz{#c{|#c|!P#c!P!Q#c!Q![#c![!]$)[!]$Ch#c$JU;'S#c;'S;(d&c;(d;(e&i<%lO#cR$)ccSQYPqr$ust$utu$uuv$uvw$uwx$uxy$uyz$uz{$u{|$u|!P$u!P!Q$u!Q![$u![!]$u!]$Ch$u$JU;'S$u;'S;(d&V;(d;(e&]<%lO$u",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:150,nameSpaceFilter:152,labelFilter:154,groupFilter:156,ruleFilter:158,stateFilter:90,typeFilter:160,healthFilter:162,dashboardFilter:164,pluginsFilter:166,contactPointFilter:168,sourceFilter:170},tokenPrec:172}),L={[r]:"datasource",[i]:"namespace",[o]:"label",[f]:"rule",[h]:"group",[g]:"state",[u]:"type",[E]:"health",[v]:"dashboard",[p]:"plugins",[m]:"contactPoint",[y]:"source"};var N=(Z=>(Z.dataSource="dataSourceFilter",Z.nameSpace="nameSpaceFilter",Z.label="labelFilter",Z.group="groupFilter",Z.rule="ruleFilter",Z.state="stateFilter",Z.type="typeFilter",Z.health="healthFilter",Z.dashboard="dashboardFilter",Z.plugins="pluginsFilter",Z.contactPoint="contactPointFilter",Z.source="sourceFilter",Z))(N||{});function W(Z,te,se){_(Z,te,ie=>{if(ie.type.id===l){const ce=R(Z,ie);if(ce.type&&ce.value){const re=se[ce.type];re&&re(ce.value)}}else if(ie.type.id===d){const ce=se[d];ce&&ce(G(Z,ie))}})}function R(Z,te){if(te.type.id!==l)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const se=te.firstChild;if(!se)return{type:void 0,value:void 0};const ie=te.getChild(c),ce=ie?(0,I.trim)(G(Z,ie),'"'):void 0;return{type:se.type.id,value:ce}}function G(Z,te){return Z.slice(te.from,te.to).trim().replace(/\"/g,"")}function w(Z,te,se){const ie=[];_(Z,te,re=>{re.type.id===l&&re.firstChild&&ie.push(re.firstChild),re.type.id===d&&ie.push(re)});const ce=[];return ie.forEach(re=>{const ue=se.findIndex(X=>X.type===re.type.id);if(ue!==-1){if(re.parent?.type.is(l)){const X=L[re.type.id],le=se.splice(ue,1)[0];ce.push(`${X}:${Q(le.value)}`)}if(re.type.is(d)){const X=se.splice(ue,1)[0];ce.push(X.value)}}}),se.forEach(re=>{re.type===d?ce.push(re.value):ce.push(`${L[re.type]}:${Q(re.value)}`)}),ce.join(" ")}function _(Z,te,se){const ie=te.join(" "),re=M.configure({dialect:ie}).parse(Z).cursor();do se(re.node);while(re.next())}function Q(Z){return/\s/.test(Z)?`"${Z}"`:Z}const ae=[N.dataSource,N.nameSpace,N.label,N.group,N.rule,N.state,N.type,N.health,N.dashboard,N.plugins,N.contactPoint,N.source];var q=(Z=>(Z.Ok="ok",Z.Error="error",Z.NoData="nodata",Z.Unknown="unknown",Z))(q||{}),k=(Z=>(Z.Grafana="grafana",Z.DataSource="datasource",Z))(k||{});function ee(Z){const te={labels:[],freeFormWords:[],dataSourceNames:[]},se={[r]:ie=>te.dataSourceNames.push(ie),[i]:ie=>te.namespace=ie,[h]:ie=>te.groupName=ie,[f]:ie=>te.ruleName=ie,[o]:ie=>te.labels.push(ie),[g]:ie=>te.ruleState=J(ie),[u]:ie=>(0,a.nf)(ie)?te.ruleType=ie:void 0,[E]:ie=>te.ruleHealth=(0,a.f6)(ie),[v]:ie=>te.dashboardUid=ie,[p]:ie=>te.plugins=ie==="hide"?ie:void 0,[m]:ie=>te.contactPoint=ie,[y]:ie=>te.ruleSource=(0,a.KC)(ie),[d]:ie=>te.freeFormWords.push(ie)};return W(Z,ae,se),te}function j(Z,te){const se=[];return te.dataSourceNames&&se.push(...te.dataSourceNames.map(ie=>({type:r,value:ie}))),te.namespace&&se.push({type:i,value:te.namespace}),te.groupName&&se.push({type:h,value:te.groupName}),te.ruleName&&se.push({type:f,value:te.ruleName}),te.ruleState&&se.push({type:g,value:te.ruleState}),te.ruleType&&se.push({type:u,value:te.ruleType}),te.ruleHealth&&se.push({type:E,value:te.ruleHealth}),te.labels&&se.push(...te.labels.map(ie=>({type:o,value:ie}))),te.dashboardUid&&se.push({type:v,value:te.dashboardUid}),te.plugins&&se.push({type:p,value:te.plugins}),te.ruleSource&&se.push({type:y,value:te.ruleSource}),te.freeFormWords&&se.push(...te.freeFormWords.map(ie=>({type:d,value:ie}))),te.contactPoint&&se.push({type:m,value:te.contactPoint}),w(Z,ae,se)}function J(Z){if(Z==="normal")return n.cF.Inactive;if((0,n.Si)(Z))return Z}},56404:(ne,A,e)=>{"use strict";e.d(A,{c:()=>h,z:()=>f});var n=e(74848),a=e(92145),s=e(96540),l=e(51898),r=e(92745),c=e(87105),i=e(63142),o=e(25379);const h="Grafana-LegacyVariableQueryEditor",f=({onChange:g,query:u})=>{const E=(0,i.of)(o.$),[v,p]=(0,s.useState)(u),m=x=>{p(x.currentTarget.value)},y=(0,s.useCallback)(x=>{g(x.currentTarget.value,x.currentTarget.value)},[g]),d=(0,a.Bi)();return(0,n.jsx)(c.f,{id:d,rows:2,value:v,onChange:m,onBlur:y,placeholder:(0,r.t)("variables.legacy-variable-query-editor.placeholder-metric-name-or-tags-query","Metric name or tags query"),required:!0,"data-testid":l.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:E.textarea})};f.displayName=h},56424:(ne,A,e)=>{"use strict";e.d(A,{g5:()=>C,tN:()=>b,Zm:()=>x,Z4:()=>D});var n=e(74848),a=e(2543),s=e(52205),l=e(92745),r=e(63527),c=e(22803),i=e(80011),o=e(63142);const h=({libraryPanel:P})=>{const T=(0,o.of)(f),O=P.useState(),S=O.$timeRange?.getTimeZone(),B=O._loadedPanel?.meta;return B?(0,n.jsxs)("div",{className:T.info,children:[(0,n.jsx)("div",{className:T.libraryPanelInfo,children:(0,n.jsxs)(l.x6,{i18nKey:"dashboard-scene.library-viz-panel-info.usage-count",count:B.connectedDashboards,children:["Used on ","{{count}}"," dashboards"]})}),(0,n.jsx)("div",{className:T.libraryPanelInfo,children:(0,n.jsxs)(l.x6,{i18nKey:"dashboard-scene.library-viz-panel-info.last-edited",values:{timeAgo:(0,i.LE)(B.updated,{format:"L",timeZone:S})},components:{person:(0,n.jsxs)(n.Fragment,{children:[B.updatedBy.avatarUrl&&(0,n.jsx)("img",{className:T.userAvatar,src:B.updatedBy.avatarUrl,alt:`Avatar for ${B.updatedBy.name}`}),B.updatedBy.name]})},children:["{{timeAgo}}"," by","<person />"]})})]}):null},f=P=>({info:(0,c.css)({lineHeight:1}),libraryPanelInfo:(0,c.css)({color:P.colors.text.secondary,fontSize:P.typography.bodySmall.fontSize}),userAvatar:(0,c.css)({borderRadius:P.shape.radius.circle,boxSizing:"content-box",width:"22px",height:"22px",paddingLeft:P.spacing(1),paddingRight:P.spacing(1)})});var g=e(82345),u=e(25797),E=e(51156);const v="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",p="An override rule exists for this property";function m(P,T,O){const S=[];if(O){for(const K of O)for(const U of K.fields)if((0,a.get)(U.config,P.path)!=null){S.push({type:"data",description:v,tooltip:v});break}}return T.overrides.some(K=>K.properties.some(U=>U.id===P.id))&&S.push({type:"rule",description:p,tooltip:p}),S}var y=e(61215);function d({data:P,replaceVariables:T,options:O,eventBus:S,instanceState:B}){const K=P?.series??[];return{data:K,replaceVariables:T,options:O,eventBus:S,getSuggestions:F=>(0,g.Hf)(K,F),instanceState:B,annotations:P?.annotations}}function x(P){const{plugin:T,panel:O,onPanelOptionsChanged:S,onFieldConfigsChange:B,data:K,dashboard:U,instanceState:F}=P,I=O.getOptions(),V=O.fieldConfig,M={},L=d({data:K,replaceVariables:O.replaceVariables,options:I,eventBus:U.events,instanceState:F}),N=R=>{const G=(R&&R[0])??`${T.meta.name}`,w=M[G];return w||(M[G]=new u.C({title:G,id:G,sandboxId:T.meta.id}))},W={getValue:R=>(0,a.get)(I,R),onChange:(R,G)=>{const w=(0,y.Sf)(I,R,G);S(w)}};C(T.meta.id,T.getPanelOptionsSupplier(),W,N,L);for(const R of T.fieldConfigRegistry.list()){if(R.isCustom){if(R.showIf&&!R.showIf(V.defaults.custom,K?.series,K?.annotations))continue}else if(R.showIf&&!R.showIf(V.defaults,K?.series,K?.annotations))continue;if(R.hideFromDefaults)continue;const G=N(R.category),w=R.editor,_=V.defaults,Q=R.isCustom?_.custom?(0,a.get)(_.custom,R.path):void 0:(0,a.get)(_,R.path);R.getItemsCount&&(G.props.itemsCount=R.getItemsCount(Q));const ae=`${T.meta.id}-${R.path}`;G.addItem(new E.v({title:R.name,id:ae,description:R.description,overrides:m(R,V,K?.series),render:function(){const k=ee=>{B((0,y.EQ)(V,R.path,ee,R.isCustom))};return(0,n.jsx)(w,{value:Q,onChange:k,item:R,context:L,id:ae})}}))}return Object.values(M)}function b(P){const T=new u.C({title:(0,l.t)("dashboard.get-library-viz-panel-options-category.descriptor.title.library-panel-options","Library panel options"),id:"Library panel options",isOpenDefault:!0});return T.addItem(new E.v({title:(0,l.t)("dashboard.get-library-viz-panel-options-category.title.name","Name"),id:"library-panel-name",value:P,popularRank:1,render:function(S){return(0,n.jsx)(r.p,{id:S.props.id,"data-testid":"library panel name input",defaultValue:P.state.name,onBlur:B=>P.setState({name:B.currentTarget.value})})}})).addItem(new E.v({title:(0,l.t)("dashboard.get-library-viz-panel-options-category.title.information","Information"),id:"library-panel-information",render:function(){return(0,n.jsx)(h,{libraryPanel:P})}})),T}function D(P){const{plugin:T,panel:O,data:S,eventBus:B,instanceState:K}=P,U={},F=N=>{const W=N?.[0]??T.meta.name,R=U[W];return R||(U[W]=new u.C({title:W,id:W,sandboxId:T.meta.id}))},I=O.state.options,V={getValue:N=>(0,a.get)(I,N),onChange:(N,W)=>{const R=(0,y.Sf)(I,N,W);O.onOptionsChange(R)}},M=d({data:S,replaceVariables:O.interpolate,options:I,eventBus:B,instanceState:K});C(T.meta.id,T.getPanelOptionsSupplier(),V,F,M);const L=O.state.fieldConfig;for(const N of T.fieldConfigRegistry.list()){const W=N.showIf&&(N.isCustom?!N.showIf(L.defaults.custom,S?.series,S?.annotations):!N.showIf(L.defaults,S?.series,S?.annotations));if(N.hideFromDefaults||W)continue;const R=F(N.category),G=N.editor,w=L.defaults,_=N.isCustom?w.custom?(0,a.get)(w.custom,N.path):void 0:(0,a.get)(w,N.path);N.getItemsCount&&(R.props.itemsCount=N.getItemsCount(_));const Q=`${T.meta.id}-${N.path}`;R.addItem(new E.v({title:N.name,id:Q,description:N.description,overrides:m(N,L,S?.series),render:function(){const q=k=>{O.onFieldConfigChange((0,y.EQ)(L,N.path,k,N.isCustom),!0)};return(0,n.jsx)(G,{value:_,onChange:q,item:N,context:M,id:Q})}}))}return Object.values(U)}function C(P,T,O,S,B,K){const U=new s.pv;T(U,B);for(const F of U.getItems()){if(F.showIf&&!F.showIf(B.options,B.data,B.annotations))continue;const I=`${P}-${F.id}`;let V=K;if(V?F.category?.[0]?.length&&(V=V.getCategory(F.category[0])):V=S(F.category),(0,s.iF)(F)){const L=F.getNestedValueAccess(O),N=L.getContext?L.getContext(B):{...B,options:O.getValue(F.path)};C(I,F.getBuilder(),L,S,N,V);continue}const M=F.editor;V.addItem(new E.v({title:F.name,id:I,description:F.description,render:function(){return(0,n.jsx)(M,{value:O.getValue(F.path),onChange:N=>{O.onChange(F.path,N)},item:F,context:B,id:I})}}))}}},56445:(ne,A,e)=>{"use strict";e.d(A,{N:()=>V});var n=e(74848),a=e(4213),s=e.n(a),l=e(20382),r=e(2543),c=e.n(r),i=e(16817),o=e(70713),h=e(92745),f=e(43173),g=e(45863),u=e(47931),E=e(50992),v=e(22787),p=e(45861),m=e(41654),y=e(37386),d=e(21285),x=e(50803),b=e(60171),D=e(45173),C=e(99828),P=e(58662),T=e(7817),O=e(26604),S=e(70030),B=e(62265),K=e(13241),U=e(23289),F=e(8285),I=e(84330);class V extends g.Bs{constructor(W){super({...W,isSharingExternally:!1,isViewingJSON:!1,exportMode:f.$.featureToggles.kubernetesDashboards?I.i.Classic:void 0}),this.tabId=P.wr.export,this.onShareExternallyChange=()=>{this.setState({isSharingExternally:!this.state.isSharingExternally})},this.onExportModeChange=R=>{this.setState({exportMode:R}),R===I.i.Classic&&this.setState({isViewingYAML:!1})},this.onViewJSON=()=>{this.setState({isViewingJSON:!this.state.isViewingJSON})},this.onViewYAML=()=>{this.setState({isViewingYAML:!this.state.isViewingYAML})},this.getExportableDashboardJson=async()=>{const{isSharingExternally:R,exportMode:G}=this.state,w=(0,F.YQ)(this),_=await w.serializer.makeExportableExternally(w),Q=w.getInitialSaveModel(),ae=Q&&(0,b.aK)(Q)?"v2":"v1",q=w.serializer.getSaveModel(w),k=R?_:q,ee=M(w,!!R);if((0,b.aK)(q)&&"elements"in k&&ae==="v2"&&G!==I.i.V1Resource){this.setState({exportMode:I.i.V2Resource});let j=k;if(R&&(0,b.aK)(k)){const J=JSON.parse(JSON.stringify(k)),Z=await(0,O.j)(J,R);if("error"in Z)return{json:{error:Z.error},initialSaveModelVersion:ae,hasLibraryPanels:Object.values(q.elements).some(te=>te.kind==="LibraryPanel")};j=Z}return{json:{apiVersion:w.serializer.apiVersion??"",kind:"Dashboard",metadata:ee,spec:j,status:{}},initialSaveModelVersion:ae,hasLibraryPanels:Object.values(q.elements).some(J=>J.kind==="LibraryPanel")}}if(G===I.i.V1Resource)if((0,b.aK)(q)&&ae==="v2")try{const j=(0,B.Xl)(w),J=M(w,!!R),Z=(0,x.Sb)(j,{name:J.name??"",generation:J.generation??0,resourceVersion:J.resourceVersion??"0",creationTimestamp:J.creationTimestamp??""});let te;if(R){const se=new T.G(Z,void 0,{getVariablesFromState:()=>(0,K.E)(window.__grafanaSceneContext)});te=await(0,O.E)(se)}else te=Z;return{json:{apiVersion:`${D._.group}/${D._.version}`,kind:"Dashboard",metadata:J,spec:te,status:{}},initialSaveModelVersion:ae,hasLibraryPanels:(0,F.tk)(Z)}}catch(j){return{json:{error:`Failed to convert dashboard to v1. ${j}`},initialSaveModelVersion:ae,hasLibraryPanels:void 0}}else{const j=(0,S.Uy)(w);return{json:{apiVersion:`${D._.group}/${D._.version}`,kind:"Dashboard",metadata:ee,spec:j,status:{}},initialSaveModelVersion:ae,hasLibraryPanels:(0,F.tk)(j)}}if(G===I.i.V2Resource){const j=(0,B.Xl)(w),J=JSON.parse(JSON.stringify(j)),Z=await(0,O.j)(J,R),te=R?Z:j;let se=!1;return ae==="v1"&&!(0,b.aK)(q)?se=(0,F.tk)(q):(0,b.aK)(q)&&(se=Object.values(q.elements).some(ie=>ie.kind==="LibraryPanel")),{json:{apiVersion:`${C.P.group}/${C.P.version}`,kind:"Dashboard",metadata:ee,spec:te,status:{}},initialSaveModelVersion:ae,hasLibraryPanels:se}}if(ae==="v1"&&(0,b.aK)(q)&&Q&&"panels"in Q){const j=new T.G(Q,void 0,{getVariablesFromState:()=>(0,K.E)(window.__grafanaSceneContext)});return{json:R?await(0,O.E)(j):Q,hasLibraryPanels:(0,F.tk)(Q),initialSaveModelVersion:ae}}return{json:k,hasLibraryPanels:"error"in k||!(0,b.cR)(q)?!1:(0,F.tk)(q),initialSaveModelVersion:ae}},this.onSaveAsFile=async()=>{const R=await this.getExportableDashboardJson(),G=JSON.stringify(R.json,null,2),{isSharingExternally:w,isViewingYAML:_}=this.state,Q=new Blob([_?l.Ay.dump(R.json):G],{type:"application/json;charset=utf-8"}),ae=new Date().getTime();let q="dashboard";"title"in R.json&&R.json.title&&(q=R.json.title);const k=_?"yaml":"json";s()(Q,`${q}-${ae}.${k}`),U.c.exportDownloadJsonClicked({externally:w,dashboard_schema_version:R.initialSaveModelVersion,has_library_panels:!!R.hasLibraryPanels,format:_?"yaml":"json",action:"download"})},this.onClipboardCopy=async()=>{const R=await this.getExportableDashboardJson(),{isSharingExternally:G,isViewingYAML:w,exportMode:_}=this.state;U.c.exportCopyJsonClicked({externally:G,dashboard_schema_version:R.initialSaveModelVersion,has_library_panels:!!R.hasLibraryPanels,export_mode:_||"classic",format:w?"yaml":"json",action:"copy"})}}static{this.Component=L}getTabLabel(){return(0,h.t)("share-modal.tab-title.export","Export")}getClipboardText(){}}function M(N,W){let R={};if(N.serializer.metadata&&("k8s"in N.serializer.metadata?R=N.serializer.metadata.k8s?(0,r.cloneDeep)(N.serializer.metadata.k8s):{}:"annotations"in N.serializer.metadata&&(R=(0,r.cloneDeep)(N.serializer.metadata))),"managedFields"in R&&delete R.managedFields,W){"uid"in R&&delete R.uid,delete R.resourceVersion,delete R.namespace;for(const G in R.labels)G.startsWith("grafana.app/")&&delete R.labels[G];for(const G in R.annotations)G.startsWith("grafana.app/")&&delete R.annotations[G]}return R}function L({model:N}){const{isSharingExternally:W,isViewingJSON:R,modalRef:G,exportMode:w,isViewingYAML:_}=N.useState(),Q=(0,i.A)(async()=>await N.getExportableDashboardJson(),[R,W,w]),ae=JSON.stringify(Q.value?.json,null,2),q=l.Ay.dump(Q.value?.json,{skipInvalid:!0}),k=_?q:ae,ee=(0,h.t)("share-modal.export.share-externally-label","Export for sharing externally");return(0,n.jsxs)(n.Fragment,{children:[!R&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(h.x6,{i18nKey:"share-modal.export.info-text",children:"Export this dashboard."})}),f.$.featureToggles.kubernetesDashboards?(0,n.jsx)(I.j,{dashboardJson:Q,isSharingExternally:W??!1,exportMode:w??I.i.Classic,isViewingYAML:_??!1,onExportModeChange:N.onExportModeChange,onShareExternallyChange:N.onShareExternallyChange,onViewYAML:N.onViewYAML}):(0,n.jsx)(m.B,{gap:2,direction:"column",children:(0,n.jsx)(y.D,{label:ee,children:(0,n.jsx)(d.d,{id:"share-externally-toggle",value:W,onChange:N.onShareExternallyChange})})}),(0,n.jsxs)(v.a.ButtonRow,{children:[(0,n.jsx)(p.$n,{variant:"secondary",onClick:()=>{G?.resolve().onDismiss()},fill:"outline",children:(0,n.jsx)(h.x6,{i18nKey:"share-modal.export.cancel-button",children:"Cancel"})}),_?(0,n.jsx)(p.$n,{variant:"secondary",icon:"brackets-curly",onClick:N.onViewJSON,children:(0,n.jsx)(h.x6,{i18nKey:"share-modal.export.view-button-yaml",children:"View YAML"})}):(0,n.jsx)(p.$n,{variant:"secondary",icon:"brackets-curly",onClick:N.onViewJSON,children:(0,n.jsx)(h.x6,{i18nKey:"share-modal.export.view-button",children:"View JSON"})}),(0,n.jsx)(p.$n,{variant:"primary",icon:"save",onClick:()=>N.onSaveAsFile(),children:(0,n.jsx)(h.x6,{i18nKey:"share-modal.export.save-button",children:"Save to file"})})]})]}),R&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Ay,{disableHeight:!0,children:({width:j})=>Q.value?(0,n.jsx)(E.B,{value:k,showLineNumbers:!0,language:_?"yaml":"json",showMiniMap:!1,height:"500px",width:j}):Q.loading?(0,n.jsxs)("div",{children:[" ",(0,n.jsx)(h.x6,{i18nKey:"share-modal.export.loading",children:"Loading..."})]}):null}),(0,n.jsxs)(v.a.ButtonRow,{children:[(0,n.jsx)(p.$n,{variant:"secondary",fill:"outline",onClick:N.onViewJSON,icon:"arrow-left",children:(0,n.jsx)(h.x6,{i18nKey:"share-modal.export.back-button",children:"Back to export config"})}),(0,n.jsx)(u.b,{variant:"secondary",icon:"copy",disabled:Q.loading,getText:()=>k??"",onClipboardCopy:N.onClipboardCopy,children:(0,n.jsx)(h.x6,{i18nKey:"share-modal.view-json.copy-button",children:"Copy to Clipboard"})}),(0,n.jsx)(p.$n,{variant:"primary",icon:"save",disabled:Q.loading,onClick:()=>N.onSaveAsFile(),children:(0,n.jsx)(h.x6,{i18nKey:"share-modal.export.save-button",children:"Save to file"})})]})]})]})}},56476:(ne,A,e)=>{"use strict";e.d(A,{Au:()=>i,O:()=>f,Uo:()=>l,dM:()=>s,gw:()=>c,jw:()=>o,zl:()=>h});var n=e(52161),a=e(22628);const s=g=>g===n.hY,l=g=>{const u=c(g,a.T.Provenance);return!!(u&&u!==a.rh)},r="grafana.com/access/",c=(g,u)=>g.metadata?.annotations?.[u],i=g=>c(g,a.T.AccessWrite)==="true",o=g=>c(g,a.T.AccessAdmin)==="true",h=g=>c(g,a.T.AccessDelete)==="true",f=g=>g.replaceAll(/\\/g,"\\\\").replaceAll(/\=/g,"\\=").replaceAll(/,/g,"\\,")},56620:(ne,A,e)=>{"use strict";e.d(A,{U:()=>h});var n=e(74848),a=e(96540),s=e(7389),l=e(92745),r=e(37386),c=e(77824),i=e(51702);const o=[{label:"On dashboard load",value:s.CO.onDashboardLoad},{label:"On time range change",value:s.CO.onTimeRangeChanged}];function h({onChange:f,refresh:g,testId:u}){const E=!(0,i.i)("sm"),v=(0,a.useMemo)(()=>o.find(p=>p.value===g)?.value??o[0].value,[g]);return(0,n.jsx)(r.D,{label:(0,l.t)("variables.query-variable-refresh-select.label-refresh","Refresh"),description:(0,l.t)("variables.query-variable-refresh-select.description-update-values-variable","When to update the values of this variable"),"data-testid":u,children:(0,n.jsx)(c.z,{options:o,onChange:f,value:v,size:E?"sm":"md"})})}},56623:(ne,A,e)=>{"use strict";e.d(A,{p:()=>a});var n=e(82612);function a(s){return s.type==="graph"?s.xaxis?.mode==="series"?s.legend?.values?"bargauge":"barchart":s.xaxis?.mode==="histogram"?"histogram":"timeseries":n.NB[s.type]}},56652:(ne,A,e)=>{"use strict";e.r(A),e.d(A,{AlertmanagerTemplateFunction:()=>a,GomplateFunctions:()=>s,availableAlertManagerFunctions:()=>l,builtinFunctions:()=>c,conf:()=>h,keywords:()=>i,language:()=>o});var n=(f=>(f.Delimiter="delimiter",f.Keyword="keyword",f.Function="type.identifier",f.String="string",f.Variable="variable.name",f.Number="number",f.Comment="comment",f.Operator="operator",f.Identifier="idenfifier",f))(n||{}),a=(f=>(f.toUpper="toUpper",f.toLower="toLower",f.title="title",f.join="join",f.match="match",f.safeHtml="safeHtml",f.reReplaceAll="reReplaceAll",f.stringSlice="stringSlice",f))(a||{});const s={coll:[{keyword:"coll.Dict",definition:"Creates a map with string keys from key/value pairs. All keys are converted to strings. If an odd number of arguments is provided, the last is used as the key with an empty string value.",usage:"function(key string, val any, ...)",example:'{{ coll.Dict "name" "Frank" "age" 42 | data.ToYAML }}'},{keyword:"coll.Slice",definition:"Creates a slice (like an array or list). Useful when needing to range over a bunch of variables.",usage:"function(in ...any)",example:'{{ range coll.Slice "Bart" "Lisa" "Maggie" }}Hello, {{ . }}{{ end }}'},{keyword:"coll.Append",definition:"Appends a value to the end of a list. Creates a new list rather than modifying the input.",usage:"function(value any, list []any)",example:"{{ coll.Slice 1 1 2 3 | append 5 }}"}],data:[{keyword:"data.JSON",definition:"Converts a JSON string into an object. Works for JSON Objects and Arrays.",usage:"function(json string)",example:"{{ ($json | data.JSON).hello }}"},{keyword:"data.ToJSON",definition:"Converts an object to a JSON document.",usage:"function(obj any)",example:'{{ (`{"foo":{"hello":"world"}}` | json).foo | data.ToJSON }}'},{keyword:"data.ToJSONPretty",definition:"Converts an object to a pretty-printed (indented) JSON document.",usage:"function(indent string, obj any)",example:'{{ `{"hello":"world"}` | data.JSON | data.ToJSONPretty "  " }}'}],tmpl:[{keyword:"tmpl.Exec",definition:"Execute (render) the named template. This is equivalent to using the `template` action, except the result is returned as a string. This allows for post-processing of templates.",usage:"function(name string, [context any])",example:'{{ tmpl.Exec "T1" | strings.ToUpper }}'},{keyword:"tmpl.Inline",definition:"Render the given string as a template, just like a nested template. If the template is given a name, it can be re-used later with the `template` keyword. A context can be provided, otherwise the default gomplate context will be used.",usage:"function(partial string, context any)",example:'{{ tmpl.Inline "{{print `hello world`}}" }}'}],time:[{keyword:"time.Now",definition:"Returns the current local time, as a time.Time. This wraps Go's time.Now.",usage:"function()",example:'{{ (time.Now).UTC.Format "Day 2 of month 1 in year 2006 (timezone MST)" }}'}]},l=[...Object.values(a),...Object.keys(s).map(f=>f)],c=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],i=["define","if","else","end","range","break","continue","template","block","with"],o={defaultToken:"",keywords:i,functions:[...c,...l],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},h={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},56755:(ne,A,e)=>{"use strict";e.d(A,{BP:()=>c,m3:()=>o,sE:()=>i,v3:()=>r});var n=e(96540),a=e(16515),s=e(38809),l=e(97958);function r(h,f){return h?f.display.has(h)||f.raw.has(h):!1}function c(h,f){const g={display:new Set,raw:new Set,fields:new Map};for(const u of h)for(const E of u.fields){if(f&&!f(E))continue;const v=(0,a.Ct)(E,u,h);g.display.add(v),g.fields.set(v,E),E.name&&v!==E.name&&(g.raw.add(E.name),g.fields.set(E.name,E))}return g}function i(h,f){return(0,n.useMemo)(()=>c(h,f),[h,f])}function o(h,f,g,u,E){return(0,n.useMemo)(()=>{let v=!1;const p=[];if(g&&p.push(g),E===s.X4.OnlyBaseNames)for(const m of h.raw)!v&&m===f&&(v=!0),p.push({value:m,label:`${m} (base field name)`});else{for(const m of h.display){!v&&m===f&&(v=!0);const y=h.fields.get(m);(!u||u===y?.type)&&p.push({value:m,label:m,icon:y?(0,l.SS)(y):void 0})}if(E!==s.X4.ExcludeBaseNames)for(const m of h.raw)h.display.has(m)||(!v&&m===f&&(v=!0),p.push({value:m,label:`${m} (base field name)`}))}return f&&!v&&p.push({value:f,label:`${f} (not found)`}),p},[h,f,g,u,E])}},56873:(ne,A,e)=>{"use strict";e.d(A,{F:()=>E});var n=e(74848),a=e(22803),s=e(18828),l=e(43107),r=e(93225),c=e(59875),i=e(96540),o=e(92745),h=e(63142),f=e(34999),g=e(45861),u=e(76319);const E=({images:p})=>{const[m,y]=(0,i.useState)(null),[d,x]=(0,i.useState)({}),[b,D]=(0,i.useState)(p),C=(0,i.useId)(),P=(0,h.of)(v),T=(0,h.of)(g.my),O=N=>{x(W=>({...W,[N]:!0}))};(0,i.useEffect)(()=>{const N=p.filter(W=>!d[W.path]);D(N)},[d,p]);const S=N=>{y(N)},B=()=>{y(null)},K=()=>{m!==null&&b.length>0&&y((m+1)%b.length)},U=()=>{m!==null&&b.length>0&&y((m-1+b.length)%b.length)},F=N=>{if(m!==null)switch(N.key){case"ArrowRight":K();break;case"ArrowLeft":U();break;case"Escape":B();break;default:break}},I=(0,i.useRef)(null),{overlayProps:V,underlayProps:M}=(0,r.e)({isOpen:m!==null,onClose:B},I),{dialogProps:L}=(0,s.s)({},I);return b.length===0?(0,n.jsx)(f.F,{title:(0,o.t)("carousel.error","Something went wrong loading images"),severity:"warning","data-testid":"alert-warning"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,a.cx)(P.imageGrid),children:b.map((N,W)=>{const R=`${C}-carousel-image-${W}`;return(0,n.jsxs)("button",{"aria-label":(0,o.t)("grafana-ui.carousel.aria-label-open-image","Open image preview"),"aria-describedby":R,type:"button",onClick:()=>S(W),className:(0,a.cx)(T,P.imageButton),children:[(0,n.jsx)("img",{src:N.path,alt:"",onError:()=>O(N.path)}),(0,n.jsx)("p",{id:R,children:N.name})]},N.path)})}),m!==null&&(0,n.jsxs)(c.Sf,{children:[(0,n.jsx)("div",{role:"presentation",className:P.underlay,onClick:B,...M}),(0,n.jsx)(l.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsxs)("div",{"data-testid":"carousel-full-screen",ref:I,...V,...L,onKeyDown:F,className:P.overlay,children:[(0,n.jsx)(u.K,{name:"times","aria-label":(0,o.t)("carousel.close","Close"),size:"xl",onClick:B,className:(0,a.cx)(P.closeButton)}),(0,n.jsx)(u.K,{size:"xl",name:"angle-left","aria-label":(0,o.t)("carousel.previous","Previous"),onClick:U,"data-testid":"previous-button"}),(0,n.jsx)("div",{className:P.imageContainer,"data-testid":"carousel-full-image",children:(0,n.jsx)("img",{className:P.imagePreview,src:b[m].path,alt:b[m].name,onError:()=>O(b[m].path)})}),(0,n.jsx)(u.K,{size:"xl",name:"angle-right","aria-label":(0,o.t)("carousel.next","Next"),onClick:K,"data-testid":"next-button"})]})})]})]})},v=p=>({imageButton:(0,a.css)({textAlign:"left"}),imageContainer:(0,a.css)({display:"flex",justifyContent:"center",flex:1}),imagePreview:(0,a.css)({maxWidth:"100%",maxHeight:"80vh",objectFit:"contain"}),imageGrid:(0,a.css)({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:p.spacing(2),marginBottom:"20px","& img":{width:"100%",height:"150px",objectFit:"cover",border:p.colors.border.strong,borderRadius:p.shape.radius.default,boxShadow:p.shadows.z1},"& p":{margin:p.spacing(.5,0),fontWeight:p.typography.fontWeightMedium,color:p.colors.text.primary}}),underlay:(0,a.css)({position:"fixed",zIndex:p.zIndex.modalBackdrop,inset:0,backgroundColor:p.components.overlay.background}),overlay:(0,a.css)({alignItems:"center",display:"flex",gap:p.spacing(1),height:"fit-content",marginBottom:"auto",marginTop:"auto",padding:p.spacing(2),position:"fixed",inset:0,zIndex:p.zIndex.modal}),closeButton:(0,a.css)({color:p.colors.text.primary,position:"fixed",top:p.spacing(2),right:p.spacing(2)})})},56887:(ne,A,e)=>{"use strict";e.d(A,{_:()=>a,y:()=>s});var n=e(96540);const a=(0,n.createContext)(void 0);function s(l){if(!l)return{};const r=(0,n.useContext)(a);if(!r)return{};const c=r.selected.some(h=>h.id===l),i=(0,n.useCallback)((h,f={})=>{r.enabled&&(h.stopPropagation(),h.shiftKey&&(h.preventDefault(),window.getSelection()?.empty()),r.onSelect({id:l},{...f,multi:f.multi??h.shiftKey}))},[r,l]),o=(0,n.useCallback)(()=>{r.enabled&&r.onClear()},[r]);return{isSelected:c,onSelect:i,onClear:o,isSelectable:r.enabled}}},57204:(ne,A,e)=>{"use strict";e.d(A,{y:()=>c});var n=e(39796),a=e(1906),s=e(46933),l=e(2863),r=e(36580);async function c(i,o,h,f){let g=h;const u={...i.getRef(),uid:o},E={...i?.getDefaultQuery?.(a.Jk.PanelEditor),datasource:u,refId:"A"};if(f?.meta.id!==i.meta.id){if(i.meta.mixed)return h;if((0,s.Ee)(f)&&(0,s.FL)(i)){const v=await f.exportToAbstractQueries(h);g=await i.importFromAbstractQueries(v)}else if(f&&i.importQueries)g=await i.importQueries(h,f);else{if(f){const v=(0,l.w)(),p=[];let m=i.uid;const y=v.containsTemplate(o);y&&(m=v.replace(i.uid));const d=h.reduce((x,b)=>{if(b.datasource){let D=b.datasource.uid;const C=v.containsTemplate(D);if(C&&(D=v.replace(b.datasource.uid)),D===m&&C===y)return b.refId=(0,n.M)(x),x.concat([b])}return x},p);if(d.length>0)return d}return[E]}}return g.length===0?[E]:g.map(v=>(!(0,r.s9)(v.datasource)&&!i.meta.mixed&&(v.datasource=u),v))}},57339:(ne,A,e)=>{"use strict";e.d(A,{o:()=>i,t:()=>o});var n=e(74848),a=e(92745),s=e(63142),l=e(18027),r=e(21285),c=e(89772);const i=h=>{const{yaxis:f,onToggleAxis:g,color:u,...E}=h,v=(0,a.t)("grafana-ui.series-color-picker-popover.y-axis-usage","Use right y-axis"),p=g?{yaxis:{name:"Y-Axis",tabComponent(){return(0,n.jsx)(l.I,{labelWidth:20,label:v,children:(0,n.jsx)(r.K,{value:f===2,label:v,onChange:g})})}}}:void 0;return(0,n.jsx)(c.$,{...E,color:u||"#000000",customPickers:p})},o=(0,s.cV)(i)},57444:(ne,A,e)=>{"use strict";e.d(A,{H:()=>s});var n=e(739),a=e(59427);function s(r,c){return l((0,a.UI)(r,c?.field),c)}function l(r,c){if(!r){const h=c.fixed??0;return{isAssumed:!!c.field?.length||!c.fixed,fixed:h,value:()=>h,get:()=>h}}let i=h=>h%c.max;return c.mode===n.WQ.Clamped&&(i=h=>h<c.min?c.min:h>c.max?c.max:h),{field:r,get:h=>{const f=r.values[h];return f===null||typeof f!="number"?0:i(f)},value:()=>(0,a.sB)(r)}}},57487:(ne,A,e)=>{"use strict";e.d(A,{B:()=>r});var n=e(74848),a=e(22803),s=e(63142),l=e(6106);const r=({renderExpandedContent:i,...o})=>{const h=(0,s.of)(c);return(0,n.jsx)(l.E,{renderExpandedContent:i?(f,g,u)=>(0,n.jsxs)(n.Fragment,{children:[g!==u.length-1&&(0,n.jsx)("div",{className:(0,a.cx)(h.contentGuideline,h.guideline)}),i(f,g,u)]}):void 0,renderPrefixHeader:()=>(0,n.jsx)("div",{className:h.relative,children:(0,n.jsx)("div",{className:(0,a.cx)(h.headerGuideline,h.guideline)})}),renderPrefixCell:(f,g,u)=>(0,n.jsxs)("div",{className:h.relative,children:[(0,n.jsx)("div",{className:(0,a.cx)(h.topGuideline,h.guideline)}),g!==u.length-1&&(0,n.jsx)("div",{className:(0,a.cx)(h.bottomGuideline,h.guideline)})]}),...o})},c=i=>({relative:(0,a.css)({position:"relative",height:"100%"}),guideline:(0,a.css)({left:"-19px",borderLeft:`1px solid ${i.colors.border.weak}`,position:"absolute",[i.breakpoints.down("md")]:{display:"none"}}),topGuideline:(0,a.css)({width:"18px",borderBottom:`1px solid ${i.colors.border.medium}`,top:0,bottom:"50%"}),bottomGuideline:(0,a.css)({top:"50%",bottom:0}),contentGuideline:(0,a.css)({top:0,bottom:0,left:"-49px !important"}),headerGuideline:(0,a.css)({top:"-17px",bottom:0})})},57688:(ne,A,e)=>{"use strict";e.d(A,{e:()=>u});var n=e(74848),a=e(22803),s=e(96540),l=e(24726),r=e(51898),c=e(92745),i=e(63142),o=e(35484),h=e(28473),f=e(45861),g=e(30703);const u=({onFileUpload:v,className:p,children:m="Upload file",accept:y="*",size:d="md",showFileName:x})=>{const b=(0,i.of)(E(d)),[D,C]=(0,s.useState)(""),P=(0,l.A)(),T=(0,s.useCallback)(O=>{const S=O.currentTarget?.files?.[0];S&&C(S.name??""),v(O)},[v]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"file",id:P,className:b.fileUpload,onChange:T,multiple:!1,accept:y,"data-testid":r.Tp.components.FileUpload.inputField}),(0,n.jsxs)("label",{htmlFor:P,className:(0,a.cx)(b.labelWrapper,p),children:[(0,n.jsx)(g.I,{name:"upload",className:b.icon}),m]}),x&&D&&(0,n.jsx)("span",{"aria-label":(0,c.t)("grafana-ui.file-upload.file-name","File name"),className:b.fileName,"data-testid":r.Tp.components.FileUpload.fileNameSpan,children:(0,h.i)(D)})]})},E=v=>p=>{const m=(0,f.hs)({theme:p,variant:"primary",size:v,iconOnly:!1}),y=(0,o.getFocusStyles)(p);return{fileUpload:(0,a.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":y,"&:focus-visible + label":y}),labelWrapper:m.button,icon:m.icon,fileName:(0,a.css)({marginLeft:p.spacing(.5)})}}},57852:(ne,A,e)=>{"use strict";e.d(A,{LL:()=>h,LO:()=>l,NI:()=>o,Tp:()=>f,We:()=>r,b_:()=>a,gc:()=>c,ql:()=>s,wE:()=>i});var n=e(68388);class a extends n.x{static{this.type="data-hover"}}class s extends n.a{static{this.type="data-hover-clear"}}class l extends n.x{static{this.type="data-select"}}class r extends n.x{static{this.type="annotation-event"}}class c extends n.x{static{this.type="dashboard-loaded"}}class i extends n.a{static{this.type="datasource-updated-successfully"}}class o extends n.a{static{this.type="datasource-test-succeeded"}}class h extends n.a{static{this.type="datasource-test-failed"}}class f extends n.x{static{this.type="set-panel-attention"}}},57866:(ne,A,e)=>{"use strict";e.d(A,{Ct:()=>a,Js:()=>l,cV:()=>n,jR:()=>s});var n=(r=>(r.anyMatch="anyMatch",r.allMatch="allMatch",r.invertMatch="invertMatch",r.alwaysMatch="alwaysMatch",r.neverMatch="neverMatch",r))(n||{}),a=(r=>(r.numeric="numeric",r.time="time",r.first="first",r.firstTimeField="firstTimeField",r.byType="byType",r.byTypes="byTypes",r.byName="byName",r.byNames="byNames",r.byRegexp="byRegexp",r.byRegexpOrNames="byRegexpOrNames",r.byFrameRefID="byFrameRefID",r.byValue="byValue",r))(a||{}),s=(r=>(r.byName="byName",r.byRefId="byRefId",r.byIndex="byIndex",r))(s||{}),l=(r=>(r.regex="regex",r.isNull="isNull",r.isNotNull="isNotNull",r.greater="greater",r.greaterOrEqual="greaterOrEqual",r.lower="lower",r.lowerOrEqual="lowerOrEqual",r.equal="equal",r.notEqual="notEqual",r.substring="substring",r.notSubstring="notSubstring",r.between="between",r))(l||{})},58138:(ne,A,e)=>{"use strict";e.d(A,{G:()=>g,Q:()=>f});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(43173),c=e(22787),i=e(63142);const o=(0,s.lazy)(()=>e.e(2835).then(e.bind(e,32835))),h=(0,s.lazy)(()=>Promise.all([e.e(8706),e.e(483)]).then(e.bind(e,50483)));var f=(E=>(E.Loki="loki",E.Annotations="annotations",E))(f||{});function g(){const[E,v]=(0,s.useState)(!1),[p,m]=(0,s.useState)(),y=(0,i.of)(u),d=r.$.unifiedAlerting.stateHistory?.backend,x=r.$.unifiedAlerting.stateHistory?.primary,D=[d,x].some(O=>O==="loki")?"loki":"annotations",C=(0,s.useCallback)(()=>{m(void 0),v(!1)},[]),P=(0,s.useCallback)(O=>{m(O),v(!0)},[]);return{StateHistoryModal:(0,s.useMemo)(()=>p?(0,n.jsx)(c.a,{isOpen:E,onDismiss:C,closeOnBackdropClick:!0,closeOnEscape:!0,title:(0,l.t)("alerting.use-state-history-modal.state-history-modal.title-state-history","State history"),className:y.modal,contentClassName:y.modalContent,children:(0,n.jsxs)(s.Suspense,{fallback:"Loading...",children:[D==="loki"&&(0,n.jsx)(h,{ruleUID:p.grafana_alert.uid}),D==="annotations"&&(0,n.jsx)(o,{ruleUID:p.grafana_alert.uid??""})]})}):null,[p,E,C,D,y]),showStateHistoryModal:P,hideStateHistoryModal:C}}const u=E=>({modal:(0,a.css)({width:"80%",height:"80%",minWidth:"800px"}),modalContent:(0,a.css)({height:"100%",width:"100%",padding:E.spacing(2)})})},58375:(ne,A,e)=>{"use strict";e.d(A,{M:()=>B,D:()=>S});var n=e(74848),a=e(22803),s=e(49785),l=e(51898),r=e(92745),c=e(63142),i=e(45861),o=e(68079),h=e(15130),f=e(62905),g=e(23289),u=e(11257),E=e(52763),v=e(35195),p=e(37672),m=e(44173),y=e(24313),d=e(55066),x=e(16780),b=e(41654),D=e(32635);const C=l.Tp.pages.ShareDashboardModal.PublicDashboard,P=({disabled:U,register:F})=>{const I=(0,c.of)(T),V=[{type:"publicAcknowledgment",description:(0,r.t)("public-dashboard.acknowledgment-checkboxes.public-ack-desc","Your entire dashboard will be public*"),testId:C.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:(0,r.t)("public-dashboard.acknowledgment-checkboxes.public-ack-tooltip","Learn more about public dashboards")}},{type:"dataSourcesAcknowledgment",description:(0,r.t)("public-dashboard.acknowledgment-checkboxes.data-src-ack-desc","Publishing currently only works with a subset of data sources*"),testId:C.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:(0,r.t)("public-dashboard.acknowledgment-checkboxes.data-src-ack-tooltip","Learn more about public datasources")}},{type:"usageAcknowledgment",description:(0,r.t)("public-dashboard.acknowledgment-checkboxes.usage-ack-desc","Making a dashboard public will cause queries to run each time it is viewed, which may increase costs*"),testId:C.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:(0,r.t)("public-dashboard.acknowledgment-checkboxes.usage-ack-desc-tooltip","Learn more about query caching")}}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:I.title,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.acknowledgment-checkboxes.ack-title",children:"Before you make the dashboard public, acknowledge the following:"})}),(0,n.jsx)(x.n,{disabled:U,children:(0,n.jsx)(b.B,{direction:"column",gap:2,children:V.map(M=>(0,n.jsxs)(b.B,{gap:0,alignItems:"center",children:[(0,n.jsx)(D.S,{...F(M.type,{required:!0}),label:M.description,"data-testid":M.testId}),(0,n.jsx)(i.z9,{variant:"primary",href:M.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:M.info.tooltip})]},M.type))})})]})},T=U=>({title:(0,a.css)({fontWeight:U.typography.fontWeightBold})}),O=l.Tp.pages.ShareDashboardModal.PublicDashboard,S=({unsupportedDatasources:U=[],unsupportedTemplateVariables:F=!1,dashboard:I,hasError:V=!1})=>{const M=(0,c.of)(K),L=h.TP.hasPermission(u.w.DashboardsPublicWrite),[N,{isLoading:W,isError:R}]=(0,f.U9)(),G=()=>{N({dashboard:I,payload:{isEnabled:!0}}),g.c.generatePublicDashboardUrlClicked({})},{handleSubmit:w,register:_,formState:{isValid:Q}}=(0,s.mN)({mode:"onChange"}),ae=!L||W||R||V;return(0,n.jsxs)("div",{className:M.container,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:M.title,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.create-page.welcome-title",children:"Welcome to public dashboards!"})}),(0,n.jsx)("p",{className:M.description,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.create-page.unsupported-features-desc",children:"Currently, we don\u2019t support template variables or frontend data sources"})})]}),!L&&(0,n.jsx)(v.t,{mode:"create"}),F&&(0,n.jsx)(m.D,{}),U.length>0&&(0,n.jsx)(p.s,{unsupportedDataSources:U.join(", ")}),(0,n.jsxs)("form",{onSubmit:w(G),children:[(0,n.jsx)("div",{className:M.checkboxes,children:(0,n.jsx)(P,{disabled:ae,register:_})}),(0,n.jsx)("div",{className:M.buttonContainer,children:(0,n.jsxs)(i.$n,{type:"submit",disabled:ae||!Q,"data-testid":O.CreateButton,children:[(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.create-page.generate-public-url-button",children:"Generate public URL"}),W&&(0,n.jsx)(o.y,{className:M.loadingSpinner})]})})]})]})};function B({hasError:U}){const I=(0,E.d4)(L=>L.dashboard).getModel(),{unsupportedDataSources:V}=(0,d.Z)(I),M=(0,y.kD)(I.getVariables());return(0,n.jsx)(S,{dashboard:I,unsupportedDatasources:V,unsupportedTemplateVariables:M,hasError:U})}const K=U=>({container:(0,a.css)({display:"flex",flexDirection:"column",gap:U.spacing(4)}),title:(0,a.css)({fontSize:U.typography.h4.fontSize,margin:U.spacing(0,0,2)}),description:(0,a.css)({color:U.colors.text.secondary,marginBottom:U.spacing(0)}),checkboxes:(0,a.css)({margin:U.spacing(0,0,4)}),buttonContainer:(0,a.css)({display:"flex",justifyContent:"end"}),loadingSpinner:(0,a.css)({marginLeft:U.spacing(1)})})},58449:(ne,A,e)=>{"use strict";e.d(A,{kn:()=>d,pF:()=>x,rS:()=>b,sA:()=>y});var n=e(74848),a=e(96540),s=e(78685),l=e(78012),r=e(54092),c=e(27489),i=e(36490),o=e(75234),h=e(46907),f=e(3260),g=e(87745),u=e(92270);const E="grafana.navigation.extensionSidebarDocked",v="grafana.navigation.extensionSidebarWidth",p=["grafana-investigations-app","grafana-assistant-app","grafana-dash-app","grafana-grafanadocsplugin-app"],m=(0,a.createContext)({isOpen:!1,dockedComponentId:void 0,setDockedComponentId:()=>{},availableComponents:new Map,extensionSidebarWidth:u.yq,setExtensionSidebarWidth:()=>{}});function y(){return(0,a.useContext)(m)}const d=({children:D})=>{const[C,P]=(0,a.useState)(void 0),T=l.M.get(E),[O,S]=(0,s.A)(v,u.yq),[B,K]=(0,a.useState)(i.Ny.getLocation().pathname);(0,a.useEffect)(()=>{const W=i.Ny.getLocationObservable().subscribe(R=>{K(R.pathname)});return()=>{W.unsubscribe()}},[]);const{links:U,isLoading:F}=(0,h.U)({extensionPointId:r.SM.ExtensionSidebar,context:{path:B}}),I=(0,a.useMemo)(()=>new Map(Array.from((0,f.UX)(r.SM.ExtensionSidebar).entries()).filter(([W,R])=>p.includes(W)&&U.some(G=>G.pluginId===W&&R.addedComponents.some(w=>w.title===G.title)))),[U]);let V;T&&b(T)&&(V=T);const[M,L]=(0,a.useState)(V);(0,a.useEffect)(()=>{if(!F&&M){const W=b(M);if(W){const R=I.get(W.pluginId);(!R||!R.addedComponents.some(G=>G.title===W.componentTitle))&&L(void 0)}else L(void 0)}},[F,I,M]);const N=(0,a.useCallback)((W,R)=>{P(R),L(W)},[L]);return(0,a.useEffect)(()=>{const W=_=>{_.payload.pluginId&&_.payload.componentTitle&&p.includes(_.payload.pluginId)&&I.get(_.payload.pluginId)?.addedComponents.some(Q=>Q.title===_.payload.componentTitle)&&N(JSON.stringify({pluginId:_.payload.pluginId,componentTitle:_.payload.componentTitle}),_.payload.props)},R=()=>{L(void 0)},G=(0,o.J7)().subscribe(g.Am,W),w=(0,o.J7)().subscribe(g.KU,R);return()=>{G.unsubscribe(),w.unsubscribe()}},[N,I]),(0,a.useEffect)(()=>{if(F)return;const W=b(M??""),R=l.M.get(E),G=b(R??""),w=M!==void 0;(w||G)&&(0,c.rR)("grafana_extension_sidebar_changed",{opened:w,componentTitle:(w?W:G)?.componentTitle,pluginId:(w?W:G)?.pluginId,fromLocalstorage:R===M}),M?l.M.set(E,M):l.M.delete(E)},[M,F]),(0,n.jsx)(m.Provider,{value:{isOpen:M!==void 0,dockedComponentId:M,setDockedComponentId:W=>N(W,void 0),availableComponents:I,extensionSidebarWidth:Math.min(O??u.yq,u.T0),setExtensionSidebarWidth:S,props:C},children:D})};function x(D,C){return JSON.stringify({pluginId:D,componentTitle:C.title})}function b(D){try{const C=JSON.parse(D);return typeof C=="object"&&C!==null&&"pluginId"in C&&"componentTitle"in C&&typeof C.pluginId=="string"&&typeof C.componentTitle=="string"?C:void 0}catch{return}}},58614:(ne,A,e)=>{"use strict";e.d(A,{o3:()=>u,Dp:()=>v,Iq:()=>p,Uu:()=>m,o6:()=>y,Lv:()=>d});var n=e(68143),a=e(6890),s=e(64762),l=e(15130),r=e(85618),c=e(75816),i=e(73892);const o=(0,r.TP)("playlist.grafana.app","v0alpha1"),h=(0,c.xP)({reducerPath:"playlistAPIv0alpha1",baseQuery:(0,i.W)({baseURL:o}),endpoints:()=>({})}),f=["Playlist"],u=h.enhanceEndpoints({addTagTypes:f}).injectEndpoints({endpoints:x=>({listPlaylist:x.query({query:b=>({url:"/playlists",params:{pretty:b.pretty,allowWatchBookmarks:b.allowWatchBookmarks,continue:b.continue,fieldSelector:b.fieldSelector,labelSelector:b.labelSelector,limit:b.limit,resourceVersion:b.resourceVersion,resourceVersionMatch:b.resourceVersionMatch,sendInitialEvents:b.sendInitialEvents,timeoutSeconds:b.timeoutSeconds,watch:b.watch}}),providesTags:["Playlist"]}),createPlaylist:x.mutation({query:b=>({url:"/playlists",method:"POST",body:b.playlist,params:{pretty:b.pretty,dryRun:b.dryRun,fieldManager:b.fieldManager,fieldValidation:b.fieldValidation}}),invalidatesTags:["Playlist"]}),getPlaylist:x.query({query:b=>({url:`/playlists/${b.name}`,params:{pretty:b.pretty}}),providesTags:["Playlist"]}),replacePlaylist:x.mutation({query:b=>({url:`/playlists/${b.name}`,method:"PUT",body:b.playlist,params:{pretty:b.pretty,dryRun:b.dryRun,fieldManager:b.fieldManager,fieldValidation:b.fieldValidation}}),invalidatesTags:["Playlist"]}),deletePlaylist:x.mutation({query:b=>({url:`/playlists/${b.name}`,method:"DELETE",params:{pretty:b.pretty,dryRun:b.dryRun,gracePeriodSeconds:b.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:b.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:b.orphanDependents,propagationPolicy:b.propagationPolicy}}),invalidatesTags:["Playlist"]})}),overrideExisting:!1}).enhanceEndpoints({endpoints:{getPlaylist:{transformResponse:async x=>(await E(x.spec),x)},createPlaylist:x=>{const b=x.query;b&&(x.query=D=>{const C=D.playlist.metadata;return C&&!C.name&&!C.generateName&&(C.generateName=l.TP.user.login?.slice(0,2)||"g"),b(D)},x.onQueryStarted=async(D,{queryFulfilled:C,dispatch:P})=>{try{await C,P((0,a.dx)((0,s.tZ)("Playlist created")))}catch(T){(0,r.H4)(T,P,"Unable to create playlist")}})},replacePlaylist:{onQueryStarted:async(x,{queryFulfilled:b,dispatch:D})=>{try{await b,D((0,a.dx)((0,s.tZ)("Playlist updated")))}catch(C){(0,r.H4)(C,D,"Unable to update playlist")}}},deletePlaylist:{onQueryStarted:async(x,{queryFulfilled:b,dispatch:D})=>{try{await b,D((0,a.dx)((0,s.tZ)("Playlist deleted")))}catch(C){(0,r.H4)(C,D,"Unable to delete playlist")}}}}});async function E(x){if(x?.items){for(const b of x.items)if(b.type==="dashboard_by_id"){b.type="dashboard_by_uid";const D=await(0,n.AI)().get(`/api/dashboards/ids/${b.value}`);D?.length&&(b.value=D[0])}}}const{useCreatePlaylistMutation:v,useDeletePlaylistMutation:p,useGetPlaylistQuery:m,useListPlaylistQuery:y,useReplacePlaylistMutation:d}=u},58662:(ne,A,e)=>{"use strict";e.d(A,{CF:()=>v,Lb:()=>E,P_:()=>f,XV:()=>h,Xe:()=>g,hD:()=>m,wr:()=>y});var n=e(92138),a=e(5556),s=e(17548),l=e(25229),r=e(43173),c=e(71673),i=e(75421),o=e(15130);function h({useCurrentTimeRange:d,selectedTheme:x,panelId:b,timeFrom:D,search:C=window.location.search,range:P=(0,i.jG)().timeRange(),orgId:T=o.TP.user.orgId}){const O=new URLSearchParams(C);if(D){const{from:S,to:B}=s.describeTextRange(D);O.set("from",S),O.set("to",B)}else O.set("from",String(P.from.valueOf())),O.set("to",String(P.to.valueOf()));return O.set("orgId",String(T)),d||(O.delete("from"),O.delete("to")),x!=="current"&&O.set("theme",x),b&&!O.has("editPanel")&&O.set("viewPanel",b),O.delete("auth_token"),O.delete("shareView"),O}function f(){let d=window.location.href;const x=d.indexOf("?");return x!==-1&&(d=d.substring(0,x)),d}async function g(d,x,b,D){const C=f(),P=h({useCurrentTimeRange:d,selectedTheme:x,panelId:b?.id?String(b.id):void 0,timeFrom:b?.timeFrom}),T=a.kM.appendQueryToUrl(C,P.toString());return D?await(0,c.fn)(T):T}function u(d,x,b,D,C,P){const T=f(),O=h({useCurrentTimeRange:d,selectedTheme:b,panelId:D,timeFrom:C,range:P});let S=T.replace(r.$.appSubUrl+"/dashboard/",r.$.appSubUrl+"/dashboard-solo/");S=S.replace(r.$.appSubUrl+"/d/",r.$.appSubUrl+"/d-solo/"),n.I.stripBaseFromUrl(T)==="/"&&(S=`${r.$.appUrl}d-solo/${x}`);const K=O.get("editPanel")??O.get("viewPanel")??"";return O.set("panelId",K),O.delete("editPanel"),O.delete("viewPanel"),a.kM.appendQueryToUrl(S,O.toString())}function E(d,x,b,D){let P=u(d,x,b,D?.id?String(D.id):void 0,D?.timeFrom).replace(r.$.appSubUrl+"/dashboard-solo/",r.$.appSubUrl+"/render/dashboard-solo/");return P=P.replace(r.$.appSubUrl+"/d-solo/",r.$.appSubUrl+"/render/d-solo/"),P+=`&width=${r.$.rendererDefaultImageWidth}&height=${r.$.rendererDefaultImageHeight}&scale=${r.$.rendererDefaultImageScale}`+p(),P}function v(d,x,b,D,C,P){return`<iframe src="${u(d,x,b,D,C,P)}" width="450" height="200" frameborder="0"></iframe>`}function p(){const d="&tz=UTC"+encodeURIComponent((0,l.KQ)().format("Z"));if(!window.Intl)return d;const x=window.Intl.DateTimeFormat();if(!x.resolvedOptions)return d;const b=x.resolvedOptions();return b.timeZone?"&tz="+encodeURIComponent(b.timeZone):d}const m=d=>d?"panel":"dashboard",y={link:"link",snapshot:"snapshot",export:"export",embed:"embed",libraryPanel:"library_panel",pdf:"pdf",report:"report",publicDashboard:"public_dashboard",inviteUser:"invite_user",image:"image"}},58738:(ne,A,e)=>{"use strict";e.d(A,{e:()=>g,h:()=>u});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(96540),c=e(51898),i=e(63142),o=e(15245),h=e(39064),f=e(61048);const g=({links:v,actions:p,value:m,coords:y,onTooltipClose:d})=>{const x=(0,i.$j)(),b=(0,i.of)(E),D=[(0,s.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,s.BN)()],C=(0,r.useMemo)(()=>{const{clientX:F,clientY:I}=y;return{getBoundingClientRect(){return{width:0,height:0,x:F,y:I,top:I,left:F,right:F,bottom:I}}}},[y]),P=F=>{O.setFloating(F),O.setReference(C)},{context:T,refs:O,floatingStyles:S}=(0,l.we)({open:!0,placement:"right-start",onOpenChange:d,middleware:D}),B=(0,l.s9)(T),{getFloatingProps:K,getReferenceProps:U}=(0,l.bv)([B]);return v.length===0&&!p?.length?null:(0,n.jsxs)(n.Fragment,{children:[m,(0,n.jsx)(o.ZL,{zIndex:x.zIndex.tooltip,children:(0,n.jsx)("div",{ref:P,...U(),...K(),style:S,className:b.tooltipWrapper,"data-testid":c.Tp.components.DataLinksActionsTooltip.tooltipWrapper,children:(0,n.jsx)(f.i,{children:(0,n.jsx)(h.S,{dataLinks:v,actions:p})})})})]})},u=(v,p,m)=>(0,n.jsx)("a",{href:v.href,onClick:v.onClick,target:v.target,title:v.title,"data-testid":c.Tp.components.DataLinksContextMenu.singleLink,className:m,children:p}),E=v=>({tooltipWrapper:(0,a.css)({whiteSpace:"pre",borderRadius:v.shape.radius.default,background:v.colors.background.primary,border:`1px solid ${v.colors.border.weak}`,boxShadow:v.shadows.z3,userSelect:"text",fontSize:v.typography.bodySmall.fontSize})})},58873:(ne,A,e)=>{"use strict";e.d(A,{C:()=>a,m:()=>s});let n;function a(l){if(n)throw new Error("setGetObservablePluginLinks() function should only be called once, when Grafana is starting.");n=l}function s(l){if(!n)throw new Error("getObservablePluginLinks() can only be used after the Grafana instance has started.");return n(l)}},59006:(ne,A,e)=>{"use strict";e.d(A,{j:()=>c});var n=e(42954),a=e(4974),s=e(17340),l=e(76584),r=e(6461);const c=new n.O(()=>[{id:"GridLayout",name:"Grid Layout",deserialize:s.v2},{id:"AutoGridLayout",name:"Auto Grid Layout",deserialize:a.Dr},{id:"RowsLayout",name:"Rows Layout",deserialize:l.Vf},{id:"TabsLayout",name:"Tabs Layout",deserialize:r.wm}])},59243:(ne,A,e)=>{"use strict";e.d(A,{G:()=>g});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(46885),c=e(96540),i=e(92745),o=e(63142),h=e(71495),f=e(76319);const g=(0,c.memo)(({children:E,theme:v="info",placement:p="auto",content:m,title:y,closeButton:d=!0,onClose:x,footer:b,fitContent:D=!1,onOpen:C,show:P})=>{const T=(0,c.useRef)(null),O=(0,o.$j)(),S=(0,o.of)(u),B=S[v],[K,U]=(0,c.useState)(P),F=P??K,I=[(0,s.cY)(8),(0,s.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,s.BN)(),(0,s.UE)({element:T})],{context:V,refs:M,floatingStyles:L}=(0,l.we)({open:F,placement:(0,h.O)(p),onOpenChange:w=>{P===void 0&&U(w),w?C?.():x?.()},middleware:I,whileElementsMounted:r.ll,strategy:"fixed"}),N=(0,l.kp)(V),W=(0,l.s9)(V),{getReferenceProps:R,getFloatingProps:G}=(0,l.bv)([W,N]);return(0,n.jsxs)(n.Fragment,{children:[(0,c.cloneElement)(E,{ref:M.setReference,tabIndex:0,"aria-expanded":F,...R()}),F&&(0,n.jsx)(l.s3,{context:V,modal:!1,closeOnFocusOut:!1,children:(0,n.jsxs)("div",{"data-testid":"toggletip-content",className:(0,a.cx)(B.container,{[S.fitContent]:D}),ref:M.setFloating,style:L,...G(),children:[(0,n.jsx)(l.ie,{strokeWidth:.3,stroke:O.colors.border.weak,className:B.arrow,ref:T,context:V}),!!y&&(0,n.jsx)("div",{className:B.header,children:y}),d&&(0,n.jsx)("div",{className:B.headerClose,children:(0,n.jsx)(f.K,{"aria-label":(0,i.t)("grafana-ui.toggletip.close","Close"),name:"times","data-testid":"toggletip-header-close",onClick:()=>{U(!1),x?.()}})}),(0,n.jsxs)("div",{className:B.body,children:[(typeof m=="string"||(0,c.isValidElement)(m))&&m,typeof m=="function"&&m({})]}),!!b&&(0,n.jsx)("div",{className:B.footer,children:b})]})})]})});g.displayName="Toggletip";const u=E=>{const v=(0,h.f)(E,E.colors.background.primary,E.colors.border.weak,E.components.tooltip.text,{topBottom:2,rightLeft:2}),p=(0,h.f)(E,E.colors.error.main,E.colors.error.main,E.colors.error.contrastText,{topBottom:2,rightLeft:2});return{info:v,error:p,fitContent:(0,a.css)({maxWidth:"fit-content"})}}},59253:(ne,A,e)=>{"use strict";e.d(A,{Ap:()=>v,Bj:()=>o,CB:()=>c,Gd:()=>E,T_:()=>i,XP:()=>p,cu:()=>y,ij:()=>d,xZ:()=>m});var n=e(67458),a=e(68143),s=e(81871),l=e(95256),r=e(4476);async function c(b){const D=await h(b),C=!!D,[P,T,O,S]=await Promise.all([E(),f(b,C),g(b),u(b)]),B=P.find(U=>U.id===b),K=B?.dependencies||D?.json?.dependencies;return{grafanaDependency:K?.grafanaDependency??K?.grafanaVersion??"",pluginDependencies:K?.plugins||[],links:B?.info.links||D?.json?.info.links||[],readme:O||D?.readme,versions:T,statusContext:D?.statusContext??"",iam:D?.json?.iam,changelog:D?.changelog||S,licenseUrl:D?.licenseUrl,documentationUrl:D?.documentationUrl,sponsorshipUrl:D?.sponsorshipUrl,repositoryUrl:D?.repositoryUrl,raiseAnIssueUrl:D?.raiseAnIssueUrl,signatureType:B?.signatureType||(D?.signatureType!==""?D?.signatureType:void 0),signature:B?.signature,screenshots:D?.json?.info.screenshots||B?.info.screenshots}}async function i(){try{const{items:b}=await(0,a.AI)().get(`${l.P5}/plugins`,{includeDeprecated:!0});return b.filter(r.hY)}catch(b){if((0,a.NF)(b))return b.isHandled=!0,console.error("Failed to fetch plugins from catalog (default https://grafana.com/api/plugins)"),[];throw b}}async function o(){try{return await(0,a.AI)().get(`${l.Sw}/errors`)}catch{return[]}}async function h(b){try{return await(0,a.AI)().get(`${l.P5}/plugins/${b}`,{})}catch(D){(0,a.NF)(D)&&(D.isHandled=!0);return}}async function f(b,D){try{return D?((await(0,a.AI)().get(`${l.P5}/plugins/${b}/versions`)).items||[]).map(P=>({version:P.version,createdAt:P.createdAt,updatedAt:P.updatedAt,isCompatible:P.isCompatible,grafanaDependency:P.grafanaDependency,angularDetected:P.angularDetected})):[]}catch(C){return(0,a.NF)(C)&&(C.isHandled=!0),[]}}async function g(b){try{const D=await(0,a.AI)().get(`${l.Sw}/${b}/markdown/README`);return D?(0,n.G)(D):""}catch(D){return(0,a.NF)(D)&&(D.isHandled=!0),""}}async function u(b){try{const D=await(0,a.AI)().get(`${l.Sw}/${b}/markdown/CHANGELOG`);return D?(0,n.G)(D):""}catch(D){return(0,a.NF)(D)&&(D.isHandled=!0),""}}async function E(){return(await(0,a.AI)().get(`${l.Sw}`,(0,s.F)({embedded:0}))).filter(r.Sq)}async function v(){const{items:b}=await(0,a.AI)().get(`${l.Mi}/plugins`);return b}async function p(){const{items:b}=await(0,a.AI)().get(`${l.Mi}/provisioned-plugins`);return b.map(D=>({slug:D.type}))}async function m(b,D){return await(0,a.AI)().post(`${l.Sw}/${b}/install`,{version:D},{showErrorAlert:!1})}async function y(b){return await(0,a.AI)().post(`${l.Sw}/${b}/uninstall`)}async function d(b,D){return(await(0,a.AI)().datasourceRequest({url:`/api/plugins/${b}/settings`,method:"POST",data:D}))?.data}const x={getRemotePlugins:i,getInstalledPlugins:E,installPlugin:m,uninstallPlugin:y}},59258:(ne,A,e)=>{"use strict";e.d(A,{H:()=>c,T:()=>a});var n=e(63267),a=(i=>(i.Word="Word",i.Prefix="Prefix",i.Fuzzy="Fuzzy",i))(a||{});const c={Word:(i,o)=>i.filter(h=>(h.filterText||h.label).includes(o)),Prefix:(i,o)=>i.filter(h=>(h.filterText||h.label).startsWith(o)),Fuzzy:(i,o)=>(o=o.toLowerCase(),i.filter(h=>{const{distance:f,ranges:g,found:u}=(0,n.I)(h.label.toLowerCase(),o);return u?(h.sortValue=f,h.highlightParts=g,!0):!1}))}},59310:(ne,A,e)=>{"use strict";e.d(A,{U:()=>b});var n=e(74848),a=e(2543),s=e(96540),l=e(62717),r=e(92745),c=e(18857),i=e(22803),o=e(63142);const h=S=>{const{children:B,label:K}=S,U=(0,o.of)(f);return K?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:U.header,children:(0,n.jsx)("span",{className:U.label,children:K})}),B]}):(0,n.jsx)("div",{children:B})},f=S=>({header:(0,i.css)({padding:"7px 10px",width:"100%",borderTop:`1px solid ${S.colors.border.weak}`,textTransform:"capitalize"}),label:(0,i.css)({fontSize:S.typography.size.sm,color:S.colors.text.secondary,fontWeight:S.typography.fontWeightMedium})});var g=e(44229),u=e(51898),E=e(30703),v=e(34788),p=e(27228);const m="tz-utc-offset",y=S=>{const{children:B,innerProps:K,innerRef:U,data:F,isSelected:I,isFocused:V}=S,M=(0,o.of)(x),L=Date.now(),N=(0,i.cx)(M.container,V&&M.containerFocused);if(!(0,a.isString)(F.value))return null;const W=(0,l.QZ)(F.value,L);return(0,n.jsx)("div",{className:N,...K,ref:U,"data-testid":u.Tp.components.Select.option,children:(0,n.jsxs)("div",{className:(0,i.cx)(M.leftColumn,M.row),children:[(0,n.jsxs)("div",{className:(0,i.cx)(M.leftColumn,M.wideRow),children:[(0,n.jsx)(p.U,{title:B}),(0,n.jsx)("div",{className:M.spacer}),(0,n.jsx)(v.E,{info:W})]}),(0,n.jsxs)("div",{className:M.rightColumn,children:[(0,n.jsx)(g.X,{timeZone:W?.ianaName||F.value,timestamp:L,className:m}),I&&(0,n.jsx)("span",{children:(0,n.jsx)(E.I,{name:"check"})})]})]})})},d=S=>{const{children:B,innerProps:K,innerRef:U,data:F,isSelected:I,isFocused:V}=S,M=(0,o.of)(x),L=Date.now(),N=(0,i.cx)(M.container,V&&M.containerFocused);if(!(0,a.isString)(F.value))return null;const W=(0,l.QZ)(F.value,L);return(0,n.jsx)("div",{className:N,...K,ref:U,"data-testid":u.Tp.components.Select.option,children:(0,n.jsxs)("div",{className:M.body,children:[(0,n.jsxs)("div",{className:M.row,children:[(0,n.jsx)("div",{className:M.leftColumn,children:(0,n.jsx)(p.U,{title:B})}),(0,n.jsx)("div",{className:M.rightColumn,children:I&&(0,n.jsx)("span",{children:(0,n.jsx)(E.I,{name:"check"})})})]}),(0,n.jsxs)("div",{className:M.row,children:[(0,n.jsx)("div",{className:M.leftColumn,children:(0,n.jsx)(v.E,{info:W})}),(0,n.jsx)("div",{className:M.rightColumn,children:(0,n.jsx)(g.X,{timestamp:L,timeZone:W?.ianaName||F.value,className:m})})]})]})})},x=S=>({container:(0,i.css)({display:"flex",alignItems:"center",flexDirection:"row",flexShrink:0,whiteSpace:"nowrap",cursor:"pointer",padding:"6px 8px 4px","&:hover":{background:S.colors.action.hover}}),containerFocused:(0,i.css)({background:S.colors.action.hover}),body:(0,i.css)({display:"flex",fontWeight:S.typography.fontWeightMedium,flexDirection:"column",flexGrow:1}),row:(0,i.css)({display:"flex",flexDirection:"row"}),leftColumn:(0,i.css)({flexGrow:1,textOverflow:"ellipsis"}),rightColumn:(0,i.css)({justifyContent:"flex-end",alignItems:"center"}),wideRow:(0,i.css)({display:"flex",flexDirection:"row",alignItems:"baseline"}),spacer:(0,i.css)({marginLeft:"6px"})}),b=S=>{const{onChange:B,width:K,autoFocus:U=!1,onBlur:F,value:I,includeInternal:V=!1,disabled:M=!1,inputId:L,menuShouldPortal:N=!0,openMenuOnFocus:W=!0}=S,R=D(V),G=C(R,I),w=T(),_=K&&K<=45?d:y,Q=(0,s.useCallback)(ae=>{if(!ae||!(0,a.isString)(ae.value))return B(I);B(ae.value)},[B,I]);return(0,n.jsx)(c.l6,{inputId:L,value:G,placeholder:(0,r.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:U,menuShouldPortal:N,openMenuOnFocus:W,width:K,filterOption:w,options:R,onChange:Q,onBlur:F,components:{Option:_,Group:h},disabled:M,"aria-label":(0,r.t)("time-picker.zone.select-aria-label","Time zone picker")})},D=S=>{const B=Date.now();return(0,s.useMemo)(()=>(0,l.U3)(S).map(U=>{const F=U.zones.reduce((I,V)=>{const M=(0,l.QZ)(V,B);if(!M)return I;const L=M.name.replace(/_/g," ");return I.push({label:L,value:M.zone,searchIndex:O(L,M,B)}),I},[]);return{label:U.name,options:F}}),[S,B])},C=(S,B)=>(0,s.useMemo)(()=>{if(B===void 0)return;const K=(0,a.toLower)(B);return S.find(F=>F.label?K.startsWith((0,a.toLower)(F.label)):P(K))?.options.find(F=>(0,a.isEmpty)(K)?F.value===l.g$.default:(0,a.toLower)(F.value)===K)},[S,B]),P=S=>{switch(S){case l.g$.default:case l.g$.localBrowserTime:case l.g$.utc:return!0;default:return!1}},T=()=>(0,s.useCallback)((S,B)=>!B||!S.data||!S.data.searchIndex?!0:S.data.searchIndex.indexOf((0,a.toLower)(B))>-1,[]),O=(S,B,K)=>{const U=[(0,a.toLower)(B.zone),(0,a.toLower)(B.abbreviation),(0,a.toLower)((0,g.t)(K,B.zone))];S!==B.zone&&U.push((0,a.toLower)(S));for(const F of B.countries)U.push((0,a.toLower)(F.name)),U.push((0,a.toLower)(F.code));return U.join("|")}},59373:(ne,A,e)=>{"use strict";e.d(A,{w:()=>J});var n=e(2543),a=e(37615),s=e(78282),l=e(2863),r=e(45863),c=e(739),i=e(13241),o=e(54742),h=e(8921),f=e(67933),g=e(93612),u=e(99305);let E={};function v(Z){const te=E[Z];return te||(E[Z]=(0,n.property)(Z))}class p{constructor(te,se,ie){this.state={name:te.name,value:se,text:ie,type:te.type}}getValue(te){let{value:se}=this.state;return se==="string"||se==="number"||se==="boolean"?se:String(se)}getValueText(){const{value:te,text:se}=this.state;return typeof se=="string"?te===h.To?h.Zm:se:Array.isArray(se)?se.join(" + "):(console.log("value",se),String(se))}}let m;function y(Z,te,se){return m?(m.state.name=Z.name,m.state.type=Z.type,m.state.value=te,m.state.text=se):m=new p(Z,te,se),m}function d(Z,te,se,ie){if(se=se||{},Z==null||(0,f.EW)(se)&&te!==c.$m.QueryParam)return"";if(!Array.isArray(Z)&&typeof Z=="object"&&(Z=`${Z}`),typeof te=="function")return te(Z,se,d);te||(te=c.$m.Glob);let ce=te.split(":");ce.length>1?(te=ce[0],ce=ce.slice(1)):ce=[];let re=r.vz.getIfExists(te);re||(console.error(`Variable format ${te} not found. Using glob format as fallback.`),re=r.vz.get(c.$m.Glob));const ue=y(se,Z,ie??Z);return re.formatter(Z,ce,ue)}var x=e(84743),b=e.n(x),D=e(38036),C=e(5556),P=e(60188),T=e(75421),O=e(66223),S=e(55386),B=e(95004),K=e(7102),U=e(11576),F=e(16515),I=e(71642);function V(Z,te,se){return new Proxy({},{get:(ie,ce)=>{if(ce==="name")return Z.name;if(ce==="displayName")return(0,F.Ct)(Z,te,se);if(ce==="labels"||ce==="formattedLabels")return Z.labels?{...Z.labels,__values:Object.values(Z.labels).sort().join(", "),toString:()=>(0,I.h6)(Z.labels,"",!0)}:""}})}function M(Z,te,se,ie){const ce=L(Z,te,se);return d(ce,ie)}function L(Z,te,se){const ie=se?.__dataContext;if(!ie)return Z;const{frame:ce,rowIndex:re,field:ue,calculatedValue:X}=ie.value;if(X)switch(te){case"numeric":return X.numeric.toString();case"raw":return X.numeric;case"time":return"";case"text":default:return(0,S.cN)(X)}if(re===void 0)return Z;if(te==="time"){const Ce=ce.fields.find(Ae=>Ae.type===B.PU.time);return Ce?Ce.values[re]:void 0}const le=ue.values[re];if(te==="raw")return le;const fe=(ue.display??R())(le);switch(te){case"numeric":return fe.numeric;case"text":return fe.text;default:return(0,S.cN)(fe)}}function N(Z,te,se,ie){const ce=se?.__dataContext;if(!ce||!te)return Z;const{frame:re,rowIndex:ue}=ce.value;if(ue===void 0||te===void 0)return Z;const X={name:re.name,refId:re.refId,fields:(0,K.F)({frame:re,rowIndex:ue})},le=v(te)(X)??"";return d(le,ie)}let W;function R(){return W||(W=(0,U.J)()),W}function G(Z,te,se,ie){const ce=se?.__dataContext;if(!ce||te!=="name")return Z;const{frame:re,frameIndex:ue}=ce.value,X=(0,F.Ri)(re,ue);return d(X,ie)}function w(Z,te,se,ie){const ce=se?.__dataContext;if(!ce||te===void 0||te==="")return Z;const{frame:re,field:ue,data:X}=ce.value,le=V(ue,re,X),he=v(te)(le)??"";return d(he,ie)}const _={__value:M,__data:N,__series:G,__field:w,[D.c.includeVars]:Q,[D.c.keepTime]:ae,__timezone:q};function Q(Z,te,se){const ie=(0,O.z)(se);return C.kM.toUrlParams(ie)}function ae(){return C.kM.toUrlParams((0,T.jG)().timeRangeForUrl())}function q(){const Z=(0,P.O)({timeZone:(0,T.jG)().timeModel?.getTimezone()});return Z==="browser"?b().tz.guess():Z}const k={getFilteredVariables:g.bZ,getVariables:g.UN,getVariableWithName:g._2};class ee{constructor(te=k){this.dependencies=te,this.regex=u.SY,this.index={},this.grafanaVariables=new Map,this._timeRange=null,this._adhocFiltersDeprecationWarningLogged=new Map,this._variables=[]}init(te,se){this._variables=te,this._timeRange=se,this.updateIndex()}get variables(){return(0,a.l)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return window.__grafanaSceneContext?(0,i.E)(window.__grafanaSceneContext):this.dependencies.getVariables()}get timeRange(){return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?r.jh.getTimeRange(window.__grafanaSceneContext).state.value:this._timeRange}updateIndex(){const te=se=>se||se==="";if(this.index=this._variables.reduce((se,ie)=>(ie.current&&(ie.current.isNone||te(ie.current.value))&&(se[ie.name]=ie),se),{}),this.timeRange){const se=this.timeRange.from.valueOf().toString(),ie=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:se,text:se}},__to:{current:{value:ie,text:ie}}}}}updateTimeRange(te){this._timeRange=te,this.updateIndex()}variableInitialized(te){this.index[te.name]=te}getAdhocFilters(te,se){let ie=[],ce=(0,s.l)().getInstanceSettings(te);if(!ce)return[];!se&&!this._adhocFiltersDeprecationWarningLogged.get(ce.type)&&((0,a.l)(`DataSource ${ce.type}`,"templateSrv.getAdhocFilters","filters property on the request (DataQueryRequest). Or if this is called from interpolateVariablesInQueries or applyTemplateVariables it is passed as a new argument"),this._adhocFiltersDeprecationWarningLogged.set(ce.type,!0));for(const re of this.getAdHocVariables()){const ue=re.datasource?.uid;(ue===ce.uid||ue?.indexOf("$")===0&&this.replace(ue)===ce.uid)&&(ie=ie.concat(re.filters))}return ie}setGrafanaVariable(te,se){this.grafanaVariables.set(te,se)}setGlobalVariable(te,se){(0,a.l)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[te]:{current:se}}}getVariableName(te){this.regex.lastIndex=0;const se=this.regex.exec(te);return se?se.slice(1).find(ce=>ce!==void 0):null}containsTemplate(te){if(!te)return!1;if(window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive)return this.regex.lastIndex=0,!!this.regex.exec(te);const se=this.getVariableName(te),ie=se&&this.getVariableAtIndex(se);return ie!=null}variableExists(te){return(0,a.l)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(te)}highlightVariablesAsHtml(te){return!te||!(0,n.isString)(te)?te:(te=(0,n.escape)(te),this._replaceWithVariableRegex(te,void 0,(se,ie)=>this.getVariableAtIndex(ie)?'<span class="template-variable">'+se+"</span>":se))}getAllValue(te){if(te.allValue)return te.allValue;const se=[];for(let ie=1;ie<te.options.length;ie++)se.push(te.options[ie].value);return se}getVariableValue(te,se){return se?v(se)(te.value):te.value}getVariableText(te,se){return te.value===se||typeof se!="string"?te.text:se}replace(te,se,ie,ce){if(se&&se.__sceneObject){const re=se.__sceneObject.value.valueOf();return r.jh.interpolate(re,te,se,ie,ce)}return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?r.jh.interpolate(window.__grafanaSceneContext,te,se,ie,ce):te?(this.regex.lastIndex=0,this._replaceWithVariableRegex(te,ie,(re,ue,X,le)=>{const he=this._evaluateVariableExpression(re,ue,X,le,se);return ce&&ce.push({match:re,variableName:ue,fieldPath:X,format:le,value:he,found:he!==re}),he})):te??""}_evaluateVariableExpression(te,se,ie,ce,re){const ue=this.getVariableAtIndex(se),X=re?.[se];if(X){const Ce=this.getVariableValue(X,ie),Ae=this.getVariableText(X,Ce);if(Ce!=null)return d(Ce,ce,ue,Ae)}if(!ue){const Ce=_[se];return Ce?Ce(te,ie,re,ce):te}if(ce===c.$m.QueryParam||(0,f.EW)(ue)){const Ce=o.B.get(ue.type).getValueForUrl(ue),Ae=(0,f.EW)(ue)?ue.id:ue.current.text;return d(Ce,ce,ue,Ae)}const le=this.grafanaVariables.get(ue.current.value);if(le)return d(le,ce,ue);let he=ue.current.value,fe=ue.current.text;if(this.isAllValue(he)&&(he=this.getAllValue(ue),fe=h.Zm,ue.allValue&&ce!==c.$m.Text&&ce!==c.$m.PercentEncode))return this.replace(he);if(ie){const Ce=this.getVariableValue({value:he,text:fe},ie);if(Ce!=null)return d(Ce,ce,ue,fe)}return d(he,ce,ue,fe)}_replaceWithVariableRegex(te,se,ie){return this.regex.lastIndex=0,te.replace(this.regex,(ce,re,ue,X,le,he,fe)=>ie(ce,re||ue||le,he,X||fe||se))}isAllValue(te){return te===h.To||Array.isArray(te)&&te[0]===h.To}replaceWithText(te,se){return(0,a.l)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(te,se,"text")}getVariableAtIndex(te){if(te)return this.index[te]?this.index[te]:this.dependencies.getVariableWithName(te)}getAdHocVariables(){return this.dependencies.getFilteredVariables(f.EW)}}const j=new ee;(0,l.d)(j);const J=()=>j},59427:(ne,A,e)=>{"use strict";e.d(A,{UI:()=>d,gG:()=>x,Wb:()=>u,eO:()=>E,sB:()=>b,B_:()=>m,b5:()=>p,XV:()=>v,wv:()=>y});var n=e(16515),a=e(46644),s=e(43173),l=e(54825),r=e(739);function c(D,C){return i(d(D,C.field),C)}function i(D,C){if((C.mode??r.TL.Fixed)===r.TL.Fixed||!D){const O=C.fixed??r.ok.Forward;return{isAssumed:!!C.field?.length||!C.fixed,fixed:O,value:()=>O,get:()=>O}}const T=O=>{if(O==null)return r.ok.Forward;const S=Number(O);return isNaN(S)||S>0?r.ok.Forward:S<0?r.ok.Reverse:r.ok.None};return{field:D,get:O=>T(D.values[O]),value:()=>T(b(D))}}var o=e(20012),h=e(57444),f=e(88011),g=e(28807);function u(D,C){if(D?.series&&C.field)for(const P of D.series){const T=(0,l.K)(P,C,s.$.theme2);if(!T.isAssumed||D.series.length===1)return T}return(0,l.K)(void 0,C,s.$.theme2)}function E(D,C){if(D?.series&&C.field)for(const P of D.series){const T=c(P,C);if(!T.isAssumed||D.series.length===1)return T}return c(void 0,C)}function v(D,C){if(D?.series&&C.field)for(const P of D.series){const T=(0,f.hX)(P,C);if(!T.isAssumed||D.series.length===1)return T}return(0,f.hX)(void 0,C)}function p(D,C){if(D?.series&&C.field)for(const P of D.series){const T=(0,h.H)(P,C);if(!T.isAssumed||D.series.length===1)return T}return(0,h.H)(void 0,C)}function m(D,C){if(D?.series&&C.field)for(const P of D.series){const T=(0,o.$)(P,C);if(!T.isAssumed||D.series.length===1)return T}return(0,o.$)(void 0,C)}function y(D,C){if(D?.series&&C.field)for(const P of D.series){const T=(0,g.E)(P,C);if(!T.isAssumed||D.series.length===1)return T}return(0,g.E)(void 0,C)}function d(D,C){const P=x(C,D);return P==null?void 0:D.fields[P]}function x(D,C,P){if(!(!C||!D?.length))for(let T=0;T<C.fields.length;T++){const O=C.fields[T];if(D===O.name)return T;const S=(0,n.Ct)(O,C,P);if(D===S)return T}}function b(D){const C=D.state?.calcs;if(C){const O=C[a.gy.lastNotNull];if(O!=null)return O}const P=D.values;let T=P.length-1;for(;T>=0;){const O=P[T--];if(O!=null)return O}}},59490:(ne,A,e)=>{"use strict";e.d(A,{U:()=>n});function n({handler:a}){return{onKeyDown(s,l,r){return a&&s.key==="Enter"&&(s.shiftKey||s.ctrlKey)?(s.preventDefault(),a(s),l):r()}}}},59692:(ne,A,e)=>{"use strict";e.d(A,{k:()=>a});var n=e(22803);function a(l,r){const c=l.colors.border.weak,i=l.colors.primary.border,o=6,h=s(l,r,o),f=h+2,g=28,u=(E,v,p,m,y,d,x,b,D)=>(0,n.css)({label:m?"cellContainerOverflow":"cellContainerNoOverflow",padding:`${o}px`,width:"100%",height:D?"auto !important":`${f-1}px`,wordBreak:x?"break-all":"inherit",display:"flex",...y?{overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap"}:{},alignItems:"center",borderRight:`1px solid ${c}`,color:b?"inherit":E??void 0,background:b?void 0:v??void 0,backgroundClip:"padding-box","&:last-child:not(:only-child)":{borderRight:"none"},"&:hover":{overflow:m&&!x?"visible":void 0,width:d||!m?"auto":"auto !important",height:(d||m)&&!x?"auto !important":`${f-1}px`,minHeight:`${f-1}px`,wordBreak:d?"break-word":void 0,whiteSpace:d&&m?"normal":"nowrap",boxShadow:m?`0 0 2px ${l.colors.primary.main}`:void 0,background:b?"inherit":p??l.colors.background.primary,zIndex:1,".cellActions":{background:l.components.tooltip.background,color:l.components.tooltip.text,visibility:"visible",opacity:1,width:"auto",borderRadius:l.shape.radius.default}},a:{color:"inherit"},".cellActions":{display:"flex",position:m?void 0:"absolute",top:m?void 0:"1px",right:m?void 0:0,margin:m?l.spacing(0,0,0,1):"auto",visibility:"hidden",opacity:0,width:0,alignItems:"center",height:"100%",padding:l.spacing(.5,0,.5,.5),background:l.components.tooltip.background,color:l.components.tooltip.text},".cellActionsLeft":{right:"auto !important",left:0}});return{theme:l,cellHeight:h,buildCellContainerStyle:u,cellPadding:o,cellHeightInner:h-o*2,rowHeight:f,table:(0,n.css)({height:"100%",width:"100%",overflow:"auto",display:"flex",flexDirection:"column"}),thead:(0,n.css)({label:"thead",height:`${g}px`,overflowY:"auto",overflowX:"hidden",position:"relative"}),tfoot:(0,n.css)({label:"tfoot",height:`${g}px`,borderTop:`1px solid ${c}`,overflowY:"auto",overflowX:"hidden",position:"relative"}),headerRow:(0,n.css)({label:"row",borderBottom:`1px solid ${c}`}),headerCell:(0,n.css)({height:"100%",padding:`0 ${o}px`,overflow:"hidden",whiteSpace:"nowrap",display:"flex",alignItems:"center",fontWeight:l.typography.fontWeightMedium,"&:last-child":{borderRight:"none"}}),headerCellLabel:(0,n.css)({border:"none",padding:0,background:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:l.typography.fontWeightMedium,display:"flex",alignItems:"center",marginRight:l.spacing(.5),"&:hover":{textDecoration:"underline",color:l.colors.text.link}}),cellContainerText:u(void 0,void 0,void 0,!0,!0),cellContainerTextNoOverflow:u(void 0,void 0,void 0,!1,!0),cellContainer:u(void 0,void 0,void 0,!0,!1),cellContainerNoOverflow:u(void 0,void 0,void 0,!1,!1),cellText:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",cursor:"text"}),sortIcon:(0,n.css)({marginLeft:l.spacing(.5)}),cellLink:(0,n.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",color:`${l.colors.text.link} !important`,fontWeight:l.typography.fontWeightMedium,paddingRight:l.spacing(1.5),"&:hover":{textDecoration:"underline",color:l.colors.text.link}}),cellLinkEmpty:(0,n.css)({overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:l.typography.fontWeightMedium,paddingRight:l.spacing(1.5)}),cellLinkForColoredCell:(0,n.css)({cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",userSelect:"text",whiteSpace:"nowrap",fontWeight:l.typography.fontWeightMedium,textDecoration:"underline"}),imageCellLink:(0,n.css)({cursor:"pointer",overflow:"hidden",height:"100%"}),headerFilter:(0,n.css)({background:"transparent",border:"none",label:"headerFilter",padding:0}),paginationWrapper:(0,n.css)({display:"flex",height:`${h}px`,justifyContent:"center",alignItems:"center",width:"100%",li:{marginBottom:0}}),paginationSummary:(0,n.css)({color:l.colors.text.secondary,fontSize:l.typography.bodySmall.fontSize,display:"flex",justifyContent:"flex-end",padding:l.spacing(0,1,0,2)}),tableContentWrapper:E=>{const v=E!==void 0?`${E}px`:"100%";return(0,n.css)({label:"tableContentWrapper",width:v,display:"flex",flexDirection:"column"})},row:(0,n.css)({label:"row",borderBottom:`1px solid ${c}`,"&:hover":{backgroundColor:l.components.table.rowHoverBackground},"&:last-child":{borderBottom:0}}),imageCell:(0,n.css)({height:"100%"}),resizeHandle:(0,n.css)({label:"resizeHandle",cursor:"col-resize !important",display:"inline-block",background:i,opacity:0,[l.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.2s ease-in-out"},width:"8px",height:"100%",position:"absolute",right:"-4px",borderRadius:l.shape.radius.default,top:0,touchAction:"none","&:hover":{opacity:1}}),typeIcon:(0,n.css)({marginRight:l.spacing(1),color:l.colors.text.secondary}),noData:(0,n.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"}),expanderCell:(0,n.css)({display:"flex",flexDirection:"column",justifyContent:"center",height:`${f}px`,cursor:"pointer"})}}function s(l,r,c){const i=l.typography.fontSize,o=l.typography.body.lineHeight;switch(r){case"md":return 42;case"lg":return 48;case"sm":default:return c*2+i*o}}},59695:(ne,A,e)=>{"use strict";e.d(A,{i:()=>i});var n=e(74848),a=e(96540),s=e(51898),l=e(63142),r=e(45861),c=e(18857);function i({"aria-label":o,label:h,icon:f,options:g,onChange:u,variant:E,minWidth:v=16,size:p="sm",isFullWidth:m=!0,menuPlacement:y,fill:d,buttonCss:x}){const[b,D]=(0,a.useState)(!1),C=(0,l.$j)();return(0,n.jsxs)(n.Fragment,{children:[!b&&(0,n.jsx)(r.$n,{size:p||"sm",className:x,icon:f||"plus",onClick:()=>D(!0),variant:E,fill:d,fullWidth:m,"data-testid":s.Tp.components.ValuePicker.button(o??h),children:h}),b&&(0,n.jsx)("span",{style:{minWidth:C.spacing(v),flexGrow:m?1:void 0},children:(0,n.jsx)(c.l6,{placeholder:h,options:g,"aria-label":s.Tp.components.ValuePicker.select(o??h),isOpen:!0,onCloseMenu:()=>D(!1),autoFocus:!0,onChange:P=>{D(!1),u(P)},menuPlacement:y})})]})}},59740:(ne,A,e)=>{"use strict";e.d(A,{K:()=>s});var n=e(739);const a="12.2.1",s={cellHeight:n.qM.Sm,frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]}},59795:(ne,A,e)=>{"use strict";e.d(A,{I1:()=>x,_$:()=>p,gl:()=>u});var n=e(2543),a=e.n(n),s=e(36394),l=e(60519),r=e(35987),c=e(46644),i=e(64394),o=e(33553),h=e(38919),f=e(739);const g=["reduceOptions","orientation"];function u(C,P,T){let O=C.options;if(C.fieldConfig=C.fieldConfig||{defaults:{},overrides:[]},P==="singlestat"&&T.angular)return v(C,T);if(P==="graph")return E(C,T);for(const S of g)T.hasOwnProperty(S)&&(O[S]=(0,n.cloneDeep)(T[S]));return O}function E(C,P){const T=P.angular,O={orientation:h.wV.Auto,reduceOptions:{values:!1,calcs:[]},legend:{displayMode:f.lm.List,showLegend:!0,placement:"bottom",calcs:[]}};if(T.xaxis?.mode==="series"){C.fieldConfig={...C.fieldConfig,defaults:{...C.fieldConfig.defaults,color:{mode:"palette-classic"}}},T.xaxis.values&&(O.reduceOptions.calcs=D(T.xaxis.values));const S=T.legend;if(S){if(S.show?O.legend.displayMode=S.alignAsTable?f.lm.Table:f.lm.List:O.legend.showLegend=!1,S.rightSide&&(O.legend.placement="right"),S.values){const B=(0,n.pickBy)(S,n.identity);O.legend.calcs=b(B)}S.sideWidth&&(O.legend.width=S.sideWidth)}}return O}function v(C,P){const T=P.angular,O=c.AS.getIfExists(T.valueName),S={reduceOptions:{calcs:[O?O.id:c.gy.mean]},orientation:h.wV.Horizontal},B={};if(T.format&&(B.unit=T.format),T.tableColumn&&(S.reduceOptions.fields=`/^${T.tableColumn}$/`),T.nullPointMode&&(B.nullValueMode=T.nullPointMode),T.nullText&&(B.noValue=T.nullText),(T.decimals||T.decimals===0)&&(B.decimals=T.decimals),T.thresholds&&T.colors){const U=T.thresholds.split(",").map(I=>Number(I.trim())),F=[];for(const I of T.colors){const V=F.length-1;V>=0?F.push({value:U[V],color:I}):F.push({value:-1/0,color:I})}B.thresholds={mode:o.O.Absolute,steps:F}}const K=(0,r.bh)(T,B.thresholds);return K&&K.length&&(B.mappings=K),T.gauge&&T.gauge.show&&(B.min=T.gauge.minValue,B.max=T.gauge.maxValue),C.fieldConfig.defaults=B,S}function p(C){if(!C.options)return{reduceOptions:{calcs:[c.gy.mean]},orientation:h.wV.Horizontal};const P=parseFloat(C.pluginVersion||"6.1");let T=C.options;P<6.2&&(T=y(T)),P<6.3&&(T=m(T));const{fieldOptions:O}=T;if(P<6.6&&O){if(O&&O.override){const{override:K,...U}=T.fieldOptions;T={...T,fieldOptions:{...U,overrides:[]}}}let S=O?.defaults?.thresholds;S?delete O.defaults.thresholds:(S=O?.thresholds,delete O.thresholds),S&&(O.defaults.thresholds={mode:o.O.Absolute,steps:S});const{defaults:B}=O;B.color&&typeof B.color=="string"&&(B.color={mode:i.Y.Fixed,fixedColor:B.color}),(0,l.BF)(B)}if(P<7&&(C.fieldConfig=C.fieldConfig||{defaults:{},overrides:[]},C.fieldConfig={defaults:O&&O.defaults?{...C.fieldConfig.defaults,...O.defaults}:C.fieldConfig.defaults,overrides:O&&O.overrides?[...C.fieldConfig.overrides,...O.overrides]:C.fieldConfig.overrides},O&&(T.reduceOptions={values:O.values,limit:O.limit,calcs:O.calcs}),delete T.fieldOptions),P<7.1){const S=C.fieldConfig.defaults.title;S!=null&&(C.fieldConfig.defaults.displayName=S,delete C.fieldConfig.defaults.title)}if(P<8){const S=C.fieldConfig?.defaults;let B=S?.unit;B==="percent"?((0,n.isNumber)(S.min)||(S.min=0),(0,n.isNumber)(S.max)||(S.max=100)):B==="percentunit"&&((0,n.isNumber)(S.min)||(S.min=0),(0,n.isNumber)(S.max)||(S.max=1))}return T}function m(C){const{fieldOptions:P}=C;if(!P)return C;const{mappings:T,...O}=C.fieldOptions;let S;return C.thresholds&&(S={mode:o.O.Absolute,steps:d(C.thresholds)}),{...C,fieldOptions:{...O,defaults:{...P.defaults,mappings:T,thresholds:S}}}}function y(C){const{valueOptions:P}=C;if(!P)return C;const T={},O={};if(T.mappings=C.valueMappings,T.thresholds=C.thresholds,T.defaults=O,O.unit=P.unit,O.decimals=P.decimals,P.stat){const B=c.AS.get(P.stat);B&&(T.calcs=[B.id])}O.min=C.minValue,O.max=C.maxValue;const S={...C,fieldOptions:T};return(0,n.omit)(S,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function d(C){if(!C||!C.length)return;const P=C.map(T=>({value:T.value===null?-1/0:T.value,color:T.color}));return(0,s.RU)(P),P[0].value=-1/0,P}function x(C){return(0,r.bh)(C)}function b(C){const P=[];for(const T in C){const O=c.AS.getIfExists(T);O&&P.push(O.id)}return P}function D(C){const P=[];return C?.forEach(T=>{Object.values(c.gy).includes(T)?P.push(T):T==="current"?P.push(c.gy.lastNotNull):T==="total"?P.push(c.gy.sum):T==="avg"&&P.push(c.gy.mean)}),C?P:[c.gy.sum]}},59857:(ne,A,e)=>{"use strict";e.d(A,{Ye:()=>s,lt:()=>r,rw:()=>l,zL:()=>a});var n=e(21275),a=(E=>(E[E.dontHide=0]="dontHide",E[E.hideLabel=1]="hideLabel",E[E.hideVariable=2]="hideVariable",E[E.inControlsMenu=3]="inControlsMenu",E))(a||{});const s=n.Ye,l={...n.rw},r=n.lt,c=n.OA,i=n.GW,o=n.QB,h=n.bt,f=n.ss,g=n.bf,u=n.aD},60017:(ne,A,e)=>{"use strict";e.d(A,{j:()=>a,z:()=>s});var n=e(78731);function a(l){if(!(!performance||!performance.mark))try{performance.mark(`${l}_started`)}catch(r){console.error(`[Metrics] Failed to startMeasure ${l}`,r)}}function s(l){if(!(!performance||!performance.mark))try{const r=`${l}_started`,c=`${l}_completed`,i=`${l}_measured`;performance.mark(c);const o=performance.measure(i,r,c);return(0,n.n)(`${l}_ms`,o.duration),performance.clearMarks(r),performance.clearMarks(c),performance.clearMeasures(i),o}catch(r){console.error(`[Metrics] Failed to stopMeasure ${l}`,r);return}}},60171:(ne,A,e)=>{"use strict";e.d(A,{GV:()=>l,HG:()=>o,QX:()=>E,Y:()=>s,_5:()=>i,aK:()=>c,b_:()=>r,cR:()=>f,mi:()=>g,rL:()=>h});var n=e(43173),a=e(36490);function s(v){return v==="v2alpha1"||v==="v2beta1"}function l(v){const p=n.$.featureToggles.dashboardScene,m=n.$.featureToggles.kubernetesDashboards,y=a.Ny.getSearch().get("scenes")==="false";if(!p||y){if(v==="v2")throw new Error("v2 is not supported for legacy architecture");return m?"v1":"legacy"}if(m)return v==="v1"?"v1":v==="v2"?"v2":"unified";if(v==="v2")throw new Error("v2 is not supported if kubernetes dashboards are disabled");return"legacy"}function r(v){return v?"kind"in v&&v.kind==="DashboardWithAccessInfo":!1}function c(v){return"elements"in v}function i(v){return!c(v)}function o(v){return r(v)&&c(v.spec)}function h(v){return!c(v.dashboard)}function f(v){return!c(v)}function g(v){return c(v.dashboard)}function u(v){return v.status?.conversion?.failed?v.status.conversion.storedVersion:void 0}function E(v,p){const m=u(v);return!!m&&m.startsWith(p)}},60208:(ne,A,e)=>{"use strict";e.d(A,{o:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(51898),r=e(63142),c=e(35484),i=e(45861),o=e(30703),h=e(45967),f=e(72489);const g=s.forwardRef(({label:E,active:v,icon:p,onChangeTab:m,counter:y,suffix:d,className:x,href:b,truncate:D,tooltip:C,disabled:P,...T},O)=>{const S=(0,r.of)(u),B=(0,r.of)(i.my),K=()=>(0,n.jsxs)(n.Fragment,{children:[p&&(0,n.jsx)(o.I,{name:p,"data-testid":`tab-icon-${p}`}),E,typeof y=="number"&&(0,n.jsx)(f.p,{value:y}),d&&(0,n.jsx)(d,{className:S.suffix})]}),F={className:(0,a.cx)(B,S.link,v?S.activeStyle:S.notActive,D&&S.linkTruncate,P&&S.disabled),"data-testid":l.Tp.components.Tab.title(E),...T,onClick:P?void 0:m,role:"tab","aria-selected":v,"aria-disabled":P,tabIndex:P?-1:void 0,title:C?void 0:T.title};let I=null;return b?I=(0,n.jsx)("div",{className:(0,a.cx)(S.item,D&&S.itemTruncate,x),children:(0,n.jsx)("a",{...F,href:P?void 0:b,ref:O,children:K()})}):I=(0,n.jsx)("div",{className:(0,a.cx)(S.item,D&&S.itemTruncate,x),children:(0,n.jsx)("button",{...F,type:"button",ref:O,children:K()})}),C?(0,n.jsx)(h.m,{content:C,children:I}):I});g.displayName="Tab";const u=E=>({item:(0,a.css)({listStyle:"none",position:"relative",display:"flex",whiteSpace:"nowrap",padding:E.spacing(0,.5)}),itemTruncate:(0,a.css)({maxWidth:E.spacing(40)}),link:(0,a.css)({color:E.colors.text.secondary,padding:E.spacing(1,1.5,1),borderRadius:E.shape.radius.default,display:"block",height:"100%",svg:{marginRight:E.spacing(1)},"&:focus-visible":(0,c.getFocusStyles)(E),"&::before":{display:"block",content:'" "',position:"absolute",left:0,right:0,height:"2px",borderRadius:E.shape.radius.default,bottom:0}}),linkTruncate:(0,a.css)({textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"break-word",overflow:"hidden"}),notActive:(0,a.css)({"a:hover, &:hover, &:focus":{color:E.colors.text.primary,"&::before":{backgroundColor:E.colors.action.hover}}}),activeStyle:(0,a.css)({label:"activeTabStyle",color:E.colors.text.primary,overflow:"hidden","&::before":{backgroundImage:E.colors.gradients.brandHorizontal}}),suffix:(0,a.css)({marginLeft:E.spacing(1)}),disabled:(0,a.css)({color:E.colors.text.disabled,cursor:"not-allowed","&:hover, &:focus":{color:E.colors.text.disabled,"&::before":{backgroundColor:"transparent"}}})})},60249:(ne,A,e)=>{"use strict";e.d(A,{C:()=>xe});var n=e(74848),a=e(92745),s=e(45863),l=e(8207),r=e(54314),c=e(60208),i=e(34999),o=e(14252),h=e(61215),f=e(26689),g=e(8285),u=e(22803),E=e(96540),v=e(70713),p=e(1906),m=e(43173),y=e(63142),d=e(41654),x=e(991),b=e(89640),D=e(68079),C=e(37386),P=e(18857),T=e(47931),O=e(45861),S=e(50992),B=e(21285),K=e(15130),U=e(11257),F=e(4213),I=e.n(F),V=e(80011),M=e(55386),L=e(5114),N=e(65333),W=e(2543),R=e(77154),G=e(739),w=e(28105),_=e(8095),Q=e(70030),ae=e(34273);function q(Pe){const Oe=[];if(Pe?.series)for(const We of Pe.series)Oe.push((0,R.Nw)(We));if(Pe?.annotations)for(const We of Pe.annotations){const Fe=(0,R.Nw)(We);Fe.schema?.meta||(Fe.schema.meta={}),Fe.schema.meta.dataTopic=G.QR.Annotations,Oe.push(Fe)}return Oe}function k(Pe,Oe){const We={panelType:Pe.state.pluginId,datasource:"??"},Fe=m.$.buildInfo.versionString;let Be=`| Key | Value |
|--|--|
| Panel | ${We.panelType} @ ${Pe.state.pluginVersion??Fe} |
| Grafana | ${Fe} // ${m.$.buildInfo.edition} |
`;return Oe&&(Be+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+Oe+"\n```\n</details>"),Be}async function ee(Pe,Oe,We){let Fe={type:""};const Be=Pe.parent;(0,g.ME)(Pe)?Fe={...(0,Q.ZB)(Be),...(0,Q.Z6)(Pe)}:Fe=(0,Q.ZB)(Be);const Le=(0,W.cloneDeep)(te),Ge={panelType:Pe.state.pluginId,datasource:"??"},Ze=(0,g.un)(Pe);if(!Ze.state.data)return;const qe=Ze.state.data,at=Ze?.state.datasource,ht=(0,ae.W)(q(qe),Oe),Et=m.$.buildInfo.versionString,mt=Ze.state.queries??[],Pt=qe.annotations?qe.annotations.reduce((Kt,Gt)=>Gt.length+Kt,0):0,rt=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${Ge.panelType} @ ${Fe.pluginVersion??Et}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${mt.map(Kt=>{const Gt=Kt.datasource??at;return`${Kt.refId}[${Gt?.type}]`}).join(", ")}</td>
    </tr>
    ${j(Fe)}
    ${J(qe,ht)}
    ${Z(qe)}
    <tr>
      <th>Grafana</th>
      <td>${Et} // ${m.$.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(Le.panels[0]={...Fe,...Le.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:_.nj.Snapshot,snapshot:ht}]},delete Le.panels[0].libraryPanel,Fe.transformations?.length){const Kt=Le.panels[Le.panels.length-1];Kt.title=Kt.title+" (after transformations)";const Gt=(0,W.cloneDeep)(Kt);Gt.id=100,Gt.title="Data (before transformations)",Gt.gridPos.w=24,Gt.targets[0].withTransforms=!1,Le.panels.push(Gt)}return Pt>0&&Le.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:"Annotations",datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:G.QR.Annotations,refId:"A"}]}),Le.panels[1].options.content=rt,Le.panels[2].options.content=JSON.stringify(Fe,null,2),Le.title=`Debug: ${Fe.title} // ${(0,V.LE)(new Date)}`,Le.tags=["debug",`debug-${Ge.panelType}`],Le.time={from:We.from.toISOString(),to:We.to.toISOString()},Le}function j(Pe){return Pe.transformations?`<tr>
      <th>Transform</th>
      <td>${Pe.transformations.map(Oe=>Oe.id).join(", ")}</td>
  </tr>`:""}function J(Pe,Oe){let We=Pe.series.length??0,Fe=0,Be=0;for(const Le of Pe.series)Fe+=Le.fields.length,Be+=Le.length;return`<tr><th>Data</th><td>${Pe.state!==w.Gu.Done?Pe.state:""} ${We} frames, ${Fe} fields, ${Be} rows </td></tr>`}function Z(Pe){return Pe.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${Pe.annotations.reduce((Oe,We)=>We.length+Oe,0)}</td>
</tr>`:""}const te={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37};var se=(Pe=>(Pe[Pe.Support=0]="Support",Pe[Pe.Data=1]="Data",Pe))(se||{}),ie=(Pe=>(Pe[Pe.PanelSnapshot=0]="PanelSnapshot",Pe[Pe.GithubComment=1]="GithubComment",Pe))(ie||{});class ce extends L.Q{constructor(Oe){super({panel:Oe,panelTitle:s.jh.interpolate(Oe,Oe.state.title,{},"text"),currentTab:0,showMessage:1,snapshotText:"",markdownText:"",randomize:{},snapshotUpdate:0,options:[{label:(0,a.t)("dashboard-scene.support-snapshot-service.label.git-hub-comment","GitHub comment"),description:"Copy and paste this message into a GitHub issue or comment",value:1},{label:(0,a.t)("dashboard-scene.support-snapshot-service.label.panel-support-snapshot","Panel support snapshot"),description:(0,a.t)("dashboard-scene.support-snapshot-service.description.dashboard-troubleshoot-visualization-issues","Dashboard JSON used to help troubleshoot visualization issues"),value:0}]}),this.onCurrentTabChange=We=>{this.setState({currentTab:We})},this.onShowMessageChange=We=>{this.setState({showMessage:We.value})},this.onGetMarkdownForClipboard=()=>{const{markdownText:We}=this.state,Fe=Math.pow(1024,2)*1.5;return We.length>Fe?(this.setState({error:{title:(0,a.t)("dashboard-scene.support-snapshot-service.title.copy-to-clipboard-failed","Copy to clipboard failed"),message:"Snapshot is too large, consider download and attaching a file instead"}}),""):We},this.onDownloadDashboard=()=>{const{snapshotText:We,panelTitle:Fe}=this.state,Be=new Blob([We],{type:"text/plain"}),Le=`debug-${Fe}-${(0,V.LE)(new Date)}.json.txt`;I()(Be,Le)},this.onSetSnapshotText=We=>{this.setState({snapshotText:We})},this.onToggleRandomize=We=>{const{randomize:Fe}=this.state;this.setState({randomize:{...Fe,[We]:!Fe[We]}})}}async buildDebugDashboard(){const{panel:Oe,randomize:We,snapshotUpdate:Fe}=this.state,Be=await ee(Oe,We,s.jh.getTimeRange(Oe).state.value),Le=JSON.stringify(Be,null,2),Ge=k(Oe,Le),Ze=(0,M.cN)((0,M.j_)("bytes")(Le?.length??0));let qe;if(Be)try{qe=(0,N.wM)({dashboard:Be,meta:{isEmbedded:!0}}).state.body}catch(at){console.log("Error creating scene:",at)}this.setState({snapshot:Be,snapshotText:Le,markdownText:Ge,snapshotSize:Ze,snapshotUpdate:Fe+1,scene:qe})}}function re({panel:Pe,onClose:Oe}){const We=(0,y.of)(ue),Fe=(0,E.useMemo)(()=>new ce(Pe),[Pe]),Be=Pe.getPlugin(),{currentTab:Le,loading:Ge,error:Ze,options:qe,showMessage:at,snapshotSize:ht,markdownText:Et,snapshotText:mt,randomize:Pt,panelTitle:rt,scene:Kt}=Fe.useState();if((0,E.useEffect)(()=>{Fe.buildDebugDashboard()},[Fe,Be,Pt]),!Be)return null;const Gt=[{label:(0,a.t)("dashboard-scene.help-wizard.tabs.label.snapshot","Snapshot"),value:se.Support},{label:(0,a.t)("dashboard-scene.help-wizard.tabs.label.data","Data"),value:se.Data}],en=m.$.supportBundlesEnabled&&K.TP.hasPermission(U.w.ActionSupportBundlesCreate);return(0,n.jsxs)(l._,{title:(0,a.t)("dashboard-scene.help-wizard.title-get-help-with-this-panel","Get help with this panel"),size:"lg",onClose:Oe,subtitle:(0,n.jsxs)(d.B,{direction:"column",gap:1,children:[(0,n.jsxs)(d.B,{direction:"row",gap:1,children:[(0,n.jsx)(x.y,{featureState:p.Ay.beta}),(0,n.jsx)(b.Y,{href:"https://grafana.com/docs/grafana/latest/troubleshooting/",external:!0,children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.help-wizard.troubleshooting-docs",children:"Troubleshooting docs"})})]}),(0,n.jsx)("span",{className:"muted",children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.help-wizard.troubleshooting-request-help",children:"To request troubleshooting help, send a snapshot of this panel to Grafana Labs Technical Support. The snapshot contains query response data and panel settings."})}),en&&(0,n.jsx)("span",{className:"muted",children:(0,n.jsxs)(a.x6,{i18nKey:"dashboard-scene-help-wizard.support-bundle",children:["You can also retrieve a support bundle containing information concerning your Grafana instance and configured datasources in the ",(0,n.jsx)(b.Y,{href:"/support-bundles",children:"support bundles section"}),"."]})})]}),tabs:(0,n.jsx)(r.U,{children:Gt.map((st,$t)=>(0,n.jsx)(c.o,{label:st.label,active:st.value===Le,onChangeTab:()=>Fe.onCurrentTabChange(st.value)},`${st.value}-${$t}`))}),children:[Ge&&(0,n.jsx)(D.y,{}),Ze&&(0,n.jsx)(i.F,{title:Ze.title,children:Ze.message}),Le===se.Data&&(0,n.jsxs)("div",{className:We.code,children:[(0,n.jsxs)("div",{className:We.opts,children:[(0,n.jsx)(C.D,{label:(0,a.t)("dashboard-scene.help-wizard.label-template","Template"),className:We.field,children:(0,n.jsx)(P.l6,{options:qe,value:at,onChange:Fe.onShowMessageChange})}),at===ie.GithubComment?(0,n.jsx)(T.b,{icon:"copy",getText:Fe.onGetMarkdownForClipboard,children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.help-wizard.copy-to-clipboard",children:"Copy to clipboard"})}):(0,n.jsx)(O.$n,{icon:"download-alt",onClick:Fe.onDownloadDashboard,children:(0,n.jsxs)(a.x6,{i18nKey:"dashboard-scene.help-wizard.download-snapshot",children:["Download (",{snapshotSize:ht},")"]})})]}),(0,n.jsx)(v.Ay,{disableWidth:!0,children:({height:st})=>(0,n.jsx)(S.B,{width:"100%",height:st,language:at===ie.GithubComment?"markdown":"json",showLineNumbers:!0,showMiniMap:!0,value:at===ie.GithubComment?Et:mt,readOnly:!1,onBlur:Fe.onSetSnapshotText})})]}),Le===se.Support&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.D,{label:(0,a.t)("dashboard-scene.help-wizard.label-randomize-data","Randomize data"),description:(0,a.t)("dashboard-scene.help-wizard.description-randomize-data","Modify the original data to hide sensitive information. Note the lengths will stay the same, and duplicate values will be equal."),children:(0,n.jsxs)(d.B,{children:[(0,n.jsx)(B.K,{label:(0,a.t)("dashboard-scene.help-wizard.randomize-labels-label-labels","Labels"),id:"randomize-labels",showLabel:!0,value:!!Pt.labels,onChange:()=>Fe.onToggleRandomize("labels")}),(0,n.jsx)(B.K,{label:(0,a.t)("dashboard-scene.help-wizard.randomize-field-names-label-field-names","Field names"),id:"randomize-field-names",showLabel:!0,value:!!Pt.names,onChange:()=>Fe.onToggleRandomize("names")}),(0,n.jsx)(B.K,{label:(0,a.t)("dashboard-scene.help-wizard.randomize-string-values-label-string-values","String values"),id:"randomize-string-values",showLabel:!0,value:!!Pt.values,onChange:()=>Fe.onToggleRandomize("values")})]})}),(0,n.jsx)(C.D,{label:(0,a.t)("dashboard-scene.help-wizard.label-support-snapshot","Support snapshot"),description:(0,a.t)("dashboard-scene.help-wizard.description-support-snapshot","Panel: {{panelTitle}}",{panelTitle:rt}),children:(0,n.jsxs)(d.B,{children:[(0,n.jsx)(O.$n,{icon:"download-alt",onClick:Fe.onDownloadDashboard,children:(0,n.jsxs)(a.x6,{i18nKey:"dashboard-scene.help-wizard.download-dashboard",children:["Dashboard (",{snapshotSize:ht},")"]})}),(0,n.jsx)(T.b,{icon:"github",getText:Fe.onGetMarkdownForClipboard,title:(0,a.t)("dashboard-scene.help-wizard.title-complete-git-hub-comment-clipboard","Copy a complete GitHub comment to the clipboard"),children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.help-wizard.copy-to-clipboard",children:"Copy to clipboard"})})]})}),(0,n.jsx)("div",{style:{height:"100%",overflow:"auto",display:"flex"},children:Kt&&(0,n.jsx)(Kt.Component,{model:Kt})})]})]})}const ue=Pe=>({code:(0,u.css)({flexGrow:1,height:"100%",overflow:"scroll"}),field:(0,u.css)({width:"100%"}),opts:(0,u.css)({display:"flex",width:"100%",flexGrow:0,alignItems:"center",justifyContent:"flex-end","& button":{marginLeft:Pe.spacing(1)}})});var X=e(42836);class le extends s.Bs{constructor(Oe){super({...Oe,options:{withTransforms:!1,withFieldConfig:!0}}),this.onOptionsChange=We=>{this.setState({options:We})}}getTabLabel(){return(0,a.t)("dashboard.inspect.data-tab","Data")}getTabValue(){return f.q.Data}static{this.Component=({model:Oe})=>{const{options:We}=Oe.useState(),Fe=Oe.state.panelRef.resolve(),Be=s.jh.getData(Fe),{data:Le}=fe(Be,We.withTransforms).useState(),Ge=s.jh.getTimeRange(Fe);return Le||a.x6,(0,n.jsx)(X.q,{isLoading:Le?.state===w.Gu.Loading,data:Le?.series,options:We,hasTransformations:he(Be),timeZone:Ge.getTimeZone(),panelPluginId:Fe.state.pluginId,dataName:s.jh.interpolate(Fe,Fe.state.title),fieldConfig:Fe.state.fieldConfig,onOptionsChange:Oe.onOptionsChange})}}}function he(Pe){return Pe instanceof s.Es?Pe.state.transformations.length>0:!1}function fe(Pe,Oe){return!Oe&&Pe instanceof s.Es&&Pe.state.$data?Pe.state.$data:Pe}var Ce=e(51898),Ae=e(60171),_e=e(98314),Xe=e(82612),De=e(89460),Me=e(8419),Te=e(67497),$e=e(93389),Re=e(62265);class Ke extends s.Bs{constructor(Oe){super({...Oe,source:"panel-json",jsonText:Se("panel-json",Oe.panelRef.resolve())}),this.onChangeSource=We=>{this.setState({source:We.value,jsonText:Se(We.value,this.state.panelRef.resolve())})},this.onApplyChange=()=>{const We=this.state.panelRef.resolve(),Fe=(0,g.YQ)(We),Be=JSON.parse(this.state.jsonText),Le=new Xe.a9(Be),Ge=(0,N.tt)(Le),Ze=s.Go.cloneSceneObjectState(Ge.state);if(!(We.parent instanceof $e.U)){console.error("Cannot update state of panel",We,Ge);return}this.state.onClose(),Fe.state.isEditing||Fe.onEnterEditMode(),We.parent.setState(Ze),(0,Te.B9)(f.q.JSON,"apply",{panel_type_changed:We.state.pluginId!==Le.type,panel_id_changed:(0,g.Cs)(We)!==Le.id,panel_grid_pos_changed:je(We.parent.state,Ze),panel_targets_changed:Qe((0,g.un)(We),(0,g.un)(Ze.$data))})},this.onCodeEditorBlur=We=>{this.setState({jsonText:We})}}getTabLabel(){return(0,a.t)("dashboard.inspect.json-tab","JSON")}getTabValue(){return f.q.JSON}getOptions(){const Oe=this.state.panelRef.resolve(),We=Oe.state.$data??Oe.parent?.state.$data,Fe=[{label:(0,a.t)("dashboard.inspect-json.panel-json-label","Panel JSON"),description:(0,a.t)("dashboard.inspect-json.panel-json-description","The model saved in the dashboard JSON that configures how everything works."),value:"panel-json"}];return We&&(Fe.push({label:(0,a.t)("dashboard.inspect-json.panel-data-label","Panel data"),description:(0,a.t)("dashboard.inspect-json.panel-data-description","The raw model passed to the panel visualization"),value:"panel-data"}),Fe.push({label:(0,a.t)("dashboard.inspect-json.dataframe-label","DataFrame JSON (from Query)"),description:(0,a.t)("dashboard.inspect-json.dataframe-description","Raw data without transformations and field config applied. "),value:"data-frames"})),Fe}isEditable(){if(this.state.source!=="panel-json")return!1;const Oe=this.state.panelRef.resolve();return(0,g.ME)(Oe)||(0,Ae.aK)((0,g.YQ)(Oe).getSaveModel())||Oe.parent instanceof $e.U&&Oe.parent.isRepeated()?!1:(0,g.YQ)(Oe).state.meta.canEdit}static{this.Component=Ve}}function Ve({model:Pe}){const{source:Oe,jsonText:We}=Pe.useState(),Fe=(0,y.of)(De.A),Be=Pe.getOptions();return(0,n.jsxs)("div",{className:Fe.wrap,children:[(0,n.jsxs)("div",{className:Fe.toolbar,"data-testid":Ce.Tp.components.PanelInspector.Json.content,children:[(0,n.jsx)(C.D,{label:(0,a.t)("dashboard.inspect-json.select-source","Select source"),className:"flex-grow-1",children:(0,n.jsx)(P.l6,{inputId:"select-source-dropdown",options:Be,value:Be.find(Le=>Le.value===Oe)??Be[0].value,onChange:Pe.onChangeSource})}),Pe.isEditable()&&(0,n.jsx)(O.$n,{className:Fe.toolbarItem,onClick:Pe.onApplyChange,children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.inspect-json-tab.apply",children:"Apply"})})]}),(0,n.jsx)("div",{className:Fe.content,children:(0,n.jsx)(v.Ay,{disableWidth:!0,children:({height:Le})=>(0,n.jsx)(S.B,{width:"100%",height:Le,language:"json",showLineNumbers:!0,showMiniMap:We.length>100,value:We,readOnly:!Pe.isEditable(),onBlur:Pe.onCodeEditorBlur})})})]})}function Se(Pe,Oe){let We={};switch(Pe){case"panel-json":{(0,Te.B9)(f.q.JSON,"panelData");const Fe=(0,g.ME)(Oe),Be=Oe.parent;if(Fe){We=Ye(Oe);break}if((0,Ae.aK)((0,g.YQ)(Oe).getSaveModel())){We=(0,Re.GB)(Oe);break}else Be instanceof $e.U&&(We=(0,Q.ZB)(Be));break}case"panel-data":{(0,Te.B9)(f.q.JSON,"panelJSON");const Fe=s.jh.getData(Oe);Fe.state.data&&(We=Oe.applyFieldConfig(Fe.state.data));break}case"data-frames":{(0,Te.B9)(f.q.JSON,"dataFrame");const Fe=s.jh.getData(Oe);Fe.state.data&&(Fe instanceof s.Es&&Fe.state.$data?.state.data?We=(0,_e.B6)(Fe.state.$data.state.data):We=(0,_e.B6)(Fe.state.data))}}return(0,Me.p)(We)}function Ye(Pe){if(!(0,g.ME)(Pe))throw"Panel not a library panel";const Oe=Pe.parent;if(!(Oe instanceof $e.U))throw"LibraryPanel not child of DashboardGridItem";const We={x:Oe.state.x||0,y:Oe.state.y||0,h:Oe.state.height||0,w:Oe.state.width||0},Fe=Ue(Pe),Be=(0,Q.Z6)(Pe.clone({$behaviors:void 0}),We,!1,Oe);return{libraryPanel:{...Fe},...Be}}function Ue(Pe){if(!(0,g.ME)(Pe))throw new Error("Panel not a Library panel");const Oe=(0,g.iL)(Pe);if(!Oe)throw new Error("Library panel behavior not found");if(!Oe.state._loadedPanel)throw new Error("Library panel not loaded");return Oe.state._loadedPanel}function je(Pe,Oe){return Pe.x!==Oe.x||Pe.y!==Oe.y||Pe.width!==Oe.width||Pe.height!==Oe.height}function Qe(Pe,Oe){return Pe===void 0||Oe===void 0?!1:!(0,W.isEqual)(Pe.state.queries,Oe.state.queries)}class He extends s.Bs{getTabLabel(){return(0,a.t)("dashboard.inspect.meta-tab","Meta data")}getTabValue(){return f.q.Meta}static{this.Component=({model:Oe})=>{const{panelRef:We,dataSource:Fe}=Oe.state,Be=s.jh.getData(We.resolve()),Le=Fe.components?.MetadataInspector;return!Be.state.data||!Le?null:(0,n.jsx)(Le,{datasource:Fe,data:Be.state.data.series})}}}var Je=e(96065);class de extends s.Bs{constructor(){super(...arguments),this.onRefreshQuery=()=>{const Oe=(0,g.un)(this.state.panelRef.resolve());Oe&&Oe.runQueries()}}getTabLabel(){return(0,a.t)("dashboard.inspect.query-tab","Query")}getTabValue(){return f.q.Query}static{this.Component=({model:Oe})=>{const We=s.jh.getData(Oe.state.panelRef.resolve()).useState();return We.data?(0,n.jsx)(Je.e,{data:We.data,onRefreshQuery:Oe.onRefreshQuery}):null}}}var ve=e(55072);class me extends s.Bs{getTabLabel(){return(0,a.t)("dashboard.inspect.stats-tab","Stats")}getTabValue(){return f.q.Stats}static{this.Component=({model:Oe})=>{const We=s.jh.getData(Oe.state.panelRef.resolve()).useState(),Fe=s.jh.getTimeRange(Oe.state.panelRef.resolve());return We.data?(0,n.jsx)(ve.N,{data:We.data,timeZone:Fe.getTimeZone()}):null}}}class xe extends s.Bs{constructor(Oe){super(Oe),this.onClose=()=>{(0,g.YQ)(this).closeModal()},this.addActivationHandler(()=>this._activationHandler())}static{this.Component=Ee}_activationHandler(){this.buildTabs(0)}async buildTabs(Oe){const We=this.state.panelRef,Fe=We.resolve()?.getPlugin(),Be=[];if(Fe||(Oe<2e3?setTimeout(()=>this.buildTabs(Oe+100),100):this.setState({pluginNotLoaded:!0})),We){if((0,h.$)(Fe)){const Le=s.jh.getData(We.resolve());Be.push(new le({panelRef:We})),Be.push(new me({panelRef:We})),Be.push(new de({panelRef:We}));const Ge=await(0,o.BN)(Le.state.data);Ge&&Be.push(new He({panelRef:We,dataSource:Ge}))}Be.push(new Ke({panelRef:We,onClose:this.onClose}))}this.setState({tabs:Be})}getDrawerTitle(){const Oe=this.state.panelRef?.resolve();return Oe?s.jh.interpolate(Oe,`Inspect: ${Oe.state.title}`):"Inspect panel"}}function Ee({model:Pe}){const{tabs:Oe,pluginNotLoaded:We,panelRef:Fe,currentTab:Be}=Pe.useState();if(!Oe)return null;const Le=Fe.resolve(),Ge=Oe.find(Ze=>Ze.getTabValue()===Be)??Oe[0];return Be===f.q.Help?(0,n.jsx)(re,{panel:Le,onClose:Pe.onClose}):(0,n.jsxs)(l._,{title:Pe.getDrawerTitle(),onClose:Pe.onClose,size:"md",tabs:(0,n.jsx)(r.U,{children:Oe.map(Ze=>(0,n.jsx)(c.o,{label:Ze.getTabLabel(),active:Ze===Ge,onChangeTab:()=>{Pe.setState({currentTab:Ze.getTabValue()})}},Ze.state.key))}),children:[We&&(0,n.jsx)(i.F,{title:(0,a.t)("dashboard-scene.panel-inspect-renderer.title-panel-plugin-not-loaded","Panel plugin not loaded"),children:(0,n.jsx)(a.x6,{i18nKey:"dashboard-scene.panel-inspect-renderer.body-panel-plugin-not-loaded",children:"Make sure the panel you want to inspect is visible and has been displayed before opening inspect."})}),Ge.Component&&(0,n.jsx)(Ge.Component,{model:Ge})]})}},60311:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>s,m:()=>a});var n=e(74848);let a=()=>(0,n.jsx)("div",{children:"PanelRenderer can only be used after Grafana instance has been started."});function s(l){a=l}},60379:(ne,A,e)=>{"use strict";e.d(A,{h:()=>l});var n=e(2543),a=e.n(n);const s=(0,n.throttle)((...r)=>{console.log(...r)},500),l=r=>{let c=!1;return typeof window<"u"&&(c=window.localStorage.getItem("grafana.debug")==="true"),{logger:(i,o=!1,...h)=>{},enable:()=>c=!0,disable:()=>c=!1,isEnabled:()=>c}}},60519:(ne,A,e)=>{"use strict";e.d(A,{BF:()=>S,K3:()=>U,_M:()=>K,nJ:()=>x,rJ:()=>F,vd:()=>I,we:()=>b});var n=e(2543),a=e.n(n),s=e(96540),l=e(84596),r=e(21275),c=e(739),i=e(76732),o=e(41119),h=e(6773),f=e(46644),g=e(36638),u=e(95004),E=e(64394),v=e(38036),p=e(92138),m=e(11576),y=e(79118),d=e(53543);function x(V){let M=null,L=null;const N=[f.gy.min,f.gy.max];for(const W of V)for(const R of W.fields)if(R.type===u.PU.number){const G=(0,f.Nw)({field:R,reducers:N}),w=G[f.gy.min],_=G[f.gy.max];(M===null||w<M)&&(M=w),(L===null||_>L)&&(L=_)}return{min:M,max:L,delta:(L??0)-(M??0)}}function b(V){if(!V.data)return[];const M=V.fieldConfig;if(!M)return V.data;const L=V.fieldConfigRegistry??d.G;let N=0,W;const R=[];if(M.overrides)for(const G of M.overrides){const w=g.sJ.get(G.matcher.id);w&&R.push({match:w.get(G.matcher.options),properties:G.properties})}return V.data.map((G,w)=>{const _={...G};_.fields=_.fields.map(Q=>({...Q,config:(0,n.cloneDeep)(Q.config),state:{...Q.state}}));for(const Q of _.fields){const ae=Q.config;Q.state.scopedVars={__dataContext:{value:{data:V.data,frame:_,frameIndex:w,field:Q}}};const q={field:Q,data:V.data,dataFrameIndex:w,replaceVariables:V.replaceVariables,fieldConfigRegistry:L};T(ae,M.defaults,q);for(const J of R)if(J.match(Q,_,V.data))for(const Z of J.properties)P(ae,Z,q);let k=Q.type;if(!k||k===u.PU.other){const J=(0,o.dF)(Q);J&&(k=J)}const{range:ee,newGlobalRange:j}=D(ae,Q,W,V.data);if(W=j,Q.state.displayName=null,Q.state.seriesIndex=N,Q.state.range=ee,Q.type=k,Q.type!==u.PU.time&&N++,Q.display=(0,m.J)({field:Q,theme:V.theme,timeZone:V.timeZone}),Q.config.unit!=="dateTimeFromNow"&&(Q.display=C(Q.display,2500)),Q.getLinks=K(_,Q,Q.state.scopedVars,q.replaceVariables,V.timeZone,V.dataLinkPostProcessor),Q.type===u.PU.nestedFrames)for(const J of Q.values)for(let Z=0;Z<J.length;Z++)for(const te of J[Z].fields)te.display=(0,m.J)({field:te,theme:V.theme,timeZone:V.timeZone}),te.state={scopedVars:{__dataContext:{value:{data:J,frame:J[Z],frameIndex:Z,field:te}}}},te.getLinks=K(J[Z],te,te.state.scopedVars,q.replaceVariables,V.timeZone,V.dataLinkPostProcessor);Q.type===u.PU.frame&&(Q.values=b({...V,data:Q.values.map(J=>J??(0,o.EI)({fields:[]}))}))}return _})}function D(V,M,L,N){if(M.type!==u.PU.number||(0,n.isNumber)(V.min)&&(0,n.isNumber)(V.max))return{newGlobalRange:L};if(V.fieldMinMax){const w=(0,y.AP)(M),_=V.min??w.min,Q=V.max??w.max;return{range:{min:_,max:Q,delta:Q-_},newGlobalRange:L}}const W=L??x(N),R=V.min??W.min,G=V.max??W.max;return{range:{min:R,max:G,delta:G-R},newGlobalRange:W}}function C(V,M=2500){const L=new Map;for(let N=-1;N<=15;N++)L.set(N,new Map);return(N,W)=>{let R=L.get(W??-1),G=R.get(N);return G||(R.size===M&&R.clear(),G=V(N,W),G.color&&(G.color=(0,h.ze)(G.color)),R.set(N,G)),G}}function P(V,M,L){const W=L.fieldConfigRegistry.getIfExists(M.id);if(!W)return;const R=W.process(M.value,L,W.settings);R==null?W.isCustom&&V.custom?(0,n.unset)(V.custom,W.path):(0,n.unset)(V,W.path):W.isCustom?(V.custom||(V.custom={}),(0,n.set)(V.custom,W.path,R)):(0,n.set)(V,W.path,R)}function T(V,M,L){V.links&&M.links&&(V.links=[...V.links,...M.links]);const N=M?.thresholds?.mode===r.Ol.Absolute&&M.thresholds?.steps.find(W=>W.value===-1/0);V.thresholds?.mode===r.Ol.Absolute&&!V.thresholds.steps.some(W=>W.value===-1/0)&&N&&(V.thresholds.steps=[N,...V.thresholds.steps]);for(const W of L.fieldConfigRegistry.list())W.isCustom&&!V.custom&&(V.custom={}),O(W.isCustom?V.custom:V,W.isCustom?M.custom:M,W,L);S(V)}function O(V,M,L,N){const W=(0,n.get)(V,L.path);if(W==null){const R=N.fieldConfigRegistry.getIfExists(L.id);if(!R)return;if(R&&R.shouldApply(N.field)){const G=R.process((0,n.get)(M,R.path),N,R.settings);G!=null&&(0,n.set)(V,R.path,G)}}}function S(V){const{thresholds:M}=V;if(V.color?V.color.mode||delete V.color:M&&(V.color={mode:E.Y.Thresholds}),V.hasOwnProperty("min")&&V.hasOwnProperty("max")&&V.min>V.max){const L=V.max;V.max=V.min,V.min=L}}const B=V=>{const{link:M,linkModel:L,dataLinkScopedVars:N,field:W,replaceVariables:R}=V;return M.internal?(0,v.u)({link:M,internalLink:M.internal,scopedVars:N,field:W,range:M.internal.range,replaceVariables:R}):L},K=(V,M,L,N,W,R)=>G=>!M.config.links||M.config.links.length===0?[]:M.config.links.map(_=>{const Q=I(V,M,L),ae={...L,__dataContext:Q},q=(j,J,Z)=>N(j,{...ae,...J},Z);G.valueRowIndex!==void 0&&!isNaN(G.valueRowIndex)?Q.value.rowIndex=G.valueRowIndex:Q.value.calculatedValue=G.calculatedValue;let k,ee=_.onClick||!_.onBuildUrl?_.url:_.onBuildUrl({origin:M,replaceVariables:q});return ee&&(ee=p.I.assureBaseUrl(ee.replace(/\n/g,"")),ee=N(ee,ae,c.$m.UriEncode),ee?.length>0&&(ee=p.I.processUrl(ee))),_.onClick?k={href:ee,title:N(_.title||"",ae),target:_.targetBlank?"_blank":void 0,onClick:(j,J)=>{_.onClick({origin:J??M,e:j,replaceVariables:q})},origin:M,oneClick:_.oneClick??!1}:k={href:ee,title:N(_.title||"",ae),target:_.targetBlank?"_blank":void 0,origin:M,oneClick:_.oneClick??!1},(R||B)({frame:V,field:M,dataLinkScopedVars:ae,replaceVariables:N,config:G,link:_,linkModel:k})}).filter(_=>!!_);function U(V){if(!V||V.length===0)return[];const M=[...V],L=(0,m.H)();for(let N=0;N<M.length;N++){const W={...M[N]},R=[...W.fields];for(let G=0;G<R.length;G++)R[G]={...R[G],display:L};M[N]={...W,fields:R}}return M}function F(V,M,L,N,W,R,G){const w=V?.fieldConfigRegistry,_=(0,s.useRef)(0),Q=(0,l.A)(L?.series);return(0,s.useMemo)(()=>{if(!w||!M||!L)return;const ae=L?.series;L.structureRev==null&&ae&&Q&&!(0,i.J3)(ae,Q,i.bW)&&_.current++;const q={structureRev:_.current,...L,series:b({data:ae,fieldConfig:M,fieldConfigRegistry:w,replaceVariables:R,theme:W,timeZone:N,dataLinkPostProcessor:G})};return L.annotations&&L.annotations.length>0&&(q.annotations=b({data:L.annotations,fieldConfig:{defaults:{},overrides:[]},replaceVariables:R,theme:W,timeZone:N,dataLinkPostProcessor:G})),q},[w,M,L,Q,N,W,R,G])}function I(V,M,L){return L?.__dataContext?{value:{...L.__dataContext.value}}:{value:{frame:V,field:M,data:[V]}}}},61048:(ne,A,e)=>{"use strict";e.d(A,{i:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({children:c,className:i})=>{const o=(0,s.of)(r);return(0,n.jsx)("div",{className:(0,a.cx)(o.wrapper,i),children:c})},r=c=>({wrapper:(0,a.css)({display:"flex",flexDirection:"column",fontSize:c.typography.bodySmall.fontSize})})},61074:(ne,A,e)=>{"use strict";e.d(A,{F:()=>s});var n=e(47070),a=e(43173);function s(){const l=[];return a.$.featureToggles.grafanaconThemes&&(l.push("desertbloom"),l.push("gildedgrove"),l.push("sapphiredusk"),l.push("tron"),l.push("gloom")),(0,n.k)(l)}},61190:(ne,A,e)=>{"use strict";e.d(A,{L:()=>a,y:()=>s});var n=e(43173);function a(l){return{grafana_version:n.$.buildInfo.version,plugin_type:String(l.type),plugin_version:l.info.version,plugin_id:l.id,plugin_name:l.name}}function s(l){return{...a(l.meta),datasource_uid:l.uid}}},61215:(ne,A,e)=>{"use strict";e.d(A,{$:()=>c,A:()=>r,EQ:()=>i,Sf:()=>o});var n=e(2543),a=e.n(n),s=e(95943),l=e(62667);function r(h,f,g,u){if(h===l.q5.Fill)return{width:f,height:g};const E=48,m=(window.innerWidth-60-s.dU*4)/s.cV*u.gridPos.w,y=s.sD*u.gridPos.h+E,d=Math.min(f/m,g/y);return m<=f&&y<=g?{width:m,height:y}:{width:m*d,height:y*d}}function c(h){return h?.meta.skipDataQuery===!1}const i=(h,f,g,u)=>{let E={...h.defaults};const v=g==null||g==="";return u?E.custom?v?E.custom=(0,n.omit)(E.custom,f):E.custom=o(E.custom,f,g):v||(E.custom=o(E.custom,f,g)):v?E=(0,n.omit)(E,f):E=o(E,f,g),{...h,defaults:E}};function o(h,f,g){const u=Array.isArray(f)?f:f.split("."),E=u.shift();if(E.endsWith("]")){const p=E.lastIndexOf("["),m=+E.substring(p+1,E.length-1),y=E.substring(0,p);let d=h[y];const x=Array.isArray(d)?[...d]:[];return u.length&&(d=x[m],(d==null||typeof d!="object")&&(d={}),g=o(d,u,g)),x[m]=g,{...h,[y]:x}}if(!u.length)return{...h,[E]:g};let v=h[E];return(v==null||typeof v!="object")&&(v={}),{...h,[E]:o(v,u,g)}}},61291:(ne,A,e)=>{"use strict";e.d(A,{v:()=>l});var n=e(74848),a=e(45863);function s(r){return r!=null&&typeof r=="object"&&"timeCompare"in r}class l extends a.KD{constructor(c={}){super({...c,compareWith:void 0,compareOptions:[],hideCheckbox:!0}),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){const c=a.jh.getAncestor(this,a.Eb);this._subs.add(c.subscribeToState((i,o)=>{const h=s(i.options)&&i.options.timeCompare;s(o.options)&&o.options.timeCompare&&!h&&this._handleDisable()}))}_handleDisable(){this.state.compareWith&&this.setState({compareWith:void 0})}static{this.Component=function({model:i}){const o=a.jh.getAncestor(i,a.Eb),{options:h}=o.useState();return s(h)&&h.timeCompare?(0,n.jsx)(a.KD.Component,{model:i}):(0,n.jsx)(n.Fragment,{})}}}},61371:(ne,A,e)=>{"use strict";e.d(A,{Fl:()=>c,G4:()=>r});var n=e(16111),a=e(25504),s=e(2543),l=e.n(s);const r=(h,f)=>{const g=(0,n.UD)(h,f),u=a.stringify(h,null,2),E=a.stringify(f,null,2),v=y=>y.map(d=>{let x,b,D=0,C=0;const P=(0,s.tail)(d.path.split("/"));return d.op==="replace"&&E.pointers[d.path]&&(x=(0,s.get)(h,P),b=d.value,D=E.pointers[d.path].value.line,C=E.pointers[d.path].valueEnd.line),d.op==="add"&&E.pointers[d.path]&&(b=d.value,D=E.pointers[d.path].value.line,C=E.pointers[d.path].valueEnd.line),d.op==="remove"&&u.pointers[d.path]&&(x=(0,s.get)(h,P),D=u.pointers[d.path].value.line,C=u.pointers[d.path].valueEnd.line),{op:d.op,value:b,path:P,originalValue:x,startLineNumber:D,endLineNumber:C}}),p=y=>(0,s.sortBy)(y,"startLineNumber"),m=y=>y.reduce((d,x)=>{const b=x.path[0];return d[b]||(d[b]=[]),d[b].push(x),d},{});return(0,s.flow)([v,p,m])(g)},c=(h,f=!0)=>{const g=(0,s.last)(h.path),u=i(g),E=h.op==="remove"?h.originalValue:h.value;let v=o(h.op);return f&&(u?v+=` item ${g}`:(0,s.isArray)(E)&&!(0,s.isEmpty)(E)?v+=` ${E.length} ${g}`:v+=` ${g}`),v},i=h=>!(0,s.isNaN)((0,s.toNumber)(h)),o=h=>h==="add"?"added":h==="remove"?"deleted":"changed"},61659:(ne,A,e)=>{"use strict";e.d(A,{x:()=>l});var n=e(96540),a=e(95943),s=e(29043);function l(){const[r,c]=(0,n.useState)(s.A.exists(a.tH)),[i,o]=(0,n.useState)(s.A.exists(a.rt)),[h,f]=(0,n.useState)(s.A.exists(a.Gk));return(0,n.useEffect)(()=>{const g=s.A.subscribe(a.tH,()=>{c(s.A.exists(a.tH))}),u=s.A.subscribe(a.rt,()=>{o(s.A.exists(a.rt))}),E=s.A.subscribe(a.Gk,()=>{f(s.A.exists(a.Gk))});return()=>{g(),u(),E()}},[]),{hasCopiedPanel:r,hasCopiedRow:i,hasCopiedTab:h}}},61666:(ne,A,e)=>{"use strict";e.d(A,{G7:()=>r,KU:()=>c,eb:()=>i});var n=e(68143),a=e(73427),s=e(11257),l=e(52763);const r=(0,l.zD)("users/fetchInvitees",async()=>a.TP.hasPermission(s.w.OrgUsersAdd)?await(0,n.AI)().get("/api/org/invites"):[]),c=(0,l.zD)("users/addInvitee",async(o,{dispatch:h})=>{await(0,n.AI)().post("/api/org/invites",o),await h(r())}),i=(0,l.zD)("users/revokeInvite",async o=>(await(0,n.AI)().patch(`/api/org/invites/${o}/revoke`,{}),o))},61730:(ne,A,e)=>{"use strict";e.d(A,{m:()=>o});var n=e(74848),a=e(22803),s=e(92745),l=e(43173),r=e(71599),c=e(63142);const i=()=>{const f=(0,c.of)(h);return(0,n.jsx)("p",{className:f.description,children:l.$.featureToggles.newDashboardSharingComponent?(0,s.t)("shared-dashboard.delete-modal.revoke-body-text","Are you sure you want to revoke this access? The dashboard can no longer be shared."):(0,s.t)("public-dashboard.delete-modal.revoke-body-text","Are you sure you want to revoke this URL? The dashboard will no longer be public.")})},o=({onConfirm:f,onDismiss:g})=>{const u=l.$.featureToggles.newDashboardSharingComponent?(0,s.t)("shared-dashboard.delete-modal.revoke-title","Revoke access"):(0,s.t)("public-dashboard.delete-modal.revoke-title","Revoke public URL");return(0,n.jsx)(r.u,{isOpen:!0,body:(0,n.jsx)(i,{}),onConfirm:f,onDismiss:g,title:u,icon:"trash-alt",confirmText:u})},h=f=>({title:(0,a.css)({marginBottom:f.spacing(1)}),description:(0,a.css)({fontSize:f.typography.body.fontSize})})},61844:(ne,A,e)=>{"use strict";e.d(A,{Av:()=>o,OD:()=>i,kB:()=>r});var n=e(43173),a=e(72331),s=e(98060),l=e(6223);function r(h){return Object.keys(h).reduce((f,g)=>{const u=`${s.XV}:${g}`;return c(u,h[g]),a.s.set(g,h[g]),f[g]=u,f},{})}function c(h,f){if(l.z.has(h))return;let g;try{g=l.z.resolve(h)}catch(E){console.log(E)}if(g&&l.z.has(g))return;const u=g||h;typeof f=="function"?l.z.register(h,[],E=>({execute:async function(){const v=await f();E(v)}})):l.z.set(u,f)}function i(h){return!!n.$.pluginsCDNBaseURL&&h.startsWith(n.$.pluginsCDNBaseURL)}function o(h){return h.startsWith("http")||h.startsWith("/")?h:`${n.$.appSubUrl??""}/${h}`}},61875:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>f});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(63142),c=e(79233),i=e(89467),o=e(37864),h=e(3431);function f({options:g,value:u,onChange:E,Component:v,className:p,allowCustomValue:m,allowEmptyValue:y,placeholder:d,disabled:x,inputMinWidth:b,inputPlaceholder:D,onExpandedChange:C,autofocus:P=!1,...T}){const[O,S,B,K]=(0,h.Q)(P,C),U=b?Math.max(b,S):S,F=(0,r.of)(o.m);if(!B){const I=(0,s.isObject)(u)?u.label:u,V=I!=null?String(I):void 0;return(0,n.jsx)(O,{disabled:x,Component:v||(0,n.jsx)(c.c,{className:(0,a.cx)(F.segment,{[F.queryPlaceholder]:d!==void 0&&!u,[F.disabled]:x},p),children:V||d})})}return(0,n.jsx)(i.a,{...T,value:u&&!(0,s.isObject)(u)?{value:u}:u,placeholder:D,options:g,width:U,onClickOutside:()=>K(!1),allowCustomValue:m,allowEmptyValue:y,onChange:I=>{K(!1),E(I)}})}},61897:(ne,A,e)=>{"use strict";e.d(A,{$:()=>g,t:()=>f});var n=e(74848),a=e(96540),s=e(76637),l=e(16515),r=e(739),c=e(63142),i=e(54735),o=e(4268),h=e(36192);function f(u,E){return u.getSeries().some(v=>{const p=v.props.dataFrameFieldIndex;if(!p)return!1;const m=E[p.frameIndex]?.fields[p.fieldIndex];return!(!m||m.config.custom?.hideFrom?.legend)})}const g=(0,a.memo)(({data:u,config:E,placement:v,calcs:p,displayMode:m,...y})=>{const d=(0,c.$j)(),x=E.getSeries().map(b=>{const D=b.props,C=D.dataFrameFieldIndex,P=E.getAxisPlacement(b.props.scaleKey);if(!C)return;const T=u[C.frameIndex]?.fields[C.fieldIndex];if(!T||T.config.custom?.hideFrom?.legend)return;const O=(0,l.Ct)(T,u[C.frameIndex],u),B=(0,s.lz)(T,d).color;return{disabled:!(D.show??!0),fieldIndex:C,color:B,label:O,yAxis:P===r.vM.Left||P===r.vM.Bottom?1:2,getDisplayValues:()=>(0,h.UO)(p,T,d),getItemKey:()=>`${O}-${C.frameIndex}-${C.fieldIndex}`,lineStyle:D.lineStyle}}).filter(b=>b!==void 0);return(0,n.jsx)(i.KU.Legend,{placement:v,...y,children:(0,n.jsx)(o.t,{placement:v,items:x,displayMode:m,sortBy:y.sortBy,sortDesc:y.sortDesc,isSortable:!0})})});g.displayName="PlotLegend"},62215:(ne,A,e)=>{"use strict";e.d(A,{FE:()=>o,jE:()=>c,qE:()=>i});var n=e(2543),a=e.n(n),s=e(92745),l=e(62635),r=e(46072);const c=(u,E)=>o(u,E),i=u=>{let E=[];return u.forEach(v=>{v.links?.forEach(p=>{if("variables"in p&&p.variables.length>0){const m={href:p.href,title:p.title,origin:p.origin,onClick:p.onClick,target:p.target},y=p.variables.map(x=>{const b=x.variableName,D=x.fieldPath?`.${x.fieldPath}`:"";return`${b}${D}`}),d=p.variables.map(x=>x.found?x.value:"");E.push({keys:y,values:d,links:[m],fieldIndex:v.fieldIndex})}})}),E},o=(u,E)=>g(u).map(p=>{const m={__labels:{text:(0,s.t)("logs.get-dataframe-fields.vars.text.labels","Labels"),value:{tags:{...u.labels}}}},y=E?E(p,u.rowIndex,u.dataFrame,m):[],d=p.values[u.rowIndex],x=typeof d=="string"||typeof d=="number"?d.toString():(0,l.MA)(d);return{keys:[p.name],values:[x],links:y,fieldIndex:p.index}});function h(u,E){const v=(0,r.Os)(u);if(v===null)return new Set;const p=new Set(v.extraFields.map(m=>m.index));return v.severityField!==null&&p.add(v.severityField.index),E.keepBody&&p.add(v.bodyField.index),E.keepTimestamp&&p.add(v.timeField.index),p}function f(u,E){const v=u.fields.map((d,x)=>({...d,index:x})),p=h(u,E??{}),[m,y]=partition(v,d=>d.config.custom?.hidden?!1:(d.config.links??[]).length>0?!0:p.has(d.index));return{visible:m,hidden:y}}function g(u,E){const v=u.dataFrame,p=h(v,E??{}),m=[];for(let y=0;y<v.fields.length;y++){const d=v.fields[y];d.values[u.rowIndex]!=null&&(d.config.custom?.hidden||(d.config.links&&d.config.links.length>0||p.has(y))&&m.push({...d,index:y}))}return m}},62265:(ne,A,e)=>{"use strict";e.d(A,{AB:()=>ae,Cy:()=>S,GB:()=>d,Ic:()=>F,Xl:()=>v,c8:()=>P,lD:()=>C});var n=e(2543),a=e.n(n),s=e(43173),l=e(45863),r=e(10605),c=e(11393),i=e(88632),o=e(81657),h=e(1682),f=e(8285),g=e(2505),u=e(84500),E=e(39508);function v(q,k=!1){const ee=q.state,j=ee.$timeRange.state,J=ee.controls?.state,Z=J?.refreshPicker,te=q.serializer.getDSReferencesMapping(),se={title:ee.title,description:ee.description,cursorSync:p(ee),liveNow:m(ee),preload:ee.preload??(0,c.xE)().preload,editable:ee.editable??(0,c.xE)().editable,links:ee.links??(0,c.xE)().links,tags:ee.tags??(0,c.xE)().tags,timeSettings:{timezone:j.timeZone,from:j.from,to:j.to,autoRefresh:Z?.state.refresh||"",autoRefreshIntervals:Z?.state.intervals,hideTimepicker:J?.hideTimeControls??!1,weekStart:j.weekStart,fiscalYearStartMonth:j.fiscalYearStartMonth,nowDelay:j.UNSAFE_nowDelay,quickRanges:J?.timePicker.state.quickRanges},variables:B(ee,te),elements:y(q,te),annotations:K(ee,te),layout:ee.body.serialize()};try{if(I(se))return(0,r.v)(se,!0);throw new Error("Error we could transform the dashboard to schema v2: "+se)}catch(ie){throw console.error("Error transforming dashboard to schema v2: "+ie,se),new Error("Error transforming dashboard to schema v2: "+ie)}}function p(q){const k=q.$behaviors?.find(ee=>ee instanceof l.Gg.K2)?.state.sync;return(0,E.k6)(k)}function m(q){const k=q.$behaviors?.find(ee=>ee instanceof l.Gg.en)?.isEnabled||void 0;return k===void 0?!!(0,c.xE)().liveNow:!!k}function y(q,k){const j=(q.state.body.getVizPanels()??[]).map(J=>d(J,k));return S(j,q)}function d(q,k){if((0,f.ME)(q)){const Z=(0,f.iL)(q);return{kind:"LibraryPanel",spec:{id:(0,f.Cs)(q),title:q.state.title,libraryPanel:{uid:Z.state.uid,name:Z.state.name}}}}const ee=x(q),j={...q.state.fieldConfig,defaults:ee};return{kind:"Panel",spec:{id:(0,f.Cs)(q),title:q.state.title,description:q.state.description??"",links:b(q),transparent:q.state.displayMode==="transparent"?!0:void 0,data:{kind:"QueryGroup",spec:{queries:D(q,k),transformations:T(q),queryOptions:O(q)}},vizConfig:{kind:"VizConfig",group:q.state.pluginId,version:q.state.pluginVersion??"",spec:{options:q.state.options,fieldConfig:j??(0,c.bt)()}}}}}function x(q){if(!q.state.fieldConfig||!q.state.fieldConfig.defaults)return(0,c.QB)();const k=q.state.fieldConfig.defaults.color;let ee;if(k){const se=(0,E.Jc)(k.mode);se&&(ee={...k,mode:se})}const j=q.state.fieldConfig.defaults.decimals??void 0,J=q.state.fieldConfig.defaults.min??void 0,Z=q.state.fieldConfig.defaults.max??void 0;return Object.fromEntries(Object.entries({...q.state.fieldConfig.defaults,decimals:j,min:J,max:Z,color:ee}).filter(([se,ie])=>Array.isArray(ie)?ie.length>0:ie!==void 0))}function b(q){const k=h.b4.getPanelLinks(q);return k?k.state.rawLinks??[]:[]}function D(q,k){const ee=[],j=(0,f.un)(q),J=j?.state.queries;return J&&J.forEach(Z=>{const te=ae(q,Z,"panel",j,k),se={kind:"DataQuery",version:(0,c.iM)().version,group:C(Z,j),datasource:{name:te?.uid},spec:(0,n.omit)(Z,"datasource","refId","hide")};se.datasource?.name||delete se.datasource;const ie={query:se,refId:Z.refId,hidden:!!Z.hide};ee.push({kind:"PanelQuery",spec:ie})}),ee}function C(q,k){return typeof q=="string"?F()?.type||"":q.datasource?.type?q.datasource.type:k?.state.datasource?.type?k.state.datasource.type:F()?.type||""}function P(q){return q}function T(q){let k=[];const ee=q.state.$data;if(ee instanceof l.Es){const j=ee.state.transformations;if(j.length===0)return[];for(const J of j){const Z=J;if("id"in Z){const te={id:Z.id,disabled:Z.disabled,filter:Z.filter,...Z.topic&&{topic:Z.topic},options:Z.options};k.push({kind:Z.id,spec:te})}else throw new Error("Unsupported transformation type")}}return k}function O(q){let k={};const ee=(0,f.un)(q);ee&&(k.maxDataPoints=ee.state.maxDataPoints,ee.state.cacheTimeout&&(k.cacheTimeout=ee.state.cacheTimeout),ee.state.queryCachingTTL&&(k.queryCachingTTL=ee.state.queryCachingTTL),ee.state.minInterval&&(k.interval=ee.state.minInterval));const j=q.state.$timeRange;return j instanceof o.v&&(k.timeFrom=j.state.timeFrom,k.timeShift=j.state.timeShift,k.hideTimeOverride=j.state.hideTimeOverride),k}function S(q,k){return q.reduce((ee,j)=>{let J=k.serializer.getElementIdForPanel(j.spec.id);return ee[J]=j,ee},{})}function B(q,k){const ee=q.$variables;let j=[];return ee instanceof l.Pj&&(j=(0,u.$o)(ee,!1,k)),j}function K(q,k){const ee=q.$data;if(!(ee instanceof i.s))return[];const j=[];for(const J of ee.state.annotationLayers){if(!(J instanceof l.tV.g))continue;const Z=ae(J,J.state.query,"annotation",void 0,k);let te=J.state.query.datasource;te||(te=F(),console.error("Misconfigured AnnotationsDataLayer: Data source is required for annotations. Resolving default data source",J,te));const se=(0,g.m)(J.state.query,te.type,te.uid,{enable:J.state.isEnabled,hide:J.state.isHidden}),ie=J.state.query;ie.filter?.ids?.length&&(se.spec.filter=ie.filter),Z||delete se.spec.query.datasource,j.push(se)}return j}function U(q){if(q.datasource?.type)return q.datasource.type;{const k=F();return k?k.type:"grafana"}}function F(){const q=s.$.defaultDatasource,ee=s.$.datasources[q];return{type:ee.meta.id,uid:ee.name}}function I(q){if(typeof q!="object"||q===null||Array.isArray(q))throw new Error("Dashboard is not an object or is null");if(!("title"in q)||typeof q.title!="string")throw new Error("Title is not a string");if(!("timeSettings"in q)||typeof q.timeSettings!="object"||q.timeSettings===null)throw new Error("TimeSettings is not an object or is null");if(!("variables"in q)||!Array.isArray(q.variables))throw new Error("Variables is not an array");if(!("elements"in q)||typeof q.elements!="object"||q.elements===null)throw new Error("Elements is not an object or is null");if(!("annotations"in q)||!Array.isArray(q.annotations))throw new Error("Annotations is not an array");if(!("layout"in q)||typeof q.layout!="object"||q.layout===null)throw new Error("Layout is not an object or is null");if("description"in q&&q.description!==void 0&&typeof q.description!="string")throw new Error("Description is not a string");if("cursorSync"in q&&q.cursorSync!==void 0){const ee=["Off","Crosshair","Tooltip"];if(typeof q.cursorSync!="string"||!ee.includes(q.cursorSync))throw new Error("CursorSync is not a valid value")}if("liveNow"in q&&q.liveNow!==void 0&&typeof q.liveNow!="boolean")throw new Error("LiveNow is not a boolean");if("preload"in q&&q.preload!==void 0&&typeof q.preload!="boolean")throw new Error("Preload is not a boolean");if("editable"in q&&q.editable!==void 0&&typeof q.editable!="boolean")throw new Error("Editable is not a boolean");if("links"in q&&q.links!==void 0&&!Array.isArray(q.links))throw new Error("Links is not an array");if("tags"in q&&q.tags!==void 0&&!Array.isArray(q.tags))throw new Error("Tags is not an array");if("id"in q&&q.id!==void 0&&typeof q.id!="number")throw new Error("ID is not a number");const k=q.timeSettings;if(!("from"in k)||typeof k.from!="string")throw new Error("From is not a string");if(!("to"in k)||typeof k.to!="string")throw new Error("To is not a string");if(!("autoRefresh"in k)||typeof k.autoRefresh!="string")throw new Error("AutoRefresh is not a string");if(!("hideTimepicker"in k)||typeof k.hideTimepicker!="boolean")throw new Error("HideTimepicker is not a boolean");if("autoRefreshIntervals"in k&&k.autoRefreshIntervals!==void 0&&!Array.isArray(k.autoRefreshIntervals))throw new Error("AutoRefreshIntervals is not an array");if("timezone"in k&&k.timezone!==void 0&&typeof k.timezone!="string")throw new Error("Timezone is not a string");if("quickRanges"in k&&k.quickRanges!==void 0&&!Array.isArray(k.quickRanges))throw new Error("QuickRanges is not an array");if("weekStart"in k&&k.weekStart!==void 0&&(typeof k.weekStart!="string"||!["saturday","sunday","monday"].includes(k.weekStart)))throw new Error('WeekStart should be one of "saturday", "sunday" or "monday"');if("nowDelay"in k&&k.nowDelay!==void 0&&typeof k.nowDelay!="string")throw new Error("NowDelay is not a string");if("fiscalYearStartMonth"in k&&k.fiscalYearStartMonth!==void 0&&typeof k.fiscalYearStartMonth!="number")throw new Error("FiscalYearStartMonth is not a number");if(!("kind"in q.layout))throw new Error("Layout kind is required");return q.layout.kind==="GridLayout"?V(q.layout):q.layout.kind==="RowsLayout"&&M(q.layout),!0}function V(q){if(typeof q!="object"||q===null)throw new Error("Layout is not an object or is null");if(!("kind"in q)||q.kind!=="GridLayout")throw new Error("Layout kind is not GridLayout");if(!("spec"in q)||typeof q.spec!="object"||q.spec===null)throw new Error("Layout spec is not an object or is null");if(!("items"in q.spec)||!Array.isArray(q.spec.items))throw new Error("Layout spec items is not an array")}function M(q){if(typeof q!="object"||q===null)throw new Error("Layout is not an object or is null");if(!("kind"in q)||q.kind!=="RowsLayout")throw new Error("Layout kind is not RowsLayout");if(!("spec"in q)||typeof q.spec!="object"||q.spec===null)throw new Error("Layout spec is not an object or is null");if(!("rows"in q.spec)||!Array.isArray(q.spec.rows))throw new Error("Layout spec items is not an array")}function L(q,k,ee){if(!ee)return new Set;if(k==="panels"&&R(q)){const j=h.b4.getElementIdentifierForVizPanel(q);return ee.panels.get(j)||new Set}if(k==="variables")return ee.variables;if(k==="annotations")return ee.annotations;throw new Error(`Invalid type ${k} for getAutoAssignedDSRef`)}function N(q,k,ee,j){const J=W(q,ee);if(!k?.has(J)){if(ee==="query")return"datasource"in q&&q.datasource?q.datasource:j?.state?.datasource;if(ee==="variable"&&"state"in q&&"datasource"in q.state)return q.state.datasource||{};if(ee==="annotation"&&"datasource"in q)return q.datasource||{}}}function W(q,k){if(k==="query")return"refId"in q?q.refId:"";if(k==="variable")return"state"in q&&"name"in q.state?q.state.name:"";if(k==="annotation")return"name"in q?q.name:"";throw new Error(`Invalid type ${k} for getElementIdentifier`)}function R(q){return"pluginId"in q.state}function G(q){return!("pluginId"in q.state)&&("variables"in q.state||"getValue"in q)}function w(q){return"refId"in q&&!("state"in q)}function _(q){return"datasource"in q&&"name"in q}function Q(q){return"state"in q&&"name"in q.state}function ae(q,k,ee,j,J){let Z;if(ee==="panel"){if(!j||!R(q)||!w(k))return;const te=L(q,"panels",J);Z=N(k,te,"query",j)}if(ee==="variable"){if(!G(q)||!Q(k))return;const te=L(q,"variables",J);Z=N(k,te,"variable")}if(ee==="annotation"){if(!_(k))return;const te=L(q,"annotations",J);Z=N(k,te,"annotation")}return Object.keys(Z||{}).length>0?Z:void 0}},62348:(ne,A,e)=>{"use strict";e.d(A,{X:()=>c,f:()=>r});var n=e(33239),a=e(25229),s=e(44922),l=e(67511);function r(i,o,h){return(0,a.Ar)(i)?i.isValid():n.isMathString(i)?n.isValid(i):(0,s.b)(i,{roundUp:o,timeZone:h,format:l.d}).isValid()}function c(i){return n.isValid(i.from)&&n.isValid(i.to)}},62392:(ne,A,e)=>{"use strict";e.d(A,{p:()=>l});var n=e(74848),a=e(96540),s=e(79450);function l(r){const{children:c,instanceSettings:i}=r,o=(0,a.useMemo)(()=>({instanceSettings:i,meta:i.meta}),[i]);return(0,n.jsx)(s.b.Provider,{value:o,children:c})}},62421:(ne,A,e)=>{"use strict";e.d(A,{F:()=>l});var n=e(32899),a=e(45229),s=e(5709);const l=s.H.injectEndpoints({endpoints:r=>({getSilences:r.query({query:({datasourceUid:c,ruleMetadata:i,accessControl:o})=>({url:`/api/alertmanager/${c}/api/v2/silences`,params:{ruleMetadata:i,accesscontrol:o}}),providesTags:c=>c?[...c.map(({id:i})=>({type:"AlertmanagerSilences",id:i})),{type:"AlertmanagerSilences"}]:[{type:"AlertmanagerSilences"}]}),getSilence:r.query({query:({datasourceUid:c,id:i,ruleMetadata:o,accessControl:h})=>({url:`/api/alertmanager/${c}/api/v2/silence/${i}`,showErrorAlert:!1,params:{ruleMetadata:o,accesscontrol:h}}),providesTags:(c,i,{id:o})=>c?[{type:"AlertmanagerSilences",id:o}]:["AlertmanagerSilences"]}),createSilence:r.mutation({query:({datasourceUid:c,payload:i})=>({url:`/api/alertmanager/${c}/api/v2/silences`,method:"POST",data:i}),invalidatesTags:["AlertmanagerSilences","AlertmanagerAlerts"],onQueryStarted:async(c,{queryFulfilled:i})=>{try{await i,a.A.emit(n.r1.alertSuccess,["Silence created"])}catch{a.A.emit(n.r1.alertError,["Could not create silence"])}}}),expireSilence:r.mutation({query:({datasourceUid:c,silenceId:i})=>({url:`/api/alertmanager/${c}/api/v2/silence/${i}`,method:"DELETE"}),invalidatesTags:["AlertmanagerSilences"]})})})},62635:(ne,A,e)=>{"use strict";e.d(A,{HQ:()=>x,Ll:()=>K,MA:()=>S,WP:()=>p,Xe:()=>C,_u:()=>W,bI:()=>T,dY:()=>M,di:()=>F,dr:()=>b,eF:()=>U,o$:()=>D,uE:()=>N,uJ:()=>G,uq:()=>P,w4:()=>O,zT:()=>V,zq:()=>L});var n=e(43561),a=e(24726),s=e(739),l=e(39796),r=e(92138),c=e(5556),i=e(17548),o=e(1906),h=e(22592),f=e(78282),g=e(90811),u=e(29043),E=e(4651);const v={dedupStrategy:s.fY.none},p="0123456789abcdefghijklmnopqrstuvwxyz",m=(0,n.d_)(p,3),y="grafana.explore.datasource",d=w=>`${y}.${w}`,x=w=>u.A.getObject(d(w)),b=(w,_)=>u.A.setObject(d(w),_);function D(){for(;;){const w=m(3);if(!/^\d+$/.test(w))return w}}async function C(w){const{queries:_,dsRef:Q,timeRange:ae,scopedVars:q,adhocFilters:k}=w,ee=(await Promise.allSettled(_.filter(J=>J.datasource?.uid!==E.Uj).map(async J=>{const Z=await(0,f.l)().get(J.datasource||Q);return{...Z.interpolateVariablesInQueries?.([J],q??{},k)[0]||J,...!Z.meta.mixed&&{datasource:Z.getRef()}}}))).filter(J=>J.status==="fulfilled").map(J=>J.value),j=JSON.stringify({[D()]:{range:(0,c.sQ)(ae.raw),queries:ee,datasource:Q?.uid}});return r.I.assureBaseUrl(c.kM.renderUrl("/explore",{panes:j,schemaVersion:1}))}function P(w){return`explore_${w}`}function T(w,_,Q,ae,q,k,ee){const j=Number.parseInt(w,36),{interval:J,intervalMs:Z}=R(ae,Q.minInterval,Q.maxDataPoints),te={app:o.Jk.Explore,timezone:k||h.lE,startTime:Date.now(),interval:J,intervalMs:Z,panelId:j,targets:_,range:ae,requestId:P(w),rangeRaw:ae.raw,scopedVars:{__interval:{text:J,value:J},__interval_ms:{text:Z,value:Z},...ee},maxDataPoints:Q.maxDataPoints,liveStreaming:Q.liveStreaming,skipQueryCache:!0};return{queries:_,request:te,scanning:q,id:B(),done:!1}}const O=({key:w,..._})=>_,S=(w,_)=>{if(w==null)return"";try{return JSON.stringify(w,null,_)}catch(Q){console.error(Q)}return""};function B(w=0){return`Q-${(0,a.A)()}-${w}`}async function K(w,_=0,Q){let ae,q,k;return Q?q=Q:w.length>0&&w[w.length-1].datasource?q=w[w.length-1].datasource:(ae=await(0,f.l)().get(),k=ae.getDefaultQuery?.(o.Jk.Explore),q=ae.getRef()),ae||(ae=await(0,f.l)().get(q),k=ae.getDefaultQuery?.(o.Jk.Explore)),{...k,refId:(0,l.M)(w),key:B(_),datasource:q}}const U=(w,_,Q=0)=>{const ae=B(Q),q=w.refId||(0,l.M)(_);return{...w,refId:q,key:ae}};async function F(w,_){if(w&&typeof w=="object"&&w.length>0){const Q=[];for(let ae=0;ae<w.length;ae++){const q=w[ae],k=B(ae);let ee=q.refId;ee||(ee=(0,l.M)(Q));let j=!0;if(q.datasource)try{await(0,f.l)().get(q.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),j=!1}j&&Q.push({...q,refId:ee,key:k})}return Q}try{const Q=_??(await(0,f.l)().get()).getRef();return[await K(w??[],void 0,Q)]}catch{return[]}}const I=["refId","key","context","datasource"];function V(w){return w&&w.some(_=>Object.entries(_).filter(([ae,q])=>I.indexOf(ae)===-1).filter(([ae,q])=>q).length>0)}const M=w=>w.reduce((Q,ae,q)=>{const k=ae.datasource?.uid||ae.key;return Q.concat(`${k}-${q}`)},[]),L=(w,_,Q)=>i.convertRawToRange(_,w,Q),N=w=>g.cC.isLive(w)?s.uH.Ascending:s.uH.Descending,W=w=>{w&&w.unsubscribe()};function R(w,_,Q){return Q?i.calculateInterval(w,Q,_):{interval:"1s",intervalMs:1e3}}const G=w=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(w);else{const _=document.createElement("textarea");_.value=w,document.body.appendChild(_),_.select(),document.execCommand("copy"),document.body.removeChild(_)}}},62667:(ne,A,e)=>{"use strict";e.d(A,{M8:()=>n,Nt:()=>l,__:()=>c,q5:()=>a});var n=(i=>(i.Query="query",i.Transform="transform",i.Visualize="visualize",i.Alert="alert",i))(n||{}),a=(i=>(i[i.Fill=0]="Fill",i[i.Fit=1]="Fit",i[i.Exact=2]="Exact",i))(a||{}),s=(i=>(i[i.Off=0]="Off",i[i.Table=1]="Table",i))(s||{});const l=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],r=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var c=(i=>(i[i.Visualizations=0]="Visualizations",i[i.LibraryPanels=1]="LibraryPanels",i[i.Suggestions=2]="Suggestions",i))(c||{})},62693:(ne,A,e)=>{"use strict";e.d(A,{A:()=>E,zA:()=>f});var n=e(74848),a=e(96540),s=e(36638),l=e(57866),r=e(95004),c=e(92745),i=e(97958),o=e(18857);const h=(0,a.memo)(v=>{const{data:p,options:m,onChange:y,id:d}=v,x=g(p),b=u(x,m),D=(0,a.useCallback)(P=>y(P.value),[y]),C=b.find(P=>P.value===m);return(0,n.jsx)(o.l6,{inputId:d,value:C,options:b,onChange:D})});h.displayName="FieldTypeMatcherEditor";const f=()=>[{value:r.PU.number,label:(0,c.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-number","Number"),icon:(0,i.lV)(r.PU.number)},{value:r.PU.string,label:(0,c.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-string","String"),icon:(0,i.lV)(r.PU.string)},{value:r.PU.time,label:(0,c.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-time","Time"),icon:(0,i.lV)(r.PU.time)},{value:r.PU.boolean,label:(0,c.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-boolean","Boolean"),icon:(0,i.lV)(r.PU.boolean)},{value:r.PU.trace,label:(0,c.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-traces","Traces"),icon:(0,i.lV)(r.PU.trace)},{value:r.PU.enum,label:(0,c.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-enum","Enum"),icon:(0,i.lV)(r.PU.enum)},{value:r.PU.other,label:(0,c.t)("grafana-ui.matchers-ui.get-all-field-type-icon-options.label-other","Other"),icon:(0,i.lV)(r.PU.other)}],g=v=>(0,a.useMemo)(()=>{const p=new Map;for(const m of f())p.set(m.value,0);for(const m of v)for(const y of m.fields){const d=y.type||r.PU.other;let x=p.get(d);x||(x=0),p.set(d,x+1)}return p},[v]),u=(v,p)=>(0,a.useMemo)(()=>{let m=!1;const y=[];for(const d of f()){const x=v.get(d.value),b=p===d.value;(x||b)&&y.push({...d,label:`${d.label} (${v.get(d.value)})`}),b&&(m=!0)}return p&&!m&&y.push({value:p,label:`${p} (No matches)`}),y},[v,p]),E=()=>({id:l.Ct.byType,component:h,matcher:s.sJ.get(l.Ct.byType),name:(0,c.t)("grafana-ui.matchers-ui.name-fields-with-type","Fields with type"),description:(0,c.t)("grafana-ui.matchers-ui.description-fields-with-type","Set properties for fields of a specific type (number, string, boolean)"),optionsToLabel:v=>v})},62717:(ne,A,e)=>{"use strict";e.d(A,{HD:()=>o,P3:()=>f,QZ:()=>h,U3:()=>g,g$:()=>c,le:()=>i});var n=e(2543),a=e.n(n),s=e(84743),l=e.n(s),r=e(60188),c=(y=>(y.default="",y.localBrowserTime="browser",y.utc="utc",y))(c||{});const i=y=>{switch((0,r.O)({timeZone:y})){case"browser":return"Local browser time";case"utc":return"UTC";default:return y}},o=y=>l().tz.zone(y),h=(y,d)=>{const x=u(y,d);return x||v(y,d)},f=(0,n.memoize)((y=!1)=>{const d=[];return y===!0?d.push("","browser","utc"):y&&d.push(...y),l().tz.names().reduce((x,b)=>{const D=m[b];return!Array.isArray(D)||D.length===0||x.push(b),x},d)}),g=(0,n.memoize)((y=!1)=>{const x=f(y).reduce((b,D)=>{const C=D.indexOf("/");if(C===-1)return b[""]=b[""]??[],b[""].push(D),b;const P=D.slice(0,C);return b[P]=b[P]??[],b[P].push(D),b},{});return Object.keys(x).map(b=>({name:b,zones:x[b]}))}),u=(y,d)=>{switch(y){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:y,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const x=(0,r.O)(),D=x==="browser"||x==="utc"?u(x,d):v(x,d);return{countries:m[x]??[],abbreviation:"",offsetInMins:0,...D,ianaName:D?.ianaName??"",name:"Default",zone:y}}case"browser":{const x=l().tz.guess(!0),b=v(x,d);return{countries:m[x]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...b,name:"Browser Time",ianaName:b?.ianaName??"",zone:y}}default:return}},E=y=>/^(\+|\-).+/.test(y)?"":y,v=(y,d)=>{const x=l().tz.zone(y);if(x)return{name:y,ianaName:x.name,zone:y,countries:m[y]??[],abbreviation:E(x.abbr(d)),offsetInMins:x.utcOffset(d)}},p={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},m=l().tz.countries().reduce((y,d)=>l().tz.zonesForCountry(d).reduce((b,D)=>{b[D]||(b[D]=[]);const C=p[d];return!C||d==="AQ"&&!D.startsWith("Antarctica/")||b[D].push({code:d,name:C}),b},y),{})},62748:(ne,A,e)=>{"use strict";e.d(A,{R:()=>a,s:()=>n});const n="__fixed";class a{constructor(l){this.props=l}}},62905:(ne,A,e)=>{"use strict";e.d(A,{$L:()=>x,AK:()=>D,Bs:()=>E,NA:()=>b,NY:()=>d,Sm:()=>u,T2:()=>p,U9:()=>v,_e:()=>y,bN:()=>m,eq:()=>T,ft:()=>O,g9:()=>P,kd:()=>C});var n=e(75816),a=e(92745),s=e(68143),l=e(43173),r=e(73892),c=e(6890),i=e(64762),o=e(24313),h=e(11534);function f(S){return typeof S=="object"&&S!=null&&"error"in S}const g=S=>({error:(0,s.NF)(S)&&S.data.messageId!=="publicdashboards.notFound"?S:null}),u=(0,n.xP)({reducerPath:"publicDashboardApi",baseQuery:(0,r.W)({baseURL:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"],refetchOnMountOrArgChange:!0,endpoints:S=>({getPublicDashboard:S.query({query:B=>({url:`/dashboards/uid/${B}/public-dashboards`,manageError:g,showErrorAlert:!1}),async onQueryStarted(B,{dispatch:K,queryFulfilled:U}){try{await U}catch(F){f(F)&&(0,s.NF)(F.error)&&l.$.publicDashboardsEnabled&&K((0,c.dx)((0,i.gi)(F.error.data.message)))}},providesTags:(B,K,U)=>[{type:"PublicDashboard",id:U}]}),createPublicDashboard:S.mutation({query:B=>({url:`/dashboards/uid/${B.dashboard instanceof h.H$?B.dashboard.state.uid:B.dashboard.uid}/public-dashboards`,method:"POST",body:B.payload}),async onQueryStarted({dashboard:B,payload:{share:K}},{dispatch:U,queryFulfilled:F}){const{data:I}=await F;let V=(0,a.t)("public-dashboard.sharing.success-creation","Dashboard is public!");l.$.featureToggles.newDashboardSharingComponent&&(V=K===o.Xo.PUBLIC?(0,a.t)("public-dashboard.public-sharing.success-creation","Your dashboard is now publicly accessible"):(0,a.t)("public-dashboard.email-sharing.success-creation","Your dashboard is ready for external sharing")),U((0,c.dx)((0,i.tZ)(V))),B instanceof h.H$?B.setState({meta:{...B.state.meta,publicDashboardEnabled:I.isEnabled}}):B.updateMeta({publicDashboardEnabled:I.isEnabled})},invalidatesTags:(B,K,{dashboard:U})=>[{type:"PublicDashboard",id:U instanceof h.H$?U.state.uid:U.uid}]}),updatePublicDashboard:S.mutation({query:({payload:B,dashboard:K})=>({url:`/dashboards/uid/${K instanceof h.H$?K.state.uid:K.uid}/public-dashboards/${B.uid}`,method:"PATCH",body:B}),async onQueryStarted({dashboard:B},{dispatch:K,queryFulfilled:U}){await U,K((0,c.dx)((0,i.tZ)(l.$.featureToggles.newDashboardSharingComponent?(0,a.t)("public-dashboard.configuration.success-update","Settings have been successfully updated"):(0,a.t)("public-dashboard.configuration.success-update-old","Public dashboard updated!"))))},invalidatesTags:(B,K,{payload:U})=>[{type:"PublicDashboard",id:U.dashboardUid},"AuditTablePublicDashboard"]}),pauseOrResumePublicDashboard:S.mutation({query:({payload:B,dashboard:K})=>({url:`/dashboards/uid/${K instanceof h.H$?K.state.uid:K.uid}/public-dashboards/${B.uid}`,method:"PATCH",body:B}),async onQueryStarted({dashboard:B,payload:{isEnabled:K}},{dispatch:U,queryFulfilled:F}){const{data:I}=await F;let V=(0,a.t)("public-dashboard.configuration.success-update-old","Public dashboard updated!");l.$.featureToggles.newDashboardSharingComponent&&(V=K?(0,a.t)("public-dashboard.configuration.success-resume","Your dashboard access has been resumed"):(0,a.t)("public-dashboard.configuration.success-pause","Your dashboard access has been paused")),U((0,c.dx)((0,i.tZ)(V))),B instanceof h.H$?B.setState({meta:{...B.state.meta,publicDashboardEnabled:I.isEnabled}}):B.updateMeta?.({publicDashboardEnabled:I.isEnabled})},invalidatesTags:(B,K,{payload:U})=>[{type:"PublicDashboard",id:U.dashboardUid},"AuditTablePublicDashboard"]}),updatePublicDashboardAccess:S.mutation({query:({payload:B,dashboard:K})=>({url:`/dashboards/uid/${K instanceof h.H$?K.state.uid:K.uid}/public-dashboards/${B.uid}`,method:"PATCH",body:B}),async onQueryStarted({dashboard:B,payload:{share:K}},{dispatch:U,queryFulfilled:F}){await F;let I=(0,a.t)("public-dashboard.configuration.success-update-old","Public dashboard updated!");l.$.featureToggles.newDashboardSharingComponent&&(I=K===o.Xo.PUBLIC?(0,a.t)("public-dashboard.public-sharing.success-share-type-change","Dashboard access updated: Anyone with the link can now access"):(0,a.t)("public-dashboard.email-sharing.success-share-type-change","Dashboard access updated: Only specific people can now access with the link")),U((0,c.dx)((0,i.tZ)(I)))},invalidatesTags:(B,K,{payload:U})=>[{type:"PublicDashboard",id:U.dashboardUid},"AuditTablePublicDashboard"]}),addRecipient:S.mutation({query:()=>({url:""})}),deleteRecipient:S.mutation({query:()=>({url:""})}),reshareAccessToRecipient:S.mutation({query:()=>({url:""})}),getActiveUsers:S.query({query:()=>({url:"/"}),providesTags:["UsersWithActiveSessions"]}),getActiveUserDashboards:S.query({query:()=>({url:""}),providesTags:(B,K,U)=>[{type:"ActiveUserDashboards",id:U}]}),listPublicDashboards:S.query({query:(B=1)=>({url:`/dashboards/public-dashboards?page=${B}&perpage=8`}),transformResponse:B=>({...B,totalPages:Math.ceil(B.totalCount/B.perPage)}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:S.mutation({query:B=>({url:`/dashboards/uid/${B.dashboardUid}/public-dashboards/${B.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:B},{dispatch:K,queryFulfilled:U}){await U,K((0,c.dx)((0,i.tZ)(l.$.featureToggles.newDashboardSharingComponent?(0,a.t)("public-dashboard.share.success-delete","Your dashboard is no longer shareable"):(0,a.t)("public-dashboard.share.success-delete-old","Public dashboard deleted!")))),K(u.util?.resetApiState()),B instanceof h.H$?B.setState({meta:{...B.state.meta,publicDashboardEnabled:!1}}):B?.updateMeta({publicDashboardEnabled:!1})},invalidatesTags:(B,K,{dashboardUid:U})=>[{type:"PublicDashboard",id:U},"AuditTablePublicDashboard","UsersWithActiveSessions","ActiveUserDashboards"]}),revokeAllAccess:S.mutation({query:()=>({url:""})})})}),{useGetPublicDashboardQuery:E,useCreatePublicDashboardMutation:v,useUpdatePublicDashboardMutation:p,useDeletePublicDashboardMutation:m,useListPublicDashboardsQuery:y,useAddRecipientMutation:d,useDeleteRecipientMutation:x,useReshareAccessToRecipientMutation:b,useGetActiveUsersQuery:D,useGetActiveUserDashboardsQuery:C,useRevokeAllAccessMutation:P,usePauseOrResumePublicDashboardMutation:T,useUpdatePublicDashboardAccessMutation:O}=u},62939:(ne,A,e)=>{"use strict";e.d(A,{E:()=>s,R:()=>a});var n=e(68143);function a(l){if(s(l))return null;throw l}function s(l){return(0,n.NF)(l)&&l.status===404}},62963:(ne,A,e)=>{"use strict";e.d(A,{Gf:()=>i,I2:()=>l,X2:()=>o,_0:()=>r,aY:()=>c,eM:()=>s});var n=e(43173),a=e(73427);function s(h,f){return h+f.uid}function l(h){return h===n.$.sharedWithMeFolderUID}function r(h){const{orgId:f}=a.TP.user,u=`${n.$.appSubUrl??""}/dashboards/f/${h}/`;return f?`${u}?orgId=${f}`:u}function c(h){const f=[];for(const[g,u]of Object.entries(h.folder))u&&f.push({name:g,group:"folder.grafana.app",kind:"Folder"});for(const[g,u]of Object.entries(h.dashboard))u&&f.push({name:g,group:"dashboard.grafana.app",kind:"Dashboard"});return f}function i(h,f){const{canEditFolders:g,canDeleteFolders:u,canEditDashboards:E,canDeleteDashboards:v}=f;return h==="folder"?!!(g||u):!!(E||v)}function o(h){const{canEditFolders:f,canDeleteFolders:g,canEditDashboards:u,canDeleteDashboards:E}=h;return!!(f||g||(u||E))}},63152:(ne,A,e)=>{"use strict";e.d(A,{g:()=>x});var n=e(42954),a=e(74848),s=e(96540),l=e(57866),r=e(36638),c=e(92745),i=e(63527);const o=(0,s.memo)(b=>{const{options:D,onChange:C}=b,P=(0,s.useCallback)(T=>C(T.target.value),[C]);return(0,a.jsx)(i.p,{placeholder:(0,c.t)("grafana-ui.field-name-by-regex-matcher.input-placeholder","Enter regular expression"),defaultValue:D,onBlur:P})});o.displayName="FieldNameByRegexMatcherEditor";const h=()=>({id:l.Ct.byRegexp,component:o,matcher:r.sJ.get(l.Ct.byRegexp),name:(0,c.t)("grafana-ui.matchers-ui.name-field-name-by-regex-matcher","Fields with name matching regex"),description:(0,c.t)("grafana-ui.matchers-ui.description-field-name-by-regex-matcher","Set properties for fields with names matching a regex"),optionsToLabel:b=>b});var f=e(18857),g=e(56755);const u=(0,s.memo)(b=>{const{data:D,options:C,onChange:P,id:T}=b,O=(0,g.sE)(D),S=(0,g.m3)(O,C),B=(0,s.useCallback)(U=>{if((0,g.v3)(U.value,O))return P(U.value)},[O,P]),K=S.find(U=>U.value===C);return(0,a.jsx)(f.l6,{value:K,options:S,onChange:B,inputId:T})});u.displayName="FieldNameMatcherEditor";const E=()=>({id:l.Ct.byName,component:u,matcher:r.sJ.get(l.Ct.byName),name:(0,c.t)("grafana-ui.matchers-ui.name-fields-with-name","Fields with name"),description:(0,c.t)("grafana-ui.matchers-ui.description-fields-with-name","Set properties for a specific field"),optionsToLabel:b=>b}),v=(0,s.memo)(b=>{const{data:D,options:C,onChange:P}=b,{readOnly:T,prefix:O}=C,S=(0,g.sE)(D),B=(0,g.m3)(S,void 0),K=(0,s.useCallback)(U=>{if(Array.isArray(U))return P({...C,names:U.reduce((F,I)=>((0,g.v3)(I.value,S)&&F.push(I.value),F),[])})},[S,P,C]);if(T){const U=(C.names??[]).join(", ");return(0,a.jsx)(i.p,{value:U,readOnly:!0,disabled:!0,prefix:O})}return(0,a.jsx)(f.KF,{value:C.names,options:B,onChange:K})});v.displayName="FieldNameMatcherEditor";const p=()=>({id:l.Ct.byNames,component:v,matcher:r.sJ.get(l.Ct.byNames),name:(0,c.t)("grafana-ui.matchers-ui.name-fields-with-name","Fields with name"),description:(0,c.t)("grafana-ui.matchers-ui.description-fields-with-name","Set properties for a specific field"),optionsToLabel:b=>(b.names??[]).join(", "),excludeFromPicker:!0});var m=e(62693),y=e(18105),d=e(88531);const x=new n.O(()=>[E(),h(),(0,m.A)(),(0,d.pd)(),p(),(0,y.RH)()])},63267:(ne,A,e)=>{"use strict";e.d(A,{I:()=>s});var n=e(2543),a=e.n(n);function s(l,r){let c=0,i=l.indexOf(r);r=r.replace(/\s/g,"");const o=[];if(i!==-1)return{distance:0,found:!0,ranges:[{start:i,end:i+r.length-1}]};for(const h of r){const f=l.indexOf(h,i);if(f===-1)return{distance:1/0,ranges:[],found:!1};if(i!==-1&&(c+=f-i),i=f+1,o.length===0)o.push({start:f,end:f});else{const g=(0,n.last)(o);f===g.end+1?g.end++:o.push({start:f,end:f})}}return{distance:c,ranges:o,found:!0}}},63409:(ne,A,e)=>{"use strict";e.d(A,{M:()=>l});var n=e(95004);const a={threshold:(c,i,o)=>c+o,midpoint:(c,i,o)=>(c+i)/2,plusone:(c,i,o)=>c+1};function s(c,i){return c.fields.find(o=>i!=null?o.name===i:o.type===n.PU.time)}function l(c){if(c.frame.length===0)return c.frame;let i=!0,{frame:o,refFieldName:h,refFieldPseudoMax:f,refFieldPseudoMin:g,insertMode:u}=c;u||(u=a.threshold);const E=s(o,h);if(E==null)return o;E.state={...E.state,nullThresholdApplied:!0};const v=o.fields.map(m=>m.config.custom?.insertNulls||E.config.interval||null),p=new Set(v);if(p.delete(null),p.size===0)return o;if(p.size===1){const m=p.values().next().value;if(!m||m<=0)return o;const y=E.values,d=o.fields.map(b=>b.values),x=r(y,d,m,g,f,u,i);return x===d?o:{...o,length:x[0].length,fields:o.fields.map((b,D)=>({...b,values:x[D]}))}}return o}function r(c,i,o,h=null,f=null,g,u){const E=c.length,v=[];if(h!=null&&h<c[0]){let d=Math.ceil((c[0]-h)/o),x=c[0]-d*o;for(;x<c[0];)v.push(g(x-o,x,o)),x+=o}v.push(c[0]);let p=c[0];for(let d=1;d<E;d++){const x=c[d];for(;x-p>o&&(v.push(g(p,x,o)),p+=o,!!u););v.push(x),p=x}if(f!=null&&f>p)for(;p+o<f;)v.push(g(p,f,o)),p+=o;const m=v.length;if(m===E)return i;const y=[];for(let d of i){let x;if(d!==c){x=Array(m);for(let b=0,D=0;b<m;b++)x[b]=c[D]===v[b]?d[D++]:null}else x=v;y.push(x)}return y}},63428:(ne,A,e)=>{"use strict";e.d(A,{g:()=>i,o:()=>o});var n=e(74848),a=e(22803),s=e(92745),l=e(63142),r=e(71479);const c=h=>({icon:(0,a.css)({marginRight:h.spacing(1),verticalAlign:"middle"}),seriesTable:(0,a.css)({display:"table"}),seriesTableRow:(0,a.css)({display:"table-row",fontSize:h.typography.bodySmall.fontSize}),seriesTableCell:(0,a.css)({display:"table-cell"}),label:(0,a.css)({wordBreak:"break-all"}),value:(0,a.css)({paddingLeft:h.spacing(2),textAlign:"right"}),activeSeries:(0,a.css)({fontWeight:h.typography.fontWeightBold,color:h.colors.text.maxContrast}),timestamp:(0,a.css)({fontWeight:h.typography.fontWeightBold,fontSize:h.typography.bodySmall.fontSize})}),i=({color:h,label:f,value:g,isActive:u})=>{const E=(0,l.of)(c);return(0,n.jsxs)("div",{"data-testid":"SeriesTableRow",className:(0,a.cx)(E.seriesTableRow,u&&E.activeSeries),children:[h&&(0,n.jsx)("div",{className:E.seriesTableCell,children:(0,n.jsx)(r.p,{color:h,className:E.icon})}),f&&(0,n.jsx)("div",{className:(0,a.cx)(E.seriesTableCell,E.label),children:f}),g&&(0,n.jsx)("div",{className:(0,a.cx)(E.seriesTableCell,E.value),children:g})]})},o=({timestamp:h,series:f})=>{const g=(0,l.of)(c);return(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsx)("div",{className:g.timestamp,"aria-label":(0,s.t)("grafana-ui.viz-tooltip.timestamp","Timestamp"),children:h}),f.map((u,E)=>(0,n.jsx)(i,{isActive:u.isActive,label:u.label,color:u.color,value:u.value},`${u.label}-${E}`))]})}},63509:(ne,A,e)=>{"use strict";e.d(A,{B:()=>r});var n=e(74848),a=e(11594),s=e(99887);const l={[a.kv.grafana]:"grafana",[a.kv.commercial]:"shield",[a.kv.community]:"shield",DEFAULT:"shield-exclamation"},r=({status:i,color:o,signatureType:h,signatureOrg:f,...g})=>{const u=c(i,h,f);return(0,n.jsx)(s.E,{text:u.text,color:u.color,icon:u.icon,tooltip:u.tooltip,...g})};r.displayName="PluginSignatureBadge";function c(i,o,h){i||(i=a.Ac.invalid);const f=l[o||""]||l.DEFAULT;switch(i){case a.Ac.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case a.Ac.valid:return{text:o||"Signed",icon:o?f:"lock",color:"green",tooltip:"Signed and verified plugin"};case a.Ac.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case a.Ac.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case a.Ac.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},63722:(ne,A,e)=>{"use strict";e.d(A,{a:()=>i});var n=e(74848),a=e(96540),s=e(22669);const l="200px",r=200,c={transition:`max-height ${r}ms ease-in-out`,overflow:"hidden"},i=({children:o,in:h,maxHeight:f=l,style:g=c})=>{const u=(0,a.useRef)(null),E={exited:{maxHeight:0},entering:{maxHeight:f},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return(0,n.jsx)(s.Ay,{in:h,timeout:r,nodeRef:u,children:v=>(0,n.jsx)("div",{style:{...g,...E[v]},ref:u,children:o})})}},63827:(ne,A,e)=>{"use strict";e.d(A,{y:()=>x});var n=e(78830),a=e(11594),s=e(94644),l=e(1906),r=e(43173),c=e(41097),i=e(35216),o=e(37640),h=e(29090);const f=D=>{(0,n.M)(D);const C=D.loadingStrategy??a.xf.fetch;return{path:D.module,version:D.info?.version,loadingStrategy:C,pluginId:D.id,moduleHash:D.moduleHash,translations:D.translations}},g=async(D,C)=>{try{const P=await C;if(P.plugin){const T=P.plugin;return T.meta=D,m.set(D.id,T),T}throw(0,n.M)(P),new Error("missing export: plugin")}catch(P){return console.warn("Error loading panel plugin: "+D.id,P),(0,c.W)(D,P)}},u=async(D,C)=>{const P=await C;if(P.plugin){const T=P.plugin;return T.meta=D,m.set(D.id,T),T}if(P.Datasource){const T=new s.tD(P.Datasource);return T.setComponentsFromLegacyExports(P),T.meta=D,m.set(D.id,T),T}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")},E=async(D,C)=>{const P=await C,{plugin:T=new l.hX}=P;return T.init(D),T.meta=D,T.setComponentsFromLegacyExports(P),i.eY.register({pluginId:D.id,configs:T.exposedComponentConfigs||[]}),i.a9.register({pluginId:D.id,configs:T.addedComponentConfigs||[]}),i.lQ.register({pluginId:D.id,configs:T.addedLinkConfigs||[]}),i.rH.register({pluginId:D.id,configs:T.addedFunctionConfigs||[]}),m.set(D.id,T),T},v=new Map,p=D=>{const C=v.get(D.id);if(C)return C;throw new Error(`Trying to get unknown plugin type ${D.type} from cache for plugin ${D.id}`)},m=new Map,y=D=>{const C=m.get(D);if(C)return C},d=(D,C,P=f)=>{const T=y(D.id);if(T)return o.z4.logDebug("Retrieving plugin from cache",{path:D.module,pluginId:D.id,pluginVersion:D.info?.version??"",expectedHash:D.moduleHash??"",loadingStrategy:D.loadingStrategy??a.xf.fetch,sriChecksEnabled:String(!!r.$.featureToggles.pluginsSriChecks),newPluginLoadingEnabled:String(!!r.$.featureToggles.enablePluginImporter)}),Promise.resolve(T);if(v.has(D.id))return o.z4.logDebug("Retrieving plugin from inflight plugin load request",{path:D.module,pluginId:D.id,pluginVersion:D.info?.version??"",expectedHash:D.moduleHash??"",loadingStrategy:D.loadingStrategy??a.xf.fetch,sriChecksEnabled:String(!!r.$.featureToggles.pluginsSriChecks),newPluginLoadingEnabled:String(!!r.$.featureToggles.enablePluginImporter)}),p(D);const O=P(D),S=(0,h.j)(O),B=C(D,S);return v.set(D.id,B),p(D)},x={importPanel:D=>d(D,g),importDataSource:D=>d(D,u),importApp:D=>d(D,E),getPanel:D=>y(D)},b=()=>{v.clear(),m.clear()}},63895:(ne,A,e)=>{"use strict";e.d(A,{Ig:()=>b,J$:()=>v,J9:()=>E,S6:()=>f,So:()=>o,Zc:()=>g,b2:()=>x,ou:()=>u,qR:()=>i,ry:()=>O,t8:()=>D,yk:()=>d});var n=e(2543),a=e.n(n),s=e(38388),l=e(84266),r=e(39659);const c=[l.ho.regex,l.ho.notRegex,l.ho.notEqual,l.ho.equal];function i(U){if(U.startsWith("{")&&U.endsWith("}"))throw new Error("this function does not support PromQL-style matcher syntax, call parsePromQLStyleMatcher() instead");const F=c.map(N=>[N,U.indexOf(N)]).filter(([N,W])=>W>-1).sort((N,W)=>N[1]-W[1]);if(!F.length)throw new Error(`Invalid matcher: ${U}`);const[I,V]=F[0],M=U.slice(0,V).trim(),L=U.slice(V+I.length);if(!M)throw new Error(`Invalid matcher: ${U}`);return{name:M,value:L,isRegex:I===l.ho.regex||I===l.ho.notRegex,isEqual:I===l.ho.equal||I===l.ho.regex}}function o(U){return C(U)?h(U):[i(U)]}function h(U){if(!C(U))throw new Error("not a PromQL style matcher");return f(U)}function f(U){const F=/,(?=(?:[^"]*"[^"]*")*[^"]*$)/,I=U.replace(/^\{/,"").replace(/\}$/,"").trim().split(F);return(0,n.compact)(I).flatMap(i).map(V=>({...V,name:b(V.name),value:b(V.value)}))}function g(U){try{return f(U)}catch{return[]}}function u(U){return(0,n.chain)(U).map(F=>F.trim()).compact().flatMap(g).uniqBy("name").value()}const E=U=>{const F=Object.entries(U).filter(([V])=>!(0,r.F2)(V)),I=new URLSearchParams;return F.forEach(([V,M])=>I.append("matcher",`${V}=${M}`)),I},v=U=>{let F=[];return U.matchers&&U.matchers.forEach(I=>{const V=o(I).map(P);F=F.concat(V)}),U.object_matchers&&F.push(...U.object_matchers),U.match_re&&Object.entries(U.match_re).forEach(([I,V])=>{F.push([I,l.ho.regex,V])}),U.match&&Object.entries(U.match).forEach(([I,V])=>{F.push([I,l.ho.equal,V])}),F};function p(U){return`"${U.replace(/[\\"]/g,I=>`\\${I}`)}"`}const m=/[\{\}\!\=\~\,\\\"\'\`\s]+/;function y(U){return m.test(U)?p(U):U}function d(U){return y(b(U))}const x=({name:U,operator:F,value:I})=>{const V=y(U),M=p(I);return`${V}${F}${M}`};function b(U){return/^"(.*)"$/.test(U)?U.replace(/^"(.*)"$/,"$1").replace(/\\"/g,'"').replace(/\\\\/g,"\\"):U}const D={default:([U,F,I])=>`${U} ${F} ${I||""}`,unquote:([U,F,I])=>{const V=b(U),M=b(I)||'""';return`${V} ${F} ${M}`}};function C(U){return U.startsWith("{")&&U.endsWith("}")}function P(U){const F=T(U);return[U.name,F,U.value]}function T(U){return U.isEqual?U.isRegex?l.ho.regex:l.ho.equal:U.isRegex?l.ho.notRegex:l.ho.notEqual}function O(U,F){for(const I of U)if(!B(I,F))return!1;return!0}const S={[l.ho.equal]:(U,F)=>U===F,[l.ho.notEqual]:(U,F)=>U!==F,[l.ho.regex]:(U,F)=>{const I=(0,s.bQ)(`^(?:${F})$`);return new RegExp(I.cleaned,I.flags).test(U)},[l.ho.notRegex]:(U,F)=>{const I=(0,s.bQ)(`^(?:${F})$`);return!new RegExp(I.cleaned,I.flags).test(U)}};function B(U,F){const[I,V,M]=U;let L="";const N=Object.fromEntries(F)[I];N&&(L=N);const W=S[V];if(!W)throw new Error(`no such operator: ${V}`);try{return W(L,M)}catch(R){return console.warn(R),!1}}function K(U,F){const[I,V]=F,[M,L,N]=U;if(I!==M)return!1;const W=S[L];if(!W)throw new Error(`no such operator: ${L}`);return W(V,N)}},64400:(ne,A,e)=>{"use strict";e.d(A,{XF:()=>l,d2:()=>r,e4:()=>s});var n=e(96540),a=e(19379);const s=(0,n.createContext)({eventsScope:"global",eventBus:new a.o}),l=s.Provider,r=()=>(0,n.useContext)(s)},64761:(ne,A,e)=>{"use strict";e.d(A,{F:()=>n});var n=(a=>(a.append="append",a.reduce="reduce",a.order="order",a.organize="organize",a.rename="rename",a.calculateField="calculateField",a.seriesToColumns="seriesToColumns",a.seriesToRows="seriesToRows",a.merge="merge",a.concatenate="concatenate",a.labelsToFields="labelsToFields",a.filterFields="filterFields",a.filterFieldsByName="filterFieldsByName",a.filterFrames="filterFrames",a.filterByRefId="filterByRefId",a.renameByRegex="renameByRegex",a.filterByValue="filterByValue",a.noop="noop",a.ensureColumns="ensureColumns",a.groupBy="groupBy",a.sortBy="sortBy",a.histogram="histogram",a.configFromData="configFromData",a.rowsToFields="rowsToFields",a.prepareTimeSeries="prepareTimeSeries",a.convertFieldType="convertFieldType",a.convertFrameType="convertFrameType",a.fieldLookup="fieldLookup",a.heatmap="heatmap",a.spatial="spatial",a.joinByField="joinByField",a.joinByLabels="joinByLabels",a.extractFields="extractFields",a.groupingToMatrix="groupingToMatrix",a.limit="limit",a.partitionByValues="partitionByValues",a.timeSeriesTable="timeSeriesTable",a.transpose="transpose",a.formatTime="formatTime",a.formatString="formatString",a.regression="regression",a.groupToNestedTable="groupToNestedTable",a))(n||{})},64762:(ne,A,e)=>{"use strict";e.d(A,{Cf:()=>v,_2:()=>p,gi:()=>u,q8:()=>E,tZ:()=>g});var n=e(96540),a=e(24726),s=e(47797),l=e(8535),r=e(96221),c=e(52763),i=e(6890);const o={title:"",text:"",severity:r.Qd.Success,icon:"check"},h={title:"",text:"",severity:r.Qd.Warning,icon:"exclamation-triangle"},f={title:"",text:"",severity:r.Qd.Error,icon:"exclamation-triangle"},g=(d,x="",b)=>({...o,title:d,text:x,id:(0,a.A)(),timestamp:Date.now(),showing:!0}),u=(d,x="",b,D)=>({...f,text:(0,s.q6)(x),title:d,id:(0,a.A)(),traceId:b,component:D,timestamp:Date.now(),showing:!0}),E=(d,x="",b)=>({...h,title:d,text:x,traceId:b,id:(0,a.A)(),timestamp:Date.now(),showing:!0}),v=(d,x="",b)=>({severity:r.Qd.Info,icon:"info-circle",title:d,text:x,id:(0,a.A)(),timestamp:Date.now(),showing:!0});function p(){const d=(0,c.wA)();return(0,n.useMemo)(()=>({[r.Qd.Success]:(x,b="")=>{d((0,i.dx)(m(x,b,r.Qd.Success)))},[r.Qd.Warning]:(x,b="",D)=>{d((0,i.dx)(m(x,b,r.Qd.Warning,D)))},[r.Qd.Error]:(x,b="",D)=>{d((0,i.dx)(m(x,b,r.Qd.Error,D)))},[r.Qd.Info]:(x,b="")=>{d((0,i.dx)(m(x,b,r.Qd.Info)))}}),[d])}function m(d,x="",b=r.Qd.Success,D){return{[r.Qd.Success]:(P,T="")=>g(P,T),[r.Qd.Warning]:(P,T="",O)=>E(P,T,O),[r.Qd.Error]:(P,T="",O)=>u(P,T,O),[r.Qd.Info]:(P,T="")=>v(P,T)}[b](d,x,D)}function y(d,x="",b=AppNotificationSeverity.Success){storeDispatch(notifyApp(m(d,x,b)))}},64780:(ne,A,e)=>{"use strict";e.d(A,{B:()=>u,s:()=>E});var n=e(74848),a=e(2543),s=e.n(a),l=e(96540),r=e(92745),c=e(47931),i=e(8207),o=e(41654),h=e(50992),f=e(60208),g=e(54314),u=(v=>(v.code="code",v.text="text",v))(u||{});function E({value:v,onDismiss:p,mode:m}){let y=v;const[d,x]=(0,l.useState)(m);if((0,a.isString)(v)){const T=v.trim();if(T[0]==="{"||T[0]==="["||m==="code")try{v=JSON.parse(v),y=JSON.stringify(v,null,"  ")}catch(O){console.log("Failed to parse JSON in Table cell inspector (this will cause JSON to not print nicely): ",O.message)}}else y=JSON.stringify(v);let b=y;const D=[{label:"Plain text",value:"text"},{label:"Code editor",value:"code"}],C=()=>{x(d==="text"?"code":"text")},P=(0,n.jsx)(g.U,{children:D.map((T,O)=>(0,n.jsx)(f.o,{label:T.label,active:T.value===d,onChangeTab:C},`${T.value}-${O}`))});return(0,n.jsx)(i._,{onClose:p,title:(0,r.t)("grafana-ui.table.inspect-drawer-title","Inspect value"),tabs:P,children:(0,n.jsxs)(o.B,{direction:"column",gap:2,children:[(0,n.jsx)(c.b,{icon:"copy",getText:()=>b,style:{marginLeft:"auto",width:"200px"},children:(0,n.jsx)(r.x6,{i18nKey:"grafana-ui.table.copy",children:"Copy to Clipboard"})}),d==="code"?(0,n.jsx)(h.B,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(b&&b.length)>100,value:b,readOnly:!0,wordWrap:!0}):(0,n.jsx)("pre",{children:b})]})})}},64913:(ne,A,e)=>{"use strict";e.d(A,{v:()=>x});var n=e(74848),a=e(22803),s=e(47078),l=e.n(s),r=e(3163),c=e(96540),i=e(92745),o=e(63142),h=e(30703),f=e(76319),g=e(63527),u=e(41654),E=e(18857),v=e(78121),p=e(21133);const m=(0,a.css)({"&:focus":{outline:"none"}}),y=" / ";class d extends c.PureComponent{constructor(D){super(D),this.flattenOptions=(O,S=[])=>{let B=[];for(const K of O){const U=[...S];U.push(K),!K.items||K.items.length===0?B.push({singleLabel:U[U.length-1].label,label:U.map(F=>F.label).join(this.props.separator||y),value:U.map(F=>F.value)}):B=[...B,...this.flattenOptions(K.items,U)]}return B},this.getSearchableOptions=l()(O=>this.flattenOptions(O)),this.onChange=(O,S)=>{const B=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?S.map(U=>U.label).join(this.props.separator||y):S[S.length-1].label,K={rcValue:{value:O,label:B},focusCascade:!0,activeLabel:B,isSearching:!1,inputValue:B};this.setState(K),this.props.onSelect(S[S.length-1].value)},this.onSelect=O=>{const S=O.value||[],B=this.props.displayAllSelectedLevels?O.label:O.singleLabel||"",K={activeLabel:B,inputValue:B,rcValue:{value:S,label:B},isSearching:!1,focusCascade:!1};this.setState(K),this.props.onSelect(S[S.length-1])},this.onCreateOption=O=>{this.setState({activeLabel:O,inputValue:O,rcValue:[],isSearching:!1}),this.props.onSelect(O)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=O=>{if(["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight"].includes(O.key))return;const{activeLabel:S}=this.state;this.setState({focusCascade:!1,isSearching:!0,inputValue:S})},this.onSelectInputChange=O=>{this.setState({inputValue:O})};const C=this.getSearchableOptions(D.options),{rcValue:P,activeLabel:T}=this.setInitialValue(C,D.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:P,activeLabel:T,inputValue:""}}static{this.defaultProps={changeOnSelect:!0}}setInitialValue(D,C){if(!C)return{rcValue:[],activeLabel:""};for(const P of D){const T=P.value||[];if(T[T.length-1]===C)return{rcValue:T,activeLabel:this.props.displayAllSelectedLevels?P.label:P.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:C}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:D,formatCreateLabel:C,placeholder:P,width:T,changeOnSelect:O,options:S,disabled:B,id:K,isClearable:U,theme:F}=this.props,{focusCascade:I,isSearching:V,rcValue:M,activeLabel:L,inputValue:N}=this.state,W=this.getSearchableOptions(S),R=(0,p.T)(F);return(0,n.jsx)("div",{children:V?(0,n.jsx)(E.l6,{allowCustomValue:D,placeholder:P,autoFocus:!I,onChange:this.onSelect,onBlur:this.onBlur,options:W,onCreateOption:this.onCreateOption,formatCreateLabel:C,width:T,onInputChange:this.onSelectInputChange,disabled:B,inputValue:N,inputId:K}):(0,n.jsx)(r.A,{onChange:(0,v.k)(this.onChange),options:S,changeOnSelect:O,value:M.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen,disabled:B,dropdownClassName:R.dropdown,children:(0,n.jsx)("div",{className:m,children:(0,n.jsx)(g.p,{autoFocus:this.props.autoFocus,width:T,placeholder:P,onBlur:this.onBlurCascade,value:L,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:(0,n.jsxs)(u.B,{gap:.5,children:[U&&L!==""&&(0,n.jsx)(f.K,{name:"times","aria-label":(0,i.t)("grafana-ui.cascader.clear-button","Clear selection"),onClick:G=>{G.preventDefault(),G.stopPropagation(),this.setState({rcValue:[],activeLabel:"",inputValue:""}),this.props.onSelect("")}}),(0,n.jsx)(h.I,{name:I?"angle-up":"angle-down"})]}),disabled:B,id:K})})})})}}const x=(0,o.cV)(d)},64975:(ne,A,e)=>{"use strict";e.d(A,{C:()=>l,F:()=>r});var n=e(75816),a=e(43173),s=e(73892);const l=`apis/provisioning.grafana.app/v0alpha1/namespaces/${a.$.namespace}`,r=(0,n.xP)({reducerPath:"provisioningAPIv0alpha1",baseQuery:(0,s.W)({baseURL:l}),endpoints:()=>({})})},65241:(ne,A,e)=>{"use strict";e.d(A,{j:()=>i});var n=e(74848),a=e(96540),s=e(92745),l=e(27489),r=e(43652),c=e(58662);const i=({panel:o,initialFolderUid:h,onCreateLibraryPanel:f,onDismiss:g})=>((0,a.useEffect)(()=>{(0,l.rR)("grafana_dashboards_library_panel_share_viewed",{shareResource:(0,c.hD)(o)})},[o]),o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,n.jsx)(s.x6,{i18nKey:"share-modal.library.info",children:"Create library panel."})}),(0,n.jsx)(r.b,{panel:o,initialFolderUid:h,onCreateLibraryPanel:f,onDismiss:g})]}):null)},65333:(ne,A,e)=>{"use strict";e.d(A,{tt:()=>te,EH:()=>Z,A2:()=>se,wM:()=>q});var n=e(2543),a=e(43173),s=e(45863),l=e(5857),r=e(45173),c=e(54767),i=e(7817),o=e(82612),h=e(11968),f=e(7498),g=e(61291),u=e(49e3),E=e(51906),v=e(88632),p=e(88499),m=e(44804),y=e(11534),d=e(7094),x=e(32540),b=e(37040),D=e(66251),C=e(81657),P=e(93389),T=e(1131),O=e(87308),S=e(18178),B=e(97335),K=e(97883),U=e(20246),F=e(35718),I=e(18789),V=e(23289),M=e(8285),L=e(78282),N=e(39557);const W="default";function R(re){const ue=re.templating.list.map(X=>{try{return _(X)}catch(le){return console.error(le),null}}).filter(X=>!!X);return a.$.featureToggles.scopeFilters&&ue.push(new s.Kg({enable:!0})),new s.Pj({variables:ue})}function G(re){const ue=re.templating.list.map(X=>{try{return X.type==="adhoc"?new s.H9({name:X.name,label:X.label,readOnly:!0,description:X.description,skipUrlSync:X.skipUrlSync,hide:X.hide,datasource:X.datasource,applyMode:"auto",filters:X.filters??[],baseFilters:X.baseFilters??[],defaultKeys:X.defaultKeys,useQueriesAsFilterForOptions:!0,layout:a.$.featureToggles.newFiltersUI?"combobox":void 0,supportsMultiValueOperators:!!(0,L.l)().getInstanceSettings(X.datasource)?.meta.multiValueFilterOperators}):w(X)}catch(le){return console.error(le),null}}).filter(X=>!!X);return new s.Pj({variables:ue})}function w(re){let ue,X;if(re.type==="interval"){const le=(0,M.Sm)(re.query),he=(0,M.pk)(re,le);return ue=new N.B({name:re.name,label:re.label,description:re.description,value:he,text:he,hide:re.hide}),ue}return re.type==="system"||re.type==="constant"||re.type==="adhoc"?X={value:"",text:""}:X={value:re.current?.value??"",text:re.current?.text??""},ue=new N.B({name:re.name,label:re.label,description:re.description,value:X?.value??"",text:X?.text??"",hide:re.hide}),ue}function _(re){const ue={name:re.name,label:re.label,description:re.description,showInControlsMenu:re.showInControlsMenu};if(re.type==="adhoc"){const X=[],le=[];return re.filters?.forEach(he=>he.origin?X.push(he):le.push(he)),new s.H9({...ue,description:re.description,skipUrlSync:re.skipUrlSync,hide:re.hide,datasource:re.datasource,applyMode:"auto",originFilters:X,filters:le,baseFilters:re.baseFilters??[],defaultKeys:re.defaultKeys,allowCustomValue:re.allowCustomValue,useQueriesAsFilterForOptions:!0,layout:a.$.featureToggles.newFiltersUI?"combobox":void 0,supportsMultiValueOperators:!!(0,L.l)().getInstanceSettings(re.datasource)?.meta.multiValueFilterOperators})}if(re.type==="custom")return new s.yP({...ue,value:re.current?.value??"",text:re.current?.text??"",query:re.query,isMulti:re.multi,allValue:re.allValue||void 0,includeAll:re.includeAll,defaultToAll:!!re.includeAll,skipUrlSync:re.skipUrlSync,hide:re.hide,allowCustomValue:re.allowCustomValue});if(re.type==="query")return new s.fS({...ue,value:re.current?.value??"",text:re.current?.text??"",query:re.query,datasource:re.datasource,sort:re.sort,refresh:re.refresh,regex:re.regex,allValue:re.allValue||void 0,includeAll:re.includeAll,defaultToAll:!!re.includeAll,isMulti:re.multi,skipUrlSync:re.skipUrlSync,hide:re.hide,definition:re.definition,allowCustomValue:re.allowCustomValue,staticOptions:re.staticOptions?.map(X=>({label:String(X.text),value:String(X.value)})),staticOptionsOrder:re.staticOptionsOrder});if(re.type==="datasource")return new s.mI({...ue,value:re.current?.value??"",text:re.current?.text??"",regex:re.regex,pluginId:re.query,allValue:re.allValue||void 0,includeAll:re.includeAll,defaultToAll:!!re.includeAll,skipUrlSync:re.skipUrlSync,isMulti:re.multi,hide:re.hide,defaultOptionEnabled:re.current?.value===W&&re.current?.text==="default",allowCustomValue:re.allowCustomValue});if(re.type==="interval"){const X=(0,M.Sm)(re.query),le=(0,M.pk)(re,X);return new s.Yj({...ue,value:le,intervals:X,autoEnabled:re.auto,autoStepCount:re.auto_count,autoMinInterval:re.auto_min,refresh:re.refresh,skipUrlSync:re.skipUrlSync,hide:re.hide})}else{if(re.type==="constant")return new s.x0({...ue,value:re.query,skipUrlSync:re.skipUrlSync,hide:re.hide});if(re.type==="textbox"){let X;return re?.current?.value?typeof re.current.value=="string"?X=re.current.value:X=re.current.value[0]:X=re.query,new s.TS({...ue,value:X,skipUrlSync:re.skipUrlSync,hide:re.hide})}else{if(a.$.featureToggles.groupByVariable&&re.type==="groupby")return new s.ZG({...ue,datasource:re.datasource,value:re.current?.value||[],text:re.current?.text||[],skipUrlSync:re.skipUrlSync,hide:re.hide,defaultOptions:re.options,defaultValue:re.defaultValue,allowCustomValue:re.allowCustomValue});throw new Error(`Scenes: Unsupported variable type ${re.type}`)}}}function Q(re){return function(X,le){if(le.angularPanelCtrl){X.options={angularOptions:re.getOptionsToRemember()};return}if(!re.options||Object.keys(re.options).length===0){(0,n.defaults)(X,re.getOptionsToRemember());const he=(0,n.cloneDeep)(re.targets);Object.defineProperty(X,"targets",{get:function(){return console.warn("Accessing the targets property when migrating a panel plugin is deprecated. Changes to this property will be ignored."),he}})}if(re.autoMigrateFrom){const he=o.NB[re.autoMigrateFrom]!=null,fe=re.getOptionsToRemember(),Ce=re.autoMigrateFrom;if(le.onPanelTypeChanged){const Ae=he?{angular:fe}:fe.options;Object.assign(X.options,le.onPanelTypeChanged(X,Ce,Ae,X.fieldConfig))}}}}var ae=e(78320);function q(re){const ue=new i.G(re.dashboard,re.meta),X=Z(ue,re.dashboard),le=a.$.featureToggles.kubernetesDashboards?`${r._.group}/${r._.version}`:void 0;return X.setInitialSaveModel(re.dashboard,re.meta,le),X}function k(re){const ue=[];let X=null,le=[];for(const he of re)he.type==="row"?!X&&le.length===0?X=he:X?(ue.push(J(X,le)),le=[],X=he):(ue.push(new B.o({title:"",collapse:he.collapsed,layout:new T.D({grid:new s.hy({children:le})}),hideHeader:!0,$behaviors:[]})),le=[],X=he):le.push(te(he));return X&&ue.push(J(X,le)),new K.V({rows:ue})}function ee(re){const ue=[];let X=null,le=[];for(const he of re)if(he.type==="row")X?X.id!==he.id&&(ue.push(j(X,le)),he.collapsed?(ue.push(j(he,[])),X=null):X=he,le=[]):he.collapsed?ue.push(j(he,[])):X=he;else{he.snapshotData&&ce(he);const fe=te(he);X?le.push(fe):ue.push(fe)}return X&&ue.push(j(X,le)),ue}function j(re,ue){re.collapsed&&re.panels&&(ue=re.panels.map(he=>(he instanceof o.a9||(he=new o.a9(he)),te(he))));let X,le=ue;return re.repeat&&(X=[new O.L({variableName:re.repeat})]),new s.tI({key:(0,M.XA)(re.id),title:re.title,y:re.gridPos.y,isCollapsed:re.collapsed,children:le,$behaviors:X,actions:new S.u({})})}function J(re,ue){return new B.o({key:(0,M.XA)(re.id),title:re.title,collapse:re.collapsed,layout:new T.D({grid:new s.hy({children:(re.panels?.map(le=>te(le))??[]).concat(ue)})}),repeatByVariable:re.repeat})}function Z(re,ue){let X,le=[],he;const fe=re.uid,Ce=a.$.featureToggles.dashboardNewLayouts?"v2":"v1";re.meta.isSnapshot?X=G(re):X=R(re),re.annotations?.list?.length&&!re.isSnapshot()&&(le=re.annotations?.list.map($e=>new u.g({key:(0,n.uniqueId)("annotations-"),query:$e,name:$e.name,isEnabled:!!$e.enable,isHidden:!!$e.hide})));let Ae=a.$.unifiedAlertingEnabled;Ae||re.panels.find($e=>!!$e.alert)&&(Ae=!0),Ae&&(he=new f.C({key:"alert-states",name:"Alert States"}));const _e=a.$.featureToggles.scopeFilters&&re.scopeMeta?{trait:re.scopeMeta.trait,groups:re.scopeMeta.groups}:void 0,Xe=new s.Gg.Hf({enableProfiling:a.$.dashboardPerformanceMetrics.findIndex($e=>$e==="*"||$e===re.uid)!==-1,onProfileComplete:(0,c.a)(re.uid,re.title)},(0,c.S)()),De=[new s.Gg.K2({sync:re.graphTooltip}),Xe,p.M,se,new s.Gg.en({enabled:re.liveNow}),h.U,new m.s({reloadOnParamsChange:a.$.featureToggles.reloadDashboardsOnParamsChange&&re.meta.reloadOnParamsChange,uid:fe})];let Me;return a.$.featureToggles.dashboardNewLayouts&&re.panels.some($e=>$e.type==="row")?Me=k(re.panels):Me=new T.D({grid:new s.hy({isLazy:(0,U.DP)(ue.preload),children:ee(re.panels)})}),new y.H$({uid:fe,description:re.description,editable:re.editable,preload:ue.preload??!1,id:re.id,isDirty:!1,links:re.links||[],meta:re.meta,tags:re.tags||[],title:re.title,version:re.version,scopeMeta:_e,body:Me,$timeRange:new s.JZ({from:re.time.from,to:re.time.to,fiscalYearStartMonth:re.fiscalYearStartMonth,timeZone:re.timezone,weekStart:(0,l.rE)(re.weekStart)?re.weekStart:void 0,UNSAFE_nowDelay:re.timepicker?.nowDelay}),$variables:X,$behaviors:De,$data:new v.s({annotationLayers:le,alertStatesLayer:he}),controls:new E.x({timePicker:new s.KE({quickRanges:re.timepicker.quick_ranges,defaultQuickRanges:a.$.quickRanges}),refreshPicker:new s.WM({refresh:re.refresh,intervals:re.timepicker.refresh_intervals,withText:!0}),hideTimeControls:re.timepicker.hidden})},Ce)}function te(re){const ue=re.repeat?{variableName:re.repeat,repeatDirection:re.repeatDirection==="v"?"v":"h"}:{},X=[];X.push(new x.$({rawLinks:re.links,menu:new x.m({$behaviors:[b.oV]})})),X.push(new D.W);const le=(re.timeFrom||re.timeShift)&&!re.hideTimeOverride,he={key:(0,M.XA)(re.id),title:re.title?.substring(0,5e3),description:re.description,pluginId:re.type??"timeseries",options:re.options??{},fieldConfig:re.fieldConfig,pluginVersion:re.pluginVersion,seriesLimit:a.$.panelSeriesLimit,displayMode:re.transparent?"transparent":void 0,hoverHeader:!re.title&&!le,hoverHeaderOffset:0,$data:(0,I.w)(re),titleItems:X,$behaviors:[],extendPanelContext:F.C,_UNSAFE_customMigrationHandler:Q(re),headerActions:a.$.featureToggles.timeComparison?[new g.v({key:"time-compare",compareWith:void 0,compareOptions:[]})]:void 0};re.libraryPanel&&(he.$behaviors.push(new d.u({uid:re.libraryPanel.uid,name:re.libraryPanel.name})),he.pluginId=d.u.LOADING_VIZ_PANEL_PLUGIN_ID,he.$data=void 0),a.$.publicDashboardAccessToken||(he.menu=new s.Lw({$behaviors:[b._i]})),(re.timeFrom||re.timeShift)&&(he.$timeRange=new C.v({timeFrom:re.timeFrom,timeShift:re.timeShift,hideTimeOverride:re.hideTimeOverride})),re.scopedVars&&re.targets?.[0]?.queryType==="snapshot"&&(he.$variables=new s.Pj({variables:Object.entries(re.scopedVars).map(([Ce,Ae])=>new s.xc({name:Ce,value:Ae?.value,text:Ae?.text,isMulti:!0,includeAll:!0}))}));const fe=new s.Eb(he);return new P.U({key:`grid-item-${re.id}`,x:re.gridPos.x,y:re.gridPos.y,width:ue.repeatDirection==="h"?24:re.gridPos.w,height:re.gridPos.h,itemHeight:re.gridPos.h,body:fe,maxPerRow:re.maxPerRow,...ue})}function se(re){re.subscribeToEvent(s.Kw,ue=>{const{interaction:X}=ue.payload;switch(X){case"panel-status-message-clicked":V.c.panelStatusMessageClicked();break;case"panel-cancel-query-clicked":V.c.panelCancelQueryClicked();break}})}const ie=re=>re.map(ue=>({data:{values:ue.fields.map(X=>X.values).filter(X=>X!==void 0)},schema:{fields:ue.fields.map(X=>({name:X.name,type:X.type,config:X.config}))}})),ce=re=>{re.snapshotData&&(re.datasource=ae.x,re.targets=[{refId:re.snapshotData[0]?.refId??"",datasource:re.datasource,queryType:"snapshot",snapshot:ie(re.snapshotData)}],re.snapshotData=[])}},65411:(ne,A,e)=>{"use strict";e.d(A,{x:()=>y});var n=e(74848),a=e(29189),s=e(96540),l=e(49785),r=e(92745),c=e(37386),i=e(63527),o=e(87105),h=e(77824),f=e(43243),g=e(83793);function u(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.branch-validation-error.invalid-branch-name",children:"Invalid branch name."}),(0,n.jsxs)("ul",{style:{padding:"0 20px"},children:[(0,n.jsx)("li",{children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.branch-validation-error.cannot-start-with",children:"It cannot start with '/' or end with '/', '.', or whitespace."})}),(0,n.jsx)("li",{children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.branch-validation-error.it-cannot-contain-or",children:"It cannot contain '//' or '..'."})}),(0,n.jsx)("li",{children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.branch-validation-error.cannot-contain-invalid-characters",children:"It cannot contain invalid characters: '~', '^', ':', '?', '*', '[', '\\\\', or ']'."})}),(0,n.jsx)("li",{children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.branch-validation-error.least-valid-character",children:"It must have at least one valid character."})})]})]})}var E=e(92784),v=e(82781),p=e(43385);function m(d){return`${d}/${(0,p.g)()}`}const y=(0,s.memo)(({readOnly:d=!1,workflow:x,workflowOptions:b,repository:D,isNew:C,resourceType:P,hidePath:T=!1})=>{const{control:O,register:S,setValue:B,clearErrors:K,formState:{errors:U}}=(0,l.xW)(),{data:F,isLoading:I,error:V}=(0,g.Cx)(!D?.name||!(0,v.QM)(D.type)?a.hT:{name:D.name}),M=(0,s.useMemo)(()=>{const W=[],R=D?.branch,G=(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.suffix-configured-branch","Configured branch");if(R&&W.push({label:`${R}`,value:R,description:G}),F?.items)for(const w of F.items)w.name!==R&&W.push({label:w.name,value:w.name});return W},[F?.items,D?.branch]),L=(0,s.useMemo)(()=>m(P),[P]),N=P==="dashboard"?(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.description-file-path","File path inside the repository (.json or .yaml)"):(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.description-folder-path","Folder path inside the repository");return(0,n.jsxs)(n.Fragment,{children:[!T&&(0,n.jsx)(c.D,{noMargin:!0,label:(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.label-path","Path"),description:(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.description-inside-repository",N),children:(0,n.jsx)(i.p,{id:"dashboard-path",type:"text",...S("path"),readOnly:!C})}),(0,n.jsx)(c.D,{noMargin:!0,label:(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.label-comment","Comment"),children:(0,n.jsx)(o.f,{id:"provisioned-resource-form-comment",...S("comment"),disabled:d,placeholder:(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.comment-placeholder-describe-changes-optional","Add a note to describe your changes (optional)"),rows:5})}),D?.type&&(0,v.QM)(D.type)&&!d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.D,{noMargin:!0,style:{overflow:"auto"},label:(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.label-workflow","Workflow"),children:(0,n.jsx)(l.xI,{control:O,name:"workflow",render:({field:{ref:W,onChange:R,...G}})=>(0,n.jsx)(h.z,{id:"provisioned-resource-form-workflow",...G,options:b,onChange:w=>{R(w),K("ref"),w==="branch"?B("ref",L):w==="write"&&D?.branch&&B("ref",D.branch)}})})}),(x==="write"||x==="branch")&&(0,n.jsx)(c.D,{htmlFor:"provisioned-ref",noMargin:!0,label:(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.label-branch","Branch"),description:(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.description-branch-name-in-git-hub","Branch name in GitHub"),invalid:!!(U.ref||V),error:U.ref?(0,n.jsx)(u,{}):V?(0,r.t)("provisioning.config-form.error-fetch-branches","Failed to fetch branches"):void 0,children:(0,n.jsx)(l.xI,{name:"ref",control:O,rules:{validate:E.eg},render:({field:{ref:W,onChange:R,...G}})=>x==="write"?(0,n.jsx)(f.G,{...G,invalid:!!U.ref,id:"provisioned-ref",onChange:w=>R(w?w.value:""),placeholder:(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.placeholder-branch","Select or enter branch name"),options:M,loading:I,isClearable:!0}):(0,n.jsx)(i.p,{...G,invalid:!!U.ref,id:"provisioned-ref",onChange:R,placeholder:(0,r.t)("provisioned-resource-form.save-or-delete-resource-shared-fields.placeholder-new-branch","Enter new branch name")})})})]})]})});y.displayName="ResourceEditFormSharedFields"},65420:(ne,A,e)=>{"use strict";e.d(A,{C:()=>o});var n=e(74848),a=e(96540),s=e(92745),l=e(30703),r=e(45967),c=e(29609),i=e(67834);const o=(0,a.memo)(({state:h,isPaused:f=!1,size:g="md",muted:u=!1})=>f?(0,n.jsx)(r.m,{content:(0,s.t)("alerting.alert-state-tag.content-alert-evaluation-is-currently-paused","Alert evaluation is currently paused"),placement:"top",children:(0,n.jsxs)(i.O,{state:"warning",size:g,muted:u,children:[(0,n.jsx)(l.I,{name:"pause",size:"xs"})," ",(0,n.jsx)(s.x6,{i18nKey:"alerting.alert-state-tag.paused",children:"Paused"})]})}):(0,n.jsx)(i.O,{state:(0,c.Wy)(h),size:g,muted:u,children:(0,c.XI)(h)}));o.displayName="AlertStateTag"},65556:(ne,A,e)=>{"use strict";e.d(A,{r:()=>a});let n="";const a=()=>{const l=new URLSearchParams(window.location.search).get("auth_token");return l!==null&&l!==""?(n=l,l):n}},65937:(ne,A,e)=>{"use strict";e.d(A,{A:()=>a});const a="prism-token"},65966:(ne,A,e)=>{"use strict";e.d(A,{L:()=>g});var n=e(74848),a=e(21835),s=e(96540),l=e(48480),r=e(1906),c=e(78282),i=e(27489),o=e(75421),h=e(18615),f=e(96041);class g extends s.PureComponent{constructor(){super(...arguments),this.onRemoveQuery=v=>{this.props.onQueriesChange(this.props.queries.filter(p=>p!==v))},this.onDragStart=v=>{const{queries:p,dsSettings:m}=this.props;(0,i.rR)("query_row_reorder_started",{startIndex:v.source.index,numberOfQueries:p.length,datasourceType:m.type})},this.onDragEnd=v=>{const{queries:p,onQueriesChange:m,dsSettings:y}=this.props;if(!v||!v.destination)return;const d=v.source.index,x=v.destination.index;if(d===x){(0,i.rR)("query_row_reorder_canceled",{startIndex:d,endIndex:x,numberOfQueries:p.length,datasourceType:y.type});return}const b=Array.from(p),[D]=b.splice(d,1);b.splice(x,0,D),m(b),(0,i.rR)("query_row_reorder_ended",{startIndex:d,endIndex:x,numberOfQueries:p.length,datasourceType:y.type})}}onChangeQuery(v,p){const{queries:m,onQueriesChange:y}=this.props;y(m.map((d,x)=>x===p?v:d))}onReplaceQuery(v,p){const{queries:m,onQueriesChange:y,onUpdateDatasources:d,dsSettings:x}=this.props,b=m.map((D,C)=>C===p?{...v,refId:D.refId}:D);if(y(b,{skipAutoImport:!0}),v.datasource?.uid){const P={uid:new Set(b.map(O=>O.datasource?.uid)).size>1?h.uv:v.datasource.uid};x.uid!==P.uid&&d?.(P)}}onDataSourceChange(v,p){const{queries:m,onQueriesChange:y}=this.props;Promise.all(m.map(async(d,x)=>{if(x!==p)return d;const b=(0,l.p$)(v);return d.datasource&&(0,c.l)().getInstanceSettings(d.datasource)?.type===v.type?{...d,datasource:b}:{...(await(0,c.l)().get(b)).getDefaultQuery?.(r.Jk.PanelEditor),...d,datasource:b}})).then(d=>y(d),()=>{throw new Error(`Failed to get datasource ${v.name??v.uid}`)})}render(){const{dsSettings:v,data:p,queries:m,app:y,history:d,eventBus:x,onAddQuery:b,onRunQueries:D,onQueryCopied:C,onQueryRemoved:P,onQueryToggled:T,onQueryOpenChanged:O,onQueryReplacedFromLibrary:S,queryRowWrapper:B,queryLibraryRef:K,onCancelQueryLibraryEdit:U,isOpen:F}=this.props;return(0,n.jsx)(a.JY,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,children:(0,n.jsx)(a.gL,{droppableId:"transformations-list",direction:"vertical",children:I=>(0,n.jsxs)("div",{"data-testid":"query-editor-rows",ref:I.innerRef,...I.droppableProps,children:[m.map((V,M)=>{const L=u(V,v),N=v.meta.mixed?R=>this.onDataSourceChange(R,M):void 0,W=(0,n.jsx)(f.c,{id:V.refId,index:M,data:p,query:V,dataSource:L,onChangeDataSource:N,onChange:R=>this.onChangeQuery(R,M),onReplace:R=>this.onReplaceQuery(R,M),onRemoveQuery:this.onRemoveQuery,onAddQuery:b,onRunQuery:D,onQueryCopied:C,onQueryRemoved:P,onQueryToggled:T,onQueryOpenChanged:O,onQueryReplacedFromLibrary:S,queries:m,app:y,range:(0,o.jG)().timeRange(),history:d,eventBus:x,queryLibraryRef:K,onCancelQueryLibraryEdit:U,isOpen:F},V.refId);return B?B(W,V.refId):W}),I.placeholder]})})})}}const u=(E,v)=>E.datasource&&(0,c.l)().getInstanceSettings(E.datasource)||v},66056:(ne,A,e)=>{"use strict";e.d(A,{Rm:()=>C,aM:()=>b,T8:()=>B});var n=e(2543),a=e(92745),s=e(56476),l=e(84266),r=e(48442);function c(K){return"grafana_managed_receiver_configs"in K?K.grafana_managed_receiver_configs??[]:Object.entries(K).filter(([F])=>F!=="grafana_managed_receiver_configs"&&F.endsWith("_configs")).filter(([F,I])=>Array.isArray(I)&&!(0,n.isEmpty)(I)).reduce((F,[I,V])=>{const M=I.replace("_configs",""),L=V.map(N=>({name:K.name,type:M,settings:N,disableResolveMessage:!1}));return F.concat(L)},[])}var i=e(6135),o=e(182),h=e(28405),f=e(58774),g=e(15645),u=e(2869);const m={title:"Grafana OnCall",icon:{[u.W.OnCall]:g,[u.W.Irm]:f,[u.W.Incident]:"",[u.W.MachineLearning]:"",[u.W.Labels]:"",[u.W.Slo]:""}[(0,o.BO)()]};function y(K,U,F=!0){const I=(0,o.ZP)()?"IRM":"OnCall";if(!F||!U.settings?.url||K===void 0)return m;if(K==null)return{...m,warning:`Grafana ${I} is not installed or is disabled`};const V=K.find(M=>M.integration_url===U.settings?.url);return{...m,description:V?.display_name,externalUrl:V?(0,h.h)((0,o.BO)(),`/integrations/${V.value}`):void 0,warning:V?void 0:`${I} Integration no longer exists`}}var d=e(3887);const x="__grafana_receiver__";function b(K){if(!K.settings)return;const{settings:U}=K;switch(K.type){case"email":{const F=U.addresses||U.to;return F?D(F):void 0}case"slack":{const F=U.recipient||U.channel;return F?`#${F.replace(/^#/,"")}`:void 0}case"kafka":return U.kafkaTopic;case"webhook":return U.url;case"jira":return(0,a.t)("alerting.contact-points.receiver-summary.jira",'Creates a "{{issueType}}" issue in the "{{project}}" project',{issueType:U.issue_type,project:U.project,url:U.api_url});case i.J4.OnCall:return K[d.sW]?.description;default:return K[d.MX]?.description}}function D(K){const F=/,|;|\n+/g,I=K.trim().split(F).map(n.trim),V=(0,n.take)(I,3),M=(0,n.difference)(I,V);return M.length&&V.push(`+${M.length} more`),V.join(", ")}function C({status:K=[],notifiers:U=[],onCallIntegrations:F,contactPoints:I,alertmanagerConfiguration:V}){const M=(0,r._I)(V?.alertmanager_config?.route??{}),L=O(M),N=(0,n.groupBy)(L,"receiver");return I.map(R=>{const G=c(R),w=K.find(Q=>Q.name===R.name),_=P(R);return{...R,id:_,policies:V&&N&&(N[R.name]??[]),grafana_managed_receiver_configs:G.map((Q,ae)=>{const q=Q.type===i.J4.OnCall;return{...Q,[d.v4]:w?.integrations[ae],[d.MX]:S(U,Q),[d.sW]:q?y(F,Q,!!V):void 0}})}}).sort((R,G)=>R.name.localeCompare(G.name))}function P(K){return"id"in K&&K.id?K.id:K.name}function T(K){return K.object_matchers?K.object_matchers.some(U=>U[0]===x&&U[1]===l.ho.equal)??!1:!1}function O(K){const U=K.routes?.flatMap(F=>O(F))??[];return K.receiver?[{receiver:K.receiver,route:{type:T(K)?"auto-generated":"normal"}},...U]:U}function S(K,U){const F=K.find(I=>I.type===U.type);return{name:F?.name??(0,n.upperFirst)(U.type),description:F?.description}}const B=(K,U)=>(0,s.dM)(K)&&(0,s.jw)(U)},66198:(ne,A,e)=>{"use strict";e.d(A,{Cg:()=>i,Fk:()=>h,R4:()=>u,Rj:()=>c,pq:()=>o});var n=e(92745),a=e(43173),s=e(15130),l=e(18832),r=e(11257);const c="manage-folder",i=v=>`folder-dashboards-${v}`,o=v=>`folder-library-panels-${v}`,h=v=>`folder-alerting-${v}`,f=v=>`folder-permissions-${v}`,g=v=>`folder-settings-${v}`;function u(v,p){const m=p??("parents"in v?v.parents:void 0),y={icon:"folder",id:c,subTitle:(0,l.o)("manage-folder"),url:v.url,text:v.title,children:[{active:!1,icon:"apps",id:i(v.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.dashboards","Dashboards"),url:v.url}]};if(m&&m.length>0){const d=m[m.length-1],x=m.slice(0,m.length-1);y.parentItem=u(d,x)}return y.children.push({active:!1,icon:"library-panel",id:o(v.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.panels","Panels"),url:`${v.url}/library-panels`}),s.TP.hasPermission(r.w.AlertingRuleRead)&&a.$.unifiedAlertingEnabled&&y.children.push({active:!1,icon:"bell",id:h(v.uid),text:(0,n.t)("browse-dashboards.manage-folder-nav.alert-rules","Alert rules"),url:`${v.url}/alerting`}),y}function E(v){const p=u({created:"",createdBy:"",hasAcl:!1,updated:"",updatedBy:"",id:1,uid:"loading",title:t("folders.get-loading-nav.main.title.loading","Loading"),url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return p.children[v].active=!0,{main:p,node:p.children[v]}}},66223:(ne,A,e)=>{"use strict";e.d(A,{z:()=>l});var n=e(2863),a=e(54742),s=e(8921);function l(r){const c={},i=(0,n.w)().getVariables();for(let o=0;o<i.length;o++){const h=i[o],f=r&&r[h.name];h.skipUrlSync||(f?c[s.qz+h.name]=f.value:c[s.qz+h.name]=a.B.get(h.type).getValueForUrl(h))}return c}},66251:(ne,A,e)=>{"use strict";e.d(A,{W:()=>r});var n=e(74848),a=e(45863),s=e(46429),l=e(8285);class r extends a.Bs{constructor(){super({}),this.onActivate=()=>{const o=this.parent;if(!o||!(o instanceof a.Eb))throw new Error("PanelNotices can be used only as title items for VizPanel")},this.addActivationHandler(this.onActivate)}static{this.Component=c}getPanel(){const o=this.parent;return o&&o instanceof a.Eb?o:null}}function c({model:i}){const o=i.getPanel(),f=a.jh.getData(i).useState();if(!o)return null;const g=(0,l.Cs)(o);return f.data?.series?(0,n.jsx)(s.Z,{frames:f.data?.series,panelId:g}):null}},66258:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>r});var n=e(74848),a=e(22803),s=e(92745),l=e(63142);function r(){const i=(0,l.of)(c);return(0,n.jsx)("div",{className:i.button,children:(0,n.jsx)(s.x6,{i18nKey:"alerting.threshold.to",children:"TO"})})}const c=i=>({button:(0,a.css)({height:"32px",color:i.colors.primary.text,fontSize:i.typography.bodySmall.fontSize,display:"flex",alignItems:"center",fontWeight:i.typography.fontWeightBold,padding:`0 ${i.spacing(1)}`})})},66402:(ne,A,e)=>{"use strict";e.d(A,{F:()=>s,N:()=>a});function n(l){return l!==null&&typeof l=="object"}function a(l){if(!n(l))return!1;const r=l.metadata;return n(r)?typeof l.apiVersion=="string"&&typeof l.kind=="string"&&typeof r.name=="string"&&typeof r.resourceVersion=="string"&&typeof r.creationTimestamp=="string"&&n(l.spec):!1}function s(l){if(!n(l))return!1;const r=l.metadata;return n(r)?typeof r.resourceVersion=="string"&&Array.isArray(l.items):!1}},66483:(ne,A,e)=>{"use strict";e.d(A,{c:()=>_e});var n=e(74848),a=e(96540),s=e(22803),l=e(78012),r=e(51898),c=e(92745),i=e(43173),o=e(36490),h=e(63142),f=e(7895),g=e(30703),u=e(99887),E=e(88559),v=e(87063),p=e(45861),m=e(93256),y=e(36219),d=e(43707),x=e(5423),b=e(95943),D=e(73427),C=e(22429),P=e(4590),T=e(55266),O=e(45942),S=e(52763),B=e(58662),K=e(25508),U=e(83793);const F=[],I=()=>U.PP.endpoints.listRepository.select({}),V=()=>(0,K.Mz)(I(),Re=>Re.data?.items||F),M=()=>(0,K.Mz)(V(),(Re,Ke)=>Ke,(Re,Ke)=>{if(Ke)return Re.find(Ve=>Ve.metadata?.name===Ke)});var L=e(23656),N=e(55867);function W({dashboard:Re}){const[Ke,Ve]=(0,a.useState)(!1),Se=(0,a.useCallback)(Ue=>{Ve(Ue)},[]),Ye=()=>(0,n.jsx)(N.A,{dashboard:Re});return(0,n.jsx)(m.e,{children:(0,n.jsx)(E.m,{overlay:Ye,placement:"bottom-end",onVisibleChange:Se,children:(0,n.jsxs)(p.$n,{size:"sm",variant:"secondary",fill:"solid",tooltip:(0,c.t)("export.menu.export-as-json-tooltip","Export"),"aria-label":(0,c.t)("dashboard.export.button.label","Export dashboard"),"aria-haspopup":"menu","aria-expanded":Ke,"data-testid":r.Tp.pages.Dashboard.DashNav.NewExportButton.arrowMenu,children:[(0,n.jsx)(c.x6,{i18nKey:"export.menu.export-as-json-label",children:"Export"}),"\xA0",(0,n.jsx)(g.I,{name:Ke?"angle-up":"angle-down",size:"sm","aria-hidden":"true"})]})})})}var R=e(41053),G=e(23289),w=e(16001),_=e(12434);const Q=r.Tp.pages.Dashboard.DashNav.newShareButton;function ae({dashboard:Re,panel:Ke}){const Ve=(0,h.of)(q),[Se,Ye]=(0,a.useState)(!1),[Ue,je]=(0,R.A)(async()=>{G.c.toolbarShareClick(),await(0,_.Xe)(Re,Ke)},[Re,Ke]),Qe=(0,a.useCallback)(Je=>{Je&&G.c.toolbarShareDropdownClick(),Ye(Je)},[]),He=()=>(0,n.jsx)(w.Ay,{dashboard:Re});return(0,n.jsxs)(m.e,{"data-testid":Q.container,className:Ve.container,children:[(0,n.jsx)(p.$n,{"data-testid":Q.shareLink,size:"sm",tooltip:(0,c.t)("share-dashboard.share-button-tooltip","Copy link"),onClick:je,children:(0,n.jsx)(c.x6,{i18nKey:"share-dashboard.share-button",children:"Share"})}),(0,n.jsx)(E.m,{overlay:He,placement:"bottom-end",onVisibleChange:Qe,children:(0,n.jsx)(p.$n,{"aria-label":(0,c.t)("dashboard-scene.share-button.aria-label-sharedropdownmenu","Toggle share menu"),"data-testid":Q.arrowMenu,size:"sm",icon:Se?"angle-up":"angle-down"})})]})}function q(Re){return{container:(0,s.css)({gap:1})}}var k=e(75541),ee=e(8285),j=e(63704),J=e(71599),Z=e(45229),te=e(87745);function se(Re){return(0,n.jsx)(f.I,{"data-testid":"button-snapshot",tooltip:(0,c.t)("dashboard.toolbar.open-original","Open original dashboard"),icon:"link",onClick:()=>ie(Re.originalURL)},"button-snapshot")}const ie=Re=>{const Ke=Re??"",Ve=j.sQ.sanitizeUrl(Ke);try{const Se=new URL(Ve,i.$.appUrl),Ye=new URL(i.$.appUrl);Se.host!==Ye.host?Z.A.publish(new te.S8({component:J.u,props:{title:(0,c.t)("dashboard-scene.on-open-snapshot-original-dashboard.title.proceed-to-external-site","Proceed to external site?"),modalClass:(0,s.css)({width:"max-content",maxWidth:"80vw"}),body:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["This link connects to an external website at"," ",(0,n.jsx)("code",{children:Ke})]}),(0,n.jsx)("p",{children:"Are you sure you'd like to proceed?"})]}),confirmVariant:"primary",confirmText:(0,c.t)("dashboard-scene.on-open-snapshot-original-dashboard.confirmText.proceed","Proceed"),onConfirm:()=>{window.location.href=Se.href}}})):o.Ny.push(Ve)}catch(Se){console.error("Failed to open original dashboard",Se)}};var ce=e(75735);function re({meta:Re}){const Ke=Re.k8s;if(!Ke?.annotations)return;let Ve="Provisioned";const Se=Ke.annotations?.[ce.LH],Ye=Ke.annotations?.[ce.Jw];switch(Se){case ce.Sf.Terraform:Ve="Terraform";break;case ce.Sf.Kubectl:Ve="Kubectl";break;case ce.Sf.Plugin:Ve=`Plugin: ${Ye}`;break}return(0,n.jsx)(u.E,{color:"purple",icon:"exchange-alt",tooltip:Ve},"provisioned-dashboard-button-badge")}const ue=({dashboard:Re})=>{if(!Re.state.meta.k8s?.annotations)return null;let Ke="Provisioned";const Ve=Re.state.meta.k8s.annotations[ce.LH],Se=Re.state.meta.k8s.annotations[ce.Jw];switch(Ve){case ce.Sf.Terraform:Ke="Terraform";break;case ce.Sf.Kubectl:Ke="Kubectl";break;case ce.Sf.Plugin:Ke=`Plugin: ${Se}`;break;case ce.Sf.Repo:Ke="Repository";break}return(0,n.jsx)(u.E,{color:"purple",icon:"exchange-alt",tooltip:Ke},"provisioned-dashboard-button-badge")},X=({dashboard:Re})=>(0,n.jsx)(se,{originalURL:Re.getSnapshotUrl()??""});var le=e(98036);const he=({dashboard:Re})=>(0,n.jsx)(f.I,{tooltip:Re.state.meta.isStarred?(0,c.t)("dashboard.toolbar.new.unmark-favorite","Unmark as favorite"):(0,c.t)("dashboard.toolbar.new.mark-favorite","Mark as favorite"),icon:(0,n.jsx)(g.I,{name:Re.state.meta.isStarred?"favorite":"star",size:"lg",type:Re.state.meta.isStarred?"mono":"default"}),"data-testid":r.Tp.components.NavToolbar.markAsFavorite,onClick:()=>{G.c.toolbarFavoritesClick(),Re.onStarDashboard()}});var fe=e(12991);const Ce=({dashboard:Re})=>{const{editview:Ke,editPanel:Ve,isEditing:Se,uid:Ye,meta:Ue,viewPanel:je}=Re.useState(),Qe=!!Ke,He=!!je,Je=!!Se,de=!!Ve,ve=!!Ye,me=!!Ue.canEdit,xe=!!Ue.canStar,Ee=!!Ue.isSnapshot,Pe=!Qe&&!He&&!de,Oe=(0,fe.g)([...(0,fe.f)(k.C.left,"left-dynamic",!de),{key:"star-button",component:he,group:"actions",condition:ve&&xe&&Pe&&!Je},{key:"public-dashboard-badge",component:le.d,group:"actions",condition:ve&&xe&&Pe&&!Je},{key:"managed-dashboard-badge",component:ue,group:"actions",condition:Re.isManaged()&&me},{key:"open-snapshot-origin-button",component:X,group:"actions",condition:Ee&&!Je}],Re);return Oe.length===0?null:(0,n.jsx)(y.U,{alignment:"left",children:Oe})};var Ae=e(95395);const _e=(0,a.memo)(({dashboard:Re})=>i.$.featureToggles.dashboardNewLayouts&&i.$.featureToggles.newDashboardSharingComponent?(0,n.jsx)(d.H,{breadcrumbActions:(0,n.jsx)(Ce,{dashboard:Re}),actions:(0,n.jsx)(Ae.GA,{dashboard:Re})}):(0,n.jsx)(d.H,{actions:(0,n.jsx)(Xe,{dashboard:Re})}));_e.displayName="NavToolbarActions";function Xe({dashboard:Re}){const{isEditing:Ke,viewPanel:Ve,isDirty:Se,uid:Ye,meta:Ue,editview:je,editPanel:Qe,editable:He}=Re.useState(),{isPlaying:Je}=P._o.useState(),[de,ve]=(0,a.useState)(!1),me=D.TP.hasEditPermissionInFolders,xe=[],Ee=(0,h.of)($e),Pe=!!Qe,Oe=!!Ve,We=Te(Qe),Fe=Qe&&(0,ee.ME)(Qe.state.panelRef.resolve()),Be=!(Ye||Re.isManaged()),Le=l.M.exists(b.tH),Ge=!je&&!Oe&&!Pe,Ze=Ke&&Ge,qe=(0,S.d4)(Pt=>M()(Pt,Ue.folderUid)),at=!!(Re.isManagedRepository()||qe),{isReadOnlyRepo:ht,repoType:Et}=(0,T.T)({folderName:Ue.folderUid});Pe||Me(xe,k.C.left,"left-actions"),xe.push({group:"icon-actions",condition:Ye&&!!Ue.canStar&&Ge&&!Ke,render:()=>{let Pt=Ue.isStarred?(0,c.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,c.t)("dashboard.toolbar.mark-favorite","Mark as favorite");return(0,n.jsx)(f.I,{tooltip:Pt,icon:(0,n.jsx)(g.I,{name:Ue.isStarred?"favorite":"star",size:"lg",type:Ue.isStarred?"mono":"default"}),"data-testid":r.Tp.components.NavToolbar.markAsFavorite,onClick:()=>{G.c.toolbarFavoritesClick(),Re.onStarDashboard()}},"star-dashboard-button")}}),xe.push({group:"icon-actions",condition:Ye&&!!Ue.canStar&&Ge&&!Ke,render:()=>(0,n.jsx)(le.d,{dashboard:Re},"public-dashboard-badge")}),ht&&xe.push({group:"icon-actions",condition:!0,render:()=>(0,n.jsx)(u.E,{color:"darkgrey",text:(0,c.t)("dashboard.toolbar.read-only","Read only"),tooltip:(0,O.Te)({isLocal:Et==="local"})})}),Re.isManaged()&&Ue.canEdit&&xe.push({group:"icon-actions",condition:!0,render:()=>(0,n.jsx)(re,{meta:Ue},"managed-dashboard-badge")}),xe.push({group:"icon-actions",condition:Ue.isSnapshot&&!Ke,render:()=>(0,n.jsx)(se,{originalURL:Re.getSnapshotUrl()??""},"go-to-snapshot-origin")}),!Pe&&!Ke&&Me(xe,k.C.right,"icon-actions"),xe.push({group:"add-panel",condition:Ze,render:()=>(0,n.jsx)(E.m,{onVisibleChange:Pt=>{ve(Pt),G.c.toolbarAddClick()},overlay:()=>(0,n.jsxs)(v.W,{children:[(0,n.jsx)(v.W.Item,{testId:r.Tp.pages.AddDashboard.itemButton("Add new visualization menu item"),label:(0,c.t)("dashboard.add-menu.visualization","Visualization"),onClick:()=>{const Pt=Re.onCreateNewPanel();G.c.toolbarAddButtonClicked({item:"add_visualization"}),Re.setState({editPanel:(0,L.L)(Pt,!0)})}},"add-visualization"),(0,n.jsx)(v.W.Item,{testId:r.Tp.pages.AddDashboard.itemButton("Add new panel from panel library menu item"),label:(0,c.t)("dashboard.add-menu.import","Import from library"),onClick:()=>{Re.onShowAddLibraryPanelDrawer(),G.c.toolbarAddButtonClicked({item:"add_library_panel"})},disabled:Re.isManagedRepository()},"add-panel-lib"),(0,n.jsx)(v.W.Item,{testId:r.Tp.pages.AddDashboard.itemButton("Add new row menu item"),label:(0,c.t)("dashboard.add-menu.row","Row"),onClick:()=>{Re.onCreateNewRow(),G.c.toolbarAddButtonClicked({item:"add_row"})}},"add-row"),(0,n.jsx)(v.W.Item,{disabled:!Le,testId:r.Tp.pages.AddDashboard.itemButton("Add new panel from clipboard menu item"),label:(0,c.t)("dashboard.add-menu.paste-panel","Paste panel"),onClick:()=>{Re.pastePanel(),G.c.toolbarAddButtonClicked({item:"paste_panel"})}},"paste-panel")]}),placement:"bottom",offset:[0,6],children:(0,n.jsxs)(p.$n,{variant:"primary",size:"sm",fill:"outline","data-testid":r.Tp.components.PageToolbar.itemButton("Add button"),children:[(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.add",children:"Add"}),(0,n.jsx)(g.I,{name:de?"angle-up":"angle-down",size:"lg"})]},"add-panel-button")},"add-panel-dropdown")}),xe.push({group:"playlist-actions",condition:Je&&Ge&&!Ke,render:()=>(0,n.jsx)(f.I,{"data-testid":r.Tp.pages.Dashboard.DashNav.playlistControls.prev,tooltip:(0,c.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:()=>P._o.prev()},"play-list-prev")}),xe.push({group:"playlist-actions",condition:Je&&Ge&&!Ke,render:()=>(0,n.jsx)(f.I,{onClick:()=>P._o.stop(),"data-testid":r.Tp.pages.Dashboard.DashNav.playlistControls.stop,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.playlist-stop",children:"Stop playlist"})},"play-list-stop")}),xe.push({group:"playlist-actions",condition:Je&&Ge&&!Ke,render:()=>(0,n.jsx)(f.I,{"data-testid":r.Tp.pages.Dashboard.DashNav.playlistControls.next,tooltip:(0,c.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:()=>P._o.next(),narrow:!0},"play-list-next")}),xe.push({group:"back-button",condition:(Oe||Pe)&&!Fe,render:()=>(0,n.jsx)(p.$n,{onClick:()=>{o.Ny.partial({viewPanel:null,editPanel:null})},tooltip:"",variant:"secondary",size:"sm",icon:"arrow-left","data-testid":r.Tp.components.NavToolbar.editDashboard.backToDashboardButton,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.back-to-dashboard",children:"Back to dashboard"})},"back")}),xe.push({group:"back-button",condition:!!je,render:()=>(0,n.jsx)(p.$n,{onClick:()=>{o.Ny.partial({editview:null})},tooltip:"",fill:"text",variant:"secondary",size:"sm",icon:"arrow-left","data-testid":r.Tp.components.NavToolbar.editDashboard.backToDashboardButton,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.back-to-dashboard",children:"Back to dashboard"})},"back")});const mt=Ye&&!Ke&&!Ue.isSnapshot&&!Je;return xe.push({group:"main-buttons",condition:!i.$.featureToggles.newDashboardSharingComponent&&mt,render:()=>(0,n.jsx)(p.$n,{tooltip:(0,c.t)("dashboard.toolbar.share.tooltip","Share dashboard"),size:"sm",className:Ee.buttonWithExtraMargin,fill:"outline",onClick:()=>{G.c.toolbarShareClick(),o.Ny.partial({shareView:B.wr.link})},"data-testid":r.Tp.components.NavToolbar.shareDashboard,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.share.label",children:"Share"})},"share-dashboard-button")}),xe.push({group:"main-buttons",condition:!Ke&&Re.canEditDashboard()&&!Oe&&!Je&&He,render:()=>(0,n.jsx)(p.$n,{onClick:()=>{Re.onEnterEditMode()},tooltip:ht?(0,O.Te)({isLocal:Et==="local"}):(0,c.t)("dashboard.toolbar.edit.tooltip","Enter edit mode"),className:Ee.buttonWithExtraMargin,variant:i.$.featureToggles.newDashboardSharingComponent?"secondary":"primary",size:"sm","data-testid":r.Tp.components.NavToolbar.editDashboard.editButton,disabled:ht,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.edit.label",children:"Edit"})},"edit")}),xe.push({group:"main-buttons",condition:!Ke&&Re.canEditDashboard()&&!Oe&&!Je&&!He,render:()=>(0,n.jsx)(p.$n,{onClick:()=>{Re.onEnterEditMode(),Re.setState({editable:!0,meta:{...Ue,canEdit:!0}})},tooltip:(0,c.t)("dashboard.toolbar.enter-edit-mode.tooltip","This dashboard was marked as read only"),className:Ee.buttonWithExtraMargin,variant:"secondary",size:"sm","data-testid":r.Tp.components.NavToolbar.editDashboard.editButton,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.enter-edit-mode.label",children:"Make editable"})},"edit")}),xe.push({group:"new-share-dashboard-buttons",condition:i.$.featureToggles.newDashboardSharingComponent&&mt,render:()=>(0,n.jsx)(W,{dashboard:Re},"new-export-dashboard-button")}),xe.push({group:"new-share-dashboard-buttons",condition:i.$.featureToggles.newDashboardSharingComponent&&mt,render:()=>(0,n.jsx)(ae,{dashboard:Re},"new-share-dashboard-button")}),xe.push({group:"settings",condition:Ke&&Re.canEditDashboard()&&Ge,render:()=>(0,n.jsx)(p.$n,{onClick:()=>{Re.onOpenSettings()},tooltip:(0,c.t)("dashboard.toolbar.dashboard-settings.tooltip","Dashboard settings"),fill:"text",size:"sm",variant:"secondary","data-testid":r.Tp.components.NavToolbar.editDashboard.settingsButton,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.dashboard-settings.label",children:"Settings"})},"settings")}),xe.push({group:"main-buttons",condition:Ke&&!Be&&Ge,render:()=>(0,n.jsx)(p.$n,{onClick:()=>Re.exitEditMode({skipConfirm:!1}),tooltip:(0,c.t)("dashboard.toolbar.exit-edit-mode.tooltip","Exits edit mode and discards unsaved changes"),size:"sm",fill:"text",variant:"primary","data-testid":r.Tp.components.NavToolbar.editDashboard.exitButton,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.exit-edit-mode.label",children:"Exit edit"})},"discard")}),xe.push({group:"main-buttons",condition:Pe&&!Fe&&!je&&!Oe,render:()=>(0,n.jsx)(p.$n,{onClick:Qe?.onDiscard,tooltip:Qe?.state.isNewPanel?(0,c.t)("dashboard.toolbar.discard-panel-new","Discard panel"):(0,c.t)("dashboard.toolbar.discard-panel","Discard panel changes"),size:"sm",disabled:!We,fill:"outline",variant:"destructive","data-testid":r.Tp.components.NavToolbar.editDashboard.discardChangesButton,children:Qe?.state.isNewPanel?(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.discard-panel-new",children:"Discard panel"}):(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.discard-panel",children:"Discard panel changes"})},"discard")}),xe.push({group:"main-buttons",condition:Pe&&Fe&&!je&&!Oe,render:()=>(0,n.jsx)(p.$n,{onClick:Qe?.onDiscard,tooltip:(0,c.t)("dashboard.toolbar.discard-library-panel-changes","Discard library panel changes"),size:"sm",fill:"outline",variant:"destructive","data-testid":r.Tp.components.NavToolbar.editDashboard.discardChangesButton,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.discard-library-panel-changes",children:"Discard library panel changes"})},"discardLibraryPanel")}),xe.push({group:"main-buttons",condition:Pe&&Fe&&!je&&!Oe,render:()=>(0,n.jsx)(p.$n,{onClick:Qe?.onUnlinkLibraryPanel,tooltip:(0,c.t)("dashboard.toolbar.unlink-library-panel","Unlink library panel"),size:"sm",fill:"outline",variant:"secondary","data-testid":r.Tp.components.NavToolbar.editDashboard.unlinkLibraryPanelButton,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.unlink-library-panel",children:"Unlink library panel"})},"unlinkLibraryPanel")}),xe.push({group:"main-buttons",condition:Pe&&Fe&&!je&&!Oe,render:()=>(0,n.jsx)(p.$n,{onClick:Qe?.onSaveLibraryPanel,tooltip:(0,c.t)("dashboard.toolbar.save-library-panel","Save library panel"),size:"sm",fill:"outline",variant:"primary","data-testid":r.Tp.components.NavToolbar.editDashboard.saveLibraryPanelButton,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.save-library-panel",children:"Save library panel"})},"saveLibraryPanel")}),xe.push({group:"main-buttons",condition:Ke&&!Fe&&(Ue.canSave||me),render:()=>{if(Be)return(0,n.jsx)(p.$n,{onClick:()=>{Re.openSaveDrawer({})},className:Ee.buttonWithExtraMargin,tooltip:(0,c.t)("dashboard.toolbar.save-dashboard.tooltip","Save changes"),size:"sm",variant:"primary","data-testid":r.Tp.components.NavToolbar.editDashboard.saveButton,children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.save-dashboard.label",children:"Save dashboard"})},"save");if(me&&!Ue.canSave&&!Ue.canMakeEditable&&!at)return(0,n.jsx)(p.$n,{onClick:()=>{Re.openSaveDrawer({saveAsCopy:!0})},className:Ee.buttonWithExtraMargin,tooltip:(0,c.t)("dashboard.toolbar.save-dashboard-copy.tooltip","Save as copy"),size:"sm",variant:Se?"primary":"secondary",children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.save-dashboard-copy.label",children:"Save as copy"})},"save");const Pt=(0,n.jsxs)(v.W,{children:[(0,n.jsx)(v.W.Item,{label:(0,c.t)("dashboard.toolbar.save-dashboard-short","Save"),icon:"save",onClick:()=>{Re.openSaveDrawer({})}}),(0,n.jsx)(v.W.Item,{label:(0,c.t)("dashboard.toolbar.save-dashboard-copy.label","Save as copy"),icon:"copy",onClick:()=>{Re.openSaveDrawer({saveAsCopy:!0})}})]});return(0,n.jsxs)(m.e,{className:Ee.buttonWithExtraMargin,children:[(0,n.jsx)(p.$n,{onClick:()=>{Re.openSaveDrawer({})},tooltip:(0,c.t)("dashboard.toolbar.save-dashboard.tooltip","Save changes"),size:"sm","data-testid":r.Tp.components.NavToolbar.editDashboard.saveButton,variant:Se?"primary":"secondary",children:(0,n.jsx)(c.x6,{i18nKey:"dashboard.toolbar.save-dashboard.label",children:"Save dashboard"})}),(0,n.jsx)(E.m,{overlay:Pt,children:(0,n.jsx)(p.$n,{"aria-label":(0,c.t)("dashboard.toolbar.more-save-options","More save options"),icon:"angle-down",variant:Se?"primary":"secondary",size:"sm"})})]},"save")}}),(0,n.jsx)(y.U,{alignment:"right",children:De(xe)})}function De(Re){const Ke=[];let Ve="";for(const Se of Re)Se.condition&&(Ve&&Ve!==Se.group&&Ve&&Ke.push((0,n.jsx)(x.K,{},`${Se.group}-separator`)),Ke.push(Se.render()),Ve=Se.group);return Ke}function Me(Re,Ke,Ve){if(Ke.length>0)for(const Se of Ke){const Ye={dashboard:(0,C.UA)().getCurrent()};if(Se.show(Ye)){const Ue=Se.component;Re.push({group:Ve,condition:!0,render:()=>(0,a.createElement)(Ue,{...Ye,key:Re.length})})}}}function Te(Re){const[Ke,Ve]=(0,a.useState)();return(0,a.useEffect)(()=>{if(Re){const Se=Re.subscribeToState(Ye=>{Ye.isDirty!==Ke&&Ve(Ye.isDirty)});return()=>Se.unsubscribe()}},[Re,Ke]),Ke}function $e(Re){return{hiddenElementsContainer:(0,s.css)({display:"flex",padding:0,gap:Re.spacing(1),whiteSpace:"nowrap"}),buttonWithExtraMargin:(0,s.css)({margin:Re.spacing(0,.5)}),publicBadge:(0,s.css)({color:"grey",backgroundColor:"transparent",border:"1px solid"})}}},66507:(ne,A,e)=>{"use strict";e.d(A,{t:()=>g});var n=e(74848),a=e(96540),s=e(28105),l=e(92745),r=e(45863),c=e(43243),i=e(33143),o=e(32603),h=e(71199),f=e(87748);class g extends r.Bs{constructor(v){super(v),this._dataProvider=void 0,this.addActivationHandler(()=>this._activationHandler())}static{this.Component=u}static{this.serializer={id:"ConditionalRenderingData",name:"Data",deserialize:this.deserialize}}_activationHandler(){if(this.forEachChild(p=>{p.isActive||this._subs.add(p.activate())}),this._dataProvider=this._getObjectDataProvider(),!this._dataProvider)return;const v=this._dataProvider.activate();return this._check(),this._subs.add(this._dataProvider.subscribeToState(()=>this._check())),()=>{v?.()}}_getObjectDataProvider(){const v=(0,f.iM)(this);if(!v)return;let p;for(const m of Object.values(v.state))if(m instanceof r.Eb){p=m;break}if(p)return r.jh.getData(p)??void 0}_check(){const v=this._evaluate();v!==this.state.result&&(this.setState({...this.state,result:v}),(0,f.ah)(this))}_evaluate(){if(!this._dataProvider||!this._dataProvider.state.data||this._dataProvider.state.data.state===s.Gu.Loading||this._dataProvider.state.data.state===s.Gu.NotStarted)return;const v=this._dataProvider?.state.data?.series??[];let p=!1;for(let m=0;m<v.length;m++)if(v[m].length>0){p=!0;break}return this.state.value===p}changeValue(v){this.state.value!==v&&(this.setState({value:v}),this._check())}render(){return(0,n.jsx)(this.Component,{model:this},this.state.key)}serialize(){return{kind:"ConditionalRenderingData",spec:{value:this.state.value}}}static deserialize(v){return new g({value:v.spec.value,result:void 0})}static createEmpty(){return new g({value:!0,result:void 0})}}function u({model:E}){const{value:v}=E.useState(),p=(0,a.useMemo)(()=>[{label:(0,l.t)("dashboard.conditional-rendering.conditions.data.enable","Has data"),value:1},{label:(0,l.t)("dashboard.conditional-rendering.conditions.data.disable","No data"),value:0}],[]),m=(0,a.useMemo)(()=>p.find(d=>!!d.value===v)??p[0],[p,v]),y=(0,f.KG)(E);return(0,n.jsx)(h.B,{info:(0,l.t)("dashboard.conditional-rendering.conditions.data.info","Show or hide the {{type}} based on query results.",{type:(0,o.L9)(y)}),isObjectSupported:y==="panel",model:E,title:(0,l.t)("dashboard.conditional-rendering.conditions.data.label","Query result"),children:(0,n.jsx)(c.G,{options:p,value:m,onChange:({value:d})=>{i.cc.edit({description:(0,l.t)("dashboard.edit-actions.edit-query-result-rule","Change query result rule"),source:E,perform:()=>E.changeValue(!!d),undo:()=>E.changeValue(v)})}})})}},66513:(ne,A,e)=>{"use strict";e.d(A,{GK:()=>l,Zr:()=>s,xK:()=>a});var n=e(11257);const a=[n.w.AlertingTimeIntervalsRead],s=[n.w.AlertingTimeIntervalsWrite],l=[...a,...s]},66594:(ne,A,e)=>{"use strict";e.d(A,{$H:()=>h,Ay:()=>f});var n=e(2543),a=e(29043),s=e(72054),l=e(78282);const r=x=>{const b=(0,l.l)().getInstanceSettings(x.datasourceName);return{id:x.ts.toString(),createdAt:x.ts,datasourceName:x.datasourceName,datasourceUid:b?.uid||"",starred:x.starred,comment:x.comment,queries:x.queries}},c=x=>{if(!(0,l.l)().getInstanceSettings({uid:x.datasourceUid}))throw new Error("Datasource not found.");return{ts:x.createdAt,datasourceName:x.datasourceName,starred:x.starred,comment:x.comment,queries:x.queries}};var i=e(68126);const o="grafana.explore.richHistory",h=1e4;class f{async getRichHistory(b){const D=v().map(r),C=b.starred?D.filter(O=>O.starred===!0):D,P=b.from&&b.to?[b.from,b.to]:void 0,T=(0,i.a_)(C,b.sortOrder,b.datasourceFilters,b.search,P);return{richHistory:T,total:T.length}}async addToRichHistory(b){const D=Date.now(),C={id:D.toString(),createdAt:D,...b},P=c(C),T=u(v()),O=P.queries.map(F=>(0,n.omit)(F,["key","refId"])),S=T.length>0&&T[0].queries.map(F=>(0,n.omit)(F,["key","refId"]));if((0,n.isEqual)(O,S)){const F=new Error("Entry already exists");throw F.name=s.m.DuplicatedEntry,F}const{queriesToKeep:B,limitExceeded:K}=E(T),U=[P,...B];try{a.A.setObject(o,U)}catch(F){if(F instanceof Error&&F.name==="QuotaExceededError")d(s.m.StorageFull,`Saving rich history failed: ${F.message}`);else throw F}return K?{warning:{type:s.C.LimitExceeded,message:`Query history reached the limit of ${h}. Old, not-starred items have been removed.`},richHistoryQuery:C}:{richHistoryQuery:C}}async deleteAll(){a.A.delete(o)}async deleteRichHistory(b){const D=parseInt(b,10),P=a.A.getObject(o,[]).filter(T=>T.ts!==D);a.A.setObject(o,P)}async updateStarred(b,D){return g(b,C=>C.starred=D)}async updateComment(b,D){return g(b,C=>C.comment=D)}async getSettings(){return{activeDatasourcesOnly:a.A.getObject(i.mE.activeDatasourcesOnly)??a.A.getObject(i.mE.legacyActiveDatasourceOnly,!1),retentionPeriod:a.A.getObject(i.mE.retentionPeriod,7),starredTabAsFirstTab:a.A.getBool(i.mE.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:a.A.getObject(i.mE.datasourceFilters,[]).map(D=>D.value)}}async updateSettings(b){a.A.set(i.mE.activeDatasourcesOnly,b.activeDatasourcesOnly),a.A.set(i.mE.retentionPeriod,b.retentionPeriod),a.A.set(i.mE.starredTabAsFirstTab,b.starredTabAsFirstTab),a.A.setObject(i.mE.datasourceFilters,(b.lastUsedDatasourceFilters||[]).map(D=>({value:D})))}}function g(x,b){const D=parseInt(x,10),C=a.A.getObject(o,[]),P=(0,n.find)(C,{ts:D});if(!P)throw new Error("Rich history item not found.");return b(P),a.A.setObject(o,C),r(P)}function u(x){const b=a.A.getObject(i.mE.retentionPeriod,7),D=(0,i.wQ)(b,{isLastTs:!1});return x.filter(C=>C.ts>D||C.starred===!0)||[]}function E(x){let b=!1,D=x.length-1;for(;D>=0&&x.length>=h;)x[D].starred||(x.splice(D,1),b=!0),D--;return{queriesToKeep:x,limitExceeded:b}}function v(){const x=a.A.getObject(o,[]);return p(x)}function p(x){return x.map(D=>{const C=D.queries.map((P,T)=>m(D,P,T));return{...D,queries:C}})}function m(x,b,D){const C="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof b=="object"?b:y(b)?JSON.parse(b):{expr:b,refId:C[D]}}function y(x){try{JSON.parse(x)}catch{return!1}return!0}function d(x,b){const D=new Error(b);throw D.name=x,D}},66615:(ne,A,e)=>{"use strict";e.d(A,{b:()=>l});var n=e(74848),a=e(96540),s=e(78012);const l=r=>{const{children:c,storageKey:i,defaultValue:o}=r,[h,f]=(0,a.useState)({value:s.M.getObject(r.storageKey,r.defaultValue)});(0,a.useEffect)(()=>{const E=v=>{v.key===i&&f({value:s.M.getObject(r.storageKey,r.defaultValue)})};return window.addEventListener("storage",E),()=>{window.removeEventListener("storage",E)}});const g=E=>{try{s.M.setObject(i,E)}catch(v){console.error(v)}f({value:E})},u=()=>{try{s.M.delete(i)}catch(E){console.log(E)}f({value:o})};return(0,n.jsx)(n.Fragment,{children:c(h.value,g,u)})}},66630:(ne,A,e)=>{"use strict";e.d(A,{h2:()=>m,nB:()=>u});var n=e(74848),a=e(22803),s=e(96540),l=e(93581),r=e(44922),c=e(92745),i=e(63142),o=e(30703),h=e(5857),f=e(41e3);const g={saturday:"islamic",sunday:"gregory",monday:"iso8601"};function u({onChange:y,from:d,to:x,timeZone:b,weekStart:D}){const C=E(d,x,new Date,b),P=v(y,b),T=(0,i.of)(m),O=(0,h.rL)(D);return(0,n.jsx)(l.Ay,{selectRange:!0,next2Label:null,prev2Label:null,className:T.body,tileClassName:T.title,value:C,nextLabel:(0,n.jsx)(o.I,{name:"angle-right"}),nextAriaLabel:(0,c.t)("time-picker.calendar.next-month","Next month"),prevLabel:(0,n.jsx)(o.I,{name:"angle-left"}),prevAriaLabel:(0,c.t)("time-picker.calendar.previous-month","Previous month"),onChange:P,locale:"en",calendarType:g[O]})}u.displayName="Body";function E(y,d,x=new Date,b){let D=y.isValid()?y.toDate():x,C=d.isValid()?d.toDate():x;return b&&(D=(0,f.Q)(D,b),C=(0,f.Q)(C,b)),D>C?[C,D]:[D,C]}function v(y,d){return(0,s.useCallback)(x=>{if(!Array.isArray(x))return console.error("onCalendarChange: should be run in selectRange={true}");if(x[0]&&x[1]){const b=(0,r.b)(p(x[0]),{timeZone:d}),D=(0,r.b)(p(x[1]),{timeZone:d});y(b,D)}},[y,d])}function p(y){return[y.getFullYear(),y.getMonth(),y.getDate(),y.getHours(),y.getMinutes(),y.getSeconds()]}const m=y=>{const d=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:(0,a.css)({color:y.colors.text.primary,backgroundColor:y.colors.background.primary,fontSize:y.typography.size.md,border:"1px solid transparent","&:hover, &:focus":{position:"relative"},"&:disabled":{color:y.colors.action.disabledText,cursor:"not-allowed"}}),body:(0,a.css)({zIndex:y.zIndex.modal,backgroundColor:y.colors.background.elevated,width:"268px",".react-calendar__navigation":{display:"flex"},".react-calendar__navigation__label, .react-calendar__navigation__arrow, .react-calendar__navigation":{paddingTop:"4px",backgroundColor:"inherit",color:y.colors.text.primary,border:0,fontWeight:y.typography.fontWeightMedium},".react-calendar__month-view__weekdays":{backgroundColor:"inherit",textAlign:"center",color:y.colors.primary.text,abbr:{border:0,textDecoration:"none",cursor:"default",display:"block",padding:"4px 0 4px 0"}},".react-calendar__month-view__days":{backgroundColor:"inherit"},".react-calendar__tile, .react-calendar__tile--now":{marginBottom:"4px",backgroundColor:"inherit",height:"26px"},".react-calendar__navigation__label, .react-calendar__navigation > button:focus, .time-picker-calendar-tile:focus":{outline:0},".react-calendar__tile--hover":{backgroundColor:y.colors.action.hover,borderRadius:0},".react-calendar__tile--hoverStart":{borderTopLeftRadius:y.shape.radius.pill,borderBottomLeftRadius:y.shape.radius.pill},".react-calendar__tile--hoverEnd":{borderTopRightRadius:y.shape.radius.pill,borderBottomRightRadius:y.shape.radius.pill},".react-calendar__tile:hover:not(.react-calendar__tile--hover):not(.react-calendar__tile--active):not(.react-calendar__tile--hasActive)":{backgroundColor:y.colors.action.hover,borderRadius:y.shape.radius.pill},[`${d}, .react-calendar__tile--rangeStart:not(.react-calendar__tile--hover)`]:{borderTopLeftRadius:y.shape.radius.pill,borderBottomLeftRadius:y.shape.radius.pill},[`${d}, .react-calendar__tile--rangeEnd:not(.react-calendar__tile--hover)`]:{borderTopRightRadius:y.shape.radius.pill,borderBottomRightRadius:y.shape.radius.pill},[`${d}, .react-calendar__tile--active, .react-calendar__tile--rangeEnd, .react-calendar__tile--rangeStart`]:{color:y.colors.primary.contrastText,fontWeight:y.typography.fontWeightMedium,background:y.colors.primary.main,border:"0px"}})}}},66650:(ne,A,e)=>{"use strict";e.d(A,{B5:()=>h,EJ:()=>E,WO:()=>o,Z8:()=>g,pl:()=>p});var n=e(84140),a=e(6773),s=e(64394),l=e(33553),r=e(739),c=e(53568);function i(m,y,d){let x=0,b=0,D=0,C=0;return m===3?(b=y.top,C=y.top+y.height):m===2?(x=y.left+y.width,D=y.left):m===1?(b=y.top+y.height,C=y.top):m===0&&(x=y.left,D=y.left+y.width),d.createLinearGradient(x,b,D,C)}function o(m,y){return(d,x)=>{const b=(0,c.Yc)(),D=i(d.scales.x.ori===r.Lt.Horizontal?3:2,d.bbox,b);return D.addColorStop(0,a.MV.alpha(m,y)),D.addColorStop(1,a.MV.alpha(m,0)),D}}function h(m,y,d){return(x,b)=>{const D=(0,c.Yc)(),C=i(x.scales.x.ori===r.Lt.Horizontal?3:2,x.bbox,D),P=(0,n.A)(m).spin(-25).darken(5),T=(0,n.A)(m).saturate(20).spin(20).brighten(10);return d.isDark?(C.addColorStop(0,T.lighten(10).setAlpha(y).toString()),C.addColorStop(1,P.darken(10).setAlpha(y).toString())):(C.addColorStop(0,T.lighten(10).setAlpha(y).toString()),C.addColorStop(1,P.setAlpha(y).toString())),C}}var f=(m=>(m[m.Right=0]="Right",m[m.Up=1]="Up",m[m.Left=2]="Left",m[m.Down=3]="Down",m))(f||{});function g(m,y,d,x=!1){let b=m.scales[y],D=null,C=null;for(let N=0;N<d.length;N++){let W=d[N][0];if((W<=b.min||D==null)&&(D=N),C=N,W>=b.max)break}if(D===C)return d[D][1];let P=d[D][0],T=d[C][0];P===-1/0&&(P=b.min),T===1/0&&(T=b.max);let O=Math.round(m.valToPos(P,y,!0)),S=Math.round(m.valToPos(T,y,!0)),B=O-S;if(B===0)return d[C][1];let K,U,F,I;m.scales.x.ori===r.Lt.Horizontal?(K=F=0,U=O,I=S):(U=I=0,K=O,F=S);let M=(0,c.Yc)().createLinearGradient(K,U,F,I),L;for(let N=D;N<=C;N++){let W=d[N],R=N===D?O:N===C?S:Math.round(m.valToPos(W[0],y,!0)),G=(O-R)/B;x&&N>D&&M.addColorStop(G,L),M.addColorStop(G,L=W[1])}return M}function u(m,y){let d=m.scales[y],x=1/0,b=-1/0;return m.series.forEach((D,C)=>{if(D.show&&D.scale===y)if(D.min==null){let P=m.data[C];for(let T=0;T<P.length;T++)P[T]!=null&&(x=Math.min(x,P[T]),b=Math.max(b,P[T]))}else x=Math.min(x,D.min),b=Math.max(b,D.max)}),b===x&&(x=d.min,b=d.max),[x,b]}function E(m,y,d,x,b,D){let C=d??b??null,P=x??D??null;if(C==null||P==null){let[T,O]=u(m,y);C=C??T??0,P=P??O??100}return[C,P]}function v(m){return m==="transparent"||m[0]==="#"&&m.slice(-2)==="00"}function p(m,y,d,x,b,D,C,P){if(!d)throw Error("Missing colorMode required for color scheme gradients");if(!x)throw Error("Missing thresholds required for color scheme gradients");return(T,O)=>{let S=T.series[O].scale,B="";if(d.id===s.Y.Thresholds)if(x.mode===l.O.Absolute){const K=x.steps.map(U=>[U.value,v(U.color)?"#0000":a.MV.alpha(y.visualization.getColorByName(U.color),m)]);B=g(T,S,K,!0)}else{const[K,U]=E(T,S,b,D,C,P),F=U-K,I=x.steps.map(V=>[K+F*(V.value/100),a.MV.alpha(y.visualization.getColorByName(V.color),m)]);B=g(T,S,I,!0)}else if(d.getColors){const K=d.getColors(y),[U,F]=E(T,S,b,D,C,P),I=F-U,V=K.map((M,L)=>[U+I*(L/(K.length-1)),a.MV.alpha(y.visualization.getColorByName(M),m)]);B=g(T,S,V,!1)}return B}}},66698:(ne,A,e)=>{"use strict";e.d(A,{w:()=>o});var n=e(74848),a=e(28105),s=e(92745),l=e(2863),r=e(66404),c=e(31286),i=e(67933);function o({query:h,datasource:f,VariableQueryEditor:g,onLegacyQueryChange:u,onQueryChange:E,timeRange:v}){let p;return typeof h=="string"?p=h||(f.variables?.getDefaultQuery?.()??""):p={...f.variables?.getDefaultQuery?.(),...h},g&&(0,i.VN)(g,f)?(0,n.jsxs)(c.a,{marginBottom:2,children:[(0,n.jsx)(r.E,{variant:"bodySmall",weight:"medium",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.query-editor.query",children:"Query"})}),(0,n.jsx)(c.a,{marginTop:.25,children:(0,n.jsx)(g,{datasource:f,query:p,templateSrv:(0,l.w)(),onChange:u},f.uid)})]}):g&&(0,i.CH)(g,f)?(0,n.jsx)(c.a,{marginBottom:2,children:(0,n.jsx)(c.a,{marginTop:.25,children:(0,n.jsx)(g,{datasource:f,query:p,onChange:E,onRunQuery:()=>{},data:{series:[],state:a.Gu.Done,timeRange:v},range:v,onBlur:()=>{},history:[]},f.uid)})}):null}},66769:(ne,A,e)=>{"use strict";e.d(A,{ZN:()=>S,ys:()=>d,HG:()=>y,Xh:()=>m,Yy:()=>b,BB:()=>T,To:()=>P,hn:()=>O,N3:()=>B,QX:()=>C,Kb:()=>x});var n=e(2543),a=e(87056),s=e(43173),l=e(77731),r=e(18795),c=e(7817);function i(U,F){return U===F?F:Array.isArray(U)&&Array.isArray(F)?f(U,F):o(U)&&o(F)?h(U,F):F}function o(U){return typeof U=="object"&&!Array.isArray(U)&&U!==null}function h(U,F){const I=Object.keys(U),V={};for(const M of I)F.hasOwnProperty(M)&&(Array.isArray(U[M])&&Array.isArray(F[M])||typeof U[M]=="object"&&typeof F[M]=="object"?V[M]=i(U[M],F[M]):V[M]=F[M]);return V}function f(U,F){const I=new Array(U.length).fill(void 0),V=new Set([...Array(U.length).keys()]),M=new Set([...Array(F.length).keys()]);for(let L=0;L<U.length&&M.size!==0;L++){let N=U[L];for(let W=0;W<F.length;W++){if(!M.has(W))continue;let R=F[W];R=i(N,R),JSON.stringify(N)===JSON.stringify(R)&&(V.delete(L),M.delete(W),I[L]=R)}}return g(U,F,I,V,M),I.filter(L=>L!==void 0)}function g(U,F,I,V,M){let L={};M.forEach(W=>{let R=F[W];if(typeof R!="object"||Array.isArray(R)){I.push(R),M.delete(W);return}V.forEach(G=>{let w=U[G];if(typeof w!="object"||Array.isArray(w)){V.delete(G);return}let _=0;for(const Q in w){let ae=w[Q];if(!R.hasOwnProperty(Q))continue;let q=R[Q];typeof ae!="string"&&typeof ae!="number"||typeof ae!=typeof q||ae===q&&(Q==="id"&&(_+=1e3),_++)}_!==0&&(L[_]===void 0&&(L[_]=[]),L[_].push([G,W]))})});const N=Object.keys(L).map(Number);N.sort((W,R)=>R-W);for(const W of N){let R=L[W];for(const G of R){const[w,_]=G;V.has(w)&&M.has(_)&&(I[w]=F[_],V.delete(w),M.delete(_))}}for(const W of M)I.push(F[W])}function u(U){const F=U.split(`
`);let I=U[0].startsWith("Index")?4:3,V=F.slice(0,I);const M=/("title"|Title|\{|\}|\[|\])/i;for(let L=I;L<F.length;L++){let N=F[L];(M.test(N)||N.startsWith("+")||N.startsWith("-"))&&V.push(N)}return V.join(`
`)+`
`}function E(U){if(U===null||U==="")return null;if(Array.isArray(U)){const I=U.map(V=>E(V)).filter(V=>V!==null);return I.length>0?I:null}if(typeof U!="object")return U;const F={};for(const I in U){const V=E(U[I]);if(V!==null){if(Array.isArray(V)&&V.length===0||typeof V=="object"&&Object.keys(V).length===0)continue;F[I]=V}}return Object.keys(F).length>0?F:null}function v(U){return JSON.parse(JSON.stringify(U,null,2))}function p(U){let F=v(U.getOriginalDashboard()),I=v(new c.G(F).getSaveModelClone()),V=v(U.getSaveModelClone());I=E(i(F,I)),V=E(i(I,V)),F=E(F);let M=(0,r.ss)("Before migration changes","After migration changes",JSON.stringify(F,null,2),JSON.stringify(I,null,2),"","",{context:20}),L=(0,r.ss)("Before user changes","After user changes",JSON.stringify(I,null,2),JSON.stringify(V,null,2),"","",{context:20});return M=u(M),L=u(L),{migrationDiff:M,userDiff:L}}var m=(U=>(U.system="system",U.user="user",U))(m||{}),y=(U=>(U.Shorter="Even shorter",U.MoreDescriptive="More descriptive",U.Regenerate="Please, regenerate",U))(y||{});const d=a.Kx.LARGE,x=U=>U.replace(/^"|"$/g,"");function b(U){const{migrationDiff:F,userDiff:I}=p(U);return{userChanges:I,migrationChanges:F}}let D;async function C(){return s.$.apps["grafana-llm-app"]?D||(D=new Promise(U=>{a.vK().then(F=>{F.ok||(D=void 0),U(F.ok)})}),D):!1}const P=(U,F)=>[{role:"system",content:`Your previous response was: ${U}. The user has provided the following feedback: ${F}. Re-generate your response according to the provided feedback.`}];function T(U){const F=B(U);let I;if(F.length<=10)I=`The panels in the dashboard are:
${F.join(`
`)}`;else{const V=U.panels.filter(N=>N.description),M=U.panels.filter(N=>!N.description);let L;V.length>=10?L=V.slice(10).map(K).join(`
`):(L=V.map(K).join(`
`),L+=`
`,L+=M.slice(10-V.length).map(K).join("n")),I=`There are ${F.length} panels.
Due to space constraints, only the information for ten of them is presented.
These ten are not necessarily the first ten, but prioritized to those with descriptions.
The panels in the dashboard are:
${L}`}return I}function O(U){const F=["datasource","title","description","targets","type"],I={...(0,n.pick)(U,F),options:(0,n.pick)(U.options,["content"])};return JSON.stringify(I,null,2)}const S="To generate this content your dashboard must contain at least one panel with a valid title or description.";function B(U){return U.panels.filter(I=>I.title&&I.title!==l.LH||I.description&&I.description.length>0).map(K)}const K=(U,F)=>`- Panel ${F}
- Title: ${U.title}${U.description?`
- Description: ${U.description}`:""}`},66773:(ne,A,e)=>{"use strict";e.d(A,{s:()=>T});var n=e(74848),a=e(22803),s=e(2543),l=e(96540),r=e(92745),c=e(63142),i=e(45861),o=e(9514),h=e(94018),f=e(72636),g=e(77824),u=e(24619);const E=({className:B,onStateFilterChange:K,stateFilter:U,filterType:F,itemPerStateStats:I})=>{const V=(0,c.of)(v),M=G=>function(){return I&&I[G]?(0,n.jsx)(h.v,{name:I[G].toFixed(0),colorIndex:9,className:V.tag}):null},L=Object.values(u.Gi).map(G=>({label:G,value:G,component:M(G)})),W=[u.cF.Firing,u.cF.Pending].map(G=>({label:(0,s.capitalize)(G),value:G,component:M(G)})),R=F==="grafana"?L:W;return(0,n.jsxs)("div",{className:B,"data-testid":"alert-instance-state-filter",children:[(0,n.jsx)(f.J,{children:(0,n.jsx)(r.x6,{i18nKey:"alerting.alert-instance-state-filter.state",children:"State"})}),(0,n.jsx)(g.z,{options:R,value:U,onChange:K,onClick:G=>{G===U&&K(void 0)}})]})};function v(B){return{tag:(0,a.css)({fontSize:"11px",fontWeight:"normal",padding:B.spacing(.25,.5),verticalAlign:"middle",marginLeft:B.spacing(.5)})}}var p=e(86017),m=e(77256),y=e(21834),d=e(52161),x=e(63895),b=e(29609),D=e(75983),C=e(46672);function P({stats:B,onClick:K,href:U}){const F=(0,c.of)(S);return(0,n.jsxs)("div",{className:F.footerRow,children:[(0,n.jsx)("div",{children:(0,n.jsxs)(r.x6,{i18nKey:"alerting.rule-details-matching-instances.showing-count",values:{visibleItems:B.visibleItemsCount,totalItems:B.totalItemsCount},children:["Showing ","{{visibleItems}}"," out of ","{{totalItems}}"," instances"]})}),(0,n.jsx)(i.z9,{size:"sm",variant:"secondary","data-testid":"show-all",onClick:K,href:U,children:(0,n.jsxs)(r.x6,{i18nKey:"alerting.rule-details-matching-instances.button-show-all",count:B.totalItemsCount,children:["Show all ","{{totalItems}}"," alert instances"]})})]})}function T(B){const{rule:K,itemsDisplayLimit:U=Number.POSITIVE_INFINITY,pagination:F,enableFiltering:I=!1}=B,{promRule:V,namespace:M,instanceTotals:L}=K,[N,W]=(0,l.useState)(),[R,G]=(0,l.useState)(),[w]=(0,l.useState)(Math.floor(Math.random()*100)),_=`queryString-${w}`,Q=(0,c.of)(S),ae=(0,d.z2)(M.rulesSource)?d.hY:"prometheus",q=(0,l.useMemo)(()=>b.R$.alertingRule(V)&&V.alerts?.length?O(N,R,(0,m.Cp)(y.xB.Importance,V.alerts)):[],[V,R,N]);if(!b.R$.alertingRule(V))return null;const k=q.slice(0,U),ee=(0,s.countBy)(V.alerts,re=>(0,u.lh)(re.state)),j=(0,s.sum)([L.alerting,L.inactive,L.pending,L.recovering,L.nodata]),J=j-k.length,Z={totalItemsCount:j,visibleItemsCount:k.length},te=(0,m.w$)(M.rulesSource,B.rule,window.location.pathname+window.location.search),se=(0,C.kc)(L),ie=()=>G(void 0),ce=J?(0,n.jsx)(P,{stats:Z,onClick:I?ie:void 0,href:I?void 0:te}):void 0;return(0,n.jsxs)(n.Fragment,{children:[I&&(0,n.jsx)("div",{className:(0,a.cx)(Q.flexRow,Q.spaceBetween),children:(0,n.jsxs)("div",{className:Q.flexRow,children:[(0,n.jsx)(o.X,{defaultQueryString:N,onFilterChange:re=>W(re)},_),(0,n.jsx)(E,{filterType:ae,stateFilter:R,onStateFilterChange:G,itemPerStateStats:ee})]})}),!I&&(0,n.jsx)("div",{className:Q.stats,children:se}),(0,n.jsx)(D.D,{rule:K,instances:k,pagination:F,footerRow:ce})]})}function O(B,K,U){let F=[...U];if(B){const I=B?(0,x.Zc)(B):[];F=F.filter(({labels:V})=>(0,p.Av)(V,I))}return K&&(F=F.filter(I=>(0,u.lh)(I.state)===K)),F}const S=B=>({flexRow:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"flex-end",width:"100%",flexWrap:"wrap",marginBottom:B.spacing(1),gap:B.spacing(1)}),spaceBetween:(0,a.css)({justifyContent:"space-between"}),footerRow:(0,a.css)({display:"flex",flexDirection:"column",gap:B.spacing(1),justifyContent:"space-between",alignItems:"center",width:"100%"}),instancesContainer:(0,a.css)({marginBottom:B.spacing(2)}),stats:(0,a.css)({display:"flex",gap:B.spacing(1),padding:B.spacing(1,0)})})},67020:(ne,A,e)=>{"use strict";e.d(A,{A:()=>o});var n=e(2543),a=e.n(n),s=e(68143),l=e(29043),r=e(15130);class c{constructor(){}addDashboardImpression(f){const g=this.impressionKey();let u=[];l.A.exists(g)&&(u=JSON.parse(l.A.get(g)),(0,n.isArray)(u)||(u=[])),u=u.filter(E=>f!==E),u.unshift(f),u.length>50&&u.pop(),l.A.set(g,JSON.stringify(u))}async convertToUIDs(){let f=this.getImpressions();const g=(0,n.filter)(f,E=>(0,n.isNumber)(E));if(!g.length)return;const u=await(0,s.AI)().get(`/api/dashboards/ids/${g.join(",")}`);l.A.set(this.impressionKey(),JSON.stringify([...(0,n.filter)(f,E=>(0,n.isString)(E)),...u]))}getImpressions(){const f=l.A.get(this.impressionKey())||"[]";return JSON.parse(f)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,n.filter)(this.getImpressions(),g=>(0,n.isString)(g))}impressionKey(){return"dashboard_impressions-"+r.TP.user.orgId}}const o=new c},67155:(ne,A,e)=>{"use strict";e.d(A,{O:()=>v,v:()=>m});var n=e(74848),a=e(96540),s=e(75505),l=e(739),r=e(41119),c=e(60519),i=e(2197),o=e(39443),h=e(95004),f=e(43173),g=e(24343),u=e(36100),E=e(78529);function v(b){const{timeZone:D,splitOpen:C,range:P,logsSortOrder:T,width:O,dataFrame:S,columnsWithMeta:B,logsFrame:K}=b,[U,F]=(0,a.useState)(void 0),I=K?.timeField.index,V=(0,a.useCallback)(L=>{if(!L.length)return L;const N=(0,r.ES)(L,I,T===l.uH.Descending),[W]=(0,c.we)({data:[N],timeZone:D,theme:f.$.theme2,replaceVariables:R=>R,fieldConfig:{defaults:{custom:{}},overrides:[]}});for(const R of W.fields)R.getLinks=G=>(0,E.QL)({field:R,rowIndex:G.valueRowIndex,splitOpenFn:C,range:P,dataFrame:N}),R.config={...R.config,custom:{inspect:!0,filterable:!0,width:x(R),...R.config.custom},filterable:p(R,K?.bodyField.name??"",K?.timeField.name??"")},R.type=R.type===h.PU.string?(0,r.dF)(R)??h.PU.string:R.type;return W},[T,D,C,P,K?.bodyField.name,K?.timeField.name,I]);if((0,a.useEffect)(()=>{(async()=>{if(!K?.timeField.name||!K?.bodyField.name){F(void 0);return}const N=m(S);let W=y(B);const R=d(W);if(R?N.push(R):N.push({id:"organize",options:{indexByName:{[K.bodyField.name]:0,[K.timeField.name]:1},includeByName:{[K.bodyField.name]:!0,[K.timeField.name]:!0}}}),N.length>0){const G=await(0,s.s)((0,i.m)(N,[S])),w=V(G[0]);F(w)}else F(V(S))})()},[B,S,T,V,K?.bodyField.name,K?.timeField.name]),!U)return null;const M=L=>{const{value:N,key:W,operator:R}=L,{onClickFilterLabel:G,onClickFilterOutLabel:w}=b;!G||!w||(R===u.mc&&G(W,N,S),R===u.Zi&&w(W,N,S))};return(0,n.jsx)(g.X,{data:U,width:O,onCellFilterAdded:b.onClickFilterLabel&&b.onClickFilterOutLabel?M:void 0,height:b.height,footerOptions:{show:!0,reducer:["count"],countRows:!0},initialSortBy:[{displayName:K?.timeField.name||"",desc:T===l.uH.Descending}]})}const p=(b,D,C)=>!(!D||!C||D===b.name||C===b.name||b.config.links?.length);function m(b){return b.fields.filter(D=>{const C=D.typeInfo?.frame==="json.RawMessage"&&D.name==="labels"&&b?.meta?.type!==o.m.LogLines,P=D.name==="labels"&&D.type===h.PU.other&&b?.meta?.type===o.m.LogLines;return C||P}).flatMap(D=>[{id:"extractFields",options:{format:"json",keepTime:!1,replace:!1,source:D.name}}])}function y(b){let D={};return Object.keys(b).filter(C=>b[C].active).forEach(C=>{const P=b[C].index;P!==void 0&&(D[C]=P)}),D}function d(b){let D={};for(const C in b)D[C]=!0;return Object.keys(b).length>0?{id:"organize",options:{indexByName:b,includeByName:D}}:null}function x(b){if(b.type===h.PU.time)return 200}},67350:(ne,A,e)=>{"use strict";e.d(A,{DG:()=>P,Gl:()=>y,IC:()=>B,Kq:()=>D,Ku:()=>C,V6:()=>K,Xy:()=>S,kB:()=>d});var n=e(43173),a=e(45863),s=e(18615),l=e(6048),r=e(61291),c=e(36605),i=e(7094),o=e(32540),h=e(37040),f=e(66251),g=e(81657),u=e(35718),E=e(8285),v=e(62265),p=e(3281),m=e(39508);function y(U,F){const I=[];I.push(new o.$({rawLinks:U.spec.links,menu:new o.m({$behaviors:[h.oV]})})),I.push(new f.W);const V=U.spec.data.spec.queryOptions,M=(V.timeFrom||V.timeShift)&&!V.hideTimeOverride,L={key:(0,E.XA)(F??U.spec.id),title:U.spec.title?.substring(0,5e3),description:U.spec.description,pluginId:U.spec.vizConfig.group,options:U.spec.vizConfig.spec.options,fieldConfig:(0,p.So)(U.spec.vizConfig.spec.fieldConfig),pluginVersion:U.spec.vizConfig.version,displayMode:U.spec.transparent?"transparent":"default",hoverHeader:!U.spec.title&&!M,hoverHeaderOffset:0,seriesLimit:n.$.panelSeriesLimit,$data:x(U),titleItems:I,$behaviors:[],extendPanelContext:u.C,headerActions:n.$.featureToggles.timeComparison?[new r.v({key:"time-compare",compareWith:void 0,compareOptions:[]})]:void 0};return n.$.publicDashboardAccessToken||(L.menu=new a.Lw({$behaviors:[h._i]})),(V.timeFrom||V.timeShift)&&(L.$timeRange=new g.v({timeFrom:V.timeFrom,timeShift:V.timeShift,hideTimeOverride:V.hideTimeOverride})),new a.Eb(L)}function d(U,F){const I=[];I.push(new o.$({rawLinks:[],menu:new o.m({$behaviors:[h.oV]})})),I.push(new f.W);const V={key:(0,E.XA)(F??U.spec.id),titleItems:I,seriesLimit:n.$.panelSeriesLimit,$behaviors:[new i.u({uid:U.spec.libraryPanel.uid,name:U.spec.libraryPanel.name})],extendPanelContext:u.C,pluginId:i.u.LOADING_VIZ_PANEL_PLUGIN_ID,title:U.spec.title,options:{},fieldConfig:{defaults:{},overrides:[]}};return n.$.publicDashboardAccessToken||(V.menu=new a.Lw({$behaviors:[h._i]})),new a.Eb(V)}function x(U){const F=U.spec,I=F.data?.spec.queries??[];if(!I?.length||n.$.panels[F.vizConfig.kind]?.skipDataQuery)return;let V;const M=b(U);return V=new a.dt({datasource:M,queries:I.map(T),maxDataPoints:F.data.spec.queryOptions.maxDataPoints??void 0,maxDataPointsFromWidth:!0,cacheTimeout:F.data.spec.queryOptions.cacheTimeout,queryCachingTTL:F.data.spec.queryOptions.queryCachingTTL,minInterval:F.data.spec.queryOptions.interval??void 0,dataLayerFilter:{panelId:F.id},$behaviors:[new c.L({})]}),new a.Es({$data:V,transformations:F.data.spec.transformations.map(L=>({...L.spec,topic:(0,m.MM)(L.spec.topic)}))})}function b(U){if(!U.spec.data?.spec.queries?.length)return;let F,I=!1;return U.spec.data.spec.queries.forEach(V=>{F?(F.uid!==V.spec.query.datasource?.name||F.type!==V.spec.query.group)&&(I=!0):V.spec.query.datasource?.name?F={uid:V.spec.query.datasource?.name,type:V.spec.query.group}:F=C(V.spec.query)}),I?{type:"mixed",uid:s.uv}:F}function D(U){const F={uid:U.spec.query.datasource?.name,type:U.spec.query.group};return P(F,U.spec.query.group)}function C(U){const F={uid:U.datasource?.name,type:U.group};return P(F,U.group)}function P(U,F){if(U?.uid)return U;const I=n.$.defaultDatasource,V=n.$.datasources;if(V&&V[I]&&V[I].meta.id===F)return{uid:V[I].uid||V[I].name,type:V[I].meta.id};const M=V&&Object.values(V).find(L=>L.meta.id===F);if(M)return{uid:M.uid,type:M.meta.id};if(V&&V[I])return console.warn(`Could not find datasource for query kind ${F}, defaulting to ${V[I].meta.id}`),{uid:V[I].uid||V[I].name,type:V[I].meta.id};if(V&&!V[I])throw new Error(`Default datasource ${I} not found in datasource list`);return{uid:V[I].uid||V[I].name,type:V[I].meta.id}}function T(U){return{refId:U.spec.refId,datasource:C(U.spec.query),hide:U.spec.hidden,...U.spec.query.spec}}function O(U){return U.serialize()}function S(U){return U.spec.conditionalRendering?l.M.deserialize(U.spec.conditionalRendering):l.M.createEmpty()}function B(U,F){const I=U.getVizPanels(),V=F.serializer.getDSReferencesMapping(),M=I.map(L=>(0,v.GB)(L,V));return(0,v.Cy)(M,F)}function K(U,F){return(0,v.Cy)([(0,v.GB)(U.state.body,F.serializer.getDSReferencesMapping())],F)}},67458:(ne,A,e)=>{"use strict";e.d(A,{G:()=>c,P:()=>i});var n=e(60023),a=e(33836),s=e(63704);let l=!1;const r={pedantic:!1,gfm:!0,breaks:!1};function c(o,h){l||(n.xI.use((0,a.z)()),n.xI.setOptions({...r}),l=!0);let f;h?.breaks&&(f={...r,breaks:!0});const g=(0,n.xI)(o||"",f);if(typeof g!="string")throw new Error("Failed to process markdown synchronously.");return h?.noSanitize?g:(0,s.G$)(g)}function i(o,h){l||(n.xI.use((0,a.z)()),n.xI.setOptions({...r}),l=!0);const f=(0,n.xI)(o||"");if(typeof f!="string")throw new Error("Failed to process markdown synchronously.");return h?.noSanitize?f:(0,s.G$)(f)}},67497:(ne,A,e)=>{"use strict";e.d(A,{B9:()=>c,J$:()=>l,KZ:()=>r,MK:()=>s,Pf:()=>a});var n=e(27489);const a=(o,h)=>{(0,n.rR)(`${o}_viewed`,i(h))},s=(o,h)=>{(0,n.rR)(`${o}_result_clicked`,i(h))},l=(o,h)=>{(0,n.rR)(`${o}_query_submitted`,i(h))},r=(o,{error:h,...f})=>{(0,n.rR)(`${o}_query_failed`,{...i(f),error:h})},c=(o,h,f)=>{(0,n.rR)(`grafana_panel_inspect_${o}_${h}_clicked`,f)},i=o=>({layout:o.layout,starredFilter:o.starred??!1,sort:o.sortValue??"",tagCount:o.tagCount??0,queryLength:o.query?.length??0,includePanels:o.includePanels??!1,deleted:o.deleted??!1})},67511:(ne,A,e)=>{"use strict";e.d(A,{d:()=>s});var n=e(27629);const s=(0,n.$)("localeFormatPreference")?"YYYY-MM-DD HH:mm:ss":void 0},67522:(ne,A,e)=>{"use strict";e.d(A,{NR:()=>W});var n=e(39884),a=e(74848),s=e(22803),l=e(96540),r=e(42941),c=e(49185),i=e(28105),o=e(51898),h=e(92745),f=e(63142),g=e(35484);function u({children:R,delay:G}){const[w,_]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{window.setTimeout(()=>{_(!0)},G)},[R,G]),(0,a.jsx)(a.Fragment,{children:w?R:null})}var E=e(36324),v=e(56887),p=e(30703),m=e(47327),y=e(66404),d=e(45967),x=e(88559),b=e(7895);function D({menu:R,title:G,placement:w="bottom",offset:_,dragClassCancel:Q,menuButtonClass:ae,onOpenMenu:q}){const k=G?o.Tp.components.Panels.Panel.menu(G):"panel-menu-button",ee=(0,l.useCallback)(j=>{j&&q&&q()},[q]);return(0,a.jsx)(x.m,{overlay:R,placement:w,offset:_,onVisibleChange:ee,children:(0,a.jsx)(b.I,{"aria-label":(0,h.t)("grafana-ui.panel-menu.label","Menu for panel {{ title }}",{title:G??"Untitled"}),title:(0,h.t)("grafana-ui.panel-menu.title","Menu"),icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":k,className:(0,s.cx)(ae,Q)})})}function C({menu:R,title:G,dragClass:w,children:_,offset:Q=-32,onOpenMenu:ae}){const q=(0,f.of)(P),k=(0,l.useRef)(null),ee=o.Tp.components.Panels.Panel.HoverWidget,j=(0,l.useCallback)(Z=>{k.current?.setPointerCapture(Z.pointerId)},[]),J=(0,l.useCallback)(Z=>{k.current?.releasePointerCapture(Z.pointerId)},[]);return _===void 0||l.Children.count(_)===0?null:(0,a.jsxs)("div",{className:(0,s.cx)(q.container,"show-on-hover"),style:{top:Q},"data-testid":ee.container,children:[w&&(0,a.jsx)("div",{className:(0,s.cx)(q.square,q.draggable,w),onPointerDown:j,onPointerUp:J,ref:k,"data-testid":ee.dragIcon,children:(0,a.jsx)(p.I,{name:"expand-arrows",className:q.draggableIcon})}),_,R&&(0,a.jsx)(D,{menu:R,title:G,placement:"bottom",menuButtonClass:q.menuButton,onOpenMenu:ae})]})}function P(R){return{container:(0,s.css)({label:"hover-container-widget",[R.transitions.handleMotion("no-preference","reduce")]:{transition:"all .1s linear"},display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:R.colors.background.secondary,color:R.colors.text.primary,border:`1px solid ${R.colors.border.weak}`,borderRadius:R.shape.radius.default,height:R.spacing(4),boxShadow:R.shadows.z1}),square:(0,s.css)({display:"flex",justifyContent:"center",alignItems:"center",width:R.spacing(4),height:"100%"}),draggable:(0,s.css)({cursor:"move",[R.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,s.css)({background:"inherit",border:"none","&:hover":{background:R.colors.secondary.main}}),draggableIcon:(0,s.css)({transform:"rotate(45deg)",color:R.colors.text.secondary,"&:hover":{color:R.colors.text.primary}})}}var T=e(45861);const O=(0,l.forwardRef)(({className:R,children:G,href:w,onClick:_,target:Q,title:ae,...q},k)=>{const ee=(0,f.of)(S);return w?(0,a.jsx)("a",{ref:k,href:w,onClick:_,target:Q,title:ae,className:(0,s.cx)(ee.linkItem,R),...q,children:G}):_?(0,a.jsx)(T.$n,{ref:k,className:(0,s.cx)(ee.item,R),variant:"secondary",fill:"text",onClick:_,children:G}):(0,a.jsx)("span",{ref:k,className:(0,s.cx)(ee.item,R),...q,children:G})});O.displayName="TitleItem";const S=R=>{const G=(0,s.css)({color:`${R.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${R.shape.radius.default}`,padding:`${R.spacing(0,1)}`,height:`${R.spacing(R.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,g.getFocusStyles)(R),zIndex:1},"&: focus:not(:focus-visible)":(0,g.getMouseFocusStyles)(R),"&:hover ":{boxShadow:`${R.shadows.z1}`,background:`${R.colors.background.secondary}`,color:`${R.colors.text.primary}`}});return{item:G,linkItem:(0,s.cx)(G,(0,s.css)({cursor:"pointer"}))}};function B({description:R,className:G}){const w=(0,f.of)(K),_=()=>{const Q=typeof R=="function"?R():R;return(0,a.jsx)("div",{className:"panel-info-content markdown-html",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:Q}})})};return R!==""?(0,a.jsx)(d.m,{interactive:!0,content:_,children:(0,a.jsx)(O,{className:(0,s.cx)(G,w.description),children:(0,a.jsx)(p.I,{name:"info-circle",size:"md"})})}):null}const K=R=>({description:(0,s.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function U({message:R,onClick:G,ariaLabel:w="status"}){const _=(0,f.of)(F);return(0,a.jsx)(b.I,{className:_.buttonStyles,onClick:G,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:R||"","aria-label":w,"data-testid":o.Tp.components.Panels.Panel.status("error")})}const F=R=>{const{headerHeight:G,padding:w}=R.components.panel;return{buttonStyles:(0,s.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:R.spacing(w),width:R.spacing(G),height:R.spacing(G),borderRadius:R.shape.radius.default})}};function I({width:R,height:G,children:w,padding:_="md",title:Q="",description:ae="",displayMode:q="default",titleItems:k,menu:ee,dragClass:j,dragClassCancel:J,hoverHeader:Z=!1,hoverHeaderOffset:te,loadingState:se,statusMessage:ie,statusMessageOnClick:ce,leftItems:re,actions:ue,selectionId:X,onCancelQuery:le,onOpenMenu:he,collapsible:fe=!1,collapsed:Ce,onToggleCollapse:Ae,onFocus:_e,onMouseMove:Xe,onMouseEnter:De,onDragStart:Me,showMenuAlways:Te=!1}){const $e=(0,f.$j)(),Re=(0,f.of)(N),Ke=(0,l.useId)(),Ve=(0,l.useId)().replace(/:/g,"_"),{isSelected:Se,onSelect:Ye,isSelectable:Ue}=(0,v.y)(X),je=(0,E.C)(),Qe=!Z,[He,Je]=(0,r.A)(!0),[de,ve]=(0,l.useState)(!1),me=l.useCallback(()=>ve(!0),[]),xe=l.useCallback(()=>ve(!1),[]);Ce===void 0&&(Ce=!He);const Ee=Te?"always-show":"show-on-hover",Pe=q==="transparent",Oe=M($e,Qe),{contentStyle:We,innerWidth:Fe,innerHeight:Be}=L(_,$e,Oe,Ce,G,R),Le={height:Oe,cursor:j?"move":"auto"},Ge={width:R,height:Ce?void 0:G},[Ze,{width:qe}]=(0,c.A)();re&&(ue=re);const at=typeof Q=="string"?o.Tp.components.Panels.Panel.title(Q):"Panel",ht=l.useCallback(rt=>{je.check(rt)||J&&rt.target instanceof Element&&rt.target.closest(`.${J}`)||setTimeout(()=>Ye?.(rt))},[J,Ye,je]),Et=l.useCallback(rt=>{rt.stopPropagation(),je.set(rt),Me?.(rt)},[je,Me]),mt=l.useCallback(rt=>{rt.target instanceof Element&&rt.target.closest("button,a,canvas,svg")||Ye?.(rt)},[Ye]),Pt=(0,a.jsxs)(a.Fragment,{children:[!fe&&Q&&(0,a.jsx)("div",{className:Re.title,children:(0,a.jsx)(y.E,{element:"h2",variant:"h6",truncate:!0,title:typeof Q=="string"?Q:void 0,id:Ve,children:Q})}),fe&&(0,a.jsx)("div",{className:Re.title,children:(0,a.jsx)(y.E,{element:"h2",variant:"h6",children:(0,a.jsxs)("button",{type:"button",className:Re.clearButtonStyles,onClick:()=>{Je(),Ae&&Ae(!Ce)},"aria-expanded":!Ce,"aria-controls":Ce?void 0:Ke,children:[(0,a.jsx)(p.I,{name:Ce?"angle-right":"angle-down","aria-hidden":!!Q,"aria-label":Q?void 0:(0,h.t)("grafana-ui.panel-chrome.aria-label-toggle-collapse","toggle collapse panel")}),(0,a.jsx)(y.E,{variant:"h6",truncate:!0,id:Ve,children:Q})]})})}),(0,a.jsxs)("div",{className:(0,s.cx)(Re.titleItems,J),"data-testid":"title-items-container",children:[(0,a.jsx)(B,{description:ae,className:J}),k]}),se===i.Gu.Streaming&&(0,a.jsx)(d.m,{content:le?(0,h.t)("grafana-ui.panel-chrome.tooltip-stop-streaming","Stop streaming"):(0,h.t)("grafana-ui.panel-chrome.tooltip-streaming","Streaming"),children:(0,a.jsx)(O,{className:J,"data-testid":"panel-streaming",onClick:le,children:(0,a.jsx)(p.I,{name:"circle-mono",size:"md",className:Re.streaming})})}),se===i.Gu.Loading&&le&&(0,a.jsx)(u,{delay:2e3,children:(0,a.jsx)(d.m,{content:(0,h.t)("grafana-ui.panel-chrome.tooltip-cancel","Cancel query"),children:(0,a.jsx)(O,{className:(0,s.cx)(J,Re.pointer),"data-testid":"panel-cancel-query",onClick:le,children:(0,a.jsx)(p.I,{name:"sync-slash",size:"md"})})})}),(0,a.jsx)("div",{className:Re.rightAligned,children:ue&&(0,a.jsx)("div",{className:Re.rightActions,children:V(ue,rt=>rt)})})]});return(0,a.jsxs)("section",{className:(0,s.cx)(Re.container,Pe&&Re.transparentContainer,Se&&"dashboard-selected-element",!Se&&Ue&&de&&"dashboard-selectable-element"),style:Ge,"aria-labelledby":Q?Ve:void 0,"data-testid":at,tabIndex:0,onFocus:_e,onMouseMove:Xe,onMouseEnter:De,ref:Ze,children:[(0,a.jsx)("div",{className:Re.loadingBarContainer,children:se===i.Gu.Loading?(0,a.jsx)(m.G,{width:qe,ariaLabel:(0,h.t)("grafana-ui.panel-chrome.ariaLabel-panel-loading","Panel loading bar")}):null}),Z&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C,{menu:ee,title:typeof Q=="string"?Q:void 0,offset:te,dragClass:j,onOpenMenu:he,children:Pt}),ie&&(0,a.jsx)("div",{className:Re.errorContainerFloating,children:(0,a.jsx)(U,{message:ie,onClick:ce,ariaLabel:(0,h.t)("grafana-ui.panel-chrome.ariaLabel-panel-status","Panel status")})})]}),Qe&&(0,a.jsxs)("div",{className:(0,s.cx)(Re.headerContainer,j),style:Le,"data-testid":o.Tp.components.Panels.Panel.headerContainer,onPointerDown:Et,onMouseEnter:Ue?me:void 0,onMouseLeave:Ue?xe:void 0,onPointerUp:ht,children:[ie&&(0,a.jsx)("div",{className:J,children:(0,a.jsx)(U,{message:ie,onClick:ce,ariaLabel:(0,h.t)("grafana-ui.panel-chrome.ariaLabel-panel-status","Panel status")})}),Pt,ee&&(0,a.jsx)(D,{menu:ee,title:typeof Q=="string"?Q:void 0,placement:"bottom-end",menuButtonClass:(0,s.cx)(Re.menuItem,J,Ee),onOpenMenu:he})]}),!Ce&&(0,a.jsx)("div",{id:Ke,"data-testid":o.Tp.components.Panels.Panel.content,className:(0,s.cx)(Re.content,G===void 0&&Re.containNone),style:We,onPointerDown:mt,children:typeof w=="function"?w(Fe,Be):w})]})}const V=(R,G)=>{const w=l.Children.toArray(R).filter(Boolean);return w.length>0?G(w):null},M=(R,G)=>G?R.spacing.gridSize*R.components.panel.headerHeight:0,L=(R,G,w,_,Q,ae)=>{const q=(R==="md"?G.components.panel.padding:0)*G.spacing.gridSize,k=q*2,ee=2;let j=0;ae&&(j=ae-k-ee);let J=0;return Q&&(J=Q-w-k-ee),_&&(J=w),{contentStyle:{padding:q},innerWidth:j,innerHeight:J}},N=R=>{const{background:G,borderColor:w,padding:_}=R.components.panel;return{container:(0,s.css)({label:"panel-container",backgroundColor:G,border:`1px solid ${w}`,position:"relative",borderRadius:R.shape.radius.default,height:"100%",display:"flex",flexDirection:"column",".always-show":{background:"none","&:focus-visible, &:hover":{background:R.colors.secondary.shade}},".show-on-hover":{opacity:"0",visibility:"hidden"},"&:focus-visible, &:hover":{".show-on-hover":{opacity:"1",visibility:"visible"}},"&:focus-visible":(0,g.getFocusStyles)(R),"&:focus-within:not(:focus)":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),transparentContainer:(0,s.css)({label:"panel-transparent-container",backgroundColor:"transparent",border:"1px solid transparent",boxSizing:"border-box","&:hover":{border:`1px solid ${w}`}}),loadingBarContainer:(0,s.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%",zIndex:1}),containNone:(0,s.css)({contain:"none"}),content:(0,s.css)({label:"panel-content",flexGrow:1,contain:"size layout"}),headerContainer:(0,s.css)({label:"panel-header",display:"flex",alignItems:"center"}),pointer:(0,s.css)({cursor:"pointer"}),streaming:(0,s.css)({label:"panel-streaming",marginRight:0,color:R.colors.success.text,"&:hover":{color:R.colors.success.text}}),title:(0,s.css)({label:"panel-title",display:"flex",padding:R.spacing(0,_),minWidth:0,"& > h2":{minWidth:0}}),items:(0,s.css)({display:"flex"}),item:(0,s.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,s.css)({visibility:"hidden"}),menuItem:(0,s.css)({label:"panel-menu",border:"none",background:R.colors.secondary.main,"&:hover":{background:R.colors.secondary.shade}}),errorContainerFloating:(0,s.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:1}),rightActions:(0,s.css)({display:"flex",padding:R.spacing(0,_),gap:R.spacing(1)}),rightAligned:(0,s.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,s.css)({display:"flex",height:"100%"}),clearButtonStyles:(0,s.css)({alignItems:"center",display:"flex",gap:R.spacing(.5),background:"transparent",border:"none",padding:0,maxWidth:"100%"})}},W=I;W.LoadingIndicator=n.I,W.TitleItem=O},67598:(ne,A,e)=>{"use strict";e.d(A,{HA:()=>i,Rc:()=>r,rO:()=>l});var n=e(52161),a=e(29609);function s(o){if(a.p.grafana.rule(o.rulerRule)&&(0,n.z2)(o.namespace.rulesSource))return{namespace:{uid:o.rulerRule.grafana_alert.namespace_uid},groupName:o.group.name,groupOrigin:"grafana"};const h=(0,n.EV)(o.namespace.rulesSource);return{rulesSource:{uid:(0,n.w5)(h),name:h,ruleSourceType:"datasource"},namespace:{name:o.namespace.name},groupName:o.group.name,groupOrigin:"datasource"}}function l(o){return o.groupOrigin==="grafana"?n.hY:o.rulesSource.name}function r(o){return{dataSourceName:l(o),namespaceName:"uid"in o.namespace?o.namespace.uid:o.namespace.name,groupName:o.groupName}}function c(o){return{rulesSource:{ruleSourceType:"datasource",name:o.ruleSourceName,uid:(0,n.w5)(o.ruleSourceName)},namespace:{name:o.namespace},groupName:o.groupName,groupOrigin:"datasource"}}const i={fromCombinedRule:s,fromRuleIdentifier:c}},67770:(ne,A,e)=>{"use strict";e.d(A,{$b:()=>a,Aj:()=>h,Df:()=>v,FP:()=>u,Nc:()=>f,Ol:()=>i,ZF:()=>c,_0:()=>E,_C:()=>r,cF:()=>o,s5:()=>s,tG:()=>l,wj:()=>g});var n=e(68388),a=(p=>(p.emerg="critical",p.fatal="critical",p.alert="critical",p.crit="critical",p.critical="critical",p.warn="warning",p.warning="warning",p.err="error",p.eror="error",p.error="error",p.info="info",p.information="info",p.informational="info",p.notice="info",p.dbug="debug",p.debug="debug",p.trace="trace",p.unknown="unknown",p))(a||{});const s={0:"critical",1:"critical",2:"critical",3:"error",4:"warning",5:"info",6:"info",7:"debug"};var l=(p=>(p[p.Number=0]="Number",p[p.String=1]="String",p[p.LabelsMap=2]="LabelsMap",p[p.Error=3]="Error",p))(l||{}),r=(p=>(p.none="No de-duplication",p.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",p.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",p.signature="De-duplication of successive lines that have identical punctuation and whitespace.",p))(r||{}),c=(p=>(p.Backward="BACKWARD",p.Forward="FORWARD",p))(c||{});const i=p=>!p||typeof p!="object"?!1:"getLogRowContext"in p;var o=(p=>(p.LogsVolume="LogsVolume",p.LogsSample="LogsSample",p))(o||{}),h=(p=>(p.FullRange="FullRange",p.Limited="Limited",p))(h||{});const f=(p,m)=>p?("getDataProvider"in p||"getSupplementaryRequest"in p)&&"getSupplementaryQuery"in p&&"getSupportedSupplementaryQueryTypes"in p&&p.getSupportedSupplementaryQueryTypes().includes(m):!1,g=p=>!p||typeof p!="object"?!1:"getLogRowContextUi"in p,u=p=>p!=null&&typeof p=="object"&&"toggleQueryFilter"in p&&"queryHasFilter"in p,E=p=>p!=null&&typeof p=="object"&&"modifyQuery"in p&&"getSupportedQueryModifications"in p;class v extends n.x{static{this.type="logs-sort-order-change"}}},67817:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>n});var n=(a=>(a.grafana="grafana-alerting",a.grafanaRecording="grafana-recording",a.cloudAlerting="cloud-alerting",a.cloudRecording="cloud-recording",a))(n||{})},67834:(ne,A,e)=>{"use strict";e.d(A,{O:()=>r});var n=e(74848),a=e(22803),s=e(96540),l=e(63142);const r=(0,s.forwardRef)(({children:i,state:o,size:h="md",muted:f=!1},g)=>{const u=(0,l.of)(c);return(0,n.jsx)("span",{className:(0,a.cx)(u.common,u[o],u[h],{[u.muted]:f}),ref:g,children:i||o})});r.displayName="StateTag";const c=i=>({common:(0,a.css)({display:"inline-block",color:"white",borderRadius:i.shape.radius.default,fontSize:i.typography.size.sm,textTransform:"capitalize",lineHeight:"1.2",textAlign:"center",fontWeight:i.typography.fontWeightBold}),good:(0,a.css)({backgroundColor:i.colors.success.main,border:`solid 1px ${i.colors.success.main}`,color:i.colors.success.contrastText}),warning:(0,a.css)({backgroundColor:i.colors.warning.main,border:`solid 1px ${i.colors.warning.main}`,color:i.colors.warning.contrastText}),bad:(0,a.css)({backgroundColor:i.colors.error.main,border:`solid 1px ${i.colors.error.main}`,color:i.colors.error.contrastText}),neutral:(0,a.css)({backgroundColor:i.colors.secondary.main,border:`solid 1px ${i.colors.secondary.main}`,color:i.colors.secondary.contrastText}),info:(0,a.css)({backgroundColor:i.colors.primary.main,border:`solid 1px ${i.colors.primary.main}`,color:i.colors.primary.contrastText}),md:(0,a.css)({padding:i.spacing(.5,1),minWidth:i.spacing(8)}),sm:(0,a.css)({padding:i.spacing(.3,.5),minWidth:"52px"}),muted:(0,a.css)({opacity:"0.5"})})},67923:(ne,A,e)=>{"use strict";e.d(A,{AB:()=>o,AS:()=>h,HO:()=>E,I8:()=>f,KR:()=>p,dn:()=>u,eM:()=>v});var n=e(1932),a=e(2543),s=e.n(a),l=e(46635),r=e(84266),c=e(20443),i=e(33998);const o=(d,x,b)=>{if(!v(x.id??"",b))throw new Error(`No such route with ID '${x.id}'`,{cause:i.g2});function C(P){let T=P;if(P.id===x.id){const O=(0,c.SJ)(d,x,b);T={...P,...O}}return{...T,routes:P.routes?.map(C)}}return C(b)},h=(d,x)=>{if(d===x.id)throw new Error("You cant remove the root policy");function b(D){return{...D,routes:D.routes?.reduce((C=[],P)=>(P.id===d||C.push(b(P)),C),[])}}return b(x)},f=(d,x,b,D,C)=>{const P=(0,c.SJ)(d,x,D);return(0,n.jM)(D,T=>{const[O,S,B]=g(T,b);if(O===void 0||S===void 0||B===void 0)throw new Error(`could not find reference route "${b}" in tree`,{cause:i.g2});C==="child"&&(O.routes?O.routes.push(P):O.routes=[P]),C==="above"&&(S.routes=l.insertBeforeImmutably(S.routes??[],P,B)),C==="below"&&(S.routes=l.insertAfterImmutably(S.routes??[],P,B))})};function g(d,x){let b,D,C;function P(T,O,S){b||(T.id===x&&(b=T,D=S,C=O),T.routes&&T.routes.forEach((B,K)=>P(B,K,T)))}return P(d,0,d),[b,D,C]}function u(d){return(0,a.omit)({...d,routes:d.routes?.map(x=>u(x))},"id")}function E(d){return(0,n.jM)(d,x=>{x.spec.routes=x.spec.routes.map(u)})}function v(d,x){return x.id===d?x:x.routes?.find(b=>v(d,b))}function p(d){const x=JSON.stringify(m(d));let b=0;for(let D=0;D<x.length;D++){const C=x.charCodeAt(D);b=(b<<5)-b+C,b=b&b}return b.toString(36)}function m(d){return{receiver:d.receiver??"",group_by:d.group_by?[...d.group_by].sort():[],continue:d.continue??!1,object_matchers:d.object_matchers?[...d.object_matchers].sort():[],matchers:d.matchers?[...d.matchers].sort():[],match:d.match?y(d.match):{},match_re:d.match_re?y(d.match_re):{},group_wait:d.group_wait??"",group_interval:d.group_interval??"",repeat_interval:d.repeat_interval??"",routes:d.routes??[],mute_time_intervals:d.mute_time_intervals?[...d.mute_time_intervals].sort():[],active_time_intervals:d.active_time_intervals?[...d.active_time_intervals].sort():[],provenance:d.provenance??"",[r.uz]:{}}}function y(d){const x={};return Object.keys(d).sort().forEach(b=>{x[b]=d[b]}),x}},67933:(ne,A,e)=>{"use strict";e.d(A,{CH:()=>p,EW:()=>l,Hf:()=>g,P4:()=>s,SP:()=>i,VN:()=>v,VO:()=>r,X3:()=>E,d5:()=>f,iv:()=>c,m8:()=>o,zs:()=>u});var n=e(48592),a=e(56404);const s=m=>m.type==="query",l=m=>m.type==="adhoc",r=m=>m.type==="constant",c=m=>"multi"in m,i=m=>"options"in m,o=m=>"current"in m;function h(m){return m===null?!1:typeof m=="string"}const f=m=>!!m.metricFindQuery&&!m.variables,g=m=>{if(!m.variables||m.variables.getType()!==n.Qz.Standard)return!1;const y=m.variables;return"toDataQuery"in y&&!!y.toDataQuery},u=m=>{if(!m.variables||m.variables.getType()!==n.Qz.Custom)return!1;const y=m.variables;return"query"in y&&"editor"in y&&!!y.query&&!!y.editor},E=m=>m.variables?m.variables.getType()===n.Qz.Datasource:!1;function v(m,y){return m?m.displayName===a.c||f(y):!1}function p(m,y){return m?m.displayName!==a.c&&(E(y)||g(y)||u(y)):!1}},68125:(ne,A,e)=>{"use strict";e.d(A,{F7:()=>f,Jh:()=>g,_O:()=>d,i8:()=>E});var n=e(2543),a=e.n(n),s=e(44809),l=e.n(s),r=e(18700),c=e(41119),i=e(16515),o=e(95004),h=e(55386),f=(x=>(x[x.full=0]="full",x[x.name=1]="name",x[x.none=2]="none",x))(f||{});function g(x,b){return new E(b).readCSV(x)}var u=(x=>(x[x.Starting=0]="Starting",x[x.InHeader=1]="InHeader",x[x.ReadingRows=2]="ReadingRows",x))(u||{});class E{constructor(b){this.chunk=(D,C)=>{for(let P=0;P<D.data.length;P++){const T=D.data[P];if(T.length<1)continue;const O=T[0];if(O){if(O.startsWith("#")){const S=O.indexOf("#",2);if(S>0){const B=O.slice(1,S),K=B==="name";if(K||{unit:"#"}.hasOwnProperty(B)){this.state===2&&(this.current=new r.k({fields:[]}),this.data.push(this.current));const F=O.slice(S+1);if(K){this.current.addFieldFor(void 0,F);for(let I=1;I<T.length;I++)this.current.addFieldFor(void 0,T[I])}else{const{fields:I}=this.current;for(let V=0;V<I.length;V++){I[V].config||(I[V].config={});const M=I[V].config;M[B]=V===0?F:T[V]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,c.HW)(O)===o.PU.string){for(const B of T)this.current.addFieldFor(void 0,B);this.state=1;continue}this.state=1}}if(this.state,this.state=2,T.length>this.current.fields.length){const{fields:S}=this.current;for(let B=S.length;B<T.length;B++)this.current.addFieldFor(T[B]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(T),this.callback&&this.callback.onRow(T)}},b||(b={}),this.config=b.config||{},this.callback=b.callback,this.current=new r.k({fields:[]}),this.state=0,this.data=[]}readCSV(b){this.current=new r.k({fields:[]}),this.data=[this.current];const D={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return l().parse(b,D),this.data}}function v(x,b){if(x==null)return"";const D=x.toString();return D.includes('"')?b.quoteChar+D.replace(/"/gi,'""')+b.quoteChar:D.includes(`
`)||b.delimiter&&D.includes(b.delimiter)?b.quoteChar+D+b.quoteChar:D}function p(x,b){return x.display?D=>{const C=x.display(D);return v((0,h.cN)(C),b)}:D=>v(D,b)}function m(x,b,D){const C=x==="name",P=x==="type";for(const T of b){const O=T.config;if(C||P||O&&O.hasOwnProperty(x)){let S="#"+x+"#";for(let B=0;B<b.length;B++){B>0&&(S=S+D.delimiter);let K=b[B].name;P?K=b[B].type:C||(K=b[B].config[x]),K&&(S=S+v(K,D))}return S+D.newline}}return""}function y(){const x=["x","y"];return x.toLocaleString?x.toLocaleString().charAt(1):","}function d(x,b){if(!x)return"";b=(0,n.defaults)(b,{delimiter:y(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let D=b.useExcelHeader?`sep=${b.delimiter}${b.newline}`:"";for(let C=0;C<x.length;C++){const P=x[C],{fields:T}=P;if(T.length===0)continue;if(b.headerStyle===0)D=D+m("name",T,b)+m("type",T,b)+m("unit",T,b)+m("dateFormat",T,b);else if(b.headerStyle===1){for(let S=0;S<T.length;S++)S>0&&(D+=b.delimiter),D+=`"${(0,i.Ct)(T[S],P).replace(/"/g,'""')}"`;D+=b.newline}const O=T[0].values.length;if(O>0){const S=T.map(B=>p(B,b));for(let B=0;B<O;B++){for(let K=0;K<T.length;K++){K>0&&(D+=b.delimiter);let U=T[K].values[B];U!==null&&(T[K].type===o.PU.frame&&"value"in U&&(U=U.value),D+=S[K](U))}B!==O-1&&(D+=b.newline)}}C!==x.length-1&&(D=D+b.newline)}return D}},68126:(ne,A,e)=>{"use strict";e.d(A,{a_:()=>r,mE:()=>g,wQ:()=>c});var n=e(2543),a=e.n(n),s=e(25229),l=e(80977);function r(u,E,v,p,m){const y=o(u,v),d=h(y,p),x=m?i(d,m):d;return f(x,E)}const c=(u,E)=>{let v=E.now;return v||(v=E.tz?(0,s.oZ)(E.tz):(0,s.KQ)()),v.add(-u,"d"),(E.isLastTs?v.endOf("d"):v.startOf("d")).valueOf()};function i(u,E){return u.filter(v=>v.createdAt>E[0]&&v.createdAt<E[1])}function o(u,E){return E.length>0?u.filter(v=>E.includes(v.datasourceName)):u}function h(u,E){return u.filter(v=>v.comment.includes(E)?!0:v.queries.filter(m=>Object.values((0,n.omit)(m,["datasource","key","refId","hide","queryType"])).some(y=>y?.toString().includes(E))).length>0)}const f=(u,E)=>{let v;return E===l.x.Ascending&&(v=(p,m)=>p.createdAt<m.createdAt?-1:p.createdAt>m.createdAt?1:0),E===l.x.Descending&&(v=(p,m)=>p.createdAt<m.createdAt?1:p.createdAt>m.createdAt?-1:0),E===l.x.DatasourceZA&&(v=(p,m)=>p.datasourceName<m.datasourceName?-1:p.datasourceName>m.datasourceName?1:0),E===l.x.DatasourceAZ&&(v=(p,m)=>p.datasourceName<m.datasourceName?1:p.datasourceName>m.datasourceName?-1:0),u.sort(v)},g={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",legacyActiveDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",activeDatasourcesOnly:"grafana.explore.richHistory.activeDatasourcesOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters"}},68220:(ne,A,e)=>{"use strict";e.d(A,{TS:()=>s});class n{_linkTo(i,o){o<=0&&i.inputEdges.push(this),o>=0&&i.outputEdges.push(this),i.edges.push(this)}link(i,o){if(!i)throw Error("inputNode is required");if(!o)throw Error("outputNode is required");return this.unlink(),this.inputNode=i,this.outputNode=o,this._linkTo(i,1),this._linkTo(o,-1),this}unlink(){let i;const o=this.inputNode,h=this.outputNode;o&&h&&(i=o.edges.indexOf(this),i>-1&&o.edges.splice(i,1),i=h.edges.indexOf(this),i>-1&&h.edges.splice(i,1),i=o.outputEdges.indexOf(this),i>-1&&o.outputEdges.splice(i,1),i=h.inputEdges.indexOf(this),i>-1&&h.inputEdges.splice(i,1))}}class a{constructor(i){this.name=i,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(i){return i?typeof i=="object"?this.inputEdges.find(o=>o.inputNode?.name===i.name):this.inputEdges.find(o=>o.inputNode?.name===i):null}getEdgeTo(i){return i?typeof i=="object"?this.outputEdges.find(o=>o.outputNode?.name===i.name):this.outputEdges.find(o=>o.outputNode?.name===i):null}getOptimizedInputEdges(){const i=[];return this.inputEdges.forEach(o=>{o.inputNode?.inputEdges.map(f=>f.inputNode)?.forEach(f=>{const g=f?.getEdgeTo(this.name);g&&i.push(g)})}),this.inputEdges.filter(o=>i.indexOf(o)===-1)}}class s{constructor(){this.nodes={}}createNode(i){const o=new a(i);return this.nodes[i]=o,o}createNodes(i){const o=[];return i.forEach(h=>{o.push(this.createNode(h))}),o}link(i,o){let h=[],f=[];const g=[],u=[];i instanceof Array?h=i:h=[i],o instanceof Array?f=o:f=[o];for(let v=0;v<h.length;v++){const p=h[v];if(typeof p=="string"){const m=this.getNode(p);if(!m)throw Error(`cannot link input node named ${p} since it doesn't exist in graph`);g.push(m)}else g.push(p)}for(let v=0;v<f.length;v++){const p=f[v];if(typeof p=="string"){const m=this.getNode(p);if(!m)throw Error(`cannot link output node named ${p} since it doesn't exist in graph`);u.push(m)}else u.push(p)}const E=[];return g.forEach(v=>{u.forEach(p=>{if(this.willCreateCycle(v,p))throw Error(`cannot link ${v.name} to ${p.name} since it would create a cycle`);E.push(this.createEdge().link(v,p))})}),E}descendants(i){if(!i.length)return new Set;const o=new Set(r(i)?i.map(h=>this.nodes[h]).filter(h=>h!==void 0):i);return this.descendantsRecursive(o)}descendantsRecursive(i,o=new Set){for(const h of i){const f=new Set;for(const{inputNode:g}of h.inputEdges)g&&!o.has(g)&&(o.add(g),f.add(g));this.descendantsRecursive(f,o)}return o}willCreateCycle(i,o){if(i===o)return!0;const h=new Set,f=[o];for(;f.length;){const g=f.pop();if(g===i)return!0;h.add(g);for(const u of g.outputEdges){const E=u.outputNode;E&&!h.has(E)&&f.push(E)}}return!1}createEdge(){return new n}getNode(i){return this.nodes[i]}}const l=c=>{Object.keys(c.nodes).forEach(i=>{const o=c.nodes[i];let h=o.outputEdges.map(g=>g.outputNode?.name).join(", ");h||(h="<none>");let f=o.inputEdges.map(g=>g.inputNode?.name).join(", ");f||(f="<none>"),console.log(`${o.name}:
 - links to:   ${h}
 - links from: ${f}`)})};function r(c){return c.length>0&&typeof c[0]=="string"}},68373:(ne,A,e)=>{"use strict";e.d(A,{gs:()=>N,Ff:()=>M,Po:()=>W});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(63142),c=e(12737),i=e(77824),o=e(92807),h=e(75515),f=e(74098),g=e(25531),u=e(63527);const E=({panel:G,formatDate:w})=>{const _=(0,r.of)(v),Q=G.libraryPanel?.meta;return Q?(0,n.jsxs)("div",{className:_.info,children:[(0,n.jsx)("div",{className:_.libraryPanelInfo,children:(0,n.jsxs)(l.x6,{i18nKey:"library-panels.library-panel-info.usage-count",count:Q.connectedDashboards,children:["Used on ","{{count}}"," dashboards"]})}),(0,n.jsx)("div",{className:_.libraryPanelInfo,children:(0,n.jsxs)(l.x6,{i18nKey:"library-panels.library-panel-info.last-edited",values:{timeAgo:w?.(Q.updated,"L")??Q.updated},components:{person:(0,n.jsxs)(n.Fragment,{children:[Q.updatedBy.avatarUrl&&(0,n.jsx)("img",{width:"22",height:"22",className:_.userAvatar,src:Q.updatedBy.avatarUrl,alt:`Avatar for ${Q.updatedBy.name}`}),Q.updatedBy.name]})},children:["Last edited on ","{{timeAgo}}"," by","<person />"]})})]}):null},v=G=>({info:(0,a.css)({lineHeight:1}),libraryPanelInfo:(0,a.css)({color:G.colors.text.secondary,fontSize:G.typography.bodySmall.fontSize}),userAvatar:(0,a.css)({borderRadius:G.shape.radius.circle,boxSizing:"content-box",width:"22px",height:"22px",paddingLeft:G.spacing(1),paddingRight:G.spacing(1)})});var p=e(25797),m=e(51156);function y(G){const{panel:w,onPanelConfigChange:_,dashboard:Q}=G,ae=new p.C({title:(0,l.t)("dashboard.get-library-panel-options-category.descriptor.title.library-panel-options","Library panel options"),id:"Library panel options",isOpenDefault:!0});return(0,h.X)(w)&&ae.addItem(new m.v({title:(0,l.t)("dashboard.get-library-panel-options-category.title.name","Name"),id:"library-panel-name",value:w.libraryPanel.name,popularRank:1,render:function(k){return(0,n.jsx)(u.p,{id:k.props.id,defaultValue:w.libraryPanel.name,onBlur:ee=>_("libraryPanel",{...w.libraryPanel,name:ee.currentTarget.value})})}})).addItem(new m.v({title:(0,l.t)("dashboard.get-library-panel-options-category.title.information","Information"),id:"library-panel-information",render:function(){return(0,n.jsx)(E,{panel:w,formatDate:Q.formatDate})}})),ae}var d=e(51898),x=e(43173),b=e(87105),D=e(21285),C=e(96822),P=e(18857),T=e(82345),O=e(22055),S=e(76623),B=e(31819);function K(G){const{dashboard:w,panel:_,onPanelConfigChange:Q}=G,ae=new p.C({title:(0,l.t)("dashboard.get-panel-frame-category.descriptor.title.panel-options","Panel options"),id:"Panel options",isOpenDefault:!0}),q="panel-frame-title",k="panel-frame-description",ee=J=>{const Z=document.getElementById(q);Z instanceof HTMLInputElement&&(Z.value=J,Q("title",J))},j=J=>{const Z=document.getElementById(k);Z instanceof HTMLTextAreaElement&&(Z.value=J,Q("description",J))};return ae.addItem(new m.v({title:(0,l.t)("dashboard.get-panel-frame-category.title.title","Title"),id:q,value:_.title,popularRank:1,render:function(Z){return(0,n.jsx)(u.p,{"data-testid":d.Tp.components.PanelEditor.OptionsPane.fieldInput("Title"),id:Z.props.id,defaultValue:_.title,onBlur:te=>Q("title",te.currentTarget.value)})},addon:x.$.featureToggles.dashgpt&&(0,n.jsx)(S.h,{onGenerate:ee,panel:_.getSaveModel(),dashboard:w.getSaveModelClone()})})).addItem(new m.v({title:(0,l.t)("dashboard.get-panel-frame-category.title.description","Description"),id:k,description:_.description,value:_.description,render:function(Z){return(0,n.jsx)(b.f,{"data-testid":d.Tp.components.PanelEditor.OptionsPane.fieldInput("Description"),id:Z.props.id,defaultValue:_.description,onBlur:te=>Q("description",te.currentTarget.value)})},addon:x.$.featureToggles.dashgpt&&(0,n.jsx)(O.t,{onGenerate:j,panel:_.getSaveModel()})})).addItem(new m.v({title:(0,l.t)("dashboard.get-panel-frame-category.title.transparent-background","Transparent background"),id:"panel-frame-transparent-bg",render:function(Z){return(0,n.jsx)(D.d,{"data-testid":d.Tp.components.PanelEditor.OptionsPane.fieldInput("Transparent background"),value:_.transparent,id:Z.props.id,onChange:te=>Q("transparent",te.currentTarget.checked)})}})).addCategory(new p.C({title:(0,l.t)("dashboard.get-panel-frame-category.title.panel-links","Panel links"),id:"panel-frame-links-category",isOpenDefault:!1,itemsCount:_.links?.length}).addItem(new m.v({title:(0,l.t)("dashboard.get-panel-frame-category.title.panel-links","Panel links"),id:"panel-frame-links-category",render:function(){return(0,n.jsx)(C.e,{links:_.links,onChange:Z=>Q("links",Z),getSuggestions:T.Fq,data:[]})}}))).addCategory(new p.C({title:(0,l.t)("dashboard.get-panel-frame-category.title.repeat-options","Repeat options"),id:"panel-frame-repeat",isOpenDefault:!1}).addItem(new m.v({title:(0,l.t)("dashboard.get-panel-frame-category.title.repeat-by-variable","Repeat by variable"),id:"panel-frame-repeat-by-variable",description:"Repeat this panel for each value in the selected variable. This is not visible while in edit mode. You need to go back to dashboard and then update the variable or reload the dashboard.",render:function(Z){return(0,n.jsx)(B.G,{id:Z.props.id,repeat:_.repeat,onChange:te=>{Q("repeat",te)}})}})).addItem(new m.v({title:(0,l.t)("dashboard.get-panel-frame-category.title.repeat-direction","Repeat direction"),id:"panel-frame-repeat-direction",showIf:()=>!!_.repeat,render:function(){const Z=[{label:(0,l.t)("dashboard.get-panel-frame-category.direction-options.label.horizontal","Horizontal"),value:"h"},{label:(0,l.t)("dashboard.get-panel-frame-category.direction-options.label.vertical","Vertical"),value:"v"}];return(0,n.jsx)(i.z,{options:Z,value:_.repeatDirection||"h",onChange:te=>Q("repeatDirection",te)})}})).addItem(new m.v({title:(0,l.t)("dashboard.get-panel-frame-category.title.max-per-row","Max per row"),id:"panel-frame-repeat-max-per-row",showIf:()=>!!(_.repeat&&_.repeatDirection==="h"),render:function(Z){const te=[2,3,4,6,8,12].map(se=>({label:se.toString(),value:se}));return(0,n.jsx)(P.l6,{id:Z.props.id,options:te,value:_.maxPerRow,onChange:se=>Q("maxPerRow",se.value)})}})))}var U=e(56424);class F{constructor(w,_){this.categories=w,this.overrides=_}search(w){const _=new RegExp(w,"i"),ae=this.collectHits(this.categories,_,[]).sort(I).map(ee=>ee.item),k=this.collectHits(this.overrides,_,[]).sort(I).map(ee=>ee.item);return{optionHits:ae,overrideHits:this.buildOverrideHitCategories(k),totalCount:this.getAllOptionsCount(this.categories)}}collectHits(w,_,Q){for(const ae of w){const q=_.test(ae.props.title);for(const k of ae.items){if(_.test(k.props.title||"")){Q.push({item:k,rank:1});continue}if(k.props.description&&_.test(k.props.description)){Q.push({item:k,rank:2});continue}q&&Q.push({item:k,rank:3})}ae.categories.length>0&&this.collectHits(ae.categories,_,Q)}return Q}getAllOptionsCount(w){let _=0;for(const Q of w)_+=Q.items.length,Q.categories.length>0&&(_+=this.getAllOptionsCount(Q.categories));return _}buildOverrideHitCategories(w){const _={};for(const Q of w){let ae=_[Q.parent.props.title];ae||(ae=_[Q.parent.props.title]=new p.C(Q.parent.props),ae.addItem(Q.parent.items[0])),ae.items[0].props.title!==Q.props.title&&ae.addItem(Q)}return Object.values(_)}}function I(G,w){return G.rank-w.rank}function V(G){const w=[];for(const _ of G)for(const Q of _.items)Q.props.title==="Unit"&&(Q.props.popularRank=2),Q.props.title==="Min"&&(Q.props.popularRank=3),Q.props.title==="Max"&&(Q.props.popularRank=4),Q.props.title==="Display name"&&(Q.props.popularRank=5),Q.props.popularRank&&w.push(Q);return w.sort((_,Q)=>_.props.popularRank-Q.props.popularRank)}const M=G=>{const{plugin:w,panel:_}=G,[Q,ae]=(0,s.useState)(""),[q,k]=(0,s.useState)("All"),ee=(0,r.of)(R),[j,J,Z]=(0,s.useMemo)(()=>[K(G),(0,U.Zm)(G),y(G)],[_.configRev,G.data,G.instanceState,Q]),te=(0,s.useMemo)(()=>(0,g.v)(G.panel.fieldConfig,G.plugin.fieldConfigRegistry,G.data?.series??[],Q,G.onFieldConfigsChange),[_.configRev,G.data,G.instanceState,Q]),se=[],ie=Q.length>0,ce=(0,s.useMemo)(L,[]),re=(0,h.X)(_)?[Z,j,...J]:[j,...J];if(ie)se.push(W(re,te,Q));else switch(q){case"All":(0,h.X)(_)&&se.push(Z.render()),se.push(j.render());for(const X of J)se.push(X.render());for(const X of te)se.push(X.render());break;case"Overrides":for(const X of te)se.push(X.render());break;case"Recent":se.push((0,n.jsx)(f.D,{id:"Recent options",title:(0,l.t)("dashboard.options-pane-options.Recent options-title-recent-options","Recent options"),forceOpen:!0,children:V(re).map(X=>X.render())},"Recent options"));break}const ue=!ie&&!w.fieldConfigRegistry.isEmpty();return(0,n.jsxs)("div",{className:ee.wrapper,children:[(0,n.jsxs)("div",{className:ee.formBox,children:[(0,n.jsx)("div",{className:ee.formRow,children:(0,n.jsx)(c.Z,{width:0,value:Q,onChange:ae,placeholder:(0,l.t)("dashboard.options-pane-options.placeholder-search-options","Search options")})}),ue&&(0,n.jsx)("div",{className:ee.formRow,children:(0,n.jsx)(i.z,{options:ce,value:q,fullWidth:!0,onChange:k})})]}),(0,n.jsx)(o.P,{children:(0,n.jsx)("div",{className:ee.mainBox,children:se})})]})};function L(){return[{label:"All",value:"All"},{label:"Overrides",value:"Overrides"}]}var N=(G=>(G.All="All",G.Overrides="Overrides",G.Recent="Recent",G))(N||{});function W(G,w,_){const Q=new F(G,w),{optionHits:ae,totalCount:q,overrideHits:k}=Q.search(_);return(0,n.jsxs)("div",{children:[(0,n.jsx)(f.D,{id:"Found options",title:(0,l.t)("dashboard.options-pane-options.title-matched","Matched {{count}}/{{totalCount}} options",{count:ae.length,totalCount:q}),forceOpen:!0,children:ae.map(ee=>ee.render(_))},"Normal options"),k.map(ee=>ee.render(_))]},"search results")}const R=G=>({wrapper:(0,a.css)({height:"100%",display:"flex",flexDirection:"column",flex:"1 1 0",".search-fragment-highlight":{color:G.colors.warning.text,background:"transparent"}}),searchBox:(0,a.css)({display:"flex",flexDirection:"column",minHeight:0}),formRow:(0,a.css)({marginBottom:G.spacing(1)}),formBox:(0,a.css)({padding:G.spacing(1),background:G.colors.background.primary,border:`1px solid ${G.components.panel.borderColor}`,borderTopLeftRadius:G.shape.borderRadius(1.5),borderBottom:"none"}),closeButton:(0,a.css)({marginLeft:G.spacing(1)}),searchHits:(0,a.css)({padding:G.spacing(1,1,0,1)}),searchNotice:(0,a.css)({fontSize:G.typography.size.sm,color:G.colors.text.secondary,padding:G.spacing(1),textAlign:"center"}),mainBox:(0,a.css)({background:G.colors.background.primary,border:`1px solid ${G.components.panel.borderColor}`,borderTop:"none",flexGrow:1})})},68528:(ne,A,e)=>{"use strict";e.d(A,{j:()=>a,x:()=>s});var n=e(75735);function a(l){return("meta"in l?l.meta.k8s?.annotations:l.metadata.annotations)?.[n.LH]===n.Sf.Repo}function s(l){return l.metadata.annotations?.[n.LH]===n.Sf.Repo}},68577:(ne,A,e)=>{"use strict";e.d(A,{v:()=>i});var n=e(74848),a=e(22803),s=e(96540),l=e(37386),r=e(18857),c=e(63142);function i({name:h,description:f,value:g,options:u,onChange:E,testId:v,width:p}){const m=(0,c.of)(o),y=(0,s.useId)(),d=`variable-select-input-${h}-${y}`;return(0,n.jsx)(l.D,{label:h,description:f,htmlFor:d,children:(0,n.jsx)(r.l6,{"data-testid":v,inputId:d,onChange:E,value:g,width:p??30,options:u,className:m.selectContainer})})}function o(h){return{selectContainer:(0,a.css)({marginRight:h.spacing(.5)})}}},68779:(ne,A,e)=>{"use strict";e.d(A,{Sm:()=>i,Sv:()=>o,j4:()=>c});var n=e(81160),a=e(16515),s=e(36638),l=e(64761),r=e(1027),c=(g=>(g.exclude="exclude",g.include="include",g))(c||{}),i=(g=>(g.all="all",g.any="any",g))(i||{});const o={id:l.F.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(g,u)=>E=>{const v=g.filters,p=g.match==="all",m=g.type==="include";return!Array.isArray(v)||v.length===0?E.pipe(r.W.operator({},u)):E.pipe((0,n.T)(y=>{if(y.length===0)return y;const d=[];for(const x of y){const b=new Set,D=f(x,y),C=h(v,D);for(let O=0;O<x.length;O++){if(b.has(O))continue;let S=!0;for(const B of C){const K=B(O,x,y);if(!p&&K){S=!0;break}if(p&&!K){S=!1;break}S=K}S&&b.add(O)}const P=[],T=m?b.size:y[0].length-b.size;for(const O of x.fields){const S=[];for(let B=0;B<x.length;B++){if(m&&b.has(B)){S.push(O.values[B]);continue}if(!m&&!b.has(B)){S.push(O.values[B]);continue}}P.push({...O,values:S,state:{}})}d.push({...x,fields:P,length:T})}return d}))}},h=(g,u)=>{const E=()=>!1;return g.map(v=>{const p=u[v.fieldName]??-1;if(p<0)return console.warn(`[FilterByValue] Could not find index for field name: ${v.fieldName}`),E;const m=(0,s.kK)(v.config);return(y,d,x)=>m(y,d.fields[p],d,x)})},f=(g,u)=>{const E={};return g.fields.forEach((v,p)=>{const m=(0,a.Ct)(v,g,u);E[m]=p}),E}},68805:(ne,A,e)=>{"use strict";e.d(A,{j:()=>c});var n=e(74848),a=e(22803),s=e(96540),l=e(67458),r=e(63142);const c=s.memo(s.forwardRef(({className:h,children:f,markdown:g,styleOverrides:u,onRemove:E,...v},p)=>{const m=(0,r.of)(y=>o(y,u?.borderTop));return(0,n.jsxs)("div",{className:(0,a.cx)(m.wrapper,h),...v,ref:p,children:[g&&i(g),f]})}));function i(h){const f=(0,l.G)(h);return(0,n.jsx)("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:f}})}c.displayName="OperationRowHelp";const o=(h,f)=>{const g=h.shape.radius.default,u=h.colors.background.secondary;return{wrapper:(0,a.css)({padding:h.spacing(2),border:`2px solid ${u}`,borderTop:f?f+u:"none",borderRadius:`0 0 ${g} ${g}`,position:"relative",top:"-4px"})}}},69076:(ne,A,e)=>{"use strict";e.d(A,{c:()=>l});var n=e(74848),a=e(92145),s=e(32635);function l({value:r,name:c,description:i,onChange:o,ariaLabel:h,testId:f}){const g=(0,a.Bi)();return(0,n.jsx)(s.S,{id:g,label:c,description:i,value:r,onChange:o,"aria-label":h,"data-testid":f})}},69168:(ne,A,e)=>{"use strict";e.d(A,{F:()=>i,H9:()=>E,TQ:()=>v,aW:()=>h,nx:()=>p});var n=e(2543),a=e.n(n),s=e(76637),l=e(64394),r=e(83340),c=e(33553);function i({plugin:m,currentOptions:y,currentFieldConfig:d,isAfterPluginChange:x}){const b=(0,n.mergeWith)({},m.defaults,y||{},(P,T)=>{if((0,n.isArray)(T))return T}),D=o(d,m),C=g(m,D,x);return{options:b,fieldConfig:C}}function o(m,y){const d=y.fieldConfigDefaults,x={defaults:(0,n.mergeWith)({},d.defaults,m?m.defaults:{},(b,D)=>{if((0,n.isArray)(D))return D}),overrides:m?.overrides??[]};f(x.defaults,"",y.fieldConfigRegistry),x.defaults.thresholds&&u(x.defaults.thresholds),x.overrides=h(x.overrides,b=>y.fieldConfigRegistry.getIfExists(b.id)!==void 0);for(const b of x.overrides)for(const D of b.properties)D.id==="thresholds"&&u(D.value);return x}function h(m,y){return m.map(d=>{const x=d.properties.filter(y);return{...d,properties:x}})}function f(m,y,d){let x=!1;for(const[b,D]of Object.entries(m)){const C=`${y}${b}`,P=!!d.getIfExists(C);if(P){x=!0;continue}(0,n.isArray)(D)||!(0,n.isObject)(D)?P||(0,n.unset)(m,b):f(D,`${C}.`,d)||(0,n.unset)(m,b)}return x}function g(m,y,d){if(!d)return y;const x=m.fieldConfigRegistry.getIfExists(r.uo.Color);if(x&&x.settings){const b=x.settings,D=s.uf.getIfExists(y.defaults.color?.mode);if(!b.byValueSupport&&(!D||D.isByValue))return y.defaults.color={mode:l.Y.PaletteClassic},y;if(b.byValueSupport&&b.preferThresholdsMode&&D?.id!==l.Y.Fixed&&(!D||!D.isByValue))return y.defaults.color={mode:l.Y.Thresholds},y;if(b.bySeriesSupport&&D?.isByValue)return y.defaults.color={mode:l.Y.PaletteClassic},y}return y}function u(m){m.mode||(m.mode=c.O.Absolute),m.steps?m.steps.length&&(m.steps[0].value=-1/0):m.steps=[]}function E(m,y){const d={defaults:{...m.defaults,custom:y.defaults.custom},overrides:[...m.overrides]};for(const x of y.overrides)for(const b of x.properties)if(v(b)){const D=d.overrides.find(C=>(0,n.isEqual)(C.matcher,x.matcher));D?D!==x&&D.properties.push(b):d.overrides.push(x)}return d}function v(m){return m.id.startsWith("custom.")}function p(m){return!v(m)}},69234:(ne,A,e)=>{"use strict";e.d(A,{b3:()=>g,xl:()=>x});var n=e(74848),a=e(22803),s=e(96540),l=e(40961),r=e(21275),c=e(63142),i=e(15245),o=e(84522);const h=void 0,f=10;var g=(D=>(D[D.xOne=0]="xOne",D[D.xAll=1]="xAll",D[D.xyOne=2]="xyOne",D))(g||{});function u(D,C){return{...D,...C,style:{...D.style,...C.style}}}function E(){return{style:{transform:"",pointerEvents:"none"},isHovering:!1,isPinned:!1,contents:null,plot:null,dismiss:()=>{}}}const v=5,p=D=>D!=null&&!D.ctrlKey&&!D.metaKey,m=()=>[],y=()=>[],d=/Android|iPhone|iPad/i.test(navigator.userAgent),x=({config:D,hoverMode:C,render:P,clientZoom:T=!1,queryZoom:O,onSelectRange:S,maxWidth:B,syncMode:K=r.yV.Off,syncScope:U="global",getDataLinks:F=m,getAdHocFilters:I=y})=>{const V=(0,s.useRef)(null),M=(0,s.useRef)(null);M.current==null&&(M.current=(0,i.gF)());const[{plot:L,isHovering:N,isPinned:W,contents:R,style:G,dismiss:w},_]=(0,s.useReducer)(u,null,E),Q=(0,s.useRef)(),ae=(0,c.of)(b,B),q=(0,s.useRef)(P);q.current=P;const k=(0,s.useRef)(F);k.current=F;const ee=(0,s.useRef)(I);return ee.current=I,(0,s.useLayoutEffect)(()=>{Q.current?.observer.disconnect(),Q.current={width:0,height:0,observer:new ResizeObserver(de=>{let ve=Q.current;for(const me of de)me.borderBoxSize?.length>0?(ve.width=me.borderBoxSize[0].inlineSize,ve.height=me.borderBoxSize[0].blockSize):(ve.width=me.contentRect.width,ve.height=me.contentRect.height)})};let j=!1,J=!1,Z=L,te=N,se=!1,ie=W,ce=G,re=!1;const ue=K===r.yV.Tooltip;K!==r.yV.Off&&D.scales[0].props.isTime&&D.setCursor({sync:{key:U,scales:["x",null]}});const X=()=>{_e?te=re&&se&&ue:te=Ae!=null||C===1&&se};let le=0,he=0,fe=null,Ce=[],Ae=null,_e=!1,Xe=[],De=[],Me=[],Te=!1,$e=!1;const Re=(de=!1)=>{Te||(te?queueMicrotask(Ve):setTimeout(Ve,100),Te=!0),de&&($e=!0)},Ke=de=>{de.target.closest('[role="dialog"], #grafana-portal-container')==null&&Se()},Ve=()=>{Te=!1,$e&&(ce={pointerEvents:ie?"all":"none"},Z.cursor._lock=ie,ie?(document.addEventListener("mousedown",Ke,!0),document.addEventListener("keydown",Ke,!0)):(document.removeEventListener("mousedown",Ke,!0),document.removeEventListener("keydown",Ke,!0)),$e=!1);let de={style:ce,isPinned:ie,isHovering:te,contents:te||fe!=null?q.current(Z,Ce,Ae,ie,Se,fe,_e,ie?Xe:Ae!=null?Me[Ae]:[],ie?De:[]):null,dismiss:Se};_(de),fe=null},Se=()=>{let de=ie;ie=!1,te=!1,Z.setCursor({left:-10,top:-10}),Xe=[],De=[],Re(de)};D.addHook("init",de=>{_({plot:Z=de}),T&&de.over.addEventListener("mousedown",ve=>{if(p(ve)&&ve.button===0&&ve.shiftKey){J=!0,de.cursor.drag.x=!1,de.cursor.drag.y=!0;let me=xe=>{de.cursor.drag.x=!0,de.cursor.drag.y=!1,document.removeEventListener("mouseup",me,!0)};document.addEventListener("mouseup",me,!0)}},!0),de.over.addEventListener("click",ve=>{if(ve.target===de.over){if(ve.ctrlKey||ve.metaKey){let me;de.scales.x.ori===0?me=de.posToVal(de.cursor.left,"x"):me=de.posToVal(de.select.top+de.select.height,"x"),fe={from:me,to:me},Re(!1)}else if(te&&!ie&&Ae!=null){Xe=k.current(Ae,Ce[Ae]),De=ee.current(Ae,Ce[Ae]);const me=Xe.find(xe=>xe.oneClick===!0);me!=null?window.open(me.href,me.target??"_self"):setTimeout(()=>{ie=!0,Re(!0)},0)}}})}),D.addHook("setSelect",de=>{const ve=de.scales.x.ori===0;if(!_e&&(T||O!=null))if(p(de.cursor.event)){if(S!=null){let me=[];const xe=!!de.cursor.drag.y,Ee=!!de.cursor.drag.x;let Pe=null,Oe=[];Ee&&(Pe={from:ve?de.posToVal(de.select.left,"x"):de.posToVal(de.select.top+de.select.height,"x"),to:ve?de.posToVal(de.select.left+de.select.width,"x"):de.posToVal(de.select.top,"x")}),xe&&D.scales.forEach(We=>{const Fe=We.props.scaleKey;if(Fe!=="x"){let Be={from:ve?de.posToVal(de.select.top+de.select.height,Fe):de.posToVal(de.select.left+de.select.width,Fe),to:ve?de.posToVal(de.select.top,Fe):de.posToVal(de.select.left,Fe)};Oe.push(Be)}}),Ee?xe?me=Oe.map(We=>({x:Pe,y:We})):me=[{x:Pe}]:xe&&(me=Oe.map(We=>({y:We}))),S(me)}else if(T&&J){if(de.select.height>=v){for(let me in de.scales)if(me!=="x"){const xe=ve?de.posToVal(de.select.top,me):de.posToVal(de.select.left+de.select.width,me),Ee=ve?de.posToVal(de.select.top+de.select.height,me):de.posToVal(de.select.left,me);de.setScale(me,{min:Ee,max:xe})}j=!0}J=!1}else if(O!=null&&de.select.width>=v){const me=ve?de.posToVal(de.select.left,"x"):de.posToVal(de.select.top+de.select.height,"x"),xe=ve?de.posToVal(de.select.left+de.select.width,"x"):de.posToVal(de.select.top,"x");O({from:me,to:xe}),j=!1}}else fe={from:ve?de.posToVal(de.select.left,"x"):de.posToVal(de.select.top+de.select.height,"x"),to:ve?de.posToVal(de.select.left+de.select.width,"x"):de.posToVal(de.select.top,"x")},Re(!0);de.setSelect({left:0,width:0,top:0,height:0},!1)}),(T||O!=null)&&D.setCursor({bind:{dblclick:de=>()=>{if(!p(de.cursor.event))return null;if(T&&j){for(let ve in de.scales)ve!=="x"&&de.setScale(ve,{min:null,max:null});j=!1}else if(O!=null){let ve=de.scales.x;const me=ve.min,xe=ve.max,Ee=(xe-me)/2;O({from:me-Ee,to:xe+Ee})}return null}}}),D.addHook("setData",de=>{j=!1,J=!1,ie&&Se()}),D.addHook("setSeries",(de,ve)=>{Ae=ve,_e=de.cursor.event==null,X(),Re()}),D.addHook("setLegend",de=>{Ce=Z?.cursor.idxs.slice(),se=Ce.some((me,xe)=>xe>0&&me!=null),Me.length===0&&(Me=Ce.map((me,xe)=>{if(xe>0){const Pe=F(xe,Ce[xe]).find(Oe=>Oe.oneClick===!0);if(Pe)return[Pe]}return[]})),_e=de.cursor.event==null;let ve=te;X(),(te||te!==ve)&&Re()});const Ye=16;let Ue=0,je=0;const Qe=()=>{te&&!ie&&Se(),Ue=window.innerWidth-Ye,je=window.innerHeight-Ye},He=()=>{re=Z.rect.bottom<=je&&Z.rect.top>=0&&Z.rect.left>=0&&Z.rect.right<=Ue};Qe(),D.addHook("ready",He),D.addHook("setCursor",de=>{if(_e=de.cursor.event==null,!te)return;let{left:ve=-10,top:me=-10}=de.cursor;if(ve>=0||me>=0){let xe=de.rect.left+ve,Ee=de.rect.top+me,Pe="",{width:Oe,height:We}=Q.current;Oe+=f,We+=f,he!==0?Ee+We<je||Ee-We<0?he=0:he!==-We&&(he=-We):Ee+We>je&&Ee-We>=0&&(he=-We),le!==0?xe+Oe<Ue||xe-Oe<0?le=0:le!==-Oe&&(le=-Oe):xe+Oe>Ue&&xe-Oe>=0&&(le=-Oe);const Fe=xe+(le===0?f:-f),Be=Ee+(he===0?f:-f);Pe=`translateX(${Fe}px) ${le===0?"":"translateX(-100%)"} translateY(${Be}px) ${he===0?"":"translateY(-100%)"}`,V.current!=null?V.current.style.transform=Pe:(ce.transform=Pe,Re())}});const Je=de=>{He(),te&&de.target instanceof Node&&de.target.contains(Z.root)&&Se()};return window.addEventListener("resize",Qe),window.addEventListener("scroll",Je,!0),()=>{Q.current?.observer.disconnect(),window.removeEventListener("resize",Qe),window.removeEventListener("scroll",Je,!0),document.removeEventListener("mousedown",Ke,!0),document.removeEventListener("keydown",Ke,!0)}},[D]),(0,s.useLayoutEffect)(()=>{const j=Q.current;if(V.current!=null){j.observer.disconnect(),j.observer.observe(V.current);const{width:J,height:Z}=V.current.getBoundingClientRect();j.width=J,j.height=Z;let te=L.cursor.event;if(te!=null){const se=te.type!=="mousemove"||d;se&&(te=new MouseEvent("mousemove",{view:window,bubbles:!0,cancelable:!0,clientX:te.clientX,clientY:te.clientY,screenX:te.screenX,screenY:te.screenY})),!(se?!1:performance.now()-te.timeStamp>16)&&L.over.dispatchEvent(te)}else L.setCursor({left:L.cursor.left,top:L.cursor.top},!0)}else j.width=0,j.height=0},[N]),L&&N?(0,l.createPortal)((0,n.jsxs)("div",{className:(0,a.cx)(ae.tooltipWrapper,W&&ae.pinned),style:G,"aria-live":"polite","aria-atomic":"true",ref:V,children:[W&&(0,n.jsx)(o.J,{onClick:w}),R]}),M.current):null},b=(D,C)=>({tooltipWrapper:(0,a.css)({top:0,left:0,zIndex:D.zIndex.tooltip,whiteSpace:"pre",borderRadius:D.shape.radius.default,position:"fixed",background:D.colors.background.elevated,border:`1px solid ${D.colors.border.weak}`,boxShadow:D.shadows.z2,userSelect:"text",maxWidth:C??"none"}),pinned:(0,a.css)({boxShadow:D.shadows.z3})})},69289:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>B,Cj:()=>u,HO:()=>x,Mj:()=>p,Nm:()=>v,Q9:()=>d,RS:()=>C,c1:()=>g,g$:()=>b,ny:()=>m,ri:()=>y,uh:()=>D,xu:()=>E});var n=e(65307),a=e(2543),s=e.n(a),l=e(25229),r=e(80011),c=e(5857),i=e(65642),o=e(73427);const h={orgId:o.TP.user.orgId,timeZone:o.TP.user.timezone,weekStart:o.TP.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},f=(0,n.Z0)({name:"user/profile",initialState:h,reducers:{updateTimeZone:(K,U)=>{K.timeZone=U.payload.timeZone},updateWeekStart:(K,U)=>{K.weekStart=U.payload.weekStart},updateFiscalYearStartMonth:(K,U)=>{K.fiscalYearStartMonth=U.payload.fiscalYearStartMonth},setUpdating:(K,U)=>{K.isUpdating=U.payload.updating},userLoaded:(K,U)=>{K.user=U.payload.user},initLoadTeams:(K,U)=>{K.teamsAreLoading=!0},teamsLoaded:(K,U)=>{K.teams=U.payload.teams,K.teamsAreLoading=!1},initLoadOrgs:(K,U)=>{K.orgsAreLoading=!0},orgsLoaded:(K,U)=>{K.orgs=U.payload.orgs,K.orgsAreLoading=!1},initLoadSessions:(K,U)=>{K.sessionsAreLoading=!0},sessionsLoaded:(K,U)=>{const F=U.payload.sessions.sort((I,V)=>Number(V.isActive)-Number(I.isActive));K.sessions=F.map(I=>({id:I.id,isActive:I.isActive,seenAt:(0,r.fq)(I.seenAt),createdAt:I.createdAt,clientIp:I.clientIp,browser:I.browser,browserVersion:I.browserVersion,authModule:I.authModule,os:I.os,osVersion:I.osVersion,device:I.device})),K.sessionsAreLoading=!1},userSessionRevoked:(K,U)=>{K.sessions=K.sessions.filter(F=>F.id!==U.payload.tokenId),K.isUpdating=!1}}}),g=K=>async U=>{(0,a.set)(o.TP,"user.fiscalYearStartMonth",K),U(O({fiscalYearStartMonth:K}))},u=K=>async U=>{(!(0,a.isString)(K)||(0,a.isEmpty)(K))&&(K=i.Ay?.bootData?.user?.timezone),(0,a.set)(o.TP,"user.timezone",K),U(P({timeZone:K}))},E=K=>async U=>{K||(K=(0,c.rL)()),(0,a.set)(o.TP,"user.weekStart",K),U(T({weekStart:K})),(0,l.$D)(K)},{setUpdating:v,initLoadOrgs:p,orgsLoaded:m,initLoadTeams:y,teamsLoaded:d,userLoaded:x,userSessionRevoked:b,initLoadSessions:D,sessionsLoaded:C,updateTimeZone:P,updateWeekStart:T,updateFiscalYearStartMonth:O}=f.actions,S=f.reducer,B={user:f.reducer}},69523:(ne,A,e)=>{"use strict";e.d(A,{H:()=>p});var n=e(74848),a=e(96540),s=e(92745),l=e(45863),r=e(31286),c=e(41654),i=e(37386),o=e(43243),h=e(63527),f=e(33143),g=e(8285),u=e(32603),E=e(71199),v=e(87748);class p extends l.Bs{constructor(d){super(d),this._variableDependency=new l.Sh(this,{onAnyVariableChanged:x=>{x.state.name===this.state.variable&&this._check()}}),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=m}static{this.serializer={id:"ConditionalRenderingVariable",name:"Variable",deserialize:this.deserialize}}_activationHandler(){this.forEachChild(d=>{d.isActive||this._subs.add(d.activate())}),this._check()}_check(){const d=this._evaluate();d!==this.state.result&&(this.setState({result:d}),(0,v.ah)(this))}_evaluate(){if(!this.state.variable)return;const d=l.jh.getVariables(this).getByName(this.state.variable);if(!d)return;const x=d.getValue()??"";let b;if(this.state.operator==="="||this.state.operator==="!=")b=Array.isArray(x)?x.includes(this.state.value.toString()):x===this.state.value.toString();else try{const D=new RegExp(this.state.value);b=Array.isArray(x)?x.some(C=>D.test(C.toString())):D.test(x.toString())}catch{return!0}return this.state.operator==="!="||this.state.operator==="!~"?!b:b}changeVariable(d){this.state.variable!==d&&(this.setState({variable:d}),this._check())}changeOperator(d){this.state.operator!==d&&(this.setState({operator:d}),this._check())}changeValue(d){this.state.value!==d&&(this.setState({value:d}),this._check())}render(){return(0,n.jsx)(this.Component,{model:this},this.state.key)}serialize(){return{kind:"ConditionalRenderingVariable",spec:{variable:this.state.variable,operator:this._getLongOperator(this.state.operator),value:this.state.value}}}static deserialize(d){return new p({variable:d.spec.variable,operator:p._getShortOperator(d.spec.operator),value:d.spec.value,result:void 0})}static createEmpty(d){return new p({variable:d,operator:"=",value:"",result:void 0})}_getLongOperator(d){switch(d){case"=":return"equals";case"!=":return"notEquals";case"=~":return"matches";case"!~":return"notMatches"}}static _getShortOperator(d){switch(d){case"equals":return"=";case"notEquals":return"!=";case"matches":return"=~";case"notMatches":return"!~"}}}function m({model:y}){const{variable:d,operator:x,value:b}=y.useState(),[D,C]=(0,a.useState)(b);(0,a.useEffect)(()=>C(b),[b]);const P=l.jh.getVariables((0,g.YQ)(y)),T=(0,a.useMemo)(()=>P.state.variables.map(K=>({value:K.state.name,label:K.state.label??K.state.name})),[P.state.variables]),O=(0,a.useMemo)(()=>[{value:"=",description:(0,s.t)("dashboard.conditional-rendering.conditions.variable.operator.equals","Equals")},{value:"!=",description:(0,s.t)("dashboard.conditional-rendering.conditions.variable.operator.not-equals","Not equals")},{value:"=~",description:(0,s.t)("dashboard.conditional-rendering.conditions.variable.operator.matches","Matches")},{value:"!~",description:(0,s.t)("dashboard.conditional-rendering.conditions.variable.operator.not-matches","Not matches")}],[]),S=(0,a.useMemo)(()=>{if(x==="=~"||x==="!~")try{return new RegExp(D),""}catch{return(0,s.t)("dashboard.conditional-rendering.conditions.variable.error.invalid-regex","Invalid regex")}return""},[D,x]),B=(0,s.t)("dashboard.edit-actions.edit-template-variable-rule","Change template variable rule");return(0,n.jsx)(E.B,{info:(0,s.t)("dashboard.conditional-rendering.conditions.variable.info","Show or hide the {{type}} dynamically based on the variable value.",{type:(0,u.L9)((0,v.KG)(y))}),isObjectSupported:!0,model:y,title:(0,s.t)("dashboard.conditional-rendering.conditions.variable.label","Template variable"),children:(0,n.jsxs)(c.B,{direction:"column",gap:.5,children:[(0,n.jsxs)(c.B,{direction:"row",gap:.5,grow:1,children:[(0,n.jsx)(r.a,{flex:1,children:(0,n.jsx)(o.G,{placeholder:(0,s.t)("dashboard.conditional-rendering.conditions.variable.name","Name"),options:T,value:d,onChange:K=>{const U=K.value;U!==d&&f.cc.edit({description:B,source:y,perform:()=>y.changeVariable(U),undo:()=>y.changeVariable(d)})}})}),(0,n.jsx)(o.G,{width:"auto",minWidth:10,options:O,value:x,onChange:K=>{const U=K.value;U!==x&&f.cc.edit({description:B,source:y,perform:()=>y.changeOperator(U),undo:()=>y.changeOperator(x)})}})]}),(0,n.jsx)(i.D,{error:S,invalid:!!S,noMargin:!0,children:(0,n.jsx)(h.p,{placeholder:(0,s.t)("dashboard.conditional-rendering.conditions.variable.value","Value"),value:D,onChange:K=>{K.currentTarget.value!==b&&C(K.currentTarget.value)},onBlur:()=>{D!==b&&f.cc.edit({description:B,source:y,perform:()=>y.changeValue(D),undo:()=>y.changeValue(b)})}})})]})})}},69738:(ne,A,e)=>{"use strict";e.d(A,{W:()=>a});var n=e(83873);class a{constructor(l){this.resourceUri=l}update(l){return n.IB.put(`/api/${this.resourceUri}/preferences`,l)}patch(l){return n.IB.patch(`/api/${this.resourceUri}/preferences`,l)}load(){return n.IB.get(`/api/${this.resourceUri}/preferences`)}}},69807:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>E,NV:()=>g,Y1:()=>o,j7:()=>i,kH:()=>c,pB:()=>f,s7:()=>h,sF:()=>r,sJ:()=>l});var n=e(65307);const a={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},s=(0,n.Z0)({name:"supportBundles",initialState:a,reducers:{supportBundlesLoaded:(v,p)=>({...v,supportBundles:p.payload,isLoading:!1}),fetchBegin:v=>({...v,isLoading:!0}),fetchEnd:v=>({...v,isLoading:!1}),collectorsFetchBegin:v=>({...v,createBundlePageLoading:!0}),collectorsFetchEnd:v=>({...v,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(v,p)=>({...v,supportBundleCollectors:p.payload,createBundlePageLoading:!1}),setLoadBundleError:(v,p)=>({...v,loadBundlesError:p.payload,supportBundleCollectors:[]}),setCreateBundleError:(v,p)=>({...v,createBundleError:p.payload})}}),{supportBundlesLoaded:l,fetchBegin:r,fetchEnd:c,supportBundleCollectorsLoaded:i,collectorsFetchBegin:o,collectorsFetchEnd:h,setLoadBundleError:f,setCreateBundleError:g}=s.actions,E={supportBundles:s.reducer}},69874:(ne,A,e)=>{"use strict";e.d(A,{getAuthProviderStatus:()=>g,getRegisteredAuthProviders:()=>o,initAuthConfig:()=>u});var n=e(65642),a=e(73427),s=e(83873),l=e(11257);const r=[],c={};function i(v,p){r.find(m=>m.id===v.id)||(r.push(v),p&&(c[v.id]=p))}function o(){return r}function h(v){return r.find(p=>p.id===v)}function f(v){const p=[];for(const[m,y]of Object.entries(v)){const d=r.find(x=>`auth.${x.id}`===m);if(d){const x={...y,providerId:d.id,displayName:y.name||d.displayName};p.push(x)}}return p}async function g(v){if(c[v]){const p=c[v];return p()}return{configured:!1,enabled:!1}}function u(){if(n.Ay.featureToggles.ssoSettingsLDAP)return;i({id:"ldap",type:"LDAP",protocol:"LDAP",displayName:"LDAP",configPath:"ldap"},E)}async function E(){if(a.TP.hasPermission(l.w.SettingsRead)){const p=(await(0,s.AI)().get("/api/admin/settings"))["auth.ldap"]||{};return{configured:p.enabled==="true",enabled:p.enabled==="true",hide:p.enabled!=="true"}}return{configured:!1,enabled:!1}}},69896:(ne,A,e)=>{"use strict";e.d(A,{b:()=>r,j:()=>l});var n=e(96540),a=e(24120),s=e(88483);const l=(0,n.createContext)(void 0);function r(){const c=(0,n.useContext)(l);return(0,a.A)(c?.stateObservable??new s.c,c?.state),(0,n.useMemo)(()=>c?{state:c.state,stateObservable:c.stateObservable,changeScopes:c.changeScopes,setReadOnly:c.setReadOnly,setEnabled:c.setEnabled}:void 0,[c,c?.state])}},70030:(ne,A,e)=>{"use strict";e.d(A,{Uy:()=>C,Z6:()=>T,ZB:()=>P,c:()=>K});var n=e(2543),a=e.n(n),s=e(3594),l=e(45863),r=e(21275),c=e(59857),i=e(10605),o=e(98314),h=e(4604),f=e(8095),g=e(88632),u=e(81657),E=e(93389),v=e(1131),p=e(87308),m=e(1682),y=e(52258),d=e(8285),x=e(78320),b=e(99392),D=e(84500);function C(F,I=!1){const V=F.state,M=V.$timeRange.state,L=V.$data,N=V.$variables,W=V.body;let R=[],G=[];if(W instanceof v.D){for(const j of W.state.grid.state.children)if(j instanceof E.U&&(j.state.variableName?R=R.concat(S(j,I)):R.push(P(j,I))),j instanceof l.tI){if(j.state.repeatSourceKey&&!I)continue;B(j,R,I)}}let w=[];L instanceof g.s&&(w=(0,b.O)(L.state.annotationLayers)),N instanceof l.Pj&&(G=(0,D.CN)(N));const _=V.controls?.state,Q=_?.refreshPicker,ae=U({refresh_intervals:Q?.state.intervals,hidden:_?.hideTimeControls,nowDelay:M.UNSAFE_nowDelay,quick_ranges:_?.timePicker.state.quickRanges},c.lt),q=V.$behaviors?.find(j=>j instanceof l.Gg.K2)?.state.sync??c.Ye.graphTooltip,k=V.$behaviors?.find(j=>j instanceof l.Gg.en)?.isEnabled||void 0,ee={...c.Ye,title:V.title,description:V.description||void 0,uid:V.uid,id:V.id,editable:V.editable,preload:V.preload,time:{from:M.from,to:M.to},timepicker:ae,panels:R,annotations:{list:w},templating:{list:G},version:V.version,timezone:M.timeZone,fiscalYearStartMonth:M.fiscalYearStartMonth,weekStart:M.weekStart,tags:V.tags,links:V.links,graphTooltip:q,liveNow:k,schemaVersion:h.O2,refresh:Q?.state.refresh,scopeMeta:V.scopeMeta};return(0,i.v)(ee,!0)}function P(F,I=!1){let V,M=0,L=0,N=0,W=0,R=F;if(!(R.state.body instanceof l.Eb))throw new Error("DashboardGridItem body expected to be VizPanel");if(V=R.state.body,M=R.state.x??0,L=R.state.y??0,N=R.state.width??0,W=(R.state.variableName?R.state.itemHeight:R.state.height)??0,!V)throw new Error("Unsupported grid item type");return T(V,{x:M,y:L,h:W,w:N},I,R)}function T(F,I,V=!1,M){let L;if((0,d.ME)(F)){const R=(0,d.iL)(F);return L={id:(0,d.Cs)(F),title:F.state.title,gridPos:I,libraryPanel:{name:R.state.name,uid:R.state.uid},type:"library-panel-ref"},L}else L={id:(0,d.Cs)(F),type:F.state.pluginId,title:F.state.title,description:F.state.description??void 0,gridPos:I,fieldConfig:F.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:F.state.displayMode==="transparent",pluginVersion:F.state.pluginVersion,...O(F,V)};if(F.state.options){const{angularOptions:R,...G}=F.state.options;L.options=G,R&&(0,n.defaults)(L,R)}const N=F.state.$timeRange;N instanceof u.v&&(L.timeFrom=N.state.timeFrom,L.timeShift=N.state.timeShift,L.hideTimeOverride=N.state.hideTimeOverride),M instanceof E.U&&(M.state.variableName&&(L.repeat=M.state.variableName),M.state.maxPerRow&&(L.maxPerRow=M.state.maxPerRow),M.state.repeatDirection&&(L.repeatDirection=M.getRepeatDirection()));const W=m.b4.getPanelLinks(F);return L.links=W?.state.rawLinks??[],L.links.length===0&&delete L.links,L.transformations?.length===0&&delete L.transformations,L.transparent||delete L.transparent,L}function O(F,I=!1){const V=F.state.$data,M={},L=(0,d.un)(F);if(L&&(M.targets=L.state.queries,M.maxDataPoints=L.state.maxDataPoints,M.datasource=L.state.datasource,L.state.cacheTimeout&&(M.cacheTimeout=L.state.cacheTimeout),L.state.queryCachingTTL&&(M.queryCachingTTL=L.state.queryCachingTTL),L.state.minInterval&&(M.interval=L.state.minInterval)),V instanceof l.Es&&(M.transformations=V.state.transformations),V&&I){M.datasource=x.x;let N=(0,o.B6)(V.state.data);V instanceof l.Es&&(N=(0,o.B6)(V.state.$data.state.data)),M.targets=[{refId:"A",datasource:M.datasource,queryType:f.nj.Snapshot,snapshot:N}]}return M}function S(F,I=!1){if(I){if(F.state.body instanceof l.Eb&&(0,d.ME)(F.state.body)){const{x:R=0,y:G=0,width:w=0,height:_=0}=F.state;return[T(F.state.body,{x:R,y:G,w,h:_},I)]}const V=[F.state.body,...F.state.repeatedPanels??[]],{h:M,w:L,columnCount:N}=(0,d.bR)(F);return V.map((R,G)=>{let w=0,_=0;F.state.repeatDirection==="v"?(w=F.state.x,_=F.state.y+G*M):(w=G%N*L,_=F.state.y+Math.floor(G/N)*M);const Q={x:w,y:_,w:L,h:M},ae=R.state.$variables.getByName(F.state.variableName);return{id:(0,y.t)(R.state.key),type:R.state.pluginId,title:R.state.title,gridPos:Q,options:R.state.options,fieldConfig:R.state.fieldConfig??{defaults:{},overrides:[]},transformations:[],transparent:R.state.displayMode==="transparent",scopedVars:{[F.state.variableName]:{text:ae?.state.text,value:ae?.state.value}},...O(R,I)}})}else return[P(F)]}function B(F,I,V=!1){const M=!!F.state.isCollapsed,L={type:"row",id:(0,d.Cs)(F),title:F.state.title,gridPos:{x:F.state.x??0,y:F.state.y??0,w:F.state.width??24,h:F.state.height??1},collapsed:M,panels:[]};if(F.state.$behaviors?.length){const W=F.state.$behaviors[0];W instanceof p.L&&(L.repeat=W.state.variableName)}if(V&&F.state.$variables){const R=F.state.$variables.state.variables.reduce((G,w)=>({...G,[w.state.name]:{text:w.state.text,value:w.state.value}}),{});L.scopedVars=R}I.push(L);let N=[];V?F.state.children.forEach(W=>{W instanceof E.U&&(W.state.variableName?N=N.concat(S(W,!M)):N.push(P(W,!M)))}):N=F.state.children.map(W=>{if(!(W instanceof E.U))throw new Error("Row child expected to be DashboardGridItem");return P(W)}),F.state.isCollapsed?L.panels=N:I.push(...N)}function K(F,I,V,M){let L={...V,title:F,time:{from:I.from.toISOString(),to:I.to.toISOString()},links:[]};if(M){const N=V.panels?.find(W=>W.id===(0,d.Cs)(M));N&&(N.gridPos={w:24,x:0,y:0,h:20},L={...L,panels:[N]})}if(L.panels?.forEach(N=>{"links"in N&&(N.links=[])}),L.annotations){const W=(L.annotations.list?.filter(R=>R.enable)||[]).map(R=>({name:R.name,enable:R.enable,iconColor:R.iconColor,type:R.type,builtIn:R.builtIn,hide:R.hide,snapshotData:[]}));L.annotations.list=W}return L.templating&&L.templating.list?.forEach(N=>{"query"in N&&(N.query=""),"options"in N&&(N.options=N.current&&!(0,s.R)(N.current)?[N.current]:[]),"refresh"in N&&(N.refresh=r.CO.never)}),L}function U(F,I){const V={...F};for(const M in I)(0,n.isEqual)(V[M],I[M])&&delete V[M];return V}},70191:(ne,A,e)=>{"use strict";e.d(A,{k:()=>r});var n=e(60455),a=e.n(n),s=e(79609),l=e(62635);const r=(c,i,o)=>{let h={},f={};if(c.type===s.CC.Regex&&c.expression){const g=new RegExp(c.expression,"gi"),E=(typeof i=="string"?i:(0,l.MA)(i)).matchAll(g);for(const v of E)v.groups?f=v.groups:f[c.mapValue||o]=v[1]||v[0]}else c.type===s.CC.Logfmt&&i!==void 0&&(f=a().parse(i));return Object.keys(f).forEach(g=>{const u=typeof f[g]=="string"?f[g]:(0,l.MA)(f[g]);h[g]={value:u}}),h}},70327:(ne,A,e)=>{"use strict";e.d(A,{hK:()=>u});var n=e(92745),a=e(52161),s=e(39659),l=e(29609),r=e(5709),c=e(55143),i=e(78467),o=e(77295);const h="/api/v1/rule/test/grafana",f="api/prometheus/grafana/api/v1/rules";var g=(E=>(E.RuleName="rule_name",E.RuleNameVanilla="rule_name[]",E.RuleGroup="rule_group",E.RuleGroupVanilla="rule_group[]",E.Namespace="file",E.NamespaceVanilla="file[]",E.FolderUID="folder_uid",E.LimitAlerts="limit_alerts",E.MaxGroups="max_groups",E.ExcludeAlerts="exclude_alerts",E))(g||{});const u=r.H.injectEndpoints({endpoints:E=>({preview:E.mutation({query:({alertQueries:v,condition:p,customLabels:m,folder:y,alertName:d,alertUid:x})=>({url:h,data:{rule:{grafana_alert:{data:v,condition:p,no_data_state:"Alerting",title:d,uid:x??"N/A"},for:"0s",labels:(0,s.x4)(m),annotations:{}},folderUid:y.uid,folderTitle:y.title},method:"POST"})}),prometheusRulesByNamespace:E.query({query:({limitAlerts:v,identifier:p,filter:m,state:y,matcher:d})=>{const x=new URLSearchParams;v&&x.set("limit_alerts",String(v)),p&&((0,l.Mj)(p)||(0,l.X4)(p))&&(x.set("file",p.namespace),x.set("file[]",p.namespace),x.set("rule_group",p.groupName),x.set("rule_group[]",p.groupName));const D={...(0,i.ou)(m),...Object.fromEntries(x)};return{url:f,params:(0,i.Dj)(D,y,d)}},transformResponse:v=>(0,i.lH)(v.data.groups,a.hY)}),prometheusRuleNamespaces:E.query({query:({ruleSourceName:v,namespace:p,groupName:m,ruleName:y,dashboardUid:d,panelId:x,limitAlerts:b,maxGroups:D,excludeAlerts:C})=>{const P={rule_group:m,rule_name:y,dashboard_uid:d,panel_id:x?.toString()};return p&&((0,a.z2)(v)?P.folder_uid=p:(P.file=p,P["file[]"]=p)),b!==void 0&&(P.limit_alerts="limit_alerts"),D&&(P.max_groups=String(D)),C&&(P.exclude_alerts="true"),{url:`api/prometheus/${(0,a.w5)(v)}/api/v1/rules`,params:P}},transformResponse:(v,p,m)=>(0,i.lH)(v.data.groups,m.ruleSourceName),providesTags:["CombinedAlertRule"]}),rulerRules:E.query({query:({rulerConfig:v,filter:p})=>{const{path:m,params:y}=(0,o.$o)(v).rules(p);return{url:m,params:y}},providesTags:["CombinedAlertRule"]}),rulerNamespace:E.query({query:({rulerConfig:v,namespace:p})=>{const{path:m,params:y}=(0,o.$o)(v).namespace(p);return{url:m,params:y}},providesTags:(v,p,{namespace:m,rulerConfig:y})=>[{type:"RuleNamespace",id:`${y.dataSourceUid}/${m}`}]}),getRuleGroupForNamespace:E.query({query:({rulerConfig:v,namespace:p,group:m,notificationOptions:y})=>{const{path:d,params:x}=(0,o.$o)(v).namespaceGroup(p,m);return{url:d,params:x,notificationOptions:y}},providesTags:(v,p,{namespace:m,group:y,rulerConfig:d})=>[{type:"RuleGroup",id:`${d.dataSourceUid}/${m}/${y}`},{type:"RuleNamespace",id:`${d.dataSourceUid}/${m}`}]}),getGrafanaRulerGroup:E.query({query:({folderUid:v,groupName:p})=>{const{path:m,params:y}=(0,o.$o)(c.b).namespaceGroup(v,p);return{url:m,params:y}},providesTags:(v,p,{folderUid:m,groupName:y})=>[{type:"RuleGroup",id:`grafana/${m}/${y}`},{type:"RuleNamespace",id:`grafana/${m}`}]}),deleteRuleGroupFromNamespace:E.mutation({query:({rulerConfig:v,namespace:p,group:m,notificationOptions:y})=>{const d=(0,n.t)("alerting.rule-groups.delete.success","Successfully deleted rule group"),{path:x,params:b}=(0,o.$o)(v).namespaceGroup(p,m);return{url:x,params:b,method:"DELETE",notificationOptions:{successMessage:d,...y}}},invalidatesTags:(v,p,{namespace:m,group:y,rulerConfig:d})=>[{type:"RuleGroup",id:`${d.dataSourceUid}/${m}/${y}`},{type:"RuleNamespace",id:`${d.dataSourceUid}/${m}`},"DeletedRules"]}),upsertRuleGroupForNamespace:E.mutation({query:({payload:v,namespace:p,rulerConfig:m,notificationOptions:y})=>{const{path:d,params:x}=(0,o.$o)(m).namespace(p),b=(0,n.t)("alerting.rule-groups.update.success","Successfully updated rule group");return{url:d,params:x,data:v,method:"POST",notificationOptions:{successMessage:b,...y}}},invalidatesTags:(v,p,{namespace:m,payload:y,rulerConfig:d})=>{const x=y.rules.filter(l.p.grafana.rule),b=[];return d.dataSourceUid===a.hY&&b.push({type:"GrafanaPrometheusGroups",id:`grafana/${m}/__any__/`},{type:"GrafanaPrometheusGroups",id:`grafana/${m}/${y.name}/__any__`},...x.map(D=>({type:"GrafanaPrometheusGroups",id:`grafana/${m}/${y.name}/${D.grafana_alert.title}`}))),[{type:"RuleNamespace",id:`${d.dataSourceUid}/${m}`},{type:"RuleGroup",id:`${d.dataSourceUid}/${m}/${y.name}`},...x.flatMap(D=>[{type:"GrafanaRulerRule",id:D.grafana_alert.uid},{type:"GrafanaRulerRuleVersion",id:D.grafana_alert.uid}]),...b,"DeletedRules"]}}),getAlertRule:E.query({query:({uid:v})=>({url:`/api/ruler/${a.hY}/api/v1/rule/${v}`}),providesTags:(v,p,{uid:m})=>[{type:"GrafanaRulerRule",id:m}]}),getAlertVersionHistory:E.query({query:({uid:v})=>({url:`/api/ruler/${a.hY}/api/v1/rule/${v}/versions`}),providesTags:(v,p,{uid:m})=>[{type:"GrafanaRulerRuleVersion",id:m}]}),exportRules:E.query({query:({format:v,folderUid:p,group:m,ruleUid:y})=>({url:"/api/ruler/grafana/api/v1/export/rules",params:{format:v,folderUid:p,group:m,ruleUid:y},responseType:"text"}),keepUnusedDataFor:0}),exportReceiver:E.query({query:({receiverName:v,decrypt:p,format:m})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:m,decrypt:p,name:v},responseType:"text"}),keepUnusedDataFor:0}),exportReceivers:E.query({query:({decrypt:v,format:p})=>({url:"/api/v1/provisioning/contact-points/export/",params:{format:p,decrypt:v},responseType:"text"}),keepUnusedDataFor:0}),exportPolicies:E.query({query:({format:v})=>({url:"/api/v1/provisioning/policies/export/",params:{format:v},responseType:"text"}),keepUnusedDataFor:0}),exportModifiedRuleGroup:E.mutation({query:({payload:v,format:p,nameSpaceUID:m})=>({url:`/api/ruler/grafana/api/v1/rules/${m}/export/`,params:{format:p},responseType:"text",data:v,method:"POST"})}),exportMuteTimings:E.query({query:({format:v})=>({url:"/api/v1/provisioning/mute-timings/export/",params:{format:v},responseType:"text"}),keepUnusedDataFor:0}),exportMuteTiming:E.query({query:({format:v,muteTiming:p})=>({url:`/api/v1/provisioning/mute-timings/${p}/export/`,params:{format:v},responseType:"text"}),keepUnusedDataFor:0}),getDeletedRules:E.query({query:()=>({url:`/api/ruler/${a.hY}/api/v1/rules/`,params:{deleted:"true"}}),transformResponse:v=>{const p=Object.values(v);return p.length>0?p[0][0]?.rules:[]},providesTags:["DeletedRules"]}),permanentlyDeleteRule:E.mutation({query:({guid:v})=>({url:`/api/ruler/${a.hY}/api/v1/trash/rule/guid/${v}`,method:"DELETE"}),invalidatesTags:["DeletedRules"]})})})},70332:(ne,A,e)=>{"use strict";e.d(A,{M:()=>s});var n=e(739),a=e(62748);function s(r,c){const o=`${r.min!==void 0?r.min:"na"}-${r.max!==void 0?r.max:"na"}`,h=`${r.custom?.axisSoftMin!==void 0?r.custom.axisSoftMin:"na"}-${r.custom?.axisSoftMax!==void 0?r.custom.axisSoftMax:"na"}`,f=`${r.custom?.axisPlacement!==void 0?r.custom?.axisPlacement:n.vM.Auto}`,g=r.unit??a.s,u=r.custom?.scaleDistribution?l(r.custom.scaleDistribution):n.L4.Linear,E=r.custom?.axisLabel?r.custom.axisLabel:"na";return`${g}/${o}/${h}/${f}/${u}/${E}/${c}`}function l(r){return r.type===n.L4.Log?`${r.type}${r.log}`:r.type}},70430:(ne,A,e)=>{"use strict";e.d(A,{w:()=>h});var n=e(74848),a=e(51898),s=e(92745),l=e(45863),r=e(51156),c=e(32442),i=e(25379),o=e(52847);function h({query:u,multi:E,allValue:v,includeAll:p,allowCustomValue:m,onQueryChange:y,onMultiChange:d,onIncludeAllChange:x,onAllValueChange:b,onAllowCustomValueChange:D}){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Y,{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.custom-variable-form.custom-options",children:"Custom options"})}),(0,n.jsx)(i.Z,{name:(0,s.t)("dashboard-scene.custom-variable-form.name-values-separated-comma","Values separated by comma"),defaultValue:u,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onBlur:y,required:!0,width:52,testId:a.Tp.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),(0,n.jsx)(c.Y,{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.custom-variable-form.selection-options",children:"Selection options"})}),(0,n.jsx)(o.B,{multi:E,includeAll:p,allValue:v,allowCustomValue:m,onMultiChange:d,onIncludeAllChange:x,onAllValueChange:b,onAllowCustomValueChange:D})]})}function f(u){return u instanceof CustomVariable?[new OptionsPaneItemDescriptor({title:t("dashboard.edit-pane.variable.custom-options.values","Values separated by comma"),id:"custom-variable-values",render:E=>jsx(g,{id:E.props.id,variable:u})})]:[]}function g({variable:u,id:E}){const{query:v}=u.useState(),p=async m=>{u.setState({query:m.currentTarget.value}),await lastValueFrom(u.validateAndUpdate())};return jsx(TextArea,{id:E,rows:2,defaultValue:v,onBlur:p,placeholder:t("dashboard.edit-pane.variable.custom-options.values-placeholder","1, 10, mykey : myvalue, myvalue, escaped,value"),required:!0,"data-testid":selectors.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput})}},70590:(ne,A,e)=>{"use strict";e.d(A,{RG:()=>a,Xe:()=>n});var n=(l=>(l[l.Admin=4]="Admin",l[l.Member=0]="Member",l))(n||{}),a=(l=>(l.View="View",l.Edit="Edit",l.Admin="Admin",l))(a||{}),s=(l=>(l.Folder="dash-folder",l.Dashboard="dash-db",l))(s||{})},70663:(ne,A,e)=>{"use strict";e.d(A,{I:()=>s});var n=e(96540),a=e(63704);function s({component:l,content:r,...c}){return n.createElement(l||"span",{dangerouslySetInnerHTML:{__html:a.sQ.sanitize(r)},...c})}},70683:(ne,A,e)=>{"use strict";e.d(A,{f:()=>M});var n=e(74848),a=e(22803),s=e(76698),l=e(96540),r=e(92745),c=e(63142),i=e(30703),o=e(31286),h=e(15245),f=e(66404),g=e(45967),u=e(70733),E=e(92842),v=e(76319);const p=(0,l.forwardRef)(({children:W,onRemove:R,disabled:G,...w},_)=>{const Q=(0,c.of)(m,G),ae=(0,r.t)("grafana-ui.value-pill.remove-button","Remove {{children}}",{children:W});return(0,n.jsxs)("span",{className:Q.wrapper,...w,ref:_,children:[(0,n.jsx)("span",{className:Q.text,children:W}),!G&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:Q.separator}),(0,n.jsx)(v.K,{name:"times",size:"md","aria-label":ae,onClick:q=>{q.stopPropagation(),R()}})]})]})});p.displayName="ValuePill";const m=(W,R)=>({wrapper:(0,a.css)({display:"inline-flex",borderRadius:W.shape.radius.default,color:W.colors.text.primary,background:W.colors.background.secondary,padding:W.spacing(.25),border:R?`1px solid ${W.colors.border.weak}`:"none",fontSize:W.typography.bodySmall.fontSize,flexShrink:0,minWidth:"50px",alignItems:"center","&:first-child:has(+ div)":{flexShrink:1}}),text:(0,a.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:W.spacing(0,1,0,.75)}),separator:(0,a.css)({background:W.colors.border.weak,width:"2px",height:"100%",marginRight:W.spacing(.5)})});var y=e(74440),d=e(98869),x=e(35484),b=e(63527);const D=(W,R,G,w,_,Q,ae,q)=>{const k=(0,b.n)({theme:W,invalid:G}),ee=(0,x.getFocusStyles)(W),j=_&&_!=="auto"?W.spacing(_):"100%",J=Q?W.spacing(Q):"",Z=ae?W.spacing(ae):"";return{container:(0,a.css)({width:_==="auto"?"auto":j,minWidth:J,maxWidth:Z,display:_==="auto"?"inline-block":"block"}),wrapper:(0,a.cx)(k.input,(0,a.css)({display:"flex",width:"100%",gap:W.spacing(.5),padding:W.spacing(.5),paddingRight:q?W.spacing(5):28,"&:focus-within":{...ee}})),input:(0,a.css)({border:"none",outline:"none",background:"transparent",flexGrow:1,maxWidth:"100%",minWidth:40,"&::placeholder":{color:W.colors.text.disabled},"&:focus":{outline:"none",cursor:"text"},cursor:"pointer"}),pillWrapper:(0,a.css)({display:"inline-flex",flexWrap:R?"wrap":"nowrap",flexGrow:1,minWidth:"50px",gap:W.spacing(.5)}),restNumber:(0,a.css)({display:"inline-flex",alignItems:"center",justifyContent:"center",padding:W.spacing(0,1),border:w?`1px solid ${W.colors.border.weak}`:"none",borderRadius:W.shape.radius.default,backgroundColor:W.colors.background.secondary,cursor:"pointer","&:hover":{backgroundColor:W.colors.action.hover}}),suffix:k.suffix,disabled:k.inputDisabled}};var C=e(33605),P=e(75168),T=e(49185),O=e(53568);const S=12,B=50,K=10,U=15;function F(W,R,G){const[w,_]=(0,l.useState)(W.length),[Q,{width:ae}]=(0,T.A)(),[q,{width:k}]=(0,T.A)(),[ee,{width:j}]=(0,T.A)(),J=R&&R!=="auto"?R:ae;return(0,l.useEffect)(()=>{const Z=J-k-j;let te=0;for(let se=0;se<W.length;se++){if(te+=(0,O.kD)(W[se].label||"",S).width+(G?K:B),te>Z){_(Math.min(se,U)||1);break}se===W.length-1&&_(W.length)}},[J,k,j,W,_,G]),{measureRef:Q,counterMeasureRef:q,suffixMeasureRef:ee,shownItems:w}}function I(W){const R=(0,l.useRef)(null),G=(0,l.useRef)(0),[w,_]=(0,l.useState)("");return(0,l.useLayoutEffect)(()=>{if(R.current&&W==null&&G.current===0&&(G.current=R?.current.getBoundingClientRect().width),!R.current||W==null){_("");return}const Q=window.getComputedStyle(R.current).fontSize,ae=(0,O.kD)(R.current.value||"",parseInt(Q,10)).width;ae<G.current?_(""):_(`${ae+5}px`)},[W]),{inputRef:R,inputWidth:w}}var V=e(5320);const M=W=>{const{placeholder:R,onChange:G,value:w,width:_,enableAllOption:Q,invalid:ae,disabled:q,minWidth:k,maxWidth:ee,isClearable:j,createCustomValue:J=!1,"aria-labelledby":Z,"data-testid":te,portalContainer:se}=W,ie=(0,c.of)(d.C3),[ce,re]=(0,l.useState)(""),ue=(0,l.useMemo)(()=>({label:ce===""?(0,r.t)("multicombobox.all.title","All"):(0,r.t)("multicombobox.all.title-filtered","All (filtered)"),value:C.A}),[ce]),{options:X,updateOptions:le,asyncLoading:he,asyncError:fe}=(0,V.I)(W.options,J),Ce=(0,l.useMemo)(()=>Q&&X.length>1?[ue,...X]:X,[X,Q,ue]),Ae=W.loading||he,_e=(0,l.useMemo)(()=>w?L(w,typeof W.options!="function"?W.options:X):[],[w,W.options,X]),{measureRef:Xe,counterMeasureRef:De,suffixMeasureRef:Me,shownItems:Te}=F(_e,_,q),$e=(0,l.useCallback)(Le=>_e.some(Ge=>Ge.value===Le.value),[_e]),{getSelectedItemProps:Re,getDropdownProps:Ke,setSelectedItems:Ve,addSelectedItem:Se,removeSelectedItem:Ye,reset:Ue}=(0,s.mH)({selectedItems:_e,onStateChange:({type:Le,selectedItems:Ge})=>{switch(Le){case s.mH.stateChangeTypes.SelectedItemKeyDownBackspace:case s.mH.stateChangeTypes.SelectedItemKeyDownDelete:case s.mH.stateChangeTypes.DropdownKeyDownBackspace:case s.mH.stateChangeTypes.FunctionRemoveSelectedItem:case s.mH.stateChangeTypes.FunctionAddSelectedItem:case s.mH.stateChangeTypes.FunctionSetSelectedItems:case s.mH.stateChangeTypes.FunctionReset:G(Ge??[]);break;default:break}},stateReducer:(Le,Ge)=>{const{changes:Ze}=Ge;return{...Ze,activeIndex:-999}}}),{getToggleButtonProps:je,isOpen:Qe,highlightedIndex:He,getMenuProps:Je,getInputProps:de,getItemProps:ve}=(0,s.Bp)({items:Ce,itemToString:y.y,inputValue:ce,selectedItem:null,stateReducer:(Le,Ge)=>{const{type:Ze}=Ge;let{changes:qe}=Ge;switch(Le.isOpen===!1&&qe.isOpen===!0&&qe.inputValue===Le.inputValue&&(qe={...qe,inputValue:""}),Ze){case s.Bp.stateChangeTypes.InputKeyDownEnter:case s.Bp.stateChangeTypes.ItemClick:return{...qe,isOpen:!0,highlightedIndex:Le.highlightedIndex};case s.Bp.stateChangeTypes.InputBlur:re("");default:return qe}},onIsOpenChange:({isOpen:Le,inputValue:Ge})=>{Le&&Ge===""&&le(Ge)},onStateChange:({inputValue:Le,type:Ge,selectedItem:Ze})=>{switch(Ge){case s.Bp.stateChangeTypes.InputKeyDownEnter:case s.Bp.stateChangeTypes.ItemClick:if(Ze?.infoOption)break;if(Ze?.value===C.A){const qe=_e.length===Ce.length-1,at=Ce.slice(1).filter(Et=>!Et.infoOption);let ht=qe&&ce===""?[]:at;if(!qe&&ce!==""&&(ht=[...new Set([..._e,...at])]),qe&&ce!==""){const Et=new Set(at.map(mt=>mt.value));ht=_e.filter(mt=>!Et.has(mt.value))}Ve(ht)}else if(Ze&&$e(Ze)){const qe=_e.find(at=>at.value===Ze.value);qe&&Ye(qe)}else Ze&&Se(Ze);break;case s.Bp.stateChangeTypes.InputChange:re(Le??""),le(Le??"");break;default:break}}}),{inputRef:me,floatingRef:xe,floatStyles:Ee,scrollRef:Pe}=(0,P.l)(Ce,Qe),Oe=(0,c.of)(D,Qe,ae,q,_,k,ee,j),We=Qe?_e.slice(0,U):_e.slice(0,Te),{inputRef:Fe,inputWidth:Be}=I(ce);return(0,n.jsxs)("div",{className:Oe.container,ref:me,children:[(0,n.jsx)("div",{className:(0,a.cx)(Oe.wrapper,{[Oe.disabled]:q}),ref:Xe,children:(0,n.jsxs)("span",{className:Oe.pillWrapper,children:[We.map((Le,Ge)=>(0,n.jsx)(p,{disabled:q,onRemove:()=>{Ye(Le)},...Re({selectedItem:Le,index:Ge}),children:(0,y.y)(Le)},`${Le.value}${Ge}`)),_e.length>We.length&&(0,n.jsxs)(o.a,{display:"flex",direction:"row",marginLeft:.5,gap:1,ref:De,children:[(0,n.jsx)(f.E,{children:"..."}),(0,n.jsx)(g.m,{interactive:!0,content:(0,n.jsx)(n.Fragment,{children:_e.slice(We.length).map(Le=>(0,n.jsx)("div",{children:(0,y.y)(Le)},Le.value))}),children:(0,n.jsx)("div",{className:Oe.restNumber,children:_e.length-Te})})]}),(0,n.jsx)("input",{className:Oe.input,...de({...Ke({disabled:q,preventKeyAction:Qe,placeholder:We.length===0?R:"",ref:Fe,style:{width:Be}}),"aria-labelledby":Z,"data-testid":te})}),(0,n.jsxs)("div",{className:Oe.suffix,ref:Me,...je(),children:[j&&_e.length>0&&(0,n.jsx)(i.I,{name:"times",className:ie.clear,title:(0,r.t)("multicombobox.clear.title","Clear all"),tabIndex:0,role:"button",onClick:Le=>{Le.stopPropagation(),Ue()},onKeyDown:Le=>{(Le.key==="Enter"||Le.key===" ")&&Ue()}}),(0,n.jsx)(E.f,{isLoading:Ae||!1,isOpen:Qe})]})]})}),(0,n.jsx)(h.ZL,{root:se,children:(0,n.jsx)("div",{className:(0,a.cx)(ie.menu,!Qe&&ie.menuClosed),style:{...Ee,width:Ee.width+24,pointerEvents:"auto"},...Je({ref:xe}),children:Qe&&(0,n.jsx)(u.e,{options:Ce,highlightedIndex:He,selectedItems:_e,scrollRef:Pe,getItemProps:ve,enableAllOption:Q,isMultiSelect:!0,error:fe})})})]})};function L(W,R){if(N(W))return W;const G=new Map(W.map((_,Q)=>[_,Q])),w=[];for(const _ of R){const Q=G.get(_.value);if(Q!==void 0&&(w[Q]=_,G.delete(_.value)),G.size===0)break}for(const[_,Q]of G)w[Q]={value:_};return w}function N(W){return typeof W[0]=="object"}},70715:(ne,A,e)=>{"use strict";e.d(A,{A:()=>a,S:()=>l});var n=e(96540);const a=(0,n.createContext)(s());a.displayName="PluginPageContext";function s(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function l(r){return{sectionNav:r??s().sectionNav}}},70733:(ne,A,e)=>{"use strict";e.d(A,{e:()=>b});var n=e(74848),a=e(22803),s=e(72181),l=e(96540),r=e(63142),c=e(32635),i=e(92807),o=e(92745),h=e(30703),f=e(31286),g=e(41654),u=e(66404);const E=()=>(0,n.jsxs)(p,{children:[(0,n.jsx)(u.E,{color:"warning",children:(0,n.jsx)(h.I,{name:"exclamation-triangle",size:"md"})}),(0,n.jsx)(o.x6,{i18nKey:"combobox.async.error",children:"An error occurred while loading options."})]}),v=()=>(0,n.jsx)(p,{children:(0,n.jsx)(o.x6,{i18nKey:"combobox.options.no-found",children:"No options found."})}),p=({children:D})=>(0,n.jsx)(f.a,{padding:2,children:(0,n.jsx)(g.B,{justifyContent:"center",alignItems:"center",direction:"column",children:D})});var m=e(98869),y=e(33605),d=e(93521);const x=4,b=({options:D,highlightedIndex:C,selectedItems:P=[],scrollRef:T,getItemProps:O,enableAllOption:S,isMultiSelect:B=!1,error:K=!1})=>{const U=(0,r.of)(m.C3),F=(0,l.useCallback)(L=>{const N=(0,d.S)(D[L],L>0?D[L-1]:void 0),W="description"in D[L],R="group"in D[L];let G=m.Aj;return W&&(G=m.pg),N&&R&&(G+=m.Aj),G},[D]),I=(0,s.Te)({count:D.length,getScrollElement:()=>T.current,estimateSize:F,overscan:x}),V=(0,l.useCallback)(L=>P.some(N=>N.value===L.value),[P]),M=S&&D.length>1&&P.length===D.length-1;return(0,n.jsxs)(i.P,{showScrollIndicators:!0,maxHeight:"inherit",ref:T,padding:.5,children:[(0,n.jsx)("div",{style:{height:I.getTotalSize()},className:U.menuUlContainer,children:I.getVirtualItems().map((L,N,W)=>{const R=D[L.index],G=(0,d.S)(R,D[L.index-1]),w=W.find(q=>D[q.index].group===R.group),_=w&&D[w.index],Q=`combobox-option-${R.value}`,ae=_?`combobox-option-group-${_.value}`:void 0;return(0,n.jsxs)("div",{className:U.listItem,style:{height:L.size,transform:`translateY(${L.start}px)`},children:[G&&(0,n.jsx)("div",{role:"presentation","data-testid":"combobox-option-group",id:ae,className:(0,a.cx)(U.optionGroupHeader,R.group&&U.optionGroupLabel,L.index===0&&U.optionFirstGroupHeader),children:R.group}),(0,n.jsxs)("div",{className:(0,a.cx)(U.option,!B&&V(R)&&U.optionSelected,C===L.index&&!R.infoOption&&U.optionFocused,R.infoOption&&U.optionInfo),...O({item:R,index:L.index,id:Q,"aria-describedby":ae,disabled:R.infoOption}),children:[B&&(0,n.jsx)("div",{className:U.optionAccessory,children:!R.infoOption&&(0,n.jsx)(c.S,{value:M||V(R),indeterminate:R.value===y.A&&P.length>0&&!M,"aria-labelledby":Q,onClick:q=>{q.stopPropagation()},"data-testid":`${Q}-checkbox`},Q)}),(0,n.jsxs)("div",{className:U.optionBody,children:[(0,n.jsx)("div",{className:U.optionLabel,children:R.label??R.value}),R.description&&(0,n.jsx)("div",{className:U.optionDescription,children:R.description})]})]})]},R.value)})}),(0,n.jsxs)("div",{"aria-live":"polite",children:[K&&(0,n.jsx)(E,{}),D.length===0&&!K&&(0,n.jsx)(v,{})]})]})}},70735:(ne,A,e)=>{"use strict";e.d(A,{k:()=>u});var n=e(74848),a=e(22803),s=e(96540),l=e(49785),r=e(51898),c=e(92745),i=e(63142),o=e(45861),h=e(37386),f=e(63527),g=e(41654);const u=({body:v,confirmPromptText:p,confirmButtonLabel:m,confirmButtonVariant:y,dismissButtonVariant:d,dismissButtonLabel:x,onConfirm:b,onDismiss:D,onAlternative:C,alternativeButtonLabel:P,description:T,justifyButtons:O="flex-end",disabled:S})=>{const[B,K]=(0,s.useState)(S),U=(0,i.of)(E),F=(0,s.useRef)(null),I=N=>{K(p?.toLowerCase().localeCompare(N.currentTarget.value.toLowerCase())!==0)};(0,s.useEffect)(()=>{F.current?.focus()},[]),(0,s.useEffect)(()=>{K(S?!0:!!p)},[p,S]);const V=async()=>{S===void 0&&K(!0);try{await b()}finally{S===void 0&&K(!1)}},{handleSubmit:M}=(0,l.mN)(),L=(0,c.t)("grafana-ui.confirm-content.placeholder",'Type "{{confirmPromptText}}" to confirm',{confirmPromptText:p});return(0,n.jsxs)("form",{onSubmit:M(V),children:[(0,n.jsxs)("div",{className:U.text,children:[v,T?(0,n.jsx)("div",{className:U.description,children:T}):null,p?(0,n.jsx)("div",{className:U.confirmationInput,children:(0,n.jsx)(g.B,{alignItems:"flex-start",children:(0,n.jsx)(h.D,{disabled:S,children:(0,n.jsx)(f.p,{placeholder:L,onChange:I,"data-testid":r.Tp.pages.ConfirmModal.input})})})}):null]}),(0,n.jsx)("div",{className:U.buttonsContainer,children:(0,n.jsxs)(g.B,{justifyContent:O,gap:2,wrap:"wrap",children:[(0,n.jsx)(o.$n,{variant:d,onClick:D,fill:"outline",children:x}),(0,n.jsx)(o.$n,{type:"submit",variant:y,disabled:B,ref:F,"data-testid":r.Tp.pages.ConfirmModal.delete,children:m}),C?(0,n.jsx)(o.$n,{variant:"primary",onClick:C,children:P}):null]})})]})},E=v=>({text:(0,a.css)({fontSize:v.typography.h5.fontSize,color:v.colors.text.primary}),description:(0,a.css)({fontSize:v.typography.body.fontSize}),confirmationInput:(0,a.css)({paddingTop:v.spacing(1)}),buttonsContainer:(0,a.css)({paddingTop:v.spacing(3)})})},70905:(ne,A,e)=>{"use strict";e.d(A,{E:()=>F});var n=e(74848),a=e(22803),s=e(96540),l=e(70255),r=e(92745),c=e(43173),i=e(63142),o=e(30703),h=e(20941),f=e(21348),g=e(41097),u=e(54044),E=e(28105),v=e(22787),p=e(45861),m=e(37666),y=e(55290),d=e(30124),x=e(65307);const b={loadingState:E.Gu.Loading,dashboardTitles:[]},D=(0,x.VP)("libraryPanels/delete/searchCompleted"),C=(M=b,L)=>D.match(L)?{...M,dashboardTitles:L.payload.dashboards.map(N=>N.title),loadingState:E.Gu.Done}:M;function P(M){return async function(L){const N=await(0,d.xV)(M.uid);L(D({dashboards:N}))}}const T=({libraryPanel:M,onDismiss:L,onConfirm:N})=>{const W=(0,i.of)(m.o),[{dashboardTitles:R,loadingState:G},w]=(0,s.useReducer)(C,b),_=(0,s.useMemo)(()=>(0,y.QC)(w),[w]);(0,s.useEffect)(()=>{_(P(M))},[_,M]);const Q=!!R.length,ae=G===E.Gu.Done;return(0,n.jsxs)(v.a,{className:W.modal,title:(0,r.t)("library-panels.delete-library-panel-modal.title-delete-library-panel","Delete library panel"),icon:"trash-alt",onDismiss:L,isOpen:!0,children:[ae?null:(0,n.jsx)(O,{}),ae?(0,n.jsxs)("div",{children:[Q?(0,n.jsx)(B,{dashboardTitles:R}):null,Q?null:(0,n.jsx)(S,{}),(0,n.jsxs)(v.a.ButtonRow,{children:[(0,n.jsx)(p.$n,{variant:"secondary",onClick:L,fill:"outline",children:(0,n.jsx)(r.x6,{i18nKey:"library-panels.delete-library-panel-modal.cancel",children:"Cancel"})}),(0,n.jsx)(p.$n,{variant:"destructive",onClick:N,disabled:Q,children:(0,n.jsx)(r.x6,{i18nKey:"library-panels.delete-library-panel-modal.delete",children:"Delete"})})]})]}):null]})},O=()=>(0,n.jsx)("span",{children:(0,n.jsx)(r.x6,{i18nKey:"library-panels.loading-indicator.loading-library-panel",children:"Loading library panel..."})}),S=()=>{const M=(0,i.of)(m.o);return(0,n.jsx)("div",{className:M.modalText,children:(0,n.jsx)(r.x6,{i18nKey:"library-panels.confirm.delete-panel",children:"Do you want to delete this panel?"})})},B=({dashboardTitles:M})=>{const L=(0,i.of)(m.o),N=M.length===1?"dashboard.":"dashboards.",W=`${M.length} ${N}`;return M.length===0?null:(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:L.textInfo,children:["This library panel can not be deleted because it is connected to ",(0,n.jsx)("strong",{children:W})," Remove the library panel from the dashboards listed below and retry."]}),(0,n.jsxs)("table",{className:L.myTable,children:[(0,n.jsx)("thead",{children:(0,n.jsx)("tr",{children:(0,n.jsx)("th",{children:(0,n.jsx)(r.x6,{i18nKey:"library-panels.has-connected-dashboards.dashboard-name",children:"Dashboard name"})})})}),(0,n.jsx)("tbody",{children:M.map((R,G)=>(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:R})},`dash-title-${G}`))})]})]})},K=({libraryPanel:M,onClick:L,onDelete:N,showSecondaryActions:W})=>{const[R,G]=(0,s.useState)(!1),w=()=>{N?.(M),G(!1)},_=c.$.panels[M.model.type]??(0,g.$)(M.model.type).meta;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.b,{isCurrent:!1,title:M.name,description:M.description,plugin:_,onClick:()=>L?.(M),onDelete:W?()=>G(!0):void 0,children:(0,n.jsx)(I,{libraryPanel:M})}),R&&(0,n.jsx)(T,{libraryPanel:M,onConfirm:w,onDismiss:()=>G(!1)})]})},U=({showSecondaryActions:M,rootProps:L})=>{const N=(0,i.of)(V);return(0,n.jsx)(u.b.Skeleton,{hasDelete:M,...L,children:(0,n.jsx)(l.A,{containerClassName:N.metaContainer,width:80})})},F=(0,f.j)(K,U);function I({libraryPanel:M}){const L=(0,i.of)(V);return!M.meta?.folderUid&&!M.meta?.folderName?null:M.meta.folderUid?(0,n.jsx)("span",{className:L.metaContainer,children:(0,n.jsxs)(h.N,{href:`/dashboards/f/${M.meta.folderUid}`,children:[(0,n.jsx)(o.I,{name:"folder-upload",size:"sm"}),(0,n.jsx)("span",{children:M.meta.folderName})]})}):(0,n.jsxs)("span",{className:L.metaContainer,children:[(0,n.jsx)(o.I,{name:"folder",size:"sm"}),(0,n.jsx)("span",{children:(0,n.jsx)(r.x6,{i18nKey:"library-panels.folder-link.dashboards",children:"Dashboards"})})]})}function V(M){return{metaContainer:(0,a.css)({display:"flex",alignItems:"center",color:M.colors.text.secondary,fontSize:M.typography.bodySmall.fontSize,paddingTop:M.spacing(.5),svg:{marginRight:M.spacing(.5),marginBottom:3}})}}},70958:(ne,A,e)=>{"use strict";e.d(A,{s:()=>l});var n=e(96540),a=e(54148),s=e(36490);function l(){const{search:r}=(0,a.zy)(),c=(0,n.useMemo)(()=>(0,s.SE)(r||""),[r]),i=(0,n.useCallback)((o,h)=>s.Ny.partial(o,h),[]);return[c,i]}},70969:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>o});var n=e(74848),a=e(22429),s=e(16200),l=e(37680),r=e(66769);const i=`You are an expert in creating Grafana Dashboards.
Your goal is to write a concise dashboard title.
You will be given the title and description of the dashboard's panels.
The dashboard title is meant to say what it shows on one line for users to navigate to it.
If the dashboard has no panels, the title should be "Empty dashboard"
There should be no numbers in the title.
The dashboard title should not have quotation marks in it.
The title should be, at most, 50 characters.
Respond with only the title of the dashboard.`,o=({onGenerate:f})=>{const g=(0,a.UA)().getCurrent(),u=(0,r.N3)(g);return(0,n.jsx)(s.n,{messages:h(g),onGenerate:f,eventTrackingSrc:l.ec.dashboardTitle,toggleTipTitle:"Improve your dashboard title",disabled:u.length===0,tooltip:u.length===0?r.ZN:void 0})};function h(f){return[{content:i,role:r.Xh.system},{content:`The panels in the dashboard are: ${(0,r.BB)(f)}`,role:r.Xh.user}]}},71076:(ne,A,e)=>{"use strict";e.d(A,{o:()=>o});var n=e(74848),a=e(22803),s=e(96540),l=e(52908),r=e(63142),c=e(35484),i=e(55302);const o=({position:{x:f,y:g},offset:{x:u,y:E},children:v,allowPointerEvents:p=!1,className:m,...y})=>{const d=(0,s.useRef)(null),[x,b]=(0,s.useState)({width:0,height:0}),{width:D,height:C}=(0,l.A)(),[P,T]=(0,s.useState)({x:f+u,y:g+E}),O=(0,s.useMemo)(()=>new ResizeObserver(B=>{for(let K of B){const U=Math.floor(K.contentRect.width+16),F=Math.floor(K.contentRect.height+16);(x.width!==U||x.height!==F)&&b({width:Math.min(U,D),height:Math.min(F,C)})}}),[x,D,C]);(0,s.useLayoutEffect)(()=>(d.current&&O.observe(d.current),()=>{O.disconnect()}),[O]),(0,s.useLayoutEffect)(()=>{if(d&&d.current){const{x:B,y:K}=(0,i.Ju)(f,g,x.width,x.height,u,E,D,C);T({x:B,y:K})}},[D,C,f,u,g,E,x]);const S=(0,r.of)(h);return(0,n.jsx)("div",{ref:d,style:{position:"fixed",left:0,pointerEvents:p?"auto":"none",top:0,transform:`translate(${P.x}px, ${P.y}px)`,transition:"transform ease-out 0.1s"},"aria-live":"polite","aria-atomic":"true",...y,className:(0,a.cx)(S.wrapper,m),children:v})};o.displayName="VizTooltipContainer";const h=f=>({wrapper:(0,a.css)((0,c.getTooltipContainerStyles)(f))})},71199:(ne,A,e)=>{"use strict";e.d(A,{B:()=>g});var n=e(74848),a=e(92745),s=e(30703),l=e(76319),r=e(45967),c=e(34999),i=e(66404),o=e(41654),h=e(33143),f=e(87748);function g({children:u,info:E,isObjectSupported:v,model:p,title:m}){return(0,n.jsxs)(o.B,{direction:"column",children:[(0,n.jsxs)(o.B,{direction:"row",gap:1,children:[(0,n.jsx)(i.E,{variant:"bodySmall",children:m}),E&&(0,n.jsx)(r.m,{content:E,children:(0,n.jsx)(s.I,{name:"info-circle"})})]}),(0,n.jsxs)(o.B,{direction:"row",gap:1,justifyContent:"stretch",alignItems:"center",children:[(0,n.jsxs)(o.B,{flex:1,direction:"column",gap:1,children:[u,!v&&(0,n.jsx)(c.F,{severity:"error",title:"",children:(0,n.jsx)(a.x6,{i18nKey:"dashboard.conditional-rendering.conditions.wrapper.unsupported-object-type",children:"This condition is not supported by the element, hence it will be ignored."})})]}),(0,n.jsx)(l.K,{"aria-label":(0,a.t)("dashboard.conditional-rendering.conditions.wrapper.delete-condition","Delete Condition"),name:"trash-alt",onClick:()=>{const y=(0,f.I7)(p);h.cc.edit({description:(0,a.t)("dashboard.conditional-rendering.conditions.wrapper.delete-condition","Delete Condition"),source:p,perform:()=>(0,f.Am)(p),undo:()=>{y>-1&&(0,f.AR)(p,y)}})}})]})]},p.state.key)}},71393:(ne,A,e)=>{"use strict";e.d(A,{BN:()=>N});var n=e(2543),a=e(62467),s=e(44240),l=e(39697),r=e(65474),c=e(81160),i=e(66847),o=e(59099),h=e(1005),f=e(65961),g=e(67791),u=e(69862),E=e(28105),v=e(739),p=e(33239),m=e(1906),y=e(97534),d=e(38353),x=e(43173),b=e(36580),D=e(83873),C=e(1404),P=e(29328),T=e(25992);const O=(0,T.DW)("features.query");var S=e(77526),B=e(5556),K=e(33749),U=e(27489),F=e(22429);function I(G){let w=!1;return Q=>{if(!Q.request||w||B.kM.getUrlSearchParams().editPanel!=null||Q.state!==E.Gu.Done&&Q.state!==E.Gu.Error)return;const q={eventName:K.n_.DataRequest,source:Q.request.app,datasourceName:G.name,datasourceId:G.id,datasourceUid:G.uid,datasourceType:G.type,dataSize:0,panelId:0,panelPluginId:Q.request?.panelPluginId,duration:Q.request.endTime-Q.request.startTime,...Q?.request?.panelId&&Number.isInteger(Q.request.panelId)&&{panelId:Q.request.panelId},...Q?.request?.panelName&&{panelName:Q.request.panelName}};_(q,Q),Q.request.app!==m.Jk.Explore&&Q.request.app!==m.Jk.Correlations&&V(q,Q),Q.series&&Q.series.length>0&&(q.dataSize=Q.series.length),(0,U.G$)(q),w=!0};function _(Q,ae){const q={};for(let ee=0;ee<ae.series.length;ee++){const j=ae.series[ee].refId;j&&!q[j]&&(q[j]=ae.series[ee].meta?.isCachedResponse??!1)}Q.totalQueries=Object.keys(q).length,Q.cachedQueries=Object.values(q).filter(ee=>ee===!0).length;const k=(0,F.UA)().getCurrent();k&&(Q.dashboardId=k.id,Q.dashboardName=k.title,Q.dashboardUid=k.uid,Q.folderName=k.meta.folderTitle)}}function V(G,w){w.errors?.length?G.error=w.errors.map(_=>_.message).join(", "):w.error&&(G.error=w.error.message)}function M(G,w){const _=w.panelData.request,Q={...w.packets},ae=G.key??G.data?.[0]?.refId??"A";Q[ae]=G;let q=G.state||E.Gu.Done,k,ee;const j=[],J=[];for(const ie in Q){const ce=Q[ie];if((ce.error||ce.errors?.length)&&(q=E.Gu.Error,k=ce.error,ee=ce.errors),ce.data&&ce.data.length)for(const re of ce.data){if(re.meta?.dataTopic===v.QR.Annotations){J.push(re);continue}j.push(re)}}const Z=L(_,q),te={state:q,series:j,annotations:J,error:k,errors:ee,request:_,timeRange:Z},se=new Set([...w.panelData.traceIds??[],...G.traceIds??[]]);return se.size>0&&(te.traceIds=Array.from(se)),{packets:Q,panelData:te}}function L(G,w){const _=G.range;return!(0,n.isString)(_.raw.from)||w!==E.Gu.Streaming?_:{..._,from:p.parse(_.raw.from,!1),to:p.parse(_.raw.to,!0)}}function N(G,w,_){let Q={panelData:{state:E.Gu.Loading,series:[],request:w,timeRange:w.range},packets:{}};if(!w.targets.length)return w.endTime=Date.now(),Q.panelData.state=E.Gu.Done,(0,a.of)(Q.panelData);const ae=W(G,w,_).pipe((0,c.T)(q=>{if(!(0,n.map)(q.data))throw new Error(`Expected response data to be array, got ${typeof q.data}.`);const k=w.targets.filter(ee=>ee.hide);for(const ee of k)q.data=q.data.filter(j=>j.refId!==ee.refId);return w.endTime=Date.now(),Q=M(q,Q),Q.panelData}),(0,i.W)(q=>(console.error("runRequest.catchError",q),O.logError(q),(0,a.of)({...Q.panelData,state:E.Gu.Error,error:(0,y.u)(q)}))),(0,o.M)(I(G)),(0,S.N)(D.IB,w.requestId),(0,h.u)());return(0,s.h)((0,l.O)(200).pipe((0,f.u)(Q.panelData),(0,g.Q)(ae)),ae)}function W(G,w,_){if((0,d.LZ)(G)){const Q=(0,d.xt)(G,w);return(0,r.H)(Q).pipe((0,u.Z)(ae=>R(G,ae,_)))}return R(G,w,_)}function R(G,w,_){if(w.targets=w.targets.map(ae=>(0,C.Ih)(ae)?{...G?.getDefaultQuery?.(m.Jk.PanelEditor),...ae}:ae),x.$.publicDashboardAccessToken)return(0,r.H)(G.query(w));for(const ae of w.targets)if((0,b.s9)(ae.datasource))return P.Ex.query(w);if(_||(w.targets=w.targets.filter(ae=>G.filterQuery?.(ae)??!0)),w.targets.length===0)return(0,a.of)({data:[]});const Q=_?_(w):G.query(w);return(0,r.H)(Q)}},71451:(ne,A,e)=>{"use strict";e.d(A,{n:()=>y});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(43533),c=e(2381),i=e(45861),o=e(18027),h=e(97095),f=e(63527),g=e(63142),u=e(14226),E=e(30868),v=e(20012),p=e(4896),m=e(73304);const y=b=>{const{value:D,src:C,name:P,placeholder:T,onChange:O,onClear:S,mediaType:B,folderName:K,size:U,color:F,maxFiles:I}=b,V=(0,g.of)(x),M=(0,g.$j)(),L=(0,s.useRef)(null),N=_=>(0,n.jsx)(m.i,{onChange:O,value:D,mediaType:B,folderName:K,maxFiles:I,hidePopper:_.hidePopper});let W=C;!W&&D&&(W=(0,v.D)(D));const R=F&&{fill:M.visualization.getColorByName(F)},G=()=>D&&W?(0,n.jsx)(E.y,{src:W,className:V.icon,style:{...R}}):(0,n.jsx)(i.z9,{variant:"primary",fill:"text",size:"sm",children:(0,n.jsx)(l.x6,{i18nKey:"dimensions.resource-picker.render-small-resource-picker.set-icon",children:"Set icon"})}),w=()=>(0,n.jsx)(h.C,{children:(0,n.jsx)(o.I,{label:null,grow:!0,children:(0,n.jsx)(f.p,{value:d(C,P),placeholder:T,readOnly:!0,prefix:W&&(0,n.jsx)(E.y,{src:W,className:V.icon,style:{...R}}),suffix:(0,n.jsx)(i.$n,{"aria-label":(0,l.t)("dimensions.resource-picker.aria-label-clear-value","Clear value"),icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:S})})})});return(0,n.jsx)(r.I,{content:N,children:(_,Q,ae)=>(0,n.jsxs)(n.Fragment,{children:[L.current&&(0,n.jsx)(c.A,{...ae,referenceElement:L.current,onMouseEnter:_,onKeyDown:q=>{(0,u.Q)(q,Q)},hidePopper:Q}),(0,n.jsxs)("div",{ref:L,className:V.pointer,onClick:_,onKeyDown:q=>{q.key==="Enter"&&_()},role:"button",tabIndex:0,children:[U===p.Iy.SMALL&&G(),U===p.Iy.NORMAL&&w()]})]})})};function d(b,D){if(b?.startsWith("public/build/img/icons")){const C=D?.lastIndexOf(".svg")??0;if(C>0)return D.substring(0,C)}return D}const x=b=>({pointer:(0,a.css)({cursor:"pointer","input[readonly]":{cursor:"pointer"}}),icon:(0,a.css)({verticalAlign:"middle",display:"inline-block",fill:"currentColor",width:"25px"})})},71479:(ne,A,e)=>{"use strict";e.d(A,{p:()=>c});var n=e(74848),a=e(22803),s=e(96540),l=e(76637),r=e(63142);const c=s.memo(s.forwardRef(({color:o,className:h,gradient:f,lineStyle:g,...u},E)=>{const v=(0,r.$j)(),p=(0,r.of)(i);let m;if(f){const d=l.uf.get(f).getColors?.(v);d?.length?m=`linear-gradient(90deg, ${d.join(", ")})`:m=v.visualization.getColorByName("")}else m=o;let y;return g?.fill==="dot"&&!f?y={backgroundImage:`radial-gradient(circle at 2px 2px, ${o} 2px, transparent 0)`,backgroundSize:"4px 4px",backgroundRepeat:"space"}:g?.fill==="dash"&&!f?y={backgroundImage:`linear-gradient(to right, ${o} 100%, transparent 0%)`,backgroundSize:"6px 4px",backgroundRepeat:"space"}:y={background:m,borderRadius:v.shape.radius.pill},(0,n.jsx)("div",{"data-testid":"series-icon",ref:E,className:(0,a.cx)(h,p.forcedColors,p.container),style:y,...u})})),i=o=>({container:(0,a.css)({marginRight:"8px",display:"inline-block",width:"14px",height:"4px"}),forcedColors:(0,a.css)({"@media (forced-colors: active)":{forcedColorAdjust:"none"}})});c.displayName="SeriesIcon"},71555:(ne,A,e)=>{"use strict";e.d(A,{e:()=>r});var n=e(74848),a=e(22803),s=e(63142),l=e(43990);const r=({src:i,alt:o,width:h,height:f})=>{const g=(0,s.of)(c,h,f);return(0,n.jsx)("img",{className:g.image,src:i,alt:o})},c=(i,o=3,h=3)=>({image:(0,a.css)([(0,l.Y)(i,o,f=>({width:i.spacing(f)})),(0,l.Y)(i,h,f=>({height:i.spacing(f)})),{borderRadius:i.shape.radius.circle}])})},71599:(ne,A,e)=>{"use strict";e.d(A,{u:()=>c});var n=e(74848),a=e(22803),s=e(63142),l=e(22787),r=e(70735);const c=({isOpen:o,title:h,body:f,description:g,confirmText:u,confirmVariant:E="destructive",confirmationText:v,dismissText:p="Cancel",dismissVariant:m="secondary",alternativeText:y,modalClass:d,icon:x="exclamation-triangle",onConfirm:b,onDismiss:D,onAlternative:C,confirmButtonVariant:P="destructive",disabled:T})=>{const O=(0,s.of)(i);return(0,n.jsx)(l.a,{className:(0,a.cx)(O.modal,d),title:h,icon:x,isOpen:o,onDismiss:D,children:(0,n.jsx)(r.k,{body:f,description:g,confirmButtonLabel:u,dismissButtonLabel:p,dismissButtonVariant:m,confirmPromptText:v,alternativeButtonLabel:y,confirmButtonVariant:P,onConfirm:b,onDismiss:D,onAlternative:C,disabled:T})})},i=()=>({modal:(0,a.css)({width:"500px"})})},71639:(ne,A,e)=>{"use strict";e.d(A,{D:()=>u,_:()=>g});var n=e(86791),a=e(70327),s=e(55143),l=e(62939),r=e(96137),c=e(84523),i=e(52161);const o=!0,{useLazyGetRuleGroupForNamespaceQuery:h}=a.hK,{useLazyDiscoverDsFeaturesQuery:f}=s.L,g=v=>new Error(`DataSource ${v} does not support ruler API or does not have the ruler API enabled.`);function u(){const[v,p]=h(),[m]=f();return[async(d,x)=>{const{dataSourceName:b,groupName:D,namespaceName:C}=d,P=b==="grafana"?n.l$:(0,i.w5)(b),{rulerConfig:T}=await m({uid:P},o).unwrap();if(!T)throw g(b);const O=await v({rulerConfig:T,namespace:C,group:D,notificationOptions:{showErrorAlert:!1}}).unwrap().catch(l.R),S=O??E(D);return{newRuleGroupDefinition:x.reduce((K,U)=>(O&&r.Qn.match(U)&&(U.payload.interval=O.interval),(0,r.i3)(K,U)),S),rulerConfig:T}},p]}const E=v=>({name:v,interval:c.T6,rules:[]})},71642:(ne,A,e)=>{"use strict";e.d(A,{Xy:()=>a,_p:()=>r,h6:()=>c,s6:()=>l,yO:()=>s});const n=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function a(i){const o={};return i.replace(n,(h,f,g,u)=>(o[f]=u,"")),o}function s(i){return i.reduce((o,h)=>{if(!h)throw new Error("Need parsed labels to find common labels.");return Object.keys(h).forEach(f=>{(o[f]===void 0||o[f]!==h[f])&&delete o[f]}),Object.keys(o).forEach(f=>{h[f]===void 0&&delete o[f]}),o},{...i[0]})}function l(i,o){const h={...i};return Object.keys(o).forEach(f=>{delete h[f]}),h}function r(i,o){if(!i)return!0;for(const[h,f]of Object.entries(i))if(!o||o[h]!==f)return!1;return!0}function c(i,o="",h){if(!i||Object.keys(i).length===0)return o;const g=Object.keys(i).sort().map(u=>`${u}="${i[u]}"`).join(", ");return h?g:["{",g,"}"].join("")}},71673:(ne,A,e)=>{"use strict";e.d(A,{$l:()=>x,Sp:()=>y,VN:()=>d,VP:()=>m,fn:()=>v,sU:()=>D});var n=e(41811),a=e(92745),s=e(68143),l=e(43173),r=e(36490),c=e(45863),i=e(6890),o=e(64762),h=e(52043),f=e(8535),g=e(62635);function u(){return`${window.location.protocol}//${window.location.host}${l.$.appSubUrl}`}function E(C){let P=C.replace(u(),"");return P.startsWith("/")?P.substring(1,P.length):P}const v=(0,n.default)(async function(C){try{return(await(0,s.AI)().post("/api/short-urls",{path:E(C)})).url}catch(P){console.error("Error when creating shortened link: ",P),(0,f.JD)((0,i.dx)((0,o.gi)("Error generating shortened link")))}}),p=C=>new ClipboardItem({"text/plain":v(C)}),m=async C=>{if(typeof ClipboardItem<"u"&&navigator.clipboard.write)navigator.clipboard.write([p(C)]),(0,f.JD)((0,i.dx)((0,o.tZ)("Shortened link copied to clipboard")));else{const P=await v(C);P?((0,g.uJ)(P),(0,f.JD)((0,i.dx)((0,o.tZ)("Shortened link copied to clipboard")))):(0,f.JD)((0,i.dx)((0,o.gi)("Error generating shortened link")))}},y=async(C,P,T)=>{const O=d(C,P,T);if(P.useShortUrl)return await m(O);(0,g.uJ)(O),(0,f.JD)((0,i.dx)((0,o.tZ)((0,a.t)("link.share.copy-to-clipboard","Link copied to clipboard"))))},d=(C,P,T)=>{const O=r.Ny.getLocation(),S=c.jh.getTimeRange(T??C),B=x(P,S,T);return(0,h.u)({uid:C.state.uid,slug:C.state.meta.slug,currentQueryParams:O.search,updateQuery:B,absolute:!P.useShortUrl})},x=(C,P,T)=>{const O={};return T&&(O.viewPanel=T.getPathId()),C.useAbsoluteTimeRange&&(O.from=P.state.value.from.toISOString(),O.to=P.state.value.to.toISOString()),C.theme!=="current"&&(O.theme=C.theme),O};function b(C,P){for(let T=P.indexOf(C)-1;T>=0;T--)if(P[T].timeEpochMs>C.timeEpochMs)return P[T];return null}function D(C,P,T){const O={from:new Date(T.from).toISOString(),to:new Date(T.to).toISOString()};if(!l.$.featureToggles.logsInfiniteScrolling)return O;const S=P.filter(K=>K.dataFrame.refId===C.dataFrame.refId),B=b(C,S);return C.timeEpochMs>T.to&&!B?{from:new Date(T.from).toISOString(),to:new Date(C.timeEpochMs+1).toISOString()}:{from:new Date(T.from).toISOString(),to:new Date(B?B.timeEpochMs:T.to).toISOString()}}},71748:(ne,A,e)=>{"use strict";e.d(A,{b:()=>h});var n=e(16817),a=e(36580),s=e(35143),l=e(28998),r=e(8285);const c=async f=>{let g=new Set;for(const u of f)s.z.has(u)&&await(0,l.tR)().get(u)instanceof a.iy||g.add(u);return Array.from(g)};function i(f){const g=new Set,u=f.state.body.getVizPanels();for(const E of u){const v=o(E);for(const p of v)g.add(p)}return Array.from(g).sort()}function o(f){const g=new Set,u=(0,r.un)(f);if(u)for(const E of u.state.queries)g.add(E.datasource?.type??"");return Array.from(g)}function h(f){const{value:g}=(0,n.A)(async()=>{const u=i(f);return c(u)},[]);return g}},71843:(ne,A,e)=>{"use strict";e.r(A),e.d(A,{plugin:()=>P});var n=e(16207),a=e(92745),s=e(739),l=e(14099),r=e(87252),c=e(59795);const i=T=>(0,c._$)(T),o=(T,O,S)=>{const B=(0,c.gl)(T,O,S);if(O==="singlestat"&&S.angular){const K=S.angular.gauge;K&&(B.showThresholdMarkers=K.thresholdMarkers,B.showThresholdLabels=K.thresholdLabels)}return B};var h=e(74848),f=e(96540),g=e(11576),u=e(44232),E=e(18627),v=e(6399),p=e(33352),m=e(65642),y=e(4598);const d={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:s.T6.Auto};class x extends f.PureComponent{constructor(){super(...arguments),this.renderComponent=(O,S)=>{const{options:B,fieldConfig:K}=this.props,{width:U,height:F,count:I,value:V}=O,{field:M,display:L}=V,{openMenu:N,targetClassName:W}=S;return(0,h.jsx)(E._,{value:(0,y.l)(I,K.defaults,L),width:U,height:F,field:M,text:B.text,showThresholdLabels:B.showThresholdLabels,showThresholdMarkers:B.showThresholdMarkers,theme:m.$W.theme2,onClick:N,className:W,orientation:B.orientation})},this.renderValue=O=>{const{value:S}=O,{getLinks:B,hasLinks:K}=S;return K&&B?(0,h.jsx)(v.e,{links:B,style:{flexGrow:1},children:U=>this.renderComponent(O,U)}):this.renderComponent(O,{})},this.getValues=()=>{const{data:O,options:S,replaceVariables:B,fieldConfig:K,timeZone:U}=this.props;for(let F of O.series)for(let I of F.fields)if(I.config.unit==="percent"||I.config.unit==="percentunit"){const V=I.config.min??0,M=I.config.max??(I.config.unit==="percent"?100:1);I.state=I.state??{},I.state.range={min:V,max:M,delta:M-V},I.display=(0,g.J)({field:I,theme:m.$W.theme2})}return(0,u.PI)({fieldConfig:K,reduceOptions:S.reduceOptions,replaceVariables:B,theme:m.$W.theme2,data:O.series,timeZone:U})},this.calculateGaugeSize=()=>{const{options:O}=this.props,S=O.orientation,B=O.sizing===s.T6.Manual,K=S===s.wV.Vertical,U=S===s.wV.Horizontal,F=B&&K?O.minVizWidth:d.minVizWidth,I=B&&U?O.minVizHeight:d.minVizHeight;return{minVizWidth:F,minVizHeight:I}}}render(){const{height:O,width:S,data:B,renderCounter:K,options:U}=this.props,{minVizHeight:F,minVizWidth:I}=this.calculateGaugeSize();return(0,h.jsx)(p.S,{getValues:this.getValues,renderValue:this.renderValue,width:S,height:O,source:B,autoGrid:!0,renderCounter:K,orientation:U.orientation,minVizHeight:F,minVizWidth:I})}}var b=e(33553),D=e(73495);class C{getSuggestionsForData(O){const{dataSummary:S}=O;if(!S.hasData||!S.hasNumberField||S.numberFieldCount>=50)return;const B=O.getListAppender({name:D.m.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:b.O.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:K=>{K.options.reduceOptions.values&&(K.options.reduceOptions.limit=2)}}});S.hasStringField&&S.frameCount===1&&S.rowCountTotal<10?(B.append({name:D.m.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),B.append({name:D.m.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(B.append({name:D.m.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),B.append({name:D.m.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const P=new n.m(x).useFieldConfig({useCustomConfig:T=>{T.addNumberInput({path:"neutral",name:(0,a.t)("gauge.name-neutral","Neutral"),description:(0,a.t)("gauge.description-neutral","Leave empty to use Min as neutral point"),category:[(0,a.t)("gauge.category-gauge","Gauge")],settings:{placeholder:(0,a.t)("gauge.placeholder-neutral","auto")}})}}).setPanelOptions(T=>{const O=[(0,a.t)("gauge.category-gauge","Gauge")];(0,r.L)(T),(0,r.h)(T,O),T.addBooleanSwitch({path:"showThresholdLabels",name:(0,a.t)("gauge.name-show-threshold-labels","Show threshold labels"),description:(0,a.t)("gauge.description-show-threshold-labels","Render the threshold values around the gauge bar"),category:O,defaultValue:d.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:(0,a.t)("gauge.name-show-threshold-markers","Show threshold markers"),description:(0,a.t)("gauge.description-show-threshold-markers","Renders the thresholds as an outer bar"),category:O,defaultValue:d.showThresholdMarkers}).addRadio({path:"sizing",name:(0,a.t)("gauge.name-gauge-size","Gauge size"),settings:{options:[{value:s.T6.Auto,label:(0,a.t)("gauge.gauge-size-options.label-auto","Auto")},{value:s.T6.Manual,label:(0,a.t)("gauge.gauge-size-options.label-manual","Manual")}]},category:O,defaultValue:d.sizing,showIf:S=>S.orientation!==s.wV.Auto}).addSliderInput({path:"minVizWidth",name:(0,a.t)("gauge.name-min-width","Min width"),description:(0,a.t)("gauge.description-min-width","Minimum column width (vertical orientation)"),defaultValue:d.minVizWidth,settings:{min:0,max:600,step:1},category:O,showIf:S=>S.sizing===s.T6.Manual&&S.orientation===s.wV.Vertical}).addSliderInput({path:"minVizHeight",name:(0,a.t)("gauge.name-min-height","Min height"),description:(0,a.t)("gauge.description-min-height","Minimum row height (horizontal orientation)"),defaultValue:d.minVizHeight,category:O,settings:{min:0,max:600,step:1},showIf:S=>S.sizing===s.T6.Manual&&S.orientation===s.wV.Horizontal}),l.I(T)}).setPanelChangeHandler(o).setSuggestionsSupplier(new C).setMigrationHandler(i)},72054:(ne,A,e)=>{"use strict";e.d(A,{C:()=>a,m:()=>n});var n=(s=>(s.StorageFull="StorageFull",s.DuplicatedEntry="DuplicatedEntry",s))(n||{}),a=(s=>(s.LimitExceeded="LimitExceeded",s))(a||{})},72165:(ne,A,e)=>{"use strict";e.d(A,{G:()=>f});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(63142),c=e(74451),i=e(52193),o=e(54044);const h=({isCurrent:u,plugin:E,onClick:v,disabled:p})=>(0,n.jsx)(o.b,{title:E.name,plugin:E,description:E.info.description,onClick:v,isCurrent:u,disabled:p,showBadge:!0});h.displayName="VizTypePickerPlugin";function f({pluginId:u,searchQuery:E,onChange:v,trackSearch:p}){const m=(0,r.of)(g),y=(0,s.useMemo)(i.A4,[]),d=(0,s.useMemo)(()=>{const x=(0,i.CO)(y,E,u);return p&&p(E,x.length),x},[y,E,u,p]);return d.length===0?(0,n.jsx)(c.Z,{children:(0,n.jsx)(l.x6,{i18nKey:"panel.viz-type-picker.could-anything-matching-query",children:"Could not find anything matching your query"})}):(0,n.jsx)("div",{className:m.grid,children:d.map(x=>(0,n.jsx)(h,{disabled:!1,isCurrent:x.id===u,plugin:x,onClick:b=>v({pluginId:x.id,withModKey:b.metaKey||b.ctrlKey||b.altKey})},x.id))})}const g=u=>({grid:(0,a.css)({maxWidth:"100%",display:"grid",gridGap:u.spacing(.5)}),heading:(0,a.css)({...u.typography.h5,margin:u.spacing(0,.5,1)})})},72265:(ne,A,e)=>{"use strict";e.d(A,{IW:()=>n,aA:()=>s,jH:()=>l,sG:()=>a});var n=(r=>(r[r.CLOSE_PANE=0]="CLOSE_PANE",r[r.CHANGE_DATASOURCE=1]="CHANGE_DATASOURCE",r[r.CLOSE_EDITOR=2]="CLOSE_EDITOR",r))(n||{});const a=["lines","bars","points","stacked_lines","stacked_bars"];var s=(r=>(r.table="table",r.raw="raw",r))(s||{});const l=["table","raw"]},72296:(ne,A,e)=>{"use strict";e.d(A,{A:()=>l,X:()=>r});var n=e(74848),a=e(96540);const s=(0,a.createContext)(void 0);function l({children:c}){const[i,o]=(0,a.useState)(0),[h,f]=(0,a.useState)(),g=(0,a.useMemo)(()=>({sync:u=>f(u),unSync:()=>f(void 0),addPicker:()=>o(u=>u+1),removePicker:()=>{o(u=>{const E=u-1;return E<2&&f(void 0),E})},syncPossible:i>1,synced:!!h,syncedValue:h}),[i,h]);return(0,n.jsx)(s.Provider,{value:g,children:c})}function r(c){const i=(0,a.useContext)(s);return(0,a.useEffect)(()=>i?(i.addPicker(),c&&i.sync(c),()=>{i.removePicker()}):()=>{},[]),(0,a.useMemo)(()=>i&&{sync:i.sync,unSync:i.unSync,syncPossible:i.syncPossible,synced:i.synced,syncedValue:i.syncedValue},[i])}},72331:(ne,A,e)=>{"use strict";e.d(A,{s:()=>n});const n=new Map([])},72489:(ne,A,e)=>{"use strict";e.d(A,{p:()=>r});var n=e(74848),a=e(22803),s=e(55386),l=e(63142);const r=({value:i,variant:o="secondary"})=>{const h=(0,l.of)(c,o);return(0,n.jsx)("span",{className:h.counter,children:(0,s.Hg)(i,0).text})},c=(i,o)=>({counter:(0,a.css)({label:"counter",marginLeft:i.spacing(1),borderRadius:i.spacing(3),backgroundColor:o==="primary"?i.colors.primary.main:i.colors.action.hover,padding:i.spacing(.25,1),color:i.colors.text.secondary,fontWeight:i.typography.fontWeightMedium,fontSize:i.typography.size.sm})})},72598:(ne,A,e)=>{"use strict";e.d(A,{I9:()=>p,N_:()=>E,ZI:()=>f,aG:()=>g,gD:()=>h,qt:()=>v,qy:()=>u,wS:()=>m});var n=e(96540),a=e(16515),s=e(62717),l=e(79319),r=e(79609),c=e(92745),i=e(2863),o=e(99305);const h=(y,d=!1)=>{let x=y.flatMap(b=>b.fields.map(D=>(0,a.Ct)(D,b,y)));if(d){let b=new Map;y.forEach(C=>C.fields.forEach(P=>{let T=b.get(P.name)??0;b.set(P.name,T+1)}));let D=[];b.forEach((C,P)=>{C>1&&D.push(P)}),x=[...new Set(D.concat(x))]}return x};function f(y,d=!1){return(0,n.useMemo)(()=>h(y,d),[y,d])}function g(y){const d=new Set;for(const x of y)for(const b of x.fields)if(b.labels)for(const D of Object.keys(b.labels))d.add(D);return d}const u=()=>({combine:(0,c.t)("transformers.utils.get-categories-labels.combine","Combine"),calculateNewFields:(0,c.t)("transformers.utils.get-categories-labels.calculate-new-fields","Calculate new fields"),createNewVisualization:(0,c.t)("transformers.utils.get-categories-labels.create-new-visualization","Create new visualization"),filter:(0,c.t)("transformers.utils.get-categories-labels.filter","Filter"),performSpatialOperations:(0,c.t)("transformers.utils.get-categories-labels.perform-spatial-operations","Perform spatial operations"),reformat:(0,c.t)("transformers.utils.get-categories-labels.reformat","Reformat"),reorderAndRename:(0,c.t)("transformers.utils.get-categories-labels.reorder-and-rename","Reorder and rename")}),E=y=>{if(typeof y=="number"||!Number.isNaN(Number(y)))return!0;const d=o.SY.test(y);return o.SY.lastIndex=0,!!d};function v(y){const d=[];y&&(d.push({label:(0,c.t)("transformers.get-timezone-options.label.browser","Browser"),value:"browser"}),d.push({label:(0,c.t)("transformers.get-timezone-options.label.utc","UTC"),value:"utc"}));const x=(0,s.P3)();for(const b of x)d.push({label:b,value:b});return d}function p(){return(0,i.w)().getVariables().map(y=>({value:y.name,label:y.label||y.name,origin:r.$0.Template}))}function m(){return[{label:(0,c.t)("transformers.utils.special-value-options.label.null-value","Null"),description:(0,c.t)("transformers.utils.special-value-options.description.null-value","Null value"),value:l.N.Null},{label:(0,c.t)("transformers.utils.special-value-options.label.boolean-true","True"),description:(0,c.t)("transformers.utils.special-value-options.description.boolean-true","Boolean true value"),value:l.N.True},{label:(0,c.t)("transformers.utils.special-value-options.label.boolean-false","False"),description:(0,c.t)("transformers.utils.special-value-options.description.boolean-false","Boolean false value"),value:l.N.False},{label:(0,c.t)("transformers.utils.special-value-options.label.number-value","Zero"),description:(0,c.t)("transformers.utils.special-value-options.description.number-value","Number 0 value"),value:l.N.Zero},{label:(0,c.t)("transformers.utils.special-value-options.label.empty-string","Empty"),description:(0,c.t)("transformers.utils.special-value-options.description.empty-string","Empty String"),value:l.N.Empty}]}},72636:(ne,A,e)=>{"use strict";e.d(A,{J:()=>r,f:()=>c});var n=e(74848),a=e(22803),s=e(63142),l=e(30703);const r=({children:i,description:o,className:h,category:f,...g})=>{const u=(0,s.of)(c),E=f?.map((v,p)=>(0,n.jsxs)("span",{className:u.categories,children:[(0,n.jsx)("span",{children:v}),(0,n.jsx)(l.I,{name:"angle-right",className:u.chevron})]},`${v}/${p}`));return(0,n.jsx)("div",{className:(0,a.cx)(u.label,h),children:(0,n.jsxs)("label",{...g,children:[(0,n.jsxs)("div",{className:u.labelContent,children:[E,i]}),o&&(0,n.jsx)("span",{className:u.description,children:o})]})})},c=i=>({label:(0,a.css)({label:"Label",fontSize:i.typography.size.sm,fontWeight:i.typography.fontWeightMedium,lineHeight:1.25,marginBottom:i.spacing(.5),color:i.colors.text.primary,maxWidth:"480px"}),labelContent:(0,a.css)({display:"flex",alignItems:"center"}),description:(0,a.css)({label:"Label-description",color:i.colors.text.secondary,fontSize:i.typography.size.sm,fontWeight:i.typography.fontWeightRegular,marginTop:i.spacing(.25),display:"block"}),categories:(0,a.css)({label:"Label-categories",display:"inline-flex",alignItems:"center"}),chevron:(0,a.css)({margin:i.spacing(0,.25)})})},72649:(ne,A,e)=>{"use strict";e.d(A,{y:()=>n});var n=(a=>(a.seconds="s",a.minutes="m",a.hours="h",a.days="d",a.weeks="w",a))(n||{})},72748:(ne,A,e)=>{"use strict";e.d(A,{$8:()=>i,X9:()=>r,f1:()=>h,ov:()=>c});var n=e(65307),a=e(2543),s=e.n(a),l=e(86017);const r=(0,n.VP)("muteTiming/add"),c=(0,n.VP)("muteTiming/update"),i=(0,n.VP)("muteTiming/delete"),o={alertmanager_config:{},template_files:{}},h=(0,n.vy)(o,f=>{f.addCase(r,(g,{payload:u})=>{const{interval:E}=u;g.alertmanager_config.time_intervals=(g.alertmanager_config.time_intervals??[]).concat(E)}).addCase(c,(g,{payload:u})=>{const{interval:E,originalName:v}=u,p=E.name!==v,m=g.alertmanager_config.time_intervals??[],y=g.alertmanager_config.mute_time_intervals??[],d=m.findIndex(({name:b})=>b===v);d!==-1&&(m[d]=E);const x=y.findIndex(({name:b})=>b===v);x!==-1&&(y[x]=E),p&&g.alertmanager_config.route&&(g.alertmanager_config.route=(0,l.$m)(E.name,v,g.alertmanager_config.route))}).addCase(i,(g,{payload:u})=>{const{name:E}=u,{alertmanager_config:v}=g,{time_intervals:p=[],mute_time_intervals:m=[]}=v;(0,a.remove)(p,y=>y.name===E),(0,a.remove)(m,y=>y.name===E),v.route=(0,l._n)(E,v.route??{})})})},72930:(ne,A,e)=>{"use strict";e.d(A,{u:()=>n});function n(a,s,l,r={}){return{propertyName:a,label:s,description:l,element:"input",inputType:"",required:!1,secure:!1,placeholder:"",validationRule:"",showWhen:{field:"",is:""},dependsOn:"",...r}}},72973:(ne,A,e)=>{"use strict";e.d(A,{K:()=>le,b:()=>X});var n=e(74848),a=e(22803),s=e(49785),l=e(51898),r=e(92745),c=e(63142),i=e(37386),o=e(63527),h=e(47931),f=e(41654),g=e(21285),u=e(72636),E=e(45861),v=e(8515),p=e(62905),m=e(90593),y=e(23289),d=e(61730),x=e(11257),b=e(52763),D=e(15130),C=e(52908);const P=()=>{const{width:fe}=(0,C.A)();return fe>1024};var T=e(23753),O=e(58662),S=e(35195),B=e(34999);const K=()=>(0,n.jsx)(B.F,{title:(0,r.t)("public-dashboard.modal-alerts.save-dashboard-changes-alert-title","Please save your dashboard changes before updating the public configuration"),severity:"warning",bottomSpacing:0});var U=e(37672),F=e(44173),I=e(24313),V=e(16780),M=e(56265);const L=l.Tp.pages.ShareDashboardModal.PublicDashboard,N=({disabled:fe,onChange:Ce,register:Ae,timeRange:_e})=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(V.n,{disabled:fe,children:(0,n.jsxs)(f.B,{direction:"column",gap:1,children:[(0,n.jsxs)(f.B,{direction:"column",gap:.5,justifyContent:"space-between",children:[(0,n.jsx)(u.J,{description:(0,r.t)("public-dashboard.settings-configuration.default-time-range-label-desc","The public dashboard uses the default time range settings of the dashboard"),children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.settings-configuration.default-time-range-label",children:"Default time range"})}),(0,n.jsx)(M.b,{value:_e,disabled:!0,onChange:()=>{}})]}),(0,n.jsxs)(f.B,{direction:"row",gap:.5,children:[(0,n.jsx)(g.d,{...Ae("isTimeSelectionEnabled"),"data-testid":L.EnableTimeRangeSwitch,onChange:Xe=>{Ce("isTimeSelectionEnabled",Xe.currentTarget.checked),y.c.publicDashboardTimeSelectionChanged({enabled:Xe.currentTarget.checked})}}),(0,n.jsx)(u.J,{description:(0,r.t)("public-dashboard.settings-configuration.time-range-picker-label-desc","Allow viewers to change time range"),children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.settings-configuration.time-range-picker-label",children:"Time range picker enabled"})})]}),(0,n.jsxs)(f.B,{direction:"row",gap:.5,children:[(0,n.jsx)(g.d,{...Ae("isAnnotationsEnabled"),onChange:Xe=>{Ce("isAnnotationsEnabled",Xe.currentTarget.checked),y.c.publicDashboardAnnotationsSelectionChanged({enabled:Xe.currentTarget.checked})},"data-testid":L.EnableAnnotationsSwitch}),(0,n.jsx)(u.J,{description:(0,r.t)("public-dashboard.settings-configuration.show-annotations-label-desc","Show annotations on public dashboard"),children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.settings-configuration.show-annotations-label",children:"Show annotations"})})]})]})})});var W=e(93256),R=e(77824),G=e(68079),w=e(11534);const _=l.Tp.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,Q=({recipients:fe,dashboardUid:Ce,publicDashboardUid:Ae})=>{const _e=(0,c.of)(q),[Xe,{isLoading:De}]=(0,p.$L)(),[Me,{isLoading:Te}]=(0,p.NA)(),$e=De||Te,Re=(Ve,Se)=>{y.c.revokePublicDashboardEmailClicked(),Xe({recipientUid:Ve,recipientEmail:Se,dashboardUid:Ce,uid:Ae})},Ke=Ve=>{y.c.resendPublicDashboardEmailClicked(),Me({recipientUid:Ve,uid:Ae})};return(0,n.jsx)("table",{className:_e.table,"data-testid":_.EmailSharingList,children:(0,n.jsx)("tbody",{children:fe.map((Ve,Se)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:Ve.recipient}),(0,n.jsx)("td",{children:(0,n.jsxs)(W.e,{className:_e.tableButtonsContainer,children:[(0,n.jsx)(E.$n,{type:"button",variant:"destructive",fill:"text",title:(0,r.t)("public-dashboard.email-sharing.revoke-button-title","Revoke"),size:"sm",disabled:$e,onClick:()=>Re(Ve.uid,Ve.recipient),"data-testid":`${_.DeleteEmail}-${Se}`,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.email-sharing.revoke-button",children:"Revoke"})}),(0,n.jsx)(E.$n,{type:"button",variant:"primary",fill:"text",title:(0,r.t)("public-dashboard.email-sharing.resend-button-title","Resend"),size:"sm",disabled:$e,onClick:()=>Ke(Ve.uid),"data-testid":`${_.ReshareLink}-${Se}`,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.email-sharing.resend-button",children:"Resend"})})]})})]},Ve.uid))})})},ae=({dashboard:fe})=>{const{width:Ce}=(0,C.A)(),Ae=(0,c.of)(q),_e=fe instanceof w.H$?fe.state.uid:fe.uid,{data:Xe}=(0,p.Bs)(_e),[De]=(0,p.ft)(),[Me,{isLoading:Te}]=(0,p.NY)(),$e=D.TP.hasPermission(x.w.DashboardsPublicWrite),{register:Re,setValue:Ke,control:Ve,watch:Se,handleSubmit:Ye,formState:{errors:Ue},reset:je}=(0,s.mN)({defaultValues:{shareType:Xe?.share||I.Xo.PUBLIC,email:""},mode:"onSubmit"}),Qe=Je=>{const de={dashboard:fe,payload:{...Xe,share:Je}};De(de)},He=async Je=>{y.c.publicDashboardEmailInviteClicked(),await Me({recipient:Je.email,uid:Xe.uid,dashboardUid:_e}).unwrap(),je({email:"",shareType:I.Xo.EMAIL})};return(0,n.jsx)("form",{onSubmit:Ye(He),children:(0,n.jsxs)(V.n,{disabled:!$e,"data-testid":_.Container,className:Ae.container,children:[(0,n.jsx)(i.D,{label:(0,r.t)("public-dashboard.config.can-view-dashboard-radio-button-label","Can view dashboard"),className:Ae.field,children:(0,n.jsx)(s.xI,{name:"shareType",control:Ve,render:({field:Je})=>{const{ref:de,...ve}=Je,me=[{label:(0,r.t)("public-dashboard.config.public-share-type-option-label","Anyone with a link"),value:I.Xo.PUBLIC},{label:(0,r.t)("public-dashboard.config.email-share-type-option-label","Only specified people"),value:I.Xo.EMAIL}];return(0,n.jsx)(R.z,{...ve,size:Ce<480?"sm":"md",options:me,onChange:xe=>{y.c.publicDashboardShareTypeChange({shareType:xe===I.Xo.EMAIL?"email":"public"}),Ke("shareType",xe),Qe(xe)}})}})}),Se("shareType")===I.Xo.EMAIL&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.D,{label:(0,r.t)("public-dashboard.email-sharing.invite-field-label","Invite"),description:(0,r.t)("public-dashboard.email-sharing.invite-field-desc","Invite people by email"),error:Ue.email?.message,invalid:!!Ue.email?.message||void 0,className:Ae.field,children:(0,n.jsxs)("div",{className:Ae.emailContainer,children:[(0,n.jsx)(o.p,{className:Ae.emailInput,placeholder:"me@example.com",autoCapitalize:"none",...Re("email",{required:(0,r.t)("public-dashboard.email-sharing.input-required-email-text","Email is required"),pattern:{value:I._l,message:(0,r.t)("public-dashboard.email-sharing.input-invalid-email-text","Invalid email")}}),"data-testid":_.EmailSharingInput}),(0,n.jsxs)(E.$n,{type:"submit",variant:"primary",disabled:Te,"data-testid":_.EmailSharingInviteButton,children:[(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.email-sharing.invite-button",children:"Invite"}),Te&&(0,n.jsx)(G.y,{})]})]})}),!!Xe?.recipients?.length&&(0,n.jsx)(Q,{recipients:Xe.recipients,dashboardUid:_e,publicDashboardUid:Xe.uid})]})]})})},q=fe=>({container:(0,a.css)({label:"emailConfigContainer",display:"flex",flexDirection:"column",flexWrap:"wrap",gap:fe.spacing(3)}),field:(0,a.css)({label:"field-noMargin",marginBottom:0}),emailContainer:(0,a.css)({label:"emailContainer",display:"flex",gap:fe.spacing(1)}),emailInput:(0,a.css)({label:"emailInput",flexGrow:1}),table:(0,a.css)({label:"table",display:"flex",maxHeight:"220px",overflowY:"scroll","& tbody":{display:"flex",flexDirection:"column",flexGrow:1},"& tr":{minHeight:"40px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:fe.spacing(.5,1),":nth-child(odd)":{background:fe.colors.background.secondary}}}),tableButtonsContainer:(0,a.css)({display:"flex",justifyContent:"end"})});var k=e(96540),ee=e(44019),j=e(76319);function J({headerElement:fe,isContentVisible:Ce=!1,onRowToggle:Ae,title:_e,...Xe}){const De=(0,c.of)(Z),Me=fe&&ee.renderOrCallToRender(fe,{className:De.summaryWrapper});return(0,n.jsx)("div",{className:De.wrapper,children:(0,n.jsxs)("div",{className:De.header,children:[(0,n.jsx)(j.K,{name:Ce?"angle-down":"angle-right",tooltip:Ce?(0,r.t)("public-dashboard.settings-bar-header.collapse-settings-tooltip","Collapse settings"):(0,r.t)("public-dashboard.settings-bar-header.expand-settings-tooltip","Expand settings"),className:De.collapseIcon,onClick:Ae,"aria-expanded":Ce,...Xe}),_e&&(0,n.jsx)("div",{className:De.titleWrapper,onClick:Ae,children:(0,n.jsx)("span",{className:De.title,children:_e})}),Me]})})}J.displayName="SettingsBarHeader";function Z(fe){return{wrapper:(0,a.css)({label:"header",padding:fe.spacing(.5,.5),borderRadius:fe.shape.radius.default,background:fe.colors.background.secondary,minHeight:fe.spacing(4),"&:focus":{outline:"none"}}),header:(0,a.css)({label:"column",display:"flex",alignItems:"center",whiteSpace:"nowrap"}),collapseIcon:(0,a.css)({marginLeft:fe.spacing(.5),color:fe.colors.text.disabled}),titleWrapper:(0,a.css)({display:"flex",alignItems:"center",cursor:"pointer",overflow:"hidden",marginRight:`${fe.spacing(.5)}`,[fe.breakpoints.down("sm")]:{flex:"1 1"}}),title:(0,a.css)({fontWeight:fe.typography.fontWeightBold,marginLeft:fe.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),summaryWrapper:(0,a.css)({display:"flex",flexWrap:"wrap",[fe.breakpoints.down("sm")]:{flex:"2 2"}})}}function te({children:fe,title:Ce,headerElement:Ae,..._e}){const Xe=(0,c.of)(se),[De,Me]=(0,k.useState)(!1);function Te(){Me($e=>!$e)}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J,{onRowToggle:Te,isContentVisible:De,title:Ce,headerElement:Ae,..._e}),De&&(0,n.jsx)("div",{className:Xe.content,children:fe})]})}te.displayName="SettingsBar";const se=fe=>({content:(0,a.css)({marginTop:fe.spacing(1),marginLeft:fe.spacing(4)})});var ie=e(83692);function ce({className:fe,isDataLoading:Ce=!1,timeRange:Ae,timeSelectionEnabled:_e,annotationsEnabled:Xe}){const De=(0,c.of)(re),Me=(0,r.t)("public-dashboard.settings-summary.time-range-picker-enabled-text","Time range picker = enabled"),Te=(0,r.t)("public-dashboard.settings-summary.time-range-picker-disabled-text","Time range picker = disabled"),$e=(0,r.t)("public-dashboard.settings-summary.annotations-show-text","Annotations = show"),Re=(0,r.t)("public-dashboard.settings-summary.annotations-hide-text","Annotations = hide");return Ce?(0,n.jsx)("div",{className:(0,a.cx)(De.summaryWrapper,fe),children:(0,n.jsx)(G.y,{className:De.summary,inline:!0,size:"sm"})}):(0,n.jsxs)("div",{className:(0,a.cx)(De.summaryWrapper,fe),children:[(0,n.jsxs)("span",{className:De.summary,children:[(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.settings-summary.time-range-text",children:"Time range = "}),(0,n.jsx)(ie.f,{className:De.timeRange,value:Ae})]}),(0,n.jsx)("span",{className:De.summary,children:_e?Me:Te}),(0,n.jsx)("span",{className:De.summary,children:Xe?$e:Re})]})}ce.displayName="SettingsSummary";const re=fe=>({summaryWrapper:(0,a.css)({display:"flex"}),summary:(0,a.css)({label:"collapsedText",marginLeft:`${fe.spacing.gridSize*2}px`,fontSize:fe.typography.bodySmall.fontSize,color:fe.colors.text.secondary}),timeRange:(0,a.css)({display:"inline-block"})}),ue=l.Tp.pages.ShareDashboardModal.PublicDashboard;function X({onRevoke:fe,timeRange:Ce,hasTemplateVariables:Ae=!1,showSaveChangesAlert:_e=!1,unsupportedDatasources:Xe=[],publicDashboard:De,dashboard:Me}){const Te=(0,c.of)(he),$e=P(),[Re,{isLoading:Ke}]=(0,p.T2)(),[Ve,{isLoading:Se}]=(0,p.eq)(),Ye=D.TP.hasPermission(x.w.DashboardsPublicWrite),Ue=!Ye||Ke||Se,{handleSubmit:je,setValue:Qe,register:He}=(0,s.mN)({defaultValues:{isAnnotationsEnabled:De?.annotationsEnabled,isTimeSelectionEnabled:De?.timeSelectionEnabled,isPaused:!De?.isEnabled}}),Je=async Ee=>{const{isAnnotationsEnabled:Pe,isTimeSelectionEnabled:Oe,isPaused:We}=Ee;Re({dashboard:Me,payload:{...De,annotationsEnabled:Pe,timeSelectionEnabled:Oe,isEnabled:!We}})},de=async Ee=>{const{isAnnotationsEnabled:Pe,isTimeSelectionEnabled:Oe,isPaused:We}=Ee;Ve({dashboard:Me,payload:{...De,annotationsEnabled:Pe,timeSelectionEnabled:Oe,isEnabled:!We}})},ve=async(Ee,Pe)=>{Qe(Ee,Pe),await je(Oe=>Je(Oe))()},me=async Ee=>{Qe("isPaused",Ee),await je(Pe=>de(Pe))()};function xe(){y.c.publicDashboardUrlCopied()}return(0,n.jsxs)("div",{className:Te.configContainer,children:[_e&&(0,n.jsx)(K,{}),!Ye&&(0,n.jsx)(S.t,{mode:"edit"}),Ae&&(0,n.jsx)(F.D,{}),Xe.length>0&&(0,n.jsx)(U.s,{unsupportedDataSources:Xe.join(", ")}),(0,I.AY)()&&(0,n.jsx)(ae,{dashboard:Me}),(0,n.jsx)(i.D,{label:(0,r.t)("public-dashboard.config.dashboard-url-field-label","Dashboard URL"),className:Te.fieldSpace,children:(0,n.jsx)(o.p,{value:(0,I.mL)(De.accessToken),readOnly:!0,disabled:!De?.isEnabled,"data-testid":ue.CopyUrlInput,addonAfter:(0,n.jsx)(h.b,{"data-testid":ue.CopyUrlButton,variant:"primary",disabled:!De?.isEnabled,getText:()=>(0,I.mL)(De.accessToken),onClipboardCopy:xe,children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.config.copy-button",children:"Copy"})})})}),(0,n.jsx)(i.D,{className:Te.fieldSpace,children:(0,n.jsxs)(f.B,{children:[(0,n.jsx)(g.d,{...He("isPaused"),disabled:Ue,onChange:Ee=>{y.c.publicDashboardPauseSharingClicked({paused:Ee.currentTarget.checked}),me(Ee.currentTarget.checked)},"data-testid":ue.PauseSwitch}),(0,n.jsx)(u.J,{className:(0,a.css)({marginBottom:0}),children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.config.pause-sharing-dashboard-label",children:"Pause sharing dashboard"})})]})}),(0,n.jsx)(i.D,{className:Te.fieldSpace,children:(0,n.jsx)(te,{title:(0,r.t)("public-dashboard.config.settings-title","Settings"),headerElement:({className:Ee})=>(0,n.jsx)(ce,{className:Ee,isDataLoading:Ke,timeRange:Ce,timeSelectionEnabled:De?.timeSelectionEnabled,annotationsEnabled:De?.annotationsEnabled}),"data-testid":ue.SettingsDropdown,children:(0,n.jsx)(N,{disabled:Ue,onChange:ve,register:He,timeRange:Ce})})}),(0,n.jsx)(f.B,{direction:$e?"row":"column",justifyContent:$e?"flex-end":"flex-start",alignItems:$e?"center":"stretch",children:(0,n.jsx)(f.B,{justifyContent:"flex-end",children:(0,n.jsx)(E.$n,{title:(0,r.t)("public-dashboard.config.revoke-public-URL-button-title","Revoke public URL"),onClick:fe,type:"button",disabled:Ue,"data-testid":ue.DeleteButton,variant:"destructive",fill:"outline",children:(0,n.jsx)(r.x6,{i18nKey:"public-dashboard.config.revoke-public-URL-button",children:"Revoke public URL"})})})})]})}function le({publicDashboard:fe,unsupportedDatasources:Ce}){const _e=(0,b.d4)(Re=>Re.dashboard).getModel(),Xe=(0,m.z)(_e.getDefaultTime(),_e),De=D.TP.hasPermission(x.w.DashboardsPublicWrite),Me=(0,I.kD)(_e.getVariables()),[Te]=(0,p.bN)(),$e=Re=>{Te({dashboard:_e,uid:fe.uid,dashboardUid:_e.uid}),Re()};return(0,n.jsx)(v.$s,{children:({showModal:Re,hideModal:Ke})=>(0,n.jsx)(X,{publicDashboard:fe,dashboard:_e,unsupportedDatasources:Ce,timeRange:Xe,showSaveChangesAlert:De&&_e.hasUnsavedChanges(),hasTemplateVariables:Me,onRevoke:()=>{y.c.revokePublicDashboardClicked(),Re(d.m,{onConfirm:()=>$e(Ke),onDismiss:()=>{Re(T.Zy,{dashboard:_e,onDismiss:Ke,activeTab:O.wr.publicDashboard})}})}})})}const he=fe=>({configContainer:(0,a.css)({label:"config container",display:"flex",flexDirection:"column",flexWrap:"wrap",gap:fe.spacing(3)}),fieldSpace:(0,a.css)({label:"field space",width:"100%",marginBottom:0}),timeRange:(0,a.css)({display:"inline-block"})})},73163:(ne,A,e)=>{"use strict";e.d(A,{AL:()=>b,Bs:()=>E,Xx:()=>d,ko:()=>p});var n=e(63704),a=e(60519),s=e(32899),l=e(85891),r=e(95004),c=e(68143),i=e(43173),o=e(73427),h=e(86967),f=e(92367),g=e(75421),u=e(96215);const E=P=>(i.$.featureToggles.vizActionsAuth??!1)&&P.type===l.X2.Infinity,v=(P,T,O)=>(S,B,K)=>(T.variables&&O&&(S=S.replace(/\$\w+/g,U=>{const F=U.slice(1);return T.variables.some(I=>I.key===F)&&O[F]!=null?O[F]:U})),P(S,B,K)),p=(P,T,O,S,B,K)=>!B||B.length===0?[]:B.filter(F=>F.type===l.X2.Fetch||E(F)).map(F=>{const I=(0,a.vd)(P,T,O),V={...O,__dataContext:I},M=(N,W,R)=>S(N,{...V,...W},R);return K.valueRowIndex!==void 0&&!isNaN(K.valueRowIndex)?I.value.rowIndex=K.valueRowIndex:I.value.calculatedValue=K.calculatedValue,{title:S(F.title,V),confirmation:N=>v(M,F,N)(F.confirmation||`Are you sure you want to ${F.title}?`),onClick:(N,W,R)=>{let G={};E(F)?G=C(F,v(M,F,R)):F.type===l.X2.Fetch&&(G=y(F,v(M,F,R)));try{(0,c.AI)().fetch(G).subscribe({error:w=>{o.lE.emit(s.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(w)},complete:()=>{o.lE.emit(s.r1.alertSuccess,["API call was successful"])}})}catch(w){o.lE.emit(s.r1.alertError,["An error has occurred. Check console output for more details."]),console.error(w);return}},oneClick:F.oneClick??!1,style:{backgroundColor:F.style?.backgroundColor??i.$.theme2.colors.secondary.main},variables:F.variables}}).filter(F=>!!F),m=(P,T)=>{const O=P[P.type];if(!O)throw new Error("Action does not have the correct configuration");const S=new URL(x(T(O.url))),B=O.method===h.DO.GET?void 0:O.body?T(O.body):"{}",K=[],U=[];let F="application/json";return O.headers&&O.headers.forEach(([I,V])=>{const M=T(I),L=T(V);K.push([M,L]),M.toLowerCase()==="content-type"&&(F=L)}),O.queryParams&&O.queryParams.forEach(([I,V])=>{U.push([T(I),T(V)])}),{config:O,url:S,data:B,processedHeaders:K,processedQueryParams:U,contentType:F}},y=(P,T)=>{const{config:O,url:S,data:B,processedHeaders:K,processedQueryParams:U}=m(P,T),F={};return K.forEach(([V,M])=>{F[V]=M}),U.forEach(([V,M])=>{S.searchParams.append(V,M)}),F["X-Grafana-Action"]="1",{url:S.toString(),method:O.method,data:B,headers:F}},d=(P=[],T=[])=>({name:"Default field",type:r.PU.string,config:{links:P,actions:T},values:[]}),x=P=>{if(P.startsWith("/")){const O=n.sQ.sanitizeUrl(P);P=(0,f.z)(O,[])}return P},b="yesoreyeram-infinity-datasource";class D{buildRequest(T,O,S,B,K,U){const F=(0,u.S)(),I=`api/ds/query?ds_type=${b}&requestId=${F}`,V=(0,g.jG)().timeRange(),M=[];B.forEach(([W,R])=>{M.push({key:W,value:R})});const L=[];K.forEach(([W,R])=>{L.push({key:W,value:R})});const N={method:T.method,data:S,headers:M,params:L,body_type:"raw",body_content_type:U};return{url:I,method:h.DO.POST,data:{queries:[{refId:"A",datasource:{type:b,uid:T.datasourceUid},type:"json",source:"url",format:"as-is",url:O,url_options:N}],from:V.from.valueOf().toString(),to:V.to.valueOf().toString()}}}}const C=(P,T)=>{const{config:O,url:S,data:B,processedHeaders:K,processedQueryParams:U,contentType:F}=m(P,T),I=O;if(!I.datasourceUid)throw new Error("Datasource not configured for Infinity action");return new D().buildRequest(I,S,B,K,U,F)}},73304:(ne,A,e)=>{"use strict";e.d(A,{i:()=>W});var n=e(74848),a=e(22803),s=e(18828),l=e(43107),r=e(93225),c=e(96540),i=e(92745),o=e(68143),h=e(63142),f=e(45861),g=e(65642),u=e(4896),E=e(37386),v=e(40279),p=e(30868);function m({secondaryText:G="Drag and drop here or browse"}){const w=(0,h.of)(d);return(0,n.jsxs)("div",{className:w.iconWrapper,children:[(0,n.jsx)("small",{className:w.small,children:G}),(0,n.jsx)(f.$n,{type:"button",icon:"upload",children:(0,n.jsx)(i.x6,{i18nKey:"dimensions.file-dropzone-custom-children.upload",children:"Upload"})})]})}const y=({mediaType:G,setFormData:w,setUpload:_,error:Q})=>{const ae=(0,h.of)(d),[q,k]=(0,c.useState)(!1),[ee,j]=(0,c.useState)(""),J=()=>(0,n.jsx)(E.D,{label:(0,i.t)("dimensions.file-uploader.preview.label-preview","Preview"),children:(0,n.jsxs)("div",{className:ae.iconPreview,children:[G===u.zu.Icon&&(0,n.jsx)(p.y,{src:ee,className:ae.img}),G===u.zu.Image&&(0,n.jsx)("img",{src:ee,alt:"Preview of the uploaded file",className:ae.img})]})}),Z=se=>{fetch(`/api/storage/delete/upload/${se.file.name}`,{method:"DELETE"}).catch(ie=>console.error("cannot delete file",ie))},te=G==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return(0,n.jsx)(v.gH,{readAs:"readAsBinaryString",onFileRemove:Z,options:{accept:te,multiple:!1,onDrop:se=>{let ie=new FormData;ie.append("file",se[0]),j(URL.createObjectURL(se[0])),k(!0),w(ie),_(!0)}},children:Q.message!==""&&q?(0,n.jsx)("p",{children:Q.message}):q?(0,n.jsx)(J,{}):(0,n.jsx)(m,{})})};function d(G,w){return{container:(0,a.css)({display:"flex",flexDirection:"column",width:"100%"}),dropzone:(0,a.css)({display:"flex",flex:1,flexDirection:"column",alignItems:"center",padding:G.spacing(6),borderRadius:G.shape.radius.default,border:`2px dashed ${G.colors.border.medium}`,backgroundColor:w?G.colors.background.secondary:G.colors.background.primary,cursor:"pointer"}),iconWrapper:(0,a.css)({display:"flex",flexDirection:"column",alignItems:"center"}),acceptMargin:(0,a.css)({margin:G.spacing(2,0,1)}),small:(0,a.css)({color:G.colors.text.secondary,marginBottom:G.spacing(2)}),iconContainer:(0,a.css)({display:"flex",flexDirection:"column",width:"80%",alignItems:"center",alignSelf:"center"}),iconPreview:(0,a.css)({width:"238px",height:"198px",border:`1px solid ${G.colors.border.medium}`,display:"flex",alignItems:"center",justifyContent:"center"}),img:(0,a.css)({width:"147px",height:"147px",fill:G.colors.text.primary})}}var x=e(18857),b=e(12737),D=e(28998),C=e(70713),P=e(91793);const T=(0,c.memo)(function(w){const{columnIndex:_,rowIndex:Q,style:ae,data:q}=w,{cards:k,columnCount:ee,onChange:j,selected:J}=q,Z=_+Q*ee,te=k[Z],se=(0,h.of)(S);return(0,n.jsx)("div",{style:ae,children:te&&(0,n.jsxs)("div",{className:J===te.value?(0,a.cx)(se.card,se.selected):se.card,onClick:()=>j(te.value),onKeyDown:ie=>{ie.key==="Enter"&&j(te.value)},role:"button",tabIndex:0,children:[te.imgUrl.endsWith(".svg")?(0,n.jsx)(p.y,{src:te.imgUrl,className:se.img}):(0,n.jsx)("img",{src:te.imgUrl,alt:"",className:se.img}),(0,n.jsx)("h6",{className:se.text,children:te.label.slice(0,-4)})]},te.value)})},P.t7),O=G=>{const{onChange:w,cards:_,value:Q}=G,ae=(0,h.of)(S);return(0,n.jsx)(C.Ay,{defaultWidth:680,children:({width:q,height:k})=>{const J=Math.floor(q/90),Z=Math.ceil(_.length/J);return(0,n.jsx)(P.yi,{width:q,height:k,columnCount:J,columnWidth:90,rowCount:Z,rowHeight:90,itemData:{cards:_,columnCount:J,onChange:w,selected:Q},className:ae.grid,children:T})}})},S=G=>({card:(0,a.css)({display:"inline-block",width:"90px",height:"90px",margin:"0.75rem",marginLeft:"15px",textAlign:"center",cursor:"pointer",position:"relative",backgroundColor:"transparent",border:"1px solid transparent",borderRadius:G.shape.radius.default,paddingTop:"6px",":hover":{borderColor:G.colors.action.hover,boxShadow:G.shadows.z2}}),selected:(0,a.css)({border:`2px solid ${G.colors.primary.main}`,":hover":{borderColor:G.colors.primary.main}}),img:(0,a.css)({width:"40px",height:"40px",objectFit:"cover",verticalAlign:"middle",fill:G.colors.text.primary}),text:(0,a.css)({color:G.colors.text.primary,whiteSpace:"nowrap",fontSize:"12px",textOverflow:"ellipsis",display:"block",overflow:"hidden"}),grid:(0,a.css)({border:`1px solid ${G.colors.border.medium}`})}),B=G=>G===u.zu.Icon?[u.Iu.Icon,u.Iu.IOT,u.Iu.Marker]:[u.Iu.BG],K=(G,w)=>G.find(_=>w.startsWith(_.value))??G[0],U=G=>{const{value:w,mediaType:_,folderName:Q,newValue:ae,setNewValue:q,maxFiles:k}=G,ee=(0,h.of)(F),j=B(_).map(le=>({label:le,value:le})),[J,Z]=(0,c.useState)(),[te,se]=(0,c.useState)(K(j,w?.length?w:Q)),[ie,ce]=(0,c.useState)([]),[re,ue]=(0,c.useState)([]),X=le=>{le?(le=le.toLowerCase(),ue(ie.filter(he=>he.search.includes(le)))):ue(ie)};return(0,c.useEffect)(()=>{const le=te?.value;if(le){const he=_===u.zu.Icon?fe=>fe.name.endsWith(".svg"):fe=>fe.name.endsWith(".png")||fe.name.endsWith(".gif");(0,D.tR)().get("-- Grafana --").then(fe=>{fe.listFiles(le,k).subscribe({next:Ce=>{const Ae=[];Ce.forEach(_e=>{if(he(_e)){const Xe=_e.name.lastIndexOf(".");Ae.push({value:`${le}/${_e.name}`,label:_e.name,search:(Xe?_e.name.substring(0,Xe):_e.name).toLowerCase(),imgUrl:`${window.__grafana_public_path__}build/${le}/${_e.name}`})}}),ce(Ae),ue(Ae)}})})}},[_,te,k]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.D,{children:(0,n.jsx)(x.l6,{options:j,onChange:se,value:te,menuShouldPortal:!1})}),(0,n.jsx)(E.D,{children:(0,n.jsx)(b.Z,{value:J??"",placeholder:(0,i.t)("dimensions.folder-picker-tab.placeholder-search","Search"),onChange:le=>{X(le),Z(le)}})}),re&&(0,n.jsx)("div",{className:ee.cardsWrapper,children:(0,n.jsx)(O,{cards:re,onChange:le=>q(le),value:ae})})]})},F=G=>({cardsWrapper:(0,a.css)({height:"30vh",minHeight:"50px",marginTop:"5px",maxWidth:"680px"})});var I=e(63527),V=e(72636),M=e(20012);const L=G=>{const{newValue:w,setNewValue:_,mediaType:Q}=G,ae=(0,h.of)(N),q=(0,M.D)(w);let k=w?.substring(w.lastIndexOf("/")+1,w.lastIndexOf("."));return k.length>20&&(k=k.substring(0,20)+"..."),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.D,{children:(0,n.jsx)(I.p,{onChange:ee=>_(ee.currentTarget.value),value:w})}),(0,n.jsxs)("div",{className:ae.iconContainer,children:[(0,n.jsx)(E.D,{label:(0,i.t)("dimensions.urlpicker-tab.label-preview","Preview"),children:(0,n.jsxs)("div",{className:ae.iconPreview,children:[Q===u.zu.Icon&&(0,n.jsx)(p.y,{src:q,className:ae.img}),Q===u.zu.Image&&w&&(0,n.jsx)("img",{src:q,alt:"Preview of the selected URL",className:ae.img})]})}),(0,n.jsx)(V.J,{children:k})]})]})},N=G=>({iconContainer:(0,a.css)({display:"flex",flexDirection:"column",width:"80%",alignItems:"center",alignSelf:"center"}),iconPreview:(0,a.css)({width:"238px",height:"198px",border:`1px solid ${G.colors.border.medium}`,display:"flex",alignItems:"center",justifyContent:"center"}),img:(0,a.css)({width:"147px",height:"147px",fill:G.colors.text.primary})}),W=G=>{const{value:w,onChange:_,mediaType:Q,folderName:ae,maxFiles:q,hidePopper:k}=G,ee=(0,h.of)(R),j=()=>{_(w),k?.()},J=(0,c.useRef)(null),{dialogProps:Z}=(0,s.s)({},J),{overlayProps:te}=(0,r.e)({onClose:j,isDismissable:!0,isOpen:!0},J),se=w&&w.includes("://"),[ie,ce]=(0,c.useState)(w??""),[re,ue]=(0,c.useState)(se?u.QC.URL:u.QC.Folder),[X,le]=(0,c.useState)(new FormData),[he,fe]=(0,c.useState)(!1),[Ce,Ae]=(0,c.useState)({message:""}),_e=$e=>`${ee.resourcePickerPopoverTab} ${re===$e&&ee.resourcePickerPopoverActiveTab}`,Xe=()=>(0,n.jsx)(U,{value:w,mediaType:Q,folderName:ae,newValue:ie,setNewValue:ce,maxFiles:q}),De=()=>(0,n.jsx)(L,{newValue:ie,setNewValue:ce,mediaType:Q}),Me=()=>(0,n.jsx)(y,{mediaType:Q,setFormData:le,setUpload:fe,newValue:ie,error:Ce}),Te=()=>{switch(re){case u.QC.Folder:return Xe();case u.QC.URL:return De();case u.QC.Upload:return Me();default:return Xe()}};return(0,n.jsx)(l.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("section",{ref:J,...te,...Z,children:(0,n.jsxs)("div",{className:ee.resourcePickerPopover,children:[(0,n.jsxs)("div",{className:ee.resourcePickerPopoverTabs,children:[(0,n.jsx)("button",{className:_e(u.QC.Folder),onClick:()=>ue(u.QC.Folder),children:(0,n.jsx)(i.x6,{i18nKey:"dimensions.resource-picker-popover.folder",children:"Folder"})}),(0,n.jsx)("button",{className:_e(u.QC.URL),onClick:()=>ue(u.QC.URL),children:(0,n.jsx)(i.x6,{i18nKey:"dimensions.resource-picker-popover.url",children:"URL"})})]}),(0,n.jsxs)("div",{className:ee.resourcePickerPopoverContent,children:[Te(),(0,n.jsxs)("div",{className:ee.buttonRow,children:[(0,n.jsx)(f.$n,{variant:"secondary",onClick:()=>j(),fill:"outline",children:(0,n.jsx)(i.x6,{i18nKey:"dimensions.resource-picker-popover.cancel",children:"Cancel"})}),(0,n.jsx)(f.$n,{variant:ie&&ie!==w?"primary":"secondary",onClick:()=>{he?fetch("/api/storage/upload",{method:"POST",body:X}).then($e=>{if($e.status>=400){$e.json().then(Re=>Ae(Re));return}else return $e.json()}).then($e=>{(0,o.AI)().get(`api/storage/read/${$e.path}`).then(()=>ce(`${g.$W.appUrl}api/storage/read/${$e.path}`)).then(()=>_(`${g.$W.appUrl}api/storage/read/${$e.path}`)).then(()=>k?.())}).catch($e=>console.error($e)):(_(ie),k?.())},children:(0,n.jsx)(i.x6,{i18nKey:"dimensions.resource-picker-popover.select",children:"Select"})})]})]})]})})})},R=G=>({resourcePickerPopover:(0,a.css)({borderRadius:G.shape.radius.default,boxShadow:G.shadows.z3,background:G.colors.background.primary,border:`1px solid ${G.colors.border.weak}`}),resourcePickerPopoverTab:(0,a.css)({width:"50%",textAlign:"center",padding:G.spacing(1,0),background:G.colors.background.secondary,color:G.colors.text.secondary,fontSize:G.typography.bodySmall.fontSize,cursor:"pointer",border:"none","&:focus:not(:focus-visible)":{outline:"none",boxShadow:"none"},":focus-visible":{position:"relative"}}),resourcePickerPopoverActiveTab:(0,a.css)({color:G.colors.text.primary,fontWeight:G.typography.fontWeightMedium,background:G.colors.background.primary}),resourcePickerPopoverContent:(0,a.css)({width:"315px",fontSize:G.typography.bodySmall.fontSize,minHeight:"184px",padding:G.spacing(1),display:"flex",flexDirection:"column"}),resourcePickerPopoverTabs:(0,a.css)({display:"flex",width:"100%",borderRadius:`${G.shape.radius.default} ${G.shape.radius.default} 0 0`}),buttonRow:(0,a.css)({display:"flex",justifyContent:"center",gap:G.spacing(2),padding:G.spacing(1)})})},73467:(ne,A,e)=>{"use strict";var n=e(48307),a=e(9423),s=e(7452),l=e(5086),r=e(78624),c=e(4213),i=e(34796),o=e(96540),h=e.t(o,2),f=e(5338),g=e(25229),u=e(60188),E=e(53543),v=e(8642),p=e(54734),m=e(92138),y=e(57002),d=e(92745),x=e(68143),b=e(47700),D=e(48072),C=e(36490),P=e(25076),T=e(43122),O=e(6201),S=e(75234),B=e(83734),K=e(39698),U=e(78282),F=e(46907),I=e(33005),V=e(33604),M=e(33707),L=e(41071),N=e(45012),W=e(92293),R=e(78646),G=e(60311),w=e(88806),_=e(14477),Q=e(58873),ae=e(2874),q=e(45863),k=e(65642),ee=e(43173),j=e(74848),J=e(2543),Z=e(95004),te=e(36638),se=e(57866),ie=e(16515),ce=e(64761),re=e(52645),ue=e(68779),X=e(18027),le=e(77824),he=e(31286),fe=e(45861),Ce=e(84510);function Ae(z){if(z in Ce.uk){const{name:H,getHelperDocs:Y,links:oe}=Ce.uk[z],pe=Y(Ce.g_.UIImage),ge=_e(pe);if(oe?.length){const ye=oe.map(Ie=>`
  Or visit <a href="${Ie.url}" target="_blank">${Ie.title}</a>

  `).join("");return{name:H,helperDocs:`
        ${ge}
        ${(0,Ce.$n)()}
  ${ye}
        `}}return{name:H,helperDocs:`
      ${ge}
      ${(0,Ce.$n)()}
      `}}return{name:"No documentation found",helperDocs:(0,Ce.$n)()}}const _e=z=>z.replace(/\[(.*?)\]\(#.*?\)/g,"$1").replace(/\[[^\]]*\]\[\]/g,"");var Xe=e(28134),De=e(71896),Me=e(97095),Te=e(18857),$e=e(42954),Re=e(17200),Ke=e(72598);function Ve(z){return function({options:Y,onChange:oe}){const{validator:pe}=z,{value:ge}=Y,[ye,Ie]=(0,o.useState)(!pe(ge)),we=(0,o.useCallback)(ke=>{Ie(!pe(ke)),oe({...Y,value:ke})},[Ie,pe,oe,Y]);return(0,j.jsx)(Re.y,{invalid:ye,value:ge,error:"Value needs to be a number or a variable",onChange:we,placeholder:(0,d.t)("transformers.basic-matcher-editor.placeholder-value-or-variable","Value or variable"),suggestions:(0,Ke.I9)()})}}const Se=()=>[{name:"Is greater",id:se.Js.greater,component:Ve({validator:Ke.N_})},{name:"Is greater or equal",id:se.Js.greaterOrEqual,component:Ve({validator:Ke.N_})},{name:"Is lower",id:se.Js.lower,component:Ve({validator:Ke.N_})},{name:"Is lower or equal",id:se.Js.lowerOrEqual,component:Ve({validator:Ke.N_})},{name:"Is equal",id:se.Js.equal,component:Ve({validator:()=>!0})},{name:"Is not equal",id:se.Js.notEqual,component:Ve({validator:()=>!0})},{name:"Is Substring",id:se.Js.substring,component:Ve({validator:()=>!0})},{name:"Is not substring",id:se.Js.notSubstring,component:Ve({validator:()=>!0})}],Ye=z=>null,Ue=()=>[{name:"Is null",id:se.Js.isNull,component:Ye},{name:"Is not null",id:se.Js.isNotNull,component:Ye}];var je=e(79233);function Qe(z){return function({options:Y,onChange:oe}){const{validator:pe}=z,[ge,ye]=(0,o.useState)({from:!pe(Y.from),to:!pe(Y.to)}),Ie=(0,o.useCallback)((ke,et)=>{const tt=!pe(ke);ye({...ge,[et]:tt}),!tt&&oe({...Y,[et]:ke})},[Y,oe,ge,ye,pe]),we=(0,Ke.I9)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Re.y,{value:String(Y.from),invalid:ge.from,error:"Value needs to be a number or a variable",placeholder:(0,d.t)("transformers.range-matcher-editor.placeholder-from","From"),onChange:ke=>Ie(ke,"from"),suggestions:we}),(0,j.jsx)(je.c,{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.range-matcher-editor.and",children:"and"})}),(0,j.jsx)(Re.y,{invalid:ge.to,error:"Value needs to be a number or a variable",value:String(Y.to),placeholder:(0,d.t)("transformers.range-matcher-editor.placeholder-to","To"),suggestions:we,onChange:ke=>Ie(ke,"to")})]})}}const He=()=>[{name:"Is between",id:se.Js.between,component:Qe({validator:Ke.N_})}];function Je(z){return function({options:Y,onChange:oe}){const{validator:pe}=z,{value:ge}=Y,[ye,Ie]=(0,o.useState)(!pe(ge)),we=(0,Ke.I9)().reduce((et,tt)=>(et.push(tt),et.push({...tt,documentation:(0,d.t)("transformers.regex-matcher-editor.variable-regex-documentation","Formats multi-value variable into a regex string"),label:tt.label.concat(":regex"),value:tt.value.concat(":regex")}),et),[]),ke=(0,o.useCallback)(et=>{Ie(!pe(et)),oe({...Y,value:et})},[Ie,pe,oe,Y]);return(0,j.jsx)(Re.y,{invalid:ye,value:ge,onChange:ke,placeholder:(0,d.t)("transformers.regex-matcher-editor.placeholder-value-or-variable","Value or variable"),suggestions:we})}}const de=()=>[{name:"Regex",id:se.Js.regex,component:Je({validator:()=>!0})}],ve=new $e.O(()=>[...Se(),...Ue(),...He(),...de()]),me=z=>{const{onDelete:H,onChange:Y,filter:oe,fieldsInfo:pe}=z,{fieldsAsOptions:ge,fieldByDisplayName:ye}=pe,Ie=Pe(oe,ge)??"",we=ye[Ie],ke=we?xe(we):[],et=Ee(oe,ke),tt=ve.getIfExists(et),dt=(0,o.useCallback)(vt=>{vt?.value&&Y({...oe,fieldName:vt.value})},[Y,oe]),ft=(0,o.useCallback)(vt=>{if(!vt?.value)return;const Lt=vt.value,Xt=te.hI.get(Lt).getDefaultOptions(we);Y({...oe,config:{id:Lt,options:Xt}})},[Y,oe,we]),it=(0,o.useCallback)(vt=>{Y({...oe,config:{...oe.config,options:vt}})},[Y,oe]);return!we||!tt||!tt.component?null:(0,j.jsxs)(Me.C,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.filter-by-value-filter-editor.label-field","Field"),labelWidth:14,children:(0,j.jsx)(Te.l6,{className:"min-width-15 max-width-24",placeholder:(0,d.t)("transformers.filter-by-value-filter-editor.placeholder-field-name","Field name"),options:ge,value:oe.fieldName,onChange:dt})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.filter-by-value-filter-editor.label-match","Match"),children:(0,j.jsx)(Te.l6,{className:"width-12",placeholder:(0,d.t)("transformers.filter-by-value-filter-editor.placeholder-select-test","Select test"),options:ke,value:et,onChange:ft})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.filter-by-value-filter-editor.label-value","Value"),grow:!0,children:(0,j.jsx)(tt.component,{field:we,options:oe.config.options??{},onChange:it})}),(0,j.jsx)(he.a,{marginBottom:.5,children:(0,j.jsx)(fe.$n,{"aria-label":(0,d.t)("transformers.filter-by-value-filter-editor.aria-label-remove-filter","Remove filter"),icon:"times",onClick:H,variant:"secondary"})})]})},xe=z=>{const H=[];for(const Y of te.hI.list())!Y.isApplicable(z)||!ve.getIfExists(Y.id)||H.push({value:Y.id,label:Y.name,description:Y.description});return H},Ee=(z,H)=>{const Y=H.find(oe=>oe.value===z.config.id);if(Y&&Y.value)return Y.value;if(H[0]?.value)return H[0]?.value},Pe=(z,H)=>{const Y=H.find(oe=>oe.value===z.fieldName);if(Y&&Y.value)return Y.value;if(H[0]?.value)return H[0]?.value},Oe=z=>{const{input:H,options:Y,onChange:oe}=z,pe=Fe(H),ge=[{label:(0,d.t)("transformers.filter-by-value-transformer-editor.filter-types.label.include","Include"),value:ue.j4.include},{label:(0,d.t)("transformers.filter-by-value-transformer-editor.filter-types.label.exclude","Exclude"),value:ue.j4.exclude}],ye=[{label:(0,d.t)("transformers.filter-by-value-transformer-editor.filter-match.label.match-all","Match all"),value:ue.Sm.all},{label:(0,d.t)("transformers.filter-by-value-transformer-editor.filter-match.label.match-any","Match any"),value:ue.Sm.any}],Ie=(0,o.useCallback)(()=>{const dt=H[0],ft=dt.fields.find(Lt=>Lt.type!==Z.PU.time);if(!ft)return;const it=(0,J.cloneDeep)(Y.filters),vt=te.hI.get(se.Js.isNull);it.push({fieldName:(0,ie.Ct)(ft,dt,H),config:{id:vt.id,options:vt.getDefaultOptions(ft)}}),oe({...Y,filters:it})},[oe,Y,H]),we=(0,o.useCallback)(dt=>{let ft=(0,J.cloneDeep)(Y.filters);ft.splice(dt,1),oe({...Y,filters:ft})},[Y,oe]),ke=(0,o.useCallback)((dt,ft)=>{let it=(0,J.cloneDeep)(Y.filters);it[ft]=dt,oe({...Y,filters:it})},[Y,oe]),et=(0,o.useCallback)(dt=>{oe({...Y,type:dt??ue.j4.include})},[Y,oe]),tt=(0,o.useCallback)(dt=>{oe({...Y,match:dt??ue.Sm.all})},[Y,oe]);return(0,j.jsxs)("div",{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.filter-by-value-transformer-editor.label-filter-type","Filter type"),labelWidth:16,children:(0,j.jsx)("div",{className:"width-15",children:(0,j.jsx)(le.z,{options:ge,value:Y.type,onChange:et,fullWidth:!0})})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.filter-by-value-transformer-editor.label-conditions","Conditions"),labelWidth:16,children:(0,j.jsx)("div",{className:"width-15",children:(0,j.jsx)(le.z,{options:ye,value:Y.match,onChange:tt,fullWidth:!0})})}),(0,j.jsxs)(he.a,{paddingLeft:2,children:[Y.filters.map((dt,ft)=>(0,j.jsx)(me,{filter:dt,fieldsInfo:pe,onChange:it=>ke(it,ft),onDelete:()=>we(ft)},ft)),(0,j.jsx)(fe.$n,{icon:"plus",size:"sm",onClick:Ie,variant:"secondary",children:(0,j.jsx)(d.x6,{i18nKey:"transformers.filter-by-value-transformer-editor.add-condition",children:"Add condition"})})]})]})},We=()=>({id:ce.F.filterByValue,editor:Oe,transformation:re.c.filterByValueTransformer,name:(0,d.t)("transformers.filter-by-value-transformer-editor.name.filter-data-by-values","Filter data by values"),description:(0,d.t)("transformers.filter-by-value-transformer-editor.description.remove-rows-query-results-user-defined-filters","Remove rows from the query results using user-defined filters."),categories:new Set([v.m.Filter]),help:Ae(ce.F.filterByValue).helperDocs,imageDark:Xe,imageLight:De}),Fe=z=>(0,o.useMemo)(()=>{const H={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(z)?z.reduce((Y,oe)=>oe.fields.reduce((pe,ge)=>{const ye=(0,ie.Ct)(ge,oe,z);return pe.fieldByDisplayName[ye]||(pe.fieldsAsOptions.push({label:ye,value:ye,type:ge.type}),pe.fieldByDisplayName[ye]=ge),pe},Y),H):H},[z]);var Be=e(11594),Le=e(26250),Ge=e(58508),Ze=e(52205),qe=e(25797),at=e(56424),ht=e(61215);function Et(z,H){const Y={data:z.input,options:z.options},oe=new qe.C({id:"root",title:(0,d.t)("transformers.get-transformer-option-pane.root.title.root","root")}),pe=ye=>{if(ye?.length){const Ie=ye[0];let we=oe.categories.find(ke=>ke.props.id===Ie);return we||(we=new qe.C({id:Ie,title:Ie}),oe.categories.push(we)),we}return oe},ge={getValue:ye=>(0,J.get)(z.options,ye),onChange:(ye,Ie)=>{z.onChange((0,ht.Sf)(z.options,ye,Ie))}};return(0,at.g5)("spatial-transformer",H,ge,pe,Y),oe}function mt(z){const H={data:[],options:{}},Y={},oe=new Ze.pv;z(oe,H);for(const pe of oe.getItems())pe.defaultValue!=null&&(0,J.set)(Y,pe.path,pe.defaultValue);return Y}var Pt=e(13572),rt=e(48264);const Kt=(z,H)=>{const Y=H.options??{};(0,Pt.J)("",z,Y)},Gt=z=>{(0,o.useEffect)(()=>{if(!z.options.xBuckets?.mode){const Y=mt(Kt);z.onChange({...Y,...z.options})}});const H=Et(z,Kt);return(0,j.jsx)("div",{children:(0,j.jsx)("div",{children:H.items.map(Y=>Y.render())})})},en=()=>{const z=(0,rt.m4)();return{id:z.id,editor:Gt,transformation:z,name:z.name,description:z.description,state:Be.pn.alpha,categories:new Set([v.m.CreateNewVisualization]),help:Ae(z.id).helperDocs,imageDark:Le,imageLight:Ge}};var st=e(22803),$t=e(63142),xn=e(63152),pn=e(46644),_n=e(34107),kn=e(64394),Jn=e(13227),pt=e(33553),Rt=e(18600);function Mt(z,H,Y){const oe={},pe={};for(const ge of z.fields){const ye=(0,ie.Ct)(ge,z),Ie=Y.index[ye],we=Ie.handler;if(!we)continue;const ke=ge.values[H];if(ke==null)continue;const et=we.processor(ke,oe,pe,Ie.handlerArguments);et!=null&&(oe[we.targetProperty??we.key]=et)}return pe.mappingValues&&(oe.mappings=Yt(pe)),oe}var Bt=(z=>(z.Name="field.name",z.Value="field.value",z.Label="field.label",z.Ignore="__ignore",z))(Bt||{});const Nt=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:vn},{key:"min",processor:vn},{key:"unit",processor:z=>z.toString()},{key:"decimals",processor:vn},{key:"displayName",name:"Display name",processor:z=>z.toString()},{key:"color",processor:z=>({fixedColor:z,mode:kn.Y.Fixed})},{key:"threshold1",name:"Threshold",targetProperty:"thresholds",processor:(z,H,Y,oe)=>{const pe=(0,Jn.t)(z);if(!isNaN(pe))return H.thresholds||(H.thresholds={mode:pt.O.Absolute,steps:[]}),H.thresholds.steps.push({value:pe,color:oe.threshold?.color??"red"}),H.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:pn.gy.allValues,processor:(z,H,Y)=>{if((0,J.isArray)(z))return Y.mappingValues=z,H.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:pn.gy.allValues,processor:(z,H,Y)=>{if((0,J.isArray)(z))return Y.mappingColors=z,H.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:pn.gy.allValues,processor:(z,H,Y)=>{if((0,J.isArray)(z))return Y.mappingTexts=z,H.mappings}}];function Yt(z){const H={type:Rt.d.ValueToText,options:{}};if(!z.mappingValues)return[];for(let Y=0;Y<z.mappingValues.length;Y++){const oe=z.mappingValues[Y];oe!=null&&(H.options[oe.toString()]={color:z.mappingColors&&z.mappingColors[Y],text:z.mappingTexts&&z.mappingTexts[Y],index:Y})}return[H]}let Qt=null;function En(){if(Qt===null){Qt={};for(const z of Nt)Qt[z.key]=z}return Qt}function vn(z){const H=(0,Jn.t)(z);if(!isNaN(H))return H}function Sn(z,H){for(const Y of H)if(z===Y.fieldName)return Y.handlerKey;return z.toLowerCase()}function mn(z){return z?En()[z]:null}function wn(z,H,Y){const oe={index:{}};let pe=H.find(ye=>ye.handlerKey==="field.name"),ge=H.find(ye=>ye.handlerKey==="field.value");for(const ye of z.fields){const Ie=(0,ie.Ct)(ye,z),we=H.find(tt=>tt.fieldName===Ie),ke=we?we.handlerKey:Ie.toLowerCase();let et=mn(ke);Y&&(et?(et.key==="field.name"&&(oe.nameField=ye),et.key==="field.value"&&(oe.valueField=ye)):we||(!oe.nameField&&!pe&&ye.type===Z.PU.string&&(oe.nameField=ye,et=mn("field.name")),!oe.valueField&&!ge&&ye.type===Z.PU.number&&(oe.valueField=ye,et=mn("field.value")))),!et&&Y&&(et=mn("field.label")),oe.index[Ie]={automatic:!we,handler:et,handlerArguments:we?.handlerArguments??{},reducerId:we?.reducerId??et?.defaultReducer??pn.gy.lastNotNull}}return oe}var Ln=e(63527),Zn=e(35427);function da(z){switch(z){case"threshold1":return!0;default:return!1}}function Pa({handlerArguments:z,handlerKey:H,onChange:Y}){const oe=pe=>{Y(pe?{...z,threshold:{...z.threshold,color:pe}}:{...z,threshold:void 0})};return(0,j.jsx)(j.Fragment,{children:H==="threshold1"&&(0,j.jsx)(Ln.p,{type:"text",value:"Threshold color","aria-label":(0,d.t)("transformers.field-config-mapping-handler-arguments-editor.aria-label-threshold-color","Threshold color"),disabled:!0,width:20,prefix:(0,j.jsx)(Zn.sk,{color:z.threshold?.color??"red",onChange:oe,enableNamedColors:!0})})})}function Xn({frame:z,mappings:H,onChange:Y,withReducers:oe,withNameAndValue:pe}){const ge=(0,$t.of)(oa),ye=Oa(z,H,pe),Ie=Nt.map(dt=>ba(dt,!1)),we=H.reduce((dt,ft)=>dt||da(ft.handlerKey),!1),ke=(dt,ft)=>{const it=H.findIndex(vt=>vt.fieldName===dt.fieldName);if(ft)if(it!==-1){const vt=[...H];vt.splice(it,1,{...H[it],handlerKey:ft.value}),Y(vt)}else Y([...H,{fieldName:dt.fieldName,handlerKey:ft.value}]);else Y(it!==-1?H.filter((vt,Lt)=>Lt!==it):[...H,{fieldName:dt.fieldName,handlerKey:"__ignore"}])},et=(dt,ft)=>{const it=H.findIndex(vt=>vt.fieldName===dt.fieldName);if(it!==-1){const vt=[...H];vt.splice(it,1,{...H[it],reducerId:ft}),Y(vt)}else Y([...H,{fieldName:dt.fieldName,handlerKey:dt.handlerKey,reducerId:ft}])},tt=(dt,ft)=>{const it=H.findIndex(vt=>vt.fieldName===dt.fieldName);if(it!==-1){const vt=[...H];vt.splice(it,1,{...H[it],handlerArguments:ft}),Y(vt)}else Y([...H,{fieldName:dt.fieldName,handlerKey:dt.handlerKey,handlerArguments:ft}])};return(0,j.jsxs)("table",{className:ge.table,children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.field-to-config-mapping-editor.field",children:"Field"})}),(0,j.jsx)("th",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.field-to-config-mapping-editor.use-as",children:"Use as"})}),oe&&(0,j.jsx)("th",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.field-to-config-mapping-editor.select",children:"Select"})}),we&&(0,j.jsx)("th",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.field-to-config-mapping-editor.additional-settings",children:"Additional settings"})})]})}),(0,j.jsx)("tbody",{children:ye.map(dt=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:ge.labelCell,children:dt.fieldName}),(0,j.jsx)("td",{className:ge.selectCell,"data-testid":`${dt.fieldName}-config-key`,children:(0,j.jsx)(Te.l6,{options:Ie,value:dt.configOption,placeholder:dt.placeholder,isClearable:!0,onChange:ft=>ke(dt,ft)})}),oe&&(0,j.jsx)("td",{"data-testid":`${dt.fieldName}-reducer`,className:ge.selectCell,children:(0,j.jsx)(_n.S,{stats:[dt.reducerId],defaultStat:dt.reducerId,onChange:ft=>et(dt,ft[0])})}),we&&(0,j.jsx)("td",{"data-testid":`${dt.fieldName}-handler-arg`,className:ge.selectCell,children:(0,j.jsx)(Pa,{handlerKey:dt.handlerKey,handlerArguments:dt.handlerArguments,onChange:ft=>tt(dt,ft)})})]},dt.fieldName))})]})}function Oa(z,H,Y){const oe=[],pe=wn(z,H??[],Y);for(const ge of z.fields){const ye=(0,ie.Ct)(ge,z),Ie=pe.index[ye],we=ba(Ie.handler,Ie.automatic);oe.push({fieldName:ye,configOption:Ie.automatic?null:we,placeholder:Ie.automatic?we?.label:"Choose",handlerKey:Ie.handler?.key??null,reducerId:Ie.reducerId,handlerArguments:Ie.handlerArguments})}for(const ge of H)if(!oe.find(ye=>ye.fieldName===ge.fieldName)){const ye=mn(ge.handlerKey);oe.push({fieldName:ge.fieldName,handlerKey:ge.handlerKey,configOption:ba(ye,!1),missingInFrame:!0,reducerId:ge.reducerId??pn.gy.lastNotNull,handlerArguments:{}})}return Object.values(oe)}function ba(z,H){if(!z)return null;let Y=z.name??(0,J.capitalize)(z.key);return H&&(Y=`${Y} (auto)`),{label:Y,value:z.key}}const oa=z=>({table:(0,st.css)({marginTop:z.spacing(1),"td, th":{borderRight:`4px solid ${z.colors.background.primary}`,borderBottom:`4px solid ${z.colors.background.primary}`,whiteSpace:"nowrap"},th:{fontSize:z.typography.bodySmall.fontSize,lineHeight:z.spacing(4),padding:z.spacing(0,1)}}),labelCell:(0,st.css)({fontSize:z.typography.bodySmall.fontSize,background:z.colors.background.secondary,padding:z.spacing(0,1),maxWidth:"400px",overflow:"hidden",textOverflow:"ellipsis",minWidth:"140px"}),selectCell:(0,st.css)({padding:0,minWidth:"161px"})});var Na=e(4688),ya=e(10662),Dt=e(81160);function wt(z,H){let Y=null;for(const Ie of H)if(Ie.refId===z.configRefId){Y=Ie;break}if(!Y)return H;const oe={fields:[],length:1},pe=wn(Y,z.mappings??[],!1);for(const Ie of Y.fields){const we={...Ie},ke=(0,ie.Ct)(Ie,Y),et=pe.index[ke],tt=(0,pn.Nw)({field:Ie,reducers:[et.reducerId]});we.values=[tt[et.reducerId]],oe.fields.push(we)}const ge=[],ye=(0,te.NS)(z.applyTo||{id:se.Ct.numeric});for(const Ie of H){if(Ie===Y&&H.length>1)continue;const we={fields:[],length:Ie.length,refId:Ie.refId};for(const ke of Ie.fields)if(ye(ke,Ie,H)){const et=Mt(oe,0,pe);we.fields.push({...ke,config:{...ke.config,...et}})}else we.fields.push(ke);ge.push(we)}return ge}const Zt=()=>({id:ce.F.configFromData,name:(0,d.t)("transformers.get-config-from-data-transformer.name.config-from-query-results","Config from query results"),description:(0,d.t)("transformers.get-config-from-data-transformer.description.set-unit-min-max-and-more","Set unit, min, max and more."),defaultOptions:{configRefId:"config",mappings:[]},operator:z=>H=>H.pipe((0,Dt.T)(Y=>wt(z,Y)))});function cn({input:z,onChange:H,options:Y}){const oe=(0,$t.of)(ut),pe=z.map(ft=>ft.refId).filter(ft=>ft!=null).map(ft=>({label:ft,value:ft})),ge=Y.configRefId||"config",ye=Y.applyTo??{id:se.Ct.byType,options:"number"},Ie=xn.g.get(ye.id),we=z.find(ft=>ft.refId===ge),ke=ft=>{H({...Y,configRefId:ft.value||"config"})},et=ft=>{H({...Y,applyTo:{id:ft.value}})},tt=ft=>{H({...Y,applyTo:{id:ye.id,options:ft}})},dt=xn.g.list().filter(ft=>!ft.excludeFromPicker).map(ft=>({label:ft.name,value:ft.id,description:ft.description}));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.config-from-query-transformer-editor.label-config-query","Config query"),labelWidth:20,children:(0,j.jsx)(Te.l6,{onChange:ke,options:pe,value:ge,width:30})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.config-from-query-transformer-editor.label-apply-to","Apply to"),labelWidth:20,children:(0,j.jsx)(Te.l6,{onChange:et,options:dt,value:ye.id,width:30})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.config-from-query-transformer-editor.label-apply-to-options","Apply to options"),labelWidth:20,className:oe.matcherOptions,children:(0,j.jsx)(Ie.component,{matcher:Ie.matcher,data:z,options:ye.options,onChange:tt})})}),(0,j.jsx)(Me.C,{children:we&&(0,j.jsx)(Xn,{frame:we,mappings:Y.mappings,onChange:ft=>H({...Y,mappings:ft}),withReducers:!0})})]})}const nn=()=>{const z=Zt();return{id:z.id,editor:cn,transformation:z,name:z.name,description:z.description,state:Be.pn.beta,categories:new Set([v.m.CalculateNewFields]),help:Ae(z.id).helperDocs,imageDark:Na,imageLight:ya}},ut=z=>({matcherOptions:(0,st.css)({minWidth:"404px"})});var Ut=e(62467),Ot=e(84691),ct=e(2863),gt=e(21285),Ct=e(31438),Wt=e(72040),Ft=e(12823),Vt=e(97958);const Ht=17,dn=z=>{const{options:H,onChange:Y}=z,oe=(0,Ot.pR)(z.options.binary?.left??"",z.names),pe=(0,Ot.pR)(z.options.binary?.right??"",z.names);(oe!==z.options.binary?.left||pe!==z.options.binary?.right)&&Y({...H,mode:Ot.UY.BinaryOperation,binary:{operator:H.binary?.operator,left:oe,right:pe}});const{binary:ge}=H;let ye=!ge?.left,Ie=!ge?.right;const we=!ge?.left?.matcher,ke=!ge?.right?.matcher,et=ge?.left?.matcher?.options,tt=ge?.right?.matcher?.options,dt=ge?.left?.matcher?.id===se.Ct.byName,ft=ge?.right?.matcher?.id===se.Ct.byName,it=z.names.map(Gn=>(dt&&Gn===et&&(ye=!0),ft&&Gn===tt&&(Ie=!0),{label:Gn,value:JSON.stringify({matcher:{id:se.Ct.byName,options:Gn}})})),vt=ye?[...it]:dt?[...it,{label:et,value:JSON.stringify(ge.left),icon:""}]:[...it],Lt=Ie?[...it]:ft?[...it,{label:tt,value:JSON.stringify(ge.right),icon:""}]:[...it];vt.push({label:`All ${Z.PU.number} fields`,value:JSON.stringify({matcher:{id:se.Ct.byType,options:Z.PU.number}}),icon:(0,Vt.lV)(Z.PU.number)}),we&&ge?.left?.fixed&&vt.push({label:ge.left.fixed,value:JSON.stringify(ge.left)??"",icon:""}),ke&&ge?.right?.fixed&&Lt.push({label:ge.right.fixed,value:JSON.stringify(ge.right)??"",icon:""});const Xt=Ft.b.list().map(Gn=>({label:Gn.binaryOperationID,value:Gn.binaryOperationID})),fn=Gn=>{Y({...H,mode:Ot.UY.BinaryOperation,binary:Gn})},jn=Gn=>{const Da=JSON.parse(Gn.value??"");Da.matcher?fn({...ge,left:Da}):fn({...ge,left:{fixed:Da.fixed??Gn.value?.toString()}})},un=Gn=>{const Da=JSON.parse(Gn.value??"");Da.matcher?fn({...ge,right:Da}):fn({...ge,right:{fixed:Da.fixed??Gn.value?.toString()}})},Tn=Gn=>{fn({...ge,operator:Gn.value})};return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(Me.C,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.binary-operation-options-editor.label-operation","Operation"),labelWidth:Ht,children:(0,j.jsx)(Te.l6,{allowCustomValue:!0,placeholder:(0,d.t)("transformers.binary-operation-options-editor.placeholder-fields-or-number","Field(s) or number"),options:vt,className:"min-width-18",value:JSON.stringify(ge?.left),onChange:jn})}),(0,j.jsx)(X.I,{children:(0,j.jsx)(Te.l6,{className:"width-4",options:Xt,value:ge?.operator??Xt[0].value,onChange:Tn})}),(0,j.jsx)(X.I,{children:(0,j.jsx)(Te.l6,{allowCustomValue:!0,placeholder:(0,d.t)("transformers.binary-operation-options-editor.placeholder-field-or-number","Field or number"),className:"min-width-10",options:Lt,value:JSON.stringify(ge?.right),onChange:un})})]})})},sn=z=>{const{names:H,onChange:Y,options:oe}=z,{cumulative:pe}=oe,ge=H.map(ke=>({label:ke,value:ke})),ye=ke=>{const et=ke.length?ke[0]:pn.gy.sum;Ie({...pe,reducer:et})},Ie=ke=>{Y({...oe,mode:Ot.UY.CumulativeFunctions,cumulative:ke})},we=ke=>{Ie({...pe,field:ke.value})};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.cumulative-options-editor.label-field","Field"),labelWidth:Ht,children:(0,j.jsx)(Te.l6,{placeholder:(0,d.t)("transformers.cumulative-options-editor.placeholder-field","Field"),options:ge,className:"min-width-18",value:pe?.field,onChange:we})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.cumulative-options-editor.label-calculation","Calculation"),labelWidth:Ht,children:(0,j.jsx)(_n.S,{allowMultiple:!1,className:"width-18",stats:[pe?.reducer||pn.gy.sum],onChange:ye,defaultStat:pn.gy.sum,filterOptions:ke=>ke.id===pn.gy.sum||ke.id===pn.gy.mean})})]})},Rn=z=>{const{options:H,onChange:Y}=z,{index:oe}=H,pe=ge=>{Y({...H,index:{asPercentile:ge.currentTarget.checked}})};return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(X.I,{labelWidth:Ht,label:(0,d.t)("transformers.index-options-editor.label-as-percentile","As percentile"),tooltip:(0,d.t)("transformers.index-options-editor.tooltip-transform-index-percentile","Transform the row index as a percentile."),children:(0,j.jsx)(gt.K,{value:!!oe?.asPercentile,onChange:pe})})})};var rn=e(41654),Yn=e(34343);const ea=z=>{const{names:H,selected:Y,onChange:oe,options:pe}=z,{reduce:ge}=pe,ye=et=>{oe({...pe,reduce:et})},Ie=et=>{Y.indexOf(et)>-1?we(Y.filter(tt=>tt!==et)):we([...Y,et])},we=et=>{ye({...ge,include:et})},ke=et=>{const tt=et.length?et[0]:pn.gy.sum,{reduce:dt}=pe;ye({...dt,reducer:tt})};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.reduce-row-options-editor.label-operation","Operation"),labelWidth:Ht,shrink:!0,children:(0,j.jsx)(rn.B,{gap:.5,direction:"row",alignItems:"flex-start",wrap:!0,children:H.map((et,tt)=>(0,j.jsx)(Yn.m,{onClick:()=>{Ie(et)},label:et,selected:Y.indexOf(et)>-1},`${et}/${tt}`))})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.reduce-row-options-editor.label-calculation","Calculation"),labelWidth:Ht,children:(0,j.jsx)(_n.S,{allowMultiple:!1,className:"width-18",stats:[ge?.reducer||pn.gy.sum],onChange:ke,defaultStat:pn.gy.sum})})]})};var An=e(48233);const Fa=z=>{const{options:H,onChange:Y}=z,{unary:oe}=H,pe=tt=>{Y({...H,mode:Ot.UY.UnaryOperation,unary:tt})},ge=tt=>{pe({...oe,operator:tt.value})},ye=tt=>{pe({...oe,fieldName:tt.value})};let Ie=!oe?.fieldName;const we=z.names.map(tt=>(tt===oe?.fieldName&&(Ie=!0),{label:tt,value:tt})),ke=An.j.list().map(tt=>({label:tt.unaryOperationID,value:tt.unaryOperationID})),et=Ie?we:[...we,{label:oe?.fieldName,value:oe?.fieldName}];return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(Me.C,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.unary-operation-editor.label-operation","Operation"),labelWidth:Ht,children:(0,j.jsx)(Te.l6,{options:ke,value:oe?.operator??ke[0].value,onChange:ge})}),(0,j.jsx)(X.I,{label:"(",labelWidth:2,children:(0,j.jsx)(Te.l6,{placeholder:(0,d.t)("transformers.unary-operation-editor.placeholder-field","Field"),className:"min-width-11",options:et,value:oe?.fieldName,onChange:ye})}),(0,j.jsx)(je.c,{width:2,children:")"})]})})};var jt=e(19753);const tn=z=>{const{options:H,names:Y,onChange:oe}=z,{window:pe}=H,ge=Y.map(it=>({label:it,value:it})),ye=[{label:(0,d.t)("transformers.window-options-editor.type-options.label.trailing","Trailing"),value:Ot.ip.Trailing},{label:(0,d.t)("transformers.window-options-editor.type-options.label.centered","Centered"),value:Ot.ip.Centered}],Ie=[{label:(0,d.t)("transformers.window-options-editor.window-size-mode-options.label.percentage","Percentage"),value:Ot.Bp.Percentage},{label:(0,d.t)("transformers.window-options-editor.window-size-mode-options.label.fixed","Fixed"),value:Ot.Bp.Fixed}],we=it=>{oe({...H,mode:Ot.UY.WindowFunctions,window:it})},ke=it=>{we({...pe,field:it.value})},et=it=>{we({...pe,windowSize:it&&pe?.windowSizeMode===Ot.Bp.Percentage?it/100:it})},tt=it=>{we({...pe,windowSize:pe?.windowSize?it===Ot.Bp.Percentage?pe.windowSize/100:pe.windowSize*100:void 0,windowSizeMode:it})},dt=it=>{const vt=it.length?it[0]:pn.gy.sum;we({...pe,reducer:vt})},ft=it=>{we({...pe,windowAlignment:it})};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.window-options-editor.label-field","Field"),labelWidth:Ht,children:(0,j.jsx)(Te.l6,{placeholder:(0,d.t)("transformers.window-options-editor.placeholder-field","Field"),options:ge,className:"min-width-18",value:pe?.field,onChange:ke})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.window-options-editor.label-calculation","Calculation"),labelWidth:Ht,children:(0,j.jsx)(_n.S,{allowMultiple:!1,className:"width-18",stats:[pe?.reducer||pn.gy.mean],onChange:dt,defaultStat:pn.gy.mean,filterOptions:it=>it.id===pn.gy.mean||it.id===pn.gy.variance||it.id===pn.gy.stdDev})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.window-options-editor.label-type","Type"),labelWidth:Ht,children:(0,j.jsx)(le.z,{value:pe?.windowAlignment??Ot.ip.Trailing,options:ye,onChange:ft})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.window-options-editor.label-window-size-mode","Window size mode"),labelWidth:Ht,children:(0,j.jsx)(le.z,{value:pe?.windowSizeMode??Ot.Bp.Percentage,options:Ie,onChange:tt})}),(0,j.jsx)(X.I,{label:pe?.windowSizeMode===Ot.Bp.Percentage?(0,d.t)("transformers.window-options-editor.label-window-size-percent","Window size %"):(0,d.t)("transformers.window-options-editor.label-window-size","Window size"),labelWidth:Ht,tooltip:pe?.windowSizeMode===Ot.Bp.Percentage?(0,d.t)("transformers.window-options-editor.tooltip-window-size-percent","Set the window size as a percentage of the total data"):(0,d.t)("transformers.window-options-editor.tooltip-window-size","Window size"),children:(0,j.jsx)(jt.Q,{placeholder:(0,d.t)("transformers.window-options-editor.placeholder-auto","Auto"),min:.1,value:pe?.windowSize&&pe.windowSizeMode===Ot.Bp.Percentage?pe.windowSize*100:pe?.windowSize,onChange:et})})]})},an=new Set([Z.PU.time,Z.PU.number,Z.PU.string,Z.PU.boolean]),Pn=z=>{const{options:H,onChange:Y,input:oe}=z,pe=H?.reduce?.include,[ge,ye]=(0,o.useState)({names:[],selected:[]}),Ie=[{value:Ot.UY.BinaryOperation,label:(0,d.t)("transformers.calculate-field-transformer-editor.calculation-modes.label.binary-operation","Binary operation")},{value:Ot.UY.UnaryOperation,label:(0,d.t)("transformers.calculate-field-transformer-editor.calculation-modes.label.unary-operation","Unary operation")},{value:Ot.UY.ReduceRow,label:(0,d.t)("transformers.calculate-field-transformer-editor.calculation-modes.label.reduce-row","Reduce row")},{value:Ot.UY.Index,label:(0,d.t)("transformers.calculate-field-transformer-editor.calculation-modes.label.row-index","Row index")}];ee.$.featureToggles.addFieldFromCalculationStatFunctions&&Ie.push({value:Ot.UY.CumulativeFunctions,label:(0,d.t)("transformers.calculate-field-transformer-editor.label.cumulative-functions","Cumulative functions")},{value:Ot.UY.WindowFunctions,label:(0,d.t)("transformers.calculate-field-transformer-editor.label.window-functions","Window functions")}),(0,o.useEffect)(()=>{const Lt={interpolate:fn=>fn},Xt=(0,Ut.of)(oe).pipe(re.c.ensureColumnsTransformer.operator(null,Lt),ke(),we(),et(pe||[])).subscribe(({selected:fn,names:jn})=>{ye({names:jn,selected:fn})});return()=>{Xt.unsubscribe()}},[oe,pe]);const we=()=>{const Lt=(0,ct.w)();return Xt=>Xt.pipe((0,Dt.T)(fn=>(fn.push(...Lt.getVariables().map(jn=>"$"+jn.name)),fn)))},ke=()=>Lt=>Lt.pipe((0,Dt.T)(Xt=>{const fn=[],jn={};for(const un of Xt)for(const Tn of un.fields){if(!an.has(Tn.type))continue;const Gn=(0,ie.Ct)(Tn,un,Xt);jn[Gn]||(jn[Gn]=!0,fn.push(Gn))}return fn})),et=Lt=>Xt=>Xt.pipe((0,Dt.T)(fn=>{if(!Lt.length)return{names:fn,selected:[]};const jn=[],un=[];for(const Tn of fn)Lt.includes(Tn)&&un.push(Tn),jn.push(Tn);return{names:jn,selected:un}})),tt=Lt=>{Y({...H,replaceFields:Lt.currentTarget.checked})},dt=Lt=>{const Xt=Lt.value??Ot.UY.BinaryOperation;Xt===Ot.UY.WindowFunctions&&(H.window=H.window??Ot.Uj),Y({...H,mode:Xt})},ft=Lt=>{Y({...H,alias:Lt.target.value})},it=H.mode??Ot.UY.BinaryOperation,vt=it===Ot.UY.BinaryOperation&&H.binary?.left.matcher?.id===se.Ct.byType;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X.I,{labelWidth:Ht,label:(0,d.t)("transformers.calculate-field-transformer-editor.label-mode","Mode"),children:(0,j.jsx)(Te.l6,{className:"width-18",options:Ie,value:Ie.find(Lt=>Lt.value===it),onChange:dt})}),it===Ot.UY.BinaryOperation&&(0,j.jsx)(dn,{options:H,names:ge.names,onChange:z.onChange}),it===Ot.UY.UnaryOperation&&(0,j.jsx)(Fa,{names:ge.names,options:H,onChange:z.onChange}),it===Ot.UY.ReduceRow&&(0,j.jsx)(ea,{names:ge.names,selected:ge.selected,options:H,onChange:z.onChange}),it===Ot.UY.CumulativeFunctions&&(0,j.jsx)(sn,{names:ge.names,options:H,onChange:z.onChange}),it===Ot.UY.WindowFunctions&&(0,j.jsx)(tn,{names:ge.names,options:H,onChange:z.onChange}),it===Ot.UY.Index&&(0,j.jsx)(Rn,{options:H,onChange:z.onChange}),(0,j.jsx)(X.I,{labelWidth:Ht,label:(0,d.t)("transformers.calculate-field-transformer-editor.label-alias","Alias"),disabled:vt,children:(0,j.jsx)(Ln.p,{className:"width-18",value:H.alias??"",placeholder:(0,Ot.sw)(H),onChange:ft})}),(0,j.jsx)(X.I,{labelWidth:Ht,label:(0,d.t)("transformers.calculate-field-transformer-editor.label-replace-all-fields","Replace all fields"),children:(0,j.jsx)(gt.K,{value:!!H.replaceFields,onChange:tt})})]})},Mn=()=>({id:ce.F.calculateField,editor:Pn,transformation:re.c.calculateFieldTransformer,name:(0,d.t)("transformers.get-calculate-field-transform-registry-item.name.add-field-from-calculation","Add field from calculation"),description:(0,d.t)("transformers.get-calculate-field-transform-registry-item.description.values-calculate-field","Use the row values to calculate a new field."),categories:new Set([v.m.CalculateNewFields]),help:Ae(ce.F.calculateField).helperDocs,imageDark:Ct,imageLight:Wt});var Un=e(9287),aa=e(20165),ia=e(16027);class ta extends o.PureComponent{constructor(H){super(H),this.onModeChanged=Y=>{const{options:oe,onChange:pe}=this.props,ge=Y.value??Un.x1.FieldName;pe({...oe,frameNameMode:ge})},this.onLabelChanged=Y=>{const{options:oe}=this.props;this.props.onChange({...oe,frameNameLabel:Y.target.value})}}render(){const{options:H}=this.props,Y=[{value:Un.x1.FieldName,label:(0,d.t)("transformers.concatenate-transformer-editor.name-modes.label.copy-frame-name-to-field","Copy frame name to field name")},{value:Un.x1.Label,label:(0,d.t)("transformers.concatenate-transformer-editor.name-modes.label.label-frame","Add a label with the frame name")},{value:Un.x1.Drop,label:(0,d.t)("transformers.concatenate-transformer-editor.name-modes.label.ignore-the-frame-name","Ignore the frame name")}],oe=H.frameNameMode??Un.x1.FieldName;return(0,j.jsxs)("div",{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.concatenate-transformer-editor.label-name","Name"),labelWidth:16,grow:!0,children:(0,j.jsx)(Te.l6,{width:36,options:Y,value:Y.find(pe=>pe.value===oe),onChange:this.onModeChanged})}),oe===Un.x1.Label&&(0,j.jsx)(X.I,{label:(0,d.t)("transformers.concatenate-transformer-editor.label-label","Label"),labelWidth:16,grow:!0,children:(0,j.jsx)(Ln.p,{width:36,value:H.frameNameLabel??"",placeholder:(0,d.t)("transformers.concatenate-transformer-editor.placeholder-frame","Frame"),onChange:this.onLabelChanged})})]})}}const na=()=>({id:ce.F.concatenate,editor:ta,transformation:re.c.concatenateTransformer,name:(0,d.t)("transformers.editors.concatenate-transformer-editor.name.concatenate-fields","Concatenate fields"),description:(0,d.t)("transformers.editors.concatenate-transformer-editor.description.combine-all-fields","Combine all fields into a single frame."),categories:new Set([v.m.Combine]),help:Ae(ce.F.concatenate).helperDocs,tags:new Set([(0,d.t)("transformers.editors.concatenate-transformer-editor.tags.combine","Combine")]),imageDark:aa,imageLight:ia});var fa=e(62717),ca=e(62693),xa=e(48457),ns=e(59427),ps=e(23525),Ya=e(85827),Ka=e(21835),Sa=e(30703),Es=e(12594),as=e(76319);const Ns=({transformIndex:z,value:H,index:Y,mappedIndex:oe,onChangeEnumValue:pe,onRemoveEnumRow:ge,checkIsEnumUniqueValue:ye})=>{const Ie=(0,$t.of)($s),[we,ke]=(0,o.useState)(H),[et,tt]=(0,o.useState)(we===""),[dt,ft]=(0,o.useState)(null),it=(0,o.useRef)(null);(0,o.useEffect)(()=>{it.current&&it.current.focus()},[it]);const vt=un=>{un.currentTarget.value!==""&&ye(un.currentTarget.value)&&un.currentTarget.value!==H?ft("Enum value already exists"):ft(null),ke(un.currentTarget.value)},Lt=()=>{if(tt(!1),ft(null),we===""||dt!==null){ge(oe);return}pe(oe,we)},Xt=un=>{un.key==="Enter"&&(un.preventDefault(),Lt())},fn=()=>{tt(!0)},jn=()=>{ge(oe)};return(0,j.jsx)(Ka.sx,{draggableId:`${z}/${H}`,index:Y,children:un=>(0,j.jsxs)("tr",{ref:un.innerRef,...un.draggableProps,children:[(0,j.jsx)("td",{children:(0,j.jsx)("div",{className:Ie.dragHandle,...un.dragHandleProps,children:(0,j.jsx)(Sa.I,{name:"draggabledots",size:"lg"})})}),et?(0,j.jsxs)("td",{children:[(0,j.jsx)(Ln.p,{ref:it,type:"text",value:we,onChange:vt,onBlur:Lt,onKeyDown:Xt}),dt&&(0,j.jsx)(Es.P,{children:dt})]}):(0,j.jsx)("td",{onClick:fn,className:Ie.clickableTableCell,children:H&&H!==""?H:(0,d.t)("transformers.enum-mapping-row.click-to-edit","Click to edit")}),(0,j.jsx)("td",{className:Ie.textAlignCenter,children:(0,j.jsx)(rn.B,{gap:1,children:(0,j.jsx)(as.K,{name:"trash-alt",onClick:jn,"data-testid":"remove-enum-row","aria-label":(0,d.t)("transformers.enum-mapping-row.remove-enum-row-aria-label-delete-enum-row","Delete enum row"),tooltip:(0,d.t)("transformers.enum-mapping-row.remove-enum-row-tooltip-delete","Delete")})})})]},Y)},`${z}/${H}`)},$s=z=>({dragHandle:(0,st.css)({cursor:"grab"}),textAlignCenter:(0,st.css)({textAlign:"center"}),clickableTableCell:(0,st.css)({cursor:"pointer",width:"100px","&:hover":{color:z.colors.text.maxContrast}})}),ri=Ns,vo=({input:z,options:H,transformIndex:Y,onChange:oe})=>{const pe=(0,$t.of)(Fr),[ge,ye]=(0,o.useState)(H.conversions[Y].enumConfig?.text??[]);(0,o.useEffect)(()=>{!H.conversions[Y].enumConfig?.text?.length&&z.length&&Ie()},[z]),(0,o.useEffect)(()=>{(()=>{const vt=ge.map(fn=>fn),Lt=H.conversions,Xt={text:vt};Lt[Y]={...Lt[Y],enumConfig:Xt},oe({...H,conversions:Lt})})()},[Y,ge]);const Ie=()=>{const it=z.flatMap(Lt=>Lt?.fields??[]).find(Lt=>Lt.name===H.conversions[Y].targetField);if(!it)return;const vt=new Set(it?.values);ge.length>0&&!(0,J.isEqual)(ge,Array.from(vt))&&!window.confirm("This action will overwrite the existing configuration. Are you sure you want to continue?")||ye([...vt])},we=(it,vt)=>{const Lt=[...ge];Lt.splice(it,1,vt),ye(Lt)},ke=it=>{const vt=[...ge];vt.splice(it,1),ye(vt)},et=()=>{ye(["",...ge])},tt=(it,vt)=>{ge.includes(vt)||we(it,vt)},dt=it=>ge.includes(it),ft=it=>{if(!it.destination)return;const vt=ge.length-it.source.index-1,Lt=ge.length-it.destination.index-1,Xt=[...ge],fn=Xt[vt];Xt.splice(vt,1),Xt.splice(Lt,0,fn),ye(Xt)};return(0,j.jsxs)(rn.B,{direction:"column",rowGap:.5,children:[(0,j.jsxs)(rn.B,{children:[(0,j.jsx)(fe.$n,{size:"sm",icon:"plus",onClick:()=>Ie(),className:pe.button,children:(0,j.jsx)(d.x6,{i18nKey:"transformers.enum-mapping-editor.generate-enum-values-from-data",children:"Generate enum values from data"})}),(0,j.jsx)(fe.$n,{size:"sm",icon:"plus",onClick:()=>et(),className:pe.button,children:(0,j.jsx)(d.x6,{i18nKey:"transformers.enum-mapping-editor.add-enum-value",children:"Add enum value"})})]}),(0,j.jsx)(rn.B,{children:(0,j.jsx)("table",{className:pe.compactTable,children:(0,j.jsx)(Ka.JY,{onDragEnd:ft,children:(0,j.jsx)(Ka.gL,{droppableId:"sortable-enum-config-mappings",direction:"vertical",children:it=>(0,j.jsxs)("tbody",{ref:it.innerRef,...it.droppableProps,children:[[...ge].reverse().map((vt,Lt)=>{const Xt=ge.length-Lt-1;return(0,j.jsx)(ri,{transformIndex:Y,value:vt,index:Lt,mappedIndex:Xt,onChangeEnumValue:tt,onRemoveEnumRow:ke,checkIsEnumUniqueValue:dt},`${Y}/${vt}`)}),it.placeholder]})})})})})]})},Fr=z=>({compactTable:(0,st.css)({"tbody td":{padding:z.spacing(.5)},marginTop:z.spacing(1),marginBottom:z.spacing(2)}),button:(0,st.css)({marginTop:z.spacing(1)})}),yo={settings:{width:24,isClearable:!1}},xo=({input:z,options:H,onChange:Y})=>{const oe=(0,ca.zA)().filter(ft=>ft.value!==Z.PU.trace),pe=(0,Ke.qt)(!0),ge=(0,fa.P3)();pe.push({label:(0,d.t)("transformers.convert-field-type-transformer-editor.label.browser","Browser"),value:"browser"}),pe.push({label:(0,d.t)("transformers.convert-field-type-transformer-editor.label.utc","UTC"),value:"utc"});for(const ft of ge)pe.push({label:ft,value:ft});const ye=(0,o.useCallback)(ft=>it=>{const vt=[...H.conversions];vt[ft]={...vt[ft],targetField:it??"",dateFormat:void 0},Y({...H,conversions:vt})},[Y,H]),Ie=(0,o.useCallback)(ft=>it=>{const vt=H.conversions;vt[ft]={...vt[ft],destinationType:it.value},Y({...H,conversions:vt})},[Y,H]),we=(0,o.useCallback)(ft=>it=>{const vt=H.conversions;vt[ft]={...vt[ft],dateFormat:it.currentTarget.value},Y({...H,conversions:vt})},[Y,H]),ke=(0,o.useCallback)(ft=>it=>{const vt=H.conversions;vt[ft]={...vt[ft],joinWith:it.currentTarget.value},Y({...H,conversions:vt})},[Y,H]),et=(0,o.useCallback)(()=>{Y({...H,conversions:[...H.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[Y,H]),tt=(0,o.useCallback)(ft=>{const it=H.conversions;it.splice(ft,1),Y({...H,conversions:it})},[Y,H]),dt=(0,o.useCallback)(ft=>it=>{const vt=H.conversions;vt[ft]={...vt[ft],timezone:it?.value},Y({...H,conversions:vt})},[Y,H]);return(0,j.jsxs)(j.Fragment,{children:[H.conversions.map((ft,it)=>{const vt=(0,ns.UI)(z?.[0],ft.targetField),Lt=ft.joinWith?.length||vt?.type&&[Z.PU.other,Z.PU.string].includes(vt.type);return(0,j.jsxs)("div",{children:[(0,j.jsxs)(Me.C,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.convert-field-type-transformer-editor.label-field","Field"),children:(0,j.jsx)(xa.O,{context:{data:z},value:ft.targetField??"",onChange:ye(it),item:yo})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.convert-field-type-transformer-editor.label-as","as"),children:(0,j.jsx)(Te.l6,{options:oe,value:ft.destinationType,placeholder:(0,d.t)("transformers.convert-field-type-transformer-editor.placeholder-type","Type"),onChange:Ie(it),width:18})}),ft.destinationType===Z.PU.time&&(0,j.jsx)(X.I,{label:(0,d.t)("transformers.convert-field-type-transformer-editor.label-input-format","Input format"),tooltip:(0,d.t)("transformers.convert-field-type-transformer-editor.tooltip-input-format","Specify the format of the input field so Grafana can parse the date string correctly."),children:(0,j.jsx)(Ln.p,{value:ft.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:we(it),width:24})}),ft.destinationType===Z.PU.string&&(0,j.jsxs)(j.Fragment,{children:[Lt&&(0,j.jsx)(X.I,{label:(0,d.t)("transformers.convert-field-type-transformer-editor.label-join-with","Join with"),tooltip:(0,d.t)("transformers.convert-field-type-transformer-editor.tooltip-explicit-separator-joining-array-values","Use an explicit separator when joining array values"),children:(0,j.jsx)(Ln.p,{value:ft.joinWith,placeholder:"JSON",onChange:ke(it),width:16})}),vt?.type===Z.PU.time&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.convert-field-type-transformer-editor.label-date-format","Date format"),tooltip:(0,d.t)("transformers.convert-field-type-transformer-editor.tooltip-specify-the-output-format","Specify the output format."),children:(0,j.jsx)(Ln.p,{value:ft.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:we(it),width:24})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.convert-field-type-transformer-editor.label-set-timezone","Set timezone"),tooltip:(0,d.t)("transformers.convert-field-type-transformer-editor.tooltip-timezone-manually","Set the timezone of the date manually"),children:(0,j.jsx)(Te.l6,{options:pe,value:ft.timezone,onChange:dt(it),isClearable:!0})})]})]}),(0,j.jsx)(fe.$n,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>tt(it),"aria-label":(0,d.t)("transformers.convert-field-type-transformer-editor.aria-label-remove-convert-field-type-transformer","Remove convert field type transformer")})]}),ft.destinationType===Z.PU.enum&&(0,j.jsx)(vo,{input:z,options:H,transformIndex:it,onChange:Y})]},`${ft.targetField}-${it}`)}),(0,j.jsx)(fe.$n,{size:"sm",icon:"plus",onClick:et,variant:"secondary","aria-label":(0,d.t)("transformers.convert-field-type-transformer-editor.aria-label-add-a-convert-field-type-transformer","Add a convert field type transformer"),children:(0,j.jsx)(d.x6,{i18nKey:"transformers.convert-field-type-transformer-editor.convert-field-type",children:"Convert field type"})})]})},Eo=()=>({id:ce.F.convertFieldType,editor:xo,transformation:re.c.convertFieldTypeTransformer,name:(0,d.t)("transformers.convert-field-type-transformer-editor.name.convert-field-type","Convert field type"),description:(0,d.t)("transformers.convert-field-type-transformer-editor.description.convert-to-specified-field-type","Convert a field to a specified field type."),categories:new Set([v.m.Reformat]),help:Ae(ce.F.convertFieldType).helperDocs,tags:new Set([(0,d.t)("transformers.convert-field-type-transformer-editor.tags.format-field","Format field")]),imageDark:ps,imageLight:Ya});var bs=e(8934),Po=e(81837),Do=e(30827);class bo extends o.PureComponent{constructor(H){super(H),this.onFieldToggle=Y=>{const{selected:oe}=this.state;oe.indexOf(Y)>-1?this.onChange(oe.filter(pe=>pe!==Y)):this.onChange([...oe,Y])},this.onChange=Y=>{const{regex:oe,isRegexValid:pe}=this.state,ge={...this.props.options,include:{names:Y}};oe&&pe&&(ge.include=ge.include??{},ge.include.pattern=oe),this.setState({selected:Y},()=>{this.props.onChange(ge)})},this.onInputBlur=Y=>{const{selected:oe,regex:pe}=this.state;let ge=!0;try{pe&&(0,bs.dO)(pe)}catch{ge=!1}ge?this.props.onChange({...this.props.options,include:{pattern:pe}}):this.props.onChange({...this.props.options,include:{names:oe}}),this.setState({isRegexValid:ge})},this.onVariableChange=Y=>{this.props.onChange({...this.props.options,include:{variable:Y.value}}),this.setState({variable:Y.value})},this.onFromVariableChange=Y=>{const oe=Y.currentTarget.checked;this.props.onChange({...this.props.options,byVariable:oe}),this.setState({byVariable:oe})},this.state={include:H.options.include?.names||[],regex:H.options.include?.pattern,variable:H.options.include?.variable,byVariable:H.options.byVariable||!1,options:[],variables:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(H){this.props.input!==H.input&&this.initOptions()}initOptions(){const{input:H,options:Y}=this.props,oe=Array.from(Y.include?.names??[]),pe=(0,ct.w)().getVariables().map(Ie=>({label:"$"+Ie.name,value:"$"+Ie.name})),ge=[],ye={};for(const Ie of H)for(const we of Ie.fields){const ke=(0,ie.Ct)(we,Ie,H);let et=ye[ke];et||(et=ye[ke]={name:ke,count:0},ge.push(et)),et.count++}if(Y.include?.pattern)try{const Ie=(0,bs.dO)(Y.include.pattern);for(const we of ge)Ie.test(we.name)&&oe.push(we.name)}catch(Ie){console.error(Ie)}if(oe.length){const Ie=ge.filter(we=>oe.includes(we.name));this.setState({options:ge,selected:Ie.map(we=>we.name),variables:pe,byVariable:Y.byVariable||!1,variable:Y.include?.variable,regex:Y.include?.pattern})}else this.setState({options:ge,selected:ge.map(Ie=>Ie.name),variables:pe,byVariable:Y.byVariable||!1,variable:Y.include?.variable,regex:Y.include?.pattern})}render(){const{options:H,selected:Y,isRegexValid:oe}=this.state;return(0,j.jsxs)("div",{children:[(0,j.jsx)(Me.C,{label:(0,d.t)("transformers.filter-by-name-transformer-editor.label-use-variable","Use variable"),children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.filter-by-name-transformer-editor.label-from-variable","From variable"),children:(0,j.jsx)(gt.K,{value:this.state.byVariable,onChange:this.onFromVariableChange})})}),this.state.byVariable?(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.filter-by-name-transformer-editor.label-variable","Variable"),children:(0,j.jsx)(Te.l6,{value:this.state.variable,onChange:this.onVariableChange,options:this.state.variables||[]})})}):(0,j.jsxs)(Me.C,{label:(0,d.t)("transformers.filter-by-name-transformer-editor.label-identifier","Identifier"),children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.filter-by-name-transformer-editor.label-identifier","Identifier"),invalid:!oe,error:oe?void 0:"Invalid pattern",children:(0,j.jsx)(Ln.p,{placeholder:(0,d.t)("transformers.filter-by-name-transformer-editor.placeholder-regular-expression-pattern","Regular expression pattern"),value:this.state.regex||"",onChange:pe=>this.setState({regex:pe.currentTarget.value}),onBlur:this.onInputBlur,width:25})}),H.map((pe,ge)=>{const ye=`${pe.name}${pe.count>1?" ("+pe.count+")":""}`,Ie=Y.indexOf(pe.name)>-1;return(0,j.jsx)(Yn.m,{onClick:()=>{this.onFieldToggle(pe.name)},label:ye,selected:Ie},`${pe.name}/${ge}`)})]})]})}}const wr=()=>({id:ce.F.filterFieldsByName,editor:bo,transformation:re.c.filterFieldsByNameTransformer,name:(0,d.t)("transformers.filter-by-name-transformer-editor.name.filter-fields-by-name","Filter fields by name"),description:(0,d.t)("transformers.filter-by-name-transformer-editor.description.remove-part-query-results-regex-pattern","Remove parts of the query results using a regex pattern."),categories:new Set([v.m.Filter]),help:Ae(ce.F.filterFieldsByName).helperDocs,imageDark:Po,imageLight:Do});var gr=e(42240),mr=e(17757),oi=e(26883);const Vr=z=>(0,j.jsx)(gr.M,{value:{id:se.jR.byRefId,options:z.options.include||""},onChange:H=>{z.onChange({...z.options,include:H?.options||""})},context:{data:z.input}}),$r=()=>({id:ce.F.filterByRefId,editor:Vr,transformation:re.c.filterFramesByRefIdTransformer,name:(0,d.t)("transformers.filter-by-ref-id-transformer-editor.name.filter-data-by-query","Filter data by query"),description:(0,d.t)("transformers.filter-by-ref-id-transformer-editor.description.filter-data-by-query-useful-sharing-results","Remove rows from the data based on origin query"),categories:new Set([v.m.Filter]),help:Ae(ce.F.filterByRefId).helperDocs,imageDark:mr,imageLight:oi});var sr=e(40041),Co=e(64176),ii=e(12146);function li({input:z,options:H,onChange:Y}){const oe={settings:{width:30,filter:ke=>ke.type===Z.PU.string,placeholderText:(0,d.t)("transformers.format-string-transfomer-editor.field-name-picker-settings.placeholderText.select-text-field","Select text field"),noFieldsMessage:(0,d.t)("transformers.format-string-transfomer-editor.field-name-picker-settings.noFieldsMessage.no-text-fields-found","No text fields found")},name:"",id:"",editor:()=>null},pe=(0,o.useCallback)(ke=>{Y({...H,stringField:ke??""})},[Y,H]),ge=(0,o.useCallback)(ke=>{const et=ke.value??sr.gs.UpperCase;Y({...H,outputFormat:et})},[Y,H]),ye=(0,o.useCallback)(ke=>{Y({...H,substringStart:ke??0})},[Y,H]),Ie=(0,o.useCallback)(ke=>{Y({...H,substringEnd:ke??0})},[Y,H]),we=Object.values(sr.gs).map(ke=>({label:ke,value:ke}));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(Me.C,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.format-string-transfomer-editor.label-field","Field"),labelWidth:10,children:(0,j.jsx)(xa.O,{context:{data:z},value:H.stringField??"",onChange:pe,item:oe})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.format-string-transfomer-editor.label-format","Format"),labelWidth:10,children:(0,j.jsx)(Te.l6,{options:we,value:H.outputFormat,onChange:ge,width:20})})]}),H.outputFormat===sr.gs.Substring&&(0,j.jsxs)(Me.C,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.format-string-transfomer-editor.label-substring-range","Substring range"),labelWidth:15,children:(0,j.jsx)(jt.Q,{min:0,value:H.substringStart??0,onChange:ye,width:7})}),(0,j.jsx)(X.I,{children:(0,j.jsx)(jt.Q,{min:0,value:H.substringEnd??0,onChange:Ie,width:7})})]})]})}const ci=()=>({id:ce.F.formatString,editor:li,transformation:re.c.formatStringTransformer,name:(0,d.t)("transformers.format-string-transformer-editor.name.format-string","Format string"),state:Be.pn.beta,description:(0,d.t)("transformers.format-string-transformer-editor.description.manipulate-string-fields-formatting","Manipulate string fields formatting."),categories:new Set([v.m.Reformat]),imageDark:Co,imageLight:ii});var zr=e(89640),di=e(85436),ui=e(30086);function hi({input:z,options:H,onChange:Y}){const oe=[],pe=(0,Ke.qt)(!0);for(const we of z)for(const ke of we.fields)if(ke.type==="time"){const et=(0,ie.Ct)(ke,we,z);oe.push({label:et,value:et})}const ge=(0,o.useCallback)(we=>{const ke=we?.value!==void 0?we.value:"";Y({...H,timeField:ke})},[Y,H]),ye=(0,o.useCallback)(we=>{const ke=we.target.value;Y({...H,outputFormat:ke})},[Y,H]),Ie=(0,o.useCallback)(we=>{const ke=we?.value!==void 0?we.value:"";Y({...H,timezone:ke})},[Y,H]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(Me.C,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.format-time-transfomer-editor.label-time-field","Time field"),labelWidth:15,grow:!0,children:(0,j.jsx)(Te.l6,{options:oe,value:H.timeField,onChange:ge,placeholder:"time",isClearable:!0})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.format-time-transfomer-editor.label-format","Format"),labelWidth:10,tooltip:(0,j.jsxs)(d.x6,{i18nKey:"transformers.format-time-transfomer-editor.tooltip-format",children:["The output format for the field specified as a"," ",(0,j.jsx)(zr.Y,{href:"https://momentjs.com/docs/#/displaying/",external:!0,children:"Moment.js format string"}),"."]}),interactive:!0,children:(0,j.jsx)(Ln.p,{onChange:ye,value:H.outputFormat})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.format-time-transfomer-editor.label-set-timezone","Set timezone"),tooltip:(0,d.t)("transformers.format-time-transfomer-editor.tooltip-timezone-manually","Set the timezone of the date manually"),labelWidth:20,children:(0,j.jsx)(Te.l6,{options:pe,value:H.timezone,onChange:Ie,isClearable:!0})})]})})}const fi=()=>({id:ce.F.formatTime,editor:hi,transformation:re.c.formatTimeTransformer,name:(0,d.t)("transformers.format-time-transformer-editor.name.format-time","Format time"),state:Be.pn.alpha,description:(0,d.t)("transformers.format-time-transformer-editor.description.set-based-on-time","Set the output format of a time field"),help:Ae(ce.F.formatTime).helperDocs,imageDark:di,imageLight:ui});var Ks=e(47433),Cs=e(34999),pi=e(67168),wl=e(71306);const gi=({input:z,options:H,onChange:Y})=>{const oe=(0,Ke.ZI)(z,!0),pe=(0,o.useCallback)(we=>ke=>{Y({...H,fields:{...H.fields,[we]:ke}})},[Y]);let ge,ye=!1;for(const we of Object.values(H.fields))we.aggregations.length>0&&we.operation!==null&&(ye=!0),we.operation===Ks.R3.groupBy&&(ge=!0);const Ie=ye&&!ge;return(0,j.jsxs)(rn.B,{direction:"column",children:[Ie&&(0,j.jsx)(Cs.F,{title:(0,d.t)("transformers.group-by-transformer-editor.title-calc-alert","Calculations will not have an effect if no fields are being grouped on"),severity:"warning"}),oe.map(we=>(0,j.jsx)(mi,{onConfigChange:pe(we),fieldName:we,config:H.fields[we]},we))]})},mi=({fieldName:z,config:H,onConfigChange:Y})=>{const oe=(0,$t.$j)(),pe=rr(oe),ge=(0,o.useCallback)(Ie=>{Y({aggregations:H?.aggregations??[],operation:Ie?.value??null})},[H,Y]),ye=[{label:(0,d.t)("transformers.group-by-field-configuration.options.label.group-by","Group by"),value:Ks.R3.groupBy},{label:(0,d.t)("transformers.group-by-field-configuration.options.label.calculate","Calculate"),value:Ks.R3.aggregate}];return(0,j.jsx)(X.I,{className:pe.label,label:z,grow:!0,shrink:!0,children:(0,j.jsxs)(rn.B,{gap:.5,direction:"row",children:[(0,j.jsx)("div",{className:pe.operation,children:(0,j.jsx)(Te.l6,{options:ye,value:H?.operation,placeholder:(0,d.t)("transformers.group-by-field-configuration.placeholder-ignored","Ignored"),onChange:ge,isClearable:!0})}),H?.operation&&(0,j.jsx)(_n.S,{className:pe.aggregations,placeholder:(0,d.t)("transformers.group-by-field-configuration.placeholder-select-stats","Select stats"),allowMultiple:!0,stats:H.aggregations,onChange:Ie=>{Y({...H,aggregations:Ie})},filterOptions:Ie=>H?.operation===Ks.R3.groupBy?Ie.id===pn.gy.count:!0})]})})},rr=z=>({label:(0,st.css)({label:{minWidth:z.spacing(32)}}),operation:(0,st.css)({flexShrink:0,height:"100%",width:z.spacing(24)}),aggregations:(0,st.css)({flexGrow:1})}),vi=()=>({id:ce.F.groupBy,editor:gi,transformation:re.c.groupByTransformer,name:(0,d.t)("transformers.group-by-transformer-editor.name.group-by","Group by"),description:(0,d.t)("transformers.group-by-transformer-editor.description.group-series-by-field-calculate-stats","Group data by a field value and create aggregate data."),categories:new Set([v.m.Combine,v.m.CalculateNewFields,v.m.Reformat]),help:Ae(ce.F.groupBy).helperDocs,imageDark:pi,imageLight:wl});var Gr=e(25260),To=e(37386),yi=e(79271),xi=e(27161);const Ei=({input:z,options:H,onChange:Y})=>{const oe=(0,Ke.ZI)(z),pe=H.showSubframeHeaders===void 0?Gr.l:H.showSubframeHeaders,ge=(0,o.useCallback)(et=>tt=>{Y({...H,fields:{...H.fields,[et]:tt}})},[Y]),ye=(0,o.useCallback)(()=>{const et=H.showSubframeHeaders===void 0?!Gr.l:!H.showSubframeHeaders;Y({showSubframeHeaders:et,fields:{...H.fields}})},[Y]);let Ie,we=!1;for(const et of Object.values(H.fields))et.aggregations.length>0&&et.operation!==null&&(we=!0),et.operation===Ks.R3.groupBy&&(Ie=!0);const ke=we&&!Ie;return(0,j.jsxs)(rn.B,{direction:"column",children:[ke&&(0,j.jsx)(Cs.F,{title:(0,d.t)("transformers.group-to-nested-table-transformer-editor.title-calc-alert","Calculations will not have an effect if no fields are being grouped on."),severity:"warning"}),(0,j.jsx)("div",{children:oe.map(et=>(0,j.jsx)(Pi,{onConfigChange:ge(et),fieldName:et,config:H.fields[et]},et))}),(0,j.jsx)(To.D,{label:(0,d.t)("transformers.group-to-nested-table-transformer-editor.label-show-field-names-in-nested-tables","Show field names in nested tables"),description:(0,d.t)("transformers.group-to-nested-table-transformer-editor.description-show-field-names","If enabled nested tables will show field names as a table header"),children:(0,j.jsx)(gt.d,{value:pe,onChange:ye})})]})},Pi=({fieldName:z,config:H,onConfigChange:Y})=>{const oe=(0,$t.$j)(),pe=Di(oe),ge=(0,o.useCallback)(Ie=>{Y({aggregations:H?.aggregations??[],operation:Ie?.value??null})},[H,Y]),ye=[{label:(0,d.t)("transformers.group-by-field-configuration.options.label.group-by","Group by"),value:Ks.R3.groupBy},{label:(0,d.t)("transformers.group-by-field-configuration.options.label.calculate","Calculate"),value:Ks.R3.aggregate}];return(0,j.jsx)(X.I,{className:pe.label,label:z,grow:!0,shrink:!0,children:(0,j.jsxs)(rn.B,{gap:.5,direction:"row",wrap:!1,children:[(0,j.jsx)("div",{className:pe.operation,children:(0,j.jsx)(Te.l6,{options:ye,value:H?.operation,placeholder:(0,d.t)("transformers.group-by-field-configuration.placeholder-ignored","Ignored"),onChange:ge,isClearable:!0})}),H?.operation===Ks.R3.aggregate&&(0,j.jsx)(_n.S,{className:pe.aggregations,placeholder:(0,d.t)("transformers.group-by-field-configuration.placeholder-select-stats","Select stats"),allowMultiple:!0,stats:H.aggregations,onChange:Ie=>{Y({...H,aggregations:Ie})}})]})})},Di=z=>({label:(0,st.css)({minWidth:z.spacing(32)}),operation:(0,st.css)({flexShrink:0,height:"100%",width:z.spacing(24)}),aggregations:(0,st.css)({flexGrow:1})}),bi=()=>({id:ce.F.groupToNestedTable,editor:Ei,transformation:re.c.groupToNestedTable,name:(0,d.t)("transformers.group-to-nested-table-transformer-editor.name.group-to-nested-tables","Group to nested tables"),description:(0,d.t)("transformers.group-to-nested-table-transformer-editor.description.group-by-field-value","Group data by a field value and create nested tables with the grouped data."),categories:new Set([v.m.Combine,v.m.CalculateNewFields,v.m.Reformat]),state:Be.pn.beta,imageDark:yi,imageLight:xi});var Ci=e(81477),Ti=e(19223);const Mo=({input:z,options:H,onChange:Y})=>{const oe=(0,Ke.ZI)(z).map(ke=>({label:ke,value:ke})),pe=(0,ct.w)().getVariables().map(ke=>({value:"$"+ke.name,label:"$"+ke.name})),ge=(0,o.useCallback)(ke=>{Y({...H,columnField:ke?.value})},[Y,H]),ye=(0,o.useCallback)(ke=>{Y({...H,rowField:ke?.value})},[Y,H]),Ie=(0,o.useCallback)(ke=>{Y({...H,valueField:ke?.value})},[Y,H]),we=(0,o.useCallback)(ke=>{Y({...H,emptyValue:ke?.value})},[Y,H]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(Me.C,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.grouping-to-matrix-transformer-editor.label-column","Column"),labelWidth:8,children:(0,j.jsx)(Te.l6,{options:[...oe,...pe],value:H.columnField,onChange:ge,isClearable:!0})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.grouping-to-matrix-transformer-editor.label-row","Row"),labelWidth:8,children:(0,j.jsx)(Te.l6,{options:[...oe,...pe],value:H.rowField,onChange:ye,isClearable:!0})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.grouping-to-matrix-transformer-editor.label-cell-value","Cell value"),labelWidth:10,children:(0,j.jsx)(Te.l6,{options:[...oe,...pe],value:H.valueField,onChange:Ie,isClearable:!0})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.grouping-to-matrix-transformer-editor.label-empty-value","Empty value"),children:(0,j.jsx)(Te.l6,{options:(0,Ke.wS)(),value:H.emptyValue,onChange:we,isClearable:!0})})]})})},Hr=()=>({id:ce.F.groupingToMatrix,editor:Mo,transformation:re.c.groupingToMatrixTransformer,name:(0,d.t)("transformers.grouping-to-matrix-transformer-editor.name.grouping-to-matrix","Grouping to matrix"),description:(0,d.t)("transformers.grouping-to-matrix-transformer-editor.description.summarize-and-reorganize-data","Summarize and reorganize data based on three fields."),categories:new Set([v.m.Combine,v.m.Reformat]),help:Ae(ce.F.groupingToMatrix).helperDocs,imageDark:Ci,imageLight:Ti});var Fs=e(74261),Mi=e(21212),Oi=e(78798);const Si=({input:z,options:H,onChange:Y})=>{const[pe,ge]=(0,o.useState)({bucketCount:!(0,Ke.N_)(H.bucketCount||""),bucketSize:!(0,Ke.N_)(H.bucketSize||""),bucketOffset:!(0,Ke.N_)(H.bucketOffset||"")}),ye=(0,o.useCallback)(tt=>{ge({...pe,bucketCount:!(0,Ke.N_)(tt)}),Y({...H,bucketCount:Number(tt)===0?void 0:Number(tt)})},[Y,H,pe]),Ie=(0,o.useCallback)(tt=>{ge({...pe,bucketSize:!(0,Ke.N_)(tt)}),Y({...H,bucketSize:tt})},[Y,H,pe,ge]),we=(0,o.useCallback)(tt=>{ge({...pe,bucketOffset:!(0,Ke.N_)(tt)}),Y({...H,bucketOffset:tt})},[Y,H,pe,ge]),ke=(0,o.useCallback)(()=>{Y({...H,combine:!H.combine})},[Y,H]),et=(0,Ke.I9)();return(0,j.jsxs)("div",{children:[(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{invalid:pe.bucketCount,error:"Value needs to be an integer or a variable",labelWidth:18,label:Fs.Rt.bucketCount.name,tooltip:Fs.Rt.bucketCount.description,children:(0,j.jsx)(Re.y,{suggestions:et,value:H.bucketCount,placeholder:(0,d.t)("transformers.histogram-transformer-editor.placeholder-default","Default: 30"),onChange:ye})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{invalid:pe.bucketSize,error:"Value needs to be an integer or a variable",labelWidth:18,label:Fs.Rt.bucketSize.name,tooltip:Fs.Rt.bucketSize.description,children:(0,j.jsx)(Re.y,{suggestions:et,value:H.bucketSize,placeholder:(0,d.t)("transformers.histogram-transformer-editor.placeholder-auto","Auto"),onChange:Ie})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{labelWidth:18,label:Fs.Rt.bucketOffset.name,tooltip:Fs.Rt.bucketOffset.description,invalid:pe.bucketOffset,error:"Value needs to be an integer or a variable",children:(0,j.jsx)(Re.y,{suggestions:et,value:H.bucketOffset,placeholder:(0,d.t)("transformers.histogram-transformer-editor.placeholder-none","None"),onChange:we})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{labelWidth:18,label:Fs.Rt.combine.name,tooltip:Fs.Rt.combine.description,children:(0,j.jsx)(gt.K,{value:H.combine??!1,onChange:ke})})})]})},_r=()=>({id:ce.F.histogram,editor:Si,transformation:re.c.histogramTransformer,name:(0,d.t)("transformers.histogram-transformer-editor.name.histogram","Histogram"),description:(0,d.t)("transformers.histogram-transformer-editor.description.calculate-histogram-from-input-data","Calculate a histogram from input data."),categories:new Set([v.m.CreateNewVisualization]),help:Ae(ce.F.histogram).helperDocs,imageDark:Mi,imageLight:Oi});var vr=e(6684),yr=e(56755),Ii=e(95767),Ri=e(18381);function Ai({input:z,options:H,onChange:Y}){const oe=(0,yr.sE)(z),pe=(0,yr.m3)(oe),ge=[{value:vr.W.outer,label:(0,d.t)("transformers.series-to-fields-transformer-editor.modes.label.outer-time-series","Outer (time series)"),description:(0,d.t)("transformers.series-to-fields-transformer-editor.modes.description.keep-all-rows","Keep all rows from any table with a value. Join on distinct field values. Performant and best used for time series.")},{value:vr.W.outerTabular,label:(0,d.t)("transformers.series-to-fields-transformer-editor.modes.label.outer-tabular","Outer (tabular)"),description:(0,d.t)("transformers.series-to-fields-transformer-editor.modes.description.join-on-a-field","Join on a field value with duplicated values. Non performant outer join best used for tabular(SQL like) data.")},{value:vr.W.inner,label:(0,d.t)("transformers.series-to-fields-transformer-editor.modes.label.inner","Inner"),description:(0,d.t)("transformers.series-to-fields-transformer-editor.modes.description.combine-data-from-two-tables","Combine data from two tables whenever there are matching values in a fields common to both tables.")}],ye=(0,ct.w)().getVariables().map(ke=>({value:"$"+ke.name,label:"$"+ke.name})),Ie=(0,o.useCallback)(ke=>{Y({...H,byField:ke?.value})},[Y,H]),we=(0,o.useCallback)(ke=>{Y({...H,mode:ke?.value})},[Y,H]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.series-to-fields-transformer-editor.label-mode","Mode"),labelWidth:8,grow:!0,children:(0,j.jsx)(Te.l6,{options:ge,value:H.mode??vr.W.outer,onChange:we})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.series-to-fields-transformer-editor.label-field","Field"),labelWidth:8,grow:!0,children:(0,j.jsx)(Te.l6,{options:[...pe,...ye],value:H.byField,onChange:Ie,placeholder:"time",isClearable:!0})})})]})}const ji=()=>({id:ce.F.joinByField,aliasIds:[ce.F.seriesToColumns],editor:Ai,transformation:re.c.joinByFieldTransformer,name:(0,d.t)("transformers.join-by-field-transformer-editor.name.join-by-field","Join by field"),description:(0,d.t)("transformers.join-by-field-transformer-editor.description.combine-rows-from-2-tables","Combine rows from 2+ tables, based on a related field."),categories:new Set([v.m.Combine]),help:Ae(ce.F.joinByField).helperDocs,imageDark:Ii,imageLight:Ri});var xr=e(79184),Li=e(44283),Bi=e(53965);const zs=({input:z,options:H,onChange:Y})=>{const pe=[{value:xr.n.Columns,label:(0,d.t)("transformers.labels-as-fields-transformer-editor.modes.label.columns","Columns")},{value:xr.n.Rows,label:(0,d.t)("transformers.labels-as-fields-transformer-editor.modes.label.rows","Rows")}],{labelNames:ge,selected:ye}=(0,o.useMemo)(()=>{let ke=[],et={};for(const dt of z)for(const ft of dt.fields)if(ft.labels)for(const it of Object.keys(ft.labels))et[it]||(ke.push({value:it,label:it}),et[it]=!0);const tt=new Set(H.keepLabels?.length?H.keepLabels:Object.keys(et));return{labelNames:ke,selected:tt}},[H.keepLabels,z]),Ie=ke=>{Y({...H,valueLabel:ke?.value})},we=ke=>{if(ye.has(ke)?ye.delete(ke):ye.add(ke),ye.size===ge.length||!ye.size){const{keepLabels:et,...tt}=H;Y(tt)}else Y({...H,keepLabels:[...ye]})};return(0,j.jsxs)("div",{children:[(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.labels-as-fields-transformer-editor.label-mode","Mode"),labelWidth:20,children:(0,j.jsx)(le.z,{options:pe,value:H.mode??xr.n.Columns,onChange:ke=>Y({...H,mode:ke})})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.labels-as-fields-transformer-editor.label-labels","Labels"),labelWidth:20,shrink:!0,children:(0,j.jsx)(rn.B,{gap:.5,wrap:"wrap",children:ge.map((ke,et)=>{const tt=ke.label;return(0,j.jsx)(Yn.m,{onClick:()=>we(tt),label:tt,selected:ye.has(tt)},`${tt}/${et}`)})})})}),H.mode!==xr.n.Rows&&(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.labels-as-fields-transformer-editor.label-value-field-name","Value field name"),labelWidth:20,tooltip:(0,d.t)("transformers.labels-as-fields-transformer-editor.tooltip-replace-value-field-label","Replace the value field name with a label"),htmlFor:"labels-to-fields-as-name",children:(0,j.jsx)(Te.l6,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:(0,d.t)("transformers.labels-as-fields-transformer-editor.placeholder-optional-select-label","(Optional) Select label"),options:ge,value:H?.valueLabel,onChange:Ie,className:"min-width-16"})})})]})},Ui=()=>({id:ce.F.labelsToFields,editor:zs,transformation:re.c.labelsToFieldsTransformer,name:(0,d.t)("transformers.labels-to-fields-transformer-editor.name.labels-to-fields","Labels to fields"),description:(0,d.t)("transformers.labels-to-fields-transformer-editor.description.groups-series-time-return-labels-tags-fields","Group series by time and return labels or tags as fields."),categories:new Set([v.m.Reformat]),help:Ae(ce.F.labelsToFields).helperDocs,imageDark:Li,imageLight:Bi});var Wi=e(89911),Ni=e(66225);const Ki=({options:z,onChange:H})=>{const[Y,oe]=(0,o.useState)(!1),pe=(0,o.useCallback)(ge=>{oe(!(0,Ke.N_)(ge)),H({...z,limitField:ge})},[H,z]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(Me.C,{children:(0,j.jsx)(Re.y,{invalid:Y,error:"Value needs to be an integer or a variable",value:String(z.limitField),onChange:pe,placeholder:(0,d.t)("transformers.limit-transformer-editor.placeholder-value-or-variable","Value or variable"),suggestions:(0,Ke.I9)()})})})},Fi=()=>({id:ce.F.limit,editor:Ki,transformation:re.c.limitTransformer,name:(0,d.t)("transformers.limit-transformer-editor.name.limit","Limit"),description:(0,d.t)("transformers.limit-transformer-editor.description.limit-number-items-displayed","Limit the number of items displayed."),categories:new Set([v.m.Filter]),help:Ae(ce.F.limit).helperDocs,imageDark:Wi,imageLight:Ni});var Er=e(95866),wi=e(18060);const Oo=({input:z,options:H,onChange:Y})=>z.length<=1?(0,j.jsx)(Es.P,{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.merge-transformer-editor.merge-effect-applied-single-frame",children:"Merge has no effect when applied on a single frame."})}):null,Pr=()=>({id:ce.F.merge,editor:Oo,transformation:re.c.mergeTransformer,name:(0,d.t)("transformers.merge-transformer-editor.name.merge","Merge series/tables"),description:(0,d.t)("transformers.merge-transformer-editor.description.merge-multiple-series","Merge multiple series. Values will be combined into one row."),categories:new Set([v.m.Combine]),help:Ae(ce.F.merge).helperDocs,imageDark:Er,imageLight:wi});var ja=e(95575),wa=e(66404),Vi=e(3041),$i=e(91259);function So(z,H,Y){z.splice(Y,0,z.splice(H,1)[0])}const Qr=({options:z,input:H,onChange:Y})=>{const{indexByName:oe,excludeByName:pe,renameByName:ge,includeByName:ye,orderBy:Ie,orderByMode:we}=z,ke=(0,Ke.ZI)(H),et=(0,o.useMemo)(()=>{if(H.length>0&&we===ja.NU.Auto){const un=(0,ja.wx)(Ie??[]);return(0,Ke.gD)([{...H[0],fields:un(H[0].fields)}],!1)}return Ao(ke,oe)},[H,ke,oe,we,Ie]),tt=(0,o.useMemo)(()=>{const un=[];if(we===ja.NU.Auto){const Tn=(0,Ke.aG)(H);let Gn=!1;Ie?.forEach((Da,fs)=>{let Kr=Da.desc?ja.pH.Desc:ja.pH.Asc;Da.type===ja.Mq.Name?(un.push({type:ja.Mq.Name,order:Kr}),Gn=!0):Tn.has(Da.name)&&(un.push({type:ja.Mq.Label,name:Da.name,order:Kr}),Tn.delete(Da.name))}),Gn||un.push({type:ja.Mq.Name,order:ja.pH.Off}),Tn.forEach(Da=>{un.push({type:ja.Mq.Label,name:Da,order:ja.pH.Off})})}return un},[H,we,Ie]),dt=ye&&Object.keys(ye).length>0?"include":"exclude",ft=(0,o.useCallback)((un,Tn)=>{Y({...z,excludeByName:{...pe,[un]:Tn}})},[Y,z,pe]),it=(0,o.useCallback)((un,Tn)=>{const Gn={...z,includeByName:{...ye,[un]:!Tn}};Y(Gn)},[Y,z,ye]),vt=(0,o.useCallback)(un=>{if(!un||!un.destination)return;const Tn=un.source.index,Gn=un.destination.index;Tn!==Gn&&Y({...z,indexByName:Gi(ke,Tn,Gn)})},[Y,z,ke]),Lt=(0,o.useCallback)((un,Tn)=>{Y({...z,renameByName:{...z.renameByName,[un]:Tn}})},[Y,z]),Xt=(0,o.useCallback)((un,Tn)=>{un.order=Tn;const Gn=[];tt.forEach(Da=>{Da.order!==ja.pH.Off&&Gn.push({type:Da.type,name:Da.name,desc:Da.order===ja.pH.Desc})}),Y({...z,orderBy:Gn})},[z,tt,Y]),fn=(0,o.useCallback)(un=>{if(un.destination==null)return;const Tn=un.source.index,Gn=un.destination.index;if(Tn===Gn)return;So(tt,Tn,Gn);const Da=[];tt.forEach(fs=>{fs.order!==ja.pH.Off&&Da.push({type:fs.type,name:fs.name,desc:fs.order===ja.pH.Desc})}),Y({...z,orderBy:Da})},[z,Y,tt]),jn=(0,$t.of)(zi);return H.length>1?(0,j.jsx)(Es.P,{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.organize-fields-transformer-editor.first-frame-warning",children:"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Me.C,{className:jn.fieldOrderRadio,children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.organize-fields-transformer-editor.field-order","Field order"),children:(0,j.jsx)(le.z,{options:[{label:(0,d.t)("transformers.organize-fields-transformer-editor.field-order-manual","Manual"),value:ja.NU.Manual},{label:(0,d.t)("transformers.organize-fields-transformer-editor.field-order-auto","Auto"),value:ja.NU.Auto}],value:z.orderByMode??ja.NU.Manual,onChange:un=>Y({...z,orderByMode:un})})})}),(0,j.jsx)(Ka.JY,{onDragEnd:fn,children:z.orderByMode===ja.NU.Auto&&(0,j.jsx)(Ka.gL,{droppableId:"sortable-labels-transformer",direction:"vertical",children:un=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{ref:un.innerRef,className:jn.labelsDraggable,...un.droppableProps,children:tt.map((Tn,Gn)=>(0,j.jsx)(Io,{item:Tn,index:Gn,onChangeSort:Xt},`${Tn.name}-${Tn.type}`))}),un.placeholder]})})}),(0,j.jsx)(Ka.JY,{onDragEnd:vt,children:(0,j.jsx)(Ka.gL,{droppableId:"sortable-fields-transformer",direction:"vertical",children:un=>(0,j.jsxs)("div",{ref:un.innerRef,...un.droppableProps,children:[et.map((Tn,Gn)=>{const Da=ye&&Tn in ye?ye[Tn]:!1,fs=dt==="include"?Da:!pe[Tn],Kr=dt==="include"?it:ft;return(0,j.jsx)(Dr,{fieldName:Tn,renamedFieldName:ge[Tn],index:Gn,onToggleVisibility:Kr,onRenameField:Lt,visible:fs,isDragDisabled:z.orderByMode===ja.NU.Auto},Tn)}),un.placeholder]})})})]})},zi=z=>({fieldOrderRadio:(0,st.css)({marginBottom:z.spacing(1)}),labelsDraggable:(0,st.css)({marginBottom:z.spacing(3)})});Qr.displayName="OrganizeFieldsTransformerEditor";const Dr=({fieldName:z,renamedFieldName:H,index:Y,visible:oe,onToggleVisibility:pe,onRenameField:ge,isDragDisabled:ye})=>{const Ie=(0,$t.of)(Ro);return(0,j.jsx)(Ka.sx,{draggableId:z,index:Y,isDragDisabled:ye,children:we=>(0,j.jsxs)(he.a,{display:"flex",gap:0,ref:we.innerRef,...we.draggableProps,children:[(0,j.jsx)(je.c,{width:60,as:"div",children:(0,j.jsxs)(rn.B,{gap:0,justifyContent:"flex-start",alignItems:"center",width:"100%",children:[!ye&&(0,j.jsx)("span",{...we.dragHandleProps,children:(0,j.jsx)(Sa.I,{name:"draggabledots",title:(0,d.t)("transformers.draggable-field-name.title-drag-and-drop-to-reorder","Drag and drop to reorder"),size:"lg",className:Ie.draggable})}),(0,j.jsx)(as.K,{className:Ie.toggle,size:"md",name:oe?"eye":"eye-slash",onClick:()=>pe(z,oe),tooltip:oe?(0,d.t)("transformers.draggable-field-name.tooltip-disable","Disable"):(0,d.t)("transformers.draggable-field-name.tooltip-enable","Enable")}),(0,j.jsx)(wa.E,{truncate:!0,element:"p",variant:"bodySmall",weight:"bold",children:z})]})}),(0,j.jsx)(Ln.p,{defaultValue:H||"",placeholder:(0,d.t)("transformers.draggable-field-name.rename-placeholder","Rename {{fieldName}}",{fieldName:z,interpolation:{escapeValue:!1}}),onBlur:ke=>ge(z,ke.currentTarget.value)})]})})};Dr.displayName="DraggableFieldName";const Io=({index:z,item:H,onChangeSort:Y})=>{const oe=(0,$t.of)(Ro),pe=(0,o.useId)();return(0,j.jsx)(Ka.sx,{draggableId:pe,index:z,isDragDisabled:H.order===ja.pH.Off,children:ge=>(0,j.jsxs)(he.a,{marginBottom:.5,display:"flex",gap:0,ref:ge.innerRef,...ge.draggableProps,children:[(0,j.jsx)(je.c,{width:60,as:"div",children:(0,j.jsxs)(rn.B,{gap:3,justifyContent:"flex-start",alignItems:"center",width:"100%",children:[(0,j.jsx)("span",{...ge.dragHandleProps,children:(0,j.jsx)(Sa.I,{name:"draggabledots",title:(0,d.t)("transformers.draggable-field-name.title-drag-and-drop-to-reorder","Drag and drop to reorder"),size:"lg",className:(0,st.cx)(oe.draggable,{[oe.disabled]:H.order===ja.pH.Off})})}),(0,j.jsx)(wa.E,{truncate:!0,element:"p",variant:"bodySmall",weight:"bold",children:H.type===ja.Mq.Label?`Label: ${H.name}`:"Field name"})]})}),(0,j.jsx)(le.z,{options:[{label:(0,d.t)("transformers.draggable-sort-order.off","Off"),value:ja.pH.Off},{label:(0,d.t)("transformers.draggable-sort-order.asc","ASC"),value:ja.pH.Asc},{label:(0,d.t)("transformers.draggable-sort-order.desc","DESC"),value:ja.pH.Desc}],value:H.order,onChange:ye=>{Y(H,ye)}})]})})};Io.displayName="DraggableUIOrderByItem";const Ro=z=>({toggle:(0,st.css)({margin:z.spacing(0,1),color:z.colors.text.secondary}),draggable:(0,st.css)({opacity:.4,"&:hover":{color:z.colors.text.maxContrast}}),disabled:(0,st.css)({color:z.colors.text.disabled,pointerEvents:"none"})}),Gi=(z,H,Y)=>{const oe=Array.from(z),[pe]=oe.splice(H,1);return oe.splice(Y,0,pe),oe.reduce((ge,ye,Ie)=>(ge[ye]=Ie,ge),{})},Ao=(z,H={})=>{if(!H||Object.keys(H).length===0)return z;const Y=(0,ja.Xz)(H);return z.sort(Y)},Hi=()=>({id:ce.F.organize,editor:Qr,transformation:re.c.organizeFieldsTransformer,name:(0,d.t)("transformers.organize-fields-transformer-editor.name.organize-fields","Organize fields by name"),description:(0,d.t)("transformers.organize-fields-transformer-editor.description.reorder-hide-or-rename-fields","Re-order, hide, or rename fields."),categories:new Set([v.m.ReorderAndRename]),help:Ae(ce.F.organize).helperDocs,imageDark:Vi,imageLight:$i});var Gs=e(32157),Ga=e(51898),_i=e(95428),kr=e(25818);const or=({options:z,onChange:H})=>{const Y=[{label:(0,d.t)("transformers.reduce-transformer-editor.modes.label.series-to-rows","Series to rows"),value:Gs.rV.SeriesToRows,description:(0,d.t)("transformers.reduce-transformer-editor.modes.description.create-table-series-value","Create a table with one row for each series value")},{label:(0,d.t)("transformers.reduce-transformer-editor.modes.label.reduce-fields","Reduce fields"),value:Gs.rV.ReduceFields,description:(0,d.t)("transformers.reduce-transformer-editor.modes.description.collapse-field-single-value","Collapse each field into a single value")}],oe=(0,o.useCallback)(ye=>{const Ie=ye.value;H({...z,mode:Ie,includeTimeField:Ie===Gs.rV.ReduceFields?!!z.includeTimeField:!1})},[H,z]),pe=(0,o.useCallback)(()=>{H({...z,includeTimeField:!z.includeTimeField})},[H,z]),ge=(0,o.useCallback)(()=>{H({...z,labelsToFields:!z.labelsToFields})},[H,z]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.reduce-transformer-editor.label-mode","Mode"),"data-testid":Ga.Tp.components.Transforms.Reduce.modeLabel,grow:!0,labelWidth:16,children:(0,j.jsx)(Te.l6,{options:Y,value:Y.find(ye=>ye.value===z.mode)||Y[0],onChange:oe})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.reduce-transformer-editor.label-calculations","Calculations"),"data-testid":Ga.Tp.components.Transforms.Reduce.calculationsLabel,grow:!0,labelWidth:16,children:(0,j.jsx)(_n.S,{placeholder:(0,d.t)("transformers.reduce-transformer-editor.placeholder-choose-stat","Choose stat"),allowMultiple:!0,stats:z.reducers||[],onChange:ye=>{H({...z,reducers:ye})}})}),z.mode===Gs.rV.ReduceFields&&(0,j.jsx)(X.I,{htmlFor:"include-time-field",labelWidth:16,label:(0,d.t)("transformers.reduce-transformer-editor.label-include-time","Include time"),children:(0,j.jsx)(gt.K,{id:"include-time-field",value:!!z.includeTimeField,onChange:pe})}),z.mode!==Gs.rV.ReduceFields&&(0,j.jsx)(X.I,{htmlFor:"labels-to-fields",labelWidth:16,label:(0,d.t)("transformers.reduce-transformer-editor.label-labels-to-fields","Labels to fields"),children:(0,j.jsx)(gt.K,{id:"labels-to-fields",value:!!z.labelsToFields,onChange:ge})})]})},Qi=()=>({id:ce.F.reduce,editor:or,transformation:re.c.reduceTransformer,name:(0,d.t)("transformers.reduce-transformer-editor.name.reduce","Reduce"),description:(0,d.t)("transformers.reduce-transformer-editor.description.reduce-to-single-value","Reduce all rows or data points to a single value (ex. max, mean)."),categories:new Set([v.m.CalculateNewFields]),help:Ae(ce.F.reduce).helperDocs,imageDark:_i,imageLight:kr});var ki=e(87864),Yi=e(43606);class Ji extends o.PureComponent{constructor(H){super(H),this.handleRegexChange=Y=>{const oe=Y.currentTarget.value;let pe=!0;if(oe)try{oe&&(0,bs.dO)(oe)}catch{pe=!1}this.setState(ge=>({...ge,regex:oe,isRegexValid:pe}))},this.handleRenameChange=Y=>{const oe=Y.currentTarget.value;this.setState(pe=>({...pe,renamePattern:oe}))},this.handleRegexBlur=Y=>{const oe=Y.currentTarget.value;let pe=!0;try{oe&&(0,bs.dO)(oe)}catch{pe=!1}this.setState({isRegexValid:pe},()=>{pe&&this.props.onChange({...this.props.options,regex:oe})})},this.handleRenameBlur=Y=>{const oe=Y.currentTarget.value;this.setState({renamePattern:oe},()=>this.props.onChange({...this.props.options,renamePattern:oe}))},this.state={regex:H.options.regex,renamePattern:H.options.renamePattern,isRegexValid:!0}}render(){const{regex:H,renamePattern:Y,isRegexValid:oe}=this.state;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.rename-by-regex-transformer-editor.label-match","Match"),labelWidth:16,invalid:!oe,error:oe?void 0:"Invalid pattern",children:(0,j.jsx)(Ln.p,{placeholder:(0,d.t)("transformers.rename-by-regex-transformer-editor.placeholder-regular-expression-pattern","Regular expression pattern"),value:H||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.rename-by-regex-transformer-editor.label-replace","Replace"),labelWidth:16,children:(0,j.jsx)(Ln.p,{placeholder:(0,d.t)("transformers.rename-by-regex-transformer-editor.placeholder-replacement-pattern","Replacement pattern"),value:Y||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})})]})}}const jo=()=>({id:ce.F.renameByRegex,editor:Ji,transformation:re.c.renameByRegexTransformer,name:(0,d.t)("transformers.rename-by-regex-transformer.name.rename-fields-by-regex","Rename fields by regex"),description:(0,d.t)("transformers.rename-by-regex-transformer.description.rename-parts-using-regex","Rename parts of the query results using a regular expression and replacement pattern."),categories:new Set([v.m.ReorderAndRename]),help:Ae(ce.F.renameByRegex).helperDocs,imageDark:ki,imageLight:Yi});var Xi=e(41781),Zi=e(3211);const Lo=({input:z,options:H,onChange:Y})=>null,Ps=()=>({id:ce.F.seriesToRows,editor:Lo,transformation:re.c.seriesToRowsTransformer,name:(0,d.t)("transformers.series-to-rows-transformer-editor.name.series-to-rows","Series to rows"),description:(0,d.t)("transformers.series-to-rows-transformer-editor.description.merge-multiple-series","Merge multiple series. Return time, metric and values as a row."),categories:new Set([v.m.Combine,v.m.Reformat]),help:Ae(ce.F.seriesToRows).helperDocs,imageDark:Xi,imageLight:Zi});var qi=e(14738),Bo=e(98064);const Yr=({input:z,options:H,onChange:Y})=>{const oe=(0,Ke.ZI)(z).map(we=>({label:we,value:we})),ge=(0,ct.w)().getVariables().map(we=>({label:"$"+we.name,value:"$"+we.name})),ye=(0,o.useCallback)((we,ke)=>{Y({...H,sort:[ke]})},[Y,H]),Ie=H.sort?.length?H.sort:[{}];return(0,j.jsx)("div",{children:Ie.map((we,ke)=>(0,j.jsxs)(Me.C,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.sort-by-transformer-editor.label-field","Field"),labelWidth:10,grow:!0,children:(0,j.jsx)(Te.l6,{options:[...oe,...ge],value:we.field,placeholder:(0,d.t)("transformers.sort-by-transformer-editor.placeholder-select-field","Select field"),onChange:et=>{ye(ke,{...we,field:et.value})}})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.sort-by-transformer-editor.label-reverse","Reverse"),children:(0,j.jsx)(gt.K,{value:!!we.desc,onChange:()=>{ye(ke,{...we,desc:!we.desc})}})})]},`${we.field}/${ke}`))})},Jr=()=>({id:ce.F.sortBy,editor:Yr,transformation:re.c.sortByTransformer,name:(0,d.t)("transformers.sort-by-transformer-editor.name.sort-by","Sort by"),description:(0,d.t)("transformers.sort-by-transformer-editor.description.sort-fields","Sort fields in a frame."),categories:new Set([v.m.ReorderAndRename]),help:Ae(ce.F.sortBy).helperDocs,imageDark:qi,imageLight:Bo});var Uo=e(19719),Wo=e(109);const el=({options:z,onChange:H})=>{const Y=oe=>{H({...z,emptyValue:oe?.value})};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.transpose-transfomer-editor.label-first-field-name","First field name"),labelWidth:24,children:(0,j.jsx)(Ln.p,{placeholder:(0,d.t)("transformers.transpose-transfomer-editor.placeholder-field","Field"),value:z.firstFieldName,onChange:oe=>H({...z,firstFieldName:oe.currentTarget.value}),width:25})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.transpose-transfomer-editor.label-remaining-fields-name","Remaining fields name"),tooltip:(0,d.t)("transformers.transpose-transfomer-editor.tooltip-name-for-value-fields","Name for value fields"),labelWidth:24,children:(0,j.jsx)(Ln.p,{placeholder:(0,d.t)("transformers.transpose-transfomer-editor.placeholder-value","Value"),value:z.restFieldsName,onChange:oe=>H({...z,restFieldsName:oe.currentTarget.value}),width:25})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.grouping-to-matrix-transformer-editor.label-empty-value","Empty value"),children:(0,j.jsx)(Te.l6,{options:(0,Ke.wS)(),value:z.emptyValue,onChange:Y,isClearable:!0})})})]})},Xr=()=>({id:ce.F.transpose,editor:el,transformation:re.c.transposeTransformer,name:(0,d.t)("transformers.transpose-transformer-editor.name.transpose","Transpose"),description:(0,d.t)("transformers.transpose-transformer-editor.description.transpose-data-frame","Transpose the data frame."),categories:new Set([v.m.Reformat]),tags:new Set([(0,d.t)("transformers.transpose-transformer-editor.tags.pivot","Pivot"),(0,d.t)("transformers.transpose-transformer-editor.tags.translate","Translate"),(0,d.t)("transformers.transpose-transformer-editor.tags.transform","Transform")]),imageDark:Uo,imageLight:Wo});var br=e(43243),No=e(11014),tl=e(74824);function Ko({options:z,onChange:H}){const[Y,oe]=(0,o.useState)(z),pe=nl(),ge=al(),ye=()=>{Y.push({path:""}),oe([...Y]),ke()},Ie=et=>{Y&&(Y.splice(et,1),oe([...Y]),ke())},we=(et,tt,dt)=>{Y&&(dt==="alias"?Y[tt].alias=et.currentTarget.value??"":Y[tt].path=et.currentTarget.value??"",oe([...Y]))},ke=()=>{H(Y)};return(0,j.jsxs)("ol",{className:(0,st.cx)(ge.list),children:[Y&&Y.map((et,tt)=>(0,j.jsx)("li",{children:(0,j.jsxs)(Me.C,{children:[(0,j.jsx)(X.I,{label:(0,d.t)("transformers.jsonpath-editor.label-field","Field"),tooltip:pe.field,grow:!0,children:(0,j.jsx)(Ln.p,{onBlur:ke,onChange:dt=>we(dt,tt,"path"),value:et.path,placeholder:(0,d.t)("transformers.jsonpath-editor.placeholder-valid-objectvalue",'A valid json path, e.g. "object.value1" or "object.value2[0]"')})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.jsonpath-editor.label-alias","Alias"),tooltip:pe.alias,children:(0,j.jsx)(Ln.p,{width:12,value:et.alias,onBlur:ke,onChange:dt=>we(dt,tt,"alias")})}),(0,j.jsx)(X.I,{className:(0,st.cx)(ge.removeIcon),children:(0,j.jsx)(as.K,{onClick:()=>Ie(tt),name:"trash-alt",tooltip:(0,d.t)("transformers.jsonpath-editor.tooltip-remove-path","Remove path")})})]})},tt)),(0,j.jsx)(X.I,{children:(0,j.jsx)(fe.$n,{icon:"plus",onClick:()=>ye(),variant:"secondary",children:(0,j.jsx)(d.x6,{i18nKey:"transformers.jsonpath-editor.add-path",children:"Add path"})})})]})}const nl=()=>{const z=[{path:"object",description:(0,d.t)("transformers.get-tooltips.map-valid-paths.description.extract-fields-from-object","=> extract fields from object")},{path:"object.value1",description:(0,j.jsxs)(d.x6,{i18nKey:"transformers.get-tooltips.map-valid-paths.description.extract-value",values:{value:"value1"},children:["=> extract ",(0,j.jsx)("code",{children:"{{ value }}"})]})},{path:"object.value2",description:(0,j.jsxs)(d.x6,{i18nKey:"transformers.get-tooltips.map-valid-paths.description.extract-value",values:{value:"value2"},children:["=> extract ",(0,j.jsx)("code",{children:"{{ value }}"})]})},{path:"object.value2[0]",description:(0,j.jsxs)(d.x6,{i18nKey:"transformers.get-tooltips.map-valid-paths.description.extract-value-first-element",values:{value:"value2"},children:["=> extract ",(0,j.jsx)("code",{children:"{{ value }}"})," first element"]})},{path:"object.value2[1]",description:(0,j.jsxs)(d.x6,{i18nKey:"transformers.get-tooltips.map-valid-paths.description.extract-value-second-element",values:{value:"value2"},children:["=> extract ",(0,j.jsx)("code",{children:"{{ value }}"})," second element"]})}];return{field:(0,j.jsxs)("div",{children:[(0,j.jsx)(d.x6,{i18nKey:"transformers.get-tooltips.description",children:"A valid path of an json object."}),(0,j.jsx)("div",{children:(0,j.jsx)("strong",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.get-tooltips.json-value",children:"JSON Value:"})})}),(0,j.jsx)("pre",{children:(0,j.jsx)("code",{children:["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`)})}),(0,j.jsx)("strong",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.get-tooltips.valid-paths",children:"Valid Paths:"})}),z.map((H,Y)=>(0,j.jsxs)("p",{children:[(0,j.jsx)("code",{children:H.path}),(0,j.jsx)("i",{children:H.description})]},Y))]}),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function al(){return{list:(0,st.css)({marginLeft:"20px"}),removeIcon:(0,st.css)({margin:"0 0 0 4px",alignItems:"center"})}}var Cr=e(41119),gs=(z=>(z.JSON="json",z.KeyValues="kvp",z.Auto="auto",z.RegExp="regexp",z.Delimiter="delimiter",z))(gs||{});const Ts={id:gs.JSON,name:"JSON",description:"Parse JSON string",getParser:z=>H=>JSON.parse(H)},Qn={id:gs.RegExp,name:"RegExp",description:"Parse with RegExp",getParser:z=>{let H=/(?<NewField>.*)/;if((0,bs.AP)(z.regExp))try{H=(0,bs.dO)(z.regExp)}catch(Y){Y instanceof Error&&console.warn(Y.message)}return Y=>Y.match(H)?.groups}};function Fo(z){const H=[];let Y="",oe="";const pe={};for(let ge=0;ge<z.length;ge++){let ye=z[ge];ye===Y&&(Y="",ye=z[++ge]);const Ie=ye==="\\";if(Ie&&(ye=z[++ge]),Ie||Y.length){H.push(ye);continue}switch((ye==='"'||ye==="'")&&(Y=ye),ye){case":":case"=":H.length&&(oe&&(pe[oe]=""),oe=H.join(""),H.length=0);break;case'"':case"'":case" ":case"	":case"\r":case`
`:H.length&&oe===""&&(pe[H.join("")]="",H.length=0);case",":case";":case"&":case"{":case"}":if(H.length){const we=H.join("");oe.length?(pe[oe]=we,oe=""):oe=we,H.length=0}break;default:H.push(ye),ge===z.length-1&&oe===""&&H.length&&(pe[H.join("")]="",H.length=0)}}return oe.length&&(pe[oe]=H.join("")),pe}const wo={id:gs.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",getParser:z=>Fo},Tr={id:gs.Delimiter,name:"Split by delimiter",description:"Splits at delimited values, such as commas",getParser:({delimiter:z=","})=>{const H=new RegExp(`\\s*${(0,bs.jD)(z)}\\s*`,"g");return Y=>{const oe=Y.trim().split(H),pe={};for(const ge of oe)pe[ge]=1;return pe}}},Vo=[Ts,wo,Tr,Qn],Ss={id:gs.Auto,name:"Auto",description:"parse new fields automatically",getParser:z=>{const H=Vo.map(Y=>Y.getParser(z));return Y=>{for(const oe of H)try{const pe=oe(Y);if(pe!=null)return pe}catch{}}}},Is=new $e.O(()=>[...Vo,Ss]),Rs={id:ce.F.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{delimiter:","},operator:(z,H)=>Y=>Y.pipe((0,Dt.T)(oe=>Rs.transformer(z,H)(oe))),transformer:z=>H=>H.map(Y=>sl(Y,z))};function sl(z,H){if(!H.source)return z;const Y=(0,ns.UI)(z,H.source);if(!Y)return z;const oe=Is.getIfExists(H.format??gs.Auto);if(!oe)throw new Error("unkonwn extractor");const pe=z.length,ge=[],ye=new Map,Ie=oe.getParser(H);for(let ke=0;ke<pe;ke++){let et=Y.values[ke];if((0,J.isString)(et))try{et=Ie(et)}catch{et={}}if(et!=null){if(H.format===gs.JSON&&H.jsonPaths&&H.jsonPaths?.length>0){const tt={},dt=H.jsonPaths.filter(ft=>ft.path);dt.length>0&&(dt.forEach(ft=>{const it=ft.alias&&ft.alias.length>0?ft.alias:ft.path;tt[it]=(0,J.get)(et,ft.path)??"Not Found"}),et=tt)}for(const[tt,dt]of Object.entries(et)){let ft=ye.get(tt);ft==null&&(ft=new Array(pe).fill(void 0),ye.set(tt,ft),ge.push(tt)),ft[ke]=dt}}}const we=ge.map(ke=>{const et=ye.get(ke);if(!et)throw new Error(`Could not find field with name: ${ke}`);const tt={name:ke,values:et,type:et?(0,Cr.oE)(et.find(dt=>dt!=null)):Z.PU.other,config:{}};return ee.$.featureToggles.extractFieldsNameDeduplication&&(tt.name=(0,ie.fk)(tt,z)),tt});if(H.keepTime){const ke=(0,ns.UI)(z,"Time")||(0,ns.UI)(z,"time");ke&&we.unshift(ke)}return H.replace||we.unshift(...z.fields),{...z,fields:we}}const rl=({input:z,options:H={delimiter:","},onChange:Y})=>{const oe={settings:{width:30,placeholderText:(0,d.t)("transformers.extract-fields-transformer-editor.field-name-picker-settings.placeholderText.select-field","Select field")},name:"",id:"",editor:()=>null},pe=dt=>{Y({...H,source:dt})},ge=dt=>{Y({...H,format:dt?.value})},ye=dt=>{Y({...H,jsonPaths:dt})},Ie=dt=>{Y({...H,regExp:dt.target.value})},we=dt=>{Y({...H,delimiter:dt.value})},ke=()=>{H.replace&&(H.keepTime=!1),Y({...H,replace:!H.replace})},et=()=>{Y({...H,keepTime:!H.keepTime})},tt=Is.selectOptions(H.format?[H.format]:void 0);return(0,j.jsxs)("div",{children:[(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.extract-fields-transformer-editor.label-source","Source"),labelWidth:16,children:(0,j.jsx)(xa.O,{context:{data:z},value:H.source??"",onChange:pe,item:oe})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.extract-fields-transformer-editor.label-format","Format"),labelWidth:16,children:(0,j.jsx)(Te.l6,{value:tt.current[0],options:tt.options,onChange:ge,width:24,placeholder:(0,d.t)("transformers.extract-fields-transformer-editor.placeholder-auto","Auto")})})}),H.format===gs.RegExp&&(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:"RegExp",labelWidth:16,interactive:!0,tooltip:(0,d.t)("transformers.extract-fields-transformer-editor.tooltip-regexp","Example: {{regexExample}}",{regexExample:"/(?<NewField>.*)/",interpolation:{escapeValue:!1}}),children:(0,j.jsx)(Ln.p,{placeholder:"/(?<NewField>.*)/",value:H.regExp,onChange:Ie})})}),H.format===gs.JSON&&(0,j.jsx)(Ko,{options:H.jsonPaths??[],onChange:ye}),H.format===gs.Delimiter&&(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.extract-fields-transformer-editor.label-delimiter","Delimiter"),labelWidth:16,children:(0,j.jsx)(br.G,{value:H.delimiter,options:[{value:","},{value:";"},{value:"|"}],onChange:we,placeholder:(0,d.t)("transformers.extract-fields-transformer-editor.placeholder-select-delimiter","Select delimiter..."),width:24})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.extract-fields-transformer-editor.label-replace-all-fields","Replace all fields"),labelWidth:16,children:(0,j.jsx)(gt.K,{value:H.replace??!1,onChange:ke})})}),H.replace&&(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.extract-fields-transformer-editor.label-keep-time","Keep time"),labelWidth:16,children:(0,j.jsx)(gt.K,{value:H.keepTime??!1,onChange:et})})})]})},Zr=()=>({id:ce.F.extractFields,editor:rl,transformation:Rs,name:(0,d.t)("transformers.extract-fields-transformer-editor.name.extract-fields","Extract fields"),description:(0,d.t)("transformers.extract-fields-transformer-editor.description.parse-fields-from-content","Parse fields from content (JSON, labels, etc)."),categories:new Set([v.m.Reformat]),help:Ae(ce.F.extractFields).helperDocs,imageDark:No,imageLight:tl});var Mr=e(59695),$o=e(26760),zo=e(61934);const qr=()=>({id:ce.F.joinByLabels,name:(0,d.t)("transformers.get-join-by-labels-transformer.name.join-by-labels","Join by labels"),description:(0,d.t)("transformers.get-join-by-labels-transformer.description.flatten-labeled-results-table-joined-labels","Flatten labeled results into a table joined by labels."),defaultOptions:{},operator:(z,H)=>Y=>Y.pipe((0,Dt.T)(oe=>qr().transformer(z,H)(oe))),transformer:z=>H=>!H||!H.length?H:[Go(z,H)]});function Go(z,H){if(!z.value?.length)return Ho("No value label configured");const Y=(0,Ke.aG)(H);if(Y.size<1)return Ho("No labels in result");if(!Y.has(z.value))return Ho("Value label not found");let oe=z.join?.length?z.join:Array.from(Y);oe=oe.filter(tt=>tt!==z.value);const pe=new Set,ge=new Map,ye={};for(const tt of H)for(const dt of tt.fields)if(dt.labels&&dt.type!==Z.PU.time){const ft=oe.map(jn=>dt.labels[jn]),it=ft.join(",");let vt=ge.get(it);vt||(vt={keys:ft,values:{}},ge.set(it,vt));const Lt=dt.labels[z.value],Xt=dt.values,fn=vt.values[Lt];fn?vt.values[Lt]=fn.concat(Xt):vt.values[Lt]=Xt,ye[Lt]||(ye[Lt]=dt),pe.add(Lt)}const Ie=Array.from(pe),we=oe.map(()=>[]),ke=Ie.map(()=>[]);for(const tt of ge.values()){let dt=-1,ft=!1;for(;!ft;){dt++,ft=!0;for(let it=0;it<oe.length;it++)we[it].push(tt.keys[it]);for(let it=0;it<Ie.length;it++){const vt=Ie[it],Lt=tt.values[vt]??[];ke[it].push(Lt[dt]),Lt.length>dt+1&&(ft=!1)}}}const et={fields:[],length:ke[0].length,refId:`${ce.F.joinByLabels}-${H.map(tt=>tt.refId).join("-")}`};for(let tt=0;tt<oe.length;tt++)et.fields.push({name:oe[tt],config:{},type:Z.PU.string,values:we[tt]});for(let tt=0;tt<Ie.length;tt++){const dt=ye[Ie[tt]];et.fields.push({name:Ie[tt],config:{},type:dt.type??Z.PU.number,values:ke[tt]})}return et}function Ho(z){return{meta:{notices:[{severity:"error",text:z}]},fields:[{name:"Error",type:Z.PU.string,config:{},values:[z]}],length:0}}function ol({input:z,options:H,onChange:Y}){const oe=(0,o.useMemo)(()=>{let we;const ke=(0,Ke.aG)(z),et=Array.from(ke).map(Lt=>({label:Lt,value:Lt}));let tt=et.find(Lt=>Lt.value===H.value);!tt&&H.value&&(tt={label:`${H.value} (not found)`,value:H.value},et.push(tt)),z.length?ke.size===0&&(we=(0,j.jsx)(Cs.F,{title:(0,d.t)("transformers.join-by-labels-transformer-editor.info.title-no-labels-found","No labels found"),children:(0,j.jsx)(d.x6,{i18nKey:"transformers.join-by-labels-transformer-editor.info.input-contain-labels",children:"The input does not contain any labels"})})):we=(0,j.jsx)(Cs.F,{title:(0,d.t)("transformers.join-by-labels-transformer-editor.info.title-no-input-found","No input found"),children:(0,j.jsx)(d.x6,{i18nKey:"transformers.join-by-labels-transformer-editor.info.no-input-or-labels-found",children:"No input (or labels) found"})}),ke.delete(H.value);const dt=Array.from(ke).map(Lt=>({label:Lt,value:Lt}));let ft=dt;const it=!!H.join?.length;let vt="Join";return it?ft=dt.filter(Lt=>!H.join.includes(Lt.value)):vt=dt.map(Lt=>Lt.value).join(", "),{warn:we,valueOptions:et,valueOption:tt,joinOptions:dt,addOptions:ft,addText:vt,hasJoin:it,key:Date.now()}},[H,z]),pe=(we,ke)=>{if(!H.join)return;const et=H.join.slice();if(ke)et[we]=ke;else if(et.splice(we,1),!et.length){Y({...H,join:void 0});return}const tt=new Set(et);H.value&&tt.delete(H.value),Y({...H,join:Array.from(tt)})},ge=we=>{const ke=we?.value;if(!ke)return;const et=H.join?H.join.slice():[];et.push(ke),Y({...H,join:et})},ye=10,Ie="No labels found";return(0,j.jsxs)("div",{children:[oe.warn,(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{error:(0,d.t)("transformers.join-by-labels-transformer-editor.error-required","Required"),invalid:!H.value?.length,label:(0,d.t)("transformers.join-by-labels-transformer-editor.label-value","Value"),labelWidth:ye,tooltip:(0,d.t)("transformers.join-by-labels-transformer-editor.tooltip-select-label-indicating-values","Select the label indicating the values name"),children:(0,j.jsx)(Te.l6,{options:oe.valueOptions,value:oe.valueOption,onChange:we=>Y({...H,value:we.value}),noOptionsMessage:Ie})})}),oe.hasJoin?H.join.map((we,ke)=>(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.join-by-labels-transformer-editor.label-join","Join"),labelWidth:ye,error:"Unable to join by the value label",invalid:we===H.value,children:(0,j.jsxs)(rn.B,{children:[(0,j.jsx)(Te.l6,{options:oe.joinOptions,value:oe.joinOptions.find(et=>et.value===we),isClearable:!0,onChange:et=>pe(ke,et?.value),noOptionsMessage:Ie}),!!(oe.addOptions.length&&ke===H.join.length-1)&&(0,j.jsx)(Mr.i,{icon:"plus",label:"",options:oe.addOptions,onChange:ge,variant:"secondary"})]})})},we+ke)):(0,j.jsx)(j.Fragment,{children:!!oe.addOptions.length&&(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.join-by-labels-transformer-editor.label-join","Join"),labelWidth:ye,children:(0,j.jsx)(Te.l6,{options:oe.addOptions,placeholder:oe.addText,onChange:ge,noOptionsMessage:Ie})})})})]})}const il=()=>{const z=qr();return{id:z.id,editor:ol,transformation:z,name:z.name,description:z.description,state:Be.pn.beta,categories:new Set([v.m.Combine]),help:Ae(z.id).helperDocs,imageDark:$o,imageLight:zo}};var ll=e(93139),cl=e(88092),dl=e(73630),As=e(69862),ms=e(65474),eo=e(46189);const rs={id:ce.F.fieldLookup,name:"Lookup fields from resource",description:"Use a field value to lookup countries, states, or airports.",defaultOptions:{},operator:z=>H=>H.pipe((0,As.Z)(Y=>(0,ms.H)(to(Y,z))))};async function to(z,H){const Y=te.sJ.get(se.Ct.byName).get(H?.lookupField),oe=await(0,eo.q3)(H?.gazetteer??eo.fx);return oe.frame?ir(z,oe,Y):Promise.reject("missing frame in gazetteer")}function ir(z,H,Y){const oe=H.frame()?.fields;return oe?z.map(pe=>{const ge=pe.length,ye=[];for(const Ie of pe.fields)if(ye.push(Ie),Y(Ie,pe,z)){const we=Ie.values,ke=[];for(const et of oe){const tt=new Array(ge);ke.push(tt),ye.push({...et,values:tt})}for(let et=0;et<H.count;et++){const tt=H.find(we[et]);if(tt?.index!=null)for(let dt=0;dt<oe.length;dt++)ke[dt][et]=oe[dt].values[tt.index]}}return{...pe,fields:ye}}):z}const ws={settings:{}},ul=({input:z,options:H,onChange:Y})=>{const oe={settings:{width:30,filter:ye=>ye.type===Z.PU.string,placeholderText:(0,d.t)("transformers.field-lookup-transformer-editor.field-name-picker-settings.placeholderText.select-text-field","Select text field"),noFieldsMessage:(0,d.t)("transformers.field-lookup-transformer-editor.field-name-picker-settings.noFieldsMessage.no-text-fields-found","No text fields found")},name:"",id:"",editor:()=>null},pe=(0,o.useCallback)(ye=>{Y({...H,lookupField:ye})},[Y,H]),ge=(0,o.useCallback)(ye=>{Y({...H,gazetteer:ye})},[Y,H]);return(0,j.jsxs)("div",{children:[(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.field-lookup-transformer-editor.label-field","Field"),labelWidth:12,children:(0,j.jsx)(xa.O,{context:{data:z},value:H?.lookupField??"",onChange:pe,item:oe})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.field-lookup-transformer-editor.label-lookup","Lookup"),labelWidth:12,children:(0,j.jsx)(ll.G,{value:H?.gazetteer??"",context:{data:z},item:ws,onChange:ge})})})]})},_o=()=>({id:ce.F.fieldLookup,editor:ul,transformation:rs,name:(0,d.t)("transformers.field-lookup-transformer-editor.name.lookup-fields-from-resource","Lookup fields from resource"),description:(0,d.t)("transformers.field-lookup-transformer-editor.description.lookup-additional-fields-external-source","Use a field value to lookup countries, states, or airports."),state:Be.pn.alpha,categories:new Set([v.m.PerformSpatialOperations]),help:Ae(ce.F.fieldLookup).helperDocs,imageDark:cl,imageLight:dl});var hl=e(84277),Qo=e(91551),fl=e(359),Xs=e(1027);const no=(z,H,Y=[])=>(H===0?Y.push(z):z.forEach(oe=>{no(oe,H-1,Y)}),Y);function pl(z){const H=z[0].length,Y=z.length,oe=new Map;for(let pe=0;pe<H;pe++){let ge=oe;for(let ye=0;ye<Y;ye++){let Ie=z[ye][pe],we=ge.get(Ie);we==null&&(we=ye===Y-1?[]:new Map,ge.set(Ie,we)),ge=we}ge.push(pe)}return no(oe,Y)}const gl={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function ao(z,H,Y){return H.map((oe,pe)=>z.withNames?`${oe}${z.separator1}${Y[pe]}`:Y[pe]).join(z.separator2)}function ko(z,H){const Y={};return z.forEach((oe,pe)=>{Y[oe]=String(H[pe])}),Y}const Yo=()=>({id:ce.F.partitionByValues,name:(0,d.t)("transformers.get-partition-by-values-transformer.name.partition-by-values","Partition by values"),description:(0,d.t)("transformers.get-partition-by-values-transformer.description.split-oneframe-dataset-multiple-series","Split a one-frame dataset into multiple series."),defaultOptions:{keepFields:!1},operator:(z,H)=>Y=>Y.pipe((0,Dt.T)(oe=>Yo().transformer(z,H)(oe))),transformer:(z,H)=>{const Y=(0,fl.R)({names:z.fields});if(!Y)return Xs.W.transformer({},H);const oe=(0,te.NS)(Y);return pe=>pe.length?Or(pe[0],oe,z):pe}});function so(z,H,Y){const oe=z.fields.filter(Ie=>H(Ie,z,[z]));if(!oe.length)return[z];const pe=oe.map(Ie=>Ie.values),ge=oe.map(Ie=>Ie.name),ye={...gl,...Y?.naming};return pl(pe).map(Ie=>{let we=z.name,ke={};if(ye.asLabels)ke=ko(ge,oe.map((tt,dt)=>pe[dt][Ie[0]]));else{let tt=ao(ye,ge,oe.map((dt,ft)=>pe[ft][Ie[0]]));ye?.append&&z.name&&(tt=`${z.name} ${tt}`),we=tt}let et=z.fields;if(!Y?.keepFields){const tt=new Set(ge);et=z.fields.filter(dt=>!tt.has(dt.name))}return{name:we,refId:`${z.refId}-${we}`,meta:z.meta,length:Ie.length,fields:et.map(tt=>{const dt=tt.values,ft=Array(Ie.length);for(let it=0;it<Ie.length;it++)ft[it]=dt[Ie[it]];return{name:tt.name,type:tt.type,config:(0,J.cloneDeep)(tt.config),labels:{...tt.labels,...ke},values:ft}})}})}function Or(z,H,Y){let oe={},pe={...z,fields:z.fields.map(ye=>{let Ie=ye,we=ye.config.displayNameFromDS??ye.config.displayName;return we&&(Ie={...ye,config:{...ye.config},state:{...ye.state}},oe[we]=ye.name,Ie.name=we,delete Ie.config.displayName,delete Ie.config.displayNameFromDS,delete Ie.state?.displayName),Ie})},ge=so(pe,H,Y);return(0,ie.Fm)(ge),ge.forEach(ye=>{ye.fields.forEach(Ie=>{Ie.name in oe&&(Ie.name=oe[Ie.name]??Ie.name,Ie.config.displayName=Ie.state.displayName),delete Ie.state?.displayName,delete Ie.state?.multipleFrames})}),ge}function ro({input:z,options:H,onChange:Y}){const oe=(0,yr.sE)(z),pe=(0,yr.m3)(oe),ge=(0,o.useMemo)(()=>{const dt=new Set(H.fields);return dt.size<1?pe:pe.filter(ft=>!dt.has(ft.value))},[pe,H]),ye=(0,o.useCallback)(dt=>{if(!dt.value)return;const ft=new Set(H.fields);ft.add(dt.value),Y({...H,fields:[...ft]})},[Y,H]);let Ie;(dt=>{dt[dt.asLabels=0]="asLabels",dt[dt.frameName=1]="frameName"})(Ie||(Ie={}));const we=[{label:(0,d.t)("transformers.partition-by-values-editor.naming-modes-options.label.as-label","As label"),value:0},{label:(0,d.t)("transformers.partition-by-values-editor.naming-modes-options.label.as-frame-name","As frame name"),value:1}],ke=[{label:(0,d.t)("transformers.partition-by-values-editor.keep-fields-options.label.yes","Yes"),value:!0},{label:(0,d.t)("transformers.partition-by-values-editor.keep-fields-options.label.no","No"),value:!1}],et=(0,o.useCallback)(dt=>{if(!dt)return;const ft=new Set(H.fields);ft.delete(dt),Y({...H,fields:[...ft]})},[Y,H]);if(z.length>1)return(0,j.jsx)(Es.P,{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.partition-by-values-editor.partition-values-works-single-frame",children:"Partition by values only works with a single frame."})});const tt=[...new Set(H.fields)];return(0,j.jsxs)("div",{children:[(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.partition-by-values-editor.label-field","Field"),labelWidth:10,grow:!0,children:(0,j.jsxs)(rn.B,{children:[tt.map(dt=>(0,j.jsx)(fe.$n,{icon:"times",variant:"secondary",size:"md",onClick:()=>et(dt),children:dt},dt)),ge.length&&(0,j.jsx)(Mr.i,{variant:"secondary",size:"md",options:ge,onChange:ye,label:(0,d.t)("transformers.partition-by-values-editor.label-select-field","Select field"),icon:"plus",isFullWidth:!1})]})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{tooltip:(0,d.t)("transformers.partion-by-values-editor.tooltip-naming","Sets how the names of the selected fields are displayed. As frame name is usually better for tabular data"),label:(0,d.t)("transformers.partition-by-values-editor.label-naming","Naming"),labelWidth:10,children:(0,j.jsx)(le.z,{options:we,value:H.naming?.asLabels===void 0||H.naming.asLabels?0:1,onChange:dt=>Y({...H,naming:{...H.naming,asLabels:dt===0}})})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{tooltip:(0,d.t)("transformers.partition-by-values-editor.tooltip-keeps-partition-fields-frames","Keeps the partition fields in the frames"),label:(0,d.t)("transformers.partition-by-values-editor.label-keep-fields","Keep fields"),labelWidth:16,children:(0,j.jsx)(le.z,{options:ke,value:H.keepFields,onChange:dt=>Y({...H,keepFields:dt})})})})]})}const Zs=()=>{const z=Yo();return{id:ce.F.partitionByValues,editor:ro,transformation:z,name:z.name,description:z.description,state:Be.pn.alpha,categories:new Set([v.m.Reformat]),help:Ae(ce.F.partitionByValues).helperDocs,imageDark:hl,imageLight:Qo}};var Sr=e(3779),lr=e(10177),qs=e(39443),oo=e(18700),Ir=e(8721),Hs=(z=>(z.TimeSeriesWide="wide",z.TimeSeriesLong="long",z.TimeSeriesMulti="multi",z.TimeSeriesMany="many",z))(Hs||{});function io(z){if(!Array.isArray(z)||z.length===0)return z;const H=[];for(const Y of Jo(z)){const oe=Y.fields[0];if(!oe||oe.type!==Z.PU.time)continue;const pe=[],ge=[];for(const ye of Y.fields)switch(ye.type){case Z.PU.number:case Z.PU.boolean:pe.push(ye);break;case Z.PU.string:ge.push(ye);break}for(const ye of pe)if(ge.length){const Ie=new Map;for(let we=0;we<Y.length;we++){const ke=oe.values[we],et=ye.values[we];if(et===void 0||ke==null)continue;const tt=ge.map(ft=>ft.values[we]).join("/");let dt=Ie.get(tt);if(!dt){dt={key:tt,time:[],value:[],labels:{}};for(const ft of ge)dt.labels[ft.name]=ft.values[we];Ie.set(tt,dt)}dt.time.push(ke),dt.value.push(et)}for(const we of Ie.values())H.push({name:Y.name,refId:Y.refId,meta:{...Y.meta,type:qs.m.TimeSeriesMulti},fields:[{...oe,values:we.time},{...ye,values:we.value,labels:we.labels}],length:we.time.length})}else H.push({name:Y.name,refId:Y.refId,meta:{...Y.meta,type:qs.m.TimeSeriesMulti},fields:[oe,ye],length:Y.length})}return H}function Jo(z){if(!Array.isArray(z)||z.length===0)return z;const H=[];for(const Y of z){let oe;const pe=[],ge={},ye={},Ie={},we={};for(let it=0;it<Y.fields.length;it++){const vt=Y.fields[it];switch(vt.type){case Z.PU.string:case Z.PU.boolean:vt.name in we||(we[vt.name]=it,ye[vt.name]=!0);break;case Z.PU.time:if(!oe){oe=vt;break}default:if(vt.name in ge){const fn=ge[vt.name];if(vt.type!==fn)continue}else ge[vt.name]=vt.type,pe.push(vt.name);const Lt=JSON.stringify(vt.labels),Xt=Ie[Lt];if(Xt!==void 0?Xt.push(it):Ie[Lt]=[it],vt.labels!=null)for(const fn in vt.labels)ye[fn]=!0}}if(!oe)continue;const ke=[],et=[],tt=[],dt=[];for(let it=0;it<Y.length;it++)ke.push({time:oe.values[it],wideRowIndex:it});for(const it in Ie)et.push(it);for(const it in ye)tt.push(it);for(const it in we)dt.push(it);ke.sort((it,vt)=>it.time-vt.time),et.sort(),tt.sort(),pe.sort();const ft=new oo.k({...Y,meta:{...Y.meta,type:qs.m.TimeSeriesLong},fields:[{name:oe.name,type:oe.type}]});for(const it of pe)ft.addField({name:it,type:ge[it]});for(const it of tt)ft.addField({name:it,type:Z.PU.string});for(const it of ke){const{time:vt,wideRowIndex:Lt}=it;for(const Xt of et){const fn={};for(const un of dt)fn[un]=Y.fields[we[un]].values[Lt];let jn=0;for(const un of Ie[Xt]){const Tn=Y.fields[un];if(jn++===0&&Tn.labels!=null)for(const Gn in Tn.labels)fn[Gn]=Tn.labels[Gn];fn[Tn.name]=Tn.values[Lt]}fn[oe.name]=vt,ft.add(fn)}}H.push(ft)}return H}function Ne(z){return Or(z,Y=>Y.type===Z.PU.string).map(Y=>(Y.meta||(Y.meta={}),Y.meta.type=qs.m.TimeSeriesMulti,Y))}const be=()=>({id:ce.F.prepareTimeSeries,name:(0,d.t)("transformers.prepare-time-series.name.prepare-time-series","Prepare time series"),description:(0,d.t)("transformers.prepare-time-series.description.stretch-data-frames","Stretch data frames from the wide format into the long format."),defaultOptions:{},operator:(z,H)=>Y=>Y.pipe((0,Dt.T)(oe=>be().transformer(z,H)(oe))),transformer:z=>{const H=z?.format??"wide";if(H==="many"||H==="multi")return io;if(H==="long")return Jo;const Y=te.sJ.get(se.Ct.firstTimeField).get({});return oe=>{if(!oe.length)return[];const pe=[];for(const ye of oe)ye.meta?.type===qs.m.TimeSeriesLong?Ne(ye).forEach(Ie=>pe.push(Ie)):pe.push(ye);const ge=(0,Ir.Fd)({frames:pe,joinBy:Y,keepOriginIndices:!0});return ge?(ge.meta||(ge.meta={}),ge.meta.type=qs.m.TimeSeriesWide,[ge]):[]}}});function ze(z){const{options:H,onChange:Y}=z,oe=(0,$t.of)(nt),pe={label:(0,d.t)("transformers.prepare-time-series-editor.wide-info.label.wide-time-series","Wide time series"),value:Hs.TimeSeriesWide,description:(0,d.t)("transformers.prepare-time-series-editor.wide-info.description.creates-single-frame-joined","Creates a single frame joined by time"),info:(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.wide-info.single-frame",children:"Single frame"})}),(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.wide-info.st-field-is-shared-time",children:"1st field is shared time field"})}),(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.wide-info.time-in-ascending-order",children:"Time in ascending order"})}),(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.wide-info.multiple-value-fields-of-any-type",children:"Multiple value fields of any type"})})]})},ge={label:(0,d.t)("transformers.prepare-time-series-editor.multi-info.label.multiframe-time-series","Multi-frame time series"),value:Hs.TimeSeriesMulti,description:(0,d.t)("transformers.prepare-time-series-editor.multi-info.description.creates-frame-timenumber","Creates a new frame for each time/number pair"),info:(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.multi-info.multiple-frames",children:"Multiple frames"})}),(0,j.jsx)("li",{children:(0,j.jsxs)(d.x6,{i18nKey:"transformers.multi-info.frame-fields-value",values:{field1:"time",field2:"value"},children:["Each frame has two fields: ","{{field1}}",", ","{{field2}}"]})}),(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.multi-info.time-in-ascending-order",children:"Time in ascending order"})}),(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.multi-info.string-values-are-represented-as-labels",children:"String values are represented as labels"})}),(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.multi-info.all-values-are-numeric",children:"All values are numeric"})})]})},ye={label:(0,d.t)("transformers.prepare-time-series-editor.long-info.label.long-time-series","Long time series"),value:Hs.TimeSeriesLong,description:(0,d.t)("transformers.prepare-time-series-editor.long-info.description.convert-each-frame-to-long-format","Convert each frame to long format"),info:(0,j.jsxs)("ul",{children:[(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.long-info.single-frame",children:"Single frame"})}),(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.long-info.st-field-is-time",children:"1st field is time field"})}),(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.long-info.ascending-order-duplicates",children:"Time in ascending order, but may have duplicates"})}),(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.long-info.string-values-separate",children:"String values are represented as separate fields rather than as labels"})}),(0,j.jsx)("li",{children:(0,j.jsx)(d.x6,{i18nKey:"transformers.long-info.multiple-value-fields-may-exist",children:"Multiple value fields may exist"})})]})},Ie=[pe,ge,ye],we=(0,o.useCallback)(ke=>{Y({...H,format:ke.value})},[Y,H]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.prepare-time-series-editor.label-format","Format"),labelWidth:12,children:(0,j.jsx)(Te.l6,{width:35,options:Ie,value:Ie.find(ke=>ke.value===Hs.TimeSeriesMulti&&H.format===Hs.TimeSeriesMany?!0:ke.value===H.format)||Ie[0],onChange:we,className:"flex-grow-1"})})}),(0,j.jsx)(Me.C,{children:(0,j.jsx)(X.I,{label:(0,d.t)("transformers.prepare-time-series-editor.label-info","Info"),labelWidth:12,children:(0,j.jsx)("div",{className:oe.info,children:(Ie.find(ke=>ke.value===H.format)||Ie[0]).info})})})]})}const nt=z=>({info:(0,st.css)({marginLeft:"20px"})}),yt=()=>{const z=be();return{id:z.id,editor:ze,transformation:z,name:z.name,description:z.description,categories:new Set([v.m.Reformat]),help:Ae(z.id).helperDocs,imageDark:Sr,imageLight:lr}};var bt=e(19693),St=e(92351),zt=e(66648),qt=e(48817),gn=(z=>(z.linear="linear",z.polynomial="polynomial",z))(gn||{});const Dn={predictionCount:100,modelType:"linear",degree:2},In=[{label:()=>(0,d.t)("transformers.regression-transformer-editor.label.quadratic","Quadratic"),value:2},{label:()=>(0,d.t)("transformers.regression-transformer-editor.label.cubic","Cubic"),value:3},{label:()=>(0,d.t)("transformers.regression-transformer-editor.label.quartic","Quartic"),value:4},{label:()=>(0,d.t)("transformers.regression-transformer-editor.label.quintic","Quintic"),value:5},{label:()=>(0,d.t)("transformers.regression-transformer-editor.label.sextic","Sextic"),value:6},{label:()=>(0,d.t)("transformers.regression-transformer-editor.label.septic","Septic"),value:7},{label:()=>(0,d.t)("transformers.regression-transformer-editor.label.octic","Octic"),value:8},{label:()=>(0,d.t)("transformers.regression-transformer-editor.label.nonic","Nonic"),value:9},{label:()=>(0,d.t)("transformers.regression-transformer-editor.label.decic","Decic"),value:10}],Hn=()=>({id:ce.F.regression,name:(0,d.t)("transformers.regression.name.trendline","Trendline"),description:(0,d.t)("transformers.regression.description.create-new-data-frame","Create a new data frame containing values predicted by a statistical model."),operator:(z,H)=>Y=>Y.pipe((0,Dt.T)(oe=>Hn().transformer(z,H)(oe))),transformer:(z,H)=>Y=>{const{predictionCount:oe,modelType:pe,degree:ge}={...Dn,...z};if(Y.length===0)return Y;const ye=te.sJ.get(se.Ct.byName).get(z.yFieldName),Ie=te.sJ.get(se.Ct.byName).get(z.xFieldName);let we,ke,et;for(const Tn of Y){const Gn=Tn.fields.find(Da=>ye(Da,Tn,Y));if(Gn){ke=Gn;const Da=Tn.fields.find(fs=>Ie(fs,Tn,Y));if(Da){we=Da,et=Tn;break}else throw"X and Y fields must be part of the same frame"}}if(!we||!ke)return Y;let tt=we.values[0],dt=we.values[0];for(let Tn=1;Tn<we.values.length;Tn++)we.values[Tn]<tt&&(tt=we.values[Tn]),we.values[Tn]>dt&&(dt=we.values[Tn]);const ft=(dt-tt)/(oe-1),it=[...[...Array(oe-1).keys()].map((Tn,Gn)=>Gn*ft+tt),dt],vt=we.type===Z.PU.time?tt:0,Lt=[],Xt=[];for(let Tn=0;Tn<we.values.length;Tn++)ke.values[Tn]!==null&&!isNaN(ke.values[Tn])&&(Xt.push(we.values[Tn]-vt),Lt.push(ke.values[Tn]));let fn;switch(pe){case"linear":fn=new qt.X(Xt,Lt);break;case"polynomial":fn=new zt.Y(Xt,Lt,ge);break;default:return Y}let jn=`${(0,d.t)("transformers.regression-transformer-editor.model-type-options.label.linear","Linear")} ${(0,d.t)("transformers.regression-transformer-editor.regression","regression")}`;pe==="polynomial"&&(jn=`${In.find(Gn=>Gn.value===ge)?.label()} ${(0,d.t)("transformers.regression-transformer-editor.model-type-options.label.polynomial","Polynomial").toLocaleLowerCase()} ${(0,d.t)("transformers.regression-transformer-editor.regression","regression")}`);const un={name:`${jn}`,length:it.length,fields:[{name:we.name,type:we.type,values:it,config:{}},{name:`${(0,ie.Ct)(ke,et,Y)}`,type:ke.type,values:it.map(Tn=>fn.predict(Tn-vt)),config:{}}]};return[...Y,un]}}),qn=()=>[{label:(0,d.t)("transformers.regression-transformer-editor.model-type-options.label.linear","Linear"),value:gn.linear},{label:(0,d.t)("transformers.regression-transformer-editor.model-type-options.label.polynomial","Polynomial"),value:gn.polynomial}],Kn={editor:xa.O,id:"",name:"",settings:{width:24,isClearable:!1}},Wn=20,la={firstTimeMatcher:te.sJ.get(se.Ct.firstTimeField).get({}),numericMatcher:te.sJ.get(se.Ct.numeric).get({})},La=(z,H,Y)=>{for(const oe of z){const pe=oe.fields.find(ge=>H(ge,oe,z)&&ge!==Y);if(pe)return pe}},sa=({input:z,options:H,onChange:Y})=>{const oe=(0,o.useMemo)(()=>qn(),[]),pe=(0,o.useMemo)(()=>In.map(ge=>({label:ge.label(),value:ge.value})),[]);return(0,o.useEffect)(()=>{let ge,ye;H.xFieldName&&H.yFieldName||(H.xFieldName||(ge=La(z,la.firstTimeMatcher)||La(z,la.numericMatcher)),H.yFieldName||(ye=La(z,la.numericMatcher,ge)),ge&&ye&&Y({...H,xFieldName:ge.name,yFieldName:ye.name}))},[z,H,Y]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(pa,{label:(0,d.t)("transformers.regression-transformer-editor.label-x-field","X field"),children:(0,j.jsx)(xa.O,{context:{data:z},value:H.xFieldName??"",item:Kn,onChange:ge=>Y({...H,xFieldName:ge})})}),(0,j.jsx)(pa,{label:(0,d.t)("transformers.regression-transformer-editor.label-y-field","Y field"),children:(0,j.jsx)(xa.O,{context:{data:z},value:H.yFieldName??"",item:Kn,onChange:ge=>Y({...H,yFieldName:ge})})}),(0,j.jsx)(pa,{label:(0,d.t)("transformers.regression-transformer-editor.label-model-type","Model type"),children:(0,j.jsx)(br.G,{value:H.modelType??Dn.modelType,onChange:ge=>Y({...H,modelType:ge.value??Dn.modelType}),options:oe})}),(0,j.jsx)(pa,{label:(0,d.t)("transformers.regression-transformer-editor.label-predicted-points","Predicted points"),tooltip:(0,d.t)("transformers.regression-transformer-editor.tooltip-number-of-xy-points-to-predict","Number of X,Y points to predict"),children:(0,j.jsx)(jt.Q,{value:H.predictionCount??Dn.predictionCount,onChange:ge=>Y({...H,predictionCount:ge})})}),H.modelType===gn.polynomial&&(0,j.jsx)(pa,{label:(0,d.t)("transformers.regression-transformer-editor.label-degree","Degree"),tooltip:(0,d.t)("transformers.regression-transformer-editor.tooltip-high-degree-polynomial","Higher-degree polynomials (e.g., degree 4 or higher) can result in misleading trends and unstable fits. Proceed with caution."),children:(0,j.jsx)(br.G,{value:H.degree??Dn.degree,options:pe,onChange:ge=>Y({...H,degree:Number(ge.value)})})})]})},pa=({label:z,tooltip:H,children:Y})=>(0,j.jsx)(X.I,{labelWidth:Wn,label:z,tooltip:H,children:Y}),Bn=()=>{const z=Hn();return{id:ce.F.regression,editor:sa,transformation:z,name:z.name,description:z.description,categories:new Set([v.m.CalculateNewFields]),help:Ae(ce.F.regression).helperDocs,imageDark:bt,imageLight:St,tags:new Set([(0,d.t)("transformers.regression-transformer-editor.tags.regression-analysis","Regression analysis")])}};var Ea=e(13833),Ia=e(32651);const ua=()=>({id:ce.F.rowsToFields,name:(0,d.t)("transformers.get-rows-to-fields-transformer.name.rows-to-fields","Rows to fields"),description:(0,d.t)("transformers.get-rows-to-fields-transformer.description.convert-field-dynamic-config","Convert each row into a field with dynamic config."),defaultOptions:{},operator:z=>H=>H.pipe((0,Dt.T)(Y=>Y.map(oe=>os(z,oe))))});function os(z,H){const Y=wn(H,z.mappings??[],!0),{nameField:oe,valueField:pe}=Y;if(!oe||!pe)return H;const ge=[];for(let ye=0;ye<oe.values.length;ye++){const Ie=oe.values[ye],we=pe.values[ye],ke=Mt(H,ye,Y),et=Ms(H,ye,Y),tt={name:`${Ie}`,type:pe.type,values:[we],config:ke,labels:et};ge.push(tt)}return{fields:ge,length:1,refId:`${ce.F.rowsToFields}-${H.refId}`}}function Ms(z,H,Y){const oe={...Y.nameField.labels};for(let pe=0;pe<z.fields.length;pe++){const ge=z.fields[pe],ye=(0,ie.Ct)(ge,z),Ie=Y.index[ye];if(Ie.handler&&Ie.handler.key!==Bt.Label)continue;const we=ge.values[H];we!=null&&(oe[ye]=we)}return oe}function Rr({input:z,options:H,onChange:Y}){return z.length===0?null:(0,j.jsx)("div",{children:(0,j.jsx)(Xn,{frame:z[0],mappings:H.mappings??[],onChange:oe=>Y({...H,mappings:oe}),withNameAndValue:!0})})}const lo=()=>{const z=ua();return{id:z.id,editor:Rr,transformation:z,name:z.name,description:z.description,state:Be.pn.beta,categories:new Set([v.m.Reformat]),help:Ae(z.id).helperDocs,imageDark:Ea,imageLight:Ia}};var _a=e(739),Qa=e(90267),is=e(32122),Va=e(35664),ga=e(90176),_s=e(98643),vs=e(87039),Ar=e(78089);const ml=()=>({id:ce.F.spatial,name:(0,d.t)("transformers.get-spatial-transformer.name.spatial-operations","Spatial operations"),description:(0,d.t)("transformers.get-spatial-transformer.description.apply-spatial-operations-to-query-results","Apply spatial operations to query results."),defaultOptions:{},operator:z=>H=>H.pipe((0,As.Z)(Y=>(0,ms.H)(Xo(Y,z))))});function Vl(z){return z.action===ga.dy.Modify&&z.modify?.op===ga.YD.LineBuilder}async function Xo(z,H){const Y=await(0,vs.nE)(H.source);if(Vl(H)){const oe=await(0,vs.nE)(H.modify?.target);return z.map(pe=>{const ge=(0,vs.FM)(pe,Y),ye=(0,vs.FM)(pe,oe);if(ge.field&&ye.field){const Ie=[...pe.fields],we=(0,_s.XR)(ge.field,ye.field),ke=Ie[0];return ke.type===Z.PU.geo&&ke!==ge.field&&ke!==ye.field?Ie[0]=(0,_s.RA)(ke,we):Ie.unshift(we),{...pe,fields:Ie}}return pe})}return z.map(oe=>{let pe=(0,vs.FM)(oe,Y);if(pe.field){if(H.action===ga.dy.Modify){switch(H.modify?.op){case ga.YD.AsLine:let ye=pe.field.name;return(!ye||ye==="Point")&&(ye="Line"),{...oe,length:1,fields:[{...pe.field,name:ye,type:Z.PU.geo,values:[(0,Ar.tt)(pe.field)]}]}}return oe}const ge=pe.derived?[pe.field,...oe.fields]:oe.fields.slice(0);if(H.action===ga.dy.Calculate&&(ge.push((0,Ar.pp)(pe.field,H.calculate??{})),pe.derived=!0),pe.derived)return{...oe,fields:ge}}return oe})}const $l=(z,H)=>{const Y=H.options??{};z.addSelect({path:"action",name:"Action",description:"",defaultValue:ga.dy.Prepare,settings:{options:[{value:ga.dy.Prepare,label:(0,d.t)("transformers.supplier.label.prepare-spatial-field","Prepare spatial field"),description:"Set a geometry field based on the results of other fields"},{value:ga.dy.Calculate,label:(0,d.t)("transformers.supplier.label.calculate-value","Calculate value"),description:(0,d.t)("transformers.supplier.description.geometry-define-field-headingdistancearea","Use the geometry to define a new field (heading/distance/area)")},{value:ga.dy.Modify,label:(0,d.t)("transformers.supplier.label.transform","Transform"),description:(0,d.t)("transformers.supplier.description.apply-spatial-operations-to-the-geometry","Apply spatial operations to the geometry")}]}}),Y.action===ga.dy.Calculate?z.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:ga.kD.Heading,settings:{options:[{value:ga.kD.Heading,label:(0,d.t)("transformers.supplier.label.heading","Heading")},{value:ga.kD.Area,label:(0,d.t)("transformers.supplier.label.area","Area")},{value:ga.kD.Distance,label:(0,d.t)("transformers.supplier.label.distance","Distance")}]}}):Y.action===ga.dy.Modify&&z.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:ga.YD.AsLine,settings:{options:[{value:ga.YD.AsLine,label:(0,d.t)("transformers.supplier.label.as-line","As line"),description:"Create a single line feature with a vertex at each row"},{value:ga.YD.LineBuilder,label:(0,d.t)("transformers.supplier.label.line-builder","Line builder"),description:(0,d.t)("transformers.supplier.description.create-a-line-between-two-points","Create a line between two points")}]}}),Vl(Y)?(z.addNestedOptions({category:["Source"],path:"source",build:(oe,pe)=>{const ge=Y.source??{mode:_a.aG.Auto};(0,Qa.G)("Point","",oe,ge)}}),z.addNestedOptions({category:["Target"],path:"modify",build:(oe,pe)=>{const ge=Y.modify?.target??{mode:_a.aG.Auto};(0,Qa.G)("Point","target.",oe,ge)}})):(0,Qa.G)("Location","source.",z,Y.source)},vc=z=>{(0,o.useEffect)(()=>{if(!z.options.source?.mode){const oe=mt($l);z.onChange({...oe,...z.options}),console.log("geometry useEffect",oe)}},[]);const H=yc((0,$t.$j)()),Y=Et(z,$l);return(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{children:Y.items.map(oe=>oe.render())}),(0,j.jsx)("div",{children:Y.categories.map(oe=>(0,j.jsxs)("div",{className:H.wrap,children:[(0,j.jsx)("h5",{children:oe.props.title}),(0,j.jsx)("div",{className:H.item,children:oe.items.map(pe=>pe.render())})]},oe.props.id))})]})},yc=z=>({wrap:(0,st.css)({marginBottom:"20px"}),item:(0,st.css)({borderLeft:`4px solid ${z.colors.border.strong}`,paddingLeft:"10px"})}),xc=()=>{const z=ml();return{id:ce.F.spatial,editor:vc,transformation:z,name:z.name,description:z.description,state:Be.pn.alpha,categories:new Set([v.m.PerformSpatialOperations]),help:Ae(ce.F.spatial).helperDocs,imageDark:is,imageLight:Va}};var er=e(17503),vl=e(32462),Ec=e(16168),zl=e(79319);const Pc=()=>({id:ce.F.timeSeriesTable,name:(0,d.t)("transformers.time-series-table.name.time-series-to-table","Time series to table"),description:(0,d.t)("transformers.time-series-table.description.convert-to-table-rows","Convert time series data to table rows so that they can be viewed in tabular or sparkline format."),defaultOptions:{},isApplicable:z=>{for(const H of z)if((0,er.aH)(H))return zl.M.Applicable;return zl.M.NotApplicable},isApplicableDescription:(0,d.t)("transformers.time-series-table.is-applicable-description.requires-time-series-frame","The Time series to table transformation requires at least one time series frame to function. You currently have none."),operator:z=>H=>H.pipe((0,Dt.T)(Y=>Dc(z,Y)))});function Dc(z,H){const Y={},oe={},pe=[];let ge=Hl(H);for(const ye of Object.keys(ge)){const Ie=H.filter(ke=>ke.refId===ye);Y[ye]={},oe[ye]={};const we=[];Ie.forEach(ke=>{ke.fields.forEach(et=>{et.type===Z.PU.number&&et.labels&&Object.keys(et.labels).forEach(tt=>{we.includes(tt)||(oe[ye][tt]=Gl(tt,Z.PU.string),we.push(tt))})})});for(let ke=0;ke<Ie.length;ke++){const et=Ie[ke];let tt=null,dt=z[ye]?.timeField;if(dt&&dt.length>0?tt=et.fields.find(ft=>ft.name===dt):tt=et.fields.find(ft=>(0,er.hF)(ft)),!(0,er.aH)(et)){pe.push(et);continue}for(const ft of et.fields){if(ft.type!==Z.PU.number)continue;const it=z[ye]?.stat??pn.gy.lastNotNull,vt=(0,pn.Nw)({field:ft,reducers:[it]})[it]??null,Lt=new oo.k;tt!==void 0&&(Lt.addField(tt),Lt.addField(ft),Y[ye][`Trend #${ye}`]===void 0&&(Y[ye][`Trend #${ye}`]=Gl(`Trend #${ye}`,Z.PU.frame)),Y[ye][`Trend #${ye}`].values.push({...Lt,value:vt,length:ft.values.length})),we.forEach(Xt=>{oe[ye][Xt].values.push(ft.labels?.[Xt]??"")})}}}for(const ye of Object.keys(ge)){const Ie={},we=new oo.k;we.refId=ye;const ke=oe[ye];if(ke!==void 0)for(const[tt,dt]of Object.entries(ke))Ie[tt]===void 0&&(Ie[tt]=dt);for(const tt of Object.values(Ie))we.addField(tt);const et=Y[ye];for(const tt of Object.values(et))we.addField(tt);we.fields.length>0&&pe.push(we)}return pe}function Gl(z,H){return{name:z,type:H,config:{},values:[]}}function Hl(z){let H={};for(const Y of z)Y.refId!==void 0&&(H[Y.refId]===void 0?H[Y.refId]=1:H[Y.refId]++);return H}function bc({input:z,options:H,onChange:Y}){const oe=Hl(z),pe=(0,o.useCallback)((Ie,we)=>{const ke=we?.value!==void 0?we.value:"";Y({...H,[Ie]:{...H[Ie],timeField:ke}})},[Y,H]),ge=(0,o.useCallback)((Ie,we)=>{const ke=we[0];ke&&(0,pn.Em)(ke)&&Y({...H,[Ie]:{...H[Ie],stat:ke}})},[Y,H]);let ye=[];for(const Ie of Object.keys(oe)){const we={},ke=[];for(const et of z)if(et.refId===Ie)for(const tt of et.fields)(0,er.hF)(tt)&&(we[tt.name]=tt);for(const et of Object.values(we)){const{name:tt}=et;ke.push({label:tt,value:tt})}ye.push((0,j.jsxs)(Me.C,{children:[(0,j.jsx)(X.I,{children:(0,j.jsx)(je.c,{children:`Trend #${Ie}`})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.time-series-table-transform-editor.label-time-field","Time field"),tooltip:(0,d.t)("transformers.time-series-table-transform-editor.tooltip-time-field","The time field that will be used for the time series. If not selected the first found will be used."),children:(0,j.jsx)(Te.l6,{onChange:pe.bind(null,Ie),options:ke,value:H[Ie]?.timeField,isClearable:!0})}),(0,j.jsx)(X.I,{label:(0,d.t)("transformers.time-series-table-transform-editor.label-stat","Stat"),tooltip:(0,d.t)("transformers.time-series-table-transform-editor.tooltip-statistic-should-calculated-series","The statistic that should be calculated for this time series."),children:(0,j.jsx)(_n.S,{stats:[H[Ie]?.stat??pn.gy.lastNotNull],onChange:ge.bind(null,Ie),filterOptions:et=>et.id!==pn.gy.allValues&&et.id!==pn.gy.uniqueValues})})]},Ie))}return(0,j.jsx)(j.Fragment,{children:ye})}const Cc=()=>{const z=Pc();return{id:z.id,editor:bc,transformation:z,name:z.name,description:z.description,state:Be.pn.beta,help:Ae(z.id).helperDocs,imageDark:vl,imageLight:Ec}},Tc=()=>[Qi(),wr(),jo(),$r(),We(),Hi(),ji(),Ps(),na(),Mn(),Ui(),vi(),Jr(),Pr(),_r(),lo(),nn(),yt(),Eo(),xc(),_o(),Zr(),en(),Hr(),Fi(),il(),Bn(),Zs(),...ee.$.featureToggles.formatString?[ci()]:[],...ee.$.featureToggles.groupToNestedTableTransformation?[bi()]:[],fi(),Cc(),Xr()];var Mc=e(26305),ot=e(12354),lt=e(1503),xt=e(35254),It=e(71468),At=e(54148),Tt=e(27489),kt=e(72296),Jt=e(36303),on=e(15245),_t=e(28105),hn=e(13791),zn=e(45776),On=e(21234);function Nn({navId:z,header:H}){const{node:Y}=(0,zn.C)(z),oe=(0,$t.of)(va),pe=Y.children?.filter(ge=>!ge.hideFromTabs);return(0,j.jsx)(hn.Y,{navId:Y.id,children:(0,j.jsx)(hn.Y.Contents,{children:(0,j.jsxs)("div",{className:oe.content,children:[H,pe&&pe.length>0&&(0,j.jsx)("section",{className:oe.grid,children:pe?.map(ge=>(0,j.jsx)(On.I,{description:ge.subTitle,text:ge.text,url:ge.url??""},ge.id))})]})})})}const va=z=>({content:(0,st.css)({display:"flex",flexDirection:"column",gap:z.spacing(2)}),grid:(0,st.css)({display:"grid",gap:z.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:z.spacing(2,0)})});var Ba=e(86678),Cn=e(15130),ds=e(49785),Ja=e(62061),Ha=e(73427),yn=e(11257),us=e(96221),Vn=e(52763),bn=e(74267),ma=e(90909),Fn=e(87766),Ra=e(27838);const Ca={text:"LDAP",subTitle:"Verify your LDAP and user mapping configuration.",icon:"book",id:"LDAP"},Ta=({queryParams:z})=>{const H=(0,Vn.wA)(),Y=(0,Vn.d4)(vt=>vt.ldap.connectionInfo),oe=(0,Vn.d4)(vt=>vt.ldap.user),pe=(0,Vn.d4)(vt=>vt.ldap.syncInfo),ge=(0,Vn.d4)(vt=>vt.ldap.userError),ye=(0,Vn.d4)(vt=>vt.ldap.ldapError),[Ie,we]=(0,o.useState)(!0),{register:ke,handleSubmit:et}=(0,ds.mN)(),tt=(0,o.useCallback)(async vt=>H((0,bn.Kg)(vt)),[H]);(0,o.useEffect)(()=>{const vt=async()=>Promise.all([H((0,bn.JI)()),H((0,bn.pm)())]);async function Lt(){await H((0,bn.Jc)()),await vt(),z.username&&await tt(z.username),we(!1)}Lt()},[H,tt,z]);const dt=({username:vt})=>{vt&&tt(vt)},ft=()=>{H((0,bn.DX)())},it=Ha.TP.hasPermission(yn.w.LDAPUsersRead);return(0,j.jsx)(hn.Y,{navId:"authentication",pageNav:Ca,children:(0,j.jsx)(hn.Y.Contents,{isLoading:Ie,children:(0,j.jsxs)(rn.B,{direction:"column",gap:4,children:[ye&&ye.title&&(0,j.jsx)(Cs.F,{title:ye.title,severity:us.Qd.Error,children:ye.body}),(0,j.jsx)(ma.o,{ldapConnectionInfo:Y}),(0,Ja.a)("ldapsync")&&pe&&(0,j.jsx)(Fn.$,{ldapSyncInfo:pe}),it&&(0,j.jsxs)("section",{children:[(0,j.jsx)("h3",{children:(0,j.jsx)(d.x6,{i18nKey:"admin.ldap.test-mapping-heading",children:"Test user mapping"})}),(0,j.jsx)("form",{onSubmit:et(dt),children:(0,j.jsx)(To.D,{label:(0,d.t)("admin.ldap-page.label-username","Username"),children:(0,j.jsx)(Ln.p,{...ke("username",{required:!0}),width:34,id:"username",type:"text",defaultValue:z.username,addonAfter:(0,j.jsx)(fe.$n,{variant:"primary",type:"submit",children:(0,j.jsx)(d.x6,{i18nKey:"admin.ldap.test-mapping-run-button",children:"Run"})})})})}),ge&&ge.title&&(0,j.jsx)(Cs.F,{title:ge.title,severity:us.Qd.Error,onRemove:ft,children:ge.body}),oe&&(0,j.jsx)(Ra.H,{ldapUser:oe})]})]})})})},ln=z=>(0,o.lazy)(z);var ka=e(36826),ys=e(76070),es=e(66513),js=e(88114),Os=e(17349),Zo=e(74869),ra=e(54);function Ls(z=k.$W){const H=[{path:"/alerting",component:ha(()=>Promise.all([e.e(7848),e.e(3236)]).then(e.bind(e,27848)))},{path:"/alerting/home",component:ha(()=>Promise.all([e.e(7848),e.e(3236)]).then(e.bind(e,27848)))},{path:"/alerting/list",roles:(0,ra.C0)([yn.w.AlertingRuleRead,yn.w.AlertingRuleExternalRead]),component:ha(()=>Promise.all([e.e(8864),e.e(4514),e.e(3511)]).then(e.bind(e,74514)))},{path:"/alerting/routes",roles:(0,ra.C0)([yn.w.AlertingNotificationsRead,yn.w.AlertingNotificationsExternalRead,...js.rw,...js.nv,...es.xK,...es.Zr]),component:ha(()=>Promise.all([e.e(9360),e.e(1909)]).then(e.bind(e,19726)))},{path:"/alerting/routes/mute-timing/new",roles:(0,ra.C0)([yn.w.AlertingNotificationsWrite,yn.w.AlertingNotificationsExternalWrite,...es.Zr]),component:ha(()=>Promise.all([e.e(3192),e.e(8302)]).then(e.bind(e,35388)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,ra.C0)([yn.w.AlertingNotificationsWrite,yn.w.AlertingNotificationsExternalWrite,...es.xK,...es.Zr]),component:ha(()=>Promise.all([e.e(3192),e.e(558)]).then(e.bind(e,9334)))},{path:"/alerting/silences",roles:(0,ra.C0)([yn.w.AlertingInstanceRead,yn.w.AlertingInstancesExternalRead,yn.w.AlertingSilenceRead]),component:ha(()=>e.e(1668).then(e.bind(e,46627)))},{path:"/alerting/silence/new",roles:(0,ra.C0)([yn.w.AlertingInstanceCreate,yn.w.AlertingInstancesExternalWrite,yn.w.AlertingSilenceCreate,yn.w.AlertingSilenceUpdate]),component:ha(()=>e.e(1649).then(e.bind(e,29668)))},{path:"/alerting/silence/:id/edit",component:ha(()=>Promise.resolve().then(e.bind(e,24158)))},{path:"/alerting/notifications",roles:(0,ra.C0)([yn.w.AlertingNotificationsRead,yn.w.AlertingNotificationsExternalRead,...ys.w6,...Os.X]),component:ha(()=>Promise.all([e.e(6787),e.e(4312)]).then(e.bind(e,46787)))},{path:"/alerting/notifications/receivers/new",roles:(0,ra.C0)([yn.w.AlertingNotificationsRead,yn.w.AlertingNotificationsExternalRead,...ys.w6]),component:ha(()=>Promise.all([e.e(9116),e.e(6787),e.e(9292),e.e(6315),e.e(8622),e.e(3167)]).then(e.bind(e,15274)))},{path:"/alerting/notifications/receivers/:name/edit",roles:(0,ra.C0)([yn.w.AlertingNotificationsWrite,yn.w.AlertingNotificationsExternalWrite,yn.w.AlertingNotificationsRead,yn.w.AlertingNotificationsExternalRead,...ys.w6]),component:ha(()=>Promise.all([e.e(9116),e.e(6787),e.e(9292),e.e(6315),e.e(8622),e.e(6877)]).then(e.bind(e,29617)))},{path:"/alerting/notifications/templates/*",roles:(0,ra.C0)([yn.w.AlertingNotificationsRead,yn.w.AlertingNotificationsExternalRead,...Os.X]),component:ha(()=>Promise.all([e.e(9116),e.e(6787),e.e(9292),e.e(9224)]).then(e.bind(e,7070)))},{path:"/alerting/notifications/global-config",roles:(0,ra.C0)([yn.w.AlertingNotificationsWrite,yn.w.AlertingNotificationsExternalWrite]),component:ha(()=>Promise.all([e.e(9116),e.e(6787),e.e(9292),e.e(6315),e.e(8504)]).then(e.bind(e,19644)))},{path:"/alerting/groups/",roles:(0,ra.C0)([yn.w.AlertingInstanceRead,yn.w.AlertingInstancesExternalRead]),component:ha(()=>e.e(8427).then(e.bind(e,62950)))},{path:"/alerting/history/",roles:(0,ra.C0)([yn.w.AlertingRuleRead]),component:ha(()=>Promise.all([e.e(8706),e.e(483),e.e(44)]).then(e.bind(e,31542)))},{path:"/alerting/recently-deleted/",roles:()=>["Admin"],component:(0,Zo.f2)()?ha(()=>e.e(3734).then(e.bind(e,75174))):()=>(0,j.jsx)(At.C5,{replace:!0,to:"/alerting/list"})},{path:"/alerting/import-datasource-managed-rules",roles:(0,ra.C0)([yn.w.AlertingRuleCreate,yn.w.AlertingProvisioningSetStatus]),component:k.$W.featureToggles.alertingMigrationUI?ha(()=>e.e(9886).then(e.bind(e,45097))):()=>(0,j.jsx)(At.C5,{replace:!0,to:"/alerting/list"})},{path:"/alerting/new/:type?",pageClass:"page-alerting",roles:(0,ra.C0)([yn.w.AlertingRuleCreate,yn.w.AlertingRuleExternalWrite]),component:ha(()=>Promise.all([e.e(9116),e.e(4656),e.e(9360),e.e(4009)]).then(e.bind(e,23878)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,ra.C0)([yn.w.AlertingRuleUpdate,yn.w.AlertingRuleExternalWrite]),component:ha(()=>Promise.all([e.e(9116),e.e(4656),e.e(9360),e.e(4009)]).then(e.bind(e,23878)))},{path:"/alerting/:id/modify-export",pageClass:"page-alerting",roles:(0,ra.C0)([yn.w.AlertingRuleRead]),component:ha(()=>Promise.all([e.e(9116),e.e(4656),e.e(9360),e.e(4009)]).then(e.bind(e,28124)))},{path:"/alerting/export-new-rule",pageClass:"page-alerting",roles:(0,ra.C0)([yn.w.AlertingRuleRead]),component:ha(()=>Promise.all([e.e(9116),e.e(4656),e.e(9360),e.e(4009)]).then(e.bind(e,87144)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,ra.C0)([yn.w.AlertingRuleRead,yn.w.AlertingRuleExternalRead]),component:ha(()=>Promise.resolve().then(e.bind(e,28390)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,ra.C0)([yn.w.AlertingRuleRead,yn.w.AlertingRuleExternalRead]),component:ha(()=>e.e(5516).then(e.bind(e,15102)))},{path:"/alerting/:dataSourceUid/namespaces/:namespaceId/groups/:groupName/view",pageClass:"page-alerting",roles:(0,ra.C0)([yn.w.AlertingRuleRead,yn.w.AlertingRuleExternalRead]),component:ha(()=>Promise.all([e.e(4162),e.e(8864),e.e(3196)]).then(e.bind(e,12003)))},{path:"/alerting/:dataSourceUid/namespaces/:namespaceId/groups/:groupName/edit",pageClass:"page-alerting",roles:(0,ra.C0)([yn.w.AlertingRuleRead,yn.w.AlertingRuleExternalRead]),component:ha(()=>Promise.all([e.e(4656),e.e(6102)]).then(e.bind(e,56638)))},{path:"/alerting/admin",roles:()=>["Admin"],component:()=>(0,j.jsx)(At.C5,{replace:!0,to:"/alerting/admin/alertmanager"})},{path:"/alerting/admin/alertmanager",roles:()=>["Admin"],component:ha(()=>e.e(9438).then(e.bind(e,95627)))}];return z.featureToggles.alertingTriage&&H.push({path:"/alerting/triage",roles:(0,ra.C0)([yn.w.AlertingRuleRead,yn.w.AlertingRuleExternalRead]),component:()=>(0,j.jsx)(ka.d,{})}),H}function ha(z){const H=()=>e.e(9029).then(e.bind(e,31642));return ln(k.$W.unifiedAlertingEnabled?z:H)}var Xa=e(77256),ts=e(26437);const Ds=z=>({alertContent:(0,st.css)({display:"flex",flexDirection:"row",padding:0,justifyContent:"space-between",alignItems:"center"}),alertParagraph:(0,st.css)({margin:z.spacing(0,1,0,0),lineHeight:z.spacing(z.components.height.sm)})});function Bs(){const z=(0,$t.of)(Ds),H=Ha.TP.hasPermission(yn.w.DataSourcesCreate)||Ha.TP.hasPermission(yn.w.DataSourcesWrite),[Y,oe]=(0,o.useState)(H);return Y?(0,j.jsx)(Cs.F,{severity:"info",title:"",onRemove:()=>oe(!1),children:(0,j.jsxs)("div",{className:z.alertContent,children:[(0,j.jsx)("p",{className:z.alertParagraph,children:(0,j.jsx)(d.x6,{i18nKey:"connections.connections-redirect-notice.body",children:"Data sources have a new home! You can discover new data sources or manage existing ones in the Connections page, accessible from the main menu."})}),(0,j.jsx)(fe.z9,{"aria-label":(0,d.t)("connections.connections-redirect-notice.aria-label-link-to-connections","Link to Connections"),icon:"arrow-right",href:ts.b.DataSources,fill:"text",children:(0,j.jsx)(d.x6,{i18nKey:"connections.connections-redirect-notice.go-to-connections",children:"Go to connections"})})]})}):(0,j.jsx)(j.Fragment,{})}function Us(){return[{path:`/${ts.q}/*`,component:ln(()=>Promise.all([e.e(3326),e.e(6436),e.e(3324),e.e(4827),e.e(2154)]).then(e.bind(e,14827)))}]}var Qs=e(37946),jr=e(20962),Lr=e(52161),ks=(z=>(z.ViewIRMMainPage="grafana_irm_configuration_tracker_main_page_view",z.OpenEssentials="grafana_irm_configuration_tracker_essentials_open",z.CloseEssentials="grafana_irm_configuration_tracker_essentials_closed",z.ClickDataSources="grafana_irm_configuration_tracker_data_sources_clicked",z))(ks||{});function Ys(z,H){(0,Tt.rR)(z,{...H})}var _l=e(97507),Ql=e(46202),Wa=e(182),tr=e(92367),Uh=e(70327),Wh=e(6135),Nh=e(44109);function Kh(){const[z,{data:H,isLoading:Y}]=Uh.hK.endpoints.rulerRules.useLazyQuery({refetchOnFocus:!0,refetchOnReconnect:!0}),{dsFeatures:oe,isLoadingDsFeatures:pe}=(0,Nh.O3)(Lr.hY),ge=oe?.rulerConfig;return(0,o.useEffect)(()=>{ge&&z({rulerConfig:ge})},[ge,z]),{isDone:(H?Object.entries(H).flatMap(([we,ke])=>ke.flatMap(et=>et.rules)):[]).length>0,isLoading:Y||pe}}function Pd(z){return z.some(H=>H.grafana_managed_receiver_configs?.some(Y=>Y.type===Wh.J4.OnCall))}const Fh="<example@email.com>";function wh(z,H){const Y=H.find(oe=>oe.name===z);return Y?Y.grafana_managed_receiver_configs?.some(oe=>oe.type==="email"?oe.settings?.addresses!==Fh:!0):!1}var yl=e(5709);const Vh=z=>`/api/plugins/${(0,Wa.Wx)()}/resources${z}`,$h=yl.H.injectEndpoints({endpoints:z=>({getIncidentsPluginConfig:z.query({query:()=>({url:Vh("/api/ConfigurationTrackerService.GetConfigurationTracker"),data:{},method:"POST",showErrorAlert:!1})})})});var Oc=e(3986);function zh(){const{installed:z,loading:H}=(0,Oc._)((0,Wa.Wx)()),{data:Y,isLoading:oe}=$h.endpoints.getIncidentsPluginConfig.useQuery();return{isInstalled:z??!1,isChatOpsInstalled:Y?.isChatOpsInstalled??!1,isIncidentCreated:Y?.isIncidentCreated??!1,isLoading:H||oe}}var Dd=e(77788);function Gh(){const{installed:z}=(0,Oc._)((0,Wa.BO)()),{data:H}=Dd.WG.endpoints.grafanaOnCallIntegrations.useQuery(void 0,{skip:!z,refetchOnFocus:!0,refetchOnReconnect:!0,refetchOnMountOrArgChange:!0});return H??[]}function Hh(){const{data:z,isLoading:H}=Dd.WG.endpoints.onCallConfigChecks.useQuery(void 0,{refetchOnFocus:!0,refetchOnReconnect:!0,refetchOnMountOrArgChange:!0});return{isLoading:H,onCallConfigChecks:z??{is_chatops_connected:!1,is_integration_chatops_connected:!1}}}function _h(){return Gh().map(H=>({label:H.display_name,value:H.value}))}function Qh(){const{onCallConfigChecks:{is_chatops_connected:z,is_integration_chatops_connected:H},isLoading:Y}=Hh();return{is_chatops_connected:z,is_integration_chatops_connected:H,isLoading:Y}}var bd=e(2869);const kh=`/api/plugins/${bd.W.Slo}/resources/v1`,Yh=yl.H.injectEndpoints({endpoints:z=>({getSlos:z.query({query:()=>({url:`${kh}/slo`,showErrorAlert:!1}),providesTags:["GrafanaSlo"]})})});function Jh(){const{installed:z}=(0,Oc._)(bd.W.Slo),{data:H,isLoading:Y}=Yh.endpoints.getSlos.useQuery(void 0,{skip:!z,refetchOnFocus:!0,refetchOnReconnect:!0,refetchOnMountOrArgChange:!0});return{isLoading:Y,hasSlo:!!H?.slos.length,hasSloWithAlert:!!H?.slos?.some(oe=>oe.alerting)}}function Xh(){const{contactPoints:z,isLoading:H}=(0,_l.Z3)(),{data:Y,isLoading:oe}=(0,Ql.yV)({alertmanager:Lr.hY}),pe=Y?.[0].receiver||"",{isDone:ge,isLoading:ye}=Kh(),{isChatOpsInstalled:Ie,isInstalled:we,isLoading:ke}=zh(),et=_h(),{is_chatops_connected:tt,is_integration_chatops_connected:dt,isLoading:ft}=Qh(),{hasSlo:it,hasSloWithAlert:vt,isLoading:Lt}=Jh();return{alerting:{contactPoints:z,defaultContactpoint:pe,isCreateAlertRuleDone:ge},incidents:{isChatOpsInstalled:Ie,isIncidentsInstalled:we},onCall:{onCallOptions:et,is_chatops_connected:tt,is_integration_chatops_connected:dt},slo:{hasSlo:it,hasSloWithAlert:vt},isLoading:H||oe||ye||ke||ft||Lt}}function Zh(){const{alerting:{contactPoints:z,defaultContactpoint:H,isCreateAlertRuleDone:Y},incidents:{isChatOpsInstalled:oe,isIncidentsInstalled:pe},onCall:{onCallOptions:ge,is_chatops_connected:ye,is_integration_chatops_connected:Ie},slo:{hasSlo:we,hasSloWithAlert:ke},isLoading:et}=Xh();function tt(Lt,Xt){const fn=(0,tr.G)(`${Xt} + ${Lt}`,{returnTo:window.location.pathname+window.location.search});C.Ny.push(fn)}function dt(){let Lt=[{title:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.steps.title.update-default-contact-point","Update default contact point"),description:"Update the default contact point to a method other than the example email address.",button:{type:"openLink",urlLink:{url:"/alerting/notifications",queryParams:{search:H,alertmanager:"grafana"}},label:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.steps.label.edit","Edit"),labelOnDone:"View",urlLinkOnDone:{url:"/alerting/notifications"}},done:wh(H,z)}];return(0,Wa.ZP)()||(Lt=[...Lt,{title:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.title.connect-alerting-to-on-call","Connect alerting to OnCall"),description:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.description.create-on-call-integration-alerting-contact-point","Create an OnCall integration for an alerting contact point."),button:{type:"openLink",urlLink:{url:"/alerting/notifications/receivers/new"},label:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.label.connect","Connect"),urlLinkOnDone:{url:"/alerting/notifications"},labelOnDone:"View"},done:Pd(z)}]),Lt=[...Lt,{title:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.title.create-alert-rule","Create alert rule"),description:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.description.create-alert-monitor-system","Create an alert rule to monitor your system."),button:{type:"openLink",urlLink:{url:"/alerting/new"},label:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.label.create","Create"),urlLinkOnDone:{url:"/alerting/list"},labelOnDone:"View"},done:Y},{title:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.title.create-slo","Create SLO"),description:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.description.create-slos-to-monitor-your-service","Create SLOs to monitor your service."),button:{type:"openLink",urlLink:{url:"/a/grafana-slo-app/wizard/new"},label:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.label.create","Create"),urlLinkOnDone:{url:"/a/grafana-slo-app/manage-slos"},labelOnDone:"View"},done:we},{title:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.title.enable-slo-alerting","Enable SLO alerting"),description:"Configure SLO alerting to receive notifications when your SLOs are breached.",button:{type:"openLink",urlLink:{queryParams:{alertsEnabled:"disabled"},url:"/a/grafana-slo-app/manage-slos"},label:(0,d.t)("gops.use-get-essentials-configuration.get-grafana-alerting-config-steps.label.enable","Enable"),urlLinkOnDone:{queryParams:{alertsEnabled:"enabled"},url:"/a/grafana-slo-app/manage-slos"},labelOnDone:"View"},done:ke}],Lt}const ft={sections:[{title:(0,d.t)("gops.use-get-essentials-configuration.essential-content.title.detect","Detect"),description:(0,d.t)("gops.use-get-essentials-configuration.essential-content.description.configure-grafana-alerting","Configure Grafana Alerting"),steps:dt()},{title:(0,d.t)("gops.use-get-essentials-configuration.essential-content.title.respond","Respond"),description:(0,Wa.ZP)()?"Configure IRM":"Configure OnCall and Incident",steps:(0,Wa.ZP)()?[{title:(0,d.t)("gops.use-get-essentials-configuration.essential-content.title.connect-alerting-to-irm","Connect alerting to IRM"),description:(0,d.t)("gops.use-get-essentials-configuration.essential-content.description.create-integration-alerting-contact-point","Create an IRM integration for an alerting contact point."),button:{type:"openLink",urlLink:{url:"/alerting/notifications/receivers/new"},label:(0,d.t)("gops.use-get-essentials-configuration.essential-content.label.connect","Connect"),urlLinkOnDone:{url:"/alerting/notifications"},labelOnDone:"View"},done:Pd(z)},{title:(0,d.t)("gops.use-get-essentials-configuration.essential-content.title.connect-irm-to-your-slack-workspace","Connect IRM to your Slack workspace"),description:"Receive alerts and oncall notifications, or automatically create an incident channel and manage incidents directly within your chat environment.",button:{type:"openLink",urlLink:{url:`/a/${(0,Wa.Wx)()}/integrations/apps/grate.irm.slack`},label:(0,d.t)("gops.use-get-essentials-configuration.essential-content.label.connect","Connect"),urlLinkOnDone:{url:`/a/${(0,Wa.Wx)()}/integrations/apps/grate.irm.slack`},labelOnDone:"View"},done:oe},{title:(0,d.t)("gops.use-get-essentials-configuration.essential-content.title.add-slack-notifications-to-irm-integrations","Add Slack notifications to IRM integrations"),description:(0,d.t)("gops.use-get-essentials-configuration.essential-content.description.select-chat-ops-channels-to-route-notifications","Select ChatOps channels to route notifications"),button:{type:"openLink",urlLink:{url:`/a/${(0,Wa.BO)()}/integrations/`},label:(0,d.t)("gops.use-get-essentials-configuration.essential-content.label.add","Add"),urlLinkOnDone:{url:`/a/${(0,Wa.BO)()}/integrations/`},labelOnDone:"View"},done:Ie}]:[{title:(0,d.t)("gops.use-get-essentials-configuration.essential-content.title.initialize-incident-plugin","Initialize Incident plugin"),description:(0,d.t)("gops.use-get-essentials-configuration.essential-content.description.initialize-incident-plugin-declare-manage-incidents","Initialize the Incident plugin to declare and manage incidents."),button:{type:"openLink",urlLink:{url:`/a/${(0,Wa.Wx)()}/walkthrough/generate-key`},label:(0,d.t)("gops.use-get-essentials-configuration.essential-content.label.initialize","Initialize"),urlLinkOnDone:{url:`/a/${(0,Wa.Wx)()}`},labelOnDone:"View"},done:pe},{title:(0,d.t)("gops.use-get-essentials-configuration.essential-content.title.connect-your-messaging-workspace-to-on-call","Connect your Messaging workspace to OnCall"),description:(0,d.t)("gops.use-get-essentials-configuration.essential-content.description.receive-alerts-oncall-notifications-within-environment","Receive alerts and oncall notifications within your chat environment."),button:{type:"openLink",urlLink:{url:`/a/${(0,Wa.BO)()}/settings`,queryParams:{tab:"ChatOps",chatOpsTab:"Slack"}},label:(0,d.t)("gops.use-get-essentials-configuration.essential-content.label.connect","Connect"),urlLinkOnDone:{url:`/a/${(0,Wa.BO)()}/settings`,queryParams:{tab:"ChatOps"}},labelOnDone:"View"},done:ye},{title:(0,d.t)("gops.use-get-essentials-configuration.essential-content.title.connect-your-messaging-workspace-to-incident","Connect your Messaging workspace to Incident"),description:"Automatically create an incident channel and manage incidents directly within your chat environment.",button:{type:"openLink",urlLink:{url:`/a/${(0,Wa.Wx)()}/integrations/grate.slack`},label:(0,d.t)("gops.use-get-essentials-configuration.essential-content.label.connect","Connect"),urlLinkOnDone:{url:`/a/${(0,Wa.Wx)()}/integrations`}},done:oe},{title:(0,d.t)("gops.use-get-essentials-configuration.essential-content.title.messaging-workspace-channel-on-call-integration","Add Messaging workspace channel to OnCall Integration"),description:(0,d.t)("gops.use-get-essentials-configuration.essential-content.description.select-chat-ops-channels-to-route-notifications","Select ChatOps channels to route notifications"),button:{type:"openLink",urlLink:{url:`/a/${(0,Wa.BO)()}/integrations/`},label:(0,d.t)("gops.use-get-essentials-configuration.essential-content.label.add","Add"),urlLinkOnDone:{url:`/a/${(0,Wa.BO)()}/integrations/`},labelOnDone:"View"},done:Ie}]},{title:(0,d.t)("gops.use-get-essentials-configuration.essential-content.title.test-your-configuration","Test your configuration"),description:"",steps:[{title:(0,Wa.ZP)()?"Send test alert":"Send OnCall demo alert via Alerting integration",description:"In the integration page, click Send demo alert, to review your notification",button:{type:"dropDown",label:(0,d.t)("gops.use-get-essentials-configuration.essential-content.label.select-integration","Select integration"),options:ge,onClickOption:Lt=>tt(Lt,`/a/${(0,Wa.BO)()}/integrations/`),stepNotAvailableText:"No integrations available"}},{title:(0,d.t)("gops.use-get-essentials-configuration.essential-content.title.create-incident-drill","Create Incident drill"),description:(0,d.t)("gops.use-get-essentials-configuration.essential-content.description.practice-solving-an-incident","Practice solving an Incident"),button:{type:"openLink",urlLink:{url:`/a/${(0,Wa.Wx)()}`,queryParams:{declare:"new",drill:"1"}},label:(0,d.t)("gops.use-get-essentials-configuration.essential-content.label.start-drill","Start drill")}}]}]},{stepsDone:it,totalStepsToDo:vt}=ft.sections.reduce((Lt,Xt)=>{const fn=Xt.steps.filter(un=>un.done).length,jn=Xt.steps.reduce((un,Tn)=>Tn.done!==void 0?un+1:un,0);return{stepsDone:Lt.stepsDone+fn,totalStepsToDo:Lt.totalStepsToDo+jn}},{stepsDone:0,totalStepsToDo:0});return{essentialContent:ft,stepsDone:it,totalStepsToDo:vt,isLoading:et}}const qh=({dataSourceConfigurationData:{dataSourceCompatibleWithAlerting:z},essentialsConfigurationData:{stepsDone:H,totalStepsToDo:Y}})=>(0,o.useMemo)(()=>{function oe(){const pe=z?"You have connected a datasource.":"Connect at least one data source to start receiving data",ge=z?"View":"Connect";return{id:Ic.CONNECT_DATASOURCE,title:(0,d.t)("gops.use-get-configuration-for-ui.get-connect-data-source-configuration.title.connect-data-source","Connect data source"),description:pe,actionButtonTitle:ge,isDone:z}}return[oe(),{id:Ic.ESSENTIALS,title:(0,d.t)("gops.use-get-configuration-for-ui.title.essentials","Essentials"),titleIcon:"star",description:"Set up the necessary features to start using Grafana IRM workflows",actionButtonTitle:H===Y?"View":"Configure",stepsDone:H,totalStepsToDo:Y}]},[z,H,Y]);var Cd=e(6975);function Td({stepsDone:z,totalStepsToDo:H}){const Y=(0,$t.of)(ef);return H===0?null:(0,j.jsx)("div",{className:Y.containerStyles,role:"progressbar","aria-valuenow":z,"aria-valuemax":H,children:(0,j.jsx)("div",{className:Y.fillerStyles(z/H*100)})})}function Md({stepsDone:z,totalStepsToDo:H}){return(0,j.jsx)("span",{children:(0,j.jsxs)(d.x6,{i18nKey:"gops.progress-bar.steps-status",values:{stepsDone:z},children:[(0,j.jsx)(wa.E,{color:"success",children:"{{stepsDone}}"})," of ",{totalStepsToDo:H}]})})}function ef(z){return{containerStyles:(0,st.css)({height:z.spacing(2),borderRadius:z.shape.radius.pill,backgroundColor:z.colors.border.weak,flex:"auto"}),fillerStyles:H=>(0,st.css)({height:"100%",width:`${H}%`,backgroundColor:z.colors.success.main,borderRadius:z.shape.radius.pill,textAlign:"right"})}}function tf({config:z,handleActionClick:H,isLoading:Y=!1}){const oe=(0,$t.of)(nf);return(0,j.jsx)(rn.B,{direction:"column",gap:1,justifyContent:"space-around",children:(0,j.jsxs)("div",{className:oe.cardContent,children:[(0,j.jsxs)(rn.B,{direction:"column",gap:1,children:[(0,j.jsxs)(rn.B,{direction:"row",alignItems:"center",justifyContent:"space-between",gap:1,children:[(0,j.jsx)("div",{className:"fs-unmask",children:(0,j.jsxs)(rn.B,{direction:"row",gap:1,alignItems:"center",children:[z.title,z.titleIcon&&(0,j.jsx)(Sa.I,{name:z.titleIcon}),z.isDone&&!Y&&(0,j.jsx)(Sa.I,{name:"check-circle",color:"green",size:"lg"})]})}),z.stepsDone&&z.totalStepsToDo&&!Y&&(0,j.jsx)("div",{className:"fs-unmask",children:(0,j.jsxs)(rn.B,{direction:"row",gap:.5,children:[(0,j.jsx)(Md,{stepsDone:z.stepsDone,totalStepsToDo:z.totalStepsToDo}),(0,j.jsx)(d.x6,{i18nKey:"configuration-tracker.config-card.complete",children:"complete"})]})})]}),(0,j.jsxs)(rn.B,{direction:"column",children:[Y?(0,j.jsx)(Cd._,{text:(0,d.t)("gops.config-card.text-loading-configuration","Loading configuration....")}):z.description,!Y&&z.stepsDone&&z.totalStepsToDo&&(0,j.jsx)(Td,{stepsDone:z.stepsDone,totalStepsToDo:z.totalStepsToDo})]})]}),(0,j.jsx)(rn.B,{direction:"row",gap:1,justifyContent:"flex-start",alignItems:"flex-end",children:(0,j.jsx)(fe.$n,{variant:"secondary",onClick:()=>H(z.id,z.isDone),className:"fs-unmask",children:z.actionButtonTitle})})]})})}const nf=z=>({cardTitle:(0,st.css)({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"}),cardContent:(0,st.css)({background:z.colors.background.secondary,padding:z.spacing(2),borderRadius:z.shape.radius.default,height:"100%",gap:z.spacing(1),display:"flex",flexDirection:"column",justifyContent:"space-between"})});var xl=e(8207),Sc=e(45967),El=e(88559),cr=e(87063);function af({onClose:z,essentialsConfig:H,stepsDone:Y,totalStepsToDo:oe}){return(0,j.jsx)(xl._,{title:(0,d.t)("gops.essentials.title-essentials","Essentials"),subtitle:"Complete the following configuration tasks",onClose:z,children:(0,j.jsx)(sf,{essentialContent:H,stepsDone:Y,totalStepsToDo:oe})})}function sf({essentialContent:z,stepsDone:H,totalStepsToDo:Y}){return(0,j.jsxs)(rn.B,{direction:"column",gap:1,children:[(0,j.jsx)(hf,{stepsDone:H,totalStepsToDo:Y}),z.sections.map(oe=>(0,j.jsx)(rf,{section:oe},oe.title))]})}function rf({section:z}){const H=(0,$t.of)(ff);return(0,j.jsxs)("div",{className:H.wrapper,children:[(0,j.jsx)(wa.E,{element:"h4",children:(0,j.jsx)("span",{className:"fs-unmask",children:z.title})}),(0,j.jsx)(wa.E,{color:"secondary",children:(0,j.jsx)("span",{className:"fs-unmask",children:z.description})}),(0,j.jsx)(rn.B,{direction:"column",gap:2,children:z.steps.map((Y,oe)=>(0,j.jsx)(cf,{step:Y},oe))})]})}function lf({done:z}){return z?(0,j.jsx)(Sa.I,{name:"check-circle",color:"green","data-testid":"checked-step",className:"fs-unmask"}):(0,j.jsx)(Sa.I,{name:"circle","data-testid":"unckecked-step",className:"fs-unmask"})}function cf({step:z}){return(0,j.jsxs)(rn.B,{direction:"row",justifyContent:"space-between","data-testid":"step",children:[(0,j.jsxs)(rn.B,{direction:"row",alignItems:"center",children:[z.done!==void 0&&(0,j.jsx)(lf,{done:z.done}),(0,j.jsx)(wa.E,{variant:"body",children:(0,j.jsx)("span",{className:"fs-unmask",children:z.title})}),(0,j.jsx)(Sc.m,{content:z.description,placement:"right",children:(0,j.jsx)(Sa.I,{name:"question-circle"})})]}),(0,j.jsx)(uf,{...z.button,done:z.done,"data-testid":"step-button"})]})}function df(z){const{urlLink:H,label:Y,urlLinkOnDone:oe,labelOnDone:pe,done:ge}=z,ye=H?.url?(0,tr.G)(H.url,{returnTo:window.location.pathname+window.location.search,...H.queryParams}):"",Ie=oe?.url?(0,tr.G)(oe.url,{returnTo:window.location.pathname+window.location.search,...oe.queryParams}):"",we=ge?Ie:ye;return(0,j.jsx)(fe.z9,{href:we,variant:"secondary",className:"fs-unmask",children:ge?pe??Y:Y})}function uf({type:z,urlLink:H,urlLinkOnDone:Y,label:oe,labelOnDone:pe,options:ge,onClickOption:ye,done:Ie,stepNotAvailableText:we}){switch(z){case"openLink":return(0,j.jsx)(df,{urlLink:H,label:oe,urlLinkOnDone:Y,labelOnDone:pe,done:Ie});case"dropDown":return ge?.length?(0,j.jsx)(El.m,{overlay:(0,j.jsx)(cr.W,{className:"fs-unmask",children:ge?.map(ke=>(0,j.jsx)(cr.W.Item,{label:ke.label,className:"fs-unmask",onClick:()=>{ye?.(ke.value)}},ke.value))}),children:(0,j.jsxs)(fe.$n,{variant:"secondary",size:"md",className:"fs-unmask",children:[oe,(0,j.jsx)(Sa.I,{name:"angle-down"})]})}):(0,j.jsxs)(wa.E,{children:[we??"No options available"," "]})}}function hf({stepsDone:z,totalStepsToDo:H}){return(0,j.jsxs)(rn.B,{direction:"row",gap:1,alignItems:"center",children:[(0,j.jsx)(d.x6,{i18nKey:"gops.progress-status.your-progress",children:"Your progress"}),(0,j.jsx)(Td,{stepsDone:z,totalStepsToDo:H}),(0,j.jsx)(Md,{stepsDone:z,totalStepsToDo:H})]})}const ff=z=>({wrapper:(0,st.css)({margin:z.spacing(2,0),padding:z.spacing(2),border:`1px solid ${z.colors.border.medium}`,borderRadius:z.shape.radius.default,display:"flex",flexDirection:"column",gap:z.spacing(2)})});var Ic=(z=>(z[z.CONNECT_DATASOURCE=0]="CONNECT_DATASOURCE",z[z.ESSENTIALS=1]="ESSENTIALS",z))(Ic||{});function pf(){return{dataSourceCompatibleWithAlerting:!!(0,Lr.k5)()}}function gf(){const z=(0,$t.of)(mf),H=(0,At.Zp)(),Y=pf(),oe=Zh(),pe=qh({dataSourceConfigurationData:Y,essentialsConfigurationData:oe});(0,o.useEffect)(()=>{Ys(ks.ViewIRMMainPage,{essentialStepsDone:0,essentialStepsToDo:0,dataSourceCompatibleWithAlerting:Y.dataSourceCompatibleWithAlerting})},[Y.dataSourceCompatibleWithAlerting]);const[ge,ye]=(0,jr.l)(),Ie=ge.get("essentials")==="open",we=(et,tt)=>{switch(Ys(ks.ClickDataSources,{essentialStepsDone:oe.stepsDone,essentialStepsToDo:oe.totalStepsToDo,dataSourceCompatibleWithAlerting:Y.dataSourceCompatibleWithAlerting}),et){case 0:H(tt?Qs.I.List:Qs.I.New);break;case 1:ye({essentials:"open"}),Ys(ks.OpenEssentials,{essentialStepsDone:oe.stepsDone,essentialStepsToDo:oe.totalStepsToDo,dataSourceCompatibleWithAlerting:Y.dataSourceCompatibleWithAlerting});break;default:return}};function ke(){ye({essentials:void 0}),Ys(ks.CloseEssentials,{essentialStepsDone:oe.stepsDone,essentialStepsToDo:oe.totalStepsToDo,dataSourceCompatibleWithAlerting:Y.dataSourceCompatibleWithAlerting})}return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(wa.E,{element:"h4",variant:"h4",children:(0,j.jsx)(d.x6,{i18nKey:"gops.configure-irm.configure",children:"Configure"})}),(0,j.jsxs)("section",{className:z.container,children:[pe.map(et=>(0,j.jsx)(tf,{config:et,handleActionClick:we,isLoading:oe.isLoading},et.id)),Ie&&(0,j.jsx)(af,{onClose:ke,essentialsConfig:oe.essentialContent,stepsDone:oe.stepsDone,totalStepsToDo:oe.totalStepsToDo})]}),(0,j.jsx)(wa.E,{element:"h4",variant:"h4",children:(0,j.jsx)(d.x6,{i18nKey:"gops.configure-irm.irm-apps",children:"IRM apps"})})]})}const mf=z=>({container:(0,st.css)({marginBottom:0,display:"grid",gap:z.spacing(3),gridTemplateColumns:" 1fr 1fr"})});var Rc=e(13660);const vf=[{path:"/plugins",navId:"plugins",roles:Ac([yn.w.PluginsInstall,yn.w.PluginsWrite],["Admin","ServerAdmin"]),routeName:Rc.vk.Home,component:ln(()=>e.e(4519).then(e.bind(e,37761)))},{path:"/plugins/browse",navId:"plugins",roles:Ac([yn.w.PluginsInstall,yn.w.PluginsWrite],["Admin","ServerAdmin"]),routeName:Rc.vk.Browse,component:ln(()=>e.e(4519).then(e.bind(e,37761)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:Ac([yn.w.PluginsInstall,yn.w.PluginsWrite],["Admin","ServerAdmin"]),routeName:Rc.vk.Details,component:ln(()=>Promise.all([e.e(3326),e.e(6436),e.e(3324),e.e(7891)]).then(e.bind(e,31879)))}];function Ac(z,H){return()=>z.some(Y=>Ha.TP.hasPermission(Y))?[]:H}function yf(){return vf}var xf=e(37168);const Od=[{path:"/profile",component:ln(()=>Promise.all([e.e(3126),e.e(2472)]).then(e.bind(e,67521)))},{path:"/profile/password",component:ln(()=>e.e(9996).then(e.bind(e,9996)))},{path:"/profile/select-org",component:ln(()=>e.e(7430).then(e.bind(e,31830)))},{path:"/profile/notifications",component:ln(()=>e.e(4140).then(e.bind(e,30946)))}];function Ef(z=k.$W){return z.profileEnabled?Od:(0,J.uniq)(Od.map(Y=>Y.path)).map(Y=>({path:Y,component:ln(()=>e.e(5173).then(e.bind(e,77267)))}))}var Ws=e(6262);const Pf=()=>k.$W.publicDashboardsEnabled?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:Ws.Z4.Public,component:ln(()=>e.e(5761).then(e.bind(e,69579)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:Ws.Z4.Public,chromeless:!0,component:ln(()=>Promise.all([e.e(6088),e.e(9609),e.e(7197)]).then(e.bind(e,27787)))}]:[];var Df=e(53247),dr=e(91555);function bf(){return(0,Df.Hv)()?[{path:dr.mL,component:ln(()=>Promise.all([e.e(886),e.e(2182)]).then(e.bind(e,27080)))},{path:dr.zM,component:ln(()=>Promise.all([e.e(886),e.e(1037)]).then(e.bind(e,90886)))},{path:`${dr.pd}/:type`,component:ln(()=>Promise.all([e.e(1167),e.e(252)]).then(e.bind(e,84128)))},{path:dr.mL+"/:name",component:ln(()=>e.e(6092).then(e.bind(e,12917)))},{path:dr.mL+"/:name/edit",component:ln(()=>Promise.all([e.e(1167),e.e(8758)]).then(e.bind(e,33580)))},{path:dr.mL+"/:name/file/*",component:ln(()=>e.e(1954).then(e.bind(e,28682)))},{path:dr.mL+"/:name/history/*",component:ln(()=>e.e(9898).then(e.bind(e,22192)))},{path:dr.mL+"/:slug/dashboard/preview/*",pageClass:"page-dashboard",routeName:Ws.Z4.Provisioning,component:ln(()=>e.e(8638).then(e.bind(e,21819)))}]:[{path:dr.mL,component:ln(()=>Promise.all([e.e(886),e.e(1037)]).then(e.bind(e,90886)))}]}const Cf=k.Ay.buildInfo.env==="development",Tf=[];function Mf(){return[...(0,xf.X)(),{path:"/",pageClass:"page-dashboard",routeName:Ws.Z4.Home,component:ln(()=>Promise.all([e.e(6088),e.e(7051),e.e(9609),e.e(2603),e.e(9136)]).then(e.bind(e,92603)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:Ws.Z4.Normal,component:ln(()=>Promise.all([e.e(6088),e.e(7051),e.e(9609),e.e(2603),e.e(9136)]).then(e.bind(e,92603)))},{path:"/dashboard/new",roles:()=>Cn.TP.evaluatePermission([yn.w.DashboardsCreate]),pageClass:"page-dashboard",routeName:Ws.Z4.New,component:ln(()=>Promise.all([e.e(6088),e.e(7051),e.e(9609),e.e(2603),e.e(2976)]).then(e.bind(e,92603)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>Cn.TP.evaluatePermission([yn.w.DashboardsCreate]),component:ln(()=>Promise.all([e.e(6088),e.e(7051),e.e(9609),e.e(2603),e.e(2976)]).then(e.bind(e,373)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:Ws.Z4.Normal,component:ln(()=>Promise.all([e.e(6088),e.e(7051),e.e(9609),e.e(2603),e.e(2976)]).then(e.bind(e,92603)))},{path:"/dashboards/embedding-test",component:ln(()=>Promise.all([e.e(6088),e.e(7051),e.e(9609),e.e(2603),e.e(2976)]).then(e.bind(e,77437)))},{path:"/d-solo/:uid/:slug?",routeName:Ws.Z4.Normal,chromeless:!0,component:ln(()=>k.Ay.featureToggles.dashboardSceneSolo?e.e(7849).then(e.bind(e,97414)):Promise.all([e.e(6088),e.e(4492)]).then(e.bind(e,49286)))},{path:"/dashboard-solo/:type/:slug",routeName:Ws.Z4.Normal,chromeless:!0,component:ln(()=>k.Ay.featureToggles.dashboardSceneSolo?e.e(7849).then(e.bind(e,97414)):Promise.all([e.e(6088),e.e(4492)]).then(e.bind(e,49286)))},{path:"/dashboard/import",component:ln(()=>e.e(2550).then(e.bind(e,25650)))},{path:Qs.I.List,component:()=>(0,j.jsx)(At.C5,{replace:!0,to:ts.b.DataSources})},{path:Qs.I.Edit,component:If},{path:Qs.I.Dashboards,component:Sf},{path:Qs.I.New,component:()=>(0,j.jsx)(At.C5,{replace:!0,to:ts.b.DataSourcesNew})},{path:"/datasources/correlations",component:ln(()=>k.Ay.featureToggles.correlations?e.e(9981).then(e.bind(e,45185)):e.e(8014).then(e.bind(e,29181)))},{path:"/dashboards",component:ln(()=>Promise.all([e.e(3326),e.e(6436),e.e(3003),e.e(152)]).then(e.bind(e,77123)))},{path:"/dashboards/f/:uid/:slug",component:ln(()=>Promise.all([e.e(3326),e.e(6436),e.e(3003),e.e(152)]).then(e.bind(e,77123)))},{path:"/dashboards/f/:uid",component:ln(()=>Promise.all([e.e(3326),e.e(6436),e.e(3003),e.e(152)]).then(e.bind(e,77123)))},{path:"/explore",pageClass:"page-explore",roles:()=>Cn.TP.evaluatePermission([yn.w.DataSourcesExplore]),component:ln(()=>k.Ay.exploreEnabled?Promise.all([e.e(407),e.e(5995),e.e(4814),e.e(3686),e.e(7051),e.e(3474),e.e(3688),e.e(9147),e.e(9604)]).then(e.bind(e,55712)):e.e(4422).then(e.bind(e,89153)))},{path:"/drilldown",component:()=>(0,j.jsx)(Nn,{navId:"drilldown"})},{path:"/apps",component:()=>(0,j.jsx)(Nn,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>(0,j.jsx)(Nn,{navId:"alerts-and-incidents",header:!(0,Xa.y$)()&&(0,Xa.qc)()||(0,Xa.ES)()?(0,j.jsx)(gf,{}):void 0})},{path:"/testing-and-synthetics",component:()=>(0,j.jsx)(Nn,{navId:"testing-and-synthetics"})},{path:"/monitoring",component:()=>(0,j.jsx)(At.C5,{replace:!0,to:"/observability"})},{path:"/observability",component:()=>(0,j.jsx)(Nn,{navId:"observability"})},{path:"/infrastructure",component:()=>(0,j.jsx)(Nn,{navId:"infrastructure"})},{path:"/frontend",component:()=>(0,j.jsx)(Nn,{navId:"frontend"})},{path:"/admin/general",component:()=>(0,j.jsx)(Nn,{navId:"cfg/general"})},{path:"/admin/plugins",component:()=>(0,j.jsx)(Nn,{navId:"cfg/plugins"})},{path:"/admin/extensions",navId:"extensions",roles:()=>Cn.TP.evaluatePermission([yn.w.PluginsInstall,yn.w.PluginsWrite]),component:Cf||k.Ay.featureToggles.enableExtensionsAdminPage?ln(()=>e.e(5902).then(e.bind(e,79682))):()=>(0,j.jsx)(At.C5,{replace:!0,to:"/admin"})},{path:"/admin/access",component:()=>(0,j.jsx)(Nn,{navId:"cfg/access"})},{path:"/org",component:ln(()=>Promise.all([e.e(3126),e.e(1510)]).then(e.bind(e,73318)))},{path:"/org/new",component:ln(()=>e.e(7930).then(e.bind(e,45408)))},{path:"/org/users",component:()=>(0,j.jsx)(At.C5,{replace:!0,to:"/admin/users"})},{path:"/org/users/invite",component:ln(()=>e.e(7720).then(e.bind(e,65914)))},{path:"/org/serviceaccounts",roles:()=>Cn.TP.evaluatePermission([yn.w.ServiceAccountsRead,yn.w.ServiceAccountsCreate]),component:ln(()=>Promise.all([e.e(265),e.e(6777)]).then(e.bind(e,75955)))},{path:"/org/serviceaccounts/create",component:ln(()=>Promise.all([e.e(265),e.e(4176)]).then(e.bind(e,41150)))},{path:"/org/serviceaccounts/:id",component:ln(()=>Promise.all([e.e(265),e.e(6576)]).then(e.bind(e,88468)))},{path:"/org/teams",roles:()=>Cn.TP.evaluatePermission([yn.w.ActionTeamsRead,yn.w.ActionTeamsCreate]),component:ln(()=>Promise.all([e.e(265),e.e(1036)]).then(e.bind(e,34314)))},{path:"/org/teams/new",roles:()=>Cn.TP.evaluatePermission([yn.w.ActionTeamsCreate]),component:ln(()=>Promise.all([e.e(265),e.e(5436)]).then(e.bind(e,84974)))},{path:"/org/teams/edit/:uid/:page?",roles:()=>Cn.TP.evaluatePermission([yn.w.ActionTeamsRead,yn.w.ActionTeamsCreate]),component:ln(()=>Promise.all([e.e(265),e.e(3126),e.e(2212)]).then(e.bind(e,76172)))},{path:"/admin",component:()=>(0,j.jsx)(Nn,{navId:"cfg",header:(0,j.jsx)(Bs,{})})},{path:"/admin/authentication",roles:()=>Cn.TP.evaluatePermission([yn.w.SettingsWrite]),component:ln(()=>e.e(5592).then(e.bind(e,53953)))},{path:"/admin/authentication/ldap",component:k.Ay.featureToggles.ssoSettingsLDAP?ln(()=>e.e(4582).then(e.bind(e,31368))):Ta},{path:"/admin/authentication/:provider",roles:()=>Cn.TP.evaluatePermission([yn.w.SettingsWrite]),component:ln(()=>e.e(5592).then(e.bind(e,81172)))},{path:"/admin/settings",component:ln(()=>e.e(7659).then(e.bind(e,29154)))},{path:"/admin/upgrading",component:ln(()=>e.e(6759).then(e.bind(e,12715)))},{path:"/admin/users",component:ln(()=>Promise.all([e.e(265),e.e(1743)]).then(e.bind(e,12074)))},{path:"/admin/users/create",component:ln(()=>e.e(9239).then(e.bind(e,62648)))},{path:"/admin/users/edit/:id",component:ln(()=>Promise.all([e.e(265),e.e(8054)]).then(e.bind(e,698)))},{path:"/admin/orgs",component:ln(()=>e.e(9736).then(e.bind(e,55026)))},{path:"/admin/orgs/edit/:id",component:ln(()=>Promise.all([e.e(265),e.e(9119)]).then(e.bind(e,88947)))},{path:"/admin/featuretoggles",component:k.Ay.featureToggles.featureToggleAdminPage?ln(()=>e.e(7024).then(e.bind(e,75180))):()=>(0,j.jsx)(At.C5,{replace:!0,to:"/admin"})},{path:"/admin/stats",component:ln(()=>e.e(9299).then(e.bind(e,32882)))},k.Ay.featureToggles.onPremToCloudMigrations&&{path:"/admin/migrate-to-cloud",roles:()=>Cn.TP.evaluatePermission([yn.w.MigrationAssistantMigrate]),component:ln(()=>e.e(3704).then(e.bind(e,2681)))},{path:"/login",allowAnonymous:!0,component:ln(()=>Promise.all([e.e(7651),e.e(3883)]).then(e.bind(e,798))),pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:ln(()=>e.e(8576).then(e.bind(e,68620))),chromeless:!0},{path:"/verify",component:k.Ay.verifyEmailEnabled?ln(()=>e.e(2018).then(e.bind(e,62018))):()=>(0,j.jsx)(At.C5,{replace:!0,to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",allowAnonymous:!0,component:k.Ay.disableUserSignUp?()=>(0,j.jsx)(At.C5,{replace:!0,to:"/login"}):ln(()=>e.e(8347).then(e.bind(e,98347))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",allowAnonymous:!0,chromeless:!0,component:ln(()=>e.e(3818).then(e.bind(e,81545)))},{path:"/user/password/reset",allowAnonymous:!0,component:ln(()=>Promise.all([e.e(7651),e.e(641)]).then(e.bind(e,1711))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",roles:()=>Cn.TP.evaluatePermission([yn.w.SnapshotsRead]),component:ln(()=>e.e(6590).then(e.bind(e,3839)))},{path:"/playlists",component:ln(()=>e.e(1168).then(e.bind(e,22129)))},{path:"/playlists/play/:uid",component:ln(()=>e.e(1374).then(e.bind(e,57304)))},{path:"/playlists/new",component:ln(()=>e.e(7616).then(e.bind(e,95594)))},{path:"/playlists/edit/:uid",component:ln(()=>e.e(7620).then(e.bind(e,33876)))},{path:"/sandbox/benchmarks",component:ln(()=>e.e(9354).then(e.bind(e,13591)))},{path:"/sandbox/test",allowAnonymous:!0,component:ln(()=>e.e(5354).then(e.bind(e,12057)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:ln(()=>Promise.all([e.e(3003),e.e(5804)]).then(e.bind(e,95576)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>Cn.TP.evaluatePermission([yn.w.AlertingRuleRead]),component:ln(()=>Promise.all([e.e(3003),e.e(4333)]).then(e.bind(e,85185)))},{path:"/library-panels",component:ln(()=>e.e(8516).then(e.bind(e,21155)))},{path:"/notifications",component:ln(()=>e.e(4140).then(e.bind(e,30946)))},{path:"/explore/metrics/*",roles:()=>Cn.TP.evaluatePermission([yn.w.DataSourcesExplore]),component:ln(()=>e.e(8513).then(e.bind(e,24227)))},{path:"/bookmarks",component:ln(()=>e.e(7759).then(e.bind(e,27906)))},k.Ay.featureToggles.restoreDashboards&&{path:"/dashboard/recently-deleted",roles:()=>["Admin","ServerAdmin"],component:ln(()=>Promise.all([e.e(3326),e.e(6436),e.e(6299)]).then(e.bind(e,3853)))},{path:"/femt",component:()=>(0,j.jsx)(At.C5,{replace:!0,to:"/"})},...yf(),...Of(),...Ls(),...Ef(),...Tf,...Pf(),...Us(),...bf(),{path:"/goto/*",component:Rf},{path:"/*",component:Ba.H}].filter(_t.zz)}function Of(z=k.Ay){return z.supportBundlesEnabled?[{path:"/support-bundles",component:ln(()=>e.e(123).then(e.bind(e,236)))},{path:"/support-bundles/create",component:ln(()=>e.e(1515).then(e.bind(e,26484)))}]:[]}function Sf(){const{uid:z=""}=(0,At.g)();return(0,j.jsx)(At.C5,{replace:!0,to:ts.b.DataSourcesDashboards.replace(":uid",z)})}function If(){const{uid:z=""}=(0,At.g)();return(0,j.jsx)(At.C5,{replace:!0,to:ts.b.DataSourcesEdit.replace(":uid",z)})}function Rf(){const{pathname:z}=(0,At.zy)();return(0,o.useEffect)(()=>{window.location.href=z},[z]),null}var $a=e(8535),co=e(58449),Af=e(77345);const jf=()=>{const{isOpen:z}=(0,co.sA)();return(0,j.jsx)(Af.k,{isExtensionSidebarOpen:z})};var Vs=e(27963),jc=e(75683),Lc=e(56297);function Lf({error:z,errorInfo:H}){const Y=(0,At.zy)(),oe=z?.name==="ChunkLoadError",pe=(0,$t.of)(Bf);return(0,o.useEffect)(()=>{oe&&Y.search.indexOf("chunkNotFound")===-1&&(window.location.href=m.I.getUrlForPartial(Y,{chunkNotFound:!0}))},[Y,oe]),(0,j.jsx)(hn.Y,{navId:"error",layout:jc.k.Canvas,children:(0,j.jsxs)("div",{className:pe.container,children:[oe&&(0,j.jsxs)("div",{children:[(0,j.jsx)("h2",{children:(0,j.jsx)(d.x6,{i18nKey:"route-error.title",children:"Unable to find application file"})}),(0,j.jsx)("br",{}),(0,j.jsx)("h2",{className:"page-heading",children:(0,j.jsx)(d.x6,{i18nKey:"route-error.description",children:"Grafana has likely been updated. Please try reloading the page."})}),(0,j.jsx)("br",{}),(0,j.jsx)(fe.$n,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload(),children:(0,j.jsx)(d.x6,{i18nKey:"route-error.reload-button",children:"Reload"})}),(0,j.jsx)(Lc.D,{title:(0,d.t)("route-error.error-title","Error details"),error:z,errorInfo:H})]}),!oe&&(0,j.jsx)(Lc.D,{title:(0,d.t)("route-error.error-unexpected-title","An unexpected error happened"),error:z,errorInfo:H})]})})}const Bf=z=>({container:(0,st.css)({width:"500px",margin:z.spacing(8,"auto")})});var Uf=e(42581);function Wf(){const z=(0,$t.of)(Vf);return(0,j.jsx)("div",{className:z.container,"aria-live":"polite",role:"status","aria-label":(0,d.t)("bouncing-loader.label","Loading"),children:(0,j.jsx)("div",{className:z.bounce,children:(0,j.jsx)("img",{alt:"",src:Uf,className:z.logo})})})}const Nf=(0,st.keyframes)({"0%":{opacity:0,animationTimingFunction:"cubic-bezier(0, 0, 0.5, 1)"},"100%":{opacity:1}}),Kf=(0,st.keyframes)({"0%":{opacity:0},"50%":{opacity:1},"100%":{opacity:0}}),Ff=(0,st.keyframes)({"from, to":{transform:"translateY(0px)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"50%":{transform:"translateY(-50px)",animationTimingFunction:"cubic-bezier(0.9, 0, 0.7, 1)"}}),wf=(0,st.keyframes)({"0%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0.3, 0, 0.1, 1)"},"15%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 0.75)"},"55%":{transform:"scaleX(1.05) scaleY(0.95)",animationTimingFunction:"cubic-bezier(0.9, 0, 1, 1)"},"95%":{transform:"scaleX(0.75) scaleY(1.25)",animationTimingFunction:"cubic-bezier(0, 0, 0, 1)"},"100%":{transform:"scaleX(1.3) scaleY(0.8)",animationTimingFunction:"cubic-bezier(0, 0, 0.7, 1)"}}),Vf=z=>({container:(0,st.css)({opacity:0,[z.transitions.handleMotion("no-preference")]:{animationName:Nf,animationIterationCount:1,animationDuration:"0.9s",animationDelay:"0.5s",animationFillMode:"forwards"},[z.transitions.handleMotion("reduce")]:{animationName:Kf,animationIterationCount:"infinite",animationDuration:"4s",animationDelay:"0.5s"}}),bounce:(0,st.css)({textAlign:"center",[z.transitions.handleMotion("no-preference")]:{animationName:Ff,animationDuration:"0.9s",animationIterationCount:"infinite"}}),logo:(0,st.css)({display:"inline-block",[z.transitions.handleMotion("no-preference")]:{animationName:wf,animationDuration:"0.9s",animationIterationCount:"infinite"},width:"60px",height:"60px"})});function $f(){const z=(0,$t.of)(zf);return(0,j.jsx)("div",{className:z.loadingPage,children:(0,j.jsx)(Wf,{})})}const zf=z=>({loadingPage:(0,st.css)({backgroundColor:z.colors.background.primary,flex:1,flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function Gf(z){const{chrome:H,keybindings:Y}=(0,Vs.Il)();return H.setMatchedRoute(z.route),(0,o.useLayoutEffect)(()=>{Y.clearAndInitGlobalBindings(z.route)},[Y,z.route]),(0,o.useEffect)(()=>(Sd(z.route),Id(),(0,C.Lc)("GrafanaRoute",!1,"Mounted",z.route),()=>{(0,C.Lc)("GrafanaRoute",!1,"Unmounted",z.route),Sd(z.route,!0)}),[]),(0,o.useEffect)(()=>{Id(),(0,Tt.Jy)(),(0,C.Lc)("GrafanaRoute",!1,"Updated",z)}),(0,C.Lc)("GrafanaRoute",!1,"Rendered",z.route),(0,j.jsx)(Jt.tH,{dependencies:[z.route],children:({error:oe,errorInfo:pe})=>oe?(0,j.jsx)(Lf,{error:oe,errorInfo:pe}):(0,j.jsx)(o.Suspense,{fallback:(0,j.jsx)($f,{}),children:(0,j.jsx)(z.route.component,{...z,queryParams:(0,C.SE)(z.location.search)})})})}function Hf({route:z}){const H=(0,At.zy)();if(ee.$.featureToggles.multiTenantFrontend&&!z.allowAnonymous&&!ee.$.anonymousEnabled&&!Cn.TP.isSignedIn)return Cn.TP.setRedirectToUrl(),(0,j.jsx)(At.C5,{replace:!0,to:"/login"});const Y=z.roles?z.roles():[];return Y?.length&&!Y.some(oe=>Cn.TP.hasRole(oe))?(0,j.jsx)(At.C5,{replace:!0,to:"/"}):(0,j.jsx)(Gf,{route:z,location:H})}function _f(z){return z.pageClass?z.pageClass.split(" "):[]}function Sd(z,H=!1){for(const Y of _f(z))H?document.body.classList.remove(Y):document.body.classList.add(Y)}function Id(){document.body.classList.remove("sidemenu-open--xs");const z=document.getElementById("tooltip");z?.parentElement?.removeChild(z);const H=document.querySelectorAll(".tooltip");for(let Y=0;Y<H.length;Y++){const oe=H[Y];oe.parentElement?.removeChild(oe)}}var Qf=e(6007),kf=e(90382),Bc=e(33184),Rd=e(65240);class Yf extends o.PureComponent{constructor(){super(...arguments),this.styles=Jf(ee.$.theme2),this.state={},this.initListener=()=>{const H=(0,Bc.oF)();H&&(this.subscription=H.getConnectionState().subscribe({next:Y=>{this.setState({show:!Y})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:H}=this.state;return H?!Cn.TP.isSignedIn||!ee.$.liveEnabled||Cn.TP.user.orgRole===kf.X.None?null:(0,j.jsx)(Cs.F,{severity:"warning",className:this.styles.warn,title:(0,d.t)("live.live-connection-warning.title-connection-to-server-is-lost","Connection to server is lost...")}):null}}const Jf=(0,Rd.N)(z=>({warn:(0,st.css)({position:"fixed",bottom:0,left:"50%",transform:"translate(-50%)",maxWidth:"400px",zIndex:z.zIndex.portal,cursor:"wait"})}));var Pl=e(28337),Xf=e(35216),kl=e(69896),Ad=e(85618);const Zf="scope.grafana.app",qf="v0alpha1",ep=(0,Ad.Ge)(),Dl=`/apis/${Zf}/${qf}/namespaces/${ep}`;class tp{constructor(){this.fetchDashboards=async H=>{try{return(await(0,x.AI)().get(Dl+"/find/scope_dashboard_bindings",{scope:H}))?.items??[]}catch{return[]}},this.fetchScopeNavigations=async H=>{try{return(await(0,x.AI)().get(Dl+"/find/scope_navigations",{scope:H}))?.items??[]}catch{return[]}},this.fetchScopeNode=async H=>{if(!ee.$.featureToggles.useScopeSingleNodeEndpoint)return Promise.resolve(void 0);try{return await(0,x.AI)().get(Dl+`/scopenodes/${H}`)}catch{return}}}async fetchScope(H){try{return await(0,x.AI)().get(Dl+`/scopes/${H}`)}catch(Y){console.error(Y);return}}async fetchMultipleScopes(H){return(await Promise.all(H.map(oe=>this.fetchScope(oe)))).filter(oe=>oe!==void 0)}async fetchNodes(H){const Y=H.limit??1e3;if(!(0<Y&&Y<=1e4))throw new Error("Limit must be between 1 and 10000");try{return(await(0,x.AI)().get(Dl+"/find/scope_node_children",{parent:H.parent,query:H.query,limit:Y}))?.items??[]}catch{return[]}}}var bl=e(49426),np=e(49510),jd=e(41900);class ap{constructor(H,Y,oe){this.selectorService=H,this.dashboardsService=Y,this.locationService=oe,this.subscriptions=[],this.updateState=ye=>{this._state.next({...this._state.getValue(),...ye})},this.changeScopes=(ye,Ie)=>this.selectorService.changeScopes(ye,Ie),this.setReadOnly=ye=>{this.state.readOnly!==ye&&this.updateState({readOnly:ye}),ye&&this.selectorService.state.opened&&this.selectorService.closeAndReset()},this.setEnabled=ye=>{this.state.enabled!==ye&&(this.updateState({enabled:ye}),ye&&this.locationService.partial({scopes:this.selectorService.state.appliedScopes.map(Ie=>Ie.scopeId)},!0))},this._state=new bl.t({enabled:!1,readOnly:!1}),this._stateObservable=new bl.t({...this._state.getValue(),value:this.selectorService.state.appliedScopes.map(ye=>this.selectorService.state.scopes[ye.scopeId]).filter(ye=>ye),loading:this.selectorService.state.loading,drawerOpened:this.dashboardsService.state.drawerOpened}),this.subscriptions.push((0,np.z)([this._state.asObservable(),this.getSelectorServiceStateObservable(),this.getDashboardsServiceStateObservable()]).pipe((0,Dt.T)(([ye,Ie,we])=>({...ye,value:Ie.selectedScopes,loading:Ie.loading,drawerOpened:we.drawerOpened}))).subscribe(this._stateObservable));const pe=new URLSearchParams(oe.getLocation().search),ge=pe.get("scope_parent");this.changeScopes(pe.getAll("scopes"),ge??void 0),ge&&this.selectorService.getScopeNode(ge).catch(ye=>{console.error("Failed to pre-load parent node",ye)}),this.subscriptions.push(oe.getLocationObservable().subscribe(ye=>{if(!this.state.enabled)return;const Ie=new URLSearchParams(ye.search),we=Ie.get("scope_parent"),ke=Ie.getAll("scopes");ke.length&&this.changeScopes(ke,we??void 0)})),this.subscriptions.push(H.subscribeToState((ye,Ie)=>{const we=Ie.appliedScopes[0]?.parentNodeId,ke=ye.appliedScopes[0]?.parentNodeId;we!==ke&&ke&&this.locationService.partial({scope_parent:ke},!0);const et=Ie.appliedScopes.map(dt=>dt.scopeId),tt=ye.appliedScopes.map(dt=>dt.scopeId);(0,J.isEqual)(et,tt)||this.locationService.partial({scopes:tt},!0)}))}get state(){return this._stateObservable.value}get stateObservable(){return this._stateObservable}getSelectorServiceStateObservable(){return this.selectorService.stateObservable.pipe((0,Dt.T)(H=>({selectedScopes:H.appliedScopes.map(Y=>H.scopes[Y.scopeId]).filter(Y=>Y),loading:H.loading})),(0,jd.F)((H,Y)=>H.loading===Y.loading&&(0,J.isEqual)(H.selectedScopes,Y.selectedScopes)))}getDashboardsServiceStateObservable(){return this.dashboardsService.stateObservable.pipe((0,jd.F)((H,Y)=>H.drawerOpened===Y.drawerOpened))}cleanUp(){for(const H of this.subscriptions)H.unsubscribe()}}var sp=e(97256);class Ld{constructor(H){this.subscribeToState=Y=>this._state.pipe((0,sp.J)()).subscribe(([oe,pe])=>Y(pe,oe)),this.updateState=Y=>{this._state.next(Object.freeze({...this.state,...Y}))},this._state=new bl.t(Object.freeze(H))}get state(){return this._state.getValue()}get stateObservable(){return this._state.asObservable()}}class rp extends Ld{constructor(H){super({drawerOpened:!1,dashboards:[],scopeNavigations:[],filteredFolders:{},folders:{},forScopeNames:[],loading:!1,searchQuery:""}),this.apiClient=H,this.updateFolder=(Y,oe)=>{let pe={...this.state.folders},ge={...this.state.filteredFolders},ye=pe,Ie=ge;for(let tt=0;tt<Y.length-1;tt++)ye=ye[Y[tt]].folders,Ie=Ie[Y[tt]].folders;const we=Y[Y.length-1],ke=ye[we],et=Ie[we];ke.expanded=oe,et.expanded=oe,this.updateState({folders:pe,filteredFolders:ge})},this.changeSearchQuery=Y=>{Y=Y??"";const oe=this.filterFolders(this.state.folders,Y);this.updateState({filteredFolders:oe,searchQuery:Y})},this.clearSearchQuery=()=>{this.changeSearchQuery("")},this.fetchDashboards=async Y=>{if((0,J.isEqual)(this.state.forScopeNames,Y))return;if(Y.length===0){this.updateState({dashboards:[],filteredFolders:{},folders:{},forScopeNames:[],loading:!1,drawerOpened:!1});return}this.updateState({forScopeNames:Y,loading:!0});const pe=await(ee.$.featureToggles.useScopesNavigationEndpoint?this.apiClient.fetchScopeNavigations:this.apiClient.fetchDashboards)(Y);if((0,J.isEqual)(this.state.forScopeNames,Y)){const ge=this.groupSuggestedItems(pe),ye=this.filterFolders(ge,this.state.searchQuery);this.updateState({scopeNavigations:pe,filteredFolders:ye,folders:ge,loading:!1,drawerOpened:pe.length>0})}},this.groupSuggestedItems=Y=>{const oe=C.Ny.getLocation().pathname,pe=oe.startsWith("/d/"),ge={"":{title:"",expanded:!0,folders:{},suggestedNavigations:{}}};return Y.forEach(ye=>{const Ie=ge[""],we=ye.status.groups??[];let ke=!1;if(pe&&"dashboard"in ye.spec){const tt=oe.split("/")[2];ke=ye.spec.dashboard===tt}"url"in ye.spec&&(ke=oe.startsWith(ye.spec.url)),we.forEach(tt=>{const dt=!!Ie.folders[tt],ft=dt&&Ie.folders[tt].expanded;tt&&!dt&&(Ie.folders[tt]={title:tt,expanded:ke,folders:{},suggestedNavigations:{}}),tt&&ke&&!ft&&(Ie.folders[tt].expanded=!0)}),(we.length>0?we.map(tt=>tt===""?Ie.suggestedNavigations:Ie.folders[tt].suggestedNavigations):[Ie.suggestedNavigations]).forEach(tt=>{"dashboard"in ye.spec&&"dashboardTitle"in ye.status&&!tt[ye.spec.dashboard]?tt[ye.spec.dashboard]={url:"/d/"+ye.spec.dashboard,title:ye.status.dashboardTitle,id:ye.spec.dashboard}:"url"in ye.spec&&"title"in ye.status&&!tt[ye.spec.url]&&(tt[ye.spec.url]={title:ye.status.title||ye.metadata.name,url:ye.spec.url,id:ye.metadata.name})})}),ge},this.filterFolders=(Y,oe)=>(oe=(oe??"").toLowerCase(),Object.entries(Y).reduce((pe,[ge,ye])=>{if(ye.title.toLowerCase().includes(oe))return pe[ge]={...ye,expanded:!0},pe;const Ie=this.filterFolders(ye.folders,oe),we=Object.entries(ye.suggestedNavigations).filter(([ke,et])=>et.title.toLowerCase().includes(oe));return(Object.keys(Ie).length>0||we.length>0)&&(pe[ge]={...ye,expanded:!0,folders:Ie,suggestedNavigations:Object.fromEntries(we)}),pe},{})),this.toggleDrawer=()=>this.updateState({drawerOpened:!this.state.drawerOpened})}}var Br=e(78012);function Bd(z){const H={...z};if(H.expanded=!1,H.children){H.children={...H.children};for(const Y of Object.keys(H.children))H.children[Y]=Bd(H.children[Y])}return H}function op(z,H){let Y={...z},oe=Y;oe.expanded=!0;const pe=H.slice(1);for(const ge of pe){const ye=oe.children?.[ge];if(!ye)throw new Error(`Node ${ge} not found in tree`);const Ie={...ye};oe.children={...oe.children},oe.children[ge]=Ie,Ie.expanded=!0,oe=Ie}return Y}function Yl(z){return z.spec.nodeType==="container"}function Jl(z){return z.spec.linkType==="scope"}function Xl(z,H){if(z==="")return[""];const Y=[z];let oe=H[z]?.spec.parentName;for(;oe;)Y.unshift(oe),oe=H[oe]?.spec.parentName;return Y.unshift(""),Y}function Uc(z,H,Y){if(H.length<1)return z;const oe={...z};let pe=oe;if(H.length===1&&H[0]==="")return Y(pe),oe;for(const ge of H.slice(1)){if(!pe.children?.[ge])return oe;pe.children={...pe.children},pe.children[ge]={...pe.children[ge]},pe=pe.children[ge]}return Y(pe),oe}function Ud(z,H){if(H.length<1)return;if(H.length===1&&H[0]==="")return z;let Y=z;for(const oe of H.slice(1))if(Y=Y.children?.[oe],!Y)return;return Y}var za=e(69439);const ip=za.Ik({key:za.Yj(),value:za.Yj(),values:za.YO(za.Yj()).optional(),operator:za.k5(["equals","not-equals","regex-match","regex-not-match","one-of","not-one-of"])}),lp=za.Ik({title:za.Yj(),type:za.Yj().optional(),description:za.Yj().optional(),category:za.Yj().optional(),filters:za.YO(ip)}),Wd=za.Ik({metadata:za.Ik({name:za.Yj()}),spec:lp}),cp=za.Ik({nodeType:za.k5(["container","leaf"]),title:za.Yj(),description:za.Yj().optional(),disableMultiSelect:za.zM().optional(),linkId:za.Yj().optional(),linkType:za.k5(["scope"]).optional(),parentName:za.Yj().optional()}),dp=za.Ik({metadata:za.Ik({name:za.Yj()}),spec:cp}),up=Wd.extend({parentNode:dp.optional()}),Wc="grafana.scopes.recent";class hp extends Ld{constructor(H,Y,oe=Br.M){super({loading:!1,opened:!1,loadingNodeName:void 0,nodes:{},scopes:{},selectedScopes:[],appliedScopes:[],tree:{expanded:!1,scopeNodeId:"",query:"",children:void 0}}),this.apiClient=H,this.dashboardsService=Y,this.store=oe,this.getScopeNode=async ge=>{if(this.state.nodes[ge])return this.state.nodes[ge];try{const ye=await this.apiClient.fetchScopeNode(ge);return ye&&this.updateState({nodes:{...this.state.nodes,[ye.metadata.name]:ye}}),ye}catch(ye){console.error("Failed to load node",ye);return}},this.expandOrFilterNode=async(ge,ye)=>{const Ie=Xl(ge,this.state.nodes),we=Ud(this.state.tree,Ie);if(we)if(we.scopeNodeId===""||Yl(this.state.nodes[we.scopeNodeId])){if(!we.expanded||we.query!==ye){const ke=Uc(this.state.tree,Ie,et=>{et.expanded=!0,et.query=ye||""});this.updateState({tree:ke}),await this.loadNodeChildren(Ie,we,ye)}}else throw new Error(`Trying to expand node at id ${ge} that is not expandable`);else throw new Error(`Trying to expand node at id ${ge} not found`)},this.collapseNode=async ge=>{const ye=Xl(ge,this.state.nodes);if(Ud(this.state.tree,ye)){const we=Uc(this.state.tree,ye,ke=>{ke.expanded=!1,ke.query=""});this.updateState({tree:we})}else throw new Error(`Trying to collapse node at path or id ${ge} not found`)},this.loadNodeChildren=async(ge,ye,Ie)=>{this.updateState({loadingNodeName:ye.scopeNodeId});const we=await this.apiClient.fetchNodes({parent:ye.scopeNodeId,query:Ie}),ke={...this.state.nodes};for(const tt of we)ke[tt.metadata.name]=tt;const et=Uc(this.state.tree,ge,tt=>{tt.children={};for(const dt of we)tt.children[dt.metadata.name]={expanded:!1,scopeNodeId:dt.metadata.name,query:"",children:void 0}});this.updateState({tree:et,nodes:ke,loadingNodeName:void 0})},this.selectScope=async ge=>{let ye=this.state.nodes[ge];if(!Jl(ye))throw new Error(`Trying to select node with id ${ge} that is not selectable`);if(!ye.spec.linkId)throw new Error(`Trying to select node id ${ge} that does not have a linkId`);this.apiClient.fetchScope(ye.spec.linkId).then(et=>{et&&this.updateState({scopes:{...this.state.scopes,[et.metadata.name]:et}})});const Ie=this.state.nodes[ye.spec.parentName],we={scopeId:ye.spec.linkId,scopeNodeId:ye.metadata.name,parentNodeId:Ie?.metadata.name};!(this.state.selectedScopes[0]?.scopeNodeId&&this.state.nodes[this.state.selectedScopes[0].scopeNodeId].spec.parentName===ye.spec.parentName)||Ie?.spec.disableMultiSelect||this.state.selectedScopes.length===0?this.updateState({selectedScopes:[we]}):this.updateState({selectedScopes:[...this.state.selectedScopes,we]})},this.deselectScope=async ge=>{const ye=this.state.nodes[ge],Ie=ye?ke=>ke.scopeNodeId!==ye.metadata.name&&ke.scopeId!==ye.spec.linkId:ke=>ke.scopeNodeId!==ge&&ke.scopeId!==ge;let we=this.state.selectedScopes.filter(Ie);this.updateState({selectedScopes:we})},this.updateNode=async(ge,ye,Ie)=>ye?this.expandOrFilterNode(ge,Ie):this.collapseNode(ge),this.changeScopes=(ge,ye)=>this.applyScopes(ge.map(Ie=>({scopeId:Ie,parentNodeId:ye}))),this.applyScopes=async ge=>{if(!(this.state.appliedScopes.length===ge.length&&this.state.appliedScopes.every(ye=>ge.find(Ie=>ye.scopeId===Ie.scopeId)))&&(this.updateState({appliedScopes:ge,selectedScopes:ge,loading:ge.length>0}),this.dashboardsService.fetchDashboards(ge.map(ye=>ye.scopeId)),ge.length>0)){const ye=await this.apiClient.fetchMultipleScopes(ge.map(tt=>tt.scopeId)),Ie={...this.state.scopes};for(const tt of ye)Ie[tt.metadata.name]=tt;const we=ge[0]?.scopeNodeId?this.state.nodes[ge[0]?.scopeNodeId]:void 0,ke=ge[0]?.parentNodeId||we?.spec.parentName,et=ke?this.state.nodes[ke]:void 0;this.addRecentScopes(ye,et),this.updateState({scopes:Ie,loading:!1})}},this.removeAllScopes=()=>this.applyScopes([]),this.addRecentScopes=(ge,ye)=>{if(ge.length===0)return;const Ie=structuredClone(ge);ye&&(Ie[0].parentNode=ye);const we=5,ke=this.getRecentScopes();ke.unshift(Ie),this.store.set(Wc,JSON.stringify(ke.slice(0,we-1)))},this.getRecentScopes=()=>{const ge=this.store.get(Wc);return Kd(ge).filter(Ie=>{if(Ie.length!==this.state.appliedScopes.length)return!0;const we=new Set(Ie.map(ke=>ke.metadata.name));return!this.state.appliedScopes.every(ke=>we.has(ke.scopeId))})},this.getNodesFromRecentScopes=()=>{const ge=this.store.get(Wc),ye=Kd(ge);return Object.fromEntries(ye.map(we=>[we[0]?.parentNode?.metadata?.name,we[0]?.parentNode]).filter(([we,ke])=>ke!==void 0&&we!==void 0))},this.open=async()=>{(!this.state.tree?.children||Object.keys(this.state.tree?.children).length===0)&&await this.expandOrFilterNode("");let ge=Bd(this.state.tree);if(this.state.selectedScopes.length&&this.state.selectedScopes[0].scopeNodeId){let ye=Xl(this.state.selectedScopes[0].scopeNodeId,this.state.nodes);ye=ye.slice(0,ye.length-1),ge=op(ge,ye)}this.resetSelection(),this.updateState({tree:ge,opened:!0})},this.closeAndReset=()=>{this.updateState({opened:!1}),this.resetSelection()},this.closeAndApply=()=>(this.updateState({opened:!1}),this.apply()),this.apply=()=>this.applyScopes(this.state.selectedScopes),this.resetSelection=()=>{this.updateState({selectedScopes:[...this.state.appliedScopes]})},this.searchAllNodes=async(ge,ye)=>{const Ie=await this.apiClient.fetchNodes({query:ge,limit:ye}),we={...this.state.nodes};for(const ke of Ie)we[ke.metadata.name]=ke;return this.updateState({nodes:we}),Ie};const pe=this.getNodesFromRecentScopes();this.updateState({nodes:{...this.state.nodes,...pe}})}}function fp(z){return typeof z=="object"&&z!==null&&"scope"in z&&Nd(z.scope)}function Nd(z){return Wd.safeParse(z).success}function pp(z){return up.safeParse(z).success}function Kd(z){let H;try{H=JSON.parse(z||"[]")}catch(Y){return console.error("Failed to parse recent scopes",Y,z),[]}if(!(Array.isArray(H)&&Array.isArray(H[0])))return[];if(fp(H[0]?.[0]))H=H.map(Y=>Y.map(oe=>oe.scope));else if(!Nd(H[0]?.[0]))return[];for(const Y of H)Y[0]?.parentNode&&(pp(Y[0])||(Y[0].parentNode=void 0));return H}const Fd=(0,o.createContext)(void 0);function Cl(){return(0,o.useContext)(Fd)}function gp(){const z=new tp,H=new rp(z),Y=new hp(z,H);return{scopesService:new ap(Y,H,C.Ny),scopesSelectorService:Y,scopesDashboardsService:H,client:z}}const mp=({children:z,services:H})=>{const Y=(0,o.useMemo)(()=>H??gp(),[H]);return(0,o.useEffect)(()=>()=>{Y.scopesService.cleanUp()},[Y]),(0,j.jsx)(kl.j.Provider,{value:ee.$.featureToggles.scopeFilters?Y.scopesService:void 0,children:(0,j.jsx)(Fd.Provider,{value:ee.$.featureToggles.scopeFilters?Y:void 0,children:z})})};var vp=e(61574),wd=e(35557),Vd=e(8515),yp=e(46942),xp=e.n(yp),Ep=e(33149),Pp=e(45897),Zl=e(51702),nr=e(29043),$d=e(18828),zd=e(43107),Gd=e(93225),Dp=e(47327),bp=e(50201),Hd=e(65178),Cp=e(35822);const ql=0,Tp=z=>{const H=o.useRef(null),Y=o.useRef(null),oe=o.useRef(z.items);oe.current=z.items;const pe=(0,Cp.useVirtual)({size:oe.current.length,parentRef:Y}),{query:ge,search:ye,currentRootActionId:Ie,activeIndex:we,options:ke}=(0,lt.useKBar)(ft=>({search:ft.searchQuery,currentRootActionId:ft.currentRootActionId,activeIndex:ft.activeIndex}));o.useEffect(()=>{const ft=it=>{it.key==="ArrowUp"||it.ctrlKey&&it.key==="p"?(it.preventDefault(),ge.setActiveIndex(vt=>{let Lt=vt>ql?vt-1:vt;if(typeof oe.current[Lt]=="string"){if(Lt===0)return vt;Lt-=1}return Lt})):it.key==="ArrowDown"||it.ctrlKey&&it.key==="n"?(it.preventDefault(),ge.setActiveIndex(vt=>{let Lt=vt<oe.current.length-1?vt+1:vt;if(typeof oe.current[Lt]=="string"){if(Lt===oe.current.length-1)return vt;Lt+=1}return Lt})):it.key==="Enter"&&!it.metaKey&&(it.preventDefault(),H.current?.click())};return window.addEventListener("keydown",ft),()=>window.removeEventListener("keydown",ft)},[ge]);const{scrollToIndex:et}=pe;o.useEffect(()=>{et(we,{align:we<=1?"end":"auto"})},[we,et]),o.useEffect(()=>{ge.setActiveIndex(typeof z.items[ql]=="string"?ql+1:ql)},[ye,Ie,z.items,ge]);const tt=o.useCallback((ft,it)=>{if(typeof it=="string")return;const vt=it.url;it.command?(vt&&ft.preventDefault(),it.command.perform(it),(!it.id.startsWith("scopes/")||it.id==="scopes/apply")&&ge.toggle()):vt?ft.ctrlKey||ft.metaKey||ft.shiftKey||ge.toggle():(ge.setSearch(""),ge.setCurrentRootAction(it.id)),ke.callbacks?.onSelectAction?.(it)},[ge,ke]),dt=(0,Hd.usePointerMovedSinceMount)();return(0,j.jsx)("div",{ref:Y,style:{maxHeight:z.maxHeight||400,position:"relative",overflow:"auto"},children:(0,j.jsx)("div",{role:"listbox",id:lt.KBAR_LISTBOX,style:{height:`${pe.totalSize}px`,width:"100%"},children:pe.virtualItems.map(ft=>{const it=oe.current[ft.index],{target:vt,url:Lt}=it,Xt=typeof it!="string"&&{onPointerMove:()=>dt&&we!==ft.index&&ge.setActiveIndex(ft.index),onPointerDown:()=>ge.setActiveIndex(ft.index),onClick:Tn=>tt(Tn,it)},fn=ft.index===we,jn={id:(0,lt.getListboxItemId)(ft.index),role:"option","aria-selected":fn,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${ft.start}px)`},...Xt},un=o.cloneElement(z.onRender({item:it,active:fn}),{ref:ft.measureRef});return Lt?(0,j.jsx)("a",{href:typeof Lt=="function"?Lt(ye):Lt,target:vt,ref:fn?H:null,...jn,children:un},ft.index):(0,j.jsx)("div",{ref:fn?H:null,...jn,children:un},ft.index)})})})},Mp="kbar-listbox",Op=z=>`kbar-listbox-item-${z}`;function Sp(z){const{query:H,search:Y,actions:oe,currentRootActionId:pe,activeIndex:ge,showing:ye,options:Ie}=(0,lt.useKBar)(it=>({search:it.searchQuery,currentRootActionId:it.currentRootActionId,actions:it.actions,activeIndex:it.activeIndex,showing:it.visualState===lt.VisualState.showing})),[we,ke]=o.useState(Y);o.useEffect(()=>{H.setSearch(we)},[we,H]);const{defaultPlaceholder:et,...tt}=z;o.useEffect(()=>(H.setSearch(""),H.getInput().focus(),ke(""),()=>H.setSearch("")),[pe,H]);const dt=et??"Type a command or search\u2026",ft=(0,$t.of)(Ip);return(0,j.jsx)("input",{...tt,className:ft.input,ref:H.inputRefSetter,autoFocus:!0,autoComplete:"off",role:"combobox",spellCheck:"false","aria-expanded":ye,"aria-controls":Mp,"aria-activedescendant":Op(ge),value:we,placeholder:dt,onChange:it=>{z.onChange?.(it),ke(it.target.value),Ie?.callbacks?.onQueryChange?.(it.target.value)},onKeyDown:it=>{if(z.onKeyDown?.(it),pe&&!Y&&it.key==="Backspace"){const vt=oe[pe].parent;H.setCurrentRootAction(vt)}}})}const Ip=z=>({input:(0,st.css)({label:"kbar-search-input",fontSize:z.typography.body.fontSize,fontWeight:z.typography.fontWeightMedium,lineHeight:z.typography.body.lineHeight,color:z.colors.text.secondary,width:"100%",outline:"none",paddingLeft:0})}),_d=o.forwardRef(({action:z,active:H,currentRootActionId:Y},oe)=>{const pe=o.useMemo(()=>{if(!Y)return z.ancestors;const we=z.ancestors.findIndex(ke=>ke.id===Y);return z.ancestors.slice(we+1)},[z.ancestors,Y]),ge=(0,$t.of)(Rp);let ye=z.name;const Ie=we=>!!(we.command?.perform||we.url);return z.children.length&&!Ie(z)&&!ye.endsWith("...")&&(ye+="..."),(0,j.jsx)("div",{ref:oe,className:(0,st.cx)(ge.row,H&&ge.activeRow),children:(0,j.jsxs)("div",{className:ge.actionContainer,children:[z.icon,(0,j.jsxs)("div",{className:ge.textContainer,children:[pe.map(we=>(0,j.jsx)(o.Fragment,{children:!Ie(we)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:ge.breadcrumbAncestor,children:we.name}),(0,j.jsx)("span",{className:ge.breadcrumbSeparator,children:"\u203A"})]})},we.id)),(0,j.jsx)("span",{children:ye})]}),z.subtitle&&(0,j.jsx)("span",{className:ge.subtitleText,children:z.subtitle})]})})});_d.displayName="ResultItem";const Rp=z=>({row:(0,st.css)({padding:z.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:z.shape.radius.default,margin:z.spacing(0,1)}),activeRow:(0,st.css)({color:z.colors.text.maxContrast,background:z.colors.emphasize(z.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:z.spacing(.5),borderRadius:z.shape.radius.default,backgroundImage:z.colors.gradients.brandVertical}}),actionContainer:(0,st.css)({display:"flex",gap:z.spacing(1),alignItems:"baseline",fontSize:z.typography.fontSize,width:"100%"}),textContainer:(0,st.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,st.css)({color:z.colors.text.secondary}),breadcrumbSeparator:(0,st.css)({color:z.colors.text.secondary,marginLeft:z.spacing(1),marginRight:z.spacing(1)}),subtitleText:(0,st.css)({...z.typography.bodySmall,color:z.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var Ap=e(76459),jp=e.n(Ap),Lp=e(67020),Qd=e(55860);const Nc=8,Bp=7,Up=6,kd=5,Wp=4,Kc=3,Np=2,Kp=1,Fp=100,Yd=5,wp=jp()($p,200);async function Vp(){if(!Cn.TP.user.isSignedIn)return[];const z=(await Lp.A.getDashboardOpened()).slice(0,Yd),Y=(await(0,Qd.S)().search({kind:["dashboard"],limit:Yd,uid:z})).view.toArray();return Y.sort((pe,ge)=>{const ye=z.indexOf(pe.uid),Ie=z.indexOf(ge.uid);return ye-Ie}),Y.map(pe=>{const{url:ge,name:ye}=pe;return{id:`recent-dashboards${ge}`,name:`${ye}`,section:(0,d.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:Up,url:ge}})}async function $p(z){if(z.length===0||!Cn.TP.user.isSignedIn&&!ee.$.anonymousEnabled)return[];const H=await(0,Qd.S)().search({kind:["dashboard","folder"],query:z,limit:Fp});return H.view.map(oe=>{const{url:pe,name:ge,kind:ye,location:Ie}=oe;return{id:`go/${ye}${pe}`,name:`${ge}`,section:ye==="dashboard"?(0,d.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,d.t)("command-palette.section.folder-search-results","Folders"),priority:Kp,url:pe,subtitle:H.view.dataFrame.meta?.custom?.locationInfo[Ie]?.name}})}function zp({searchQuery:z,show:H}){const[Y,oe]=(0,o.useState)([]),[pe,ge]=(0,o.useState)(!1),ye=(0,o.useRef)(0);return(0,o.useEffect)(()=>{const Ie=Date.now();H&&z.length>0?(ge(!0),wp(z).then(we=>{Ie>ye.current&&(oe(we),ge(!1),ye.current=Ie)})):(oe([]),ge(!1),ye.current=Ie)},[H,z]),{searchResults:Y,isFetchingSearchResults:pe}}var Fc=e(9628);function Gp({selectedScopes:z,isDirty:H,apply:Y,deselectScope:oe,scopes:pe,nodes:ge}){const ye=(0,$t.of)(Hp);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(rn.B,{alignItems:"center",children:[(0,j.jsx)("span",{className:ye.scopesText,children:(0,j.jsx)(d.x6,{i18nKey:"command-palette.scopes.selected-scopes-label",children:"Scopes: "})}),(0,j.jsx)(rn.B,{wrap:"wrap",children:z?.map(Ie=>{const we=pe[Ie.scopeId]?.spec.title||Ie.scopeNodeId&&ge[Ie.scopeNodeId]?.spec.title||Ie.scopeId;return(0,j.jsx)(Yn.m,{selected:!0,icon:"times",label:we,onClick:()=>{oe(Ie.scopeNodeId||Ie.scopeId)}},Ie.scopeId)})})]}),H&&(0,j.jsxs)(fe.$n,{onClick:()=>{Y()},children:[(0,j.jsx)(d.x6,{i18nKey:"command-palette.scopes.apply-selected-scopes",children:"Apply"}),"\xA0",(0,j.jsx)(wa.E,{variant:"bodySmall",children:`${(0,Fc.gn)()}+\u21B5`})]})]})}const Hp=z=>({scopesText:(0,st.css)({label:"scopesText",fontSize:z.typography.bodySmall.fontSize,fontWeight:z.typography.fontWeightMedium,lineHeight:z.typography.bodySmall.lineHeight,color:z.colors.text.secondary}),selectedScope:(0,st.css)({background:z.colors.background.secondary,borderRadius:z.shape.radius.default,padding:z.spacing(0,.5),fontSize:z.typography.bodySmall.fontSize,fontWeight:z.typography.fontWeightMedium,lineHeight:z.typography.bodySmall.lineHeight,color:z.colors.text.secondary,display:"inline-flex",alignItems:"center",position:"relative",border:`1px solid ${z.colors.background.secondary}`,whiteSpace:"nowrap",marginRight:z.spacing(.5)})});function _p(){const z=Cl();if(!(ee.$.featureToggles.scopeFilters&&z))return[];const{scopesSelectorService:H}=z;return H.getRecentScopes().map(oe=>({id:oe.map(pe=>pe.spec.title).join(", "),name:oe.map(pe=>pe.spec.title).join(", "),section:(0,d.t)("command-palette.section.recent-scopes","Recent scopes"),subtitle:oe[0]?.parentNode?.spec.title,priority:Bp,perform:()=>{H.changeScopes(oe.map(pe=>pe.metadata.name))}}))}var Ur=e(24120),qo=e(88483);function wc(){const z=Cl();if(!z)return{updateNode:()=>{},selectScope:()=>{},resetSelection:()=>{},searchAllNodes:()=>Promise.resolve([]),apply:()=>{},deselectScope:()=>{},nodes:{},scopes:{},selectedScopes:[],appliedScopes:[],tree:{scopeNodeId:"",expanded:!1,query:""}};const{updateNode:H,selectScope:Y,resetSelection:oe,searchAllNodes:pe,deselectScope:ge,apply:ye}=z.scopesSelectorService,Ie=(0,Ur.A)(z.scopesSelectorService.stateObservable??new qo.c,z.scopesSelectorService.state);return{updateNode:H,selectScope:Y,resetSelection:oe,searchAllNodes:pe,apply:ye,deselectScope:ge,...Ie}}function Jd(){return{id:"scopes",section:(0,d.t)("command-palette.action.scopes","Scopes"),name:(0,d.t)("command-palette.action.scopes","Scopes"),keywords:"scopes filters",priority:Nc}}function Qp(z,H,Y,oe){const pe=[Jd()],ge=(ye,Ie)=>{if(!(!ye.children||Object.keys(ye.children).length===0))for(const we of Object.keys(ye.children)){const ke=ye.children[we],et=z[we],tt=Y.some(ft=>ft.scopeNodeId?ft.scopeNodeId===et.metadata.name:ft.scopeId===et.spec.linkId);if(et.spec.nodeType==="leaf"&&tt)continue;let dt=Xd(et,oe,Ie);pe.push(dt),ge(ke,dt.id)}};return ge(H,"scopes"),pe}function Xd(z,H,Y){let oe;return Y?(oe={id:`${Y}/${z.metadata.name}`,name:z.spec.title,keywords:`${z.spec.title} ${z.metadata.name}`,priority:Nc,parent:Y},z.spec.nodeType==="leaf"&&(oe.perform=()=>{H(z.metadata.name)})):oe={id:`scopes/${z.metadata.name}`,name:z.spec.title,keywords:`${z.spec.title} ${z.metadata.name}`,priority:Nc,section:(0,d.t)("command-palette.action.scopes","Scopes"),subtitle:z.spec.parentName,perform:()=>{H(z.metadata.name)}},oe}function kp(){const z=_p();(0,lt.useRegisterActions)(z,[z])}function Yp(z,H,Y){if(!ee.$.featureToggles.scopeFilters)return{scopesRow:void 0};const oe=Zp(z,Y),pe=Jp(z,Y),ge=oe||pe;return(0,lt.useRegisterActions)(ge,[ge]),Xp(H)}function Jp(z,H){const{updateNode:Y,selectScope:oe,resetSelection:pe,nodes:ge,tree:ye,selectedScopes:Ie}=wc();return(0,o.useEffect)(()=>(Y("",!0,""),pe(),()=>{pe()}),[Y,pe]),(0,o.useEffect)(()=>{const we=!H||H==="scopes"?"":(0,J.last)(H.split("/"));Y(we,!0,z)},[Y,z,H]),(0,o.useMemo)(()=>Qp(ge,ye,Ie,oe),[ge,ye,Ie,oe])}function Xp(z){const{nodes:H,scopes:Y,selectedScopes:oe,appliedScopes:pe,deselectScope:ge,apply:ye}=wc(),Ie=pe.map(ke=>ke.scopeId).sort().join("")!==oe.map(ke=>ke.scopeId).sort().join(""),we=(0,o.useCallback)(()=>{ye(),z()},[ye,z]);return(0,o.useEffect)(()=>{function ke(et){Ie&&et.key==="Enter"&&et.metaKey&&(et.preventDefault(),we())}return window.addEventListener("keydown",ke),()=>window.removeEventListener("keydown",ke)},[Ie,we]),{scopesRow:Ie||oe?.length?(0,j.jsx)(Gp,{nodes:H,scopes:Y,deselectScope:ge,selectedScopes:oe,apply:we,isDirty:Ie}):null}}function Zp(z,H){const{selectScope:Y,searchAllNodes:oe}=wc(),[pe,ge]=(0,o.useState)(void 0),ye=(0,o.useRef)();return(0,o.useEffect)(()=>{(!H||H==="scopes")&&z&&ee.$.featureToggles.scopeSearchAllLevels?(ye.current=z,oe(z,10).then(Ie=>{if(ye.current===z){const we=Ie.filter(et=>et.spec.nodeType==="leaf"),ke=[Jd()];for(const et of we)ke.push(Xd(et,Y,H||void 0));ge(ke)}})):(ye.current=void 0,ge(void 0))},[oe,z,H,Y]),pe}var ar=e(30362),qp=e(79776);const Zd=()=>ee.$.featureToggles.inviteUserExperimental&&ee.$.externalUserMngLinkUrl&&Ha.TP.hasPermission(yn.w.OrgUsersAdd),qd=(z,H)=>{(0,Tt.rR)("invite_user_button_clicked",{placement:z});const Y=(0,qp.o)(H);window.open(Y.toString(),"_blank")};var Tl=e(44410),ec=e(64762),DP=e(69738);const eu="grafana.dev.mockApi",tu=()=>nr.A.getBool(eu,!1),bP=()=>{const z=tu();store.set(eu,String(!z));const H=z?"Disabling":"Enabling";sendAppNotification(`${H} Mock API`,"Reloading...",AppNotificationSeverity.Info),setTimeout(()=>{window.location.reload()},200)},eg=async()=>{const z=tu()},tg=()=>{},CP=async()=>{const z=new PreferencesService("user"),H=await z.load(),Y=H.language===PSEUDO_LOCALE,oe=Y?"Disabling":"Enabling";sendAppNotification(`${oe} pseudo locale`,"Reloading...",AppNotificationSeverity.Info),await z.update({...H,language:Y?DEFAULT_LANGUAGE:PSEUDO_LOCALE}),setTimeout(()=>{window.location.reload()},200)};function nu(z){return"navModel."+(z.id??z.url??z.text??z.subTitle)}function au(z,H=[]){const Y=[];for(let oe of z){oe.id==="help"&&(oe=(0,ar.CS)({...oe}),delete oe.url);const{url:pe,target:ge,text:ye,isCreateAction:Ie,children:we,onClick:ke,keywords:et}=oe,tt=!!we?.length;if(!(pe||ke||tt))continue;let dt=pe;pe&&(oe.id==="connections-add-new-connection"||oe.id==="standalone-plugin-page-/connections/add-new-connection")&&(dt=Xt=>{const fn=et?.find(jn=>jn.toLowerCase().includes(Xt.toLowerCase()));return fn?`${pe}?search=${fn}`:pe});const ft=Ie?(0,d.t)("command-palette.section.actions","Actions"):(0,d.t)("command-palette.section.pages","Pages"),it=Ie?kd:Wp,vt=H.map(Xt=>Xt.text).join(" > "),Lt={id:nu(oe),name:ye,section:ft,url:dt,target:ge,parent:H.length>0&&!Ie?nu(H[H.length-1]):void 0,perform:ke,keywords:et?.join(" "),priority:it,subtitle:Ie?void 0:vt};if(Y.push(Lt),we?.length){const Xt=au(we,[...H,oe]);Y.push(...Xt)}}return Y}function ng(){return[{id:"preferences/theme",name:(0,d.t)("command-palette.action.change-theme","Change theme"),keywords:"interface color dark light",section:(0,d.t)("command-palette.section.preferences","Preferences"),priority:Kc},{id:"preferences/dark-theme",name:(0,d.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>(0,Tl.K)("dark"),parent:"preferences/theme",priority:Kc},{id:"preferences/light-theme",name:(0,d.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>(0,Tl.K)("light"),parent:"preferences/theme",priority:Kc}]}function ag(){const z=(0,Vn.d4)(H=>H.navBarTree);return(0,o.useMemo)(()=>{const H=au(z);return Zd()&&H.push({id:"invite-user",name:(0,d.t)("navigation.invite-user.invite-new-user-button","Invite new user"),section:(0,d.t)("command-palette.section.actions","Actions"),priority:kd,perform:()=>{qd("command_palette_actions","invite-user-command-palette")}}),[...ng(),...H]},[z])}var Ml=e(54092);const sg={};function rg(){const{links:z}=(0,F.U)({extensionPointId:Ml.SM.CommandPalette,context:sg,limitPerPlugin:40});return(0,o.useMemo)(()=>z.map(H=>({section:H.category??"Extensions",priority:Np,id:H.id,name:H.title,perform:()=>H.onClick&&H.onClick(),url:H.path})),[z])}function og(){const z=rg(),H=ag(),Y=(0,o.useMemo)(()=>[...H,...z],[H,z]);(0,lt.useRegisterActions)(Y,[Y])}function ig(){const[z,H]=(0,o.useState)([]);(0,o.useEffect)(()=>{Vp().then(Y=>H(Y)).catch(Y=>{console.error("Error loading recent dashboard actions",Y)})},[]),(0,lt.useRegisterActions)(z,[z])}var lg=e(99885);const su={name:"none",priority:lt.Priority.NORMAL};function Vc(z,H){return H.priority-z.priority}function cg(){const{search:z,actions:H,rootActionId:Y}=(0,lt.useKBar)(et=>({search:et.searchQuery,actions:et.actions,rootActionId:et.currentRootActionId})),oe=o.useMemo(()=>Object.keys(H).reduce((et,tt)=>{const dt=H[tt];if(!dt.parent&&!Y&&et.push(dt),dt.id===Y)for(let ft=0;ft<dt.children.length;ft++)et.push(dt.children[ft]);return et},[]).sort(Vc),[H,Y]),pe=o.useCallback(et=>{let tt=[];for(let dt=0;dt<et.length;dt++)tt.push(et[dt]);return function dt(ft,it=tt){for(let vt=0;vt<ft.length;vt++)if(ft[vt].children.length>0){let Lt=ft[vt].children;for(let Xt=0;Xt<Lt.length;Xt++)it.push(Lt[Xt]);dt(ft[vt].children,it)}return it}(et)},[]),ge=!z,ye=o.useMemo(()=>ge?oe:pe(oe),[pe,oe,ge]),Ie=dg(ye,z),we=o.useMemo(()=>{let et={},tt=[],dt=[];for(let it=0;it<Ie.length;it++){const vt=Ie[it],Lt=vt.action,Xt=vt.score||lt.Priority.NORMAL,fn={name:typeof Lt.section=="string"?Lt.section:Lt.section?.name||su.name,priority:typeof Lt.section=="string"?Xt:Lt.section?.priority||0+Xt};et[fn.name]||(et[fn.name]=[],tt.push(fn)),et[fn.name].push({priority:Lt.priority+Xt,action:Lt})}dt=tt.sort(Vc).map(it=>({name:it.name,actions:et[it.name].sort(Vc).map(vt=>vt.action)}));let ft=[];for(let it=0;it<dt.length;it++){let vt=dt[it];vt.name!==su.name&&ft.push(vt.name);for(let Lt=0;Lt<vt.actions.length;Lt++)ft.push(vt.actions[Lt])}return ft},[Ie]),ke=o.useMemo(()=>Y,[we]);return o.useMemo(()=>({results:we,rootActionId:ke}),[ke,we])}function dg(z,H){const Y=o.useMemo(()=>({filtered:z,search:H}),[z,H]),{filtered:oe,search:pe}=(0,Hd.useThrottledValue)(Y);return o.useMemo(()=>{if(pe.trim()==="")return oe.map(we=>({score:0,action:we}));const ge=oe.map(({name:we,keywords:ke})=>`${we} ${ke??""}`.toLowerCase()),ye=(0,lg.X)(ge,pe);return ye.map((we,ke)=>({action:oe[we],score:ye.length-ke}))},[oe,pe])}function ug(){return og(),(0,j.jsx)(lt.KBarPortal,{children:(0,j.jsx)(hg,{})})}function hg(){const z=$c(),H=(0,$t.of)(zc,z),{query:Y,searchQuery:oe,currentRootActionId:pe}=(0,lt.useKBar)(dt=>({showing:dt.visualState===lt.VisualState.showing,searchQuery:dt.searchQuery,currentRootActionId:dt.currentRootActionId}));ig(),kp();const ge=(0,o.useCallback)(()=>Y.toggle(),[Y]),{scopesRow:ye}=Yp(oe,ge,pe),{searchResults:Ie,isFetchingSearchResults:we}=zp({searchQuery:oe,show:!pe}),ke=(0,o.useRef)(null),{overlayProps:et}=(0,Gd.e)({isOpen:!0,onClose:()=>Y.setVisualState(lt.VisualState.animatingOut)},ke),{dialogProps:tt}=(0,$d.s)({},ke);return(0,o.useEffect)(()=>{(0,Tt.rR)("command_palette_opened")},[]),(0,j.jsx)(lt.KBarPositioner,{className:H.positioner,children:(0,j.jsx)(lt.KBarAnimator,{className:H.animator,children:(0,j.jsx)(zd.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,j.jsxs)("div",{...et,...tt,children:[(0,j.jsxs)("div",{className:H.searchContainer,children:[(0,j.jsx)(Sa.I,{name:"search",size:"md",className:H.searchIcon}),(0,j.jsx)(fg,{}),(0,j.jsx)(Sp,{defaultPlaceholder:(0,d.t)("command-palette.search-box.placeholder","Search or jump to..."),className:H.search}),(0,j.jsx)("div",{className:H.loadingBarContainer,children:we&&(0,j.jsx)(Dp.G,{width:500,delay:0})})]}),ye?(0,j.jsx)("div",{className:H.searchContainer,children:ye}):null,(0,j.jsx)("div",{className:H.resultsContainer,children:(0,j.jsx)(pg,{isFetchingSearchResults:we,searchResults:Ie})})]})})})})}function fg(){const z=$c(),H=(0,$t.of)(zc,z),{actions:Y,currentRootActionId:oe}=(0,lt.useKBar)(ge=>({actions:ge.actions,currentRootActionId:ge.currentRootActionId})),pe=oe?[...Y[oe].ancestors,Y[oe]]:[];return pe.length>0&&(0,j.jsx)("span",{className:H.breadcrumbs,children:pe.map((ge,ye)=>(0,j.jsxs)(o.Fragment,{children:[ge.name,"\xA0/\xA0"]},ge.id||ye))})}const pg=({isFetchingSearchResults:z,searchResults:H})=>{const{results:Y,rootActionId:oe}=cg(),pe=$c(),ge=(0,$t.of)(zc,pe),ye=(0,d.t)("command-palette.section.dashboard-search-results","Dashboards"),Ie=(0,d.t)("command-palette.section.folder-search-results","Folders"),we=(0,o.useMemo)(()=>H.filter(dt=>dt.id.startsWith("go/dashboard")).map(dt=>new lt.ActionImpl(dt,{store:{}})),[H]),ke=(0,o.useMemo)(()=>H.filter(dt=>dt.id.startsWith("go/folder")).map(dt=>new lt.ActionImpl(dt,{store:{}})),[H]),et=(0,o.useMemo)(()=>{const dt=[...Y];return ke.length>0&&(dt.push(Ie),dt.push(...ke)),we.length>0&&(dt.push(ye),dt.push(...we)),dt},[Y,ye,we,Ie,ke]),tt=!z&&et.length===0;return(0,o.useEffect)(()=>{tt&&(0,Tt.rR)("grafana_empty_state_shown",{source:"command_palette"})},[tt]),tt?(0,j.jsx)(bp.p,{variant:"not-found",role:"alert",message:(0,d.t)("command-palette.empty-state.message","No results found")}):(0,j.jsx)(Tp,{items:et,maxHeight:650,onRender:({item:dt,active:ft})=>{const it=et[0]===dt;return typeof dt=="string"?(0,j.jsx)("div",{className:(0,st.cx)(ge.sectionHeader,it&&ge.sectionHeaderFirst),children:dt}):(0,j.jsx)(_d,{action:dt,active:ft,currentRootActionId:oe})}})},$c=()=>{const H=document.querySelector(`[data-testid="${Ga.Tp.components.NavToolbar.commandPaletteTrigger}"]`)?.getBoundingClientRect().right??0;return document.body.clientWidth-H},zc=(z,H)=>({positioner:(0,st.css)({zIndex:z.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:z.components.overlay.background}}),animator:(0,st.css)({width:"100%",maxWidth:z.breakpoints.values.md,background:z.colors.background.primary,color:z.colors.text.primary,borderRadius:z.shape.radius.default,border:`1px solid ${z.colors.border.weak}`,overflow:"hidden",boxShadow:z.shadows.z3,[z.breakpoints.up("lg")]:{position:"fixed",right:H,left:H,maxWidth:"unset",width:"unset"}}),loadingBarContainer:(0,st.css)({position:"absolute",left:0,right:0,bottom:0}),searchContainer:(0,st.css)({alignItems:"center",background:z.components.input.background,borderBottom:`1px solid ${z.colors.border.weak}`,display:"flex",padding:z.spacing(1,2),position:"relative",justifyContent:"space-between"}),search:(0,st.css)({fontSize:z.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:z.components.input.text}),spinner:(0,st.css)({height:"22px"}),resultsContainer:(0,st.css)({paddingBottom:z.spacing(1)}),sectionHeader:(0,st.css)({padding:z.spacing(1.5,2,2,2),fontSize:z.typography.bodySmall.fontSize,fontWeight:z.typography.fontWeightMedium,color:z.colors.text.secondary,borderTop:`1px solid ${z.colors.border.weak}`,marginTop:z.spacing(1)}),sectionHeaderFirst:(0,st.css)({paddingBottom:z.spacing(1),borderTop:"none",marginTop:0}),breadcrumbs:(0,st.css)({label:"breadcrumbs",fontSize:z.typography.body.fontSize,fontWeight:z.typography.fontWeightMedium,lineHeight:z.typography.body.lineHeight,color:z.colors.text.primary,display:"flex",alignItems:"center",whiteSpace:"nowrap"}),scopesText:(0,st.css)({label:"scopesText",fontSize:z.typography.bodySmall.fontSize,fontWeight:z.typography.fontWeightMedium,lineHeight:z.typography.bodySmall.lineHeight,color:z.colors.text.secondary}),searchIcon:(0,st.css)({marginRight:z.spacing(1)}),selectedScope:(0,st.css)({background:z.colors.background.secondary,borderRadius:z.shape.radius.default,padding:z.spacing(0,.5),fontSize:z.typography.bodySmall.fontSize,fontWeight:z.typography.fontWeightMedium,lineHeight:z.typography.bodySmall.lineHeight,color:z.colors.text.secondary,display:"inline-flex",alignItems:"center",position:"relative",border:`1px solid ${z.colors.background.secondary}`,whiteSpace:"nowrap",marginRight:z.spacing(.5)})});var Gc=e(92807),ru=e(5556),gg=e(70958);function mg({folder:z,folderPath:H,folders:Y,onFolderUpdate:oe}){const pe=(0,$t.of)(vg);return(0,j.jsxs)("div",{className:pe.container,role:"treeitem","aria-selected":z.expanded,children:[(0,j.jsxs)("button",{className:pe.expand,"data-testid":`scopes-dashboards-${z.title}-expand`,"aria-label":z.expanded?(0,d.t)("scopes.dashboards.collapse","Collapse"):(0,d.t)("scopes.dashboards.expand","Expand"),onClick:()=>{oe(H,!z.expanded)},children:[(0,j.jsx)(Sa.I,{name:z.expanded?"angle-down":"angle-right",className:pe.icon}),z.title]}),z.expanded&&(0,j.jsx)("div",{className:pe.children,children:(0,j.jsx)(ou,{folders:Y,folderPath:H,onFolderUpdate:oe})})]})}const vg=z=>({container:(0,st.css)({display:"flex",flexDirection:"column",padding:z.spacing(.5,0)}),expand:(0,st.css)({alignItems:"flex-start",background:"none",border:0,display:"flex",gap:z.spacing(1),margin:0,padding:0,textAlign:"left",wordBreak:"break-word"}),icon:(0,st.css)({marginTop:z.spacing(.25)}),children:(0,st.css)({paddingLeft:z.spacing(3)})});function yg(z){return z.split("/").slice(0,3).join("/")}function xg({to:z,title:H,id:Y}){const oe=(0,$t.of)(Dg),pe=(0,o.useMemo)(()=>Eg(z),[z]),ge=z.startsWith("/d/"),ye=(0,At.zy)().pathname,Ie=ge?yg(ye):ye,we=z.split("?")[0]===Ie;return(0,j.jsxs)(wd.Link,{to:z,"aria-current":we?"page":void 0,className:(0,st.cx)(oe.container,we&&oe.current),"data-testid":`scopes-dashboards-${Y}`,role:"treeitem",children:[(0,j.jsx)(Sa.I,{name:pe})," ",H]},Y)}function Eg(z){const H=m.I.stripBaseFromUrl(z);for(const[Y,oe]of Pg.entries())if(H.startsWith(Y))return oe;return"link"}const Pg=new Map([["http","external-link-alt"],["/d","apps"],["/explore/metrics","drilldown"],["/a/grafana-metricsdrilldown-app/","drilldown"],["/a/grafana-lokiexplore-app/","drilldown"],["/a/grafana-exploretraces-app/","drilldown"],["/a/grafana-pyroscope-app/","drilldown"]]),Dg=z=>({container:(0,st.css)({display:"flex",alignItems:"center",gap:z.spacing(1),padding:z.spacing(.75,0),textAlign:"left",paddingLeft:z.spacing(1),wordBreak:"break-word","&:hover, &:focus":(0,st.css)({textDecoration:"underline"})}),current:(0,st.css)({position:"relative",background:z.colors.action.selected,borderRadius:`0 ${z.shape.radius.default} ${z.shape.radius.default} 0`,"&::before":{backgroundImage:z.colors.gradients.brandVertical,borderRadius:z.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",width:z.spacing(.5),top:0,left:0}})});function ou({folders:z,folderPath:H,onFolderUpdate:Y}){const[oe]=(0,gg.s)(),pe=H[H.length-1],ge=z[pe];return(0,j.jsxs)("div",{role:"tree",children:[Object.entries(ge.folders).map(([ye,Ie])=>(0,j.jsx)(mg,{folder:Ie,folders:ge.folders,folderPath:[...H,ye],onFolderUpdate:Y},ye)),Object.values(ge.suggestedNavigations).map(ye=>(0,j.jsx)(xg,{to:ru.kM.renderUrl(ye.url,oe),title:ye.title,id:ye.id},ye.id+ye.title))]})}var iu=e(40996),lu=e(12737);function bg({disabled:z,query:H,onChange:Y}){const oe=(0,$t.of)(Cg),[pe,ge]=(0,o.useState)({value:H,dirty:!1}),[ye]=(0,iu.A)(()=>{pe.dirty&&Y(pe.value)},500,[pe.dirty,pe.value]);return(0,o.useEffect)(()=>{(ye()||!pe.dirty)&&pe.value!==H&&ge({value:H,dirty:!1})},[ye,pe,H]),(0,j.jsx)("div",{className:oe.container,children:(0,j.jsx)(lu.Z,{disabled:z,placeholder:(0,d.t)("scopes.dashboards.search","Search"),value:pe.value,"data-testid":"scopes-dashboards-search",onChange:Ie=>ge({value:Ie,dirty:!0})})})}const Cg=z=>({container:(0,st.css)({flex:"0 1 auto"})});function Tg(){const z=(0,$t.of)(Mg),H=(0,kl.b)(),Y=Cl();if((0,Ur.A)(Y?.scopesDashboardsService.stateObservable??new qo.c,Y?.scopesDashboardsService.state),!Y||!H||!H.state.enabled||!H.state.drawerOpened||H.state.readOnly)return null;const{scopesDashboardsService:oe}=Y,{loading:pe,forScopeNames:ge,dashboards:ye,scopeNavigations:Ie,searchQuery:we,filteredFolders:ke}=oe.state,{changeSearchQuery:et,updateFolder:tt,clearSearchQuery:dt}=oe;if(!pe){if(ge.length===0)return(0,j.jsx)("div",{className:(0,st.cx)(z.container,z.noResultsContainer),"data-testid":"scopes-dashboards-notFoundNoScopes",children:(0,j.jsx)(d.x6,{i18nKey:"scopes.dashboards.noResultsNoScopes",children:"No scopes selected"})});if(ye.length===0&&Ie.length===0)return(0,j.jsx)("div",{className:(0,st.cx)(z.container,z.noResultsContainer),"data-testid":"scopes-dashboards-notFoundForScope",children:(0,j.jsx)(d.x6,{i18nKey:"scopes.dashboards.noResultsForScopes",children:"No dashboards or links found for the selected scopes"})})}return(0,j.jsxs)("div",{className:z.container,"data-testid":"scopes-dashboards-container",children:[(0,j.jsx)(bg,{disabled:pe,query:we,onChange:et}),pe?(0,j.jsx)(Cd._,{className:z.loadingIndicator,text:(0,d.t)("scopes.dashboards.loading","Loading dashboards"),"data-testid":"scopes-dashboards-loading"}):ke[""]?(0,j.jsx)(Gc.P,{children:(0,j.jsx)(ou,{folders:ke,folderPath:[""],onFolderUpdate:tt})}):(0,j.jsxs)("p",{className:z.noResultsContainer,"data-testid":"scopes-dashboards-notFoundForFilter",children:[(0,j.jsx)(d.x6,{i18nKey:"scopes.dashboards.noResultsForFilter",children:"No results found for your query"}),(0,j.jsx)(fe.$n,{variant:"secondary",onClick:dt,"data-testid":"scopes-dashboards-notFoundForFilter-clear",children:(0,j.jsx)(d.x6,{i18nKey:"scopes.dashboards.noResultsForFilterClear",children:"Clear search"})})]})]})}const Mg=z=>({container:(0,st.css)({backgroundColor:z.colors.background.primary,borderRight:`1px solid ${z.colors.border.weak}`,display:"flex",flexDirection:"column",height:"100%",gap:z.spacing(1),padding:z.spacing(2),width:z.spacing(37.5)}),noResultsContainer:(0,st.css)({alignItems:"center",display:"flex",flexDirection:"column",gap:z.spacing(1),height:"100%",justifyContent:"center",margin:0,textAlign:"center"}),loadingIndicator:(0,st.css)({alignSelf:"center"})});var Og=e(59875),cu=e(86634),du=e(38206),tc=e(1492),Sg=e(89409),Ig=e(78685),Rg=e(30360),nc=e(1906),uu=e(991),Ag=e(90666);const jg=({children:z})=>{const H=(0,$t.of)(Lg);return(0,j.jsxs)(j.Fragment,{children:[z,(0,j.jsx)("span",{className:H.highlight})]})},Lg=z=>({highlight:(0,st.css)({backgroundColor:z.colors.success.main,borderRadius:z.shape.radius.circle,width:"6px",height:"6px",display:"inline-block;",position:"absolute",top:"50%",transform:"translateY(-50%)"})});var Bg=e(20941);function hu({children:z,isActive:H,onClick:Y,target:oe,url:pe,onPin:ge,isPinned:ye}){const Ie=(0,$t.$j)(),we=Ug(Ie,H),ke=!oe&&pe.startsWith("/")?Bg.N:"a",et=(0,j.jsxs)("div",{className:we.linkContent,children:[z,oe==="_blank"&&(0,j.jsx)(Sa.I,{"data-testid":"external-link-icon",name:"external-link-alt"})]});return(0,j.jsxs)("div",{className:(0,st.cx)(we.wrapper,{[we.wrapperActive]:H,[we.wrapperBookmark]:ee.$.featureToggles.pinNavItems}),children:[(0,j.jsx)(ke,{"data-testid":Ga.Tp.components.NavMenu.item,className:we.container,href:pe,target:oe,onClick:Y,...H&&{"aria-current":"page"},children:et}),ee.$.featureToggles.pinNavItems&&Cn.TP.isSignedIn&&pe&&pe!=="/bookmarks"&&(0,j.jsx)(as.K,{name:"bookmark",className:"pin-icon",iconType:ye?"solid":"default",onClick:()=>ge(pe),"aria-label":ye?(0,d.t)("navigation.item.remove-bookmark","Remove from Bookmarks"):(0,d.t)("navigation.item.add-bookmark","Add to Bookmarks")})]})}hu.displayName="MegaMenuItemText";const Ug=(z,H)=>({wrapper:(0,st.css)({display:"flex",justifyContent:"space-between",width:"100%",height:"100%"}),wrapperBookmark:(0,st.css)({".pin-icon":{visibility:"hidden"},"&:hover, &:focus-within":{a:{width:"calc(100% - 20px)"},".pin-icon":{visibility:"visible"}}}),wrapperActive:(0,st.css)({backgroundColor:z.colors.action.selected,borderTopRightRadius:z.shape.radius.default,borderBottomRightRadius:z.shape.radius.default,position:"relative","&::before":{backgroundImage:z.colors.gradients.brandVertical,borderRadius:z.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",transform:"translateX(-50%)",width:z.spacing(.5)}}),container:(0,st.css)({alignItems:"center",color:H?z.colors.text.primary:z.colors.text.secondary,height:"100%",position:"relative",width:"100%","&:hover span, &:focus-visible span":{color:z.colors.text.primary,textDecoration:"underline"},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${z.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),linkContent:(0,st.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%",justifyContent:"space-between"})}),ac=2;function fu({link:z,activeItem:H,level:Y=0,onClick:oe,onPin:pe,isPinned:ge}){const{chrome:ye}=(0,Vs.Il)(),we=ye.useState().megaMenuDocked,ke=(0,At.zy)(),et=z.highlightText?jg:o.Fragment,tt=(0,ar.m0)(z,H),dt=z===H||Y===ac&&tt,[ft,it]=(0,Ig.A)(`grafana.navigation.expanded[${z.text}]`,!!tt),vt=Y<ac&&!!(pu(z)||z.emptyMessage),Lt=(0,o.useRef)(null),Xt=(0,$t.of)(Wg);if((0,o.useEffect)(()=>{tt&&it(!0)},[tt,ke,we,it]),(0,o.useEffect)(()=>{dt&&Lt.current&&Ng(Lt.current)&&Lt.current.scrollIntoView({block:"center"})},[dt]),!z.url)return null;let fn=null;z.icon?fn=(0,j.jsx)(Sa.I,{className:Xt.icon,name:(0,Rg.Uo)(z.icon)??"link",size:"lg"}):z.img&&(fn=(0,j.jsx)(rn.B,{width:3,justifyContent:"center",children:(0,j.jsx)("img",{className:Xt.img,src:z.img,alt:""})}));function jn(un){return un?"angle-up":"angle-down"}return(0,j.jsxs)("li",{ref:Lt,className:Xt.listItem,children:[(0,j.jsxs)("div",{className:(0,st.cx)(Xt.menuItem,{[Xt.menuItemWithIcon]:!!(Y===0&&fn)}),children:[Y!==0&&(0,j.jsx)(Ag.T,{level:Y===ac?Y-1:Y,spacing:3}),Y===ac&&(0,j.jsx)("div",{className:Xt.itemConnector}),(0,j.jsx)("div",{className:Xt.collapsibleSectionWrapper,children:(0,j.jsx)(hu,{isActive:dt,onClick:()=>{z.onClick?.(),oe?.()},target:z.target,url:z.url,onPin:()=>pe(z),isPinned:ge(z.url),children:(0,j.jsxs)("div",{className:(0,st.cx)(Xt.labelWrapper,{[Xt.hasActiveChild]:tt,[Xt.labelWrapperWithIcon]:!!(Y===0&&fn)}),children:[Y===0&&fn&&(0,j.jsx)(et,{children:fn}),(0,j.jsx)(wa.E,{truncate:!0,children:z.text}),z.isNew&&(0,j.jsx)(uu.y,{featureState:nc.Ay.new})]})})}),(0,j.jsx)("div",{className:Xt.collapseButtonWrapper,children:vt&&(0,j.jsx)(as.K,{"aria-label":ft?(0,d.t)("navigation.megamenu-item.collapse-aria-label","Collapse section: {{sectionName}}",{sectionName:z.text}):(0,d.t)("navigation.megamenu-item.expand-aria-label","Expand section: {{sectionName}}",{sectionName:z.text}),className:Xt.collapseButton,onClick:()=>it(!ft),name:jn(!!ft),size:"md",variant:"secondary"})})]}),vt&&ft&&(0,j.jsx)("ul",{className:Xt.children,children:pu(z)?z.children.filter(un=>!un.isCreateAction).map(un=>(0,j.jsx)(fu,{link:un,activeItem:H,onClick:oe,level:Y+1,onPin:pe,isPinned:ge},`${z.text}-${un.text}`)):(0,j.jsx)("div",{className:Xt.emptyMessage,"aria-live":"polite",children:z.emptyMessage})})]})}const Wg=z=>({icon:(0,st.css)({width:z.spacing(3)}),img:(0,st.css)({height:z.spacing(2),width:z.spacing(2)}),listItem:(0,st.css)({flex:1,maxWidth:"100%"}),menuItem:(0,st.css)({display:"flex",alignItems:"center",gap:z.spacing(1),height:z.spacing(4),paddingLeft:z.spacing(.5),position:"relative"}),menuItemWithIcon:(0,st.css)({paddingLeft:z.spacing(0)}),collapseButtonWrapper:(0,st.css)({display:"flex",justifyContent:"center",width:z.spacing(3),flexShrink:0}),itemConnector:(0,st.css)({position:"relative",height:"100%",width:z.spacing(1.5),"&::before":{borderLeft:`1px solid ${z.colors.border.medium}`,content:'""',height:"100%",right:0,position:"absolute",transform:"translateX(50%)"}}),collapseButton:(0,st.css)({margin:0}),collapsibleSectionWrapper:(0,st.css)({alignItems:"center",display:"flex",flex:1,height:"100%",minWidth:0}),labelWrapper:(0,st.css)({display:"flex",alignItems:"center",gap:z.spacing(2),minWidth:0,paddingLeft:z.spacing(1)}),labelWrapperWithIcon:(0,st.css)({paddingLeft:z.spacing(.5)}),hasActiveChild:(0,st.css)({color:z.colors.text.primary}),children:(0,st.css)({display:"flex",listStyleType:"none",flexDirection:"column"}),emptyMessage:(0,st.css)({color:z.colors.text.secondary,fontStyle:"italic",padding:z.spacing(1,1.5,1,7)})});function pu(z){return!!(z.children&&z.children.length>0)}function Ng(z){const H=z.getBoundingClientRect();return H.bottom<0||H.top>=window.innerHeight}var Kg=e(5071);const uo="300px",Hc=(0,o.memo)((0,o.forwardRef)(({onClose:z,...H},Y)=>{const oe=(0,Vn.d4)(Xt=>Xt.navBarTree),pe=(0,$t.of)(Fg),ge=(0,At.zy)(),{chrome:ye}=(0,Vs.Il)(),Ie=(0,Vn.wA)(),we=ye.useState(),[ke]=(0,tc.o)(),et=(0,Kg.s)(),tt=oe.filter(Xt=>Xt.id!=="profile"&&Xt.id!=="help").map(Xt=>(0,ar.J0)(Xt,we.megaMenuDocked));if(ee.$.featureToggles.pinNavItems){const Xt=tt.find(fn=>fn.id==="bookmarks");Xt&&(Xt.children=et.reduce((fn,jn)=>{const un=(0,ar.Wk)(tt,jn);if(!un)return fn;const Tn={id:un.id,text:un.text,url:un.url,parentItem:{id:"bookmarks",text:"Bookmarks"}};return fn.push((0,ar.J0)(Tn,we.megaMenuDocked)),fn},[]))}const dt=(0,ar.A6)(tt,we.sectionNav.node,ge.pathname),ft=()=>{ye.setMegaMenuOpen(!we.megaMenuOpen)},it=()=>{ye.setMegaMenuDocked(!we.megaMenuDocked),we.megaMenuDocked&&ye.setMegaMenuOpen(!1)},vt=(0,o.useCallback)(Xt=>!Xt||!et?.length?!1:et?.includes(Xt),[et]),Lt=Xt=>{const fn=Xt.url;if(fn&&ee.$.featureToggles.pinNavItems){const jn=vt(fn),un=jn?et.filter(Gn=>fn!==Gn):[...et,fn],Tn=jn?"grafana_nav_item_unpinned":"grafana_nav_item_pinned";(0,Tt.rR)(Tn,{path:fn}),ke({patchPrefsCmd:{navbar:{bookmarkUrls:un}}}).then(Gn=>{Gn.error||Ie((0,du.ve)({item:Xt,isSaved:!jn}))})}};return(0,j.jsxs)("div",{"data-testid":Ga.Tp.components.NavMenu.Menu,ref:Y,...H,children:[(0,j.jsx)(Sg.fn,{handleDockedMenu:it,handleMegaMenu:ft,onClose:z}),(0,j.jsx)("nav",{className:pe.content,children:(0,j.jsx)(Gc.P,{height:"100%",overflowX:"hidden",showScrollIndicators:!0,children:(0,j.jsx)("ul",{className:pe.itemList,"aria-label":(0,d.t)("navigation.megamenu.list-label","Navigation"),children:tt.map((Xt,fn)=>(0,j.jsx)(fu,{link:Xt,isPinned:vt,onClick:we.megaMenuDocked?void 0:z,activeItem:dt,onPin:Lt},Xt.text))})})})]})}));Hc.displayName="MegaMenu";const Fg=z=>({content:(0,st.css)({display:"flex",flexDirection:"column",minHeight:0,flexGrow:1,position:"relative"}),mobileHeader:(0,st.css)({display:"flex",justifyContent:"space-between",padding:z.spacing(1,1,1,2),borderBottom:`1px solid ${z.colors.border.weak}`,[z.breakpoints.up("md")]:{display:"none"}}),itemList:(0,st.css)({boxSizing:"border-box",display:"flex",flexDirection:"column",listStyleType:"none",padding:z.spacing(1,1,2,1),[z.breakpoints.up("md")]:{width:uo}}),dockMenuButton:(0,st.css)({display:"none",position:"relative",top:z.spacing(1),[z.breakpoints.up("xl")]:{display:"inline-flex"}})});function wg({}){const z=(0,$t.$j)(),{chrome:H}=(0,Vs.Il)(),Y=H.useState(),oe=(0,o.useRef)(null),pe=(0,o.useRef)(null),ge=z.transitions.duration.shortest,ye=(0,$t.of)($g,ge),Ie=Y.megaMenuOpen&&!Y.megaMenuDocked,we=()=>H.setMegaMenuOpen(!1),{overlayProps:ke,underlayProps:et}=(0,Gd.e)({isDismissable:!0,isOpen:!0,onClose:we,shouldCloseOnInteractOutside:ft=>!document.querySelector(`[data-testid="${Ga.Tp.components.Select.menu}"]`)?.contains(ft)},oe),{dialogProps:tt}=(0,$d.s)({},oe),dt=(0,$t.of)(Vg);return(0,j.jsx)("div",{className:dt.wrapper,children:(0,j.jsxs)(Og.Sf,{children:[(0,j.jsx)(cu.A,{nodeRef:oe,in:Ie,unmountOnExit:!0,classNames:ye.overlay,timeout:{enter:ge,exit:0},children:(0,j.jsx)(j.Fragment,{children:Ie&&(0,j.jsx)(zd.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,j.jsx)(Hc,{className:dt.menu,onClose:we,ref:oe,...ke,...tt})})})}),(0,j.jsx)(cu.A,{nodeRef:pe,in:Ie,unmountOnExit:!0,classNames:ye.backdrop,timeout:{enter:ge,exit:0},children:(0,j.jsx)("div",{ref:pe,className:dt.backdrop,...et})})]})})}const Vg=z=>({backdrop:(0,st.css)({backgroundColor:z.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:z.zIndex.modalBackdrop}),menu:(0,st.css)({display:"flex",bottom:0,flexDirection:"column",left:0,right:0,zIndex:z.zIndex.modal,position:"fixed",top:0,backgroundColor:z.colors.background.primary,flex:"1 1 0",[z.breakpoints.up("md")]:{right:"unset"}}),wrapper:(0,st.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:z.zIndex.sidemenu})}),$g=(z,H)=>{const Y={[z.transitions.handleMotion("no-preference")]:{transitionDuration:`${H}ms`,transitionTimingFunction:z.transitions.easing.easeInOut},[z.breakpoints.down("md")]:{overflow:"hidden"}},oe={...Y,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},pe={...Y,transitionProperty:"opacity"},ge={width:"100%",[z.breakpoints.up("md")]:{borderRight:`1px solid ${z.colors.border.weak}`,boxShadow:z.shadows.z3,width:uo}},ye={boxShadow:"none",width:0},Ie={opacity:1},we={opacity:0};return{backdrop:{enter:(0,st.css)(we),enterActive:(0,st.css)(pe,Ie),enterDone:(0,st.css)(Ie)},overlay:{enter:(0,st.css)(ye),enterActive:(0,st.css)(oe,ge),enterDone:(0,st.css)(ge)}}};var ei=e(32899),Za=e(45229);function zg(z,H){if(z===H)return!0;if(!(z instanceof Object)||!(H instanceof Object))return!1;const Y=Object.keys(z),oe=Y.length;for(let pe=0;pe<oe;pe++)if(!(Y[pe]in H))return!1;for(let pe=0;pe<oe;pe++)if(z[Y[pe]]!==H[Y[pe]])return!1;return oe===Object.keys(H).length}var gu=e(18607);const Gg="grafana_unified_history_entry_clicked",Hg="grafana_unified_history_duplicated_entry_rendered",_g="grafana_unified_history_drawer_interaction",Qg="grafana_unified_history_show_more",mu=({entryURL:z,subEntry:H})=>{(0,Tt.rR)(Gg,{entryURL:z,subEntry:H})},kg=({entryName:z,lastEntryURL:H,newEntryURL:Y})=>{(0,Tt.rR)(Hg,{entryName:z,lastEntryURL:H,newEntryURL:Y})},vu=({type:z})=>{(0,Tt.rR)(_g,{type:z})},Yg=()=>{(0,Tt.rR)(Qg)},_c="grafana.navigation.docked",yu="grafana.navigation.open",Ol="grafana.navigation.history";class Jg{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.megaMenuDocked=!!(window.innerWidth>=ee.$.theme2.breakpoints.values.xl&&nr.A.getBool(_c,window.innerWidth>=ee.$.theme2.breakpoints.values.xl)),this.sessionStorageData=window.sessionStorage.getItem("returnToPrevious"),this.returnToPreviousData=this.sessionStorageData?JSON.parse(this.sessionStorageData):void 0,this.state=new bl.t({chromeless:!0,sectionNav:{node:{text:(0,d.t)("nav.home.title","Home")},main:{text:""}},megaMenuOpen:this.megaMenuDocked&&nr.A.getBool(yu,!0),megaMenuDocked:this.megaMenuDocked,kioskMode:null,layout:jc.k.Canvas,returnToPrevious:this.returnToPreviousData}),this.setReturnToPrevious=H=>{const Y=this.state.getValue().returnToPrevious;(0,Tt.rR)("grafana_return_to_previous_button_created",{page:H.href,previousPage:Y?.href}),this.update({returnToPrevious:H}),window.sessionStorage.setItem("returnToPrevious",JSON.stringify(H))},this.clearReturnToPrevious=H=>{const Y=this.state.getValue().returnToPrevious;Y&&(0,Tt.rR)("grafana_return_to_previous_button_dismissed",{action:H,page:Y.href}),this.update({returnToPrevious:void 0}),window.sessionStorage.removeItem("returnToPrevious")},this.setMegaMenuOpen=(H,Y=!0)=>{const{megaMenuDocked:oe}=this.state.getValue();oe&&Y&&nr.A.set(yu,H),(0,Tt.rR)("grafana_mega_menu_open",{state:H}),this.update({megaMenuOpen:H})},this.setMegaMenuDocked=(H,Y=!0)=>{Y&&nr.A.set(_c,H),(0,Tt.rR)("grafana_mega_menu_docked",{state:H}),this.update({megaMenuDocked:H})},this.onToggleKioskMode=()=>{const H=this.getNextKioskMode();this.update({kioskMode:H}),C.Ny.partial({kiosk:this.getKioskUrlValue(H)}),(0,Tt.rR)("grafana_kiosk_mode",{action:"toggle",mode:H})}}setMatchedRoute(H){this.currentRoute!==H&&(this.currentRoute=H,this.routeChangeHandled=!1)}update(H){const Y=this.state.getValue(),oe={...Y};this.routeChangeHandled||(oe.actions=void 0,oe.pageNav=void 0,oe.sectionNav={node:{text:(0,d.t)("nav.home.title","Home")},main:{text:""}},oe.chromeless=this.currentRoute?.chromeless,oe.layout=jc.k.Standard,this.routeChangeHandled=!0),Object.assign(oe,H),oe.chromeless=oe.kioskMode===Ws.d9.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(oe,Y)||(ee.$.featureToggles.unifiedHistory&&nr.A.setObject(Ol,this.getUpdatedHistory(oe)),this.state.next(oe))}getUpdatedHistory(H){const Y=(0,gu.Z)(H.sectionNav.node,H.pageNav,{text:"Home",url:"/"},!0),oe=H.pageNav||H.sectionNav.node;let pe=nr.A.getObject(Ol,[]);if(nr.A.getObject("CLICKING_HISTORY"))return nr.A.setObject("CLICKING_HISTORY",!1),pe;if(!oe)return pe;const ye=pe[0],Ie={name:oe.text,views:[],breadcrumbs:Y,time:Date.now(),url:window.location.href};return ye&&Ie.url.split("?")[0]===ye.url.split("?")[0]?pe[0]=Ie:(ye&&ye.name===Ie.name&&kg({entryName:Ie.name,lastEntryURL:ye.url,newEntryURL:Ie.url}),pe=[Ie,...pe]),pe}ignoreStateUpdate(H,Y){return!!(zg(H,Y)||(H.sectionNav!==Y.sectionNav||H.pageNav!==Y.pageNav)&&H.actions===Y.actions&&H.layout===Y.layout&&Qc(H.sectionNav.node,Y.sectionNav.node)&&Qc(H.pageNav,Y.pageNav))}useState(){return(0,Ur.A)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),C.Ny.partial({kiosk:null}),(0,Tt.rR)("grafana_kiosk_mode",{action:"exit"})}setKioskModeFromUrl(H){let Y;switch(H){case"1":case!0:Y=Ws.d9.Full}Y&&Y!==this.state.getValue().kioskMode&&this.update({kioskMode:Y})}getKioskUrlValue(H){switch(H){case Ws.d9.Full:return!0;default:return null}}getNextKioskMode(){return Za.A.emit(ei.r1.alertInfo,[(0,d.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),Ws.d9.Full}}function Qc(z,H){if(z===H)return!0;const Y=z?.children?.find(pe=>pe.active),oe=H?.children?.find(pe=>pe.active);return z?.text===H?.text&&z?.url===H?.url&&Y?.url===oe?.url&&Qc(z?.parentItem,H?.parentItem)}var kc=e(92270),Xg=e(93256);const xu=({label:z,onClick:H,onDismiss:Y})=>{const oe=(0,$t.of)(Zg);return(0,j.jsxs)(Xg.e,{className:oe.buttonGroup,children:[(0,j.jsx)(fe.$n,{icon:"angle-left",size:"sm",variant:"primary",fill:"outline",onClick:H,title:z,className:oe.mainDismissableButton,"data-testid":Ga.Tp.components.ReturnToPrevious.backButton,children:z}),(0,j.jsx)(fe.$n,{icon:"times","aria-label":(0,d.t)("return-to-previous.dismissable-button","Close"),variant:"primary",fill:"outline",size:"sm",onClick:Y,"data-testid":Ga.Tp.components.ReturnToPrevious.dismissButton})]})},Zg=z=>({mainDismissableButton:(0,st.css)({width:"100%","> span":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"270px",display:"inline-block"}}),buttonGroup:(0,st.css)({width:"fit-content",backgroundColor:z.colors.background.secondary})});xu.displayName="DismissableButton";const Eu=({href:z,title:H})=>{const Y=(0,$t.of)(qg),{chrome:oe}=(0,Vs.Il)(),pe=(0,o.useCallback)(()=>{C.Ny.push(z),oe.clearReturnToPrevious("clicked")},[z,oe]),ge=(0,o.useCallback)(()=>{oe.clearReturnToPrevious("dismissed")},[oe]);return(0,j.jsx)("div",{className:Y.returnToPrevious,"data-testid":Ga.Tp.components.ReturnToPrevious.buttonGroup,children:(0,j.jsx)(xu,{label:(0,d.t)("return-to-previous.button.label","Back to {{title}}",{title:H}),onClick:pe,onDismiss:ge})})},qg=z=>({returnToPrevious:(0,st.css)({label:"return-to-previous",display:"flex",justifyContent:"center",left:"50%",transform:"translateX(-50%)",zIndex:z.zIndex.tooltip,position:"fixed",bottom:z.spacing.x4,boxShadow:z.shadows.z3})});Eu.displayName="ReturnToPrevious";var ur=e(7895),em=e(95943),Yc=e(43550),Pu=e(92948);function tm({href:z,isCurrent:H,text:Y,index:oe,flexGrow:pe}){const ge=(0,$t.of)(nm),ye=()=>{(0,Tt.rR)("grafana_breadcrumb_clicked",{url:z})};return(0,j.jsx)("li",{className:ge.breadcrumbWrapper,style:{flexGrow:pe},children:H?(0,j.jsx)("span",{"data-testid":Ga.XF.Breadcrumbs.breadcrumb(Y),className:ge.breadcrumb,"aria-current":"page",title:Y,children:Y}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("a",{onClick:ye,"data-testid":Ga.XF.Breadcrumbs.breadcrumb(Y),className:(0,st.cx)(ge.breadcrumb,ge.breadcrumbLink),title:Y,href:z,children:Y}),(0,j.jsx)("div",{className:ge.separator,"aria-hidden":!0,children:(0,j.jsx)(Sa.I,{name:"angle-right"})})]})})}const nm=z=>({breadcrumb:(0,st.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",color:z.colors.text.secondary}),breadcrumbLink:(0,st.css)({color:z.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,st.css)({alignItems:"center",color:z.colors.text.primary,display:"flex",flex:1,gap:z.spacing(.5),minWidth:0,maxWidth:"max-content",padding:z.spacing(.5,0,.5,.5),[z.breakpoints.down("sm")]:{display:"none","&:nth-last-child(2)":{display:"flex",minWidth:"40px"},"&:last-child":{display:"flex"}}}),separator:(0,st.css)({color:z.colors.text.secondary})});function am({breadcrumbs:z,className:H}){const Y=(0,$t.of)(rm);return(0,j.jsx)("nav",{"aria-label":(0,d.t)("navigation.breadcrumbs.aria-label","Breadcrumbs"),className:H,children:(0,j.jsx)("ol",{className:Y.breadcrumbs,children:z.map((oe,pe)=>(0,o.createElement)(tm,{...oe,isCurrent:pe===z.length-1,key:pe,index:pe,flexGrow:sm(pe,z.length)}))})})}function sm(z,H){return H<5&&z>0&&z<H-2||H>6&&z>1&&z<H-3?4:10}const rm=z=>({breadcrumbs:(0,st.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",overflow:"hidden"})});var ho=e(5423);function om(z){switch(z){case"grafana-grafanadocsplugin-app":return"book";case"grafana-investigations-app":return"eye";default:return"ai-sparkle"}}function im({isOpen:z,title:H,onClick:Y,pluginId:oe},pe){const ge=(0,$t.of)(lm),ye=om(oe);if(z)return(0,j.jsx)(ur.I,{ref:pe,className:(0,st.cx)(ge.button,ge.buttonActive),icon:ye,"data-testid":"extension-toolbar-button-close",variant:"default",onClick:Y,tooltip:(0,d.t)("navigation.extension-sidebar.button-tooltip.close","Close {{title}}",{title:H})});let Ie=(0,d.t)("navigation.extension-sidebar.button-tooltip.open-all","Open AI assistants and sidebar apps");return H&&(Ie=(0,d.t)("navigation.extension-sidebar.button-tooltip.open","Open {{title}}",{title:H})),(0,j.jsx)(ur.I,{ref:pe,className:(0,st.cx)(ge.button),icon:ye,"data-testid":"extension-toolbar-button-open",variant:"default",onClick:Y,tooltip:Ie})}const Jc=o.forwardRef(im);function lm(z){return{button:(0,st.css)({aspectRatio:"1 / 1 !important",width:"28px",height:"28px",padding:0,justifyContent:"center",borderRadius:z.shape.radius.circle,margin:z.spacing(0,.25)}),buttonActive:(0,st.css)({borderRadius:z.shape.radius.circle,backgroundColor:z.colors.primary.transparent,border:`1px solid ${z.colors.primary.borderTransparent}`,color:z.colors.text.primary})}}const cm=["grafana-assistant-app"];function dm({compact:z}){const{availableComponents:H,dockedComponentId:Y,setDockedComponentId:oe}=(0,co.sA)();if(H.size===0)return null;const pe=Y?(0,co.rS)(Y):null,ge=(ye,Ie)=>{if(Ie.length===1){const et=Ie[0],tt=(0,co.pF)(ye,et),dt=Y===tt;return z&&!cm.includes(ye)?null:(0,j.jsx)(Jc,{isOpen:dt,title:et.title,onClick:()=>oe(dt?void 0:tt),pluginId:ye},ye)}const we=pe?.pluginId===ye,ke=(0,j.jsx)(cr.W,{children:Ie.map(et=>{const tt=(0,co.pF)(ye,et);return(0,j.jsx)(cr.W.Item,{active:Y===tt,label:et.title,onClick:()=>oe(Y===tt?void 0:tt)},tt)})});return we?(0,j.jsx)(Jc,{isOpen:!0,title:pe?.componentTitle,onClick:()=>oe(void 0),pluginId:ye},ye):(0,j.jsx)(El.m,{overlay:ke,placement:"bottom-end",children:(0,j.jsx)(Jc,{isOpen:!1,pluginId:ye})},ye)};return(0,j.jsxs)(j.Fragment,{children:[Array.from(H.entries()).map(([ye,{addedComponents:Ie}])=>ge(ye,Ie.map(we=>({...we,pluginId:ye})))),(0,j.jsx)(ho.K,{})]})}var Xc=e(42941),xs=e(87745),um=e(95093),Sl=e.n(um),hm=e(35137),Du=e(8073),fm=e(53431),pm=e(12810);function gm({onClose:z}){const H=Br.M.getObject(Ol,[]).filter(Ie=>Sl()(Ie.time).isAfter(Sl()().subtract(2,"day").startOf("day"))),[Y,oe]=(0,o.useState)(5),pe=H.find(Ie=>Ie.url===window.location.href||Ie.views.some(we=>we.url===window.location.href))?.time,ge=H.slice(0,Y).reduce((Ie,we)=>{const ke=Sl()(we.time);let et="";return ke.isSame(Sl()(),"day")?et=(0,d.t)("nav.history-wrapper.today","Today"):ke.isSame(Sl()().subtract(1,"day"),"day")?et=(0,d.t)("nav.history-wrapper.yesterday","Yesterday"):et=ke.format("YYYY-MM-DD"),Ie[et]=[...Ie[et]||[],we],Ie},{}),ye=(0,$t.of)(bu);return(0,j.jsxs)(rn.B,{direction:"column",alignItems:"flex-start",children:[(0,j.jsx)(he.a,{width:"100%",children:Object.keys(ge).map((Ie,we)=>(0,j.jsxs)(rn.B,{direction:"column",gap:1,children:[(0,j.jsx)(he.a,{paddingLeft:2,children:(0,j.jsx)(wa.E,{color:"secondary",children:Ie})}),(0,j.jsx)("div",{className:ye.timeline,children:ge[Ie].map((ke,et)=>(0,j.jsx)(mm,{entry:ke,isSelected:ke.time===pe,onClick:()=>z()},et))})]},we))}),H.length>Y&&(0,j.jsx)(he.a,{paddingLeft:2,children:(0,j.jsx)(fe.$n,{variant:"secondary",fill:"text",onClick:()=>{oe(Y+5),Yg()},children:(0,d.t)("nav.history-wrapper.show-more","Show more")})})]})}function mm({entry:z,isSelected:H,onClick:Y}){const oe=(0,$t.of)(bu),pe=(0,$t.$j)(),[ge,ye]=(0,o.useState)(H&&z.views.length>0),{breadcrumbs:Ie,views:we,time:ke,url:et,sparklineData:tt}=z,dt=ge?(0,d.t)("nav.history-wrapper.collapse","Collapse"):(0,d.t)("nav.history-wrapper.expand","Expand"),ft=ge?(0,d.t)("nav.history-wrapper.icon-selected","Selected Entry"):(0,d.t)("nav.history-wrapper.icon-unselected","Normal Entry"),it=H&&z.views.find(vt=>vt.url===window.location.href)?.time;return(0,j.jsx)(he.a,{marginBottom:1,children:(0,j.jsxs)(rn.B,{direction:"column",gap:1,children:[(0,j.jsxs)(rn.B,{alignItems:"baseline",children:[we.length>0?(0,j.jsx)(as.K,{name:ge?"angle-down":"angle-right",onClick:()=>ye(!ge),"aria-label":dt,className:oe.iconButton}):(0,j.jsx)(hm.$,{h:2}),(0,j.jsx)(Sa.I,{size:"sm",name:H?"circle-mono":"circle","aria-label":ft,className:ge?oe.iconButtonDot:oe.iconButtonCircle}),(0,j.jsx)(Du.Z,{onClick:()=>{Br.M.setObject("CLICKING_HISTORY",!0),Y(),mu({entryURL:et})},href:et,isCompact:!0,className:H?oe.card:(0,st.cx)(oe.card,oe.cardSelected),children:(0,j.jsxs)(rn.B,{direction:"column",children:[(0,j.jsx)("div",{children:Ie.map((vt,Lt)=>(0,j.jsxs)(wa.E,{children:[vt.text," ",Lt!==Ie.length-1?"> ":""]},Lt))}),(0,j.jsx)(wa.E,{variant:"bodySmall",color:"secondary",children:(0,pm.Y)(ke,{timeStyle:"short"})}),tt&&(0,j.jsx)(fm.O,{theme:pe,width:240,height:40,config:{custom:{fillColor:"rgba(130, 181, 216, 0.1)",lineColor:"#82B5D8"}},sparkline:{y:{type:Z.PU.number,name:"test",config:{},values:tt.values,state:{range:{...tt.range}}}}})]})})]}),ge&&(0,j.jsx)("div",{className:oe.expanded,children:we.map((vt,Lt)=>(0,j.jsx)(Du.Z,{href:vt.url,onClick:()=>{Br.M.setObject("CLICKING_HISTORY",!0),Y(),mu({entryURL:vt.url,subEntry:"timeRange"})},isCompact:!0,className:vt.time===it?void 0:oe.subCard,children:(0,j.jsxs)(rn.B,{direction:"column",gap:0,children:[(0,j.jsx)(wa.E,{variant:"bodySmall",children:vt.name}),vt.description&&(0,j.jsx)(wa.E,{color:"secondary",variant:"bodySmall",children:vt.description})]})},Lt))})]})})}const bu=z=>({card:(0,st.css)({label:"card",background:"none",margin:z.spacing(.5,0)}),cardSelected:(0,st.css)({label:"card-selected",background:"none"}),subCard:(0,st.css)({label:"subcard",background:"none",margin:0}),iconButton:(0,st.css)({label:"expand-button",margin:0}),iconButtonCircle:(0,st.css)({label:"blue-circle-icon",margin:0,background:z.colors.background.primary,fill:z.colors.primary.main,cursor:"default","&:hover:before":{background:"none"},zIndex:0}),iconButtonDot:(0,st.css)({label:"blue-dot-icon",margin:0,color:z.colors.primary.main,border:z.shape.radius.circle,cursor:"default","&:hover:before":{background:"none"},zIndex:0}),expanded:(0,st.css)({label:"expanded",display:"flex",flexDirection:"column",marginLeft:z.spacing(6),gap:z.spacing(1),position:"relative","&:before":{content:'""',position:"absolute",left:0,top:0,height:"100%",width:"1px",background:z.colors.border.weak}}),timeline:(0,st.css)({label:"timeline",position:"relative",height:"100%",width:"100%",paddingLeft:z.spacing(2),"&:before":{content:'""',position:"absolute",left:z.spacing(5.75),top:0,height:"100%",width:"1px",borderLeft:`1px dashed ${z.colors.border.strong}`}})});function vm(){const[z,H]=(0,Xc.A)(!1),Y=(0,$t.of)(ym);return(0,o.useEffect)(()=>{const oe=Za.l.subscribe(xs.sj,pe=>{if(Br.M.getObject("CLICKING_HISTORY")){Br.M.setObject("CLICKING_HISTORY",!1);return}const ye=Br.M.getObject(Ol,[]);let Ie=ye[0];const we=pe.payload.url;return Ie.views[0]?.url!==we&&(Ie.views=[{name:pe.payload.name,description:pe.payload.description,url:we,time:Date.now()},...Ie.views],Br.M.setObject(Ol,[...ye])),()=>{oe.unsubscribe()}})},[]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ur.I,{onClick:()=>{H(),vu({type:"open"})},iconOnly:!0,icon:"history","aria-label":(0,d.t)("nav.history-container.drawer-tittle","History")}),(0,j.jsx)(ho.K,{className:Y.separator}),z&&(0,j.jsx)(xl._,{title:(0,d.t)("nav.history-container.drawer-tittle","History"),onClose:()=>{H(),vu({type:"close"})},size:"sm",children:(0,j.jsx)(gm,{onClose:()=>H(!1)})})]})}const ym=z=>({separator:(0,st.css)({[z.breakpoints.down("sm")]:{display:"none"}})});function Cu(z){const H=[];for(const Y of z)Y.isCreateAction&&H.push(Y),Y.children&&H.push(...Cu(Y.children));return H}const xm=({})=>{const z=(0,Vn.d4)(ye=>ye.navBarTree),[H,Y]=(0,o.useState)(!1),oe=(0,o.useMemo)(()=>Cu(z),[z]),pe=oe.length>0;if(!pe)return null;const ge=()=>(0,j.jsx)(cr.W,{children:oe.map((ye,Ie)=>(0,j.jsx)(cr.W.Item,{url:ye.url,label:ye.text,onClick:()=>(0,Tt.rR)("grafana_menu_item_clicked",{url:ye.url,from:"quickadd"})},Ie))});return pe?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(El.m,{overlay:ge,placement:"bottom-end",onVisibleChange:Y,children:(0,j.jsx)(ur.I,{iconOnly:!0,icon:"plus",isOpen:H,"aria-label":(0,d.t)("navigation.quick-add.aria-label","New")})}),(0,j.jsx)(ho.K,{})]}):null};function Em(){const z=(0,Zl.i)("lg"),H=()=>{try{qd("top_bar_right","invite-user-top-bar")}catch(Y){console.error("Failed to handle invite user click:",Y)}};return Zd()&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ur.I,{icon:"add-user",iconOnly:!z,onClick:H,tooltip:(0,d.t)("navigation.invite-user.invite-tooltip","Invite user"),"aria-label":(0,d.t)("navigation.invite-user.invite-tooltip","Invite user"),children:z?(0,d.t)("navigation.invite-user.invite-button","Invite"):void 0}),(0,j.jsx)(ho.K,{})]})}var Il=e(94535),Tu=e(45450),Pm=e(35555),Dm=e(3271);function bm({theme:z}){return(0,j.jsx)(Pm.D.Provider,{value:z,children:(0,j.jsx)(Cm,{})})}function Cm(){const z=(0,$t.of)(Tm);return(0,j.jsx)(he.a,{backgroundColor:"canvas",display:"flex",direction:"column",grow:1,children:(0,j.jsxs)(rn.B,{gap:0,direction:"column",children:[(0,j.jsxs)(he.a,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:.5,backgroundColor:"primary",height:3,paddingY:.5,paddingX:1,children:[(0,j.jsxs)(rn.B,{alignItems:"center",gap:.5,children:[(0,j.jsx)(Pu.M.MenuLogo,{className:z.img}),(0,j.jsxs)("div",{className:z.breadcrumbs,children:[(0,j.jsx)(d.x6,{i18nKey:"theme-preview.breadcrumbs.home",children:"Home"}),(0,j.jsx)(Sa.I,{className:z.breadcrumbSeparator,name:"angle-right"}),(0,j.jsx)(d.x6,{i18nKey:"theme-preview.breadcrumbs.dashboards",children:"Dashboards"})]})]}),(0,j.jsxs)(rn.B,{alignItems:"center",gap:.5,children:[(0,j.jsx)("div",{className:z.formInput}),(0,j.jsx)(he.a,{borderStyle:"solid",borderColor:"medium",borderRadius:"circle",height:1,width:1,backgroundColor:"secondary",marginLeft:.5})]})]}),(0,j.jsx)(Dm.c,{spacing:0}),(0,j.jsx)(he.a,{padding:2.5,display:"flex",direction:"column",flex:1,children:(0,j.jsxs)("div",{className:z.panel,children:[(0,j.jsx)("div",{className:z.panelHeader,children:(0,j.jsx)(d.x6,{i18nKey:"theme-preview.panel.title",children:"Panel"})}),(0,j.jsxs)(he.a,{padding:.5,display:"flex",direction:"column",gap:.5,grow:1,children:[(0,j.jsx)("div",{className:z.formLabel,children:(0,j.jsx)(d.x6,{i18nKey:"theme-preview.panel.form-label",children:"Form label"})}),(0,j.jsx)("div",{className:z.formInput})]}),(0,j.jsxs)(he.a,{display:"flex",gap:.5,padding:1,justifyContent:"flex-end",children:[(0,j.jsx)("div",{className:(0,st.cx)(z.action,z.actionSecondary)}),(0,j.jsx)("div",{className:(0,st.cx)(z.action,z.actionDanger)}),(0,j.jsx)("div",{className:(0,st.cx)(z.action,z.actionPrimary)})]})]})})]})})}const Tm=z=>({breadcrumbs:(0,st.css)({alignItems:"center",color:z.colors.text.primary,display:"flex",fontSize:Math.round(z.typography.fontSize/3),gap:z.spacing(.25),lineHeight:Math.round(z.typography.body.lineHeight/3),paddingLeft:z.spacing(.5)}),breadcrumbSeparator:(0,st.css)({height:z.spacing(.75),width:z.spacing(.75)}),img:(0,st.css)({height:z.spacing(1),width:z.spacing(1)}),panel:(0,st.css)({background:z.components.panel.background,border:`1px solid ${z.components.panel.borderColor}`,borderRadius:z.shape.radius.default,display:"flex",flexDirection:"column",flexGrow:1}),panelHeader:(0,st.css)({alignItems:"center",color:z.colors.text.primary,display:"flex",fontSize:Math.round(z.typography.fontSize/3),height:z.spacing(2),lineHeight:Math.round(z.typography.body.lineHeight/3),padding:z.spacing(.5)}),formLabel:(0,st.css)({color:z.colors.text.primary,fontSize:Math.round(z.typography.fontSize/3),lineHeight:Math.round(z.typography.body.lineHeight/3)}),formInput:(0,st.css)({background:z.components.input.background,border:`1px solid ${z.colors.border.medium}`,borderRadius:z.shape.radius.default,height:z.spacing(1),width:z.spacing(6)}),action:(0,st.css)({borderRadius:z.shape.radius.default,height:z.spacing(1),width:z.spacing(2.5)}),actionSecondary:(0,st.css)({background:z.colors.secondary.main}),actionDanger:(0,st.css)({background:z.colors.error.main}),actionPrimary:(0,st.css)({background:z.colors.primary.main})});function Mm({themeOption:z,isExperimental:H,isSelected:Y,onSelect:oe}){const pe=z.build(),ge=Sm(z),ye=(0,$t.of)(Om);return(0,j.jsxs)("div",{className:ye.card,onClick:oe,children:[(0,j.jsxs)("div",{className:ye.header,children:[(0,j.jsx)(Tu.J,{id:`theme-${pe.name}`,name:"theme",label:ge,onClick:Ie=>{Ie.stopPropagation()},onChange:oe,checked:Y}),H&&(0,j.jsx)(uu.y,{featureState:nc.Ay.experimental})]}),(0,j.jsx)(bm,{theme:pe})]})}const Om=z=>({card:(0,st.css)({border:`1px solid ${z.colors.border.weak}`,borderRadius:z.shape.radius.default,display:"flex",flexDirection:"column",overflow:"hidden",cursor:"pointer","&:hover":{border:`1px solid ${z.colors.border.medium}`}}),header:(0,st.css)({alignItems:"center",borderBottom:`1px solid ${z.colors.border.weak}`,display:"flex",justifyContent:"space-between",padding:z.spacing(1),"> label":{cursor:"pointer"}})});function Sm(z){switch(z.id){case"dark":return(0,d.t)("shared.preferences.theme.dark-label","Dark");case"light":return(0,d.t)("shared.preferences.theme.light-label","Light");case"system":return(0,d.t)("shared.preferences.theme.system-label","System preference");default:return z.name}}var Im=e(61074);function Rm({onClose:z}){const H=(0,$t.of)(Am),Y=(0,Im.F)(),oe=(0,$t.$j)(),pe=ye=>{(0,Tt.rR)("grafana_preferences_theme_changed",{toTheme:ye.id,preferenceType:"theme_drawer"}),(0,Tl.K)(ye.id,!1)},ge=(0,j.jsxs)(d.x6,{i18nKey:"shared-preferences.fields.theme-description",children:["Enjoying the experimental themes? Tell us what you'd like to see"," ",(0,j.jsx)(zr.Y,{variant:"bodySmall",external:!0,href:"https://docs.google.com/forms/d/e/1FAIpQLSeRKAY8nUMEVIKSYJ99uOO-dimF6Y69_If1Q1jTLOZRWqK1cw/viewform?usp=dialog",children:"here."})]});return(0,j.jsx)(xl._,{title:(0,d.t)("profile.change-theme","Change theme"),onClose:z,size:"md",subtitle:ee.$.feedbackLinksEnabled?ge:void 0,children:(0,j.jsx)("div",{className:H.grid,role:"radiogroup",children:Y.map(ye=>(0,j.jsx)(Mm,{themeOption:ye,isExperimental:ye.isExtra,onSelect:()=>pe(ye),isSelected:oe.name===ye.name},ye.id))})})}const Am=z=>({grid:(0,st.css)({display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gridAutoRows:"250px",gap:z.spacing(2)})});var jm=e(73745),Mu=e(49229),Lm=e(49185),ti=e(46831),Bm=e(30054);function Um({feedUrl:z}){const H=(0,$t.of)(Wm),{state:Y,getNews:oe}=(0,Bm.n)(z),[pe,ge]=(0,Lm.A)();return(0,o.useEffect)(()=>{oe()},[oe]),Y.error?(0,j.jsx)("div",{className:H.innerWrapper,children:Y.error&&Y.error.message}):(0,j.jsxs)("div",{ref:pe,children:[Y.loading?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ti.K.Skeleton,{showImage:!0,width:ge.width}),(0,j.jsx)(ti.K.Skeleton,{showImage:!0,width:ge.width}),(0,j.jsx)(ti.K.Skeleton,{showImage:!0,width:ge.width}),(0,j.jsx)(ti.K.Skeleton,{showImage:!0,width:ge.width}),(0,j.jsx)(ti.K.Skeleton,{showImage:!0,width:ge.width})]}):(0,j.jsx)(j.Fragment,{children:ge.width>0&&Y.value?.map((ye,Ie)=>(0,j.jsx)(ti.K,{index:Ie,showImage:!0,width:ge.width,data:Y.value},Ie))}),(0,j.jsx)("div",{className:H.grot,children:(0,j.jsx)("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:(0,d.t)("news.link-title","Go to Grafana labs blog"),children:(0,j.jsx)("img",{src:Mu,alt:"Grot reading news"})})})]})}const Wm=z=>({innerWrapper:(0,st.css)({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),grot:(0,st.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:z.spacing(5,0),img:{width:"186px",height:"186px"}})});function Nm({onClose:z}){const H=(0,$t.of)(Km);return(0,j.jsx)(xl._,{title:(0,j.jsxs)("div",{className:H.title,children:[(0,j.jsx)(wa.E,{element:"h2",children:(0,d.t)("news.title","Latest from the blog")}),(0,j.jsx)("a",{href:"https://grafana.com/blog/",target:"_blank",rel:"noreferrer",title:(0,d.t)("news.link-title","Go to Grafana labs blog"),className:H.grot,children:(0,j.jsx)("img",{src:Mu,alt:"Grot reading news"})})]}),onClose:z,size:"md",children:(0,j.jsx)(Um,{feedUrl:jm.$})})}const Km=z=>({title:(0,st.css)({display:"flex",alignItems:"center",justifyContent:"center",gap:z.spacing(2)}),grot:(0,st.css)({display:"flex",alignItems:"center",justifyContent:"center",padding:z.spacing(2,0),img:{width:"75px",height:"75px"}})});function Ou({node:z,children:H}){const Y=(0,$t.of)(Fm),oe=(0,ar.J0)((0,J.cloneDeep)(z),!1);return oe?(0,j.jsxs)(cr.W,{header:(0,j.jsxs)("div",{onClick:pe=>pe.stopPropagation(),className:Y.header,children:[(0,j.jsx)("div",{children:oe.text}),oe.subTitle&&(0,j.jsx)("div",{className:Y.subTitle,children:oe.subTitle})]}),children:[oe.children?.map(pe=>pe.url?(0,j.jsx)(Il.D,{url:pe.url,label:pe.text,icon:pe.icon,target:pe.target},pe.id):(0,j.jsx)(Il.D,{icon:pe.icon,onClick:pe.onClick,label:pe.text},pe.id)),H]}):null}const Fm=z=>({header:(0,st.css)({fontSize:z.typography.h5.fontSize,fontWeight:z.typography.h5.fontWeight,padding:z.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,st.css)({color:z.colors.text.secondary,fontSize:z.typography.bodySmall.fontSize})});function wm({profileNode:z,onToggleKioskMode:H}){const Y=(0,$t.of)(Vm),oe=(0,ar.J0)((0,J.cloneDeep)(z),!1),[pe,ge]=(0,Xc.A)(!1),[ye,Ie]=(0,Xc.A)(!1);if(!oe)return null;const we=()=>(0,j.jsx)(Ou,{node:z,children:(0,j.jsxs)(j.Fragment,{children:[ee.$.featureToggles.grafanaconThemes&&(0,j.jsx)(Il.D,{icon:"palette",onClick:Ie,label:(0,d.t)("profile.change-theme","Change theme")}),(0,j.jsx)(cr.W.Item,{icon:"monitor",onClick:H,label:(0,d.t)("profile.enable-kiosk-mode","Enable kiosk mode")}),ee.$.newsFeedEnabled&&(0,j.jsx)(Il.D,{icon:"rss",onClick:ge,label:(0,d.t)("navigation.rss-button","Latest from the blog")}),(0,j.jsx)(cr.W.Divider,{}),!ee.$.auth.disableSignoutMenu&&(0,j.jsx)(Il.D,{url:`${ee.$.appSubUrl}/logout`,label:(0,d.t)("nav.sign-out.title","Sign out"),icon:"arrow-from-right",target:"_self"})]})});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(El.m,{overlay:we,placement:"bottom-end",children:(0,j.jsx)(ur.I,{className:Y.profileButton,imgSrc:Ha.TP.user.gravatarUrl,imgAlt:"User avatar","aria-label":(0,d.t)("navigation.profile.aria-label","Profile")})}),pe&&(0,j.jsx)(Nm,{onClose:ge}),ye&&(0,j.jsx)(Rm,{onClose:Ie})]})}const Vm=z=>({profileButton:(0,st.css)({padding:z.spacing(0,.5),img:{borderRadius:z.shape.radius.circle,height:"24px",marginRight:0,width:"24px"}})});var Su=e(63704);function $m(){const z=!!ee.$.featureToggles.multiTenantFrontend,H=(0,At.zy)(),Y=(0,$t.of)(zm);let oe=z?m.I.assureBaseUrl("/login"):Su.sQ.sanitizeUrl(m.I.getUrlForPartial(H,{forceLogin:"true"}));oe.startsWith("//")&&(oe=oe.replace(/\/+/g,"/"));const pe=(0,o.useCallback)(()=>{Cn.TP.setRedirectToUrl()},[]);return(0,j.jsx)("a",{className:Y.link,onClick:pe,href:oe,target:z?void 0:"_self",children:(0,j.jsx)(d.x6,{i18nKey:"app-chrome.top-bar.sign-in",children:"Sign in"})})}const zm=z=>({link:(0,st.css)({paddingLeft:z.spacing(1),paddingRight:z.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var Gm=e(68079),Iu=e(70255);function Hm(z){const[H,Y]=(0,o.useState)(void 0),[oe,pe]=(0,o.useState)(!1),ge=Cl()?.scopesSelectorService;return(0,o.useEffect)(()=>{(async()=>{if(!z||!ge){Y(void 0);return}pe(!0);try{const Ie=await ge.getScopeNode(z);Y(Ie)}catch(Ie){console.error("Failed to load node",Ie)}finally{pe(!1)}})()},[z,ge]),{node:H,isLoading:oe}}function _m({nodes:z,scopes:H,appliedScopes:Y,disabled:oe,loading:pe,onInputClick:ge,onRemoveAllClick:ye}){const[Ie,we]=(0,o.useState)(!1),ke=Y[0]?.parentNodeId,{node:et,isLoading:tt}=Hm(ke),dt=et?.spec.title;(0,o.useEffect)(()=>{we(!1)},[Y]);const ft=Y.length>0?(0,j.jsx)(km,{nodes:z,scopes:H,appliedScopes:Y}):(0,j.jsx)(j.Fragment,{}),it=(0,o.useMemo)(()=>Y.map(Xt=>H[Xt.scopeId]?.spec.title||Xt.scopeId).join(" + "),[Y,H]),vt=(0,o.useMemo)(()=>tt?(0,j.jsx)(Iu.A,{width:30,height:14}):dt?(0,j.jsxs)("span",{children:[dt,":"]}):void 0,[tt,dt]),Lt=(0,o.useMemo)(()=>(0,j.jsx)(Ln.p,{readOnly:!0,placeholder:(0,d.t)("scopes.selector.input.placeholder","Select scopes..."),disabled:oe,loading:pe,value:it,"aria-label":(0,d.t)("scopes.selector.input.placeholder","Select scopes..."),"data-testid":"scopes-selector-input",prefix:vt,suffix:Y.length>0&&!oe?(0,j.jsx)(as.K,{"aria-label":(0,d.t)("scopes.selector.input.removeAll","Remove all scopes"),name:"times","data-testid":"scopes-selector-input-clear",onClick:()=>ye()}):void 0,onMouseOver:()=>we(!0),onMouseOut:()=>we(!1),onClick:()=>{oe||ge()}}),[oe,pe,ge,ye,Y,it,vt]);return(0,j.jsx)(Sc.m,{content:ft,show:Y.length===0?!1:Ie,children:Lt})}const Qm=(z,H)=>{let Y;if(z.length>0&&z[0].scopeNodeId){let oe=Xl(z[0].scopeNodeId,H);oe=oe.slice(1,-1),Y=oe.map(pe=>H[pe]?.spec.title).filter(pe=>pe)}return Y};function km({nodes:z,scopes:H,appliedScopes:Y}){const oe=(0,$t.of)(Ym),pe=Qm(Y,z),ge=Y.map(ye=>ye.scopeNodeId?z[ye.scopeNodeId]?.spec.title||ye.scopeNodeId:H[ye.scopeId]?.spec.title||ye.scopeId);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("p",{className:oe.scopePath,children:(pe&&pe.length>0?pe.join(" > ")+" > ":"")+ge.join(", ")})})}const Ym=z=>({scopePath:(0,st.css)({color:z.colors.text.primary,fontSize:z.typography.pxToRem(12),margin:z.spacing(0,0)})}),Jm=({recentScopes:z,onSelect:H})=>{const Y=(0,$t.of)(Xm),[oe,pe]=(0,o.useState)(!1),ge=(0,o.useId)();return(0,j.jsxs)("fieldset",{children:[(0,j.jsx)("legend",{className:Y.legend,children:(0,j.jsxs)("button",{className:Y.expandButton,"aria-expanded":oe,"aria-controls":ge,onClick:()=>pe(!oe),"data-testid":"scopes-selector-recent-scopes-section",children:[(0,j.jsx)(Sa.I,{name:oe?"angle-down":"angle-right"}),(0,j.jsx)(wa.E,{variant:"body",children:(0,j.jsx)(d.x6,{i18nKey:"command-palette.section.recent-scopes"})})]})}),(0,j.jsx)(he.a,{paddingLeft:3,paddingTop:oe?1:0,paddingBottom:oe?1:0,children:(0,j.jsx)(rn.B,{direction:"column",gap:1,id:ge,children:oe&&z.map(ye=>(0,j.jsxs)("button",{className:Y.recentScopeButton,onClick:()=>{H(ye.map(Ie=>Ie.metadata.name),ye[0]?.parentNode?.metadata?.name)},children:[(0,j.jsx)(wa.E,{truncate:!0,children:ye.map(Ie=>Ie.spec.title).join(", ")}),ye[0]?.parentNode?.spec.title&&(0,j.jsx)(wa.E,{truncate:!0,variant:"body",color:"secondary",children:ye[0]?.parentNode?.spec.title})]},ye.map(Ie=>Ie.metadata.name).join(",")))})})]})},Xm=z=>({recentScopeButton:(0,st.css)({textAlign:"left",background:"none",border:"none",padding:0,cursor:"pointer",display:"flex",gap:z.spacing(1),alignItems:"center"}),expandButton:(0,st.css)({display:"flex",alignItems:"center",gap:z.spacing(1),background:"none",border:"none",padding:0,cursor:"pointer"}),legend:(0,st.css)({marginBottom:0,padding:`${z.spacing(.5)} 0`})});function Zm({anyChildExpanded:z,query:H,resultsNodes:Y,scopeNodes:oe}){const pe=(0,$t.of)(qm);return z||Y.some(ge=>oe[ge.scopeNodeId].spec.nodeType==="container")&&!H?null:(0,j.jsx)("h6",{className:pe.container,"data-testid":"scopes-tree-headline",children:H?Y.length===0?(0,j.jsx)(d.x6,{i18nKey:"scopes.tree.headline.noResults",children:"No results found for your query"}):(0,j.jsx)(d.x6,{i18nKey:"scopes.tree.headline.results",children:"Results"}):(0,j.jsx)(d.x6,{i18nKey:"scopes.tree.headline.recommended",children:"Recommended"})})}const qm=z=>({container:(0,st.css)({color:z.colors.text.secondary,margin:z.spacing(1,0)})});var e0=e(32635);function t0({anyChildExpanded:z,loadingNodeName:H,treeNode:Y,onNodeUpdate:oe,scopeNodes:pe,selected:ge,selectedScopes:ye,selectScope:Ie,deselectScope:we,highlighted:ke}){const et=(0,$t.of)(n0);if(z&&!Y.expanded)return null;const tt=pe[Y.scopeNodeId];if(!tt)return null;const ft=(tt.spec.parentName?pe[tt.spec.parentName]:void 0)?.spec.disableMultiSelect??!1,it=Jl(tt),vt=Yl(tt);return(0,j.jsxs)("div",{id:Ru(Y.scopeNodeId),role:"treeitem","aria-selected":ke,"aria-expanded":vt?Y.expanded:void 0,className:z?et.expandedContainer:void 0,children:[(0,j.jsxs)("div",{className:(0,st.cx)(et.title,it&&!Y.expanded&&et.titlePadding,ke&&et.highlighted),children:[it&&!Y.expanded?ft?(0,j.jsx)(Tu.J,{id:Y.scopeNodeId,name:Y.scopeNodeId,checked:ge,label:vt?"":tt.spec.title,"data-testid":`scopes-tree-${Y.scopeNodeId}-radio`,onClick:()=>{ge?we(Y.scopeNodeId):Ie(Y.scopeNodeId)}}):(0,j.jsx)(e0.S,{id:Y.scopeNodeId,checked:ge,"data-testid":`scopes-tree-${Y.scopeNodeId}-checkbox`,label:vt?"":tt.spec.title,onChange:()=>{ge?we(Y.scopeNodeId):Ie(Y.scopeNodeId)}}):null,vt&&(0,j.jsxs)("button",{className:et.expand,"data-testid":`scopes-tree-${Y.scopeNodeId}-expand`,"aria-label":Y.expanded?(0,d.t)("scopes.tree.collapse","Collapse"):(0,d.t)("scopes.tree.expand","Expand"),onClick:()=>{oe(Y.scopeNodeId,!Y.expanded,Y.query)},children:[(0,j.jsx)(Sa.I,{name:Y.expanded?"angle-down":"angle-right"}),tt.spec.title]})]}),(0,j.jsx)("div",{className:et.children,children:Y.expanded&&(0,j.jsx)(ju,{tree:Y,loadingNodeName:H,onNodeUpdate:oe,scopeNodes:pe,selectedScopes:ye,selectScope:Ie,deselectScope:we})})]},Y.scopeNodeId)}const Ru=z=>z?`scopes-tree-item-${z}`:void 0,n0=z=>({highlighted:(0,st.css)({background:z.colors.action.focus,borderRadius:z.shape.radius.default}),expandedContainer:(0,st.css)({display:"flex",flexDirection:"column",maxHeight:"100%"}),title:(0,st.css)({alignItems:"center",display:"flex",gap:z.spacing(1),fontSize:z.typography.pxToRem(14),lineHeight:z.typography.pxToRem(22),padding:z.spacing(.5,0),"& > label :last-child":(0,st.css)({fontSize:z.typography.pxToRem(14),lineHeight:z.typography.pxToRem(22),fontWeight:z.typography.fontWeightRegular})}),titlePadding:(0,st.css)({paddingLeft:z.spacing(.5)}),expand:(0,st.css)({alignItems:"center",background:"none",border:0,display:"flex",gap:z.spacing(1),margin:0,padding:0}),children:(0,st.css)({display:"flex",flexDirection:"column",overflowY:"hidden",maxHeight:"100%",paddingLeft:z.spacing(4)})});function Au({items:z,anyChildExpanded:H,lastExpandedNode:Y,maxHeight:oe,selectedScopes:pe,scopeNodes:ge,loadingNodeName:ye,onNodeUpdate:Ie,selectScope:we,deselectScope:ke,highlightedId:et,id:tt}){const dt=(0,$t.of)(a0);if(z.length===0)return null;const ft=(0,j.jsx)("div",{role:"tree",id:tt,className:H?dt.expandedContainer:void 0,children:z.map(it=>{const vt=Jl(ge[it.scopeNodeId])&&pe.some(Lt=>Lt.scopeNodeId?Lt.scopeNodeId===it.scopeNodeId:Lt.scopeId===ge[it.scopeNodeId]?.spec.linkId);return(0,j.jsx)(t0,{treeNode:it,selected:vt,selectedScopes:pe,scopeNodes:ge,loadingNodeName:ye,anyChildExpanded:H,onNodeUpdate:Ie,selectScope:we,deselectScope:ke,highlighted:it.scopeNodeId===et},it.scopeNodeId)})});return Y?(0,j.jsx)(Gc.P,{minHeight:`${Math.min(5,z.length)*30}px`,maxHeight:oe,children:ft}):ft}const a0=z=>({expandedContainer:(0,st.css)({display:"flex",flexDirection:"column",maxHeight:"100%"})});function s0({anyChildExpanded:z,treeNode:H,onNodeUpdate:Y,searchArea:oe,onFocus:pe,onBlur:ge,"aria-controls":ye,"aria-activedescendant":Ie}){const we=(0,$t.of)(r0),[ke,et]=(0,o.useState)({value:H.query,dirty:!1});if((0,o.useEffect)(()=>{!ke.dirty&&ke.value!==H.query&&et({value:H.query,dirty:!1})},[ke,H.query]),(0,iu.A)(()=>{ke.dirty&&Y(H.scopeNodeId,!0,ke.value)},500,[ke.dirty,ke.value]),z)return null;const tt=(0,d.t)("scopes.tree.search","Search {{parentTitle}}",{parentTitle:oe});return(0,j.jsx)(lu.Z,{placeholder:tt,autoFocus:H.scopeNodeId!=="",role:"combobox","aria-expanded":!0,"aria-autocomplete":"list","aria-controls":ye,"aria-activedescendant":Ie,"aria-label":tt,value:ke.value,className:we.input,"data-testid":"scopes-tree-search",escapeRegex:!1,onChange:dt=>{et({value:dt,dirty:!0})},onFocus:pe,onBlur:ge})}const r0=z=>({input:(0,st.css)({margin:z.spacing(1,0),minHeight:z.spacing(4),height:z.spacing(4),maxHeight:z.spacing(4),width:`calc(100% - ${z.spacing(.5)})`})});var Zc=(z=>(z.SELECT="select",z.EXPAND="expand",z))(Zc||{});function o0(z,H,Y,oe){const[pe,ge]=(0,o.useState)(-1),ye=(0,o.useCallback)(we=>{if(z&&H.length!==0)switch(we.key){case"ArrowDown":we.preventDefault(),ge(ke=>(ke+1)%H.length);break;case"ArrowUp":we.preventDefault(),ge(ke=>(ke-1+H.length)%H.length);break;case"Enter":we.preventDefault(),pe!==-1&&oe(H[pe]?.scopeNodeId,"select");break;case"ArrowRight":pe!==-1&&(we.preventDefault(),oe(H[pe]?.scopeNodeId,"expand"));break;case"Escape":ge(-1);break;default:break}},[H,oe,pe,z]);return(0,o.useEffect)(()=>(window.addEventListener("keydown",ye),()=>{window.removeEventListener("keydown",ye)}),[ye]),(0,o.useEffect)(()=>{H.length===0&&ge(-1)},[H]),(0,o.useEffect)(()=>{ge(-1)},[Y,z]),{highlightedId:pe===-1?void 0:H[pe]?.scopeNodeId}}function i0({selectedNodes:z,resultNodes:H,treeQuery:Y,scopeNodes:oe,selectedScopes:pe,onNodeUpdate:ge,selectScope:ye,deselectScope:Ie}){const[we,ke]=(0,o.useState)(!1),et=[...z,...H],{highlightedId:tt}=o0(we,et,we?Y:"",(ft,it)=>{if(!ft)return;const vt=it===Zc.EXPAND&&Yl(oe[ft]),Lt=it===Zc.SELECT&&!Jl(oe[ft])&&Yl(oe[ft]);if(vt||Lt){ge(ft,!0,Y),ke(!1);return}pe.some(Xt=>Xt.scopeNodeId===ft)?Ie(ft):ye(ft)}),dt=Ru(tt);return{highlightedId:tt,ariaActiveDescendant:dt,enableHighlighting:()=>ke(!0),disableHighlighting:()=>ke(!1)}}function ju({tree:z,loadingNodeName:H,selectedScopes:Y,recentScopes:oe,onRecentScopesSelect:pe,onNodeUpdate:ge,scopeNodes:ye,selectScope:Ie,deselectScope:we}){const ke=(0,$t.of)(l0),et=(0,o.useId)(),tt=(0,o.useId)(),dt=H===z.scopeNodeId,ft=z.children;let it=Object.values(ft||{});const vt=it.some(({expanded:fs})=>fs);let Lt=[];Y.length>0&&Y[0].scopeNodeId&&z.scopeNodeId===ye[Y[0].scopeNodeId]?.spec.parentName&&(Lt=Y.filter(fs=>!it.map(Kr=>Kr.scopeNodeId).includes(fs.scopeNodeId)).map(fs=>({scopeNodeId:fs.scopeNodeId,query:"",expanded:!1})));const{highlightedId:Xt,ariaActiveDescendant:fn,enableHighlighting:jn,disableHighlighting:un}=i0({selectedNodes:Lt,resultNodes:it,treeQuery:z.query,scopeNodes:ye,selectedScopes:Y,onNodeUpdate:ge,selectScope:Ie,deselectScope:we}),Tn=ye[z.scopeNodeId]?.spec?.title||"",Gn=z.scopeNodeId===""?"":Tn,Da=!vt&&z.expanded;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(s0,{anyChildExpanded:vt,searchArea:Gn,onNodeUpdate:ge,treeNode:z,"aria-controls":`${et} ${tt}`,"aria-activedescendant":fn,onFocus:jn,onBlur:un}),z.scopeNodeId===""&&!vt&&oe&&oe.length>0&&pe&&!z.query&&(0,j.jsx)(Jm,{recentScopes:oe,onSelect:pe}),dt?(0,j.jsx)(Iu.A,{count:5,className:ke.loader}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Au,{items:Lt,anyChildExpanded:vt,lastExpandedNode:Da,loadingNodeName:H,onNodeUpdate:ge,selectedScopes:Y,scopeNodes:ye,selectScope:Ie,deselectScope:we,maxHeight:`${Math.min(5,Lt.length)*30}px`,highlightedId:Xt,id:et}),(0,j.jsx)(Zm,{anyChildExpanded:vt,query:z.query,resultsNodes:it,scopeNodes:ye}),(0,j.jsx)(Au,{items:it,anyChildExpanded:vt,lastExpandedNode:Da,loadingNodeName:H,onNodeUpdate:ge,selectedScopes:Y,scopeNodes:ye,selectScope:Ie,deselectScope:we,maxHeight:"100%",highlightedId:Xt,id:tt})]})]})}const l0=z=>({loader:(0,st.css)({margin:z.spacing(.5,0)})}),c0=()=>{const{chrome:z}=(0,Vs.Il)(),H=z.useState(),Y=!H.chromeless&&H.megaMenuDocked&&H.megaMenuOpen,oe=(0,$t.of)(d0,Y),pe=(0,kl.b)(),ge=Cl(),ye=(0,Ur.A)(ge?.scopesSelectorService.stateObservable??new qo.c,ge?.scopesSelectorService.state);if((0,o.useEffect)(()=>{if(!ge?.scopesSelectorService)return;const Fl=mc=>{mc.key==="Enter"&&mc.metaKey&&ge.scopesSelectorService.closeAndApply()};return window.addEventListener("keydown",Fl),()=>window.removeEventListener("keydown",Fl)},[ge?.scopesSelectorService]),!ge||!pe||!pe.state.enabled||!ye)return null;const{nodes:Ie,loadingNodeName:we,opened:ke,selectedScopes:et,appliedScopes:tt,tree:dt,scopes:ft}=ye,{scopesService:it,scopesSelectorService:vt,scopesDashboardsService:Lt}=ge,{readOnly:Xt,drawerOpened:fn,loading:jn}=pe.state,{open:un,removeAllScopes:Tn,closeAndApply:Gn,closeAndReset:Da,updateNode:fs,selectScope:Kr,deselectScope:vP,getRecentScopes:yP}=vt,xP=yP(),Bh=Xt?(0,d.t)("scopes.dashboards.toggle.disabled","Suggested dashboards list is disabled due to read only mode"):fn?(0,d.t)("scopes.dashboards.toggle.collapse","Collapse suggested dashboards list"):(0,d.t)("scopes.dashboards.toggle.expand","Expand suggested dashboards list");return(0,j.jsxs)("div",{className:oe.container,children:[(0,j.jsx)(as.K,{name:"web-section-alt",className:oe.dashboards,"aria-label":Bh,tooltip:Bh,"data-testid":"scopes-dashboards-expand",disabled:Xt,onClick:Lt.toggleDrawer}),(0,j.jsx)(_m,{nodes:Ie,scopes:ft,appliedScopes:tt,disabled:Xt,loading:jn,onInputClick:()=>{it.state.readOnly||un()},onRemoveAllClick:Tn}),ke&&(0,j.jsx)(xl._,{title:(0,d.t)("scopes.selector.title","Select scopes"),size:"sm",onClose:Da,children:(0,j.jsx)(Jt.tH,{children:({error:Fl,errorInfo:mc})=>Fl?(0,j.jsx)(Lc.D,{error:Fl,title:(0,d.t)("scopes.selector.error-title","An unexpected error happened"),errorInfo:mc}):(0,j.jsxs)("div",{className:oe.drawerContainer,children:[(0,j.jsx)("div",{className:oe.treeContainer,children:jn||!dt?(0,j.jsx)(Gm.y,{"data-testid":"scopes-selector-loading"}):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(ju,{tree:dt,loadingNodeName:we,onNodeUpdate:fs,recentScopes:xP,selectedScopes:et,scopeNodes:Ie,selectScope:Kr,deselectScope:vP,onRecentScopesSelect:(EP,PP)=>{vt.changeScopes(EP,PP),vt.closeAndReset()}})})}),(0,j.jsxs)("div",{className:oe.buttonsContainer,children:[(0,j.jsxs)(fe.$n,{variant:"primary","data-testid":"scopes-selector-apply",onClick:Gn,children:[(0,j.jsx)(d.x6,{i18nKey:"scopes.selector.apply",children:"Apply"}),"\xA0",(0,j.jsx)(wa.E,{variant:"bodySmall",children:`${(0,Fc.gn)()}+\u21B5`})]}),(0,j.jsx)(fe.$n,{variant:"secondary","data-testid":"scopes-selector-cancel",onClick:Da,children:(0,j.jsx)(d.x6,{i18nKey:"scopes.selector.cancel",children:"Cancel"})})]})]})})})]})},d0=(z,H)=>({container:(0,st.css)({display:"flex",flexDirection:"row",paddingLeft:H?z.spacing(2):"unset"}),dashboards:(0,st.css)({color:z.colors.text.secondary,marginRight:z.spacing(2),"&:hover":(0,st.css)({color:z.colors.text.primary})}),drawerContainer:(0,st.css)({display:"flex",flexDirection:"column",height:"100%"}),treeContainer:(0,st.css)({display:"flex",flexDirection:"column",maxHeight:"100%",overflowY:"hidden",paddingLeft:z.spacing(.5)}),buttonsContainer:(0,st.css)({display:"flex",gap:z.spacing(1),marginTop:z.spacing(8)})});var Rl=e(31937);function u0({actions:z,breadcrumbActions:H,scopes:Y}){const oe=(0,$t.of)(h0);return(0,j.jsx)("div",{"data-testid":Ga.XF.NavToolbar.container,className:oe.actionsBar,children:(0,j.jsxs)(rn.B,{alignItems:"center",justifyContent:"flex-start",flex:1,wrap:"nowrap",minWidth:0,children:[Y?.state.enabled?(0,j.jsx)(c0,{}):void 0,(0,j.jsxs)(rn.B,{alignItems:"center",justifyContent:"flex-end",flex:1,wrap:"nowrap",minWidth:0,children:[H,H&&z&&(0,j.jsx)(ho.K,{}),z]})]})})}const h0=z=>({actionsBar:(0,st.css)({alignItems:"center",backgroundColor:z.colors.background.primary,borderBottom:`1px solid ${z.colors.border.weak}`,display:"flex",height:(0,Rl.vn)(),padding:z.spacing(0,1,0,2)})});var f0=e(35484);const Lu=o.memo(()=>{const{query:z}=(0,lt.useKBar)(oe=>({kbarSearchQuery:oe.searchQuery,kbarIsOpen:oe.visualState===lt.VisualState.showing})),H=(0,Zl.i)("lg"),Y=()=>{z.toggle()};return H?(0,j.jsx)(p0,{onClick:Y}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ur.I,{iconOnly:!0,icon:"search","aria-label":(0,d.t)("nav.search.placeholderCommandPalette","Search..."),onClick:Y}),(0,j.jsx)(ho.K,{})]})});Lu.displayName="TopSearchBarCommandPaletteTrigger";function p0({onClick:z}){const H=(0,$t.of)(g0),Y=(0,o.useMemo)(()=>(0,Fc.gn)(),[]);return(0,j.jsx)("div",{className:H.wrapper,"data-testid":Ga.Tp.components.NavToolbar.commandPaletteTrigger,children:(0,j.jsxs)("div",{className:H.inputWrapper,children:[(0,j.jsx)("div",{className:H.prefix,children:(0,j.jsx)(Sa.I,{name:"search"})}),(0,j.jsx)("button",{className:H.fakeInput,onClick:z,children:(0,d.t)("nav.search.placeholderCommandPalette","Search...")}),(0,j.jsx)("div",{className:H.suffix,children:(0,j.jsx)(wa.E,{variant:"bodySmall",children:`${Y}+k`})})]})})}const g0=z=>{const H=(0,Ln.n)({theme:z});return{wrapper:(0,st.cx)(H.wrapper,(0,st.css)({width:"auto",minWidth:140,maxWidth:350,flexGrow:1})),inputWrapper:H.inputWrapper,prefix:H.prefix,suffix:(0,st.css)([H.suffix,{display:"flex",gap:z.spacing(.5)}]),fakeInput:(0,st.css)([H.input,{textAlign:"left",paddingLeft:28,color:z.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":(0,f0.getFocusStyles)(z)}]),button:(0,st.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}},m0=(0,o.memo)(function({onToggleMegaMenu:H,onToggleKioskMode:Y,pageNav:oe,sectionNav:pe,scopes:ge,actions:ye,breadcrumbActions:Ie,showToolbarLevel:we}){const{chrome:ke}=(0,Vs.Il)(),et=ke.useState(),tt=!et.chromeless&&et.megaMenuDocked&&et.megaMenuOpen,dt=(0,$t.of)(v0,tt),ft=(0,Vn.d4)(Tn=>Tn.navIndex),it=(0,J.cloneDeep)(ft.help),vt=it?(0,ar.CS)(it):void 0,Lt=ft.profile,Xt=(0,Vn.d4)(Tn=>Tn.navIndex)[Yc.Id],fn=(0,gu.Z)(pe,oe,Xt),jn=k.$W.featureToggles.unifiedHistory,un=!(0,Zl.i)("sm");return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:dt.layout,children:[(0,j.jsxs)(rn.B,{minWidth:0,gap:.5,alignItems:"center",flex:{xs:2,lg:1},children:[!tt&&(0,j.jsx)(ur.I,{narrow:!0,id:em.Ut,onClick:H,tooltip:(0,d.t)("navigation.megamenu.open","Open menu"),children:(0,j.jsxs)(rn.B,{gap:0,alignItems:"center",children:[(0,j.jsx)(Pu.M.MenuLogo,{className:dt.img}),(0,j.jsx)(Sa.I,{size:"sm",name:"angle-down"})]})}),(0,j.jsx)(am,{breadcrumbs:fn,className:dt.breadcrumbsWrapper}),!we&&Ie]}),(0,j.jsxs)(rn.B,{gap:.5,alignItems:"center",justifyContent:"flex-end",flex:1,"data-testid":we?void 0:Ga.XF.NavToolbar.container,minWidth:{xs:"unset",lg:0},children:[(0,j.jsx)(Lu,{}),jn&&!un&&(0,j.jsx)(vm,{}),!un&&(0,j.jsx)(xm,{}),vt&&(0,j.jsx)(El.m,{overlay:()=>(0,j.jsx)(Ou,{node:vt}),placement:"bottom-end",children:(0,j.jsx)(ur.I,{iconOnly:!0,icon:"question-circle","aria-label":(0,d.t)("navigation.help.aria-label","Help")})}),(0,j.jsx)(ho.K,{}),!un&&(0,j.jsx)(dm,{compact:un}),!we&&ye,!Ha.TP.user.isSignedIn&&(0,j.jsx)($m,{}),(0,j.jsx)(Em,{}),Lt&&(0,j.jsx)(wm,{profileNode:Lt,onToggleKioskMode:Y})]})]}),we&&(0,j.jsx)(u0,{scopes:ge,actions:ye,breadcrumbActions:Ie})]})}),v0=(z,H)=>({layout:(0,st.css)({height:(0,Rl.vn)(),display:"flex",gap:z.spacing(2),alignItems:"center",padding:z.spacing(0,1),paddingLeft:H?z.spacing(3.5):z.spacing(.75),borderBottom:`1px solid ${z.colors.border.weak}`,justifyContent:"space-between"}),breadcrumbsWrapper:(0,st.css)({display:"flex",overflow:"hidden",[z.breakpoints.down("sm")]:{minWidth:"40%"}}),img:(0,st.css)({alignSelf:"center",height:z.spacing(3),width:z.spacing(3)}),kioskToggle:(0,st.css)({[z.breakpoints.down("lg")]:{display:"none"}})});function y0({children:z}){const{chrome:H}=(0,Vs.Il)(),{isOpen:Y,extensionSidebarWidth:oe,setExtensionSidebarWidth:pe}=(0,co.sA)(),ge=H.useState(),ye=(0,kl.b)(),Ie=!ge.chromeless&&ge.megaMenuDocked&&ge.megaMenuOpen,we=!!(ye?.state.enabled&&ye?.state.drawerOpened&&!ye?.state.readOnly),ke=(0,Rl.UH)(),et=ke*(0,Rl.vn)(),tt=(0,$t.of)(E0,et),dt=(0,$t.of)(P0,oe),ft=(0,$t.of)(Pp.l);x0(H),(0,ar.n0)(ge.megaMenuOpen,ge.megaMenuDocked);const it=(0,st.cx)({[tt.content]:!0,[tt.contentChromeless]:ge.chromeless,[tt.contentWithSidebar]:Y&&!ge.chromeless}),vt=()=>{H.setMegaMenuOpen(!ge.megaMenuOpen)},{pathname:Lt,search:Xt}=C.Ny.getLocation(),fn=Lt+Xt,jn=ge.returnToPrevious&&fn!==ge.returnToPrevious.href;return(0,o.useEffect)(()=>{ge.returnToPrevious&&fn===ge.returnToPrevious.href&&H.clearReturnToPrevious("auto_dismissed")},[H,fn]),(0,o.useEffect)(()=>{const un=(0,C.SE)(Xt);H.setKioskModeFromUrl(un.kiosk)},[H,Xt]),(0,j.jsxs)("div",{className:xp()("main-view",{"main-view--chrome-hidden":ge.chromeless}),children:[!ge.chromeless&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(fe.z9,{className:tt.skipLink,href:"#pageContent",children:(0,j.jsx)(d.x6,{i18nKey:"app-chrome.skip-content-button",children:"Skip to main content"})}),Ie&&(0,j.jsx)(Hc,{className:tt.dockedMegaMenu,onClose:()=>H.setMegaMenuOpen(!1)}),(0,j.jsx)("header",{className:(0,st.cx)(tt.topNav,Ie&&tt.topNavMenuDocked),children:(0,j.jsx)(m0,{sectionNav:ge.sectionNav.node,pageNav:ge.pageNav,onToggleMegaMenu:vt,onToggleKioskMode:H.onToggleKioskMode,actions:ge.actions,breadcrumbActions:ge.breadcrumbActions,scopes:ye,showToolbarLevel:ke===2})})]}),(0,j.jsx)("div",{className:it,children:(0,j.jsxs)("div",{className:(0,st.cx)(tt.panes,{[tt.panesWithSidebar]:Y}),children:[!ge.chromeless&&(0,j.jsx)("div",{className:(0,st.cx)(tt.scopesDashboardsContainer,{[tt.scopesDashboardsContainerDocked]:Ie}),children:(0,j.jsx)(Jt.Xw,{children:(0,j.jsx)(Tg,{})})}),(0,j.jsx)("main",{className:(0,st.cx)(tt.pageContainer,{[tt.pageContainerMenuDocked]:Ie||we,[tt.pageContainerMenuDockedScopes]:Ie&&we,[tt.pageContainerWithSidebar]:!ge.chromeless&&Y,[dt.contentWidth]:!ge.chromeless&&Y}),id:"pageContent",children:z}),!ge.chromeless&&Y&&(0,j.jsx)(Ep.c,{className:tt.sidebarContainer,defaultSize:{width:oe},enable:{left:!0},onResize:(un,Tn,Gn)=>pe(Gn.getBoundingClientRect().width),handleClasses:{left:ft.dragHandleBaseVertical},minWidth:kc.nf,maxWidth:kc.T0,children:(0,j.jsx)(kc.EE,{})})]})}),!ge.chromeless&&!ge.megaMenuDocked&&(0,j.jsx)(wg,{}),!ge.chromeless&&(0,j.jsx)(ug,{}),jn&&ge.returnToPrevious&&(0,j.jsx)(Eu,{href:ge.returnToPrevious.href,title:ge.returnToPrevious.title})]})}function x0(z){const H=nr.A.getBool(_c,!0),Y=(0,Zl.i)("xl");(0,o.useEffect)(()=>{if(!H)return;const oe=z.state.getValue();Y&&!oe.megaMenuDocked?(z.setMegaMenuDocked(!0,!1),z.setMegaMenuOpen(!0)):!Y&&oe.megaMenuDocked&&(z.setMegaMenuDocked(!1,!1),z.setMegaMenuOpen(!1))},[Y,z,H])}const E0=(z,H)=>({content:(0,st.css)({label:"page-content",display:"flex",flexDirection:"column",paddingTop:H,flexGrow:1,height:"auto"}),contentWithSidebar:(0,st.css)({height:"100vh",overflow:"hidden"}),contentChromeless:(0,st.css)({paddingTop:0}),dockedMegaMenu:(0,st.css)({background:z.colors.background.primary,borderRight:`1px solid ${z.colors.border.weak}`,display:"none",height:"100%",position:"fixed",top:0,width:uo,zIndex:2,[z.breakpoints.up("xl")]:{display:"flex",flexDirection:"column"}}),scopesDashboardsContainer:(0,st.css)({position:"fixed",height:`calc(100% - ${H}px)`,zIndex:1}),scopesDashboardsContainerDocked:(0,st.css)({left:uo}),topNav:(0,st.css)({display:"flex",position:"fixed",zIndex:z.zIndex.navbarFixed,left:0,right:0,background:z.colors.background.primary,flexDirection:"column"}),topNavMenuDocked:(0,st.css)({left:uo}),panes:(0,st.css)({display:"flex",flexDirection:"column",flexGrow:1,label:"page-panes"}),panesWithSidebar:(0,st.css)({height:"100%",overflow:"hidden",position:"relative"}),pageContainerMenuDocked:(0,st.css)({paddingLeft:uo}),pageContainerMenuDockedScopes:(0,st.css)({paddingLeft:`calc(${uo} * 2)`}),pageContainer:(0,st.css)({label:"page-container",display:"flex",flexDirection:"column",flexGrow:1}),pageContainerWithSidebar:(0,st.css)({overflow:"auto",height:"100%",minHeight:0}),skipLink:(0,st.css)({position:"fixed",top:-1e3,":focus":{left:z.spacing(1),top:z.spacing(1),zIndex:z.zIndex.portal}}),sidebarContainer:(0,st.css)({position:"fixed !important",top:H,bottom:0,zIndex:2,right:0})}),P0=(z,H=0)=>({contentWidth:(0,st.css)({maxWidth:`calc(100% - ${H}px) !important`})});var D0=e(22099);function b0(){const{chrome:z}=(0,Vs.Il)(),H=z.useState();return ee.$.featureToggles.enableAppChromeExtensions!==!0||H.chromeless?null:(0,j.jsx)(C0,{})}function C0(){const{components:z,isLoading:H}=(0,V.f)({extensionPointId:Ml.SM.AppChrome});return H?null:(0,D0.RC)({props:{},components:z,pluginId:"grafana-setupguide-app"})}var Al=e(6890),Bu=e(12066),T0=e(94701);function M0({appNotification:z,onClearNotification:H}){const Y=(0,$t.of)(O0);(0,T0.A)(()=>{setTimeout(()=>{H(z.id)},us.g2[z.severity])});const oe=z.component||z.text||z.traceId,pe=z.traceId;return(0,j.jsx)(Cs.F,{severity:z.severity,title:z.title,onRemove:()=>H(z.id),elevated:!0,children:oe&&(0,j.jsxs)("div",{className:Y.wrapper,children:[(0,j.jsx)("span",{children:z.component||z.text}),pe&&(0,j.jsx)("span",{className:Y.trace,children:(0,j.jsxs)(d.x6,{i18nKey:"app-notification.item.trace-id",children:["Trace ID: ",{traceId:pe}]})})]})})}function O0(z){return{wrapper:(0,st.css)({display:"flex",flexDirection:"column"}),trace:(0,st.css)({fontSize:z.typography.pxToRem(10)})}}function S0(){const z=(0,Vn.d4)(pe=>(0,Bu.fX)(pe.appNotifications)),H=(0,Vn.wA)(),Y=(0,$t.of)(I0);(0,o.useEffect)(()=>{Za.A.on(ei.r1.alertWarning,pe=>H((0,Al.dx)((0,ec.q8)(...pe)))),Za.A.on(ei.r1.alertSuccess,pe=>H((0,Al.dx)((0,ec.tZ)(...pe)))),Za.A.on(ei.r1.alertError,pe=>H((0,Al.dx)((0,ec.gi)(...pe)))),Za.A.on(ei.r1.alertInfo,pe=>H((0,Al.dx)((0,ec.Cf)(...pe))))},[H]);const oe=pe=>{H((0,Al.Do)(pe))};return(0,j.jsx)("div",{className:Y.wrapper,children:(0,j.jsx)(rn.B,{direction:"column",children:z.map((pe,ge)=>(0,j.jsx)(M0,{appNotification:pe,onClearNotification:oe},`${pe.id}-${ge}`))})})}function I0(z){return{wrapper:(0,st.css)({label:"app-notifications-list",zIndex:z.zIndex.portal,minWidth:400,maxWidth:600,position:"fixed",right:6,top:88})}}var R0=e(71599);function A0(z){const[H,Y]=(0,o.useState)({component:null,props:{}}),oe=(0,o.useMemo)(()=>{function pe(ye,Ie){Y({component:ye,props:Ie})}function ge(){Y({component:null,props:{}})}return{component:H.component,props:{...H.props,isOpen:!0,onDismiss:ge},showModal:pe,hideModal:ge}},[H]);return(0,o.useEffect)(()=>{Za.A.subscribe(xs.S8,({payload:ge})=>{Y({component:ge.component,props:ge.props})}),Za.A.subscribe(xs.bY,ge=>{j0(ge,Y)});let pe="";C.Ny.getHistory().listen(ge=>{ge.pathname!==pe&&Y({component:null,props:{}}),pe=ge.pathname})},[]),(0,j.jsx)(Vd.wE.Provider,{value:oe,children:z.children})}function j0({payload:z},H){const{confirmText:Y,onConfirm:oe=()=>{},onDismiss:pe,text2:ge,altActionText:ye,onAltAction:Ie,noText:we,text:ke,text2htmlBind:et,yesText:tt="Yes",icon:dt,title:ft="Confirm",yesButtonVariant:it}=z,vt=()=>H({component:null,props:{}}),Lt={confirmText:tt,confirmButtonVariant:it,confirmationText:Y,icon:dt,title:ft,body:ke,description:ge&&et?Su.sQ.sanitize(ge):ge,isOpen:!0,dismissText:we,onConfirm:()=>{oe(),vt()},onDismiss:()=>{pe?.(),vt()},onAlternative:Ie?()=>{Ie(),vt()}:void 0,alternativeText:ye};H({component:R0.u,props:Lt})}var L0=e(52830);function B0(z){return z.providers.reduce((H,Y)=>(0,j.jsx)(Y,{children:H}),z.children)}function U0(z){return(0,j.jsx)(vp.Ix,{history:C.Ny.getHistory(),children:(0,j.jsx)(C._K,{service:C.Ny,children:(0,j.jsx)(wd.CompatRouter,{children:(0,j.jsx)(L0.YZ,{children:(0,j.jsx)(B0,{providers:z.providers,children:(0,j.jsxs)(A0,{children:[(0,j.jsxs)(y0,{children:[(0,j.jsx)(S0,{}),(0,j.jsxs)(rn.B,{gap:0,grow:1,direction:"column",children:[(0,j.jsx)(b0,{}),z.pageBanners.map((H,Y)=>(0,j.jsx)(H,{},Y.toString())),z.routes]}),z.bodyRenderHooks.map((H,Y)=>(0,j.jsx)(H,{},Y.toString()))]}),(0,j.jsx)(Vd.EO,{})]})})})})})})}let Uu=[],Wu=[];const Nu=[];function TP(z){Nu.push(z)}function MP(z){Uu.push(z)}function OP(z){Wu.push(z)}class W0 extends o.Component{constructor(H){super(H),this.iconCacheID=`grafana-icon-cache-${ee.$.buildInfo.commit}`,this.renderRoute=Y=>(0,j.jsx)(At.qh,{caseSensitive:Y.sensitive===void 0?!1:Y.sensitive,path:Y.path,element:(0,j.jsx)(Hf,{route:Y})},Y.path),this.state={}}async componentDidMount(){this.setState({ready:!0}),$(".preloader").remove();const H=await window.caches?.keys()??[];for(const Y of H)Y.startsWith("grafana-icon-cache")&&Y!==this.iconCacheID&&window.caches.delete(Y)}renderRoutes(){return(0,j.jsx)(At.BV,{children:Mf().map(H=>this.renderRoute(H))})}render(){const{app:H}=this.props,{ready:Y}=this.state;(0,C.Lc)("AppWrapper",!1,"rendering");const oe=ye=>{(0,Tt.rR)("command_palette_action_selected",{actionId:ye.id,actionName:ye.name})},pe={routes:Y&&this.renderRoutes(),pageBanners:Wu,bodyRenderHooks:Uu,providers:Nu},ge=ee.$.featureToggles.timeRangeProvider?kt.A:o.Fragment;return(0,j.jsx)(It.Provider,{store:$a.M_,children:(0,j.jsx)(Jt.Xw,{style:"page",children:(0,j.jsx)(Vs.YE.Provider,{value:H.context,children:(0,j.jsx)(Qf.N,{value:ee.$.theme2,children:(0,j.jsx)(xt.A,{name:this.iconCacheID,children:(0,j.jsx)(lt.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:oe}},children:(0,j.jsx)(ge,{children:(0,j.jsx)(mp,{children:(0,j.jsx)(Pl.AZ,{registries:Xf.qm,children:(0,j.jsx)(co.kn,{children:(0,j.jsxs)(ot.N$,{getContainer:on.gF,children:[(0,j.jsx)(jf,{}),(0,j.jsxs)("div",{className:"grafana-app",children:[(0,j.jsx)(U0,{...pe}),(0,j.jsx)(Yf,{}),(0,j.jsx)(on.qB,{})]})]})})})})})})})})})})})}}var N0=e(35222);const K0=(0,o.lazy)(()=>Promise.resolve().then(e.bind(e,32225)).then(z=>({default:z.NestedFolderPicker}))),F0=z=>(0,j.jsx)(o.Suspense,{fallback:(0,j.jsx)(N0.A,{}),children:(0,j.jsx)(K0,{...z})});var Ku=e(83162),w0=e(70715);function V0({actions:z,children:H,info:Y,pageNav:oe,layout:pe,renderTitle:ge,subTitle:ye}){const Ie=(0,o.useContext)(w0.A);return(0,j.jsx)(hn.Y,{navModel:Ie.sectionNav,pageNav:oe,layout:pe,actions:z,renderTitle:ge,info:Y,subTitle:ye,children:(0,j.jsx)(hn.Y.Contents,{children:H})})}var $0=e(45928),z0=e(43561),G0=e(25992),H0=e(81041);function Fu(){return typeof window.SharedWorker<"u"}class _0{constructor(H,Y){if(!Fu())throw new Error("SharedWorker is not supported");const oe=H.toString(),pe=new URL(".",H).toString(),ge=`importScripts('${oe}');`,ye=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${pe}'; ${ge}`],{type:"application/javascript"})),Ie=new SharedWorker(ye,Y);return URL.revokeObjectURL(ye),Ie}}function Q0(z){return!z||typeof z!="object"?!1:"totalJSHeapSize"in z&&"usedJSHeapSize"in z&&"jsHeapSizeLimit"in z}function k0(z){return!z||typeof z!="object"?!1:"memory"in z&&Q0(z.memory)}function wu(z){const H={};function Y(oe,pe){if(typeof oe=="object"&&oe!==null){if(Array.isArray(oe))throw new Error("Array values are not supported.");for(const ge in oe)oe.hasOwnProperty(ge)&&Y(oe[ge],pe?`${pe}_${ge}`:ge)}else typeof oe=="string"?H[pe]=oe:typeof oe=="number"&&(Number.isInteger(oe)?H[pe]=oe.toString():H[pe]=oe.toFixed(4))}return Y(z,"crash"),H}const Vu=(0,G0.DW)("core.crash-detection");function Y0(){if(!Fu())return;let z=Date.now();document.body.addEventListener("click",()=>z=Date.now(),!0),document.body.addEventListener("keypress",()=>z=Date.now(),!0),(0,$0.initCrashDetection)({id:(0,z0.Ak)(5),dbName:"grafana.crashes",createClientWorker(){return new H0.c(new URL(e.p+e.u(7235),e.b))},createDetectorWorker(){return new _0(new URL(e.p+e.u(8220),e.b))},reportCrash:async H=>{const Y=wu(H);return Vu.logWarning("browser crash detected",Y),!0},reportStaleTab:async H=>{const Y=wu(H);return Vu.logWarning("stale browser tab detected",Y),!0},updateInfo:H=>{H.app={version:ee.$.buildInfo.version,url:window.location.href},H.user={email:Cn.TP.user.email,login:Cn.TP.user.login,name:Cn.TP.user.name,lastInteraction:z},k0(performance)&&(H.memory={heapUtilization:performance.memory.usedJSHeapSize/performance.memory.totalJSHeapSize,limitUtilization:performance.memory.totalJSHeapSize/performance.memory.jsHeapSizeLimit,usedJSHeapSize:performance.memory.usedJSHeapSize,totalJSHeapSize:performance.memory.totalJSHeapSize,jsHeapSizeLimit:performance.memory.jsHeapSizeLimit})}})}var sc=e(29662);const $u=z=>z.split("-")[0].toLowerCase(),J0={type:"backend",init(){},async read(z,H,Y){let oe=sc.Yj.find(ye=>ye.code===z);if(oe||(oe=sc.Yj.find(ye=>$u(ye.code)===$u(z))),!oe)return Y(new Error(`No message loader available for ${z}`),null);const pe=oe.loader[H];if(!pe)return Y(new Error(`No message loader available for ${z} with namespace ${H}`),null);const ge=await pe();Y(null,ge)}};async function X0(){if(window.location.search.indexOf("why-render")!==-1){const{default:z}=await e.e(3718).then(e.t.bind(e,13718,23));z(h,{trackAllPureComponents:!0})}await eg()}async function Z0(){await X0()}async function q0(){tg()}var ev=e(17016);function tv(z){const H=z.target instanceof Element&&nv(z.target);if(!(z.ctrlKey||z.metaKey||z.defaultPrevented)&&H){let Y=H.getAttribute("href");const oe=H.getAttribute("target");if(Y&&!oe){const pe=ru.kM.parseKeyValue(Y.split("?")[1]),ge=pe.orgId&&Number(pe.orgId)!==Cn.TP.user.orgId;if((0,C.Lc)("utils",!1,"intercepting link click",z),z.preventDefault(),Y=m.I.stripBaseFromUrl(Y),Y[0]!=="/"||ge)if(Y.indexOf("://")>0||Y.indexOf("mailto:")===0||ge){window.location.href=Y;return}else if(Y.indexOf("#")===0){window.location.hash=Y;return}else Y=`/${Y}`;C.Ny.push(Y)}}}function nv(z){for(;z!==null&&z.tagName;){if(z.tagName.toUpperCase()==="A")return z;z=z.parentElement}return null}var zu=e(6219),av=e(78529);class sv{attachCorrelationsToDataFrames(H,Y,oe){return(0,zu.cA)(H,Y,oe)}correlationsDataLinkPostProcessorFactory(H){return(0,av.YV)(void 0,H)}getCorrelationsBySourceUIDs(H){return(0,zu.J6)(H)}}var rv=e(4590);class ov{constructor(H){this.hasUpdates=!1,this.checked=Date.now(),this.prevLocationPath="",this.interval=H??1e3*60*5}start(){const H=(0,Bc.oF)();H&&H.getConnectionState().subscribe(Y=>{Y&&this._checkForUpdates()}),C.Ny.getHistory().listen(this.locationUpdated.bind(this)),this.prevLocationPath=C.Ny.getLocation().pathname}locationUpdated(H){if(this.prevLocationPath===H.pathname)return;const Y=H.pathname.split("/");Y[1]==="/"&&this.prevLocationPath!=="/"?this.reloadIfUpdateDetected():Y[1]==="d"&&!rv._o.state.isPlaying?this.reloadIfUpdateDetected():this.hasUpdates&&(0,Tt.rR)("new_frontend_assets_reload_ignored",{newLocation:H.pathname,prevLocation:this.prevLocationPath}),this.prevLocationPath=H.pathname}async _checkForUpdates(){if(this.hasUpdates||Date.now()-this.checked<this.interval)return;this.checked=Date.now();const H=this.previous,Y=await(0,x.AI)().get("/api/frontend/assets");H&&!(0,J.isEqual)(H,Y)&&(this.hasUpdates=!0,(0,Tt.rR)("new_frontend_assets_detected",{assets:H.assets!==Y.assets,plugins:H.plugins!==Y.plugins,version:H.version!==Y.version,flags:H.flags!==Y.flags})),this.previous=Y}reloadIfUpdateDetected(){this.hasUpdates&&((0,Tt.rR)("new_frontend_assets_reload",{}),window.location.reload()),this._checkForUpdates()}}var Gu=e(83873),Hu=e(25240);class iv{constructor(H){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const Y of this.backends)Y.flush()},this.addBackend=Y=>{(0,Hu.S5)("Adding backend",!1,Y),this.backends.push(Y)},this.addEvent=(Y,oe)=>{const pe=this.getMeta(),ge={...Y,meta:{...pe,...oe}};for(const ye of this.backends)(ye.supportedEvents.length===0||ye.supportedEvents.indexOf(ge.type)>-1)&&ye.addEvent(ge);(0,Hu.S5)(`${Y.type} event`,!1,{...Y.payload,meta:ge.meta})},this.getMeta=()=>({sessionId:"",userId:Cn.TP.user.id,userLogin:Cn.TP.user.login,userSignedIn:Cn.TP.user.isSignedIn,orgRole:Cn.TP.user.orgRole,orgId:Cn.TP.user.orgId,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),path:window.location.pathname,url:window.location.href}),this.config={...this.config,...H},setInterval(this.flush,this.config.flushInterval)}}var lv=e(78731),cv=e(57852),dv=e(62635),uv=e(37010),hv=e(23753),fo=e(75421),fv=e(47981),rc=e(12469);class pv{constructor(H,Y){this.locationService=H,this.chromeService=Y,this.panelId=null,Za.A.subscribe(cv.Tp,oe=>{this.panelId=oe.payload.panelId})}clearAndInitGlobalBindings(H){rc.R.reset(),H.chromeless||(this.bind("?",this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g d",this.goToDashboards),this.bind("g e",this.goToExplore),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>(0,Tl.O)(!1)),this.bind("c r",()=>(0,Tl.O)(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const Y=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(Y&&Y instanceof HTMLElement&&(Y.nodeName==="INPUT"||Y.nodeName==="TEXTAREA"||Y.hasAttribute("data-slate-editor"))){Y.blur();return}this.exit()}}openAlerting(){this.locationService.push("/alerting")}goToDashboards(){this.locationService.push("/dashboards")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}showHelpModal(){Za.A.publish(new xs.S8({component:fv.N}))}exit(){const H=this.locationService.getSearchObject();if(H.editview){this.locationService.partial({editview:null,editIndex:null});return}if(H.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(H.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(H.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:Y}=this.chromeService.state.getValue();Y&&this.chromeService.exitKioskMode()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(H,Y){rc.R.bind(H,oe=>{oe.preventDefault(),oe.stopPropagation(),oe.returnValue=!1,Y.call(this)},"keydown")}bindGlobal(H,Y){rc.R.bindGlobal(H,oe=>{oe.preventDefault(),oe.stopPropagation(),oe.returnValue=!1,Y.call(this)},"keydown")}unbind(H,Y){rc.R.unbind(H,Y)}bindWithPanelId(H,Y){this.bind(H,this.withFocusedPanel(Y))}withFocusedPanel(H){return()=>{if(typeof this.panelId=="number"){H(this.panelId);return}}}setupTimeRangeBindings(H=!0){this.bind("t a",()=>{Za.A.publish(new xs.Rh({updateUrl:H}))}),this.bind("t z",()=>{Za.A.publish(new xs.U0({scale:2,updateUrl:H}))}),this.bind("ctrl+z",()=>{Za.A.publish(new xs.U0({scale:2,updateUrl:H}))}),this.bind("t left",()=>{Za.A.publish(new xs.Io({direction:xs.xL.Left,updateUrl:H}))}),this.bind("t right",()=>{Za.A.publish(new xs.Io({direction:xs.xL.Right,updateUrl:H}))}),this.bind("t c",()=>{Za.A.publish(new xs.Bt)}),this.bind("t v",()=>{Za.A.publish(new xs.VZ({updateUrl:H}))})}setupDashboardBindings(H){this.bind("mod+o",()=>{H.graphTooltip=(H.graphTooltip+1)%3,H.events.publish(new ei.Tq),H.startRefresh()}),this.bind("mod+s",()=>{H.meta.canSave&&Za.A.publish(new xs.S8({component:uv.$,props:{dashboard:H}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",Y=>{if(H.canEditPanelById(Y)){const oe=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:oe?null:Y})}}),this.bindWithPanelId("v",Y=>{const oe=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:oe?null:Y})}),this.bindWithPanelId("p l",Y=>{const oe=H.getPanelById(Y),pe={...oe.options};pe.legend.showLegend?pe.legend.showLegend=!1:pe.legend.showLegend=!0,oe.updateOptions(pe)}),this.bindWithPanelId("i",Y=>{this.locationService.partial({inspect:Y})}),Ha.TP.hasAccessToExplore()&&this.bindWithPanelId("p x",async Y=>{const oe=H.getPanelById(Y),pe=await(0,dv.Xe)({queries:oe.targets,dsRef:oe.datasource,scopedVars:oe.scopedVars,timeRange:(0,fo.jG)().timeRange()});if(pe){const ge=m.I.stripBaseFromUrl(pe);ge&&this.locationService.push(ge)}}),this.bindWithPanelId("p r",Y=>{H.canEditPanelById(Y)&&!(H.panelInView||H.panelInEdit)&&Za.A.publish(new xs.Vz(Y))}),this.bindWithPanelId("p d",Y=>{if(H.canEditPanelById(Y)){const oe=H.getPanelInfoById(Y).index;H.duplicatePanel(H.panels[oe])}}),this.bindWithPanelId("p s",Y=>{const oe=H.getPanelInfoById(Y);Za.A.publish(new xs.S8({component:hv.Zy,props:{dashboard:H,panel:oe?.panel}}))}),this.bind("d l",()=>{H.toggleLegendsForAll()}),this.bind("d x",()=>{H.toggleExemplarsForAll()}),this.bind("d shift+c",()=>{H.collapseRows()}),this.bind("d shift+e",()=>{H.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{H.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const oe=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+oe})}}var _u=e(60017),gv=e(25157);const mv=(0,o.lazy)(()=>e.e(192).then(e.bind(e,48278)));function vv(){const z=(0,ra.Wd)(Lr.hY),H=ee.$.unifiedAlertingEnabled;Cn.TP.hasPermission(z.read)&&(0,gv.fP)({show:()=>H,component:({dashboard:Y})=>H?(0,j.jsx)(o.Suspense,{fallback:null,children:Y&&(0,j.jsx)(mv,{dashboardUid:Y.uid})},"alert-rules-button"):null,index:-2})}var yv=e(69874);function xv(z){return(0,j.jsx)(Ev,{...z})}const Ev=(0,o.lazy)(async()=>{const{EmbeddedDashboard:z}=await e.e(2859).then(e.bind(e,72340));return{default:z}});var Qu=e(80011);class ku{constructor(H,Y){this.state={name:H,type:"time_macro"},this._sceneObject=Y.getRoot()}getValue(){const H=q.jh.getTimeRange(this._sceneObject);return this.state.name==="__from"?H.state.value.from.valueOf():H.state.value.to.valueOf()}getValueText(){const H=q.jh.getTimeRange(this._sceneObject);return this.state.name==="__from"?(0,Qu.LE)(H.state.value.from,{timeZone:H.getTimeZone()}):(0,Qu.LE)(H.state.value.to,{timeZone:H.getTimeZone()})}}var Pv=e(4405),Dv=e(65556),jl=e(35392),bv=e(1005),Cv=e(96222),ss=e(38619),ni=e(51388),Yu=e(39741),qc=e(97534),hr=e(46383);const Tv=z=>H=>new qo.c(Y=>{let oe=[],pe=!0;const ge=()=>{Y.next(oe),oe=[]},ye=z.subscribe({next:we=>{pe=we,pe&&oe.length&&ge()}}),Ie=H.subscribe({next(we){pe?oe.length?ge():Y.next([we]):oe.push(we)},error(we){Y.error(we)},complete(){Y.complete()}});return()=>{Ie.unsubscribe(),ye.unsubscribe()}});var Mv=(z=>(z[z.Error=0]="Error",z[z.NewValuesSameSchema=1]="NewValuesSameSchema",z[z.ChangedSchema=2]="ChangedSchema",z))(Mv||{});const Ov=z=>({values:z.reduce((H,{values:Y})=>{for(let oe=0;oe<Y.length;oe++){H[oe]||(H[oe]=[]);for(let pe=0;pe<Y[oe].length;pe++)H[oe].push(Y[oe][pe])}return H},[]),type:1}),Ju=(z,H)=>z.filter(Y=>Y.type===H);class Sv{constructor(H){this.deps=H,this.stream=new Yu.m(1),this.shutdown=()=>{this.stream.complete(),this.liveEventsSubscription.unsubscribe(),this.deps.onShutdown()},this.shutdownIfNoSubscribers=()=>{this.stream.observed||this.shutdown()},this.onError=Y=>{console.log("LiveQuery [error]",{err:Y},this.deps.channelId),this.stream.next({type:0,error:(0,qc.u)(Y)}),this.shutdown()},this.onComplete=()=>{console.log("LiveQuery [complete]",this.deps.channelId),this.shutdown()},this.onNext=Y=>{if((0,ss.Z7)(Y)){this.process(Y.message);return}const oe=(0,ss.ew)(Y);if(oe&&Y.error){const pe=(0,qc.u)(Y.error);this.stream.next({type:0,error:{...pe,message:`Streaming channel error: ${pe.message}`}})}oe&&(Y.state===ss.ZF.Connected||Y.state===ss.ZF.Pending)&&Y.message&&this.process(Y.message)},this.process=Y=>{this.frameBuffer.push(Y).schemaChanged?this.stream.next({type:2}):this.stream.next({type:1,values:this.frameBuffer.getValuesFromLastPacket()})},this.resizeBuffer=Y=>{Y&&this.frameBuffer.needsResizing(Y)&&this.frameBuffer.resize(Y)},this.prepareInternalStreamForNewSubscription=Y=>{!this.frameBuffer.hasAtLeastOnePacket()&&Y.frame&&this.process(Y.frame)},this.clearShutdownTimeout=()=>{this.shutdownTimeoutId&&(clearTimeout(this.shutdownTimeoutId),this.shutdownTimeoutId=void 0)},this.get=(Y,oe)=>{this.clearShutdownTimeout();const pe=(0,ni.m8)(Y.buffer);this.resizeBuffer(pe),this.prepareInternalStreamForNewSubscription(Y);const ge=Y?.buffer?.action===ni.Kh.Replace,ye=Y.filter?.fields,we=ye?.length?({name:it})=>ye.includes(it):void 0;let ke;const et=(it,vt)=>(ke=we?this.frameBuffer.getMatchingFieldIndexes(we):void 0,ge?vt?{key:oe,state:_t.Gu.Error,data:[{type:hr._w.FullFrame,frame:this.frameBuffer.serialize(we,pe,{maxLength:0})}],error:vt}:it.length?{key:oe,state:_t.Gu.Streaming,data:[{type:hr._w.FullFrame,frame:this.frameBuffer.serialize(we,pe,{maxLength:this.frameBuffer.packetInfo.length})}],error:vt}:(console.warn(`expected to find at least one non error message ${it.map(({type:Lt})=>Lt)}`),{key:oe,state:_t.Gu.Streaming,data:[{type:hr._w.FullFrame,frame:this.frameBuffer.serialize(we,pe,{maxLength:0})}],error:vt}):{key:oe,state:vt?_t.Gu.Error:_t.Gu.Streaming,data:[{type:hr._w.FullFrame,frame:this.frameBuffer.serialize(we,pe)}],error:vt}),tt=it=>{const vt=it.length?it[it.length-1]:void 0,Lt=ge&&vt?vt.values:Ov(it).values,Xt=ke?Lt.filter((fn,jn)=>ke?.includes(jn)):Lt;return{key:oe,state:_t.Gu.Streaming,data:[{type:hr._w.NewValuesSameSchema,values:Xt}]}};let dt=!0;const ft=this.stream.pipe(Tv(this.deps.subscriberReadiness),(0,Dt.T)((it,vt)=>{const Lt=Ju(it,0),Xt=Lt.length?Lt[Lt.length-1].error:void 0;if(dt)return dt=!1,et(it,Xt);if(Lt.length)return et(it,Xt);if(it.some(un=>un.type===2))return et(it,void 0);const jn=Ju(it,1);return jn.length!==it.length&&console.warn(`unsupported message type ${it.map(({type:un})=>un)}`),tt(jn)}));return new qo.c(it=>{const vt=ft.subscribe({next:Lt=>{it.next(Lt)},error:Lt=>{it.error(Lt)},complete:()=>{it.complete()}});return()=>{vt.unsubscribe(),this.stream.observed||(this.clearShutdownTimeout(),this.shutdownTimeoutId=setTimeout(this.shutdownIfNoSubscribers,this.deps.shutdownDelayInMs))}})},this.frameBuffer=ni.k9.empty(H.defaultStreamingFrameOptions),this.liveEventsSubscription=H.liveEventsObservable.subscribe({error:this.onError,complete:this.onComplete,next:this.onNext})}}var oc=e(13752);class Iv{constructor(H,Y){this.opened=Date.now(),this.stream=new oc.B,this.disconnectIfNoListeners=()=>{this.stream.observers.length===0&&this.disconnect()},this.publish=oe=>this.subscription?.publish(oe),this.id=H,this.addr=Y,this.currentStatus={type:ss.o4.Status,id:H,timestamp:this.opened,state:ss.ZF.Pending},(0,ss.aj)(Y)||(this.currentStatus.state=ss.ZF.Invalid,this.currentStatus.error="invalid channel address")}initalize(){if(this.initalized)throw new Error("Channel already initalized: "+this.id);this.initalized=!0,this.subscription.on("publication",H=>{try{H.data&&(H.data.schema&&(this.lastMessageWithSchema=H.data),this.stream.next({type:ss.o4.Message,message:H.data})),this.currentStatus.error&&(this.currentStatus.timestamp=Date.now(),delete this.currentStatus.error,this.sendStatus())}catch(Y){console.log("publish error",this.addr,Y),this.currentStatus.error=Y,this.currentStatus.timestamp=Date.now(),this.sendStatus()}}).on("error",H=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.error=H.error.message,this.sendStatus()}).on("subscribed",H=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.state=ss.ZF.Connected,delete this.currentStatus.error,H.data?.schema&&(this.lastMessageWithSchema=H.data),this.sendStatus(H.data)}).on("unsubscribed",()=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.state=ss.ZF.Disconnected,this.sendStatus()}).on("subscribing",()=>{this.currentStatus.timestamp=Date.now(),this.currentStatus.state=ss.ZF.Connecting,this.sendStatus()}).on("join",H=>{this.stream.next({type:ss.o4.Join,user:H.info.user})}).on("leave",H=>{this.stream.next({type:ss.o4.Leave,user:H.info.user})})}sendStatus(H){const Y={...this.currentStatus};H&&(Y.message=H),this.stream.next(Y)}getStream(){return new qo.c(H=>{const Y={...this.currentStatus};this.lastMessageWithSchema?.schema&&(Y.message={schema:this.lastMessageWithSchema?.schema}),H.next({...this.currentStatus,message:this.lastMessageWithSchema});const oe=this.stream.subscribe(H);return()=>{oe.unsubscribe(),this.stream.observers.length===0&&setTimeout(this.disconnectIfNoListeners,250)}})}async getPresence(){return this.subscription?this.subscription.presence().then(H=>({users:Object.keys(H.clients)})):Promise.reject("not subscribed")}disconnect(){this.currentStatus.state=ss.ZF.Shutdown,this.currentStatus.timestamp=Date.now(),this.subscription&&(this.subscription.unsubscribe(),this.subscription.removeAllListeners(),this.subscription=void 0),this.stream.complete(),this.stream.next({...this.currentStatus}),this.stream.complete(),this.shutdownCallback&&this.shutdownCallback()}shutdownWithError(H){this.currentStatus.error=H,this.sendStatus(),this.disconnect()}}function SP(z,H,Y){return{id:H,opened:Date.now(),addr:Y,getStream:()=>of({type:LiveChannelEventType.Status,id:H,timestamp:Date.now(),state:LiveChannelConnectionState.Invalid,error:z}),disconnect:()=>{}}}const Rv={maxLength:100,maxDelta:1/0,action:ni.Kh.Append},Av=5e3;class jv{constructor(H){this.deps=H,this.open=new Map,this.liveDataStreamByChannelId={},this.onConnect=pe=>{this.connectionState.next(!0)},this.onDisconnect=pe=>{this.connectionState.next(!1)},this.onServerSideMessage=pe=>{console.log("Publication from server-side channel",pe)},this.getConnectionState=()=>this.connectionState.asObservable(),this.getStream=pe=>this.getChannel(pe).getStream(),this.createSubscriptionKey=pe=>pe.key??`xstr/${Lv++}`,this.getLiveDataStream=pe=>{const ge=(0,ss.Qp)(pe.addr),ye=this.liveDataStreamByChannelId[ge];if(ye)return ye;const Ie=this.getChannel(pe.addr);return this.liveDataStreamByChannelId[ge]=new Sv({channelId:ge,onShutdown:()=>{delete this.liveDataStreamByChannelId[ge]},liveEventsObservable:Ie.getStream(),subscriberReadiness:this.dataStreamSubscriberReadiness,defaultStreamingFrameOptions:Rv,shutdownDelayInMs:Av}),this.liveDataStreamByChannelId[ge]},this.getDataStream=pe=>{const ge=this.createSubscriptionKey(pe);return this.getLiveDataStream(pe).get(pe,ge)},this.getQueryData=async pe=>(this.centrifuge.state!==jl.Uw.Connected&&await this.connectionBlocker,this.centrifuge.rpc("grafana.query",pe.body)),this.getPresence=pe=>this.getChannel(pe).getPresence(),this.publish=async(pe,ge,ye)=>this.getChannel(pe).publish(ge),this.dataStreamSubscriberReadiness=H.dataStreamSubscriberReadiness.pipe((0,bv.u)(),(0,Cv.Z)(!0));let Y=`${H.appUrl.replace(/^http/,"ws")}/api/live/ws`;const oe=H.grafanaAuthToken;oe!==null&&oe!==""&&(Y+="?auth_token="+oe),this.centrifuge=new jl.Ft(Y,{timeout:3e4}),H.liveEnabled&&H.orgRole!==""&&this.centrifuge.connect(),this.connectionState=new bl.t(this.centrifuge.state===jl.Uw.Connected),this.connectionBlocker=new Promise(pe=>{if(this.centrifuge.state===jl.Uw.Connected)return pe();const ge=()=>{pe(),this.centrifuge.removeListener("connected",ge)};this.centrifuge.addListener("connected",ge)}),this.centrifuge.on("connected",this.onConnect),this.centrifuge.on("connecting",this.onDisconnect),this.centrifuge.on("disconnected",this.onDisconnect),this.centrifuge.on("publication",this.onServerSideMessage)}getChannel(H){const Y=`${this.deps.orgId}/${H.scope}/${H.namespace}/${H.path}`;let oe=this.open.get(Y);return oe!=null||(oe=new Iv(Y,H),oe.currentStatus.state===ss.ZF.Invalid)||(oe.shutdownCallback=()=>{this.open.delete(Y),this.centrifuge.removeSubscription(this.centrifuge.getSubscription(Y))},this.open.set(Y,oe),this.initChannel(oe).catch(pe=>{oe&&(oe.currentStatus.state=ss.ZF.Invalid,oe.shutdownWithError(pe)),this.open.delete(Y)})),oe}async initChannel(H){this.centrifuge.state!==jl.Uw.Connected&&await this.connectionBlocker;const Y=this.centrifuge.newSubscription(H.id,{data:H.addr.data});H.subscription=Y,H.initalize(),Y.subscribe()}}let Lv=0;class Bv{constructor(H){this.deps=H,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=Y=>{let oe;const pe=ge=>{const ye=ge.data[0];if(!oe&&!(0,hr.ot)(ye,hr._w.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${ye?.type}`);return}switch(ye.type){case hr._w.FullFrame:{oe=ni.k9.deserialize(ye.frame);return}case hr._w.NewValuesSameSchema:{oe.pushNewValues(ye.values);return}}};return this.deps.centrifugeSrv.getDataStream(Y).pipe((0,Dt.T)(ge=>(pe(ge),{...ge,data:[oe??ni.k9.empty()]})))},this.getStream=Y=>this.deps.centrifugeSrv.getStream(Y),this.publish=async(Y,oe,pe)=>pe?.useSocket?this.deps.centrifugeSrv.publish(Y,oe):this.deps.backendSrv.post("api/live/publish",{channel:(0,ss.Qp)(Y),data:oe}),this.getPresence=Y=>this.deps.centrifugeSrv.getPresence(Y)}}function Uv(){const z={appUrl:`${window.location.origin}${ee.$.appSubUrl}`,orgId:Cn.TP.user.orgId,orgRole:Cn.TP.user.orgRole,liveEnabled:ee.$.liveEnabled,dataStreamSubscriberReadiness:Pv.a.ok.asObservable(),grafanaAuthToken:(0,Dv.r)()},H=new jv(z);(0,Bc.S8)(new Bv({centrifugeSrv:H,backendSrv:(0,x.AI)()}))}function IP(){return getGrafanaLiveSrv()}var Wv=e(88642),Nv=e(35307),ai=e(28998),Xu=e(8001),ic=e(31595),Zu=e(4745),qu=e(96016),Kv=e(16817),Fv=e(95027),wv=e(22914);const lc=new Map,RP=()=>{lc.clear()};async function ed(z=[]){const H=z.map(Y=>(lc.has(Y.id)||lc.set(Y.id,Vv(Y)),lc.get(Y.id)));await Promise.all(H)}async function Vv(z){try{const H=await(0,Fv.x)(z.id,{showErrorAlert:Cn.TP.user.orgRole!==""});await(0,wv.u)(H)}catch(H){console.error(`[Plugins] Failed to preload plugin: ${z.path} (version: ${z.version})`,H)}}var ls=e(3260);function cc(z=[]){const{loading:H}=(0,Kv.A)(async()=>{const Y=(0,ls.uS)(z);Y.length&&await ed(Y)});return{isLoading:H}}var td=e(9453);function $v(z){const H=(0,Pl.ZV)(),Y=(0,Ur.A)(H.asObservable()),oe=(0,ic.Q)(),{isLoading:pe}=cc((0,ls.Uy)(z));return(0,o.useMemo)(()=>{const ge=(0,ls.V2)()&&oe;if(pe)return{isLoading:!0,component:null};if(!Y?.[z])return{isLoading:!1,component:null};const ye=Y[z],Ie=qu.R.child({title:ye.title,description:ye.description??"",pluginId:ye.pluginId});return ge&&(0,td.xM)(z,oe)?(Ie.error(Zu.ij),{isLoading:!1,component:null}):{isLoading:!1,component:(0,ls.nv)({pluginId:ye.pluginId,extensionTitle:ye.title,Component:ye.component,log:Ie})}},[z,oe,Y,pe])}function nd({extensionPointId:z,isLoadingAppPlugins:H,pluginContext:Y}){const oe=!!Y,pe=Y?.meta.module.startsWith("core:")??!1,ge=Y?.meta.id??"",ye=qu.R.child({pluginId:ge,extensionPointId:z});return(0,ls.V2)()&&!(0,td.Fe)({extensionPointId:z,pluginId:ge,isInsidePlugin:oe,isCoreGrafanaPlugin:pe,log:ye})?{result:{isLoading:!1},pointLog:ye}:(0,ls.V2)()&&!pe&&Y&&(0,td.PW)(z,Y)?(ye.error(Zu.Ri),{result:{isLoading:!1},pointLog:ye}):H?{result:{isLoading:!0},pointLog:ye}:{result:null,pointLog:ye}}function zv({limitPerPlugin:z,extensionPointId:H}){const Y=(0,Pl.TX)(),oe=(0,Ur.A)(Y.asObservable()),pe=(0,ic.Q)(),{isLoading:ge}=cc((0,ls.Ce)(H));return(0,o.useMemo)(()=>{const{result:ye}=nd({extensionPointId:H,pluginContext:pe,isLoadingAppPlugins:ge});if(ye)return{isLoading:ye.isLoading,components:[]};const Ie=[],we={};for(const ke of oe?.[H]??[]){const{pluginId:et}=ke;if(z&&we[et]>=z)continue;we[et]===void 0&&(we[et]=0);const tt=Gv(ke,H);Ie.push(tt),we[et]+=1}return{isLoading:!1,components:Ie}},[H,z,pe,oe,ge])}function Gv(z,H){const{component:Y,...oe}=z;function pe(ge){return(0,j.jsx)(Y,{...ge})}return pe.displayName=Y.displayName,pe.defaultProps=Y.defaultProps,pe.propTypes=Y.propTypes,pe.contextTypes=Y.contextTypes,pe.meta={pluginId:oe.pluginId,title:oe.title??"",description:oe.description??"",id:(0,ls.yt)(oe.pluginId,H,oe.title),type:Ml.u6.component},pe}function Hv({limitPerPlugin:z,extensionPointId:H}){const Y=(0,Pl.ov)(),oe=(0,Ur.A)(Y.asObservable()),pe=(0,ic.Q)(),ge=(0,ls.Ce)(H),{isLoading:ye}=cc(ge);return(0,o.useMemo)(()=>{const{result:Ie}=nd({extensionPointId:H,pluginContext:pe,isLoadingAppPlugins:ye});if(Ie)return{isLoading:Ie.isLoading,functions:[]};const we=[],ke={};for(const et of oe?.[H]??[]){const{pluginId:tt}=et;z&&ke[tt]>=z||(ke[tt]===void 0&&(ke[tt]=0),we.push({id:(0,ls.yt)(tt,H,et.title),type:Ml.u6.function,title:et.title,description:et.description??"",pluginId:tt,fn:et.fn}),ke[tt]+=1)}return{isLoading:!1,functions:we}},[H,z,pe,oe,ye])}function _v({limitPerPlugin:z,extensionPointId:H,context:Y}){const oe=(0,Pl.OG)(),pe=(0,ic.Q)(),ge=(0,Ur.A)(oe.asObservable()),{isLoading:ye}=cc((0,ls.Ce)(H));return(0,o.useMemo)(()=>{const{result:Ie,pointLog:we}=nd({extensionPointId:H,pluginContext:pe,isLoadingAppPlugins:ye});if(Ie)return{isLoading:Ie.isLoading,links:[]};const ke=Y?(0,ls.$Y)(Y):{},et=[],tt={};for(const dt of ge?.[H]??[]){const{pluginId:ft}=dt,it=we.child({path:dt.path??"",title:dt.title,description:dt.description??"",onClick:typeof dt.onClick});if(z&&tt[ft]>=z){it.debug(`Skipping link extension from plugin "${ft}". Reason: Limit reached.`);continue}tt[ft]===void 0&&(tt[ft]=0);const vt=(0,ls.hS)(ft,dt,it,ke);if(dt.configure&&vt===void 0)continue;const Lt=vt?.path||dt.path,Xt={id:(0,ls.yt)(ft,H,dt.title),type:Ml.u6.link,pluginId:ft,onClick:(0,ls.dx)(ft,H,dt,it,ke),icon:vt?.icon||dt.icon,title:vt?.title||dt.title,description:vt?.description||dt.description||"",path:(0,J.isString)(Lt)?(0,ls.YS)(ft,Lt,H):void 0,category:vt?.category||dt.category};et.push(Xt),tt[ft]+=1}return{isLoading:!1,links:et}},[Y,H,z,ge,pe,ye])}var eh=e(92391),Qv=e(57532),th=e(17548),kv=e(96215),Yv=e(39050),ad=e(71393);class Jv{constructor(){this.subject=new Yu.m(1)}get(){return this.subject.asObservable()}run(H){const{queries:Y,timezone:oe,datasource:pe,panelId:ge,app:ye,dashboardUID:Ie,timeRange:we,timeInfo:ke,cacheTimeout:et,queryCachingTTL:tt,maxDataPoints:dt,scopedVars:ft,minInterval:it}=H;this.subscription&&this.subscription.unsubscribe();const vt={app:ye??nc.Jk.Unknown,requestId:(0,kv.S)(),timezone:oe,panelId:ge,dashboardUID:Ie,range:we,timeInfo:ke,interval:"",intervalMs:0,targets:(0,J.cloneDeep)(Y),maxDataPoints:dt,scopedVars:ft||{},cacheTimeout:et,queryCachingTTL:tt,startTime:Date.now()};vt.rangeRaw=we.raw,(0,ms.H)(Xv(pe,vt.scopedVars)).pipe((0,Qv.$)()).subscribe({next:Lt=>{vt.targets=vt.targets.map(jn=>(jn.datasource||(jn.datasource=Lt.getRef()),jn));const Xt=it?(0,ct.w)().replace(it,vt.scopedVars):Lt.interval,fn=th.calculateInterval(we,dt,Xt);vt.scopedVars=Object.assign({},vt.scopedVars,{__interval:{text:fn.interval,value:fn.interval},__interval_ms:{text:fn.intervalMs.toString(),value:fn.intervalMs}}),vt.interval=fn.interval,vt.intervalMs=fn.intervalMs,this.subscription=(0,ad.BN)(Lt,vt).subscribe({next:jn=>{const un=(0,Cr.N$)(jn,this.lastResult);this.lastResult=(0,Yv.B)(un,this.lastResult),this.subject.next(this.lastResult)}})},error:Lt=>console.error("PanelQueryRunner Error",Lt)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===_t.Gu.Loading&&this.subject.next({...this.lastResult,state:_t.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function Xv(z,H){return z&&"query"in z?z:(0,ai.tR)().get(z,H)}var nh=e(22429);function Zv(){window.grafanaRuntime={getDashboardSaveModel:()=>{const z=(0,nh.UA)().getCurrent();if(z)return z.getSaveModelCloneOld()},getDashboardTimeRange:()=>{const z=(0,fo.jG)().timeRange();return{from:z.from.valueOf(),to:z.to.valueOf(),raw:z.raw}},getPanelData:()=>{const z=(0,nh.UA)().getCurrent();if(z)return z.panels.reduce((H,Y)=>(H[Y.id]=Y.getQueryRunner().getLastResult(),H),{})}}}var qv=e(35886),Ll=e(54742),$n=e(99305),ah=e(48480),ey=e(99584),fr=e(17752);function sh(z){return z.extended&&"infoText"in z.extended?z.extended:null}function rh(z){return z.extended&&"dataSourceTypes"in z.extended?z.extended:null}function sd(z){return z.extended&&"dataSource"in z.extended?z.extended:null}var Ma=e(93612),Bl=e(48421);const ty=(z,H)=>{const{rootStateKey:Y}=H.variable;if(!Y)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:sh(fr.nS)};const{editor:oe}=(0,Ma.nx)(Y,z);return{extended:sh(oe)}},ny={changeVariableDatasource:Bl.Iv},ay=(0,It.connect)(ty,ny);class sy extends o.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=H=>{this.props.changeVariableDatasource((0,$n.jX)(this.props.variable),(0,ah.p$)(H))}}componentDidMount(){const{rootStateKey:H}=this.props.variable;if(!H){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:H,extended:Y}=this.props;return(0,j.jsx)(ey.Q,{datasource:H.datasource??void 0,onDataSourceChange:this.onDatasourceChanged,infoText:Y?.infoText,datasourceSupported:H.datasource!==void 0})}}const ry=ay(sy);var oh=e(61875),rd=e(76671);const ih=90,lh=({datasource:z,onChange:H,disabled:Y,filterKey:oe,allFilters:pe})=>{const ge=()=>ch(z,oe,pe),ye=()=>iy(z,oe,pe),Ie=(0,j.jsx)("span",{className:"gf-form-label query-part","aria-label":(0,d.t)("variables.ad-hoc-filter-key.plus-segment.aria-label-add-filter","Add Filter"),children:(0,j.jsx)(Sa.I,{name:"plus"})});return oe===null?(0,j.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper",children:(0,j.jsx)(rd.s,{disabled:Y,className:"query-segment-key",Component:Ie,value:oe,onChange:H,loadOptions:ge,inputMinWidth:ih})}):(0,j.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper",children:(0,j.jsx)(rd.s,{disabled:Y,className:"query-segment-key",value:oe,onChange:H,loadOptions:ye,inputMinWidth:ih})})},dc="-- remove filter --",oy={label:dc,value:dc},ch=async(z,H,Y)=>{const oe=await(0,ai.tR)().get(z);if(!oe||!oe.getTagKeys)return[];const pe=Y.filter(Ie=>Ie.key!==H),ge=await oe.getTagKeys({filters:pe});return(Array.isArray(ge)?ge:ge.data).map(Ie=>({label:Ie.text,value:Ie.text}))},iy=async(z,H,Y)=>{const oe=await ch(z,H,Y);return[oy,...oe]},ly=({datasource:z,disabled:H,onChange:Y,filterKey:oe,filterValue:pe,placeHolder:ge,allFilters:ye})=>{const Ie=(0,$t.of)(dy),we=()=>cy(z,oe,ye);return(0,j.jsx)("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper",children:(0,j.jsx)(rd.s,{className:Ie.segment,disabled:H,placeholder:ge,value:pe,onChange:Y,loadOptions:we})})},cy=async(z,H,Y)=>{const oe=await(0,ai.tR)().get(z);if(!oe||!oe.getTagValues)return[];const pe=(0,fo.jG)().timeRange(),ge=Y.filter(we=>we.key!==H),ye=await oe.getTagValues({key:H,filters:ge,timeRange:pe});return(Array.isArray(ye)?ye:ye.data).map(we=>({label:we.text,value:we.text}))};function dy(){return{segment:(0,st.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"500px"})}}const uy=["=","!=","<",">","=~","!~"].map(z=>({label:z,value:z})),hy=({value:z,disabled:H,onChange:Y})=>(0,j.jsx)(oh.Y,{className:"query-segment-operator",value:z,disabled:H,options:uy,onChange:Y}),dh=({datasource:z,filter:{key:H,operator:Y,value:oe},onKeyChange:pe,onOperatorChange:ge,onValueChange:ye,placeHolder:Ie,allFilters:we,disabled:ke})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(lh,{disabled:ke,datasource:z,filterKey:H,onChange:pe,allFilters:we}),(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)(hy,{disabled:ke,value:Y,onChange:ge})}),(0,j.jsx)(ly,{disabled:ke,datasource:z,filterKey:H,filterValue:oe,allFilters:we,onChange:ye,placeHolder:Ie})]}),fy=({datasource:z,appendBefore:H,onCompleted:Y,allFilters:oe})=>{const[pe,ge]=(0,o.useState)(null),[ye,Ie]=(0,o.useState)("="),we=(0,o.useCallback)(tt=>{if(tt.value!==dc){ge(tt.value??"");return}ge(null)},[ge]),ke=(0,o.useCallback)(tt=>Ie(tt.value??""),[Ie]),et=(0,o.useCallback)(tt=>{Y({value:tt.value??"",operator:ye,key:pe}),ge(null),Ie("=")},[Y,ye,pe]);return pe===null?(0,j.jsx)(lh,{datasource:z,filterKey:pe,onChange:we,allFilters:oe}):(0,j.jsxs)(o.Fragment,{children:[H,(0,j.jsx)(dh,{datasource:z,filter:{key:pe,value:"",operator:ye},placeHolder:(0,d.t)("variable.adhoc.placeholder","Select value"),onKeyChange:we,onOperatorChange:ke,onValueChange:et,allFilters:oe})]},"filter-builder")},uh=({label:z})=>(0,j.jsx)("div",{className:"gf-form",children:(0,j.jsx)("span",{className:"gf-form-label query-keyword",children:z})});class py extends o.PureComponent{constructor(){super(...arguments),this.connectorLabel=(0,d.t)("variables.ad-hoc-filter.label-and","AND"),this.onChange=(H,Y)=>oe=>{const{filters:pe}=this.props,{value:ge}=oe;return oe.value===dc?this.props.removeFilter(H):this.props.changeFilter(H,{...pe[H],[Y]:ge})},this.appendFilterToVariable=H=>{this.props.addFilter(H)}}render(){const{filters:H,disabled:Y}=this.props;return(0,j.jsxs)("div",{className:"gf-form-inline",children:[this.renderFilters(H,Y),!Y&&(0,j.jsx)(fy,{datasource:this.props.datasource,appendBefore:H.length>0?(0,j.jsx)(uh,{label:this.connectorLabel}):null,onCompleted:this.appendFilterToVariable,allFilters:this.getAllFilters()})]})}getAllFilters(){return this.props.baseFilters?this.props.baseFilters.concat(this.props.filters):this.props.filters}renderFilters(H,Y){return H.length===0&&Y?(0,j.jsx)(oh.Y,{disabled:Y,value:"No filters",options:[],onChange:()=>{}}):H.reduce((oe,pe,ge)=>(oe.length>0&&oe.push((0,j.jsx)(uh,{label:this.connectorLabel},`condition-${ge}`)),oe.push(this.renderFilterSegments(pe,ge,Y)),oe),[])}renderFilterSegments(H,Y,oe){return(0,j.jsx)(o.Fragment,{children:(0,j.jsx)(dh,{disabled:oe,datasource:this.props.datasource,filter:H,onKeyChange:this.onChange(Y,"key"),onOperatorChange:this.onChange(Y,"operator"),onValueChange:this.onChange(Y,"value"),allFilters:this.getAllFilters()})},`filter-${Y}`)}}const gy={addFilter:Bl.U2,removeFilter:Bl.VT,changeFilter:Bl.$u},my=(0,It.connect)(null,gy);class vy extends o.PureComponent{constructor(){super(...arguments),this.addFilter=H=>{this.props.addFilter((0,$n.jX)(this.props.variable),H)},this.removeFilter=H=>{this.props.removeFilter((0,$n.jX)(this.props.variable),H)},this.changeFilter=(H,Y)=>{this.props.changeFilter((0,$n.jX)(this.props.variable),{index:H,filter:Y})}}render(){const{filters:H,datasource:Y,baseFilters:oe}=this.props.variable;return(0,j.jsx)(py,{datasource:Y,filters:H,baseFilters:oe,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const hh=my(vy);hh.displayName="AdHocPicker";var fh=e(25206);const yy=z=>z.map(H=>Dy(H).map(Ey).join("|")),xy=z=>{if((0,J.isArray)(z))return z.map(ph).filter(by);const H=ph(z);return H===null?[]:[H]};function Ey(z){return z==null?"":/\|/g[Symbol.replace](z,"__gfp__")}function Py(z){return z==null?"":/__gfp__/g[Symbol.replace](z,"|")}function Dy(z){return[z.key,z.operator,z.value]}function ph(z){if(!(0,J.isString)(z)||z.length===0)return null;const H=z.split("|").map(Py);return{key:H[0],operator:H[1],value:H[2]}}function by(z){return z!==null&&(0,J.isString)(z.value)}const gh=async()=>{},Cy=()=>({id:"adhoc",description:(0,d.t)("variables.create-ad-hoc-variable-adapter.description.add-keyvalue-filters-on-the-fly","Add key/value filters on the fly."),name:"Ad hoc filters",initialState:fh.MK,reducer:fh.AA,picker:hh,editor:ry,dependsOn:()=>!1,setValue:gh,setValueFromUrl:async(z,H)=>{const Y=xy(H);await(0,$a.JD)((0,Bl.D4)((0,$n.jX)(z),Y))},updateOptions:gh,getSaveModel:z=>{const{index:H,id:Y,state:oe,global:pe,rootStateKey:ge,...ye}=(0,J.cloneDeep)(z);return ye},getValueForUrl:z=>{const H=z?.filters??[];return yy(H)}});var od=e(14644),Ty=e(8135),hs=e(8921),cs=e(67933),mh=e(13288),My=e(44240),uc=e(16126),Oy=e(38975),Sy=e(67791),Iy=e(66847),Ry=e(69850),Ay=e(24726),qa=e(39167),Ua=e(74887),pr=e(65307),po=e(7389),Ul=e(96120),si=e(88813);const jy={...si.Vg,type:"query",datasource:null,query:"",regex:"",sort:po.ZG.disabled,refresh:po.CO.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},Ly=(z,H)=>{if(H===po.ZG.disabled)return z;const Y=Math.ceil(H/2),oe=H%2===0;return Y===1?z=(0,J.sortBy)(z,"text"):Y===2?z=(0,J.sortBy)(z,pe=>{if(!pe.text)return-1;const ge=pe.text.match(/.*?(\d+).*/);return!ge||ge.length<2?-1:parseInt(ge[1],10)}):Y===3?z=(0,J.sortBy)(z,pe=>(0,J.toLower)(pe.text)):Y===4&&z.sort((pe,ge)=>pe.text?ge.text?pe.text.localeCompare(ge.text,void 0,{numeric:!0}):1:-1),oe&&(z=z.reverse()),z},By=(z,H)=>{const Y=[];let oe=null;H.lastIndex=0;do oe=H.exec(z),oe&&Y.push(oe);while(H.global&&oe&&oe[0]!==""&&oe[0]!==void 0);return Y},Uy=(z,H,Y)=>{let oe,pe=[];z&&(oe=(0,bs.dO)(z));for(let ge=0;ge<Y.length;ge++){const ye=Y[ge];let Ie=ye.text===void 0||ye.text===null?ye.value:ye.text,we=ye.value===void 0||ye.value===null?ye.text:ye.value;if((0,J.isNumber)(we)&&(we=we.toString()),(0,J.isNumber)(Ie)&&(Ie=Ie.toString()),oe){const ke=By(we,oe);if(!ke.length)continue;const et=ke.find(it=>it.groups&&it.groups.value),tt=ke.find(it=>it.groups&&it.groups.text),dt=ke.find(it=>it.length>1),ft=ke.length>1&&dt;if(et||tt)we=et?.groups?.value??tt?.groups?.text,Ie=tt?.groups?.text??et?.groups?.value;else if(ft){for(let it=0;it<ke.length;it++){const vt=ke[it];pe.push({text:vt[1],value:vt[1],selected:!1})}continue}else dt&&(Ie=dt[1],we=dt[1])}pe.push({text:Ie,value:we,selected:!1})}return pe=(0,J.uniqBy)(pe,"value"),Ly(pe,H)},vh=(0,pr.Z0)({name:"templating/query",initialState:Ul.j,reducers:{updateVariableOptions:(z,H)=>{const{results:Y,templatedRegex:oe}=H.payload.data,pe=(0,Ma.Fs)(z,H.payload.id);if(pe.type!=="query")return;const{includeAll:ge,sort:ye}=pe,Ie=Uy(oe,ye,Y);ge&&Ie.unshift({text:hs.Zm,value:hs.To,selected:!1}),Ie.length||Ie.push({text:hs.ou,value:hs.Ek,isNone:!0,selected:!1}),pe.options=Ie}}}),Wy=vh.reducer,{updateVariableOptions:Ny}=vh.actions;function Ky(){return z=>z.pipe((0,Dt.T)(Fy))}function Fy(z){const H=z.series;if(!H||!H.length)return[];if($y(H))return H;const Y=(0,Cr.Bt)(H),oe=[];let pe=-1,ge=-1,ye=-1,Ie=-1;for(const we of Y)for(let ke=0;ke<we.fields.length;ke++){const et=we.fields[ke],tt=(0,ie.Ct)(et,we,H).toLowerCase();et.type===Z.PU.string&&ye===-1&&(ye=ke),tt==="text"&&et.type===Z.PU.string&&ge===-1&&(ge=ke),tt==="value"&&et.type===Z.PU.string&&pe===-1&&(pe=ke),tt==="expandable"&&(et.type===Z.PU.boolean||et.type===Z.PU.number)&&Ie===-1&&(Ie=ke)}if(ye===-1)throw new Error("Couldn't find any field of type string in the results.");for(const we of Y)for(let ke=0;ke<we.length;ke++){const et=Ie!==-1?we.fields[Ie].values[ke]:void 0,tt=we.fields[ye].values[ke],dt=ge!==-1?we.fields[ge].values[ke]:null,ft=pe!==-1?we.fields[pe].values[ke]:null;if(pe===-1&&ge===-1){oe.push({text:tt,value:tt,expandable:et});continue}if(pe===-1&&ge!==-1){oe.push({text:dt,value:dt,expandable:et});continue}if(pe!==-1&&ge===-1){oe.push({text:ft,value:ft,expandable:et});continue}oe.push({text:dt,value:ft,expandable:et})}return oe}function wy(z){return H=>H.pipe((0,Dt.T)(Y=>{const{variable:oe,dispatch:pe,getTemplatedRegexFunc:ge}=z;if(!oe.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const ye=ge(oe),Ie=(0,$n.qD)(oe,{results:Y,templatedRegex:ye});pe((0,Ua.kb)(oe.rootStateKey,Ny(Ie)))}))}function Vy(z){return H=>H.pipe((0,As.Z)(()=>{const{dispatch:Y,variable:oe,searchFilter:pe}=z;return pe?(0,Ut.of)():(0,ms.H)(Y((0,qa.kl)((0,$n.jX)(oe))))}))}function $y(z){if(!z)return!1;if(!z.length)return!0;const H=z[0];if((0,Cr.ci)(H))return!1;for(const Y in H){if(!H.hasOwnProperty(Y)||H[Y]!==null&&typeof H[Y]!="string"&&typeof H[Y]!="number")continue;const oe=Y.toLowerCase();if(oe==="text"||oe==="value")return!0}return!1}var hc=e(48592),zy=e(22592);class Gy{constructor(){this.runners=[new Hy,new _y,new Qy,new Yy]}getRunnerForDatasource(H){const Y=this.runners.find(oe=>oe.canRun(H));if(Y)return Y;throw new Error("Couldn't find a query runner that matches supplied arguments.")}isQueryRunnerAvailableForDatasource(H){return this.runners.some(Y=>Y.canRun(H))}}class Hy{constructor(){this.type=hc.Qz.Legacy}canRun(H){return(0,cs.d5)(H)}getTarget({datasource:H,variable:Y}){if((0,cs.d5)(H))return Y.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:H,variable:Y,searchFilter:oe,timeSrv:pe},ge){if(!(0,cs.d5)(H))return Wl();const ye=(0,$n.iP)(Y,oe,pe,ge.scopedVars);return(0,ms.H)(H.metricFindQuery(Y.query,ye)).pipe((0,As.Z)(Ie=>{if(!Ie||!Ie.length)return Wl();const we=Ie;return(0,Ut.of)({series:we,state:_t.Gu.Done,timeRange:ye.range})}))}}class _y{constructor(){this.type=hc.Qz.Standard}canRun(H){return(0,cs.Hf)(H)}getTarget({datasource:H,variable:Y}){if((0,cs.Hf)(H))return H.variables.toDataQuery(Y.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:H,runRequest:Y},oe){return(0,cs.Hf)(H)?H.variables.query?Y(H,oe,H.variables.query.bind(H.variables)):Y(H,oe):Wl()}}class Qy{constructor(){this.type=hc.Qz.Custom}canRun(H){return(0,cs.zs)(H)}getTarget({datasource:H,variable:Y}){if((0,cs.zs)(H))return Y.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:H,runRequest:Y},oe){return(0,cs.zs)(H)?Y(H,oe,H.variables.query.bind(H.variables)):Wl()}}const ky="variable-query";class Yy{constructor(){this.type=hc.Qz.Datasource}canRun(H){return(0,cs.X3)(H)}getTarget({datasource:H,variable:Y}){if((0,cs.X3)(H))return{...Y.query,refId:Y.query.refId??ky};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:H,runRequest:Y},oe){return(0,cs.X3)(H)?Y(H,oe):Wl()}}function Wl(){return(0,Ut.of)({state:_t.Gu.Done,series:[],timeRange:(0,zy.E2)()})}class Jy{constructor(H={dispatch:$a.JD,getState:$a.Gu,getVariable:Ma.dn,getTemplatedRegex:$n.u7,getTimeSrv:fo.jG,queryRunners:new Gy,runRequest:ad.BN}){this.dependencies=H,this.updateOptionsRequests=new oc.B,this.updateOptionsResults=new oc.B,this.cancelRequests=new oc.B,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(H){this.updateOptionsRequests.next(H)}getResponse(H){return this.updateOptionsResults.asObservable().pipe((0,uc.p)(Y=>Y.identifier===H))}cancelRequest(H){this.cancelRequests.next({identifier:H})}destroy(){this.subscription.unsubscribe()}onNewRequest(H){const{datasource:Y,identifier:oe,searchFilter:pe}=H;try{const{dispatch:ge,runRequest:ye,getTemplatedRegex:Ie,getVariable:we,queryRunners:ke,getTimeSrv:et,getState:tt}=this.dependencies,dt=(0,Ma.y7)(tt());this.updateOptionsResults.next({identifier:oe,state:_t.Gu.Loading});const ft=we(oe,tt());if(ft.type!=="query")return;const it=et(),vt={variable:ft,datasource:Y,searchFilter:pe,timeSrv:it,runRequest:ye};if(!ke.isQueryRunnerAvailableForDatasource(Y)){const jn=new Error("Query Runner is not available for datasource.");this.updateOptionsResults.next({identifier:oe,state:_t.Gu.Error,error:jn});return}const Lt=ke.getRunnerForDatasource(Y),Xt=Lt.getTarget({datasource:Y,variable:ft}),fn=this.getRequest(ft,H,Xt);Lt.runRequest(vt,fn).pipe((0,uc.p)(()=>{const jn=(0,Ma.y7)(tt());return dt===jn}),(0,uc.p)(jn=>jn.state===_t.Gu.Done||jn.state===_t.Gu.Error),(0,Oy.s)(1),(0,As.Z)(jn=>jn.state===_t.Gu.Error?(0,mh.$)(()=>jn.error):(0,Ut.of)(jn)),Ky(),wy({variable:ft,dispatch:ge,getTemplatedRegexFunc:Ie}),Vy({variable:ft,dispatch:ge,searchFilter:pe}),(0,Sy.Q)((0,My.h)(this.updateOptionsRequests,this.cancelRequests).pipe((0,uc.p)(jn=>{let un=!1;return jn.identifier.id===oe.id&&(un=!0,this.updateOptionsResults.next({identifier:oe,state:_t.Gu.Loading,cancelled:un})),un}))),(0,Iy.W)(jn=>jn.cancelled?(0,Ut.of)({}):(this.updateOptionsResults.next({identifier:oe,state:_t.Gu.Error,error:jn}),(0,mh.$)(()=>jn))),(0,Ry.j)(()=>{this.updateOptionsResults.next({identifier:oe,state:_t.Gu.Done})})).subscribe()}catch(ge){this.updateOptionsResults.next({identifier:oe,state:_t.Gu.Error,error:ge})}}getRequest(H,Y,oe){const{searchFilter:pe}=Y,ge={variable:{text:H.current.text,value:H.current.value}},we={...pe?{searchFilter:{text:pe,value:pe}}:{},...ge},ke=this.dependencies.getTimeSrv().timeRange();return{app:nc.Jk.Dashboard,requestId:(0,Ay.A)(),timezone:"",range:ke,interval:"",intervalMs:0,targets:[oe],scopedVars:we,startTime:Date.now()}}}let yh;function Xy(z){yh=z}function id(){return yh}const Zy=z=>{if(!qy(z))return z.name;const{current:H}=z;return Array.isArray(H.text)?H.text.join(" + "):H.text},qy=z=>Array.isArray(z?.options)||typeof z?.current=="object";var Wr=(z=>(z[z.moveUp=38]="moveUp",z[z.moveDown=40]="moveDown",z[z.select=32]="select",z[z.cancel=27]="cancel",z[z.selectAndClose=13]="selectAndClose",z))(Wr||{});class ex extends o.PureComponent{constructor(){super(...arguments),this.onKeyDown=H=>{if(Wr[H.keyCode]&&H.keyCode!==Wr.select){const Y=H.ctrlKey||H.metaKey||H.shiftKey;this.props.onNavigate(H.keyCode,Y),H.preventDefault()}},this.onChange=H=>{this.props.onChange(H.target.value)}}render(){const{value:H,id:Y,onNavigate:oe,...pe}=this.props;return(0,j.jsx)("input",{...pe,ref:ge=>{ge&&(ge.focus(),ge.setAttribute("style",`width:${Math.max(ge.width,150)}px`))},id:Y,type:"text",className:"gf-form-input",value:H??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,d.t)("variable.dropdown.placeholder","Enter variable value")})}}var tx=e(39884),nx=e(11297);const ax=({loading:z,disabled:H,onClick:Y,text:oe,onCancel:pe,id:ge})=>{const ye=(0,$t.of)(Eh),Ie=(0,o.useCallback)(we=>{we.stopPropagation(),we.preventDefault(),Y()},[Y]);return z?(0,j.jsxs)("div",{className:ye.container,"data-testid":Ga.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${oe}`),title:oe,id:ge,children:[(0,j.jsx)(xh,{text:oe}),(0,j.jsx)(tx.I,{loading:!0,onCancel:pe})]}):(0,j.jsxs)("button",{onClick:Ie,className:ye.container,"data-testid":Ga.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${oe}`),"aria-expanded":!1,"aria-controls":`options-${ge}`,id:ge,title:oe,disabled:H,children:[(0,j.jsx)(xh,{text:oe}),(0,j.jsx)(Sa.I,{"aria-hidden":!0,name:"angle-down",size:"sm"})]})},xh=({text:z})=>{const H=(0,$t.of)(Eh);return(0,j.jsx)("span",{className:H.textAndTags,children:z===hs.Zm?(0,d.t)("variable.picker.link-all","All"):z})},Eh=z=>{const H=(0,nx.$)(z);return{container:(0,st.css)({maxWidth:"500px",paddingRight:"10px",padding:z.spacing(0,1),backgroundColor:z.components.input.background,border:`1px solid ${z.components.input.borderColor}`,borderRadius:z.shape.radius.default,display:"flex",alignItems:"center",color:z.colors.text.primary,height:z.spacing(z.components.height.md),[`.${H.badge}`]:{margin:"0 5px"},"&:disabled":{backgroundColor:z.colors.action.disabledBackground,color:z.colors.action.disabledText,border:`1px solid ${z.colors.action.disabledBackground}`}}),textAndTags:(0,st.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginRight:z.spacing(.25),userSelect:"none"})}};var sx=e(45893),rx=e(70427);class ox extends o.PureComponent{constructor(){super(...arguments),this.onToggle=H=>Y=>{const oe=Y.shiftKey||Y.ctrlKey||Y.metaKey;this.handleEvent(Y),this.props.onToggle(H,oe)},this.onToggleAll=H=>{this.handleEvent(H),this.props.onToggleAll()}}handleEvent(H){H.preventDefault(),H.stopPropagation()}render(){const{multi:H,values:Y,highlightIndex:oe,selectedValues:pe,onToggle:ge,onToggleAll:ye,theme:Ie,...we}=this.props,ke=ld(Ie);return(0,j.jsx)("div",{className:ke.variableValueDropdown,children:(0,j.jsx)("div",{className:ke.variableOptionsWrapper,children:(0,j.jsxs)("ul",{className:ke.variableOptionsColumn,"aria-label":Ga.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...we,children:[this.renderMultiToggle(),Y.map((et,tt)=>this.renderOption(et,tt))]})})})}renderOption(H,Y){const{highlightIndex:oe,multi:pe,theme:ge}=this.props,ye=ld(ge),Ie=H.value===hs.To;return(0,j.jsx)("li",{children:(0,j.jsxs)("button",{"data-testid":Ga.Tp.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":H.selected,className:(0,st.cx)((0,fe.my)(ge),ye.variableOption,{[ye.highlighted]:Y===oe,[ye.variableAllOption]:Ie},ye.noStyledButton),onClick:this.onToggle(H),children:[(0,j.jsx)("span",{className:(0,st.cx)(ye.variableOptionIcon,{[ye.variableOptionIconSelected]:H.selected,[ye.hideVariableOptionIcon]:!pe})}),(0,j.jsx)("span",{"data-testid":Ga.Tp.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${H.text}`),children:Ie?(0,d.t)("variable.picker.option-all","All"):H.text})]})},`${H.value}`)}renderMultiToggle(){const{multi:H,selectedValues:Y,theme:oe,values:pe}=this.props,ge=ld(oe),ye=pe.some(we=>we.value===hs.To);if(!H)return null;const Ie=()=>(0,j.jsx)(d.x6,{i18nKey:"variable.picker.option-tooltip",children:"Clear selections"});return(0,j.jsx)(Sc.m,{content:Ie,placement:"top",children:(0,j.jsxs)("button",{className:(0,st.cx)((0,fe.my)(oe),ge.variableOption,ge.variableOptionColumnHeader,ge.noStyledButton,{[ge.noPaddingBotton]:ye}),role:"checkbox","aria-checked":Y.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":(0,d.t)("variables.variable-options.aria-label-toggle-all-values","Toggle all values"),"data-placement":"top",children:[(0,j.jsx)("span",{className:(0,st.cx)(ge.variableOptionIcon,{[ge.variableOptionIconManySelected]:Y.length>1})}),(0,j.jsxs)(d.x6,{i18nKey:"variable.picker.option-selected-values",values:{numSelected:Y.length},children:["Selected (","{{numSelected}}",")"]})]})})}}const ld=(0,Rd.N)(z=>{const H=z.isDark?sx:rx;return{hideVariableOptionIcon:(0,st.css)({display:"none"}),highlighted:(0,st.css)({backgroundColor:z.colors.action.hover}),noStyledButton:(0,st.css)({width:"100%",textAlign:"left"}),variableOption:(0,st.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px","&:hover":{backgroundColor:z.colors.action.hover}}),variableOptionColumnHeader:(0,st.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,st.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${H}) left top no-repeat`}),variableOptionIconManySelected:(0,st.css)({background:`url(${H}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,st.css)({background:`url(${H}) 0px -18px no-repeat`}),variableValueDropdown:(0,st.css)({backgroundColor:z.colors.background.primary,border:`1px solid ${z.colors.border.weak}`,borderRadius:z.shape.borderRadius(2),boxShadow:z.shadows.z2,position:"absolute",top:z.spacing(z.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:z.zIndex.typeahead}),variableOptionsColumn:(0,st.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,st.css)({display:"table",width:"100%"}),variableAllOption:(0,st.css)({borderBottom:`1px solid ${z.colors.border.weak}`,paddingBottom:z.spacing(1)}),noPaddingBotton:(0,st.css)({paddingBottom:0})}}),ix=(0,$t.cV)(ox);var lx=e(94452),Ph=e(3594),Nr=e(88681),Js=e(99598);const cx=(z,H,Y)=>async(oe,pe)=>{if(H===Wr.cancel)return await oe(fc(z));if(H===Wr.select)return oe(cd(z,Y));if(H===Wr.selectAndClose)return(0,Ma.nx)(z,pe()).optionsPicker.multi?oe(cd(z,Y)):(oe(cd(z,Y,!0)),oe(fc(z)));if(H===Wr.moveDown)return oe((0,Ua.kb)(z,(0,Js.O$)(1)));if(H===Wr.moveUp)return oe((0,Ua.kb)(z,(0,Js.O$)(-1)))},dx=(z,H="")=>async(Y,oe)=>{const{rootStateKey:pe}=z,{id:ge,queryValue:ye}=(0,Ma.nx)(pe,oe()).optionsPicker,Ie={id:ge,rootStateKey:pe,type:"query"},we=(0,Ma.dn)(Ie,oe());if(!("options"in we)||(Y((0,Ua.kb)(pe,(0,Js.S8)(H))),(0,J.trim)(ye)===(0,J.trim)(H)))return;const{query:ke,options:et}=we,tt=typeof ke=="string"?ke:ke.target;return(0,lx.E)(tt)?px(Y,oe,H,pe):Y((0,Ua.kb)(pe,(0,Js.fx)(et)))},ux=async z=>{if((0,Ph.R)(z.current))return;await Ll.B.get(z.type).setValue(z,z.current,!0)},fc=(z,H)=>async(Y,oe)=>{const pe=(0,Ma.nx)(z,oe()).optionsPicker,ge={id:pe.id,rootStateKey:z,type:"query"},ye=(0,Ma.dn)(ge,oe());if(!(0,cs.SP)(ye))return;const Ie={option:gx(pe)},we={propName:"queryValue",propValue:pe.queryValue};Y((0,Ua.kb)(z,(0,Nr.dE)((0,$n.qD)(ye,Ie)))),Y((0,Ua.kb)(z,(0,Nr.QP)((0,$n.qD)(ye,we))));const ke=(0,Ma.dn)(ge,oe());if((0,cs.SP)(ke)&&(Y((0,Ua.kb)(z,(0,Js.Fu)())),(0,$n.Lz)(ye)!==(0,$n.Lz)(ke)))return H?H(ke):await ux(ke)},hx=(z,H)=>async(Y,oe)=>{const{id:pe,rootStateKey:ge}=z,ye=(0,Ma.nx)(ge,oe()).optionsPicker;ye.id&&ye.id!==pe&&await Y(fc(ge,H));const Ie=(0,Ma.dn)(z,oe());(0,cs.SP)(Ie)&&Y((0,Ua.kb)(ge,(0,Js.MO)(Ie)))},cd=(z,H,Y=!1)=>(oe,pe)=>{const{highlightIndex:ge,options:ye}=(0,Ma.nx)(z,pe()).optionsPicker,Ie=ye[ge];oe((0,Ua.kb)(z,(0,Js.U9)({option:Ie,forceSelect:Y,clearOthers:H})))},fx=async(z,H,Y,oe)=>{try{const{id:pe}=(0,Ma.nx)(oe,H()).optionsPicker,ge={id:pe,rootStateKey:oe,type:"query"},ye=(0,Ma.dn)(ge,H());if(!(0,cs.SP)(ye))return;await Ll.B.get(ye.type).updateOptions(ye,Y);const we=(0,Ma.dn)(ge,H());if(!(0,cs.SP)(we))return;z((0,Ua.kb)(oe,(0,Js.qh)(we.options)))}catch(pe){console.error(pe)}},px=(0,J.debounce)(fx,500);function gx(z){const{options:H,selectedValues:Y,queryValue:oe,multi:pe}=z;if(H.length===0&&oe&&oe.length>0)return{text:oe,value:oe,selected:!1};if(!pe)return Y.find(Ie=>Ie.selected);const ge=[],ye=[];for(const Ie of Y)Ie.selected&&(ge.push(Ie.text.toString()),ye.push(Ie.value.toString()));return{value:ye,text:ge,selected:!0}}const Nl=()=>{const z=ge=>({...(0,od.bindActionCreators)({openOptions:hx,commitChangesToVariable:fc,navigateOptions:cx},ge),filterOrSearchOptions:(ye,Ie="")=>{ge(dx(ye,Ie))},toggleAllOptions:ye=>ge((0,Ua.kb)(ye.rootStateKey,(0,Js.an)())),toggleOption:(ye,Ie,we,ke)=>ge((0,Ua.kb)(ye.rootStateKey,(0,Js.U9)({option:Ie,clearOthers:we,forceSelect:ke})))}),H=(ge,ye)=>{const{rootStateKey:Ie}=ye.variable;return Ie?{picker:(0,Ma.nx)(Ie,ge).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:Js.$z})},Y=(0,It.connect)(H,z);class oe extends o.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,$n.jX)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(ye,Ie)=>{((0,cs.iv)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(ye,Ie)},this.onToggleSingleValueVariable=(ye,Ie)=>{this.props.toggleOption((0,$n.jX)(this.props.variable),ye,Ie,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(ye,Ie)=>{this.props.toggleOption((0,$n.jX)(this.props.variable),ye,Ie,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,$n.jX)(this.props.variable))},this.onFilterOrSearchOptions=ye=>{this.props.filterOrSearchOptions((0,$n.jX)(this.props.variable),ye)},this.onNavigate=(ye,Ie)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,ye,Ie)},this.onCancel=()=>{id().cancelRequest((0,$n.jX)(this.props.variable))}}render(){const{variable:ye,picker:Ie}=this.props,we=Ie.id===ye.id,ke=mx();return(0,j.jsx)("div",{className:ke.variableLinkWrapper,"data-testid":Ga.Tp.components.Variables.variableLinkWrapper,children:we?this.renderOptions(Ie):this.renderLink(ye)})}renderLink(ye){const Ie=Zy(ye),we=ye.state===_t.Gu.Loading;return(0,j.jsx)(ax,{id:hs.qz+ye.id,text:Ie,onClick:this.onShowOptions,loading:we,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(ye){const{id:Ie}=this.props.variable;return(0,j.jsxs)(Ty.N,{onClick:this.onHideOptions,children:[(0,j.jsx)(ex,{id:hs.qz+Ie,value:ye.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${Ie}`}),(0,j.jsx)(ix,{values:ye.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:ye.highlightIndex,multi:ye.multi,selectedValues:ye.selectedValues,id:`options-${Ie}`})]})}}const pe=Y(oe);return pe.displayName="OptionsPicker",pe},mx=()=>({variableLinkWrapper:(0,st.css)({display:"inline-block",position:"relative"})});var vx=e(23675);class yx extends o.PureComponent{constructor(){super(...arguments),this.onChange=H=>{this.props.onPropChange({propName:"query",propValue:H.currentTarget.value,updateOptions:!0})}}render(){return(0,j.jsx)(vx.d,{constantValue:this.props.variable.query,onChange:this.onChange})}}const xx={...si.Vg,type:"constant",hide:po.zL.hideVariable,query:"",current:{},options:[]},Dh=(0,pr.Z0)({name:"templating/constant",initialState:Ul.j,reducers:{createConstantOptionsFromQuery:(z,H)=>{const Y=(0,Ma.Fs)(z,H.payload.id);Y.type==="constant"&&(Y.options=[{text:Y.query.trim(),value:Y.query.trim(),selected:!1}])}}}),Ex=Dh.reducer,{createConstantOptionsFromQuery:Px}=Dh.actions,Dx=z=>async H=>{const{rootStateKey:Y}=z;await H((0,Ua.kb)(Y,Px((0,$n.qD)(z)))),await H((0,qa.kl)(z))},bx=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:xx,reducer:Ex,picker:Nl(),editor:yx,dependsOn:()=>!1,setValue:async(z,H,Y=!1)=>{await(0,$a.JD)((0,qa.t9)((0,$n.jX)(z),H,Y))},setValueFromUrl:async(z,H)=>{await(0,$a.JD)((0,qa.x7)((0,$n.jX)(z),H))},updateOptions:async z=>{await(0,$a.JD)(Dx((0,$n.jX)(z)))},getSaveModel:z=>{const{index:H,id:Y,state:oe,global:pe,current:ge,options:ye,rootStateKey:Ie,...we}=(0,J.cloneDeep)(z);return we},getValueForUrl:z=>z.current.value,beforeAdding:z=>{const{current:H,options:Y,query:oe,...pe}=(0,J.cloneDeep)(z),ge={selected:!0,text:oe,value:oe};return{...pe,current:ge,options:[ge],query:oe}}});function Cx(z,...H){const Y=(0,It.connect)(...H)(z);return oe=>(0,j.jsx)(Y,{...oe,store:$a.M_})}function AP(z,...H){const Y=connect(...H)(z);return oe=>jsx(Provider,{store,children:jsx(Y,{...oe,store})})}var Tx=e(70430);class Mx extends o.PureComponent{constructor(){super(...arguments),this.onSelectionOptionsChange=async({propName:H,propValue:Y})=>{this.props.onPropChange({propName:H,propValue:Y,updateOptions:!0})},this.onQueryChange=H=>{this.props.onPropChange({propName:"query",propValue:H.currentTarget.value,updateOptions:!0})}}render(){return(0,j.jsx)(Tx.w,{query:this.props.variable.query,multi:this.props.variable.multi,allValue:this.props.variable.allValue,includeAll:this.props.variable.includeAll,onQueryChange:this.onQueryChange,onMultiChange:H=>this.onSelectionOptionsChange({propName:"multi",propValue:H.currentTarget.checked}),onIncludeAllChange:H=>this.onSelectionOptionsChange({propName:"includeAll",propValue:H.currentTarget.checked}),onAllValueChange:H=>this.onSelectionOptionsChange({propName:"allValue",propValue:H.currentTarget.value})})}}const Ox=(z,H)=>({}),Sx={changeVariableMultiValue:qa.TI},Ix=Cx(Mx,Ox,Sx),Rx={...si.Vg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},bh=(0,pr.Z0)({name:"templating/custom",initialState:Ul.j,reducers:{createCustomOptionsFromQuery:(z,H)=>{const Y=(0,Ma.Fs)(z,H.payload.id);if(Y.type!=="custom")return;const{includeAll:oe}=Y,ye=(H.payload.data.match(/(?:\\,|[^,])+/g)??[]).map(Ie=>{Ie=Ie.replace(/\\,/g,",");const we=/^(.+)\s:\s(.+)$/g.exec(Ie)??[];if(we.length===3){const[,ke,et]=we;return{text:ke.trim(),value:et.trim(),selected:!1}}else return{text:Ie.trim(),value:Ie.trim(),selected:!1}});oe&&ye.unshift({text:hs.Zm,value:hs.To,selected:!1}),Y.options=ye}}}),Ax=bh.reducer,{createCustomOptionsFromQuery:jx}=bh.actions,Lx=z=>async(H,Y)=>{const{rootStateKey:oe}=z,pe=(0,Ma.dn)(z,Y());if(pe.type!=="custom")return;const ge=(0,ct.w)().replace(pe.query);await H((0,Ua.kb)(oe,jx((0,$n.qD)(z,ge)))),await H((0,qa.kl)(z))},Bx=()=>({id:"custom",description:(0,d.t)("variables.create-custom-variable-adapter.description.define-variable-values-manually","Define variable values manually"),name:"Custom",initialState:Rx,reducer:Ax,picker:Nl(),editor:Ix,dependsOn:(z,H)=>(0,$n.wJ)(z.query,H.name),setValue:async(z,H,Y=!1)=>{await(0,$a.JD)((0,qa.t9)((0,$n.jX)(z),H,Y))},setValueFromUrl:async(z,H)=>{await(0,$a.JD)((0,qa.x7)((0,$n.jX)(z),H))},updateOptions:async z=>{await(0,$a.JD)(Lx((0,$n.jX)(z)))},getSaveModel:z=>{const{index:H,id:Y,state:oe,global:pe,rootStateKey:ge,...ye}=(0,J.cloneDeep)(z);return ye},getValueForUrl:z=>(0,$n.ML)(z)?hs.Zm:z.current.value});var Ux=e(42272),Wx=e(8134);const Nx={...si.Vg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:po.CO.onDashboardLoad},Ch=(0,pr.Z0)({name:"templating/datasource",initialState:Ul.j,reducers:{createDataSourceOptions:(z,H)=>{const{sources:Y,regex:oe}=H.payload.data,pe=[],ge=(0,Ma.Fs)(z,H.payload.id);if(ge.type==="datasource"){for(let ye=0;ye<Y.length;ye++){const Ie=Y[ye];(0,Wx._)(ge.query,Ie.meta)&&(Kx(Ie,oe)&&pe.push({text:Ie.name,value:Ie.uid,selected:!1}),Fx(Ie,oe)&&pe.push({text:(0,d.t)("variables.data-source-variable-slice.text.default","default"),value:"default",selected:!1}))}pe.length===0&&pe.push({text:(0,d.t)("variables.data-source-variable-slice.text.no-data-sources-found","No data sources found"),value:"",selected:!1}),ge.includeAll&&pe.unshift({text:hs.Zm,value:hs.To,selected:!1}),ge.options=pe}}}});function Kx(z,H){return H?H.exec(z.name):!0}function Fx(z,H){return z.isDefault?H?H.exec("default"):!0:!1}const wx=Ch.reducer,{createDataSourceOptions:Vx}=Ch.actions,$x=(z,H={getDatasourceSrv:ai.tR})=>async(Y,oe)=>{const{rootStateKey:pe}=z,ge=H.getDatasourceSrv().getList({metrics:!0,variables:!1}),ye=(0,Ma.dn)(z,oe());if(ye.type!=="datasource")return;let Ie;ye.regex&&(Ie=(0,ct.w)().replace(ye.regex,void 0,"regex"),Ie=(0,bs.dO)(Ie)),Y((0,Ua.kb)(pe,Vx((0,$n.qD)(z,{sources:ge,regex:Ie})))),await Y((0,qa.kl)(z))},zx=(z,H={getDatasourceSrv:ai.tR})=>Y=>{const oe=H.getDatasourceSrv().getList({metrics:!0,variables:!0}),pe=(0,J.chain)(oe).uniqBy("meta.id").map(ge=>({text:ge.meta.name,value:ge.meta.id})).value();pe.unshift({text:"",value:""}),Y((0,Ua.kb)(z,(0,fr.BC)({dataSourceTypes:pe})))},Gx=(z,H)=>{const{variable:{rootStateKey:Y}}=H;if(!Y)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:rh(fr.nS)};const{editor:oe}=(0,Ma.nx)(Y,z);return{extended:rh(oe)}},Hx={initDataSourceVariableEditor:zx,changeVariableMultiValue:qa.TI},_x=(0,It.connect)(Gx,Hx);class Qx extends o.PureComponent{constructor(){super(...arguments),this.onRegExBlur=H=>{this.props.onPropChange({propName:"regex",propValue:H.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:H,propName:Y})=>{this.props.onPropChange({propName:Y,propValue:H,updateOptions:!0})},this.onMultiChanged=H=>{this.props.changeVariableMultiValue((0,$n.jX)(this.props.variable),H.currentTarget.checked)},this.onIncludeAllChanged=H=>{this.onSelectionOptionsChange({propName:"includeAll",propValue:H.currentTarget.checked})},this.onAllValueChanged=H=>{this.onSelectionOptionsChange({propName:"allValue",propValue:H.currentTarget.value})},this.getSelectedDataSourceTypeValue=()=>{const{extended:H}=this.props;if(!H?.dataSourceTypes.length)return"";const Y=H.dataSourceTypes.find(pe=>pe.value===this.props.variable.query);return(Y?Y.value:H.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=H=>{this.props.onPropChange({propName:"query",propValue:H.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:H}=this.props.variable;if(!H){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(H)}render(){const{variable:H,extended:Y}=this.props,oe=Y?.dataSourceTypes?.length?Y.dataSourceTypes?.map(pe=>({value:pe.value??"",label:pe.text})):[];return(0,j.jsx)(Ux.y,{query:H.query,regex:H.regex,multi:H.multi,includeAll:H.includeAll,optionTypes:oe,onChange:this.onDataSourceTypeChanged,onRegExBlur:this.onRegExBlur,onMultiChange:this.onMultiChanged,onIncludeAllChange:this.onIncludeAllChanged,onAllValueChange:this.onAllValueChanged})}}const kx=_x(Qx),Yx=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:Nx,reducer:wx,picker:Nl(),editor:kx,dependsOn:(z,H)=>z.regex?(0,$n.wJ)(z.regex,H.name):!1,setValue:async(z,H,Y=!1)=>{await(0,$a.JD)((0,qa.t9)((0,$n.jX)(z),H,Y))},setValueFromUrl:async(z,H)=>{await(0,$a.JD)((0,qa.x7)((0,$n.jX)(z),H))},updateOptions:async z=>{await(0,$a.JD)($x((0,$n.jX)(z)))},getSaveModel:z=>{const{index:H,id:Y,state:oe,global:pe,rootStateKey:ge,...ye}=(0,J.cloneDeep)(z);return{...ye,options:[]}},getValueForUrl:z=>(0,$n.ML)(z)?hs.Zm:z.current.value});var Jx=e(66223),Xx=e(1096);const Th=(0,o.memo)(({onPropChange:z,variable:H})=>{const Y=ye=>{z({propName:"auto",propValue:ye.target.checked,updateOptions:!0})},oe=ye=>{z({propName:"query",propValue:ye.currentTarget.value,updateOptions:!0})},pe=ye=>{z({propName:"auto_count",propValue:ye.value,updateOptions:!0})},ge=ye=>{z({propName:"auto_min",propValue:ye.currentTarget.value,updateOptions:!0})};return(0,j.jsx)(Xx.s,{intervals:H.query,autoStepCount:H.auto_count,autoEnabled:H.auto,onAutoCountChanged:pe,onIntervalsChange:oe,onAutoEnabledChange:Y,onAutoMinIntervalChanged:ge,autoMinInterval:H.auto_min})});Th.displayName="IntervalVariableEditor";var Zx=e(59373),dd=e(98732);const qx=z=>async H=>{const{rootStateKey:Y}=z;await H((0,Ua.kb)(Y,(0,dd.mn)((0,$n.qD)(z)))),await H(ud(z)),await H((0,qa.kl)(z))},ud=(z,H={calculateInterval:th.calculateInterval,getTimeSrv:fo.jG,templateSrv:(0,Zx.w)()})=>(Y,oe)=>{const pe=(0,Ma.dn)(z,oe());if(pe.type==="interval"&&pe.auto){const ge=H.calculateInterval(H.getTimeSrv().timeRange(),pe.auto_count,pe.auto_min);H.templateSrv.setGrafanaVariable("$__auto_interval_"+pe.name,ge.interval),H.templateSrv.setGrafanaVariable("$__auto_interval",ge.interval)}},eE=()=>({id:"interval",description:(0,d.t)("variables.create-interval-variable-adapter.description.define-timespan-interval","Define a timespan interval (for example: {{timeIntervals}})",{timeIntervals:"1m, 1h, 1d"}),name:"Interval",initialState:dd.Ez,reducer:dd.E5,picker:Nl(),editor:Th,dependsOn:()=>!1,setValue:async(z,H,Y=!1)=>{await(0,$a.JD)(ud((0,$n.jX)(z))),await(0,$a.JD)((0,qa.t9)((0,$n.jX)(z),H,Y))},setValueFromUrl:async(z,H)=>{await(0,$a.JD)(ud((0,$n.jX)(z))),await(0,$a.JD)((0,qa.x7)((0,$n.jX)(z),H))},updateOptions:async z=>{await(0,$a.JD)(qx((0,$n.jX)(z)))},getSaveModel:z=>{const{index:H,id:Y,state:oe,global:pe,rootStateKey:ge,...ye}=(0,J.cloneDeep)(z);return ye},getValueForUrl:z=>z.current.value});var tE=e(81053),nE=e(64423),aE=e(38681);function sE(z,H,Y){return{next:pe=>{if(pe.state===_t.Gu.Error){Y.unsubscribe(),H(pe.error);return}if(pe.state===_t.Gu.Done){Y.unsubscribe(),z();return}},error:pe=>{Y.unsubscribe(),H(pe)},complete:()=>{Y.unsubscribe(),z()}}}const rE=(z,H)=>async(Y,oe)=>{try{const{rootStateKey:pe}=z;if(!(0,$n.sN)(pe,oe()))return;const ge=(0,Ma.dn)(z,oe());if(ge.type!=="query")return;(0,Ma.nx)(pe,oe()).editor.id===ge.id&&Y((0,Ua.kb)(pe,(0,fr.Eo)({errorProp:"update"})));const ye=await(0,U.l)().get(ge.datasource??"");await new Promise((Ie,we)=>{const ke=new nE.yU,et=sE(Ie,we,ke),tt=id().getResponse(z).subscribe(et);ke.add(tt),id().queueRequest({identifier:z,datasource:ye,searchFilter:H})})}catch(pe){if(pe instanceof Error){const ge=(0,qc.u)(pe),{rootStateKey:ye}=z;throw(0,Ma.nx)(ye,oe()).editor.id===z.id&&Y((0,Ua.kb)(ye,(0,fr.NY)({errorProp:"update",errorText:ge.message??""}))),ge}}},oE=z=>async(H,Y)=>{const oe=(0,Ma.dn)(z,Y());oe.type==="query"&&await H(Mh((0,$n.jX)(oe),oe.datasource))},Mh=(z,H)=>async(Y,oe)=>{try{const{rootStateKey:pe}=z,{editor:ge}=(0,Ma.nx)(pe,oe()),Ie=sd(ge)?.dataSource,we=await(0,U.l)().get(H??"");Ie&&Ie.type!==we?.type&&Y((0,Ua.kb)(pe,(0,Nr.QP)((0,$n.qD)(z,{propName:"query",propValue:""}))));const ke=await(0,aE.y)(we);Y((0,Ua.kb)(pe,(0,fr.BC)({dataSource:we,VariableQueryEditor:ke})))}catch(pe){console.error(pe)}},iE=(z,H,Y)=>async(oe,pe)=>{const{rootStateKey:ge}=z,ye=(0,Ma.dn)(z,pe());if(ye.type==="query"){if(lE(ye.name,H)){const Ie="Query cannot contain a reference to itself. Variable: $"+ye.name;oe((0,Ua.kb)(ge,(0,fr.NY)({errorProp:"query",errorText:Ie})));return}oe((0,Ua.kb)(ge,(0,fr.Eo)({errorProp:"query"}))),oe((0,Ua.kb)(ge,(0,Nr.QP)((0,$n.qD)(z,{propName:"query",propValue:H})))),Y!==void 0?oe((0,Ua.kb)(ge,(0,Nr.QP)((0,$n.qD)(z,{propName:"definition",propValue:Y})))):typeof H=="string"&&oe((0,Ua.kb)(ge,(0,Nr.QP)((0,$n.qD)(z,{propName:"definition",propValue:H})))),await oe((0,qa.mZ)(z))}};function lE(z,H){if(typeof H=="string"&&H.match(new RegExp("\\$"+z+"(/| |$)")))return!0;const Y=Oh(H);for(let oe in Y)if(Y.hasOwnProperty(oe)){const pe=Y[oe];if(typeof pe=="string"&&pe.match(new RegExp("\\$"+z+"(/| |$)")))return!0}return!1}function Oh(z){return typeof z!="object"||z===null?{query:z}:Object.keys(z).reduce((oe,pe)=>{const ge=z[pe];if(typeof ge!="object"||ge===null)return oe[pe]=ge,oe;const ye=Oh(ge);for(let Ie in ye)ye.hasOwnProperty(Ie)&&(oe[`${pe}_${Ie}`]=ye[Ie]);return oe},{})}const cE=(z,H)=>{const{rootStateKey:Y}=H.variable;if(!Y)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:sd(fr.nS)};const{editor:oe}=(0,Ma.nx)(Y,z);return{extended:sd(oe)}},dE={initQueryVariableEditor:oE,changeQueryVariableDataSource:Mh,changeQueryVariableQuery:iE,changeVariableMultiValue:qa.TI},uE=(0,It.connect)(cE,dE);class hE extends o.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=H=>{this.props.onPropChange({propName:"datasource",propValue:H.isDefault?null:(0,ah.p$)(H)})},this.onLegacyQueryChange=async(H,Y)=>{this.props.variable.query!==H&&this.props.changeQueryVariableQuery((0,$n.jX)(this.props.variable),H,Y)},this.onQueryChange=async H=>{if(this.props.variable.query!==H){let Y="";H&&H.hasOwnProperty("query")&&typeof H.query=="string"&&(Y=H.query),this.props.changeQueryVariableQuery((0,$n.jX)(this.props.variable),H,Y)}},this.onRegExBlur=async H=>{const Y=H.currentTarget.value;this.props.variable.regex!==Y&&this.props.onPropChange({propName:"regex",propValue:Y,updateOptions:!0})},this.onRefreshChange=H=>{this.props.onPropChange({propName:"refresh",propValue:H})},this.onSortChange=async H=>{this.props.onPropChange({propName:"sort",propValue:H.value,updateOptions:!0})},this.onMultiChange=H=>{this.props.onPropChange({propName:"multi",propValue:H.currentTarget.checked})},this.onIncludeAllChange=H=>{this.props.onPropChange({propName:"includeAll",propValue:H.currentTarget.checked})},this.onAllValueChange=H=>{this.props.onPropChange({propName:"allValue",propValue:H.currentTarget.value})}}async componentDidMount(){await this.props.initQueryVariableEditor((0,$n.jX)(this.props.variable))}componentDidUpdate(H){H.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,$n.jX)(this.props.variable),this.props.variable.datasource)}render(){const{extended:H,variable:Y}=this.props;if(!H||!H.dataSource)return null;const oe=(0,fo.jG)().timeRange();return(0,j.jsx)(tE.u,{datasource:Y.datasource??void 0,onDataSourceChange:this.onDataSourceChange,query:Y.query,onQueryChange:this.onQueryChange,onLegacyQueryChange:this.onLegacyQueryChange,timeRange:oe,regex:Y.regex,onRegExChange:this.onRegExBlur,sort:Y.sort,onSortChange:this.onSortChange,refresh:Y.refresh,onRefreshChange:this.onRefreshChange,isMulti:Y.multi,includeAll:Y.includeAll,allValue:Y.allValue??"",onMultiChange:this.onMultiChange,onIncludeAllChange:this.onIncludeAllChange,onAllValueChange:this.onAllValueChange})}}const fE=uE(hE),pE=()=>({id:"query",description:(0,d.t)("variables.create-query-variable-adapter.description.variable-values-fetched-datasource-query","Variable values are fetched from a datasource query"),name:"Query",initialState:jy,reducer:Wy,picker:Nl(),editor:fE,dependsOn:(z,H)=>(0,$n.wJ)(z.query,z.datasource?.uid,z.regex,H.name),setValue:async(z,H,Y=!1)=>{await(0,$a.JD)((0,qa.t9)((0,$n.jX)(z),H,Y))},setValueFromUrl:async(z,H)=>{await(0,$a.JD)((0,qa.x7)((0,$n.jX)(z),H))},updateOptions:async(z,H)=>{await(0,$a.JD)(rE((0,$n.jX)(z),H))},getSaveModel:z=>{const{index:H,id:Y,state:oe,global:pe,queryValue:ge,rootStateKey:ye,...Ie}=(0,J.cloneDeep)(z);return z.refresh!==po.CO.never?{...Ie,options:[]}:Ie},getValueForUrl:z=>(0,$n.ML)(z)?hs.Zm:z.current.value}),gE=()=>({id:"system",description:"",name:"system",initialState:{...si.Vg,type:"system",hide:po.zL.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:_t.Gu.Done},reducer:z=>z,picker:null,editor:null,dependsOn:()=>!1,setValue:async(z,H,Y=!1)=>{},setValueFromUrl:async(z,H)=>{},updateOptions:async z=>{},getSaveModel:z=>({}),getValueForUrl:z=>""});var mE=e(32442),vE=e(49602);function yE({onPropChange:z,variable:{query:H}}){const Y=(0,o.useCallback)((ge,ye)=>{ge.preventDefault(),z({propName:"originalQuery",propValue:ge.currentTarget.value,updateOptions:!1}),z({propName:"query",propValue:ge.currentTarget.value,updateOptions:ye})},[z]),oe=(0,o.useCallback)(ge=>Y(ge,!1),[Y]),pe=(0,o.useCallback)(ge=>Y(ge,!0),[Y]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(mE.Y,{children:(0,j.jsx)(d.x6,{i18nKey:"variables.text-box-variable-editor.text-options",children:"Text options"})}),(0,j.jsx)(vE._,{value:H,name:(0,d.t)("variables.text-box-variable-editor.name-default-value","Default value"),placeholder:(0,d.t)("variables.text-box-variable-editor.placeholder-default-value-if-any","default value, if any"),onChange:oe,onBlur:pe,width:30,testId:Ga.Tp.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2})]})}function xE({variable:z,onVariableChange:H,readOnly:Y}){const oe=(0,Vn.wA)(),[pe,ge]=(0,o.useState)(z.current.value);(0,o.useEffect)(()=>{ge(z.current.value)},[z]);const ye=(0,o.useCallback)(()=>{if(!z.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(z.current.value!==pe){if(oe((0,Ua.kb)(z.rootStateKey,(0,Nr.QP)((0,$n.qD)({id:z.id,type:z.type},{propName:"query",propValue:pe})))),H){H({...z,current:(0,Ph.R)(z.current)?{}:{...z.current,value:pe}});return}Ll.B.get(z.type).updateOptions(z)}},[z,pe,oe,H]),Ie=(0,o.useCallback)(et=>ge(et.target.value),[ge]),we=et=>ye(),ke=et=>{et.keyCode===13&&(et.preventDefault(),ye())};return(0,j.jsx)(Ln.p,{type:"text",value:pe,onChange:Ie,onBlur:we,disabled:Y,onKeyDown:ke,placeholder:(0,d.t)("variable.textbox.placeholder","Enter variable value"),id:hs.qz+z.id})}const EE={...si.Vg,type:"textbox",query:"",current:{},options:[],originalQuery:null},Sh=(0,pr.Z0)({name:"templating/textbox",initialState:Ul.j,reducers:{createTextBoxOptions:(z,H)=>{const Y=(0,Ma.Fs)(z,H.payload.id);if(Y.type!=="textbox")return;const oe={text:Y.query.trim(),value:Y.query.trim(),selected:!1};Y.options=[oe],Y.current=oe}}}),PE=Sh.reducer,{createTextBoxOptions:DE}=Sh.actions,bE=z=>async(H,Y)=>{const{rootStateKey:oe,type:pe}=z;H((0,Ua.kb)(oe,DE((0,$n.qD)(z))));const ge=(0,Ma.dn)(z,Y());ge.type==="textbox"&&await Ll.B.get(pe).setValue(ge,ge.options[0],!0)},CE=(z,H)=>async(Y,oe)=>{const{rootStateKey:pe}=z,ge=(0,Ma.dn)(z,oe());if(ge.type!=="textbox")return;const ye=(0,$n.QT)(H);Y((0,Ua.kb)(pe,(0,Nr.QP)((0,$n.qD)(ge,{propName:"query",propValue:ye})))),await Y((0,qa.x7)((0,$n.jX)(ge),ye))},TE=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:EE,reducer:PE,picker:xE,editor:yE,dependsOn:(z,H)=>!1,setValue:async(z,H,Y=!1)=>{await(0,$a.JD)((0,qa.t9)((0,$n.jX)(z),H,Y))},setValueFromUrl:async(z,H)=>{await(0,$a.JD)(CE((0,$n.jX)(z),H))},updateOptions:async z=>{await(0,$a.JD)(bE((0,$n.jX)(z)))},getSaveModel:(z,H)=>{const{index:Y,id:oe,state:pe,global:ge,originalQuery:ye,rootStateKey:Ie,...we}=(0,J.cloneDeep)(z);if(z.query!==ye&&!H){const ke=ye??"",et={selected:!1,text:ke,value:ke};return{...we,query:ke,current:et,options:[et]}}return we},getValueForUrl:z=>z.current.value,beforeAdding:z=>({...(0,J.cloneDeep)(z),originalQuery:z.query})});var ME=e(29189),hd=e(1749),fd=e(2774),pd=e(15203),gd=e(62905),md=e(2495),OE=e(75816),SE=e(73892);const IE=(0,Ad.TP)("advisor.grafana.app","v0alpha1"),RE=(0,OE.xP)({reducerPath:"advisorAPIv0alpha1",baseQuery:(0,SE.W)({baseURL:IE}),endpoints:()=>({})}),AE=["Check","CheckType"],pc=RE.enhanceEndpoints({addTagTypes:AE}).injectEndpoints({endpoints:z=>({listCheck:z.query({query:H=>({url:"/checks",params:{pretty:H.pretty,allowWatchBookmarks:H.allowWatchBookmarks,continue:H.continue,fieldSelector:H.fieldSelector,labelSelector:H.labelSelector,limit:H.limit,resourceVersion:H.resourceVersion,resourceVersionMatch:H.resourceVersionMatch,sendInitialEvents:H.sendInitialEvents,timeoutSeconds:H.timeoutSeconds,watch:H.watch}}),providesTags:["Check"]}),createCheck:z.mutation({query:H=>({url:"/checks",method:"POST",body:H.check,params:{pretty:H.pretty,dryRun:H.dryRun,fieldManager:H.fieldManager,fieldValidation:H.fieldValidation}}),invalidatesTags:["Check"]}),getCheck:z.query({query:H=>({url:`/checks/${H.name}`,params:{pretty:H.pretty}}),providesTags:["Check"]}),deleteCheck:z.mutation({query:H=>({url:`/checks/${H.name}`,method:"DELETE",params:{pretty:H.pretty,dryRun:H.dryRun,gracePeriodSeconds:H.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:H.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:H.orphanDependents,propagationPolicy:H.propagationPolicy}}),invalidatesTags:["Check"]}),updateCheck:z.mutation({query:H=>({url:`/checks/${H.name}`,method:"PATCH",body:H.patch,params:{pretty:H.pretty,dryRun:H.dryRun,fieldManager:H.fieldManager,fieldValidation:H.fieldValidation,force:H.force}}),invalidatesTags:["Check"]}),listCheckType:z.query({query:H=>({url:"/checktypes",params:{pretty:H.pretty,allowWatchBookmarks:H.allowWatchBookmarks,continue:H.continue,fieldSelector:H.fieldSelector,labelSelector:H.labelSelector,limit:H.limit,resourceVersion:H.resourceVersion,resourceVersionMatch:H.resourceVersionMatch,sendInitialEvents:H.sendInitialEvents,timeoutSeconds:H.timeoutSeconds,watch:H.watch}}),providesTags:["CheckType"]}),updateCheckType:z.mutation({query:H=>({url:`/checktypes/${H.name}`,method:"PATCH",body:H.patch,params:{pretty:H.pretty,dryRun:H.dryRun,fieldManager:H.fieldManager,fieldValidation:H.fieldValidation,force:H.force}}),invalidatesTags:["CheckType"]})}),overrideExisting:!1}).enhanceEndpoints({endpoints:{updateCheck:z=>{const H=z.query;H&&(z.query=Y=>({...H(Y),headers:{"Content-Type":"application/json-patch+json"},body:JSON.stringify(Y.patch)}))},updateCheckType:z=>{const H=z.query;H&&(z.query=Y=>({...H(Y),headers:{"Content-Type":"application/json-patch+json"},body:JSON.stringify(Y.patch)}))}}}),{useGetCheckQuery:LP,useListCheckQuery:BP,useCreateCheckMutation:UP,useDeleteCheckMutation:WP,useUpdateCheckMutation:NP,useListCheckTypeQuery:KP,useUpdateCheckTypeMutation:FP}=pc;var vd=e(87161),yd=e(94659),xd=e(58614),Ed=e(83793);const jE={navBarTree:du.I_,navIndex:Yc._h,appNotifications:Bu.g5};var LE=e(52695),go=e(36200),mo=e(11018);const BE=(0,od.combineReducers)({promRules:(0,go.Xw)("promRules",mo.mB,({rulesSourceName:z})=>z).reducer,rulerRules:(0,go.Xw)("rulerRules",mo.eB,({rulesSourceName:z})=>z).reducer,saveAMConfig:(0,go.J7)("saveAMConfig",mo.RW).reducer,deleteAMConfig:(0,go.J7)("deleteAMConfig",mo.nO).reducer,amAlertGroups:(0,go.Xw)("amAlertGroups",mo.D3,z=>z).reducer,testReceivers:(0,go.J7)("testReceivers",mo.bO).reducer,managedAlertStateHistory:(0,go.J7)("managedAlertStateHistory",mo.JH).reducer});var UE=e(2954);const WE={items:[],searchQuery:"",isLoading:!1},NE={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function KE(z,H){const Y=UE.A.getStateDisplayModel(H),oe={...z,stateText:Y.text,stateIcon:Y.iconClass,stateClass:Y.stateClass,stateAge:(0,g.KQ)(z.newStateDate).fromNow(!0)};return oe.state!=="paused"&&(oe.executionError&&(oe.info="Execution Error: "+oe.executionError),oe.evalData&&oe.evalData.noData&&(oe.info="Query returned no data")),oe}const Ih=(0,pr.Z0)({name:"alertRules",initialState:WE,reducers:{loadAlertRules:z=>({...z,isLoading:!0}),loadedAlertRules:(z,H)=>{const oe=H.payload.map(pe=>KE(pe,pe.state));return{...z,items:oe,isLoading:!1}},setSearchQuery:(z,H)=>({...z,searchQuery:H.payload})}}),Rh=(0,pr.Z0)({name:"notificationChannel",initialState:NE,reducers:{setNotificationChannels:(z,H)=>({...z,notificationChannelTypes:zE(H.payload),notifiers:H.payload}),notificationChannelLoaded:(z,H)=>{const Y=H.payload,pe=z.notifiers.find(ge=>ge.type===Y.type).options.filter(ge=>ge.secure);return pe.length>0&&pe.some(ge=>Y.settings[ge.propertyName]!=="")?$E(z,H.payload,pe):{...z,notificationChannel:Y}},resetSecureField:(z,H)=>({...z,notificationChannel:{...z.notificationChannel,secureFields:{...z.notificationChannel.secureFields,[H.payload]:!1}}})}}),{loadAlertRules:VP,loadedAlertRules:$P,setSearchQuery:zP}=Ih.actions,{setNotificationChannels:GP,notificationChannelLoaded:HP,resetSecureField:_P}=Rh.actions,FE=Ih.reducer,wE=Rh.reducer,VE={alertRules:FE,notificationChannel:wE,unifiedAlerting:BE};function $E(z,H,Y){const oe={},pe={};return Y.forEach(ge=>{pe[ge.propertyName]=H.settings[ge.propertyName],oe[ge.propertyName]=""}),{...z,notificationChannel:{...H,settings:{...H.settings,...oe},secureSettings:{...pe}}}}function zE(z){return z.map(H=>({value:H.type,label:H.name,...H,typeName:H.type})).sort((H,Y)=>H.name>Y.name?1:-1)}var GE=e(21875),HE=e(87186),_E=e(42795),QE=e(37918),kE=e(18548),YE=e(35231),JE=e(17621),XE=e(38748),ZE=e(2559),qE=e(74396),eP=e(89224),tP=e(54687),nP=e(69289),aP=e(13640),sP=e(69807),rP=e(27104),oP=e(1302),iP=e(20018);const lP={...jE,...VE,...rP.Ay,...JE.Ay,...QE.Ay,...YE.Ay,...kE.Ay,...oP.Ay,...aP.Ay,...nP.Ay,...XE.Ay,...qE.Ay,...HE.Ay,...LE.Ay,...ZE.Ay,..._E.Ay,...eP.Ay,...Ua.Ay,...sP.Ay,...GE.Ay,plugins:tP.Ff,[yl.H.reducerPath]:yl.H.reducer,[hd.P.reducerPath]:hd.P.reducer,[gd.Sm.reducerPath]:gd.Sm.reducer,[pd.cU.reducerPath]:pd.cU.reducer,[md.O5.reducerPath]:md.O5.reducer,[yd.vI.reducerPath]:yd.vI.reducer,[xd.o3.reducerPath]:xd.o3.reducer,[tc.Aj.reducerPath]:tc.Aj.reducer,[Ed.PP.reducerPath]:Ed.PP.reducer,[vd.Zt.reducerPath]:vd.Zt.reducer,[pc.reducerPath]:pc.reducer,[fd.G.reducerPath]:fd.G.reducer},Ah={},QP=z=>{Object.assign(Ah,z)},cP=()=>{const z=(0,od.combineReducers)({...lP,...Ah});return(H,Y)=>{if(Y.type!==iP.N.type)return z(H,Y);const{cleanupAction:oe}=Y.payload;return oe(H),z(H,Y)}};function kP(z){addReducer(z)}const dP=(0,pr.Nc)(),jh=[];function YP(z){jh.push(z)}function uP(z){const H=(0,pr.U1)({reducer:cP(),middleware:Y=>Y({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(dP.middleware,yl.H.middleware,hd.P.middleware,gd.Sm.middleware,pd.cU.middleware,md.O5.middleware,tc.Aj.middleware,yd.vI.middleware,xd.o3.middleware,Ed.PP.middleware,vd.Zt.middleware,pc.middleware,fd.G.middleware,...jh),devTools:!1,preloadedState:{navIndex:(0,Yc.s2)(),...z}});return(0,ME.$k)(H.dispatch),(0,$a.k3)(H),H}const Lh=e(39572),gc=Lh.keys().map(z=>Lh(z));class hP{async init(){try{await Z0(),window.parent.postMessage("GrafanaAppInit","*");const H=k.Ay.featureToggles.localeFormatPreference?k.Ay.regionalFormat:Cn.TP.user.language,Y=(0,d.JL)({language:Cn.TP.user.language,ns:sc.dK,module:J0},H);Y.then(async({language:et})=>((0,k._R)({language:et}),(0,d.fl)(sc.VV,et??y.Nm,[q._H]))),(0,x.u5)(Gu.IB),await gP(),(0,_u.j)("frontend_app_init"),(0,g.xS)(k.Ay.regionalFormat),(0,g.$D)(Cn.TP.user.weekStart),(0,G.Y)(Nv.m),(0,w.l)(V0),(0,b.N)(F0),(0,_.e)(Wv.a),(0,D.T)(C.Ny),(0,P.l)(new sv),(0,T.p)(xv),(0,u.G)(()=>Cn.TP.user.timezone),Uv(),(0,O.l)(Cn.TP.user),(0,yv.initAuthConfig)(),(0,S.H8)(Za.A),await Y,fP(),uP(),pP(),vv(),E.D.setInit(Ku.H),E.G.setInit(Ku.u),v.h.setInit(Tc),Ll.B.setInit(()=>[pE(),Bx(),TE(),bx(),Yx(),eE(),Cy(),gE()]),p.l.setInit(Mc.A),(0,ev.f)(),(0,B.HC)(()=>new Jv),Xy(new Jy),(0,B.pC)(ad.BN),(0,K.se)({importPanelPlugin:eh.TV,getPanelPluginFromCache:eh.PY}),m.I.initialize({config:window.grafanaBootData.settings,getTimeRangeForUrl:(0,fo.jG)().timeRangeForUrl,getVariablesUrlParams:Jx.z}),k.Ay.featureToggles.useSessionStorageForRedirection&&mP(),document.addEventListener("click",tv);const oe=new ai.xq;oe.init(k.Ay.datasources,k.Ay.defaultDatasource),(0,U.h)(oe),Zv();const pe=k.Ay.featureToggles.rendererDisableAppPluginsPreload&&Cn.TP.user.authenticatedBy==="render";if(Cn.TP.user.orgRole!==""&&!pe){const et=(0,ls.Xs)(),tt=(0,ls.mi)();ed(tt),await ed(et)}(0,F.q)(_v),(0,I.A)($v),(0,V.R)(zv),(0,M.U)(Hv),(0,Q.C)(Xu.m5),(0,ae.h)(Xu.zN);const ge=C.Ny.getSearchObject(),ye=new Jg,Ie=new pv(C.Ny,ye),we=new ov;we.start(),ye.setKioskModeFromUrl(ge.kiosk);try{(0,qv.W1)()}catch(et){console.warn("Failed to clean up old expanded folders",et)}this.context={backend:Gu.IB,location:C.Ny,chrome:ye,keybindings:Ie,newAssetsChecker:we,config:k.Ay},(0,L._)(Vs.ni),(0,N.$)(Vs.iQ),(0,W._)(Rl.k9),k.Ay.featureToggles.crashDetection&&Y0(),k.Ay.featureToggles.dashboardLevelTimeMacros&&(q.Go.registerVariableMacro("__from",ku,!0),q.Go.registerVariableMacro("__to",ku,!0)),(0,f.H)(document.getElementById("reactRoot")).render((0,o.createElement)(W0,{app:this})),await q0()}catch(H){console.error("Failed to start Grafana",H),window.__grafana_load_failed()}finally{(0,_u.z)("frontend_app_init")}}}function fP(){gc.length>0&&gc[0].addExtensionReducers()}function pP(){gc.length>0&&gc[0].init()}async function gP(){if((0,R.H2)(new iv({debug:!1})),window.addEventListener("load",z=>{const H="frontend_boot_load_time_seconds";performance&&(performance.mark(H),Kl("first-paint","frontend_boot_","_time_seconds"),Kl("first-contentful-paint","frontend_boot_","_time_seconds"),Kl(H),Kl("frontend_boot_js_done_time_seconds"),Kl("frontend_boot_css_time_seconds"))}),Cn.TP.user.orgRole!==""){const{PerformanceBackend:z}=await e.e(4857).then(e.bind(e,4857));(0,R.pl)(new z({}))}if(k.Ay.grafanaJavascriptAgent.enabled){const z=[k.Ay.rudderstackConfigUrl,k.Ay.rudderstackDataPlaneUrl,k.Ay.rudderstackIntegrationsUrl].filter(Boolean).map(Y=>new RegExp(`${Y}.*.`)),{GrafanaJavascriptAgentBackend:H}=await e.e(5718).then(e.bind(e,95718));(0,R.pl)(new H({...k.Ay.grafanaJavascriptAgent,app:{version:k.Ay.buildInfo.version,environment:k.Ay.buildInfo.env},buildInfo:k.Ay.buildInfo,user:{id:String(Cn.TP.user?.id),email:Cn.TP.user?.email},ignoreUrls:z}))}if(k.Ay.googleAnalyticsId){const{GAEchoBackend:z}=await e.e(9820).then(e.bind(e,59820));(0,R.pl)(new z({googleAnalyticsId:k.Ay.googleAnalyticsId}))}if(k.Ay.googleAnalytics4Id){const{GA4EchoBackend:z}=await e.e(7018).then(e.bind(e,47018));(0,R.pl)(new z({googleAnalyticsId:k.Ay.googleAnalytics4Id,googleAnalytics4SendManualPageViews:k.Ay.googleAnalytics4SendManualPageViews}))}if(k.Ay.rudderstackWriteKey&&k.Ay.rudderstackDataPlaneUrl){const{RudderstackBackend:z}=await e.e(4564).then(e.bind(e,34564));(0,R.pl)(new z({writeKey:k.Ay.rudderstackWriteKey,dataPlaneUrl:k.Ay.rudderstackDataPlaneUrl,user:Cn.TP.user,sdkUrl:k.Ay.rudderstackSdkUrl,configUrl:k.Ay.rudderstackConfigUrl,integrationsUrl:k.Ay.rudderstackIntegrationsUrl,buildInfo:k.Ay.buildInfo}))}if(k.Ay.applicationInsightsConnectionString){const{ApplicationInsightsBackend:z}=await e.e(2699).then(e.bind(e,2699));(0,R.pl)(new z({connectionString:k.Ay.applicationInsightsConnectionString,endpointUrl:k.Ay.applicationInsightsEndpointUrl}))}if(k.Ay.analyticsConsoleReporting){const{BrowserConsoleBackend:z}=await e.e(5747).then(e.bind(e,75747));(0,R.pl)(new z)}}function Kl(z,H="",Y=""){const oe=performance.getEntriesByName(z).at(0);if(oe){const pe=oe.name.replace(/-/g,"_");(0,lv.n)(`${H}${pe}${Y}`,Math.round(oe.startTime)/1e3)}}function mP(){const z=C.Ny.getSearch(),H="redirectTo";if(z.has("auth_token")){window.sessionStorage.removeItem(Cn.OG);return}if(z.has(H)&&window.location.pathname!=="/"){const ge=z.get(H);window.sessionStorage.setItem(Cn.OG,encodeURIComponent(ge)),z.delete(H),window.history.replaceState({},"",`${window.location.pathname}${z.size>0?`?${z}`:""}`);return}if(!Cn.TP.user.isSignedIn)return;const Y=window.sessionStorage.getItem(Cn.OG);if(!Y)return;window.sessionStorage.removeItem(Cn.OG);let oe=decodeURIComponent(Y);if(oe.startsWith("/goto/")){const ge=m.I.assureBaseUrl(oe);window.location.replace(ge);return}const pe=m.I.stripBaseFromUrl(oe);C.Ny.replace(pe)}new hP().init()},73495:(ne,A,e)=>{"use strict";e.d(A,{m:()=>n});var n=(a=>(a.LineChart="Line chart",a.LineChartSmooth="Line chart smooth",a.LineChartGradientColorScheme="Line chart with gradient color scheme",a.AreaChart="Area chart",a.AreaChartStacked="Area chart stacked",a.AreaChartStackedPercent="Area chart 100% stacked",a.BarChart="Bar chart",a.BarChartGradientColorScheme="Bar chart with gradient color scheme",a.BarChartStacked="Bar chart stacked",a.BarChartStackedPercent="Bar chart 100% stacked",a.BarChartHorizontal="Bar chart horizontal",a.BarChartHorizontalStacked="Bar chart horizontal stacked",a.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",a.Candlestick="Candlestick",a.PieChart="Pie chart",a.PieChartDonut="Pie chart donut",a.Stat="Stat",a.StatColoredBackground="Stat colored background",a.Gauge="Gauge",a.GaugeNoThresholds="Gauge no thresholds",a.BarGaugeBasic="Bar gauge basic",a.BarGaugeLCD="Bar gauge LCD",a.Table="Table",a.StateTimeline="State timeline",a.StatusHistory="Status history",a.TextPanel="Text",a.DashboardList="Dashboard list",a.Logs="Logs",a.FlameGraph="Flame graph",a.Trace="Trace",a.NodeGraph="Node graph",a))(n||{})},73601:(ne,A,e)=>{"use strict";e.d(A,{k:()=>o,m:()=>h});var n=e(88483),a=e(739),s=e(22592),l=e(28105),r=e(22429),c=e(82612),i=e(9931);function o(u){return u?typeof u=="string"?u===i.K:"meta"in u&&u.meta.name===i.K||u.uid===i.K:!1}function h(u,E){return new n.c(v=>{const p=(0,r.UA)().getCurrent(),m=f(u.queries);if(!m){v.next(g("Missing panel reference ID"));return}let y=p?.getPanelById(m,!0);if(y instanceof c.a9||(y=new c.a9(y)),!y){v.next(g("Unknown Panel: "+m));return}const d=y.getQueryRunner(),x=d.getData({withTransforms:!!E?.withTransforms,withFieldConfig:!1}).subscribe({next:b=>{E?.topic===a.QR.Annotations&&(b={...b,series:b.annotations??[],annotations:void 0}),v.next(b)}});if(!y.isInView&&y.refreshWhenInView||p?.otherPanelInFullscreen(y)){const{datasource:b,targets:D}=y,C={...u,datasource:b,panelId:m,queries:D};y.refreshWhenInView=!1,d.run(C)}return()=>{x.unsubscribe()}})}function f(u){if(!(!u||!u.length))return u[0].panelId}function g(u){return{state:l.Gu.Error,series:[],request:{},error:{message:u},timeRange:(0,s.E2)()}}},73628:(ne,A,e)=>{"use strict";e.d(A,{J:()=>p});var n=e(74848),a=e(22803),s=e(21835),l=e(2543),r=e(96540),c=e(92745),i=e(63142),o=e(45861),h=e(22787),f=e(99887),g=e(30703),u=e(76319);function E({item:y,onEdit:d,onRemove:x,index:b,itemKey:D}){const C=(0,i.of)(v),{title:P="",oneClick:T=!1}=y,O=("type"in y?y[y.type]?.url:y.url)??"",S=P.trim()!=="",B=O.trim()!=="";return(0,n.jsx)(s.sx,{draggableId:D,index:b,children:K=>(0,r.createElement)("div",{className:(0,a.cx)(C.wrapper,C.dragRow),ref:K.innerRef,...K.draggableProps,key:b},(0,n.jsxs)("div",{className:C.linkDetails,children:[(0,n.jsx)("div",{className:(0,a.cx)(C.url,!S&&C.notConfigured),children:S?P:(0,c.t)("grafana-ui.data-links-inline-editor.title-not-provided","Title not provided")}),(0,n.jsx)("div",{className:(0,a.cx)(C.url,!B&&C.notConfigured),title:O,children:B?O:(0,c.t)("grafana-ui.data-links-inline-editor.url-not-provided","Data link url not provided")})]}),(0,n.jsxs)("div",{className:C.icons,children:[T&&(0,n.jsx)(f.E,{color:"blue",text:(0,c.t)("grafana-ui.data-links-inline-editor.one-click","One click"),tooltip:(0,c.t)("grafana-ui.data-links-inline-editor.one-click-enabled","One click enabled")}),(0,n.jsx)(u.K,{name:"pen",onClick:d,className:C.icon,tooltip:(0,c.t)("grafana-ui.data-links-inline-editor.tooltip-edit","Edit")}),(0,n.jsx)(u.K,{name:"trash-alt",onClick:x,className:C.icon,tooltip:(0,c.t)("grafana-ui.data-links-inline-editor.tooltip-remove","Remove")}),(0,n.jsx)("div",{className:C.dragIcon,...K.dragHandleProps,children:(0,n.jsx)(g.I,{name:"draggabledots",size:"lg"})})]}))},D)}const v=y=>({wrapper:(0,a.css)({display:"flex",flexGrow:1,alignItems:"center",justifyContent:"space-between",padding:"5px 0 5px 10px",borderRadius:y.shape.radius.default,background:y.colors.background.secondary,gap:8}),linkDetails:(0,a.css)({display:"flex",flexDirection:"column",flexGrow:1,maxWidth:"calc(100% - 100px)"}),errored:(0,a.css)({color:y.colors.error.text,fontStyle:"italic"}),notConfigured:(0,a.css)({fontStyle:"italic"}),title:(0,a.css)({color:y.colors.text.primary,fontSize:y.typography.size.sm,fontWeight:y.typography.fontWeightMedium}),url:(0,a.css)({color:y.colors.text.secondary,fontSize:y.typography.size.sm,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),dragRow:(0,a.css)({position:"relative",margin:"8px"}),icons:(0,a.css)({display:"flex",padding:6,alignItems:"center",gap:8}),dragIcon:(0,a.css)({cursor:"grab",color:y.colors.text.secondary,margin:y.spacing(0,.5)}),icon:(0,a.css)({color:y.colors.text.secondary})});function p({type:y,items:d,onChange:x,data:b,children:D}){const[C,P]=(0,r.useState)(null),[T,O]=(0,r.useState)(!1),[S,B]=(0,r.useState)([]);(0,r.useEffect)(()=>{B(d??[])},[d]);const K=(0,i.of)(m),U=C!==null,F=(W,R)=>{if(T){const w=R.title,_=R.url??R.fetch?.url??"";if(w.trim()===""&&_.trim()===""){O(!1),P(null);return}else P(null),O(!1)}R.oneClick===!0&&S.forEach(w=>{w.oneClick&&(w.oneClick=!1)});const G=(0,l.cloneDeep)(S);G[W]=R,x(G),P(null)},I=W=>{T&&O(!1),P(null)},V=()=>{let W=(0,l.cloneDeep)(S);P(W.length),O(!0)},M=W=>{const R=(0,l.cloneDeep)(S);R.splice(W,1),x(R)},L=W=>{if(d==null||W.destination==null)return;const R=(0,l.cloneDeep)(S),G=R[W.source.index];R.splice(W.source.index,1),R.splice(W.destination.index,0,G),B(R),x(R)},N=W=>{let R="";switch(y){case"link":R=W==="edit"?(0,c.t)("grafana-ui.data-links-inline-editor.edit-link","Edit link"):(0,c.t)("grafana-ui.data-links-inline-editor.add-link","Add link");break;case"action":R=W==="edit"?(0,c.t)("grafana-ui.action-editor.inline.edit-action","Edit action"):(0,c.t)("grafana-ui.action-editor.inline.add-action","Add action");break}return R};return(0,n.jsxs)("div",{className:K.container,children:[(0,n.jsx)(s.JY,{onDragEnd:L,children:(0,n.jsx)(s.gL,{droppableId:"sortable-links",direction:"vertical",children:W=>(0,n.jsxs)("div",{className:K.wrapper,ref:W.innerRef,...W.droppableProps,children:[S.map((R,G)=>{const w=`${R.title}/${G}`;return(0,n.jsx)(E,{index:G,item:R,onChange:F,onEdit:()=>P(G),onRemove:()=>M(G),data:b,itemKey:w},w)}),W.placeholder]})})}),U&&C!==null&&(0,n.jsx)(h.a,{title:N(T?"add":"edit"),isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{I(C)},children:D(S[C],C,F,I)}),(0,n.jsx)(o.$n,{size:"sm",icon:"plus",onClick:V,variant:"secondary",className:K.button,children:N("add")})]})}const m=y=>({container:(0,a.css)({position:"relative"}),wrapper:(0,a.css)({marginBottom:y.spacing(2),display:"flex",flexDirection:"column"}),button:(0,a.css)({marginLeft:y.spacing(1)})})},73745:(ne,A,e)=>{"use strict";e.d(A,{$:()=>n});const n="https://grafana.com/blog/news.xml"},73829:(ne,A,e)=>{"use strict";e.d(A,{M:()=>n});var n=(a=>(a[a.MaxSize=50]="MaxSize",a))(n||{})},73858:(ne,A,e)=>{"use strict";e.d(A,{p:()=>a});var n=e(74848);const a=({x:s,y:l,children:r})=>(0,n.jsx)("div",{style:{position:"absolute",top:`${l}px`,left:`${s}px`},children:r})},73892:(ne,A,e)=>{"use strict";e.d(A,{W:()=>s,s:()=>l});var n=e(75505),a=e(68143);function s({baseURL:r}){async function c(i){try{const{data:o,...h}=await(0,n.s)((0,a.AI)().fetch({...i,url:r+i.url,showErrorAlert:i.showErrorAlert??!1,data:i.body}));return{data:o,meta:h}}catch(o){return i.manageError?i.manageError(o):l(o)}}return c}function l(r){return(0,a.NF)(r)||r instanceof Error?{error:r}:{error:new Error("Unknown error")}}},74048:(ne,A,e)=>{"use strict";e.d(A,{J:()=>r,W:()=>l});var n=e(2543),a=e.n(n),s=e(96540);function l(c,i=1,o){const[h,f]=(0,s.useState)(i),g=(0,s.useMemo)(()=>(0,n.chunk)(c,o),[c,o]),u=g.length,E=g[h-1]??[],v=(h-1)*o+1,p=(0,n.clamp)(h*o,c.length),m=(0,s.useCallback)(x=>{f((0,n.clamp)(x,1,g.length))},[f,g]),y=(0,s.useCallback)(()=>m(h+1),[h,m]),d=(0,s.useCallback)(()=>m(h-1),[h,m]);return(0,s.useEffect)(()=>f(1),[u]),{page:h,onPageChange:m,numberOfPages:u,pageItems:E,pageStart:v,pageEnd:p,nextPage:y,previousPage:d}}function r(c,i){const[o,h]=(0,s.useState)(1),f=c.length>i*o,g=c.slice(0,i*o),u=(0,s.useCallback)(()=>{h(E=>E+1)},[]);return{pageItems:g,pageIndex:o,loadMore:u,hasMore:f}}},74098:(ne,A,e)=>{"use strict";e.d(A,{D:()=>p});var n=e(74848),a=e(22803),s=e(96540),l=e(78685),r=e(51898),c=e(92745),i=e(30703),o=e(45967),h=e(72489),f=e(45861),g=e(63142),u=e(70958),E=e(42795);const v="showCategory",p=s.memo(({id:d,title:x,children:b,forceOpen:D,isOpenDefault:C=!0,renderTitle:P,className:T,itemsCount:O,isNested:S=!1,sandboxId:B,disabledText:K})=>{const[U,F]=(0,l.A)(y(d),{isExpanded:C}),I=D||(U?.isExpanded??C),[V,M]=(0,s.useState)(I),L=(0,s.useRef)(null),[N,W]=(0,u.s)(),R=N[v]===d;(0,s.useEffect)(()=>{(D||R)&&!V&&(M(!0),setTimeout(()=>{L.current?.scrollIntoView()},200))},[V,R,D]);const G=(0,s.useCallback)(()=>{W({[v]:V?void 0:d},!0),F({isExpanded:!V}),M(!V)},[W,V,d,F]);P||(P=function(k){return k||O===void 0||O===0?x:(0,n.jsxs)("span",{children:[x," ",(0,n.jsx)(h.p,{value:O})]})});const w=(0,g.of)(m),_=(0,a.cx)({[w.box]:!0,[w.boxNestedExpanded]:S&&V},T),Q=(0,a.cx)(w.header,{[w.headerExpanded]:V,[w.headerNested]:S}),ae=(0,a.cx)(w.body,{[w.bodyNested]:S});return K?(0,n.jsx)("div",{className:_,"data-plugin-sandbox":B,"data-testid":r.Tp.components.OptionsGroup.group(d),ref:L,children:(0,n.jsx)(o.m,{content:K,children:(0,n.jsxs)("div",{className:Q,children:[(0,n.jsx)("h6",{id:`button-${d}`,className:(0,a.cx)(w.title,w.titleDisabled),children:P(V)}),(0,n.jsx)(i.I,{size:"sm",name:"ban",className:w.disabledIcon})]})})}):(0,n.jsxs)("div",{className:_,"data-plugin-sandbox":B,"data-testid":r.Tp.components.OptionsGroup.group(d),ref:L,children:[(0,n.jsxs)("div",{className:Q,onClick:G,children:[(0,n.jsx)("h6",{id:`button-${d}`,className:(0,a.cx)(w.title,V&&w.titleExpanded),children:P(V)}),(0,n.jsx)(f.$n,{"aria-label":V?(0,c.t)("dashboard.options-pane-category.aria-label-collapse","Collapse {{title}} category",{title:x}):(0,c.t)("dashboard.options-pane-category.aria-label-expand","Expand {{title}} category",{title:x}),"data-testid":r.Tp.components.OptionsGroup.toggle(d),type:"button",fill:"text",size:"md",variant:"secondary","aria-expanded":V,className:w.toggleButton,icon:V?"angle-up":"angle-down",onClick:G})]}),V&&(0,n.jsx)("div",{className:ae,id:d,"aria-labelledby":`button-${d}`,children:b})]})});p.displayName="OptionsPaneCategory";const m=d=>({box:(0,a.css)({borderTop:`1px solid ${d.colors.border.weak}`}),boxNestedExpanded:(0,a.css)({marginBottom:d.spacing(2)}),title:(0,a.css)({flexGrow:1,overflow:"hidden",lineHeight:1.5,fontSize:"1rem",fontWeight:d.typography.fontWeightMedium,margin:0,color:d.colors.text.secondary}),titleExpanded:(0,a.css)({color:d.colors.text.primary}),header:(0,a.css)({display:"flex",alignItems:"center",padding:d.spacing(.5,1.5),color:d.colors.text.primary,fontWeight:d.typography.fontWeightMedium,cursor:"pointer","&:hover":{background:d.colors.emphasize(d.colors.background.primary,.03)}}),toggleButton:(0,a.css)({alignSelf:"baseline"}),headerExpanded:(0,a.css)({color:d.colors.text.primary}),headerNested:(0,a.css)({padding:d.spacing(.5,0,.5,0)}),body:(0,a.css)({padding:d.spacing(1,2,1,2)}),titleDisabled:(0,a.css)({color:d.colors.text.disabled,cursor:"not-allowed"}),disabledIcon:(0,a.css)({color:d.colors.text.disabled,margin:d.spacing(1,1,1,0)}),bodyNested:(0,a.css)({position:"relative",paddingRight:0,"&:before":{content:"''",position:"absolute",top:0,left:"1px",width:"1px",height:"100%",background:d.colors.border.weak}})}),y=d=>`${E.wi}.optionGroup[${d}]`},74101:(ne,A,e)=>{"use strict";e.d(A,{z:()=>s});var n=e(54148),a=e(36490);function s(){const l=(0,n.zy)();return[new URLSearchParams(l.search),(i,o)=>{a.Ny.partial(i,o)}]}},74194:(ne,A,e)=>{"use strict";e.d(A,{K:()=>s});var n=e(739);const a="12.2.1",s={minVizHeight:75,minVizWidth:75,showThresholdLabels:!1,showThresholdMarkers:!0,sizing:n.T6.Auto}},74198:(ne,A,e)=>{"use strict";e.d(A,{jV:()=>te,HY:()=>Ye,MY:()=>ue,XX:()=>Me,zi:()=>Ve,HW:()=>Ue,bk:()=>$e,GH:()=>ie,tJ:()=>He,Sj:()=>fe,Ux:()=>Xe,j1:()=>se,O4:()=>Qe,M2:()=>je,Iy:()=>Se,o7:()=>Re,IM:()=>Ce,Ok:()=>Ae,nR:()=>de,Yz:()=>le});var n=e(2543),a=e(47078),s=e.n(a),l=e(84140),r=e(95004),c=e(16515),i=e(41119),o=e(17503),h=e(55386),f=e(46644),g=e(11576),u=e(739),E=e(8255),v=e(74848),p=e(22803),m=e(63142),y=e(31210);const d=ve=>{const{cellProps:me,tableStyles:xe,actions:Ee}=ve,Pe=(0,m.of)(x);return(0,v.jsx)("div",{...me,className:(0,p.cx)(xe.cellContainerText,Pe.buttonsGap),children:Ee&&Ee.map((Oe,We)=>(0,v.jsx)(y.r,{action:Oe,variant:"secondary"},We))})},x=ve=>({buttonsGap:(0,p.css)({gap:6})});var b=e(96540),D=e(33553),C=e(79118),P=e(38919),T=e(98005),O=e(58738);const S={mode:D.O.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},B=ve=>{const{field:me,innerWidth:xe,tableStyles:Ee,cell:Pe,cellProps:Oe,row:We}=ve,Fe=me.display(Pe.value),Be=$e(me);let Le=(0,C.xg)(me,!1);Le.thresholds||(Le={...Le,thresholds:S});let Ge=u.eX.Gradient,Ze;Be.type===u.ob.Gauge&&(Ge=Be.mode??u.eX.Gradient,Ze=Be.valueDisplayMode!==void 0?Be.valueDisplayMode:u.$l.Text);const qe=()=>(0,n.isFunction)(me.getLinks)?me.getLinks({valueRowIndex:We.index}):[],at=Ve(me,Fe,Pe.row.index),ht=()=>(0,v.jsx)(T.xE,{width:xe,height:Ee.cellHeightInner,field:Le,display:me.display,text:{valueSize:14},value:Fe,orientation:P.wV.Horizontal,theme:Ee.theme,alignmentFactors:at,itemSpacing:1,lcdCellWidth:8,displayMode:Ge,valueDisplayMode:Ze}),[Et,mt]=(0,b.useState)(),{shouldShowLink:Pt,hasMultipleLinksOrActions:rt}=He(qe()),Kt=rt&&Et!==void 0,Gt=qe();return(0,v.jsx)("div",{...Oe,className:Ee.cellContainer,style:{...Oe.style,cursor:rt?"context-menu":"auto"},onClick:({clientX:en,clientY:st})=>{mt({clientX:en,clientY:st})},children:Pt?(0,O.h)(Gt[0],ht()):Kt?(0,v.jsx)(O.e,{links:Gt,value:ht(),coords:Et,onTooltipClose:()=>mt(void 0)}):ht()})};var K=e(86059);const U=ve=>{const{field:me,row:xe,cellProps:Ee,tableStyles:Pe}=ve,Oe=(0,K.k)(me,xe);return(0,v.jsx)("div",{...Ee,className:Pe.cellContainerText,children:Oe?.map((We,Fe)=>!We.href&&We.onClick==null?(0,v.jsx)("span",{className:Pe.cellLinkEmpty,children:We.title},Fe):(0,v.jsx)("span",{className:Pe.cellLink,onClick:We.onClick,children:(0,v.jsx)("a",{href:We.href,target:We.target,children:We.title})},Fe))})};var F=e(92745),I=e(76319),V=e(41654),M=e(36100);function L({field:ve,cell:me,previewMode:xe,showFilters:Ee,onCellFilterAdded:Pe,setInspectCell:Oe}){const We=se(ve)==="flex-end",Fe=!!ve.config.custom?.inspect,Be={size:"sm",tooltipPlacement:"top"},Le=(0,b.useCallback)(Ze=>{Pe&&Pe({key:ve.name,operator:M.mc,value:me.value})},[me,ve,Pe]),Ge=(0,b.useCallback)(Ze=>{Pe&&Pe({key:ve.name,operator:M.Zi,value:me.value})},[me,ve,Pe]);return(0,v.jsx)("div",{className:`cellActions${We?" cellActionsLeft":""}`,children:(0,v.jsxs)(V.B,{gap:.5,children:[Fe&&(0,v.jsx)(I.K,{name:"eye",tooltip:(0,F.t)("grafana-ui.table.cell-inspect","Inspect value"),onClick:()=>{Oe&&Oe({value:me.value,mode:xe})},...Be}),Ee&&(0,v.jsx)(I.K,{name:"search-plus",onClick:Le,tooltip:(0,F.t)("grafana-ui.table.cell-filter-on","Filter for value"),...Be}),Ee&&(0,v.jsx)(I.K,{name:"search-minus",onClick:Ge,tooltip:(0,F.t)("grafana-ui.table.cell-filter-out","Filter out value"),...Be})]})})}var N=e(64780);const W=ve=>{const{field:me,cell:xe,tableStyles:Ee,row:Pe,cellProps:Oe,frame:We,rowStyled:Fe,rowExpanded:Be,textWrapped:Le,height:Ge}=ve,Ze=!!me.config.custom?.inspect,qe=me.display(xe.value),at=ve.onCellFilterAdded&&me.config.filterable,ht=at&&xe.value!==void 0||Ze,Et=$e(me);let mt;const Pt=140;if(Et.type===u.ob.Custom){const pt=Et.cellComponent;mt=(0,v.jsx)(pt,{field:me,value:xe.value,rowIndex:Pe.index,frame:We})}else b.isValidElement(xe.value)?mt=xe.value:mt=(0,h.cN)(qe);const rt=typeof mt=="string",Kt=qe.text.length<=Pt&&/\s/.test(qe.text),Gt=G(Ee,Et,qe,Ze,rt,Kt,Le,Fe,Be);if(rt){let pt=Oe.style?.justifyContent;pt==="flex-end"?Oe.style={...Oe.style,textAlign:"right"}:pt==="center"&&(Oe.style={...Oe.style,textAlign:"center"})}Ge&&(Oe.style={...Oe.style,height:Ge}),Le&&(Oe.style={...Oe.style,textWrap:"wrap"});const{key:en,...st}=Oe,$t=(0,K.k)(me,Pe)||[],[xn,pn]=(0,b.useState)(),{shouldShowLink:_n,hasMultipleLinksOrActions:kn}=He($t),Jn=kn&&xn!==void 0;return(0,v.jsxs)("div",{...st,className:Gt,style:{...Oe.style,cursor:kn?"context-menu":"auto"},onClick:de(pn),children:[_n?(0,O.h)($t[0],mt,R(Ee,Et)):Jn?(0,v.jsx)(O.e,{links:$t,value:mt,coords:xn,onTooltipClose:()=>pn(void 0)}):rt?`${mt}`:(0,v.jsx)("div",{className:Ee.cellText,children:mt}),ht&&(0,v.jsx)(L,{...ve,previewMode:N.B.text,showFilters:at})]},en)},R=(ve,me)=>me.type===u.ob.Auto?ve.cellLink:ve.cellLinkForColoredCell;function G(ve,me,xe,Ee=!1,Pe=!1,Oe=!1,We=!1,Fe=!1,Be=!1){let Le,Ge,Ze;const qe=Ue(ve.theme,me,xe);return Le=qe.textColor,Ge=qe.bgColor,Ze=qe.bgHoverColor,ve.buildCellContainerStyle(Le,Ge,Ze,!Ee,Pe,Oe,We,Fe,Be)}var w=e(64136),_=e(27430);function Q(ve){const{cell:me,tableStyles:xe,cellProps:Ee}=ve;let Pe="";return me.value instanceof _.A?Pe=new w.A().writeGeometry(me.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):me.value!=null&&(Pe=`${me.value}`),(0,v.jsx)("div",{...Ee,className:xe.cellContainer,children:(0,v.jsx)("div",{className:xe.cellText,style:{fontFamily:"monospace"},children:Pe})})}const ae=10,q=ve=>{const{field:me,cell:xe,tableStyles:Ee,row:Pe,cellProps:Oe}=ve,We=$e(me),{title:Fe,alt:Be}=We.type===u.ob.Image?We:{title:void 0,alt:void 0},Le=me.display(xe.value),Ge=(0,K.k)(me,Pe)||[],[Ze,qe]=(0,b.useState)(),{shouldShowLink:at,hasMultipleLinksOrActions:ht}=He(Ge),Et=ht&&Ze!==void 0,mt=(0,v.jsx)("img",{style:{height:Ee.cellHeight-ae,width:"auto"},src:Le.text,className:Ee.imageCell,alt:Be,title:Fe});return(0,v.jsx)("div",{...Oe,className:Ee.cellContainer,style:{...Oe.style,cursor:ht?"context-menu":"auto"},onClick:de(qe),children:at?(0,O.h)(Ge[0],mt):Et?(0,v.jsx)(O.e,{links:Ge,value:mt,coords:Ze,onTooltipClose:()=>qe(void 0)}):mt})};function k(ve){const{cell:me,tableStyles:xe,cellProps:Ee,field:Pe,row:Oe}=ve,We=!!Pe.config.custom?.inspect,Fe=(0,p.css)({cursor:"pointer",fontFamily:"monospace"});let Be=me.value,Le=Be;if((0,n.isString)(Be))try{Be=JSON.parse(Be)}catch{}else try{Le=JSON.stringify(Be,null," ")}catch{Le=void 0}const Ge=(0,K.k)(Pe,Oe)||[],[Ze,qe]=(0,b.useState)(),{shouldShowLink:at,hasMultipleLinksOrActions:ht}=He(Ge),Et=ht&&Ze!==void 0;return(0,v.jsxs)("div",{...Ee,className:We?xe.cellContainerNoOverflow:xe.cellContainer,children:[(0,v.jsx)("div",{className:(0,p.cx)(xe.cellText,Fe),onClick:de(qe),children:at?(0,O.h)(Ge[0],Le):Et?(0,v.jsx)(O.e,{links:Ge,value:Le,coords:Ze,onTooltipClose:()=>qe(void 0)}):(0,v.jsx)("div",{className:xe.cellText,children:Le})}),We&&(0,v.jsx)(L,{...ve,previewMode:N.B.code})]})}var ee=e(93948),j=e(74533),J=e(30703);function Z({row:ve,tableStyles:me}){return(0,v.jsx)("div",{className:me.expanderCell,...ve.getToggleRowExpandedProps(),children:(0,v.jsx)(J.I,{"aria-label":ve.isExpanded?(0,F.t)("grafana-ui.row-expander.collapse","Collapse row"):(0,F.t)("grafana-ui.row-expander.expand","Expand row"),name:ve.isExpanded?"angle-down":"angle-right",size:"lg"})})}const te=50;function se(ve){if(!ve)return"flex-start";if(ve.config.custom)switch(ve.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return ve.type===r.PU.number?"flex-end":"flex-start"}function ie(ve,me,xe,Ee,Pe,Oe){const We=[];let Fe=0;Ee&&(We.push({Header:()=>null,id:"expander",Cell:Z,width:te,minWidth:te,filter:(Le,Ge,Ze)=>[],justifyContent:"left",field:ve.fields[0],sortType:"basic"}),me-=te);for(const[Le,Ge]of ve.fields.entries()){const Ze=Ge.config.custom||{};if(Ze.hidden||Ze.hideFrom?.viz||Ge.type===r.PU.nestedFrames)continue;Ze.width?me-=Ze.width:Fe++;const qe=ht=>{switch(ht){case r.PU.number:case r.PU.frame:return"number";case r.PU.time:return"basic";default:return"alphanumeric-insensitive"}},at=ce(Ze.cellOptions?.type,Ge);We.push({Cell:at,id:Le.toString(),field:Ge,Header:Ze.hideHeader?"":(0,c.Ct)(Ge,ve),accessor:(ht,Et)=>Ge.values[Et],sortType:qe(Ge.type),width:Ze.width,minWidth:Ze.minWidth??xe,filter:s()(re(Ge)),justifyContent:se(Ge),Footer:(0,j.d)(Le,Pe,Oe)})}let Be=me/Fe;for(let Le=Fe;Le>0;Le--)for(const Ge of We)!Ge.width&&Ge.minWidth>Be&&(Ge.width=Ge.minWidth,me-=Ge.width,Fe-=1,Be=me/Fe);for(const Le of We)Le.width||(Le.width=Be),Le.minWidth=50;return We}function ce(ve,me){switch(ve){case u.ob.Custom:case u.ob.ColorText:case u.ob.ColorBackground:return W;case u.ob.Image:return q;case u.ob.Gauge:return B;case u.ob.Sparkline:return ee.a;case u.ob.JSONView:return k;case u.ob.DataLinks:return U;case u.ob.Actions:return d;case u.ob.Pill:return W}if(me.type===r.PU.geo)return Q;if(me.type===r.PU.frame){const xe=me.values[0];return(0,i.ci)(xe)&&(0,o.aH)(xe)?ee.a:k}return me.type===r.PU.other?k:W}function re(ve){return function(me,xe,Ee){return me.length===0||!Ee||!ve?me:me.filter(Pe=>{if(!Pe.values.hasOwnProperty(xe))return!1;const Oe=X(Pe,ve);return Ee.find(We=>We.value===Oe)!==void 0})}}function ue(ve,me){if(!me||ve.length===0)return{};const xe={};for(let Ee=0;Ee<ve.length;Ee++){const Pe=X(ve[Ee],me);xe[Pe||"(Blanks)"]=Pe}return xe}function X(ve,me){if(!me||!ve)return"";const xe=me.values[ve.index],Ee=me.display?me.display(xe):xe;return me.display?(0,h.cN)(Ee):Ee}function le(ve){return Object.keys(ve).reduce((me,xe)=>me.concat({value:ve[xe],label:xe}),[]).sort(he)}function he(ve,me){return ve.label===void 0&&me.label===void 0?0:ve.label===void 0&&me.label!==void 0?-1:ve.label!==void 0&&me.label===void 0?1:ve.label<me.label?-1:ve.label>me.label?1:0}function fe(ve,me){return me?ve.filter(xe=>me.some(Ee=>Ee.value===xe.value)):[]}function Ce(ve,me,xe){return String(ve.values[xe]).localeCompare(String(me.values[xe]),void 0,{sensitivity:"base"})}function Ae(ve,me,xe){const Ee=_e(ve.values[xe]),Pe=_e(me.values[xe]);return Ee===Pe?0:Ee>Pe?1:-1}function _e(ve){return(0,i.LI)(ve)?ve.value??Number.NEGATIVE_INFINITY:ve==null||ve===""||isNaN(ve)?Number.NEGATIVE_INFINITY:typeof ve=="number"?ve:Number(ve)}function Xe(ve,me,xe,Ee){return Ke(ve),ve.map((Pe,Oe)=>{if(Pe?.field?.type!==r.PU.number)return Oe===0&&xe.reducer&&xe.reducer.length>0?f.AS.get(xe.reducer[0]).name:void 0;let We=(0,n.clone)(Pe.field);return We.values=me[Pe.id],We.state=void 0,Pe.field=We,xe.fields&&xe.fields.length>0?xe.fields.find(Be=>Be===Pe?.field?.name)?De(Pe.field,xe.reducer,Ee):void 0:De(Pe.field,xe.reducer||[],Ee)})}function De(ve,me,xe){const Ee=me[0];if(Ee===void 0)return"";const Pe=ve.display??(0,g.J)({field:ve,theme:xe}),Oe=(0,f.Nw)({field:ve,reducers:me})[Ee];return f.AS.get(Ee).preservesUnits?(0,h.cN)(Pe(Oe)):(0,h.cN)({text:Oe})}function Me(ve){const me=[];for(const xe in ve)for(const[Ee,Pe]of Object.entries(ve[xe].values))me[Ee]===void 0&&(me[Ee]=[]),me[Ee].push(Pe);return me}const Te={type:u.ob.Auto};function $e(ve){return ve.config.custom?.displayMode?Re(ve.config.custom?.displayMode):ve.config.custom?.cellOptions?ve.config.custom.cellOptions:Te}function Re(ve){switch(ve){case"basic":case"gradient-gauge":case"lcd-gauge":let me=u.eX.Basic;return ve==="gradient-gauge"?me=u.eX.Gradient:ve==="lcd-gauge"&&(me=u.eX.Lcd),{type:u.ob.Gauge,mode:me};case"color-background":case"color-background-solid":let xe=u.Wq.Basic;return ve==="color-background"&&(xe=u.Wq.Gradient),{type:u.ob.ColorBackground,mode:xe};default:return{type:ve}}}function Ke(ve){const me=ve.findIndex((xe,Ee)=>xe?.id!==String(Ee));me===-1||ve[me]?.id==="expander"||(ve.splice(me,0,{id:String(me)}),Ke(ve))}function Ve(ve,me,xe){let Ee=ve.state?.alignmentFactors;if(Ee)return(0,h.cN)(Ee).length<(0,h.cN)(me).length&&(Ee={...me},ve.state.alignmentFactors=Ee),Ee;{Ee={...me};const Pe=Math.min(ve.values.length,xe+1e3);for(let Oe=xe+1;Oe<Pe;Oe++){const We=ve.display(ve.values[Oe]);(0,h.cN)(Ee).length>(0,h.cN)(We).length&&(Ee.text=me.text)}return ve.state?ve.state.alignmentFactors=Ee:ve.state={alignmentFactors:Ee},Ee}}function Se(ve,me,xe){return Math.abs(Math.floor(ve)-me)<xe}function Ye(ve){let me=-Number.MAX_VALUE,xe=Number.MAX_VALUE;if(ve.values.length<2)return 0;for(let Ee=0;Ee<ve.values.length;Ee++){const Pe=ve.values[Ee];Pe>me&&(me=Pe),Pe<xe&&(xe=Pe)}return(me-xe)/ve.values.length}function Ue(ve,me,xe){const Ee=ve.isDark?1:-.7;let Pe,Oe,We;if(me.type===u.ob.ColorText)Pe=xe.color;else if(me.type===u.ob.ColorBackground){const Fe=me.mode??u.Wq.Gradient;if(Fe===u.Wq.Basic)Pe=(0,E.mZ)(xe.color,ve.isDark),Oe=(0,l.A)(xe.color).toRgbString(),We=(0,l.A)(xe.color).setAlpha(1).toRgbString();else if(Fe===u.Wq.Gradient){const Be=(0,l.A)(xe.color).setAlpha(1).toRgbString(),Le=(0,l.A)(xe.color).darken(10*Ee).spin(5);Pe=(0,E.mZ)(xe.color,ve.isDark),Oe=`linear-gradient(120deg, ${Le.toRgbString()}, ${xe.color})`,We=`linear-gradient(120deg, ${Le.setAlpha(1).toRgbString()}, ${Be})`}}return{textColor:Pe,bgColor:Oe,bgHoverColor:We}}function je(ve,me,xe,Ee,Pe,Oe=0){const We=Number(me?.width??300),Fe=1.17,Be=42,Le=Oe*2;if(xe!==null&&typeof ve=="string"){const Ge=ve.split(/\s/),Ze=[];let qe="",at=0,ht=0;for(let Pt=0;Pt<Ge.length;Pt++){const rt=Ge[Pt];let Kt=xe.measureText(qe+" "+rt).width;Kt<We-Le?(qe+=" "+rt,at++):(Ze.push({width:Kt,line:qe}),qe=rt,at=0)}for(let Pt=0;Pt<Ze.length;Pt++)if(Ze[Pt].width>We){let rt=Math.floor(Ze[Pt].width/We)-1;ht+=rt}let Et=Ze.length+ht,mt=38;return Et>5?mt=Et*Ee*Fe:mt=Et*Ee+Be,mt+=Le,{width:We,height:mt}}return{width:We,height:Pe}}function Qe(ve,me){let xe;if(ve.defaults.custom?.cellOptions?.wrapText){const Pe=me.fields.filter(Oe=>Oe.type===r.PU.string);if(Pe.length>=1&&Pe[0].values.length>0){const Oe=Pe[0].values.length;let We=0;if(Oe<=30)for(const Fe of Pe){const Be=Fe.values.find(Le=>Le!=null)?.length??0;Be>We&&(We=Be,xe=Fe)}else for(const Fe of Pe){const Be=(0,n.sampleSize)(Fe.values,3),Le=(Be[0]?.length+Be[1]?.length+Be[2]?.length)/3;Le>We&&(We=Le,xe=Fe)}}}return xe}const He=(ve,me)=>{const xe=ve.length>1||!!me?.length;return{shouldShowLink:ve.length===1&&!me?.length,hasMultipleLinksOrActions:xe}},Je=ve=>ve.target===ve.currentTarget,de=ve=>me=>{if(Je(me)){const{clientX:xe,clientY:Ee}=me;ve({clientX:xe,clientY:Ee})}}},74261:(ne,A,e)=>{"use strict";e.d(A,{EO:()=>B,H1:()=>x,NX:()=>y,OA:()=>p,Rt:()=>v,Uh:()=>P,ZU:()=>C,cg:()=>S,d$:()=>m,dA:()=>d,ix:()=>b,p3:()=>D,rW:()=>f,rs:()=>T});var n=e(81160),a=e(8721),s=e(11576),l=e(69884),r=e(95004),c=e(39443),i=e(79243),o=e(64761),h=e(34455);const f=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],g=30,u=[],E=(K,U)=>K-U,v={bucketCount:{name:"Bucket count",description:"approx bucket count"},bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},p={id:o.F.histogram,name:"Histogram",description:"Calculate a histogram from input data.",defaultOptions:{fields:{}},operator:(K,U)=>F=>F.pipe((0,n.T)(I=>p.transformer(K,U)(I))),transformer:(K,U)=>F=>{if(!Array.isArray(F)||F.length===0)return F;let I,V;K.bucketSize&&(typeof K.bucketSize=="string"?I=parseFloat(K.bucketSize):I=K.bucketSize,isNaN(I)&&(I=void 0)),K.bucketOffset&&(typeof K.bucketOffset=="string"?V=parseFloat(K.bucketOffset):V=K.bucketOffset,isNaN(V)&&(V=void 0));const M={bucketSize:I,bucketOffset:V,combine:K.combine},L=D(F,M);return L==null?[]:[S(L)]}},m="xMin";function y(K){return K===m||K==="BucketMin"}const d="xMax";function x(K){return K===d||K==="BucketMax"}function b(K){if(K.meta?.type===c.m.HeatmapCells){let V=K.fields.find(w=>w.name==="yMin"),M=K.fields.find(w=>w.name==="yMax"),L=K.fields.find(w=>w.name==="count"),N=[...new Set(M.values)].sort((w,_)=>w-_),W=[...new Set(V.values)].sort((w,_)=>w-_),R=new Map;N.forEach(w=>R.set(w,0));for(let w=0;w<M.values.length;w++){let _=M.values[w];R.set(_,R.get(_)+L.values[w])}return{xMin:{...V,name:"xMin",values:W},xMax:{...M,name:"xMax",values:N},counts:[{...L,values:[...R.values()]}]}}else if(K.meta?.type===c.m.HeatmapRows){let V=[],M=[],L=[],N="0";return K.fields.forEach(R=>{if(R.type===r.PU.number){let G=R.values.reduce((w,_)=>w+_,0);L.push(G),V.push(N),M.push(N=R.name)}}),L.push(0),V.push(N),M.push(N),{xMin:{...K.fields[1],name:"xMin",type:r.PU.string,values:V},xMax:{...K.fields[1],name:"xMax",type:r.PU.string,values:M},counts:[{...K.fields[1],name:"count",type:r.PU.number,values:L}]}}let U,F;const I=[];for(const V of K.fields)y(V.name)?U=V:x(V.name)?F=V:V.type===r.PU.number&&I.push(V);if(!F&&U&&U.values.length>1){let V=U.values,M=(0,i.h)(V[1]-V[0],6);F={...U,name:d,values:V.map(L=>L+M)}}if(!U&&F&&F?.values.length>1){let V=F.values,M=(0,i.h)(V[1]-V[0],6);U={...F,name:m,values:V.map(L=>L-M)}}if(U&&F&&I.length)return{xMin:U,xMax:F,counts:I}}function D(K,U,F){let I=U?.bucketSize,V=U?.bucketCount??g,M=U?.bucketOffset??0;if(K=K.map(ae=>({...ae,fields:ae.fields.map(q=>{if(q.type===r.PU.number){const k=Number(q.config.noValue);Number.isNaN(k)?q={...q,values:q.values.filter(ee=>ee!=null)}:q=(0,h.A)(q,k)}return q})})),!I||I<0){let ae=[];for(const Z of K)for(const te of Z.fields)te.type===r.PU.number&&(ae=ae.concat(te.values));ae.sort((Z,te)=>Z-te);let q=1/0;if(ae.length===1)q=1;else for(let Z=1;Z<ae.length;Z++){let te=ae[Z]-ae[Z-1];te!==0&&(q=Math.min(q,te))}let k=ae[0];const J=(ae[ae.length-1]-k)/V;for(let Z=0;Z<f.length;Z++){let te=f[Z];if(J<te&&te>=q){I=te;break}}}const L=ae=>(0,i.h)(T(ae-M,I)+M,9);let N=((""+I).match(/\.\d+$/)??["."])[0].length-1,W=[],R=[],G;for(const ae of K)for(const q of ae.fields)if(q.type===r.PU.number){let k=O(q.values,L,u,E);W.push(k);const ee={...q,config:{...q.config,unit:q.config.unit==="short"?"short":void 0}};ee.display=(0,s.J)({field:ee,theme:F??(0,l.a)()}),R.push(ee),!G&&q.config.unit&&(G=q.config)}if(!R.length)return null;let w=(0,a.fj)(W);for(let ae=1;ae<w.length;ae++){let q=w[ae];for(let k=0;k<q.length;k++)q[k]==null&&(q[k]=0)}const _={name:m,values:w[0],type:r.PU.number,state:void 0,config:N===0?G??{}:{...G,decimals:N}},Q={..._,name:d,values:w[0].map(ae=>ae+I)};if(U?.combine){const ae=new Array(w[0].length).fill(0);for(let q=1;q<w.length;q++)for(let k=0;k<ae.length;k++)ae[k]+=w[q][k];R=[{...R[0],name:"count",values:ae,type:r.PU.number,state:{...R[0].state,displayName:"Count",multipleFrames:!1,origin:{frameIndex:0,fieldIndex:2}}}]}else R.forEach((ae,q)=>{ae.values=w[q+1]});return{xMin:_,xMax:Q,counts:R}}function C(K,U){return Math.round(K/U)*U}function P(K,U){return Math.ceil(K/U)*U}function T(K,U){return Math.floor(K/U)*U}function O(K,U,F,I){let V=new Map;for(let W=0;W<K.length;W++){let R=K[W];R!=null&&(R=U(R));let G=V.get(R);G?G.count++:V.set(R,{value:R,count:1})}F&&F.forEach(W=>V.delete(W));let M=[...V.values()];I&&M.sort((W,R)=>I(W.value,R.value));let L=Array(M.length),N=Array(M.length);for(let W=0;W<M.length;W++)L[W]=M[W].value,N[W]=M[W].count;return[L,N]}function S(K,U){if(!K.xMin.display){const F=(0,s.J)({field:K.xMin,theme:U??(0,l.a)()});K.xMin.display=F,K.xMax.display=F}return{length:K.xMin.values.length,meta:{type:c.m.Histogram},fields:[K.xMin,K.xMax,...K.counts],refId:`${o.F.histogram}`}}function B(K){if(K.length===1)return K[0];let U=(0,a.Fd)({frames:K.map(L=>({length:L.xMax.values.length,fields:[L.xMax,L.xMin,...L.counts]})),joinBy:L=>L.name==="xMax"}),F=null,I=null,V=[];return U.fields.forEach(L=>{if(L.name==="xMax")F=L;else if(L.name==="xMin")if(I==null)I=L;else for(let N=0;N<L.values.length;N++)I.values[N]??=L.values[N];else V.push({...L,values:L.values.map(N=>N??0)})}),{xMin:I,xMax:F,counts:V}}},74267:(ne,A,e)=>{"use strict";e.d(A,{$u:()=>R,A5:()=>q,Bc:()=>k,DX:()=>I,JI:()=>U,Jc:()=>V,Kg:()=>F,MV:()=>m,N6:()=>x,P3:()=>C,Pi:()=>P,T$:()=>O,TK:()=>v,VR:()=>S,Vk:()=>w,hG:()=>d,hU:()=>L,is:()=>ee,kz:()=>u,ly:()=>p,mI:()=>K,nM:()=>W,nh:()=>D,nr:()=>y,pm:()=>B,xq:()=>Q,yd:()=>G});var n=e(2543),a=e.n(n),s=e(80011),l=e(68143),r=e(62061),c=e(36490),i=e(65642),o=e(73427),h=e(81871),f=e(11257),g=e(52695);function u(j){return async J=>{try{J((0,g.D1)(!1)),await J(E(j)),await J(b(j)),await J(T(j)),i.Ay.ldapEnabled&&(0,r.a)("ldapsync")&&await J(B()),J((0,g.D1)(!0))}catch(Z){if(console.error(Z),(0,l.NF)(Z)){const te={title:Z.data.message,body:Z.data.error};J((0,g.PV)(te))}}}}function E(j){return async J=>{const Z=await(0,l.AI)().get(`/api/users/${j}`,(0,h.F)());J((0,g.G_)(Z))}}function v(j){return async J=>{await(0,l.AI)().put(`/api/users/${j.uid}`,j),J(u(j.uid))}}function p(j,J){return async Z=>{const te={password:J};await(0,l.AI)().put(`/api/admin/users/${j}/password`,te),Z(u(j))}}function m(j){return async J=>{await(0,l.AI)().post(`/api/admin/users/${j}/disable`),c.Ny.push("/admin/users")}}function y(j){return async J=>{await(0,l.AI)().post(`/api/admin/users/${j}/enable`),J(u(j))}}function d(j){return async J=>{await(0,l.AI)().delete(`/api/admin/users/${j}`),c.Ny.push("/admin/users")}}function x(j,J){return async Z=>{const te={isGrafanaAdmin:J};await(0,l.AI)().put(`/api/admin/users/${j}/permissions`,te),Z(u(j))}}function b(j){return async J=>{const Z=await(0,l.AI)().get(`/api/users/${j}/orgs`);J((0,g.OF)(Z))}}function D(j,J,Z){return async te=>{const se={loginOrEmail:j.login,role:Z};await(0,l.AI)().post(`/api/orgs/${J}/users/`,se),te(u(j.uid))}}function C(j,J,Z){return async te=>{const se={role:Z};await(0,l.AI)().patch(`/api/orgs/${J}/users/${j}`,se),te(u(j))}}function P(j,J){return async Z=>{await(0,l.AI)().delete(`/api/orgs/${J}/users/${j}`),Z(u(j))}}function T(j){return async J=>{if(!o.TP.hasPermission(f.w.UsersAuthTokenList))return;const Z=await(0,l.AI)().get(`/api/admin/users/${j}/auth-tokens`);Z.reverse();const te=Z.map(se=>({id:se.id,isActive:se.isActive,seenAt:(0,s.fq)(se.seenAt),createdAt:se.createdAt,clientIp:se.clientIp,browser:se.browser,browserVersion:se.browserVersion,authModule:se.authModule,os:se.os,osVersion:se.osVersion,device:se.device}));J((0,g.ag)(te))}}function O(j,J){return async Z=>{const te={authTokenId:j};await(0,l.AI)().post(`/api/admin/users/${J}/revoke-auth-token`,te),Z(T(J))}}function S(j){return async J=>{await(0,l.AI)().post(`/api/admin/users/${j}/logout`),J(T(j))}}function B(){return async j=>{const J=o.TP.hasPermission(f.w.LDAPStatusRead);if((0,r.a)("ldapsync")&&J){const Z=await(0,l.AI)().get("/api/admin/ldap-sync-status");j((0,g.OR)(Z))}}}function K(j,J){return async Z=>{await(0,l.AI)().post(`/api/admin/ldap/sync/${j}`),Z(u(J))}}function U(){return async j=>{if(o.TP.hasPermission(f.w.LDAPStatusRead))try{const J=await(0,l.AI)().get("/api/admin/ldap/status");j((0,g.pH)(J))}catch(J){if((0,l.NF)(J)){J.isHandled=!0;const Z={title:J.data.message,body:J.data.error};j((0,g.V$)(Z))}}}}function F(j){return async J=>{try{const Z=await(0,l.AI)().get(`/api/admin/ldap/${encodeURIComponent(j)}`),{name:te,surname:se,email:ie,login:ce,isGrafanaAdmin:re,isDisabled:ue,roles:X,teams:le}=Z,he={info:{name:te,surname:se,email:ie,login:ce},permissions:{isGrafanaAdmin:re,isDisabled:ue},roles:X,teams:le};J((0,g.TW)(he))}catch(Z){if((0,l.NF)(Z)){Z.isHandled=!0;const te={title:Z.data.message,body:Z.data.error};J((0,g.Vv)()),J((0,g.Nf)(te))}}}}function I(){return j=>{j((0,g.zi)())}}function V(){return j=>{j((0,g.zi)()),j((0,g.Vv)())}}const M=j=>j.map(J=>Array.isArray(J.value)?J.value.map(Z=>`${J.name}=${Z.value}`).join("&"):`${J.name}=${J.value}`).join("&");function L(){return async(j,J)=>{try{const{perPage:Z,page:te,query:se,filters:ie,sort:ce}=J().userListAdmin;let re=`/api/users/search?perpage=${Z}&page=${te}&query=${se}&${M(ie)}`;ce&&(re+=`&sort=${ce}`);const ue=await(0,l.AI)().get(re);j((0,g.Mb)(ue))}catch(Z){(0,g.g4)(),console.error(Z)}}}const N=(0,n.debounce)(j=>j(L()),500);function W(j){return async J=>{J((0,g.Cj)()),J((0,g.L5)(j)),N(J)}}function R(j){return async J=>{J((0,g.Cj)()),J((0,g.jX)(j)),N(J)}}function G(j){return async J=>{J((0,g.Cj)()),J((0,g.EC)(j)),J(L())}}function w({sortBy:j}){const J=j.length?`${j[0].id}-${j[0].desc?"desc":"asc"}`:void 0;return async(Z,te)=>{te().userListAdmin.sort!==J&&(Z((0,g.Cj)()),Z((0,g.$u)(J)),Z(L()))}}const _=j=>j.map(J=>Array.isArray(J.value)?J.value.map(Z=>`${J.name}=${Z.value}`).join("&"):`${J.name}=${J.value}`).join("&");function Q(){return async(j,J)=>{try{const{perPage:Z,page:te,query:se,filters:ie,sort:ce}=J().userListAnonymousDevices;let re=`/api/anonymous/search?perpage=${Z}&page=${te}&query=${se}&${_(ie)}`;ce&&(re+=`&sort=${ce}`);const ue=await(0,l.AI)().get(re);j((0,g.o3)(ue))}catch(Z){console.error(Z)}}}const ae=(0,n.debounce)(j=>j(Q()),500);function q({sortBy:j}){const J=j.length?`${j[0].id}-${j[0].desc?"desc":"asc"}`:void 0;return async(Z,te)=>{te().userListAnonymousDevices.sort!==J&&(Z((0,g.kh)(J)),Z(Q()))}}function k(j){return async J=>{J((0,g.xx)(j)),ae(J)}}function ee(j){return async J=>{J((0,g.iK)(j)),J(Q())}}},74268:(ne,A,e)=>{"use strict";e.d(A,{AK:()=>O,Cl:()=>W,D0:()=>_,D_:()=>k,Ey:()=>U,FF:()=>g,Gn:()=>C,Hs:()=>w,IR:()=>D,KF:()=>v,Ke:()=>m,Ks:()=>Q,O$:()=>te,P6:()=>R,Pq:()=>F,QA:()=>ae,Rh:()=>S,Rk:()=>b,Sq:()=>d,Tc:()=>V,U6:()=>L,U7:()=>E,XW:()=>K,Yk:()=>T,Zc:()=>q,a5:()=>ee,aL:()=>M,cg:()=>B,fH:()=>o,iF:()=>I,iH:()=>J,iW:()=>G,l$:()=>f,lC:()=>ie,le:()=>i,nf:()=>x,oY:()=>j,pf:()=>Z,t6:()=>N,vO:()=>P,vV:()=>h,xd:()=>u});var n=e(2543),a=e.n(n),s=e(43173),l=e(27489),r=e(25992),c=e(73427);const i={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",recordingRuleFromScratch:"creating recording rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError",grafanaRecording:"creating Grafana recording rule from scratch",loadedCentralAlertStateHistory:"loaded central alert state history",exportNewGrafanaRule:"exporting new Grafana rule",noAlertRuleVersionsFound:"no alert rule versions found"},{logInfo:o,logError:h,logMeasurement:f,logWarning:g}=(0,r.DW)("features.alerting",{module:"Alerting"});function u(ce,re,ue={}){return async function(...X){const le=`${re}:start`;performance.mark(le);const he=await ce(...X),fe=performance.measure(re,le);return f(re,{duration:fe.duration,loadTimesMs:fe.duration},ue),he}}function E(ce,re,ue){return async(...X)=>{const le=performance.now(),he=await re(...X),{namespacesCount:fe,groupsCount:Ce,rulesCount:Ae}=p(he);return f(ce,{loadTimeMs:performance.now()-le,namespacesCount:fe,groupsCount:Ce,rulesCount:Ae},ue),he}}function v(ce){Object.entries(ce).forEach(([re,ue])=>{const X=ue.message??"unknown error",le=String(ue.type)??"unknown",he=new Error(X);h(he,{field:re,type:le})})}function p(ce){const re=ce.length,ue=ce.flatMap(he=>he.groups).length,X=ce.flatMap(he=>he.groups).flatMap(he=>he.rules).length;return{namespacesCount:re,groupsCount:ue,rulesCount:X}}function m(ce,re,ue){return async(...X)=>{const le=performance.now(),he=await re(...X),{namespacesCount:fe,groupsCount:Ce,rulesCount:Ae}=y(he);return f(ce,{namespacesCount:fe,groupsCount:Ce,rulesCount:Ae,loadTimeMs:performance.now()-le},ue),he}}function y(ce){const re=Object.keys(ce),ue=Object.values(ce).flatMap(le=>le),X=ue.flatMap(le=>le.rules);return{namespacesCount:re.length,groupsCount:ue.length,rulesCount:X.length}}const d=async(ce={grafana_version:s.$.buildInfo.version,org_id:c.TP.user.orgId,user_id:c.TP.user.id})=>{(0,l.rR)("grafana_alerting_navigation",ce)},x=ce=>{(0,l.rR)("grafana_alerting_rule_creation",ce)},b=ce=>{(0,l.rR)("grafana_alerting_rule_aborted",ce)},D=ce=>{(0,l.rR)("grafana_alerting_rule_form_error",ce)},C=ce=>{(0,l.rR)("grafana_alerting_grafana_rule_creation_new_success",ce)},P=()=>{(0,l.rR)("grafana_alerting_grafana_rule_creation_new_aborted")},T=()=>{(0,l.rR)("grafana_alerting_grafana_rule_creation_new_error")},O=async ce=>{const re={grafana_version:s.$.buildInfo.version,org_id:c.TP.user.orgId,user_id:c.TP.user.id};(0,l.rR)("grafana_alerting_insights",{...re,...ce})},S=async ce=>{(0,l.rR)("grafana_alerting_rule_versions_comparison_click",{...ce})},B=async ce=>{(0,l.rR)("grafana_alerting_rule_versions_restore_success",{...ce})},K=async ce=>{(0,l.rR)("grafana_alerting_rule_versions_restore_error",{...ce})},U=async()=>{(0,l.rR)("grafana_alerting_deleted_rule_restore_success")},F=async()=>{(0,l.rR)("grafana_alerting_deleted_rule_restore_error")},I=async ce=>{(0,l.rR)("grafana_alerting_import_to_gma_success",{...ce})},V=async ce=>{(0,l.rR)("grafana_alerting_import_to_gma_error",{...ce})};function M(ce){(0,l.rR)("grafana_alerting_rules_list_mode",{...ce})}function L(){(0,l.rR)("grafana_alerting_contact_point_form_edit_input_with_template")}function N(){(0,l.rR)("grafana_alerting_contact_point_form_use_custom_input_in_template")}function W(){(0,l.rR)("grafana_alerting_contact_point_form_use_single_template_in_input")}function R(ce){(0,l.rR)("grafana_alerting_central_alert_state_history_filter_by_clicking",ce)}function G(){(0,l.rR)("grafana_alerting_central_alert_state_history_expand_row")}function w(ce){(0,l.rR)("grafana_alerting_central_alert_state_history_max_events_reached",ce)}function _(){(0,l.rR)("grafana_alerting_folder_bulk_actions_delete_success")}function Q(){(0,l.rR)("grafana_alerting_folder_bulk_actions_delete_fail")}function ae(){(0,l.rR)("grafana_alerting_folder_bulk_actions_pause_success")}function q(){(0,l.rR)("grafana_alerting_folder_bulk_actions_unpause_success")}function k(){(0,l.rR)("grafana_alerting_folder_bulk_actions_pause_fail")}function ee(){(0,l.rR)("grafana_alerting_folder_bulk_actions_unpause_fail")}function j(){(0,l.rR)("grafana_alerting_filter_button_click")}function J(ce){if(ce.filterMethod==="search-input"){const re=se(ce.filter);(0,l.rR)("grafana_alerting_rules_filter",{...re,filterMethod:"search-input"});return}(0,l.rR)("grafana_alerting_rules_filter",{filter:ce.filter,filterMethod:"filter-component"})}function Z(ce,re){ce!==""&&re===""&&(0,l.rR)("grafana_alerting_rules_filter_cleared",{filterMethod:"search-input"})}function te(ce,re){const ue=se(ce,{pluginsFilterEnabled:re});(0,l.rR)("grafana_alerting_rules_filter",{...ue,filterMethod:"filter-component"})}function se(ce,re){const{pluginsFilterEnabled:ue=!0}=re??{};return(0,n.pickBy)(ce,(X,le)=>!(X==null||X===""||Array.isArray(X)&&X.length===0||X==="*"||le==="plugins"&&!ue||le==="plugins"&&X==="show"))}function ie(){(0,l.rR)("grafana_alerting_rules_filter_cleared",{filterMethod:"filter-component"})}},74276:(ne,A,e)=>{"use strict";e.d(A,{$O:()=>h,Dd:()=>f,i3:()=>l,kH:()=>i,pu:()=>o});var n=e(65307),a=e(88813),s=e(88681);const l={uid:null,status:a.x8.NotStarted,isDirty:!1},r=(0,n.Z0)({name:"templating/transaction",initialState:l,reducers:{variablesInitTransaction:(g,u)=>{g.uid=u.payload.uid,g.status=a.x8.Fetching},variablesCompleteTransaction:(g,u)=>{g.uid===u.payload.uid&&(g.status=a.x8.Completed)},variablesClearTransaction:(g,u)=>{g.uid=null,g.status=a.x8.NotStarted,g.isDirty=!1}},extraReducers:g=>g.addMatcher(c,(u,E)=>{u.status===a.x8.Completed&&(u.isDirty=!0)})});function c(g){return s.Hr.match(g)||s.QV.match(g)||s.QP.match(g)||s.hj.match(g)||s.ut.match(g)||s.l_.match(g)}const{variablesInitTransaction:i,variablesClearTransaction:o,variablesCompleteTransaction:h}=r.actions,f=r.reducer},74396:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>o,Bz:()=>c,bK:()=>r,n:()=>l});var n=e(65307);const a={organization:{},userOrgs:[]},s=(0,n.Z0)({name:"organization",initialState:a,reducers:{organizationLoaded:(h,f)=>({...h,organization:f.payload}),setOrganizationName:(h,f)=>({...h,organization:{...h.organization,name:f.payload}}),userOrganizationsLoaded:(h,f)=>({...h,userOrgs:f.payload})}}),{setOrganizationName:l,organizationLoaded:r,userOrganizationsLoaded:c}=s.actions,o={organization:s.reducer}},74440:(ne,A,e)=>{"use strict";e.d(A,{o:()=>s,y:()=>a});var n=e(99885);function a(l){return l==null?"":l.label??l.value.toString()}function s(l,r,c){return(0,n.X)(r,c).map(o=>l[o])}},74451:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({children:c})=>{const i=(0,s.of)(r);return(0,n.jsx)("div",{className:i.container,children:c})},r=c=>({container:(0,a.css)({borderLeft:`3px solid ${c.colors.info.main}`,backgroundColor:`${c.colors.background.secondary}`,padding:c.spacing(2),minWidth:"350px",borderRadius:c.shape.radius.default,marginBottom:c.spacing(4)})})},74475:(ne,A,e)=>{"use strict";e.d(A,{M:()=>f});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(96540),c=e(63142),i=e(35484),o=e(30703),h=e(68079);const f=({label:u,isOpen:E,onToggle:v,className:p,contentClassName:m,children:y,labelId:d,loading:x=!1,headerDataTestId:b,contentDataTestId:D,unmountContentWhenClosed:C=!0})=>{const[P,T]=(0,r.useState)(E),O=(0,c.of)(g),S=E!==void 0&&v!==void 0,B=S?E:P,K=V=>{V.target instanceof HTMLElement&&V.target.tagName==="A"||(V.preventDefault(),V.stopPropagation(),v?.(!E),S||T(!P))},{current:U}=(0,r.useRef)((0,s.uniqueId)()),F=d??`collapse-label-${U}`,I=(0,n.jsx)("div",{id:`collapse-content-${U}`,className:(0,a.cx)(O.content,m,{[O.contentHidden]:!C&&!B}),"data-testid":D,children:y});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{onClick:K,className:(0,a.cx)(O.header,p),children:[(0,n.jsx)("button",{type:"button",id:`collapse-button-${U}`,className:O.button,onClick:K,"aria-expanded":B&&!x,"aria-controls":`collapse-content-${U}`,"aria-labelledby":F,children:x?(0,n.jsx)(h.y,{className:O.spinner}):(0,n.jsx)(o.I,{name:B?"angle-up":"angle-down",className:O.icon})}),(0,n.jsx)("div",{className:O.label,id:`collapse-label-${U}`,"data-testid":b,children:u})]}),C?B&&I:I]})},g=u=>({header:(0,a.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:u.typography.size.lg,padding:`${u.spacing(.5)} 0`,"&:focus-within":(0,i.getFocusStyles)(u)}),button:(0,a.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,a.css)({color:u.colors.text.secondary}),content:(0,a.css)({padding:`${u.spacing(2)} 0`}),contentHidden:(0,a.css)({display:"none"}),spinner:(0,a.css)({display:"flex",alignItems:"center",width:u.spacing(2)}),label:(0,a.css)({display:"flex",fontWeight:u.typography.fontWeightMedium,color:u.colors.text.maxContrast})})},74529:(ne,A,e)=>{"use strict";e.d(A,{E9:()=>i,Q7:()=>c,Ri:()=>o,V3:()=>E,WT:()=>h,dU:()=>r,di:()=>g,pp:()=>u,vd:()=>f});var n=e(66907),a=e(60365),s=e(47402);const l={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function r(p,m=!0){if((0,s.d)(p.start,p.end))return"";const y=(0,a.F)(p);return c(y,m)}function c(p,m){return Object.entries(p).reduce((y,[d,x])=>x&&x!==0&&!(d==="seconds"&&!m&&y)?y+`${y!==""?" ":""}${x}${l[d][0]}`:y,"")}function i(p){return p.split(" ").reduce((m,y)=>{const d=y.match(/(\d+)(.+)/),x=d?.[1],b=d?.[2];if(!(x&&b))return m;const D=Object.entries(l).find(([P,T])=>T?.includes(d[2])),C=parseInt(x,10);return D?{...m,[D[0]]:C}:m},{})}function o(p,m){return(0,n.W)(p,m)}function h(p){const m=new Date;return o(m,p).getTime()-m.getTime()}function f(p){return!isNaN(Date.parse(p))}function g(p){for(const m of p.trim().split(" ")){const y=m.match(/(\d+)(.+)/);if(y===null||y.length!==3||!Object.entries(l).find(([x,b])=>b?.includes(y[2]))?.[0])return!1}return!0}function u(p){return v(p,["h","m","s","ms","us","\xB5s","ns"])}function E(p){return v(p,["y","M","w","d","h","m","s","ms","us","\xB5s","ns"])}function v(p,m){for(const y of p.trim().split(" ")){const d=y.match(/([0-9]*[.]?[0-9]+)(.+)/);if(d===null||d.length!==3||!m.includes(d[2]))return!1}return!0}},74533:(ne,A,e)=>{"use strict";e.d(A,{u:()=>o,d:()=>f});var n=e(74848),a=e(96540),s=e(46644),l=e(51898),r=e(22803);const c=g=>{const u=(0,r.css)({width:"100%",listStyle:"none"}),E=(0,r.css)({width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between"});return g.value&&!Array.isArray(g.value)?(0,n.jsx)("span",{children:g.value}):g.value&&Array.isArray(g.value)&&g.value.length>0?(0,n.jsx)("ul",{className:u,children:g.value.map((v,p)=>{const m=Object.keys(v)[0];return(0,n.jsxs)("li",{className:E,children:[(0,n.jsx)("span",{children:m}),(0,n.jsx)("span",{children:v[m]})]},p)})}):i},i=()=>(0,n.jsx)("span",{children:"\xA0"});function o(g){const{totalColumnsWidth:u,footerGroups:E,isPaginationVisible:v,tableStyles:p}=g,m=l.Tp.components.Panels.Visualization.Table;return(0,n.jsx)("div",{style:{position:v?"relative":"absolute",width:u?`${u}px`:"100%",bottom:"0px"},children:E.map(y=>{const{key:d,...x}=y.getFooterGroupProps();return(0,a.createElement)("div",{className:p.tfoot,...x,key:d,"data-testid":m.footer},y.headers.map(b=>h(b,p)))})})}function h(g,u){const{key:E,...v}=g.getHeaderProps();return v?(v.style=v.style??{},v.style.position="absolute",v.style.justifyContent=g.justifyContent,(0,n.jsx)("div",{className:u.headerCell,...v,children:g.render("Footer")},E)):null}function f(g,u,E){if(u===void 0)return i;if(E){if(u[g]===void 0)return i;const v=s.AS.get(s.gy.count).name;return c({value:[{[v]:String(u[g])}]})}return c({value:u[g]})}},74618:(ne,A,e)=>{"use strict";e.d(A,{$:()=>E});var n=e(74848),a=e(96540),s=e(33239),l=e(92745),r=e(75234),c=e(90811),i=e(5857),o=e(51158),h=e(73427),f=e(15130),g=e(75421),u=e(87745);class E extends a.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=p=>{(0,g.jG)().setAutoRefresh(p),this.forceUpdate()},this.onRefresh=()=>((0,g.jG)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{h.lE.publish(new u.Io({direction:u.xL.Left}))},this.onMoveForward=()=>{h.lE.publish(new u.Io({direction:u.xL.Right}))},this.onChangeTimePicker=p=>{const{dashboard:m}=this.props,y=m.timepicker,d=y.nowDelay&&p.raw.to==="now",x=s.isMathString(p.raw.from)?p.raw.from:p.from,b=s.isMathString(p.raw.to)?p.raw.to:p.to,D={from:x,to:d?"now-"+y.nowDelay:b};(0,g.jG)().setTime(D)},this.onChangeTimeZone=p=>{this.props.dashboard.timezone=p,this.props.onChangeTimeZone(p),this.onRefresh()},this.onChangeFiscalYearStartMonth=p=>{this.props.dashboard.fiscalYearStartMonth=p,this.onRefresh()},this.onZoom=()=>{this.props.onToolbarZoomClick&&this.props.onToolbarZoomClick(),h.lE.publish(new u.U0({scale:2}))},this.onRefreshClick=()=>{this.props.onToolbarRefreshClick&&this.props.onToolbarRefreshClick(),this.onRefresh()}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(r.sR,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:p,isOnCanvas:m}=this.props,{quick_ranges:y,refresh_intervals:d}=p.timepicker,x=(0,g.jG)().getValidIntervals(d||c.cb),b=(0,g.jG)().timeRange(),D=p.getTimezone(),C=p.fiscalYearStartMonth,P=p.panelInEdit?.isEditing,T=p.weekStart;let O;return p.refresh===f.SM&&(O=(0,g.jG)().getAutoRefreshInteval().interval),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.mR,{value:b,onChange:this.onChangeTimePicker,timeZone:D,fiscalYearStartMonth:C,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:m,onToolbarTimePickerClick:this.props.onToolbarTimePickerClick,weekStart:(0,i.rE)(T)?T:void 0,quickRanges:y}),(0,n.jsx)(c.cC,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefreshClick,value:p.refresh,intervals:x,isOnCanvas:m,tooltip:(0,l.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:P,showAutoInterval:!0,text:O})]})}}},74746:(ne,A,e)=>{"use strict";e.d(A,{Ck:()=>ce,Dk:()=>ae,Dm:()=>_,Dx:()=>G,EK:()=>S,Ei:()=>L,Hw:()=>W,K7:()=>X,M1:()=>F,PO:()=>ie,R:()=>q,Tj:()=>B,Vu:()=>re,XM:()=>O,a8:()=>ee,dO:()=>Z,e3:()=>Q,kA:()=>j,oR:()=>M,oT:()=>w,qR:()=>N,s:()=>ue,s2:()=>K,tX:()=>k,zy:()=>V});var n=e(4213),a=e.n(n),s=e(2543),l=e.n(s),r=e(75505),c=e(81160),i=e(739),o=e(10279),h=e(18700),f=e(41119),g=e(16515),u=e(92138),E=e(5556),v=e(2197),p=e(25229),m=e(80011),y=e(22592),d=e(67770),x=e(95004),b=e(92745),D=e(65642),C=e(67155),P=e(7542),T=e(62215);function O(he){if(!he)return d.$b.unknown;let fe=d.$b.unknown,Ce;for(const[Ae,_e]of Object.entries(d.$b)){const De=new RegExp(`\\b${Ae}\\b`,"i").exec(he);De&&(Ce===void 0||De.index<Ce)&&(fe=_e,Ce=De.index)}return fe}function S(he){const fe=d.$b[he.toString().toLowerCase()];if(fe)return fe;if(typeof he=="string"){const Ce=parseInt(he,10);if(he.length===Ce.toString().length)return d.s5[he]||d.$b.unknown}else if(typeof he=="number")return d.s5[he]||d.$b.unknown;return d.$b.unknown}function B(he,fe){const Ce=he.filter(Xe=>Xe.labels[fe]!==void 0),Ae=Ce.length,_e=(0,s.countBy)(Ce,Xe=>Xe.labels[fe]);return U(_e,Ae)}function K(he){const fe=he.filter(Ae=>Ae!=null),Ce=(0,s.countBy)(fe);return U(Ce,fe.length)}const U=(he,fe)=>(0,s.chain)(he).map((Ce,Ae)=>({count:Ce,value:Ae,proportion:Ce/fe})).sortBy("count").reverse().value(),F=(he,fe)=>he.timeEpochMs<fe.timeEpochMs?-1:he.timeEpochMs>fe.timeEpochMs?1:he.timeEpochNs<fe.timeEpochNs?-1:he.timeEpochNs>fe.timeEpochNs?1:0,I=(he,fe)=>he.timeEpochMs>fe.timeEpochMs?-1:he.timeEpochMs<fe.timeEpochMs?1:he.timeEpochNs>fe.timeEpochNs?-1:he.timeEpochNs<fe.timeEpochNs?1:0,V=(he,fe)=>{const Ce=he?M(he.rows,fe):[];return he?{...he,rows:Ce}:{hasUniqueLabels:!1,rows:Ce}},M=(he,fe)=>fe===i.uH.Ascending?he.sort(F):he.sort(I),L=he=>he.labels.__error__,N=he=>{if(he.labels.__adaptive_logs_sampled__)return he.labels.__adaptive_logs_sampled__==="true"?"Logs like this one have been dropped by Adaptive Logs":`${he.labels.__adaptive_logs_sampled__}% of logs like this one have been dropped by Adaptive Logs`},W=he=>he.replace(/\\r\\n|\\n|\\t|\\r/g,fe=>fe.slice(1)==="t"?"	":`
`);function R(he){return he.map(fe=>{const Ce=(0,T.FE)(fe).reduce((Ae,_e)=>{const Xe=_e.keys[0];return Ae[Xe]=_e.values[0],Ae},{});return{line:fe.entry,timestamp:fe.timeEpochNs,date:(0,p.KQ)(fe.timeEpochMs).toISOString(),fields:{...Ce,...fe.labels}}})}const G=he=>{let fe={from:1/0,to:-1/0};return he.forEach(Ce=>{const Ae=Ce.meta?.custom||{};Ae.absoluteRange?.from&&Ae.absoluteRange?.to&&(fe={from:Math.min(fe.from,Ae.absoluteRange.from),to:Math.max(fe.to,Ae.absoluteRange.to)})}),fe},w=he=>{if(he.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const fe={},Ce={};let Ae=-1/0;const _e={};let Xe=[];return he.forEach(De=>{const{level:Me,valueField:Te,timeField:$e}=k(De,he);if(!(!$e||!Te)){_e[Me]={meta:De.meta,valueFieldConfig:Te?.config??{},timeFieldConfig:$e?.config??{}};for(let Re=0;Re<De.length;Re++){const Ke=$e.values[Re],Ve=Te.values[Re];fe[Me]??={},fe[Me][Ke]=(fe[Me][Ke]||0)+Ve,Ce[Ke]=(Ce[Ke]||0)+Ve,Ce[Ke]>Ae&&(Ae=Ce[Ke])}}}),Object.keys(fe).forEach(De=>{const Me=new h.k,{meta:Te,timeFieldConfig:$e,valueFieldConfig:Re}=_e[De];Me.name=De,Me.meta=Te,Me.addField({name:"Time",type:x.PU.time,config:$e}),Me.addField({name:"Value",type:x.PU.number,config:Re}),Object.entries(fe[De]).sort((Ke,Ve)=>Number(Ke[0])-Number(Ve[0])).forEach(([Ke,Ve])=>{Me.add({Time:Number(Ke),Value:Ve})}),Xe.push(Me)}),{dataFrames:Xe,maximum:Ae}},_=he=>{const fe=he[0]?.meta?.custom;return fe&&fe.datasourceName?{name:fe.datasourceName}:null},Q=he=>he[0]?.meta?.custom?.logsVolumeType===d.Aj.Limited,ae=async(he,fe)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(he);{const Ce=document.createElement("textarea");fe.current?.appendChild(Ce),Ce.value=he,Ce.focus(),Ce.select(),document.execCommand("copy"),Ce.remove()}};async function q(he,fe,Ce,Ae){if(Ce&&(he.nativeEvent.ctrlKey||he.nativeEvent.metaKey||he.nativeEvent.shiftKey)){const _e=window.open("about:blank"),Xe=await Ce(fe,void 0,!1);if(Xe&&_e){const De=E.kM.renderUrl(u.I.assureBaseUrl(`${(0,D.zj)().appSubUrl}explore`),{left:JSON.stringify({datasource:Xe.datasource,queries:[Xe],range:(0,y.E2)()})});_e.location=De;return}_e?.close()}Ae(fe)}function k(he,fe){const Ce=new o.L(he),Ae=Ce.getFirstFieldOfType(x.PU.time),_e=Ce.getFirstFieldOfType(x.PU.number);return Ae||console.error("Time field missing in data frame"),_e||console.error("Value field missing in data frame"),{level:_e?(0,g.Ct)(_e,he,fe):"logs",valueField:_e,timeField:Ae}}function ee(he){return he instanceof Element}function j(){const he=new Set;return function(fe){let Ce=`${fe.dataFrame.refId}_${fe.rowId?fe.rowId:`${fe.timeEpochNs}_${fe.entry}`}`;return he.has(Ce)?!0:(he.add(Ce),!1)}}function J(he,fe,Ce){const Ae=fe.fields.find(_e=>_e.name==="labelTypes")?.values[Ce];return Ae?Ae[he]??null:null}function Z(he,fe,Ce=!1){if(!fe.datasourceType)return null;const Ae=J(he,fe.dataFrame,fe.rowIndex);return Ae?te(Ae,fe.datasourceType,Ce):null}function te(he,fe,Ce){switch(fe){case"loki":switch(he){case"I":return(0,b.t)("logs.fields.type.loki.indexed-label","Indexed label",{count:Ce?2:1});case"S":return(0,b.t)("logs.fields.type.loki.structured-metadata","Structured metadata",{count:Ce?2:1});case"P":return(0,b.t)("logs.fields.type.loki.parsedl-label","Parsed field",{count:Ce?2:1});default:return null}default:return null}}const se="logs.popover.disabled";function ie(){localStorage.setItem(se,"true")}function ce(){localStorage.removeItem(se)}function re(){return!!localStorage.getItem(se)}var ue=(he=>(he.Text="text",he.Json="json",he.CSV="csv",he))(ue||{});const X=async(he,fe,Ce)=>{switch(he){case"text":(0,P.Zy)({meta:Ce,rows:fe});break;case"json":const Ae=R(fe),_e=new Blob([JSON.stringify(Ae)],{type:"application/json;charset=utf-8"}),Xe=`Logs-${(0,m.LE)(new Date)}.json`;a()(_e,Xe);break;case"csv":const De=new Map;fe.forEach(Me=>{Me.dataFrame?.refId&&!De.has(Me.dataFrame?.refId)&&De.set(Me.dataFrame?.refId,Me.dataFrame)}),De.forEach(async Me=>{const Te=(0,C.v)(Me);Te.push({id:"organize",options:{excludeByName:{labels:!0,labelTypes:!0}}},le);const $e=await(0,r.s)((0,v.m)(Te,[Me]));(0,P.EM)($e[0],`Logs-${Me.refId}`)})}},le=()=>he=>he.pipe((0,c.T)(fe=>fe.map(Ce=>{const Ae=(0,f.KR)(Ce),_e={name:"Date",values:Ae.timeField?Ae.timeField?.values.map(Xe=>(0,p.KQ)(Xe).toISOString()):[],type:x.PU.other,config:{}};return{...Ce,fields:[_e,...Ce.fields]}})))},74869:(ne,A,e)=>{"use strict";e.d(A,{VB:()=>i,f2:()=>c,sk:()=>r,wS:()=>l});var n=e(43173),a=e(1487),s=e(77256);const l=()=>n.$.featureToggles.alertingPrometheusRulesPrimary??!1,r=()=>{const o=(0,a.H)("alertingListViewV2");return n.$.featureToggles.alertingListViewV2PreviewToggle&&o!==void 0?o:n.$.featureToggles.alertingListViewV2},c=()=>((0,s.qc)()&&n.$.featureToggles.alertingRuleRecoverDeleted&&n.$.featureToggles.alertRuleRestore)??!1,i=()=>(c()&&n.$.featureToggles.alertingRulePermanentlyDelete)??!1},74887:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>h,L1:()=>l,kb:()=>c});var n=e(99305),a=e(38221),s=e(74276);const l={keys:{}},r=f=>({type:`templating/keyed/${f.action.type.replace(/^templating\//,"")}`,payload:f});function c(f,g){const u=(0,n.q4)(f);return r({key:u,action:g})}const i=f=>typeof f.type=="string"&&f.type.startsWith("templating/keyed")&&"payload"in f&&typeof f.payload.key=="string";function o(f=l,g){if(i(g)){const{key:u,action:E}=g.payload,v=(0,n.q4)(u),p=s.kH.match(E)?v:f.lastKey,m=(0,a.H)(),y=f.keys[v],d=m(y,E);return{...f,lastKey:p,keys:{...f.keys,[v]:d}}}return f}const h={templating:o}},75080:(ne,A,e)=>{"use strict";e.d(A,{c:()=>I,h:()=>V});var n=e(74848),a=e(42941),s=e(41053),l=e(51898),r=e(92745),c=e(27489),i=e(43173),o=e(45861),h=e(71599),f=e(66404),g=e(35137),u=e(22787),E=e(89640),v=e(29646),p=e(49785),m=e(54148),y=e(32899),d=e(75234),x=e(8207),b=e(41654),D=e(83793),C=e(62963),P=e(91555),T=e(34621),O=e(49314),S=e(96733),B=e(65411);function K({dashboard:L,defaultValues:N,loadedFromRef:W,readOnly:R,isNew:G,workflowOptions:w,repository:_,onDismiss:Q}){const ae=(0,p.mN)({defaultValues:N}),{editPanel:q}=L.useState(),{handleSubmit:k,watch:ee}=ae,[j,J]=ee(["ref","workflow"]),[Z,te]=(0,D.Qo)(),se=async({repo:X,path:le,comment:he})=>{if(!X||!le){console.error("Missing required fields for deletion:",{repo:X,path:le});return}const fe=J==="write"?W:j,Ce=he||`Delete dashboard: ${L.state.title}`;Z({name:X,path:le,ref:fe,message:Ce})},ie=(0,m.Zp)(),ce=X=>{(0,d.J7)().publish({type:y.r1.alertError.name,payload:[(0,r.t)("dashboard-scene.delete-provisioned-dashboard-form.api-error","Failed to delete dashboard"),X]})},re=()=>{L.setState({isDirty:!1}),q?.onDiscard(),ie((0,C._0)(N.folder.uid||""))},ue=(X,le,he)=>{q?.onDiscard();const fe=(0,O.q)({baseUrl:`${P.mL}/${N.repo}/dashboard/preview/${X}`,paramName:"pull_request_url",paramValue:he?.newPullRequestURL,repoType:le.repoType});ie(fe)};return(0,T.J)({request:te,workflow:J,resourceType:"dashboard",successMessage:(0,r.t)("dashboard-scene.delete-provisioned-dashboard-form.success-message","Dashboard deleted successfully"),handlers:{onDismiss:Q,onBranchSuccess:({path:X,urls:le},he)=>ue(X,he,le),onWriteSuccess:re,onError:ce}}),(0,n.jsx)(x._,{title:(0,r.t)("dashboard-scene.delete-provisioned-dashboard-form.drawer-title","Delete Provisioned Dashboard"),subtitle:L.state.title,onClose:Q,children:(0,n.jsx)(p.Op,{...ae,children:(0,n.jsx)("form",{onSubmit:k(se),children:(0,n.jsxs)(b.B,{direction:"column",gap:2,children:[R&&(0,n.jsx)(S.t,{noRepository:!1,isReadOnlyRepo:!0,readOnlyMessage:"To delete this dashboard, please remove the file from your repository."}),(0,n.jsx)(B.x,{resourceType:"dashboard",isNew:G,readOnly:R,workflow:J,workflowOptions:w,repository:_}),(0,n.jsxs)(b.B,{gap:2,children:[(0,n.jsx)(o.$n,{variant:"secondary",onClick:Q,fill:"outline",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.delete-provisioned-dashboard-form.cancel-action",children:"Cancel"})}),(0,n.jsx)(o.$n,{variant:"destructive",type:"submit",disabled:te.isLoading||R,children:te.isLoading?(0,r.t)("dashboard-scene.delete-provisioned-dashboard-form.deleting","Deleting..."):(0,r.t)("dashboard-scene.delete-provisioned-dashboard-form.delete-action","Delete dashboard")})]})]})})})})}function U({dashboard:L,onDismiss:N}){const{defaultValues:W,loadedFromRef:R,readOnly:G,workflowOptions:w,isNew:_,repository:Q}=(0,v.S)(L);return W?(0,n.jsx)(K,{dashboard:L,defaultValues:W,loadedFromRef:R,readOnly:G,repository:Q,isNew:_,workflowOptions:w,onDismiss:N}):null}var F=e(15203);function I({dashboard:L}){const[N,W]=(0,a.A)(!1),[R]=(0,F.vd)(),[,G]=(0,s.A)(async()=>{(0,c.rR)("grafana_manage_dashboards_delete_clicked",{item_counts:{dashboard:1},source:"dashboard_scene_settings",restore_enabled:!!i.$.featureToggles.restoreDashboards}),W(),L.state.uid&&await R({dashboardUIDs:[L.state.uid]}),await L.onDashboardDelete()},[L,W]);return L.isManagedRepository()&&N?(0,n.jsx)(U,{dashboard:L,onDismiss:W}):L.state.meta.provisioned&&N?(0,n.jsx)(M,{dashboardId:L.state.meta.provisionedExternalId,onClose:W}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.$n,{variant:"destructive",onClick:W,"data-testid":l.Tp.pages.Dashboard.Settings.General.deleteDashBoard,children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-settings.dashboard-delete-button",children:"Delete dashboard"})}),N&&(0,n.jsx)(V,{dashboardTitle:L.state.title,onConfirm:G,onClose:W})]})}function V({dashboardTitle:L,onConfirm:N,onClose:W}){return(0,n.jsx)(h.u,{isOpen:!0,body:(0,n.jsxs)(n.Fragment,{children:[i.$.featureToggles.restoreDashboards&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.E,{element:"p",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-settings.delete-modal-restore-dashboards-text",children:"This action will mark the dashboard for deletion in 30 days. Your organization administrator can restore it anytime before the 30 days expire."})}),(0,n.jsx)(g.$,{v:1})]}),(0,n.jsx)(f.E,{element:"p",children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-settings.delete-modal-text",children:"Do you want to delete this dashboard?"})}),(0,n.jsx)(f.E,{element:"p",children:L}),(0,n.jsx)(g.$,{v:2})]}),onConfirm:N,onDismiss:W,title:(0,r.t)("dashboard-settings.delete-modal.title","Delete"),icon:"trash-alt",confirmText:(0,r.t)("dashboard-settings.delete-modal.delete-button","Delete"),confirmationText:(0,r.t)("dashboard-settings.delete-modal.confirmation-text","Delete")})}function M({dashboardId:L,onClose:N}){return(0,n.jsxs)(u.a,{isOpen:!0,title:(0,r.t)("dashboard-scene.provisioned-delete-modal.title-cannot-delete-provisioned-dashboard","Cannot delete provisioned dashboard"),icon:"trash-alt",onDismiss:N,children:[(0,n.jsx)("p",{children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.provisioned-delete-modal.cannot-be-deleted",children:"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."})}),(0,n.jsxs)("p",{children:[(0,n.jsx)("i",{children:(0,n.jsxs)(r.x6,{i18nKey:"dashboard-scene.provisioned-delete-modal.see-docs",children:["See"," ",(0,n.jsx)(E.Y,{href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",external:!0,children:"documentation"})," ","for more information about provisioning."]})}),(0,n.jsx)("br",{}),(0,n.jsxs)(r.x6,{i18nKey:"dashboard-scene.provisioned-delete-modal.file-path",children:["File path: ",{dashboardId:L}]})]}),(0,n.jsx)(u.a.ButtonRow,{children:(0,n.jsx)(o.$n,{variant:"primary",onClick:N,children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.provisioned-delete-modal.ok",children:"OK"})})})]})}},75168:(ne,A,e)=>{"use strict";e.d(A,{l:()=>f});var n=e(34743),a=e(83505),s=e(46885),l=e(96540),r=e(53568),c=e(98869);const i=1e5,o=16,h=8,f=(u,E)=>{const v=(0,l.useRef)(null),p=(0,l.useRef)(null),m=(0,l.useRef)(null),[y,d]=(0,l.useState)({width:0,height:0}),x=(0,l.useMemo)(()=>g(),[]),b=[(0,n.RK)({allowedPlacements:["bottom-start","bottom-end","top-start","top-end"],boundary:document.body,crossAxis:!0}),(0,n.Ej)({apply({availableWidth:O,availableHeight:S}){const B=O-o,K=S-o,U=Math.max(B,0),F=Math.min(Math.max(K,c.Aj*6),c.xB);d({width:U,height:F})}})],D={reference:v.current,floating:p.current},{floatingStyles:C}=(0,a.we)({strategy:"fixed",open:E,placement:"bottom-start",middleware:b,elements:D,whileElementsMounted:s.ll}),P=(0,l.useMemo)(()=>{let O="";const S=Math.min(u.length,i);for(let K=0;K<S;K++){const U=u[K].label??u[K].value.toString();O=U.length>O.length?U:O}return(0,r.kD)(O,c.sh,c.zx).width+h+c.AK*2+x},[u,x]),T={...C,width:P,maxWidth:y.width,minWidth:v.current?.offsetWidth,maxHeight:y.height};return{inputRef:v,floatingRef:p,scrollRef:m,floatStyles:T}};function g(){const u=document.createElement("div");u.style.visibility="hidden",u.style.overflow="scroll",document.body.appendChild(u);const E=document.createElement("div");u.appendChild(E);const v=u.offsetWidth-E.offsetWidth;return u.parentNode?.removeChild(u),v}},75254:(ne,A,e)=>{"use strict";e.d(A,{J:()=>n});const n=a=>a().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick}))},75421:(ne,A,e)=>{"use strict";e.d(A,{jG:()=>D});var n=e(2543),a=e(25229),s=e(22592),l=e(17548),r=e(32899),c=e(33239),i=e(92745),o=e(36490),h=e(45863),f=e(45229),g=e(65642),u=e(15130),E=e(23237),v=e(90593),p=e(87745),m=e(90811);function y({urlRefresh:C,currentRefresh:P,isAllowedIntervalFn:T,minRefreshInterval:O,refreshIntervals:S=m.cb}){if(!C)return P;const B=T(C),K=S.find(U=>U===C);if(!B||!K){const U=O?S.find(I=>I===O):void 0,F=S?.length?S[0]:void 0;return U??F??P}return C||P}class d{constructor(P){this.contextSrv=P,this.timeRangeForUrl=()=>{const T=this.timeRange().raw;return(0,a.Ar)(T.from)&&(T.from=T.from.valueOf().toString()),(0,a.Ar)(T.to)&&(T.to=T.to.valueOf().toString()),T},this.time=(0,s.E2)().raw,this.timeAtLoad=(0,s.E2)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),f.A.subscribe(p.U0,T=>{this.zoomOut(T.payload.scale,T.payload.updateUrl)}),f.A.subscribe(p.Io,T=>{this.shiftTime(T.payload.direction,T.payload.updateUrl)}),f.A.subscribe(p.Rh,T=>{this.makeAbsoluteTime(T.payload.updateUrl)}),f.A.subscribe(p.Bt,()=>{this.copyTimeRangeToClipboard()}),f.A.subscribe(p.VZ,T=>{this.pasteTimeRangeFromClipboard(T.payload.updateUrl)}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(P){this.timeModel=P,this.time=P.time,this.refresh=P.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,n.cloneDeep)(this.time),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(P){return this.contextSrv.getValidIntervals(P)}parseTime(){this.time.from=(0,E.EX)(this.time.from),this.time.to=(0,E.EX)(this.time.to)}parseUrlParam(P,T){if(P.indexOf("now")!==-1)return P;if(P.length===8){const O=(0,a.yT)(P,"YYYYMMDD");if(O.isValid())return O}else if(P.length===15){const O=(0,a.yT)(P,"YYYYMMDDTHHmmss");if(O.isValid())return O}if(!isNaN(Number(P))){const O=parseInt(P,10);return T?(0,a.oZ)(T,O):(0,a.yT)(O)}return null}getTimeWindow(P,T){const O=parseInt(P,10);let S;return T.match(/^\d+$/)&&parseInt(T,10)?S=parseInt(T,10):S=l.intervalToMs(T),{from:(0,a.yT)(O-S/2),to:(0,a.yT)(O+S/2)}}initTimeFromUrl(){if(g.$W.publicDashboardAccessToken&&this.timeModel?.timepicker?.hidden)return;const P=o.Ny.getSearch();P.get("time")&&P.get("time.window")&&(this.time=this.getTimeWindow(P.get("time"),P.get("time.window")));const T=this.timeModel?.getTimezone();P.get("from")&&(this.time.from=this.parseUrlParam(P.get("from"),T)||this.time.from),P.get("to")&&(this.time.to=this.parseUrlParam(P.get("to"),T)||this.time.to),P.get("to")&&P.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=void 0)),this.refresh=y({urlRefresh:P.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:g.$W.minRefreshInterval})}updateTimeRangeFromUrl(){const P=o.Ny.getSearch();if(P.get("left"))return;const T=this.timeRangeForUrl(),O=P.get("from"),S=P.get("to");O&&S?(O!==T.from||S!==T.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(P){this.timeModel&&(this.timeModel.refresh=P),this.stopAutoRefresh();const T=o.Ny.getSearchObject();if(!P){T.refresh&&o.Ny.partial({refresh:null},!0);return}let O=P,S=60*1e3;P===u.SM?S=this.getAutoRefreshInteval().intervalMs:(O=this.contextSrv.getValidInterval(P),S=l.intervalToMs(O)),this.refreshMS=S,this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(S),this.refreshTimeModel()},S),T.refresh!==O&&o.Ny.partial({refresh:O},!0)}getAutoRefreshInteval(){const P=window?.innerWidth??2e3;return l.calculateInterval(this.timeRange(),P,g.$W.minRefreshInterval)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(P){this.refreshTimer=window.setTimeout(()=>{this.startNextRefreshTimer(P),this.contextSrv.isGrafanaVisible()?this.refreshTimeModel():this.autoRefreshBlocked=!0},P)}stopAutoRefresh(){clearTimeout(this.refreshTimer),this.refreshTimer=void 0,this.refreshMS=void 0}resumeAutoRefresh(){this.timeModel?.refresh&&this.setAutoRefresh(this.timeModel.refresh)}setTime(P,T=!0){if((0,n.extend)(this.time,P),(0,a.Ar)(P.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh("")):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=void 0),T===!0){const O=this.timeRangeForUrl(),S=o.Ny.getSearchObject();if(S.from===O.from.toString()&&S.to===O.to.toString())return;S.from=O.from.toString(),S.to=O.to.toString(),o.Ny.partial(S)}this.timeModel?.refresh===u.SM&&this.getAutoRefreshInteval().intervalMs!==this.refreshMS&&this.setAutoRefresh(u.SM),this.refreshTimeModel()}timeRange(){return window.__grafanaSceneContext&&window.__grafanaSceneContext.isActive?h.jh.getTimeRange(window.__grafanaSceneContext).state.value:(0,v.z)(this.time,this.timeModel)}zoomOut(P,T=!0){const O=this.timeRange(),{from:S,to:B}=(0,E.Zk)(O,P);this.setTime({from:(0,a.yT)(S),to:(0,a.yT)(B)},T)}shiftTime(P,T=!0){const O=this.timeRange(),{from:S,to:B}=(0,E.Wb)(P,O);this.setTime({from:(0,a.yT)(S),to:(0,a.yT)(B)},T)}makeAbsoluteTime(P){const{from:T,to:O}=this.timeRange();this.setTime({from:T,to:O},P)}copyTimeRangeToClipboard(){const{raw:P}=this.timeRange(),T=l.formatRawTimeRange(P);navigator.clipboard.writeText(JSON.stringify(T)),f.A.emit(r.r1.alertSuccess,[(0,i.t)("time-picker.copy-paste.copy-success-message","Time range copied to clipboard")])}async pasteTimeRangeFromClipboard(P=!0){const{range:T,isError:O}=await(0,E.zG)();if(O===!0){f.A.emit(r.r1.alertError,[(0,i.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,i.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:T})]);return}let{from:S,to:B}=T;S=(0,E.EX)(S),B=(0,E.EX)(B),this.setTime({from:S,to:B},P)}isRefreshOutsideThreshold(P,T=.05){const O=this.timeRange();if(c.isMathString(O.raw.from)){const S=O.to.diff(O.from),B=Date.now()-P,K=S*T;return B>=K}return!1}}let x;function b(C){x=C}function D(){return x||(x=new d(u.TP)),x}},75515:(ne,A,e)=>{"use strict";e.d(A,{X:()=>n});function n(a){return!!a.libraryPanel?.uid}},75541:(ne,A,e)=>{"use strict";e.d(A,{C:()=>n,Y:()=>a});const n={left:[],right:[]};function a(s,l){n[s].push(l)}},75570:(ne,A,e)=>{"use strict";e.d(A,{Q:()=>h,h:()=>f});var n=e(33239),a=e(60188),s=e(22592),l=e(36490),r=e(6890),c=e(83873),i=e(66198),o=e(8535);async function h(g){try{const u=await c.IB.getFolderByUid(g);o.M_.dispatch((0,r.Vz)((0,i.R4)(u)))}catch(u){console.warn("Error fetching parent folder",g,"for dashboard",u)}}function f(){const g=l.Ny.getSearch(),u=l.Ny.getSearchObject();u.timezone=g.get("timezone")??void 0;const E=Date.now(),v=(0,a.O)({timeZone:g.get("timezone")??void 0}),p=(0,s.E2)(),m=g.get("from"),y=g.get("to"),d=y?n.toDateTime(y,{roundUp:!0,timezone:v,now:E}):void 0,x=m?n.toDateTime(m,{roundUp:!1,timezone:v,now:E}):void 0;return u.from=x?.toISOString()??p.from.toISOString(),u.to=d?.toISOString()??p.to.toISOString(),Object.keys(u).forEach(b=>{b!=="from"&&b!=="to"&&b!=="scopes"&&b!=="version"&&!b.startsWith("var-")&&delete u[b]}),u}},75640:(ne,A,e)=>{"use strict";e.d(A,{Hx:()=>r,gO:()=>c});var n=e(96540),a=e(95443),s=e(77256);function l(i){return{dashboardUID:i.find(([o])=>o===a.YH.dashboardUID)?.[1],panelId:i.find(([o])=>o===a.YH.panelID)?.[1]}}function r(i){return(0,n.useMemo)(()=>Object.entries(i||{}).filter(([o,h])=>!!h.trim()),[i])}function c(i){const o=new Map,{panelId:h,dashboardUID:f}=l(i);return f&&o.set(a.YH.dashboardUID,(0,s.JM)(f)),f&&h&&o.set(a.YH.panelID,(0,s.D2)(f,h)),o}},75663:(ne,A,e)=>{"use strict";e.r(A),e.d(A,{plugin:()=>P});var n=e(16207),a=e(92745),s=e(739),l=e(14099),r=e(59795),c=e(64394);const i=(T,O,S)=>{const B=(0,r.gl)(T,O,S);if(S.angular&&(O==="singlestat"||O==="grafana-singlestat-panel")){const K=S.angular;if(B.graphMode=s.$p.None,K.sparkline&&K.sparkline.show&&(B.graphMode=s.$p.Area),K.colorBackground)B.colorMode=s.yp.Background;else if(K.colorValue)B.colorMode=s.yp.Value;else if(B.colorMode=s.yp.None,K.sparkline?.lineColor&&B.graphMode===s.$p.Area){const U=T.fieldConfig??{};U.defaults.color={mode:c.Y.Fixed,fixedColor:K.sparkline.lineColor},T.fieldConfig=U}K.valueName==="name"&&(B.textMode=s.SV.Name)}return B};var o=e(74848),h=e(2543),f=e(96540),g=e(95004),u=e(44232),E=e(60519),v=e(97611),p=e(6399),m=e(33352),y=e(65642);class d extends f.PureComponent{constructor(){super(...arguments),this.renderComponent=(O,S)=>{const{timeRange:B,options:K}=this.props,{value:U,alignmentFactors:F,width:I,height:V,count:M}=O,{openMenu:L,targetClassName:N}=S;let W=U.sparkline;return W&&(W.timeRange=B),(0,o.jsx)(v.yV,{value:U.display,count:M,sparkline:W,colorMode:K.colorMode,graphMode:K.graphMode,justifyMode:K.justifyMode,textMode:this.getTextMode(),alignmentFactors:F,text:K.text,width:I,height:V,theme:y.$W.theme2,onClick:L,className:N,disableWideLayout:!K.wideLayout,percentChangeColorMode:K.percentChangeColorMode})},this.renderValue=O=>{const{value:S}=O,{getLinks:B,hasLinks:K}=S;return K&&B?(0,o.jsx)(p.e,{links:B,children:U=>this.renderComponent(O,U)}):this.renderComponent(O,{})},this.getValues=()=>{const{data:O,options:S,replaceVariables:B,fieldConfig:K,timeZone:U}=this.props;let F;for(let I of O.series)for(let V of I.fields){let{config:M}=V;if(V.type===g.PU.number){if(V.state?.range)continue;!F&&(!(0,h.isNumber)(M.min)||!(0,h.isNumber)(M.max))&&(F=(0,E.nJ)(O.series));const L=M.min??F.min,N=M.max??F.max;V.state=V.state??{},V.state.range={min:L,max:N,delta:N-L}}}return(0,u.PI)({fieldConfig:K,reduceOptions:S.reduceOptions,replaceVariables:B,theme:y.$W.theme2,data:O.series,sparkline:S.graphMode!==s.$p.None,percentChange:S.showPercentChange,timeZone:U})}}getTextMode(){const{options:O,fieldConfig:S,title:B}=this.props;return O.textMode===s.SV.Auto&&(S.defaults.displayName||!B)?s.SV.ValueAndName:O.textMode}render(){const{height:O,options:S,width:B,data:K,renderCounter:U}=this.props;return(0,o.jsx)(m.S,{getValues:this.getValues,getAlignmentFactors:u.XS,renderValue:this.renderValue,width:B,height:O,source:K,itemSpacing:3,renderCounter:U,autoGrid:!0,orientation:S.orientation})}}var x=e(87252);const b={colorMode:s.yp.Value,graphMode:s.$p.Area,justifyMode:s.F8.Auto,percentChangeColorMode:s.CD.Standard,showPercentChange:!1,textMode:s.SV.Auto,wideLayout:!0};var D=e(73495);class C{getSuggestionsForData(O){const{dataSummary:S}=O;if(!S.hasData)return;const B=O.getListAppender({name:D.m.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:K=>{K.options.reduceOptions.values&&(K.options.reduceOptions.limit=1)}}});S.hasStringField&&S.hasNumberField&&S.frameCount===1&&S.rowCountTotal<10&&(B.append({name:D.m.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),B.append({name:D.m.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:s.yp.Background}})),S.stringFieldCount===1&&S.frameCount===1&&S.rowCountTotal<10&&S.fieldCount===1&&B.append({name:D.m.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:s.yp.None}}),S.hasNumberField&&S.hasTimeField&&(B.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),B.append({name:D.m.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:s.$p.None,colorMode:s.yp.Background}}))}}const P=new n.m(d).useFieldConfig().setPanelOptions(T=>{const O=[(0,a.t)("stat.category-stat-styles","Stat styles")];(0,x.L)(T),(0,x.h)(T,O),l.I(T),T.addSelect({path:"textMode",name:(0,a.t)("stat.name-text-mode","Text mode"),description:(0,a.t)("stat.description-text-mode","Control if name and value is displayed or just name"),category:O,settings:{options:[{value:s.SV.Auto,label:(0,a.t)("stat.text-mode-options.label-auto","Auto")},{value:s.SV.Value,label:(0,a.t)("stat.text-mode-options.label-value","Value")},{value:s.SV.ValueAndName,label:(0,a.t)("stat.text-mode-options.label-value-and-name","Value and name")},{value:s.SV.Name,label:(0,a.t)("stat.text-mode-options.label-name","Name")},{value:s.SV.None,label:(0,a.t)("stat.text-mode-options.label-none","None")}]},defaultValue:b.textMode}).addRadio({path:"wideLayout",name:(0,a.t)("stat.name-wide-layout","Wide layout"),category:O,settings:{options:[{value:!0,label:(0,a.t)("stat.wide-layout-options.label-on","On")},{value:!1,label:(0,a.t)("stat.wide-layout-options.label-off","Off")}]},defaultValue:b.wideLayout,showIf:S=>S.textMode===s.SV.ValueAndName}),T.addSelect({path:"colorMode",name:(0,a.t)("stat.name-color-modcolor-mode-options.label","Color mode"),defaultValue:s.yp.Value,category:O,settings:{options:[{value:s.yp.None,label:(0,a.t)("stat.color-mode-options.label-none","None")},{value:s.yp.Value,label:(0,a.t)("stat.color-mode-options.label-value","Value")},{value:s.yp.Background,label:(0,a.t)("stat.color-mode-options.label-background-gradient","Background Gradient")},{value:s.yp.BackgroundSolid,label:(0,a.t)("stat.color-mode-options.label-background-solid","Background Solid")}]}}).addRadio({path:"graphMode",name:(0,a.t)("stat.name-graph-mode","Graph mode"),description:(0,a.t)("stat.description-graph-mode","Stat panel graph / sparkline mode"),category:O,defaultValue:b.graphMode,settings:{options:[{value:s.$p.None,label:(0,a.t)("stat.graph-mode.options.label-none","None")},{value:s.$p.Area,label:(0,a.t)("stat.graph-mode.options.label-area","Area")}]}}).addRadio({path:"justifyMode",name:(0,a.t)("stat.name-text-alignment","Text alignment"),defaultValue:b.justifyMode,category:O,settings:{options:[{value:s.F8.Auto,label:(0,a.t)("stat.text-alignment-options.label-auto","Auto")},{value:s.F8.Center,label:(0,a.t)("stat.text-alignment-options.label-center","Center")}]}}).addBooleanSwitch({path:"showPercentChange",name:(0,a.t)("stat.name-show-percent-change","Show percent change"),defaultValue:b.showPercentChange,category:O,showIf:S=>!S.reduceOptions.values}).addSelect({path:"percentChangeColorMode",name:(0,a.t)("stat.percent-change-color-mode","Percent change color mode"),defaultValue:b.percentChangeColorMode,category:O,settings:{options:[{value:s.CD.Standard,label:(0,a.t)("stat.percent-change-color-mode-options.label-standard","Standard")},{value:s.CD.Inverted,label:(0,a.t)("stat.percent-change-color-mode-options.label-inverted","Inverted")},{value:s.CD.SameAsValue,label:(0,a.t)("stat.percent-change-color-mode-options.label-same-as-value","Same as Value")}]},showIf:S=>S.showPercentChange})}).setNoPadding().setPanelChangeHandler(i).setSuggestionsSupplier(new C).setMigrationHandler(r._$)},75683:(ne,A,e)=>{"use strict";e.d(A,{k:()=>n});var n=(a=>(a[a.Standard=0]="Standard",a[a.Canvas=1]="Canvas",a[a.Custom=2]="Custom",a))(n||{})},75735:(ne,A,e)=>{"use strict";e.d(A,{AI:()=>v,D1:()=>b,IC:()=>D,Jw:()=>o,LH:()=>i,Ms:()=>h,Pd:()=>E,Qu:()=>s,Sf:()=>c,UL:()=>y,Y5:()=>P,Y_:()=>f,ew:()=>l,fW:()=>C,fY:()=>r,hX:()=>p,hc:()=>n,hm:()=>d,qw:()=>m,w2:()=>x,xU:()=>a});const n="grafana.app/createdBy",a="grafana.app/updatedTimestamp",s="grafana.app/updatedBy",l="grafana.app/folder",r="grafana.app/message";var c=(T=>(T.Repo="repo",T.Terraform="terraform",T.Kubectl="kubectl",T.Plugin="plugin",T))(c||{});const i="grafana.app/managedBy",o="grafana.app/managerId",h="grafana.app/managerAllowsEdits",f="grafana.app/sourcePath",g="grafana.app/sourceChecksum",u="grafana.app/sourceTimestamp",E="grafana.app/saved-from-ui",v="grafana.app/grant-permissions",p="grafana.app/slug",m="grafana.app/dashboard-is-snapshot",y="grafana.app/dashboard-snapshot-original-url",d="grafana.app/dashboard-gnet-id",x="grafana.app/folderTitle",b="grafana.app/folderUrl",D="grafana.app/embedded",C="grafana.app/reloadOnParamsChange",P="grafana.app/deprecatedInternalID"},75745:(ne,A,e)=>{"use strict";e.d(A,{K:()=>s,Pw:()=>n,RP:()=>l,tf:()=>a});var n=(r=>(r.onBlur="onBlur",r.onFocus="onFocus",r.onChange="onChange",r))(n||{});const a=(r,c)=>{const i=c.reduce((o,h)=>h.rule(r)?o:o.concat(h.errorMessage),[]);return i.length>0?i:null},s=(r,c)=>c&&c[r],l=(r,c)=>({rule:i=>!!i.match(r),errorMessage:c||"Value is not valid"})},75756:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>c});var n=e(92745),a=e(70327),s=e(96137),l=e(80218),r=e(71639);function c(){const[i]=(0,r.D)(),[o]=a.hK.endpoints.upsertRuleGroupForNamespace.useMutation(),[h]=a.hK.endpoints.deleteRuleGroupFromNamespace.useMutation();return(0,l.Yb)(async(f,g)=>{const{groupName:u,namespaceName:E}=f,v=(0,s.KH)({identifier:g}),{newRuleGroupDefinition:p,rulerConfig:m}=await i(f,[v]),y=(0,n.t)("alerting.rules.delete-rule.success","Rule successfully deleted");return p.rules.length===0?h({rulerConfig:m,namespace:E,group:u,notificationOptions:{successMessage:y}}).unwrap():o({rulerConfig:m,namespace:E,payload:p,notificationOptions:{successMessage:y}}).unwrap()})}},75983:(ne,A,e)=>{"use strict";e.d(A,{D:()=>D});var n=e(74848),a=e(96540),s=e(71642),l=e(25229),r=e(54092),c=e(29609),i=e(7840),o=e(6106),h=e(92745),f=e(46907),g=e(88559),u=e(76319),E=e(20806),v=e(9860);const p=({rule:P,instance:T,extensionPointId:O})=>{const[S,B]=(0,a.useState)(),K=(0,a.useMemo)(()=>({instance:T,rule:P}),[T,P]),{links:U}=(0,f.U)({context:K,extensionPointId:O,limitPerPlugin:3});if(U.length===0)return null;const F=(0,n.jsx)(v.w,{extensions:U,onSelect:B});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.m,{placement:"bottom-start",overlay:F,children:(0,n.jsx)(u.K,{name:"ellipsis-v","aria-label":(0,h.t)("alerting.alert-instance-extension-point.aria-label-actions","Actions"),variant:"secondary"})}),!!S&&!!S.path&&(0,n.jsx)(E.s,{path:S.path,title:S.title,onDismiss:()=>B(void 0)})]})};var m=e(75640),y=e(83750),d=e(40165);const x=({instance:P})=>{const T=(0,m.Hx)(P.annotations),O=(0,m.gO)(T);return(0,n.jsxs)("div",{children:[P.value&&(0,n.jsx)(d.X,{label:(0,h.t)("alerting.alert-instance-details.label-value","Value"),horizontal:!0,children:P.value}),T.map(([S,B])=>(0,n.jsx)(y.s,{annotationKey:S,value:B,valueLink:O.get(S)},S))]})};var b=e(65420);const D=({rule:P,instances:T,pagination:O,footerRow:S})=>{const B=(0,a.useMemo)(()=>T.length>1?(0,s.yO)(T.map(U=>U.labels)):{},[T]),K=(0,a.useMemo)(()=>T.map(U=>({data:{rule:P,alert:{...U,commonLabels:B}},id:(0,c.RI)(U)})),[B,T,P]);return(0,n.jsx)(o.E,{cols:C,isExpandable:!0,items:K,renderExpandedContent:({data:U})=>(0,n.jsx)(x,{instance:U.alert}),pagination:O,footerRow:S})},C=[{id:"state",label:"State",renderCell:({data:{alert:{state:P}}})=>(0,n.jsx)(b.C,{state:P}),size:"95px"},{id:"labels",label:"Labels",renderCell:({data:{alert:{labels:P,commonLabels:T}}})=>(0,n.jsx)(i.m,{labels:P,commonLabels:T,size:"sm"})},{id:"created",label:"Created",renderCell:({data:{alert:{activeAt:P}}})=>(0,n.jsx)(n.Fragment,{children:P.startsWith("0001")?"-":(0,l.KQ)(P).format("YYYY-MM-DD HH:mm:ss")}),size:"150px"},{id:"actions",label:"",renderCell:({data:{alert:P,rule:T}})=>(0,n.jsx)(p,{rule:T,instance:P,extensionPointId:r.SM.AlertInstanceAction},"alert-instance-extension-point"),size:"40px"}]},76070:(ne,A,e)=>{"use strict";e.d(A,{PE:()=>a,w6:()=>l});var n=e(11257);const a=[n.w.AlertingReceiversRead],s=[n.w.AlertingReceiversCreate,n.w.AlertingReceiversWrite],l=[...a,...s]},76190:(ne,A,e)=>{"use strict";e.d(A,{O:()=>n});var n=(a=>(a.NoData="no_data",a.Paused="paused",a.Alerting="alerting",a.OK="ok",a.Pending="pending",a.Recovering="recovering",a.Unknown="unknown",a))(n||{})},76267:(ne,A,e)=>{"use strict";e.d(A,{C:()=>i});var n=e(79197),a=e(48497),s=e(25229),l=e(80011),r=e(74529),c=e(15629);function i(h,f){if(!h||!f||!(0,r.vd)(h))return;let g;try{g=(0,c.M9)(f)}catch{return}if((0,c.mo)(h))return;const u=Date.parse(h||""),E=(0,n.A)(u,g);return(0,a.Y)(E,new Date)?{humanized:`within ${f}`,fullDate:`within ${f}`}:{humanized:`in ${(0,s.KQ)(E).locale("en").fromNow(!0)}`,fullDate:(0,l.LE)(E,{format:"YYYY-MM-DD HH:mm:ss"})}}function o(h){if(!h)return null;if(!isNullDate(h))return formatDistanceToNowStrict(new Date(h))}},76466:(ne,A,e)=>{"use strict";e.d(A,{EM:()=>a});var n=e(75735);function a({targetFolderUID:c,targetFolder:i,repoName:o,hidePrependSlash:h=!1}){return c===""||s(i,o)?h?"":"/":l(i)}function s(c,i){return!!(c?.metadata?.name===i&&i)}function l(c){if(!c)return;const o=(c?.metadata?.annotations||{})[n.Y_]||"";return o?`${o}/`:"/"}function r(c,i){const h=c.replace(/\/$/,"").split("/").pop();if(!h)throw new Error(`Invalid path: ${c}`);return c.endsWith("/")?`${i}/${h}/`:`${i}/${h}`}},76478:(ne,A,e)=>{"use strict";e.d(A,{A:()=>T});var n=e(74848),a=e(96540),s=e(75505),l=e(28105),r=e(62392),c=e(51898),i=e(92745),o=e(35137),h=e(68079),f=e(45861),g=e(34999),u=e(22429),E=e(75421),v=e(82612),p=e(87033),m=e(90696),y=e(16515),d=e(88907),x=e(55386),b=e(45967),D=e(30703),C=e(18857);class P extends a.PureComponent{constructor(S){super(S),this.updateFields=()=>{const B=this.props.response?.panelData,K=B?.series?.[0]??B?.annotations?.[0];if(K&&K.fields){const U=K.fields.map(F=>{const I=(0,y.Ct)(F,K);let V="";for(let M=0;M<K.length;M++){if(M>0&&(V+=", "),M>2){V+="...";break}V+=F.values[M]}return V.length>50&&(V=V.substring(0,50)+"..."),{label:`${I} (${F.type})`,value:I,description:V}});this.setState({fieldNames:U})}},this.onFieldSourceChange=(B,K)=>{const U=this.props.mappings||{},F=U[B]||{};this.props.change({...U,[B]:{...F,source:K.value||d.V.Field}})},this.onFieldNameChange=(B,K)=>{const U=this.props.mappings||{};if(!K){const I={...this.props.mappings};delete I[B],this.props.change(I);return}const F=U[B]||{};this.props.change({...U,[B]:{...F,value:K.value,source:d.V.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(S){S.response!==this.props.response&&this.updateFields()}renderRow(S,B,K){const{fieldNames:U}=this.state;let F=[...U];const I=B.value;let V=U.find(L=>I===L.value);I&&!V&&F.push({label:I,value:I});let M=K?K[S.key]:"";if(M&&S.key.startsWith("time")){const L=(0,x.j_)("dateTimeAsIso");M=(0,x.cN)(L(M))}return M==null&&(M=""),(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{children:[S.label||S.key," ",S.help&&(0,n.jsx)(b.m,{content:S.help,children:(0,n.jsx)(D.I,{name:"info-circle"})})]}),(0,n.jsx)("td",{children:(0,n.jsx)(C.l6,{value:V,options:F,placeholder:S.placeholder||S.key,onChange:L=>{this.onFieldNameChange(S.key,L)},noOptionsMessage:(0,i.t)("annotations.annotation-field-mapper.noOptionsMessage-unknown-field-names","Unknown field names"),allowCustomValue:!0,isClearable:!0})}),(0,n.jsx)("td",{children:`${M}`})]},S.key)}render(){const S=this.props.response?.events?.[0],B=this.props.mappings||{};return(0,n.jsxs)("table",{className:"filter-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)(i.x6,{i18nKey:"annotations.annotation-field-mapper.annotation",children:"Annotation"})}),(0,n.jsx)("th",{children:(0,n.jsx)(i.x6,{i18nKey:"annotations.annotation-field-mapper.from",children:"From"})}),(0,n.jsx)("th",{children:(0,n.jsx)(i.x6,{i18nKey:"annotations.annotation-field-mapper.first-value",children:"First value"})})]})}),(0,n.jsx)("tbody",{children:(0,m.g6)().map(K=>this.renderRow(K,B[K.key]||{},S))})]})}}class T extends a.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:S,annotation:B}=this.props;if((0,m.E7)(S))return;const K=(0,u.UA)().getCurrent();if(!K)return;this.setState({running:!0});const U=await(0,s.s)((0,p.b)({range:(0,E.jG)().timeRange(),panel:new v.a9({}),dashboard:K},S,B));this.setState({running:!1,response:U})},this.onQueryChange=S=>{this.props.annotation.query&&this.props.annotation.query.spec&&(S={...this.props.annotation.query.spec,...S}),this.props.onChange({...this.props.annotation,target:S,...this.props.annotation.query&&{query:{kind:this.props.annotation.query.kind,spec:{...S}}},...this.props.annotation.legacyOptions?{legacyOptions:this.props.annotation.legacyOptions}:{}})},this.onMappingChange=S=>{this.props.onChange({...this.props.annotation,mappings:S})},this.onAnnotationChange=S=>{this.props.onChange({...S,...this.props.annotation.legacyOptions?{legacyOptions:this.props.annotation.legacyOptions}:{}})}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(S){this.props.annotation!==S.annotation&&!(0,m.E7)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:S,annotation:B}=this.props,U={...m.CU,...S.annotations}.prepareAnnotation(B);U!==B?this.props.onChange(U):this.onRunQuery()}getStatusSeverity(S){const{events:B,panelData:K}=S;return K?.errors||K?.error?"error":B?.length?"success":"warning"}renderStatusText(S,B){const{events:K,panelData:U}=S;if(B||S?.panelData?.state===l.Gu.Loading||!S)return(0,n.jsx)("p",{children:"loading..."});if(U?.errors)return(0,n.jsx)(n.Fragment,{children:U.errors.map((M,L)=>(0,n.jsx)("p",{children:M.message},L))});if(U?.error)return(0,n.jsx)("p",{children:U.error.message??"There was an error fetching data"});if(!K?.length)return(0,n.jsx)("p",{children:(0,n.jsx)(i.x6,{i18nKey:"annotations.standard-annotation-query-editor.no-events-found",children:"No events found"})});const F=U?.series?.[0]??U?.annotations?.[0],I=K.length,V=F?.fields.length;return(0,n.jsx)("p",{children:(0,n.jsxs)(i.x6,{i18nKey:"annotations.standard-annotation-query-editor.events-found",children:[{numEvents:I}," events (from ",{numFields:V}," fields)"]})})}renderStatus(){const{response:S,running:B}=this.state;return S?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.$,{v:2}),(0,n.jsx)("div",{children:B?(0,n.jsx)(h.y,{}):(0,n.jsx)(f.$n,{"data-testid":c.Tp.components.Annotations.editor.testButton,variant:"secondary",size:"xs",onClick:this.onRunQuery,children:(0,n.jsx)(i.x6,{i18nKey:"annotations.standard-annotation-query-editor.test-annotation-query",children:"Test annotation query"})})}),(0,n.jsx)(o.$,{v:2,layout:"block"}),(0,n.jsx)(g.F,{"data-testid":c.Tp.components.Annotations.editor.resultContainer,severity:this.getStatusSeverity(S),title:(0,i.t)("annotations.standard-annotation-query-editor.title-query-result","Query result"),children:this.renderStatusText(S,B)})]}):null}render(){const{datasource:S,annotation:B,datasourceInstanceSettings:K}=this.props,{response:U}=this.state;let F=S.annotations?.QueryEditor||S.components?.QueryEditor;if(!F)return(0,n.jsx)("div",{children:(0,n.jsx)(i.x6,{i18nKey:"annotations.standard-annotation-query-editor.no-query-editor",children:"Annotations are not supported. This datasource needs to export a QueryEditor"})});let I=B.target;B.query&&B.query.spec&&(I={...B.query.spec});let V={...S.annotations?.getDefaultQuery?.(),...I??{refId:"Anno"}},M=B;return B.query&&B.legacyOptions&&(M={...B.legacyOptions,...B}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.p,{instanceSettings:K,children:(0,n.jsx)(F,{query:V,datasource:S,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:U?.panelData,range:(0,E.jG)().timeRange(),annotation:M,onAnnotationChange:this.onAnnotationChange},S?.name)}),(0,m.JX)(S)&&(0,n.jsxs)(n.Fragment,{children:[this.renderStatus(),(0,n.jsx)(P,{response:U,mappings:B.mappings,change:this.onMappingChange})]})]})}}},76548:(ne,A,e)=>{"use strict";e.d(A,{e:()=>c});var n=e(74848),a=e(92745),s=e(41654),l=e(77824),r=e(44580);const c=({value:i,onChange:o,item:h})=>{const f=[{label:(0,a.t)("timeseries.span-nulls-editor.gaps-options.label-never","Never"),value:!1},{label:(0,a.t)("timeseries.span-nulls-editor.gaps-options.label-always","Always"),value:!0},{label:(0,a.t)("timeseries.span-nulls-editor.gaps-options.label-threshold","Threshold"),value:36e5}],g=typeof i=="number";return f[2].value=g?i:36e5,(0,n.jsxs)(s.B,{wrap:!0,children:[(0,n.jsx)(l.z,{value:i,options:f,onChange:o}),g&&(0,n.jsx)(r.g,{value:i,onChange:o,inputPrefix:r.F.LessThan,isTime:h.settings?.isTime??!1})]})}},76584:(ne,A,e)=>{"use strict";e.d(A,{HQ:()=>c,Vf:()=>i,aL:()=>r,g5:()=>o});var n=e(97335),a=e(97883),s=e(59006),l=e(67350);function r(h){return{kind:"RowsLayout",spec:{rows:h.state.rows.filter(f=>!f.state.repeatSourceKey).map(c)}}}function c(h){const f=h.state.layout.serialize(),g={kind:"RowsLayoutRow",spec:{title:h.state.title,collapse:h.state.collapse,layout:f,fillScreen:h.state.fillScreen,hideHeader:h.state.hideHeader,...h.state.repeatByVariable&&{repeat:{mode:"variable",value:h.state.repeatByVariable}}}},u=h.state.conditionalRendering?.serialize();return u?.spec.items.length&&(g.spec.conditionalRendering=u),g}function i(h,f,g,u){if(h.kind!=="RowsLayout")throw new Error("Invalid layout kind");const E=h.spec.rows.map(v=>o(v,f,g,u));return new a.V({rows:E})}function o(h,f,g,u){const E=h.spec.layout;return new n.o({title:h.spec.title,collapse:h.spec.collapse,hideHeader:h.spec.hideHeader,fillScreen:h.spec.fillScreen,repeatByVariable:h.spec.repeat?.value,layout:s.j.get(E.kind).deserialize(E,f,g,u),conditionalRendering:(0,l.Xy)(h)})}},76623:(ne,A,e)=>{"use strict";e.d(A,{h:()=>i});var n=e(74848),a=e(16200),s=e(37680),l=e(66769);const c="You are an expert in creating Grafana Panels.Your goal is to write short, descriptive, and concise panel title.The title should be shorter than 50 characters.",i=({onGenerate:h,panel:f,dashboard:g})=>(0,n.jsx)(a.n,{messages:()=>o(f,g),onGenerate:h,eventTrackingSrc:s.ec.panelTitle,toggleTipTitle:"Improve your panel title"});function o(h,f){const g=(0,l.hn)(h);return[{content:c,role:l.Xh.system},{content:`The panel is part of a dashboard with the title: ${f.title}
The panel is part of a dashboard with the description: ${f.description}
Use this JSON object which defines the panel: ${g}`,role:l.Xh.user}]}},76637:(ne,A,e)=>{"use strict";e.d(A,{Hs:()=>v,O7:()=>m,Qi:()=>E,lz:()=>p,uf:()=>g});var n=e(21197),a=e(55459),s=e.n(a),l=e(84140),r=e(6773),c=e(46644),i=e(64394),o=e(42954),h=e(79118),f=e(36394);const g=new o.O(()=>[{id:i.Y.Fixed,name:"Single color",description:"Set a specific color",getCalculator:y},{id:i.Y.Shades,name:"Shades of a color",description:"Select shades of a specific color",getCalculator:d},{id:i.Y.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(x,b)=>(D,C,P)=>{const T=P??f.QS;return b.visualization.getColorByName(T.color)}},new u({id:i.Y.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:x=>x.visualization.palette}),new u({id:i.Y.PaletteClassicByName,name:"Classic palette (by series name)",isContinuous:!1,isByValue:!1,useSeriesName:!0,getColors:x=>x.visualization.palette.filter(b=>(0,r.eM)(x.visualization.getColorByName(b),x.colors.background.primary)>=x.colors.contrastThreshold)}),new u({id:i.Y.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:x=>["green","yellow","red"]}),new u({id:i.Y.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:x=>["red","yellow","green"]}),new u({id:i.Y.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:x=>["dark-blue","super-light-yellow","dark-red"]}),new u({id:i.Y.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:x=>["super-light-yellow","dark-red"]}),new u({id:i.Y.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:x=>["blue","purple"]}),new u({id:i.Y.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:x=>["super-light-yellow","dark-blue"]}),new u({id:i.Y.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:x=>["panel-bg","dark-blue"]}),new u({id:i.Y.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:x=>["panel-bg","dark-red"]}),new u({id:i.Y.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:x=>["panel-bg","dark-green"]}),new u({id:i.Y.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:x=>["panel-bg","dark-purple"]})]);class u{constructor(b){this.id=b.id,this.name=b.name,this.description=b.description,this.getNamedColors=b.getColors,this.isContinuous=b.isContinuous,this.isByValue=b.isByValue,this.useSeriesName=b.useSeriesName}getColors(b){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===b?this.colorCache:(this.colorCache=this.getNamedColors(b).map(b.visualization.getColorByName),this.colorCacheTheme=b,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,n.Ik)(this.colorCache)),this.interpolator}getCalculator(b,D){const C=this.getColors(D);return this.isByValue?this.isContinuous?(P,T,O)=>this.getInterpolator()(T):(P,T,O)=>C[T*(C.length-1)]:this.useSeriesName?(P,T,O)=>m(C,b.state?.displayName??b.name):(P,T,O)=>{const S=b.state?.seriesIndex??0;return C[S%C.length]}}}function E(x){return g.get(x.config.color?.mode??i.Y.Thresholds)}function v(x){return g.get(x??i.Y.Thresholds)}function p(x,b){const D=E(x);if(!D.isByValue)return{color:D.getCalculator(x,b)(0,0),threshold:f.QS,percent:1};const C=(0,h.jc)(x,b),P=x.config.color?.seriesBy??"last",O=(0,c.Nw)({field:x,reducers:[P]})[P]??0;return C(O)}function m(x,b){return x[Math.abs(s()(b))%x.length]}function y(x,b){return()=>b.visualization.getColorByName(x.config.color?.fixedColor??i.F)}function d(x,b){return()=>{const D=b.visualization.getColorByName(x.config.color?.fixedColor??i.F),C=[D],P=6,T=10,O=35,S=35;for(let K=1;K<P;K++)C.push((0,l.A)(D).spin(K/P*T).brighten(K/P*O).toHexString()),C.push((0,l.A)(D).spin(-(K/P)*T).darken(K/P*S).toHexString());const B=x.state?.seriesIndex??0;return C[B%C.length]}}},76671:(ne,A,e)=>{"use strict";e.d(A,{s:()=>u});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(41053),c=e(92745),i=e(63142),o=e(79233),h=e(89467),f=e(37864),g=e(3431);function u({value:v,onChange:p,loadOptions:m,reloadOptionsOnChange:y=!1,Component:d,className:x,allowCustomValue:b,allowEmptyValue:D,disabled:C,placeholder:P,inputMinWidth:T,inputPlaceholder:O,autofocus:S=!1,onExpandedChange:B,noOptionMessageHandler:K=E,...U}){const[F,I]=(0,r.A)(m,[m]),[V,M,L,N]=(0,g.Q)(S,B),W=T?Math.max(T,M):M,R=(0,i.of)(f.m);if(!L){const G=(0,s.isObject)(v)?v.label:v,w=G!=null?String(G):void 0;return(0,n.jsx)(V,{onClick:y?void 0:I,disabled:C,Component:d||(0,n.jsx)(o.c,{className:(0,a.cx)(R.segment,{[R.queryPlaceholder]:P!==void 0&&!v,[R.disabled]:C},x),children:w||P})})}return(0,n.jsx)(h.a,{...U,value:v&&!(0,s.isObject)(v)?{value:v}:v,placeholder:O,options:F.value??[],loadOptions:y?I:void 0,width:W,noOptionsMessage:K(F),allowCustomValue:b,allowEmptyValue:D,onClickOutside:()=>{N(!1)},onChange:G=>{N(!1),p(G)}})}function E(v){return v.loading?(0,c.t)("grafana-ui.segment-async.loading","Loading options..."):v.error?(0,c.t)("grafana-ui.segment-async.error","Failed to load options"):(0,c.t)("grafana-ui.segment-async.no-options","No options found")}},76701:(ne,A,e)=>{"use strict";e.d(A,{a:()=>s,r:()=>a});var n=e(92745);function a(l,r){return r&&r!==l?.branch?"write":l?.workflows?.[0]}function s(l){return l?l.type==="local"?[{label:"Save",value:"write"}]:l.workflows.map(r=>{switch(r){case"write":return{label:(0,n.t)("provisioning.workflow-options-label.push-to-existing-branch","Push to an existing branch"),value:r};case"branch":return{label:(0,n.t)("provisioning.workflow-options-label.push-to-a-new-branch","Push to a new branch"),value:r}}return{label:r,value:r}}):[]}},76732:(ne,A,e)=>{"use strict";e.d(A,{J3:()=>l,ab:()=>c,bW:()=>s});var n=e(2543),a=e.n(n);function s(i,o,h){if(i===o)return!0;if(i?.fields?.length!==o?.fields?.length||i.name!==o.name)return!1;for(let f=0;f<i.fields.length;f++){const g=i.fields[f],u=o.fields[f];if(g.type!==u.type||g.name!==u.name)return!1;if(h)continue;if(g.labels&&u.labels&&!c(g.labels,u.labels))return!1;const E=g.config,v=u.config;if(Object.keys(E).length!==Object.keys(v).length)return!1;let p;for(p in E){if(!(p in v))return!1;if(p!=="interval"&&!(0,n.isEqual)(E[p],v[p]))return!1}}return!0}function l(i,o,h){if(i===o)return!0;if(i?.length!==o?.length)return!1;for(let f=0;f<i.length;f++)if(!h(i[f],o[f]))return!1;return!0}const r=(i,o)=>i===o;function c(i,o,h=r){if(i===o)return!0;if(Object.keys(i).length!==Object.keys(o).length)return!1;let f;for(f in i)if(!h(i[f],o[f]))return!1;return!0}},76792:(ne,A,e)=>{"use strict";e.d(A,{sk:()=>L,kw:()=>V,fE:()=>M});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(46885),c=e(18828),i=e(43107),o=e(93225),h=e(2543),f=e(96540),g=e(51898),u=e(92745),E=e(27489),v=e(77870),p=e(63142),m=e(63527),y=e(30703),d=e(15245),x=e(92807),b=e(8515),D=e(45861),C=e(65642),P=e(5478),T=e(8095),O=e(42227),S=e(93602);function B(_){const{dataSource:Q}=_,ae=(0,p.$j)(),q=U(ae,Q?.meta.builtIn);return Q?(0,n.jsx)("img",{className:q.pickerDSLogo,alt:`${Q.meta.name} logo`,src:Q.meta.info.logos.small}):K()}function K(){const _=(0,p.of)(U);return(0,n.jsx)("div",{className:_.pickerDSLogo})}function U(_,Q=!1){return{pickerDSLogo:(0,a.css)({height:"20px",width:"20px",filter:`invert(${Q&&_.isLight?1:0})`})}}var F=e(41776),I=e(7078);const V="dashboards_dspicker_clicked",M={SEARCH:"search",OPEN_DROPDOWN:"open_dspicker",SELECT_DS:"select_ds",ADD_FILE:"add_file",OPEN_ADVANCED_DS_PICKER:"open_advanced_ds_picker",CONFIG_NEW_DS_EMPTY_STATE:"config_new_ds_empty_state",TOGGLE_FAVORITE:"toggle_favorite"};function L(_){const{current:Q,onChange:ae,hideTextValue:q=!1,width:k,inputId:ee,noDefault:j=!1,disabled:J=!1,placeholder:Z="Select data source",...te}=_,se=(0,p.of)(N,_),[ie,ce]=(0,f.useState)(!1),[re,ue]=(0,f.useState)(!1),[X,le]=(0,f.useState)(""),{onKeyDown:he,keyboardEvents:fe}=(0,P.d)(),Ce=(0,f.useRef)(null),Ae=(0,f.useMemo)(()=>(0,h.debounce)(Oe=>{(0,E.rR)(V,{item:M.SEARCH,query:Oe,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0"})},300),[]),[_e,Xe]=(0,f.useState)(),[De,Me]=(0,f.useState)(),Te=(0,O.ps)(Q),$e=(0,O.ps)("-- Grafana --"),Re=!Q&&j?void 0:Te,Ke=X&&ie?(0,n.jsx)(K,{}):(0,n.jsx)(B,{dataSource:Re}),Ve=(0,O.Kr)({alerting:_.alerting,annotations:_.annotations,dashboard:_.dashboard,logs:_.logs,metrics:_.metrics,mixed:_.mixed,pluginId:_.pluginId,tracing:_.tracing,type:_.type,variables:_.variables}),Se=(0,v.S)(),Ye=[(0,s.cY)(4),(0,s.Ej)({apply({availableHeight:Oe,elements:We}){We.floating.style.maxHeight=`${Math.max(200,Oe-20)}px`,We.floating.style.minHeight="200px"}}),(0,s.UU)({fallbackStrategy:"initialPlacement",crossAxis:!1,boundary:document.body}),(0,s.BN)()],{refs:Ue,floatingStyles:je}=(0,l.we)({open:ie,placement:"bottom-start",onOpenChange:ce,middleware:Ye,whileElementsMounted:r.ll,strategy:"fixed"}),Qe=(0,f.useCallback)(Oe=>{Ue.setReference(Oe),Xe(Oe)},[Ue]),He=(0,f.useCallback)(()=>{le(""),ce(!1),_e?.focus()},[ce,_e]),{overlayProps:Je,underlayProps:de}=(0,o.e)({onClose:He,isDismissable:!0,isOpen:ie,shouldCloseOnInteractOutside:Oe=>_e?!_e.isSameNode(Oe):!1},Ce),{dialogProps:ve}=(0,c.s)({"aria-label":"Opened data source picker list"},Ce);function me(){ce(!0),_e?.focus()}function xe(){$e&&ae($e,[T.dx])}function Ee(Oe){Oe.key==="Tab"&&!Oe.shiftKey&&ie&&(Oe.preventDefault(),De?.focus()),Oe.key==="Tab"&&Oe.shiftKey&&ie&&He(),he(Oe)}function Pe(Oe){Oe.shiftKey?(Oe.preventDefault(),_e?.focus()):He()}return(0,f.useEffect)(()=>{const Oe=fe.subscribe({next:We=>{switch(We?.code){case"ArrowDown":me(),We.preventDefault();break;case"ArrowUp":me(),We.preventDefault();break;case"Escape":He(),We.preventDefault();break}}});return()=>Oe.unsubscribe()}),(0,n.jsxs)("div",{className:se.container,"data-testid":g.Tp.components.DataSourcePicker.container,children:[(0,n.jsx)("div",{className:se.trigger,onClick:()=>{me(),(0,E.rR)(V,{item:M.OPEN_DROPDOWN,creator_team:"grafana_plugins_catalog",schema_version:"1.0.0",total_configured:Ve.length})},children:(0,n.jsx)(m.p,{id:ee||"data-source-picker",className:re?void 0:se.input,"data-testid":g.Tp.components.DataSourcePicker.inputV2,"aria-label":(0,u.t)("datasources.data-source-picker.aria-label-select-a-data-source","Select a data source"),autoComplete:"off",prefix:Re?Ke:void 0,suffix:(0,n.jsx)(y.I,{name:ie?"search":"angle-down"}),placeholder:q?"":(0,I.q7)(Re)||Z,onFocus:()=>{ue(!0)},onBlur:()=>{ue(!1)},onKeyDown:Ee,value:X,onChange:Oe=>{me(),le(Oe.currentTarget.value),Oe.currentTarget.value&&Ae(Oe.currentTarget.value)},ref:Qe,disabled:J})}),ie?(0,n.jsxs)(d.ZL,{children:[(0,n.jsx)("div",{...de}),(0,n.jsx)("div",{ref:Ce,...Je,...ve,children:(0,n.jsx)(W,{...te,style:je,ref:Ue.setFloating,footerRef:Me,current:Re,filterTerm:X,keyboardEvents:fe,onChange:(Oe,We)=>{He(),Oe.uid!==Re?.uid&&(ae(Oe,We),(0,E.rR)(V,{item:M.SELECT_DS,ds_type:Oe.type,is_favorite:Se.enabled?Se.isFavoriteDatasource(Oe.uid):void 0}))},onClose:He,onClickAddCSV:xe,onDismiss:He,onNavigateOutsiteFooter:Pe,dataSources:Ve})})]}):null]})}function N(_,Q){return{container:(0,a.css)({position:"relative",cursor:Q.disabled?"not-allowed":"pointer",width:_.spacing(Q.width||"auto")}),trigger:(0,a.css)({cursor:"pointer",pointerEvents:Q.disabled?"none":"auto"}),input:(0,a.css)({"input::placeholder":{color:Q.disabled?_.colors.action.disabledText:_.colors.text.primary}})}}const W=f.forwardRef((_,Q)=>{const{filterTerm:ae,onChange:q,onClose:k,onClickAddCSV:ee,current:j,filter:J,dataSources:Z}=_,te=(0,f.useCallback)(ce=>{q(ce)},[q]),se=(0,f.useCallback)(()=>{ee?.(),k(),(0,E.rR)(V,{item:M.ADD_FILE})},[ee,k]),ie=(0,p.of)(R);return(0,n.jsxs)("div",{style:_.style,ref:Q,className:ie.container,children:[(0,n.jsx)(x.P,{showScrollIndicators:!0,children:(0,n.jsx)(S.S,{..._,enableKeyboardNavigation:!0,className:ie.dataSourceList,current:j,onChange:te,filter:ce=>(J?J?.(ce):!0)&&(0,I.Zn)(ce,ae),onClickEmptyStateCTA:()=>(0,E.rR)(V,{item:M.CONFIG_NEW_DS_EMPTY_STATE}),dataSources:Z})}),(0,n.jsx)(i.n1,{children:(0,n.jsx)(G,{..._,onClickAddCSV:se,onChange:te,onNavigateOutsiteFooter:_.onNavigateOutsiteFooter})})]})});W.displayName="PickerContent";function R(_){return{container:(0,a.css)({display:"flex",flexDirection:"column",background:_.colors.background.elevated,borderRadius:_.shape.radius.default,boxShadow:_.shadows.z3,overflow:"hidden"}),picker:(0,a.css)({background:_.colors.background.secondary}),dataSourceList:(0,a.css)({flex:1}),footer:(0,a.css)({flex:0,display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",padding:_.spacing(1.5),borderTop:`1px solid ${_.colors.border.weak}`,backgroundColor:_.colors.background.secondary})}}function G({onClose:_,onChange:Q,onClickAddCSV:ae,...q}){const k=(0,p.of)(w),ee=q.uploadFile&&C.Ay.featureToggles.editPanelCSVDragAndDrop,j=Z=>{Z.key==="Tab"&&q.onNavigateOutsiteFooter(Z)},J=Z=>{Z.key==="Tab"&&Z.shiftKey&&q.onNavigateOutsiteFooter(Z)};return(0,n.jsxs)("div",{className:k.footer,children:[(0,n.jsx)(b.$s,{children:({showModal:Z,hideModal:te})=>(0,n.jsxs)(D.$n,{size:"sm",variant:"secondary",fill:"text",onClick:()=>{_(),Z(F.p,{reportedInteractionFrom:"ds_picker",tracing:q.tracing,dashboard:q.dashboard,mixed:q.mixed,metrics:q.metrics,type:q.type,annotations:q.annotations,variables:q.variables,alerting:q.alerting,pluginId:q.pluginId,logs:q.logs,filter:q.filter,uploadFile:q.uploadFile,current:q.current,onDismiss:te,onChange:(se,ie)=>{Q(se,ie),te()},dataSources:q.dataSources}),(0,E.rR)(V,{item:M.OPEN_ADVANCED_DS_PICKER})},ref:q.footerRef,onKeyDown:ee?J:j,children:[(0,n.jsx)(u.x6,{i18nKey:"data-source-picker.open-advanced-button",children:"Open advanced data source picker"}),(0,n.jsx)(y.I,{name:"arrow-right"})]})}),ee&&(0,n.jsx)(D.$n,{variant:"secondary",size:"sm",onClick:ae,onKeyDown:j,children:(0,n.jsx)(u.x6,{i18nKey:"datasources.footer.add-csv-or-spreadsheet",children:"Add csv or spreadsheet"})})]})}function w(_){return{footer:(0,a.css)({flex:0,display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",padding:_.spacing(1.5),borderTop:`1px solid ${_.colors.border.weak}`,backgroundColor:_.colors.background.secondary})}}},76803:(ne,A,e)=>{"use strict";e.d(A,{K:()=>a});var n=e(42954);class a extends n.O{}},76808:(ne,A,e)=>{"use strict";e.d(A,{R:()=>B});var n=e(74848),a=e(22803),s=e(96540),l=e(79319),r=e(8642),c=e(51898),i=e(92745),o=e(63142),h=e(8207),f=e(41654),g=e(63527),u=e(21285),E=e(34343),v=e(13943),p=e(8073),m=e(99887),y=e(76319),d=e(65642),x=e(85622),b=e(72598),D=e(66615),C=e(34999),P=e(89640);const T="grafana.dashboard.sql-expressions-banner.dismissed",O=()=>(0,n.jsx)(D.b,{storageKey:T,defaultValue:!1,children:(I,V)=>I?null:(0,n.jsx)(C.F,{bottomSpacing:1,title:(0,i.t)("dashboard.transformation-picker-ng.sql-expressions-title","SQL Expressions"),severity:"info",onRemove:()=>V(!0),children:(0,n.jsxs)(f.B,{direction:"column",gap:1,children:[(0,n.jsx)(i.x6,{i18nKey:"dashboard.transformation-picker-ng.sql-expressions-message-description",children:"A new way to manipulate and transform the results of data source queries using MySQL-like syntax."}),(0,n.jsx)(P.Y,{href:"https://grafana.com/docs/grafana/latest/panels-visualizations/query-transform-data/sql-expressions/",external:!0,children:(0,n.jsx)(i.x6,{i18nKey:"dashboard.transformation-picker-ng.sql-expressions-message-link",children:"Learn more"})})]})})}),S="viewAll";function B(I){const V=(0,o.of)(K),{suffix:M,xforms:L,search:N,onSearchChange:W,onSearchKeyDown:R,showIllustrations:G,onTransformationAdd:w,selectedFilter:_,data:Q,onClose:ae,onShowIllustrationsChange:q,onSelectedFilterChange:k}=I,ee=[[S,(0,i.t)("dashboard.transformation-picker-ng.view-all","View all")],...Object.entries((0,b.qy)())],j=(0,s.useCallback)(J=>{J?.click()},[]);return(0,n.jsx)(h._,{size:"md",onClose:()=>{ae&&ae()},title:(0,i.t)("dashboard.transformation-picker-ng.title-add-another-transformation","Add another transformation"),children:(0,n.jsxs)(f.B,{direction:"column",gap:2,children:[d.Ay?.featureToggles?.sqlExpressions&&(0,n.jsx)(O,{}),(0,n.jsxs)("div",{className:V.searchWrapper,children:[(0,n.jsx)(g.p,{"data-testid":c.Tp.components.Transforms.searchInput,className:V.searchInput,value:N??"",placeholder:(0,i.t)("dashboard.transformation-picker-ng.placeholder-search-for-transformation","Search for transformation"),onChange:W,onKeyDown:R,suffix:M,ref:j,autoFocus:!0}),(0,n.jsxs)(f.B,{direction:"row",alignItems:"center",gap:.5,children:[(0,n.jsx)("span",{className:V.switchLabel,children:(0,n.jsx)(i.x6,{i18nKey:"dashboard.transformation-picker-ng.show-images",children:"Show images"})}),(0,n.jsx)(u.d,{value:G,onChange:()=>q&&q(!G)})]})]}),(0,n.jsx)(f.B,{direction:"row",wrap:"wrap",rowGap:1,columnGap:.5,children:ee.map(([J,Z])=>(0,n.jsx)(E.m,{onClick:()=>k&&k(J),label:Z,selected:_===J},J))}),(0,n.jsx)(U,{showIllustrations:G,transformations:L,data:Q,onClick:J=>{w({value:J})}})]})})}function K(I){return{pickerInformationLine:(0,a.css)({fontSize:"16px",marginBottom:I.spacing(2)}),pickerInformationLineHighlight:(0,a.css)({verticalAlign:"middle"}),searchWrapper:(0,a.css)({display:"flex",flexWrap:"wrap",columnGap:I.spacing(2),rowGap:I.spacing(1),width:"100%",paddingBottom:I.spacing(1)}),searchInput:(0,a.css)({flexGrow:"1",width:"initial"}),switchLabel:(0,a.css)({whiteSpace:"nowrap"})}}function U({showIllustrations:I,transformations:V,onClick:M,data:L}){const N=(0,o.$j)(),W=(0,o.of)(F);return(0,n.jsx)(v.x,{columns:3,gap:1,children:V.map(R=>{let G=l.M.Applicable;R.transformation.isApplicable!==void 0&&(G=R.transformation.isApplicable(L));const w=G>0;let _=null;R.transformation.isApplicableDescription!==void 0&&(typeof R.transformation.isApplicableDescription=="function"?_=R.transformation.isApplicableDescription(L):_=R.transformation.isApplicableDescription);let Q=W.newCard;w||(Q=(0,a.cx)(W.newCard,W.cardDisabled));const ae=N.isDark?R.imageDark:R.imageLight;return(0,n.jsxs)(p.Z,{className:Q,"data-testid":c.Tp.components.TransformTab.newTransform(R.name),onClick:()=>M(R.id),noMargin:!0,children:[(0,n.jsxs)(p.Z.Heading,{className:W.heading,children:[(0,n.jsxs)("div",{className:W.titleRow,children:[(0,n.jsx)("span",{children:R.name}),(0,n.jsx)("span",{className:W.pluginStateInfoWrapper,children:(0,n.jsx)(x.p,{state:R.state})})]}),R.tags&&R.tags.size>0&&(0,n.jsx)("div",{className:W.tagsWrapper,children:Array.from(R.tags).map(q=>(0,n.jsx)(m.E,{color:"darkgrey",icon:"tag-alt",text:q},q))})]}),(0,n.jsxs)(p.Z.Description,{className:W.description,children:[(0,n.jsx)("span",{children:r.h.getIfExists(R.id)?.description}),I&&(0,n.jsx)("span",{children:(0,n.jsx)("img",{className:W.image,src:ae,alt:R.name})}),!w&&_!==null&&(0,n.jsx)(y.K,{className:W.cardApplicableInfo,name:"info-circle",tooltip:_})]})]},R.id)})})}function F(I){return{heading:(0,a.css)({fontWeight:400,"> button":{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:I.spacing(1)}}),titleRow:(0,a.css)({display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"nowrap",width:"100%"}),description:(0,a.css)({fontSize:I.typography.bodySmall.fontSize,display:"flex",flexDirection:"column",justifyContent:"space-between"}),image:(0,a.css)({display:"block",maxWidth:"100%",marginTop:I.spacing(2)}),grid:(0,a.css)({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gridAutoRows:"1fr",gap:I.spacing(1),width:"100%",padding:`${I.spacing(1)} 0`}),cardDisabled:(0,a.css)({backgroundColor:I.colors.action.disabledBackground,img:{filter:"grayscale(100%)",opacity:.33}}),cardApplicableInfo:(0,a.css)({position:"absolute",bottom:I.spacing(1),right:I.spacing(1)}),newCard:(0,a.css)({gridTemplateRows:"min-content 0 1fr 0",marginBottom:0}),pluginStateInfoWrapper:(0,a.css)({marginLeft:I.spacing(.5)}),tagsWrapper:(0,a.css)({display:"flex",flexWrap:"wrap",gap:I.spacing(.5)})}}},76874:(ne,A,e)=>{"use strict";e.d(A,{x:()=>c});var n=e(74848),a=e(22803),s=e(92745),l=e(30703),r=e(63142);function c({error:o}){const h=(0,r.of)(i),f=o?.message??o?.data?.message??"Query error";return(0,n.jsxs)("div",{className:h.wrapper,children:[(0,n.jsx)("div",{className:h.icon,children:(0,n.jsx)(l.I,{name:"exclamation-triangle"})}),(0,n.jsxs)("div",{className:h.message,children:[f,o.traceId!=null&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{})," ",(0,n.jsx)("span",{children:(0,n.jsxs)(s.x6,{i18nKey:"query.query-error-alert.trace-id",values:{traceId:o.traceId},children:["(Trace ID: ","{{traceId}}",")"]})})]})]})]})}const i=o=>({wrapper:(0,a.css)({marginTop:o.spacing(.5),background:o.colors.background.secondary,display:"flex"}),icon:(0,a.css)({background:o.colors.error.main,color:o.colors.error.contrastText,padding:o.spacing(1)}),message:(0,a.css)({fontSize:o.typography.bodySmall.fontSize,fontFamily:o.typography.fontFamilyMonospace,padding:o.spacing(1)})})},77010:(ne,A,e)=>{"use strict";e.d(A,{G:()=>i});var n=e(96540),a=e(31595),s=e(17564),l=e(27489),r=e(61190);const c="grafana_plugin_";function i(){const h=(0,a.Q)();return(0,n.useMemo)(()=>{if(!h)throw new Error("No PluginContext found. The usePluginInteractionReporter() hook can only be used from a plugin.");const f=(0,s.S)(h)?(0,r.y)(h.instanceSettings):(0,r.L)(h.meta);return(g,u)=>{if(!o(g))throw new Error(`Interactions reported in plugins should start with: "${c}".`);return(0,l.rR)(g,{...u,...f})}},[h])}function o(h){return h.startsWith(c)&&h.length>c.length}},77154:(ne,A,e)=>{"use strict";e.d(A,{EL:()=>r,Nw:()=>o,or:()=>i,t:()=>l});var n=e(95004),a=e(41119);const s={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function l(h,f){let g;for(g in h){const u=s[g];for(const E of h[g])E<f.length&&(f[E]=u)}}function r(h,f){for(let g=0;g<f.length;g++)f[g]=h[Number(f[g])]}function c(h,f){for(const g of f)if(g!=null)return(0,a.by)(h,g);return n.PU.other}function i(h){const{schema:f,data:g}=h;if(!f||!f.fields)throw new Error("JSON needs a fields definition");const u=g?g.values.reduce((v,p)=>Math.max(v,p.length),0):0,E=f.fields.map((v,p)=>{let m=g?g.values[p]:[],y=m.length,d=v.type;y!==u&&(m.length=u,m.fill(void 0,y));let x=g?.entities?.[p];x&&l(x,m);let b=g?.enums?.[p];b&&(r(b,m),d=n.PU.string);const D=g?.nanos?.[p],C={...v,type:d??c(v.name,m),config:v.config??{},values:m,entities:x??{}};return D!=null&&(C.nanos=D),C});return{...f,fields:E,length:u}}function o(h){const f={values:[]},g=[];let u=!1;const E={refId:h.refId,meta:h.meta,name:h.name,fields:h.fields.map(v=>{const{values:p,nanos:m,state:y,display:d,...x}=v;return"entities"in x&&delete x.entities,f.values.push(p),m!=null?(g.push(m),u=!0):g.push(null),x})};return u&&(f.nanos=g),{schema:E,data:f}}},77197:(ne,A,e)=>{"use strict";e.d(A,{A:()=>i});var n=e(8934),a=e(37615),s=e(55386),l=e(17548);const c={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:o=>((0,a.l)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.$f)(o)),roundInterval:o=>((0,a.l)("kbn.ts","kbn.roundInterval()","@grafana/data"),l.roundInterval(o)),secondsToHms:o=>((0,a.l)("kbn.ts","kbn.secondsToHms()","@grafana/data"),l.secondsToHms(o)),secondsToHhmmss:o=>{const h=[],f=Math.floor(o/3600),g=Math.floor(o%3600/60),u=Math.floor(o%3600%60);return f>9?h.push(""+f):h.push("0"+f),g>9?h.push(""+g):h.push("0"+g),u>9?h.push(""+u):h.push("0"+u),h.join(":")},toPercent:(o,h)=>Math.floor(o/h*1e4)/100+"%",addSlashes:o=>o.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:o=>((0,a.l)("kbn.ts","kbn.describeInterval()","@grafana/data"),l.describeInterval(o)),intervalToSeconds:o=>((0,a.l)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),l.intervalToSeconds(o)),intervalToMs:o=>((0,a.l)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),l.intervalToMs(o)),calculateInterval:(o,h,f)=>((0,a.l)("kbn.ts","kbn.calculateInterval()","@grafana/data"),l.calculateInterval(o,h,f)),queryColorDot:(o,h)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+o,"font-size:"+h+"px"].join(";")+'"></div>',slugifyForUrl:o=>o.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:o=>((0,a.l)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.dO)(o)),toFixed:(o,h)=>{if(o===null)return"";const f=h?Math.pow(10,Math.max(0,h)):1,g=String(Math.round(o*f)/f);if(g.indexOf("e")!==-1||o===0)return g;if(h!=null){const u=g.indexOf("."),E=u===-1?0:g.length-u-1;if(E<h)return(E?g:g+".")+String(f).slice(1,h-E+1)}return g},toFixedScaled:(o,h,f,g,u)=>f===null?c.toFixed(o,h)+u:c.toFixed(o,f+g)+u,roundValue:(o,h)=>{if(o===null)return null;const f=Math.pow(10,h),g=(f*o).toFixed(h);return Math.round(parseFloat(g))/f},getUnitFormats:s.Ke};typeof Proxy<"u"?c.valueFormats=new Proxy(c.valueFormats,{get(o,h,f){if(typeof h!="string")throw{message:`Value format ${String(h)} is not a string`};const g=(0,s.j_)(h);return g?(u,E,v,p)=>(0,s.cN)(g(u,E,v,p?"utc":"browser")):Reflect.get(o,h,f)}}):c.valueFormats=(0,s.uH)();const i=c},77236:(ne,A,e)=>{"use strict";e.d(A,{AW:()=>c,Ay:()=>o,RQ:()=>l,dZ:()=>n,fV:()=>r,vB:()=>i});const n=[{label:"avg",insertText:"avg",documentation:"Calculate the average over dimensions"},{label:"bottomk",insertText:"bottomk",documentation:"Smallest k elements by sample value"},{label:"count",insertText:"count",documentation:"Count number of elements in the vector"},{label:"max",insertText:"max",documentation:"Select maximum over dimensions"},{label:"min",insertText:"min",documentation:"Select minimum over dimensions"},{label:"stddev",insertText:"stddev",documentation:"Calculate population standard deviation over dimensions"},{label:"stdvar",insertText:"stdvar",documentation:"Calculate population standard variance over dimensions"},{label:"sum",insertText:"sum",documentation:"Calculate sum over dimensions"},{label:"topk",insertText:"topk",documentation:"Largest k elements by sample value"}],a=[{label:"json",insertText:"json",documentation:"Extracting labels from the log line using json parser."},{label:"regexp",insertText:'regexp ""',documentation:"Extracting labels from the log line using regexp parser.",move:-1},{label:"logfmt",insertText:"logfmt",documentation:"Extracting labels from the log line using logfmt parser."},{label:"pattern",insertText:"pattern",documentation:"Extracting labels from the log line using pattern parser. Only available in Loki 2.3+."},{label:"unpack",insertText:"unpack",detail:"unpack identifier",documentation:'Parses a JSON log line, unpacking all embedded labels in the pack stage. A special property "_entry" will also be used to replace the original log line. Only available in Loki 2.2+.'}],s=[{label:"unwrap",insertText:"unwrap",detail:"unwrap identifier",documentation:"Take labels and use the values as sample data for metric aggregations."},{label:"label_format",insertText:"label_format",documentation:"Use to rename, modify or add labels. For example, | label_format foo=bar ."},{label:"line_format",insertText:"line_format",documentation:'Rewrites log line content. For example, | line_format "{{.query}} {{.duration}}" .'}],l=[{insertText:"avg_over_time",label:"avg_over_time",detail:"avg_over_time(range-vector)",documentation:"The average of all values in the specified interval."},{insertText:"bytes_over_time",label:"bytes_over_time",detail:"bytes_over_time(range-vector)",documentation:"Counts the amount of bytes used by each log stream for a given range"},{insertText:"bytes_rate",label:"bytes_rate",detail:"bytes_rate(range-vector)",documentation:"Calculates the number of bytes per second for each stream."},{insertText:"first_over_time",label:"first_over_time",detail:"first_over_time(range-vector)",documentation:"The first of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"last_over_time",label:"last_over_time",detail:"last_over_time(range-vector)",documentation:"The last of all values in the specified interval. Only available in Loki 2.3+."},{insertText:"sum_over_time",label:"sum_over_time",detail:"sum_over_time(range-vector)",documentation:"The sum of all values in the specified interval."},{insertText:"count_over_time",label:"count_over_time",detail:"count_over_time(range-vector)",documentation:"The count of all values in the specified interval."},{insertText:"max_over_time",label:"max_over_time",detail:"max_over_time(range-vector)",documentation:"The maximum of all values in the specified interval."},{insertText:"min_over_time",label:"min_over_time",detail:"min_over_time(range-vector)",documentation:"The minimum of all values in the specified interval."},{insertText:"quantile_over_time",label:"quantile_over_time",detail:"quantile_over_time(scalar, range-vector)",documentation:"The \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) of the values in the specified interval."},{insertText:"rate",label:"rate",detail:"rate(v range-vector)",documentation:"Calculates the number of entries per second."},{insertText:"stddev_over_time",label:"stddev_over_time",detail:"stddev_over_time(range-vector)",documentation:"The population standard deviation of the values in the specified interval."},{insertText:"stdvar_over_time",label:"stdvar_over_time",detail:"stdvar_over_time(range-vector)",documentation:"The population standard variance of the values in the specified interval."}],r=[{insertText:"vector",label:"vector",detail:"vector(scalar)",documentation:"Returns the scalar as a vector with no labels."}],c=[...n,...l,...r],i={comment:{pattern:/#.*/},"context-aggregation":{pattern:/((without|by)\s*)\([^)]*\)/,lookbehind:!0,inside:{"label-key":{pattern:/[^(),\s][^,)]*[^),\s]*/,alias:"attr-name"},punctuation:/[()]/}},"context-labels":{pattern:/\{[^}]*(?=}?)/,greedy:!0,inside:{comment:{pattern:/#.*/},"label-key":{pattern:/[a-zA-Z_]\w*(?=\s*(=|!=|=~|!~))/,alias:"attr-name",greedy:!0},"label-value":{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,alias:"attr-value"},punctuation:/[{]/}},"context-pipe":{pattern:/\s\|[^=~]\s?\w*/i,inside:{"pipe-operator":{pattern:/\|/i,alias:"operator"},"pipe-operations":{pattern:new RegExp(`${[...a,...s].map(h=>h.label).join("|")}`,"i"),alias:"keyword"}}},function:new RegExp(`\\b(?:${c.map(h=>h.label).join("|")})(?=\\s*\\()`,"i"),"context-range":[{pattern:/\[[^\]]*(?=\])/,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}},{pattern:/(offset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b\d+[smhdwy]\b/i,alias:"number"}}}],quote:{pattern:/"(?:\\.|[^\\"])*"/,alias:"string",greedy:!0},backticks:{pattern:/`(?:\\.|[^\\`])*`/,alias:"string",greedy:!0},number:/\b-?\d+((\.\d*)?([eE][+-]?\d+)?)?\b/,operator:/\s?(\|[=~]?|!=?|<(?:=>?|<|>)?|>[>=]?)\s?/i,punctuation:/[{}(),.]/},o=i},77256:(ne,A,e)=>{"use strict";e.d(A,{BK:()=>M,Cp:()=>k,D2:()=>w,E2:()=>ce,ES:()=>J,GD:()=>L,Ht:()=>K,JM:()=>G,JZ:()=>ue,KT:()=>I,NH:()=>N,NJ:()=>Q,S2:()=>S,Sl:()=>B,Yp:()=>C,bI:()=>T,bg:()=>P,i7:()=>O,i9:()=>ae,nL:()=>V,qc:()=>j,qy:()=>F,u7:()=>Z,vV:()=>_,w$:()=>x,y$:()=>ee});var n=e(2543),a=e.n(n),s=e(41607),l=e(92745),r=e(68143),c=e(43173),i=e(15130),o=e(47797),h=e(94646),f=e(29609),g=e(21834),u=e(24619),E=e(95443),v=e(52161),p=e(33998),m=e(63895),y=e(29442),d=e(92367);function x(X,le,he){const fe=(0,v.EV)(X),Ce=h.UP(fe,le);return y.PP.detailsPageLink(fe,Ce,he?{returnTo:he}:void 0)}function b(X,le,he){const fe=X.rulesSource.name,Ce=ruleId.fromRule(fe,X.namespace.name,X.groupName,le);return rulesNav.detailsPageLink(fe,Ce,he?{returnTo:he}:void 0)}function D(X){const le=X.ruleSourceName,he=ruleId.fromRuleWithLocation(X),fe=encodeURIComponent(ruleId.stringifyIdentifier(he)),Ce=encodeURIComponent(le);return createRelativeUrl(`/alerting/${Ce}/${fe}/view`)}function C(X,le){const{uid:he,type:fe}=X;return(0,d.G)("/explore",{left:JSON.stringify({datasource:X.uid,queries:[{refId:"A",datasource:{uid:he,type:fe},expr:le}],range:{from:"now-1h",to:"now"}})})}function P(X,le=""){return(0,d.G)(`/alerting/notifications/receivers/${encodeURIComponent(X)}/edit`,{alertmanager:le})}function T(X,le=""){return(0,d.G)("/alerting/notifications",{search:X,tab:"contact_points",alertmanager:le})}function O(X,le=""){return(0,d.G)("/alerting/routes/mute-timing/edit",{muteName:X,alertmanager:le})}function S(X){if((0,f.X4)(X)||(0,f.Mj)(X))return(0,d.z)(`/alerting/${encodeURIComponent(X.ruleSourceName)}/${encodeURIComponent((0,h.PH)(X.ruleName))}/find`);if((0,f.A4)(X))return(0,d.z)(`/alerting/grafana/${X.uid}/view`)}function B(X){return X.reduce((le,{key:he,value:fe})=>(le[he]=fe,le),{})}const K=X=>{const le=X.queryString===void 0?void 0:String(X.queryString),he=X.alertState===void 0?void 0:String(X.alertState),fe=X.dataSource===void 0?void 0:String(X.dataSource),Ce=X.ruleType===void 0?void 0:String(X.ruleType),Ae=X.groupBy===void 0?void 0:String(X.groupBy).split(","),_e=X.receivers===void 0?void 0:String(X.receivers).split(",");return{queryString:le,alertState:he,dataSource:fe,groupBy:Ae,ruleType:Ce,receivers:_e}},U=X=>({queryString:X.get("queryString")??void 0,contactPoint:X.get("contactPoint")??void 0}),F=X=>{const le=X.queryString===void 0?void 0:String(X.queryString),he=X.silenceState===void 0?void 0:String(X.silenceState);return{queryString:le,silenceState:he}};function I(X){return Object.entries(X).map(([le,he])=>({key:le,value:he}))}function V(X,le,he){const fe=new URLSearchParams(he);return le&&fe.set(E.DD,le),`${X}?${fe.toString()}`}function M(X,le){const he=new URLSearchParams;return he.append("alertmanager",X),(0,m.J9)(le).forEach((Ce,Ae)=>he.append(Ae,Ce)),(0,d.G)("/alerting/silence/new",he)}function L(X){return(0,d.G)(`/datasources/edit/${X}`)}function N(X){return(0,d.G)(`/dashboards/f/${X}`)}function W(X,le){return createRelativeUrl(`/dashboards/f/${X}/${le}/alerting`)}function R(X){return createRelativeUrl(`/dashboards/f/${X}/settings`)}function G(X){return(0,d.G)(`/d/${encodeURIComponent(X)}`)}function w(X,le){const he=new URLSearchParams({viewPanel:le});return(0,d.G)(`/d/${encodeURIComponent(X)}`,he)}function _(X,le){return(0,d.G)(`/alerting/notifications/receivers/${encodeURIComponent(X)}/edit`,le)}function Q(X,le){return(0,d.G)("/alerting/routes/mute-timing/edit",{...le,muteName:X})}function ae(X,le,he,fe=1e3){const Ce=new Date().getTime(),Ae=()=>X().catch(_e=>{if(le(_e)&&new Date().getTime()-Ce<he)return new Promise(Xe=>setTimeout(Xe,fe)).then(Ae);throw _e});return Ae()}const q={[u.Gi.Alerting]:1,[u.cF.Firing]:1,[u.Gi.Error]:1,[u.Gi.Pending]:2,[u.Gi.Recovering]:2,[u.cF.Pending]:2,[u.cF.Recovering]:2,[u.cF.Inactive]:2,[u.Gi.NoData]:3,[u.Gi.Normal]:4,[u.cF.Unknown]:5};function k(X,le){if(X===g.xB.Importance)return(0,n.sortBy)(le,fe=>[q[(0,u.lh)(fe.state)],(0,f.RI)(fe).toLocaleLowerCase()]);if(X===g.xB.TimeAsc)return(0,n.sortBy)(le,fe=>[new Date(fe.activeAt)||new Date,(0,f.RI)(fe).toLocaleLowerCase()]);if(X===g.xB.TimeDesc)return(0,n.sortBy)(le,fe=>[new Date(fe.activeAt)||new Date,(0,f.RI)(fe).toLocaleLowerCase()]).reverse();const he=(0,n.sortBy)(le,fe=>(0,f.RI)(fe).toLocaleLowerCase());return X===g.xB.AlphaDesc&&he.reverse(),he}function ee(){return c.$.buildInfo.edition===s.r.OpenSource}function j(){return i.TP.hasRole("Admin")||i.TP.isGrafanaAdmin}function J(){return c.$.buildInfo.env==="development"}function Z(X){return!!(X&&typeof X=="object"&&"message"in X)}function te(X){return typeof X=="object"&&X!==null}function se(X){return te(X)&&"data"in X}function ie(X){return te(X)?typeof Object.getOwnPropertyDescriptor(X,"message")?.value=="string":!1}function ce(X){if((0,p.jX)(X)&&X.data.details)return X.data.details.uid;if(Z(X)&&(0,n.isString)(X.cause))return X.cause}function re(X,le){return X?ce(X)===le:!1}function ue(X){if((0,r.NF)(X)){if((0,p.jX)(X)){const he=(0,p.LQ)(X);if(he)return he}if(X.message)return X.message;if(se(X)&&ie(X.data)){const he=(0,o.do)(X),fe=(0,o.q6)(X),Ce=(0,o.ee)(X);return(0,l.t)("alerting.errors.failedWith","{{-config}} failed with {{status}}: {{-message}}",{config:Ce,status:he,message:fe})}return X.statusText?X.statusText:String(X.status)||"Unknown error"}if(!Z(X))return String(X);const le=ce(X);if(typeof le=="string"){const he=(0,p.j2)(le);if(he)return he}return X.cause?`${X.message}, cause: ${ue(X.cause)}`:X.message}},77295:(ne,A,e)=>{"use strict";e.d(A,{$o:()=>f,HO:()=>m,Zp:()=>p,iy:()=>E});var n=e(75505),a=e(28105),s=e(68143),l=e(55376),r=e(95443),c=e(52161),i=e(78467);const o="QUERY_NAMESPACE",h="QUERY_GROUP";function f(D){const C=u(D),P=g(D),T=D.apiVersion==="legacy"?"cortex":"mimir";return{rules:O=>({path:C,params:{subtype:T,...(0,i.ou)(O)}}),namespace:O=>{const{namespace:S,searchParams:B}=P.namespace(O);return{path:`${C}/${encodeURIComponent(S)}`,params:{subtype:T,...B}}},namespaceGroup:(O,S)=>{if(!O)throw new Error("Namespace UID is required to fetch ruler group");if(!S)throw new Error("Group name is required to fetch ruler group");const{namespace:B,searchParams:K}=P.namespace(O),{group:U,searchParams:F}=P.group(S);return{path:`${C}/${encodeURIComponent(B)}/${encodeURIComponent(U)}`,params:{subtype:T,...K,...F}}}}}function g(D){const C=D.dataSourceName===c.hY,P=T=>(0,l.Cl)(T)===!0?{group:h,searchParams:{group:T}}:{group:T,searchParams:{}};return C?{namespace:T=>({namespace:T,searchParams:{}}),group:P}:{namespace:T=>(0,l.Cl)(T)===!0?{namespace:o,searchParams:{namespace:T}}:{namespace:T,searchParams:{}},group:P}}function u(D){return`${`/api/ruler/${D.dataSourceUid}`}/api/v1/rules`}async function E(D,C){if(C?.dashboardUID&&D.dataSourceName!==c.hY)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:P,params:T}=f(D).rules(C);return y(P,{},T)}async function v(D,C){const{path:P,params:T}=f(D).namespace(C);return(await y(P,{},T))[C]||[]}async function p(D){return y(`/api/ruler/${(0,c.w5)(D)}/api/v1/rules/test/test`,null)}async function m(D,C,P){const{path:T,params:O}=f(D).namespaceGroup(C,P);return y(T,null,O)}async function y(D,C,P){try{return(await(0,n.s)((0,s.AI)().fetch({url:D,showErrorAlert:!1,showSuccessAlert:!1,params:P}))).data}catch(T){if(!d(T))throw T;if(b(T))return C;throw x(T)?{...T,data:{...T.data,message:r.UU}}:T}}function d(D){if(!(0,a.Gv)(D))return!1;const C="data"in D&&D.data!==null&&D.data!==void 0;return"status"in D&&Number.isFinite(D.status)&&C}function x(D){return D.status===404||D.status===500&&D.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function b(D){return D.status===404&&(D.data.message?.includes("group does not exist")||D.data.message?.includes("no rule groups found"))}},77345:(ne,A,e)=>{"use strict";e.d(A,{k:()=>V});var n=e(74848),a=e(17437),s=e(63142);function l(M){return(0,a.css)({".sr-only":{position:"absolute",width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",border:0}})}function r(M){return(0,a.css)({".alert-state-paused, .alert-state-pending":{color:M.colors.text.secondary,fontWeight:M.typography.fontWeightMedium},".alert-state-ok":{color:M.colors.success.text,fontWeight:M.typography.fontWeightMedium},".alert-state-warning":{color:M.colors.warning.text,fontWeight:M.typography.fontWeightMedium},".alert-state-critical":{color:M.colors.error.text,fontWeight:M.typography.fontWeightMedium}})}function c(M){return(0,a.css)({".card-section":{marginBottom:M.spacing(4)},".card-list":{display:"flex",flexDirection:"row",flexWrap:"wrap",listStyleType:"none"},".card-item":{display:"block",height:"100%",background:M.colors.background.secondary,boxShadow:"none",padding:M.spacing(2),borderRadius:M.shape.radius.default,"&:hover":{background:M.colors.emphasize(M.colors.background.secondary,.03)},".label-tag":{marginLeft:M.spacing(1),fontSize:"11px",padding:"2px 6px"}},".card-item-body":{display:"flex",overflow:"hidden"},".card-item-details":{overflow:"hidden"},".card-item-header":{marginBottom:M.spacing(2)},".card-item-type":{color:M.colors.text.secondary,textTransform:"uppercase",fontSize:M.typography.size.sm,fontWeight:M.typography.fontWeightMedium},".card-item-badge":{margin:"6px 0"},".card-item-notice":{fontSize:M.typography.size.sm},".card-item-name":{color:M.colors.text.primary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-label":{marginLeft:M.spacing(1)},".card-item-sub-name":{color:M.colors.text.secondary,overflow:"hidden",textOverflow:"ellipsis",width:"100%"},".card-item-sub-name--header":{color:M.colors.text.secondary,textTransform:"uppercase",marginBottom:M.spacing(2),fontSize:M.typography.size.sm,fontWeight:"bold"},".card-list-layout-grid":{".card-item-type":{display:"inline-block"},".card-item-notice":{fontSize:M.typography.size.sm,display:"inline-block",marginLeft:M.spacing(2)},".card-item-header-action":{float:"right"},".card-item-wrapper":{width:"100%",padding:M.spacing(0,2,2,0)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item-figure":{margin:M.spacing(0,2,2,0),height:"80px",img:{width:"80px"}},".card-item-name":{fontSize:M.typography.h3.fontSize},[M.breakpoints.up("md")]:{".card-item-wrapper":{width:"50%"}},[M.breakpoints.up("lg")]:{".card-item-wrapper":{width:"33.333333%"}},"&.card-list-layout-grid--max-2-col":{[M.breakpoints.up("lg")]:{".card-item-wrapper":{width:"50%"}}}},".card-list-layout-list":{".card-item-wrapper":{padding:0,width:"100%",marginBottom:M.spacing(1)},".card-item-wrapper--clickable":{cursor:"pointer"},".card-item":{borderRadius:M.shape.radius.default},".card-item-header":{float:"right",textAlign:"right"},".card-item-figure":{margin:M.spacing(0,2,0,0),img:{width:"48px"}},".card-item-name":{fontSize:M.typography.h4.fontSize},".card-item-sub-name":{fontSize:M.typography.size.sm},".layout-selector":{marginRight:0}}})}function i(M){return(0,a.css)({"code, pre, kbd, samp":{...M.typography.code,fontSize:M.typography.bodySmall.fontSize,backgroundColor:M.colors.background.primary,color:M.colors.text.primary,border:`1px solid ${M.colors.border.medium}`,borderRadius:M.shape.radius.default},code:{whiteSpace:"nowrap",padding:"2px 5px",margin:"0 2px"},pre:{display:"block",margin:M.spacing(0,0,2),lineHeight:M.typography.body.lineHeight,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",overflow:"auto",padding:"10px",code:{padding:0,color:"inherit",whiteSpace:"pre-wrap",backgroundColor:"transparent",border:0}}})}function o(M){return(0,a.css)({".react-resizable-handle":{visibility:"hidden"},".react-grid-item, #grafana-portal-container":{touchAction:"initial !important","&:hover":{".react-resizable-handle":{visibility:"visible"}}},".dragging-active":{"*":{cursor:"move",userSelect:"none"}},[M.breakpoints.down("md")]:{".react-grid-layout":{height:"unset !important"},".react-grid-item":{display:"block !important",transitionProperty:"none !important",position:"unset !important",transform:"translate(0px, 0px) !important",marginBottom:M.spacing(2)},".panel-repeater-grid-item":{height:"auto !important"}},".react-grid-item.react-grid-placeholder":{boxShadow:`0 0 4px ${M.colors.primary.border} !important`,background:`${M.colors.primary.transparent} !important`,zIndex:"-1 !important",opacity:"unset !important"},".react-grid-item > .react-resizable-handle::after":{borderRight:`2px solid ${M.isDark?M.v1.palette.gray1:M.v1.palette.gray3} !important`,borderBottom:`2px solid ${M.isDark?M.v1.palette.gray1:M.v1.palette.gray3} !important`},".react-grid-item.resizing.panel, .react-grid-item.panel.dropdown-menu-open, .react-grid-item.react-draggable-dragging.panel":{zIndex:M.zIndex.dropdown},".react-grid-item.cssTransforms":{transitionProperty:"none !important"},[M.transitions.handleMotion("no-preference")]:{".react-grid-layout--enable-move-animations":{".react-grid-item.cssTransforms":{transitionProperty:"transform !important"}}},".dashboard-selected-element":{outline:`1px dashed ${M.colors.primary.border}`,outlineOffset:"0px",borderRadius:M.shape.radius.default},".dashboard-selectable-element":{"&:hover":{outline:`1px dashed ${M.colors.border.strong}`,outlineOffset:"0px",borderRadius:M.shape.radius.default,backgroundColor:M.colors.emphasize(M.colors.background.canvas,.08)}},".dashboard-canvas-add-button":{display:"flex",opacity:.5,transition:M.transitions.create("opacity"),filter:"grayscale(100%)","&:hover,:focus-within":{opacity:1,filter:"unset"}},".dashboard-visible-hidden-element":{position:"relative"},".dashboard-drop-target":{"&:is(:hover),&:not(:hover)":{outline:`2px solid ${M.colors.primary.border}`,outlineOffset:"0px",borderRadius:M.shape.radius.default}},".dashboard-draggable-transparent-selection":{"*::selection":{all:"inherit"}},".react-draggable-dragging":{opacity:.8}})}function h(M){return(0,a.css)({".delta-html":{background:M.colors.background.secondary,paddingTop:"5px",paddingBottom:"5px",userSelect:"none"},".diff-line":{color:M.colors.text.primary,fontFamily:M.typography.fontFamilyMonospace,fontSize:M.typography.size.sm,lineHeight:2,marginBottom:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative","&:after":{left:"-40px"}},".diff-line-number":{color:M.colors.text.secondary,display:"inline-block",fontSize:M.typography.size.xs,lineHeight:2.3,textAlign:"right",width:"30px"},".diff-line-number-hide":{visibility:"hidden"},".diff-line-icon":{color:M.colors.text.primary,fontSize:M.typography.size.xs,float:"right",position:"relative",top:"2px",right:"10px"},".diff-json-new, .diff-json-old, .diff-json-deleted, .diff-json-added":{color:M.v1.palette.gray5,".diff-line-number":{color:M.colors.text.primary}},".diff-json-new":{backgroundColor:M.isDark?"#457740":"#664e33"},".diff-json-old":{backgroundColor:M.isDark?"#a04338":"#5a372a"},".diff-json-added":{backgroundColor:M.colors.primary.shade},".diff-json-deleted":{backgroundColor:M.colors.error.shade},".diff-value":{userSelect:"all"},".diff-circle":{marginRight:"0.5em","*":{marginBottom:"1px"}},".diff-circle-changed":{color:"#f59433"},".diff-circle-added":{color:"#29d761"},".diff-circle-deleted":{color:"#fd474a"},".diff-item-added, .diff-item-deleted":{listStyle:"none"},".diff-group":{background:M.colors.background.secondary,fontSize:"16px",fontStyle:"normal",padding:"10px 15px",margin:M.spacing(2,0),".diff-group":{padding:"0 5px"}},".diff-group-name":{display:"inline-block",width:"100%",fontSize:"16px",paddingLeft:"1.75em",margin:"0 0 14px 0"},".diff-summary-key":{paddingLeft:"0.25em"},".diff-list":{paddingLeft:"40px",".diff-list":{paddingLeft:0}},".diff-item":{color:M.v1.palette.gray2,lineHeight:2.5,"> div":{display:"inline"}},".diff-item-changeset":{listStyle:"none"},".diff-label":{backgroundColor:M.colors.action.hover,borderRadius:M.shape.radius.default,color:M.colors.text.primary,display:"inline",fontSize:`${M.typography.fontSize}px`,margin:"0 5px",padding:"3px 8px"},".diff-linenum":{float:"right"},".diff-arrow":{color:M.colors.text.primary},".diff-block":{width:"100%",display:"inline-block"},".diff-block-title":{fontSize:"16px",display:"inline-block"},".diff-title":{fontSize:"16px"},".diff-change-container":{margin:"0 0",paddingLeft:"3em",paddingRight:0},".diff-change-group":{width:"100%",color:M.colors.text.primary,marginBottom:"14px"},".diff-change-item":{display:"inline-block"},".diff-change-title":{fontSize:"16px"},".bullet-position-container":{position:"relative",left:"-6px"},".diff-list-circle":{marginBottom:"3px"}})}var f=e(27629),g=e(35484);function u(M,L){const N=L?{}:{overflowY:"auto !important"};return(0,a.css)({"*, *::before, *::after":{boxSizing:"inherit"},"[tabindex='-1']:focus":{outline:"none !important"},html:{MsOverflowStyle:"scrollbar",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",boxSizing:"border-box",height:"100%",fontSize:`${M.typography.htmlFontSize}px`,fontFamily:M.typography.fontFamily,lineHeight:M.typography.body.lineHeight,fontKerning:"normal"},":root":{colorScheme:M.colors.mode},body:{height:"100%",width:"100%",position:"unset",color:M.colors.text.primary,backgroundColor:M.colors.background.canvas,paddingRight:"0 !important","@media print":{overflow:"visible"},"@page":{margin:0,size:"auto",padding:0},fontVariantLigatures:"no-contextual",...M.typography.body,...N,fontVariantNumeric:(0,f.$)("tabularNumbers")?"tabular-nums":"initial"},"h1, .h1":E(M.typography.h1),"h2, .h2":E(M.typography.h2),"h3, .h3":E(M.typography.h3),"h4, .h4":E(M.typography.h4),"h5, .h5":E(M.typography.h5),"h6, .h6":E(M.typography.h6),p:{margin:M.spacing(0,0,2)},textarea:{overflow:"auto",resize:"vertical"},button:{letterSpacing:M.typography.body.letterSpacing,"&:focus-visible":(0,g.getFocusStyles)(M),"&:focus":{outline:"none"}},label:{display:"inline-block"},figure:{margin:M.spacing(0,0,2)},img:{verticalAlign:"middle"},fieldset:{minWidth:0,padding:0,margin:0,border:0},legend:{display:"block",width:"100%",padding:0,marginBottom:M.spacing(1),fontSize:M.spacing(3),lineHeight:"inherit",border:0},"small, .small":{fontSize:M.typography.bodySmall.fontSize,fontWeight:"normal"},"b, strong":{fontWeight:M.typography.fontWeightMedium},em:{fontStyle:"italic",color:M.colors.text.primary},cite:{fontStyle:"normal"},blockquote:{padding:M.spacing(0,0,0,2),margin:M.spacing(0,0,2),borderLeft:`5px solid ${M.v1.palette.gray3}`,p:{marginBottom:0,fontSize:M.typography.fontSize*1.25,fontWeight:300,lineHeight:1.25},small:{display:"block",lineHeight:M.typography.body.lineHeight,color:M.v1.palette.gray2,"&:before":{content:"'\\2014 \\00A0'"}}},"q:before, q:after, blockquote:before, blockquote:after":{content:"''"},address:{display:"block",marginBottom:M.spacing(2),fontStyle:"normal",lineHeight:M.typography.body.lineHeight},"a.external-link":{color:M.colors.text.link,textDecoration:"normal","&:hover":{color:M.colors.text.link,textDecoration:"underline"}},".link":{color:M.colors.text.primary,cursor:"pointer"},".link:hover":{color:M.colors.text.maxContrast},".pointer":{cursor:"pointer"},"audio, canvas, progress, video":{display:"inline-block",verticalAlign:"baseline"},"audio:not([controls])":{display:"none",height:0},"abbr[title]":{borderBottom:"1px dotted",cursor:"help"},dfn:{fontStyle:"italic"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sup:{top:"-0.5em"},sub:{bottom:"-0.25em"},hr:{marginTop:M.spacing(2),marginBottom:M.spacing(2),border:0,borderTop:`1px solid ${M.colors.border.medium}`},"mark, .mark":{background:M.colors.warning.main},"ul, ol, dl":{marginTop:0,marginBottom:0,padding:0},"ul ul, ul ol, ol ol, ol ul":{marginBottom:0},li:{lineHeight:M.typography.body.lineHeight},dd:{marginBottom:M.spacing(1),marginLeft:0},"dt, dd":{lineHeight:M.typography.body.lineHeight},dt:{fontWeight:M.typography.fontWeightMedium},"button, input, optgroup, select, textarea":{borderRadius:0,color:"inherit",font:"inherit",lineHeight:"inherit",margin:0},optgroup:{fontWeight:"bold"},'button, html input[type="button"], input[type="submit"]':{WebkitAppearance:"button",cursor:"pointer"},'input[type="search"]':{WebkitAppearance:"none"},'input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration':{WebkitAppearance:"none"},table:{backgroundColor:"transparent",borderCollapse:"collapse",borderSpacing:0},caption:{paddingTop:M.spacing(.5),paddingBottom:M.spacing(.5),color:M.colors.text.secondary,textAlign:"left",captionSide:"bottom"},th:{fontWeight:M.typography.fontWeightMedium,textAlign:"left"},"td, th":{padding:0},".muted":{color:M.colors.text.secondary},"a.muted:hover, a.muted:focus":{color:M.colors.text.primary},".text-warning":{color:M.colors.warning.text,"&:hover, &:focus":{color:M.colors.emphasize(M.colors.warning.text,.15)}},".text-error":{color:M.colors.error.text,"&:hover, &:focus":{color:M.colors.emphasize(M.colors.error.text,.15)}},".text-success":{color:"$success-text-color","&:hover, &:focus":{color:M.colors.emphasize(M.colors.success.text,.15)}},a:{cursor:"pointer",color:M.colors.text.primary,textDecoration:"none","&:focus":{outline:"none"},"&:focus-visible":(0,g.getFocusStyles)(M),"&:[disabled]":{cursor:"default",pointerEvents:"none !important"}},"[role='button']":{cursor:"pointer"},"[hidden]":{display:"none !important"},"a, area, button, [role='button'], input, label, select, summary, textarea":{touchAction:"manipulation"},".text-link":{textDecoration:"underline"},".text-left":{textAlign:"left"},".text-right":{textAlign:"right"},".text-center":{textAlign:"center"},".highlight-search-match":{background:M.components.textHighlight.background,color:M.components.textHighlight.text,padding:0},".template-variable":{color:M.colors.primary.text},".modal-header-title":{fontSize:M.typography.size.lg,float:"left",paddingTop:M.spacing(1),margin:M.spacing(0,2)}})}function E(M){return{margin:0,fontSize:M.fontSize,lineHeight:M.lineHeight,fontWeight:M.fontWeight,letterSpacing:M.letterSpacing,fontFamily:M.fontFamily,marginBottom:"0.45em"}}function v(M){return(0,a.css)({"iframe.intercom-borderless-frame":{colorScheme:M.colors.mode}})}function p(M){return(0,a.css)({".filter-table *":{boxSizing:"border-box"},".filter-table":{width:"100%",borderCollapse:"separate",tbody:{"tr:nth-of-type(odd)":{background:M.colors.emphasize(M.colors.background.primary,.02)}},th:{width:"auto",padding:M.spacing(.5,1),textAlign:"left",lineHeight:"30px",height:"30px",whiteSpace:"nowrap"},td:{padding:M.spacing(.5,1),lineHeight:"30px",height:"30px",whiteSpace:"nowrap"},".link-td":{padding:0,lineHeight:"30px",height:"30px",whiteSpace:"nowrap",a:{display:"block",padding:M.spacing(0,1),height:"30px"}},".ellipsis":{display:"block",width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},".expanded":{borderColor:M.components.panel.background},".expanded > td":{paddingBottom:0},".filter-table__avatar":{width:"25px",height:"25px",borderRadius:M.shape.radius.circle},"&--hover":{"tbody tr:hover":{background:M.colors.emphasize(M.colors.background.primary,.05)}}}})}function m(M){const L=typeof window<"u"&&window.__grafana_public_path__,N=L?`${L}fonts/`:"public/fonts/";return(0,a.css)([{"@font-face":{fontFamily:"Roboto Mono",fontStyle:"normal",fontWeight:400,fontDisplay:"swap",src:`url('${N}roboto/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSh0mQ.woff2') format('woff2')`,unicodeRange:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD"}},{"@font-face":{fontFamily:"Roboto Mono",fontStyle:"normal",fontWeight:500,fontDisplay:"swap",src:`url('${N}roboto/L0xTDF4xlVMF-BfR8bXMIhJHg45mwgGEFl0_3vrtSM1J-gEPT5Ese6hmHSh0mQ.woff2') format('woff2')`,unicodeRange:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD"}},{"@font-face":{fontFamily:"Inter",fontStyle:"normal",fontWeight:400,fontDisplay:"swap",src:`url('${N}inter/Inter-Regular.woff2') format('woff2')`}},{"@font-face":{fontFamily:"Inter",fontStyle:"normal",fontWeight:500,fontDisplay:"swap",src:`url('${N}inter/Inter-Medium.woff2') format('woff2')`}},{"@font-face":{fontFamily:"Inter",fontStyle:"italic",fontWeight:400,fontDisplay:"swap",src:`url('${N}inter/Inter-Italic.woff2') format('woff2')`}},{"@font-face":{fontFamily:"Inter",fontStyle:"italic",fontWeight:500,fontDisplay:"swap",src:`url('${N}inter/Inter-MediumItalic.woff2') format('woff2')`}}])}function y(M){return(0,a.css)({"input, button, select, textarea":{fontFamily:M.typography.body.fontFamily,fontSize:M.typography.body.fontSize,fontWeight:M.typography.body.fontWeight,lineHeight:M.typography.body.lineHeight},"input, select":{backgroundColor:M.components.input.background,color:M.components.input.text,border:"none",boxShadow:"none"},"input, textarea":{"&::placeholder":{color:M.colors.text.disabled}},'input[type="number"]::-webkit-outer-spin-button, input[type="number"]::-webkit-inner-spin-button':{WebkitAppearance:"none",margin:0},'input[type="number"]':{MozAppearance:"textfield"},'select, input[type="file"]':{height:M.components.height.md,lineHeight:M.components.height.md},select:{width:"220px",border:`1px solid ${M.components.input.borderColor}`,backgroundColor:M.components.input.background},"select[multiple], select[size], textarea":{height:"auto"},'select:focus, input[type="file"]:focus, input[type="radio"]:focus, input[type="checkbox"]:focus':{outline:"5px auto -webkit-focus-ring-color",outlineOffset:"-2px"},"input[type='file'], input[type='image'], input[type='submit'], input[type='reset'], input[type='button'], input[type='radio'], input[type='checkbox']":{width:"auto"},"input[disabled], select[disabled], textarea[disabled], input[readonly], select[readonly], textarea[readonly]":{cursor:"not-allowed",backgroundColor:M.colors.action.disabledBackground},'input[type="radio"][disabled], input[type="checkbox"][disabled], input[type="radio"][readonly], input[type="checkbox"][readonly]':{cursor:"not-allowed",backgroundColor:"transparent"},"input:-webkit-autofill, input:-webkit-autofill:hover, input:-webkit-autofill:focus, input:-webkit-autofill, textarea:-webkit-autofill, textarea:-webkit-autofill:hover, textarea:-webkit-autofill:focus, select:-webkit-autofill, select:-webkit-autofill:hover, select:-webkit-autofill:focus":{WebkitBoxShadow:`0 0 0px 1000px ${M.components.input.background} inset !important`,WebkitTextFillColor:M.components.input.text,boxShadow:`0 0 0px 1000px ${M.components.input.background} inset`,border:`1px solid ${M.components.input.background}`},".gf-form":{display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",marginBottom:M.spacing(.5),"&--offset-1":{marginLeft:M.spacing(2)},"&--grow":{flexGrow:1},"&--flex-end":{justifyContent:"flex-end"},"&--align-center":{alignContent:"center"},"&--alt":{flexDirection:"column",alignItems:"flex-start",".gf-form-label":{padding:"4px 0"}}},".gf-form--has-input-icon":{position:"relative",marginRight:M.spacing(.5),".gf-form-input-icon":{position:"absolute",top:"8px",fontSize:M.typography.size.lg,left:"10px",color:M.colors.text.disabled},"> input":{paddingLeft:"35px","&:focus + .gf-form-input-icon":{color:M.colors.text.secondary}},".Select--multi .Select-multi-value-wrapper, .Select-placeholder":{paddingLeft:"30px"}},".gf-form-disabled":{color:M.colors.text.secondary,".gf-form-select-wrapper::after":{color:M.colors.text.secondary},"a, .gf-form-input":{color:M.colors.text.secondary}},".gf-form-group":{marginBottom:M.spacing(5)},".gf-form-inline":{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start","&--nowrap":{flexWrap:"nowrap"},"&--xs-view-flex-column":{flexDirection:"row",flexWrap:"nowrap",[M.breakpoints.down("sm")]:{flexDirection:"column"}},".select-container":{marginRight:M.spacing(.5)},".gf-form-spacing":{marginRight:M.spacing(.5)}},".gf-form-button-row":{paddingTop:M.spacing(3),"a, button":{marginRight:M.spacing(2)}},".gf-form-label":{display:"flex",alignItems:"center",padding:M.spacing(0,1),flexShrink:0,fontWeight:M.typography.fontWeightMedium,fontSize:M.typography.size.sm,backgroundColor:M.colors.background.secondary,height:"32px",lineHeight:"32px",marginRight:M.spacing(.5),borderRadius:M.shape.radius.default,justifyContent:"space-between",border:"none","&--grow":{flexGrow:1},"&--transparent":{backgroundColor:"transparent",border:0,textAlign:"right",paddingLeft:0},"&--variable":{color:M.colors.primary.text,background:M.components.panel.background,border:`1px solid ${M.components.panel.borderColor}`},"&--btn":{border:"none",borderRadius:M.shape.radius.default,"&:hover":{background:M.colors.background.secondary,color:M.colors.text.primary}},"&:disabled":{color:M.colors.text.secondary}},".gf-form-label + .gf-form-label":{marginRight:M.spacing(.5)},".gf-form-pre":{display:"block !important",flexGrow:1,margin:0,marginRight:M.spacing(.5),border:"1px solid transparent",borderLeft:"none",borderRadius:M.shape.radius.default},".gf-form-textarea":{maxWidth:"650px"},".gf-form-input":{display:"block",width:"100%",height:"32px",padding:M.spacing(0,1),fontSize:M.typography.size.md,lineHeight:"18px",color:M.components.input.text,backgroundColor:M.components.input.background,backgroundImage:"none",backgroundClip:"padding-box",border:`1px solid ${M.components.input.borderColor}`,borderRadius:M.shape.radius.default,marginRight:M.spacing(.5),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&textarea":{overflow:"auto",whiteSpace:"pre-wrap",padding:`6px ${M.spacing(1)}`,minHeight:"32px",height:"auto"},"&::-ms-expand":{backgroundColor:"transparent",border:0,display:"none"},"&:focus":{borderColor:M.colors.primary.border,outline:"none"},"&::placeholder":{color:M.colors.text.disabled,opacity:1},"&:disabled, &[readonly]":{backgroundColor:M.colors.action.disabledBackground,opacity:1},"&:disabled":{cursor:"not-allowed"},"&.gf-size-auto":{width:"auto"},"&--dropdown":{paddingRight:M.spacing(3),position:"relative",display:"flex",alignItems:"center","&::after":{position:"absolute",top:"36%",right:"11px",fontSize:"11px",backgroundColor:"transparent",color:M.colors.text.primary,font:`normal normal normal ${M.typography.size.sm}/1 FontAwesome`,content:'"\f0d7"',pointerEvents:"none"}},"&--has-help-icon":{paddingRight:M.spacing(4)}},".gf-form-select-wrapper":{position:"relative",backgroundColor:M.components.input.background,marginRight:M.spacing(.5),".gf-form-select-icon":{position:"absolute",zIndex:1,top:"50%",marginTop:"-7px","+ .gf-form-input":{position:"relative",zIndex:2,paddingLeft:M.spacing(4),backgroundColor:"transparent",option:{color:M.v1.palette.black}}},".gf-form-input":{marginRight:0,lineHeight:"32px"},"select.gf-form-input":{textIndent:"0.01px",textOverflow:"''",paddingRight:M.spacing(4),appearance:"none","&:-moz-focusring":{outline:"none",color:"transparent",textShadow:`0 0 0 ${M.colors.text.primary}`},"&.ng-empty":{color:M.colors.text.secondary}},"&::after":{position:"absolute",top:"36%",right:"11px",backgroundColor:"transparent",color:M.colors.text.primary,font:`normal normal normal ${M.typography.size.sm}/1 FontAwesome`,content:'"\f0d7"',pointerEvents:"none",fontSize:"11px"},"&--has-help-icon":{"&::after":{right:M.spacing(4)}}},".gf-form--v-stretch":{alignItems:"stretch"},".gf-form-btn":{padding:M.spacing(0,1),marginRight:M.spacing(.5),lineHeight:"18px",fontSize:M.typography.size.sm,flexShrink:0,flexGrow:0},".gf-form-help-icon":{flexGrow:0,color:M.colors.text.secondary,"&:hover":{color:M.colors.text.primary}},".cta-form":{position:"relative",padding:M.spacing(3),backgroundColor:M.colors.background.secondary,marginBottom:M.spacing(3),borderTop:`3px solid ${M.colors.success.main}`},".input-small":{width:"90px"}})}function d(M){return(0,a.css)([])}function x(M){return(0,a.css)({".json-formatter-row":{fontFamily:"monospace","&, a, a:hover":{color:M.colors.text.primary,textDecoration:"none"},".json-formatter-row":{marginLeft:M.spacing(2)},".json-formatter-children":{"&.json-formatter-empty":{opacity:.5,marginLeft:M.spacing(2),"&::after":{display:"none"},"&.json-formatter-object::after":{content:"'No properties'"},"&.json-formatter-array::after":{content:"'[]'"}}},".json-formatter-string":{color:M.isDark?"#23d662":"green",whiteSpace:"pre-wrap",wordWrap:"break-word",wordBreak:"break-all"},".json-formatter-number":{color:M.isDark?M.colors.primary.text:M.colors.primary.main},".json-formatter-boolean":{color:M.isDark?M.colors.primary.text:M.colors.error.main},".json-formatter-null":{color:M.isDark?"#eec97d":"#855a00"},".json-formatter-undefined":{color:M.isDark?"rgb(239, 143, 190)":"rgb(202, 11, 105)"},".json-formatter-function":{color:M.isDark?"#fd48cb":"#ff20ed"},".json-formatter-url":{textDecoration:"underline",color:M.isDark?"#027bff":M.colors.primary.main,cursor:"pointer"},".json-formatter-bracket":{color:M.isDark?"#9494ff":M.colors.primary.main},".json-formatter-key":{color:M.isDark?"#23a0db":"#00008b",cursor:"pointer",paddingRight:M.spacing(.25),marginRight:M.spacing(.5)},".json-formatter-constructor-name":{cursor:"pointer"},".json-formatter-array-comma":{marginRight:M.spacing(.5)},".json-formatter-toggler":{lineHeight:"16px",fontSize:M.typography.size.xs,verticalAlign:"middle",opacity:.6,cursor:"pointer",paddingRight:M.spacing(.25),"&::after":{display:"inline-block",transition:"transform 100ms ease-in",content:"'\u25BA'"}},"> a > .json-formatter-preview-text":{opacity:0,transition:"opacity 0.15s ease-in",fontStyle:"italic"},"&:hover > a > .json-formatter-preview-text":{opacity:.6},"&.json-formatter-open":{"> .json-formatter-toggler-link .json-formatter-toggler::after":{transform:"rotate(90deg)"},"> .json-formatter-children::after":{display:"inline-block"},"> a > .json-formatter-preview-text":{display:"none"},"&.json-formatter-empty::after":{display:"block"}}}})}function b(M){return(0,a.css)({".gf-form-select-box__control":{width:"100%",marginRight:M.spacing(.5),backgroundColor:M.components.input.background,border:`1px solid ${M.components.input.borderColor}`,borderRadius:M.shape.radius.default,color:M.components.input.text,cursor:"default",height:M.spacing(4),outline:"none",overflow:"hidden",position:"relative"},".gf-form-select-box__control--is-focused":{backgroundColor:M.components.input.background,borderColor:M.colors.primary.border,outline:"none",boxShadow:`inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px ${M.colors.primary.border}`},".gf-form-select-box__control--is-disabled":{backgroundColor:M.colors.action.disabledBackground},".gf-form-select-box__control--menu-right":{".gf-form-select-box__menu":{right:0,left:"unset"}},".gf-form-select-box__input":{input:{lineHeight:"inherit"}},".gf-form-select-box__menu":{background:M.colors.background.primary,boxShadow:M.shadows.z3,position:"absolute",zIndex:M.zIndex.dropdown,minWidth:"100%","&-notice--no-options":{backgroundColor:M.components.input.background,padding:"10px"}},".gf-form-select-box__menu-list":{overflowY:"auto",maxHeight:"300px",maxWidth:"600px"},".tag-filter .gf-form-select-box__menu":{width:"100%"},".gf-form-select-box__multi-value":{display:"inline",margin:"0 6px 0 0",cursor:"pointer"},".gf-form-select-box__multi-value__remove":{textAlign:"center",display:"inline-block",marginLeft:"2px",position:"relative"},".gf-form-select-box__multi-value__label":{display:"inline",verticalAlign:"middle"},".gf-form-select-box__option":{borderLeft:"2px solid transparent",whiteSpace:"nowrap",backgroundColor:M.components.input.background,"&.gf-form-select-box__option--is-focused":{color:M.colors.text.primary,background:M.colors.action.hover,borderImage:M.colors.gradients.brandVertical,borderImageSlice:1,borderStyle:"solid",borderTop:0,borderRight:0,borderBottom:0,borderLeftWidth:"2px"},"&.gf-form-select-box__option--is-selected":{".fa":{color:M.colors.text.primary}}},".gf-form-select-box__placeholder":{color:M.colors.text.disabled},".gf-form-select-box__control--is-focused .gf-form-select-box__placeholder":{display:"none"},".gf-form-select-box__value-container":{display:"inline-block",padding:"6px 20px 6px 10px",verticalAlign:"middle","> div":{display:"inline-block",verticalAlign:"middle"}},".gf-form-select-box__indicators":{position:"absolute",height:"100%",right:"8px",top:"1px",display:"inline-block",textAlign:"right"},".gf-form-input--form-dropdown":{padding:0,border:0,overflow:"visible",position:"relative"},".gf-form--has-input-icon":{".gf-form-select-box__value-container":{paddingLeft:"30px"}},".gf-form-select-box__desc-option":{display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%"},".gf-form-select-box__desc-option__body":{display:"flex",flexDirection:"column",flexGrow:1,paddingRight:"10px",fontWeight:M.typography.fontWeightMedium},".gf-form-select-box__desc-option__desc":{fontWeight:"normal",fontSize:M.typography.bodySmall.fontSize,color:M.colors.text.secondary},".gf-form-select-box__desc-option__img":{width:"16px",marginRight:"10px"},".gf-form-select-box__option-group__header":{display:"flex",alignItems:"center",justifyContent:"flex-start",justifyItems:"center",cursor:"pointer",padding:"7px 10px",width:"100%",borderBottom:`1px solid ${M.v1.palette.dark9}`,textTransform:"capitalize",".fa":{paddingRight:"2px"}},".gf-form-select-box-button-select":{height:"auto"},".select-button":{display:"flex",alignItems:"center"}})}function D(M){return(0,a.css)({".markdown-html":{img:{maxWidth:"100%"},"ul, ol":{paddingLeft:M.spacing(3),marginBottom:M.spacing(2)},table:{marginBottom:M.spacing(2),"td, th":{padding:M.spacing(.5,1)},th:{fontWeight:M.typography.fontWeightMedium,background:M.colors.background.secondary}},"table, th, td":{border:`1px solid ${M.colors.border.medium}`,borderCollapse:"collapse"},a:{color:M.colors.text.link,textDecoration:"none","&:hover":{color:M.colors.text.link,textDecoration:"underline"}},"p:last-child":{marginBottom:0},"table:last-child, ul:last-child, ol:last-child":{marginBottom:0}}})}function C(M){const L=M.breakpoints.values.xxl+M.spacing.gridSize*2+M.components.sidemenu.width;return(0,a.css)({".grafana-app":{display:"flex",flexDirection:"column",height:"100vh"},".main-view":{display:"flex",flexDirection:"column",flexGrow:1,position:"relative",minWidth:0},".page-scrollbar-content":{display:"flex",minHeight:"100%",flexDirection:"column",width:"100%",height:"100%"},".page-container":{flexGrow:1,flexBasis:"100%",paddingLeft:M.spacing(2),paddingRight:M.spacing(2),[M.breakpoints.up("sm")]:{margin:M.spacing(0,1)},[M.breakpoints.up("md")]:{margin:M.spacing(0,2)},[`@media (min-width: ${L}px)`]:{maxWidth:`${M.breakpoints.values.xxl}px`,marginLeft:"auto",marginRight:"auto",width:"100%"}},".page-full":{marginLeft:M.spacing(2),paddingLeft:M.spacing(2),paddingRight:M.spacing(2)},".page-body":{padding:M.spacing(1),background:M.components.panel.background,border:`1px solid ${M.components.panel.borderColor}`,marginBottom:"32px",[M.breakpoints.up("md")]:{padding:M.spacing(2)},[M.breakpoints.up("lg")]:{padding:M.spacing(3)}},".page-heading":{fontSize:M.typography.h4.fontSize,marginTop:0,marginBottom:M.spacing(2)},".page-action-bar":{marginBottom:M.spacing(2),display:"flex",alignItems:"flex-start",gap:M.spacing(2)},".page-action-bar--narrow":{marginBottom:0},".page-action-bar__spacer":{width:M.spacing(2),flexGrow:1},".page-sub-heading":{marginBottom:M.spacing(2)},".page-sub-heading-icon":{marginLeft:M.spacing(1),marginTop:M.spacing(.5)},".page-hidden":{display:"none"}})}function P(M){return(0,a.css)({".query-editor-row":{marginBottom:"2px","&--disabled":{".query-keyword":{color:M.colors.text.secondary}}},".query-keyword":{fontWeight:M.typography.fontWeightMedium,color:`${M.colors.primary.text} !important`},".query-part":{backgroundColor:M.colors.background.secondary,"&:hover":{background:M.colors.emphasize(M.colors.background.secondary,.03)}},".query-segment-operator":{color:`${M.v1.palette.orange} !important`},".tight-form-func":{background:M.colors.background.secondary},'input[type="text"].tight-form-func-param':{fontSize:M.typography.bodySmall.fontSize,background:"transparent",border:"none",margin:0,padding:0},".tight-form-func-controls":{textAlign:"center",".fa-arrow-left":{float:"left",position:"relative",top:2},".fa-arrow-right":{float:"right",position:"relative",top:2},".fa-remove":{marginLeft:"10px"}}})}var T=e(21348);const O=M=>(0,a.css)({".react-loading-skeleton":T.Q});function S(M){return(0,a.css)({".slate-query-field":{fontSize:M.typography.fontSize,fontFamily:M.typography.fontFamilyMonospace,height:"auto",wordBreak:"break-word",overflow:"auto"},".slate-query-field__wrapper":{position:"relative",display:"inline-block",padding:"6px 8px",minHeight:"32px",width:"100%",color:M.colors.text.primary,backgroundColor:M.components.input.background,backgroundImage:"none",border:`1px solid ${M.components.input.borderColor}`,borderRadius:M.shape.radius.default,transition:"all 0.3s",lineHeight:"18px"},".slate-query-field__wrapper--disabled":{backgroundColor:"inherit",cursor:"not-allowed"},".slate-typeahead":{".typeahead":{position:"relative",zIndex:M.zIndex.typeahead,borderRadius:M.shape.radius.default,border:`1px solid ${M.components.panel.borderColor}`,maxHeight:"66vh",overflowY:"scroll",overflowX:"hidden",outline:"none",listStyle:"none",background:M.components.panel.background,color:M.colors.text.primary,boxShadow:M.shadows.z2},".typeahead-group__title":{color:M.colors.text.secondary,fontSize:M.typography.size.sm,lineHeight:M.typography.body.lineHeight,padding:M.spacing(1)},".typeahead-item":{height:"auto",fontFamily:M.typography.fontFamilyMonospace,padding:M.spacing(1,1,1,2),fontSize:M.typography.size.sm,textOverflow:"ellipsis",overflow:"hidden",zIndex:1,display:"block",whiteSpace:"nowrap",cursor:"pointer",transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"},".typeahead-item__selected":{backgroundColor:M.isDark?M.v1.palette.dark9:M.v1.palette.gray6,".typeahead-item-hint":{fontSize:M.typography.size.xs,color:M.colors.text.primary,whiteSpace:"normal"}},".typeahead-match":{color:M.v1.palette.yellow,borderBottom:`1px solid ${M.v1.palette.yellow}`,padding:"inherit",background:"inherit"}},".slate-query-field, .prism-syntax-highlight":{".token.comment, .token.block-comment, .token.prolog, .token.doctype, .token.cdata":{color:M.colors.text.secondary},".token.variable, .token.entity":{color:M.colors.text.primary},".token.property, .token.tag, .token.constant, .token.symbol, .token.deleted":{color:M.colors.error.text},".token.attr-value, .token.selector, .token.string, .token.char, .token.builtin, .token.inserted":{color:M.colors.success.text},".token.boolean, .token.number, .token.operator, .token.url":{color:"#fe85fc"},".token.function, .token.attr-name, .token.function-name, .token.atrule, .token.keyword, .token.class-name":{color:M.colors.primary.text},".token.punctuation, .token.regex, .token.important":{color:M.v1.palette.orange},".token.important":{fontWeight:"normal"},".token.bold":{fontWeight:"bold"},".token.italic":{fontStyle:"italic"},".token.entity":{cursor:"help"},".namespace":{opacity:.7}}})}function B(M){return(0,a.css)({".uplot":{fontFamily:"inherit"},".u-select":{background:"rgba(120, 120, 130, 0.2)"},".u-hz .u-cursor-x, .u-vt .u-cursor-y":{borderRight:"1px dashed rgba(120, 120, 130, 0.5)"},".u-hz .u-cursor-y, .u-vt .u-cursor-x":{borderBottom:"1px dashed rgba(120, 120, 130, 0.5)"},".shared-crosshair:not(.plot-active) .u-cursor-pt":{display:"none !important"}})}function K(M,L,N="#fff",W="0px 1px 0 rgba(0, 0, 0, 0.1)"){return{backgroundColor:M,backgroundImage:`linear-gradient(to bottom, ${M}, ${L})`,backgroundRepeat:"repeat-x",color:N,textShadow:W,borderColor:M,"&:hover, &:focus, &:active, &.active, &.disabled, &[disabled]":{color:N,backgroundImage:"none",backgroundColor:M}}}function U(M,L,N,W){return{padding:`${M} ${L}`,fontSize:N,borderRadius:W}}function F(M,L){let N={};for(let W=1;W<=L;W++){const R=`${M.spacing(2*W)} !important`;N[`.width-${W}`]={width:R},N[`.max-width-${W}`]={maxWidth:R,flexGrow:1},N[`.min-width-${W}`]={minWidth:R},N[`.offset-width-${W}`]={marginLeft:R}}return N}function I(M){return(0,a.css)({".highlight-word":{color:M.v1.palette.orange},".hide":{display:"none"},".show":{display:"block"},".invisible":{visibility:"hidden !important"},".absolute":{position:"absolute"},".flex-grow-1":{flexGrow:1},".flex-shrink-1":{flexShrink:1},".flex-shrink-0":{flexShrink:0},".center-vh":{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",justifyItems:"center"},".btn":{display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:M.typography.fontWeightMedium,lineHeight:M.typography.body.lineHeight,textAlign:"center",verticalAlign:"middle",cursor:"pointer",border:"none",height:`${M.spacing.gridSize*M.components.height.md}px`,...U(M.spacing(0),M.spacing(2),`${M.typography.fontSize}px`,M.shape.radius.default),"&, &:active, &.active":{"&:focus, &.focus":{outline:"none"}},"&:focus, &:hover":{textDecoration:"none"},"&.focus":{textDecoration:"none"},"&:active, &.active":{backgroundImage:"none",outline:0},"&.disabled, &[disabled], &:disabled":{cursor:"not-allowed",opacity:.65,boxShadow:"none",pointerEvents:"none"}},".btn-small":{...U(M.spacing(.5),M.spacing(1),M.typography.size.sm,M.shape.radius.default),height:`${M.spacing.gridSize*M.components.height.sm}px`},".btn-mini":{...U(M.spacing(.5),M.spacing(1),M.typography.size.sm,M.shape.radius.default),height:`${M.spacing.gridSize*M.components.height.sm}px`},".btn-success, .btn-primary":{...K(M.colors.primary.main,M.colors.primary.shade)},".btn-danger":{...K(M.colors.error.main,M.colors.error.shade)},".btn-secondary":{...K(M.colors.secondary.main,M.colors.secondary.shade,M.colors.text.primary)},".btn-inverse":{...K(M.isDark?M.v1.palette.dark6:M.v1.palette.gray5,M.isDark?M.v1.palette.dark5:M.v1.palette.gray4,M.colors.text.primary),"&":{boxShadow:"none"}},".typeahead":{zIndex:M.zIndex.typeahead},...F(M,30),".row":{display:"flex",flexWrap:"wrap",marginLeft:`calc(${M.spacing(4)} / -2)`,marginRight:`calc(${M.spacing(4)} / -2)`},".container":{marginLeft:"auto",marginRight:"auto",paddingLeft:`calc(${M.spacing(4)} / 2)`,paddingRight:`calc(${M.spacing(4)} / 2)`,[M.breakpoints.up("sm")]:{maxWidth:M.breakpoints.values.sm},[M.breakpoints.up("md")]:{maxWidth:M.breakpoints.values.md},[M.breakpoints.up("lg")]:{maxWidth:M.breakpoints.values.lg},[M.breakpoints.up("xl")]:{maxWidth:M.breakpoints.values.xl}}})}function V(M){const L=(0,s.$j)(),{isExtensionSidebarOpen:N}=M;return(0,n.jsx)(a.Global,{styles:[l(L),r(L),i(L),h(L),o(L),u(L,N),v(L),p(L),m(L),y(L),x(L),c(L),D(L),C(L),P(L),O(L),S(L),B(L),I(L),b(L),d({})]})}},77526:(ne,A,e)=>{"use strict";e.d(A,{N:()=>a});var n=e(69850);function a(s,l){return(0,n.j)(()=>{l&&s.resolveCancelerIfExists(l)})}},77731:(ne,A,e)=>{"use strict";e.d(A,{B1:()=>b,CW:()=>d,LH:()=>h,OK:()=>f,SD:()=>u,VF:()=>E,_u:()=>m,dH:()=>D,ko:()=>x,no:()=>p,s3:()=>v});var n=e(2543),a=e.n(n),s=e(92745),l=e(36490),r=e(65642),c=e(95943),i=e(29043),o=e(17097);const h="New panel";function f(P,T){const O={type:"timeseries",title:h,gridPos:(0,o.Ft)(P),datasource:T?{uid:T}:null,isNew:!0};return P.addPanel(O),O.id}function g(P,T){const O={type:T,title:t("dashboard.on-create-new-widget-panel.new-panel.title.widget-title","Widget title"),gridPos:calculateNewPanelGridPos(P),datasource:null,isNew:!0};return P.addPanel(O),O.id}function u(P){const T={type:"row",title:(0,s.t)("dashboard.on-create-new-row.new-row.title.row-title","Row title"),gridPos:{x:0,y:0}};P.addPanel(T)}function E(){l.Ny.push("/dashboard/import")}function v(P){const T={type:"add-library-panel",gridPos:(0,o.Ft)(P)};P.addPanel(T)}function p(P,T){if(!T)return;const O=(0,o.Ft)(P),S={type:T.id,title:h,gridPos:{x:O.x,y:O.y,w:T.defaults.gridPos.w,h:T.defaults.gridPos.h}};T.defaults&&((0,n.defaults)(S,T.defaults),S.title=T.defaults.title,i.A.delete(c.tH)),P.addPanel(S)}function m(){const P=(0,n.chain)(r.Ay.panels).filter({hideFromList:!1}).map(O=>O).value(),T=i.A.get(c.tH);if(T){const O=JSON.parse(T),S=(0,n.find)(P,{id:O.type});if(S){const B=(0,n.cloneDeep)(S);return B.name=O.title,B.sort=-1,{...B,defaults:{...O}}}}}const y="grafana.dashboards.panelEdit.lastUsedDatasource";function d(P){if(i.A.exists(y)){const T=i.A.getObject(y);if(T?.dashboardUid===P)return T}}function x(P){if(!i.A.exists(y))return;const O=i.A.getObject(y)?.datasourceUid??"";C(P,O)}function b(P){i.A.setObject(y,{dashboardUid:P,datasourceUid:""})}function D(P,T){const O=d(P);if(!O)C(P,T);else{const S=O?.dashboardUid??"";C(S,T)}}function C(P,T){i.A.setObject(y,{dashboardUid:P,datasourceUid:T})}},77788:(ne,A,e)=>{"use strict";e.d(A,{Pc:()=>r,WG:()=>i,uz:()=>f});var n=e(68143),a=e(6135),s=e(182),l=e(5709);const r="grafana_alerting_v2";function c(g){return`/api/plugins/${(0,s.BO)()}/resources${g}`}const i=l.H.injectEndpoints({endpoints:g=>({grafanaOnCallIntegrations:g.query({query:()=>({url:c("/alert_receive_channels/"),params:{filters:!0,integration:[a.FI,"legacy_grafana_alerting"],skip_pagination:!0},showErrorAlert:!1}),transformResponse:u=>o(u)?u.results:u,providesTags:["OnCallIntegrations"]}),validateIntegrationName:g.query({query:u=>({url:c("/alert_receive_channels/validate_name/"),params:{verbal_name:u},showErrorAlert:!1})}),createIntegration:g.mutation({query:u=>({url:c("/alert_receive_channels/"),data:u,method:"POST",showErrorAlert:!0}),invalidatesTags:["OnCallIntegrations"]}),features:g.query({query:()=>({url:c("/features/"),showErrorAlert:!1})}),onCallConfigChecks:g.query({query:()=>({url:c("/organization/config-checks/"),showErrorAlert:!1})})})});function o(g){return"results"in g&&Array.isArray(g.results)}const{useGrafanaOnCallIntegrationsQuery:h}=i;function f(g){return(0,n.NF)(g)&&"detail"in g.data}},77824:(ne,A,e)=>{"use strict";e.d(A,{z:()=>p});var n=e(74848),a=e(22803),s=e(2543),l=e(96540),r=e(30360),c=e(63142),i=e(30703),o=e(51898),h=e(35484),f=e(45967),g=e(3343);const u=2,E=l.forwardRef(({children:y,active:d=!1,disabled:x=!1,size:b="md",onChange:D,onClick:C,id:P,name:T=void 0,description:O,fullWidth:S,"aria-label":B},K)=>{const U=(0,c.of)(v,b,S),F=(0,n.jsx)("input",{type:"radio",className:U.radio,onChange:D,onClick:C,disabled:x,id:P,checked:d,name:T,"aria-label":B,ref:K});return O?(0,n.jsxs)("div",{className:U.radioOption,"data-testid":o.Tp.components.RadioButton.container,children:[(0,n.jsx)(f.m,{content:O,placement:"bottom",children:F}),(0,n.jsx)("label",{className:U.radioLabel,htmlFor:P,title:O||B,children:y})]}):(0,n.jsxs)("div",{className:U.radioOption,"data-testid":o.Tp.components.RadioButton.container,children:[F,(0,n.jsx)("label",{className:U.radioLabel,htmlFor:P,title:O||B,children:y})]})});E.displayName="RadioButton";const v=(y,d,x)=>{const{fontSize:b,height:D,padding:C}=(0,g.SM)(d,y),P=y.colors.text.secondary,T=y.colors.text.primary,O=D*y.spacing.gridSize-4-2;return{radioOption:(0,a.css)({display:"flex",justifyContent:"space-between",position:"relative",flex:x?"1 0 0":"none",textAlign:"center"}),radio:(0,a.css)({position:"absolute",opacity:0,zIndex:2,width:"100% !important",height:"100%",cursor:"pointer","&:checked + label":{color:y.colors.text.primary,fontWeight:y.typography.fontWeightMedium,background:y.colors.action.selected,zIndex:1},"&:focus + label, &:focus-visible + label":(0,h.getFocusStyles)(y),"&:focus:not(:focus-visible) + label":(0,h.getMouseFocusStyles)(y),"&:disabled + label":{color:y.colors.text.disabled,cursor:"not-allowed"}}),radioLabel:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"center",fontSize:b,height:`${O}px`,lineHeight:`${O}px`,color:P,padding:y.spacing(0,C),borderRadius:(0,h.getInternalRadius)(y,u),background:y.colors.background.primary,cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",flexGrow:1,"&:hover":{color:T}})}};function p({options:y,value:d,onChange:x,onClick:b,disabled:D,disabledOptions:C,size:P="md",id:T,className:O,fullWidth:S=!1,autoFocus:B=!1,"aria-label":K,invalid:U=!1}){const F=(0,l.useCallback)(W=>()=>{x&&x(W.value)},[x]),I=(0,l.useCallback)(W=>()=>{b&&b(W.value)},[b]),V=T??(0,s.uniqueId)("radiogroup-"),M=(0,l.useRef)(V),L=(0,c.of)(m),N=(0,l.useRef)(null);return(0,l.useEffect)(()=>{B&&N.current&&N.current.focus()},[B]),(0,n.jsx)("div",{role:"radiogroup","aria-label":K,className:(0,a.cx)(L.radioGroup,S&&L.fullWidth,U&&L.invalid,O),children:y.map((W,R)=>{const G=C&&W.value&&C.includes(W.value),w=W.icon?(0,r.Uo)(W.icon):void 0,_=!!(W.imgUrl||W.label||W.component);return(0,n.jsxs)(E,{size:P,disabled:G||D,active:d===W.value,"aria-label":W.ariaLabel,onChange:F(W),onClick:I(W),id:`option-${W.value}-${V}`,name:M.current,description:W.description,fullWidth:S,ref:d===W.value?N:void 0,children:[w&&(0,n.jsx)(i.I,{name:w,className:(0,a.cx)(_&&L.icon)}),W.imgUrl&&(0,n.jsx)("img",{src:W.imgUrl,alt:W.label,className:L.img}),W.label," ",W.component?(0,n.jsx)(W.component,{}):null]},`o.label-${R}`)})})}p.displayName="RadioButtonGroup";const m=y=>({radioGroup:(0,a.css)({backgroundColor:y.colors.background.primary,display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${y.components.input.borderColor}`,borderRadius:y.shape.radius.default,padding:u,"&:hover":{borderColor:y.components.input.borderHover}}),fullWidth:(0,a.css)({display:"flex",flexGrow:1}),icon:(0,a.css)({marginRight:"6px"}),img:(0,a.css)({width:y.spacing(2),height:y.spacing(2),marginRight:y.spacing(1)}),invalid:(0,a.css)({border:`1px solid ${y.colors.error.border}`})})},77839:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>c,v:()=>r});var n=e(65307),a=e(54742),s=e(88681),l=e(96120);const r=(0,n.VP)("templating/cleanVariables"),c=(i=l.j,o)=>{if(r.match(o)){const h=Object.values(i).filter(g=>g.global);return h?h.reduce((g,u)=>(g[u.id]=u,g),{}):l.j}return o?.payload?.type&&a.B.getIfExists(o?.payload?.type)?a.B.get(o.payload.type).reducer((0,s.qi)(i,o),o):i}},77870:(ne,A,e)=>{"use strict";e.d(A,{S:()=>c});var n=e(96540),a=e(43173),s=e(55315);const l="favoriteDatasources",r=new s.X("grafana-runtime");function c(){const[i,o]=(0,n.useState)([]),[h,f]=(0,n.useState)([]),[g,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!a.$.featureToggles.favoriteDatasources)return;(async()=>{u(!0);const d=await r.getItem(l);if(d){const x=JSON.parse(d);o(x),f(x)}u(!1)})()},[]);const E=(0,n.useCallback)(async y=>{u(!0),await r.setItem(l,JSON.stringify(y)),o(y),u(!1)},[]),v=(0,n.useCallback)(y=>{if(!y.meta.builtIn&&!i.includes(y.uid)){const d=[...i,y.uid];E(d)}},[i,E]),p=(0,n.useCallback)(y=>{const d=i.filter(x=>x!==y.uid);d.length!==i.length&&E(d)},[i,E]),m=(0,n.useCallback)(y=>i.includes(y),[i]);return a.$.featureToggles.favoriteDatasources?{enabled:!0,isLoading:g,favoriteDatasources:i,addFavoriteDatasource:v,removeFavoriteDatasource:p,isFavoriteDatasource:m,initialFavoriteDataSources:h}:{enabled:!1,isLoading:!1,favoriteDatasources:[],initialFavoriteDataSources:[],addFavoriteDatasource:()=>{},removeFavoriteDatasource:()=>{},isFavoriteDatasource:()=>!1}}},77880:(ne,A,e)=>{"use strict";e.d(A,{J:()=>p});var n=e(74848),a=e(22803),s=e(4213),l=e.n(s),r=e(96540),c=e(70713),i=e(92745),o=e(47931),h=e(50992),f=e(34999),g=e(45861),u=e(89640),E=e(63142),v=e(78102);function p({format:d,textDefinition:x,downloadFileName:b,onClose:D}){const C=(0,E.of)(m),P=v.sl[d],T=(0,r.useCallback)(()=>{const S=new Blob([x],{type:`application/${d};charset=utf-8`});l()(S,`${b}.${d}`)},[x,b,d]),O=(0,r.useMemo)(()=>P.formatter?P.formatter(x):x,[P,x]);return(0,n.jsxs)("div",{className:C.container,children:[(0,n.jsx)(y,{exportProvider:P}),(0,n.jsx)("div",{className:C.content,children:(0,n.jsx)(c.Ay,{disableWidth:!0,children:({height:S})=>(0,n.jsx)(h.B,{width:"100%",height:S,language:d,value:O,monacoOptions:{minimap:{enabled:!1},scrollBeyondLastLine:!1,lineNumbers:"on",readOnly:!0}})})}),(0,n.jsxs)("div",{className:C.actions,children:[(0,n.jsx)(g.$n,{variant:"secondary",onClick:D,children:(0,n.jsx)(i.x6,{i18nKey:"alerting.common.cancel",children:"Cancel"})}),(0,n.jsx)(o.b,{icon:"copy",getText:()=>x,children:(0,n.jsx)(i.x6,{i18nKey:"alerting.file-export-preview.copy-code",children:"Copy code"})}),(0,n.jsx)(g.$n,{icon:"download-alt",onClick:T,children:(0,n.jsx)(i.x6,{i18nKey:"alerting.file-export-preview.download",children:"Download"})})]})]})}const m=d=>({container:(0,a.css)({display:"flex",flexDirection:"column",height:"100%",gap:d.spacing(2)}),content:(0,a.css)({flex:"1 1 100%"}),actions:(0,a.css)({flex:0,justifyContent:"flex-end",display:"flex",gap:d.spacing(1)})});function y({exportProvider:d}){const{name:x,type:b}=d,D={file:{title:(0,i.t)("alerting.file-export-inline-documentation.export-inline-doc.title.fileprovisioning-format","File-provisioning format"),component:(0,n.jsxs)(i.x6,{i18nKey:"alerting.file-export-inline-documentation.file-provisioning",children:[{name:x}," format is only valid for File Provisioning."," ",(0,n.jsx)(u.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/file-provisioning/",external:!0,children:"Read more in the docs."})]})},api:{title:(0,i.t)("alerting.file-export-inline-documentation.export-inline-doc.title.apiprovisioning-format","API-provisioning format"),component:(0,n.jsxs)(i.x6,{i18nKey:"alerting.file-export-inline-documentation.api-provisioning",children:[{name:x}," format is only valid for API Provisioning."," ",(0,n.jsx)(u.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/http-api-provisioning/",external:!0,children:"Read more in the docs."})]})},terraform:{title:(0,i.t)("alerting.file-export-inline-documentation.export-inline-doc.title.terraformprovisioning-format","Terraform-provisioning format"),component:(0,n.jsxs)(i.x6,{i18nKey:"alerting.file-export-inline-documentation.terraform-provisioning",children:[{name:x}," format is only valid for Terraform Provisioning."," ",(0,n.jsx)(u.Y,{href:"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/",external:!0,children:"Read more in the docs."})]})}},{title:C,component:P}=D[b];return(0,n.jsx)(f.F,{title:C,severity:"info",bottomSpacing:0,topSpacing:0,children:P})}},78012:(ne,A,e)=>{"use strict";e.d(A,{M:()=>a,i:()=>n});class n{constructor(){this.subscribers=new Map,window.addEventListener("storage",l=>{l.key&&this.notifySubscribers(l.key)})}notifySubscribers(l){const r=this.subscribers.get(l);r&&r.forEach(c=>c())}subscribe(l,r){return this.subscribers.has(l)||this.subscribers.set(l,new Set),this.subscribers.get(l).add(r),()=>{const c=this.subscribers.get(l);c&&(c.delete(r),c.size===0&&this.subscribers.delete(l))}}get(l){return window.localStorage[l]}set(l,r){window.localStorage[l]=r,this.notifySubscribers(l)}getBool(l,r){return r!==void 0&&!this.exists(l)?r:window.localStorage[l]==="true"}getObject(l,r){let c=r;if(this.exists(l)){const i=window.localStorage[l];try{c=JSON.parse(i)}catch(o){console.error(`Error parsing store object: ${l}. Returning default: ${r}. [${o}]`)}}return c}setObject(l,r){let c;try{c=JSON.stringify(r)}catch(i){throw new Error(`Could not stringify object: ${l}. [${i}]`)}try{this.set(l,c)}catch(i){const o=new Error(`Could not save item in localStorage: ${l}. [${i}]`);throw i instanceof Error&&(o.name=i.name),o}return!0}exists(l){return window.localStorage[l]!==void 0}delete(l){window.localStorage.removeItem(l),this.notifySubscribers(l)}}const a=new n},78013:(ne,A,e)=>{"use strict";e.d(A,{M:()=>f});var n=e(16515),a=e(36638),s=e(57866),l=e(4575),r=e(83340),c=e(95004),i=e(49256);const o="hideSeriesFrom",h=(0,r.ZW)(o);function f(y,d,x,b){const{overrides:D}=x,C=y,P=D.findIndex(h);if(P<0){if(d===i.B.ToggleSelection){const U=g([C,...m(D,b)]);return{...x,overrides:[...x.overrides,U]}}const B=p(b,C),K=g(B);return{...x,overrides:[...x.overrides,K]}}const T=Array.from(D),[O]=T.splice(P,1);if(d===i.B.ToggleSelection){let B=E(O);const K=m(T,b);if(K.length>0&&(B=B.filter(F=>K.indexOf(F)<0)),B[0]===C&&B.length===1)return{...x,overrides:T};const U=g([C,...K]);return{...x,overrides:[...T,U]}}const S=u(O,C);return v(S,b)?{...x,overrides:T}:{...x,overrides:[...T,S]}}function g(y,d=l.PP.exclude,x){return x=x??{id:"custom.hideFrom",value:{viz:!0,legend:!1,tooltip:!0}},{__systemRef:o,matcher:{id:s.Ct.byNames,options:{mode:d,names:y,prefix:d===l.PP.exclude?"All except:":void 0,readOnly:!0}},properties:[{...x,value:{viz:!0,legend:!1,tooltip:!0}}]}}const u=(y,d,x=l.PP.exclude)=>{const b=y.properties.find(P=>P.id==="custom.hideFrom"),D=E(y),C=D.findIndex(P=>P===d);return C<0?D.push(d):D.splice(C,1),g(D,x,b)},E=y=>{const d=y.matcher.options?.names;return Array.isArray(d)?[...d]:[]},v=(y,d)=>E(y).length===p(d).length,p=(y,d)=>{const x=new Set;for(const b of y)for(const D of b.fields){if(D.type!==c.PU.number)continue;const C=(0,n.Ct)(D,b,y);C!==d&&x.add(C)}return Array.from(x)},m=(y,d)=>{let x=[];for(const b of y){const D=b.properties.find(C=>C.id==="custom.hideFrom");if(D!==void 0&&D.value?.legend===!0){const P=a.sJ.get(b.matcher.id).get(b.matcher.options);for(const T of d)for(const O of T.fields){if(O.type!==c.PU.number)continue;const S=(0,n.Ct)(O,T,d);P(O,T,d)&&x.push(S)}}}return x}},78034:(ne,A,e)=>{"use strict";e.d(A,{R:()=>n,T:()=>a});function n(s,l,r){for(const c of s)if(c.uid===r)return c;for(const c in l){const i=l[c];if(i){for(const o of i.items)if(o.uid===r)return o}}}function a(s,l,r){return new Array(s).fill(null).map((c,i)=>({parentUID:l,level:r,isOpen:!1,item:{kind:"ui",uiKind:"pagination-placeholder",uid:`${l}-pagination-${i}`}}))}},78045:(ne,A,e)=>{"use strict";e.d(A,{B8:()=>o,LY:()=>l,Z8:()=>r,tD:()=>c});var n=e(65307),a=e(20443),s=e(67923);const l=(0,n.VP)("routes/update"),r=(0,n.VP)("routes/delete"),c=(0,n.VP)("routes/add"),i={alertmanager_config:{},template_files:{}},o=(0,n.vy)(i,h=>{h.addCase(l,(f,{payload:g})=>{const{update:u,alertmanager:E}=g,{alertmanager_config:v}=f;if(!v.route)return;const p=(0,a.QM)(v.route),m=(0,s.AB)(E,u,p);v.route=(0,s.dn)(m)}).addCase(r,(f,{payload:g})=>{const{id:u}=g,{alertmanager_config:E}=f;if(!E.route)return;const v=(0,a.QM)(E.route),p=(0,s.AS)(u,v);f.alertmanager_config.route=(0,s.dn)(p)}).addCase(c,(f,{payload:g})=>{const{partialRoute:u,referenceRouteIdentifier:E,insertPosition:v,alertmanager:p}=g,{alertmanager_config:m}=f;if(!m.route)return;const y=(0,a.QM)(m.route),d=(0,s.I8)(p,u,E,y,v);f.alertmanager_config.route=(0,s.dn)(d)})})},78059:(ne,A,e)=>{"use strict";e.d(A,{x:()=>o});var n=e(74848),a=e(70255),s=e(92745),l=e(34999),r=e(66404),c=e(15203);function i(h,f,g,u){const E=h+f+g+u,v=[];h&&v.push((0,s.t)("browse-dashboards.counts.folder","{{count}} folder",{count:h})),f&&v.push((0,s.t)("browse-dashboards.counts.dashboard","{{count}} dashboard",{count:f})),g&&v.push((0,s.t)("browse-dashboards.counts.libraryPanel","{{count}} library panel",{count:g})),u&&v.push((0,s.t)("browse-dashboards.counts.alertRule","{{count}} alert rule",{count:u}));let p=(0,s.t)("browse-dashboards.counts.total","{{count}} item",{count:E});return v.length>0&&(p+=`: ${v.join(", ")}`),p}const o=({selectedItems:h})=>{const{data:f,isFetching:g,isLoading:u,error:E}=(0,c.G2)(h);return E?(0,n.jsx)(l.F,{severity:"error",title:(0,s.t)("browse-dashboards.descendant-count.title-unable-to-retrieve-descendant-information","Unable to retrieve descendant information")}):(0,n.jsxs)(r.E,{element:"p",color:"secondary",children:[f&&i(f.folder,f.dashboard,f.libraryPanel,f.alertRule),(g||u)&&(0,n.jsx)(a.A,{width:200})]})}},78089:(ne,A,e)=>{"use strict";e.d(A,{EX:()=>f,pp:()=>u,tt:()=>o});var n=e(70915),a=e(11217),s=e(44294),l=e(43067),r=e(52490),c=e(95004),i=e(90176);function o(E){const v=[];for(const p of E.values)p&&v.push(f(p));return new a.A(v)}function h(E){const v=new Array(E.length);if(E.length>1){let p=g(E[0]);for(let m=1;m<E.length;m++){let y=g(E[m]);if(p&&y){let d=Math.atan2(y[0]-p[0],y[1]-p[1])*180/Math.PI;d<0&&(d+=360),v[m-1]=v[m]=d}}}else v.fill(0);return v}function f(E){return E instanceof s.A?E.getCoordinates():(0,n.q1)(E.getExtent())}function g(E){if(E)return(0,l.WP)(f(E))}function u(E,v){const p=E.values,m=new Array(E.values.length),y=v.calc??i.kD.Heading,d=v.field??y;switch(y){case i.kD.Area:{for(let x=0;x<p.length;x++){const b=p[x];b&&(m[x]=(0,r.UG)(b))}return{name:d,type:c.PU.number,config:{unit:"areaM2"},values:m}}case i.kD.Distance:{for(let x=0;x<p.length;x++){const b=p[x];b&&(m[x]=(0,r.R3)(b))}return{name:d,type:c.PU.number,config:{unit:"lengthm"},values:m}}case i.kD.Heading:default:return{name:d,type:c.PU.number,config:{unit:"degree"},values:h(p)}}}},78102:(ne,A,e)=>{"use strict";e.d(A,{dX:()=>s,sl:()=>l});const n={name:"JSON",exportFormat:"json",type:"file",formatter:c=>{try{return JSON.stringify(JSON.parse(c),null,4)}catch{return c}}},a={name:"YAML",exportFormat:"yaml",type:"file"},s={name:"Terraform (HCL)",exportFormat:"hcl",type:"terraform"},l={[n.exportFormat]:n,[a.exportFormat]:a,[s.exportFormat]:s},r=[n,a]},78121:(ne,A,e)=>{"use strict";e.d(A,{W:()=>a,k:()=>n});const n=r=>(c,i)=>{r&&r(c.map(o=>String(o)),s(i))},a=r=>c=>{r&&r(s(c))},s=r=>r.map(l),l=r=>{const c=r.value?String(r.value):"";return{value:c,label:typeof r.label=="string"?r.label:c}}},78159:(ne,A,e)=>{"use strict";e.d(A,{C:()=>o,m:()=>h});var n=e(74848),a=e(51898),s=e(92745),l=e(27489),r=e(8515),c=e(45861),i=e(37010);const o=({dashboard:f,onSaveSuccess:g,size:u})=>(0,n.jsx)(r.$s,{children:({showModal:E,hideModal:v})=>(0,n.jsx)(c.$n,{size:u,onClick:()=>{E(i.$,{dashboard:f,onSaveSuccess:g,onDismiss:v})},"aria-label":a.Tp.pages.Dashboard.Settings.General.saveDashBoard,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-button.save-dashboard",children:"Save dashboard"})})}),h=({dashboard:f,onClick:g,onSaveSuccess:u,variant:E,size:v})=>(0,n.jsx)(r.$s,{children:({showModal:p,hideModal:m})=>(0,n.jsx)(c.$n,{size:v,onClick:()=>{(0,l.rR)("grafana_dashboard_save_as_clicked"),g?.(),p(i.$,{dashboard:f,onSaveSuccess:u,onDismiss:m,isCopy:!0})},variant:E,"aria-label":a.Tp.pages.Dashboard.Settings.General.saveAsDashBoard,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard.save-dashboard-as-button.save-as",children:"Save as"})})})},78282:(ne,A,e)=>{"use strict";e.d(A,{h:()=>a,l:()=>s});let n;function a(l){n=l}function s(){return n}},78320:(ne,A,e)=>{"use strict";e.d(A,{o:()=>a,x:()=>n});const n={name:"grafana",uid:"grafana"},a=1},78467:(ne,A,e)=>{"use strict";e.d(A,{Dj:()=>f,JY:()=>g,Kw:()=>E,lH:()=>u,ou:()=>h,sA:()=>p});var n=e(1932),a=e(75505),s=e(68143),l=e(74268),r=e(24619),c=e(52161),i=e(29609);function o(m){const{dataSourceName:y,limitAlerts:d,identifier:x}=m;return{rules:(b,D,C)=>{const P=new URLSearchParams;y===c.hY&&d&&P.set("limit_alerts",String(d)),x&&((0,i.Mj)(x)||(0,i.X4)(x))&&(P.set("file",x.namespace),P.set("rule_group",x.groupName));const O={...h(b),...Object.fromEntries(P)};return{url:`/api/prometheus/${(0,c.w5)(y)}/api/v1/rules`,params:f(O,D,C)}}}}function h(m){const y={};return m?.dashboardUID&&(y.dashboard_uid=m.dashboardUID,m?.panelId&&(y.panel_id=String(m.panelId))),y}function f(m,y,d){let x={...m};if(y?.length&&(x={...x,state:y}),d?.length){const b=d.map(D=>JSON.stringify(D));x={...x,matcher:b}}return x}function g(m){return(0,n.jM)(m,y=>{y.rules.forEach(d=>{d.query=d.query||"",d.type===r.JS.Alerting&&(d.state||((0,l.fH)("prom rule with type=alerting is missing a state",{ruleName:d.name}),d.state=r.cF.Inactive))})})}const u=(m,y)=>{const d=m.map(g),x={};return d.forEach(b=>{x[b.file]?x[b.file].groups.push(b):x[b.file]={dataSourceName:y,name:b.file,groups:[b]}}),Object.values(x)},E=(m=[])=>m?.flatMap(y=>y.groups.flatMap(d=>v(d,y.name)));function v(m,y){return{name:m.name,file:y,rules:m.rules,interval:m.interval}}async function p(m,y,d,x,b,D){if(y?.dashboardUID&&m!==c.hY)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:C,params:P}=o({dataSourceName:m,limitAlerts:d,identifier:D}).rules(y,b,x),T=await(0,a.s)((0,s.AI)().fetch({url:C,params:P,showErrorAlert:!1,showSuccessAlert:!1})).catch(O=>{throw"status"in O&&O.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):O});return u(T.data.data.groups,m)}},78479:(ne,A,e)=>{"use strict";e.d(A,{R:()=>n});var n=(a=>(a.Grid="grid",a.List="list",a))(n||{})},78529:(ne,A,e)=>{"use strict";e.d(A,{JQ:()=>T,O1:()=>S,QL:()=>C,YV:()=>D,_O:()=>U});var n=e(2543),a=e.n(n),s=e(96540),l=e(7102),r=e(5556),c=e(38036),i=e(1906),o=e(79609),h=e(39443),f=e(92745),g=e(2863),u=e(27489),E=e(15130),v=e(70191),p=e(46072),m=e(82345),y=e(55133);const x=[F=>!F.internal||E.TP.hasAccessToExplore()],b="grafana_data_link_clicked",D=(F,I)=>M=>{const{field:L,dataLinkScopedVars:N,frame:W,link:R,linkModel:G}=M,{valueRowIndex:w}=M.config;if(w===void 0)return G;const _=C({field:L,rowIndex:w,splitOpenFn:F,range:I,vars:N,dataFrame:W,linksToProcess:[R]});return _.length?(0,n.first)(_):void 0},C=F=>{const{field:I,vars:V,splitOpenFn:M,range:L,rowIndex:N,dataFrame:W}=F,R={...V||{}};R.__value={value:{raw:I.values[N]},text:(0,f.t)("explore.get-field-links-for-explore.text.raw-value","Raw value")};let G;if(W){if(G=(0,l.F)({frame:W,rowIndex:N}),R.__data={value:{name:W.name,refId:W.refId,fields:G},text:(0,f.t)("explore.get-field-links-for-explore.text.data","Data")},W.meta?.type===h.m.LogLines){const Q=(0,p.ww)(W)?.getLogFrameLabels();Q!=null&&Object.entries(Q[N]).forEach(ae=>{R[ae[0]]={value:ae[1]}})}W.fields.forEach(_=>{G&&G[_.name]&&(R[_.name]={value:G[_.name]})}),R.__targetField={value:G[I.name]}}const w=F.linksToProcess||I.config.links;return w?w.filter(ae=>x.every(q=>q(ae,R))).map(ae=>{let q={};ae.meta?.transformations&&ae.meta?.transformations.forEach(J=>{let Z;J.field?Z=W?.fields.find(se=>se.name===J.field)?.values[N]:Z=I.values[N],q={...q,...(0,v.k)(J,Z,I.name)}});const k={...R,...q},ee=S(ae,k);let j=[];if(ee.variables.length===0){const J=I.name.toString();j.push({variableName:J,value:"",match:""})}else j=ee.variables;if(ee.allVariablesDefined)if(ae.internal){const J=te=>{(0,u.rR)(b,{origin:ae.origin||o.x0.Datasource,app:i.Jk.Explore,internal:!0}),M?.(te)};return{...(0,c.u)({link:ae,internalLink:ae.internal,scopedVars:k,range:L,field:I,onClickFn:F.splitOpenFn?te=>J(te):void 0,replaceVariables:(0,g.w)().replace.bind((0,g.w)())}),variables:j}}else{const J=(te,se)=>(0,g.w)().replace(te,{...se,...k,...R}),Z=(0,m.mQ)().getDataLinkUIModel(ae,J,I);return Z.title||(Z.title=P(Z.href)),Z.target=Z.target??"_blank",{...Z,variables:j}}else return}).filter(ae=>!!ae):[]};function P(F){F.indexOf("://")<0&&(F=`http://${F}`);let I;try{I=new URL(F).hostname}catch{I=F}return I}function T(F,I){return(0,s.useCallback)((V,M)=>V.fields.flatMap(L=>L.config?.links&&L.config?.links.length?C({field:L,rowIndex:M,range:F,dataFrame:V,splitOpenFn:I}):[]),[F,I])}const O=["__from","__to","__interval","__interval_ms","__org","__user","__range","__rate_interval","__timeFilter","timeFilter"];function S(F,I){let V=[];return(0,g.w)().replace.bind((0,g.w)())(B(F),I,void 0,V),V=(0,n.uniqBy)(V,"variableName"),{variables:V,allVariablesDefined:V.filter(L=>!O.includes(L.variableName)).every(L=>L.found)}}function B(F){let I="",V;for(V in F)typeof F[V]=="string"?I+=" "+F[V]:typeof F[V]=="object"&&(I+=" "+B(F[V]));return I}const K=F=>F[1]!==void 0,U=F=>{const I=Object.entries(F).filter(K).map(([V,M])=>{const L=(0,y.m)(M);return L.range={to:M.range.to.valueOf().toString(),from:M.range.from.valueOf().toString()},[V,L]}).reduce((V,[M,L])=>({...V,[M]:L}),{});return r.kM.renderUrl("/explore",{schemaVersion:1,panes:JSON.stringify(I)})}},78646:(ne,A,e)=>{"use strict";e.d(A,{H2:()=>s,c_:()=>c,on:()=>n,pl:()=>r,x$:()=>l});var n=(i=>(i.Performance="performance",i.MetaAnalytics="meta-analytics",i.Pageview="pageview",i.Interaction="interaction",i.ExperimentView="experimentview",i.GrafanaJavascriptAgent="grafana-javascript-agent",i))(n||{});let a;function s(i){if(a instanceof c)for(const o of a.buffer)i.addEvent(o.event,o.meta);a=i}function l(){return a||(a=new c),a}const r=i=>{l().addBackend(i)};class c{constructor(){this.buffer=[]}flush(){this.buffer=[]}addBackend(o){}addEvent(o,h){this.buffer.push({event:o,meta:h})}}},78725:(ne,A,e)=>{"use strict";e.d(A,{h:()=>u});var n=e(74848),a=e(92745),s=e(30703),l=e(45967),r=e(41654),c=e(25797),i=e(51156),o=e(6048),h=e(32603);let f;function g(){return f||(f=o.M.createEmpty()),f}function u(E,v){const p=(0,a.t)("dashboard.conditional-rendering.root.title","Show / hide rules"),m=E??g();return new c.C({title:p,disabledText:E?void 0:v??(0,a.t)("dashboard.conditional-rendering.editor.unsupported-object-type","Conditional rendering not supported for this item type"),id:"conditional-rendering-options",renderTitle:()=>{const{result:y}=m.useState();return(0,n.jsxs)(r.B,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)("div",{children:p}),E?(0,n.jsx)(l.m,{content:(0,a.t)("dashboard.conditional-rendering.editor.info","Set rules to control {{type}} visibility by matching any or all rules.",{type:(0,h.L9)((0,h.dQ)(m.parent))}),children:(0,n.jsx)(s.I,{name:y?"eye":"eye-slash"})}):(0,n.jsx)(s.I,{name:"eye-slash"})]})},isOpenDefault:!0}).addItem(new i.v({title:p,id:"conditional-rendering-options-item",render:()=>(0,n.jsx)(m.Component,{model:m})}))}},78731:(ne,A,e)=>{"use strict";e.d(A,{n:()=>a});var n=e(78646);const a=(l,r)=>{(0,n.x$)().addEvent({type:n.on.Performance,payload:{name:l,value:r}})},s=l=>faro?.api?.pushError(l)},78763:(ne,A,e)=>{"use strict";e.d(A,{C:()=>n});const n=(l,r)=>l&&(r&&!Array.isArray(l.value)?{...l,value:s(l.value),text:s(l.text)}:!r&&Array.isArray(l.value)?{...l,value:a(l.value),text:a(l.text)}:l),a=l=>Array.isArray(l)?l.length>0?l[0]:"":l,s=l=>Array.isArray(l)?l:[l]},78767:(ne,A,e)=>{"use strict";e.d(A,{Xm:()=>l,rJ:()=>s,vJ:()=>a,vy:()=>r});var n=e(68143);function a(c){return(0,n.AI)().post("/api/annotations",c)}function s(c){return(0,n.AI)().put(`/api/annotations/${c.id}`,c)}function l(c){return(0,n.AI)().delete(`/api/annotations/${c.id}`)}async function r(){return(await(0,n.AI)().get("/api/annotations/tags")).result.tags.map(({tag:i,count:o})=>({term:i,count:o}))}},78793:(ne,A,e)=>{"use strict";e.d(A,{J:()=>o});var n=e(74848),a=e(22803),s=e(96540),l=e(84140),r=e(30703),c=e(41654),i=e(63142);const o=({label:f,value:g,icon:u,color:E,size:v="md",onClick:p})=>{const m=(0,i.of)(h,E,v),y=`${f}: ${g}`,d=f?.toString()??"",x=g?.toString()??"",b=(0,s.useMemo)(()=>(0,n.jsxs)(c.B,{direction:"row",gap:0,alignItems:"stretch",children:[(0,n.jsx)("div",{className:m.label,children:(0,n.jsxs)(c.B,{direction:"row",gap:.5,alignItems:"center",children:[u&&(0,n.jsx)(r.I,{name:u}),f&&(0,n.jsx)("span",{className:m.labelText,title:f.toString(),children:f??""})]})}),(0,n.jsx)("div",{className:m.value,title:g?.toString(),children:g??"-"})]}),[u,f,g,m]);return(0,n.jsx)("div",{className:m.wrapper,role:"listitem","aria-label":y,"data-testid":"label-value",children:p?(0,n.jsx)("div",{className:m.clickable,role:"button",tabIndex:0,onClick:()=>p(d,x),onKeyDown:D=>{D.key==="Enter"&&(p(d,x),D.preventDefault())},children:b},d+x):b})},h=(f,g,u)=>{const E=g??f.colors.secondary.main,v=f.isDark?(0,l.A)(E).lighten(5).toString():(0,l.A)(E).darken(5).toString(),p=f.isDark?(0,l.A)(E).darken(5).toString():(0,l.A)(E).lighten(5).toString(),m=g?l.A.mostReadable(E,["#000","#fff"]).toString():f.colors.text.primary;let y=f.spacing(.33,1);switch(u){case"sm":y=f.spacing(.2,.6);break;case"xs":y=f.spacing(0,.5);break;default:break}return{wrapper:(0,a.css)({color:m,fontSize:f.typography.bodySmall.fontSize,borderRadius:f.shape.borderRadius(2)}),labelText:(0,a.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"300px"}),label:(0,a.css)({display:"flex",alignItems:"center",color:"inherit",padding:y,background:E,border:`solid 1px ${v}`,borderTopLeftRadius:f.shape.borderRadius(2),borderBottomLeftRadius:f.shape.borderRadius(2)}),clickable:(0,a.css)({"&:hover":{opacity:.8,cursor:"pointer"}}),value:(0,a.css)({color:"inherit",padding:y,background:p,border:`solid 1px ${v}`,borderLeft:"none",borderTopRightRadius:f.shape.borderRadius(2),borderBottomRightRadius:f.shape.borderRadius(2),whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"300px"})}}},78830:(ne,A,e)=>{"use strict";e.d(A,{M:()=>n});function n(a){const s=a?.angular?.detected??a?.angularDetected??!1,l=a?.angularPanelCtrl??!1,r=a.PanelCtrl??a?.ConfigCtrl??!1;if(s||l||r)throw new Error("Angular plugins are not supported")}},79104:(ne,A,e)=>{"use strict";e.d(A,{C:()=>a});var n=e(96540);function a(){const[s,l]=(0,n.useState)(0);return(0,n.useCallback)(()=>l(r=>r+1),[])}},79118:(ne,A,e)=>{"use strict";e.d(A,{AP:()=>h,jc:()=>i,xg:()=>f});var n=e(2543),a=e.n(n),s=e(46644),l=e(95004),r=e(76637),c=e(36394);function i(g,u){if(g.type===l.PU.boolean)return o(g,u);const v=(0,r.Qi)(g).getCalculator(g,u),p=g.state?.range??h(g);return m=>{let y=0;m!==-1/0&&(y=(m-p.min)/p.delta,Number.isNaN(y)&&(y=0));const d=(0,c.k5)(g,m,y);return{percent:y,threshold:d,color:v(m,y,d)}}}function o(g,u){const E={color:u.visualization.getColorByName("green"),percent:1,threshold:void 0},v={color:u.visualization.getColorByName("red"),percent:0,threshold:void 0},p=(0,r.Qi)(g);if(p.isContinuous&&p.getColors){const m=p.getColors(u);E.color=m[m.length-1],v.color=m[0]}return m=>m?E:v}function h(g){if(g.type!==l.PU.number)return{min:0,max:100,delta:100};let u=g.config.min,E=g.config.max;if(!(0,n.isNumber)(u)||!(0,n.isNumber)(E))if(g.values&&g.values.length){const v=(0,s.Nw)({field:g,reducers:[s.gy.min,s.gy.max]});(0,n.isNumber)(u)||(u=v[s.gy.min]),(0,n.isNumber)(E)||(E=v[s.gy.max])}else u=0,E=100;return{min:u,max:E,delta:E-u}}function f(g,u){const{config:E}=g;let{min:v,max:p}=E;return(0,n.isNumber)(v)&&(0,n.isNumber)(p)?E:u||!g.state?.range?{...E,...h(g)}:{...E,...g.state.range}}},79184:(ne,A,e)=>{"use strict";e.d(A,{V:()=>c,n:()=>r});var n=e(81160),a=e(16515),s=e(95004),l=e(64761),r=(o=>(o.Columns="columns",o.Rows="rows",o))(r||{});const c={id:l.F.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(o,h)=>f=>f.pipe((0,n.T)(g=>c.transformer(o,h)(g))),transformer:o=>h=>{if(o.mode==="rows")return i(h,o.keepLabels);const f=[],g=o.keepLabels?.length?new Set(o.keepLabels):void 0;for(const u of h){const E=[],v={};for(const p of u.fields){if(!p.labels){E.push(p);continue}const m={...p,config:{...p.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};E.push(m);for(const y of Object.keys(p.labels)){if(g&&!g.has(y))continue;if(o.valueLabel===y){m.name=p.labels[y];continue}(v[y]??(v[y]=new Set)).add(p.labels[y])}}for(const p in v)for(const m of v[p]){const y=new Array(u.length).fill(m);E.push({name:p,type:s.PU.string,values:y,config:{}})}f.push({...u,fields:E,length:u.length})}return f}};function i(o,h){const f=[];for(const g of o)for(const u of g.fields)if(u.labels){const E=[],v=[];if(h)for(const p of h)E.push(p),v.push(u.labels[p]);else for(const[p,m]of Object.entries(u.labels))E.push(p),v.push(m);v.length&&f.push({...g,name:(0,a.Ct)(u,g,o),fields:[{name:"label",type:s.PU.string,config:{},values:E},{name:"value",type:s.PU.string,config:{},values:v}],length:v.length})}return f}},79233:(ne,A,e)=>{"use strict";e.d(A,{c:()=>c});var n=e(74848),a=e(22803),s=e(63142),l=e(30703),r=e(45967);const c=({children:o,className:h,tooltip:f,width:g,transparent:u,interactive:E,as:v="label",...p})=>{const m=(0,s.of)(i,u,g);return(0,n.jsxs)(v,{className:(0,a.cx)(m.label,h),...p,children:[o,f&&(0,n.jsx)(r.m,{interactive:E,placement:"top",content:f,theme:"info",children:(0,n.jsx)(l.I,{tabIndex:0,name:"info-circle",size:"sm",className:m.icon})})]})},i=(o,h=!1,f)=>({label:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0,padding:o.spacing(0,1),fontWeight:o.typography.fontWeightMedium,fontSize:o.typography.size.sm,backgroundColor:h?"transparent":o.colors.background.secondary,height:o.spacing(o.components.height.md),lineHeight:o.spacing(o.components.height.md),marginRight:o.spacing(.5),borderRadius:o.shape.radius.default,border:"none",width:f?f!=="auto"?`${8*f}px`:f:"100%",color:o.colors.text.primary}),icon:(0,a.css)({color:o.colors.text.secondary,marginLeft:"10px",":hover":{color:o.colors.text.primary}})})},79243:(ne,A,e)=>{"use strict";e.d(A,{E:()=>a,h:()=>n});function n(s,l=0){if(Number.isInteger(s))return s;let r=10**l,c=s*r*(1+Number.EPSILON);return Math.round(c)/r}function a(s){return((""+s).split(".")[1]||"").length}},79277:(ne,A,e)=>{"use strict";e.d(A,{D:()=>l,U:()=>s});var n=e(92745),a=e(739);const s={tooltip:{mode:a.$N.Single,sort:a.xB.None,hideZeros:!1}};function l(r,c=!1,i=!1,o){const h=[(0,n.t)("grafana-ui.builder.tooltip.category","Tooltip")],f=c?[{value:a.$N.Single,label:(0,n.t)("grafana-ui.builder.tooltip.modeOptions.label-single","Single")},{value:a.$N.None,label:(0,n.t)("grafana-ui.builder.tooltip.modeOptions.label-hidden","Hidden")}]:[{value:a.$N.Single,label:(0,n.t)("grafana-ui.builder.tooltip.modeOptions.label-single","Single")},{value:a.$N.Multi,label:(0,n.t)("grafana-ui.builder.tooltip.modeOptions.label-all","All")},{value:a.$N.None,label:(0,n.t)("grafana-ui.builder.tooltip.modeOptions.label-hidden","Hidden")}],g=[{value:a.xB.None,label:(0,n.t)("grafana-ui.builder.tooltip.sortOptions.label-none","None")},{value:a.xB.Ascending,label:(0,n.t)("grafana-ui.builder.tooltip.sortOptions.label-ascending","Ascending")},{value:a.xB.Descending,label:(0,n.t)("grafana-ui.builder.tooltip.sortOptions.label-descending","Descending")}];r.addRadio({path:"tooltip.mode",name:(0,n.t)("grafana-ui.builder.tooltip.name-tooltip-mode","Tooltip mode"),category:h,defaultValue:o?.tooltip?.mode??a.$N.Single,settings:{options:f}}).addRadio({path:"tooltip.sort",name:(0,n.t)("grafana-ui.builder.tooltip.name-values-sort-order","Values sort order"),category:h,defaultValue:o?.tooltip?.sort??a.xB.None,showIf:u=>u.tooltip?.mode===a.$N.Multi,settings:{options:g}}).addBooleanSwitch({path:"tooltip.hideZeros",name:(0,n.t)("grafana-ui.builder.tooltip.name-hide-zeros","Hide zeros"),category:h,defaultValue:!1,showIf:u=>o?.tooltip?.hideZeros!==void 0&&u.tooltip?.mode===a.$N.Multi}),i&&r.addNumberInput({path:"tooltip.hoverProximity",name:(0,n.t)("grafana-ui.builder.tooltip.name-hover-proximity","Hover proximity"),description:(0,n.t)("grafana-ui.builder.tooltip.description-hover-proximity","How close the cursor must be to a point to trigger the tooltip, in pixels"),category:h,settings:{integer:!0},showIf:u=>u.tooltip?.mode!==a.$N.None}),r.addNumberInput({path:"tooltip.maxWidth",name:(0,n.t)("grafana-ui.builder.tooltip.name-max-width","Max width"),category:h,settings:{integer:!0},showIf:u=>u.tooltip?.mode!==a.$N.None}).addNumberInput({path:"tooltip.maxHeight",name:(0,n.t)("grafana-ui.builder.tooltip.name-max-height","Max height"),category:h,defaultValue:void 0,settings:{integer:!0},showIf:(u,E,v)=>u.tooltip?.mode===a.$N.Multi||v?.some(p=>p.meta?.custom?.resultType==="exemplar")})}},79319:(ne,A,e)=>{"use strict";e.d(A,{M:()=>n,N:()=>a});var n=(s=>(s[s.NotPossible=-1]="NotPossible",s[s.NotApplicable=0]="NotApplicable",s[s.Applicable=1]="Applicable",s[s.HighlyApplicable=2]="HighlyApplicable",s))(n||{}),a=(s=>(s.True="true",s.False="false",s.Null="null",s.Empty="empty",s.Zero="zero",s))(a||{})},79331:(ne,A,e)=>{"use strict";e.d(A,{w:()=>i});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=e(34999),c=e(30703);const i=s.memo(s.forwardRef(({title:h,className:f,children:g,branded:u,url:E,urlTitle:v,onDismiss:p,severity:m="info",...y},d)=>{const x=(0,l.of)(o);return(0,n.jsxs)(r.F,{severity:m,className:f,...y,ref:d,title:h,children:[(0,n.jsx)("div",{children:g}),E&&(0,n.jsxs)("a",{href:E,className:(0,a.cx)("external-link",x.docsLink),target:"_blank",rel:"noreferrer",children:[(0,n.jsx)(c.I,{name:"book"})," ",v||"Read more"]})]})}));i.displayName="InfoBox";const o=h=>({docsLink:(0,a.css)({display:"inline-block",marginTop:h.spacing(2)})})},79450:(ne,A,e)=>{"use strict";e.d(A,{b:()=>a});var n=e(96540);const a=(0,n.createContext)(void 0)},79609:(ne,A,e)=>{"use strict";e.d(A,{$0:()=>s,CC:()=>a,uP:()=>l,x0:()=>n,yd:()=>r});var n=(c=>(c.Datasource="Datasource",c.Correlations="Correlations",c.ExploreCorrelationsEditor="CorrelationsEditor",c))(n||{}),a=(c=>(c.Regex="regex",c.Logfmt="logfmt",c))(a||{}),s=(c=>(c.Series="series",c.Field="field",c.Fields="fields",c.Value="value",c.BuiltIn="built-in",c.Template="template",c))(s||{}),l=(c=>(c.Values="values",c))(l||{}),r=(c=>(c.Action="action",c.Link="link",c.Off="off",c))(r||{})},79718:(ne,A,e)=>{"use strict";e.d(A,{t:()=>b});var n=e(24726),a=e(38619),s=e(32899),l=e(33184),r=e(36490),c=e(73427),i=e(87745),o=e(22429),h=e(74848),f=e(22803),g=e(92745),u=e(63142),E=e(22787),v=e(45861),p=(D=>(D.Saved="saved",D.EditingStarted="editing-started",D.EditingCanceled="editing-cancelled",D.Deleted="deleted",D))(p||{});function m({onDismiss:D,event:C}){const P=(0,u.of)(y),T=()=>{if(C?.action===p.Deleted){r.Ny.push("/");return}b.reloadPage(),D()};return(0,h.jsxs)(E.a,{isOpen:!0,title:(0,g.t)("live.dashboard-changed-modal.title-dashboard-changed","Dashboard changed"),icon:"copy",onDismiss:D,onClickBackdrop:()=>{},className:P.modal,children:[(0,h.jsx)("div",{className:P.description,children:(0,h.jsx)(g.x6,{i18nKey:"live.dashboard-changed-modal.description",children:"The dashboard has been updated by another session. Do you want to continue editing or discard your local changes?"})}),(0,h.jsxs)(E.a.ButtonRow,{children:[(0,h.jsx)(v.$n,{onClick:D,variant:"secondary",fill:"outline",children:(0,h.jsx)(g.x6,{i18nKey:"live.dashboard-changed-modal.continue-editing",children:"Continue editing"})}),(0,h.jsx)(v.$n,{onClick:T,variant:"destructive",children:(0,h.jsx)(g.x6,{i18nKey:"live.dashboard-changed-modal.discard-local-changes",children:"Discard local changes"})})]})]})}const y=D=>({modal:(0,f.css)({width:"600px"}),description:(0,f.css)({color:D.colors.text.secondary,paddingBottom:D.spacing(1)})}),d=(0,n.A)();class x{constructor(){this.editing=!1,this.observer={next:C=>{if((0,a.ew)(C)&&this.editing&&C.state===a.ZF.Connected&&this.sendEditingState(),(0,a.Z7)(C)){if(C.message.sessionId===d)return;const{action:P,message:T}=C.message;switch(P){case p.EditingStarted:case p.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const O=(0,o.UA)().getCurrent();if(O?.uid!==C.message.uid){console.log("dashboard event for different dashboard?",C,O);return}let S=this.editing||O.hasUnsavedChanges();if(T?.includes("Restored from version")&&(S=!1),P===p.Saved)S?c.lE.publish(new i.S8({component:m,props:{event:C}})):(c.lE.emit(s.r1.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(S&&P===p.EditingStarted&&!this.hasSeenNotice){const B=C.message,K=this.getRecentEditingEvent();(!K||K.message!==B.message)&&(this.hasSeenNotice=!0,c.lE.emit(s.r1.alertWarning,["Another session is editing this dashboard",B.message])),this.lastEditing=B}return}}}}}}setEditingState(C){const P=this.editing=C;this.editing=C,this.hasSeenNotice=!1,P&&c.TP.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:C,uid:P}=this;C&&P&&(0,l.oF)().publish(C,{sessionId:d,uid:P,action:this.editing?p.EditingStarted:p.EditingCanceled,timestamp:Date.now()})}watch(C){const P=(0,l.oF)();P&&C!==this.uid&&(this.channel={scope:a.qD.Grafana,namespace:"dashboard",path:`uid/${C}`},this.leave(),C&&(this.subscription=P.getStream(this.channel).subscribe(this.observer)),this.uid=C)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){r.Ny.reload()}}const b=new x},79776:(ne,A,e)=>{"use strict";e.d(A,{o:()=>a});var n=e(43173);function a(s){const l=new URL(n.$.externalUserMngLinkUrl);return n.$.externalUserMngAnalytics&&(n.$.externalUserMngAnalyticsParams&&n.$.externalUserMngAnalyticsParams.split("&").forEach(c=>{const[i,o]=c.split("=");l.searchParams.append(i,o)}),l.searchParams.append("cnt",s)),l.toString()}},80042:(ne,A,e)=>{"use strict";e.d(A,{$9:()=>O,$j:()=>C,Bm:()=>m,Cx:()=>S,F9:()=>L,Ih:()=>f,KA:()=>u,Kw:()=>y,L:()=>I,L3:()=>l,Qo:()=>b,So:()=>p,Sw:()=>E,XM:()=>d,ZL:()=>g,bS:()=>T,c2:()=>U,hD:()=>v,nS:()=>K,qC:()=>P,qR:()=>s,tj:()=>x,v$:()=>N});var n=e(64975);const a=["Job","Repository","Provisioning"],s=n.F.enhanceEndpoints({addTagTypes:a}).injectEndpoints({endpoints:W=>({listJob:W.query({query:R=>({url:"/jobs",params:{pretty:R.pretty,allowWatchBookmarks:R.allowWatchBookmarks,continue:R.continue,fieldSelector:R.fieldSelector,labelSelector:R.labelSelector,limit:R.limit,resourceVersion:R.resourceVersion,resourceVersionMatch:R.resourceVersionMatch,sendInitialEvents:R.sendInitialEvents,timeoutSeconds:R.timeoutSeconds,watch:R.watch}}),providesTags:["Job"]}),createJob:W.mutation({query:R=>({url:"/jobs",method:"POST",body:R.job,params:{pretty:R.pretty,dryRun:R.dryRun,fieldManager:R.fieldManager,fieldValidation:R.fieldValidation}}),invalidatesTags:["Job"]}),deletecollectionJob:W.mutation({query:R=>({url:"/jobs",method:"DELETE",params:{pretty:R.pretty,continue:R.continue,dryRun:R.dryRun,fieldSelector:R.fieldSelector,gracePeriodSeconds:R.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:R.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:R.labelSelector,limit:R.limit,orphanDependents:R.orphanDependents,propagationPolicy:R.propagationPolicy,resourceVersion:R.resourceVersion,resourceVersionMatch:R.resourceVersionMatch,sendInitialEvents:R.sendInitialEvents,timeoutSeconds:R.timeoutSeconds}}),invalidatesTags:["Job"]}),getJob:W.query({query:R=>({url:`/jobs/${R.name}`,params:{pretty:R.pretty}}),providesTags:["Job"]}),replaceJob:W.mutation({query:R=>({url:`/jobs/${R.name}`,method:"PUT",body:R.job,params:{pretty:R.pretty,dryRun:R.dryRun,fieldManager:R.fieldManager,fieldValidation:R.fieldValidation}}),invalidatesTags:["Job"]}),deleteJob:W.mutation({query:R=>({url:`/jobs/${R.name}`,method:"DELETE",params:{pretty:R.pretty,dryRun:R.dryRun,gracePeriodSeconds:R.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:R.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:R.orphanDependents,propagationPolicy:R.propagationPolicy}}),invalidatesTags:["Job"]}),listRepository:W.query({query:R=>({url:"/repositories",params:{pretty:R.pretty,allowWatchBookmarks:R.allowWatchBookmarks,continue:R.continue,fieldSelector:R.fieldSelector,labelSelector:R.labelSelector,limit:R.limit,resourceVersion:R.resourceVersion,resourceVersionMatch:R.resourceVersionMatch,sendInitialEvents:R.sendInitialEvents,timeoutSeconds:R.timeoutSeconds,watch:R.watch}}),providesTags:["Repository"]}),createRepository:W.mutation({query:R=>({url:"/repositories",method:"POST",body:R.repository,params:{pretty:R.pretty,dryRun:R.dryRun,fieldManager:R.fieldManager,fieldValidation:R.fieldValidation}}),invalidatesTags:["Repository"]}),deletecollectionRepository:W.mutation({query:R=>({url:"/repositories",method:"DELETE",params:{pretty:R.pretty,continue:R.continue,dryRun:R.dryRun,fieldSelector:R.fieldSelector,gracePeriodSeconds:R.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:R.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:R.labelSelector,limit:R.limit,orphanDependents:R.orphanDependents,propagationPolicy:R.propagationPolicy,resourceVersion:R.resourceVersion,resourceVersionMatch:R.resourceVersionMatch,sendInitialEvents:R.sendInitialEvents,timeoutSeconds:R.timeoutSeconds}}),invalidatesTags:["Repository"]}),getRepository:W.query({query:R=>({url:`/repositories/${R.name}`,params:{pretty:R.pretty}}),providesTags:["Repository"]}),replaceRepository:W.mutation({query:R=>({url:`/repositories/${R.name}`,method:"PUT",body:R.repository,params:{pretty:R.pretty,dryRun:R.dryRun,fieldManager:R.fieldManager,fieldValidation:R.fieldValidation}}),invalidatesTags:["Repository"]}),deleteRepository:W.mutation({query:R=>({url:`/repositories/${R.name}`,method:"DELETE",params:{pretty:R.pretty,dryRun:R.dryRun,gracePeriodSeconds:R.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:R.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:R.orphanDependents,propagationPolicy:R.propagationPolicy}}),invalidatesTags:["Repository"]}),getRepositoryFiles:W.query({query:R=>({url:`/repositories/${R.name}/files/`,params:{ref:R.ref}}),providesTags:["Repository"]}),getRepositoryFilesWithPath:W.query({query:R=>({url:`/repositories/${R.name}/files/${R.path}`,params:{ref:R.ref}}),providesTags:["Repository"]}),replaceRepositoryFilesWithPath:W.mutation({query:R=>({url:`/repositories/${R.name}/files/${R.path}`,method:"PUT",body:R.body,params:{ref:R.ref,message:R.message,skipDryRun:R.skipDryRun,originalPath:R.originalPath}}),invalidatesTags:["Repository"]}),createRepositoryFilesWithPath:W.mutation({query:R=>({url:`/repositories/${R.name}/files/${R.path}`,method:"POST",body:R.body,params:{ref:R.ref,message:R.message,skipDryRun:R.skipDryRun,originalPath:R.originalPath}}),invalidatesTags:["Repository"]}),deleteRepositoryFilesWithPath:W.mutation({query:R=>({url:`/repositories/${R.name}/files/${R.path}`,method:"DELETE",params:{ref:R.ref,message:R.message,skipDryRun:R.skipDryRun,originalPath:R.originalPath}}),invalidatesTags:["Repository"]}),getRepositoryHistory:W.query({query:R=>({url:`/repositories/${R.name}/history`,params:{ref:R.ref}}),providesTags:["Repository"]}),getRepositoryHistoryWithPath:W.query({query:R=>({url:`/repositories/${R.name}/history/${R.path}`,params:{ref:R.ref}}),providesTags:["Repository"]}),getRepositoryJobs:W.query({query:R=>({url:`/repositories/${R.name}/jobs`}),providesTags:["Repository"]}),createRepositoryJobs:W.mutation({query:R=>({url:`/repositories/${R.name}/jobs`,method:"POST",body:R.jobSpec}),invalidatesTags:["Repository"]}),getRepositoryJobsWithPath:W.query({query:R=>({url:`/repositories/${R.name}/jobs/${R.uid}`}),providesTags:["Repository"]}),getRepositoryRefs:W.query({query:R=>({url:`/repositories/${R.name}/refs`}),providesTags:["Repository"]}),getRepositoryRenderWithPath:W.query({query:R=>({url:`/repositories/${R.name}/render/${R.guid}`}),providesTags:["Repository"]}),getRepositoryResources:W.query({query:R=>({url:`/repositories/${R.name}/resources`}),providesTags:["Repository"]}),getRepositoryStatus:W.query({query:R=>({url:`/repositories/${R.name}/status`,params:{pretty:R.pretty}}),providesTags:["Repository"]}),replaceRepositoryStatus:W.mutation({query:R=>({url:`/repositories/${R.name}/status`,method:"PUT",body:R.repository,params:{pretty:R.pretty,dryRun:R.dryRun,fieldManager:R.fieldManager,fieldValidation:R.fieldValidation}}),invalidatesTags:["Repository"]}),createRepositoryTest:W.mutation({query:R=>({url:`/repositories/${R.name}/test`,method:"POST",body:R.body}),invalidatesTags:["Repository"]}),getRepositoryWebhook:W.query({query:R=>({url:`/repositories/${R.name}/webhook`}),providesTags:["Repository"]}),createRepositoryWebhook:W.mutation({query:R=>({url:`/repositories/${R.name}/webhook`,method:"POST"}),invalidatesTags:["Repository"]}),getFrontendSettings:W.query({query:()=>({url:"/settings"}),providesTags:["Provisioning","Repository"]}),getResourceStats:W.query({query:()=>({url:"/stats"}),providesTags:["Provisioning","Repository"]})}),overrideExisting:!1}),{useListJobQuery:l,useCreateJobMutation:r,useDeletecollectionJobMutation:c,useGetJobQuery:i,useReplaceJobMutation:o,useDeleteJobMutation:h,useListRepositoryQuery:f,useCreateRepositoryMutation:g,useDeletecollectionRepositoryMutation:u,useGetRepositoryQuery:E,useReplaceRepositoryMutation:v,useDeleteRepositoryMutation:p,useGetRepositoryFilesQuery:m,useGetRepositoryFilesWithPathQuery:y,useReplaceRepositoryFilesWithPathMutation:d,useCreateRepositoryFilesWithPathMutation:x,useDeleteRepositoryFilesWithPathMutation:b,useGetRepositoryHistoryQuery:D,useGetRepositoryHistoryWithPathQuery:C,useGetRepositoryJobsQuery:P,useCreateRepositoryJobsMutation:T,useGetRepositoryJobsWithPathQuery:O,useGetRepositoryRefsQuery:S,useGetRepositoryRenderWithPathQuery:B,useGetRepositoryResourcesQuery:K,useGetRepositoryStatusQuery:U,useReplaceRepositoryStatusMutation:F,useCreateRepositoryTestMutation:I,useGetRepositoryWebhookQuery:V,useCreateRepositoryWebhookMutation:M,useGetFrontendSettingsQuery:L,useGetResourceStatsQuery:N}=s},80144:(ne,A,e)=>{"use strict";e.d(A,{v:()=>a});var n=e(39796);function a(s){const l=new Set(s.map(r=>r.refId).filter(Boolean));return l.size===s.length?s:(l.clear(),s.map(r=>{if(r.refId&&!l.has(r.refId))return l.add(r.refId),r;const c=(0,n.M)(s);return l.add(c),{...r,refId:c}}))}},80218:(ne,A,e)=>{"use strict";e.d(A,{Gz:()=>f,VP:()=>h,Yb:()=>l,bJ:()=>c});var n=e(74848),a=e(96540),s=e(77256);function l(u,E){const[v,p]=(0,a.useState)({status:"not-executed",error:void 0,result:E}),m=(0,a.useRef)(),y=(0,a.useRef)(),d=r({execute(...x){y.current=x;const b=u(...x);return m.current=b,p(D=>({...D,status:"loading"})),b.then(D=>{b===m.current&&p(C=>({...C,status:"success",error:void 0,result:D}))},D=>{b===m.current&&p(C=>({...C,status:"error",error:D}))}),b},reset(){p({status:"not-executed",error:void 0,result:E}),m.current=void 0,y.current=void 0}});return[(0,a.useMemo)(()=>({reset(){d.current.reset()},execute:(...x)=>d.current.execute(...x)}),[]),v,{promise:m.current,lastArgs:y.current}]}function r(u){const E=(0,a.useRef)(u);return E.current=u,(0,a.useMemo)(()=>Object.freeze({get current(){return E.current}}),[])}function c(u){return u.status==="error"}function i(u){return u.status==="success"}function o(u){return u.status==="not-executed"}function h(u){return u.status==="loading"}function f(...u){return{uninitialized:u.every(o),loading:u.some(h),error:u.find(c)?.error,success:u.some(i)}}function g({state:u}){return jsxs(Fragment,{children:[o(u)&&"uninitialized",h(u)&&"loading",i(u)&&"success",i(u)&&`result: ${JSON.stringify(u.result,null,2)}`,c(u)&&`error: ${stringifyErrorLike(u.error)}`]})}},80231:(ne,A,e)=>{"use strict";e.d(A,{Am:()=>h,Ms:()=>d,QE:()=>y,V6:()=>x,Zg:()=>D,eC:()=>p,ku:()=>o,q0:()=>m,xK:()=>b});var n=e(96540),a=e(25508),s=e(52763),l=e(27044),r=e(62963),c=e(44220),i=e(78034);const o=P=>P.browseDashboards.rootItems,h=P=>P.browseDashboards.childrenByParentUID,f=P=>P.browseDashboards.openFolders,g=P=>P.browseDashboards.selectedItems,u=(0,a.Mz)(o,h,f,(P,T)=>T,(P,T,O,S)=>C(S,P,T,O)),E=(0,a.Mz)(g,P=>Object.values(P).some(T=>Object.values(T).some(O=>O))),v=(0,a.Mz)(g,h,(P,T)=>{const O={dashboard:{...P.dashboard},folder:{...P.folder}};for(const S of Object.keys(P.folder))if(P.folder[S]){const K=T[S];if(K)for(const U of K.items)U.kind==="dashboard"&&(O.dashboard[U.uid]=!1),U.kind==="folder"&&(O.folder[U.uid]=!1)}return O});function p(P){return(0,s.d4)(T=>(P?T.browseDashboards.childrenByParentUID[P]:T.browseDashboards.rootItems)?"fulfilled":"pending")}function m(P){return(0,s.d4)(T=>u(T,P))}function y(){return(0,s.d4)(P=>E(P))}function d(){return(0,s.d4)(g)}function x(){return(0,s.d4)(P=>P.browseDashboards.childrenByParentUID)}function b(){return(0,s.d4)(P=>v(P))}function D(P=[]){const T=(0,s.wA)(),O=(0,n.useRef)(!1);return(0,n.useCallback)(B=>{if(O.current)return Promise.resolve();O.current=!0;const K=T((0,c.Ii)({parentUID:B,excludeKinds:P,pageSize:l.md}));return K.finally(()=>O.current=!1),K},[T,P])}function C(P,T,O,S,B=0,K=[],U=[]){function F(R,G,w){if(K.includes(R.kind)||U.includes(R.uid))return[];const _=C(R.uid,T,O,S,w+1,K,U),Q=!!S[R.uid],ae=O[R.uid]?.items.length===0;Q&&ae&&!K.includes("empty-folder")&&_.push({isOpen:!1,level:w+1,item:{kind:"ui",uiKind:"empty-folder",uid:R.uid+"empty-folder"},parentUID:G});const q={item:R,parentUID:G,level:w,isOpen:Q},k=[q,..._];return(0,r.I2)(q.item.uid)&&k.push({item:{kind:"ui",uiKind:"divider",uid:"shared-with-me-divider"},parentUID:G,level:w+1,isOpen:!1}),k}const I=P&&S[P]||B===0,V=P?O[P]:T;let L=((P?I&&V?.items:V?.items)||[]).flatMap(R=>F(R,P,B));const N=K.includes("dashboard")&&V?.lastFetchedKind==="dashboard";return(B===0&&!V||I&&V&&!(V.isFullyLoaded||N))&&(L=L.concat((0,i.T)(l.md,P,B))),L}},80276:(ne,A,e)=>{"use strict";e.d(A,{IH:()=>C,zx:()=>D});var n=e(2543),a=e.n(n),s=e(96540),l=e(86791),r=e(74268),c=e(70327),i=e(55143),o=e(94646),h=e(29609),f=e(80218);const{useLazyPrometheusRuleNamespacesQuery:g,useLazyGetRuleGroupForNamespaceQuery:u}=c.hK,{useLazyDiscoverDsFeaturesQuery:E}=i.L,v=3*1e3,p=90*1e3,{setInterval:m,clearInterval:y}=window;function d(){const[T]=g();return{matchingPromRuleExists:(0,s.useCallback)(async S=>{const{ruleSourceName:B,namespace:K,groupName:U,ruleName:F}=S;return(await T({ruleSourceName:B,namespace:K,groupName:U,ruleName:F}).unwrap()).find(L=>L.name===K)?.groups.find(L=>L.name===U)?.rules.some(L=>{const N=o.Lg(B,K,U,L);return o.LC(N,S)})??!1},[T])}}const x=!0;function b(){const[T]=E(),[O]=g(),[S]=u();return{isGroupInSync:(0,s.useCallback)(async K=>{const U=K.groupOrigin==="datasource"?K.rulesSource.uid:l.l$,F=await T({uid:U},x).unwrap();if(!F.rulerConfig)throw new Error("Datasource does not support ruler. Unable to determine group consistency");const I=K.groupOrigin==="datasource"?K.namespace.name:K.namespace.uid,V={ruleSourceName:F.name,namespace:I,groupName:K.groupName,limitAlerts:0,excludeAlerts:!0},M={namespace:I,group:K.groupName,rulerConfig:F.rulerConfig,notificationOptions:{showSuccessAlert:!1,showErrorAlert:!1}},[L,N]=await Promise.allSettled([O(V).unwrap(),S(M).unwrap()]);if(L.status==="rejected"&&N.status==="rejected")return(0,r.vV)(new Error("Error fetching Prometheus and Ruler rule groups",{cause:[L.reason,N.reason]})),!0;if(L.status==="rejected"&&N.status==="fulfilled")return(0,r.vV)(new Error("Error fetching Prometheus rule groups",{cause:L.reason})),!0;if(N.status==="rejected"&&L.status==="fulfilled")return L.value.flatMap(R=>R.groups).every(R=>R.name!==K.groupName);if(L.status==="fulfilled"&&N.status==="fulfilled"){const W=L.value.flatMap(G=>G.groups).find(G=>G.name===K.groupName),R=N.value;if(W&&R){if(!(W.rules.length===R.rules.length))return!1;const w=W.rules.map(Q=>Q.name),_=R.rules.map(h.qz);for(const[Q,ae]of(0,n.zip)(w,_))if(Q!==ae)return!1;return!0}}return!1},[T,O,S])}}function D(){const{isGroupInSync:T}=b(),[O,S]=(0,s.useState)(),B=(0,s.useRef)(),K=(0,s.useRef)();(0,s.useEffect)(()=>()=>{U(),F()},[]);function U(){K.current&&(clearTimeout(K.current),K.current=void 0)}function F(){B.current&&(clearTimeout(B.current),B.current=void 0)}async function I(V){U(),F();const M=new Promise((N,W)=>{K.current=setTimeout(()=>{F();const R=new Error("Timeout while waiting for rule group consistency");(0,r.vV)(R,{groupOrigin:V.groupOrigin}),W(R)},p)}),L=new Promise((N,W)=>{function R(){performance.mark("waitForGroupConsistency:finished");const w=performance.measure("waitForGroupConsistency","waitForGroupConsistency:started","waitForGroupConsistency:finished");(0,r.l$)("alerting:wait-for-group-consistency",{duration:w.duration},{groupOrigin:V.groupOrigin})}function G(){T(V).then(w=>{S(w),w?(R(),N()):B.current=setTimeout(G,v)}).catch(w=>{W(w)}).finally(()=>{U()})}performance.mark("waitForGroupConsistency:started"),G()});return Promise.race([M,L])}return{waitForGroupConsistency:I,groupConsistent:O}}function C(){const{matchingPromRuleExists:T}=d(),O=(0,s.useRef)(),S=(0,s.useRef)();(0,s.useEffect)(()=>()=>{B(),K()},[]);const B=()=>{O.current&&(y(O.current),O.current=void 0)},K=()=>{S.current&&(y(S.current),S.current=void 0)};async function U(I){B();const V=new Promise((L,N)=>{setTimeout(()=>{B(),N(new Error("Timeout while waiting for rule removal"))},p)}),M=new Promise((L,N)=>{O.current=m(()=>{T(I).then(W=>{W===!1&&(B(),L())}).catch(W=>{B(),N(W)})},v)});return Promise.race([V,M])}async function F(I){K();const V=new Promise((L,N)=>{setTimeout(()=>{K(),N(new Error("Timeout while waiting for rule creation"))},p)}),M=new Promise((L,N)=>{S.current=m(()=>{T(I).then(W=>{W===!0&&(K(),L())}).catch(W=>{K(),N(W)})},v)});return Promise.race([V,M])}return{waitForRemoval:U,waitForCreation:F}}function P(T){const{matchingPromRuleExists:O}=d(),{waitForCreation:S}=C(),[B,K]=useAsync(async U=>isCloudRuleIdentifier(U)?S(U):Promise.resolve());return useEffect(()=>{isCloudRuleIdentifier(T)&&O(T).then(U=>{U||B.execute(T)})},[B,T,O]),{isConsistent:K.status==="success"||K.status==="not-executed",error:K.error}}},80763:(ne,A,e)=>{"use strict";e.d(A,{M:()=>g,v:()=>E});var n=e(88483),a=e(78282),s=e(27489),l=e(6890),r=e(64762),c=e(6219),i=e(8535),o=e(51845),h=e(35231),f=e(19050);const g=v=>new n.c(p=>{const m=i.M_.getState().explore.panes[v]?.correlations;if(m)p.next(m),p.complete();else{const y=i.M_.subscribe(()=>{const d=i.M_.getState().explore.panes[v]?.correlations;d&&(y(),p.next(d),p.complete())})}});function u(v){return async(p,m)=>{const y=m().explore.panes[v];if(y.datasourceInstance?.uid!==void 0){let d=y.datasourceInstance.meta.mixed?y.queries.map(b=>b.datasource?.uid).filter(b=>b!==null):[y.datasourceInstance.uid];const x=await(0,c.J6)(d);p((0,o.Fb)({exploreId:v,correlations:x.correlations||[]}))}}}function E(v,p,m){return async(y,d)=>{const x=Object.keys(d().explore?.panes),b=d().explore?.panes[x[0]],D=d().explore?.panes[x[1]];if(!b||!D)return;const C=b.datasourceInstance?.meta.mixed?b.queries[0].datasource:b.datasourceInstance?.getRef(),P=D.datasourceInstance?.meta.mixed?D.queries[0].datasource:D.datasourceInstance?.getRef(),[T,O]=await Promise.all([(0,a.l)().get(C),(0,a.l)().get(P)]);if(T?.uid&&O?.uid&&D.correlationEditorHelperData?.resultField){const S={sourceUID:T.uid,targetUID:O.uid,label:v||await(0,c.tZ)(b,D),description:p,type:"query",config:{field:D.correlationEditorHelperData.resultField,target:D.queries[0],transformations:m}};await(0,c.$q)(T.uid,S).then(async()=>{y((0,h.J8)(x[1])),await y(u(x[0])),await y((0,f.Od)({exploreId:x[0]})),(0,s.rR)("grafana_explore_correlation_editor_saved",{sourceDatasourceType:T.type,targetDataSourceType:O.type})}).catch(B=>{y((0,l.dx)((0,r.gi)("Error creating correlation",B))),console.error(B)})}}}},80839:(ne,A,e)=>{"use strict";e.d(A,{s:()=>g});var n=e(74848),a=e(96540),s=e(48480),l=e(29246),r=e(51898),c=e(41654),i=e(18857),o=e(63509),h=e(78282),f=e(36580);class g extends a.PureComponent{constructor(E){super(E),this.dataSourceSrv=(0,h.l)(),this.state={},this.onChange=(v,p)=>{if(p.action==="clear"&&this.props.onClear){this.props.onClear();return}const m=this.dataSourceSrv.getInstanceSettings(v.value);m&&(this.props.onChange(m),this.setState({error:void 0}))}}static{this.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}}componentDidMount(){const{current:E}=this.props;this.dataSourceSrv.getInstanceSettings(E)||this.setState({error:"Could not find data source "+E})}getCurrentValue(){const{current:E,hideTextValue:v,noDefault:p}=this.props;if(!E&&p)return;const m=this.dataSourceSrv.getInstanceSettings(E);if(m)return{label:m.name.slice(0,37),value:m.uid,imgUrl:m.meta.info.logos.small,hideText:v,meta:m.meta};const y=(0,s.Iz)(E);return y===f.dR.uid||y===f.dR.name?{label:y,value:y,hideText:v}:{label:(y??"no name")+" - not found",value:y??void 0,imgUrl:"",hideText:v}}getDataSourceOptions(){const{alerting:E,tracing:v,metrics:p,mixed:m,dashboard:y,variables:d,annotations:x,pluginId:b,type:D,filter:C,logs:P}=this.props;return this.dataSourceSrv.getList({alerting:E,tracing:v,metrics:p,logs:P,dashboard:y,mixed:m,variables:d,annotations:x,pluginId:b,filter:C,type:D}).map(O=>({value:O.name,label:`${O.name}${O.isDefault?" (default)":""}`,imgUrl:O.meta.info.logos.small,meta:O.meta}))}render(){const{autoFocus:E,onBlur:v,onClear:p,openMenuOnFocus:m,placeholder:y,width:d,inputId:x,disabled:b=!1,isLoading:D=!1}=this.props,{error:C}=this.state,P=this.getDataSourceOptions(),T=this.getCurrentValue(),O=typeof p=="function";return(0,n.jsx)("div",{"aria-label":"Data source picker select container","data-testid":r.Tp.components.DataSourcePicker.container,children:(0,n.jsx)(i.l6,{isLoading:D,disabled:b,"aria-label":"Select a data source","data-testid":r.Tp.components.DataSourcePicker.inputV2,inputId:x||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:O,backspaceRemovesValue:!1,onChange:this.onChange,options:P,autoFocus:E,onBlur:v,width:d,openMenuOnFocus:m,maxMenuHeight:500,placeholder:y,noOptionsMessage:"No datasources found",value:T??null,invalid:!!C||!!this.props.invalid,getOptionLabel:S=>S.meta&&(0,l.x)(S.meta.signature)&&S!==T?(0,n.jsxs)(c.B,{alignItems:"center",justifyContent:"space-between",children:[(0,n.jsx)("span",{children:S.label})," ",(0,n.jsx)(o.B,{status:S.meta.signature})]}):S.label||""})})}}},80849:(ne,A,e)=>{"use strict";e.d(A,{p:()=>o});var n=e(74848),a=e(51898),s=e(92745),l=e(45861),r=e(66404),c=e(31286),i=e(41654);function o(h){return(0,n.jsx)(c.a,{alignItems:"center",padding:4,children:(0,n.jsxs)(i.B,{direction:"column",alignItems:"center",gap:2,children:[(0,n.jsx)(r.E,{element:"h3",textAlignment:"center",children:(0,n.jsx)(s.x6,{i18nKey:"transformations.empty.add-transformation-header",children:"Start transforming data"})}),(0,n.jsx)(r.E,{element:"p",textAlignment:"center","data-testid":a.Tp.components.Transforms.noTransformationsMessage,children:(0,n.jsxs)(s.x6,{i18nKey:"transformations.empty.add-transformation-body",children:["Transformations allow data to be changed in various ways before your visualization is shown.",(0,n.jsx)("br",{}),"This includes joining data together, renaming fields, making calculations, formatting data for display, and more."]})}),(0,n.jsx)(l.$n,{icon:"plus",variant:"primary",size:"md",onClick:h.onShowPicker,"data-testid":a.Tp.components.Transforms.addTransformationButton,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.empty-transformations-message.add-transformation",children:"Add transformation"})})]})})}},80851:()=>{(function(ne){function A(e){var n={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},a={},s=null;function l(m){n.active&&(g(m),e.getPlaceholder().trigger("plotselecting",[i()]))}function r(m){m.which==1&&(document.body.focus(),document.onselectstart!==void 0&&a.onselectstart==null&&(a.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&a.ondrag==null&&(a.ondrag=document.ondrag,document.ondrag=function(){return!1}),f(n.first,m),n.active=!0,s=function(y){c(y)},ne(document).one("mouseup",s))}function c(m){return s=null,document.onselectstart!==void 0&&(document.onselectstart=a.onselectstart),document.ondrag!==void 0&&(document.ondrag=a.ondrag),n.active=!1,g(m),p()?o(m):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function i(){if(!p()||!n.show)return null;var m={},y=n.first,d=n.second,x=e.getAxes(),b=!0;return ne.each(x,function(D,C){C.used&&(anyUsed=!1)}),ne.each(x,function(D,C){if(C.used||b){var P=C.c2p(y[C.direction]),T=C.c2p(d[C.direction]);m[D]={from:Math.min(P,T),to:Math.max(P,T)}}}),m}function o(m){var y=i();y.ctrlKey=m.ctrlKey,y.metaKey=m.metaKey,e.getPlaceholder().trigger("plotselected",[y]),y.xaxis&&y.yaxis&&e.getPlaceholder().trigger("selected",[{x1:y.xaxis.from,y1:y.yaxis.from,x2:y.xaxis.to,y2:y.yaxis.to}])}function h(m,y,d){return y<m?m:y>d?d:y}function f(m,y){var d=e.getOptions(),x=e.getPlaceholder().offset(),b=e.getPlotOffset();m.x=h(0,y.pageX-x.left-b.left,e.width()),m.y=h(0,y.pageY-x.top-b.top,e.height()),d.selection.mode=="y"&&(m.x=m==n.first?0:e.width()),d.selection.mode=="x"&&(m.y=m==n.first?0:e.height())}function g(m){m.pageX!=null&&(f(n.second,m),p()?(e.isSelecting=!0,n.show=!0,e.triggerRedrawOverlay()):u(!0))}function u(m){n.show&&(n.show=!1,e.triggerRedrawOverlay(),m||e.getPlaceholder().trigger("plotunselected",[]))}function E(m,y){var d,x,b,D,C=e.getAxes();for(var P in C)if(d=C[P],d.direction==y&&(D=y+d.n+"axis",!m[D]&&d.n==1&&(D=y+"axis"),m[D])){x=m[D].from,b=m[D].to;break}if(m[D]||(d=y=="x"?e.getXAxes()[0]:e.getYAxes()[0],x=m[y+"1"],b=m[y+"2"]),x!=null&&b!=null&&x>b){var T=x;x=b,b=T}return{from:x,to:b,axis:d}}function v(m,y){var d,x,b=e.getOptions();b.selection.mode=="y"?(n.first.x=0,n.second.x=e.width()):(x=E(m,"x"),n.first.x=x.axis.p2c(x.from),n.second.x=x.axis.p2c(x.to)),b.selection.mode=="x"?(n.first.y=0,n.second.y=e.height()):(x=E(m,"y"),n.first.y=x.axis.p2c(x.from),n.second.y=x.axis.p2c(x.to)),n.show=!0,e.triggerRedrawOverlay(),!y&&p()&&o()}function p(){var m=e.getOptions().selection.minSize;return Math.abs(n.second.x-n.first.x)>=m&&Math.abs(n.second.y-n.first.y)>=m}e.clearSelection=u,e.setSelection=v,e.getSelection=i,e.hooks.bindEvents.push(function(m,y){var d=m.getOptions();d.selection.mode!=null&&(y.mousemove(l),y.mousedown(r))}),e.hooks.drawOverlay.push(function(m,y){if(n.show&&p()){var d=m.getPlotOffset(),x=m.getOptions();y.save(),y.translate(d.left,d.top);var b=ne.color.parse(x.selection.color);y.strokeStyle=b.scale("a",.8).toString(),y.lineWidth=1,y.lineJoin=x.selection.shape,y.fillStyle=b.scale("a",.4).toString();var D=Math.min(n.first.x,n.second.x)+.5,C=Math.min(n.first.y,n.second.y)+.5,P=Math.abs(n.second.x-n.first.x)-1,T=Math.abs(n.second.y-n.first.y)-1;y.fillRect(D,C,P,T),y.strokeRect(D,C,P,T),y.restore()}}),e.hooks.shutdown.push(function(m,y){y.unbind("mousemove",l),y.unbind("mousedown",r),s&&(ne(document).unbind("mouseup",s),document.onselectstart!==void 0&&(document.onselectstart=a.onselectstart),document.ondrag!==void 0&&(document.ondrag=a.ondrag))})}ne.plot.plugins.push({init:A,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},80977:(ne,A,e)=>{"use strict";e.d(A,{x:()=>n});var n=(a=>(a.Descending="Descending",a.Ascending="Ascending",a.DatasourceAZ="Datasource A-Z",a.DatasourceZA="Datasource Z-A",a))(n||{})},81045:(ne,A,e)=>{"use strict";e.d(A,{T:()=>l});var n=e(41778),a=e(11194),s=e(25274);function l(r){let c=r?.editorMode||n.lX.Builder;return r?.editorMode===void 0&&r?.rawSql!==void 0&&(c=n.lX.Code),{...r,refId:r?.refId||"A",format:r?.format!==void 0?r.format:a.gv.Table,rawSql:r?.rawSql||"",editorMode:c,sql:r?.sql??{columns:[(0,s.JD)()],groupBy:[(0,s.xG)()],limit:50}}}},81053:(ne,A,e)=>{"use strict";e.d(A,{u:()=>O});var n=e(74848),a=e(16817),s=e(51898),l=e(92745),r=e(78282),c=e(37386),i=e(89640),o=e(66698),h=e(52847),f=e(76792),g=e(38681),u=e(56620),E=e(83501),v=e(96540),p=e(41654),m=e(21285),y=e(32442),d=e(63527),x=e(45861);function b({options:S,onChange:B,width:K}){const[U,F]=(0,v.useState)(S.length?S:[{value:"",label:""}]),I=W=>{F(W),B(W.map(R=>({label:R.label.trim(),value:String(R.value).trim()})).filter(R=>!!R.label))},V=(W,R)=>{if(U[W].value!==R){const G=[...U];G[W]={...G[W],value:R},I(G)}},M=(W,R)=>{if(U[W].label!==R){const G=[...U];G[W]={...G[W],label:R},I(G)}},L=()=>{const W={value:"",label:""},R=[...U,W];I(R)},N=W=>{const R=U.filter((G,w)=>w!==W);I(R)};return(0,n.jsxs)(p.B,{direction:"column",gap:2,width:K,children:[U.map((W,R)=>(0,n.jsxs)(p.B,{direction:"row","data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsStaticOptionsRow,children:[(0,n.jsx)(d.p,{value:W.label,placeholder:(0,l.t)("variables.query-variable-static-options.label-placeholder","display label"),onChange:G=>M(R,G.currentTarget.value),"data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsStaticOptionsLabelInput}),(0,n.jsx)(d.p,{value:String(W.value),placeholder:(0,l.t)("variables.query-variable-static-options.value-placeholder","value, default empty string"),onChange:G=>V(R,G.currentTarget.value),"data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsStaticOptionsValueInput}),(0,n.jsx)(x.$n,{icon:"times",variant:"secondary","aria-label":(0,l.t)("variables.query-variable-static-options.remove-option-button-label","Remove option"),onClick:()=>N(R),"data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsStaticOptionsDeleteButton})]},R)),(0,n.jsx)("div",{children:(0,n.jsx)(x.$n,{icon:"plus",variant:"secondary",onClick:L,"data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsStaticOptionsAddButton,"aria-label":(0,l.t)("variables.query-variable-static-options.add-option-button-label","Add option"),children:(0,n.jsx)(l.x6,{i18nKey:"variables.query-variable-static-options.add-option-button-label",children:"Add option"})})})]})}var D=e(68577);const C=[{label:"Before query values",value:"before"},{label:"After query values",value:"after"},{label:"Sorted with query values",value:"sorted"}];function P(S){const{staticOptions:B,onStaticOptionsChange:K,staticOptionsOrder:U,onStaticOptionsOrderChange:F}=S,I=C.find(L=>L.value===U)??C[0],[V,M]=(0,v.useState)(!!B?.length);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.Y,{children:(0,n.jsx)(l.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.static-options-legend",children:"Static options"})}),(0,n.jsxs)(p.B,{direction:"column",gap:2,children:[(0,n.jsx)(c.D,{noMargin:!0,label:(0,l.t)("dashboard-scene.query-variable-editor-form.label-use-static-options","Use static options"),description:(0,l.t)("variables.query-variable-static-options.description","Add custom options in addition to query results"),children:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(p.B,{direction:"column",gap:2,children:[(0,n.jsx)(m.d,{"data-testid":s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsStaticOptionsToggle,value:V,onChange:L=>{L.currentTarget.checked?M(!0):(M(!1),B?.length&&K(void 0))}}),V&&(0,n.jsx)(b,{width:60,options:B??[],onChange:K})]})})}),V&&(0,n.jsx)(D.v,{name:(0,l.t)("dashboard-scene.query-variable-editor-form.label-static-options-sort","Static options sort"),description:(0,l.t)("variables.query-variable-static-options-sort-select.description-values-variable","How to sort static options with query results"),value:I,options:C,onChange:L=>F(L.value),testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsStaticOptionsOrderDropdown,width:25})]})]})}var T=e(25379);function O({datasource:S,onDataSourceChange:B,query:K,onQueryChange:U,onLegacyQueryChange:F,timeRange:I,regex:V,onRegExChange:M,sort:L,onSortChange:N,refresh:W,onRefreshChange:R,isMulti:G,onMultiChange:w,allowCustomValue:_,onAllowCustomValueChange:Q,includeAll:ae,onIncludeAllChange:q,allValue:k,onAllValueChange:ee,staticOptions:j,staticOptionsOrder:J,onStaticOptionsChange:Z,onStaticOptionsOrderChange:te}){const{value:se}=(0,a.A)(async()=>{const re=await(0,r.l)().get(S??""),ue=await(0,g.y)(re),X=re?.variables?.getDefaultQuery?.();if(!K&&X){const le=typeof X=="string"?X:{...X,refId:X.refId??"A"};U(le)}return{datasource:re,VariableQueryEditor:ue}},[S]),{datasource:ie,VariableQueryEditor:ce}=se??{};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.Y,{children:(0,n.jsx)(l.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.query-options",children:"Query options"})}),(0,n.jsx)(c.D,{label:(0,l.t)("dashboard-scene.query-variable-editor-form.label-data-source","Data source"),htmlFor:"data-source-picker",children:(0,n.jsx)(f.sk,{current:S,onChange:B,variables:!0,width:30})}),ie&&ce&&(0,n.jsx)(o.w,{onQueryChange:U,onLegacyQueryChange:F,datasource:ie,query:K,VariableQueryEditor:ce,timeRange:I}),(0,n.jsx)(T.Z,{defaultValue:V??"",name:(0,l.t)("dashboard-scene.query-variable-editor-form.name-regex","Regex"),description:(0,n.jsxs)("div",{children:[(0,n.jsx)(l.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.description-optional",children:"Optional, if you want to extract part of a series name or metric node segment."}),(0,n.jsx)("br",{}),(0,n.jsxs)(l.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.description-examples",children:["Named capture groups can be used to separate the display text and value (",(0,n.jsx)(i.Y,{href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",external:!0,children:"see examples"}),")."]})]}),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onBlur:M,testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),(0,n.jsx)(E.z,{testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,onChange:N,sort:L}),(0,n.jsx)(u.U,{testId:s.Tp.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRefreshSelectV2,onChange:R,refresh:W}),Z&&te&&(0,n.jsx)(P,{staticOptions:j,staticOptionsOrder:J,onStaticOptionsChange:Z,onStaticOptionsOrderChange:te}),(0,n.jsx)(y.Y,{children:(0,n.jsx)(l.x6,{i18nKey:"dashboard-scene.query-variable-editor-form.selection-options",children:"Selection options"})}),(0,n.jsx)(h.B,{multi:!!G,includeAll:!!ae,allowCustomValue:_,allValue:k,onMultiChange:w,onIncludeAllChange:q,onAllValueChange:ee,onAllowCustomValueChange:Q})]})}},81082:(ne,A,e)=>{"use strict";e.d(A,{I:()=>u,m:()=>g});var n=e(74848),a=e(38809),s=e(95004),l=e(92745),r=e(739),c=e(77824),i=e(76319),o=e(63527),h=e(41654),f=e(99555);const g=({value:E,context:v,onChange:p,item:m})=>(0,n.jsxs)(h.B,{children:[(0,n.jsx)(c.z,{value:E?.mode||r.gs.None,options:m.settings?.options??[],onChange:y=>{p({...E,mode:y})}}),v.isOverride&&E?.mode&&E?.mode!==r.gs.None&&(0,n.jsx)(o.p,{type:"text",placeholder:(0,l.t)("grafana-ui.stacking-builder.group","Group"),suffix:(0,n.jsx)(i.K,{name:"question-circle",tooltip:(0,l.t)("grafana-ui.stacking-builder.group-tooltip","Name of the stacking group"),tooltipPlacement:"top"}),defaultValue:E?.group,onChange:y=>{p({...E,group:y.currentTarget.value.trim()})}})]});function u(E,v,p=["Graph styles"]){const m=(0,f.P)();E.addCustomEditor({id:"stacking",path:"stacking",name:(0,l.t)("grafana-ui.builder.stacking.name-stack-series","Stack series"),category:p,defaultValue:v,editor:g,override:g,settings:{options:m.stacking},process:a.hS,shouldApply:y=>y.type===s.PU.number})}},81166:(ne,A,e)=>{"use strict";e.d(A,{KQ:()=>i,QB:()=>c});const n="12.2.1";var a=(o=>(o.Circle="circle",o.Square="square",o))(a||{}),s=(o=>(o.Auto="auto",o.Manual="manual",o))(s||{}),l=(o=>(o.Lines="lines",o.Points="points",o.PointsAndLines="points+lines",o))(l||{});const r={id:""},c={fillOpacity:50,show:"points"},i={series:[]}},81538:(ne,A,e)=>{"use strict";e.d(A,{b:()=>f});var n=e(74848),a=e(22803),s=e(92745),l=e(63142),r=e(45861),c=e(37386),i=e(16780),o=e(63527),h=e(22787);function f({action:u,onDismiss:E,onShowConfirm:v,variables:p,setVariables:m}){const y=(0,l.of)(g),d=()=>{E(),v()};return(0,n.jsxs)(h.a,{isOpen:!0,title:(0,s.t)("grafana-ui.action-editor.button.action-variables-title","Action variables"),onDismiss:E,className:y.variablesModal,children:[(0,n.jsx)(i.n,{children:u.variables.map(x=>(0,n.jsx)(c.D,{label:x.name,children:(0,n.jsx)(o.p,{type:"text",value:p[x.key]??"",onChange:b=>{m({...p,[x.key]:b.currentTarget.value})},placeholder:(0,s.t)("grafana-ui.action-editor.button.variable-value-placeholder","Value"),width:20})},x.name))}),(0,n.jsxs)(h.a.ButtonRow,{children:[(0,n.jsx)(r.$n,{variant:"secondary",onClick:E,children:(0,s.t)("grafana-ui.action-editor.close","Close")}),(0,n.jsx)(r.$n,{variant:"primary",onClick:d,children:(0,s.t)("grafana-ui.action-editor.continue","Continue")})]})]})}const g=()=>({variablesModal:(0,a.css)({zIndex:1e4})})},81563:(ne,A,e)=>{"use strict";e.d(A,{k:()=>f});var n=e(74848),a=e(96540),s=e(22803),l=e(2543),r=e.n(l),c=e(29647),i=e(63142),o=e(5585);const h=u=>({list:(0,s.css)({borderBottom:`1px solid ${u.colors.border.weak}`,"&:last-child":{border:"none"}}),wrapper:(0,s.css)({background:u.colors.background.primary,width:"250px"}),item:(0,s.css)({background:"none",padding:"2px 8px",userSelect:"none",color:u.colors.text.primary,cursor:"pointer","&:hover":{background:u.colors.action.hover}}),label:(0,s.css)({color:u.colors.text.secondary}),activeItem:(0,s.css)({background:u.colors.background.secondary,"&:hover":{background:u.colors.background.secondary}}),itemValue:(0,s.css)({fontFamily:u.typography.fontFamilyMonospace,fontSize:u.typography.size.sm})}),f=({suggestions:u,...E})=>{const v=(0,a.useRef)(null);(0,c.A)(v,()=>{E.onClose&&E.onClose()});const p=(0,a.useMemo)(()=>(0,l.groupBy)(u,y=>y.origin),[u]),m=(0,i.of)(h);return(0,n.jsx)("div",{role:"menu",ref:v,className:m.wrapper,children:Object.keys(p).map((y,d)=>{const x=d===0?0:Object.keys(p).reduce((b,D,C)=>C>=d?b:b+p[D].length,0);return(0,a.createElement)(g,{...E,suggestions:p[y],label:(0,l.capitalize)(y),activeIndex:E.activeIndex,activeIndexOffset:x,key:y})})})};f.displayName="DataLinkSuggestions";const g=a.memo(({activeIndex:u,activeIndexOffset:E,label:v,onClose:p,onSuggestionSelect:m,suggestions:y,activeRef:d})=>{const x=(0,i.of)(h);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.B,{className:x.list,items:y,renderItem:(b,D)=>{const C=D+E===u;return(0,n.jsx)("div",{role:"menuitem",tabIndex:0,className:(0,s.cx)(x.item,C&&x.activeItem),ref:C?d:void 0,onClick:()=>{m(b)},title:b.documentation,children:(0,n.jsxs)("span",{className:x.itemValue,children:[(0,n.jsx)("span",{className:x.label,children:v})," ",b.label]})})}})})});g.displayName="DataLinkSuggestionsList"},81657:(ne,A,e)=>{"use strict";e.d(A,{v:()=>u});var n=e(74848),a=e(22803),s=e(33239),l=e(17548),r=e(22592),c=e(45863),i=e(30703),o=e(45967),h=e(91867),f=e(67522),g=e(63142);class u extends c.XQ{constructor(m={}){super({...m,from:"now-6h",to:"now",value:(0,r.E2)()}),this._variableDependency=new c.Sh(this,{statePaths:["timeFrom","timeShift"]}),this.addActivationHandler(()=>this._onActivate())}static{this.Component=E}_onActivate(){this._subs.add(this.subscribeToState(y=>{const{timeInfo:d,timeRange:x}=this.getTimeOverride(this.getAncestorTimeRange().state.value);y.timeInfo!==d&&this.setState({timeInfo:d,value:x})}));const{timeRange:m}=this.getTimeOverride(this.getAncestorTimeRange().state.value);this.setState({value:m,from:m.raw.from.toString(),to:m.raw.to.toString()})}ancestorTimeRangeChanged(m){const y=this.getTimeOverride(m.value);this.setState({value:y.timeRange,timeInfo:y.timeInfo})}getTimeOverride(m){const{timeFrom:y,timeShift:d}=this.state,x={timeInfo:"",timeRange:m};if(y){const b=c.jh.interpolate(this,this.state.timeFrom),D=l.describeTextRange(b);if(D.invalid)return x.timeInfo="invalid time override",x;if(l.isRelativeTimeRange(m.raw)){const C=this.getTimeZone();x.timeInfo=D.display,x.timeRange={from:s.parse(D.from,void 0,C),to:s.parse(D.to,void 0,C),raw:{from:D.from,to:D.to}}}}if(d){const b=c.jh.interpolate(this,this.state.timeShift);if(l.describeTextRange(b).invalid)return x.timeInfo="invalid timeshift",x;const C="-"+b;x.timeInfo+=" timeshift "+C;const P=s.parseDateMath(C,x.timeRange.from,!1),T=s.parseDateMath(C,x.timeRange.to,!0);if(!P||!T)return x.timeInfo="invalid timeshift",x;x.timeRange={from:P,to:T,raw:{from:P,to:T}}}return x}}function E({model:p}){const{timeInfo:m,hideTimeOverride:y}=p.useState(),d=(0,g.of)(v);return!m||y?null:(0,n.jsx)(o.m,{content:(0,n.jsx)(h.xS,{timeRange:p.state.value,timeZone:p.getTimeZone()}),children:(0,n.jsxs)(f.NR.TitleItem,{className:d.timeshift,children:[(0,n.jsx)(i.I,{name:"clock-nine",size:"sm"})," ",m]})})}const v=p=>({timeshift:(0,a.css)({color:p.colors.text.link,gap:p.spacing(.5),whiteSpace:"nowrap"})})},81871:(ne,A,e)=>{"use strict";e.d(A,{F:()=>n});function n(a={}){return{...a,accesscontrol:!0}}},81917:(ne,A,e)=>{"use strict";e.d(A,{l:()=>S});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(46885),c=e(28848),i=e.n(c),o=e(96540),h=e(84596),f=e(75226),g=e(29317),u=e(79609),E=e(38036),v=e(56103),p=e(63142),m=e(35458),y=e(63527),d=e(15245),x=e(92807),b=e(81563);class D{getBoundingClientRect(){const U=window.getSelection(),F=U&&U.anchorNode;return F&&F.parentElement?F.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const C=(K,U)=>K-U*Math.floor(K/U),P={builtInVariable:{pattern:/(\${\S+?})/}},T=[(0,v.D)({onlyIn:K=>"type"in K&&K.type==="code_block",getSyntax:()=>"links"},{...i().languages,links:P})],O=K=>({input:(0,y.n)({theme:K,invalid:!1}).input,editor:(0,a.css)({".token.builtInVariable":{color:K.colors.success.text},".token.variable":{color:K.colors.primary.text}}),suggestionsWrapper:(0,a.css)({boxShadow:K.shadows.z2}),wrapperOverrides:(0,a.css)({width:"100%","> .slate-query-field__wrapper":{padding:0,backgroundColor:"transparent",border:"none"}})}),S=(0,o.memo)(({value:K,onChange:U,suggestions:F,placeholder:I="http://your-grafana.com/d/000000010/annotations"})=>{const V=(0,o.useRef)(null),M=(0,p.of)(O),[L,N]=(0,o.useState)(!1),[W,R]=(0,o.useState)(0),[G,w]=(0,o.useState)((0,m.mO)(K)),_=(0,h.A)(G),[Q,ae]=(0,o.useState)(0),q=(0,o.useRef)(null);(0,o.useEffect)(()=>{q.current?.scrollTo(0,Q)},[Q]);const k=[(0,s.cY)(({rects:re})=>({alignmentAxis:re.reference.width})),(0,s.UU)({fallbackAxisSideDirection:"start",crossAxis:!1,boundary:document.body}),(0,s.BN)()],{refs:ee,floatingStyles:j}=(0,l.we)({open:L,placement:"bottom-start",onOpenChange:N,middleware:k,whileElementsMounted:r.ll,strategy:"fixed"}),J=(0,o.useRef)({showingSuggestions:L,suggestions:F,suggestionsIndex:W,linkUrl:G,onChange:U});J.current={showingSuggestions:L,suggestions:F,suggestionsIndex:W,linkUrl:G,onChange:U};const Z=(0,o.useRef)(null);(0,o.useEffect)(()=>{ae(B(Z.current,W))},[W]);const te=o.useCallback((re,ue)=>{if(!J.current.showingSuggestions){if(re.key==="="||re.key==="$"||re.keyCode===32&&re.ctrlKey){const X=new D;return ee.setReference(X),N(!0)}return ue()}switch(re.key){case"Backspace":J.current.linkUrl.focusText.getText().length===1&&ue();case"Escape":return N(!1),R(0);case"Enter":return re.preventDefault(),ie(J.current.suggestions[J.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":re.preventDefault();const X=re.key==="ArrowDown"?1:-1;return R(le=>C(le+X,J.current.suggestions.length));default:return ue()}},[]);(0,o.useEffect)(()=>{_&&_.selection.isFocused&&!G.selection.isFocused&&J.current.onChange(f.default.serialize(G))},[G,_]);const se=o.useCallback(({value:re})=>{w(re)},[]),ie=(re,ue=V.current)=>{const le=ce()==="$";re.origin!==u.$0.Template||re.value===E.c.includeVars?ue.insertText(`${le?"":"$"}{${re.value}}`):ue.insertText(`${le?"":"$"}{${re.value}:queryparam}`),w(ue.value),N(!1),R(0),J.current.onChange(f.default.serialize(ue.value))},ce=()=>{const re=document.getElementById("data-link-input");let ue="",X,le;return window.getSelection&&(X=window.getSelection(),X&&X.rangeCount>0&&(le=X.getRangeAt(0).cloneRange(),le.collapse(!0),le.setStart(re,0),ue=le.toString().slice(-1))),ue};return(0,n.jsx)("div",{className:M.wrapperOverrides,children:(0,n.jsx)("div",{className:"slate-query-field__wrapper",children:(0,n.jsxs)("div",{id:"data-link-input",className:"slate-query-field",children:[L&&(0,n.jsx)(d.ZL,{children:(0,n.jsx)("div",{ref:ee.setFloating,style:j,children:(0,n.jsx)(x.P,{maxHeight:"300px",ref:q,onScroll:re=>ae(re.currentTarget.scrollTop),children:(0,n.jsx)(b.k,{activeRef:Z,suggestions:J.current.suggestions,onSuggestionSelect:ie,onClose:()=>N(!1),activeIndex:W})})})}),(0,n.jsx)(g.Editor,{schema:m.yx,ref:V,placeholder:I,value:J.current.linkUrl,onChange:se,onKeyDown:(re,ue,X)=>te(re,X),plugins:T,className:(0,a.cx)(M.editor,M.input,(0,a.css)({padding:"3px 8px"}))})]})})})});S.displayName="DataLinkInput";function B(K,U){return(K?.clientHeight??0)*U}},81970:(ne,A,e)=>{"use strict";e.d(A,{Ax:()=>K,DI:()=>m,Gx:()=>d,IA:()=>T,NC:()=>C,TR:()=>F,U3:()=>P,X1:()=>x,cX:()=>D,l0:()=>p,oU:()=>b,rs:()=>y,x8:()=>U,xB:()=>v.x});var n=e(2543),a=e.n(n),s=e(5556),l=e(80011),r=e(92745),c=e(78282),i=e(6890),o=e(64762),h=e(8535),f=e(72054),g=e(68126),u=e(53222),E=e(15130),v=e(80977);async function p(V){const{queries:M,localOverride:L,datasource:N,starred:W,comment:R,showNotif:G}=V,w=G?.quotaExceededError??!0,_=G?.limitExceededWarning??!0,Q=G?.otherErrors??!0,ae=M&&M.filter(q=>I(q));if(ae.length>0){let q=!1,k=!1,ee;try{ee=(await(L?(0,u.tU)():(0,u.a)()).addToRichHistory({datasourceUid:N.uid,datasourceName:N.name??"",queries:ae,starred:W,comment:R??""})).warning}catch(j){return j instanceof Error&&(j.name===f.m.StorageFull?(q=!0,w&&(0,h.JD)((0,i.dx)((0,o.gi)(j.message)))):Q&&j.name!==f.m.DuplicatedEntry&&(0,h.JD)((0,i.dx)((0,o.gi)((0,r.t)("explore.rich-history-utils-notification.update-failed","Rich History update failed"),j.message)))),{richHistoryStorageFull:q,limitExceeded:k}}return ee&&ee.type===f.C.LimitExceeded&&(k=!0,_&&(0,h.JD)((0,i.dx)((0,o.q8)(ee.message)))),{richHistoryStorageFull:q,limitExceeded:k}}return{}}async function m(V){const M={...V,from:V.to===void 0?V.to:(0,g.wQ)(V.to,{isLastTs:!0,tz:E.TP.user?.timezone}),to:V.from===void 0?V.from:(0,g.wQ)(V.from,{isLastTs:!0,tz:E.TP.user?.timezone})};return await(0,u.a)().getRichHistory(M)}async function y(V){await(0,u.a)().updateSettings(V)}async function d(){return await(0,u.a)().getSettings()}async function x(){return(0,u.a)().deleteAll()}async function b(V,M){try{return await(0,u.a)().updateStarred(V,M)}catch(L){L instanceof Error&&(0,h.JD)((0,i.dx)((0,o.gi)((0,r.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),L.message)));return}}async function D(V,M){try{return await(0,u.a)().updateComment(V,M)}catch(L){L instanceof Error&&(0,h.JD)((0,i.dx)((0,o.gi)((0,r.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),L.message)));return}}async function C(V){try{return await(0,u.a)().deleteRichHistory(V),V}catch(M){M instanceof Error&&(0,h.JD)((0,i.dx)((0,o.gi)((0,r.t)("explore.rich-history-utils-notification.saving-failed","Saving rich history failed"),M.message)));return}}const P=V=>{const M={range:{from:"now-1h",to:"now"},datasource:V.datasourceName,queries:V.queries},L=(0,s.Pp)(M),N=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return s.kM.renderUrl(`${N}/explore`,{left:L})},T=V=>{let M;switch(V){case 0:M=(0,r.t)("explore.rich-history-utils.today","today");break;case 1:M=(0,r.t)("explore.rich-history-utils.yesterday","yesterday");break;case 7:M=(0,r.t)("explore.rich-history-utils.a-week-ago","a week ago");break;case 14:M=(0,r.t)("explore.rich-history-utils.two-weeks-ago","two weeks ago");break;default:M=(0,r.t)("explore.rich-history-utils.days-ago","{{num}} days ago",{num:`${V}`})}return M};function O(V){return(0,l.LE)(V,{format:"MMMM D"})}function S(V){const M=(0,n.omit)(V,["key","refId","datasource"]);return JSON.stringify(M)}function B(V,M){let L="";return M===v.x.DatasourceAZ||M===v.x.DatasourceZA?L=V.datasourceName:L=O(V.createdAt),L}function K(V,M){return M?.getQueryDisplayText?M.getQueryDisplayText(V):S(V)}function U(V,M){let L={};return V.forEach(N=>{let W=B(N,M);W in L?L[W]=[...L[W],N]:L[W]=[N]}),L}function F(){return(0,c.l)().getList({mixed:!0}).map(V=>({name:V.name,uid:V.uid}))}function I(V){const M=(0,n.omit)(V,["key","refId","datasource"]);return Object.keys(M).length>0}},81988:(ne,A,e)=>{"use strict";e.d(A,{E:()=>c});var n=e(74848),a=e(22803),s=e(15356),l=e(63142),r=e(4651);function c({onChange:o,value:h}){const f=(0,l.of)(i);return(0,n.jsx)(s.f,{className:f.buttonSelectText,options:r.zd,onChange:o,value:h})}const i=o=>({buttonSelectText:(0,a.css)({color:o.colors.primary.text,fontSize:o.typography.bodySmall.fontSize,textTransform:"uppercase",padding:`0 ${o.spacing(1)}`})})},82013:()=>{(function(ne){var A={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(n){var a={x:-1,y:-1,locked:!1};n.setCrosshair=function(c){if(!c)a.x=-1;else{var i=n.p2c(c);a.x=Math.max(0,Math.min(i.left,n.width())),a.y=Math.max(0,Math.min(i.top,n.height()))}n.triggerRedrawOverlay()},n.clearCrosshair=n.setCrosshair,n.lockCrosshair=function(c){c&&n.setCrosshair(c),a.locked=!0},n.unlockCrosshair=function(){a.locked=!1};function s(r){a.locked||a.x!=-1&&(a.x=-1,n.triggerRedrawOverlay())}function l(r){if(!a.locked){if(n.getSelection&&n.getSelection()){a.x=-1;return}var c=n.offset();a.x=Math.max(0,Math.min(r.pageX-c.left,n.width())),a.y=Math.max(0,Math.min(r.pageY-c.top,n.height())),n.triggerRedrawOverlay()}}n.hooks.bindEvents.push(function(r,c){r.getOptions().crosshair.mode&&(c.mouseout(s),c.mousemove(l))}),n.hooks.drawOverlay.push(function(r,c){var i=r.getOptions().crosshair;if(i.mode){var o=r.getPlotOffset();if(c.save(),c.translate(o.left,o.top),a.x!=-1){var h=r.getOptions().crosshair.lineWidth%2?.5:0;if(c.strokeStyle=i.color,c.lineWidth=i.lineWidth,c.lineJoin="round",c.beginPath(),i.mode.indexOf("x")!=-1){var f=Math.floor(a.x)+h;c.moveTo(f,0),c.lineTo(f,r.height())}if(i.mode.indexOf("y")!=-1){var g=Math.floor(a.y)+h;c.moveTo(0,g),c.lineTo(r.width(),g)}c.stroke()}c.restore()}}),n.hooks.shutdown.push(function(r,c){c.unbind("mouseout",s),c.unbind("mousemove",l)})}ne.plot.plugins.push({init:e,options:A,name:"crosshair",version:"1.0"})})(jQuery)},82143:(ne,A,e)=>{"use strict";e.d(A,{u:()=>E});var n=e(2543),a=e.n(n),s=e(96540),l=e(13752),r=e(96083),c=e(62467),i=e(11150),o=e(63720),h=e(59099),f=e(8934),g=e(90811);function u(v){return{label:v,value:stringToMs(v)}}class E extends s.PureComponent{constructor(p){super(p),this.propsSubject=new l.B,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,o.n)(p=>g.cC.isLive(p.interval)?(0,c.of)({}):p.loading?i.t:(0,r.Y)((0,f.dc)(p.interval))),(0,h.M)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(p){g.cC.isLive(p.interval)&&g.cC.isLive(this.props.interval)||(0,n.isEqual)(p,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},82151:(ne,A,e)=>{"use strict";e.d(A,{b:()=>h});var n=e(74848),a=e(92745),s=e(41654),l=e(99887),r=e(75735),c=e(55266),i=e(27321),o=e(45942);function h({folder:g}){const u=(0,i.F)(),E=f(g,u),{isReadOnlyRepo:v,repoType:p}=(0,c.T)({folderName:E?void 0:g?.uid,skipQuery:E});return E?null:(0,n.jsxs)(s.B,{direction:"row",alignItems:"stretch",children:[v&&(0,n.jsx)(l.E,{color:"darkgrey",text:(0,a.t)("folder-repo.read-only-badge","Read only"),tooltip:(0,o.Te)({isLocal:p==="local"})}),(0,n.jsx)(l.E,{title:(0,a.t)("folder-repo.provisioned-badge","Provisioned"),color:"purple",icon:"exchange-alt",tooltip:(0,a.t)("folder-repo.provisioned-badge","Provisioned")})]})}function f(g,u){const E=g&&!!("parentUID"in g&&g.parentUID),v=g&&g.managedBy!==r.Sf.Repo;return!g||E||v||u}},82298:(ne,A,e)=>{"use strict";e.d(A,{a:()=>E,b:()=>v});var n=e(74848),a=e(22803),s=e(92745),l=e(68079),r=e(63142),c=e(62905),i=e(24313),o=e(52763),h=e(40203),f=e(72973),g=e(58375),u=e(55066);const E=()=>{const m=(0,r.of)(p);return(0,n.jsx)(h.G,{className:m.loadingContainer,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.x6,{i18nKey:"dashboard.share-public-dashboard-loader.loading-configuration",children:"Loading configuration"}),(0,n.jsx)(l.y,{size:"lg",className:m.spinner})]})})},v=m=>{const{data:y,isLoading:d,isError:x}=(0,c.Bs)(m.dashboard.uid),D=(0,o.d4)(P=>P.dashboard).getModel(),{unsupportedDataSources:C}=(0,u.Z)(D);return(0,n.jsx)(n.Fragment,{children:d?(0,n.jsx)(E,{}):(0,i.lI)(y)?(0,n.jsx)(f.K,{publicDashboard:y,unsupportedDatasources:C}):(0,n.jsx)(g.M,{hasError:x})})},p=m=>({loadingContainer:(0,a.css)({height:"280px",alignItems:"center",justifyContent:"center",gap:m.spacing(1)}),spinner:(0,a.css)({marginBottom:m.spacing(0)})})},82345:(ne,A,e)=>{"use strict";e.d(A,{Fq:()=>x,Hf:()=>C,mQ:()=>B});var n=e(2543),a=e.n(n),s=e(63704),l=e(16515),r=e(92138),c=e(5556),i=e(38036),o=e(37615),h=e(79609),f=e(95004),g=e(92745),u=e(2863),E=e(739),v=e(65642);const p=[{value:`${i.c.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:h.$0.BuiltIn},{value:`${i.c.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:h.$0.BuiltIn},{value:`${i.c.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:h.$0.BuiltIn}],m=[{value:`${i.c.seriesName}`,label:"Name",documentation:"Name of the series",origin:h.$0.Series}],y=[{value:`${i.c.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:h.$0.Value},{value:`${i.c.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:h.$0.Value},{value:`${i.c.valueRaw}`,label:"Raw",documentation:"Raw value",origin:h.$0.Value}],d=K=>K.includes(".")||K.trim().includes(" ")?`["${K}"]`:`.${K}`,x=()=>[...(0,u.w)().getVariables().map(K=>({value:K.name,label:K.name,origin:h.$0.Template})),{value:`${i.c.includeVars}`,label:(0,g.t)("panel.get-panel-links-variable-suggestions.label.all-variables","All variables"),documentation:"Adds current variables",origin:h.$0.Template},...p],b=K=>{const U=[];for(const I of K)for(const V of I.fields)if(V.labels)for(const M of Object.keys(V.labels))U.push(M);const F=(0,n.chain)(U).flatten().uniq().value();return[{value:`${i.c.fieldName}`,label:(0,g.t)("panel.get-field-vars.label.name","Name"),documentation:"Field name of the clicked datapoint (in ms epoch)",origin:h.$0.Field},...F.map(I=>({value:`__field.labels${d(I)}`,label:`labels.${I}`,documentation:`${I} label value`,origin:h.$0.Field}))]},D=K=>{let U,F;const I=[],V={};if(K.length!==1)return[];const M=K[0];for(const L of M.fields){const N=(0,l.Ct)(L,M,K);V[N]||(I.push({value:`__data.fields${d(N)}`,label:`${N}`,documentation:`Formatted value for ${N} on the same row`,origin:h.$0.Fields}),V[N]=!0,!U&&L.type===f.PU.number&&(U={...L,name:N}),!F&&L.config.displayName&&L.config.displayName!==L.name&&(F={...L,name:N}))}return I.length&&I.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:h.$0.Fields}),U&&(I.push({value:`__data.fields${d(U.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:h.$0.Fields}),I.push({value:`__data.fields${d(U.name)}.text`,label:"Show text value",documentation:"the text value",origin:h.$0.Fields})),F&&I.push({value:`__data.fields${d(F.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:h.$0.Fields}),I},C=(K,U)=>{const F={value:`${i.c.valueTime}`,label:(0,g.t)("panel.get-data-links-variable-suggestions.value-time-var.label.time","Time"),documentation:"Time value of the clicked datapoint (in ms epoch)",origin:h.$0.Value};return U===h.uP.Values?[...m,...b(K),...y,F,...D(K),...x()]:[...m,...b(K),...D(K),...x()]},P=K=>{const U=b(K),F={value:`${DataLinkBuiltInVars.valueCalc}`,label:t("panel.get-calculation-value-data-links-variable-suggestions.value-calc-var.label.calculation-name","Calculation name"),documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...m,...U,...y,F,...x()]};class T{constructor(){this.getDataLinkUIModel=(U,F,I)=>{let V=U.url;U.onBuildUrl&&(V=U.onBuildUrl({origin:I,replaceVariables:F}));const M={href:r.I.assureBaseUrl(V.replace(/\n/g,"")),title:U.title??"",target:U.targetBlank!==void 0?U.targetBlank?"_blank":"_self":void 0,origin:I};return F&&(M.href=F(M.href,void 0,E.$m.UriEncode),M.title=F(U.title)),U.onClick&&(M.onClick=L=>{U.onClick({origin:I,replaceVariables:F,e:L})}),M.href=(0,v.zj)().disableSanitizeHtml?M.href:s.sQ.sanitizeUrl(M.href),M}}getLinkUrl(U){let F=U.url??"";return U.keepTime&&(F=c.kM.appendQueryToUrl(F,`$${i.c.keepTime}`)),U.includeVars&&(F=c.kM.appendQueryToUrl(F,`$${i.c.includeVars}`)),F=(0,u.w)().replace(F),F=r.I.assureBaseUrl(F),(0,v.zj)().disableSanitizeHtml?F:s.sQ.sanitizeUrl(F)}getAnchorInfo(U){const F=(0,u.w)();return{href:this.getLinkUrl(U),title:F.replace(U.title||""),tooltip:F.replace(U.tooltip||"")}}getPanelLinkAnchorInfo(U,F){(0,o.l)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const I=(V,M,L)=>(0,u.w)().replace(V,{...F,...M},L);return this.getDataLinkUIModel(U,I,{})}}let O;function S(K){O=K}function B(){return O||(O=new T),O}},82472:(ne,A,e)=>{"use strict";e.d(A,{a:()=>b});var n=e(74848),a=e(22803),s=e(96540),l=e(16817),r=e(70713),c=e(92745),i=e(63142),o=e(38919),h=e(43173),f=e(92391);const g=["timeseries","barchart","gauge","stat","piechart","bargauge","table","state-timeline","status-history","logs","candlestick","flamegraph","traces","nodeGraph"];async function u(P,T){const O=new o.v2(P,T);for(const B of g){const U=(await(0,f.TV)(B)).getSuggestionsSupplier();U&&U.getSuggestionsForData(O)}const S=O.getList();if(O.dataSummary.fieldCount===0)for(const B of Object.values(h.$.panels))!B.skipDataQuery||B.hideFromList||S.push({name:B.name,pluginId:B.id,description:B.info.description,cardOptions:{imgSrc:B.info.logos.small}});return S.sort((B,K)=>{if(O.dataSummary.preferredVisualisationType){if(B.pluginId===O.dataSummary.preferredVisualisationType)return-1;if(K.pluginId===O.dataSummary.preferredVisualisationType)return 1}return(K.score??o.nQ.OK)-(B.score??o.nQ.OK)})}var E=e(2543),v=e(51898),p=e(45967),m=e(35307);function y({data:P,suggestion:T,onChange:O,width:S}){const B=(0,i.of)(d),{innerStyles:K,outerStyles:U,renderWidth:F,renderHeight:I}=x(S),V=T.cardOptions??{},M={"aria-label":T.name,className:B.vizBox,"data-testid":v.Tp.components.VisualizationPreview.card(T.name),style:U,onClick:()=>{O({pluginId:T.pluginId,options:T.options,fieldConfig:T.fieldConfig})}};if(V.imgSrc)return(0,n.jsx)(p.m,{content:T.description??T.name,children:(0,n.jsxs)("button",{...M,className:(0,a.cx)(B.vizBox,B.imgBox),children:[(0,n.jsx)("div",{className:B.name,children:T.name}),(0,n.jsx)("img",{className:B.img,src:V.imgSrc,alt:T.name})]})});let L=T;return T.cardOptions?.previewModifier&&(L=(0,E.cloneDeep)(T),T.cardOptions.previewModifier(L)),(0,n.jsx)("button",{...M,children:(0,n.jsx)(p.m,{content:T.name,children:(0,n.jsxs)("div",{style:K,className:B.renderContainer,children:[(0,n.jsx)(m.m,{title:"",data:P,pluginId:T.pluginId,width:F,height:I,options:L.options,fieldConfig:L.fieldConfig}),(0,n.jsx)("div",{className:B.hoverPane})]})})})}const d=P=>({hoverPane:(0,a.css)({position:"absolute",top:0,right:0,left:0,borderRadius:P.spacing(2),bottom:0}),vizBox:(0,a.css)({position:"relative",background:"none",borderRadius:P.shape.radius.default,cursor:"pointer",border:`1px solid ${P.colors.border.medium}`,[P.transitions.handleMotion("no-preference","reduce")]:{transition:P.transitions.create(["background"],{duration:P.transitions.duration.short})},"&:hover":{background:P.colors.background.secondary}}),imgBox:(0,a.css)({display:"flex",flexDirection:"column",height:"100%",justifySelf:"center",color:P.colors.text.primary,width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center"}),name:(0,a.css)({paddingBottom:P.spacing(.5),marginTop:P.spacing(-1),fontSize:P.typography.bodySmall.fontSize,whiteSpace:"nowrap",overflow:"hidden",color:P.colors.text.secondary,fontWeight:P.typography.fontWeightMedium,textOverflow:"ellipsis"}),img:(0,a.css)({maxWidth:P.spacing(8),maxHeight:P.spacing(8)}),renderContainer:(0,a.css)({position:"absolute",transformOrigin:"left top",top:"6px",left:"6px"})});function x(P){const O=P,S=P*(1/1.6),B=350,K=B*(1/1.6),U=6,F=(O-U*2)/B,I=(S-U*2)/K;return{renderHeight:K,renderWidth:B,outerStyles:{width:O,height:S},innerStyles:{width:B,height:K,transform:`scale(${F}, ${I})`}}}function b({searchQuery:P,onChange:T,data:O,panel:S,trackSearch:B}){const K=(0,i.of)(C),{value:U}=(0,l.A)(()=>u(O,S),[O,S]),F=(0,s.useMemo)(()=>{const I=D(P,U);return B&&B(P,I.length),I},[P,U,B]);return(0,n.jsx)("div",{children:(0,n.jsx)(r.Ay,{disableHeight:!0,style:{width:"100%",height:"100%"},children:({width:I})=>{if(!I)return null;I=I-1;const V=Math.floor(I/200),M=8*(V-1),L=Math.floor((I-M)/V);return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:K.filterRow,children:(0,n.jsx)("div",{className:K.infoText,children:(0,n.jsx)(c.x6,{i18nKey:"panel.visualization-suggestions.based-on-current-data",children:"Based on current data"})})}),(0,n.jsxs)("div",{className:K.grid,style:{gridTemplateColumns:`repeat(auto-fill, ${L}px)`},children:[F.map((N,W)=>(0,n.jsx)(y,{data:O,suggestion:N,onChange:T,width:L-1},W)),P&&F.length===0&&(0,n.jsx)("div",{className:K.infoText,children:(0,n.jsx)(c.x6,{i18nKey:"panel.visualization-suggestions.no-results-matched-your-query",children:"No results matched your query"})})]})]})}})})}function D(P,T){if(!P||!T)return T||[];const O=new RegExp(P,"i");return T.filter(S=>O.test(S.name)||O.test(S.pluginId))}const C=P=>({heading:(0,a.css)({...P.typography.h5,margin:P.spacing(0,.5,1)}),filterRow:(0,a.css)({display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",paddingBottom:"8px"}),infoText:(0,a.css)({fontSize:P.typography.bodySmall.fontSize,color:P.colors.text.secondary,fontStyle:"italic"}),grid:(0,a.css)({display:"grid",gridGap:P.spacing(1),gridTemplateColumns:"repeat(auto-fill, 144px)",marginBottom:P.spacing(1),justifyContent:"space-evenly"})})},82612:(ne,A,e)=>{"use strict";e.d(A,{NB:()=>d,a9:()=>x,tw:()=>D});var n=e(2543),a=e.n(n),s=e(24726),l=e(39796),r=e(19379),c=e(69168),i=e(1906),o=e(2863),h=e(75234),f=e(65642),g=e(62635),u=e(87745),E=e(96215),v=e(56623);const p={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0,isNew:!0,refreshWhenInView:!0},m={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,isViewing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},y={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},links:[],transformations:[],fieldConfig:{defaults:{},overrides:[]},title:""},d={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap","natel-discrete-panel":"state-timeline"};class x{constructor(P){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.refreshWhenInView=!0,this.cachedPluginOptions={},this.events=new r.o,this.restoreModel(P),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,s.A)()}restoreModel(P){for(const O in this)p[O]||!this.hasOwnProperty(O)||P[O]||typeof this[O]!="function"&&typeof this[O]!="symbol"&&delete this[O];for(const O in P)this[O]=P[O];const T=(0,v.p)(this);T&&(this.autoMigrateFrom=this.type,this.type=T),(0,n.defaultsDeep)(this,(0,n.cloneDeep)(y)),this.ensureQueryIds()}generateNewKey(){this.key=(0,s.A)()}ensureQueryIds(){if(this.targets&&(0,n.isArray)(this.targets))for(const P of this.targets)P.refId||(P.refId=(0,l.M)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(P){this.options=P,this.configRev++,this.events.publish(new u.PR),this.render()}updateFieldConfig(P){this.fieldConfig=P,this.configRev++,this.events.publish(new u.PR),this.resendLastResult(),this.render()}getSaveModel(){const P={};for(const T in this)p[T]||!this.hasOwnProperty(T)||(0,n.isEqual)(this[T],y[T])||(P[T]=(0,n.cloneDeep)(this[T]));return this.type==="row"&&this.panels&&this.panels.length>0&&(P.panels=this.panels.map(T=>{if(T.libraryPanel){const{id:O,title:S,libraryPanel:B,gridPos:K}=T;return{id:O,title:S,gridPos:K,libraryPanel:{uid:B.uid,name:B.name}}}return T})),P}setIsViewing(P){this.isViewing=P}updateGridPos(P,T=!0){P.x===this.gridPos.x&&P.y===this.gridPos.y&&P.h===this.gridPos.h&&P.w===this.gridPos.w||(this.gridPos.x=P.x,this.gridPos.y=P.y,this.gridPos.w=P.w,this.gridPos.h=P.h,T&&this.configRev++,this.render())}runAllPanelQueries({dashboardUID:P,dashboardTimezone:T,timeData:O,width:S,dashboardTitle:B}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,panelName:this.title,panelPluginId:this.type,dashboardUID:P,dashboardTitle:B,timezone:T,timeRange:O.timeRange,timeInfo:O.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(S),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?i.Jk.PanelEditor:this.isViewing?i.Jk.PanelViewer:i.Jk.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new h._)}render(){this.hasRefreshed?this.events.publish(new u.XM):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((P,T)=>p[T]||m[T]?P:{...P,[T]:this[T]},{})}restorePanelOptions(P){const T=this.cachedPluginOptions[P];T&&(Object.keys(T.properties).map(O=>{this[O]=T.properties[O]}),this.fieldConfig=(0,c.H9)(this.fieldConfig,T.fieldConfig))}applyPluginOptionDefaults(P,T){const O=(0,c.F)({plugin:P,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:T});this.fieldConfig=O.fieldConfig,this.options=O.options}async pluginLoaded(P){this.plugin=P;const T=b(P);if(this.autoMigrateFrom){const O=d[this.autoMigrateFrom]!=null,S=this.getOptionsToRemember(),B=this.autoMigrateFrom,K=this.type;this.clearPropertiesBeforePluginChange(),this.type=K,this.plugin=P,this.callPanelTypeChangeHandler(P,B,S,O)}if(P.onPanelMigration&&(T!==this.pluginVersion||P.shouldMigrate?.(this))){const O=P.onPanelMigration(this);this.options=await O,this.pluginVersion=T}this.applyPluginOptionDefaults(P,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const P in this)m[P]||delete this[P];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,c.aW)(this.fieldConfig.overrides,c.nx)}}callPanelTypeChangeHandler(P,T,O,S){if(P.onPanelTypeChanged){const B=S?{angular:O}:O.options;Object.assign(this.options,P.onPanelTypeChanged(this,T,B,this.fieldConfig))}}changePlugin(P){const T=P.meta.id,O=this.getOptionsToRemember(),S=this.fieldConfig,B=this.type,K=this.isAngularPlugin()||!!d[B];this.cachedPluginOptions[B]={properties:O,fieldConfig:S},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(T),this.callPanelTypeChangeHandler(P,B,O,K),this.type=T,this.plugin=P,this.configRev++,this.applyPluginOptionDefaults(P,!0),P.onPanelMigration&&(this.pluginVersion=b(P))}updateQueries(P){const{dataSource:T}=P;this.datasource=T,this.cacheTimeout=P.cacheTimeout,this.queryCachingTTL=P.queryCachingTTL,this.timeFrom=P.timeRange?.from,this.timeShift=P.timeRange?.shift,this.hideTimeOverride=P.timeRange?.hide,this.interval=P.minInterval,this.maxDataPoints=P.maxDataPoints,this.targets=P.queries,this.configRev++,this.events.publish(new u.zq)}addQuery(P){P=P||{refId:"A"},P.refId=(0,l.M)(this.targets),this.targets.push(P),this.configRev++}changeQuery(P,T){P.refId=this.targets[T].refId,this.configRev++,this.targets=this.targets.map((O,S)=>S===T?P:O)}getEditClone(){const P=this.getSaveModel(),T=new x(P);T.isEditing=!0,T.plugin=this.plugin;const O=this.getQueryRunner();return T.getQueryRunner().useLastResultFrom(O),T}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:f.Ay.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new E.Z(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0||(this.plugin?.meta?.angular?.detected??!1)}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(P){this.transformations=P,this.resendLastResult(),this.configRev++,this.events.publish(new u.JI)}setProperty(P,T){this[P]=T,this.configRev++,P==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(P,T,O){const S=this.getQueryRunner().getLastRequest(),B=Object.assign({},this.scopedVars,S?.scopedVars,T);return(0,o.w)().replace(P,B,O)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(P){for(const[T,O]of Object.entries(P.model)){switch(T){case"id":case"gridPos":case"libraryPanel":continue}this[T]=O}this.libraryPanel=P}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function b(C){return C&&C.meta.info.version?C.meta.info.version:f.Ay.buildInfo.version}function D(C){const P={};return Object.entries(C).filter(([T,O])=>!p[T]&&C.hasOwnProperty(T)&&!(0,n.isEqual)(O,y[T])).forEach(([T,O])=>{P[T]=O}),(0,g.MA)(P)}},82754:(ne,A,e)=>{"use strict";e.d(A,{L:()=>s});var n=e(96540),a=e(93008);function s({direction:l,initialSize:r,dragPosition:c,collapseBelowPixels:i,collapsed:o,handleSize:h,usePixels:f,disabled:g}){const[u,E]=(0,n.useState)({collapsed:o??!1,snapSize:o?0:void 0}),v=(0,n.useCallback)((D,C,P)=>{D<=0&&C<=0&&P<=0||(u.collapsed&&P>i&&E({collapsed:!1}),!u.collapsed&&P<i&&E({collapsed:!0}))},[u,i]),p=(0,n.useCallback)((D,C,P)=>{if(D<=0&&C<=0&&P<=0)return;const T=u.snapSize===0;if(u.collapsed&&!T)E({snapSize:0,collapsed:u.collapsed});else if(u.collapsed&&T)if(f){const O=Math.max(P,r??200);E({snapSize:O,collapsed:!u.collapsed})}else{const O=Math.max(1-(r??.5),1-D);E({snapSize:O,collapsed:!u.collapsed})}},[u,r,f]),m=(0,n.useCallback)(()=>{E({collapsed:!u.collapsed})},[u.collapsed]),{containerProps:y,primaryProps:d,secondaryProps:x,splitterProps:b}=(0,a.h)({direction:l,dragPosition:c,handleSize:h,initialSize:r,usePixels:f,onResizing:v,onSizeChanged:p});return g?(y.className="",d.className="",d.style={},x.className="",x.style={},b.style.display="none",{containerProps:y,primaryProps:d,secondaryProps:x,splitterProps:b,splitterState:{collapsed:!1},onToggleCollapse:m}):(x.style.overflow="hidden",x.style.minWidth="unset",x.style.minHeight="unset",u.snapSize?f?x.style.flexBasis=`${u.snapSize}px`:(d.style={...d.style,flexGrow:1-u.snapSize},x.style.flexGrow=u.snapSize):u.snapSize===0&&(x.style.minWidth="min-content",x.style.minHeight="min-content",x.style.overflow="unset",f?x.style.flexBasis="0px":(d.style.flexGrow=1,x.style.flexGrow=0)),{containerProps:y,primaryProps:d,secondaryProps:x,splitterProps:b,splitterState:u,onToggleCollapse:m})}},82779:(ne,A,e)=>{"use strict";e.d(A,{D5:()=>h,H3:()=>i,OC:()=>o,P0:()=>c,hJ:()=>g,rV:()=>r,sk:()=>f});var n=e(46644),a=e(2954),s=e(44022),l=e(4651);const r=u=>{switch(u.type){case l.Tz.reduce:u.reducer||(u.reducer=n.gy.mean);break;case l.Tz.resample:u.downsampler||(u.downsampler=n.gy.mean),u.upsampler||(u.upsampler="fillna"),u.reducer=void 0;break;case l.Tz.math:u.expression=void 0;break;case l.Tz.classic:u.conditions||(u.conditions=[c]);break;default:u.reducer=void 0}return u},c={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:a.p.IsAbove}};function i(u){if((0,s.z)(u))return u}function o(u){if(!h(u))return!1;const E=u.settings?.mode;return E===l.Mt.Strict||E===void 0}function h(u){return u.type===l.Tz.reduce}function f(u){return u.type===l.Tz.threshold}function g(u){return u===a.p.IsWithinRange||u===a.p.IsOutsideRange||u===a.p.IsOutsideRangeIncluded||u===a.p.IsWithinRangeIncluded}},82781:(ne,A,e)=>{"use strict";e.d(A,{QM:()=>o,R0:()=>c,fo:()=>h});var n=e(92745),a=e(20074),s=e(55849),l=e(68198);const r=()=>[{type:"git",label:(0,n.t)("provisioning.repository-types.pure-git","Pure Git"),description:(0,n.t)("provisioning.repository-types.pure-git-description","Connect to any Git repository"),icon:"git",logo:s},{type:"github",label:(0,n.t)("provisioning.repository-types.github","GitHub"),description:(0,n.t)("provisioning.repository-types.github-description","Connect to GitHub repositories"),icon:"github"},{type:"gitlab",label:(0,n.t)("provisioning.repository-types.gitlab","GitLab"),description:(0,n.t)("provisioning.repository-types.gitlab-description","Connect to GitLab repositories"),icon:"gitlab",logo:l},{type:"bitbucket",label:(0,n.t)("provisioning.repository-types.bitbucket","Bitbucket"),description:(0,n.t)("provisioning.repository-types.bitbucket-description","Connect to Bitbucket repositories"),icon:"bitbucket",logo:a},{type:"local",label:(0,n.t)("provisioning.repository-types.local","Local"),description:(0,n.t)("provisioning.repository-types.local-description","Configure file provisioning"),icon:"file-alt"}],c=f=>r().find(g=>g.type===f),i=["github","gitlab","bitbucket","git"],o=f=>i.includes(f),h=f=>{const g=r().filter(v=>f.includes(v.type)),u=g.filter(v=>o(v.type)&&v.type!=="git"),E=g.filter(v=>!o(v.type)||v.type==="git");return{gitProviders:u,otherProviders:E,orderedConfigs:[...u,...E]}}},83058:(ne,A,e)=>{"use strict";e.d(A,{O:()=>D,Y:()=>P});var n=e(74848),a=e(22803),s=e(21835),l=e(61574),r=e(63704),c=e(92138),i=e(92745),o=e(45863),h=e(30703),f=e(45967),g=e(60208),u=e(13941),E=e(31286),v=e(56887),p=e(36324),m=e(63142),y=e(86292),d=e(3371),x=e(8285),b=e(96691);function D({model:O}){const{title:S,key:B,isDropTarget:K,layout:U}=O.useState(),F=O.getParentLayout(),{currentTabSlug:I}=F.useState(),V=o.jh.interpolate(O,S,void 0,"text"),{isSelected:M,onSelect:L,isSelectable:N}=(0,v.y)(B),{isEditing:W}=(0,x.TN)(O),R=O.getSlug(),G=F.getUrlKey(),w=R===I,_=F.state.tabs.findIndex(se=>se===O),Q=(0,l.zy)(),ae=r.sQ.sanitize(c.I.getUrlForPartial(Q,{[G]:R})),q=(0,m.of)(T),k=(0,p.C)(),[ee]=(0,y.H)(O),j=(0,d.bn)(O),J=(0,b.MK)(),Z=!j&&W;if(ee&&!W&&!w)return null;if(J)return(0,n.jsx)(U.Component,{model:U});let te={};return O.hasUniqueTitle()||(te={icon:"exclamation-triangle",tooltip:(0,i.t)("dashboard.tabs-layout.tab-warning.title-not-unique","This title is not unique")}),(0,n.jsx)(s.sx,{draggableId:B,index:_,isDragDisabled:!Z,children:(se,ie)=>(0,n.jsx)("div",{ref:ce=>se.innerRef(ce),className:(0,a.cx)(ie.isDragging&&q.dragging),...se.draggableProps,...se.dragHandleProps,children:(0,n.jsx)(g.o,{ref:O.containerRef,truncate:!0,className:(0,a.cx)(ee&&q.hidden,M&&"dashboard-selected-element",N&&!M&&"dashboard-selectable-element",K&&"dashboard-drop-target"),active:w,title:V,suffix:ee?C:void 0,href:ae,"aria-selected":w,onPointerDown:ce=>{ce.stopPropagation(),k.set(ce)},onPointerUp:ce=>{ce.stopPropagation(),!(!N||k.check(ce))&&L?.(ce)},label:V,"data-dashboard-drop-target-key":O.state.key,...te})})},B)}function C(){return(0,n.jsx)(E.a,{paddingLeft:1,display:"inline",children:(0,n.jsx)(f.m,{content:(0,i.t)("dashboard.conditional-rendering.overlay.tooltip","Element is hidden due to conditional rendering."),children:(0,n.jsx)(h.I,{name:"eye-slash"})})})}function P({tab:O,isEditing:S}){const{layout:B}=O.useState(),K=(0,m.of)(T),[U,F,I]=(0,y.H)(O);return(0,n.jsxs)(u.J,{className:(0,a.cx)(K.tabContentContainer,S&&F),children:[(0,n.jsx)(B.Component,{model:B}),S&&I]})}const T=O=>({dragging:(0,a.css)({cursor:"move"}),hidden:(0,a.css)({opacity:.4,"&:hover":(0,a.css)({opacity:1})}),tabContentContainer:(0,a.css)({backgroundColor:"transparent",position:"relative",display:"flex",flexDirection:"column",flex:1,minHeight:O.spacing(1+.125),paddingTop:O.spacing(1)})})},83127:(ne,A,e)=>{"use strict";e.d(A,{B:()=>s});var n=e(33749),a=e(27489);function s(l){const r={dashboardId:l.id,dashboardName:l.title,dashboardUid:l.uid,folderName:l.meta.folderTitle,eventName:n.n_.DashboardView};(0,a.G$)(r)}},83162:(ne,A,e)=>{"use strict";e.d(A,{H:()=>de,u:()=>ve});var n=e(74848),a=e(53543),s=e(38809),l=e(95004),r=e(33553),c=e(92745),i=e(21285),o=e(77824),h=e(59310),f=e(48457),g=e(96540),u=e(22803),E=e(2543),v=e(36394),p=e(35555),m=e(8255),y=e(63527),d=e(35427),x=e(76319),b=e(45861),D=e(72636),C=e(65240);class P extends g.PureComponent{constructor(xe){super(xe),this.onAddThreshold=()=>{const{steps:Pe}=this.state;let Oe=0;Pe.length>1&&(Oe=Pe[Pe.length-1].value+10);let We=m.Tj.filter(Le=>!Pe.some(Ge=>Ge.color===Le))[1];We||(We="#CCCCCC");const Fe={value:Oe,color:We,key:T++},Be=[...Pe,Fe];(0,v.RU)(Be),this.setState({steps:Be},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=Pe=>{const{steps:Oe}=this.state;Oe.length&&Pe.key!==Oe[0].key&&this.setState({steps:Oe.filter(We=>We.key!==Pe.key)},this.onChange)},this.onChangeThresholdValue=(Pe,Oe)=>{const We=Pe.target.value.replace(/,/g,"."),Fe=parseFloat(We),Be=isNaN(Fe)?"":Fe,Le=this.state.steps.map(Ge=>(Ge.key===Oe.key&&(Ge={...Ge,value:Be}),Ge));Le.length&&(Le[0].value=-1/0),(0,v.RU)(Le),this.setState({steps:Le})},this.onChangeThresholdColor=(Pe,Oe)=>{const{steps:We}=this.state,Fe=We.map(Be=>(Be.key===Pe.key&&(Be={...Be,color:Oe}),Be));this.setState({steps:Fe},this.onChange)},this.onBlur=()=>{const Pe=[...this.state.steps];(0,v.RU)(Pe),this.setState({steps:Pe},this.onChange)},this.onChange=()=>{this.props.onChange(S(this.props.thresholds,this.state.steps))},this.onModeChanged=Pe=>{this.props.onChange({...this.props.thresholds,mode:Pe})};const Ee=O(xe.thresholds.steps);Ee[0].value=-1/0,this.state={steps:Ee},this.latestThresholdInputRef=g.createRef()}renderInput(xe,Ee,Pe){const Oe=this.props.thresholds.mode===r.O.Percentage,We=Pe+1,Fe=(0,c.t)("dimensions.thresholds-editor.aria-label-threshold","Threshold {{thresholdNumber}}",{thresholdNumber:We});return isFinite(xe.value)?(0,n.jsx)(y.p,{type:"number",step:"0.0001",onChange:Be=>this.onChangeThresholdValue(Be,xe),value:xe.value,"aria-label":Fe,ref:Pe===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:(0,n.jsxs)("div",{className:Ee.inputPrefix,children:[(0,n.jsx)("div",{className:Ee.colorPicker,children:(0,n.jsx)(d.sk,{color:xe.color,onChange:Be=>this.onChangeThresholdColor(xe,Be),enableNamedColors:!0})}),Oe&&(0,n.jsx)("div",{className:Ee.percentIcon,children:"%"})]}),suffix:(0,n.jsx)(x.K,{className:Ee.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(xe),tooltip:(0,c.t)("dimensions.threshold-editor.tooltip-remove-threshold","Remove threshold {{thresholdNumber}}",{thresholdNumber:We})})},Oe.toString()):(0,n.jsx)(y.p,{type:"text",value:(0,c.t)("dimensions.thresholds-editor.value-base","Base"),"aria-label":Fe,disabled:!0,prefix:(0,n.jsx)("div",{className:Ee.colorPicker,children:(0,n.jsx)(d.sk,{color:xe.color,onChange:Be=>this.onChangeThresholdColor(xe,Be),enableNamedColors:!0})})})}render(){const{thresholds:xe}=this.props,{steps:Ee}=this.state,Pe=[{value:r.O.Absolute,label:(0,c.t)("dimensions.thresholds-editor.modes.label.absolute","Absolute"),description:(0,c.t)("dimensions.thresholds-editor.modes.description.thresholds-based-absolute-values","Pick thresholds based on the absolute values")},{value:r.O.Percentage,label:(0,c.t)("dimensions.thresholds-editor.modes.label.percentage","Percentage"),description:(0,c.t)("dimensions.thresholds-editor.modes.description.threshold-based-percent-between-minmax","Pick threshold based on the percent between min/max")}];return(0,n.jsx)(p.D.Consumer,{children:Oe=>{const We=B(Oe);return(0,n.jsxs)("div",{className:We.wrapper,children:[(0,n.jsx)(b.$n,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:We.addButton,fullWidth:!0,children:(0,n.jsx)(c.x6,{i18nKey:"dimensions.thresholds-editor.add-threshold",children:"Add threshold"})}),(0,n.jsx)("div",{className:We.thresholds,children:Ee.slice(0).reverse().map((Fe,Be)=>(0,n.jsx)("div",{className:We.item,children:this.renderInput(Fe,We,Be)},`${Fe.key}`))}),(0,n.jsxs)("div",{children:[(0,n.jsx)(D.J,{description:(0,c.t)("dimensions.thresholds-editor.description-percentage-means-thresholds-relative","Percentage means thresholds relative to min & max"),children:(0,n.jsx)(c.x6,{i18nKey:"dimensions.thresholds-editor.thresholds-mode",children:"Thresholds mode"})}),(0,n.jsx)(o.z,{options:Pe,onChange:this.onModeChanged,value:xe.mode})]})]})}})}}let T=100;function O(me){return(!me||me.length===0)&&(me=[{value:-1/0,color:"green"}]),me.filter((xe,Ee)=>(0,E.isNumber)(xe.value)||Ee===0).map(xe=>({color:xe.color,value:xe.value===null?-1/0:xe.value,key:T++}))}function S(me,xe){return{mode:me.mode??r.O.Absolute,steps:xe.map(Pe=>{const{key:Oe,...We}=Pe;return We})}}const B=(0,C.N)(me=>({wrapper:(0,u.css)({display:"flex",flexDirection:"column"}),thresholds:(0,u.css)({display:"flex",flexDirection:"column",marginBottom:me.spacing(2)}),item:(0,u.css)({marginBottom:me.spacing(1),"&:last-child":{marginBottom:0}}),colorPicker:(0,u.css)({padding:me.spacing(0,1)}),addButton:(0,u.css)({marginBottom:me.spacing(1)}),percentIcon:(0,u.css)({fontSize:me.typography.bodySmall.fontSize,color:me.colors.text.secondary}),inputPrefix:(0,u.css)({display:"flex",alignItems:"center"}),trashIcon:(0,u.css)({color:me.colors.text.secondary,cursor:"pointer",marginRight:0,"&:hover":{color:me.colors.text.primary}})}));class K extends g.PureComponent{constructor(xe){super(xe)}render(){const{onChange:xe}=this.props;let Ee=this.props.value;return Ee||(Ee={mode:r.O.Percentage,steps:[]}),(0,n.jsx)(P,{thresholds:Ee,onChange:xe})}}var U=e(18600),F=e(63142),I=e(41654),V=e(30703),M=e(22787),L=e(4896),N=e(71451),W=e(21835),R=e(59695),G=e(18857);function w({mapping:me,index:xe,onChange:Ee,onRemove:Pe,onDuplicate:Oe,showIconPicker:We}){const{key:Fe,result:Be,id:Le}=me,Ge=(0,F.of)(_),Ze=(0,g.useRef)(null),qe=(0,g.useCallback)(xn=>{const pn={...me,result:{...me.result}};xn(pn),Ee(xe,pn)},[me,xe,Ee]);(0,g.useEffect)(()=>{Ze.current&&me.isNew&&(Ze.current.focus(),qe(xn=>{xn.isNew=!1}))},[me,Ze,qe]);const at=xn=>{qe(pn=>{pn.result.color=xn})},ht=()=>{qe(xn=>{xn.result.color=void 0})},Et=xn=>{qe(pn=>{pn.result.icon=xn})},mt=()=>{qe(xn=>{xn.result.icon=void 0})},Pt=xn=>{qe(pn=>{pn.key=xn.currentTarget.value})},rt=xn=>{qe(pn=>{pn.result.text=xn.currentTarget.value})},Kt=xn=>{qe(pn=>{pn.from=parseFloat(xn.currentTarget.value)})},Gt=xn=>{qe(pn=>{pn.to=parseFloat(xn.currentTarget.value)})},en=xn=>{qe(pn=>{pn.pattern=xn.currentTarget.value})},st=xn=>{qe(pn=>{pn.specialMatch=xn.value})},$t=[{label:"Null",value:U.W.Null,description:(0,c.t)("dimensions.value-mapping-edit-row.special-match-options.description.matches-null-and-undefined-values","Matches null and undefined values")},{label:"NaN",value:U.W.NaN,description:(0,c.t)("dimensions.value-mapping-edit-row.special-match-options.description.matches-against-number-na-n-not-a-number","Matches against Number.NaN (not a number)")},{label:"Null + NaN",value:U.W.NullAndNaN,description:(0,c.t)("dimensions.value-mapping-edit-row.special-match-options.description.matches-null-undefined-and-na-n","Matches null, undefined and NaN")},{label:"True",value:U.W.True,description:(0,c.t)("dimensions.value-mapping-edit-row.special-match-options.description.boolean-true-values","Boolean true values")},{label:"False",value:U.W.False,description:(0,c.t)("dimensions.value-mapping-edit-row.special-match-options.description.boolean-false-values","Boolean false values")},{label:(0,c.t)("dimensions.value-mapping-edit-row.special-match-options.label.empty","Empty"),value:U.W.Empty,description:(0,c.t)("dimensions.value-mapping-edit-row.special-match-options.description.empty-string","Empty string")}];return(0,n.jsx)(W.sx,{draggableId:Le,index:xe,children:xn=>(0,n.jsxs)("tr",{className:Ge.dragRow,ref:xn.innerRef,...xn.draggableProps,children:[(0,n.jsx)("td",{children:(0,n.jsx)("div",{className:Ge.dragHandle,...xn.dragHandleProps,children:(0,n.jsx)(V.I,{name:"draggabledots",size:"lg"})})}),(0,n.jsx)("td",{className:Ge.typeColumn,children:me.type}),(0,n.jsxs)("td",{children:[me.type===U.d.ValueToText&&(0,n.jsx)(y.p,{ref:Ze,type:"text",value:Fe??"",onChange:Pt,placeholder:(0,c.t)("dimensions.value-mapping-edit-row.placeholder-exact-value-to-match","Exact value to match")}),me.type===U.d.RangeToText&&(0,n.jsxs)("div",{className:Ge.rangeInputWrapper,children:[(0,n.jsx)(y.p,{type:"number",value:me.from??"",placeholder:(0,c.t)("dimensions.value-mapping-edit-row.placeholder-from","From"),onChange:Kt}),(0,n.jsx)(y.p,{type:"number",value:me.to??"",placeholder:(0,c.t)("dimensions.value-mapping-edit-row.placeholder-to","To"),onChange:Gt})]}),me.type===U.d.RegexToText&&(0,n.jsx)(y.p,{type:"text",value:me.pattern??"",placeholder:(0,c.t)("dimensions.value-mapping-edit-row.placeholder-regular-expression","Regular expression"),onChange:en}),me.type===U.d.SpecialValue&&(0,n.jsx)(G.l6,{value:$t.find(pn=>pn.value===me.specialMatch),options:$t,onChange:st})]}),(0,n.jsx)("td",{children:(0,n.jsx)(y.p,{type:"text",value:Be.text??"",onChange:rt,placeholder:(0,c.t)("dimensions.value-mapping-edit-row.placeholder-optional-display-text","Optional display text")})}),(0,n.jsxs)("td",{className:Ge.textAlignCenter,children:[Be.color&&(0,n.jsxs)(I.B,{gap:1,justifyContent:"center",children:[(0,n.jsx)(d.sk,{color:Be.color,onChange:at,enableNamedColors:!0}),(0,n.jsx)(x.K,{name:"times",onClick:ht,tooltip:(0,c.t)("dimensions.value-mapping-edit-row.tooltip-remove-color","Remove color"),tooltipPlacement:"top"})]}),!Be.color&&(0,n.jsx)(d.sk,{color:"gray",onChange:at,enableNamedColors:!0,children:pn=>(0,n.jsx)(b.$n,{variant:"primary",fill:"text",onClick:pn.showColorPicker,ref:pn.ref,size:"sm",children:(0,n.jsx)(c.x6,{i18nKey:"dimensions.value-mapping-edit-row.set-color",children:"Set color"})})})]}),We&&(0,n.jsx)("td",{className:Ge.textAlignCenter,children:(0,n.jsxs)(I.B,{gap:1,justifyContent:"center",children:[(0,n.jsx)(N.n,{onChange:Et,onClear:mt,value:Be.icon,size:L.Iy.SMALL,folderName:L.Iu.Icon,mediaType:L.zu.Icon,color:Be.color}),Be.icon&&(0,n.jsx)(x.K,{name:"times",onClick:mt,tooltip:(0,c.t)("dimensions.value-mapping-edit-row.tooltip-remove-icon","Remove icon"),tooltipPlacement:"top"})]})}),(0,n.jsx)("td",{className:Ge.textAlignCenter,children:(0,n.jsxs)(I.B,{gap:1,children:[(0,n.jsx)(x.K,{name:"copy",onClick:()=>Oe(xe),"data-testid":"duplicate-value-mapping","aria-label":(0,c.t)("dimensions.value-mapping-edit-row.duplicate-value-mapping-aria-label-duplicate-value-mapping","Duplicate value mapping"),tooltip:(0,c.t)("dimensions.value-mapping-edit-row.duplicate-value-mapping-tooltip-duplicate","Duplicate")}),(0,n.jsx)(x.K,{name:"trash-alt",onClick:()=>Pe(xe),"data-testid":"remove-value-mapping","aria-label":(0,c.t)("dimensions.value-mapping-edit-row.remove-value-mapping-aria-label-delete-value-mapping","Delete value mapping"),tooltip:(0,c.t)("dimensions.value-mapping-edit-row.remove-value-mapping-tooltip-delete","Delete")})]})})]})},Le)}const _=me=>({dragRow:(0,u.css)({position:"relative"}),dragHandle:(0,u.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${me.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,u.css)({display:"flex","> div:first-child":{marginRight:me.spacing(2)}}),regexInputWrapper:(0,u.css)({display:"flex","> div:first-child":{marginRight:me.spacing(2)}}),typeColumn:(0,u.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,u.css)({textAlign:"center"})});function Q({value:me,onChange:xe,onClose:Ee,showIconPicker:Pe}){const Oe=(0,F.of)(ae),[We,Fe]=(0,g.useState)([]);(0,g.useEffect)(()=>{Fe(J(me))},[me]);const Be=Et=>{if(!me||!Et.destination)return;const mt=[...We],Pt=mt[Et.source.index];mt.splice(Et.source.index,1),mt.splice(Et.destination.index,0,Pt),Fe(mt)},Le=(Et,mt)=>{const Pt=[...We];Pt.splice(Et,1,mt),Fe(Pt)},Ge=Et=>{const mt=[...We];mt.splice(Et,1),Fe(mt)},Ze=[{label:(0,c.t)("dimensions.value-mappings-editor-modal.mapping-types.label.value","Value"),value:U.d.ValueToText,description:(0,c.t)("dimensions.value-mappings-editor-modal.mapping-types.description.match-a-specific-text-value","Match a specific text value")},{label:(0,c.t)("dimensions.value-mappings-editor-modal.mapping-types.label.range","Range"),value:U.d.RangeToText,description:(0,c.t)("dimensions.value-mappings-editor-modal.mapping-types.description.match-a-numerical-range-of-values","Match a numerical range of values")},{label:(0,c.t)("dimensions.value-mappings-editor-modal.mapping-types.label.regex","Regex"),value:U.d.RegexToText,description:(0,c.t)("dimensions.value-mappings-editor-modal.mapping-types.description.match-a-regular-expression-with-replacement","Match a regular expression with replacement")},{label:(0,c.t)("dimensions.value-mappings-editor-modal.mapping-types.label.special","Special"),value:U.d.SpecialValue,description:(0,c.t)("dimensions.value-mappings-editor-modal.mapping-types.description.match-boolean-empty-values","Match on null, NaN, boolean and empty values")}],qe=Et=>{Fe([...We,k({type:Et.value,result:{},isNew:!0})])},at=Et=>{const mt=ee(We[Et]),Pt=[...We];Pt.splice(Et,0,{...mt});for(let rt=Et;rt<We.length;rt++)Pt[rt].result.index=rt;Fe(Pt)},ht=()=>{xe(j(We)),Ee()};return(0,g.useEffect)(()=>{me?.length||qe({value:U.d.ValueToText})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:Oe.tableWrap,children:(0,n.jsxs)("table",{className:Oe.editTable,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{width:"1%"}}),(0,n.jsx)("th",{style:{width:"40%",textAlign:"left"},colSpan:2,children:(0,n.jsx)(c.x6,{i18nKey:"dimensions.value-mappings-editor-modal.condition",children:"Condition"})}),(0,n.jsx)("th",{style:{textAlign:"left"},children:(0,n.jsx)(c.x6,{i18nKey:"dimensions.value-mappings-editor-modal.display-text",children:"Display text"})}),(0,n.jsx)("th",{style:{width:"10%"},children:(0,n.jsx)(c.x6,{i18nKey:"dimensions.value-mappings-editor-modal.color",children:"Color"})}),Pe&&(0,n.jsx)("th",{style:{width:"10%"},children:(0,n.jsx)(c.x6,{i18nKey:"dimensions.value-mappings-editor-modal.icon",children:"Icon"})}),(0,n.jsx)("th",{style:{width:"1%"}})]})}),(0,n.jsx)(W.JY,{onDragEnd:Be,children:(0,n.jsx)(W.gL,{droppableId:"sortable-field-mappings",direction:"vertical",children:Et=>(0,n.jsxs)("tbody",{ref:Et.innerRef,...Et.droppableProps,children:[We.map((mt,Pt)=>(0,n.jsx)(w,{mapping:mt,index:Pt,onChange:Le,onRemove:Ge,onDuplicate:at,showIconPicker:Pe},mt.id)),Et.placeholder]})})})]})}),(0,n.jsxs)(M.a.ButtonRow,{leftItems:(0,n.jsx)(R.i,{label:(0,c.t)("dimensions.value-mappings-editor-modal.label-add-a-new-mapping","Add a new mapping"),variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:Ze,onChange:qe}),children:[(0,n.jsx)(b.$n,{variant:"secondary",fill:"outline",onClick:Ee,children:(0,n.jsx)(c.x6,{i18nKey:"dimensions.value-mappings-editor-modal.cancel",children:"Cancel"})}),(0,n.jsx)(b.$n,{variant:"primary",onClick:ht,children:(0,n.jsx)(c.x6,{i18nKey:"dimensions.value-mappings-editor-modal.update",children:"Update"})})]})]})}const ae=me=>({tableWrap:(0,u.css)({maxHeight:"calc(80vh - 170px)",overflow:"auto",minHeight:"40px"}),editTable:(0,u.css)({width:"100%",marginBottom:me.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:me.colors.action.hover}," th, td":{padding:me.spacing(1)}})});function q(){return(0,E.uniqueId)("mapping-")}function k(me){return{type:U.d.ValueToText,result:{},id:q(),...me}}function ee(me){return{...k(me),id:q()}}function j(me){const xe=[],Ee={type:U.d.ValueToText,options:{}};return me.forEach((Pe,Oe)=>{const We={...Pe.result,index:Oe};switch((!We.text||We.text.trim().length===0)&&(We.text=void 0),Pe.type){case U.d.ValueToText:Pe.key!=null&&(Ee.options[Pe.key]=We);break;case U.d.RangeToText:(Pe.from!=null||Pe.to!=null)&&xe.push({type:Pe.type,options:{from:Pe.from??null,to:Pe.to??null,result:We}});break;case U.d.RegexToText:Pe.pattern!=null&&xe.push({type:Pe.type,options:{pattern:Pe.pattern,result:We}});break;case U.d.SpecialValue:xe.push({type:Pe.type,options:{match:Pe.specialMatch,result:We}})}}),Object.keys(Ee.options).length>0&&xe.unshift(Ee),xe}function J(me){const xe=[];if(me)for(const Ee of me)switch(Ee.type){case U.d.ValueToText:for(const Pe in Ee.options)xe.push(k({type:Ee.type,result:Ee.options[Pe],key:Pe}));break;case U.d.RangeToText:xe.push(k({type:Ee.type,result:Ee.options.result,from:Ee.options.from,to:Ee.options.to}));break;case U.d.RegexToText:xe.push(k({type:Ee.type,result:Ee.options.result,pattern:Ee.options.pattern}));break;case U.d.SpecialValue:xe.push(k({type:Ee.type,result:Ee.options.result,specialMatch:Ee.options.match??U.W.Null}))}return xe.sort((Ee,Pe)=>(Ee.result.index??0)>(Pe.result.index??0)?1:-1),xe}const Z=(0,g.memo)(me=>{const{value:xe,onChange:Ee,item:Pe}=me,Oe=(0,F.of)(te),We=Pe.settings?.icon,[Fe,Be]=(0,g.useState)(!1),Le=(0,g.useCallback)(()=>{Be(!1)},[Be]),Ge=(0,g.useMemo)(()=>J(xe),[xe]),Ze=(0,g.useCallback)((at,ht)=>{Ge[ht].result.color=at,Ee(j(Ge))},[Ge,Ee]),qe=(0,g.useCallback)((at,ht)=>{Ge[ht].result.icon=at,Ee(j(Ge))},[Ge,Ee]);return(0,n.jsxs)(I.B,{direction:"column",children:[(0,n.jsx)("table",{className:Oe.compactTable,children:(0,n.jsx)("tbody",{children:Ge.map((at,ht)=>(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{children:[at.type===U.d.ValueToText&&at.key,at.type===U.d.RangeToText&&(0,n.jsxs)("span",{children:["[",at.from??"-\u221E"," - ",at.to??"\u221E","]"]}),at.type===U.d.RegexToText&&at.pattern,at.type===U.d.SpecialValue&&at.specialMatch]}),(0,n.jsx)("td",{children:(0,n.jsx)(V.I,{name:"arrow-right"})}),(0,n.jsx)("td",{children:at.result.text}),at.result.color&&(0,n.jsx)("td",{children:(0,n.jsx)(d.sk,{color:at.result.color,onChange:Et=>Ze(Et,ht),enableNamedColors:!0})}),We&&at.result.icon&&(0,n.jsx)("td",{"data-testid":"iconPicker",children:(0,n.jsx)(N.n,{onChange:Et=>qe(Et,ht),value:at.result.icon,size:L.Iy.SMALL,folderName:L.Iu.Icon,mediaType:L.zu.Icon,color:at.result.color})})]},ht.toString()))})}),(0,n.jsxs)(b.$n,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>Be(!0),children:[Ge.length>0&&(0,n.jsx)("span",{children:(0,n.jsx)(c.x6,{i18nKey:"dimensions.value-mappings-editor.edit-value-mappings",children:"Edit value mappings"})}),Ge.length===0&&(0,n.jsx)("span",{children:(0,n.jsx)(c.x6,{i18nKey:"dimensions.value-mappings-editor.add-value-mappings",children:"Add value mappings"})})]}),(0,n.jsx)(M.a,{isOpen:Fe,title:(0,c.t)("dimensions.value-mappings-editor.title-value-mappings","Value mappings"),onDismiss:Le,className:Oe.modal,closeOnBackdropClick:!1,children:(0,n.jsx)(Q,{value:xe,onChange:Ee,onClose:Le,showIconPicker:We})})]})});Z.displayName="ValueMappingsEditor";const te=me=>({modal:(0,u.css)({width:"980px"}),compactTable:(0,u.css)({width:"100%","tbody td":{padding:me.spacing(.5)}})});var se=e(95506);const ie=({value:me,onChange:xe,item:Ee})=>{const{placeholder:Pe,isClearable:Oe}=Ee?.settings??{},We=(0,g.useCallback)(Fe=>{xe(Fe?.value?.uid)},[xe]);return(0,n.jsx)(se.b,{isClearable:Oe,defaultOptions:!0,onChange:We,placeholder:Pe,value:me})};var ce=e(79609),re=e(23207);const ue=({value:me,onChange:xe,context:Ee})=>(0,n.jsx)(re.G,{actions:me,onChange:xe,data:Ee.data,getSuggestions:()=>Ee.getSuggestions?Ee.getSuggestions(ce.uP.Values):[]});var X=e(38669),le=e(76637),he=e(64394),fe=e(37386);const Ce=({value:me,onChange:xe,item:Ee,id:Pe})=>{const Oe=(0,F.$j)(),We=(0,F.of)(_e),Fe=(0,le.Hs)(me?.mode),Le=(Ee.settings?.byValueSupport?le.uf.list():le.uf.list().filter(ht=>!ht.isByValue)).filter(ht=>!ht.excludeFromPicker).map(ht=>{let Et=ht.isByValue?" (by value)":"";return{value:ht.id,label:`${ht.name}${Et}`,description:ht.description,isContinuous:ht.isContinuous,isByValue:ht.isByValue,component(){return(0,n.jsx)(Ae,{mode:ht,theme:Oe})}}}),Ge=ht=>{xe({...me,mode:ht.value})},Ze=ht=>{xe({...me,mode:at,fixedColor:ht})},qe=ht=>{xe({...me,mode:at,seriesBy:ht})},at=me?.mode??he.Y.Thresholds;if(at===he.Y.Fixed||at===he.Y.Shades)return(0,n.jsxs)("div",{className:We.group,children:[(0,n.jsx)(G.l6,{minMenuHeight:200,options:Le,value:at,onChange:Ge,className:We.select,inputId:Pe}),(0,n.jsx)(X.a,{value:me?.fixedColor,onChange:Ze})]});if(Ee.settings?.bySeriesSupport&&Fe.isByValue){const ht=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{marginBottom:Oe.spacing(2)},children:(0,n.jsx)(G.l6,{minMenuHeight:200,options:Le,value:at,onChange:Ge,inputId:Pe})}),(0,n.jsx)(fe.D,{label:(0,c.t)("options-ui.field-color.color-by-label","Color series by"),children:(0,n.jsx)(o.z,{value:me?.seriesBy??"last",options:ht,onChange:qe})})]})}return(0,n.jsx)(G.l6,{minMenuHeight:200,options:Le,value:at,onChange:Ge,inputId:Pe})},Ae=({mode:me,theme:xe})=>{if(!me.getColors)return null;const Ee=me.getColors(xe).map(xe.visualization.getColorByName),Pe={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(me.isContinuous)Pe.background=`linear-gradient(90deg, ${Ee.join(",")})`;else{let Oe="",We="";for(let Fe=0;Fe<Ee.length;Fe++){const Be=Ee[Fe];if(Oe==="")Oe=`linear-gradient(90deg, ${Be} 0%`;else{const Ge=Fe/Ee.length*100;Oe+=`, ${We} ${Ge}%, ${Be} ${Ge}%`}We=Be}Pe.background=Oe}return(0,n.jsx)("div",{style:Pe})},_e=me=>({group:(0,u.css)({display:"flex"}),select:(0,u.css)({marginRight:me.spacing(1),flexGrow:1})});var Xe=e(96822);const De=({value:me,onChange:xe,context:Ee,item:Pe})=>(0,n.jsx)(Xe.e,{links:me,onChange:xe,data:Ee.data,getSuggestions:()=>Ee.getSuggestions?Ee.getSuggestions(ce.uP.Values):[],showOneClick:Pe.settings?.showOneClick});class Me extends g.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:xe}=this.props,{settings:Ee}=xe;let Pe=xe.settings?.options||[];Ee?.getOptions&&(Pe=await Ee.getOptions(this.props.context)),this.state.options!==Pe&&this.setState({isLoading:!1,options:Pe})}}componentDidMount(){this.updateOptions()}componentDidUpdate(xe){const Ee=xe.item?.settings,Pe=this.props.item?.settings;if(Ee!==Pe)this.updateOptions();else if(Pe?.getOptions){const Oe=xe.context?.data,We=this.props.context?.data;Oe!==We&&this.updateOptions()}}render(){const{options:xe,isLoading:Ee}=this.state,{value:Pe,onChange:Oe,item:We,id:Fe}=this.props,{settings:Be}=We;return(0,n.jsx)(G.KF,{inputId:Fe,isLoading:Ee,value:Pe,defaultValue:Pe,allowCustomValue:Be?.allowCustomValue,onChange:Le=>{Oe(Le.map(Ge=>Ge.value).flatMap(Ge=>Ge!==void 0?[Ge]:[]))},options:xe})}}var Te=e(85053);class $e extends g.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:xe}=this.props,{settings:Ee}=xe;let Pe=xe.settings?.options||[];Ee?.getOptions&&(Pe=await Ee.getOptions(this.props.context)),this.state.options!==Pe&&this.setState({isLoading:!1,options:Pe})}}componentDidMount(){this.updateOptions()}componentDidUpdate(xe){const Ee=xe.item?.settings,Pe=this.props.item?.settings;if(Ee!==Pe)this.updateOptions();else if(Pe?.getOptions){const Oe=xe.context?.data,We=this.props.context?.data;Oe!==We&&this.updateOptions()}}render(){const{options:xe,isLoading:Ee}=this.state,{value:Pe,onChange:Oe,item:We,id:Fe}=this.props,{settings:Be}=We;let Le=xe.find(Ge=>Ge.value===Pe);return!Le&&Pe&&(Le={label:`${Pe}`,value:Pe}),(0,n.jsx)(G.l6,{inputId:Fe,isLoading:Ee,value:Le,defaultValue:Pe,allowCustomValue:Be?.allowCustomValue,isClearable:Be?.isClearable,onChange:Ge=>Oe(Ge?.value),options:xe})}}var Re=e(21253),Ke=e(34107);const Ve=({value:me,onChange:xe,item:Ee,id:Pe})=>(0,n.jsx)(Ke.S,{stats:me,onChange:xe,allowMultiple:!!Ee.settings?.allowMultiple,defaultStat:Ee.settings?.defaultStat,inputId:Pe});var Se=e(41185),Ye=e(43173);class Ue extends g.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=xe=>{const{value:Ee,onChange:Pe}=this.props,Oe=[...Ee];Oe.splice(xe,1),Pe(Oe)},this.onValueChange=(xe,Ee)=>{if("key"in xe&&xe.key!=="Enter")return;const{value:Pe,onChange:Oe}=this.props,We=xe.currentTarget.value.trim();if(Ee<0){We&&(xe.currentTarget.value="",Oe([...Pe,We])),this.setState({showAdd:!1});return}if(!We)return this.onRemoveString(Ee);const Fe=[...Pe];Fe[Ee]=We,Oe(Fe)}}render(){const{value:xe,item:Ee}=this.props,{showAdd:Pe}=this.state,Oe=je(Ye.$.theme2),We=Ee.settings?.placeholder||"Add text";return(0,n.jsxs)("div",{children:[xe.map((Fe,Be)=>(0,n.jsx)(y.p,{className:Oe.textInput,defaultValue:Fe||"",onBlur:Le=>this.onValueChange(Le,Be),onKeyDown:Le=>this.onValueChange(Le,Be),suffix:(0,n.jsx)(V.I,{className:Oe.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(Be)})},`${Be}/${Fe}`)),Pe?(0,n.jsx)(y.p,{autoFocus:!0,className:Oe.textInput,placeholder:We,defaultValue:"",onBlur:Fe=>this.onValueChange(Fe,-1),onKeyDown:Fe=>this.onValueChange(Fe,-1),suffix:(0,n.jsx)(V.I,{name:"plus-circle"})}):(0,n.jsx)(b.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0}),children:We})]})}}const je=(0,C.N)(me=>({textInput:(0,u.css)({marginBottom:"5px","&:hover":{border:`1px solid ${me.components.input.borderHover}`}}),trashIcon:(0,u.css)({color:me.colors.text.secondary,cursor:"pointer","&:hover":{color:me.colors.text.primary}})}));var Qe=e(12965);function He({value:me,onChange:xe,item:Ee,id:Pe}){const Oe=(0,F.of)(Je);return Ee?.settings?.isClearable&&me!=null?(0,n.jsxs)("div",{className:Oe.wrapper,children:[(0,n.jsx)("span",{className:Oe.first,children:(0,n.jsx)(Qe.p,{value:me,onChange:xe,id:Pe})}),(0,n.jsx)(x.K,{name:"times",onClick:()=>xe(void 0),tooltip:(0,c.t)("options-ui.units.clear-tooltip","Clear unit selection")})]}):(0,n.jsx)(Qe.p,{value:me,onChange:xe,id:Pe})}const Je=me=>({wrapper:(0,u.css)({width:"100%",display:"flex",flexDirection:"row",alignItems:"center"}),first:(0,u.css)({marginRight:me.spacing(1),flexGrow:2})}),de=()=>{const me={id:"number",name:"Number",description:"Allows numeric values input",editor:Te.w},xe={id:"slider",name:"Slider",description:"Allows numeric values input",editor:Re.G},Ee={id:"text",name:"Text",description:"Allows string values input",editor:Se.g},Pe={id:"strings",name:"String array",description:"An array of strings",editor:Ue},Oe={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(Gt){return(0,n.jsx)(i.d,{...Gt,onChange:en=>Gt.onChange(en.currentTarget.checked)})}},We={id:"select",name:"Select",description:"Allows option selection",editor:$e},Fe={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:Me},Be={id:"radio",name:"Radio",description:"Allows option selection",editor(Gt){return(0,n.jsx)(o.z,{...Gt,options:Gt.item.settings?.options})}},Le={id:"unit",name:"Unit",description:"Allows unit input",editor:He},Ge={id:"color",name:"Color",description:"Allows color selection",editor(Gt){return(0,n.jsx)(X.a,{value:Gt.value,onChange:Gt.onChange,settings:Gt.item.settings,details:!0})}},Ze={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:Ce},qe={id:"links",name:"Links",description:"Allows defining data links",editor:De},at={id:"actions",name:"Actions",description:"Allows defining actions",editor:ue},ht={id:"stats-picker",name:"Stats Picker",editor:Ve,description:""},Et={id:"timezone",name:(0,c.t)("options-ui.registry.get-all-option-editors.name-time-zone","Time zone"),description:(0,c.t)("options-ui.registry.get-all-option-editors.description-time-zone","Time zone selection"),editor:h.U},mt={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:f.O};return[Ee,me,xe,Oe,Be,We,Le,qe,at,ht,Pe,Et,Ze,Ge,Fe,mt,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:ie},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:Z},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:K}]},ve=()=>{const me=[(0,c.t)("options-ui.registry.standard-field-configs.category","Standard options")],xe={id:"displayName",path:"displayName",name:(0,c.t)("options-ui.registry.standard-field-configs.name-display-name","Display name"),description:(0,c.t)("options-ui.registry.standard-field-configs.description-display-name","Change the field or series name"),editor:a.D.get("text").editor,override:a.D.get("text").editor,process:s.AM,settings:{placeholder:(0,c.t)("options-ui.registry.standard-field-configs.placeholder-display-name","none"),expandTemplateVars:!0},shouldApply:()=>!0,category:me},Ee={id:"unit",path:"unit",name:(0,c.t)("options-ui.registry.standard-field-configs.name-unit","Unit"),description:"",editor:a.D.get("unit").editor,override:a.D.get("unit").editor,process:s.OU,settings:{placeholder:(0,c.t)("options-ui.registry.standard-field-configs.placeholder-unit","none")},shouldApply:()=>!0,category:me},Pe={id:"fieldMinMax",path:"fieldMinMax",name:(0,c.t)("options-ui.registry.standard-field-configs.name-field-min-max","Field min/max"),description:(0,c.t)("options-ui.registry.standard-field-configs.description-field-min-max","Calculate min max per field"),editor:a.D.get("boolean").editor,override:a.D.get("boolean").editor,process:s.FM,shouldApply:mt=>mt.type===l.PU.number,showIf:mt=>mt.min===void 0||mt.max===void 0,category:me},Oe={id:"min",path:"min",name:(0,c.t)("options-ui.registry.standard-field-configs.name-min","Min"),description:(0,c.t)("options-ui.registry.standard-field-configs.description-min","Leave empty to calculate based on all values"),editor:a.D.get("number").editor,override:a.D.get("number").editor,process:s.m0,settings:{placeholder:(0,c.t)("options-ui.registry.standard-field-configs.placeholder-min","auto")},shouldApply:mt=>mt.type===l.PU.number,category:me},We={id:"max",path:"max",name:(0,c.t)("options-ui.registry.standard-field-configs.name-max","Max"),description:(0,c.t)("options-ui.registry.standard-field-configs.description-max","Leave empty to calculate based on all values"),editor:a.D.get("number").editor,override:a.D.get("number").editor,process:s.m0,settings:{placeholder:(0,c.t)("options-ui.registry.standard-field-configs.placeholder-max","auto")},shouldApply:mt=>mt.type===l.PU.number,category:me},Fe={id:"decimals",path:"decimals",name:(0,c.t)("options-ui.registry.standard-field-configs.name-decimals","Decimals"),editor:a.D.get("number").editor,override:a.D.get("number").editor,process:s.m0,settings:{placeholder:(0,c.t)("options-ui.registry.standard-field-configs.placeholder-decimals","auto"),min:0,max:15,integer:!0},shouldApply:mt=>mt.type===l.PU.number,category:me},Be={id:"noValue",path:"noValue",name:(0,c.t)("options-ui.registry.standard-field-configs.name-no-value","No value"),description:(0,c.t)("options-ui.registry.standard-field-configs.description-no-value","What to show when there is no value"),editor:a.D.get("text").editor,override:a.D.get("text").editor,process:s.OU,settings:{placeholder:"-"},shouldApply:()=>!0,category:me},Le=(0,c.t)("options-ui.registry.standard-field-condigs.category-data-links","Data links and actions"),Ge={id:"links",path:"links",name:(0,c.t)("options-ui.registry.standard-field-configs.name-data-links","Data links"),editor:a.D.get("links").editor,override:a.D.get("links").editor,process:s.Ch,settings:{showOneClick:!1},shouldApply:()=>!0,category:[Le],getItemsCount:mt=>mt?mt.length:0},Ze={id:"actions",path:"actions",name:(0,c.t)("options-ui.registry.standard-field-configs.name-actions","Actions"),editor:a.D.get("actions").editor,override:a.D.get("actions").editor,process:s.cz,settings:{showOneClick:!1},shouldApply:()=>!0,category:[Le],getItemsCount:mt=>mt?mt.length:0,hideFromDefaults:!0},qe={id:"color",path:"color",name:(0,c.t)("options-ui.registry.standard-field-configs.name-color-scheme","Color scheme"),editor:a.D.get("fieldColor").editor,override:a.D.get("fieldColor").editor,process:s.hS,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:me},at={id:"mappings",path:"mappings",name:(0,c.t)("options-ui.registry.standard-field-configs.name-value-mappings","Value mappings"),description:(0,c.t)("options-ui.registry.standard-field-configs.description-value-mappings","Modify the display text based on input value"),editor:a.D.get("mappings").editor,override:a.D.get("mappings").editor,process:s.xT,settings:{},defaultValue:[],shouldApply:mt=>mt.type!==l.PU.time,category:[(0,c.t)("options-ui.registry.standard-field-configs.category-value-mappings","Value mappings")],getItemsCount:mt=>mt?mt.length:0},ht={id:"thresholds",path:"thresholds",name:(0,c.t)("options-ui.registry.standard-field-configs.name-thresholds","Thresholds"),editor:a.D.get("thresholds").editor,override:a.D.get("thresholds").editor,process:s.N7,settings:{},defaultValue:{mode:r.O.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:[(0,c.t)("options-ui.registry.standard-field-configs.category-thresholds","Thresholds")],getItemsCount:mt=>mt?mt.steps.length:0},Et={id:"filterable",path:"filterable",name:(0,c.t)("options-ui.registry.standard-field-configs.name-ad-hoc","Ad-hoc filterable"),hideFromDefaults:!0,editor:a.D.get("boolean").editor,override:a.D.get("boolean").editor,process:s.FM,shouldApply:()=>!0,settings:{},category:me};return[Ee,Oe,We,Pe,Fe,xe,qe,Be,Ge,Ze,at,ht,Et]}},83340:(ne,A,e)=>{"use strict";e.d(A,{Ow:()=>a,ZW:()=>n,uo:()=>s});function n(l){return r=>"__systemRef"in r&&r.__systemRef===l}const a=l=>"__systemRef"in l&&typeof l.__systemRef=="string";var s=(l=>(l.Unit="unit",l.Min="min",l.Max="max",l.FieldMinMax="fieldMinMax",l.Decimals="decimals",l.DisplayName="displayName",l.NoValue="noValue",l.Thresholds="thresholds",l.Mappings="mappings",l.Links="links",l.Actions="actions",l.Color="color",l.Filterable="filterable",l))(s||{})},83458:(ne,A,e)=>{"use strict";e.d(A,{G:()=>n,P:()=>a});var n=(s=>(s.DashDB="dash-db",s.DashHome="dash-home",s.DashFolder="dash-folder",s))(n||{}),a=(s=>(s.List="list",s.Folders="folders",s))(a||{})},83501:(ne,A,e)=>{"use strict";e.d(A,{z:()=>c});var n=e(74848),a=e(96540),s=e(7389),l=e(92745),r=e(68577);function c({onChange:i,sort:o,testId:h}){const f=(0,a.useMemo)(()=>[{label:(0,l.t)("variables.query-variable-sort-select.sort_options.label.disabled","Disabled"),value:s.ZG.disabled},{label:(0,l.t)("variables.query-variable-sort-select.sort_options.label.alphabetical-asc","Alphabetical (asc)"),value:s.ZG.alphabeticalAsc},{label:(0,l.t)("variables.query-variable-sort-select.sort_options.label.alphabetical-desc","Alphabetical (desc)"),value:s.ZG.alphabeticalDesc},{label:(0,l.t)("variables.query-variable-sort-select.sort_options.label.numerical-asc","Numerical (asc)"),value:s.ZG.numericalAsc},{label:(0,l.t)("variables.query-variable-sort-select.sort_options.label.numerical-desc","Numerical (desc)"),value:s.ZG.numericalDesc},{label:(0,l.t)("variables.query-variable-sort-select.sort_options.label.alphabetical-caseinsensitive-asc","Alphabetical (case-insensitive, asc)"),value:s.ZG.alphabeticalCaseInsensitiveAsc},{label:(0,l.t)("variables.query-variable-sort-select.sort_options.label.alphabetical-caseinsensitive-desc","Alphabetical (case-insensitive, desc)"),value:s.ZG.alphabeticalCaseInsensitiveDesc},{label:(0,l.t)("variables.query-variable-sort-select.sort_options.label.natural-asc","Natural (asc)"),value:s.ZG.naturalAsc},{label:(0,l.t)("variables.query-variable-sort-select.sort_options.label.natural-desc","Natural (desc)"),value:s.ZG.naturalDesc}],[]),g=(0,a.useMemo)(()=>f.find(u=>u.value===o)??f[0],[o,f]);return(0,n.jsx)(r.v,{name:(0,l.t)("variables.query-variable-sort-select.name-sort","Sort"),description:(0,l.t)("variables.query-variable-sort-select.description-values-variable","How to sort the values of this variable"),value:g,options:f,onChange:i,testId:h,width:25})}},83692:(ne,A,e)=>{"use strict";e.d(A,{f:()=>i});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=e(91867),c=e(62348);const i=(0,s.memo)(function({hideText:f,value:g,timeZone:u="browser",placeholder:E="No time range selected",className:v}){const p=(0,l.of)(o);return f?null:(0,n.jsx)("span",{className:v,children:(0,c.X)(g)?(0,n.jsx)(r._8,{value:g,timeZone:u}):(0,n.jsx)("span",{className:p.placeholder,children:E})})}),o=h=>({placeholder:(0,a.css)({color:h.colors.text.disabled,opacity:1})})},83734:(ne,A,e)=>{"use strict";e.d(A,{HC:()=>a,XJ:()=>c,d:()=>s,pC:()=>r});let n;const a=i=>{if(n)throw new Error("Runner should only be set when Grafana is starting.");n=i},s=()=>{if(!n)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return n()};let l;function r(i){if(l)throw new Error("runRequest function should only be set once, when Grafana is starting.");l=i}function c(){if(!l)throw new Error("getRunRequest can only be used after Grafana instance has started.");return l}},83750:(ne,A,e)=>{"use strict";e.d(A,{s:()=>g});var n=e(74848),a=e(22803),s=e(45967),l=e(89640),r=e(63142),c=e(95443),i=e(40165),o=e(9368),h=e(16591);const f=["message","description"],g=({annotationKey:v,value:p,valueLink:m})=>{const y=v,d=c.J3[y]?(0,n.jsx)(s.m,{content:v,placement:"top",theme:"info",children:(0,n.jsx)("span",{children:c.J3[y]})}):v;return(0,n.jsx)(i.X,{label:d,horizontal:!0,children:(0,n.jsx)(u,{annotationKey:v,value:p,valueLink:m})})},u=({annotationKey:v,value:p,valueLink:m})=>{const y=(0,r.of)(E),d=f.includes(v),x=p&&p.startsWith("http"),b=(0,n.jsx)(o.Y,{input:p,delimiter:["{{","}}"]});return m?(0,n.jsx)(l.Y,{href:m,external:!0,children:p}):d?(0,n.jsx)(h.L,{className:y.well,children:b}):x?(0,n.jsx)(l.Y,{href:p,external:!0,children:p}):(0,n.jsx)(n.Fragment,{children:b})},E=v=>({well:(0,a.css)({wordBreak:"break-word"})})},83793:(ne,A,e)=>{"use strict";e.d(A,{PP:()=>u,tj:()=>g.tj,bS:()=>g.bS,ZL:()=>g.ZL,L:()=>g.L,Qo:()=>g.Qo,So:()=>g.So,KA:()=>g.KA,F9:()=>g.F9,Bm:()=>g.Bm,Kw:()=>g.Kw,$j:()=>g.$j,qC:()=>g.qC,$9:()=>g.$9,Sw:()=>g.Sw,Cx:()=>g.Cx,nS:()=>g.nS,c2:()=>g.c2,v$:()=>g.v$,L3:()=>g.L3,Ih:()=>g.Ih,XM:()=>g.XM,hD:()=>g.hD});var n=e(92745),a=e(68143),s=e(87186),l=e(8535),r=e(6890),c=e(64762),i=e(27044),o=e(44220),h=e(54115);function f(E){return async function(p,{updateCachedData:m,cacheDataLoaded:y,cacheEntryRemoved:d}){if(!p?.watch)return;const x=new h.ws({group:"provisioning.grafana.app",version:"v0alpha1",resource:E});let b=null;try{const C=(await y).data.metadata?.resourceVersion;b=x.watch({resourceVersion:C}).subscribe(P=>{m(T=>{T.items||(T.items=[]);const O=T.items.findIndex(S=>S.metadata?.name===P.object.metadata.name);P.type==="ADDED"&&O===-1?T.items.push(P.object):P.type==="DELETED"&&O!==-1?T.items.splice(O,1):O!==-1&&(T.items[O]=P.object)})})}catch(D){console.error("Error in onCacheEntryAdded:",D)}await d,b?.unsubscribe()}}var g=e(80042);const u=g.qR.enhanceEndpoints({endpoints:{listJob:{query:({watch:E,...v})=>({url:"/jobs",params:v}),onCacheEntryAdded:f("jobs")},listRepository:{query:({watch:E,...v})=>({url:"/repositories",params:v}),onCacheEntryAdded:f("repositories")},deleteRepository:{onQueryStarted:async(E,{queryFulfilled:v,dispatch:p})=>{try{await v,p((0,r.dx)((0,c.tZ)((0,n.t)("provisioning.delete-repository-button.success-repository-deleted","Repository settings queued for deletion"))))}catch(m){m instanceof Error&&p((0,r.dx)((0,c.gi)((0,n.t)("provisioning.delete-repository-button.error-repository-delete","Failed to delete repository"),m)))}setTimeout(()=>{p((0,o.bw)({parentUID:void 0,pageSize:i.md}))},1e3)}},deletecollectionRepository:{onQueryStarted:async(E,{queryFulfilled:v,dispatch:p})=>{try{await v,p((0,r.dx)((0,c.tZ)((0,n.t)("provisioning.home-page.success-all-repositories-deleted","All configured repositories deleted"))))}catch(m){m instanceof Error&&p((0,r.dx)((0,c.gi)((0,n.t)("provisioning.home-page.error-delete-all-repositories","Failed to delete all repositories"),m)))}setTimeout(()=>{p((0,o.bw)({parentUID:void 0,pageSize:i.md}))},1e3)}},createRepositoryTest:{onQueryStarted:async(E,{queryFulfilled:v,dispatch:p})=>{try{await v}catch(m){if(!m)p((0,r.dx)((0,c.gi)("Error validating repository",new Error("Unknown error"))));else if(m instanceof Error)p((0,r.dx)((0,c.gi)("Error validating repository",m)));else if(typeof m=="object"&&"error"in m&&(0,a.NF)(m.error))if(m.error.data.kind==="Status"&&m.error.data.status==="Failure"){const y=m.error.data;p((0,r.dx)((0,c.gi)("Error validating repository",new Error(y.message||"Unknown error"))))}else Array.isArray(m.error.data.errors)&&m.error.data.errors.length&&m.error.data.errors.filter(d=>!d.field).length>0&&p((0,r.dx)((0,c.gi)("Error validating repository")))}}},createRepositoryJobs:{onQueryStarted:async({jobSpec:E},{queryFulfilled:v,dispatch:p})=>{try{const m=E.action==="pull"||E.action==="migrate";await v,m&&p((0,r.dx)((0,c.tZ)((0,n.t)("provisioning.sync-repository.success-pull-started","Pull started"))))}catch(m){m instanceof Error&&p((0,r.dx)((0,c.gi)((0,n.t)("provisioning.sync-repository.error-pulling-resources","Error pulling resources"),m)))}}},createRepository:{onQueryStarted:async(E,{queryFulfilled:v,dispatch:p})=>{try{await v,p((0,r.dx)((0,c.tZ)((0,n.t)("provisioning.config-form.alert-repository-settings-saved","Repository settings saved"))))}catch(m){m instanceof Error&&p((0,r.dx)((0,c.gi)((0,n.t)("provisioning.config-form.error-save-repository","Failed to save repository settings"),m)))}}},replaceRepository:{onQueryStarted:async(E,{queryFulfilled:v,dispatch:p})=>{try{await v,p((0,r.dx)((0,c.tZ)((0,n.t)("provisioning.config-form.alert-repository-settings-updated","Repository settings updated"))))}catch(m){m instanceof Error&&p((0,r.dx)((0,c.gi)((0,n.t)("provisioning.config-form.error-save-repository","Failed to save repository settings"),m)))}p((0,o.bw)({parentUID:void 0,pageSize:i.md}))}},getRepositoryJobsWithPath:{onQueryStarted:async(E,{queryFulfilled:v,dispatch:p})=>{try{const y=(await v).data;if(y.status?.state==="success"&&(y.spec?.action==="delete"||y.spec?.action==="move")){const d=(0,l.Gu)().browseDashboards;p((0,s.xN)(Object.keys(d.childrenByParentUID)))}}catch(m){console.error("Error in getRepositoryJobsWithPath:",m)}}}}})},83871:(ne,A,e)=>{"use strict";e.d(A,{e:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({children:c,className:i,grow:o,...h})=>{const f=(0,s.of)(r,o);return(0,n.jsx)("div",{className:(0,a.cx)(f.container,i),...h,children:c})};l.displayName="InlineSegmentGroup";const r=(c,i)=>({container:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative",flex:`${i?1:0} 0 auto`,marginBottom:c.spacing(.5)})})},83873:(ne,A,e)=>{"use strict";e.d(A,{Mf:()=>Ke,IB:()=>Ve,AI:()=>Se});var n=e(56568),a=e(13752),s=e(75505),l=e(88483),r=e(64423),c=e(13288),i=e(65474),o=e(20039),h=e(81160),f=e(69862),g=e(59099),u=e(37748),E=e(66847),v=e(67791),p=e(16126),m=e(41560),y=e(69850),d=e(1005),x=e(24726),b=e(32899),D=e(94644),C=e(37615),P=e(43173),T=e(45229),O=e(65642),S=e(57680),B=e(65556),K=e(13956),U=e(74848),F=e(22803),I=e(92745),V=e(63142),M=e(15245),L=e(79331),N=e(45861),W=e(35621);const R=Ye=>{const Ue=(0,V.of)(G),je=(0,V.$j)(),Qe=(0,W.o)(je),He=!!Ye.maxConcurrentSessions,Je=()=>{window.location.reload()};return(0,U.jsxs)(M.ZL,{children:[(0,U.jsx)("div",{className:Qe.modal,children:(0,U.jsxs)(L.w,{title:(0,I.t)("users.token-revoked-modal.title-you-have-been-automatically-signed-out","You have been automatically signed out"),severity:"warning",className:Ue.infobox,children:[(0,U.jsxs)("div",{className:Ue.text,children:[(0,U.jsx)("p",{children:(0,U.jsxs)(I.x6,{i18nKey:"users.token-revoked-modal.auto-revoked",values:{numSessions:He?Ye.maxConcurrentSessions:""},children:["Your session token was automatically revoked because you have reached"," ",(0,U.jsxs)("strong",{children:["the maximum number of ","{{numSessions}}"," concurrent sessions"]})," for your account."]})}),(0,U.jsx)("p",{children:(0,U.jsxs)(I.x6,{i18nKey:"users.token-revoked-modal.resume-message",children:[(0,U.jsx)("strong",{children:"To resume your session, sign in again."}),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically."]})})]}),(0,U.jsx)(N.$n,{size:"md",variant:"primary",onClick:Je,children:(0,U.jsx)(I.x6,{i18nKey:"users.token-revoked-modal.sign-in",children:"Sign in"})})]})}),(0,U.jsx)("div",{className:(0,F.cx)(Qe.modalBackdrop,Ue.backdrop)})]})},G=Ye=>({infobox:(0,F.css)({marginBottom:0}),text:(0,F.css)({margin:Ye.spacing(1,0,2)}),backdrop:(0,F.css)({backgroundColor:Ye.colors.background.canvas,opacity:.8})});var w=e(87745),_=e(2543),Q=e(62467),ae=e(63704);const q=Ye=>{const Ue=Ye.method,je=ce(Ye),Qe=re(je),He=ue(Ye,Qe),Je=fe(Ye);return{method:Ue,headers:je,body:He,credentials:Je,signal:Ye.abortSignal}},k={canParse:()=>!0,parse:Ye=>(Ye.get("accept")||Ye.set("accept","application/json, text/plain, */*"),Ye)},ee=Ye=>({canParse:Ue=>(Ue?.method?Ue?.method.toLowerCase():"")===Ye,parse:Ue=>(Ue.get("content-type")||Ue.set("content-type","application/json"),Ue)}),j=ee("post"),J=ee("put"),Z=ee("patch"),te=[j,J,Z,k],se=/[^\u0000-\u00ff]/g;function ie(Ye){return se.test(Ye)?encodeURI(Ye):Ye}const ce=Ye=>{const Ue={};for(let[Je,de]of Object.entries(Ye.headers??{}))Ue[ie(Je)]=ie(de);const je=new Headers(Ue);return te.filter(Je=>Je.canParse(Ye)).reduce((Je,de)=>de.parse(Je),je)},re=Ye=>{if(!Ye)return!1;const Ue=Ye.get("content-type");return!!(Ue&&(Ue.toLowerCase()==="application/json"||Ue.toLowerCase()==="application/merge-patch+json"))},ue=(Ye,Ue)=>Ye&&(!Ye.data||typeof Ye.data=="string"||Ye.data instanceof Blob?Ye.data:Ue?JSON.stringify(Ye.data):new URLSearchParams(Ye.data));async function X(Ye,Ue){if(Ue)switch(Ue){case"arraybuffer":return Ye.arrayBuffer();case"blob":return Ye.blob();case"json":return Ye.headers.get("Content-Length")==="0"?(console.warn(`${Ye.url} returned an invalid JSON`),{}):await Ye.json();case"text":return Ye.text()}const je=await Ye.text();try{return JSON.parse(je)}catch{}return je}function le(Ye){return Object.keys(Ye).map(Ue=>{const je=Ye[Ue];return Array.isArray(je)?je.map(Qe=>`${encodeURIComponent(Ue)}=${encodeURIComponent(Qe)}`).join("&"):`${encodeURIComponent(Ue)}=${encodeURIComponent(je)}`}).join("&")}const he=Ye=>{try{const Ue=(0,_.omitBy)(Ye.params,He=>He===void 0||He&&He.length===0),je=le(Ue),Qe=Ye.validatePath?(0,ae.iQ)(Ye.url):Ye.url;return Ye.params&&je.length?(0,Q.of)(`${Qe}?${je}`):(0,Q.of)(Qe)}catch(Ue){return(0,c.$)(()=>Ue)}},fe=Ye=>Ye&&(Ye.credentials?Ye.credentials:Ye.withCredentials?((0,C.l)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin");var Ce=e(1404),Ae=(Ye=>(Ye[Ye.Pending=0]="Pending",Ye[Ye.InProgress=1]="InProgress",Ye[Ye.Done=2]="Done",Ye))(Ae||{});class _e{constructor(Ue=!1){this.state={},this.queue=new a.B,this.updates=new a.B,this.add=(je,Qe)=>this.queue.next({id:je,options:Qe,state:0}),this.setInProgress=je=>this.queue.next({id:je,state:1}),this.setDone=je=>this.queue.next({id:je,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=je=>{const Qe=Object.keys(je).filter(Je=>je[Je].state===1).length;return{noOfPending:Object.keys(je).filter(Je=>je[Je].state===0).length,noOfInProgress:Qe,state:je}},this.publishUpdate=(je,Qe)=>{this.printState(je,Qe),this.updates.next(je)},this.printState=(je,Qe)=>{if(!Qe)return;const He=Object.keys(je.state).reduce((Je,de)=>{const ve={id:de,state:je.state[de].state};return Je.push(ve),Je},[]);console.log("FetchQueue noOfStarted",je.noOfInProgress),console.log("FetchQueue noOfNotStarted",je.noOfPending),console.log("FetchQueue state",He)},this.queue.subscribe(je=>{const{id:Qe,state:He,options:Je}=je;if(this.state[Qe]||(this.state[Qe]={state:0,options:{url:""}}),He===2){delete this.state[Qe];const ve=this.getUpdate(this.state);this.publishUpdate(ve,Ue);return}this.state[Qe].state=He,Je&&(this.state[Qe].options=Je);const de=this.getUpdate(this.state);this.publishUpdate(de,Ue)})}}var Xe=e(95864);class De{constructor(Ue,je,Qe){const He=Qe?.http2Enabled?1e3:5;Ue.getUpdates().pipe((0,p.p)(({noOfPending:Je})=>Je>0),(0,Xe.H)(({state:Je,noOfInProgress:de})=>{const ve=Object.keys(Je).filter(Pe=>Je[Pe].state===Ae.Pending&&!(0,Ce.dr)(Je[Pe].options.url)).reduce((Pe,Oe)=>{const We={id:Oe,options:Je[Oe].options};return Pe.push(We),Pe},[]),me=Object.keys(Je).filter(Pe=>Je[Pe].state===Ae.Pending&&(0,Ce.dr)(Je[Pe].options.url)).reduce((Pe,Oe)=>{const We={id:Oe,options:Je[Oe].options};return Pe.push(We),Pe},[]),xe=Math.max(He-de-ve.length,0),Ee=me.slice(0,xe);return ve.concat(Ee)})).subscribe(({id:Je,options:de})=>{je.add(Je,de)})}}class Me{constructor(Ue,je){this.queue=new a.B,this.responses=new a.B,this.add=(Qe,He)=>{this.queue.next({id:Qe,options:He})},this.getResponses=Qe=>this.responses.asObservable().pipe((0,p.p)(He=>He.id===Qe)),this.queue.subscribe(Qe=>{const{id:He,options:Je}=Qe;Ue.setInProgress(He),this.responses.next({id:He,observable:je(Je)})})}}var Te=e(15130);const $e="cancel_all_requests_request_id",Re="grafana-trace-id";class Ke{constructor(Ue){this.inFlightRequests=new a.B,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new a.B,this._tokenRotationInProgress=null,this.deviceID=null,this.dependencies={fromFetch:o.$,appEvents:T.A,contextSrv:Te.TP,logout:()=>{Te.TP.setLoggedOut()}},this.chunkRequestId=1,Ue&&(this.dependencies={...this.dependencies,...Ue}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new _e,this.responseQueue=new Me(this.fetchQueue,this.internalFetch),this.initGrafanaDeviceID(),new De(this.fetchQueue,this.responseQueue,(0,O.zj)())}async initGrafanaDeviceID(){try{const je=await(await n.Ay.load()).get();this.deviceID=je.visitorId}catch(Ue){console.error(Ue)}}async request(Ue){return await(0,s.s)(this.fetch(Ue).pipe((0,h.T)(je=>je.data)))}fetch(Ue){const je=(0,x.A)(),Qe=this.fetchQueue;return new l.c(He=>{const Je=new r.yU;return Je.add(this.responseQueue.getResponses(je).subscribe(de=>{Je.add(de.observable.subscribe(He))})),this.fetchQueue.add(je,Ue),function(){Qe.setDone(je),Je.unsubscribe()}})}chunked(Ue){const je=Ue.requestId??`chunked-${this.chunkRequestId++}`,Qe=new AbortController,He=q({...Ue,requestId:je,abortSignal:Qe.signal});return new l.c(Je=>{const de=he(Ue).pipe((0,f.Z)(ve=>this.dependencies.fromFetch(ve,He))).subscribe(this.getChunkedResponseObserver({controller:Qe,observer:Je,options:Ue,requestId:je}));return function(){console.log(je,"unsubscribe"),Qe.abort("unsubscribe"),de.unsubscribe()}})}getChunkedResponseObserver({controller:Ue,observer:je,options:Qe,requestId:He}){let Je=!1;return{next:de=>{const ve={status:de.status,statusText:de.statusText,ok:de.ok,headers:de.headers,url:de.url,type:de.type,redirected:de.redirected,config:Qe,traceId:de.headers.get(Re)??void 0,data:void 0};if(!de.body){je.next(ve),je.complete();return}const me=de.body.getReader();Ue.signal.onabort=()=>{me.cancel(Ue.signal.reason),console.log(He,"signal.aborted")};async function xe(){for(;me&&!Je;){const Ee=await me.read();je.next({...ve,data:Ee.value}),Ee.done&&(Je=!0,console.log(He,"done"))}}xe().then(()=>{console.log(He,"complete"),je.complete()}).catch(Ee=>{console.log(He,"catch",Ee),je.error(Ee)})},error:de=>{je.error(de)}}}internalFetch(Ue){Ue.requestId&&this.inFlightRequests.next(Ue.requestId),Ue=this.parseRequestOptions(Ue);const je=(0,B.r)();return je!==null&&je!==""&&P.$.jwtUrlLogin&&P.$.jwtHeaderName&&(Ue.headers=Ue.headers??{},Ue.headers[P.$.jwtHeaderName]=`${je}`),this.deviceID&&(Ue.headers=Ue.headers??{},Ue.headers["X-Grafana-Device-Id"]=`${this.deviceID}`),he(Ue).pipe(this.getFromFetchStream(Ue),this.handleStreamResponse(Ue),this.handleStreamError(Ue),this.handleStreamCancellation(Ue))}resolveCancelerIfExists(Ue){this.inFlightRequests.next(Ue)}cancelAllInFlightRequests(){this.inFlightRequests.next($e)}async datasourceRequest(Ue){return(0,s.s)(this.fetch(Ue))}parseRequestOptions(Ue){const je=this.dependencies.contextSrv.user?.orgId;return Ue.retry=Ue.retry??0,(0,Ce.Lr)(Ue.url)&&(je&&(Ue.headers=Ue.headers??{},Ue.headers["X-Grafana-Org-Id"]=je),Ue.url.startsWith("/")&&(Ue.url=Ue.url.substring(1)),Ue.headers?.Authorization&&(Ue.headers["X-DS-Authorization"]=Ue.headers.Authorization,delete Ue.headers.Authorization),this.noBackendCache&&(Ue.headers=Ue.headers??{},Ue.headers["X-Grafana-NoCache"]="true")),Ue.hideFromInspector===void 0&&(Ue.hideFromInspector=(0,Ce.Lr)(Ue.url)&&!(0,Ce.dr)(Ue.url)),Ue}getFromFetchStream(Ue){return je=>je.pipe((0,f.Z)(Qe=>{const He=q(Ue);return this.dependencies.fromFetch(Qe,He).pipe((0,f.Z)(async Je=>{const{status:de,statusText:ve,ok:me,headers:xe,url:Ee,type:Pe,redirected:Oe}=Je,We=Ue.responseType??(re(xe)?"json":void 0),Fe=await X(Je,We);return{status:de,statusText:ve,ok:me,data:Fe,headers:xe,url:Ee,type:Pe,redirected:Oe,config:Ue,traceId:Je.headers.get(Re)??void 0}}))}))}showApplicationErrorAlert(Ue){}showSuccessAlert(Ue){const{config:je}=Ue;if(je.showSuccessAlert===!1||je.showSuccessAlert===void 0&&(je.method==="GET"||(0,Ce.dr)(je.url)||!(0,Ce.Lr)(je.url)))return;const Qe=Ue.data;Qe?.message&&this.dependencies.appEvents.emit(b.r1.alertSuccess,[Qe.message])}showErrorAlert(Ue,je){if((je.status<400||je.status>=500)&&this.dependencies.contextSrv.isSignedIn&&(this.dependencies.contextSrv.user.authenticatedBy==="apikey"||this.dependencies.contextSrv.user.authenticatedBy==="render")||Ue.showErrorAlert===!1||Ue.showErrorAlert===void 0&&((0,Ce.dr)(Ue.url)||!(0,Ce.Lr)(Ue.url)))return;let Qe="",He=je.data.message;He==="Unexpected error"&&je.message&&(He=je.message),He.length>80&&(Qe=He,He="Error"),je.status===422&&(Qe=je.data.message,He="Validation failed"),this.dependencies.appEvents.emit(je.status<500?b.r1.alertWarning:b.r1.alertError,[He,Qe,je.data.traceID])}processRequestError(Ue,je){return je.data=je.data??{message:"Unexpected error"},typeof je.data=="string"&&(je.data={message:je.data,error:je.statusText,response:je.data}),je.data&&!je.data.message&&typeof je.data.error=="string"&&(je.data.message=je.data.error),je.data.message&&setTimeout(()=>{je.isHandled||this.showErrorAlert(Ue,je)},50),this.inspectorStream.next({response:je,requestId:Ue.requestId}),je}handleStreamResponse(Ue){return je=>je.pipe((0,h.T)(Qe=>{if(!Qe.ok){const{status:He,statusText:Je,data:de}=Qe;throw{status:He,statusText:Je,data:de,config:Ue,traceId:Qe.headers.get(Re)??void 0}}return Qe}),(0,g.M)(Qe=>{this.showSuccessAlert(Qe),this.inspectorStream.next({response:Qe,requestId:Ue.requestId})}))}handleStreamError(Ue){const{isSignedIn:je}=this.dependencies.contextSrv.user;return Qe=>Qe.pipe((0,u.l)(He=>He.pipe((0,f.Z)((Je,de)=>{const ve=de===0&&Ue.retry===0;if(Je.status===401&&(0,Ce.Lr)(Ue.url)&&ve&&je){if(Je.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new w.S8({component:R,props:{maxConcurrentSessions:Je.data?.error?.maxConcurrentSessions}})),this.dependencies.contextSrv.setRedirectToUrl(),(0,c.$)(()=>Je);let me=this.loginPing();return(0,S.m)()&&(0,S.W)()*1e3<Date.now()&&(me=this.rotateToken()),(0,i.H)(me).pipe((0,E.W)(xe=>(xe.status===401&&this.dependencies.logout(),(0,c.$)(xe))))}return(0,c.$)(Je)}))),(0,E.W)(He=>(0,c.$)(()=>this.processRequestError(Ue,He))))}handleStreamCancellation(Ue){return je=>je.pipe((0,v.Q)(this.inFlightRequests.pipe((0,p.p)(Qe=>{let He=!1;return Ue&&Ue.requestId&&Ue.requestId===Qe&&(He=!0),Qe===$e&&(He=!0),He}))),(0,m.v)(()=>({type:D.v2.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:Ue})))}getInspectorStream(){return this.inspectorStream}async get(Ue,je,Qe,He){return this.request({...He,method:"GET",url:Ue,params:je,requestId:Qe})}async delete(Ue,je,Qe){return this.request({...Qe,method:"DELETE",url:Ue,data:je})}async post(Ue,je,Qe){return this.request({...Qe,method:"POST",url:Ue,data:je})}async patch(Ue,je,Qe){return this.request({...Qe,method:"PATCH",url:Ue,data:je})}async put(Ue,je,Qe){return this.request({...Qe,method:"PUT",url:Ue,data:je})}withNoBackendCache(Ue){return this.noBackendCache=!0,Ue().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this._tokenRotationInProgress?this._tokenRotationInProgress:(this._tokenRotationInProgress=this.fetch({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1}).pipe((0,y.j)(()=>{this._tokenRotationInProgress=null}),(0,d.u)()),this._tokenRotationInProgress)}loginPing(){return this.fetch({url:"/api/login/ping",method:"GET",retry:1})}search(Ue){return this.get("/api/search",Ue)}getDashboardByUid(Ue){return(0,C.l)("backend_srv","getDashboardByUid(uid)","getDashboardAPI().getDashboardDTO(uid)"),(0,K.n)("v1").getDashboardDTO(Ue)}validateDashboard(Ue){return Promise.resolve({isValid:!1,message:"dashboard validation is not supported"})}getPublicDashboardByUid(Ue){return this.get(`/api/public/dashboards/${Ue}`)}getFolderByUid(Ue,je={}){const Qe=new URLSearchParams;return je.withAccessControl&&Qe.set("accesscontrol","true"),this.get(`/api/folders/${Ue}?${Qe.toString()}`,void 0,void 0,{showErrorAlert:!1})}}const Ve=new Ke,Se=()=>Ve},83903:(ne,A,e)=>{"use strict";e.d(A,{y:()=>r});var n=e(74848),a=e(84266),s=e(67834);const l={[a.Or.Active]:"bad",[a.Or.Unprocessed]:"neutral",[a.Or.Suppressed]:"info"},r=({state:c})=>(0,n.jsx)(s.O,{state:l[c],children:c})},83953:(ne,A,e)=>{"use strict";e.d(A,{BE:()=>D,HZ:()=>x,O2:()=>C,RA:()=>b,Z9:()=>O,aj:()=>U,dq:()=>K,eO:()=>T,ng:()=>d,pg:()=>B,rk:()=>P});var n=e(2543),a=e.n(n),s=e(33239),l=e(25229),r=e(22592),c=e(28105),i=e(78282),o=e(53222),h=e(80977),f=e(18615),g=e(29043),u=e(62635),E=e(28998),v=e(10951),p=e(2513);const m=100,y="grafana.explore.style.graph",d=F=>{g.A.set(y,F)},x=F=>({containerWidth:0,datasourceInstance:null,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:p.kn},absoluteRange:{from:null,to:null},scanning:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:b(),tableResult:null,graphResult:null,logsResult:null,clearedAtIndex:null,rawPrometheusResult:null,eventBridge:null,cache:[],supplementaryQueries:(0,v.Ez)(),panelsState:{},correlations:void 0,compact:!1,...F}),b=()=>({state:c.Gu.NotStarted,series:[],timeRange:(0,r.E2)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],customFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function D(F,I){let V;try{V=await(0,E.tR)().get(I)}catch{V=await(0,E.tR)().get()}if(V.init)try{V.init()}catch(W){console.error(W)}let M=[];const L=(0,o.tU)(),N=await L.getRichHistory({search:"",sortOrder:h.x.Ascending,datasourceFilters:[V.name],starred:!1});if((N.total||0)>0&&N.richHistory.forEach(W=>{W.queries.forEach(R=>{M.push({ts:parseInt(W.id,10),query:R})})}),M.length<m){const W=await L.getRichHistory({search:"",sortOrder:h.x.Ascending,datasourceFilters:[f.uv],starred:!1});(W.total||0)>0&&W.richHistory.forEach(R=>{R.queries.forEach(G=>{G?.datasource?.uid===V.uid&&M.push({ts:parseInt(R.id,10),query:G})})})}if(M.length<m){const W=`grafana.explore.history.${V.meta?.id}`;M=[...M,...g.A.getObject(W,[])]}return M.length>m&&(M.length=m),(0,u.dr)(F,V.uid),{history:M,instance:V}}function C(F){const I={from:F.from,to:F.to};return Object.entries(I).map(([M,L])=>`${encodeURIComponent(M)}=${encodeURIComponent(L.toString())}`).join("&")}function P(F,I){const V=C(I),M=F.findIndex(N=>N.key===V);return M>=0?F[M].value:void 0}function T(F,I){return{from:s.parse(F.from,!1,I),to:s.parse(F.to,!0,I),raw:F}}function O(F){let I=p.kn,V={from:S(F.from),to:S(F.to)};return V.from!==null&&V.to!==null&&(I={from:V.from,to:V.to}),I}function S(F){if(F===null)return null;if((0,l.Ar)(F))return F;if(typeof F!="string")return null;const I=F;if(I.indexOf("now")!==-1)return I;if(I.length===8)return(0,l.yT)(I,"YYYYMMDD");if(I.length===15)return(0,l.yT)(I,"YYYYMMDDTHHmmss");if(I.length===19)return(0,l.yT)(I,"YYYY-MM-DD HH:mm:ss");if(I.match(/^\d+$/)){const M=parseInt(I,10);return(0,l.yT)(M)}const V=(0,l.yT)(I);return V.isValid()?V:null}const B=(F,I)=>I?F?I.slice(F+1):I:[],K=(F,I)=>F===f.uv?(0,n.uniq)(I.map(V=>V.datasource?.uid).filter(V=>!!V)):[F];async function U(F,I){const V=F.explore.panes[I].correlationEditorHelperData,M=F.explore.correlationEditorDetails?.editorMode||!1,L=Object.keys(F.explore.panes)[0]===I,N=M&&L,W=N?await(0,i.l)().get():void 0,R=M&&!L&&V!==void 0;let G={};return R&&V!==void 0&&Object.entries(V?.vars).forEach(w=>{G[w[0]]={value:w[1]}}),{defaultCorrelationEditorDatasource:W,scopedVars:G,showCorrelationEditorLinks:N}}},84019:(ne,A,e)=>{"use strict";e.d(A,{V:()=>h,X:()=>o});var n=e(92745),a=e(43173),s=e(59857),l=e(11393),r=e(75735),c=e(28998),i=e(15130);async function o(f){let g=s.Ye.templating?.list;if(a.$.featureToggles.newDashboardWithFiltersAndGroupBy){const E=await(0,c.tR)().get();if(E.getTagKeys){const v={type:E.meta.id,uid:E.uid},p={datasource:v,filters:[],name:"Filter",type:"adhoc"},m={datasource:v,name:"Group by",type:"groupby"};g=(g||[]).concat([p,m])}}const u={meta:{canStar:!1,canShare:!1,canDelete:!1,isNew:!0,folderUid:""},dashboard:{...s.Ye,uid:"",title:(0,n.t)("dashboard-scene.build-new-dashboard-save-model.data.title.new-dashboard","New dashboard"),panels:[],timezone:i.TP.user?.timezone||s.Ye.timezone}};return g&&(u.dashboard.templating={list:g}),f&&(u.meta.folderUid=f),u}async function h(f){let g=(0,l.xE)().variables;if(a.$.featureToggles.newDashboardWithFiltersAndGroupBy){const E=await(0,c.tR)().get();if(E.getTagKeys){const v={type:E.meta.id,uid:E.uid},p={kind:"AdhocVariable",group:v.type,datasource:{name:v.uid},spec:{...(0,l.IP)(),name:"Filter"}},m={kind:"GroupByVariable",group:v.type,datasource:{name:v.uid},spec:{...(0,l.Bj)(),name:"Group by"}};g=(g||[]).concat([p,m])}}const u={apiVersion:"v2beta1",kind:"DashboardWithAccessInfo",spec:{...(0,l.xE)(),title:(0,n.t)("dashboard-scene.build-new-dashboard-save-model-v2.data.title.new-dashboard","New dashboard"),timeSettings:{...(0,l.ft)(),timezone:i.TP.user?.timezone||(0,l.ft)().timezone}},access:{canStar:!1,canShare:!1,canDelete:!1},metadata:{name:"",resourceVersion:"0",creationTimestamp:"0",annotations:{[r.ew]:""}}};return g&&(u.spec.variables=g),f&&u.metadata.annotations&&(u.metadata.annotations[r.ew]=f),u}},84057:(ne,A,e)=>{"use strict";e.d(A,{rH:()=>c,tc:()=>r});var n=e(41811),a=e(66198),s=e(43550);const l=()=>{const h={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:h,main:h}},r=(0,n.default)((h,f,g,u=!1)=>{if(h[f]){const E=h[f],v=u?E:c(E),p=i(v,f);return{node:E,main:p}}return g||l()});function c(h){return h.id===a.Rj?h:h.parentItem&&h.parentItem.id!==s.Id?c(h.parentItem):h}function i(h,f){return h.id===f?{...h,active:!0}:h.children&&h.children.length>0?{...h,children:h.children.map(g=>i(g,f))}:h}const o=h=>`${h.main.text}${h.node.text?": "+h.node.text:""}`},84229:(ne,A,e)=>{"use strict";e.d(A,{y:()=>n});var n=(a=>(a[a.Off=0]="Off",a[a.Crosshair=1]="Crosshair",a[a.Tooltip=2]="Tooltip",a))(n||{})},84266:(ne,A,e)=>{"use strict";e.d(A,{Or:()=>s,Oz:()=>c,RC:()=>a,ho:()=>l,nA:()=>r,uz:()=>n});const n=Symbol("routes_metadata");var a=(i=>(i.Active="active",i.Expired="expired",i.Pending="pending",i))(a||{}),s=(i=>(i.Unprocessed="unprocessed",i.Active="active",i.Suppressed="suppressed",i))(s||{}),l=(i=>(i.equal="=",i.notEqual="!=",i.regex="=~",i.notRegex="!~",i))(l||{}),r=(i=>(i.Internal="internal",i.External="external",i.All="all",i))(r||{}),c=(i=>(i.cortex="cortex",i.mimir="mimir",i.prometheus="prometheus",i))(c||{})},84330:(ne,A,e)=>{"use strict";e.d(A,{i:()=>h,j:()=>g});var n=e(74848),a=e(51898),s=e(92745),l=e(34999),r=e(41654),c=e(72636),i=e(77824),o=e(21285),h=(u=>(u.Classic="classic",u.V1Resource="v1-resource",u.V2Resource="v2-resource",u))(h||{});const f=a.Tp.pages.ExportDashboardDrawer.ExportAsJson;function g({dashboardJson:u,isSharingExternally:E,exportMode:v,isViewingYAML:p,onExportModeChange:m,onShareExternallyChange:y,onViewYAML:d}){const x=u.value?.hasLibraryPanels,b=u.value?.initialSaveModelVersion,D=u.value?.json&&"spec"in u.value.json&&"elements"in u.value.json.spec,C=D&&E&&x,P=v==="v2-resource"?(0,s.t)("export.json.export-remove-ds-refs","Remove deployment details"):(0,s.t)("share-modal.export.share-externally-label","Export for sharing externally"),T=(0,s.t)("export.json.export-mode","Model"),O=(0,s.t)("export.json.export-format","Format");return(0,n.jsxs)(r.B,{gap:2,direction:"column",children:[(0,n.jsxs)(r.B,{gap:1,direction:"column",children:[b==="v1"&&(0,n.jsxs)(r.B,{alignItems:"center",children:[(0,n.jsx)(c.J,{children:T}),(0,n.jsx)(i.z,{options:[{label:(0,s.t)("dashboard-scene.resource-export.label.classic","Classic"),value:"classic"},{label:(0,s.t)("dashboard-scene.resource-export.label.v1-resource","V1 Resource"),value:"v1-resource"},{label:(0,s.t)("dashboard-scene.resource-export.label.v2-resource","V2 Resource"),value:"v2-resource"}],value:v,onChange:S=>m(S)})]}),b==="v2"&&(0,n.jsxs)(r.B,{alignItems:"center",children:[(0,n.jsx)(c.J,{children:T}),(0,n.jsx)(i.z,{options:[{label:(0,s.t)("dashboard-scene.resource-export.label.v2-resource","V2 Resource"),value:"v2-resource"},{label:(0,s.t)("dashboard-scene.resource-export.label.v1-resource","V1 Resource"),value:"v1-resource"}],value:v,onChange:S=>m(S)})]}),v!=="classic"&&(0,n.jsxs)(r.B,{gap:1,alignItems:"center",children:[(0,n.jsx)(c.J,{children:O}),(0,n.jsx)(i.z,{options:[{label:(0,s.t)("dashboard-scene.resource-export.label.json","JSON"),value:"json"},{label:(0,s.t)("dashboard-scene.resource-export.label.yaml","YAML"),value:"yaml"}],value:p?"yaml":"json",onChange:d})]}),(D||v==="classic"||b==="v2"&&v==="v1-resource")&&(0,n.jsxs)(r.B,{gap:1,alignItems:"start",children:[(0,n.jsx)(c.J,{children:P}),(0,n.jsx)(o.d,{label:P,value:E,onChange:y,"data-testid":f.exportExternallyToggle})]})]}),C&&(0,n.jsx)(l.F,{title:(0,s.t)("dashboard-scene.save-dashboard-form.schema-v2-library-panels-export-title","Library panels will be converted to regular panels"),severity:"warning",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.save-dashboard-form.schema-v2-library-panels-export",children:"Due to limitations in the new dashboard schema (V2), library panels will be converted to regular panels with embedded content during external export."})})]})}},84403:(ne,A,e)=>{"use strict";e.d(A,{A:()=>x});var n=e(74848),a=e(22803),s=e(51898),l=e(92745),r=e(36490),c=e(45861),i=e(89640),o=e(66404),h=e(31286),f=e(41654),g=e(63142),u=e(77731),E=e(23656),v=e(11534),p=e(23289),m=e(52763),y=e(37918);const x=({dashboard:D,canCreate:C})=>{const P=(0,g.of)(b),T=(0,m.wA)(),O=(0,m.d4)(U=>U.dashboard.initialDatasource),S=()=>{let U;if(D instanceof v.H$){const F=D.onCreateNewPanel();D.setState({editPanel:(0,E.L)(F,!0)}),r.Ny.partial({firstPanel:!0})}else U=(0,u.OK)(D,O),T((0,y.Ub)(void 0)),r.Ny.partial({editPanel:U,firstPanel:!0});p.c.emptyDashboardButtonClicked({item:"add_visualization"})},B=()=>{p.c.emptyDashboardButtonClicked({item:"import_from_library"}),D instanceof v.H$?D.onShowAddLibraryPanelDrawer():(0,u.s3)(D)},K=D instanceof v.H$&&D.isManagedRepository();return(0,n.jsx)(f.B,{alignItems:"center",justifyContent:"center",children:(0,n.jsx)("div",{className:P.wrapper,children:(0,n.jsxs)(f.B,{alignItems:"stretch",justifyContent:"center",gap:4,direction:"column",children:[(0,n.jsx)(h.a,{borderColor:"strong",borderStyle:"dashed",padding:4,children:(0,n.jsxs)(f.B,{direction:"column",alignItems:"center",gap:2,children:[(0,n.jsx)(o.E,{element:"h1",textAlignment:"center",weight:"medium",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-visualization-header",children:"Start your new dashboard by adding a visualization"})}),(0,n.jsx)(h.a,{marginBottom:2,paddingX:4,children:(0,n.jsx)(o.E,{element:"p",textAlignment:"center",color:"secondary",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-visualization-body",children:"Select a data source and then query and visualize your data with charts, stats and tables or create lists, markdowns and other widgets."})})}),(0,n.jsx)(c.$n,{size:"lg",icon:"plus","data-testid":s.Tp.pages.AddDashboard.itemButton("Create new panel button"),onClick:S,disabled:!C,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-visualization-button",children:"Add visualization"})})]})}),(0,n.jsxs)(f.B,{direction:{xs:"column",md:"row"},wrap:"wrap",gap:4,children:[(0,n.jsx)(h.a,{borderColor:"strong",borderStyle:"dashed",padding:3,flex:1,children:(0,n.jsxs)(f.B,{direction:"column",alignItems:"center",gap:1,children:[(0,n.jsx)(o.E,{element:"h3",textAlignment:"center",weight:"medium",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-library-panel-header",children:"Import panel"})}),(0,n.jsx)(h.a,{marginBottom:2,children:(0,n.jsx)(o.E,{element:"p",textAlignment:"center",color:"secondary",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-library-panel-body",children:"Add visualizations that are shared with other dashboards."})})}),(0,n.jsx)(c.$n,{icon:"plus",fill:"outline","data-testid":s.Tp.pages.AddDashboard.itemButton("Add a panel from the panel library button"),onClick:B,disabled:!C||K,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.add-library-panel-button",children:"Add library panel"})})]})}),(0,n.jsx)(h.a,{borderColor:"strong",borderStyle:"dashed",padding:3,flex:1,children:(0,n.jsxs)(f.B,{direction:"column",alignItems:"center",gap:1,children:[(0,n.jsx)(o.E,{element:"h3",textAlignment:"center",weight:"medium",children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.import-a-dashboard-header",children:"Import a dashboard"})}),(0,n.jsx)(h.a,{marginBottom:2,children:(0,n.jsx)(o.E,{element:"p",textAlignment:"center",color:"secondary",children:(0,n.jsxs)(l.x6,{i18nKey:"dashboard.empty.import-a-dashboard-body",children:["Import dashboards from files or"," ",(0,n.jsx)(i.Y,{external:!0,href:"https://grafana.com/grafana/dashboards/",children:"grafana.com"}),"."]})})}),(0,n.jsx)(c.$n,{icon:"upload",fill:"outline","data-testid":s.Tp.pages.AddDashboard.itemButton("Import dashboard button"),onClick:()=>{p.c.emptyDashboardButtonClicked({item:"import_dashboard"}),(0,u.VF)()},disabled:!C,children:(0,n.jsx)(l.x6,{i18nKey:"dashboard.empty.import-dashboard-button",children:"Import dashboard"})})]})})]})]})})})};function b(D){return{wrapper:(0,a.css)({label:"dashboard-empty-wrapper",flexDirection:"column",maxWidth:"890px",gap:D.spacing.gridSize*4,paddingTop:D.spacing(2),[D.breakpoints.up("sm")]:{paddingTop:D.spacing(12)}})}}},84500:(ne,A,e)=>{"use strict";e.d(A,{$o:()=>E,CN:()=>g,Gs:()=>v,Ru:()=>p});var n=e(43173),a=e(45863),s=e(21275),l=e(59857),r=e(11393),c=e(50803),i=e(8285),o=e(67350),h=e(62265),f=e(39508);function g(m,y){const d=[];for(const x of m.state.variables){const b={name:x.state.name,label:x.state.label,description:x.state.description??void 0,skipUrlSync:!!x.state.skipUrlSync,hide:x.state.hide||l.zL.dontHide,type:x.state.type,showInControlsMenu:x.state.showInControlsMenu};if(a.Go.isQueryVariable(x)){let D=[];((0,f.qJ)(x.state.refresh)==="never"||y)&&(D=u(x.state)),d.push({...b,current:{value:x.state.value,text:x.state.text},options:D,query:x.state.query,definition:x.state.definition,datasource:(0,h.AB)(m,x,"variable"),sort:x.state.sort,refresh:x.state.refresh,regex:x.state.regex,allValue:x.state.allValue,includeAll:x.state.includeAll,multi:x.state.isMulti,allowCustomValue:x.state.allowCustomValue,skipUrlSync:x.state.skipUrlSync,staticOptions:x.state.staticOptions?.map(C=>({text:C.label,value:String(C.value)})),staticOptionsOrder:x.state.staticOptionsOrder})}else if(a.Go.isCustomVariable(x))d.push({...b,current:{text:x.state.value,value:x.state.value},options:u(x.state),query:x.state.query,multi:x.state.isMulti,allValue:x.state.allValue,includeAll:x.state.includeAll,allowCustomValue:x.state.allowCustomValue});else if(a.Go.isDataSourceVariable(x))d.push({...b,current:{value:x.state.value,text:x.state.text},options:[],regex:x.state.regex,refresh:s.CO.onDashboardLoad,query:x.state.pluginId,multi:x.state.isMulti,allValue:x.state.allValue,includeAll:x.state.includeAll,allowCustomValue:x.state.allowCustomValue});else if(a.Go.isConstantVariable(x))d.push({...b,current:{value:x.state.value,text:x.state.value},query:x.state.value,hide:l.zL.hideVariable});else if(a.Go.isIntervalVariable(x)){const D=(0,i.bx)(x.state.intervals);d.push({...b,current:{text:x.state.value,value:x.state.value},query:D,refresh:x.state.refresh,options:x.state.intervals.map(C=>({value:C,text:C,selected:C===x.state.value})),auto:x.state.autoEnabled,auto_min:x.state.autoMinInterval,auto_count:x.state.autoStepCount})}else if(a.Go.isTextBoxVariable(x)){const D={text:x.state.value,value:x.state.value};d.push({...b,current:D,options:[{...D,selected:!0}],query:x.state.value})}else if(a.Go.isGroupByVariable(x)&&n.$.featureToggles.groupByVariable){const D=x.state.defaultValue?{value:x.state.defaultValue.value,text:x.state.defaultValue.text}:void 0;d.push({...b,datasource:x.state.datasource,options:x.state.defaultOptions?.map(C=>({text:C.text,value:String(C.value)})),current:{text:x.state.text,value:x.state.value},defaultValue:D,allowCustomValue:x.state.allowCustomValue})}else if(a.Go.isAdHocVariable(x))d.push({...b,datasource:x.state.datasource,allowCustomValue:x.state.allowCustomValue,baseFilters:x.state.baseFilters||[],filters:[...v(x.state.originFilters),...x.state.filters],defaultKeys:x.state.defaultKeys});else if(x.state.type!=="system")throw new Error("Unsupported variable type")}for(const x of d)x.hide===l.zL.dontHide&&delete x.hide,x.skipUrlSync||delete x.skipUrlSync,x.label===""&&delete x.label,x.multi||delete x.multi,x.sort===s.ZG.disabled&&delete x.sort;return d}function u(m){return m.options.map(y=>({value:String(y.value),text:y.label,selected:Array.isArray(m.value)?m.value.includes(y.value):m.value===y.value}))}function E(m,y,d){let x=[];for(const b of m.state.variables){const D={name:b.state.name,label:b.state.label,description:b.state.description??void 0,skipUrlSync:!!b.state.skipUrlSync,hide:(0,f.NB)(b.state.hide)||(0,r.SR)(),showInControlsMenu:b.state.showInControlsMenu},C={value:b.state.value,text:b.state.text};let P=[];if(a.Go.isQueryVariable(b)){((0,f.qJ)(b.state.refresh)==="never"||y)&&(P=u(b.state));const T=b.state.query;let O;const S=(0,h.AB)(m,b,"variable",void 0,d);typeof T!="string"?O={kind:"DataQuery",version:(0,r.iM)().version,group:S?.type??(0,h.lD)(T),...S?.uid&&{datasource:{name:S.uid}},spec:(0,h.c8)(T)}:O={kind:"DataQuery",version:(0,r.iM)().version,group:S?.type??(0,h.lD)(T),...S?.uid&&{datasource:{name:S.uid}},spec:{[f.sB]:T}};const B={kind:"QueryVariable",spec:{...D,current:C,options:P,query:O,definition:b.state.definition,sort:(0,f.LY)(b.state.sort),refresh:(0,f.qJ)(b.state.refresh),regex:b.state.regex,allValue:b.state.allValue,includeAll:b.state.includeAll||!1,multi:b.state.isMulti||!1,skipUrlSync:b.state.skipUrlSync||!1,allowCustomValue:b.state.allowCustomValue??!0,staticOptions:b.state.staticOptions?.map(K=>({text:K.label,value:String(K.value)})),staticOptionsOrder:b.state.staticOptionsOrder}};x.push(B)}else if(a.Go.isCustomVariable(b)){P=u(b.state);const T={kind:"CustomVariable",spec:{...D,current:C,options:P,query:b.state.query,multi:b.state.isMulti||!1,allValue:b.state.allValue,includeAll:b.state.includeAll??!1,allowCustomValue:b.state.allowCustomValue??!0}};x.push(T)}else if(a.Go.isDataSourceVariable(b)){const T={kind:"DatasourceVariable",spec:{...D,current:C,options:[],regex:b.state.regex,refresh:"onDashboardLoad",pluginId:b.state.pluginId,multi:b.state.isMulti||!1,includeAll:b.state.includeAll||!1,allowCustomValue:b.state.allowCustomValue??!0}};b.state.allValue!==void 0&&(T.spec.allValue=b.state.allValue),x.push(T)}else if(a.Go.isConstantVariable(b)){const T={kind:"ConstantVariable",spec:{...D,current:{...C,text:String(b.state.value)},query:b.state.value}};x.push(T)}else if(a.Go.isIntervalVariable(b)){const T=(0,i.bx)(b.state.intervals),O={kind:"IntervalVariable",spec:{...D,current:{...C,text:b.state.value},query:T,refresh:"onTimeRangeChanged",options:b.state.intervals.map(S=>({value:S,text:S,selected:S===b.state.value})),auto:b.state.autoEnabled,auto_min:b.state.autoMinInterval,auto_count:b.state.autoStepCount}};x.push(O)}else if(a.Go.isTextBoxVariable(b)){const T={text:b.state.value,value:b.state.value},O={kind:"TextVariable",spec:{...D,current:T,query:b.state.value}};x.push(O)}else if(a.Go.isGroupByVariable(b)&&n.$.featureToggles.groupByVariable){P=u(b.state);const T=b.state.defaultValue?{value:b.state.defaultValue.value,text:b.state.defaultValue.text}:void 0,O=(0,o.DG)(b.state.datasource,b.state.datasource?.type||(0,c.nV)().type),S={kind:"GroupByVariable",group:O.type,datasource:{name:O.uid},spec:{...D,options:b.state.defaultOptions?.map(B=>({text:B.text,value:String(B.value)}))||[],current:C,defaultValue:T,multi:b.state.isMulti||!1}};x.push(S)}else if(a.Go.isAdHocVariable(b)){const T=(0,o.DG)(b.state.datasource,b.state.datasource?.type||(0,c.nV)().type),O={kind:"AdhocVariable",group:T.type,datasource:{name:T.uid},spec:{...D,name:b.state.name,baseFilters:v(b.state.baseFilters)||[],filters:[...v(b.state.originFilters),...v(b.state.filters)],defaultKeys:b.state.defaultKeys||[],allowCustomValue:b.state.allowCustomValue??!0}};x.push(O)}else if(b.state.type!=="system")throw new Error("Unsupported variable type: "+b.state.type)}return x}function v(m){return m?.filter(y=>!y.origin||y.origin==="dashboard")||[]}function p(m){return m.state.type!=="system"}},84510:(ne,A,e)=>{"use strict";e.d(A,{$n:()=>s,g_:()=>n,uk:()=>a});var n=(r=>(r.ShortcodeFigure="shortcodeFigure",r.UIImage="uiImage",r))(n||{});const a={calculateField:{name:"Add field from calculation",getHelperDocs:function(r="shortcodeFigure"){return`
Use this transformation to add a new field calculated from two other fields. Each transformation allows you to add one new field.

- **Mode** - Select a mode:
  - **Reduce row** - Apply selected calculation on each row of selected fields independently.
  - **Binary operation** - Apply basic binary operations (for example, sum or multiply) on values in a single row from two selected fields.
  - **Unary operation** - Apply basic unary operations on values in a single row from a selected field. The available operations are:
    - **Absolute value (abs)** - Returns the absolute value of a given expression. It represents its distance from zero as a positive number.
    - **Natural exponential (exp)** - Returns _e_ raised to the power of a given expression.
    - **Natural logarithm (ln)** - Returns the natural logarithm of a given expression.
    - **Floor (floor)** - Returns the largest integer less than or equal to a given expression.
    - **Ceiling (ceil)** - Returns the smallest integer greater than or equal to a given expression.
  - **Cumulative functions** - Apply functions on the current row and all preceding rows.
    - **Total** - Calculates the cumulative total up to and including the current row.
    - **Mean** - Calculates the mean up to and including the current row.
  - **Window functions** - Apply window functions. The window can either be **trailing** or **centered**.
    With a trailing window the current row will be the last row in the window.
    With a centered window the window will be centered on the current row.
    For even window sizes, the window will be centered between the current row, and the previous row.
    - **Mean** - Calculates the moving mean or running average.
    - **Stddev** - Calculates the moving standard deviation.
    - **Variance** - Calculates the moving variance.
  - **Row index** - Insert a field with the row index.
- **Field name** - Select the names of fields you want to use in the calculation for the new field.
- **Calculation** - If you select **Reduce row** mode, then the **Calculation** field appears. Click in the field to see a list of calculation choices you can use to create the new field. For information about available calculations, refer to [Calculation types][].
- **Operation** - If you select **Binary operation** or **Unary operation** mode, then the **Operation** fields appear. These fields allow you to apply basic math operations on values in a single row from selected fields. You can also use numerical values for binary operations.
  - **All number fields** - Set the left side of a **Binary operation** to apply the calculation to all number fields.
- **As percentile** - If you select **Row index** mode, then the **As percentile** switch appears. This switch allows you to transform the row index as a percentage of the total number of rows.
- **Alias** - (Optional) Enter the name of your new field. If you leave this blank, then the field will be named to match the calculation.
> **Note:** If a variable is used in this transformation, the default alias will be interpolated with the value of the variable. If you want an alias to be unaffected by variable changes, explicitly define the alias.
- **Replace all fields** - (Optional) Select this option if you want to hide all other fields and display only your calculated field in the visualization.

In the example below, we added two fields together and named them Sum.

${l("/static/img/docs/transformations/add-field-from-calc-stat-example-7-0.png",r,"A stat visualization including one field called Sum")}
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},concatenate:{name:"Concatenate fields",getHelperDocs:function(){return`
Use this transformation to combine all fields from all frames into one result.

For example, if you have separate queries retrieving temperature and uptime data (Query A) and air quality index and error information (Query B), applying the concatenate transformation yields a consolidated data frame with all relevant information in one view.

Consider the following:

**Query A:**

| Temp  | Uptime  |
| ----- | ------- |
| 15.4  | 1230233 |

**Query B:**

| AQI   | Errors |
| ----- | ------ |
| 3.2   | 5      |

After you concatenate the fields, the data frame would be:

| Temp | Uptime  | AQI | Errors |
| ---- | ------- | --- | ------ |
| 15.4 | 1230233 | 3.2 | 5      |

This transformation simplifies the process of merging data from different sources, providing a comprehensive view for analysis and visualization.
  `}},configFromData:{name:"Config from query results",getHelperDocs:function(){return`
Use this transformation to select a query and extract standard options, such as **Min**, **Max**, **Unit**, and **Thresholds**, and apply them to other query results. This feature enables dynamic visualization configuration based on the data returned by a specific query.

#### Options

- **Config query** - Select the query that returns the data you want to use as configuration.
- **Apply to** - Select the fields or series to which the configuration should be applied.
- **Apply to options** - Specify a field type or use a field name regex, depending on your selection in **Apply to**.

#### Field mapping table

Below the configuration options, you'll find the field mapping table. This table lists all fields found in the data returned by the config query, along with **Use as** and **Select** options. It provides control over mapping fields to config properties, and for multiple rows, it allows you to choose which value to select.

#### Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now has a maximum configuration option set. Options such as **Min**, **Max**, **Unit**, and **Thresholds** are part of the field configuration. If set, they are used by the visualization instead of any options manually configured in the panel editor options pane.

#### Value mappings

You can also transform a query result into value mappings. With this option, every row in the configuration query result defines a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Color | All values |

Grafana builds value mappings from your query result and applies them to the real data query results. You should see values being mapped and colored according to the config query results.

> **Note:** When you use this transformation for thresholds, the visualization continues to use the panel's base threshold.

  `}},convertFieldType:{name:"Convert field type",getHelperDocs:function(){return`
Use this transformation to modify the field type of a specified field.

This transformation has the following options:

- **Field** - Select from available fields
- **as** - Select the FieldType to convert to
  - **Numeric** - attempts to make the values numbers
  - **String** - will make the values strings
  - **Time** - attempts to parse the values as time
    - The input will be parsed according to the [Moment.js parsing format](https://momentjs.com/docs/#/parsing/)
    - It will parse the numeric input as a Unix epoch timestamp in milliseconds.
      You must multiply your input by 1000 if it's in seconds.
    - Will show an option to specify a DateFormat as input by a string like yyyy-mm-dd or DD MM YYYY hh:mm:ss
  - **Boolean** - will make the values booleans
  - **Enum** - will make the values enums
    - Will show a table to manage the enums
  - **Other** - attempts to parse the values as JSON

For example, consider the following query that could be modified by selecting the time field as Time and specifying Date Format as YYYY.

#### Sample Query

| Time       | Mark  | Value |
|------------|-------|-------|
| 2017-07-01 | above | 25    |
| 2018-08-02 | below | 22    |
| 2019-09-02 | below | 29    |
| 2020-10-04 | above | 22    |

The result:

#### Transformed Query

| Time                | Mark  | Value |
|---------------------|-------|-------|
| 2017-01-01 00:00:00 | above | 25    |
| 2018-01-01 00:00:00 | below | 22    |
| 2019-01-01 00:00:00 | below | 29    |
| 2020-01-01 00:00:00 | above | 22    |

This transformation allows you to flexibly adapt your data types, ensuring compatibility and consistency in your visualizations.
  `}},extractFields:{name:"Extract fields",getHelperDocs:function(r="shortcodeFigure"){return`
Use this transformation to select a source of data and extract content from it in different formats. This transformation has the following fields:

- **Source** - Select the field for the source of data.
- **Format** - Choose one of the following:
  - **JSON** - Parse JSON content from the source.
  - **Key+value pairs** - Parse content in the format 'a=b' or 'c:d' from the source.
  - **RegExp** - Parse content using a regular expression with [named capturing group(s)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Regular_expressions/Named_capturing_group) like \`/(?<NewField>.*)/\`.
  ${l("/media/docs/grafana/panels-visualizations/screenshot-regexp-detail-v11.3-2.png",r,"Example of a regular expression")}
  - **Auto** - Discover fields automatically.
- **Replace All Fields** - (Optional) Select this option to hide all other fields and display only your calculated field in the visualization.
- **Keep Time** - (Optional) Available only if **Replace All Fields** is true. Keeps the time field in the output.

Consider the following dataset:

#### Dataset Example

| Timestamp           | json_data     |
|---------------------|---------------|
| 1636678740000000000 | {"value": 1}  |
| 1636678680000000000 | {"value": 5}  |
| 1636678620000000000 | {"value": 12} |

You could prepare the data to be used by a [Time series panel][] with this configuration:

- Source: json_data
- Format: JSON
  - Field: value
  - Alias: my_value
- Replace all fields: true
- Keep time: true

This will generate the following output:

#### Transformed Data

| Timestamp           | my_value |
|---------------------|----------|
| 1636678740000000000 | 1        |
| 1636678680000000000 | 5        |
| 1636678620000000000 | 12       |

This transformation allows you to extract and format data in various ways. You can customize the extraction format based on your specific data needs.
  `},links:[{title:"Time series panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/time-series/"}]},fieldLookup:{name:"Lookup fields from resource",getHelperDocs:function(){return`
Use this transformation to enrich a field value by looking up additional fields from an external source. 
  
This transformation has the following fields:

- **Field** - Select a text field from your dataset.
- **Lookup** - Choose from **Countries**, **USA States**, and **Airports**.

This transformation currently supports spatial data.

For example, if you have this data:

#### Dataset Example

| Location  | Values |
|-----------|--------|
| AL        | 0      |
| AK        | 10     |
| Arizona   | 5      |
| Arkansas  | 1      |
| Somewhere | 5      |

With this configuration:

- Field: location
- Lookup: USA States

You'll get the following output:

#### Transformed Data

| Location  | ID | Name     | Lng         | Lat       | Values |
|-----------|----|----------|-------------|-----------|--------|
| AL        | AL | Alabama  | -80.891064  | 12.448457 | 0      |
| AK        | AK | Arkansas | -100.891064 | 24.448457 | 10     |
| Arizona   |    |          |             |           | 5      |
| Arkansas  |    |          |             |           | 1      |
| Somewhere |    |          |             |           | 5      |

This transformation lets you augment your data by fetching additional information from external sources, providing a more comprehensive dataset for analysis and visualization.
  `}},filterByRefId:{name:"Filter data by query refId",getHelperDocs:function(r="shortcodeFigure"){return`
Use this transformation to hide one or more queries in panels that have multiple queries.

Grafana displays the query identification letters in dark gray text. Click a query identifier to toggle filtering. If the query letter is white, then the results are displayed. If the query letter is dark, then the results are hidden.

> **Note:** This transformation is not available for Graphite because this data source does not support correlating returned data with queries.

In the example below, the panel has three queries (A, B, C). We removed the B query from the visualization.

${l("/static/img/docs/transformations/filter-by-query-stat-example-7-0.png",r,"A stat visualization with results from two queries, A and C")}
  `}},filterByValue:{name:"Filter data by values",getHelperDocs:function(){return`
Use this transformation to selectively filter data points directly within your visualization. This transformation provides options to include or exclude data based on one or more conditions applied to a selected field.

This transformation is very useful if your data source does not natively filter by values. You might also use this to narrow values to display if you are using a shared query.

The available conditions for all fields are:

- **Is Null** - Match if the value is null.
- **Is Not Null** - Match if the value is not null.
- **Equal** - Match if the value is equal to the specified value.
- **Not Equal** - Match if the value is not equal to the specified value.
- **Regex** - Match a regex expression.

The available conditions for string fields are:

- **Contains substring** - Match if the value contains the specified substring (case insensitive).
- **Does not contain substring** - Match if the value doesn't contain the specified substring (case insensitive).

The available conditions for number fields are:

- **Greater** - Match if the value is greater than the specified value.
- **Lower** - Match if the value is lower than the specified value.
- **Greater or equal** - Match if the value is greater or equal.
- **Lower or equal** - Match if the value is lower or equal.
- **In between** - Match a range between a specified minimum and maximum, min and max included.

The available conditions for time fields are:

- **In between** - Match a range between a specified minimum and maximum. The min and max values will pre-populate with variables to filter by selected time.

Consider the following dataset:

#### Dataset Example

| Time                | Temperature | Altitude |
|---------------------|-------------|----------|
| 2020-07-07 11:34:23 | 32          | 101      |
| 2020-07-07 11:34:22 | 28          | 125      |
| 2020-07-07 11:34:21 | 26          | 110      |
| 2020-07-07 11:34:20 | 23          | 98       |
| 2020-07-07 10:32:24 | 31          | 95       |
| 2020-07-07 10:31:22 | 20          | 85       |
| 2020-07-07 09:30:57 | 19          | 101      |

If you **Include** the data points that have a temperature below 30\xB0C, the configuration will look as follows:

- Filter Type: 'Include'
- Condition: Rows where 'Temperature' matches 'Lower Than' '30'

And you will get the following result, where only the temperatures below 30\xB0C are included:

#### Transformed Data

| Time                | Temperature | Altitude |
|---------------------|-------------|----------|
| 2020-07-07 11:34:22 | 28          | 125      |
| 2020-07-07 11:34:21 | 26          | 110      |
| 2020-07-07 11:34:20 | 23          | 98       |
| 2020-07-07 10:31:22 | 20          | 85       |
| 2020-07-07 09:30:57 | 19          | 101      |

You can add more than one condition to the filter. For example, you might want to include the data only if the altitude is greater than 100. To do so, add that condition to the following configuration:

- Filter type: 'Include' rows that 'Match All' conditions
- Condition 1: Rows where 'Temperature' matches 'Lower' than '30'
- Condition 2: Rows where 'Altitude' matches 'Greater' than '100'

When you have more than one condition, you can choose if you want the action (include/exclude) to be applied on rows that **Match all** conditions or **Match any** of the conditions you added.

In the example above, we chose **Match all** because we wanted to include the rows that have a temperature lower than 30\xB0C *AND* an altitude higher than 100. If we wanted to include the rows that have a temperature lower than 30\xB0C *OR* an altitude higher than 100 instead, then we would select **Match any**. This would include the first row in the original data, which has a temperature of 32\xB0C (does not match the first condition) but an altitude of 101 (which matches the second condition), so it is included.

Conditions that are invalid or incompletely configured are ignored.

This versatile data filtering transformation lets you to selectively include or exclude data points based on specific conditions. Customize the criteria to tailor your data presentation to meet your unique analytical needs.
  `}},filterFieldsByName:{name:"Filter fields by name",getHelperDocs:function(r="shortcodeFigure"){return`
Use this transformation to selectively remove parts of your query results. There are three ways to filter field names:

- [Using a regular expression](#use-a-regular-expression)
- [Manually selecting included fields](#manually-select-included-fields)
- [Using a dashboard variable](#use-a-dashboard-variable)

#### Use a regular expression

When you filter using a regular expression, field names that match the regular expression are included. 

For example, from the input data:

| Time                | dev-eu-west | dev-eu-north | prod-eu-west | prod-eu-north |
| ------------------- | ----------- | ------------ | ------------ | ------------- |
| 2023-03-04 23:56:23 | 23.5        | 24.5         | 22.2         | 20.2          |
| 2023-03-04 23:56:23 | 23.6        | 24.4         | 22.1         | 20.1          |

The result from using the regular expression 'prod.*' would be:

| Time                | prod-eu-west | prod-eu-north |
| ------------------- | ------------ | ------------- |
| 2023-03-04 23:56:23 | 22.2         | 20.2          |
| 2023-03-04 23:56:23 | 22.1         | 20.1          |

The regular expression can include an interpolated dashboard variable by using the \${variableName} syntax.

#### Manually select included fields

Click and uncheck the field names to remove them from the result. Fields that are matched by the regular expression are still included, even if they're unchecked.

#### Use a dashboard variable

Enable 'From variable' to let you select a dashboard variable that's used to include fields. By setting up a [dashboard variable][] with multiple choices, the same fields can be displayed across multiple visualizations.

${l("/static/img/docs/transformations/filter-name-table-before-7-0.png",r,"A table visualization with time, value, Min, and Max columns")}

Here's the table after we applied the transformation to remove the Min field.

${l("/static/img/docs/transformations/filter-name-table-after-7-0.png",r,"A table visualization with time, value, and Max columns")}

Here is the same query using a Stat visualization.

${l("/static/img/docs/transformations/filter-name-stat-after-7-0.png",r,"A stat visualization with value and Max fields")}

This transformation provides flexibility in tailoring your query results to focus on the specific fields you need for effective analysis and visualization.
  `}},formatString:{name:"Format string",getHelperDocs:function(){return`
Use this transformation to customize the output of a string field. This transformation has the following fields:

- **Upper case** - Formats the entire string in uppercase characters.
- **Lower case** - Formats the entire string in lowercase characters.
- **Sentence case** - Formats the first character of the string in uppercase.
- **Title case** - Formats the first character of each word in the string in uppercase.
- **Pascal case** - Formats the first character of each word in the string in uppercase and doesn't include spaces between words.
- **Camel case** - Formats the first character of each word in the string in uppercase, except the first word, and doesn't include spaces between words.
- **Snake case** - Formats all characters in the string in lowercase and uses underscores instead of spaces between words.
- **Kebab case** - Formats all characters in the string in lowercase and uses dashes instead of spaces between words.
- **Trim** - Removes all leading and trailing spaces from the string.
- **Substring** - Returns a substring of the string, using the specified start and end positions.

This transformation provides a convenient way to standardize and tailor the presentation of string data for better visualization and analysis.`}},formatTime:{name:"Format time",getHelperDocs:function(){return`
Use this transformation to customize the output of a time field. Output can be formatted using [Moment.js format strings](https://momentjs.com/docs/#/displaying/). For example, if you want to display only the year of a time field, the format string 'YYYY' can be used to show the calendar year (for example, 1999 or 2012).

**Before Transformation:**

| Timestamp           | Event        |
| ------------------- | ------------ |
| 1636678740000000000 | System Start |
| 1636678680000000000 | User Login   |
| 1636678620000000000 | Data Updated |

**After applying 'YYYY-MM-DD HH:mm:ss':**

| Timestamp           | Event        |
| ------------------- | ------------ |
| 2021-11-12 14:25:40 | System Start |
| 2021-11-12 14:24:40 | User Login   |
| 2021-11-12 14:23:40 | Data Updated |

This transformation lets you tailor the time representation in your visualizations, providing flexibility and precision in displaying temporal data.

> **Note:** This transformation is available in Grafana 10.1+ as an alpha feature.
  `}},groupBy:{name:"Group by",getHelperDocs:function(){return`
Use this transformation to group the data by a specified field (column) value and process calculations on each group. Click to see a list of calculation choices. For information about available calculations, refer to [Calculation types][].

Here's an example of original data.

| Time                | Server ID | CPU Temperature | Server Status |
| ------------------- | --------- | --------------- | ------------- |
| 2020-07-07 11:34:20 | server 1  | 80              | Shutdown      |
| 2020-07-07 11:34:20 | server 3  | 62              | OK            |
| 2020-07-07 10:32:20 | server 2  | 90              | Overload      |
| 2020-07-07 10:31:22 | server 3  | 55              | OK            |
| 2020-07-07 09:30:57 | server 3  | 62              | Rebooting     |
| 2020-07-07 09:30:05 | server 2  | 88              | OK            |
| 2020-07-07 09:28:06 | server 1  | 80              | OK            |
| 2020-07-07 09:25:05 | server 2  | 88              | OK            |
| 2020-07-07 09:23:07 | server 1  | 86              | OK            |

This transformation goes in two steps. First you specify one or multiple fields to group the data by. This will group all the same values of those fields together, as if you sorted them. For instance if we group by the Server ID field, then it would group the data this way:

| Time                | Server ID      | CPU Temperature | Server Status |
| ------------------- | -------------- | --------------- | ------------- |
| 2020-07-07 11:34:20 | **server 1**   | 80              | Shutdown      |
| 2020-07-07 09:28:06 | **server 1**   | 80              | OK            |
| 2020-07-07 09:23:07 | **server 1**   | 86              | OK            |
| 2020-07-07 10:32:20 | server 2       | 90              | Overload      |
| 2020-07-07 09:30:05 | server 2       | 88              | OK            |
| 2020-07-07 09:25:05 | server 2       | 88              | OK            |
| 2020-07-07 11:34:20 | **_server 3_** | 62              | OK            |
| 2020-07-07 10:31:22 | **_server 3_** | 55              | OK            |
| 2020-07-07 09:30:57 | **_server 3_** | 62              | Rebooting     |

All rows with the same value of Server ID are grouped together. Optionally, you can add a count of how may values fall in the selected group.

After choosing which field you want to group your data by, you can add various calculations on the other fields, and apply the calculation to each group of rows. For instance, we could want to calculate the average CPU temperature for each of those servers. So we can add the _mean_ calculation applied on the CPU Temperature field to get the following:

| Server ID | CPU Temperature (mean) |
| --------- | ---------------------- |
| server 1  | 82                     |
| server 2  | 88.6                   |
| server 3  | 59.6                   |

If you had added the count stat to the group by transformation, there would be an extra column showing that the count of each server from above was 3.

| Server ID | CPU Temperature (mean) | Server ID (count) |
| --------- | ---------------------- | ----------------- |
| server 1  | 82                     | 3                 |
| server 2  | 88.6                   | 3                 |
| server 3  | 59.6                   | 3                 |

And we can add more than one calculation. For instance:

- For field Time, we can calculate the _Last_ value, to know when the last data point was received for each server
- For field Server Status, we can calculate the _Last_ value to know what is the last state value for each server
- For field Temperature, we can also calculate the _Last_ value to know what is the latest monitored temperature for each server

We would then get:

| Server ID | CPU Temperature (mean) | CPU Temperature (last) | Time (last)         | Server Status (last) |
| --------- | ---------------------- | ---------------------- | ------------------- | -------------------- |
| server 1  | 82                     | 80                     | 2020-07-07 11:34:20 | Shutdown             |
| server 2  | 88.6                   | 90                     | 2020-07-07 10:32:20 | Overload             |
| server 3  | 59.6                   | 62                     | 2020-07-07 11:34:20 | OK                   |

This transformation allows you to extract essential information from your time series and present it conveniently.
  `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},groupingToMatrix:{name:"Grouping to matrix",getHelperDocs:function(){return`
Use this transformation to combine three fields\u2014which are used as input for the **Column**, **Row**, and **Cell value** fields from the query output\u2014and generate a matrix. The matrix is calculated as follows:

**Original data**

| Server ID | CPU Temperature | Server Status |
| --------- | --------------- | ------------- |
| server 1  | 82              | OK            |
| server 2  | 88.6            | OK            |
| server 3  | 59.6            | Shutdown      |

We can generate a matrix using the values of 'Server Status' as column names, the 'Server ID' values as row names, and the 'CPU Temperature' as content of each cell. The content of each cell will appear for the existing column ('Server Status') and row combination ('Server ID'). For the rest of the cells, you can select which value to display between: **Null**, **True**, **False**, or **Empty**.

**Output**

| Server IDServer Status | OK   | Shutdown |
| ----------------------- | ---- | -------- |
| server 1                | 82   |          |
| server 2                | 88.6 |          |
| server 3                |      | 59.6     |

Use this transformation to construct a matrix by specifying fields from your query results. The matrix output reflects the relationships between the unique values in these fields. This helps you present complex relationships in a clear and structured matrix format.
  `}},groupToNestedTable:{name:"Group to nested tables",getHelperDocs:function(r="shortcodeFigure"){return`
  Use this transformation to group the data by a specified field (column) value and process calculations on each group. Records are generated that share the same grouped field value, to be displayed in a nested table.
    
  To calculate a statistic for a field, click the selection box next to it and select the **Calculate** option:

  ${l("/static/img/docs/transformations/nested-table-select-calculation.png",r,"A select box showing the Group and Calculate options for the transformation.")}

  Once **Calculate** has been selected, another selection box will appear next to the respective field which will allow statistics to be selected:

  ${l("/static/img/docs/transformations/nested-table-select-stat.png",r,"A select box showing available statistic calculations once the calculate option for the field has been selected.")}

  For information about available calculations, refer to [Calculation types][].

  Here's an example of original data:

  | Time                | Server ID | CPU Temperature | Server Status |
  | ------------------- | --------- | --------------- | ------------- |
  | 2020-07-07 11:34:20 | server 1  | 80              | Shutdown      |
  | 2020-07-07 11:34:20 | server 3  | 62              | OK            |
  | 2020-07-07 10:32:20 | server 2  | 90              | Overload      |
  | 2020-07-07 10:31:22 | server 3  | 55              | OK            |
  | 2020-07-07 09:30:57 | server 3  | 62              | Rebooting     |
  | 2020-07-07 09:30:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:28:06 | server 1  | 80              | OK            |
  | 2020-07-07 09:25:05 | server 2  | 88              | OK            |
  | 2020-07-07 09:23:07 | server 1  | 86              | OK            |

  This transformation has two steps. First, specify one or more fields by which to group the data. This groups all the same values of those fields together, as if you sorted them. For instance, if you group by the Server ID field, Grafana groups the data this way:

  | Server ID      |  |
  | -------------- | ------------- |
  | server 1 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>80</td><td>Shutdown</td></tr><tr><td>2020-07-07 09:28:06</td><td>80</td><td>OK</td></tr><tr><td>2020-07-07 09:23:07</td><td>86</td><td>OK</td></tr></tbody></table> |
  | server 2 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 10:32:20</td><td>90</td><td>Overload</td></tr><tr><td>2020-07-07 09:30:05</td><td>88</td><td>OK</td></tr><tr><td>2020-07-07 09:25:05</td><td>88</td><td>OK</td></tr></tbody></table> |
  | server 3 | <table><th><tr><td>Time</td><td>CPU Temperature</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>62</td><td>OK</td></tr><tr><td>2020-07-07 10:31:22</td><td>55</td><td>OK</td></tr><tr><td>2020-07-07 09:30:57</td><td>62</td><td>Rebooting</td></tr></tbody></table> |

  After choosing the field by which you want to group your data, you can add various calculations on the other fields and apply the calculation to each group of rows. For instance, you might want to calculate the average CPU temperature for each of those servers. To do so, add the **mean calculation** applied on the CPU Temperature field to get the following result:

  | Server ID      | CPU Temperatute (mean) | |
  | -------------- | ------------- | ------------- |
  | server 1 | 82 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>Shutdown</td></tr><tr><td>2020-07-07 09:28:06</td><td>OK</td></tr><tr><td>2020-07-07 09:23:07</td><td>OK</td></tr></tbody></table> |
  | server 2 | 88.6 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 10:32:20</td><td>Overload</td></tr><tr><td>2020-07-07 09:30:05</td><td>OK</td></tr><tr><td>2020-07-07 09:25:05</td><td>OK</td></tr></tbody></table> |
  | server 3 | 59.6 | <table><th><tr><td>Time</td><td>Server Status</td></tr></th><tbody><tr><td>2020-07-07 11:34:20</td><td>OK</td></tr><tr><td>2020-07-07 10:31:22</td><td>OK</td></tr><tr><td>2020-07-07 09:30:57</td><td>Rebooting</td></tr></tbody></table> |
      `},links:[{title:"Calculation types",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/calculation-types/"}]},heatmap:{name:"Create heatmap",getHelperDocs:function(){return`
Use this transformation to prepare histogram data for visualizing trends over time. Similar to the heatmap visualization, this transformation converts histogram metrics into temporal buckets.

#### X Bucket

This setting determines how the x-axis is split into buckets.

- **Size** - Specify a time interval in the input field. For example, a time range of '1h' creates cells one hour wide on the x-axis.
- **Count** - For non-time-related series, use this option to define the number of elements in a bucket.

#### Y Bucket

This setting determines how the y-axis is split into buckets.

- **Linear**
- **Logarithmic** - Choose between log base 2 or log base 10.
- **Symlog** - Uses a symmetrical logarithmic scale. Choose between log base 2 or log base 10, allowing for negative values.

Assume you have the following dataset:

| Timestamp           | Value |
|-------------------- |-------|
| 2023-01-01 12:00:00 | 5     |
| 2023-01-01 12:15:00 | 10    |
| 2023-01-01 12:30:00 | 15    |
| 2023-01-01 12:45:00 | 8     |

- With X Bucket set to 'Size: 15m' and Y Bucket as 'Linear', the histogram organizes values into time intervals of 15 minutes on the x-axis and linearly on the y-axis.
- For X Bucket as 'Count: 2' and Y Bucket as 'Logarithmic (base 10)', the histogram groups values into buckets of two on the x-axis and use a logarithmic scale on the y-axis.
  `}},histogram:{name:"Histogram",getHelperDocs:function(){return`
Use this transformation to generate a histogram based on input data, allowing you to visualize the distribution of values.

- **Bucket size** - The range between the lowest and highest items in a bucket (xMin to xMax).
- **Bucket offset** - The offset for non-zero-based buckets.
- **Combine series** - Create a unified histogram using all available series.

**Original data**

Series 1:

| A | B | C |
| - | - | - |
| 1 | 3 | 5 |
| 2 | 4 | 6 |
| 3 | 5 | 7 |
| 4 | 6 | 8 |
| 5 | 7 | 9 |

Series 2:

| C |
| - |
| 5 |
| 6 |
| 7 |
| 8 |
| 9 |

**Output**

| xMin | xMax | A | B | C | C |
| ---- | ---- | --| --| --| --|
| 1    | 2    | 1 | 0 | 0 | 0 |
| 2    | 3    | 1 | 0 | 0 | 0 |
| 3    | 4    | 1 | 1 | 0 | 0 |
| 4    | 5    | 1 | 1 | 0 | 0 |
| 5    | 6    | 1 | 1 | 1 | 1 |
| 6    | 7    | 0 | 1 | 1 | 1 |
| 7    | 8    | 0 | 1 | 1 | 1 |
| 8    | 9    | 0 | 0 | 1 | 1 |
| 9    | 10   | 0 | 0 | 1 | 1 |

Visualize the distribution of values using the generated histogram, providing insights into the data's spread and density.
  `}},joinByField:{name:"Join by field",getHelperDocs:function(r="shortcodeFigure"){return`
Use this transformation to merge multiple results into a single table, enabling the consolidation of data from different queries.

This is especially useful for converting multiple time series results into a single wide table with a shared time field.

#### Inner join (for Time Series or SQL-like data)

An inner join merges data from multiple tables where all tables share the same value from the selected field. This type of join excludes data where values do not match in every result.

Use this transformation to combine the results from multiple queries (combining on a passed join field or the first time column) into one result, and drop rows where a successful join cannot occur. This is not optimized for large Time Series datasets.

In the following example, two queries return Time Series data. It is visualized as two separate tables before applying the inner join transformation.

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |
| 2020-07-07 11:14:20 | postgre | 345001233 |

**Query B:**

| Time                | Server   | Errors |
| ------------------- | -------- | ------ |
| 2020-07-07 11:34:20 | server 1 | 15     |
| 2020-07-07 11:24:20 | server 2 | 5      |
| 2020-07-07 11:04:20 | server 3 | 10     |

The result after applying the inner join transformation looks like the following:

| Time                | Job     | Uptime    | Server   | Errors |
| ------------------- | ------- | --------- | -------- | ------ |
| 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
| 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

This works in the same way for non-Time Series tabular data as well.

**Students**

| StudentID | Name     | Major            |
| --------- | -------- | ---------------- |
| 1         | John     | Computer Science |
| 2         | Emily    | Mathematics      |
| 3         | Michael  | Physics          |
| 4         | Jennifer | Chemistry        |

**Enrollments**

| StudentID | CourseID | Grade |
|-----------|----------|-------|
| 1         | CS101    | A     |
| 1         | CS102    | B     |
| 2         | MATH201  | A     |
| 3         | PHYS101  | B     |
| 5         | HIST101  | B     |

The result after applying the inner join transformation looks like the following:

| StudentID | Name    | Major            | CourseID | Grade |
| --------- | ------- | ---------------- | -------  | ----- |
| 1         | John    | Computer Science | CS101    | A     |
| 1         | John    | Computer Science | CS102    | B     |
| 2         | Emily   | Mathematics      | MATH201  | A     |
| 3         | Michael | Physics          | PHYS101  | B     |

The inner join only includes rows where there is a match between the "StudentID" in both tables. In this case, the result does not include "Jennifer" from the "Students" table because there are no matching enrollments for her in the "Enrollments" table.

#### Outer join (for Time Series data)

An outer join includes all data from an inner join and rows where values do not match in every input. While the inner join joins Query A and Query B on the time field, the outer join includes all rows that don't match on the time field.

In the following example, two queries return table data. It is visualized as two tables before applying the outer join transformation.

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |
| 2020-07-07 11:14:20 | postgre | 345001233 |

**Query B:**

| Time                | Server   | Errors |
| ------------------- | -------- | ------ |
| 2020-07-07 11:34:20 | server 1 | 15     |
| 2020-07-07 11:24:20 | server 2 | 5      |
| 2020-07-07 11:04:20 | server 3 | 10     |

The result after applying the outer join transformation looks like the following:

| Time                | Job     | Uptime    | Server   | Errors |
| ------------------- | ------- | --------- | -------- | ------ |
| 2020-07-07 11:04:20 |         |           | server 3 | 10     |
| 2020-07-07 11:14:20 | postgre | 345001233 |          |        |
| 2020-07-07 11:34:20 | node    | 25260122  | server 1 | 15     |
| 2020-07-07 11:24:20 | postgre | 123001233 | server 2 | 5      |

In the following example, a template query displays time series data from multiple servers in a table visualization. The results of only one query can be viewed at a time.

${l("/static/img/docs/transformations/join-fields-before-7-0.png",r,"A table visualization showing results for one server")}

I applied a transformation to join the query results using the time field. Now I can run calculations, combine, and organize the results in this new table.

${l("/static/img/docs/transformations/join-fields-after-7-0.png",r,"A table visualization showing results for multiple servers")}

#### Outer join (for SQL-like data)

A tabular outer join combining tables so that the result includes matched and unmatched rows from either or both tables.

| StudentID | Name      | Major            |
| --------- | --------- | ---------------- |
| 1         | John      | Computer Science |
| 2         | Emily     | Mathematics      |
| 3         | Michael   | Physics          |
| 4         | Jennifer  | Chemistry        |

Can now be joined with:

| StudentID | CourseID | Grade |
| --------- | -------- | ----- |
| 1         | CS101    | A     |
| 1         | CS102    | B     |
| 2         | MATH201  | A     |
| 3         | PHYS101  | B     |
| 5         | HIST101  | B     |

The result after applying the outer join transformation looks like the following:

| StudentID | Name     | Major            | CourseID | Grade |
| --------- | -------- | ---------------- | -------- | ----- |
| 1         | John     | Computer Science | CS101    | A     |
| 1         | John     | Computer Science | CS102    | B     |
| 2         | Emily    | Mathematics      | MATH201  | A     |
| 3         | Michael  | Physics          | PHYS101  | B     |
| 4         | Jennifer | Chemistry        | NULL     | NULL  |
| 5         | NULL     | NULL             | HIST101  | B     |

Combine and analyze data from various queries with table joining for a comprehensive view of your information.
  `}},joinByLabels:{name:"Join by labels",getHelperDocs:function(){return`
Use this transformation to join multiple results into a single table.

This is especially useful for converting multiple time series results into a single wide table with a shared **Label** field.

- **Join** - Select the label to join by between the labels available or common across all time series.
- **Value** - The name for the output result.

#### Example

##### Input

series1{what="Temp", cluster="A", job="J1"}

| Time | Value |
| ---- | ----- |
| 1    | 10    |
| 2    | 200   |

series2{what="Temp", cluster="B", job="J1"}

| Time | Value |
| ---- | ----- |
| 1    | 10    |
| 2    | 200   |

series3{what="Speed", cluster="B", job="J1"}

| Time | Value |
| ---- | ----- |
| 22   | 22    |
| 28   | 77    |

##### Config

value: "what"

##### Output

| cluster | job | Temp | Speed |
| ------- | --- | ---- | ----- |
| A       | J1  | 10   |       |
| A       | J1  | 200  |       |
| B       | J1  | 10   | 22    |
| B       | J1  | 200  | 77    |

Combine and organize time series data effectively with this transformation for comprehensive insights.
  `}},labelsToFields:{name:"Labels to fields",getHelperDocs:function(){return`
Use this transformation to convert time series results with labels or tags into a table, including each label's keys and values in the result. Display labels as either columns or row values for enhanced data visualization.

Given a query result of two time series:

- Series 1: labels Server=Server A, Datacenter=EU
- Series 2: labels Server=Server B, Datacenter=EU

In "Columns" mode, the result looks like this:

| Time                | Server   | Datacenter | Value |
| ------------------- | -------- | ---------- | ----- |
| 2020-07-07 11:34:20 | Server A | EU         | 1     |
| 2020-07-07 11:34:20 | Server B | EU         | 2     |

In "Rows" mode, the result has a table for each series and show each label value like this:

| label      | value    |
| ---------- | -------- |
| Server     | Server A |
| Datacenter | EU       |

| label      | value    |
| ---------- | -------- |
| Server     | Server B |
| Datacenter | EU       |

#### Value field name

If you selected Server as the **Value field name**, then you would get one field for every value of the Server label.

| Time                | Datacenter | Server A | Server B |
| ------------------- | ---------- | -------- | -------- |
| 2020-07-07 11:34:20 | EU         | 1        | 2        |

#### Merging behavior

The labels to fields transformer is internally two separate transformations. The first acts on single series and extracts labels to fields. The second is the [merge](#merge) transformation that joins all the results into a single table. The merge transformation tries to join on all matching fields. This merge step is required and cannot be turned off.

To illustrate this, here is an example where you have two queries that return time series with no overlapping labels.

- Series 1: labels Server=ServerA
- Series 2: labels Datacenter=EU

This will first result in these two tables:

| Time                | Server  | Value |
| ------------------- | ------- | ----- |
| 2020-07-07 11:34:20 | ServerA | 10    |

| Time                | Datacenter | Value |
| ------------------- | ---------- | ----- |
| 2020-07-07 11:34:20 | EU         | 20    |

After merge:

| Time                | Server  | Value | Datacenter |
| ------------------- | ------- | ----- | ---------- |
| 2020-07-07 11:34:20 | ServerA | 10    |            |
| 2020-07-07 11:34:20 |         | 20    | EU         |

Convert your time series data into a structured table format for a clearer and more organized representation.
  `}},limit:{name:"Limit",getHelperDocs:function(){return`
Use this transformation to restrict the number of rows displayed, providing a more focused view of your data. This is particularly useful when dealing with large datasets.

Below is an example illustrating the impact of the **Limit** transformation on a response from a data source:

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |
| 2020-07-07 10:31:22 | Temperature | 22    |
| 2020-07-07 09:30:57 | Humidity    | 33    |
| 2020-07-07 09:30:05 | Temperature | 19    |

Here is the result after adding a Limit transformation with a value of '3':

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |

Using a negative number, you can keep values from the end of the set. Here is the result after adding a Limit transformation with a value of '-3':

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 10:31:22 | Temperature | 22    |
| 2020-07-07 09:30:57 | Humidity    | 33    |
| 2020-07-07 09:30:05 | Temperature | 19    |


This transformation helps you tailor the visual presentation of your data to focus on the most relevant information.
  `}},merge:{name:"Merge series/tables",getHelperDocs:function(){return`
Use this transformation to combine the results from multiple queries into a single result, which is particularly useful when using the table panel visualization. This transformation merges values into the same row if the shared fields contain the same data.

Here's an example illustrating the impact of the **Merge series/tables** transformation on two queries returning table data:

**Query A:**

| Time                | Job     | Uptime    |
| ------------------- | ------- | --------- |
| 2020-07-07 11:34:20 | node    | 25260122  |
| 2020-07-07 11:24:20 | postgre | 123001233 |

**Query B:**

| Time                | Job     | Errors |
| ------------------- | ------- | ------ |
| 2020-07-07 11:34:20 | node    | 15     |
| 2020-07-07 11:24:20 | postgre | 5      |

Here is the result after applying the Merge transformation.

| Time                | Job     | Errors | Uptime    |
| ------------------- | ------- | ------ | --------- |
| 2020-07-07 11:34:20 | node    | 15     | 25260122  |
| 2020-07-07 11:24:20 | postgre | 5      | 123001233 |

This transformation combines values from Query A and Query B into a unified table, enhancing the presentation of data for better insights.
  `},links:[{title:"Table panel",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/"}]},organize:{name:"Organize fields by name",getHelperDocs:function(){return`
Use this transformation to provide the flexibility to rename, reorder, or hide fields returned by a single query in your panel. This transformation is applicable only to panels with a single query. If your panel has multiple queries, consider using an "Outer join" transformation or removing extra queries.

#### Transforming fields

Grafana displays a list of fields returned by the query, allowing you to perform the following actions:

- **Set field order mode** - If the mode is **Manual**, you can change the field order by hovering the cursor over a field and dragging the field to its new position. If it's **Auto**, use the **OFF**, **ASC**, and **DESC** options to order by any labels on the field or by the field name. For any field that is sorted **ASC** or **DESC**, you can drag the option to set the priority of the sorting.
- **Change field order** - Hover over a field, and when your cursor turns into a hand, drag the field to its new position.
- **Hide or show a field** - Use the eye icon next to the field name to toggle the visibility of a specific field.
- **Rename fields** - Type a new name in the "Rename <field>" box to customize field names.

#### Example:

##### Original Query Result

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |

##### After Applying Field Overrides

| Time                | Sensor      | Reading |
| ------------------- | ----------- | ------- |
| 2020-07-07 11:34:20 | Temperature | 25      |
| 2020-07-07 11:34:20 | Humidity    | 22      |
| 2020-07-07 10:32:20 | Humidity    | 29      |

This transformation lets you to tailor the display of query results, ensuring a clear and insightful representation of your data in Grafana.
  `}},partitionByValues:{name:"Partition by values",getHelperDocs:function(){return`
Use this transformation to streamline the process of graphing multiple series without the need for multiple queries with different 'WHERE' clauses.

This is particularly useful when dealing with a metrics SQL table, as illustrated below:

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | US     | 1520  |
| 2022-10-20 12:00:00 | EU     | 2936  |
| 2022-10-20 01:00:00 | US     | 1327  |
| 2022-10-20 01:00:00 | EU     | 912   |

With the **Partition by values** transformation, you can issue a single query and split the results by unique values in one or more columns (fields) of your choosing. The following example uses 'Region':

'SELECT Time, Region, Value FROM metrics WHERE Time > "2022-10-20"'

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | US     | 1520  |
| 2022-10-20 01:00:00 | US     | 1327  |

| Time                | Region | Value |
| ------------------- | ------ | ----- |
| 2022-10-20 12:00:00 | EU     | 2936  |
| 2022-10-20 01:00:00 | EU     | 912   |

This transformation simplifies the process and enhances the flexibility of visualizing multiple series within the same time series visualization.
  `}},prepareTimeSeries:{name:"Prepare time series",getHelperDocs:function(){return`
Use this transformation to address issues when a data source returns time series data in a format that isn't compatible with the desired visualization. This transformation allows you to convert time series data between wide and long formats, providing flexibility in data frame structures.

#### Available options

##### Wide time series

Select this option to transform the time series data frame from the long format to the wide format. If your data source returns time series data in a long format and your visualization requires a wide format, this transformation simplifies the process.

A wide time series combines data into a single frame with one shared, ascending time field. Time fields do not repeat and multiple values extend in separate columns.

**Example: Converting from long to wide format**

| Timestamp           | Variable | Value |
|---------------------|----------|-------|
| 2023-01-01 00:00:00 | Value1   | 10    |
| 2023-01-01 00:00:00 | Value2   | 20    |
| 2023-01-01 01:00:00 | Value1   | 15    |
| 2023-01-01 01:00:00 | Value2   | 25    |

**Transformed to:**

| Timestamp           | Value1 | Value2 |
|---------------------|--------|--------|
| 2023-01-01 00:00:00 | 10     | 20     |
| 2023-01-01 01:00:00 | 15     | 25     |

##### Multi-frame time series

Multi-frame time series break data into multiple frames that all contain two fields: a time field and a numeric value field. Time is always ascending. String values are represented as field labels.

##### Long time series

A long time series combines data into one frame, with the first field being an ascending time field. The time field might have duplicates. String values are in separate fields, and there might be more than one. 

**Example: Converting to long format**

| Value1 | Value2 |  Timestamp          |
|--------|--------|---------------------|
| 10     | 20     | 2023-01-03 00:00:00 |
| 30     | 40     | 2023-01-02 00:00:00 |
| 50     | 60     | 2023-01-01 00:00:00 |
| 70     | 80     | 2023-01-01 00:00:00 |

**Transformed to:**

| Timestamp           | Value1 | Value2 |
|---------------------|--------|--------|
| 2023-01-01 00:00:00 | 70     | 80     |
| 2023-01-01 01:00:00 | 50     | 60     |
| 2023-01-02 01:00:00 | 30     | 40     |
| 2023-01-03 01:00:00 | 10     | 20     |

  `},links:[{title:"Data frames",url:"https://grafana.com/docs/grafana/latest/developers/plugins/introduction-to-plugin-development/data-frames/"}]},reduce:{name:"Reduce",getHelperDocs:function(){return`
Use this transformation to apply a calculation to each field in the data frame and return a single value. This transformation is particularly useful for consolidating multiple time series data into a more compact, summarized format. Time fields are removed when applying this transformation.

Consider the input:

**Query A:**

| Time                | Temp | Uptime  |
| ------------------- | ---- | ------- |
| 2020-07-07 11:34:20 | 12.3 | 256122  |
| 2020-07-07 11:24:20 | 15.4 | 1230233 |

**Query B:**

| Time                | AQI | Errors |
| ------------------- | --- | ------ |
| 2020-07-07 11:34:20 | 6.5 | 15     |
| 2020-07-07 11:24:20 | 3.2 | 5      |

The reduce transformer has two modes:

- **Series to rows** - Creates a row for each field and a column for each calculation.
- **Reduce fields** - Keeps the existing frame structure, but collapses each field into a single value.

For example, if you used the **First** and **Last** calculation with a **Series to rows** transformation, then
the result would be:

| Field  | First  | Last    |
| ------ | ------ | ------- |
| Temp   | 12.3   | 15.4    |
| Uptime | 256122 | 1230233 |
| AQI    | 6.5    | 3.2     |
| Errors | 15     | 5       |

The **Reduce fields** with the **Last** calculation,
results in two frames, each with one row:

**Query A:**

| Temp | Uptime  |
| ---- | ------- |
| 15.4 | 1230233 |

**Query B:**

| AQI | Errors |
| --- | ------ |
| 3.2 | 5      |

This flexible transformation simplifies the process of consolidating and summarizing data from multiple time series into a more manageable and organized format.
  `}},renameByRegex:{name:"Rename by regex",getHelperDocs:function(r="shortcodeFigure"){return`
Use this transformation to rename parts of the query results using a regular expression and replacement pattern.

You can specify a regular expression, which is only applied to matches, along with a replacement pattern that support back references. For example, let's imagine you're visualizing CPU usage per host and you want to remove the domain name. You could set the regex to '/^([^.]+).*/' and the replacement pattern to '$1', 'web-01.example.com' would become 'web-01'.

> **Note:** The Rename by regex transformation was improved in Grafana v9.0.0 to allow global patterns of the form '/<stringToReplace>/g'. Depending on the regex match used, this may cause some transformations to behave slightly differently. You can guarantee the same behavior as before by wrapping the match string in forward slashes '(/)', e.g. '(.*)' would become '/(.*)/'.

In the following example, we are stripping the 'A-' prefix from field names. In the before image, you can see everything is prefixed with 'A-':

${l("/media/docs/grafana/panels-visualizations/screenshot-rename-by-regex-before-v11.0.png",r,"A time series with full series names")}

With the transformation applied, you can see we are left with just the remainder of the string.

${l("/media/docs/grafana/panels-visualizations/screenshot-rename-by-regex-after-v11.0.png",r,"A time series with shortened series names")}

This transformation lets you to tailor your data to meet your visualization needs, making your dashboards more informative and user-friendly.
  `}},rowsToFields:{name:"Rows to fields",getHelperDocs:function(){return`
Use this transformation to convert rows into separate fields. This can be useful because fields can be styled and configured individually. It can also use additional fields as sources for dynamic field configuration or map them to field labels. The additional labels can then be used to define better display names for the resulting fields.

This transformation includes a field table which lists all fields in the data returned by the configuration query. This table gives you control over what field should be mapped to each configuration property (the **Use as** option). You can also choose which value to select if there are multiple rows in the returned data.

This transformation requires:

- One field to use as the source of field names.

  By default, the transform uses the first string field as the source. You can override this default setting by selecting **Field name** in the **Use as** column for the field you want to use instead.

- One field to use as the source of values.

  By default, the transform uses the first number field as the source. But you can override this default setting by selecting **Field value** in the **Use as** column for the field you want to use instead.

Useful when visualizing data in:

- Gauge
- Stat
- Pie chart

#### Map extra fields to labels

If a field does not map to config property Grafana will automatically use it as source for a label on the output field-

**Example:**

| Name    | DataCenter | Value |
| ------- | ---------- | ----- |
| ServerA | US         | 100   |
| ServerB | EU         | 200   |

**Output:**

| ServerA (labels: DataCenter: US) | ServerB (labels: DataCenter: EU) |
| -------------------------------- | -------------------------------- |
| 10                               | 20                               |

The extra labels can now be used in the field display name provide more complete field names.

If you want to extract config from one query and apply it to another you should use the config from query results transformation.

#### Example

**Input:**

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

**Output:**

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field configuration and if set like this will be used by the visualization instead of any options manually configured in the panel editor options pane.

This transformation enables the conversion of rows into individual fields, facilitates dynamic field configuration, and maps additional fields to labels.
  `}},seriesToRows:{name:"Series to rows",getHelperDocs:function(){return`
Use this transformation to combine the result from multiple time series data queries into one single result. This is helpful when using the table panel visualization.

The result from this transformation will contain three columns: Time, Metric, and Value. The Metric column is added so you easily can see from which query the metric originates from. Customize this value by defining Label on the source query.

In the example below, we have two queries returning time series data. It is visualized as two separate tables before applying the transformation.

**Query A:**

| Time                | Temperature |
| ------------------- | ----------- |
| 2020-07-07 11:34:20 | 25          |
| 2020-07-07 10:31:22 | 22          |
| 2020-07-07 09:30:05 | 19          |

**Query B:**

| Time                | Humidity |
| ------------------- | -------- |
| 2020-07-07 11:34:20 | 24       |
| 2020-07-07 10:32:20 | 29       |
| 2020-07-07 09:30:57 | 33       |

Here is the result after applying the Series to rows transformation.

| Time                | Metric      | Value |
| ------------------- | ----------- | ----- |
| 2020-07-07 11:34:20 | Temperature | 25    |
| 2020-07-07 11:34:20 | Humidity    | 22    |
| 2020-07-07 10:32:20 | Humidity    | 29    |
| 2020-07-07 10:31:22 | Temperature | 22    |
| 2020-07-07 09:30:57 | Humidity    | 33    |
| 2020-07-07 09:30:05 | Temperature | 19    |

This transformation facilitates the consolidation of results from multiple time series queries, providing a streamlined and unified dataset for efficient analysis and visualization in a tabular format.

  `}},sortBy:{name:"Sort by",getHelperDocs:function(){return`
Use this transformation to sort each frame within a query result based on a specified field, making your data easier to understand and analyze. By configuring the desired field for sorting, you can control the order in which the data is presented in the table or visualization.

Use the **Reverse** switch to inversely order the values within the specified field. This functionality is particularly useful when you want to quickly toggle between ascending and descending order to suit your analytical needs.

For example, in a scenario where time-series data is retrieved from a data source, the **Sort by** transformation can be applied to arrange the data frames based on the timestamp, either in ascending or descending order, depending on the analytical requirements. This capability ensures that you can easily navigate and interpret time-series data, gaining valuable insights from the organized and visually coherent presentation.
  `}},spatial:{name:"Spatial",getHelperDocs:function(){return`
Use this transformation to apply spatial operations to query results.

- **Action** - Select an action:
  - **Prepare spatial field** - Set a geometry field based on the results of other fields.
    - **Location mode** - Select a location mode (these options are shared by the **Calculate value** and **Transform** modes):
      - **Auto** - Automatically identify location data based on default field names.
      - **Coords** - Specify latitude and longitude fields.
      - **Geohash** - Specify a geohash field.
      - **Lookup** - Specify Gazetteer location fields.
  - **Calculate value** - Use the geometry to define a new field (heading/distance/area).
    - **Function** - Choose a mathematical operation to apply to the geometry:
      - **Heading** - Calculate the heading (direction) between two points.
      - **Area** - Calculate the area enclosed by a polygon defined by the geometry.
      - **Distance** - Calculate the distance between two points.
  - **Transform** - Apply spatial operations to the geometry.
    - **Operation** - Choose an operation to apply to the geometry:
      - **As line** - Create a single line feature with a vertex at each row.
      - **Line builder** - Create a line between two points.

This transformation allows you to manipulate and analyze geospatial data, enabling operations such as creating lines between points, calculating spatial properties, and more.
  `}},timeSeriesTable:{name:"Time series to table transform",getHelperDocs:function(r="shortcodeFigure"){return`
Use this transformation to convert time series results into a table, transforming a time series data frame into a **Trend** field which can then be used with the [sparkline cell type][]. If there are multiple time series queries, each will result in a separate table data frame. These can be joined using join or merge transforms to produce a single table with multiple sparklines per row.

${l("/static/img/docs/transformations/table-sparklines.png",r,"A table panel showing multiple values and their corresponding sparklines.")}

For each generated **Trend** field value, a calculation function can be selected. This value is displayed next to the sparkline and will be used for sorting table rows.

${l("/static/img/docs/transformations/timeseries-table-select-stat.png",r,"A select box showing available statistics that can be calculated.")}


> **Note:** This transformation is available in Grafana 9.5+ as an opt-in beta feature. Modify the Grafana [configuration file][] to use it.
  `},links:[{title:"sparkline cell type",url:"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/#sparkline"},{title:"configuration file",url:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/"}]},transpose:{name:"Transpose",getHelperDocs:function(r="shortcodeFigure"){return`
Use this transformation to pivot the data frame, converting rows into columns and columns into rows. This transformation is particularly useful when you want to switch the orientation of your data to better suit your visualization needs.
If you have multiple types, it will default to string type. You can select how empty cells should be represented.

**Before Transformation:**

| env  | January   | February |
| ---- | --------- | -------- |
| prod | 1 | 2 |
| dev | 3 | 4 |

**After applying transpose transformation:**

| Field  | prod   | dev |
| ---- | --------- | -------- |
| January | 1 | 3 |
| February  | 2 | 4 |

${l("/media/docs/grafana/transformations/screenshot-grafana-11-2-transpose-transformation.png",r,"Before and after transpose transformation")}
  `}},regression:{name:"Trendline",getHelperDocs:function(r="shortcodeFigure"){return`
Use this transformation to create a new data frame containing values predicted by a statistical model. This is useful for finding a trend in chaotic data. It works by fitting a mathematical function to the data, using either linear or polynomial regression. The data frame can then be used in a visualization to display a trendline.

There are two different models:

- **Linear** - Fits a linear function to the data.
${l("/static/img/docs/transformations/linear-regression.png",r,"A time series visualization with a straight line representing the linear function")}
- **Polynomial** - Fits a polynomial function to the data.
${l("/static/img/docs/transformations/polynomial-regression.png",r,"A time series visualization with a curved line representing the polynomial function")}

> **Note:** This transformation was previously called regression analysis.
  `}}};function s(){return`
  Go to the <a href="https://grafana.com/docs/grafana/latest/panels/transformations/?utm_source=grafana" target="_blank" rel="noreferrer">
  transformation documentation
  </a> for more general documentation.
  `}function l(r,c,i){return c==="shortcodeFigure"?`{{< figure src="${r}" class="docs-image--no-shadow" max-width= "1100px" alt="${i}" >}}`:`![${i}](https://grafana.com${r})`}},84522:(ne,A,e)=>{"use strict";e.d(A,{J:()=>r});var n=e(74848),a=e(22803),s=e(76319),l=e(63142);const r=({onClick:i,"aria-label":o,style:h})=>{const f=(0,l.of)(c);return(0,n.jsx)(s.K,{"aria-label":o??"Close",className:f,name:"times",onClick:i,style:h})},c=i=>(0,a.css)({position:"absolute",margin:"0px",right:5,top:6})},84523:(ne,A,e)=>{"use strict";e.d(A,{BH:()=>B,IJ:()=>D,JG:()=>T,T6:()=>x,_u:()=>K,b0:()=>O,ir:()=>S});var n=e(2543),a=e.n(n),s=e(69439),l=e(43173),r=e(78282),c=e(24619),i=e(67817),o=e(54),h=e(95443),f=e(52161),g=e(20437),u=e(29609),E=e(15629),v=e(6194);const p=(0,E.P8)(l.$.unifiedAlerting?.minInterval??"10s"),m=(0,E.P8)("1m"),y=1/0,d="0s",x=(0,E.an)((0,n.clamp)(p,m,y));function b(){const F=l.$.unifiedAlerting?.defaultRecordingRulesTargetDatasourceUID;if(F)try{const I=(0,r.l)().getInstanceSettings(F);if(I&&(0,f.Gb)(I))return F}catch{}}const D=F=>{const{canCreateGrafanaRules:I,canCreateCloudRules:V}=(0,o.Q9)(),M=(()=>{if(F===i.Z.grafanaRecording)return i.Z.grafanaRecording;if(I)return i.Z.grafana;if(V)return i.Z.cloudAlerting})();return Object.freeze({name:"",uid:"",labels:[{key:"",value:""}],annotations:h.kl,dataSourceName:f.hY,type:M,group:"",folder:void 0,queries:[],recordingRulesQueries:[],condition:"",noDataState:c.Q8.NoData,execErrState:c.Q8.Error,evaluateFor:x,keepFiringFor:d,evaluateEvery:x,manualRouting:C(),contactPoints:{},overrideGrouping:!1,overrideTimings:!1,muteTimeIntervals:[],editorSettings:P(F),targetDatasourceUid:b(),namespace:"",expression:"",forTime:1,forTimeUnit:"m"})},C=()=>localStorage.getItem(g.Q8)!=="false";function P(F){if(F===i.Z.grafanaRecording||!(l.$.featureToggles.alertingQueryAndExpressionsStepMode??!1))return;const V=localStorage.getItem(g.Os),M=localStorage.getItem(g.Q8);return{simplifiedQueryEditor:V!=="false",simplifiedNotificationEditor:M!=="false"}}function T(F,I){let V;try{V=JSON.parse(F)}catch{return{...D(I),queries:(0,g.qO)()}}return(0,v.bx)((0,v.A2)((0,v.i_)({...D(I),...V,annotations:(0,v.JE)(V.annotations??[]),queries:V.queries??(0,g.qO)(),type:V.type??I??i.Z.grafana,evaluateEvery:x})))}function O(F){const I=U.parse(F);return(0,v.i_)({...D(F.type),...I})}function S(F){return(0,v.i_)((0,g.QX)(F))}function B(F){return{...D(F),condition:"C",queries:(0,g.qO)((0,u.pq)(F)),type:F,evaluateEvery:x}}function K(F=""){return F==="recording"?i.Z.cloudRecording:F==="grafana-recording"?i.Z.grafanaRecording:i.Z.grafana}const U=s._H({name:s.Yj().optional(),type:s.k5(i.Z).catch(i.Z.grafana),dataSourceName:s.Yj().optional().default(""),group:s.Yj().optional(),labels:s.YO(s.Ik({key:s.Yj(),value:s.Yj()})).optional().default([]),annotations:s.YO(s.Ik({key:s.Yj(),value:s.Yj()})).optional().default([]),queries:s.YO(s.bz()).optional(),condition:s.Yj().optional(),noDataState:s.k5(c.Q8).optional().default(c.Q8.NoData).catch(c.Q8.NoData),execErrState:s.k5(c.Q8).optional().default(c.Q8.Error).catch(c.Q8.Error),folder:s.KC([s.Ik({title:s.Yj(),uid:s.Yj()}),s.Vx()]).optional(),evaluateEvery:s.Yj().optional(),evaluateFor:s.Yj().optional().default("0s"),keepFiringFor:s.Yj().optional(),isPaused:s.zM().optional().default(!1),manualRouting:s.zM().optional(),contactPoints:s.g1(s.Yj(),s.Ik({selectedContactPoint:s.Yj(),overrideGrouping:s.zM(),groupBy:s.YO(s.Yj()),overrideTimings:s.zM(),groupWaitValue:s.Yj(),groupIntervalValue:s.Yj(),repeatIntervalValue:s.Yj(),muteTimeIntervals:s.YO(s.Yj()),activeTimeIntervals:s.YO(s.Yj())})).optional(),editorSettings:s.Ik({simplifiedQueryEditor:s.zM(),simplifiedNotificationEditor:s.zM()}).optional(),metric:s.Yj().optional(),targetDatasourceUid:s.Yj().optional(),namespace:s.Yj().optional(),expression:s.Yj().optional(),missingSeriesEvalsToResolve:s.ai().optional()})},84600:(ne,A,e)=>{"use strict";e.d(A,{d:()=>u});var n=e(74848),a=e(22803),s=e(96540),l=e(51898),r=e(92745),c=e(63142),i=e(35484),o=e(30703),h=e(76319),f=e(20941),g=e(36219);const u=(0,s.memo)(({title:v,section:p,parent:m,pageIcon:y,onGoBack:d,children:x,titleHref:b,parentHref:D,leftItems:C,isFullscreen:P,className:T,"aria-label":O,buttonOverflowAlignment:S="right",forceShowLeftItems:B=!1})=>{const K=(0,c.of)(E),U=(0,a.cx)("page-toolbar",K.toolbar,{"page-toolbar--fullscreen":P,[K.noPageIcon]:!y},T),F=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:K.truncateText,children:v}),p&&(0,n.jsxs)("span",{className:K.pre,children:[" / ",p]})]}),I=(0,r.t)("grafana-ui.page-toolbar.go-back","Go back (Esc)"),V=(0,r.t)("grafana-ui.page-toolbar.search-parent-folder","Search dashboard in the {{parent}} folder",{parent:m}),M=(0,r.t)("grafana-ui.page-toolbar.search-dashboard-name","Search dashboard by name"),L=(0,r.t)("grafana-ui.page-toolbar.search-links","Search links");return(0,n.jsxs)("nav",{className:U,"aria-label":O,children:[(0,n.jsxs)("div",{className:K.leftWrapper,children:[y&&!d&&(0,n.jsx)("div",{className:K.pageIcon,children:(0,n.jsx)(o.I,{name:y,size:"lg","aria-hidden":!0})}),d&&(0,n.jsx)("div",{className:K.pageIcon,children:(0,n.jsx)(h.K,{name:"arrow-left",tooltip:I,tooltipPlacement:"bottom",size:"xxl","data-testid":l.Tp.components.BackButton.backArrow,onClick:d})}),(0,n.jsxs)("nav",{"aria-label":L,className:K.navElement,children:[m&&D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(f.N,{"aria-label":V,className:(0,a.cx)(K.titleText,K.parentLink,K.titleLink,K.truncateText),href:D,children:[m," ",(0,n.jsx)("span",{className:K.parentIcon})]}),b&&(0,n.jsx)("span",{className:(0,a.cx)(K.titleText,K.titleDivider),"aria-hidden":!0,children:"/"})]}),(v||!!C?.length)&&(0,n.jsxs)("div",{className:K.titleWrapper,children:[v&&(0,n.jsx)("h1",{className:K.h1Styles,children:b?(0,n.jsx)(f.N,{"aria-label":M,className:(0,a.cx)(K.titleText,K.titleLink),href:b,children:F}):(0,n.jsx)("div",{className:K.titleText,children:F})}),C?.map((N,W)=>(0,n.jsx)("div",{className:(0,a.cx)(K.leftActionItem,{[K.forceShowLeftActionItems]:B}),children:N},W))]})]})]}),(0,n.jsx)(g.U,{alignment:S,children:s.Children.toArray(x).filter(Boolean)})]})});u.displayName="PageToolbar";const E=v=>{const{spacing:p,typography:m}=v,y=(0,i.getFocusStyles)(v);return{pre:(0,a.css)({whiteSpace:"pre"}),toolbar:(0,a.css)({alignItems:"center",background:v.colors.background.canvas,display:"flex",gap:v.spacing(2),justifyContent:"space-between",padding:v.spacing(1.5,2),[v.breakpoints.down("md")]:{paddingLeft:"53px"}}),noPageIcon:(0,a.css)({[v.breakpoints.down("md")]:{paddingLeft:v.spacing(2)}}),leftWrapper:(0,a.css)({display:"flex",flexWrap:"nowrap",maxWidth:"70%"}),pageIcon:(0,a.css)({display:"none",[v.breakpoints.up("sm")]:{display:"flex",paddingRight:v.spacing(1),alignItems:"center"}}),truncateText:(0,a.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),titleWrapper:(0,a.css)({display:"flex",margin:0,minWidth:0}),navElement:(0,a.css)({display:"flex",alignItems:"center",minWidth:0}),h1Styles:(0,a.css)({margin:p(0,1,0,0),lineHeight:"inherit",flexGrow:1,minWidth:0}),parentIcon:(0,a.css)({marginLeft:v.spacing(.5)}),titleText:(0,a.css)({display:"flex",fontSize:m.size.lg,margin:0,borderRadius:v.shape.radius.default}),titleLink:(0,a.css)({"&:focus-visible":y}),titleDivider:(0,a.css)({padding:p(0,.5,0,.5),display:"none",[v.breakpoints.up("md")]:{display:"unset"}}),parentLink:(0,a.css)({display:"none",[v.breakpoints.up("md")]:{display:"unset",flex:1}}),leftActionItem:(0,a.css)({display:"none",alignItems:"center",paddingRight:p(.5),[v.breakpoints.up("md")]:{display:"flex"}}),forceShowLeftActionItems:(0,a.css)({display:"flex"})}}},84691:(ne,A,e)=>{"use strict";e.d(A,{Bp:()=>y,SC:()=>P,UY:()=>m,Uj:()=>b,ip:()=>d,pR:()=>M,sw:()=>N});var n=e(2543),a=e.n(n),s=e(81160),l=e(41119),r=e(16515),c=e(28105),i=e(95004),o=e(12823),h=e(48233),f=e(46644),g=e(36638),u=e(57866),E=e(882),v=e(64761),p=e(1027),m=(W=>(W.ReduceRow="reduceRow",W.CumulativeFunctions="cumulativeFunctions",W.WindowFunctions="windowFunctions",W.BinaryOperation="binary",W.UnaryOperation="unary",W.Index="index",W))(m||{}),y=(W=>(W.Percentage="percentage",W.Fixed="fixed",W))(y||{}),d=(W=>(W.Trailing="trailing",W.Centered="centered",W))(d||{});const x={reducer:f.gy.sum},b={reducer:f.gy.mean,windowAlignment:"trailing",windowSizeMode:"percentage",windowSize:.1},D={left:{fixed:""},operator:o.k.Add,right:{fixed:""}},C={operator:h._.Abs,fieldName:""},P={id:v.F.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:f.gy.sum}},operator:(W,R)=>G=>{const w=W.mode??"reduceRow",_=W.timeSeries!==!1,Q=W.binary?.right,ae=typeof Q=="string"?Q:typeof Q=="object"?Q.fixed:void 0,q=w==="binary"&&!Number.isNaN(Number(ae)),ee=_&&!q?E.b.operator(null,R):p.W.operator({},R);return G.pipe(ee,(0,s.T)(j=>{let J;switch(w){case"reduceRow":J=F((0,n.defaults)(W.reduce,x),j);break;case"cumulativeFunctions":J=U((0,n.defaults)(W.cumulative,x),j);break;case"windowFunctions":J=T((0,n.defaults)(W.window,b),j);break;case"unary":J=L((0,n.defaults)(W.unary,C),j);break;case"binary":const te=[];j.map(ie=>{ie.fields.map(ce=>{te.push(ce.name)})});const se={left:M(W.binary?.left??"",te),operator:W.binary?.operator??D.operator,right:M(W.binary?.right??"",te)};if(W.binary=se,se.left?.matcher?.id&&se.left?.matcher.id===u.Ct.byType){const ie=se.left.matcher.options,ce=o.b.getIfExists(se.operator);return j.map(ue=>{const{timeField:X}=(0,l.KR)(ue),le=[];let he=!1;if(X&&W.timeSeries!==!1&&le.push(X),ue.fields.map((fe,Ce)=>{if(!W.replaceFields&&!le.includes(fe)&&le.push(fe),fe.type===ie){const Ae=fe.values,_e=I(ue,se.right??D.right,j,R);if(!Ae||!_e||!ce)return;const Xe=new Array(Ae.length);for(let Me=0;Me<Xe.length;Me++)Xe[Me]=ce.operation(Ae[Me],_e[Me]);const De={...fe,name:`${fe.name} ${W.binary?.operator??""} ${W.binary?.right.matcher?.options??W.binary?.right.fixed}`,values:Xe};delete De.state,le.push(De),he=!0}}),!(W.replaceFields&&!he))return{...ue,fields:le}}).filter(ue=>ue!=null)}else J=V((0,n.defaults)(se,D),j,R);break;case"index":return j.map(ie=>{const ce=[...Array(ie.length).keys()];if(W.index?.asPercentile)for(let ue=0;ue<ce.length;ue++)ce[ue]=ce[ue]/ce.length;const re={name:W.alias??"Row",type:i.PU.number,values:ce,config:W.index?.asPercentile?{unit:"percentunit"}:{}};return{...ie,fields:W.replaceFields?[re]:[...ie.fields,re]}})}return J?j.map(te=>{const se=J(te);if(!se)return W.replaceFields?void 0:te;const ie={name:N(W),type:i.PU.number,config:{},values:se};W.alias?.length&&(ie.config.displayName=W.alias);let ce=[];if(W.replaceFields){const{timeField:re}=(0,l.KR)(te);re&&W.timeSeries!==!1?ce=[re,ie]:ce=[ie]}else ce=[...te.fields,ie];return{...te,fields:ce}}).filter(te=>te!=null):j}))}};function T(W,R){if(W.windowSize<=0)throw new Error("Add field from calculation transformation - Window size must be larger than 0");let G=(0,g.NS)({id:u.Ct.numeric});return W.field&&(G=(0,g.NS)({id:u.Ct.byNames,options:{names:[W.field]}})),w=>{const _=Math.ceil(W.windowSize*(W.windowSizeMode==="percentage"?w.length:1));let Q=null;for(const ae of w.fields)if(G(ae,w,R)){Q=ae;break}if(Q){if(![f.gy.mean,f.gy.stdDev,f.gy.variance].includes(W.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${W.reducer}`);return W.windowAlignment==="centered"?S(w,W.reducer,Q,_):O(w,W.reducer,Q,_)}}}function O(W,R,G,w){const _=[];let Q=0,ae=0;for(let q=0;q<W.length;q++)if(R===f.gy.mean){const k=G.values[q];if(k!=null&&(ae++,Q+=k,q>w-1)){const ee=G.values[q-w];ee!=null&&(Q-=ee,ae--)}_.push(ae===0?0:Q/ae)}else if(R===f.gy.variance){const k=Math.max(0,q-w+1),ee=q+1;_.push(B(G.values.slice(k,ee)))}else if(R===f.gy.stdDev){const k=Math.max(0,q-w+1),ee=q+1;_.push(K(G.values.slice(k,ee)))}return _}function S(W,R,G,w){const _=[];let Q=0,ae=0;const q=Math.ceil(w/2)-1,k=Math.floor(w/2);for(let ee=0;ee<W.length;ee++){const j=ee-k,J=ee+q;if(R===f.gy.mean){if(ee===0)for(let Z=0;Z<q+1&&Z<G.values.length;Z++)G.values[Z]!=null&&(Q+=G.values[Z],ae++);else J<G.values.length&&G.values[J]!=null&&(Q+=G.values[J],ae++),j>0&&G.values[j-1]!=null&&(Q-=G.values[j-1],ae--);_.push(ae===0?0:Q/ae)}else if(R===f.gy.variance){const Z=G.values.slice(Math.max(0,j),Math.min(J+1,G.values.length));_.push(B(Z))}else if(R===f.gy.stdDev){const Z=G.values.slice(Math.max(0,j),Math.min(J+1,G.values.length));_.push(K(Z))}}return _}function B(W){if(W.length<1)return 0;let R=0,G=0,w=0;for(let Q=0;Q<W.length;Q++){const ae=W[Q];if(ae!=null){w++;let q=G;G+=(ae-q)/w,R+=(ae-q)*(ae-G)}}return w===0?0:R/w}function K(W){return Math.sqrt(B(W))}function U(W,R){let G=(0,g.NS)({id:u.Ct.numeric});if(W.field&&(G=(0,g.NS)({id:u.Ct.byNames,options:{names:[W.field]}})),![f.gy.mean,f.gy.sum].includes(W.reducer))throw new Error(`Add field from calculation transformation - Unsupported reducer: ${W.reducer}`);return w=>{let _=null;for(const q of w.fields)if(G(q,w,R)){_=q;break}if(!_)return;const Q=[];let ae=0;for(let q=0;q<w.length;q++)ae+=_.values[q]??0,W.reducer===f.gy.sum?Q.push(ae):W.reducer===f.gy.mean&&Q.push(ae/(q+1));return Q}}function F(W,R){let G=(0,g.NS)({id:u.Ct.numeric});W.include&&W.include.length&&(G=(0,g.NS)({id:u.Ct.byNames,options:{names:W.include}}));const w=f.AS.get(W.reducer);if(!w)throw new Error(`Unknown reducer: ${W.reducer}`);const _=w.reduce??f.H3,Q=W.nullValueMode===c.UW.Ignore,ae=W.nullValueMode===c.UW.AsZero;return q=>{const k=[];for(const Z of q.fields)G(Z,q,R)&&k.push(Z.values);const ee=k.length,j={name:"temp",values:new Array(ee),type:i.PU.number,config:{}},J=[];for(let Z=0;Z<q.length;Z++){for(let te=0;te<ee;te++)j.values[te]=k[te][Z];J.push(_(j,Q,ae)[W.reducer])}return J}}function I(W,R,G,w){if(!R)return;if(R.matcher&&R.matcher.id===u.Ct.byName){const Q=R.matcher.options??"";for(const ae of W.fields)if(Q===(0,r.Ct)(ae,W,G))return ae.type===i.PU.boolean?ae.values.map(q=>q?1:0):ae.values}const _=parseFloat(R.fixed??R.matcher?.options??"");if(!isNaN(_))return new Array(W.length).fill(_)}function V(W,R,G){const w=o.b.getIfExists(W.operator);return _=>{const Q=I(_,W.left,R,G),ae=I(_,W.right,R,G);if(!Q||!ae||!w)return;const q=new Array(Q.length);for(let k=0;k<q.length;k++)q[k]=w.operation(Q[k],ae[k]);return q}}function M(W,R){return typeof W=="string"?isNaN(Number(W))?{matcher:{id:u.Ct.byName,options:W}}:R.includes(W)?{matcher:{id:u.Ct.byName,options:W}}:{fixed:W}:W}function L(W,R){const G=h.j.getIfExists(W.operator);return w=>{let _=[];for(const q of w.fields)W.fieldName===(0,r.Ct)(q,w,R)&&q.type===i.PU.number&&(_=q.values);if(!_.length||!G)return;const Q=new Array(_.length);let ae=0;if(W.operator===h._.Percent)for(let q=0;q<_.length;q++)Number.isFinite(_[q])&&(ae+=_[q]);for(let q=0;q<Q.length;q++)Q[q]=G.operation(_[q],ae);return Q}}function N(W){if(W.alias?.length)return W.alias;switch(W.mode){case"cumulativeFunctions":{const{cumulative:R}=W;return`cumulative ${R?.reducer??""}${R?.field?`(${R.field})`:""}`}case"windowFunctions":{const{window:R}=W;return`${R?.windowAlignment??""} moving ${R?.reducer??""}${R?.field?`(${R.field})`:""}`}case"unary":{const{unary:R}=W;return`${R?.operator??""}${R?.fieldName?`(${R.fieldName})`:""}`}case"binary":{const{binary:R}=W,G=R?.left?.matcher?.options??R?.left?.fixed??"",w=R?.right?.matcher?.options??R?.right?.fixed??"";if(/\$/.test(G)||/\$/.test(w))return"";const _=R?.operator??o.k.Add;return G&&w?`${G} ${_} ${w}`:""}case"reduceRow":{const R=f.AS.getIfExists(W.reduce?.reducer);if(R)return R.name}break;case"index":return"Row"}return"math"}},85032:(ne,A,e)=>{"use strict";e.d(A,{A:()=>i});var n=e(74848),a=e(22803),s=e(30703),l=e(37658),r=e(8073),c=e(63142);function i({ds:h,onClick:f,selected:g,description:u,isFavorite:E=!1,onToggleFavorite:v,...p}){const m=(0,c.$j)(),y=o(m,h.meta.builtIn);return(0,n.jsxs)(r.Z,{onClick:f,className:(0,a.cx)(y.card,g?y.selected:void 0),...p,children:[(0,n.jsx)(r.Z.Heading,{className:y.heading,children:(0,n.jsxs)("div",{className:y.headingContent,children:[(0,n.jsxs)("span",{className:y.name,children:[h.name," ",h.isDefault?(0,n.jsx)(l.L,{tags:["default"]}):null]}),(0,n.jsxs)("div",{className:y.rightSection,children:[(0,n.jsx)("small",{className:y.type,children:u||h.meta.name}),v&&!h.meta.builtIn&&(0,n.jsx)(s.I,{name:E?"favorite":"star",onClick:d=>{d.stopPropagation(),v(h)},className:y.favoriteButton})]})]})}),(0,n.jsx)(r.Z.Figure,{className:y.logo,children:(0,n.jsx)("img",{src:h.meta.info.logos.small,alt:`${h.meta.name} Logo`})})]},h.uid)}function o(h,f=!1){return{card:(0,a.css)({cursor:"pointer",backgroundColor:"transparent",marginBottom:0,padding:h.spacing(1),"&:hover":{backgroundColor:h.colors.action.hover}}),heading:(0,a.css)({width:"100%",overflow:"hidden","> button":{width:"100%"}}),headingContent:(0,a.css)({color:h.colors.text.secondary,width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",justifyContent:"space-between",alignItems:"center"}),rightSection:(0,a.css)({display:"flex",alignItems:"center",gap:h.spacing(1),minWidth:0,flex:1,justifyContent:"flex-end",overflow:"hidden",textOverflow:"ellipsis"}),logo:(0,a.css)({width:"32px",height:"32px",padding:h.spacing(0,1),display:"flex",alignItems:"center","> img":{maxHeight:"100%",minWidth:"24px",filter:`invert(${f&&h.isLight?1:0})`}}),name:(0,a.css)({color:h.colors.text.primary,display:"flex",gap:h.spacing(2)}),type:(0,a.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center"}),favoriteButton:(0,a.css)({flexShrink:0,pointerEvents:"auto",zIndex:1}),separator:(0,a.css)({margin:h.spacing(0,1),color:h.colors.border.weak}),selected:(0,a.css)({background:h.colors.action.selected,"&::before":{backgroundImage:h.colors.gradients.brandVertical,borderRadius:h.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",transform:"translateX(-50%)",width:h.spacing(.5),left:0}}),meta:(0,a.css)({display:"block",overflowWrap:"unset",whiteSpace:"nowrap",width:"100%",overflow:"hidden",textOverflow:"ellipsis"})}}},85053:(ne,A,e)=>{"use strict";e.d(A,{w:()=>l});var n=e(74848),a=e(96540),s=e(19753);const l=({value:r,onChange:c,item:i,id:o})=>{const{settings:h}=i,f=(0,a.useCallback)(g=>{c(h?.integer&&g!==void 0?Math.floor(g):g)},[c,h?.integer]);return(0,n.jsx)(s.Q,{id:o,value:r,min:h?.min,max:h?.max,step:h?.step,placeholder:h?.placeholder,onChange:f})}},85311:(ne,A,e)=>{"use strict";e.d(A,{A:()=>r});var n=e(74848),a=e(92745),s=e(34999);const r=()=>(0,n.jsx)(s.F,{severity:"info",title:(0,a.t)("alerting.alert.evaluation-paused","Alert evaluation currently paused"),children:(0,n.jsx)(a.x6,{i18nKey:"alerting.alert.evaluation-paused-description",children:"Notifications for this rule will not fire and no alert instances will be created until the rule is un-paused."})})},85348:(ne,A,e)=>{"use strict";e.d(A,{u:()=>p});var n=e(74848),a=e(22803),s=e(21835),l=e(96540),r=e(22589),c=e(27489),i=e(63142),o=e(44019),h=e(92745),f=e(76319),g=e(41654),u=e(30703);const E=({actionsElement:y,disabled:d,draggable:x,collapsable:b=!0,dragHandleProps:D,headerElement:C,isContentVisible:P,onRowToggle:T,reportDragMousePosition:O,title:S,id:B,expanderMessages:K})=>{const U=(0,i.of)(v);let F=P?(0,h.t)("query-operation.header.collapse-row","Collapse query row"):(0,h.t)("query-operation.header.expand-row","Expand query row");K!==void 0&&P?F=K.close:K!==void 0&&(F=K?.open);const I=(0,h.t)("query-operation.header.drag-and-drop","Drag and drop to reorder");return(0,n.jsxs)("div",{className:U.header,children:[(0,n.jsxs)("div",{className:U.column,children:[b&&(0,n.jsx)(f.K,{name:P?"angle-down":"angle-right",tooltip:F,className:U.collapseIcon,onClick:T,"aria-expanded":P,"aria-controls":B}),S&&(0,n.jsx)("div",{className:U.titleWrapper,onClick:T,children:(0,n.jsx)("div",{className:(0,a.cx)(U.title,d&&U.disabled),children:S})}),C]}),(0,n.jsxs)(g.B,{gap:1,alignItems:"center",children:[y,x&&(0,n.jsx)("div",{onMouseMove:O,...D,children:(0,n.jsx)(u.I,{title:I,name:"draggabledots",size:"lg",className:U.dragIcon})})]})]})},v=y=>({header:(0,a.css)({label:"Header",padding:y.spacing(.5,.5),borderRadius:y.shape.radius.default,background:y.colors.background.secondary,minHeight:y.spacing(4),display:"grid",gridTemplateColumns:"minmax(100px, max-content) min-content",alignItems:"center",justifyContent:"space-between",whiteSpace:"nowrap","&:focus":{outline:"none"}}),column:(0,a.css)({label:"Column",display:"flex",alignItems:"center",overflow:"hidden"}),dragIcon:(0,a.css)({cursor:"grab",color:y.colors.text.disabled,margin:y.spacing(0,.5),"&:hover":{color:y.colors.text.primary}}),collapseIcon:(0,a.css)({marginLeft:y.spacing(.5),color:y.colors.text.disabled}),titleWrapper:(0,a.css)({display:"flex",alignItems:"center",flexGrow:1,cursor:"pointer",overflow:"hidden",marginRight:y.spacing(.5)}),title:(0,a.css)({fontWeight:y.typography.fontWeightBold,color:y.colors.text.link,marginLeft:y.spacing(.5),overflow:"hidden",textOverflow:"ellipsis"}),disabled:(0,a.css)({color:y.colors.text.disabled})});E.displayName="QueryOperationRowHeader";function p({children:y,actions:d,title:x,headerElement:b,onClose:D,onOpen:C,isOpen:P,disabled:T,draggable:O,collapsable:S,index:B,id:K,expanderMessages:U}){const[F,I]=(0,l.useState)(P!==void 0?P:!0),V=(0,i.of)(m),M=(0,l.useCallback)(()=>{I(!F)},[F,I]);(0,l.useEffect)(()=>{typeof P=="boolean"&&I(P)},[P]);const L=(0,l.useCallback)(G=>{if(G.defaultPrevented){const w=G.currentTarget.getBoundingClientRect(),_=G.clientX-w.left,Q=G.clientY-w.top;(0,c.rR)("query_row_reorder_drag_position",{x:_/w.width,y:Q/w.height,width:w.width,height:w.height})}},[]);(0,r.A)(()=>{F?C&&C():D&&D()},[F]);const N={isOpen:F,onOpen:()=>{I(!0)},onClose:()=>{I(!1)}},W=d&&o.renderOrCallToRender(d,N),R=b&&o.renderOrCallToRender(b,N);return O?(0,n.jsx)(s.sx,{draggableId:K,index:B,children:G=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{ref:G.innerRef,className:V.wrapper,...G.draggableProps,children:[(0,n.jsx)("div",{children:(0,n.jsx)(E,{id:K,actionsElement:W,disabled:T,draggable:!0,collapsable:S,dragHandleProps:G.dragHandleProps,headerElement:R,isContentVisible:F,onRowToggle:M,reportDragMousePosition:L,title:x,expanderMessages:U})}),F&&(0,n.jsx)("div",{className:V.content,children:y})]})})}):(0,n.jsxs)("div",{className:V.wrapper,children:[(0,n.jsx)(E,{id:K,actionsElement:W,disabled:T,draggable:!1,collapsable:S,headerElement:R,isContentVisible:F,onRowToggle:M,reportDragMousePosition:L,title:x,expanderMessages:U}),F&&(0,n.jsx)("div",{className:V.content,children:y})]})}const m=y=>({wrapper:(0,a.css)({marginBottom:y.spacing(2)}),content:(0,a.css)({marginTop:y.spacing(.5),marginLeft:y.spacing(3)})});p.displayName="QueryOperationRow"},85618:(ne,A,e)=>{"use strict";e.d(A,{Ge:()=>r,H4:()=>i,PE:()=>o,TP:()=>c});var n=e(68143),a=e(43173),s=e(6890),l=e(64762);const r=()=>a.$.namespace,c=(h,f)=>`/apis/${h}/${f}/namespaces/${r()}`,i=(h,f,g)=>{h?h instanceof Error?f((0,s.dx)((0,l.gi)(g,h))):typeof h=="object"&&"error"in h&&(h.error instanceof Error?f((0,s.dx)((0,l.gi)(g,h.error))):(0,n.NF)(h.error)&&Array.isArray(h.error.data.errors)&&h.error.data.errors.length&&f((0,s.dx)((0,l.gi)(g,h.error.data.errors.join(`
`))))):f((0,s.dx)((0,l.gi)(g,new Error("Unknown error"))))};function o(h){if(h&&typeof h=="object"){if("data"in h&&h.data&&typeof h.data=="object"&&"message"in h.data)return String(h.data.message);if("message"in h)return String(h.message)}return String(h)}},85622:(ne,A,e)=>{"use strict";e.d(A,{p:()=>r});var n=e(74848),a=e(11594),s=e(92745),l=e(99887);const r=i=>{const o=c(i.state);return o?(0,n.jsx)(l.E,{className:i.className,color:o.color,title:typeof o.tooltip=="string"?o.tooltip:void 0,tooltip:typeof o.tooltip!="string"?o.tooltip:void 0,text:o.text,icon:o.icon}):null};function c(i){switch(i){case a.pn.deprecated:return{text:(0,s.t)("plugins.get-feature-state-info.text.deprecated","Deprecated"),color:"red",tooltip:"This feature is deprecated and will be removed in a future release"};case a.pn.alpha:return{text:(0,s.t)("plugins.get-feature-state-info.text.alpha","Alpha"),color:"blue",tooltip:"This feature is experimental and future updates might not be backward compatible"};case a.pn.beta:return{text:(0,s.t)("plugins.get-feature-state-info.text.beta","Beta"),color:"blue",tooltip:"This feature is close to complete but not fully tested"};default:return null}}},85835:(ne,A,e)=>{"use strict";e.d(A,{h:()=>l});var n=e(2543),a=e.n(n),s=e(61371);function l(r,c,i=n.identity){const o=i(r),h=i(c),f=(0,s.G4)(o,h),g=(0,n.chain)(f).values().flatMap().filter(E=>E.op==="add"||E.op==="replace"||E.op==="move").sumBy(E=>E.endLineNumber-E.startLineNumber+1).value(),u=(0,n.chain)(f).values().flatMap().filter(E=>E.op==="remove"||E.op==="replace").sumBy(E=>E.endLineNumber-E.startLineNumber+1).value();return{added:g,removed:u}}},85891:(ne,A,e)=>{"use strict";e.d(A,{DO:()=>s,Ur:()=>r,VR:()=>a,X2:()=>n,ki:()=>l,mx:()=>c});var n=(i=>(i.Fetch="fetch",i.Infinity="infinity",i))(n||{}),a=(i=>(i.String="string",i))(a||{}),s=(i=>(i.POST="POST",i.PUT="PUT",i.GET="GET",i.DELETE="DELETE",i.PATCH="PATCH",i))(s||{});const l=[{label:"POST",value:"POST"},{label:"GET",value:"GET"}],r=[{label:"application/json",value:"application/json"},{label:"text/plain",value:"text/plain"},{label:"application/xml",value:"application/xml"},{label:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"}],c={type:"fetch",title:"",fetch:{url:"",method:"POST",body:"{}",queryParams:[],headers:[["Content-Type","application/json"]]}}},86017:(ne,A,e)=>{"use strict";e.d(A,{$P:()=>K,$m:()=>f,Av:()=>x,Dm:()=>O,EU:()=>b,LF:()=>T,MN:()=>u,MU:()=>v,MZ:()=>o,NL:()=>d,UL:()=>B,VE:()=>D,Wc:()=>p,_n:()=>h,mP:()=>U,uH:()=>S,xH:()=>y});var n=e(2543),a=e.n(n),s=e(84266),l=e(182),r=e(52161),c=e(39659),i=e(63895);function o(F){return F.alertmanager_config.receivers||(F.alertmanager_config.receivers=[{name:"default "}]),F.alertmanager_config.route||(F.alertmanager_config.route={receiver:F.alertmanager_config.receivers[0].name}),F.template_files||(F.template_files={}),F}function h(F,I){return{...I,mute_time_intervals:I.mute_time_intervals?.filter(M=>M!==F)??[],active_time_intervals:I.active_time_intervals?.filter(M=>M!==F)??[],routes:I.routes?.map(M=>h(F,M))}}function f(F,I,V){return{...V,mute_time_intervals:V.mute_time_intervals?.map(M=>M===I?F:M),active_time_intervals:V.active_time_intervals?.map(M=>M===I?F:M),routes:V.routes?.map(M=>f(F,I,M))}}function g(F){return F.map(([I,V,M])=>[I,V,unquoteWithUnescape(M)])}function u(F){return F.isEqual?F.isRegex?s.ho.regex:s.ho.equal:F.isRegex?s.ho.notRegex:s.ho.notEqual}function E(F){switch(F){case s.ho.equal:return{isEqual:!0,isRegex:!1};case s.ho.notEqual:return{isEqual:!1,isRegex:!1};case s.ho.regex:return{isEqual:!0,isRegex:!0};case s.ho.notRegex:return{isEqual:!1,isRegex:!0}}}function v(F){return{name:F.name,value:F.value,operator:u(F)}}function p(F){return{name:F.name,value:F.value,...E(F.operator)}}function m(F){return`{ ${F.map(v).reduce((M,L)=>{const N=`${L.name}${L.operator}"${L.value}"`;return M?`${M}, ${N}`:N},"")} }`}const y=[{label:s.ho.equal,description:"Equals",value:s.ho.equal},{label:s.ho.notEqual,description:"Does not equal",value:s.ho.notEqual},{label:s.ho.regex,description:"Matches regex",value:s.ho.regex},{label:s.ho.notRegex,description:"Does not match regex",value:s.ho.notRegex}];function d(F){const I=u(F);return[F.name,I,F.value]}function x(F,I){const V=(0,c.Dd)(F),M=I.map(d);return(0,i.ry)(M,V)}function b(...F){const I=F.map(i.Zc).flat(),V=(0,n.uniqWith)(I,n.isEqual);return m(V)}function D(F){return F===r.hY?"default":"unquote"}function C(){return getAllDataSources().filter(F=>F.type===DataSourceType.Alertmanager)}function P(F){return C().find(I=>F===I.uid)}function T(F){const{times:I,weekdays:V,days_of_month:M,months:L,years:N,location:W}=F,R=O(I,W),G=S(V),w=B(M),_=K(L),Q=U(N);return[R,G,w,_,Q].join(", ")}function O(F,I){return"Times: "+(F?F?.map(({start_time:V,end_time:M})=>`${V} - ${M} [${I??"UTC"}]`).join(" and "):"All")}function S(F){return"Weekdays: "+(F?.map(I=>{if(I.includes(":"))return I.split(":").map(V=>{const M=V.slice(0,3);return M[0].toLocaleUpperCase()+M.slice(1)}).join("-");{const V=I.slice(0,3);return V[0].toLocaleUpperCase()+V.slice(1)}}).join(", ")??"All")}function B(F){return"Days of the month: "+(F?.join(", ")??"All")}function K(F){return"Months: "+(F?.join(", ")??"All")}function U(F){return"Years: "+(F?.join(", ")??"All")}},86059:(ne,A,e)=>{"use strict";e.d(A,{k:()=>n});const n=(a,s)=>{let l;if(a.getLinks&&(l=a.getLinks({valueRowIndex:s.index})),!!l){for(let r=0;r<l?.length;r++)if(l[r].onClick){const c=l[r].onClick;l[r].onClick=i=>{i.ctrlKey||i.metaKey||i.shiftKey||(i.preventDefault(),c(i,{field:a,rowIndex:s.index}))}}return l.filter(r=>r.href||r.onClick!=null)}}},86292:(ne,A,e)=>{"use strict";e.d(A,{H:()=>E});var n=e(74848),a=e(45863),s=e(6048),l=e(22803),r=e(92745),c=e(63142),i=e(45967),o=e(30703);const h=()=>{const v=(0,c.of)(f);return(0,n.jsx)("div",{className:v.container,children:(0,n.jsx)(i.m,{content:(0,r.t)("dashboard.conditional-rendering.overlay.tooltip","Element is hidden due to conditional rendering."),children:(0,n.jsx)(o.I,{name:"eye-slash"})})})},f=v=>({container:(0,l.css)({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",width:"100%",height:"100%",bottom:0,right:0,zIndex:1,[v.transitions.handleMotion("no-preference","reduce")]:{transition:"all 0.2s ease"},"&:before":(0,l.css)({content:'""',opacity:.6,position:"absolute",width:"100%",height:"100%",top:0,left:0,backgroundColor:v.colors.background.canvas,pointerEvents:"none"}),"& > svg":(0,l.css)({height:"48px",width:"48px",maxWidth:"75%",maxHeight:"75%"}),".dashboard-visible-hidden-element:hover > &":(0,l.css)({width:"30px",height:"30px",top:"unset",left:"unset",right:0,bottom:0})})});let g;function u(){return g||(g=s.M.createEmpty()),g}function E(v){const p="conditionalRendering"in v.state&&v.state.conditionalRendering instanceof s.M?v.state.conditionalRendering:u(),{result:m,renderHidden:y}=(0,a.gn)(p,{shouldActivateOrKeepAlive:!0});return[!m,m?void 0:"dashboard-visible-hidden-element",m?null:(0,n.jsx)(h,{}),y]}},86678:(ne,A,e)=>{"use strict";e.d(A,{H:()=>r});var n=e(74848),a=e(75683),s=e(13791),l=e(1506);function r(){return(0,n.jsx)(s.Y,{navId:"home",layout:a.k.Canvas,pageNav:{text:"Page not found"},children:(0,n.jsx)(l.L,{entity:"Page"})})}},86791:(ne,A,e)=>{"use strict";e.d(A,{$7:()=>l,SA:()=>a,l$:()=>r});var n=e(24619);function a(c,i){return(0,n.lh)(c.state)===i}var s=(c=>(c.Firing="firing",c))(s||{}),l=(c=>(c.Alerting="alerting",c.Pending="pending",c.Recovering="recovering",c.Normal="inactive",c.NoData="nodata",c.Error="error",c))(l||{});const r=Symbol("grafana")},86848:(ne,A,e)=>{"use strict";e.d(A,{q:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(76319),r=e(60208),c=e(13941),i=e(54314),o=e(63142),h=e(31286),f=e(92807);function g({tabs:E,defaultTab:v,closeIconTooltip:p,onClose:m,testId:y}){const[d,x]=(0,s.useState)(E.some(C=>C.value===v)?v:E[0].value),b=(0,o.of)(u),D=C=>{x(C.value)};return(0,n.jsxs)("div",{className:b.container,"data-testid":y,children:[(0,n.jsxs)(i.U,{className:b.tabs,children:[E.map(C=>(0,n.jsx)(r.o,{label:C.label,active:C.value===d,onChangeTab:()=>D(C),icon:C.icon},C.value)),(0,n.jsx)(h.a,{grow:1,display:"flex",justifyContent:"flex-end",paddingRight:1,children:(0,n.jsx)(l.K,{size:"lg",onClick:m,name:"times",tooltip:p??"Close"})})]}),(0,n.jsx)(f.P,{children:(0,n.jsx)(c.J,{className:b.tabContent,children:E.find(C=>C.value===d)?.content})})]})}const u=E=>({container:(0,a.css)({height:"100%",display:"flex",flexDirection:"column",flex:"1 1 0",minHeight:0}),tabContent:(0,a.css)({padding:E.spacing(2),backgroundColor:E.colors.background.primary,flex:1}),tabs:(0,a.css)({paddingTop:E.spacing(.5),borderColor:E.colors.border.weak,ul:{marginLeft:E.spacing(2)}})})},86871:(ne,A,e)=>{"use strict";e.d(A,{G:()=>a,q:()=>n});const n={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},a={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"}},86967:(ne,A,e)=>{"use strict";e.d(A,{DO:()=>l,en:()=>n,gR:()=>a,xp:()=>s});var n=(h=>(h.Center="center",h.Left="left",h.LeftRight="leftright",h.Right="right",h.Scale="scale",h))(n||{}),a=(h=>(h.Bottom="bottom",h.Center="center",h.Scale="scale",h.Top="top",h.TopBottom="topbottom",h))(a||{}),s=(h=>(h.Contain="contain",h.Cover="cover",h.Fill="fill",h.Original="original",h.Tile="tile",h))(s||{}),l=(h=>(h.GET="GET",h.POST="POST",h.PUT="PUT",h))(l||{}),r=(h=>(h.Straight="straight",h))(r||{});const c={vertices:[]},i={connections:[]},o={inlineEditing:!0,panZoom:!0,showAdvancedTypes:!0,zoomToContent:!0}},87033:(ne,A,e)=>{"use strict";e.d(A,{b:()=>f});var n=e(62467),a=e(81160),s=e(69862),l=e(17548),r=e(1906),c=e(71393),i=e(90696);let o=100;function h(){return"AQ"+o++}function f(g,u,E){const v={...i.CU,...u.annotations},p={...v.getDefaultQuery?.(),...E},m=v.prepareAnnotation(p);if(!m)return(0,n.of)({});const y=v.prepareQuery(m);if(!y)return(0,n.of)({});const d=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,x=l.calculateInterval(g.range,d,u.interval),b={__interval:{text:x.interval,value:x.interval},__interval_ms:{text:x.intervalMs.toString(),value:x.intervalMs},__annotation:{text:m.name,value:m}},D={startTime:Date.now(),requestId:h(),range:g.range,maxDataPoints:d,scopedVars:b,...x,app:r.Jk.Dashboard,timezone:g.dashboard.timezone,targets:[{...y,refId:"Anno"}]};return(0,c.BN)(u,D).pipe((0,s.Z)(C=>{const P=C?.series.length?C.series:C.annotations;return P?.length?v.processEvents(m,P).pipe((0,a.T)(T=>({panelData:C,events:T}))):(0,n.of)({panelData:C,events:[]})}))}},87039:(ne,A,e)=>{"use strict";e.d(A,{FM:()=>v,nE:()=>u});var n=e(16515),a=e(36638),s=e(57866),l=e(95004),r=e(92745),c=e(739),i=e(98643),o=e(46189);function h(p){return m=>{for(const y of m.fields)if(p(y,m,[]))return y}}function f(p){return m=>{for(const y of m.fields){if(p.has(y.name.toLowerCase()))return y;const d=(0,n.Ct)(y,m);if(p.has(d))return y}}}const g={mode:c.aG.Auto,geohash:f(new Set(["geohash"])),latitude:f(new Set(["latitude","lat"])),longitude:f(new Set(["longitude","lon","lng"])),h3:f(new Set(["h3"])),wkt:f(new Set(["wkt"])),lookup:f(new Set(["lookup"])),geo:p=>p.fields.find(m=>m.type===l.PU.geo)};async function u(p){const m={...g,mode:p?.mode??c.aG.Auto};switch(m.gazetteer=await(0,o.q3)(p?.gazetteer),m.mode){case c.aG.Geohash:p?.geohash?m.geohash=h((0,a.NS)({id:s.Ct.byName,options:p.geohash})):m.geohash=()=>{};break;case c.aG.Lookup:const y=p?.lookup?.length?(0,a.NS)({id:s.Ct.byName,options:p.lookup}):(0,a.NS)({id:s.Ct.byType,options:l.PU.string});m.lookup=h(y);break;case c.aG.Coords:p?.latitude?m.latitude=h((0,a.NS)({id:s.Ct.byName,options:p.latitude})):m.latitude=()=>{},p?.longitude?m.longitude=h((0,a.NS)({id:s.Ct.byName,options:p.longitude})):m.longitude=()=>{};break}return m}function E(p,m){const y={mode:m.mode??c.aG.Auto};if(y.mode===c.aG.Auto){if(y.geo=m.geo(p),y.geo)return y;if(y.latitude=m.latitude(p),y.longitude=m.longitude(p),y.latitude&&y.longitude)return y.mode=c.aG.Coords,y;if(y.geohash=m.geohash(p),y.geohash)return y.mode=c.aG.Geohash,y;if(y.lookup=m.lookup(p),y.lookup)return y.mode=c.aG.Lookup,y}switch(y.mode){case c.aG.Coords:y.latitude=m.latitude(p),y.longitude=m.longitude(p);break;case c.aG.Geohash:y.geohash=m.geohash(p);break;case c.aG.Lookup:y.lookup=m.lookup(p);break}return y}function v(p,m){const y=E(p,m);switch(y.mode){case c.aG.Auto:return y.geo?{field:y.geo}:{warning:(0,r.t)("geo.get-geometry-field.warning-unable-to-find","Unable to find location fields")};case c.aG.Coords:return y.latitude&&y.longitude?{field:(0,i.Pz)(y.longitude,y.latitude),derived:!0,description:`${y.mode}: ${y.latitude.name}, ${y.longitude.name}`}:{warning:(0,r.t)("geo.get-geometry-field.warning-select-lat-long","Select latitude/longitude fields")};case c.aG.Geohash:return y.geohash?{field:(0,i.qy)(y.geohash),derived:!0,description:`${y.mode}`}:{warning:(0,r.t)("geo.get-geometry-field.warning-select-geohash","Select geohash field")};case c.aG.Lookup:return y.lookup?m.gazetteer?{field:(0,i.Dc)(m.gazetteer,y.lookup),derived:!0,description:`${y.mode}: ${m.gazetteer.path}`}:{warning:(0,r.t)("geo.get-geometry-field.warning-gazetteer-not-found","Gazetteer not found")}:{warning:(0,r.t)("geo.get-geometry-field.warning-select-lookup","Select lookup field")}}return{warning:(0,r.t)("geo.get-geometry-field.warning-no-geometry","unable to find geometry")}}},87063:(ne,A,e)=>{"use strict";e.d(A,{W:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=e(31286),c=e(25460),i=e(30930),o=e(94535),h=e(92132);const f=s.forwardRef(({header:E,children:v,ariaLabel:p,onOpen:m,onClose:y,onKeyDown:d,...x},b)=>{const D=(0,l.of)(u),C=(0,s.useRef)(null);(0,s.useImperativeHandle)(b,()=>C.current);const[P]=(0,h.t)({isMenuOpen:!0,localRef:C,onOpen:m,onClose:y,onKeyDown:d});return(0,n.jsxs)(r.a,{...x,"aria-label":p,backgroundColor:"elevated",borderRadius:"default",boxShadow:"z3",display:"inline-block",onKeyDown:P,paddingX:.5,paddingY:.5,ref:C,role:"menu",tabIndex:-1,children:[E&&(0,n.jsx)("div",{className:(0,a.cx)(D.header,!!v&&s.Children.toArray(v).length>0&&D.headerBorder),children:E}),v]})});f.displayName="Menu";const g=Object.assign(f,{Item:o.D,Divider:c.N,Group:i.r}),u=E=>({header:(0,a.css)({padding:E.spacing(.5,.5,1,.5)}),headerBorder:(0,a.css)({borderBottom:`1px solid ${E.colors.border.weak}`,marginBottom:E.spacing(.5)})})},87105:(ne,A,e)=>{"use strict";e.d(A,{f:()=>c});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=e(3343);const c=(0,s.forwardRef)(({invalid:o,className:h,...f},g)=>{const u=(0,l.of)(i,o);return(0,n.jsx)("textarea",{...f,className:(0,a.cx)(u.textarea,h),ref:g})}),i=(o,h=!1)=>({textarea:(0,a.cx)((0,r.Xb)(o),(0,r.gm)(o),(0,a.css)({display:"block",borderRadius:o.shape.radius.default,padding:`${o.spacing.gridSize/4}px ${o.spacing.gridSize}px`,width:"100%",borderColor:h?o.colors.error.border:o.components.input.borderColor}))});c.displayName="TextArea"},87161:(ne,A,e)=>{"use strict";e.d(A,{Zt:()=>o,P8:()=>u,Ko:()=>g,Xq:()=>f,kH:()=>h,n4:()=>v,af:()=>E});var n=e(75816),a=e(73892),s=e(85618);const l=(0,s.TP)("folder.grafana.app","v1beta1"),r=(0,n.xP)({reducerPath:"folderAPIv1beta1",baseQuery:(0,a.W)({baseURL:l}),endpoints:()=>({})}),c=["API Discovery","Folder"],o=r.enhanceEndpoints({addTagTypes:c}).injectEndpoints({endpoints:p=>({getApiResources:p.query({query:()=>({url:"/apis/folder.grafana.app/v1beta1/"}),providesTags:["API Discovery"]}),listFolder:p.query({query:m=>({url:"/folders",params:{pretty:m.pretty,allowWatchBookmarks:m.allowWatchBookmarks,continue:m.continue,fieldSelector:m.fieldSelector,labelSelector:m.labelSelector,limit:m.limit,resourceVersion:m.resourceVersion,resourceVersionMatch:m.resourceVersionMatch,sendInitialEvents:m.sendInitialEvents,timeoutSeconds:m.timeoutSeconds,watch:m.watch}}),providesTags:["Folder"]}),createFolder:p.mutation({query:m=>({url:"/folders",method:"POST",body:m.folder,params:{pretty:m.pretty,dryRun:m.dryRun,fieldManager:m.fieldManager,fieldValidation:m.fieldValidation}}),invalidatesTags:["Folder"]}),deletecollectionFolder:p.mutation({query:m=>({url:"/folders",method:"DELETE",params:{pretty:m.pretty,continue:m.continue,dryRun:m.dryRun,fieldSelector:m.fieldSelector,gracePeriodSeconds:m.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:m.ignoreStoreReadErrorWithClusterBreakingPotential,labelSelector:m.labelSelector,limit:m.limit,orphanDependents:m.orphanDependents,propagationPolicy:m.propagationPolicy,resourceVersion:m.resourceVersion,resourceVersionMatch:m.resourceVersionMatch,sendInitialEvents:m.sendInitialEvents,timeoutSeconds:m.timeoutSeconds}}),invalidatesTags:["Folder"]}),getFolder:p.query({query:m=>({url:`/folders/${m.name}`,params:{pretty:m.pretty}}),providesTags:["Folder"]}),replaceFolder:p.mutation({query:m=>({url:`/folders/${m.name}`,method:"PUT",body:m.folder,params:{pretty:m.pretty,dryRun:m.dryRun,fieldManager:m.fieldManager,fieldValidation:m.fieldValidation}}),invalidatesTags:["Folder"]}),deleteFolder:p.mutation({query:m=>({url:`/folders/${m.name}`,method:"DELETE",params:{pretty:m.pretty,dryRun:m.dryRun,gracePeriodSeconds:m.gracePeriodSeconds,ignoreStoreReadErrorWithClusterBreakingPotential:m.ignoreStoreReadErrorWithClusterBreakingPotential,orphanDependents:m.orphanDependents,propagationPolicy:m.propagationPolicy}}),invalidatesTags:["Folder"]}),updateFolder:p.mutation({query:m=>({url:`/folders/${m.name}`,method:"PATCH",body:m.patch,params:{pretty:m.pretty,dryRun:m.dryRun,fieldManager:m.fieldManager,fieldValidation:m.fieldValidation,force:m.force}}),invalidatesTags:["Folder"]}),getFolderAccess:p.query({query:m=>({url:`/folders/${m.name}/access`}),providesTags:["Folder"]}),getFolderChildren:p.query({query:m=>({url:`/folders/${m.name}/children`}),providesTags:["Folder"]}),getFolderCounts:p.query({query:m=>({url:`/folders/${m.name}/counts`}),providesTags:["Folder"]}),getFolderParents:p.query({query:m=>({url:`/folders/${m.name}/parents`}),providesTags:["Folder"]})}),overrideExisting:!1}).enhanceEndpoints({endpoints:{getFolder:{providesTags:(p,m,y)=>p?[{type:"Folder",id:y.name}]:[]},listFolder:{providesTags:p=>p?[{type:"Folder",id:"LIST"},...p.items.map(m=>({type:"Folder",id:m.metadata?.name})).filter(Boolean)]:[{type:"Folder",id:"LIST"}]},deleteFolder:{invalidatesTags:(p,m)=>m?[]:[{type:"Folder",id:"LIST"}]},updateFolder:{query:p=>({url:`/folders/${p.name}`,method:"PATCH",body:JSON.stringify(p.patch),headers:{"Content-Type":"application/strategic-merge-patch+json"},params:{pretty:p.pretty,dryRun:p.dryRun,fieldManager:p.fieldManager,fieldValidation:p.fieldValidation,force:p.force}})}}}),{useGetFolderQuery:h,useGetFolderParentsQuery:f,useDeleteFolderMutation:g,useCreateFolderMutation:u,useUpdateFolderMutation:E,useReplaceFolderMutation:v}=o},87186:(ne,A,e)=>{"use strict";e.d(A,{xN:()=>C,Ay:()=>P,cT:()=>D,wn:()=>x,t$:()=>b});var n={};e.r(n),e.d(n,{clearFolders:()=>u,fetchNextChildrenPageFulfilled:()=>o,refetchChildrenFulfilled:()=>i,setAllSelection:()=>g,setFolderOpenState:()=>h,setItemSelectionState:()=>f});var a=e(65307),s=e(44220),l=e(99090),r=e(62963),c=e(78034);function i(T,O){const{children:S,page:B,kind:K,lastPageOfKind:U}=O.payload,{parentUID:F}=O.meta.arg,I={items:S,lastFetchedKind:K,lastFetchedPage:B,lastKindHasMoreItems:!U,isFullyLoaded:K==="dashboard"&&U};F&&F!==l.TF?T.childrenByParentUID[F]=I:T.rootItems=I}function o(T,O){const S=O.payload;if(!S)return;const{children:B,page:K,kind:U,lastPageOfKind:F}=S,{parentUID:I,excludeKinds:V=[]}=O.meta.arg,N={items:((I?T.childrenByParentUID[I]:T.rootItems)?.items??[]).concat(B),lastFetchedKind:U,lastFetchedPage:K,lastKindHasMoreItems:!F,isFullyLoaded:(V.includes("dashboard")||U==="dashboard")&&F};if(!I){T.rootItems=N;return}if(T.childrenByParentUID[I]=N,T.selectedItems.folder[I])for(const R of B)T.selectedItems[R.kind][R.uid]=!0}function h(T,O){const{folderUID:S,isOpen:B}=O.payload;T.openFolders[S]=B}function f(T,O){const{item:S,isSelected:B}=O.payload;if((0,r.I2)(S.uid))return;function K(U,F){if(T.selectedItems[U][F]=B,U!=="folder")return;let I=T.childrenByParentUID[F];for(const V of I?.items??[])K(V.kind,V.uid)}if(K(S.kind,S.uid),!B){let U=S.parentUID;for(;U;){const F=(0,c.R)(T.rootItems?.items??[],T.childrenByParentUID,U);if(!F)break;T.selectedItems[F.kind][F.uid]=!1,U=F.parentUID}}T.selectedItems.$all=T.rootItems?.items?.every(U=>T.selectedItems[U.kind][U.uid])??!1}function g(T,O){const{isSelected:S,folderUID:B,excludeUIDs:K}=O.payload;if(!(B&&(0,r.I2)(B)))if(T.selectedItems.$all=S,S){let F=function(I){if(I&&(0,r.I2)(I))return;const V=I?T.childrenByParentUID[I]:T.rootItems;if(V)for(const M of V.items)(0,r.I2)(M.uid)||K?.includes(M.uid)||(T.selectedItems[M.kind][M.uid]=S,M.kind==="folder"&&F(M.uid))};var U=F;F(B)}else for(const F in T.selectedItems){if(!(F==="dashboard"||F==="panel"||F==="folder"))continue;const I=T.selectedItems[F];for(const V in I)I[V]=S}}function u(T,O){const S=Array.isArray(O.payload)?O.payload:[O.payload];for(const B of S)B?(T.childrenByParentUID[B]=void 0,T.openFolders[B]=!1):T.rootItems=void 0}const{fetchNextChildrenPageFulfilled:E,refetchChildrenFulfilled:v,...p}=n,m={rootItems:void 0,childrenByParentUID:{},openFolders:{},selectedItems:{dashboard:{},folder:{},panel:{},$all:!1}},y=(0,a.Z0)({name:"browseDashboards",initialState:m,reducers:p,extraReducers:T=>{T.addCase(s.Ii.fulfilled,E),T.addCase(s.bw.fulfilled,v)}}),d=y.reducer,{setFolderOpenState:x,setItemSelectionState:b,setAllSelection:D,clearFolders:C}=y.actions,P={browseDashboards:d}},87252:(ne,A,e)=>{"use strict";e.d(A,{L:()=>i,h:()=>o});var n=e(8934),a=e(16515),s=e(53543),l=e(46644),r=e(92745),c=e(739);function i(h,f=!0){const g=[(0,r.t)("stat.add-standard-data-reduce-options.category-value-options","Value options")];h.addRadio({path:"reduceOptions.values",name:(0,r.t)("stat.add-standard-data-reduce-options.name-show","Show"),description:(0,r.t)("stat.add-standard-data-reduce-options.description-show","Calculate a single value per column or series or show each row"),settings:{options:[{value:!1,label:(0,r.t)("stat.add-standard-data-reduce-options.show-options.label-calculate","Calculate")},{value:!0,label:(0,r.t)("stat.add-standard-data-reduce-options.show-options.label-all-values","All values")}]},category:g,defaultValue:!1}),h.addNumberInput({path:"reduceOptions.limit",name:(0,r.t)("stat.add-standard-data-reduce-options.name-limit","Limit"),description:(0,r.t)("stat.add-standard-data-reduce-options.description-limit","Max number of rows to display"),category:g,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:u=>u.reduceOptions.values===!0}),h.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:(0,r.t)("stat.add-standard-data-reduce-options.name-calculation","Calculation"),description:(0,r.t)("stat.add-standard-data-reduce-options.description-calculation","Choose a reducer function / calculation"),category:g,editor:s.D.get("stats-picker").editor,defaultValue:[l.gy.lastNotNull],showIf:u=>u.reduceOptions.values===!1}),f&&h.addSelect({path:"reduceOptions.fields",name:(0,r.t)("stat.add-standard-data-reduce-options.name-fields","Fields"),description:(0,r.t)("stat.add-standard-data-reduce-options.description-fields","Select the fields that should be included in the panel"),category:g,settings:{allowCustomValue:!0,options:[],getOptions:async u=>{const E=[{value:"",label:(0,r.t)("stat.add-standard-data-reduce-options.fields-options.label-numeric-fields","Numeric Fields")},{value:"/.*/",label:(0,r.t)("stat.add-standard-data-reduce-options.fields-options.label-all-fields","All Fields")}];if(u&&u.data)for(const v of u.data)for(const p of v.fields){const m=(0,a.Ct)(p,v,u.data),y=`/^${(0,n.jD)(m)}$/`;E.push({value:y,label:m})}return Promise.resolve(E)}},defaultValue:""})}function o(h,f){h.addRadio({path:"orientation",name:(0,r.t)("stat.add-orientation-option.name-orientation","Orientation"),description:(0,r.t)("stat.add-orientation-option.description-orientation","Layout orientation"),category:f,settings:{options:[{value:c.wV.Auto,label:(0,r.t)("stat.add-orientation-option.orientation-options.label-auto","Auto")},{value:c.wV.Horizontal,label:(0,r.t)("stat.add-orientation-option.orientation-options.label-horizontal","Horizontal")},{value:c.wV.Vertical,label:(0,r.t)("stat.add-orientation-option.orientation-options.label-vertical","Vertical")}]},defaultValue:c.wV.Auto})}},87281:(ne,A,e)=>{"use strict";e.d(A,{z:()=>c});var n=e(74848),a=e(70255),s=e(1749),l=e(89640),r=e(77256);const c=({name:o,...h})=>{const{currentData:f,isLoading:g,isSuccess:u}=s.P.endpoints.listReceiver.useQuery({fieldSelector:`spec.title=${o}`}),E=f?.items.at(0)?.metadata.name;return g?i:u&&E?(0,n.jsx)(l.Y,{href:(0,r.vV)(E,{alertmanager:"grafana"}),inline:!1,...h,children:o}):o},i=(0,n.jsx)(a.A,{height:8,width:64})},87308:(ne,A,e)=>{"use strict";e.d(A,{L:()=>c});var n=e(2543),a=e.n(n),s=e(45863),l=e(3371),r=e(8285);class c extends s.Bs{constructor(g){super(g),this._variableDependency=new s.Sh(this,{variableNames:[this.state.variableName],onVariableUpdateCompleted:()=>this.performRepeat()}),this.addActivationHandler(()=>this._activationHandler())}_activationHandler(){this.performRepeat();const g=this._getLayout(),u=this._getRow(),E=g.subscribeToState(()=>{const v=g.state.children.filter(p=>p instanceof s.tI&&p.state.repeatSourceKey===u.state.key);for(const p of v)p instanceof s.tI&&p.state.children.length!==u.state.children.length&&this.performRepeat(!0)});return()=>{E.unsubscribe()}}_getRow(){if(!(this.parent instanceof s.tI))throw new Error("RepeatedRowBehavior: Parent is not a SceneGridRow");return this.parent}_getLayout(){const g=s.jh.getLayout(this);if(!(g instanceof s.hy))throw new Error("RepeatedRowBehavior: Layout is not a SceneGridLayout");return g}performRepeat(g=!1){if(this._variableDependency.hasDependencyInLoadingState())return;const u=s.jh.lookupVariable(this.state.variableName,this.parent?.parent);if(!u){console.error("RepeatedRowBehavior: Variable not found");return}if(!(u instanceof s.n8)){console.error("RepeatedRowBehavior: Variable is not a MultiValueVariable");return}const E=this._getRow(),v=this._getLayout(),{values:p,texts:m}=(0,r.a7)(u);if((0,n.isEqual)(this._prevRepeatValues,p)&&!g)return;this._prevRepeatValues=p,this._clonedRows=[];const y=E.state.children,d=i(y);let x=0;const b={values:[""],texts:u.hasAllValue()?["All"]:["None"]},D=p.length?p:b.values,C=m.length?m:b.texts;for(let P=0;P<D.length;P++){const O=P===0?E:E.clone({key:(0,l.lv)(E.state.key,P),repeatSourceKey:E.state.key,y:(E.state.y??0)+d*P+P,$behaviors:[],actions:void 0});O.setState({$variables:(0,l.D1)(u,D[P],C[P]),children:[]});const S=[];for(const B of y){const K=B.state.y??0,U=P>0?B.clone():B,F=K+(d+1)*P;P>0&&U.setState({y:F,key:O.state.key+B.state.key}),S.push(U),x<F+U.state.height&&(x=F+U.state.height)}O.setState({children:S}),this._clonedRows.push(O)}o(v,this._clonedRows,x,E.state.key)}removeBehavior(){const g=this._getRow(),u=this._getLayout(),E=h(u,g.state.key);u.setState({children:E}),g.setState({$behaviors:g.state.$behaviors.filter(v=>v!==this),$variables:void 0})}resetPrevRepeatValues(){this._prevRepeatValues=void 0}}function i(f){let g=0,u=Number.MAX_VALUE;if(f.length===0)return 0;for(const E of f)E.state.y+E.state.height>g&&(g=E.state.y+E.state.height),E.state.y<u&&(u=E.state.y);return g-u}function o(f,g,u,E){const v=h(f,E),p=v.findIndex(y=>y instanceof s.tI&&y.state.key===E);if(p===-1)throw new Error("RowRepeaterBehavior: Parent row not found in layout children");const m=[...v.slice(0,p),...g,...v.slice(p+1)];if(v.length>p+1){const y=v.slice(p+1),d=y[0].state.y,x=u-d;for(const b of y)if(b.setState({y:b.state.y+x}),b instanceof s.tI)for(const D of b.state.children)D.setState({y:D.state.y+x})}f.setState({children:m})}function h(f,g){return f.state.children.filter(u=>!(u instanceof s.tI)||u.state.repeatSourceKey!==g)}},87390:(ne,A,e)=>{"use strict";e.d(A,{Ap:()=>i,O6:()=>o,Xk:()=>f,gW:()=>h});var n=e(69168),a=e(30124),s=e(41097),l=e(37256),r=e(87745),c=e(89224);function i(u){return async(E,v)=>{if(u.libraryPanel?.uid&&!("model"in u.libraryPanel)){E(g(u));return}u.maxDataPoints&&(u.maxDataPoints=Number(u.maxDataPoints));let p=u.type,m=v().plugins.panels[p];if(!m)try{m=await E((0,l.y7)(p))}catch{m=(0,s.$)(p,p==="row")}u.plugin||await u.pluginLoaded(m),E((0,c.XM)({key:u.key,plugin:m}))}}function o(u){return E=>{E((0,c.FC)({key:u}))}}function h({panel:u,pluginId:E,options:v,fieldConfig:p,transformations:m}){return async(y,d)=>{if(u.type===E&&!v&&!p&&!m)return;let b=d().plugins.panels[E];if(b||(b=await y((0,l.y7)(E))),u.type!==E&&u.changePlugin(b),v||p||m){const D=(0,n.F)({plugin:b,currentOptions:v||u.options,currentFieldConfig:p||u.fieldConfig,isAfterPluginChange:!1});u.options=D.options,u.fieldConfig=D.fieldConfig,u.transformations=m||u.transformations,u.configRev++}u.generateNewKey(),y((0,c.XM)({key:u.key,plugin:b}))}}function f(u,E){return async(v,p)=>{const m=E.model.type,y=u.type;if(u.restoreModel({...E.model,gridPos:u.gridPos,id:u.id,libraryPanel:E}),u.getQueryRunner().clearLastResult(),y!==m){let x=p().plugins.panels[m];x||(x=await v((0,l.y7)(m))),await u.pluginLoaded(x),u.generateNewKey(),await v((0,c.XM)({key:u.key,plugin:x}))}else{const d=u.key;u.generateNewKey(),v((0,c.io)({oldKey:d,newKey:u.key}))}u.configRev=0,u.hasSavedPanelEditChange=!0,u.refresh(),u.events.publish(r.zq),u.events.publish(r.PR)}}function g(u){return async(E,v)=>{const p=u.libraryPanel.uid;try{const m=await(0,a.Yr)(p,!0);u.initLibraryPanel(m);const y=v().dashboard.getModel();if(u.repeat&&y){const d=y.panels.findIndex(x=>x.id===u.id);y.repeatPanel(u,d),y.sortPanelsByGridPos(),y.events.publish(new r.Q$)}await E(i(u))}catch(m){console.log("ERROR: ",m),E((0,c.XM)({key:u.key,plugin:(0,s.$)("Unable to load library panel: "+p,!1)}))}}}},87745:(ne,A,e)=>{"use strict";e.d(A,{Am:()=>D,Bt:()=>v,Cf:()=>o,Eu:()=>T,Io:()=>E,JI:()=>r,KU:()=>C,PR:()=>c,Q$:()=>i,Rh:()=>m,S8:()=>b,U0:()=>g,VZ:()=>p,Vz:()=>y,XM:()=>f,bG:()=>s,bY:()=>x,i0:()=>K,sL:()=>B,sj:()=>U,xL:()=>u,xc:()=>O,yj:()=>S,zq:()=>l});var n=e(36819),a=e(68388);const s=(0,n.R)("template-variable-value-updated");class l extends a.a{static{this.type="panel-queries-changed"}}class r extends a.a{static{this.type="panel-transformations-changed"}}class c extends a.a{static{this.type="panels-options-changed"}}class i extends a.a{static{this.type="dashboard-panels-changed"}}class o extends a.a{static{this.type="dashboard-meta-changed"}}class h extends a.a{static{this.type="panel-directive-ready"}}class f extends a.a{static{this.type="render"}}class g extends a.x{static{this.type="zoom-out"}}var u=(F=>(F[F.Left=-1]="Left",F[F.Right=1]="Right",F))(u||{});class E extends a.x{static{this.type="shift-time"}}class v extends a.a{static{this.type="copy-time"}}class p extends a.x{static{this.type="paste-time"}}class m extends a.x{static{this.type="absolute-time"}}class y extends a.x{static{this.type="remove-panel"}}class d extends a.x{static{this.type="show-modal"}}class x extends a.x{static{this.type="show-confirm-modal"}}class b extends a.x{static{this.type="show-react-modal"}}class D extends a.x{static{this.type="open-extension-sidebar"}}class C extends a.a{static{this.type="close-extension-sidebar"}}class P extends a.a{static{this.type="hide-modal"}}class T extends a.a{static{this.type="dashboard-saved"}}class O extends a.x{static{this.type="annotation-query-started"}}class S extends a.x{static{this.type="annotation-query-finished"}}class B extends a.x{static{this.type="panel-edit-started"}}class K extends a.x{static{this.type="panel-edit-finished"}}class U extends a.x{static{this.type="record-history-entry"}}},87748:(ne,A,e)=>{"use strict";e.d(A,{AR:()=>o,Am:()=>i,I7:()=>h,KG:()=>c,ah:()=>f,iM:()=>r});var n=e(45863),a=e(6048),s=e(32603);function l(g){return g.parent instanceof a.M?g.parent:n.jh.getAncestor(g,a.M)}function r(g){return l(g).parent}function c(g){return(0,s.dQ)(r(g))}function i(g){l(g).removeCondition(g)}function o(g,u){l(g).undoRemoveCondition(g,u)}function h(g){return l(g).getConditionIndex(g)}function f(g){l(g).check()}},87766:(ne,A,e)=>{"use strict";e.d(A,{$:()=>i});var n=e(74848),a=e(80011),s=e(92745),l=e(27594),r=e(66404);const c="dddd YYYY-MM-DD HH:mm zz",i=({ldapSyncInfo:o})=>{const h=(0,a.LE)(o.nextSync,{format:c}),f=[{id:"syncAttribute"},{id:"syncValue"}],g=[{syncAttribute:"Active synchronization",syncValue:o.enabled?"Enabled":"Disabled"},{syncAttribute:"Scheduled",syncValue:o.schedule},{syncAttribute:"Next synchronization",syncValue:h}];return(0,n.jsxs)("section",{children:[(0,n.jsx)(r.E,{element:"h3",children:(0,n.jsx)(s.x6,{i18nKey:"admin.ldap-sync-info.title",children:"LDAP Synchronization"})}),(0,n.jsx)(l.j,{data:g,columns:f,getRowId:u=>u.syncAttribute})]})}},87767:(ne,A,e)=>{"use strict";e.d(A,{k:()=>J});var n=e(74848),a=e(22803),s=e(96540),l=e(49185),r=e(70713),c=e(92745),i=e(14170),o=e(1578),h=e(52315),f=e(63142),g=e(41654),u=e(45861),E=e(22787),v=e(24726),p=e(22592),m=e(88673),y=e(41778);function d(se){const ie=[];for(const ce of se){let re="text";switch(ce.type?.toUpperCase()){case"BOOLEAN":case"BOOL":{re="boolean";break}case"BYTES":case"VARCHAR":{re="text";break}case"FLOAT":case"FLOAT64":case"INT":case"INTEGER":case"INT64":case"NUMERIC":case"BIGNUMERIC":{re="number";break}case"DATE":{re="date";break}case"DATETIME":{re="datetime";break}case"TIME":{re="time";break}case"TIMESTAMP":{re="datetime";break}case"GEOGRAPHY":{re="text";break}default:break}ie.push({...ce,raqbFieldType:re,icon:x(ce.type.toUpperCase())})}return ie}function x(se){switch(se){case"TIME":case"DATETIME":case"TIMESTAMP":return"clock-nine";case"BOOLEAN":return"toggle-off";case"INTEGER":case"FLOAT":case"FLOAT64":case"INT":case"SMALLINT":case"BIGINT":case"TINYINT":case"BYTEINT":case"INT64":case"NUMERIC":case"DECIMAL":return"calculator-alt";case"CHAR":case"VARCHAR":case"STRING":case"BYTES":case"TEXT":case"TINYTEXT":case"MEDIUMTEXT":case"LONGTEXT":return"text";case"GEOGRAPHY":return"map";default:return}}var b=e(2543);function D({sql:se,dataset:ie,table:ce}){let re="";if(!se||!haveColumns(se.columns))return re;if(re+=createSelectClause(se.columns),ie&&ce&&(re+=`FROM ${ie}.${ce} `),se.whereString&&(re+=`WHERE ${se.whereString} `),se.groupBy?.[0]?.property.name){const ue=se.groupBy.map(X=>X.property.name).filter(X=>!isEmpty(X));re+=`GROUP BY ${ue.join(", ")} `}return se.orderBy?.property.name&&(re+=`ORDER BY ${se.orderBy.property.name} `),se.orderBy?.property.name&&se.orderByDirection&&(re+=`${se.orderByDirection} `),se.limit!==void 0&&se.limit>=0&&(re+=`LIMIT ${se.limit} `),re}function C(se){return P(se)?se:`\`${se}\``}function P(se){const ie=/^[a-zA-Z_][a-zA-Z0-9_$]*$/g.test(se);return!S.includes(se.toUpperCase())&&ie}function T(se){return se[0]==='"'&&se[se.length-1]==='"'?se.substring(1,se.length-1).replace(/""/g,'"'):se[0]==="`"&&se[se.length-1]==="`"?se.substring(1,se.length-1):se}function O(se){return"'"+se.replace(/'/g,"''")+"'"}const S=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BIGINT","BINARY","BLOB","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHAR","CHARACTER","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CUBE","CUME_DIST","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DEC","DECIMAL","DECLARE","DEFAULT","DELAYED","DELETE","DENSE_RANK","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DOUBLE","DROP","DUAL","EACH","ELSE","ELSEIF","EMPTY","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FIRST_VALUE","FLOAT","FLOAT4","FLOAT8","FOR","FORCE","FOREIGN","FROM","FULLTEXT","FUNCTION","GENERATED","GET","GRANT","GROUP","GROUPING","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","INTERSECT","INTERVAL","INTO","IO_AFTER_GTIDS","IO_BEFORE_GTIDS","IS","ITERATE","JOIN","JSON_TABLE","KEY","KEYS","KILL","LAG","LAST_VALUE","LATERAL","LEAD","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LONGBLOB","LONGTEXT","LOOP","LOW_PRIORITY","MASTER_BIND","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NTH_VALUE","NTILE","NULL","NUMERIC","OF","ON","OPTIMIZE","OPTIMIZER_COSTS","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PERCENT_RANK","PRECISION","PRIMARY","PROCEDURE","PURGE","RANGE","RANK","READ","READS","READ_WRITE","REAL","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","REVOKE","RIGHT","RLIKE","ROW","ROWS","ROW_NUMBER","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SMALLINT","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STORED","STRAIGHT_JOIN","SYSTEM","TABLE","TERMINATED","THEN","TINYBLOB","TINYINT","TINYTEXT","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VARBINARY","VARCHAR","VARCHARACTER","VARYING","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"];var B=e(29328);async function K(se,ie){const ce=B.Ex;if(!se.table)return[];const re=`SELECT * FROM ${se.table} LIMIT 1`,ue=await ce.runMetaSQLExprQuery({rawSql:re,format:y.gv.Table,refId:`fields-${(0,v.A)()}`},(0,p.E2)(),ie.filter(he=>he.refId===se.table)),X=new m.R(ue),le=Object.values(X.fields).map(({name:he,type:fe})=>({name:he,text:he,label:he,value:C(he),type:fe}));return d(le)}const U=["if","coalesce","ifnull","nullif","sum","avg","count","min","max","stddev","std","stddev_pop","variance","var_pop","group_concat","row_number","rank","dense_rank","lead","lag","first_value","last_value","abs","round","floor","ceiling","ceil","sqrt","pow","power","mod","log","log10","exp","sign","ln","truncate","sin","cos","tan","asin","acos","atan","atan2","rand","pi","concat","length","char_length","lower","upper","substring","substring_index","left","right","ltrim","rtrim","replace","reverse","lcase","ucase","mid","repeat","position","instr","locate","ascii","ord","char","regexp_substr","str_to_date","date_format","date_add","date_sub","year","month","day","weekday","datediff","unix_timestamp","from_unixtime","extract","hour","minute","second","dayname","monthname","dayofweek","dayofmonth","dayofyear","week","quarter","time_to_sec","sec_to_time","timestampdiff","timestampadd","cast","convert","json_extract","json_object","json_array","json_merge_patch","json_valid","json_contains","json_length","json_type","json_keys","json_search","json_quote","json_unquote","json_set","json_insert","json_replace","json_remove"],F=se=>{const[ie,ce]=(0,s.useState)(""),[re,ue]=(0,s.useState)(!1),[X,le]=(0,s.useState)(se),he=De=>{ce(De),ue(!0)},fe=()=>ue(!0),Ce=()=>ue(!1),Ae=De=>{le(De),ce("")},_e=()=>{ce(""),ue(!1)},Xe=(0,s.useMemo)(()=>!!ie||X!==se,[ie,X,se]);return{explanation:ie,isExplanationOpen:re,prevExpression:X,shouldShowViewExplanation:Xe,handleExplain:he,handleOpenExplanation:fe,handleCloseExplanation:Ce,updatePrevExpression:Ae,clearExplanation:_e}},I=()=>{const[se,ie]=(0,s.useState)([]),[ce,re]=(0,s.useState)(!1),ue=(0,s.useRef)(0);return{suggestions:se,isDrawerOpen:ce,handleHistoryUpdate:Ae=>{ie(Ae),Ae.length>ue.current&&re(!0),ue.current=Ae.length},handleApplySuggestion:Ae=>(re(!1),Ae),handleOpenDrawer:()=>re(!0),handleCloseDrawer:()=>re(!1),clearSuggestions:()=>{ie([]),re(!1),ue.current=0}}};var V=e(76319),M=e(53371),L=e(45967),N=e(30703);const W=2*1e3,R=({onFormatCode:se,onExpand:ie,isExpanded:ce,query:re})=>{const ue=(0,f.of)(G),[X,le]=(0,s.useState)(!1),he=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!X)return;const Ae=setTimeout(()=>{le(!1)},W);return()=>clearTimeout(Ae)},[X]);const fe=(0,s.useCallback)(async()=>{try{await navigator.clipboard.writeText(re.expression??""),le(!0)}catch(Ae){console.error(Ae)}},[re.expression]),Ce=(0,c.t)("clipboard-button.inline-toast.success","Copied");return(0,n.jsx)("div",{className:ue.container,children:(0,n.jsxs)(g.B,{alignItems:"center",direction:"row",gap:1,children:[se&&(0,n.jsx)(V.K,{onClick:se,name:"brackets-curly",size:"xs",tooltip:(0,c.t)("expressions.query-toolbox.tooltip-format-query","Format query")}),ie&&(0,n.jsx)(V.K,{onClick:()=>ie(!ce),name:ce?"angle-double-up":"angle-double-down",size:"xs",tooltip:ce?(0,c.t)("expressions.query-toolbox.tooltip-collapse-editor","Collapse editor"):(0,c.t)("expressions.query-toolbox.tooltip-expand-editor","Expand editor")}),X&&(0,n.jsx)(M.r,{placement:"top",referenceElement:he.current,children:Ce}),(0,n.jsx)(V.K,{name:X?"check":"copy",onClick:fe,ref:he,size:"xs",tooltip:(0,c.t)("expressions.query-toolbox.tooltip-copy-query","Copy query"),variant:X?"primary":"secondary"}),!ce&&(0,n.jsx)(L.m,{content:(0,c.t)("expressions.query-toolbox.tooltip-run-query","Hit ctrl/cmd+enter to run query"),children:(0,n.jsx)(N.I,{name:"keyboard"})})]})})},G=se=>({container:(0,a.css)({border:`1px solid ${se.colors.border.medium}`,borderTop:"none",padding:se.spacing(1),display:"flex",flexGrow:1,justifyContent:"end",fontSize:se.typography.bodySmall.fontSize})});var w=e(43173);const _=se=>(ie,ce)=>({...ce,triggerCharacters:[" "],tables:{resolve:async()=>se.refIds.map(ue=>({name:ue.label||ue.value||"",completion:ue.label||ue.value||""}))},columns:{resolve:async re=>{if(w.$.featureToggles.sqlExpressionsColumnAutoComplete)try{return await se.getFields({table:re?.table})}catch{return[]}else return[]}},supportedFunctions:()=>U.map(re=>({id:re,name:re}))}),Q=(0,s.lazy)(()=>e.e(2311).then(e.bind(e,12311)).then(se=>({default:se.GenAISQLSuggestionsButton}))),ae=(0,s.lazy)(()=>e.e(7585).then(e.bind(e,97585)).then(se=>({default:se.GenAISQLExplainButton}))),q=(0,s.lazy)(()=>e.e(5984).then(e.bind(e,15984)).then(se=>({default:se.SuggestionsDrawerButton}))),k=(0,s.lazy)(()=>e.e(5110).then(e.bind(e,25110)).then(se=>({default:se.GenAISuggestionsDrawer}))),ee=(0,s.lazy)(()=>e.e(8016).then(e.bind(e,58016)).then(se=>({default:se.GenAIExplanationDrawer}))),j=2,J=({onChange:se,refIds:ie,query:ce,alerting:re=!1,queries:ue,metadata:X,onRunQuery:le})=>{const he=(0,s.useMemo)(()=>ie.map(at=>at.value),[ie]),Ce={id:"mysql",completionProvider:(0,s.useMemo)(()=>_({getFields:at=>te(at,ue||[]),refIds:ie}),[ue,ie]),formatter:h.se},Ae=`SELECT
  *
FROM
  ${he[0]}
LIMIT
  10`,_e=(0,f.of)(Z),Xe=(0,s.useRef)(null),[De,Me]=(0,s.useState)({height:0}),[Te,$e]=(0,l.A)(),[Re,Ke]=(0,s.useState)(!1),{handleApplySuggestion:Ve,handleHistoryUpdate:Se,handleCloseDrawer:Ye,handleOpenDrawer:Ue,isDrawerOpen:je,suggestions:Qe}=I(),{explanation:He,handleCloseExplanation:Je,handleOpenExplanation:de,handleExplain:ve,isExplanationOpen:me,shouldShowViewExplanation:xe,updatePrevExpression:Ee}=F(ce.expression||""),Pe=(0,s.useMemo)(()=>({alerting:re,panelId:X?.data?.request?.panelPluginId,queries:X?.queries,dashboardContext:{dashboardTitle:X?.data?.request?.dashboardTitle??"",panelName:X?.data?.request?.panelName??""},datasources:X?.queries?.map(at=>at.datasource?.type??"")??[],totalRows:X?.data?.series.reduce((at,ht)=>at+ht.length,0),requestTime:X?.data?.request?.endTime?X?.data?.request?.endTime-X?.data?.request?.startTime:-1,numberOfQueries:X?.data?.request?.targets?.length??0,seriesData:X?.data?.series}),[re,X]),Oe=(0,s.useMemo)(()=>{if(!X?.data)return[];const at=[];return X.data.errors?.length?at.push(...X.data.errors.map(ht=>ht.message).filter(ht=>!!ht)):X.data.error?.message&&at.push(X.data.error.message),at},[X?.data]),We=at=>{se({...ce,expression:at,format:re?"alerting":void 0}),Ee(at)},Fe=at=>{We(at),Ve(at)},Be=(0,s.useCallback)(()=>{ce.expression&&le&&le()},[ce.expression,le]);(0,s.useEffect)(()=>{if(!Xe.current)return;const at=new ResizeObserver(ht=>{const{height:Et}=ht[0].contentRect;Me({height:Et})});return at.observe(Xe.current),()=>at.disconnect()},[]),(0,s.useEffect)(()=>{ce.expression||We(Ae)},[]),(0,s.useEffect)(()=>{const at=ht=>{(navigator.userAgent.includes("Mac")?ht.metaKey:ht.ctrlKey)&&ht.key==="Enter"&&(ht.preventDefault(),ht.stopPropagation(),Be())};return document.addEventListener("keydown",at,!0),()=>document.removeEventListener("keydown",at,!0)},[Be]);const Le=at=>(0,n.jsx)("div",{ref:Te,children:(0,n.jsx)(R,{query:ce,onFormatCode:at,onExpand:Ke,isExpanded:Re})}),Ge=()=>(0,n.jsxs)("div",{className:_e.sqlButtons,children:[(0,n.jsxs)(g.B,{direction:"row",gap:1,alignItems:"center",justifyContent:"end",children:[(0,n.jsx)(u.$n,{icon:"play",onClick:Be,size:"sm",children:(0,c.t)("expressions.sql-expr.button-run-query","Run query")}),(0,n.jsx)(s.Suspense,{fallback:null,children:xe?(0,n.jsx)(u.$n,{fill:"outline",icon:"gf-movepane-right",onClick:de,size:"sm",variant:"secondary",children:(0,n.jsx)(c.x6,{i18nKey:"sql-expressions.view-explanation",children:"View explanation"})}):(0,n.jsx)(ae,{currentQuery:ce.expression||"",onExplain:ve,queryContext:Pe,refIds:he})}),(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(Q,{currentQuery:ce.expression||"",initialQuery:Ae,onGenerate:()=>{},onHistoryUpdate:Se,queryContext:Pe,refIds:he,errorContext:Oe})})]}),Qe.length>0&&(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(q,{handleOpenDrawer:Ue,suggestions:Qe})})]}),Ze=(at,ht)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:_e.sqlContainer,children:[Ge(),(0,n.jsx)("div",{ref:Xe,className:_e.editorContainer,children:(0,n.jsx)(i.Y,{query:ce.expression||Ae,onChange:We,width:at,height:ht??De.height-j-$e.height,language:Ce,children:({formatQuery:Et})=>Le(Et)})})]}),(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(k,{isOpen:je,onApplySuggestion:Fe,onClose:Ye,suggestions:Qe})}),(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(ee,{isOpen:me,onClose:Je,explanation:He})})]}),qe=()=>(0,n.jsx)(r.Ay,{children:({width:at,height:ht})=>(0,n.jsx)(i.Y,{query:ce.expression||Ae,onChange:We,width:at,height:ht?ht-j-$e.height:void 0,language:Ce,children:({formatQuery:Et})=>Le(Et)})});return(0,n.jsxs)(n.Fragment,{children:[Ze(),Re&&(0,n.jsx)(E.a,{title:(0,c.t)("expressions.sql-expr.modal-title","SQL Editor"),closeOnBackdropClick:!1,closeOnEscape:!1,className:_e.modal,contentClassName:_e.modalContent,isOpen:Re,onDismiss:()=>Ke(!1),children:qe()})]})},Z=se=>({sqlContainer:(0,a.css)({display:"grid",gridTemplateRows:"auto 1fr",gridTemplateAreas:`
      "buttons"
      "editor"
    `,gap:se.spacing(.5)}),editorContainer:(0,a.css)({gridArea:"editor",height:"240px",resize:"vertical",overflow:"auto",minHeight:"100px"}),modal:(0,a.css)({width:"95vw",height:"95vh"}),modalContent:(0,a.css)({height:"100%",paddingTop:0}),sqlButtons:(0,a.css)({gridArea:"buttons",justifySelf:"end",transform:`translateY(${se.spacing(-4)})`,marginBottom:se.spacing(-4),zIndex:10,position:"relative",display:"flex",alignItems:"center",gap:se.spacing(1)})});async function te(se,ie){return(await K({table:se.table},ie)).map(re=>({name:re.name,completion:re.value,kind:o.Io.Field}))}},87963:(ne,A,e)=>{"use strict";e.d(A,{MA:()=>s,WB:()=>r,_I:()=>l});var n=e(39796),a=e(51515);function s(c,i){const o=[];if(c?.statistics&&c?.statistics.length){c.statistic=c.statistics[0];for(const h of c.statistics.splice(1))o.push({...c,statistic:h})}for(const h of o)h.refId=(0,n.M)(i),delete h.statistics,i.push(h);return delete c.statistics,o}function l(c){const i=[];if(c&&"statistics"in c&&c?.statistics?.length){for(const o of c.statistics.splice(1)){const{statistics:h,name:f,...g}=c;i.push({...g,statistic:o,name:`${f} - ${o}`})}c.statistic=c.statistics[0],i.length!==0&&(c.name=`${c.name} - ${c.statistic}`),delete c.statistics}return i}function r(c){c.hasOwnProperty("metricQueryType")||(c.metricQueryType=a.d$.Search),c.hasOwnProperty("metricEditorMode")||(c.metricQueryType===a.d$.Insights?c.metricEditorMode=a.Rx.Code:c.metricEditorMode=c.expression?a.Rx.Code:a.Rx.Builder)}},88011:(ne,A,e)=>{"use strict";e.d(A,{Nn:()=>c,Ru:()=>i,hX:()=>l});var n=e(79118),a=e(739),s=e(59427);function l(o,h){return r((0,s.UI)(o,h?.field),h)}function r(o,h,f){if(!o){const m=h.fixed??0;return{isAssumed:!!h.field?.length||!h.fixed,fixed:m,value:()=>m,get:()=>m}}const g=(0,n.AP)(o),u=h.max-h.min;if(o.values.length<1||u<=0||g.delta<=0)return{fixed:h.min,value:()=>h.min,get:()=>h.min};let v=m=>h.min+m*u;if(f===a.QH.Quad){const m=Math.PI*(h.max/2)**2,y=Math.PI*(h.min/2)**2,d=m-y;v=x=>{let b=y+d*x;return Math.sqrt(b/Math.PI)*2}}const p=m=>{const y=o.values[m];let d=0;return y!==-1/0&&(d=(y-g.min)/g.delta),d>1?d=1:d<0&&(d=0),v(d)};return{get:p,value:()=>p((0,s.sB)(o)),field:o}}function c(o){return o||(o={min:0,max:1}),o.min==null&&(o.min=0),o.max==null&&(o.max=1),o}function i(o,h){let{min:f,max:g}=c(h);if(o||(o={}),o.max==null&&(o.max=g),o.min==null&&(o.min=f),o.min>o.max){const u=o.max;o.max=o.min,o.min=u}return o.min<f&&(o.min=f),o.max>g&&(o.max=g),o.fixed==null&&(o.fixed=o.min+(o.max-o.min)/2),o.field||(o.fixed>g?o.fixed=g:o.fixed<f&&(o.fixed=f)),o}},88114:(ne,A,e)=>{"use strict";e.d(A,{Im:()=>l,nv:()=>s,rw:()=>a});var n=e(11257);const a=[n.w.AlertingRoutesRead],s=[n.w.AlertingRoutesWrite],l=[...a,...s]},88499:(ne,A,e)=>{"use strict";e.d(A,{M:()=>l});var n=e(45863),a=e(8285);class s{constructor(c,i){this._sceneObject=i,this.state={name:c,type:"dashboard_macro"}}getValue(c){const i=(0,a.YQ)(this._sceneObject);switch(c){case"uid":return i.state.uid||"";case"title":case"name":case"id":default:return i.state.title}}getValueText(){return""}}function l(){try{const r=n.Go.registerVariableMacro("__dashboard",s);return()=>r()}catch(r){return console.error("Error registering dashboard macro",r),()=>{}}}},88531:(ne,A,e)=>{"use strict";e.d(A,{XL:()=>f,gK:()=>u,h:()=>d,pd:()=>p});var n=e(74848),a=e(96540),s=e(16515),l=e(47184),r=e(36638),c=e(57866),i=e(92745),o=e(18857);const h=(x,b,D)=>{if(!D)return;let C=x.find(P=>!b.some(T=>P===T));if(C)return C};function f({value:x,data:b,onChange:D,placeholder:C,id:P}){const T=(0,a.useMemo)(()=>E(b),[b]),[O,S]=(0,a.useState)({refIds:[],value:void 0}),B=(0,a.useMemo)(()=>T.find(U=>U.value===x)??h(T,O.refIds,O.value),[x,T,O]),K=(0,a.useCallback)(U=>{D(U?.value)},[D]);return(T!==O.refIds||B?.value!==O.value)&&S({refIds:T,value:B?.value}),(0,n.jsx)(o.l6,{inputId:P,options:T,onChange:K,isClearable:!0,placeholder:C??"Select query refId",value:B})}const g=(x,b,D)=>{if(!D||!D.length)return;const C=x.filter(P=>b.some(T=>P===T));if(C.length)return C};function u({value:x,data:b,onChange:D,placeholder:C,id:P}){const T=(0,a.useMemo)(()=>E(b),[b]),[O,S]=(0,a.useState)({refIds:[],value:void 0}),B=(0,a.useMemo)(()=>{let U=new Set;if(x)if(x.startsWith("/^"))try{U=new Set(y(x))}catch{U.add(x)}else x.includes("|")?U=new Set(x.split("|")):U.add(x);const F=T.filter(M=>U.has(M.value||""));if(F.length)return F;const I=[...U].map(l.z),V=g(I,O.refIds,O.value)??[];return V.length>0?V:I.length>0?I:void 0},[x,T,O]),K=(0,a.useCallback)(U=>{D(U.map(F=>F.value))},[D]);return(T!==O.refIds||B?.length!==O.value?.length)&&S({refIds:T,value:B}),(0,n.jsx)(o.KF,{inputId:P,options:T,onChange:K,isClearable:!0,placeholder:C??"Select query refId",value:B})}function E(x){const b=new Map;for(const C of x){const P=C.refId??"",T=b.get(P)??[];T.length===0&&b.set(P,T),T.push(C)}const D=[];for(const[C,P]of b.entries())D.push({value:C,label:C?(0,i.t)("grafana-ui.matchers-ui.get-list-of-query-ref-ids.label","Query: {{refId}}",{refId:C}):(0,i.t)("grafana-ui.matchers-ui.get-list-of-query-ref-ids.label-missing-ref-id","Query: (missing refId)"),description:v(P)});return D}function v(x){return(0,i.t)("grafana-ui.matchers-ui.get-list-of-query-ref-ids.description","Frames ({{framesCount}}): {{framesNames}}",{framesCount:x.length,framesNames:`${x.slice(0,Math.min(3,x.length)).map(b=>(0,s.Ri)(b)).join(", ")} ${x.length>3?"...":""}`})}const p=()=>({id:c.Ct.byFrameRefID,component:x=>(0,n.jsx)(f,{value:x.options,data:x.data,onChange:x.onChange}),matcher:r.sJ.get(c.Ct.byFrameRefID),name:(0,i.t)("grafana-ui.matchers-ui.name-fields-by-query","Fields returned by query"),description:(0,i.t)("grafana-ui.matchers-ui.description-fields-by-query","Set properties for fields from a specific query"),optionsToLabel:x=>x});function m(x){return x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const y=x=>x.slice(5,-3).split(/(?<!\\)\|/g).map(b=>b.replace(/\\(.)/g,"$1")),d=x=>`/^(?:${x.map(b=>m(b)).join("|")})$/`},88547:(ne,A,e)=>{"use strict";e.d(A,{S:()=>s});var n=e(36303),a=e(74268);function s(l,r={}){return(0,n.Xc)(l,{...r,style:"page",errorLogger:a.vV})}},88559:(ne,A,e)=>{"use strict";e.d(A,{m:()=>u});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(46885),c=e(96540),i=e(86634),o=e(63142),h=e(44019),f=e(71495),g=e(15245);const u=c.memo(({children:v,overlay:p,placement:m,offset:y,onVisibleChange:d})=>{const[x,b]=(0,c.useState)(!1),D=(0,c.useRef)(null),C=(0,c.useCallback)(N=>{b(N),d?.(N)},[d]),P=[(0,s.cY)({mainAxis:y?.[0]??8,crossAxis:y?.[1]??0}),(0,s.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,s.BN)()],{context:T,refs:O,floatingStyles:S}=(0,l.we)({open:x,placement:(0,f.O)(m),onOpenChange:C,middleware:P,whileElementsMounted:r.ll}),B=(0,l.kp)(T),K=(0,l.s9)(T),{getReferenceProps:U,getFloatingProps:F}=(0,l.bv)([K,B]),I=150,V=(0,o.of)(E,I),M=()=>{C(!1)},L=N=>{N.key==="Tab"&&C(!1)};return(0,n.jsxs)(n.Fragment,{children:[c.cloneElement(v,{ref:O.setReference,...U()}),x&&(0,n.jsx)(g.ZL,{children:(0,n.jsx)(l.s3,{context:T,children:(0,n.jsx)("div",{ref:O.setFloating,style:S,onClick:M,onKeyDown:L,children:(0,n.jsx)(i.A,{nodeRef:D,appear:!0,in:!0,timeout:{appear:I,exit:0,enter:0},classNames:V,children:(0,n.jsx)("div",{ref:D,children:(0,h.renderOrCallToRender)(p,{...F()})})})})})})]})});u.displayName="Dropdown";const E=(v,p)=>({appear:(0,a.css)({opacity:"0",position:"relative",transformOrigin:"top",[v.transitions.handleMotion("no-preference")]:{transform:"scaleY(0.5)"}}),appearActive:(0,a.css)({opacity:"1",[v.transitions.handleMotion("no-preference")]:{transform:"scaleY(1)",transition:`transform ${p}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${p}ms cubic-bezier(0.2, 0, 0.2, 1)`}})})},88589:(ne,A,e)=>{"use strict";e.d(A,{Cs:()=>o,EL:()=>g,JQ:()=>h,Jw:()=>r,Lm:()=>c,PI:()=>E,h6:()=>f});var n=e(2543),a=e.n(n),s=e(79243),l=e(52161);const r=v=>{const p=v.fields.at(0);return p?.config?.displayNameFromDS??v.name??p?.labels?.__name__},c=v=>v.fields.at(0)?.values.at(0),i=new Intl.NumberFormat(void 0,{maximumSignificantDigits:5}),o=v=>Number.isFinite(v)&&typeof v=="number"?Math.abs(v)<1?i.format(v):(0,s.h)(v,5).toString(10):String(v),h=v=>v.fields[0]?.labels??{},f=v=>Object.entries(v).map(([p,m])=>p+"="+m).join(", "),g=v=>{const p=v.name;if((0,l.Eb)(v.rulesSource))return{name:p,parents:[]};try{const m=JSON.parse(p);if(!Array.isArray(m))throw new Error("not a nested Grafana folder");const y=(0,n.last)(m)??p,d=(0,n.dropRight)(m,1);return{name:y,parents:d}}catch{return{name:v.name,parents:[]}}},u=(v,p=[])=>JSON.stringify(p.concat(v)),E=v=>v.every(m=>m.fields.every(y=>y.values.every(d=>d==null)))},88632:(ne,A,e)=>{"use strict";e.d(A,{s:()=>s});var n=e(74848),a=e(45863);class s extends a.ps{constructor(r){super({...r,name:r.name??"Data layers",annotationLayers:r.annotationLayers??[]}),this.addActivationHandler(()=>this._onActivate())}_onActivate(){return this._subs.add(this.subscribeToState((r,c)=>{r.annotationLayers!==c.annotationLayers&&(this.querySub?.unsubscribe(),this.subscribeToAllLayers(this.getAllLayers()))})),this.subscribeToAllLayers(this.getAllLayers()),()=>{this.querySub?.unsubscribe()}}addAnnotationLayer(r){this.setState({annotationLayers:[...this.state.annotationLayers,r]})}getAllLayers(){const r=[...this.state.annotationLayers];return this.state.alertStatesLayer&&r.push(this.state.alertStatesLayer),r}static{this.Component=({model:r})=>{const{annotationLayers:c}=r.useState();return(0,n.jsx)(n.Fragment,{children:c.map(i=>(0,n.jsx)(i.Component,{model:i},i.state.key))})}}}},88642:(ne,A,e)=>{"use strict";e.d(A,{a:()=>T});var n=e(74848),a=e(22803),s=e(38919),l=e(1906),r=e(51898),c=e(92745),i=e(36490),o=e(45863),h=e(63142),f=e(64400),g=e(96540),u=e(30703);const E=g.forwardRef(({icon:B,children:K,onClick:U,...F},I)=>{const V=(0,h.of)(v);return(0,n.jsxs)("button",{...F,className:V.action,onClick:U,children:[(0,n.jsx)(u.I,{name:B,size:"xl"}),K]})});E.displayName="CardButton";const v=B=>({action:(0,a.css)({display:"flex",flexDirection:"column",height:"100%",justifySelf:"center",cursor:"pointer",background:B.colors.background.secondary,borderRadius:B.shape.radius.default,color:B.colors.text.primary,border:"unset",width:"100%",justifyContent:"center",alignItems:"center",textAlign:"center","&:hover":{background:B.colors.emphasize(B.colors.background.secondary)}})});var p=e(95943),m=e(29043),y=e(42795),d=e(62667),x=e(22429),b=e(11534),D=e(8285),C=e(52763),P=e(87390);function T(B){const K=(0,h.of)(S),U=(0,f.d2)(),F=new s.v2(B.data),{dataSummary:I}=F,V=O(B,I),M=(0,C.wA)(),L=window.__grafanaSceneContext;let N;L instanceof b.H$?N=(0,D.vL)(L,(0,D.XA)(B.panelId)):N=(0,x.UA)().getCurrent()?.getPanelById(B.panelId);const W=()=>{if(m.A.setObject(p.wV,d.__.Suggestions),L){L.state.editPanel?.state.optionsPane?.onToggleVizPicker();return}M((0,y.eK)(!0))},R=()=>{if(N){if(N instanceof o.Eb){N.changePluginType("table");return}M((0,P.gW)({panel:N,pluginId:"table"}))}},G=w=>{N&&(N instanceof o.Eb?N.changePluginType(w.pluginId,w.options,w.fieldConfig):M((0,P.gW)({...w,panel:N})),w.transformations&&setTimeout(()=>{i.Ny.partial({tab:"transform"})},100))};return(0,n.jsxs)("div",{className:K.wrapper,children:[(0,n.jsx)("div",{className:K.message,"data-testid":r.Tp.components.Panels.Panel.PanelDataErrorMessage,children:V}),U.app===l.Jk.PanelEditor&&I.hasData&&N&&(0,n.jsxs)("div",{className:K.actions,children:[B.suggestions&&(0,n.jsx)(n.Fragment,{children:B.suggestions.map(w=>(0,n.jsx)(E,{icon:"process",onClick:()=>G(w),children:w.name},w.name))}),(0,n.jsx)(E,{icon:"table",onClick:R,children:(0,n.jsx)(c.x6,{i18nKey:"panel.panel-data-error-view.switch-to-table",children:"Switch to table"})}),(0,n.jsx)(E,{icon:"chart-line",onClick:W,children:(0,n.jsx)(c.x6,{i18nKey:"panel.panel-data-error-view.open-visualization-suggestions",children:"Open visualization suggestions"})})]})]})}function O({data:B,fieldConfig:K,message:U,needsNumberField:F,needsTimeField:I,needsStringField:V},M){return U||(!B.series||B.series.length===0||B.series.every(L=>L.length===0)?K?.defaults.noValue??(0,c.t)("panel.panel-data-error-view.no-value.default","No data"):V&&!M.hasStringField?(0,c.t)("panel.panel-data-error-view.missing-value.string","Data is missing a string field"):F&&!M.hasNumberField?(0,c.t)("panel.panel-data-error-view.missing-value.number","Data is missing a number field"):I&&!M.hasTimeField?(0,c.t)("panel.panel-data-error-view.missing-value.time","Data is missing a time field"):(0,c.t)("panel.panel-data-error-view.missing-value.unknown","Cannot visualize data"))}const S=B=>({wrapper:(0,a.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,a.css)({textAlign:"center",color:B.colors.text.secondary,fontSize:B.typography.size.lg,width:"100%"}),actions:(0,a.css)({marginTop:B.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:B.spacing(1),rowGap:B.spacing(1),width:"100%",maxWidth:"600px"})})},88673:(ne,A,e)=>{"use strict";e.d(A,{R:()=>a});var n=e(96453);class a extends n.F{constructor(l){super(),this.data=l,this.index=0;const r={},c={};for(let i=0;i<l.fields.length;i++){const o=l.fields[i];if(!o.name)continue;c[o.name]=o;const h=()=>o.values.get(this.index);r.hasOwnProperty(o.name)||Object.defineProperty(r,o.name,{enumerable:!0,get:h}),r.hasOwnProperty(i.toString())||Object.defineProperty(r,i,{enumerable:!1,get:h})}this.obj=r,this.fields=c}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(l){if(!this.dataFrame||!this.dataFrame.fields)return;const r=this.dataFrame.fields[l];if(!(!r||!r.display))return r.display}get(l){return this.index=l,this.obj}toArray(){return new Array(this.data.length).fill(0).map((l,r)=>({...this.get(r)}))}}},88681:(ne,A,e)=>{"use strict";e.d(A,{Hr:()=>E,Pu:()=>C,QP:()=>p,QV:()=>v,Te:()=>P,a7:()=>D,dE:()=>d,hj:()=>m,l_:()=>x,qi:()=>u,ut:()=>y,wB:()=>b});var n=e(65307),a=e(2543),s=e.n(a),l=e(28105),r=e(54742),c=e(17752),i=e(67933),o=e(99305),h=e(93612),f=e(96120);const g=(0,n.Z0)({name:"templating/shared",initialState:f.j,reducers:{addVariable:(T,O)=>{const S=O.payload.id??O.payload.data.model.name,B=r.B.get(O.payload.type),K=(0,a.cloneDeep)(B.initialState),U=B.beforeAdding?B.beforeAdding(O.payload.data.model):(0,a.cloneDeep)(O.payload.data.model),F={...(0,a.defaults)({},U,K),id:S,index:O.payload.data.index,global:O.payload.data.global};T[S]=F},variableStateNotStarted:(T,O)=>{const S=(0,h.Fs)(T,O.payload.id);S.state=l.Gu.NotStarted,S.error=null},variableStateFetching:(T,O)=>{const S=(0,h.Fs)(T,O.payload.id);S.state=l.Gu.Loading,S.error=null},variableStateCompleted:(T,O)=>{const S=(0,h.Fs)(T,O.payload.id);S&&(S.state=l.Gu.Done,S.error=null)},variableStateFailed:(T,O)=>{const S=(0,h.Fs)(T,O.payload.id);S&&(S.state=l.Gu.Error,S.error=O.payload.data.error)},removeVariable:(T,O)=>{if(delete T[O.payload.id],!O.payload.data.reIndex)return;const S=Object.values(T).sort((B,K)=>B.index-K.index);for(let B=0;B<S.length;B++)S[B].index=B},duplicateVariable:(T,O)=>{function S(N){return N.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const B=(0,a.cloneDeep)(T[O.payload.id]),K=new RegExp(`^copy_of_${S(B.name)}(_(\\d+))?$`),U=Object.values(T).map(({name:N})=>N.match(K)).filter(N=>N!=null),F=U.map(N=>N[2]).filter(N=>N!=null),I=U.length===0?null:F.length===0?1:F.map(N=>+N).sort((N,W)=>W-N)[0]+1,V=`copy_of_${B.name}${I?`_${I}`:""}`,M=O.payload.data?.newId??V,L=(0,h.wk)(Object.values(T));T[M]={...(0,a.cloneDeep)(r.B.get(O.payload.type).initialState),...B,id:M,name:V,index:L}},changeVariableOrder:(T,O)=>{const{toIndex:S,fromIndex:B}=O.payload.data,K=Object.values(T);for(let U=0;U<K.length;U++){const F=K[U];F.index===B?F.index=S:F.index>B&&F.index<=S?F.index--:F.index<B&&F.index>=S&&F.index++}},changeVariableType:(T,O)=>{const{id:S}=O.payload,{label:B,name:K,index:U,description:F,rootStateKey:I}=T[S];T[S]={...(0,a.cloneDeep)(r.B.get(O.payload.data.newType).initialState),id:S,rootStateKey:I,label:B,name:K,index:U,description:F}},setCurrentVariableValue:(T,O)=>{if(!O.payload.data.option)return;const S=(0,h.Fs)(T,O.payload.id);if(!(0,i.SP)(S))return;const{option:B}=O.payload.data,K={...B,text:(0,o.QT)(B?.text),value:(0,o.QT)(B?.value)};S.current=K,S.options=S.options.map(U=>{U.value=(0,o.QT)(U.value),U.text=(0,o.QT)(U.text);let F=!1;if(Array.isArray(K.value))for(let I=0;I<K.value.length;I++){const V=K.value[I];if(U.value===V){F=!0;break}}else U.value===K.value&&(F=!0);return U.selected=F,U})},changeVariableProp:(T,O)=>{const S=(0,h.Fs)(T,O.payload.id);S[O.payload.data.propName]=O.payload.data.propValue}},extraReducers:T=>T.addCase(c.FN,(O,S)=>{const B=(0,h.Fs)(O,S.payload.id);B.name=S.payload.data.newName})}),u=g.reducer,{removeVariable:E,addVariable:v,changeVariableProp:p,changeVariableOrder:m,duplicateVariable:y,setCurrentVariableValue:d,changeVariableType:x,variableStateNotStarted:b,variableStateFetching:D,variableStateCompleted:C,variableStateFailed:P}=g.actions},88806:(ne,A,e)=>{"use strict";e.d(A,{V:()=>a,l:()=>s});var n=e(74848);let a=({children:l})=>(0,n.jsx)("div",{children:l});function s(l){a=l}},88813:(ne,A,e)=>{"use strict";e.d(A,{BS:()=>o,Vg:()=>c,eF:()=>h,og:()=>i,x8:()=>r});var n=e(68388),a=e(7389),s=e(28105),l=e(8921),r=(f=>(f.NotStarted="Not started",f.Fetching="Fetching",f.Completed="Completed",f))(r||{});const c={id:l.qF,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:a.zL.dontHide,skipUrlSync:!1,state:s.Gu.NotStarted,error:null,description:null};class i extends n.x{static{this.type="variables-changed"}}class o extends n.x{static{this.type="variables-time-range-process-done"}}class h extends n.x{static{this.type="variables-changed-in-url"}}},88879:(ne,A,e)=>{"use strict";e.d(A,{K:()=>a});var n=e(739);const a={displayMode:n.eX.Gradient,maxVizHeight:300,minVizHeight:16,minVizWidth:8,namePlacement:n.TZ.Auto,showUnfilled:!0,sizing:n.T6.Auto,valueMode:n.$l.Color}},88898:(ne,A,e)=>{"use strict";e.d(A,{X:()=>E});var n=e(74848),a=e(22803),s=e(92745),l=e(30703),r=e(76319),c=e(44458),i=e(50201),o=e(37658),h=e(45861),f=e(89640),g=e(41654),u=e(63142);function E({links:p,onNew:m,onOrderChange:y,onEdit:d,onDuplicate:x,onDelete:b}){const D=(0,u.of)(v);return p.length===0?(0,n.jsx)(g.B,{direction:"column",children:(0,n.jsx)(i.p,{variant:"call-to-action",button:(0,n.jsx)(h.$n,{onClick:m,size:"lg",children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-links.empty-state.button-title",children:"Add dashboard link"})}),message:(0,s.t)("dashboard-links.empty-state.title","There are no dashboard links added yet"),children:(0,n.jsxs)(s.x6,{i18nKey:"dashboard-links.empty-state.info-box-content",children:["Dashboard links allow you to place links to other dashboards and web sites directly below the dashboard header."," ",(0,n.jsx)(f.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/manage-dashboard-links/",children:"Learn more"})]})})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("table",{role:"grid",className:"filter-table filter-table--hover",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.dashboard-link-list.type",children:"Type"})}),(0,n.jsx)("th",{children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.dashboard-link-list.info",children:"Info"})}),(0,n.jsx)("th",{colSpan:3})]})}),(0,n.jsx)("tbody",{children:p.map((P,T)=>(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{role:"gridcell",className:"pointer",onClick:()=>d(T),children:[(0,n.jsx)(l.I,{name:"external-link-alt"})," \xA0 ",P.type]}),(0,n.jsx)("td",{role:"gridcell",className:"pointer",onClick:()=>d(T),children:(0,n.jsxs)(g.B,{children:[P.title&&(0,n.jsx)("span",{className:D.titleWrapper,children:P.title}),P.type==="link"&&(0,n.jsx)("span",{className:D.urlWrapper,children:P.url}),P.type==="dashboards"&&(0,n.jsx)(o.L,{tags:P.tags??[]})]})}),(0,n.jsx)("td",{style:{width:"1%"},role:"gridcell",children:T!==0&&(0,n.jsx)(r.K,{name:"arrow-up",onClick:()=>y(T,-1),tooltip:(0,s.t)("dashboard-scene.dashboard-link-list.tooltip-move-link-up","Move link up")})}),(0,n.jsx)("td",{style:{width:"1%"},role:"gridcell",children:p.length>1&&T!==p.length-1?(0,n.jsx)(r.K,{name:"arrow-down",onClick:()=>y(T,1),tooltip:(0,s.t)("dashboard-scene.dashboard-link-list.tooltip-move-link-down","Move link down")}):null}),(0,n.jsx)("td",{style:{width:"1%"},role:"gridcell",children:(0,n.jsx)(r.K,{name:"copy",onClick:()=>x(P),tooltip:(0,s.t)("dashboard-scene.dashboard-link-list.tooltip-copy-link","Copy link")})}),(0,n.jsx)("td",{style:{width:"1%"},role:"gridcell",children:(0,n.jsx)(c.e,{"aria-label":(0,s.t)("dashboard-scene.dashboard-link-list.delete-aria-label",'Delete link with title "{{title}}"',{title:P.title}),size:"sm",onConfirm:()=>b(T)})})]},`${P.title}-${T}`))})]}),(0,n.jsx)(h.$n,{className:D.newLinkButton,icon:"plus",onClick:m,children:(0,n.jsx)(s.x6,{i18nKey:"dashboard-scene.dashboard-link-list.new-link",children:"New link"})})]})}const v=p=>({titleWrapper:(0,a.css)({width:"20vw",textOverflow:"ellipsis",overflow:"hidden"}),urlWrapper:(0,a.css)({width:"40vw",textOverflow:"ellipsis",overflow:"hidden"}),newLinkButton:(0,a.css)({marginTop:p.spacing(3)})})},88907:(ne,A,e)=>{"use strict";e.d(A,{V:()=>n});var n=(a=>(a.Field="field",a.Text="text",a.Skip="skip",a))(n||{})},88977:(ne,A,e)=>{"use strict";e.d(A,{J:()=>o});var n=e(74848),a=e(22803),s=e(96540),l=e(23257),r=e.n(l),c=e(63142),i=e(20662);const o=(0,s.forwardRef)(({name:f,value:g,hidden:u,facets:E,onClick:v,className:p,loading:m,searchTerm:y,active:d,style:x,title:b,highlightParts:D,...C},P)=>{const T=(0,c.$j)(),O=h(T),S=y?[y]:[],B=(0,s.useCallback)(U=>{v&&!u&&v(f,g,U)},[v,f,u,g]);let K=g||f;return E&&(K=`${K} (${E})`),(0,n.jsx)("button",{ref:P,onClick:B,style:x,title:b||K,type:"button",role:"option","aria-selected":!!d,className:(0,a.cx)(O.base,d&&O.active,m&&O.loading,u&&O.hidden,p,v&&!u&&O.hover),...C,children:D!==void 0?(0,n.jsx)(i.z,{text:K,highlightClassName:O.matchHighLight,highlightParts:D}):(0,n.jsx)(r(),{textToHighlight:K,searchWords:S,autoEscape:!0,highlightClassName:O.matchHighLight})},K)});o.displayName="Label";const h=f=>({base:(0,a.css)({display:"inline-block",cursor:"pointer",fontSize:f.typography.size.sm,lineHeight:f.typography.bodySmall.lineHeight,backgroundColor:f.colors.background.secondary,color:f.colors.text.primary,whiteSpace:"nowrap",textShadow:"none",padding:f.spacing(.5),borderRadius:f.shape.radius.default,border:"none",marginRight:f.spacing(1),marginBottom:f.spacing(.5)}),loading:(0,a.css)({fontWeight:f.typography.fontWeightMedium,backgroundColor:f.colors.primary.shade,color:f.colors.text.primary,[f.transitions.handleMotion("no-preference","reduce")]:{animation:"pulse 3s ease-out 0s infinite normal forwards"},"@keyframes pulse":{"0%":{color:f.colors.text.primary},"50%":{color:f.colors.text.secondary},"100%":{color:f.colors.text.disabled}}}),active:(0,a.css)({fontWeight:f.typography.fontWeightMedium,backgroundColor:f.colors.primary.main,color:f.colors.primary.contrastText}),matchHighLight:(0,a.css)({background:"inherit",color:f.components.textHighlight.text,backgroundColor:f.components.textHighlight.background}),hidden:(0,a.css)({opacity:.6,cursor:"default",border:"1px solid transparent"}),hover:(0,a.css)({"&:hover":{opacity:.85,cursor:"pointer"}})})},89123:(ne,A,e)=>{"use strict";e.d(A,{M:()=>u});var n=e(74848),a=e(22803),s=e(96540),l=e(51898),r=e(63142),c=e(87),i=e(2543),o=e(55386),h=e(34950);const f=({stats:v})=>{const p=(0,r.of)(g);return v.length===0?null:(0,n.jsx)(h.c,{className:p.list,items:v,renderItem:m=>(0,n.jsxs)("div",{className:p.item,title:m.description,children:[m.title&&`${(0,i.capitalize)(m.title)}:`," ",(0,o.cN)(m)]})})},g=()=>({list:(0,a.css)({flexGrow:1,textAlign:"right"}),item:(0,a.css)({marginLeft:"8px"})});f.displayName="VizLegendStatsList";const u=({item:v,onLabelClick:p,onLabelMouseOver:m,onLabelMouseOut:y,className:d,readonly:x})=>{const b=(0,r.of)(E),D=(0,s.useCallback)(T=>{m&&m(v,T)},[v,m]),C=(0,s.useCallback)(T=>{y&&y(v,T)},[v,y]),P=(0,s.useCallback)(T=>{p&&p(v,T)},[v,p]);return(0,n.jsxs)("div",{className:(0,a.cx)(b.itemWrapper,v.disabled&&b.itemDisabled,d),"data-testid":l.Tp.components.VizLegend.seriesName(v.label),children:[(0,n.jsx)(c.R,{seriesName:v.fieldName??v.label,color:v.color,gradient:v.gradient,readonly:x,lineStyle:v.lineStyle}),(0,n.jsx)("button",{disabled:x,type:"button",onBlur:C,onFocus:D,onMouseOver:D,onMouseOut:C,onClick:P,className:b.label,children:v.label}),v.getDisplayValues&&(0,n.jsx)(f,{stats:v.getDisplayValues()})]})};u.displayName="VizLegendListItem";const E=v=>({label:(0,a.css)({label:"LegendLabel",whiteSpace:"nowrap",background:"none",border:"none",fontSize:"inherit",padding:0,userSelect:"text"}),itemDisabled:(0,a.css)({label:"LegendLabelDisabled",color:v.colors.text.disabled}),itemWrapper:(0,a.css)({label:"LegendItemWrapper",display:"flex",whiteSpace:"nowrap",alignItems:"center",flexGrow:1}),value:(0,a.css)({textAlign:"right"}),yAxisLabel:(0,a.css)({color:v.v1.palette.gray2})})},89144:(ne,A,e)=>{"use strict";e.d(A,{j:()=>g});var n=e(74848),a=e(22803),s=e(70713),l=e(17503),r=e(92745),c=e(63142),i=e(45229),o=e(5929),h=e(51993),f=e(55376);const g=({data:E,thresholds:v,thresholdsType:p})=>{const m=(0,c.of)(u),y=(0,l.jq)(E.series),d=(0,f.yW)(E),x=p?{mode:p}:void 0;return(0,n.jsx)("div",{className:m.wrapper,children:(0,n.jsx)(s.Ay,{disableHeight:!0,children:({width:b})=>(0,n.jsx)("div",{style:{width:b},children:y?(0,n.jsx)(o.y,{statusMessage:d,data:E.series,eventBus:i.A,height:300,width:b,timeRange:E.timeRange,timeZone:"browser",onChangeTime:()=>{},splitOpenFn:()=>{},loadingState:E.state,thresholdsConfig:v,thresholdsStyle:x}):(0,n.jsxs)("div",{className:m.instantVectorResultWrapper,children:[(0,n.jsx)("header",{className:m.title,children:(0,n.jsx)(r.x6,{i18nKey:"alerting.viz-wrapper.table",children:"Table"})}),(0,n.jsx)(h.GX,{series:E.series})]})})})})},u=E=>({wrapper:(0,a.css)({width:"100%",position:"relative"}),instantVectorResultWrapper:(0,a.css)({border:`solid 1px ${E.colors.border.medium}`,borderRadius:E.shape.radius.default,padding:0,display:"flex",flexDirection:"column",flexWrap:"nowrap"}),title:(0,a.css)({label:"panel-title",padding:E.spacing(),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:E.typography.h6.fontSize,fontWeight:E.typography.h6.fontWeight})})},89223:(ne,A,e)=>{"use strict";e.d(A,{P:()=>r});var n=e(92745),a=e(55860);class s extends Error{constructor(i,o){super(o),this.type=i}}class l{constructor(){this.rootName="general"}validateNewDashboardName(i,o){return this.validate(i,o,(0,n.t)("manage-dashboards.validation-srv.message-same-name","A dashboard or a folder with the same name already exists"))}validateNewFolderName(i,o){const h=o?(0,n.t)("manage-dashboards.validation-srv.message-same-name-current-folder","A dashboard or a folder with the same name already exists in the current folder"):(0,n.t)("manage-dashboards.validation-srv.message-same-name-general","A folder or dashboard with the same name already exists in the root folder");return this.validate(o||this.rootName,i,h)}async validate(i,o,h){o=(o||"").trim();const f=o.toLowerCase();if(o.length===0)throw new s("REQUIRED",(0,n.t)("manage-dashboards.validation-srv.message-name-required","Name is required"));if(f===this.rootName)throw new s("EXISTING",(0,n.t)("manage-dashboards.validation-srv.message-reserved-name","This is a reserved name and cannot be used for a folder."));const u=await(0,a.S)().search({kind:["dashboard","folder"],query:o,location:i||"general"});for(const E of u.view)if(f===E.name.toLowerCase())throw new s("EXISTING",h)}}const r=new l},89224:(ne,A,e)=>{"use strict";e.d(A,{Ay:()=>f,FC:()=>i,XM:()=>l,io:()=>c,nF:()=>r,rG:()=>o});var n=e(65307);const a={},s=(0,n.Z0)({name:"panels",initialState:a,reducers:{panelModelAndPluginReady:(g,u)=>{g[u.payload.key]={plugin:u.payload.plugin}},changePanelKey:(g,u)=>{g[u.payload.newKey]=g[u.payload.oldKey],delete g[u.payload.oldKey]},removePanel:(g,u)=>{delete g[u.payload.key]},removeAllPanels:g=>{Object.keys(g).forEach(u=>delete g[u])},setPanelInstanceState:(g,u)=>{g[u.payload.key].instanceState=u.payload.value}}}),{panelModelAndPluginReady:l,setPanelInstanceState:r,changePanelKey:c,removePanel:i,removeAllPanels:o}=s.actions,f={panels:s.reducer}},89381:(ne,A,e)=>{"use strict";e.d(A,{h:()=>s});var n=e(96540),a=e(78529);const s=(l,r)=>(0,n.useMemo)(()=>(0,a.YV)(l,r),[l,r])},89409:(ne,A,e)=>{"use strict";e.d(A,{t3:()=>P,iL:()=>T,fn:()=>O});var n=e(74848),a=e(22803),s=e(92745),l=e(63142),r=e(41654),c=e(7895),i=e(76319),o=e(27963),h=e(92948),f=e(96540),g=e(36490),u=e(35137),E=e(66404),v=e(15130),p=e(93922),m=e(52763),y=e(18857),d=e(30703);function x({orgs:B,onSelectChange:K}){const U=(0,l.of)(b),{orgId:F}=v.TP.user,I=(0,f.useMemo)(()=>B.map(W=>({label:W.name,description:W.role,value:W})),[B]),V=(0,f.useMemo)(()=>I.find(W=>W.value.orgId===F),[I,F]),[M,L]=(0,f.useState)(()=>V),N=W=>{L(W),K(W)};return(0,n.jsx)(y.l6,{"aria-label":(0,s.t)("navigation.org-switcher.aria-label","Change organization"),width:"auto",value:M,prefix:(0,n.jsx)(d.I,{className:"prefix-icon",name:"building"}),className:U.select,options:I,onChange:N})}const b=B=>({select:(0,a.css)({border:"none",background:"none",color:B.colors.text.secondary,"&:hover":{color:B.colors.text.primary,"& .prefix-icon":(0,a.css)({color:B.colors.text.primary})}})});function D(){const B=(0,m.wA)(),K=(0,m.d4)(F=>F.organization.userOrgs),U=F=>{F.value&&((0,p.bA)(F.value.orgId),g.Ny.push(`/?orgId=${F.value.orgId}`),window.location.reload())};return(0,f.useEffect)(()=>{v.TP.isSignedIn&&!(v.TP.user.authenticatedBy==="apikey"||v.TP.user.authenticatedBy==="render")&&B((0,p.wV)())},[B]),K?.length<=1?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.$,{h:1}),(0,n.jsx)(E.E,{truncate:!0,children:h.M.AppTitle})]}):(0,n.jsx)(x,{orgs:K,onSelectChange:U})}var C=e(31937);const P="dock-menu-button",T="mega-menu-header-toggle";function O({handleMegaMenu:B,handleDockedMenu:K,onClose:U}){const F=(0,l.$j)(),{chrome:I}=(0,o.Il)(),V=I.useState(),M=S(F);return(0,n.jsxs)("div",{className:M.header,children:[(0,n.jsxs)(r.B,{alignItems:"center",minWidth:0,gap:.25,children:[(0,n.jsx)(c.I,{narrow:!0,id:T,onClick:B,tooltip:(0,s.t)("navigation.megamenu.close","Close menu"),children:(0,n.jsx)(h.M.MenuLogo,{className:M.img})}),(0,n.jsx)(D,{})]}),(0,n.jsx)(i.K,{id:P,className:M.dockMenuButton,tooltip:V.megaMenuDocked?(0,s.t)("navigation.megamenu.undock","Undock menu"):(0,s.t)("navigation.megamenu.dock","Dock menu"),name:"web-section-alt",onClick:K,variant:"secondary"}),(0,n.jsx)(i.K,{className:M.mobileCloseButton,tooltip:(0,s.t)("navigation.megamenu.close","Close menu"),name:"times",onClick:U,size:"xl",variant:"secondary"})]})}O.displayName="MegaMenuHeader";const S=B=>({dockMenuButton:(0,a.css)({display:"none",[B.breakpoints.up("xl")]:{display:"inline-flex"}}),header:(0,a.css)({alignItems:"center",borderBottom:`1px solid ${B.colors.border.weak}`,display:"flex",gap:B.spacing(1),justifyContent:"space-between",padding:B.spacing(0,1,0,.75),height:(0,C.vn)(),flexShrink:0}),img:(0,a.css)({alignSelf:"center",height:B.spacing(3),width:B.spacing(3)}),mobileCloseButton:(0,a.css)({[B.breakpoints.up("md")]:{display:"none"}})})},89460:(ne,A,e)=>{"use strict";e.d(A,{A:()=>r,c:()=>l});var n=e(22803),a=e(65240),s=e(65642);const l=(0,a.N)(()=>r(s.$W.theme2)),r=c=>({heading:(0,n.css)({fontSize:c.typography.body.fontSize,marginBottom:c.spacing(1)}),wrap:(0,n.css)({display:"flex",flexDirection:"column",height:"100%",width:"100%",flex:"1 1 0",minHeight:0}),toolbar:(0,n.css)({display:"flex",width:"100%",flexGrow:0,alignItems:"center",justifyContent:"flex-end",marginBottom:c.v1.spacing.sm}),toolbarItem:(0,n.css)({marginLeft:c.v1.spacing.md}),content:(0,n.css)({flexGrow:1,height:"100%"}),editor:(0,n.css)({fontFamily:"monospace",height:"100%",flexGrow:1}),viewer:(0,n.css)({overflow:"scroll"}),dataFrameSelect:(0,n.css)({flexGrow:2}),leftActions:(0,n.css)({display:"flex",flexGrow:1,maxWidth:"85%","@media (max-width: 1345px)":{maxWidth:"75%"}}),options:(0,n.css)({paddingTop:c.v1.spacing.sm}),dataDisplayOptions:(0,n.css)({flexGrow:1,minWidth:"300px",marginRight:c.v1.spacing.sm}),selects:(0,n.css)({display:"flex","> *":{marginRight:c.v1.spacing.sm}})})},89467:(ne,A,e)=>{"use strict";e.d(A,{a:()=>r});var n=e(74848),a=e(96540),s=e(63142),l=e(18857);function r({value:c,placeholder:i="",options:o=[],onChange:h,onClickOutside:f,loadOptions:g=void 0,width:u,noOptionsMessage:E="",allowCustomValue:v=!1,allowEmptyValue:p=!1,...m}){const y=(0,a.useRef)(null),d=(0,s.$j)();let x=u>0?u/d.spacing.gridSize:void 0,b,D={};return g?(b=l.DW,D={loadOptions:g,defaultOptions:!0}):b=l.l6,(0,n.jsx)("div",{...m,ref:y,children:(0,n.jsx)(b,{width:x,noOptionsMessage:E,placeholder:i,autoFocus:!0,isOpen:!0,onChange:h,options:o,value:c,closeMenuOnSelect:!1,onCloseMenu:()=>{if(y&&y.current){const C=y.current.querySelector('input[id^="react-select-"]');C&&(C.value||p)?h({value:C.value,label:C.value}):f()}},allowCustomValue:v,...D})})}},89599:(ne,A,e)=>{"use strict";e.d(A,{S:()=>h,a:()=>o});var n=e(74848),a=e(22803),s=e(96540),l=e(63142),r=e(45861),c=e(30703);const i=f=>({collapse:(0,a.css)({label:"collapse",marginBottom:f.spacing(1),backgroundColor:f.colors.background.primary,border:`1px solid ${f.colors.border.weak}`,position:"relative",borderRadius:f.shape.radius.default,width:"100%",display:"flex",flexDirection:"column",flex:"1 1 0"}),collapseBody:(0,a.css)({label:"collapse__body",padding:f.spacing(f.components.panel.padding),paddingTop:0,flex:1,overflow:"hidden",display:"flex",flexDirection:"column"}),bodyContentWrapper:(0,a.css)({label:"bodyContentWrapper",flex:1}),loader:(0,a.css)({label:"collapse__loader",height:"2px",position:"relative",overflow:"hidden",background:"none",margin:f.spacing(.5)}),loaderActive:(0,a.css)({label:"collapse__loader_active","&:after":{content:"' '",display:"block",width:"25%",top:0,height:"250%",position:"absolute",animation:"loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms",animationIterationCount:100,left:"-25%",background:f.colors.primary.main},"@keyframes loader":{from:{left:"-25%",opacity:.1},to:{left:"100%",opacity:1}}}),header:(0,a.css)({label:"collapse__header",padding:f.spacing(1,2,1,2),display:"flex"}),headerCollapsed:(0,a.css)({label:"collapse__header--collapsed",padding:f.spacing(1,2,1,2)}),headerLabel:(0,a.css)({label:"collapse__header-label",fontWeight:f.typography.fontWeightMedium,marginRight:f.spacing(1),fontSize:f.typography.size.md,display:"flex",flex:"0 0 100%"}),icon:(0,a.css)({label:"collapse__icon",margin:f.spacing(.25,1,0,-1)})}),o=({isOpen:f,onToggle:g,...u})=>{const[E,v]=(0,s.useState)(f);return(0,n.jsx)(h,{isOpen:E,collapsible:!0,...u,onToggle:()=>{v(!E),g&&g(!E)}})},h=({isOpen:f,label:g,loading:u,collapsible:E,onToggle:v,className:p,children:m})=>{const y=(0,l.of)(r.my),d=(0,l.of)(i),x=()=>{v&&v(!f)},b=(0,a.cx)([d.collapse,p]),D=u?(0,a.cx)([d.loader,d.loaderActive]):(0,a.cx)([d.loader]),C=E?(0,a.cx)([d.header]):(0,a.cx)([d.headerCollapsed]);return(0,n.jsxs)("div",{className:b,children:[(0,n.jsxs)("button",{type:"button",className:(0,a.cx)(y,C),onClick:x,children:[E&&(0,n.jsx)(c.I,{className:d.icon,name:f?"angle-down":"angle-right"}),(0,n.jsx)("div",{className:(0,a.cx)([d.headerLabel]),children:g})]}),f&&(0,n.jsxs)("div",{className:(0,a.cx)([d.collapseBody]),children:[(0,n.jsx)("div",{className:D}),(0,n.jsx)("div",{className:d.bodyContentWrapper,children:m})]})]})};h.displayName="Collapse"},89640:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(63704),r=e(92138),c=e(63142),i=e(30703),o=e(66969),h=e(20941);const f={h1:"xl",h2:"xl",h3:"lg",h4:"lg",h5:"md",h6:"md",body:"md",bodySmall:"xs"},g=(0,s.forwardRef)(({href:E,color:v="link",external:p=!1,inline:m=!0,variant:y="body",weight:d,icon:x,children:b,...D},C)=>{const P=l.sQ.sanitizeUrl(E??""),T=(0,c.$j)(),O=u(T,m,y,d,v),S=x||"external-link-alt";if(p)return(0,n.jsxs)("a",{href:P,ref:C,...D,target:"_blank",rel:"noreferrer",className:O,children:[b,(0,n.jsx)(i.I,{size:f[y]||"md",name:S})]});const B=r.I.stripBaseFromUrl(P);return(0,n.jsxs)(h.N,{ref:C,href:B,...D,className:O,children:[b,x&&(0,n.jsx)(i.I,{name:x,size:f[y]||"md"})]})});g.displayName="TextLink";const u=(E,v,p,m,y)=>(0,a.css)([p&&{...E.typography[p]},m&&{fontWeight:(0,o.iV)(m,E)},y&&{color:E.colors.text[y]},{alignItems:"center",gap:"0.25em",display:"inline-flex",textDecoration:"none","&:hover":{textDecoration:"underline",color:E.colors.text.link}},v&&{textDecoration:"underline","&:hover":{textDecoration:"none"}}])},89752:(ne,A,e)=>{"use strict";e.d(A,{S:()=>u});var n=e(74848),a=e(92745),s=e(43173),l=e(45863),r=e(65241),c=e(58662),i=e(7817),o=e(82612),h=e(93389),f=e(70030),g=e(8285);class u extends l.Bs{constructor(){super(...arguments),this.tabId=c.wr.libraryPanel}static{this.Component=E}getTabLabel(){return s.$.featureToggles.newDashboardSharingComponent?(0,a.t)("share-panel.drawer.new-library-panel-title","New library panel"):(0,a.t)("share-modal.tab-title.library-panel","Library panel")}}function E({model:v}){const{panelRef:p,modalRef:m}=v.useState();if(!p)return null;const y=p.resolve(),d=y.parent;if(d instanceof h.U){const x=(0,g.YQ)(v),b=(0,f.ZB)(d),D=new o.a9(b),C=(0,f.Uy)(x),P=new i.G(C);return(0,n.jsx)(r.j,{initialFolderUid:x.state.meta.folderUid,dashboard:P,panel:D,onDismiss:()=>{m?m.resolve().onDismiss():x.closeModal()},onCreateLibraryPanel:T=>x.createLibraryPanel(y,T)})}return null}},89772:(ne,A,e)=>{"use strict";e.d(A,{$:()=>b});var n=e(74848),a=e(22803),s=e(43107),l=e(96540),r=e(6773),c=e(92745),i=e(63142),o=e(65240),h=e(60208),f=e(54314),g=e(13409),u=e(2543);const v=({hue:C,selectedColor:P,onColorSelect:T,...O})=>{const S=(0,u.upperFirst)(C.name),B=(0,i.of)(p),K=(0,l.useMemo)(()=>[...C.shades].reverse(),[C.shades]);return(0,n.jsxs)("div",{className:B.colorRow,children:[(0,n.jsx)("div",{className:B.colorLabel,children:S}),(0,n.jsx)("div",{...O,className:B.swatchRow,children:K.map(U=>(0,n.jsx)(g.q,{"aria-label":U.name,variant:U.primary?g.h.Large:g.h.Small,isSelected:U.name===P,color:U.color,onClick:()=>T(U.name)},U.name))})]})},p=C=>({colorRow:(0,a.css)({display:"grid",gridTemplateColumns:"25% 1fr",gridColumnGap:C.spacing(2),padding:C.spacing(.5,0),"&:hover":{background:C.colors.background.secondary}}),colorLabel:(0,a.css)({paddingLeft:C.spacing(1),display:"flex",alignItems:"center"}),swatchRow:(0,a.css)({display:"flex",gap:C.spacing(1),alignItems:"center",justifyContent:"space-around",flexDirection:"row"})}),m=({color:C,onChange:P})=>{const T=(0,i.$j)(),O=(0,i.of)(y),S=[];for(const B of T.visualization.hues)S.push((0,n.jsx)(v,{selectedColor:C,hue:B,onColorSelect:P},B.name));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:O.swatches,children:S}),(0,n.jsxs)("div",{className:O.extraColors,children:[(0,n.jsx)(g.q,{isSelected:C==="transparent",color:"rgba(0,0,0,0)",label:(0,c.t)("grafana-ui.named-colors-palette.transparent-swatch","Transparent"),onClick:()=>P("transparent")}),(0,n.jsx)(g.q,{isSelected:C==="text",color:T.colors.text.primary,label:(0,c.t)("grafana-ui.named-colors-palette.text-color-swatch","Text color"),onClick:()=>P("text")})]})]})},y=C=>({container:(0,a.css)({display:"flex",flexDirection:"column"}),extraColors:(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-around",gap:C.spacing(1),padding:C.spacing(1,0)}),swatches:(0,a.css)({display:"grid",flexGrow:1})});var d=e(32550);class x extends l.Component{constructor(P){super(P),this.handleChange=T=>{const{onChange:O,enableNamedColors:S,theme:B}=this.props;if(S)return O(T);O(r.MV.asHexString(B.visualization.getColorByName(T)))},this.onTabChange=T=>()=>this.setState({activePicker:T}),this.renderPicker=()=>{const{activePicker:T}=this.state,{color:O}=this.props;switch(T){case"spectrum":return(0,n.jsx)(d.A,{color:O,onChange:this.handleChange});case"palette":return(0,n.jsx)(m,{color:O,onChange:this.handleChange});default:return this.renderCustomPicker(T)}},this.renderCustomPicker=T=>{const{customPickers:O,color:S,theme:B}=this.props;return O?l.createElement(O[T].tabComponent,{color:S,theme:B,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:T}=this.props;return T?(0,n.jsx)(n.Fragment,{children:Object.keys(T).map(O=>(0,n.jsx)(h.o,{label:T[O].name,onChangeTab:this.onTabChange(O)},O))}):null},this.state={activePicker:"palette"}}render(){const{theme:P}=this.props,{activePicker:T}=this.state,O=D(P);return(0,n.jsx)(s.n1,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,n.jsxs)("div",{tabIndex:-1,className:O.colorPickerPopover,children:[(0,n.jsxs)(f.U,{children:[(0,n.jsx)(h.o,{label:(0,c.t)("grafana-ui.color-picker-popover.palette-tab","Colors"),onChangeTab:this.onTabChange("palette"),active:T==="palette"}),(0,n.jsx)(h.o,{label:(0,c.t)("grafana-ui.color-picker-popover.spectrum-tab","Custom"),onChangeTab:this.onTabChange("spectrum"),active:T==="spectrum"}),this.renderCustomPickerTabs()]}),(0,n.jsx)("div",{className:O.colorPickerPopoverContent,children:this.renderPicker()})]})})}}const b=(0,i.cV)(x);b.displayName="ColorPickerPopover";const D=(0,o.N)(C=>({colorPickerPopover:(0,a.css)({borderRadius:C.shape.radius.default,boxShadow:C.shadows.z3,background:C.colors.background.elevated,padding:C.spacing(.5),border:`1px solid ${C.colors.border.weak}`}),colorPickerPopoverContent:(0,a.css)({width:"246px",fontSize:C.typography.bodySmall.fontSize,minHeight:"184px",height:"290px",padding:C.spacing(1),display:"flex",flexDirection:"column"}),colorPickerPopoverTabs:(0,a.css)({display:"flex",width:"100%",borderRadius:`${C.shape.radius.default} ${C.shape.radius.default} 0 0`})}))},89931:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>g});var n=e(74848),a=e(1906),s=e(92745),l=e(34999),r=e(89640),c=e(18027),i=e(97095),o=e(18857),h=e(63527),f=e(4651);const g=({labelWidth:u="auto",onChange:E,app:v,refIds:p,query:m})=>{const y=f.Cu.find(S=>S.value===m.reducer),d=S=>{E({...m,expression:S.value})},x=S=>{E({...m,reducer:S.value})},b=S=>{E({...m,settings:S})},D=S=>{let B;switch(S.value){case f.Mt.Strict:B={mode:f.Mt.Strict};break;case f.Mt.ReplaceNonNumbers:let K=0;m.settings?.mode===f.Mt.ReplaceNonNumbers&&(K=m.settings?.replaceWithValue??0),B={mode:f.Mt.ReplaceNonNumbers,replaceWithValue:K};break;default:B={mode:S.value}}b(B)},C=S=>{const B=S.currentTarget.valueAsNumber;b({mode:f.Mt.ReplaceNonNumbers,replaceWithValue:B??0})},P=m.settings?.mode??f.Mt.Strict,T=()=>{if(P===f.Mt.ReplaceNonNumbers)return(0,n.jsx)(c.I,{label:(0,s.t)("expressions.reduce.replace-with-number.label-replace-with","Replace with"),labelWidth:u,children:(0,n.jsx)(h.p,{type:"number",width:10,onChange:C,value:m.settings?.replaceWithValue??0})})},O=()=>{const S=v===a.Jk.UnifiedAlerting;return P!==f.Mt.Strict||S?null:(0,n.jsx)(l.F,{title:(0,s.t)("reduce.strictMode.title","Strict Mode Behaviour"),severity:"info",children:(0,n.jsxs)(s.x6,{i18nKey:"reduce.strictMode.description",children:["When ",(0,n.jsx)("code",{children:"Reduce Strict mode"})," is used, the ",(0,n.jsx)("code",{children:"fill(null)"})," function (InfluxQL) will result in"," ",(0,n.jsx)("code",{children:"NaN"}),"."," ",(0,n.jsx)(r.Y,{href:"https://grafana.com/docs/grafana/latest/panels-visualizations/query-transform-data/expression-queries/#reduction-modes",children:"See the documentation for more details."})]})})};return(0,n.jsxs)(n.Fragment,{children:[O(),(0,n.jsx)(i.C,{children:(0,n.jsx)(c.I,{label:(0,s.t)("expressions.reduce.label-input","Input"),labelWidth:u,children:(0,n.jsx)(o.l6,{onChange:d,options:p,value:m.expression,width:"auto"})})}),(0,n.jsxs)(i.C,{children:[(0,n.jsx)(c.I,{label:(0,s.t)("expressions.reduce.label-function","Function"),labelWidth:u,children:(0,n.jsx)(o.l6,{options:f.Cu,value:y,onChange:x,width:20})}),(0,n.jsx)(c.I,{label:(0,s.t)("expressions.reduce.label-mode","Mode"),labelWidth:u,children:(0,n.jsx)(o.l6,{onChange:D,options:f.HZ,value:P,width:25})}),T()]})]})}},90157:(ne,A,e)=>{"use strict";e.d(A,{Jv:()=>l});const n={filters:[],groupBy:[]};var a=(c=>(c.Instant="instant",c.Range="range",c))(a||{}),s=(c=>(c.Done="done",c.Error="error",c.Pending="pending",c.Streaming="streaming",c))(s||{}),l=(c=>(c.Raw="raw",c.Spans="spans",c.Traces="traces",c))(l||{}),r=(c=>(c.Event="event",c.Instrumentation="instrumentation",c.Intrinsic="intrinsic",c.Link="link",c.Resource="resource",c.Span="span",c.Unscoped="unscoped",c))(r||{})},90176:(ne,A,e)=>{"use strict";e.d(A,{YD:()=>l,dy:()=>a,kD:()=>s});var n=e(739),a=(c=>(c.Prepare="prepare",c.Calculate="calculate",c.Modify="modify",c))(a||{}),s=(c=>(c.Heading="heading",c.Distance="distance",c.Area="area",c))(s||{}),l=(c=>(c.AsLine="asLine",c.LineBuilder="lineBuilder",c))(l||{});const r={action:"prepare",source:{mode:n.aG.Auto}}},90186:(ne,A,e)=>{"use strict";e.d(A,{Ys:()=>J,DI:()=>Z});var n=e(74848),a=e(22803),s=e(80011),l=e(25229),r=e(92745),c=e(63142),i=e(45967),o=e(55555),h=e(11504),f=e(75640),g=e(29609),u=e(15629),E=e(7840),v=e(40165),p=e(83750);function m(ie){const ce=(0,c.of)(y),{annotations:re}=ie,ue=(0,f.gO)(re);return re.length===0?null:(0,n.jsx)("div",{className:ce.annotations,children:re.map(([X,le])=>(0,n.jsx)(p.s,{annotationKey:X,value:le,valueLink:ue.get(X)},X))})}const y=()=>({annotations:(0,a.css)({marginTop:"46px"})});var d=e(96540),x=e(63704),b=e(41071),D=e(45861),C=e(41654),P=e(16692),T=e(58138),O=e(95443),S=e(52161),B=e(77256);const U=({rule:ie,rulesSource:ce})=>{const{group:re}=ie,{StateHistoryModal:ue,showStateHistoryModal:X}=(0,T.G)(),le=(0,b.i)(),[he,fe]=(0,P.mh)(ie,P.j5.Explore),Ce=[],Ae=(0,g.YN)(re);if((0,S.Eb)(ce)&&he&&fe&&!Ae&&Ce.push((0,n.jsx)(D.z9,{size:"sm",variant:"primary",icon:"chart-line",target:"_blank",href:(0,B.Yp)(ce,ie.query),children:(0,n.jsx)(r.x6,{i18nKey:"alerting.rule-details-buttons.see-graph",children:"See graph"})},"explore")),ie.annotations[O.YH.runbookURL]&&Ce.push((0,n.jsx)(D.z9,{size:"sm",variant:"primary",icon:"book",target:"_blank",href:x.sQ.sanitizeUrl(ie.annotations[O.YH.runbookURL]),children:(0,n.jsx)(r.x6,{i18nKey:"alerting.rule-details-buttons.view-runbook",children:"View runbook"})},"runbook")),ie.annotations[O.YH.dashboardUID]){const _e=ie.annotations[O.YH.dashboardUID];if(_e){Ce.push((0,n.jsx)(D.z9,{size:"sm",variant:"primary",icon:"apps",href:`d/${encodeURIComponent(_e)}`,onClick:()=>{le(ie.name)},children:(0,n.jsx)(r.x6,{i18nKey:"alerting.rule-details-buttons.go-to-dashboard",children:"Go to dashboard"})},"dashboard"));const Xe=ie.annotations[O.YH.panelID];Xe&&Ce.push((0,n.jsx)(D.z9,{size:"sm",variant:"primary",icon:"apps",href:`d/${encodeURIComponent(_e)}?viewPanel=${encodeURIComponent(Xe)}`,onClick:()=>{le(ie.name)},children:(0,n.jsx)(r.x6,{i18nKey:"alerting.rule-details-buttons.go-to-panel",children:"Go to panel"})},"panel"))}}return g.p.grafana.alertingRule(ie.rulerRule)&&Ce.push((0,n.jsxs)(d.Fragment,{children:[(0,n.jsx)(D.$n,{size:"sm",icon:"history",onClick:()=>g.p.grafana.rule(ie.rulerRule)&&X(ie.rulerRule),children:(0,n.jsx)(r.x6,{i18nKey:"alerting.rule-details-buttons.show-state-history",children:"Show state history"})}),ue]},"history")),Ce.length?(0,n.jsx)(C.B,{children:Ce}):null};var F=e(78282),I=e(4651);function V(ie){const{rulesSource:ce,rule:re}=ie,ue=(0,c.of)(M),X=(0,d.useMemo)(()=>{if((0,S.Eb)(ce))return[{name:ce.name,icon:ce.meta.info.logos.small}];if(g.p.grafana.rule(re.rulerRule)){const{data:le}=re.rulerRule.grafana_alert,he=le.reduce((fe,Ce)=>{const Ae=(0,F.l)().getInstanceSettings(Ce.datasourceUid);return!Ae||Ae.uid===I.Uj||(fe[Ae.name]={name:Ae.name,icon:Ae.meta.info.logos.small}),fe},{});return Object.values(he)}return[]},[re,ce]);return X.length===0?null:(0,n.jsx)(v.X,{label:(0,r.t)("alerting.rule-details-data-sources.label-data-source","Data source"),children:X.map(({name:le,icon:he},fe)=>(0,n.jsxs)("div",{children:[he&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{alt:`${le} datasource logo`,className:ue.dataSourceIcon,src:he})," "]}),le]},le))})}function M(ie){const ce=ie.spacing(2);return{dataSourceIcon:(0,a.css)({width:ce,height:ce})}}var L=e(28848),N=e(29317),W=e(35748),R=e(56103),G=e(35458),w=e(77236),_=e(16591);const Q=({language:ie,expr:ce})=>{const re=(0,d.useMemo)(()=>[(0,R.D)({onlyIn:X=>"type"in X&&X.type==="code_block",getSyntax:()=>ie},{...L.languages,[ie]:ie==="logql"?w.Ay:W.n6})],[ie]),ue=(0,d.useMemo)(()=>(0,G.mO)(ce),[ce]);return(0,n.jsx)(N.Editor,{"data-testid":"expression-editor",plugins:re,value:ue})},ae=({expression:ie,rulesSource:ce})=>{const re=(0,c.of)(q);return(0,n.jsx)(_.L,{className:(0,a.cx)(re.well,"slate-query-field"),children:(0,S.Eb)(ce)?(0,n.jsx)(Q,{expr:ie,language:ce.type===S.ol.Loki?"logql":"promql"}):ie})},q=ie=>({well:(0,a.css)({fontFamily:ie.typography.fontFamilyMonospace})});function k(ie){const{annotations:ce,rulesSource:re,rule:ue}=ie,X=ee();return(0,S.Eb)(re)?(0,n.jsx)(v.X,{label:(0,r.t)("alerting.rule-details-expression.label-expression","Expression"),horizontal:!0,className:(0,a.cx)({[X.exprRow]:!!ce.length}),children:(0,n.jsx)(ae,{expression:ue.query,rulesSource:re})}):null}const ee=()=>({exprRow:(0,a.css)({marginBottom:"46px"})});var j=e(66773);const J=15,Z=({rule:ie})=>{const ce=(0,c.of)(se),{namespace:{rulesSource:re}}=ie,ue=(0,f.Hx)(ie.annotations),X=g.p.any.alertingRule(ie.rulerRule)||g.R$.alertingRule(ie.promRule);return(0,n.jsxs)("div",{children:[(0,n.jsx)(U,{rule:ie,rulesSource:re}),(0,n.jsxs)("div",{className:ce.wrapper,children:[(0,n.jsxs)("div",{className:ce.leftSide,children:[(0,n.jsx)(te,{rule:ie}),!!ie.labels&&!!Object.keys(ie.labels).length&&(0,n.jsx)(v.X,{label:(0,r.t)("alerting.rule-details.label-labels","Labels"),horizontal:!0,children:(0,n.jsx)(E.m,{labels:ie.labels})}),(0,n.jsx)(k,{rulesSource:re,rule:ie,annotations:ue}),(0,n.jsx)(m,{annotations:ue})]}),(0,n.jsx)("div",{className:ce.rightSide,children:(0,n.jsx)(V,{rulesSource:re,rule:ie})})]}),X&&(0,n.jsx)(v.X,{label:(0,r.t)("alerting.rule-details.label-instances","Instances"),horizontal:!0,children:(0,n.jsx)(j.s,{rule:ie,itemsDisplayLimit:J})})]})},te=({rule:ie})=>{const ce=ie.group.interval,re=ie.promRule?.lastEvaluation,ue=ie.promRule?.evaluationTime,X=g.p.grafana.recordingRule(ie.rulerRule)?ie.rulerRule?.grafana_alert.record?.metric:void 0,le=(0,h.G)(ie),he=g.p.grafana.alertingRule(ie.rulerRule)?ie.rulerRule.keep_firing_for:void 0;return(0,n.jsxs)(n.Fragment,{children:[X&&(0,n.jsx)(v.X,{label:(0,r.t)("alerting.evaluation-behavior-summary.label-metric","Metric"),horizontal:!0,children:X}),ce&&(0,n.jsx)(v.X,{label:(0,r.t)("alerting.evaluation-behavior-summary.label-evaluate","Evaluate"),horizontal:!0,children:(0,n.jsxs)(r.x6,{i18nKey:"alerting.evaluation-behavior-summary.evaluate",values:{interval:ce},children:["Every ",{interval:ce}]})}),le&&(0,n.jsx)(v.X,{label:(0,r.t)("alerting.evaluation-behavior-summary.label-pending-period","Pending period"),horizontal:!0,children:le}),he&&(0,n.jsx)(v.X,{label:(0,r.t)("alerting.rule-details.keep-firing-for","Keep firing for"),horizontal:!0,children:he}),re&&!(0,u.mo)(re)&&(0,n.jsx)(v.X,{label:(0,r.t)("alerting.evaluation-behavior-summary.label-last-evaluation","Last evaluation"),horizontal:!0,children:(0,n.jsx)(i.m,{placement:"top",content:`${(0,s.LE)(re,{format:"YYYY-MM-DD HH:mm:ss"})}`,theme:"info",children:(0,n.jsx)("span",{children:(0,r.t)("alerting.rule-details.last-evaluation-ago","{{time}} ago",{time:(0,l.KQ)(re).locale("en").fromNow(!0)})})})}),re&&!(0,u.mo)(re)&&ue!==void 0&&(0,n.jsx)(v.X,{label:(0,r.t)("alerting.evaluation-behavior-summary.label-evaluation-time","Evaluation time"),horizontal:!0,children:(0,n.jsx)(i.m,{placement:"top",content:`${ue}s`,theme:"info",children:(0,n.jsx)("span",{children:(0,o.g)({timeInMs:ue,humanize:!0})})})})]})},se=ie=>({wrapper:(0,a.css)({display:"flex",flexDirection:"row",[ie.breakpoints.down("md")]:{flexDirection:"column"}}),leftSide:(0,a.css)({flex:1}),rightSide:(0,a.css)({[ie.breakpoints.up("md")]:{paddingLeft:"90px",width:"300px"}})})},90232:(ne,A,e)=>{"use strict";e.d(A,{y:()=>p});var n=e(74848),a=e(22803),s=e(96540),l=e(40996),r=e(28105),c=e(92745),i=e(50201),o=e(34213),h=e(89640),f=e(41654),g=e(63142),u=e(70905),E=e(55290),v=e(24381);const p=({onClickCard:y,searchString:d,sortDirection:x,panelFilter:b,folderFilter:D,showSecondaryActions:C,currentPanelId:P,perPage:T=40})=>{const O=(0,g.of)(m),[{libraryPanels:S,page:B,perPage:K,numberOfPages:U,loadingState:F,currentPanelId:I},V]=(0,s.useReducer)(v.w_,{...v.Xb,currentPanelId:P,perPage:T}),M=(0,s.useMemo)(()=>(0,E.QC)(V),[V]);(0,l.A)(()=>M((0,E.IF)({searchString:d,sortDirection:x,panelFilter:b,folderFilterUIDs:D,page:B,perPage:K,currentPanelId:I})),300,[d,x,b,D,B,M]);const L=({uid:R})=>M((0,E.h4)(R,{searchString:d,sortDirection:x,panelFilter:b,folderFilterUIDs:D,page:B,perPage:K})),N=R=>M((0,v.yd)({page:R}));return!(d||b?.length||D?.length)&&F===r.Gu.Done&&S.length<1?(0,n.jsx)(i.p,{variant:"call-to-action",message:(0,c.t)("library-panel.empty-state.message","You haven't created any library panels yet"),children:(0,n.jsxs)(c.x6,{i18nKey:"library-panel.empty-state.more-info",children:["Create a library panel from any existing dashboard panel through the panel context menu."," ",(0,n.jsx)(h.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/manage-library-panels/#create-a-library-panel",children:"Learn more"})]})}):(0,n.jsxs)(f.B,{direction:"column",wrap:"nowrap",children:[F===r.Gu.Loading?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.E.Skeleton,{showSecondaryActions:C}),(0,n.jsx)(u.E.Skeleton,{showSecondaryActions:C}),(0,n.jsx)(u.E.Skeleton,{showSecondaryActions:C})]}):S.length<1?(0,n.jsx)(i.p,{variant:"not-found",message:(0,c.t)("library-panels.empty-state.message","No library panels found")}):S?.map((R,G)=>(0,n.jsx)(u.E,{libraryPanel:R,onDelete:L,onClick:y,showSecondaryActions:C},`library-panel=${G}`)),S.length?(0,n.jsx)("div",{className:O.pagination,children:(0,n.jsx)(o.d,{currentPage:B,numberOfPages:U,onNavigate:N,hideWhenSinglePage:!0})}):null]})},m=y=>({pagination:(0,a.css)({alignSelf:"center",marginTop:y.spacing(1)})})},90267:(ne,A,e)=>{"use strict";e.d(A,{G:()=>y});var n=e(95004),a=e(92745),s=e(739),l=e(93139),r=e(74848),c=e(22803),i=e(96540),o=e(51898),h=e(63142),f=e(34999),g=e(30703),u=e(18857),E=e(87039);const v="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",p=({value:d,onChange:x,context:b,item:D,id:C})=>{const[P,T]=(0,i.useState)(),O=[{value:s.aG.Auto,label:(0,a.t)("geo.location-more-editor.mode-options.label-auto","Auto"),ariaLabel:o.Tp.components.Transforms.SpatialOperations.location.autoOption,description:(0,a.t)("geo.location-more-editor.mode-options.description-auto","Automatically identify location data based on default field names")},{value:s.aG.Coords,label:(0,a.t)("geo.location-more-editor.mode-options.label-coords","Coords"),ariaLabel:o.Tp.components.Transforms.SpatialOperations.location.coords.option,description:(0,a.t)("geo.location-more-editor.mode-options.description-coords","Specify latitude and longitude fields")},{value:s.aG.Geohash,label:(0,a.t)("geo.location-more-editor.mode-options.label-geohash","Geohash"),ariaLabel:o.Tp.components.Transforms.SpatialOperations.location.geohash.option,description:(0,a.t)("geo.location-more-editor.mode-options.description-geohash","Specify geohash field")},{value:s.aG.Lookup,label:(0,a.t)("geo.location-more-editor.mode-options.label-lookup","Lookup"),ariaLabel:o.Tp.components.Transforms.SpatialOperations.location.lookup.option,description:(0,a.t)("geo.location-more-editor.mode-options.description-lookup","Specify Gazetteer and lookup field")}];(0,i.useEffect)(()=>{D.settings?.source&&D.settings?.data?.length&&D.settings.data[0]&&(0,E.nE)(D.settings.source).then(K=>{D.settings&&D.settings.data&&T((0,E.FM)(D.settings.data[0],K))})},[D.settings]);const S=(0,h.of)(m),B=()=>{if(P){if(P.warning)return(0,r.jsx)(f.F,{title:P.warning,severity:"warning",buttonContent:(0,r.jsx)(g.I,{name:"question-circle",size:"xl"}),className:S.alert,onRemove:()=>{const K=window.open(v,"_blank","noopener,noreferrer");K&&(K.opener=null)}});if(d===s.aG.Auto&&P.description)return(0,r.jsx)("span",{children:P.description})}return null};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.l6,{inputId:C,options:O,value:d,onChange:K=>{x(K.value)}}),B()]})},m=d=>({alert:(0,c.css)({"& div":{padding:d.spacing(.5)},marginBottom:"0px",marginTop:"5px",padding:d.spacing(.25)})});function y(d,x,b,D,C){switch(b.addCustomEditor({id:"modeEditor",path:`${x}mode`,name:(0,a.t)("geo.location-editor.name-location-mode","Location Mode"),editor:p,settings:{data:C,source:D}}),D?.mode){case s.aG.Coords:b.addFieldNamePicker({path:`${x}latitude`,name:(0,a.t)("geo.location-editor.name-latitude-field","Latitude field"),settings:{filter:P=>P.type===n.PU.number,noFieldsMessage:(0,a.t)("geo.location-editor.latitude-field.no-fields-message","No numeric fields found")}}).addFieldNamePicker({path:`${x}longitude`,name:(0,a.t)("geo.location-editor.name-longitude-field","Longitude field"),settings:{filter:P=>P.type===n.PU.number,noFieldsMessage:(0,a.t)("geo.location-editor.longitude-field.no-fields-message","No numeric fields found")}});break;case s.aG.Geohash:b.addFieldNamePicker({path:`${x}geohash`,name:(0,a.t)("geo.location-editor.name-geohash-field","Geohash field"),settings:{filter:P=>P.type===n.PU.string,noFieldsMessage:(0,a.t)("geo.location-editor.geohash-field.no-fields-message","No strings fields found")}});break;case s.aG.Lookup:b.addFieldNamePicker({path:`${x}lookup`,name:(0,a.t)("geo.location-editor.name-lookup-field","Lookup field"),settings:{filter:P=>P.type===n.PU.string,noFieldsMessage:(0,a.t)("geo.location-editor.lookup-field.no-fields-message","No strings fields found")}}).addCustomEditor({id:"gazetteer",path:`${x}gazetteer`,name:(0,a.t)("geo.location-editor.name-gazetteer","Gazetteer"),editor:l.G})}}},90297:(ne,A,e)=>{"use strict";e.d(A,{x:()=>i});var n=e(32899),a=e(92745),s=e(43173),l=e(45229),r=e(68528),c=e(87161);async function i(o,h,f){if(s.$.featureToggles.provisioning){const g=await o(c.Zt.endpoints.getFolder.initiate({name:h}));return g.data&&(0,r.x)(g.data)?(l.A.publish({type:n.r1.alertWarning.name,payload:[f?.warning||(0,a.t)("folders.api.folder-delete-error-provisioned","Cannot delete provisioned folder. To remove it, delete it from the repository and synchronise to apply the changes.")]}),!0):!1}else return!1}},90382:(ne,A,e)=>{"use strict";e.d(A,{X:()=>n});var n=(a=>(a.None="None",a.Viewer="Viewer",a.Editor="Editor",a.Admin="Admin",a))(n||{})},90593:(ne,A,e)=>{"use strict";e.d(A,{z:()=>s});var n=e(33239),a=e(25229);const s=(l,r)=>{const c={from:(0,a.Ar)(l.from)?(0,a.KQ)(l.from):l.from,to:(0,a.Ar)(l.to)?(0,a.KQ)(l.to):l.to},i=r?r.getTimezone():void 0;return{from:n.parse(c.from,!1,i,r?.fiscalYearStartMonth),to:n.parse(c.to,!0,i,r?.fiscalYearStartMonth),raw:c}}},90666:(ne,A,e)=>{"use strict";e.d(A,{T:()=>r});var n=e(74848),a=e(22803),s=e(63142),l=e(43990);function r({children:i,spacing:o,level:h}){const f=(0,s.of)(c,o,h);return(0,n.jsx)("span",{className:(0,a.css)(f.indentor),children:i})}const c=(i,o,h)=>({indentor:(0,a.css)((0,l.Y)(i,o,f=>({paddingLeft:i.spacing(f*h)})))})},90696:(ne,A,e)=>{"use strict";e.d(A,{CU:()=>u,E7:()=>b,JX:()=>x,g6:()=>v});var n=e(2543),a=e.n(n),s=e(62467),l=e(81160),r=e(69862),c=e(16515),i=e(52645),o=e(88907),h=e(95004),f=e(92745),g=e(65642);const u={prepareAnnotation:D=>{if((0,n.isString)(D?.query)){const{query:C,...P}=D;return{...P,target:{refId:"annotation_query",query:C},mappings:{}}}return D},prepareQuery:D=>D.target,processEvents:(D,C)=>y(C,D.mappings)};function E(){return D=>D.pipe((0,r.Z)(C=>{if(!C?.length)return(0,s.of)(void 0);if(C.length===1)return(0,s.of)(C[0]);const P={interpolate:T=>T};return(0,s.of)(C).pipe(i.c.mergeTransformer.operator({},P),(0,l.T)(T=>T[0]))}))}const v=()=>[{key:"time",field:D=>D.fields.find(C=>C.type===h.PU.time),placeholder:(0,f.t)("annotations.get-annotation-event-names.placeholder.time-or-the-first-field","{{defaultField}}, or the first time field",{defaultField:"time"})},{key:"timeEnd",help:(0,f.t)("annotations.get-annotation-event-names.help.annotation-treated-as-range","When this field is defined, the annotation will be treated as a range")},{key:"title"},{key:"text",field:D=>D.fields.find(C=>C.type===h.PU.string),placeholder:(0,f.t)("annotations.get-annotation-event-names.placeholder.text-or-the-first-field","{{defaultField}}, or the first text field",{defaultField:"text"})},{key:"tags",split:",",help:(0,f.t)("annotations.get-annotation-event-names.help.results-split-on-comma","The results will be split on comma (,)")},{key:"id"}],p=[{key:"color"},{key:"isRegion"},{key:"source"}],m=[...g.$W.publicDashboardAccessToken?p:[],...v(),{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function y(D,C){return(0,s.of)(D).pipe(E(),(0,l.T)(P=>{if(!P?.length)return[];let T=!1,O=!1;const S={};for(const U of P.fields){const F=(0,c.Ct)(U,P);S[F.toLowerCase()]=U}C||(C={});const B=[];for(const U of m){const F=C[U.key]||{};if(F.source===o.V.Skip)continue;const I={key:U.key,split:U.split};if(F.source===o.V.Text)I.text=F.value;else{const V=(F.value||U.key).toLowerCase();I.field=S[V],!I.field&&U.field&&(I.field=U.field(P))}(I.field||I.text)&&(B.push(I),I.key==="time"?T=!0:I.key==="text"&&(O=!0))}if(!T||!O)return console.error("Cannot process annotation fields. No time or text present."),[];const K=[];for(let U=0;U<P.length;U++){const F={type:"default",color:"red"};for(const I of B){let V;if(I.text)V=I.text;else if(I.field&&(V=I.field.values[U],V!==void 0&&I.regex)){const M=I.regex.exec(V);M&&(V=M[1]?M[1]:M[0])}V!=null&&(I.split&&typeof V=="string"&&(V=V.split(",")),F[I.key]=V)}K.push(F)}return K}))}const d=["loki","elasticsearch","grafana-opensearch-datasource"];function x(D){const{type:C}=D;return!(C==="datasource"||d.includes(C))}function b(D){const{type:C}=D;return d.includes(C)}},90811:(ne,A,e)=>{"use strict";e.d(A,{cC:()=>u,cb:()=>g});var n=e(74848),a=e(22803),s=e(58521),l=e(96540),r=e(74529),c=e(51898),i=e(92745),o=e(93256),h=e(15356),f=e(7895);const g=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"];class u extends l.PureComponent{constructor(m){super(m),this.onChangeSelect=y=>{const{onIntervalChanged:d}=this.props;d&&y.value!=null&&d(y.value)}}static{this.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"}}static{this.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"}}static{this.autoOption={label:"Auto",value:"auto",ariaLabel:"Select refresh from the query range"}}static{this.isLive=m=>m===u.liveOption.value}getVariant(){return this.props.isLive||this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:m,intervals:y,tooltip:d,value:x,text:b,isLoading:D,noIntervalPicker:C,width:P,showAutoInterval:T}=this.props,O=x||"",S=this.getVariant(),B=v({intervals:y,showAutoInterval:T}),K=B.find(({value:G})=>G===O),U=E(u.offOption.value);let F=K||U;F.label===U.label&&(F={value:""});const I=F.ariaLabel,V=(0,i.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:I}),M=(0,i.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),L=F.value===""?M:V,N=(0,i.t)("refresh-picker.tooltip.interval-selected","Set auto refresh interval"),W=(0,i.t)("refresh-picker.tooltip.turned-off","Auto refresh off"),R=F.value===""?W:N;return(0,n.jsxs)(o.e,{className:"refresh-picker",children:[(0,n.jsx)(f.I,{"aria-label":b,tooltip:d,onClick:m,variant:S,icon:D?"spinner":"sync",style:P?{width:P}:void 0,"data-testid":c.Tp.components.RefreshPicker.runButtonV2,children:b}),!C&&(0,n.jsx)(h.f,{className:(0,a.css)({borderTopLeftRadius:"unset",borderBottomLeftRadius:"unset"}),value:F,options:B,onChange:this.onChangeSelect,variant:S,"data-testid":c.Tp.components.RefreshPicker.intervalButtonV2,"aria-label":L,tooltip:R})]})}}function E(p){switch(p){case u.liveOption.value:return{label:(0,i.t)("refresh-picker.live-option.label","Live"),value:p,ariaLabel:(0,i.t)("refresh-picker.live-option.aria-label","Turn on live streaming")};case u.offOption.value:return{label:(0,i.t)("refresh-picker.off-option.label","Off"),value:p,ariaLabel:(0,i.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")};case u.autoOption.value:return{label:(0,i.t)("refresh-picker.auto-option.label",u.autoOption.label),value:p,ariaLabel:(0,i.t)("refresh-picker.auto-option.aria-label",u.autoOption.ariaLabel)}}return{label:p,value:p}}function v({intervals:p=g,showAutoInterval:m=!1}={}){const y=p.map(d=>{const x=(0,r.E9)(d),b=(0,s.a)(x);return{label:d,value:d,ariaLabel:b}});return m&&y.unshift(E(u.autoOption.value)),y.unshift(E(u.offOption.value)),y}},90909:(ne,A,e)=>{"use strict";e.d(A,{o:()=>g});var n=e(74848),a=e(96540),s=e(92745),l=e(30703),r=e(45967),c=e(27594),i=e(34999),o=e(66404),h=e(41654),f=e(96221);const g=({ldapConnectionInfo:E})=>{const v=(0,a.useMemo)(()=>[{id:"host",header:"Host",disableGrow:!0},{id:"port",header:"Port",disableGrow:!0},{id:"available",cell:m=>m.cell.value?(0,n.jsx)(h.B,{justifyContent:"end",children:(0,n.jsx)(r.m,{content:(0,s.t)("admin.ldap-connection-status.columns.content-connection-is-available","Connection is available"),children:(0,n.jsx)(l.I,{name:"check"})})}):(0,n.jsx)(h.B,{justifyContent:"end",children:(0,n.jsx)(r.m,{content:(0,s.t)("admin.ldap-connection-status.columns.content-connection-is-not-available","Connection is not available"),children:(0,n.jsx)(l.I,{name:"exclamation-triangle"})})})}],[]),p=(0,a.useMemo)(()=>E,[E]);return(0,n.jsx)("section",{children:(0,n.jsxs)(h.B,{direction:"column",gap:2,children:[(0,n.jsx)(o.E,{color:"primary",element:"h3",children:(0,n.jsx)(s.x6,{i18nKey:"admin.ldap-status.title",children:"LDAP Connection"})}),(0,n.jsx)(c.j,{data:p,columns:v,getRowId:m=>m.host+m.port}),(0,n.jsx)(u,{ldapConnectionInfo:E})]})})},u=({ldapConnectionInfo:E})=>{if(!E.some(y=>y.error))return null;const p=[];E.forEach(y=>{y.error&&p.push(y)});const m=p.map((y,d)=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{style:{fontWeight:500},children:[`${y.host}:${y.port}`,(0,n.jsx)("br",{})]}),(0,n.jsx)("span",{children:y.error}),d!==p.length-1&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]})]},d));return(0,n.jsx)(i.F,{title:(0,s.t)("admin.ldap-error-box.title-connection-error","Connection error"),severity:f.Qd.Error,children:m})}},90929:(ne,A,e)=>{"use strict";e.d(A,{N:()=>U});var n=e(74848),a=e(22803),s=e(34743),l=e(83505),r=e(46885),c=e(18828),i=e(43107),o=e(93225),h=e(96540),f=e(92745),g=e(63142),u=e(45861),E=e(37386),v=e(30703),p=e(63527),m=e(92807),y=e(47087),d=e(44398),x=e(8431);const b=/^now$|^now(\-|\+)(\d{1,10})([wdhms])$/,D=V=>({from:O(V.from),to:O(V.to)}),C=V=>{const M=B(V.from),L=B(V.to);return{from:M,to:L,display:`${M} to ${L}`}},P=(V,M=Date.now())=>T(V)?O(V)>Math.ceil(M/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},T=V=>b.test(V),O=V=>{const M=b.exec(V);if(!M||M.length!==4)return 0;const[,L,N,W]=M,R=parseInt(N,10);if(isNaN(R))return 0;const G=R*S[W];return L==="+"?G*-1:G},S={w:604800,d:86400,h:3600,m:60,s:1},B=V=>{if(V===0)return"now";const M=Math.abs(V);return V<0?`now+${K(M)}`:`now-${K(M)}`};function K(V){const M=[{unit:"w",value:604800},{unit:"d",value:86400},{unit:"h",value:3600},{unit:"m",value:60},{unit:"s",value:1}];for(const{unit:N,value:W}of M)if(V%W===0)return`${V/W}${N}`;const L=M[M.length-1];return`${V}${L.unit}`}function U(V){const{timeRange:M,onChange:L}=V,[N,W]=(0,h.useState)(!1),R=(0,h.useCallback)(()=>W(!1),[]),G=C(M),[w,_]=(0,h.useState)({value:G.from,validation:P(G.from)}),[Q,ae]=(0,h.useState)({value:G.to,validation:P(G.to)}),q=(0,h.useRef)(null),{overlayProps:k,underlayProps:ee}=(0,o.e)({onClose:()=>W(!1),isDismissable:!0,isOpen:N},q),{dialogProps:j}=(0,c.s)({},q),J=(0,x.O)().filter(Xe=>T(Xe.from)),Z=[(0,s.UU)({crossAxis:!1,boundary:document.body}),(0,s.BN)()],{context:te,refs:se,floatingStyles:ie}=(0,l.we)({open:N,placement:"bottom-start",onOpenChange:W,middleware:Z,whileElementsMounted:r.ll,strategy:"fixed"}),ce=(0,l.kp)(te),re=(0,l.s9)(te),{getReferenceProps:ue,getFloatingProps:X}=(0,l.bv)([re,ce]),le=(0,g.of)(F(w.validation.errorMessage,Q.validation.errorMessage)),he=Xe=>{const De=D(Xe);De&&(R(),_({...w,value:Xe.from}),ae({...Q,value:Xe.to}),L(De))},fe=(0,h.useCallback)(Xe=>{Xe.stopPropagation(),Xe.preventDefault(),W(!N)},[N]),Ce=Xe=>{if(Xe.preventDefault(),!Q.validation.isValid||!w.validation.isValid)return;const De=D({from:w.value,to:Q.value,display:""});De&&(L(De),W(!1))},{from:Ae,to:_e}=G;return(0,n.jsxs)("div",{className:le.container,children:[(0,n.jsxs)("button",{ref:se.setReference,className:le.pickerInput,type:"button",onClick:fe,...ue(),children:[(0,n.jsx)("span",{className:le.clockIcon,children:(0,n.jsx)(v.I,{name:"clock-nine"})}),(0,n.jsx)("span",{children:(0,n.jsxs)(f.x6,{i18nKey:"time-picker.time-range.from-to",children:[{timeOptionFrom:Ae}," to ",{timeOptionTo:_e}]})}),(0,n.jsx)("span",{className:le.caretIcon,children:(0,n.jsx)(v.I,{name:N?"angle-up":"angle-down",size:"lg"})})]}),N&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{role:"presentation",className:le.backdrop,...ee}),(0,n.jsx)(i.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("div",{ref:q,...k,...j,children:(0,n.jsx)("div",{className:le.content,ref:se.setFloating,style:ie,...X(),children:(0,n.jsxs)("div",{className:le.body,children:[(0,n.jsx)("div",{className:le.leftSide,children:(0,n.jsx)(m.P,{showScrollIndicators:!0,children:(0,n.jsx)(d.l,{title:(0,f.t)("time-picker.time-range.example-title","Example time ranges"),options:J,onChange:he,value:G})})}),(0,n.jsxs)("div",{className:le.rightSide,children:[(0,n.jsx)("div",{className:le.title,children:(0,n.jsx)(y.e,{children:(0,n.jsx)(f.x6,{i18nKey:"time-picker.time-range.specify",children:"Specify time range"})})}),(0,n.jsx)(E.D,{label:(0,f.t)("time-picker.time-range.from-label","From"),invalid:!w.validation.isValid,error:w.validation.errorMessage,children:(0,n.jsx)(p.p,{onClick:Xe=>Xe.stopPropagation(),onBlur:()=>_({...w,validation:P(w.value)}),onChange:Xe=>_({...w,value:Xe.currentTarget.value}),value:w.value})}),(0,n.jsx)(E.D,{label:(0,f.t)("time-picker.time-range.to-label","To"),invalid:!Q.validation.isValid,error:Q.validation.errorMessage,children:(0,n.jsx)(p.p,{onClick:Xe=>Xe.stopPropagation(),onBlur:()=>ae({...Q,validation:P(Q.value)}),onChange:Xe=>ae({...Q,value:Xe.currentTarget.value}),value:Q.value})}),(0,n.jsx)(u.$n,{"aria-label":(0,f.t)("time-picker.time-range.submit-button-label","TimePicker submit button"),onClick:Ce,children:(0,n.jsx)(f.x6,{i18nKey:"time-picker.time-range.apply",children:"Apply time range"})})]})]})})})})]})]})}const F=(V,M)=>L=>{const N=(0,p.n)({theme:L,invalid:!1}),R=250+I(L,V)+I(L,M);return{backdrop:(0,a.css)({position:"fixed",zIndex:L.zIndex.modalBackdrop,top:0,right:0,bottom:0,left:0}),container:(0,a.css)({display:"flex",position:"relative"}),pickerInput:(0,a.cx)(N.input,N.wrapper,(0,a.css)({display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",paddingRight:0,paddingLeft:0,lineHeight:`${L.spacing.gridSize*L.components.height.md-2}px`})),caretIcon:(0,a.cx)(N.suffix,(0,a.css)({position:"relative",marginLeft:L.spacing(.5)})),clockIcon:(0,a.cx)(N.prefix,(0,a.css)({position:"relative",marginRight:L.spacing(.5)})),content:(0,a.css)({background:L.colors.background.primary,boxShadow:L.shadows.z3,position:"absolute",zIndex:L.zIndex.modal,width:"500px",top:"100%",borderRadius:L.shape.radius.default,border:`1px solid ${L.colors.border.weak}`,left:0,whiteSpace:"normal"}),body:(0,a.css)({display:"flex",height:`${R}px`}),description:(0,a.css)({color:L.colors.text.secondary,fontSize:L.typography.size.sm}),leftSide:(0,a.css)({width:"50% !important",borderRight:`1px solid ${L.colors.border.medium}`}),rightSide:(0,a.css)({width:"50%",padding:L.spacing(1)}),title:(0,a.css)({marginBottom:L.spacing(1)})}};function I(V,M){return M?M.length>34?V.spacing.gridSize*6.5:V.spacing.gridSize*4:0}},91073:(ne,A,e)=>{"use strict";e.d(A,{z:()=>b});var n=e(74848),a=e(92745),s=e(97095),l=e(18027),r=e(45861),c=e(30703),i=e(82779),o=e(22803),h=e(63142),f=e(41654),g=e(15356),u=e(18857),E=e(63527),v=e(2954);const p=v.A.reducerTypes.map(D=>({label:D.text,value:D.value})),m=v.A.evalOperators.map(D=>({label:D.text,value:D.value})),y=v.A.evalFunctions.map(D=>({label:D.text,value:D.value})),d=({condition:D,index:C,onChange:P,onRemoveCondition:T,refIds:O})=>{const S=(0,h.of)(x),B=L=>{P({...D,operator:{type:L.value}})},K=L=>{P({...D,reducer:{type:L.value,params:[]}})},U=L=>{P({...D,query:{params:[L.value]}})},F=L=>{P({...D,evaluator:{params:D.evaluator.params,type:L.value}})},I=(L,N)=>{const W=parseFloat(L.currentTarget.value),R=[...D.evaluator.params];R[N]=W,P({...D,evaluator:{...D.evaluator,params:R}})},V=(0,o.css)({width:"75px"}),M=D.evaluator.type===v.p.IsWithinRange||D.evaluator.type===v.p.IsOutsideRange||D.evaluator.type===v.p.IsOutsideRangeIncluded||D.evaluator.type===v.p.IsWithinRangeIncluded;return(0,n.jsxs)(f.B,{children:[(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsxs)(s.C,{children:[C===0?(0,n.jsx)("div",{className:(0,o.cx)(S.button,V),children:(0,n.jsx)(a.x6,{i18nKey:"expressions.condition.when",children:"WHEN"})}):(0,n.jsx)(g.f,{className:(0,o.cx)(S.buttonSelectText,V),options:m,onChange:B,value:m.find(L=>L.value===D.operator.type)}),(0,n.jsx)(u.l6,{options:p,onChange:K,width:20,value:p.find(L=>L.value===D.reducer.type)}),(0,n.jsx)("div",{className:S.button,children:(0,n.jsx)(a.x6,{i18nKey:"expressions.condition.of",children:"OF"})}),(0,n.jsx)(u.l6,{onChange:U,options:O,width:"auto",value:O.find(L=>L.value===D.query.params[0])})]}),(0,n.jsxs)(s.C,{children:[(0,n.jsx)(g.f,{className:S.buttonSelectText,options:y,onChange:F,value:y.find(L=>L.value===D.evaluator.type)}),M?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.p,{type:"number",width:10,onChange:L=>I(L,0),value:D.evaluator.params[0]}),(0,n.jsx)("div",{className:S.button,children:(0,n.jsx)(a.x6,{i18nKey:"expressions.condition.to",children:"TO"})}),(0,n.jsx)(E.p,{type:"number",width:10,onChange:L=>I(L,1),value:D.evaluator.params[1]})]}):D.evaluator.type!==v.p.HasNoValue?(0,n.jsx)(E.p,{type:"number",width:10,onChange:L=>I(L,0),value:D.evaluator.params[0]}):null]})]}),(0,n.jsx)(r.$n,{variant:"secondary",type:"button",onClick:()=>T(C),children:(0,n.jsx)(c.I,{name:"trash-alt"})})]})},x=D=>{const C=(0,o.css)({color:D.colors.primary.text,fontSize:D.typography.bodySmall.fontSize});return{buttonSelectText:C,button:(0,o.cx)((0,o.css)({display:"flex",alignItems:"center",borderRadius:D.shape.radius.default,fontWeight:D.typography.fontWeightMedium,border:`1px solid ${D.colors.border.weak}`,whiteSpace:"nowrap",padding:`0 ${D.spacing(1)}`,backgroundColor:D.colors.background.canvas}),C)}},b=({onChange:D,query:C,refIds:P})=>{const T=(B,K)=>{C.conditions&&D({...C,conditions:[...C.conditions.slice(0,K),B,...C.conditions.slice(K+1)]})},O=()=>{if(C.conditions){const B=C.conditions.at(-1)?.query?.params??[],K={...i.P0,query:{params:B}};D({...C,conditions:C.conditions.length>0?[...C.conditions,K]:[K]})}},S=B=>{if(C.conditions){const K=C.conditions[B],U=C.conditions.filter(F=>F!==K).map((F,I)=>I===0?{...F,operator:{type:"when"}}:F);D({...C,conditions:U})}};return(0,n.jsxs)("div",{children:[(0,n.jsx)(s.C,{children:(0,n.jsx)(l.I,{label:(0,a.t)("expressions.classic-conditions.label-conditions","Conditions"),labelWidth:14,children:(0,n.jsx)("div",{children:C.conditions?.map((B,K)=>{if(B)return(0,n.jsx)(d,{index:K,condition:B,onChange:U=>T(U,K),onRemoveCondition:S,refIds:P},K)})})})}),(0,n.jsx)(r.$n,{variant:"secondary",type:"button",onClick:O,children:(0,n.jsx)(c.I,{name:"plus-circle"})})]})}},91146:(ne,A,e)=>{"use strict";e.d(A,{f:()=>a,v:()=>s});var n=e(79319);function a(l){let r=0;for(const c of l)c.fields.length>r&&(r=c.fields.length);return r}function s(l){switch(l){case n.N.False:return!1;case n.N.True:return!0;case n.N.Null:return null;case n.N.Zero:return 0;case n.N.Empty:default:return""}}},91156:(ne,A,e)=>{"use strict";e.d(A,{d:()=>a});var n=e(32225);const a=n.NestedFolderPicker},91272:(ne,A,e)=>{"use strict";e.d(A,{l:()=>s});var n=e(57746);const a=(0,n.Sn)("mod+l");function s(){return{onKeyDown(l,r,c){if(a(l)){l.preventDefault();const{focusBlock:i,document:o}=r.value;r.moveAnchorToStartOfBlock(),o.getNextBlock(i.key)?r.moveFocusToStartOfNextBlock():r.moveFocusToEndOfText()}else return c();return!0}}}},91302:(ne,A,e)=>{"use strict";e.d(A,{$:()=>s});var n=e(22803),a=e(17437);const s=(l,r,c=!1)=>{const{spacing:i}=l,o=l.colors.border.strong,h=l.colors.primary.main,f=l.colors.primary.main,u=`box-shadow: 0px 0px 0px 6px ${l.colors.primary.transparent}`;return{container:(0,n.css)({width:"100%",margin:r?"inherit":i(1,3,1,1),paddingBottom:r&&c?l.spacing(1):"inherit",height:r?"auto":"100%"}),slider:(0,n.css)`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${l.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${l.colors.text.disabled};
        font-size: ${l.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${l.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${f};
        box-shadow: ${l.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${u};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${l.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${l.colors.text.primary};
        border-color: ${l.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${h};
      }
      .rc-slider-rail {
        background-color: ${o};
        cursor: pointer;
      }
    `,tooltip:(0,a.css)`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${l.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${l.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:(0,n.css)({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"}),sliderInputVertical:(0,n.css)({flexDirection:"column",height:"100%",".rc-slider":{margin:0,order:2}}),sliderInputField:(0,n.css)({marginLeft:l.spacing(3),input:{textAlign:"center"}}),sliderInputFieldVertical:(0,n.css)({margin:`0 0 ${l.spacing(3)} 0`,order:1})}}},91520:()=>{(function(ne){var A={series:{stackpercent:null}};function e(n){var a={},s=!1,l={};function r(o,h,f,g){if(s||(s=!0,l=c(o.getData())),h.stackpercent==!0){var u=f.length;h.percents=[];var E=0,v=1;h.bars&&h.bars.horizontal&&h.bars.horizontal===!0&&(E=1,v=0);for(var p=0;p<u;p++){var m=l[f[p][E]+""];m>0?h.percents.push(f[p][v]*100/m):h.percents.push(0)}}}function c(o){var h=o.length,f={};if(h>0){for(var g=0;g<h;g++)if(o[g].stackpercent){var u=0,E=1;o[g].bars&&o[g].bars.horizontal&&o[g].bars.horizontal===!0&&(u=1,E=0);for(var v=o[g].data.length,p=0;p<v;p++){var m=0;o[g].data[p][1]!=null&&(m=o[g].data[p][E]),f[o[g].data[p][u]+""]?f[o[g].data[p][u]+""]+=m:f[o[g].data[p][u]+""]=m}}}return f}function i(o,h,f){if(h.stackpercent){s||(l=c(o.getData()));var g=[],u=0,E=1;h.bars&&h.bars.horizontal&&h.bars.horizontal===!0&&(u=1,E=0);for(var v=0;v<f.points.length;v+=3)a[f.points[v+u]]||(a[f.points[v+u]]=0),g[v+u]=f.points[v+u],g[v+E]=f.points[v+E]+a[f.points[v+u]],g[v+2]=a[f.points[v+u]],a[f.points[v+u]]+=f.points[v+E],l[g[v+u]+""]>0?(g[v+E]=g[v+E]*100/l[g[v+u]+""],g[v+2]=g[v+2]*100/l[g[v+u]+""]):(g[v+E]=0,g[v+2]=0);f.points=g}}n.hooks.processRawData.push(r),n.hooks.processDatapoints.push(i)}ne.plot.plugins.push({init:e,options:A,name:"stackpercent",version:"0.1"})})(jQuery)},91555:(ne,A,e)=>{"use strict";e.d(A,{TD:()=>l,mL:()=>n,pd:()=>a,zM:()=>s});const n="/admin/provisioning",a=`${n}/connect`,s=`${n}/getting-started`,l=["github","local"]},91782:(ne,A,e)=>{"use strict";e.d(A,{j:()=>Yn});var n=e(74848),a=e(36490),s=e(45863),l=e(8207),r=e(58662),c=e(8285),i=e(22803),o=e(20382),h=e(16817),f=e(70713),g=e(51898),u=e(92745),E=e(43173),v=e(63142),p=e(41654),m=e(21285),y=e(72636),d=e(50992),x=e(68079),b=e(45861),D=e(47931),C=e(6890),P=e(64762),T=e(8535),O=e(56445),S=e(84330);const B=g.Tp.pages.ExportDashboardDrawer.ExportAsJson;class K extends O.N{static{this.Component=U}getTabLabel(){return(0,u.t)("export.json.title","Export dashboard")}}function U({model:jt}){const tn=(0,v.of)(F),{isSharingExternally:an,isViewingYAML:Pn,exportMode:Mn}=jt.useState(),Un=(0,h.A)(async()=>await jt.getExportableDashboardJson(),[an,Mn]),aa=JSON.stringify(Un.value?.json,null,2),ia=o.Ay.dump(Un.value?.json,{skipInvalid:!0}),ta=Pn?ia:aa,na=async()=>{await jt.onSaveAsFile();const ca=(0,u.t)("export.json.download-successful_toast_message","Your JSON has been downloaded");(0,T.JD)((0,C.dx)((0,P.tZ)(ca)))},fa=(0,u.t)("export.json.export-externally-label","Export the dashboard to use in another instance");return(0,n.jsxs)("div",{"data-testid":B.container,className:tn.container,children:[(0,n.jsx)("p",{children:(0,n.jsx)(u.x6,{i18nKey:"export.json.info-text",children:"Copy or download a file containing the definition of your dashboard"})}),E.$.featureToggles.kubernetesDashboards?(0,n.jsx)(S.j,{dashboardJson:Un,isSharingExternally:an??!1,exportMode:Mn??S.i.Classic,isViewingYAML:Pn??!1,onExportModeChange:jt.onExportModeChange,onShareExternallyChange:jt.onShareExternallyChange,onViewYAML:jt.onViewYAML}):(0,n.jsxs)(p.B,{gap:1,alignItems:"start",children:[(0,n.jsx)(m.d,{label:fa,"data-testid":B.exportExternallyToggle,id:"export-externally-toggle",value:!!an,onChange:jt.onShareExternallyChange}),(0,n.jsx)(y.J,{children:fa})]}),(0,n.jsx)("div",{className:tn.codeEditorBox,children:(0,n.jsx)(f.Ay,{"data-testid":B.codeEditor,children:({width:ca,height:xa})=>ta?(0,n.jsx)(d.B,{value:ta,language:Pn?"yaml":"json",showLineNumbers:!0,showMiniMap:!1,height:xa,width:ca,readOnly:!0}):Un.loading&&(0,n.jsx)(x.y,{})})}),(0,n.jsx)("div",{className:tn.buttonsContainer,children:(0,n.jsxs)(p.B,{gap:1,flex:1,direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(b.$n,{"data-testid":B.saveToFileButton,variant:"primary",icon:"download-alt",onClick:na,children:(0,n.jsx)(u.x6,{i18nKey:"export.json.download-button",children:"Download file"})}),(0,n.jsx)(D.b,{"data-testid":B.copyToClipboardButton,variant:"secondary",icon:"copy",disabled:Un.loading,getText:()=>ta??"",onClipboardCopy:jt.onClipboardCopy,children:(0,n.jsx)(u.x6,{i18nKey:"export.json.copy-button",children:"Copy to clipboard"})}),(0,n.jsx)(b.$n,{"data-testid":B.cancelButton,variant:"secondary",onClick:jt.useState().onDismiss,fill:"outline",children:(0,n.jsx)(u.x6,{i18nKey:"export.json.cancel-button",children:"Cancel"})})]})})]})}function F(jt){return{container:(0,i.css)({height:"100%"}),codeEditorBox:(0,i.css)({margin:`${jt.spacing(2,0)}`,height:"75%"}),buttonsContainer:(0,i.css)({paddingBottom:jt.spacing(2)})}}var I=e(4213),V=e.n(I),M=e(96540),L=e(41053),N=e(34999),W=e(89640),R=e(23289),G=e(49185),w=e(47327),_=e(66404);function Q({imageBlob:jt,isLoading:tn,error:an,title:Pn}){const Mn=(0,v.of)(q),[Un,{width:aa}]=(0,G.A)(),ia=(0,M.useMemo)(()=>jt?URL.createObjectURL(jt):void 0,[jt]);return(0,M.useEffect)(()=>()=>{ia&&URL.revokeObjectURL(ia)},[ia]),(0,n.jsxs)("div",{className:Mn.previewContainer,ref:Un,"aria-label":(0,u.t)("share-modal.image.preview-region","Image preview"),role:"region",children:[tn&&(0,n.jsxs)("div",{className:Mn.loadingBarContainer,role:"status","aria-label":(0,u.t)("share-modal.image.generating","Generating image..."),children:[(0,n.jsx)(w.G,{width:aa}),Pn&&(0,n.jsx)("div",{className:Mn.titleContainer,children:(0,n.jsx)(_.E,{variant:"body",children:Pn})})]}),an&&!tn&&(0,n.jsx)(ae,{error:an}),!tn&&ia&&(0,n.jsx)("img",{src:ia,alt:(0,u.t)("share-modal.image.preview","Preview"),className:Mn.image,"aria-label":(0,u.t)("share-modal.image.preview-aria","Generated image preview")})]})}function ae({error:jt}){if(!jt)return null;const tn=jt.message&&jt.message!==jt.title;return(0,n.jsx)(N.F,{severity:"error",title:jt.title,children:tn&&(0,n.jsx)("div",{children:jt.message})})}const q=jt=>({previewContainer:(0,i.css)({position:"relative",width:"100%",minHeight:"200px",backgroundColor:jt.colors.background.secondary,borderRadius:jt.shape.radius.default,overflow:"hidden"}),loadingBarContainer:(0,i.css)({position:"absolute",top:0,left:0,right:0}),titleContainer:(0,i.css)({padding:jt.spacing(1)}),image:(0,i.css)({maxWidth:"100%",maxHeight:"100%",objectFit:"contain"})});var k=e(75505),ee=e(68143),j=e(52043),J=e(15130);async function Z({dashboard:jt,scale:tn=E.$.rendererDefaultImageScale||2}){try{if(!E.$.rendererAvailable)return{blob:new Blob,error:"Image renderer plugin not installed"};const an=(0,j.u)({uid:jt.state.uid,currentQueryParams:window.location.search,render:!0,absolute:!0,updateQuery:{height:-1,width:window.innerWidth||E.$.rendererDefaultImageWidth||1e3,scale:tn,kiosk:!0,hideNav:!0,orgId:String(J.TP.user.orgId),fullPageImage:!0}}),Pn=await(0,k.s)((0,ee.AI)().fetch({url:an,responseType:"blob"}));return Pn.ok?Pn.data instanceof Blob?{blob:Pn.data}:{blob:new Blob,error:"Invalid response data format"}:{blob:new Blob,error:`Failed to generate image: ${Pn.status} ${Pn.statusText}`}}catch(an){return{blob:new Blob,error:an instanceof Error&&an.message?an.message:"Failed to generate image"}}}class te extends s.Bs{static{this.Component=se}getTabLabel(){return(0,u.t)("share-modal.image.title","Export as image")}}function se({model:jt}){const{onDismiss:tn}=jt.useState(),an=(0,c.YQ)(jt),Pn=(0,v.of)(ce),[{loading:Mn,value:Un,error:aa},ia]=(0,L.A)(async()=>{try{const na=await Z({dashboard:an,scale:E.$.rendererDefaultImageScale||1});if(na.error)throw new Error(na.error);return R.c.generateDashboardImageClicked({scale:E.$.rendererDefaultImageScale||1,shareResource:"dashboard",success:!0}),na.blob}catch(na){throw console.error("Error exporting image:",na),R.c.generateDashboardImageClicked({scale:E.$.rendererDefaultImageScale||1,shareResource:"dashboard",success:!1,error:na instanceof Error?na.message:"Failed to generate image"}),na}},[an]);(0,M.useEffect)(()=>()=>{Un&&URL.revokeObjectURL(URL.createObjectURL(Un))},[Un]);const ta=()=>{if(!Un)return;const na=new Date().getTime(),fa=an.state.title;(0,I.saveAs)(Un,`${fa}-${na}.png`),R.c.downloadDashboardImageClicked({fileName:`${fa}-${na}.png`,shareResource:"dashboard"})};return E.$.rendererAvailable?(0,n.jsxs)("main",{children:[(0,n.jsx)("p",{className:Pn.info,children:(0,n.jsx)(u.x6,{i18nKey:"share-modal.image.info-text",children:"Save this dashboard as an image"})}),(0,n.jsxs)("div",{className:Pn.buttonRow,role:"group","aria-label":(0,u.t)("share-modal.image.actions","Image export actions"),children:[Un?(0,n.jsx)(b.$n,{variant:"primary",onClick:ta,icon:"download-alt",children:(0,n.jsx)(u.x6,{i18nKey:"share-modal.image.download-button",children:"Download image"})}):(0,n.jsx)(b.$n,{variant:"primary",onClick:ia,disabled:Mn,icon:"gf-layout-simple","aria-describedby":Mn?"generate-status":void 0,children:(0,n.jsx)(u.x6,{i18nKey:"share-modal.image.generate-button",children:"Generate image"})}),(0,n.jsx)(b.$n,{variant:"secondary",onClick:tn,fill:"outline",children:(0,n.jsx)(u.x6,{i18nKey:"share-modal.image.cancel-button",children:"Cancel"})})]}),Mn&&(0,n.jsx)("div",{id:"generate-status","aria-live":"polite",className:"sr-only",children:(0,n.jsx)(u.x6,{i18nKey:"share-modal.image.generating",children:"Generating image..."})}),(0,n.jsx)(Q,{imageBlob:Un||null,isLoading:Mn,error:aa?{title:(0,u.t)("share-modal.image.error-title","Failed to generate image"),message:aa instanceof Error?aa.message:"Failed to generate image"}:null,title:an.state.title})]}):(0,n.jsx)(ie,{})}function ie(){return E.$.rendererAvailable?null:(0,n.jsxs)(N.F,{severity:"info",title:(0,u.t)("share-modal.link.render-alert","Image renderer plugin not installed"),children:[(0,n.jsx)("div",{children:(0,u.t)("share-modal.link.render-alert","Image renderer plugin not installed")}),(0,n.jsx)("div",{children:(0,n.jsxs)(u.x6,{i18nKey:"share-modal.link.render-instructions",children:["To render an image, you must install the"," ",(0,n.jsx)(W.Y,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0,children:"Grafana image renderer plugin"}),". Please contact your Grafana administrator to install the plugin."]})})]})}const ce=jt=>({info:(0,i.css)({marginBottom:jt.spacing(2)}),buttonRow:(0,i.css)({display:"flex",gap:jt.spacing(2),marginBottom:jt.spacing(2)})});var re=e(3271),ue=e(73427),X=e(62905),le=e(82298),he=e(24313),fe=e(11257),Ce=e(76319),Ae=e(70735);function _e({onConfirm:jt,onDismiss:tn,description:an,confirmButtonLabel:Pn,title:Mn,isActionLoading:Un}){const aa=(0,v.of)(Xe),ia=()=>(0,n.jsx)("div",{className:aa.bodyContainer,children:(0,n.jsxs)(p.B,{justifyContent:"space-between",children:[(0,n.jsxs)(p.B,{gap:1,alignItems:"center",children:[(0,n.jsx)(Ce.K,{size:"xl",name:"angle-left","aria-label":(0,u.t)("share-drawer.confirm-action.back-arrow-button","Back button"),onClick:tn}),(0,n.jsx)(_.E,{variant:"h4",children:Mn})]}),Un&&(0,n.jsx)(x.y,{})]})});return(0,n.jsx)(Ae.k,{body:(0,n.jsx)(ia,{}),description:an,confirmButtonLabel:Pn,confirmButtonVariant:"destructive",dismissButtonLabel:(0,u.t)("share-drawer.confirm-action.cancel-button","Cancel"),dismissButtonVariant:"secondary",justifyButtons:"flex-start",onConfirm:jt,onDismiss:tn})}const Xe=jt=>({bodyContainer:(0,i.css)({marginBottom:jt.spacing(2)})}),De=(0,M.createContext)(void 0),Me=()=>{const jt=(0,M.useContext)(De);if(jt===void 0)throw new Error("useShareDrawerContext must be used within a DrawerContext");return jt};var Te=e(49785),$e=e(16780),Re=e(37386),Ke=e(45967),Ve=e(30703),Se=e(63527),Ye=e(83692);const Ue=g.Tp.pages.ShareDashboardDrawer.ShareExternally.Configuration;function je(){const jt=(0,v.of)(Qe),{dashboard:tn}=Me(),[an,{isLoading:Pn}]=(0,X.T2)(),{data:Mn}=X.Sm.endpoints?.getPublicDashboard.useQueryState(tn.state.uid),Un=ue.TP.hasPermission(fe.w.DashboardsPublicWrite),aa=Pn||!Un,ta=s.jh.getTimeRange(tn).useState(),{handleSubmit:na,setValue:fa,control:ca}=(0,Te.mN)({defaultValues:{isAnnotationsEnabled:Mn?.annotationsEnabled,isTimeSelectionEnabled:Mn?.timeSelectionEnabled}}),xa=async(ps,Ya)=>{fa(ps,Ya),await na(Ka=>ns({...Ka,[ps]:Ya}))()},ns=ps=>{const{isAnnotationsEnabled:Ya,isTimeSelectionEnabled:Ka}=ps;an({dashboard:tn,payload:{...Mn,annotationsEnabled:Ya,timeSelectionEnabled:Ka}})};return(0,n.jsxs)(p.B,{direction:"column",gap:2,children:[(0,n.jsx)(_.E,{element:"p",children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.configuration.settings-label",children:"Settings"})}),(0,n.jsxs)(p.B,{justifyContent:"space-between",children:[(0,n.jsx)("form",{onSubmit:na(ns),children:(0,n.jsx)($e.n,{disabled:aa,children:(0,n.jsxs)(p.B,{direction:"column",gap:2,children:[(0,n.jsxs)(p.B,{gap:1,children:[(0,n.jsx)(Te.xI,{render:({field:{ref:ps,...Ya}})=>(0,n.jsx)(m.d,{...Ya,"data-testid":Ue.enableTimeRangeSwitch,onChange:Ka=>{R.c.publicDashboardTimeSelectionChanged({enabled:Ka.currentTarget.checked}),xa("isTimeSelectionEnabled",Ka.currentTarget.checked)},label:(0,u.t)("public-dashboard.configuration.enable-time-range-label","Enable time range")}),control:ca,name:"isTimeSelectionEnabled"}),(0,n.jsx)(y.J,{description:(0,u.t)("public-dashboard.configuration.enable-time-range-description","Allow people to change time range"),children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.configuration.enable-time-range-label",children:"Enable time range"})})]}),(0,n.jsxs)(p.B,{gap:1,children:[(0,n.jsx)(Te.xI,{render:({field:{ref:ps,...Ya}})=>(0,n.jsx)(m.d,{...Ya,"data-testid":Ue.enableAnnotationsSwitch,onChange:Ka=>{R.c.publicDashboardAnnotationsSelectionChanged({enabled:Ka.currentTarget.checked}),xa("isAnnotationsEnabled",Ka.currentTarget.checked)},label:(0,u.t)("public-dashboard.configuration.display-annotations-label","Display annotations")}),control:ca,name:"isAnnotationsEnabled"}),(0,n.jsx)(y.J,{style:{flex:1},description:(0,u.t)("public-dashboard.configuration.display-annotations-description","Present annotations on this dashboard"),children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.configuration.display-annotations-label",children:"Display annotations"})})]}),(0,n.jsxs)(p.B,{gap:1,alignItems:"flex-start",children:[(0,n.jsx)("div",{className:jt.timeRange,children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.configuration.time-range-label",children:"Time range"})}),(0,n.jsx)("div",{className:(0,i.cx)(jt.timeRange,jt.timeRangeValue),children:(0,n.jsx)(Ye.f,{value:ta.value})}),(0,n.jsx)(Ke.m,{placement:"right",content:(0,u.t)("public-dashboard.configuration.time-range-tooltip","The shared dashboard uses the default time range settings of the dashboard"),children:(0,n.jsx)(Ve.I,{name:"info-circle",size:"md"})})]})]})})}),Pn&&(0,n.jsx)(x.y,{})]})]})}const Qe=jt=>({timeRange:(0,i.css)({fontSize:jt.typography.bodySmall.fontSize,fontWeight:jt.typography.bodySmall.fontWeight}),timeRangeValue:(0,i.css)({color:jt.colors.text.secondary})});var He=e(87063),Je=e(88559);const de=g.Tp.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,ve=({onDelete:jt,onReshare:tn})=>(0,n.jsxs)(He.W,{children:[(0,n.jsx)(He.W.Item,{label:(0,u.t)("public-dashboard.email-sharing.resend-invite-label","Resend invite"),onClick:tn}),(0,n.jsx)(He.W.Item,{label:(0,u.t)("public-dashboard.email-sharing.revoke-access-label","Revoke access"),destructive:!0,onClick:jt})]}),me=({recipients:jt,dashboardUid:tn,publicDashboard:an})=>{const Pn=(0,v.of)(Ee),[Mn,{isLoading:Un}]=(0,X.$L)(),[aa,{isLoading:ia}]=(0,X.NA)(),ta=Un||ia,na=(ca,xa)=>{R.c.revokePublicDashboardEmailClicked(),Mn({recipientUid:ca,recipientEmail:xa,dashboardUid:tn,uid:an.uid})},fa=ca=>{R.c.resendPublicDashboardEmailClicked(),aa({recipientUid:ca,uid:an.uid})};return(0,n.jsx)("table",{"data-testid":de.EmailSharingList,className:Pn.table,children:(0,n.jsx)("tbody",{children:jt.map((ca,xa)=>(0,n.jsxs)("tr",{className:Pn.listItem,children:[(0,n.jsx)("td",{className:Pn.user,children:(0,n.jsxs)(p.B,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)("div",{className:Pn.icon,children:(0,n.jsx)(Ve.I,{name:"user"})}),(0,n.jsx)(_.E,{children:ca.recipient})]})}),(0,n.jsx)("td",{children:ta&&(0,n.jsx)(x.y,{})}),(0,n.jsx)("td",{children:(0,n.jsx)(Je.m,{overlay:(0,n.jsx)(ve,{onDelete:()=>na(ca.uid,ca.recipient),onReshare:()=>fa(ca.uid)}),children:(0,n.jsx)(Ce.K,{name:"ellipsis-v","aria-label":(0,u.t)("dashboard-scene.email-list.aria-label-emailmenu","Toggle email menu"),variant:"secondary",size:"lg"})})})]},ca.uid))})})},xe=({dashboard:jt})=>{const tn=(0,v.of)(Ee),{data:an}=X.Sm.endpoints?.getPublicDashboard.useQueryState(jt.state.uid);return(0,n.jsx)(Re.D,{label:(0,u.t)("public-dashboard.email-sharing.recipient-list-title","People with access"),description:(0,u.t)("public-dashboard.email-sharing.recipient-list-description","Only people you've directly invited can access this dashboard"),className:tn.listField,children:an?.recipients?.length?(0,n.jsx)("div",{className:tn.listContainer,children:(0,n.jsx)(me,{recipients:an.recipients,dashboardUid:jt.state.uid,publicDashboard:an})}):(0,n.jsx)(n.Fragment,{})})},Ee=jt=>({listField:(0,i.css)({marginBottom:0}),listContainer:(0,i.css)({maxHeight:"140px",overflowY:"auto"}),table:(0,i.css)({width:"100%"}),listItem:(0,i.css)({display:"flex",alignItems:"center",gap:jt.spacing(.5),padding:jt.spacing(.75,1),color:jt.colors.text.secondary}),user:(0,i.css)({flex:1}),icon:(0,i.css)({border:`${jt.spacing(.25)} solid ${jt.colors.text.secondary}`,padding:jt.spacing(.125,.5),borderRadius:jt.shape.radius.circle,color:jt.colors.text.secondary})}),Pe=g.Tp.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,Oe=()=>{const{dashboard:jt}=Me(),{data:tn,isError:an}=X.Sm.endpoints?.getPublicDashboard.useQueryState(jt.state.uid),[Pn,{isLoading:Mn}]=(0,X.NY)(),Un=ue.TP.hasPermission(fe.w.DashboardsPublicWrite),{register:aa,handleSubmit:ia,formState:{errors:ta,isValid:na},reset:fa}=(0,Te.mN)({defaultValues:{email:""},mode:"onSubmit"}),ca=async xa=>{R.c.publicDashboardEmailInviteClicked(),await Pn({recipient:xa.email,uid:tn.uid,dashboardUid:jt.state.uid}).unwrap(),fa({email:""})};return(0,n.jsxs)("div",{children:[(0,n.jsx)("form",{onSubmit:ia(ca),children:(0,n.jsx)($e.n,{disabled:!Un||an,children:(0,n.jsx)(Re.D,{label:(0,n.jsxs)(p.B,{gap:1,alignItems:"center",children:[(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.email-sharing.recipient-invitation-button",children:"Invite"}),(0,n.jsx)(Ke.m,{placement:"right",content:(0,u.t)("public-dashboard.email-sharing.recipient-invitation-tooltip","This dashboard contains sensitive data. By using this feature you will be sharing with external people."),children:(0,n.jsx)(Ve.I,{name:"info-circle",size:"sm"})})]}),description:(0,u.t)("public-dashboard.email-sharing.recipient-invitation-description","Invite someone by email"),error:ta.email?.message,invalid:!!ta.email?.message,children:(0,n.jsxs)(p.B,{direction:"row",children:[(0,n.jsx)(Se.p,{placeholder:(0,u.t)("public-dashboard.email-sharing.recipient-email-placeholder","Email"),autoCapitalize:"none",loading:Mn,...aa("email",{required:(0,u.t)("public-dashboard.email-sharing.recipient-required-email-text","Email is required"),pattern:{value:he._l,message:(0,u.t)("public-dashboard.email-sharing.recipient-invalid-email-text","Invalid email")}}),"data-testid":Pe.EmailSharingInput}),(0,n.jsx)(b.$n,{type:"submit",variant:"primary",disabled:Mn||!na,"data-testid":Pe.EmailSharingInviteButton,children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.email-sharing.recipient-invitation-button",children:"Invite"})})]})})})}),(0,n.jsx)(xe,{dashboard:jt}),(0,n.jsx)(re.c,{}),(0,n.jsx)(je,{})]})};var We=e(32635);const Fe="https://grafana.com/docs/grafana/next/dashboards/share-dashboards-panels/shared-dashboards/#share-externally-with-specific-people",Be=g.Tp.pages.ShareDashboardDrawer.ShareExternally;function Le(){return(0,n.jsx)(N.F,{title:"",severity:"info",bottomSpacing:0,"data-testid":Be.emailSharingAlert,children:(0,n.jsxs)(p.B,{justifyContent:"space-between",gap:2,alignItems:"center",children:[(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.email-sharing.alert-text",children:"Sharing dashboards by email is billed per user for the duration of the 30-day token, regardless of how many dashboards are shared. Billing stops after 30 days unless you renew the token."}),(0,n.jsx)(b.$n,{variant:"secondary",onClick:()=>window.open(Fe,"_blank"),type:"button",children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.email-sharing.learn-more-button",children:"Learn more"})})]})})}const Ge=g.Tp.pages.ShareDashboardDrawer.ShareExternally.Creation,Ze=({hasError:jt})=>{const{dashboard:tn,onDismiss:an}=Me(),Pn=(0,v.of)(qe),[Mn,{isLoading:Un,isError:aa}]=(0,X.U9)(),ia=ue.TP.hasPermission(fe.w.DashboardsPublicWrite),ta=!ia||Un||aa||jt,{handleSubmit:na,register:fa,formState:{isValid:ca}}=(0,Te.mN)({mode:"onChange"}),xa=()=>{R.c.generatePublicDashboardUrlClicked({share:he.Xo.EMAIL}),Mn({dashboard:tn,payload:{share:he.Xo.EMAIL,isEnabled:!0}})};return(0,n.jsxs)(n.Fragment,{children:[ia&&(0,n.jsx)(Le,{}),(0,n.jsx)("form",{onSubmit:na(xa),children:(0,n.jsxs)($e.n,{disabled:ta,children:[(0,n.jsx)("div",{className:Pn.checkbox,children:(0,n.jsx)(We.S,{...fa("billAcknowledgment",{required:!0}),label:(0,u.t)("public-dashboard.email-sharing.bill-ack","I understand that adding users requires payment.*")})}),(0,n.jsxs)(p.B,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)(b.$n,{type:"submit",disabled:!ca,"data-testid":Ge.EmailShare.createButton,children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.email-sharing.accept-button",children:"Accept"})}),(0,n.jsx)(b.$n,{variant:"secondary",onClick:an,"data-testid":Ge.EmailShare.cancelButton,children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.email-sharing.cancel-button",children:"Cancel"})}),Un&&(0,n.jsx)(x.y,{})]})]})})]})},qe=jt=>({checkbox:(0,i.css)({marginBottom:jt.spacing(2)})}),at=()=>{const{dashboard:jt}=Me(),{data:tn,isError:an}=X.Sm.endpoints?.getPublicDashboard.useQueryState(jt.state.uid);return(0,n.jsx)(n.Fragment,{children:tn?(0,n.jsx)(Oe,{}):(0,n.jsx)(Ze,{hasError:an})})},ht="https://grafana.com/docs/grafana/next/dashboards/share-dashboards-panels/shared-dashboards",Et=g.Tp.pages.ShareDashboardDrawer.ShareExternally,mt=()=>(0,n.jsx)(N.F,{title:"",severity:"info",bottomSpacing:0,"data-testid":Et.publicAlert,children:(0,n.jsxs)(p.B,{justifyContent:"space-between",gap:2,alignItems:"center",children:[(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.public-sharing.alert-text",children:"Sharing this dashboard externally makes it entirely accessible to anyone with the link."}),(0,n.jsx)(b.$n,{variant:"secondary",onClick:()=>window.open(ht,"_blank"),type:"button",children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.public-sharing.learn-more-button",children:"Learn more"})})]})}),Pt=g.Tp.pages.ShareDashboardDrawer.ShareExternally.Creation;function rt({hasError:jt}){const{dashboard:tn,onDismiss:an}=Me(),Pn=(0,v.of)(Kt),Mn=ue.TP.hasPermission(fe.w.DashboardsPublicWrite),{handleSubmit:Un,register:aa,formState:{isValid:ia}}=(0,Te.mN)({mode:"onChange"}),[ta,{isLoading:na,isError:fa}]=(0,X.U9)(),ca=()=>{R.c.generatePublicDashboardUrlClicked({share:he.Xo.PUBLIC}),ta({dashboard:tn,payload:{share:he.Xo.PUBLIC,isEnabled:!0}})},xa=!Mn||na||fa||jt;return(0,n.jsxs)(n.Fragment,{children:[Mn&&(0,n.jsx)(mt,{}),(0,n.jsx)("form",{onSubmit:Un(ca),children:(0,n.jsxs)($e.n,{disabled:xa,children:[(0,n.jsx)("div",{className:Pn.checkbox,children:(0,n.jsx)(We.S,{...aa("publicAcknowledgment",{required:!0}),label:(0,u.t)("public-dashboard.public-sharing.public-ack","I understand that this entire dashboard will be public.*"),"data-testid":Pt.willBePublicCheckbox})}),(0,n.jsxs)(p.B,{direction:"row",gap:1,alignItems:"center",children:[(0,n.jsx)(b.$n,{type:"submit",disabled:!ia,"data-testid":Pt.PublicShare.createButton,children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.public-sharing.accept-button",children:"Accept"})}),(0,n.jsx)(b.$n,{variant:"secondary",onClick:an,"data-testid":Pt.PublicShare.cancelButton,children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.public-sharing.cancel-button",children:"Cancel"})}),na&&(0,n.jsx)(x.y,{})]})]})})]})}const Kt=jt=>({checkbox:(0,i.css)({marginBottom:jt.spacing(2)})});function Gt(){const{dashboard:jt}=Me(),{data:tn,isError:an}=X.Sm.endpoints?.getPublicDashboard.useQueryState(jt.state.uid);return(0,n.jsx)(n.Fragment,{children:tn?(0,n.jsx)(je,{}):(0,n.jsx)(rt,{hasError:an})})}var en=e(37672),st=e(44173),$t=e(35195),xn=e(71748);function pn({publicDashboard:jt}){const{dashboard:tn}=Me(),an=ue.TP.hasPermission(fe.w.DashboardsPublicWrite),Pn=(0,xn.b)(tn),Mn=(tn.state.$variables?.state.variables.length??0)>0;return(0,n.jsxs)(n.Fragment,{children:[an&&Mn&&(0,n.jsx)(st.D,{showDescription:!1}),!an&&(0,n.jsx)($t.t,{mode:jt?"edit":"create"}),an&&!!Pn?.length&&(0,n.jsx)(en.s,{unsupportedDataSources:Pn.join(", ")}),jt?.share===he.Xo.EMAIL&&(0,he.AY)()&&(0,n.jsx)(Le,{}),jt?.share===he.Xo.PUBLIC&&(0,n.jsx)(mt,{})]})}var _n=e(30360),kn=e(18857);const Jn=()=>({label:(0,u.t)("public-dashboard.share-externally.public-share-type-option-label","Anyone with the link"),description:(0,u.t)("public-dashboard.share-externally.public-share-type-option-description","Anyone with the link can access dashboard"),value:he.Xo.PUBLIC,icon:"globe"}),pt=()=>({label:(0,u.t)("public-dashboard.share-externally.email-share-type-option-label","Only specific people"),description:(0,u.t)("public-dashboard.share-externally.email-share-type-option-description","Only people with the link can access dashboard"),value:he.Xo.EMAIL,icon:"users-alt"}),Rt=g.Tp.pages.ShareDashboardDrawer.ShareExternally;function Mt({setShareType:jt,options:tn,value:an}){const{dashboard:Pn}=Me(),Mn=(0,v.of)(Bt),{data:Un}=X.Sm.endpoints?.getPublicDashboard.useQueryState(Pn.state.uid),[aa,{isLoading:ia}]=(0,X.ft)(),ta=ue.TP.hasPermission(fe.w.DashboardsPublicWrite),na=Jn(),fa=ca=>{if(!Un)return;R.c.publicDashboardShareTypeChange({shareType:ca===he.Xo.EMAIL?"email":"public"});const xa={dashboard:Pn,payload:{...Un,share:ca}};aa(xa)};return(0,n.jsxs)("div",{children:[(0,n.jsxs)(p.B,{justifyContent:"space-between",children:[(0,n.jsx)(y.J,{description:an.description,children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.share-configuration.share-type-label",children:"Link access"})}),ia&&(0,n.jsx)(x.y,{})]}),(0,he.AY)()?(0,n.jsx)(kn.l6,{"data-testid":Rt.shareTypeSelect,options:tn,value:an,disabled:!ta,onChange:ca=>{jt(ca),fa(ca.value)},className:Mn.select}):(0,n.jsxs)(p.B,{gap:1,alignItems:"center",children:[(0,_n.Uo)(na.icon)&&(0,n.jsx)(Ve.I,{name:(0,_n.Uo)(na.icon)}),(0,n.jsx)(_.E,{children:na.label})]})]})}const Bt=()=>({select:(0,i.css)({flex:1})}),Nt=g.Tp.pages.ShareDashboardDrawer.ShareExternally,Yt=()=>(0,he.AY)()?[pt(),Jn()]:[Jn()];class Qt extends s.Bs{static{this.Component=En}getTabLabel(){return(0,u.t)("share-dashboard.menu.share-externally-title","Share externally")}}function En({model:jt}){const[tn,an]=(0,M.useState)(!1),Pn=(0,v.of)(mn),Mn=(0,c.YQ)(jt),{data:Un,isLoading:aa}=(0,X.Bs)(Mn.state.uid),[ia,{isLoading:ta}]=(0,X.bN)(),na=()=>{an(!0)},fa=async()=>{R.c.revokePublicDashboardClicked(),await ia({dashboard:Mn,uid:Un.uid,dashboardUid:Mn.state.uid}).unwrap(),an(!1)};return aa?(0,n.jsx)(le.a,{}):tn?(0,n.jsx)(_e,{title:(0,u.t)("public-dashboard.share-externally.revoke-access-button","Revoke access"),confirmButtonLabel:(0,u.t)("public-dashboard.share-externally.revoke-access-button","Revoke access"),onConfirm:fa,onDismiss:()=>an(!1),description:(0,u.t)("public-dashboard.share-externally.revoke-access-description","Are you sure you want to revoke this access? The dashboard can no longer be shared."),isActionLoading:ta}):(0,n.jsx)("div",{className:Pn.container,children:(0,n.jsx)(vn,{publicDashboard:Un,onRevokeClick:na})})}function vn({publicDashboard:jt,onRevokeClick:tn}){const an=Yt(),Pn=(0,M.useMemo)(()=>jt&&(0,he.AY)()?an.find(ta=>ta.value===jt?.share)??an[0]:an[0],[jt,an]),[Mn,Un]=(0,M.useState)(Pn),aa=(0,M.useMemo)(()=>Mn.value===he.Xo.EMAIL&&(0,he.AY)()?(0,n.jsx)(at,{}):(0,n.jsx)(Gt,{}),[Mn]);return(0,n.jsxs)(p.B,{direction:"column",gap:2,"data-testid":Nt.container,children:[(0,n.jsx)(pn,{publicDashboard:jt}),(0,n.jsx)(Mt,{setShareType:Un,value:Mn,options:an}),aa,jt&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(re.c,{spacing:0}),(0,n.jsx)(Sn,{publicDashboard:jt,onRevokeClick:tn})]})]})}function Sn({publicDashboard:jt,onRevokeClick:tn}){const{dashboard:an}=Me(),[Pn,{isLoading:Mn}]=(0,X.eq)(),Un=(0,v.of)(mn),aa=ue.TP.hasPermission(fe.w.DashboardsPublicWrite);function ia(){R.c.publicDashboardUrlCopied()}const ta=async()=>{R.c.publicDashboardPauseSharingClicked({paused:!jt.isEnabled}),Pn({dashboard:an,payload:{...jt,isEnabled:!jt.isEnabled}})};return(0,n.jsxs)(p.B,{alignItems:"center",direction:{xs:"column",sm:"row"},children:[(0,n.jsx)("div",{className:Un.actionsContainer,children:(0,n.jsxs)(p.B,{gap:1,flex:1,direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(D.b,{"data-testid":Nt.Configuration.copyUrlButton,variant:"primary",fill:"outline",icon:"link",getText:()=>(0,he.mL)(jt.accessToken),onClipboardCopy:ia,children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.share-externally.copy-link-button",children:"Copy external link"})}),(0,n.jsx)(b.$n,{icon:"trash-alt",variant:"destructive",fill:"outline",disabled:Mn||!aa,onClick:tn,"data-testid":Nt.Configuration.revokeAccessButton,children:(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.share-externally.revoke-access-button",children:"Revoke access"})}),(0,n.jsx)(b.$n,{icon:jt.isEnabled?"pause":"play",variant:"secondary",fill:"outline",tooltip:jt.isEnabled?(0,u.t)("public-dashboard.share-externally.pause-access-tooltip","Pausing will temporarily disable access to this dashboard for all users"):"",onClick:ta,disabled:Mn||!aa,"data-testid":Nt.Configuration.toggleAccessButton,children:jt.isEnabled?(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.share-externally.pause-access-button",children:"Pause access"}):(0,n.jsx)(u.x6,{i18nKey:"public-dashboard.share-externally.resume-access-button",children:"Resume access"})})]})}),Mn&&(0,n.jsx)(x.y,{})]})}const mn=jt=>({container:(0,i.css)({paddingBottom:jt.spacing(2)}),actionsContainer:(0,i.css)({width:"100%"})});var wn=e(29216);const Ln=g.Tp.pages.ShareDashboardDrawer.ShareInternally;function Zn({useLockedTime:jt,onToggleLockedTime:tn,useShortUrl:an,onUrlShorten:Pn,onChangeTheme:Mn,selectedTheme:Un,isLoading:aa}){return(0,n.jsxs)(p.B,{justifyContent:"space-between",children:[(0,n.jsxs)(p.B,{gap:2,direction:"column",children:[(0,n.jsxs)(p.B,{gap:1,direction:"column",children:[(0,n.jsxs)(p.B,{gap:1,alignItems:"start",children:[(0,n.jsx)(m.d,{label:(0,u.t)("link.share.time-range-label","Lock time range"),id:"share-current-time-range",value:jt,onChange:tn,"data-testid":Ln.lockTimeRangeSwitch}),(0,n.jsx)(y.J,{description:(0,u.t)("link.share.time-range-description","Change the current relative time range to an absolute time range"),id:"time-range-description",children:(0,n.jsx)(u.x6,{i18nKey:"link.share.time-range-label",children:"Lock time range"})})]}),(0,n.jsxs)(p.B,{gap:1,alignItems:"start",children:[(0,n.jsx)(m.d,{id:"share-short-url",value:an,label:(0,u.t)("link.share.short-url-label","Shorten link"),onChange:Pn,"data-testid":Ln.shortenUrlSwitch}),(0,n.jsx)(y.J,{children:(0,n.jsx)(u.x6,{i18nKey:"link.share.short-url-label",children:"Shorten link"})})]})]}),(0,n.jsx)(wn.w,{selectedTheme:Un,onChange:Mn})]}),aa&&(0,n.jsx)(x.y,{})]})}var da=e(8655),Pa=e(12434);const Xn=g.Tp.pages.ShareDashboardDrawer.ShareInternally;class Oa extends da.R{static{this.Component=ba}constructor(tn){const{useAbsoluteTimeRange:an,useShortUrl:Pn,theme:Mn}=(0,Pa.yk)();super({...tn,useLockedTime:an,useShortUrl:Pn,selectedTheme:Mn}),this.onToggleLockedTime=this.onToggleLockedTime.bind(this),this.onUrlShorten=this.onUrlShorten.bind(this),this.onThemeChange=this.onThemeChange.bind(this)}getTabLabel(){return(0,u.t)("share-dashboard.menu.share-internally-title","Share internally")}async onToggleLockedTime(){const tn=!this.state.useLockedTime;(0,Pa.F7)({useAbsoluteTimeRange:tn,useShortUrl:this.state.useShortUrl,theme:this.state.selectedTheme}),await super.onToggleLockedTime()}async onUrlShorten(){const tn=!this.state.useShortUrl;(0,Pa.F7)({useShortUrl:tn,useAbsoluteTimeRange:this.state.useLockedTime,theme:this.state.selectedTheme}),await super.onUrlShorten()}async onThemeChange(tn){(0,Pa.F7)({theme:tn,useShortUrl:this.state.useShortUrl,useAbsoluteTimeRange:this.state.useLockedTime}),await super.onThemeChange(tn)}}function ba({model:jt}){const tn=(0,v.of)(oa),{useLockedTime:an,useShortUrl:Pn,selectedTheme:Mn,isBuildUrlLoading:Un}=jt.useState();return(0,n.jsxs)("div",{className:Xn.container,children:[(0,n.jsx)(N.F,{severity:"info",title:(0,u.t)("link.share.config-alert-title","Link settings"),children:(0,n.jsx)(u.x6,{i18nKey:"link.share.config-alert-description",children:"Updating your settings will modify the default copy link to include these changes. Please note that these settings are saved within your current browser scope."})}),(0,n.jsx)("div",{className:tn.configDescription,children:(0,n.jsx)(_.E,{variant:"body",children:(0,n.jsx)(u.x6,{i18nKey:"link.share.config-description",children:"Create a personalized, direct link to share your dashboard within your organization, with the following customization settings:"})})}),(0,n.jsx)(Zn,{useLockedTime:an,onToggleLockedTime:jt.onToggleLockedTime,useShortUrl:Pn,onUrlShorten:jt.onUrlShorten,selectedTheme:Mn,onChangeTheme:jt.onThemeChange,isLoading:Un}),(0,n.jsx)(re.c,{spacing:1}),(0,n.jsx)(p.B,{gap:1,flex:1,direction:{xs:"column",sm:"row"},children:(0,n.jsx)(D.b,{icon:"link",variant:"primary",fill:"outline",disabled:Un,getText:jt.getShareUrl,onClipboardCopy:jt.onCopy,className:tn.copyButtonContainer,"data-testid":Xn.copyUrlButton,children:(0,n.jsx)(u.x6,{i18nKey:"link.share.copy-link-button",children:"Copy link"})})})]})}const oa=jt=>({configDescription:(0,i.css)({marginBottom:jt.spacing(2)}),copyButtonContainer:(0,i.css)({marginTop:jt.spacing(2)})});var Na=e(5805),ya=e(51155),Dt=e(77824);const wt="https://grafana.com/docs/grafana/next/dashboards/share-dashboards-panels/#share-a-snapshot",Zt="https://grafana.com/docs/grafana/next/dashboards/share-dashboards-panels/#panel-snapshot";function cn({name:jt,onNameChange:tn,onExpireChange:an,selectedExpireOption:Pn,panelRef:Mn,disableInputs:Un,children:aa}){const ia=(0,v.of)(nn);return(0,n.jsxs)("div",{className:ia.container,children:[(0,n.jsx)(N.F,{severity:"info",title:"",children:(0,n.jsxs)(p.B,{justifyContent:"space-between",gap:2,alignItems:"center",children:[(0,n.jsx)(_.E,{children:Mn?(0,n.jsx)(u.x6,{i18nKey:"snapshot.share-panel.info-alert",children:"A Grafana panel snapshot publicly shares a panel while removing sensitive data such as queries and panel links, leaving only visible metrics and series names. Anyone with the link can access the snapshot."}):(0,n.jsx)(u.x6,{i18nKey:"snapshot.share.info-alert",children:"A Grafana dashboard snapshot publicly shares a dashboard while removing sensitive data such as queries and panel links, leaving only visible metrics and series names. Anyone with the link can access the snapshot."})}),(0,n.jsx)(b.$n,{variant:"secondary",onClick:()=>window.open(Mn?Zt:wt,"_blank"),type:"button",children:(0,n.jsx)(u.x6,{i18nKey:"snapshot.share.learn-more-button",children:"Learn more"})})]})}),(0,n.jsxs)("fieldset",{disabled:Un,children:[(0,n.jsx)(Re.D,{label:(0,u.t)("snapshot.share.name-label","Snapshot name"),children:(0,n.jsx)(Se.p,{id:"snapshot-name-input",value:jt,onChange:ta=>tn(ta.currentTarget.value)})}),(0,n.jsx)(Re.D,{label:(0,u.t)("snapshot.share.expiration-label","Expires in"),children:(0,n.jsx)(Dt.z,{id:"expire-select-input",options:(0,ya.u)(),value:Pn?.value,onChange:an})})]}),(0,n.jsx)(re.c,{}),aa]})}const nn=jt=>({container:(0,i.css)({paddingBottom:jt.spacing(2)})}),ut=g.Tp.pages.ShareDashboardDrawer.ShareSnapshot;class Ut extends ya.l{static{this.Component=Ot}getTabLabel(){return(0,u.t)("share-dashboard.menu.share-snapshot-title","Share snapshot")}}function Ot({model:jt}){const[tn,an]=(0,M.useState)(!1),[Pn,Mn]=(0,M.useState)(!1),[Un,aa]=(0,M.useState)(1),{snapshotName:ia,snapshotSharingOptions:ta,selectedExpireOption:na,panelRef:fa,onDismiss:ca,dashboardRef:xa}=jt.useState(),[ns,ps]=(0,Na.default)(async(Ns=!1)=>{const $s=await jt.onSnapshotCreate(Ns);return aa(2),$s}),[Ya,Ka]=(0,Na.default)(async Ns=>{const $s=await jt.onSnapshotDelete(Ns);return aa(1),an(!1),Mn(!0),$s}),Sa=()=>{ca?.()},Es=()=>{jt.onSnasphotNameChange(xa.resolve().state.title),aa(1)},as=async()=>{await Ka(ns.value?.deleteUrl),Es()};return tn?(0,n.jsx)(_e,{title:(0,u.t)("snapshot.share.delete-title","Delete snapshot"),confirmButtonLabel:(0,u.t)("snapshot.share.delete-button","Delete snapshot"),onConfirm:as,onDismiss:()=>an(!1),description:(0,u.t)("snapshot.share.delete-description","Are you sure you want to delete this snapshot?"),isActionLoading:Ya.loading}):(0,n.jsx)("div",{"data-testid":ut.container,children:(0,n.jsxs)(n.Fragment,{children:[Un===1&&Pn&&(0,n.jsx)(N.F,{severity:"info",title:"",onRemove:()=>Mn(!1),children:(0,n.jsx)(u.x6,{i18nKey:"snapshot.share.deleted-alert",children:"Snapshot deleted. It could take an hour to be cleared from CDN caches."})}),(0,n.jsx)(cn,{name:ia??"",selectedExpireOption:na,onNameChange:jt.onSnasphotNameChange,onExpireChange:jt.onExpireChange,disableInputs:Un===2,panelRef:fa,children:(0,n.jsxs)(p.B,{justifyContent:"space-between",gap:{xs:2},direction:{xs:"column",xl:"row"},children:[Un===1?(0,n.jsx)(ct,{onCreateClick:ps,isLoading:ns.loading,onCancelClick:Sa,sharingOptions:ta}):Un===2&&ns.value&&(0,n.jsx)(gt,{url:ns.value.url,onDeleteClick:()=>an(!0),onNewSnapshotClick:Es}),(0,n.jsx)(W.Y,{icon:"external-link-alt",href:"/dashboard/snapshots",external:!0,children:(0,u.t)("snapshot.share.view-all-button","View all snapshots")})]})})]})})}const ct=({isLoading:jt,onCreateClick:tn,onCancelClick:an,sharingOptions:Pn})=>(0,n.jsxs)(p.B,{gap:1,flex:1,direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(b.$n,{variant:"primary",disabled:jt,onClick:()=>tn(),"data-testid":ut.publishSnapshot,children:(0,n.jsx)(u.x6,{i18nKey:"snapshot.share.local-button",children:"Publish snapshot"})}),Pn?.externalEnabled&&(0,n.jsx)(b.$n,{variant:"secondary",disabled:jt,onClick:()=>tn(!0),children:Pn?.externalSnapshotName}),(0,n.jsx)(b.$n,{variant:"secondary",fill:"outline",onClick:an,children:(0,n.jsx)(u.x6,{i18nKey:"snapshot.share.cancel-button",children:"Cancel"})}),jt&&(0,n.jsx)(x.y,{})]}),gt=({url:jt,onDeleteClick:tn,onNewSnapshotClick:an})=>{const Pn=J.TP.hasPermission(fe.w.SnapshotsDelete),Mn=Pn?"":(0,u.t)("snapshot.share.delete-permission-tooltip","You don't have permission to delete snapshots");return(0,n.jsxs)(p.B,{justifyContent:"flex-start",gap:1,direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(D.b,{icon:"link",variant:"primary",fill:"outline",getText:()=>jt,"data-testid":ut.copyUrlButton,children:(0,n.jsx)(u.x6,{i18nKey:"snapshot.share.copy-link-button",children:"Copy link"})}),(0,n.jsx)(b.$n,{icon:"trash-alt",variant:"destructive",fill:"outline",onClick:tn,disabled:!Pn,tooltip:Mn,children:(0,n.jsx)(u.x6,{i18nKey:"snapshot.share.delete-button",children:"Delete snapshot"})}),(0,n.jsx)(b.$n,{variant:"secondary",fill:"solid",onClick:an,children:(0,n.jsx)(u.x6,{i18nKey:"snapshot.share.new-snapshot-button",children:"New snapshot"})})]})};var Ct=e(89752),Wt=e(42656);function Ft({title:jt,imageUrl:tn,buildUrl:an,disabled:Pn,theme:Mn}){const Un=(0,v.of)(Vt),{handleSubmit:aa,register:ia,watch:ta,formState:{errors:na,isValid:fa}}=(0,Te.mN)({mode:"onChange",defaultValues:{width:1e3,height:500,scaleFactor:1}});(0,M.useEffect)(()=>{an({width:ta("width"),height:ta("height"),scale:ta("scaleFactor")})},[an,ta]);const[{loading:ca,value:xa,error:ns},ps]=(0,L.A)(async Es=>{const as=await(0,k.s)((0,ee.AI)().fetch({url:Es,responseType:"blob"}));return new Blob([as.data],{type:"image/png"})},[]),Ya=async Es=>{const{width:as,height:Ns,scaleFactor:$s}=Es;R.c.generatePanelImageClicked({width:as,height:Ns,scaleFactor:$s,theme:Mn,shareResource:"panel"}),await ps(tn)},Ka=()=>{R.c.downloadPanelImageClicked({shareResource:"panel"}),V()(xa,`${jt}.png`)},Sa=()=>{an({width:ta("width"),height:ta("height"),scale:ta("scaleFactor")})};return(0,n.jsx)("section",{"aria-labelledby":"panel-preview-heading",children:(0,n.jsxs)(p.B,{gap:2,direction:"column",children:[(0,n.jsx)(_.E,{element:"h4",id:"panel-preview-heading",children:(0,n.jsx)(u.x6,{i18nKey:"share-panel-image.preview.title",children:"Panel preview"})}),(0,n.jsx)("form",{onSubmit:aa(Ya),"aria-label":(0,u.t)("share-panel-image.form.label","Panel image settings"),children:(0,n.jsxs)($e.n,{disabled:!E.$.rendererAvailable,label:(0,n.jsxs)(p.B,{gap:1,alignItems:"center",children:[(0,n.jsx)(_.E,{element:"h5",children:(0,n.jsx)(u.x6,{i18nKey:"share-panel-image.settings.title",children:"Image settings"})}),(0,n.jsx)(Ke.m,{content:(0,u.t)("share-panel-image.settings.max-warning","Setting maximums are limited by the image renderer service"),children:(0,n.jsx)(Ve.I,{name:"info-circle",size:"sm"})})]}),children:[(0,n.jsxs)(p.B,{gap:1,justifyContent:"space-between",direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(Re.D,{label:(0,u.t)("share-panel-image.settings.width-label","Width"),className:Un.imageConfigurationField,required:!0,invalid:!!na.width,error:na.width?.message,children:(0,n.jsx)(Se.p,{...ia("width",{required:(0,u.t)("share-panel-image.settings.width-required","Width is required"),min:{value:1,message:(0,u.t)("share-panel-image.settings.width-min","Width must be equal or greater than 1")},valueAsNumber:!0,onChange:Sa}),placeholder:(0,u.t)("share-panel-image.settings.width-placeholder","1000"),type:"number",suffix:"px","aria-label":(0,u.t)("share-panel-image.settings.width-label","Width")})}),(0,n.jsx)(Re.D,{label:(0,u.t)("share-panel-image.settings.height-label","Height"),className:Un.imageConfigurationField,required:!0,invalid:!!na.height,error:na.height?.message,children:(0,n.jsx)(Se.p,{...ia("height",{required:(0,u.t)("share-panel-image.settings.height-required","Height is required"),min:{value:1,message:(0,u.t)("share-panel-image.settings.height-min","Height must be equal or greater than 1")},valueAsNumber:!0,onChange:Sa}),placeholder:(0,u.t)("share-panel-image.settings.height-placeholder","500"),type:"number",suffix:"px","aria-label":(0,u.t)("share-panel-image.settings.height-label","Height")})}),(0,n.jsx)(Re.D,{label:(0,u.t)("share-panel-image.settings.scale-factor-label","Scale factor"),className:Un.imageConfigurationField,required:!0,invalid:!!na.scaleFactor,error:na.scaleFactor?.message,children:(0,n.jsx)(Se.p,{...ia("scaleFactor",{required:(0,u.t)("share-panel-image.settings.scale-factor-required","Scale factor is required"),min:{value:1,message:(0,u.t)("share-panel-image.settings.scale-factor-min","Scale factor must be equal or greater than 1")},valueAsNumber:!0,onChange:Sa}),placeholder:(0,u.t)("share-panel-image.settings.scale-factor-placeholder","1"),type:"number","aria-label":(0,u.t)("share-panel-image.settings.scale-factor-label","Scale factor")})})]}),(0,n.jsxs)(p.B,{gap:1,direction:{xs:"column",sm:"row"},children:[(0,n.jsx)(b.$n,{icon:"gf-layout-simple",variant:"secondary",fill:"solid",type:"submit",disabled:Pn||ca||!fa,"aria-describedby":Pn?"generate-button-disabled-help":void 0,children:(0,n.jsx)(u.x6,{i18nKey:"link.share-panel.render-image",children:"Generate image"})}),(0,n.jsx)(b.$n,{onClick:Ka,icon:"download-alt",variant:"secondary",disabled:!xa||ca||Pn,"aria-describedby":!xa&&!ca?"download-button-disabled-help":void 0,children:(0,n.jsx)(u.x6,{i18nKey:"link.share-panel.download-image",children:"Download image"})})]}),Pn&&(0,n.jsx)(_.E,{variant:"bodySmall",color:"secondary",id:"generate-button-disabled-help",children:(0,n.jsx)(u.x6,{i18nKey:"share-panel-image.disabled-help",children:"Save the dashboard to enable image generation"})}),!xa&&!ca&&(0,n.jsx)(_.E,{variant:"bodySmall",color:"secondary",id:"download-button-disabled-help",children:(0,n.jsx)(u.x6,{i18nKey:"share-panel-image.download-disabled-help",children:"Generate an image first to enable download"})})]})}),(0,n.jsx)(Q,{imageBlob:xa||null,isLoading:ca,error:ns?{title:(0,u.t)("share-panel-image.error-title","Failed to generate image"),message:ns.message}:null,title:jt})]})})}const Vt=jt=>({imageConfigurationField:(0,i.css)({flex:1})});class Ht extends da.R{static{this.Component=dn}constructor(tn){super(tn)}getTabLabel(){return(0,u.t)("share-panel.drawer.share-link-title","Link settings")}}function dn({model:jt}){const tn=(0,v.of)(sn),{useLockedTime:an,useShortUrl:Pn,selectedTheme:Mn,isBuildUrlLoading:Un,imageUrl:aa,panelRef:ia}=jt.useState(),ta=ia?.resolve().state.title,fa=!!(0,c.YQ)(jt).state.uid;return(0,n.jsxs)("div",{children:[(0,n.jsx)(_.E,{variant:"body",children:(0,n.jsx)(u.x6,{i18nKey:"link.share-panel.config-description",children:"Create a personalized, direct link to share your panel within your organization, with the following customization settings:"})}),(0,n.jsxs)("div",{className:tn.configurationContainer,children:[(0,n.jsx)(Zn,{useLockedTime:an,onToggleLockedTime:jt.onToggleLockedTime,useShortUrl:Pn,onUrlShorten:jt.onUrlShorten,selectedTheme:Mn,onChangeTheme:jt.onThemeChange,isLoading:Un}),(0,n.jsx)(D.b,{icon:"link",variant:"primary",fill:"outline",disabled:Un,getText:jt.getShareUrl,onClipboardCopy:jt.onCopy,children:(0,n.jsx)(u.x6,{i18nKey:"link.share.copy-link-button",children:"Copy link"})})]}),(0,n.jsx)(re.c,{spacing:2}),(0,n.jsxs)(p.B,{gap:2,direction:"column",children:[!fa&&(0,n.jsx)(N.F,{severity:"info",title:(0,u.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0,children:(0,n.jsx)(u.x6,{i18nKey:"share-modal.link.save-dashboard",children:"To render a panel image, you must save the dashboard first."})}),!E.$.rendererAvailable&&(0,n.jsx)(N.F,{severity:"info",title:(0,u.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0,children:(0,n.jsxs)(u.x6,{i18nKey:"share-modal.link.render-instructions",children:["To render an image, you must install the"," ",(0,n.jsx)(W.Y,{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",external:!0,children:"Grafana image renderer plugin"}),". Please contact your Grafana administrator to install the plugin."]})}),(0,n.jsx)(Ft,{title:ta||"",buildUrl:jt.buildUrl,imageUrl:aa,disabled:!fa,theme:Mn})]})]})}const sn=jt=>({configurationContainer:(0,i.css)({marginTop:jt.spacing(2)})}),Rn=[];function rn(jt){Rn.push(jt)}class Yn extends s.Bs{constructor(tn){super({...tn}),this.onDismiss=()=>{this.state.activeShare?.onDismiss?this.state.activeShare.onDismiss():this.state.panelRef?(0,c.YQ)(this).closeModal():a.Ny.partial({shareView:null})},this.addActivationHandler(()=>this.buildActiveShare(tn.shareView))}static{this.Component=ea}buildActiveShare(tn){const{panelRef:an}=this.state,Pn=(0,c.YQ)(this),Mn=an?Fa(tn,this.onDismiss,Pn.getRef(),an):An(tn,this.onDismiss,Pn.getRef(),an);this.setState({activeShare:Mn})}}function ea({model:jt}){const{activeShare:tn}=jt.useState(),an=(0,c.YQ)(jt);return(0,n.jsx)(l._,{title:tn?.getTabLabel(),onClose:jt.onDismiss,size:"md",children:(0,n.jsx)(De.Provider,{value:{dashboard:an,onDismiss:jt.onDismiss},children:tn&&(0,n.jsx)(tn.Component,{model:tn})})})}function An(jt,tn,an,Pn){const Mn=Rn.find(Un=>Un.id===jt);if(Mn)return new Mn.shareOption({onDismiss:tn});switch(jt){case r.wr.link:return new Oa({onDismiss:tn});case r.wr.publicDashboard:return new Qt({onDismiss:tn});case r.wr.snapshot:return new Ut({dashboardRef:an,panelRef:Pn,onDismiss:tn});case r.wr.export:return new K({onDismiss:tn});case r.wr.image:return new te({onDismiss:tn});default:return new Oa({onDismiss:tn})}}function Fa(jt,tn,an,Pn){switch(jt){case r.wr.link:return new Ht({panelRef:Pn,onDismiss:tn});case r.wr.snapshot:return new Ut({dashboardRef:an,panelRef:Pn,onDismiss:tn});case r.wr.embed:return new Wt.c({panelRef:Pn,onDismiss:tn});case r.wr.libraryPanel:return new Ct.S({panelRef:Pn,onDismiss:tn});default:return new Ht({panelRef:Pn,onDismiss:tn})}}},91867:(ne,A,e)=>{"use strict";e.d(A,{_8:()=>U,xS:()=>K,$6:()=>S});var n=e(74848),a=e(22803),s=e(18828),l=e(43107),r=e(93225),c=e(96540),i=e(62717),o=e(80011),h=e(17548),f=e(33239),g=e(51898),u=e(92745),E=e(63142),v=e(93256),p=e(35621),m=e(15245),y=e(7895),d=e(45967),x=e(4364),b=e(34788),D=e(8431),C=e(84596),P=e(72296);function T(M){const{onClick:L,isSynced:N}=M,W=()=>{const R=N?"Unsync all views":"Sync all views to this time range";return(0,n.jsx)(n.Fragment,{children:R})};return(0,n.jsx)(d.m,{content:W,placement:"bottom",children:(0,n.jsx)(y.I,{icon:"link",variant:N?"active":"canvas","aria-label":N?(0,u.t)("grafana-ui.time-sync-button.aria-label-unsync","Unsync times"):(0,u.t)("grafana-ui.time-sync-button.aria-label-sync","Sync times"),onClick:L})})}function O(M){const{value:L,onChangeProp:N,isSyncedProp:W,initialIsSynced:R,timeSyncButtonProp:G}=M,w=(0,P.X)(R&&L?L:void 0),_=w?.synced,Q=w?.syncedValue,ae=w?.sync,q=!!(M.isSyncedProp===void 0&&w),k=(0,c.useCallback)(te=>{N(te),q&&_&&ae?.(te)},[N,q,ae,_]),ee=(0,C.A)(L),j=(0,C.A)(w?.syncedValue);(0,c.useEffect)(()=>{q&&_&&(L!==ee&&L!==Q?ae?.(L):Q&&Q!==j&&Q!==L&&N(Q))},[q,_,Q,ae,j,L,ee,N]);const J=q?w?.synced:W,Z=q?w?.syncPossible&&(0,n.jsx)(T,{isSynced:w?.synced,onClick:()=>w?.synced?w.unSync():w.sync(L)}):G;return{onChangeWithSync:k,isSynced:J,timeSyncButton:Z}}function S(M){const[L,N]=(0,c.useState)(!1),{value:W,onMoveBackward:R,onMoveForward:G,onZoom:w,onError:_,timeZone:Q,fiscalYearStartMonth:ae,history:q,onChangeTimeZone:k,onChangeFiscalYearStartMonth:ee,quickRanges:j,hideQuickRanges:J,widthOverride:Z,isOnCanvas:te,onToolbarTimePickerClick:se,weekStart:ie,initialIsSynced:ce}=M,{onChangeWithSync:re,isSynced:ue,timeSyncButton:X}=O({initialIsSynced:ce,value:W,onChangeProp:M.onChange,isSyncedProp:M.isSynced,timeSyncButtonProp:M.timeSyncButton}),le=Se=>{re(Se),N(!1)};(0,c.useEffect)(()=>{L&&se&&se()},[L,se]);const he=()=>{N(Se=>!Se)},fe=()=>{N(!1)},Ce=(0,c.createRef)(),Ae=(0,c.createRef)(),{overlayProps:_e,underlayProps:Xe}=(0,r.e)({onClose:fe,isDismissable:!0,isOpen:L,shouldCloseOnInteractOutside:Se=>{const Ye=(0,m.gF)();return!Ae.current?.contains(Se)&&!Ye.contains(Se)}},Ce),{dialogProps:De}=(0,s.s)({},Ce),Me=(0,E.of)(I),{modalBackdrop:Te}=(0,E.of)(p.o),$e=ue?"active":te?"canvas":"default",Ke=W?.to?.isBefore(W.from)?"exclamation-triangle":"clock-nine",Ve=F(W,Q,j);return(0,n.jsxs)(v.e,{className:Me.container,children:[(0,n.jsx)(y.I,{"aria-label":(0,u.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:$e,onClick:R,icon:"angle-left",type:"button",narrow:!0}),(0,n.jsx)(d.m,{ref:Ae,content:(0,n.jsx)(K,{timeRange:W,timeZone:Q}),placement:"bottom",interactive:!0,children:(0,n.jsx)(y.I,{"data-testid":g.Tp.components.TimePicker.openButton,"aria-label":(0,u.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:Ve}),"aria-controls":"TimePickerContent",onClick:he,icon:Ke,isOpen:L,type:"button",variant:$e,children:(0,n.jsx)(U,{...M})})}),L&&(0,n.jsxs)("div",{"data-testid":g.Tp.components.TimePicker.overlayContent,children:[(0,n.jsx)("div",{role:"presentation",className:(0,a.cx)(Te,Me.backdrop),...Xe}),(0,n.jsx)(l.n1,{contain:!0,autoFocus:!0,restoreFocus:!0,children:(0,n.jsx)("section",{className:Me.content,ref:Ce,..._e,...De,children:(0,n.jsx)(x.r,{timeZone:Q,fiscalYearStartMonth:ae,value:W,onChange:le,quickOptions:j||(0,D.O)(),history:q,showHistory:!0,widthOverride:Z,onChangeTimeZone:k,onChangeFiscalYearStartMonth:ee,hideQuickRanges:J,onError:_,weekStart:ie})})})]}),X,(0,n.jsx)(y.I,{"aria-label":(0,u.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:G,icon:"angle-right",narrow:!0,type:"button",variant:$e}),(0,n.jsx)(d.m,{content:B,placement:"bottom",children:(0,n.jsx)(y.I,{"aria-label":(0,u.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:w,icon:"search-minus",type:"button",variant:$e})})]})}S.displayName="TimeRangePicker";const B=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.x6,{i18nKey:"time-picker.range-picker.zoom-out-tooltip",children:["Time range zoom out ",(0,n.jsx)("br",{})," CTRL+Z"]})}),K=({timeRange:M,timeZone:L})=>{const N=(0,E.of)(V),W=Date.now(),R=L?(0,i.QZ)(L,W):void 0;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,o.LE)(M.from,{timeZone:L}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(u.x6,{i18nKey:"time-picker.range-picker.to",children:"to"})}),(0,o.LE)(M.to,{timeZone:L})]}),(0,n.jsxs)("div",{className:N.container,children:[(0,n.jsx)("span",{className:N.utc,children:(0,i.le)(L)}),(0,n.jsx)(b.E,{info:R})]})]})},U=(0,c.memo)(({hideText:M,value:L,timeZone:N,quickRanges:W})=>{const R=(0,E.of)(V);return M?null:(0,n.jsxs)("span",{className:R.container,"aria-live":"polite","aria-atomic":"true",children:[(0,n.jsx)("span",{children:F(L,N,W)}),(0,n.jsx)("span",{className:R.utc,children:h.describeTimeRangeAbbreviation(L,N)})]})});U.displayName="TimePickerButtonLabel";const F=(M,L,N)=>{const W={to:f.isMathString(M.raw.to)?M.raw.to:M.to,from:f.isMathString(M.raw.from)?M.raw.from:M.from};return h.describeTimeRange(W,L,N)},I=M=>({container:(0,a.css)({position:"relative",display:"flex",verticalAlign:"middle"}),backdrop:(0,a.css)({display:"none",[M.breakpoints.down("sm")]:{display:"block"}}),content:(0,a.css)({position:"absolute",right:0,top:"116%",zIndex:M.zIndex.dropdown,[M.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:M.zIndex.modal}})}),V=M=>({container:(0,a.css)({display:"flex",alignItems:"center",whiteSpace:"nowrap",columnGap:M.spacing(.5)}),utc:(0,a.css)({color:M.v1.palette.orange,fontSize:M.typography.size.sm,paddingLeft:"6px",lineHeight:"28px",verticalAlign:"bottom",fontWeight:M.typography.fontWeightMedium})})},91984:(ne,A,e)=>{"use strict";e.d(A,{m:()=>m});var n=e(2543),a=e.n(n),s=e(63895),l=e(8535),r=e(74268),c=e(86017),i=e(52161),o=e(77256),h=e(36200),f=e(5709),g=e(47938),u=e(55143);const E=30,v=30*1e3,p=["AlertingConfiguration","AlertmanagerConfiguration","AlertmanagerConnectionStatus","ContactPoint","ContactPointsStatus","Receiver"],m=f.H.injectEndpoints({endpoints:y=>({getAlertmanagerAlerts:y.query({query:({amSourceName:d,filter:x,showErrorAlert:b=!0})=>{const D=x?.matchers?.filter(K=>K.name&&K.value).map(K=>(0,s.b2)((0,c.MU)(K))),{silenced:C,inhibited:P,unprocessed:T,active:O}=x||{},S=Object.fromEntries(Object.entries({silenced:C,active:O,inhibited:P,unprocessed:T}).filter(([K,U])=>U!==void 0)),B={filter:D};return S&&Object.keys(S).forEach(K=>{B[K]=S[K]}),{url:`/api/alertmanager/${(0,i.w5)(d)}/api/v2/alerts`,params:B,showErrorAlert:b}},providesTags:["AlertmanagerAlerts"]}),getAlertmanagerAlertGroups:y.query({query:({amSourceName:d})=>({url:`/api/alertmanager/${(0,i.w5)(d)}/api/v2/alerts/groups`})}),grafanaNotifiers:y.query({query:()=>({url:"/api/alert-notifiers"}),transformResponse:d=>{const x=(b,D)=>({...b,secureFieldKey:b.secure&&!b.secureFieldKey?`${D}${b.propertyName}`:void 0,subformOptions:b.subformOptions?.map(C=>x(C,`${D}${b.propertyName}.`))});return d.map(b=>({...b,options:b.options.map(D=>x(D,""))}))}}),getGrafanaAlertingConfiguration:y.query({query:()=>({url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}),providesTags:["AlertingConfiguration"]}),getGrafanaAlertingConfigurationStatus:y.query({query:()=>({url:"/api/v1/ngalert"}),providesTags:["AlertingConfiguration"]}),getExternalAlertmanagers:y.query({query:()=>({url:"/api/v1/ngalert/alertmanagers"}),transformResponse:d=>d.data,providesTags:["AlertmanagerConnectionStatus"]}),updateGrafanaAlertingConfiguration:y.mutation({query:d=>({url:"/api/v1/ngalert/admin_config",method:"POST",data:d,showSuccessAlert:!1}),invalidatesTags:[...p]}),getAlertmanagerConfigurationHistory:y.query({query:()=>({url:`/api/alertmanager/${(0,i.w5)(i.hY)}/config/history`,params:{limit:E}}),providesTags:["AlertmanagerConfiguration"]}),resetAlertmanagerConfigurationToOldVersion:y.mutation({query:d=>({url:`/api/alertmanager/${(0,i.w5)(i.hY)}/config/history/${d.id}/_activate`,method:"POST"}),invalidatesTags:["AlertmanagerConfiguration"]}),getAlertmanagerConfiguration:y.query({queryFn:async d=>{const x=d===i.hY;if((0,i.AL)(d))return(0,h.$I)((0,g.VO)(d).then(S=>({data:{alertmanager_config:S.config,template_files:{},extra_config:void 0}})));const{data:D}=await(0,l.JD)(u.L.endpoints.discoverAmFeatures.initiate({amSourceName:d})),C={alertmanager_config:{},template_files:{},template_file_provenances:{},extra_config:void 0},P=D?.lazyConfigInit??!1,T=(0,r.xd)(g.WS,"unifiedalerting/fetchAmConfig",{dataSourceName:d,thunk:"unifiedalerting/fetchAmConfig"}),O=(0,o.i9)(()=>T(d),S=>!!(0,h.CZ)(S)?.includes("alertmanager storage object not found")&&!P,v).then(S=>x?S:(0,n.isEmpty)(S.alertmanager_config)&&(0,n.isEmpty)(S.template_files)?(0,g.VO)(d).then(K=>({alertmanager_config:K.config,template_files:{},template_file_provenances:S.template_file_provenances,last_applied:S.last_applied,id:S.id,extra_config:S.extra_config})):S).then(S=>S??C).then(S=>({data:S})).catch(S=>{if(P&&(0,h.CZ)(S)?.includes("alertmanager storage object not found"))return{data:C};throw S});return(0,h.$I)(O).catch(S=>({error:S,data:void 0}))},providesTags:["AlertmanagerConfiguration"]}),updateAlertmanagerConfiguration:y.mutation({query:({selectedAlertmanager:d,config:x})=>({url:`/api/alertmanager/${(0,i.w5)(d)}/config/api/v1/alerts`,method:"POST",data:x,showSuccessAlert:!1}),invalidatesTags:["AlertmanagerConfiguration","ContactPoint","ContactPointsStatus","Receiver"]}),getContactPointsStatus:y.query({query:()=>({url:`/api/alertmanager/${(0,i.w5)(i.hY)}/config/api/v1/receivers`}),transformResponse:d=>{const x=b=>b.startsWith("0001-01-01");return d.map(b=>({...b,integrations:b.integrations.map(D=>{const C=x(D.lastNotifyAttempt);return{...D,lastNotifyAttempt:C?"":D.lastNotifyAttempt,lastNotifyAttemptDuration:C?"":D.lastNotifyAttemptDuration}})}))},providesTags:["ContactPointsStatus"]})})})},92100:(ne,A,e)=>{"use strict";e.d(A,{$:()=>f});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(30703),c=e(45861),i=e(18857),o=e(63142),h=e(52193);const f=({onChange:u,maxMenuHeight:E})=>{const v=(0,s.useMemo)(h.A4,[]),p=(0,s.useMemo)(()=>v.map(D=>({label:D.name,imgUrl:D.info.logos.small,value:D})).sort((D,C)=>D.label?.localeCompare(C.label)),[v]),[m,y]=(0,s.useState)([]),d=(0,s.useCallback)(D=>{const C=D.filter(P=>P.value).map(P=>P.value);u(C),y(D)},[u]),x=(0,o.of)(g),b={defaultOptions:!0,getOptionLabel:D=>D.label,getOptionValue:D=>D.value,noOptionsMessage:(0,l.t)("panel-type-filter.select-no-options","No panel types found"),placeholder:(0,l.t)("panel-type-filter.select-placeholder","Filter by type"),maxMenuHeight:E,options:p,value:m,onChange:d};return(0,n.jsxs)("div",{className:x.container,children:[m.length>0&&(0,n.jsx)(c.$n,{size:"xs",icon:"trash-alt",fill:"text",className:x.clear,onClick:()=>d([]),children:(0,n.jsx)(l.x6,{i18nKey:"panel-type-filter.clear-button",children:"Clear types"})}),(0,n.jsx)(i.KF,{...b,prefix:(0,n.jsx)(r.I,{name:"filter"}),"aria-label":(0,l.t)("panel-type-filter.select-aria-label","Panel type filter")})]})};function g(u){return{container:(0,a.css)({label:"container",position:"relative",minWidth:"180px",flexGrow:1}),clear:(0,a.css)({label:"clear",fontSize:u.spacing(1.5),position:"absolute",top:u.spacing(-4.5),right:0})}}},92125:(ne,A,e)=>{"use strict";e.d(A,{s:()=>f});var n=e(74848),a=e(22803),s=e(2543),l=e.n(s),r=e(41654),c=e(48542),i=e(63142),o=e(63895),h=e(38055);const f=({matchers:E,formatter:v="default"})=>{const p=(0,i.of)(u),m=5,y=(0,s.take)(E,m),d=(0,s.takeRight)(E,E.length-m),x=d.length>0;return(0,n.jsx)("span",{"data-testid":"label-matchers",children:(0,n.jsxs)(r.B,{direction:"row",gap:1,alignItems:"center",wrap:"wrap",children:[y.map(b=>(0,n.jsx)(g,{matcher:b,formatter:v},(0,s.uniqueId)())),x&&(0,n.jsx)(h.B,{arrow:!0,placement:"top",content:(0,n.jsx)(n.Fragment,{children:d.map(b=>(0,n.jsx)(g,{matcher:b},(0,s.uniqueId)()))}),children:(0,n.jsx)("span",{children:(0,n.jsx)("div",{className:p.metadata,children:`and ${d.length} more`})})})]})})},g=({matcher:E,formatter:v="default"})=>{const p=(0,i.of)(u);return(0,n.jsx)("div",{className:p.matcher(E[0]).wrapper,children:(0,n.jsx)(r.B,{direction:"row",gap:0,alignItems:"baseline",children:o.t8[v](E)})})},u=E=>({matcher:v=>{const{color:p,borderColor:m}=(0,c.MC)(v);return{wrapper:(0,a.css)({color:"#fff",background:p,padding:`${E.spacing(.33)} ${E.spacing(.66)}`,fontSize:E.typography.bodySmall.fontSize,border:`solid 1px ${m}`,borderRadius:E.shape.borderRadius(2),whiteSpace:"pre"})}},metadata:(0,a.css)({color:E.colors.text.secondary,fontSize:E.typography.bodySmall.fontSize,fontWeight:E.typography.bodySmall.fontWeight})})},92132:(ne,A,e)=>{"use strict";e.d(A,{t:()=>r});var n=e(96540),a=e(94701);const s=(c,i)=>(c%i+i)%i,l=-1,r=({localRef:c,isMenuOpen:i,close:o,onOpen:h,onClose:f,onKeyDown:g})=>{const[u,E]=(0,n.useState)(l);return(0,n.useEffect)(()=>{i&&E(0)},[i]),(0,n.useEffect)(()=>{const p=c?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');p?.[u]?.focus(),p?.forEach((m,y)=>{m.tabIndex=y===u?0:-1})},[c,u]),(0,a.A)(()=>{h?.(E)}),[p=>{const m=c?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),y=m?.length??0;switch(p.key){case"ArrowUp":p.preventDefault(),p.stopPropagation(),E(s(u-1,y));break;case"ArrowDown":p.preventDefault(),p.stopPropagation(),E(s(u+1,y));break;case"ArrowLeft":p.preventDefault(),p.stopPropagation(),E(l),o?.();break;case"Home":p.preventDefault(),p.stopPropagation(),E(0);break;case"End":p.preventDefault(),p.stopPropagation(),E(y-1);break;case"Enter":p.preventDefault(),p.stopPropagation(),m?.[u]?.click();break;case"Escape":f?.();break;case"Tab":p.preventDefault(),f?.();break;default:break}g?.(p)}]}},92138:(ne,A,e)=>{"use strict";e.d(A,{I:()=>g});var n=e(63704),a=e(5556);let s={appSubUrl:""},l,r;const c=u=>{try{return new URL(u)}catch{return}},i=u=>{const E=c(u);if(E&&E.origin!==window.location.origin)return u;const v=s.appSubUrl??"",p=v.endsWith("/")?1:0,m=u.startsWith("http");let y=v;return(!u.startsWith("/")||m)&&(y=`${window.location.origin}${v}`),u.length>0&&(u.indexOf(y+"/")===0||u===y)?u.slice(y.length-p):u},o=u=>u.startsWith("/")?`${s.appSubUrl}${i(u)}`:u,g={initialize:u=>{s=u.config,l=u.getTimeRangeForUrl,r=u.getVariablesUrlParams},stripBaseFromUrl:i,assureBaseUrl:o,updateSearchParams:(u,E)=>{const v=new URLSearchParams(E);try{const p=new URL(u);return v.forEach((m,y)=>p.searchParams.set(y,m)),p.href}catch{const p=new URLSearchParams(u);return v.forEach((m,y)=>{p.set(y,m)}),"?"+p.toString()}},getTimeRangeUrlParams:()=>l?a.kM.toUrlParams(l()):null,getVariablesUrlParams:u=>{if(!r)return null;const E=r(u);return a.kM.toUrlParams(E)},getUrlForPartial:(u,E)=>{const v=a.kM.parseKeyValue(u.search.startsWith("?")?u.search.substring(1):u.search);for(const p in E)E[p]===null||E[p]===void 0?delete v[p]:v[p]=E[p];return o(a.kM.renderUrl(u.pathname,v))},processUrl:u=>s.disableSanitizeHtml?u:n.sQ.sanitizeUrl(u)}},92243:(ne,A,e)=>{"use strict";e.r(A),e.d(A,{CopyPanelEvent:()=>o.ah,DataSourcePicker:()=>L.s,DataSourceWithBackend:()=>B.iy,EchoEventType:()=>l.on,EmbeddedDashboard:()=>_.f,FakeEchoSrv:()=>l.c_,FolderPicker:()=>re.d,GrafanaBootConfig:()=>D.p,HealthCheckError:()=>B.b1,HealthStatus:()=>B.VQ,HistoryWrapper:()=>i.K9,LocationServiceProvider:()=>i._K,MetaAnalyticsEventName:()=>C.n_,PanelDataErrorView:()=>F.a,PanelRenderer:()=>U.m,PluginPage:()=>M.V,QueryEditorWithMigration:()=>se,RefreshEvent:()=>o._,RuntimeDataSource:()=>x,ScopesContext:()=>b.j,StreamingFrameAction:()=>c.Kh,ThemeChangedEvent:()=>o.E8,TimeRangeUpdatedEvent:()=>o.sR,config:()=>D.$,createDataSourcePluginEventProperties:()=>N.y,createMonitoringLogger:()=>S.DW,createPluginEventProperties:()=>N.L,createQueryRunner:()=>V.d,featureEnabled:()=>O.a,frameToMetricFindValue:()=>K.$h,getAppEvents:()=>o.J7,getBackendSrv:()=>n.AI,getCorrelationsService:()=>ue.r,getDataSourceSrv:()=>a.l,getEchoSrv:()=>l.x$,getGrafanaLiveSrv:()=>c.oF,getLimitedComponentsToRender:()=>p.CP,getLocationSrv:()=>s.X,getObservablePluginComponents:()=>v.z,getObservablePluginLinks:()=>E.m,getPluginImportUtils:()=>P.o,getRunRequest:()=>V.XJ,getTemplateSrv:()=>r.w,hasAllPermissions:()=>k,hasAnyPermission:()=>ee,hasPermission:()=>ae,hasPermissionInMetadata:()=>q,isExperimentViewEvent:()=>C.p6,isExpressionReference:()=>B.s9,isFetchError:()=>n.NF,isInteractionEvent:()=>C.fX,isMigrationHandler:()=>te.LZ,isPageviewEvent:()=>C.nB,isPluginExtensionComponent:()=>p.aR,isPluginExtensionLink:()=>p.DG,loadPluginCss:()=>P.PL,locationSearchToObject:()=>i.SE,locationService:()=>i.Ny,logDebug:()=>S.MD,logError:()=>S.vV,logInfo:()=>S.fH,logMeasurement:()=>S.l$,logWarning:()=>S.FF,migrateQuery:()=>te.aX,migrateRequest:()=>te.xt,navigationLogger:()=>i.Lc,registerEchoBackend:()=>l.pl,renderLimitedComponents:()=>p.RC,reportExperimentView:()=>T.Xp,reportInteraction:()=>T.rR,reportMetaAnalytics:()=>T.G$,reportPageview:()=>T.Jy,setAppEvents:()=>o.H8,setBackendSrv:()=>n.u5,setChromeHeaderHeightHook:()=>w._,setCorrelationsService:()=>ue.l,setCurrentUser:()=>m.l,setDataSourceSrv:()=>a.h,setEchoSrv:()=>l.H2,setEmbeddedDashboard:()=>_.p,setFolderPicker:()=>re.N,setGrafanaLiveSrv:()=>c.S8,setLocationService:()=>i.vG,setLocationSrv:()=>s.T,setMegaMenuOpenHook:()=>G.$,setPluginComponentHook:()=>h.A,setPluginComponentsHook:()=>f.R,setPluginFunctionsHook:()=>u.U,setPluginImportUtils:()=>P.se,setPluginLinksHook:()=>g.q,setQueryRunnerFactory:()=>V.HC,setReturnToPreviousHook:()=>R._,setRunRequest:()=>V.pC,setTemplateSrv:()=>r.d,toDataQueryError:()=>I.u,toDataQueryResponse:()=>K.bE,useChromeHeaderHeight:()=>w.k,useFavoriteDatasources:()=>ce.S,useLocationService:()=>i.at,useMegaMenuOpen:()=>G.x,usePluginComponent:()=>h.S,usePluginComponents:()=>f.f,usePluginFunctions:()=>u.W,usePluginInteractionReporter:()=>W.G,usePluginLinks:()=>g.U,usePluginUserStorage:()=>ie.D,useReturnToPrevious:()=>R.i,useScopes:()=>b.b});var n=e(68143),a=e(78282),s=e(48072),l=e(78646),r=e(2863),c=e(33184),i=e(36490),o=e(75234),h=e(33005),f=e(33604),g=e(46907),u=e(33707),E=e(58873),v=e(2874),p=e(22099),m=e(6201),y=e(94644),d=e(11594);class x extends y.mA{constructor(le,he){const fe={name:"RuntimeDataSource-"+le,uid:he,type:le,id:1,readOnly:!0,jsonData:{},access:"direct",meta:{id:le,name:"RuntimeDataSource-"+le,type:d.QE.datasource,info:{author:{name:""},description:"",links:[],logos:{large:"",small:""},screenshots:[],updated:"",version:""},module:"",baseUrl:""}};super(fe),this.instanceSettings=fe}testDatasource(){return Promise.resolve({status:"success",message:""})}}var b=e(69896),D=e(43173),C=e(33749),P=e(39698),T=e(27489),O=e(62061),S=e(25992),B=e(36580),K=e(38866),U=e(60311),F=e(14477),I=e(97534),V=e(83734),M=e(88806),L=e(80839),N=e(61190),W=e(77010),R=e(41071),G=e(45012),w=e(92293),_=e(43122),Q=e(7918);const ae=X=>(0,Q.ZU)(X,(0,m.H)()),q=(X,le)=>(0,Q.T6)(X,le),k=X=>(0,Q.Fj)(X,(0,m.H)()),ee=X=>(0,Q.jW)(X,(0,m.H)());var j=e(74848),J=e(96540),Z=e(70255),te=e(38353);function se(X){return he=>{const[fe,Ce]=(0,J.useState)(!1),[Ae,_e]=(0,J.useState)(he.query);return(0,J.useEffect)(()=>{he.query&&(0,te.LZ)(he.datasource)?(0,te.aX)(he.datasource,he.query).then(Xe=>{he.onChange(Xe),_e(Xe),Ce(!0)}):Ce(!0)},[]),(0,J.useEffect)(()=>{_e(he.query)},[he.query]),fe?(0,j.jsx)(X,{...he,query:Ae}):(0,j.jsx)(Z.A,{containerTestId:"react-loading-skeleton-testid",height:75})}}var ie=e(55315),ce=e(77870),re=e(47700),ue=e(25076)},92270:(ne,A,e)=>{"use strict";e.d(A,{EE:()=>f,T0:()=>h,nf:()=>o,yq:()=>i});var n=e(74848),a=e(22803),s=e(54092),l=e(33604),r=e(63142),c=e(58449);const i=300,o=100,h=Math.floor(window.innerWidth*(2/3));function f(){const u=g((0,r.$j)()),{dockedComponentId:E,props:v={}}=(0,c.sA)(),{components:p,isLoading:m}=(0,l.f)({extensionPointId:s.SM.ExtensionSidebar});if(m||!E)return null;const y=(0,c.rS)(E);if(!y)return null;const d=p.find(x=>x.meta.pluginId===y.pluginId&&x.meta.title===y.componentTitle);return d?(0,n.jsx)("div",{className:u.sidebarWrapper,children:(0,n.jsx)("div",{className:u.content,children:(0,n.jsx)(d,{...v})})}):null}const g=u=>({sidebarWrapper:(0,a.css)({backgroundColor:u.colors.background.primary,borderLeft:`1px solid ${u.colors.border.weak}`,display:"flex",flexDirection:"column",gap:u.spacing(1),padding:u.spacing(1),width:"100%",height:"100%",overflow:"auto"}),content:(0,a.css)({flex:1,minHeight:0})})},92275:()=>{(function(ne){"use strict";var A={series:{fillBelowTo:null}};function e(n){function a(r,c){var i;for(i=0;i<c.length;++i)if(c[i].id===r.fillBelowTo)return c[i];return null}function s(r,c,i,o,h,f,g,u){var E,v,p,m,y,d;return E=i-r,v=o-c,p=g-h,m=u-f,y=(-v*(r-h)+E*(c-f))/(-p*v+E*m),d=(p*(c-f)-m*(r-h))/(-p*v+E*m),y>=0&&y<=1&&d>=0&&d<=1?[r+d*E,c+d*v]:null}function l(r,c,i){if(i.fillBelowTo===null)return;var o,h,f,g,u,E,v;function p(C,P){c.beginPath(),c.moveTo(i.xaxis.p2c(C)+E.left,i.yaxis.p2c(P)+E.top)}function m(){c.closePath(),c.fill()}function y(){if(f.length/h!==u.length/g)return console.error("Refusing to graph inconsistent number of points"),!1;var C;for(C=0;C<f.length/h;C++)if(f[C*h]!==null&&u[C*g]!==null&&f[C*h]!==u[C*g])return console.error("Refusing to graph points without matching value"),!1;return!0}function d(C,P){console.assert(P>C,"expects the end index to be greater than the start index");var T=C===0||f[C-1]===null||u[C-1]===null,O=!1,S,B;for(S=C;S<P;S++)if(f[S*h+1]===null||u[S*h+1]===null)O=!1,T=!0;else if(f[S*h+1]===u[S*g+1])O=!0,T=!1;else if(f[S*h+1]>u[S*g+1]){T?p(f[S*h],f[S*h+1]):O?p(f[(S-1)*h],f[(S-1)*h+1]):(B=x(S),p(B[0],B[1])),D(S,P);return}else T=!1,O=!1}function x(C){console.assert(C>0,"expects the second point in the series line segment");var P,T;for(P=1;P<u.length/g;P++)if(T=s(f[(C-1)*h],f[(C-1)*h+1],f[C*h],f[C*h+1],u[(P-1)*g],u[(P-1)*g+1],u[P*g],u[P*g+1]),T!==null)return T;console.error("intersectionPoint() should only be called when an intersection happens")}function b(C,P){console.assert(C>=P,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var T;for(T=C;T>=P;T--)c.lineTo(o.xaxis.p2c(u[T*g])+E.left,o.yaxis.p2c(u[T*g+1])+E.top);m()}function D(C,P){console.assert(C<=P,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var T,O;for(T=C;T<P;T++)if(f[T*h+1]===null&&T>C){b(T-1,C),d(T,P);return}else if(f[T*h+1]===u[T*g+1]){b(T,C),d(T,P);return}else if(f[T*h+1]<u[T*g+1]){O=x(T),c.lineTo(i.xaxis.p2c(O[0])+E.left,i.yaxis.p2c(O[1])+E.top),b(T,C),d(T,P);return}else c.lineTo(i.xaxis.p2c(f[T*h])+E.left,i.yaxis.p2c(f[T*h+1])+E.top);b(P,C)}o=a(i,r.getData()),o&&(h=i.datapoints.pointsize,f=i.datapoints.points,g=o.datapoints.pointsize,u=o.datapoints.points,E=r.getPlotOffset(),y()&&(v=ne.color.parse(i.color),v.a=.4,v.normalize(),c.fillStyle=v.toString(),d(0,f.length/h)))}n.hooks.drawSeries.push(l)}ne.plot.plugins.push({init:e,options:A,name:"fillbelow",version:"0.1.0"})})(jQuery)},92293:(ne,A,e)=>{"use strict";e.d(A,{_:()=>a,k:()=>s});let n;const a=l=>{n=l},s=()=>(n||console.error("useChromeHeaderHeight hook not found"),n?.())},92367:(ne,A,e)=>{"use strict";e.d(A,{G:()=>a,z:()=>s});var n=e(43173);function a(l,r,c={skipSubPath:!1}){const o=new URLSearchParams(r).toString();return`${c.skipSubPath?"":n.$.appSubUrl}${l}${o?`?${o}`:""}`}function s(l,r){const i=new URLSearchParams(r).toString();try{return`${new URL(n.$.appSubUrl+l,n.$.appUrl).href}${i?`?${i}`:""}`}catch{return a(l,r)}}},92391:(ne,A,e)=>{"use strict";e.d(A,{Kk:()=>u,PY:()=>E,TV:()=>h,d4:()=>g,oZ:()=>f});var n=e(78830),a=e(11594),s=e(65642),l=e(41097),r=e(29090),c=e(63827);const i={},o={};function h(p){const m=i[p];if(m)return m;const y=g(p);if(!y)throw new Error(`Plugin ${p} not found`);return i[p]=v(y),p!==y.type&&(i[y.type]=i[p]),i[p]}function f(p){return!!g(p)}function g(p){const m=s.Ay.panels[p];if(!m){for(const y of Object.values(s.Ay.panels))if(y.aliasIDs?.includes(p))return y}return m}function u(p){return v(p)}function E(p){return s.Ay.featureToggles.enablePluginImporter?c.y.getPanel(p):o[p]}function v(p){if(s.Ay.featureToggles.enablePluginImporter)return c.y.importPanel(p);(0,n.M)(p);const m=p.loadingStrategy??a.xf.fetch;return(0,r.j)({path:p.module,version:p.info?.version,loadingStrategy:m,pluginId:p.id,moduleHash:p.moduleHash,translations:p.translations}).then(y=>{if(y.plugin)return y.plugin;throw(0,n.M)(y),new Error("missing export: plugin")}).then(y=>(y.meta=p,o[p.id]=y,y)).catch(y=>(console.warn("Error loading panel plugin: "+p.id,y),(0,l.W)(p,y)))}},92446:(ne,A,e)=>{"use strict";e.d(A,{i:()=>r});var n=e(2543),a=e.n(n),s=e(25229),l=e(95004);const r=(d,x=!1)=>{const b=d.values;switch(d.type){case l.PU.number:return p(b,x);case l.PU.string:return m(b,x);case l.PU.boolean:return v(b,x);case l.PU.time:return typeof d.values[0]=="number"?u(b,x,d.nanos):E(b,x,d.nanos);default:return y(x)}},c=(d,x)=>{if(!d||!x)return g(d,x);if((0,n.isNumber)(d)&&(0,n.isNumber)(x))return i(d,x);if((0,s.u8)(d)&&(0,s.u8)(x)){if((0,s.KQ)(d).isBefore(x))return-1;if((0,s.KQ)(x).isBefore(d))return 1}return 0},i=(d,x)=>d-x,o=new Intl.Collator("en",{sensitivity:"base"}).compare,h=(d,x)=>!d||!x?g(d,x):o(String(d),String(x)),f=(d,x)=>g(d,x),g=(d,x)=>!d&&x?1:d&&!x?-1:0,u=(d,x,b)=>{let D=x?-1:1;return b!==void 0?(C,P)=>D*(d[C]-d[P]||b[C]-b[P]):(C,P)=>D*(d[C]-d[P])},E=(d,x,b)=>{const D=x?-1:1;return b!==void 0?(C,P)=>D*(c(d[C],d[P])||b[C]-b[P]):(C,P)=>D*c(d[C],d[P])},v=(d,x)=>(b,D)=>{const C=d[b],P=d[D];return x?f(P,C):f(C,P)},p=(d,x)=>(b,D)=>{const C=d[b],P=d[D];return x?i(P,C):i(C,P)},m=(d,x)=>(b,D)=>{const C=d[b],P=d[D];return x?h(P,C):h(C,P)},y=d=>(x,b)=>d?i(b,x):i(x,b)},92505:(ne,A,e)=>{"use strict";e.d(A,{X:()=>C});var n=e(74848),a=e(22803),s=e(46942),l=e.n(s),r=e(2543),c=e.n(r),i=e(96540),o=e(75226),h=e(29317),f=e(51898),g=e(16123),u=e(54024),E=e(52513),v=e(21266),p=e(59490),m=e(91272),y=e(93427),d=e(63142),x=e(35484),b=e(35458);class D extends i.PureComponent{constructor(O){super(O),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(F,I)=>{const V=F.document!==this.state.value.document,M=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(F),this.setState({value:F},()=>{if(V){const L=o.default.serialize(M)!==o.default.serialize(F);L&&I&&this.runOnChangeAndRunQuery(),L&&!I&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:F}=this.props,I=o.default.serialize(this.state.value);F&&F(this.cleanText(I))},this.runOnRunQuery=()=>{const{onRunQuery:F}=this.props;F&&(F(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(F,I,V)=>{const{onBlur:M}=this.props;if(M)M();else{const L=this.lastExecutedValue?o.default.serialize(this.lastExecutedValue):"",N=o.default.serialize(I.value);L!==N&&this.runOnChangeAndRunQuery()}return V()},this.runOnChangeDebounced=(0,r.debounce)(this.runOnChange,500);const{onTypeahead:S,cleanText:B,portalOrigin:K,onWillApplySuggestion:U}=O;this.plugins=[(0,y.Pz)({onTypeahead:S,cleanText:B,portalOrigin:K,onWillApplySuggestion:U}),(0,p.U)({handler:this.runOnChangeAndRunQuery}),(0,v.O)(),(0,g.v)(),(0,m.l)(),(0,E.T)(),(0,u.s)(),...O.additionalPlugins||[]].filter(F=>F),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,b.mO)(O.query||"",O.syntax)}}static{this.defaultProps={onBlur:()=>{}}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(O,S){const{query:B,syntax:K,syntaxLoaded:U}=this.props;if(!O.syntaxLoaded&&U&&this.editor){const I=this.editor.insertText(" ").deleteBackward(1);this.onChange(I.value,!0)}const{value:F}=this.state;B!==O.query&&B!==o.default.serialize(F)&&this.setState({value:(0,b.mO)(B||"",K)})}cleanText(O){return O.replace(/[\r]/g,"")}render(){const{disabled:O,theme:S}=this.props,B=l()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":O}),K=P(S);return(0,n.jsx)("div",{className:(0,a.cx)(B,K.wrapper),children:(0,n.jsx)("div",{className:"slate-query-field","data-testid":f.Tp.components.QueryField.container,children:(0,n.jsx)(h.Editor,{ref:U=>this.editor=U,schema:b.yx,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:U=>{this.onChange(U.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})})})}}const C=(0,d.cV)(D),P=T=>{const O=(0,x.getFocusStyles)(T);return{wrapper:(0,a.css)({"&:focus-within":O})}}},92511:(ne,A,e)=>{"use strict";e.d(A,{$:()=>g,FK:()=>v,G9:()=>p,H0:()=>f,SD:()=>h,Zr:()=>u});var n=e(2543),a=e.n(n),s=e(62467),l=e(43173),r=e(97534),c=e(8535),i=e(64762),o=e(12066);function h(y){return y.cancelled?(0,s.of)([]):(E("AnnotationQueryRunner failed",y),(0,s.of)([]))}function f(y){return E("Failed to retrieve datasource",y),(0,s.of)(void 0)}const g=()=>(0,s.of)({annotations:[],alertStates:[]});function u(y){return y.cancelled||E("DashboardQueryRunner failed",y),g()}function E(y,d){const x=(0,r.u)(d);console.error("handleAnnotationQueryRunnerError",x);const b=(0,i.gi)(y,x.message);(0,c.JD)((0,o.dx)(b))}function v(y,d){return d==null?y:y.filter(x=>{let b;if(b=x.source,!b)return!0;if(b.filter){const D=(b.filter.ids??[]).includes(d);if(b.filter.exclude){if(D)return!1}else if(!D)return!1}return x.panelId&&x.source.type==="dashboard"?x.panelId===d:!0})}function p(y,d){y.snapshotData&&(y=(0,n.cloneDeep)(y),delete y.snapshotData);for(const x of d)switch(x.source=y,x.color=l.$.theme2.visualization.getColorByName(y.iconColor),x.type=y.name,x.isRegion=!!(x.timeEnd&&x.time!==x.timeEnd),x.newState?.toLowerCase()){case"pending":x.color="yellow";break;case"alerting":x.color="red";break;case"ok":x.color="green";break;case"normal":x.color="green";break;case"no_data":x.color="gray";break;case"nodata":x.color="gray";break}return d}function m(y){if(!y||!y.length)return[];const d=[];for(const x of y){const b=new DataFrameView(x);for(let D=0;D<x.length;D++){const C=cloneDeep(b.get(D));d.push(C)}}return d}},92654:(ne,A,e)=>{"use strict";e.d(A,{i:()=>n});var n=(a=>(a.All="All",a.WithExpiredTokens="WithExpiredTokens",a.External="External",a.Disabled="Disabled",a))(n||{})},92784:(ne,A,e)=>{"use strict";e.d(A,{Ib:()=>s,Nv:()=>l,ar:()=>a,eg:()=>n});function n(r){return r&&/^(?!\/|.*\/\/|.*\.\.|.*@{)(?!.*[~^:?*[\]\\]).+(?<!\/|\.|\s)$/.test(r)}const a=r=>{if(r?.url)return r.branch?`${r.url}/tree/${r.branch}`:r.url},s=r=>{if(!(!r||!r.type))switch(r.type){case"github":{const c=r.github?.url,i=r.github?.branch;return c?i?`${c}/tree/${i}`:c:void 0}case"gitlab":{const c=r.gitlab?.url,i=r.gitlab?.branch;return c?i?`${c}/-/tree/${i}`:c:void 0}case"bitbucket":{const c=r.bitbucket?.url,i=r.bitbucket?.branch;return c?i?`${c}/src/${i}`:c:void 0}case"git":return r.git?.url;default:return}};function l(r){return r==="github"||r==="gitlab"||r==="bitbucket"}},92790:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>o});var n=e(74848),a=e(96540),s=e(36613),l=e(36192);function r(h,f){return f.width===h.width&&f.height===h.height}function c(h,f){return f.data===h.data}function i(h,f){return f.config===h.config}class o extends a.Component{constructor(f){super(f),this.plotContainer=(0,a.createRef)(),this.plotCanvasBBox=(0,a.createRef)(),this.plotInstance=null}reinitPlot(){let{width:f,height:g,plotRef:u}=this.props;if(this.plotInstance?.destroy(),f===0&&g===0)return;this.props.config.addHook("setSize",p=>{p.over});const E={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,l.uY)("UPlot",!1,"Reinitializing plot",E);const v=new s.A(E,this.props.data,this.plotContainer.current);u&&u(v),this.plotInstance=v}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.plotInstance?.destroy()}componentDidUpdate(f){r(f,this.props)?i(f,this.props)?c(f,this.props)||this.plotInstance?.setData(this.props.data):this.reinitPlot():this.plotInstance?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return(0,n.jsxs)("div",{style:{position:"relative"},children:[(0,n.jsx)("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children]})}}},92842:(ne,A,e)=>{"use strict";e.d(A,{f:()=>s});var n=e(74848),a=e(30703);const s=({isLoading:l,isOpen:r})=>{const c=l?"spinner":r?"search":"angle-down";return(0,n.jsx)(a.I,{name:c})}},92948:(ne,A,e)=>{"use strict";e.d(A,{M:()=>u});var n=e(74848),a=e(22803),s=e(6773),l=e(63142),r=e(11701),c=e(53459),i=e(42581);const o=({className:E,logo:v})=>(0,n.jsx)("img",{className:E,src:`${v||i}`,alt:"Grafana"}),h=({className:E,children:v})=>{const p=(0,l.$j)(),m=(0,a.css)({"&:before":{content:'""',position:"fixed",left:0,right:0,bottom:0,top:0,background:`url(${p.isDark?r:c})`,backgroundPosition:"top center",backgroundSize:"auto",backgroundRepeat:"no-repeat",opacity:0,transition:"opacity 3s ease-in-out",[p.breakpoints.up("md")]:{backgroundPosition:"center",backgroundSize:"cover"}}});return(0,n.jsx)("div",{className:(0,a.cx)(m,E),children:v})},f=({className:E})=>(0,n.jsx)("img",{className:E,src:i,alt:"Grafana"}),g=()=>{const E=(0,l.$j)();return(0,a.css)({background:s.MV.alpha(E.colors.background.primary,.7),backgroundSize:"cover"})};class u{static{this.LoginLogo=o}static{this.LoginBackground=h}static{this.MenuLogo=f}static{this.LoginBoxBackground=g}static{this.AppTitle="Grafana"}static{this.LoginTitle="Welcome to Grafana"}static{this.HideEdition=!1}static{this.GetLoginSubTitle=()=>null}}},93008:(ne,A,e)=>{"use strict";e.d(A,{h:()=>g});var n=e(22803),a=e(2543),s=e.n(a),l=e(96540),r=e(63142),c=e(45897);const i=.3,o=new Set(["ArrowUp","ArrowDown"]),h=new Set(["ArrowLeft","ArrowRight"]),f={row:{dim:"width",axis:"clientX",min:"minWidth",max:"maxWidth"},column:{dim:"height",axis:"clientY",min:"minHeight",max:"maxHeight"}};function g(m){const{direction:y,initialSize:d=m.usePixels?300:.5,dragPosition:x="middle",onResizing:b,onSizeChanged:D,usePixels:C}=m,P=p(m.handleSize),T=(0,l.useRef)(null),O=(0,l.useRef)(null),S=(0,l.useRef)(null),B=(0,l.useRef)(null),K=(0,l.useRef)(null),U=(0,l.useRef)(null),F=(0,l.useRef)(void 0),I=(0,l.useRef)(void 0),V=f[y].dim,M=f[y].axis,L=f[y].min,N=f[y].max,W=(0,l.useRef)(null),R=(0,l.useCallback)(X=>{!O.current||!S.current||(U.current=O.current.getBoundingClientRect()[V],K.current=B.current.getBoundingClientRect()[V],W.current=X[M],T.current.setPointerCapture(X.pointerId),C?F.current=E(S.current,C):F.current=E(O.current),I.current=void 0)},[V,M,C]),G=(0,l.useCallback)(X=>{if(!K.current||!U.current||!S.current)return;const le=U.current,he=K.current-le-P,fe=F.current;if(C){const Ce=(0,a.clamp)(he-X,fe[L],fe[N]);S.current.style.flexBasis=`${Ce}px`,T.current.ariaValueNow=`${Ce}`,b?.(Ce,le+X,Ce)}else{const Ce=(0,a.clamp)(U.current+X,fe[L],fe[N]),Ae=Ce/(K.current-P);O.current.style.flexGrow=`${Ae}`,S.current.style.flexGrow=`${1-Ae}`,T.current.ariaValueNow=u(Ce,fe[L],fe[N]),b?.(Ae,Ce,he-X)}},[b,P,C,L,N]),w=(0,l.useCallback)(X=>{W.current!==null&&G(X[M]-W.current)},[G,M]),_=(0,l.useCallback)(X=>{X.preventDefault(),X.stopPropagation(),W.current=null,T.current.releasePointerCapture(X.pointerId);const le=O.current.getBoundingClientRect()[V],he=K.current-le-P;D?.(parseFloat(O.current.style.flexGrow),le,he)},[D,P,V]),Q=(0,l.useRef)(new Set),ae=(0,l.useRef)(null),q=(0,l.useCallback)(X=>{if(Q.current.size===0){ae.current=null;return}else if(U.current===null)return;const fe=(X-(ae.current??X))*i;let Ce=0;y==="row"?(Q.current.has("ArrowLeft")&&(Ce-=fe),Q.current.has("ArrowRight")&&(Ce+=fe)):(Q.current.has("ArrowUp")&&(Ce-=fe),Q.current.has("ArrowDown")&&(Ce+=fe)),U.current=O.current.getBoundingClientRect()[V],K.current=B.current.getBoundingClientRect()[V],G(Ce),ae.current=X,window.requestAnimationFrame(q)},[y,V,G]),k=(0,l.useCallback)(X=>{if(!O.current||!S.current||!T.current||!B.current||!(y==="column"&&o.has(X.key)||y==="row"&&h.has(X.key))||Q.current.has(X.key))return;if(I.current=void 0,X.preventDefault(),X.stopPropagation(),U.current=O.current.getBoundingClientRect()[V],K.current=B.current.getBoundingClientRect()[V],C?F.current=E(S.current):F.current=E(O.current),!Q.current.has(X.key)){const he=Q.current.size===0;Q.current.add(X.key),he&&window.requestAnimationFrame(q)}},[y,q,,V,C]),ee=(0,l.useCallback)(X=>{if(!(y==="row"&&!h.has(X.key)||y==="column"&&!o.has(X.key))&&(Q.current.delete(X.key),U.current!==null)){const le=K.current-U.current-P;D?.(parseFloat(O.current.style.flexGrow),U.current,le)}},[y,D,P]),j=(0,l.useCallback)(()=>{!O.current||!S.current||(C?S.current.style.flexBasis=`${d}px`:(O.current.style.flexGrow="0.5",S.current.style.flexGrow="0.5",U.current=O.current.getBoundingClientRect()[V],T.current.ariaValueNow="50"))},[V,C,d]),J=(0,l.useCallback)(()=>{if(Q.current.size>0&&(Q.current.clear(),W.current=null,typeof U.current=="number")){const X=K.current-U.current-P;D?.(parseFloat(O.current.style.flexGrow),U.current,X)}},[D,P]),Z=(0,r.of)(v,y),te=(0,r.of)(c.l,x),se=y==="column"?te.dragHandleHorizontal:te.dragHandleVertical,ie=(0,l.useId)(),ce={flexGrow:(0,a.clamp)(d,0,1),[L]:"min-content"},re={flexGrow:(0,a.clamp)(1-d,0,1),[L]:"min-content"};C&&(ce.flexGrow=1,re.flexGrow="unset",re.flexBasis=`${d}px`);const ue=`start-panel-${ie}`;return{containerProps:{ref:B,className:Z.container},primaryProps:{ref:O,className:Z.panel,style:ce,id:ue},secondaryProps:{ref:S,className:Z.panel,style:re},splitterProps:{onPointerUp:_,onPointerDown:R,onPointerMove:w,onKeyDown:k,onKeyUp:ee,onDoubleClick:j,onBlur:J,ref:T,style:{[V]:`${P}px`},role:"separator","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":d*100,"aria-controls":ue,"aria-label":"Pane resize widget",tabIndex:0,className:se}}}function u(m,y,d){return`${(0,a.clamp)((m-y)/(d-y)*100,0,100)}`}function E(m,y){const d=document.body.style.overflow,x=m.style.width,b=m.style.height,D=m.style.flexGrow,C=m.style.flexBasis;document.body.style.overflow="hidden",m.style.flexGrow="0",m.style.flexBasis="0";const{width:P,height:T}=m.getBoundingClientRect();m.style.flexGrow="100";const{width:O,height:S}=m.getBoundingClientRect();return document.body.style.overflow=d,m.style.width=x,m.style.height=b,m.style.flexGrow=D,m.style.flexBasis=C,{minWidth:P,maxWidth:O,minHeight:T,maxHeight:S}}function v(m,y){return{container:(0,n.css)({display:"flex",flexDirection:y==="row"?"row":"column",width:"100%",flexGrow:1,overflow:"hidden"}),panel:(0,n.css)({display:"flex",position:"relative",flexBasis:0})}}function p(m="md"){return{xs:4,sm:8,md:16,lg:32}[m]}},93139:(ne,A,e)=>{"use strict";e.d(A,{G:()=>h});var n=e(74848),a=e(22803),s=e(96540),l=e(34999),r=e(18857),c=e(63142),i=e(46189);const o=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:i.fx},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],h=({value:g,onChange:u,context:E,item:v})=>{const p=(0,c.of)(f),[m,y]=(0,s.useState)(),d=v.settings;(0,s.useEffect)(()=>{async function D(){const C=await(0,i.q3)(g);y(C)}D()},[g,y]);const{current:x,options:b}=(0,s.useMemo)(()=>{let D=d?.options?[...d.options]:[...o],C=D?.find(P=>P.value===m?.path);return!C&&m&&(C={label:m.path,value:m.path},D.push(C)),{options:D,current:C}},[m,d?.options]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.l6,{value:x,options:b,onChange:D=>u(D.value),allowCustomValue:!0,formatCreateLabel:D=>`Load from URL: ${D}`}),m&&(0,n.jsxs)(n.Fragment,{children:[m.error&&(0,n.jsx)(l.F,{title:m.error,severity:"warning"}),m.count&&(0,n.jsxs)("div",{className:p.keys,children:[(0,n.jsxs)("b",{children:["(",m.count,")"]}),m.examples(10).map(D=>(0,n.jsxs)("span",{children:[D,","]},D)),m.count>10&&" ..."]})]})]})},f=g=>({keys:(0,a.css)({marginTop:g.spacing(.5),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap","> span":{marginLeft:g.spacing(.5)}})})},93256:(ne,A,e)=>{"use strict";e.d(A,{e:()=>r});var n=e(74848),a=e(22803),s=e(96540),l=e(63142);const r=(0,s.forwardRef)(({className:i,children:o,...h},f)=>{const g=(0,l.of)(c);return(0,n.jsx)("div",{ref:f,className:(0,a.cx)("button-group",g.wrapper,i),...h,children:o})});r.displayName="ButtonGroup";const c=i=>({wrapper:(0,a.css)({display:"flex",borderRadius:i.shape.radius.default,"> .button-group:not(:first-child) > button, > button:not(:first-child)":{borderTopLeftRadius:"unset",borderBottomLeftRadius:"unset",borderLeft:"1px solid rgba(255, 255, 255, 0.12)"},"> .button-group:not(:last-child) > button, > button:not(:last-child)":{borderTopRightRadius:"unset",borderBottomRightRadius:"unset",borderRight:"1px solid rgba(0, 0, 0, 0.12)"}})})},93384:(ne,A,e)=>{"use strict";e.d(A,{KQ:()=>s,QB:()=>l});var n=e(739);const a="12.2.1",s={colWidth:.9,perPage:20,rowHeight:.9,showValue:n.yL.Auto},l={fillOpacity:70,lineWidth:1}},93389:(ne,A,e)=>{"use strict";e.d(A,{U:()=>U});var n=e(2543),a=e(96540),s=e(45863),l=e(95943),r=e(33143),c=e(3371),i=e(8285),o=e(41667),h=e(74848),f=e(92745),g=e(43173),u=e(77824),E=e(18857),v=e(25797),p=e(51156),m=e(31819),y=e(78725);function d(F){const I="repeat-options",V=new v.C({title:(0,f.t)("dashboard.default-layout.item-options.repeat.title","Repeat options"),id:I,isOpenDefault:!1}).addItem(new p.v({title:(0,f.t)("dashboard.default-layout.item-options.repeat.variable.title","Repeat by variable"),id:`${I}-repeat-by-variable`,description:(0,f.t)("dashboard.default-layout.item-options.repeat.variable.description","Repeat this panel for each value in the selected variable. This is not visible while in edit mode. You need to go back to dashboard and then update the variable or reload the dashboard."),render:N=>(0,h.jsx)(D,{id:N.props.id,gridItem:F})})).addItem(new p.v({title:(0,f.t)("dashboard.default-layout.item-options.repeat.direction.title","Repeat direction"),id:`${I}-repeat-direction`,useShowIf:()=>{const{variableName:N}=F.useState();return!!N},render:()=>(0,h.jsx)(x,{gridItem:F})})).addItem(new p.v({title:(0,f.t)("dashboard.default-layout.item-options.repeat.max","Max per row"),id:`${I}-max-per-row`,useShowIf:()=>{const{variableName:N,repeatDirection:W}=F.useState();return!!N&&W==="h"},render:N=>(0,h.jsx)(b,{id:N.props.id,gridItem:F})})),M=(0,y.h)(void 0,(0,f.t)("dashboard.conditional-rendering.editor.not-supported-for-custom-grid","Conditional rendering is not supported for the custom grid layout. Switch to auto grid to use conditional rendering.")),L=[V];return g.$.featureToggles.dashboardNewLayouts&&L.push(M),L}function x({gridItem:F}){const{repeatDirection:I}=F.useState(),V=[{label:(0,f.t)("dashboard.default-layout.item-options.repeat.direction.horizontal","Horizontal"),value:"h"},{label:(0,f.t)("dashboard.default-layout.item-options.repeat.direction.vertical","Vertical"),value:"v"}];return(0,h.jsx)(u.z,{options:V,value:I??"h",onChange:M=>{r.cc.edit({description:(0,f.t)("dashboard.edit-actions.panel-repeat-direction","Repeat direction"),source:F,perform:()=>F.setRepeatDirection(M),undo:()=>F.setRepeatDirection(I??"h")})}})}function b({gridItem:F,id:I}){const{maxPerRow:V}=F.useState(),M=[2,3,4,6,8,12].map(L=>({label:L.toString(),value:L}));return(0,h.jsx)(E.l6,{id:I,options:M,value:V??4,onChange:L=>{r.cc.edit({description:(0,f.t)("dashboard.edit-actions.panel-max-repeats-per-row","Max repeats per row"),source:F,perform:()=>F.setMaxPerRow(L.value),undo:()=>F.setMaxPerRow(V??4)})}})}function D({gridItem:F,id:I}){const{variableName:V,width:M}=F.useState(),L=(0,a.useCallback)(W=>{F.setRepeatByVariable(W),F.handleVariableName(),M!==24&&(F.setState({width:24}),s.jh.getAncestor(F,s.hy).forceRender())},[F,M]),N=(0,a.useCallback)(W=>{W!==V&&r.cc.edit({description:(0,f.t)("dashboard.edit-actions.panel-repeat-variable","Panel repeat by"),source:F,perform:()=>L(W),undo:()=>L(V)})},[F,L,V]);return(0,h.jsx)(m.U,{id:I,sceneContext:F,repeat:V,onChange:N})}var C=e(22803),P=e(96691);function T({model:F}){const{repeatedPanels:I=[],itemHeight:V,variableName:M,body:L}=F.useState(),N=(0,P.MK)(),W=O(F.getRepeatDirection(),F.getChildCount(),F.getMaxPerRow(),V??10);return N?(0,P.mN)(N,[L,...I]):M?(0,h.jsxs)("div",{className:W,ref:F.containerRef,children:[(0,h.jsx)("div",{className:S,children:(0,h.jsx)(L.Component,{model:L},L.state.key)},L.state.key),I.map(R=>(0,h.jsx)("div",{className:S,children:(0,h.jsx)(R.Component,{model:R},R.state.key)},R.state.key))]}):(0,h.jsx)("div",{className:S,ref:F.containerRef,children:(0,h.jsx)(L.Component,{model:L},L.state.key)})}function O(F,I,V,M){return(0,a.useMemo)(()=>{const L=g.$.theme2,N=M*l.sD*I+(I-1)*l.dU;if(F==="h"){const W=Math.ceil(I/V),R=Math.min(I,V);return(0,C.css)({display:"grid",height:"100%",width:"100%",gridTemplateColumns:`repeat(${R}, 1fr)`,gridTemplateRows:`repeat(${W}, 1fr)`,gridColumnGap:L.spacing(1),gridRowGap:L.spacing(1),[L.breakpoints.down("md")]:{display:"flex",flexDirection:"column",height:N}})}return(0,C.css)({display:"flex",height:"100%",width:"100%",flexDirection:"column",gap:L.spacing(1),[L.breakpoints.down("md")]:{height:N}})},[F,I,V,M])}const S=(0,C.css)({display:"flex",flexGrow:1,position:"relative",width:"100%",height:"100%"});class B{constructor(I){this._gridItem=I}getNames(){return this._gridItem.state.variableName?new Set([this._gridItem.state.variableName]):new Set}hasDependencyOn(I){return this._gridItem.state.variableName===I}variableUpdateCompleted(I){this._gridItem.state.variableName===I.state.name&&this._gridItem.performRepeat()}}var K=e(87308);class U extends s.Bs{constructor(I){super(I),this._variableDependency=new B(this),this.isDashboardLayoutItem=!0,this.containerRef=a.createRef(),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=T}_activationHandler(){return this.handleVariableName(),this._subs.add(this.subscribeToEvent(r.WG,()=>this.handleEditChange())),()=>{this._handleGridSizeUnsubscribe()}}_handleGridSizeSubscribe(){this._gridSizeSub||(this._gridSizeSub=this.subscribeToState((I,V)=>this._handleGridResize(I,V)))}_handleGridSizeUnsubscribe(){this._gridSizeSub&&(this._gridSizeSub.unsubscribe(),this._gridSizeSub=void 0)}_handleGridResize(I,V){if(I.height===V.height)return;const M={};if(this.getRepeatDirection()==="v")M.itemHeight=Math.ceil(I.height/this.getChildCount());else{const L=Math.ceil(this.getChildCount()/this.getMaxPerRow());M.itemHeight=Math.ceil(I.height/L)}M.itemHeight!==this.state.itemHeight&&this.setState(M)}getChildCount(){return(this.state.repeatedPanels?.length??0)+1}getClassName(){return this.state.variableName?"panel-repeater-grid-item":""}getOptions(){return d(this)}setElementBody(I){this.setState({body:I})}handleEditChange(){if(this._prevRepeatValues=void 0,this.parent instanceof s.tI){const I=this.parent.state.$behaviors?.find(V=>V instanceof K.L);I&&I.resetPrevRepeatValues()}this.state.variableName&&this.state.repeatDirection==="h"&&this.state.width!==l.cV&&this.setState({width:l.cV}),this.performRepeat()}performRepeat(){if(!this.state.variableName||s.jh.hasVariableDependencyInLoadingState(this))return;const I=s.jh.lookupVariable(this.state.variableName,this)??new s.yP({name:"_____default_sys_repeat_var_____",options:[],value:"",text:"",query:"A"});if(!(I instanceof s.n8)){console.error("DashboardGridItem: Variable is not a MultiValueVariable");return}const{values:V,texts:M}=(0,i.a7)(I);if((0,n.isEqual)(this._prevRepeatValues,V))return;const L=this.state.body,N=[],W={values:[""],texts:I.hasAllValue()?["All"]:["None"]},R=V.length?V:W.values,G=M.length?M:W.texts;for(let ee=0;ee<R.length;ee++){const J=ee===0?L:L.clone({key:(0,c.lv)(L.state.key,ee),repeatSourceKey:L.state.key});J.setState({$variables:(0,c.D1)(I,R[ee],G[ee])}),ee>0&&N.push(J)}const w=this.getRepeatDirection(),_={repeatedPanels:N},Q=this.state.itemHeight??10,ae=this.state.height,q=this.getMaxPerRow(),k=N.length+1;if(w==="h"){const ee=Math.ceil(k/q);_.height=ee*Q}else _.height=k*Q;if(this.setState(_),ae!==this.state.height){const ee=s.jh.getLayout(this);ee instanceof s.hy&&ee.forceRender()}this._prevRepeatValues=V}handleVariableName(){this.state.variableName?this._handleGridSizeSubscribe():this._handleGridSizeUnsubscribe(),this.performRepeat()}setRepeatByVariable(I){const V={variableName:I};I&&!this.state.repeatDirection&&(V.repeatDirection="h"),this.state.body.state.$variables&&this.state.body.setState({$variables:void 0}),this.setState(V)}getMaxPerRow(){return this.state.maxPerRow??4}setMaxPerRow(I){this.setState({maxPerRow:I})}getRepeatDirection(){return this.state.repeatDirection==="v"?"v":"h"}setRepeatDirection(I){this.setState({repeatDirection:I})}isRepeated(){return this.state.variableName!==void 0}scrollIntoView(){const I=document.querySelector(`[data-griditem-key="${this.state.key}"`);I instanceof HTMLElement?(0,o.R)(I):(0,o.d)(this,this.containerRef)}}},93395:(ne,A,e)=>{"use strict";e.d(A,{W:()=>s});var n=e(96540),a=e(52161);function s(l){return(0,n.useMemo)(()=>(0,a.sq)(l),[l])}},93427:(ne,A,e)=>{"use strict";e.d(A,{Pz:()=>M});var n=e(74848),a=e(2543),s=e(22803),l=e(96540),r=e(40961),c=e(91793),i=e(35555),o=e(53926),h=e(49579);const f=W=>W.reduce((R,{items:G,label:w})=>(R.push({label:w,kind:o.I.GroupTitle}),G.reduce((_,Q)=>(_.push(Q),_),R)),[]),g=W=>W.reduce((R,G)=>R.length<G.label.length?G.label:R,""),u=(W,R,G)=>{const w=(0,h.A)(G,{font:W.typography.fontFamilyMonospace,fontSize:W.typography.bodySmall.fontSize,fontWeight:"normal"}),_=v(w.width,W),Q=E(w.height,W),ae=p(Q,R);return{listWidth:_,listHeight:ae,itemHeight:Q}},E=(W,R)=>{const G=R.spacing.gridSize*2;return W+G},v=(W,R)=>{const G=R.spacing.gridSize*3;return Math.min(Math.max(W+G,200),800)},p=(W,R)=>{const G=Math.min(R.length,10),w=100,_=G*W;return Math.max(_,w)};var m=e(67458),y=e(63142);const d=(W,R,G)=>({typeaheadItem:(0,s.css)({label:"type-ahead-item",zIndex:11,padding:W.spacing(1,1,1,2),border:W.colors.border.medium,overflowY:"scroll",overflowX:"hidden",outline:"none",background:W.colors.background.secondary,color:W.colors.text.secondary,boxShadow:`0 0 20px ${W.v1.colors.dropdownShadow}`,visibility:G===!0?"visible":"hidden",width:"250px",minHeight:`${R+parseInt(W.spacing(.25),10)}px`,position:"relative",wordBreak:"break-word"})}),x=({item:W,height:R})=>{const G=W&&!!W.documentation,w=W?W.label:"",_=(0,m.G)(W?.documentation),Q=(0,y.$j)(),ae=d(Q,R,G);return(0,n.jsxs)("div",{className:(0,s.cx)([ae.typeaheadItem]),children:[(0,n.jsx)("b",{children:w}),(0,n.jsx)("hr",{}),(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:_}})]})};var b=e(23257),D=e.n(b),C=e(20662);const P=W=>({typeaheadItem:(0,s.css)({border:"none",background:"none",textAlign:"left",label:"type-ahead-item",height:"auto",fontFamily:W.typography.fontFamilyMonospace,padding:W.spacing(1,1,1,2),fontSize:W.typography.bodySmall.fontSize,textOverflow:"ellipsis",overflow:"hidden",zIndex:11,display:"block",whiteSpace:"nowrap",cursor:"pointer",[W.transitions.handleMotion("no-preference","reduce")]:{transition:"color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1)"}}),typeaheadItemSelected:(0,s.css)({label:"type-ahead-item-selected",backgroundColor:W.colors.background.secondary}),typeaheadItemMatch:(0,s.css)({label:"type-ahead-item-match",color:W.v1.palette.yellow,borderBottom:`1px solid ${W.v1.palette.yellow}`,padding:"inherit",background:"inherit"}),typeaheadItemGroupTitle:(0,s.css)({label:"type-ahead-item-group-title",color:W.colors.text.secondary,fontSize:W.typography.bodySmall.fontSize,lineHeight:W.typography.body.lineHeight,padding:W.spacing(1)})}),T=W=>{const R=(0,y.of)(P),{isSelected:G,item:w,prefix:_,style:Q,onMouseEnter:ae,onMouseLeave:q,onClickItem:k}=W,ee=G?(0,s.cx)([R.typeaheadItem,R.typeaheadItemSelected]):(0,s.cx)([R.typeaheadItem]),j=(0,s.cx)([R.typeaheadItemMatch]),J=(0,s.cx)([R.typeaheadItemGroupTitle]),Z=w.label||"";return w.kind===o.I.GroupTitle?(0,n.jsx)("li",{className:J,style:Q,children:(0,n.jsx)("span",{children:Z})}):(0,n.jsx)("li",{role:"none",children:(0,n.jsx)("button",{role:"menuitem",className:ee,style:Q,onMouseDown:k,onMouseEnter:ae,onMouseLeave:q,type:"button",children:w.highlightParts!==void 0?(0,n.jsx)(C.z,{text:Z,highlightClassName:j,highlightParts:w.highlightParts}):(0,n.jsx)(D(),{textToHighlight:Z,searchWords:[_??""],autoEscape:!0,highlightClassName:j})})})},O=(W,R)=>W-R*Math.floor(W/R);class S extends l.PureComponent{constructor(){super(...arguments),this.listRef=(0,l.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const R=f(this.props.groupedItems),G=g(R),{listWidth:w,listHeight:_,itemHeight:Q}=u(this.context,R,G);this.setState({listWidth:w,listHeight:_,itemHeight:Q,allItems:R})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(R,G)=>{if(this.state.typeaheadIndex!==null&&G.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,a.isEqual)(R.groupedItems,this.props.groupedItems)===!1){const w=f(this.props.groupedItems),_=g(w),{listWidth:Q,listHeight:ae,itemHeight:q}=u(this.context,w,_);this.setState({listWidth:Q,listHeight:ae,itemHeight:q,allItems:w,typeaheadIndex:null})}},this.onMouseEnter=R=>{this.setState({hoveredItem:R})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=R=>{const G=this.state.allItems.length;if(G){const w=this.state.typeaheadIndex||0;let _=O(w+R,G);this.state.allItems[_].kind===o.I.GroupTitle&&(_=O(_+R,G)),this.setState({typeaheadIndex:_});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}static{this.contextType=i.D}get menuPosition(){if(!window.getSelection)return"";const R=window.getSelection(),G=R&&R.anchorNode;if(G&&G.parentElement){const w=G.parentElement.getBoundingClientRect(),_=window.scrollX,Q=window.scrollY;return`position: absolute; display: flex; top: ${w.top+Q+w.height+6}px; left: ${w.left+_-2}px`}return""}render(){const{prefix:R,isOpen:G=!1,origin:w}=this.props,{allItems:_,listWidth:Q,listHeight:ae,itemHeight:q,hoveredItem:k,typeaheadIndex:ee}=this.state,j=K(this.context),J=k||ee,Z=_[k||ee||0];return(0,n.jsxs)(B,{origin:w,isOpen:G,style:this.menuPosition,children:[(0,n.jsx)("ul",{role:"menu",className:j.typeahead,"data-testid":"typeahead",children:(0,n.jsx)(c.Y1,{ref:this.listRef,itemCount:_.length,itemSize:q,itemKey:te=>{const se=_&&_[te];return se?`${te}-${se.label}`:`${te}`},width:Q,height:ae,children:({index:te,style:se})=>{const ie=_&&_[te];return ie?(0,n.jsx)(T,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(ie):{},isSelected:ee===null?!1:_[ee]===ie,item:ie,prefix:R,style:se,onMouseEnter:()=>this.onMouseEnter(te),onMouseLeave:this.onMouseLeave}):null}})}),J&&(0,n.jsx)(x,{height:ae,item:Z})]})}}class B extends l.PureComponent{constructor(R){super(R);const{index:G=0,origin:w="query",style:_}=R;this.node=document.createElement("div"),this.node.setAttribute("style",_),this.node.classList.add(`slate-typeahead-${w}-${G}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),r.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}const K=W=>({typeahead:(0,s.css)({position:"relative",zIndex:W.zIndex.typeahead,borderRadius:W.shape.radius.default,border:`1px solid ${W.components.panel.borderColor}`,maxHeight:"66vh",overflowY:"scroll",overflowX:"hidden",outline:"none",listStyle:"none",background:W.components.panel.background,color:W.colors.text.primary,boxShadow:W.shadows.z2,strong:{color:W.v1.palette.yellow}})});var U=e(59258),F=e(35458),I=e(65937);const V=250;function M({onTypeahead:W,cleanText:R,onWillApplySuggestion:G,portalOrigin:w}){let _,Q={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const ae=(0,a.debounce)(L,V),q=k=>{Q={...Q,...k}};return{onBlur:(k,ee,j)=>(Q={...Q,groupedItems:[]},j()),onClick:(k,ee,j)=>(Q={...Q,groupedItems:[]},j()),onKeyDown:(k,ee,j)=>{const Z=Q.groupedItems.length;switch(k.key){case"Escape":{if(Z)return k.preventDefault(),Q={...Q,groupedItems:[]},ee.insertText("");break}case"ArrowDown":case"ArrowUp":if(Z){k.preventDefault(),_.moveMenuIndex(k.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(k.shiftKey||k.ctrlKey)&&Z)return k.preventDefault(),_.insertSuggestion();break}case"Tab":{if(Z)return k.preventDefault(),_.insertSuggestion();break}default:{k.key.length===1&&ae(ee,q,W,R);break}}return j()},commands:{selectSuggestion:(k,ee)=>{const j=Q.groupedItems;if(!j||!j.length)return k;const J=k.applyTypeahead(ee);return ae(k,q,W,R),J},applyTypeahead:(k,ee)=>{let j=ee.insertText||ee.label;const J=ee.kind==="function",Z=ee.move||0,te=Z>0?Z:0,se=Z<0?-Z:0,{typeaheadPrefix:ie,typeaheadText:ce,typeaheadContext:re}=Q;G&&(j=G(j,{groupedItems:Q.groupedItems,typeaheadContext:re,typeaheadPrefix:ie,typeaheadText:ce}));const{forward:ue,backward:X}=N(j,ie,ce,J,ee.deleteBackwards,R);if(j.match(/\n/)){const le=(0,F.dF)(j);return k.deleteBackward(X).deleteForward(ue).insertFragment(le).focus(),k}return Q={...Q,groupedItems:[]},k.snapshotSelection().deleteBackward(X).deleteForward(ue).insertText(j).moveForward(te).moveBackward(se).focus(),k}},renderEditor(k,ee,j){if(ee.value.selection.isExpanded)return j();const J=j();return(0,n.jsxs)(n.Fragment,{children:[J,(0,n.jsx)(S,{menuRef:Z=>_=Z,origin:w,prefix:Q.typeaheadPrefix,isOpen:!!Q.groupedItems.length,groupedItems:Q.groupedItems,onSelectSuggestion:ee.selectSuggestion})]})}}}const L=async(W,R,G,w)=>{if(!G)return;const{value:_}=W,{selection:Q}=_,ae=_.document.getClosestBlock(_.focusBlock.key),q=_.selection.start.offset-1,k=ae&&ae.getDecorations(W),ee=k?k.filter(X=>X.start.offset<=q&&X.end.offset>q&&X.type===I.A).toArray():[],j=k&&k.filter(X=>X.end.offset<=q&&X.type===I.A&&X.data.get("className").includes("label-key")).last(),J=j&&_.focusText.text.slice(j.start.offset,j.end.offset),Z=ee.map(X=>X.data.get("className")).join(" ").split(" ").filter(X=>X.length);let te=_.focusText.text,se=te.slice(0,Q.focus.offset);ee.length&&(te=_.focusText.text.slice(ee[0].start.offset,ee[0].end.offset),se=_.focusText.text.slice(ee[0].start.offset,Q.focus.offset));const ie=se.match(/(?:!?=~?"?|")(.*)/);ie?se=ie[1]:w&&(se=w(se));const{suggestions:ce,context:re}=await G({prefix:se,text:te,value:_,wrapperClasses:Z,labelKey:J||void 0,editor:W}),ue=ce.map(X=>{if(!X.items)return X;const le=X.searchFunctionType||(X.prefixMatch?U.T.Prefix:U.T.Word),he=U.H[le];let fe={...X};return se&&(X.skipFilter||(fe.items=fe.items.filter(Ce=>(Ce.filterText||Ce.label).length>=se.length),fe.items=he(fe.items,se)),fe.items=fe.items.filter(Ce=>!(Ce.insertText===se||(Ce.filterText??Ce.label)===se))),X.skipSort||(fe.items=(0,a.sortBy)(fe.items,Ce=>Ce.sortText===void 0?Ce.sortValue!==void 0?Ce.sortValue:Ce.label:Ce.sortText||Ce.label)),fe}).filter(X=>X.items&&X.items.length);R({groupedItems:ue,typeaheadPrefix:se,typeaheadContext:re,typeaheadText:te}),W.blur().focus()};function N(W,R,G,w,_,Q){const ae=_||R.length,q=Q?Q(G):G,k=G.indexOf(R),ee=k>-1?q.length-k-R.length:q.length-R.length;return{forward:!!(R&&ee>0||W===G)&&!w?ee+k:0,backward:ae}}},93521:(ne,A,e)=>{"use strict";e.d(A,{S:()=>n});const n=(a,s)=>{const l=a.group;return l?s?s.group!==l:!0:!!s?.group}},93602:(ne,A,e)=>{"use strict";e.d(A,{S:()=>p});var n=e(74848),a=e(22803),s=e(96540),l=e(51898),r=e(92745),c=e(27489),i=e(2863),o=e(77870),h=e(63142),f=e(42227),g=e(6079),u=e(85032),E=e(76792),v=e(7078);function p(b){const D=(0,s.useRef)(null),[C,P]=(0,f.dR)({keyboardEvents:b.keyboardEvents,containerRef:D}),T=(0,h.$j)(),O=x(T,P),{className:S,current:B,onChange:K,enableKeyboardNavigation:U,onClickEmptyStateCTA:F}=b,I=(0,f.Kr)({alerting:b.alerting,annotations:b.annotations,dashboard:b.dashboard,logs:b.logs,metrics:b.metrics,mixed:b.mixed,pluginId:b.pluginId,tracing:b.tracing,type:b.type,variables:b.variables},b.dataSources),[V,M]=(0,f.TX)(),L=(0,o.S)(),N=b.filter?I.filter(b.filter):I;return(0,n.jsxs)("div",{ref:D,className:(0,a.cx)(S,O.container),"data-testid":l.Tp.components.DataSourcePicker.dataSourceList,children:[N.length===0&&(0,n.jsx)(m,{className:O.emptyState,onClickCTA:F}),N.sort((0,v.Tj)(B,V,d(),L.enabled?L.initialFavoriteDataSources:void 0)).map(W=>(0,n.jsx)(u.A,{"data-testid":"data-source-card",ds:W,onClick:()=>{M(W),K(W)},selected:(0,v.Df)(W,B),isFavorite:L.enabled?L.isFavoriteDatasource(W.uid):void 0,onToggleFavorite:L.enabled?()=>{(0,c.rR)(E.kw,{item:E.fE.TOGGLE_FAVORITE,ds_type:W.type,is_favorite:!L.isFavoriteDatasource(W.uid)}),L.isFavoriteDatasource(W.uid)?L.removeFavoriteDatasource(W):L.addFavoriteDatasource(W)}:void 0,...U?C:{}},W.uid))]})}function m({className:b,onClickCTA:D}){const C=(0,h.of)(y);return(0,n.jsxs)("div",{className:(0,a.cx)(b,C.container),children:[(0,n.jsx)("p",{className:C.message,children:(0,n.jsx)(r.x6,{i18nKey:"data-source-picker.list.no-data-source-message",children:"No data sources found"})}),(0,n.jsx)(g.r,{onClick:D})]})}function y(b){return{container:(0,a.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),message:(0,a.css)({marginBottom:b.spacing(3)})}}function d(){return(0,i.w)().getVariables().filter(D=>D.type==="datasource").map(D=>`\${${D.id}}`)}function x(b,D){return{container:(0,a.css)({display:"flex",flexDirection:"column",padding:b.spacing(.5),[`${D}`]:{backgroundColor:b.colors.background.secondary}}),emptyState:(0,a.css)({height:"100%",flex:1})}}},93612:(ne,A,e)=>{"use strict";e.d(A,{Fs:()=>b,SS:()=>o,Tk:()=>p,UN:()=>d,_2:()=>x,bZ:()=>y,dn:()=>r,hk:()=>u,nS:()=>g,nx:()=>i,pi:()=>f,wk:()=>E,y7:()=>m});var n=e(41811),a=e(8535),s=e(99305),l=e(38221);function r(D,C=(0,a.Gu)(),P=!0){const{id:T,rootStateKey:O}=D,B=i(O,C).variables[T];if(!B){if(P)throw new Error(`Couldn't find variable with id:${T}`);return}return B}function c(D,C,P=(0,a.Gu)()){return Object.values(i(C,P).variables).filter(D).sort((T,O)=>T.index-O.index)}function i(D,C=(0,a.Gu)()){return C.templating.keys[(0,s.q4)(D)]??(0,l.x)()}function o(D,C=(0,a.Gu)()){return c(h,D,C)}function h(D){return D.type!=="system"}const f=(0,n.default)((D,C)=>o(D,(0,a.Gu)())),g=(D,C)=>o(D,C);function u(D,C=(0,a.Gu)()){return E(Object.values(i(D,C).variables))}function E(D){const C=D.filter(h).sort((P,T)=>P.index-T.index);return C.length>0?C[C.length-1].index+1:0}function v(D,C=getState()){return i(D,C).transaction.isDirty}function p(D=(0,a.Gu)()){return D.templating?.lastKey}function m(D=(0,a.Gu)()){if(!D.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return D.templating.lastKey}function y(D,C=(0,a.Gu)()){const P=p(C);return P?c(D,P,C):[]}function d(D=(0,a.Gu)()){const C=p(D);return C?o(C,D):[]}function x(D,C=(0,a.Gu)()){const P=p(C);if(P)return r({id:D,rootStateKey:P,type:"query"},C,!1)}function b(D,C){return D[C]}},93630:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>o});var n=e(2543),a=e.n(n),s=e(96540);const l=.1,r=2,c=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),i=h=>{let f=h.root,g=new Set,u=null,E=null;if(!f)return;f.tabIndex=0;const v=(D,C)=>{const{cursor:P}=h;if(P.left===void 0||P.top===void 0)return;const{width:T,height:O}=h.over.style,[S,B]=[Math.floor(parseFloat(T)),Math.floor(parseFloat(O))];h.setCursor({left:(0,n.clamp)(P.left+D,0,S),top:(0,n.clamp)(P.top+C,0,B)})},p=D=>{if(g.size===0||!h){E=null;return}const T=(D-(E??D))*l;let O=0,S=0;g.has("ArrowUp")&&(S-=T),g.has("ArrowDown")&&(S+=T),g.has("ArrowLeft")&&(O-=T),g.has("ArrowRight")&&(O+=T),g.has("Shift")&&(O*=r,S*=r),v(O,S);const{cursor:B}=h;if(g.has(" ")&&B){const K=Number(h.over.style.height.slice(0,-2));h.setSelect({left:B.left<u?B.left:u,top:0,width:Math.abs(B.left-(u??B.left)),height:K},!1)}E=D,window.requestAnimationFrame(p)},m=D=>{if(D.key==="Tab"){h.setCursor({left:-5,top:-5});return}if(!c.has(D.key))return;if(D.preventDefault(),D.stopPropagation(),!g.has(D.key)){const P=g.size===0;g.add(D.key),u=D.key===" "&&u===null?h.cursor.left:u,P&&window.requestAnimationFrame(p)}},y=D=>{c.has(D.key)&&(g.delete(D.key),D.key===" "&&(D.preventDefault(),D.stopPropagation(),h.setSelect(h.select),u=null))},d=()=>{if(!f?.matches(":focus-visible"))return;const D=parseFloat(h.over.style.width),C=parseFloat(h.over.style.height);h.setCursor({left:D/2,top:C/2})},x=()=>{E=null,u=null,g.clear(),h.setSelect({left:0,top:0,width:0,height:0},!1)};f.addEventListener("keydown",m),f.addEventListener("keyup",y),f.addEventListener("focus",d),f.addEventListener("blur",x);const b=()=>{f?.removeEventListener("keydown",m),f?.removeEventListener("keyup",y),f?.removeEventListener("focus",d),f?.removeEventListener("blur",x),f=null};(h.hooks.destroy??=[]).push(b)},o=({config:h})=>((0,s.useLayoutEffect)(()=>h.addHook("init",i),[h]),null)},93732:(ne,A,e)=>{"use strict";e.d(A,{$:()=>v});var n=e(74848),a=e(22803),s=e(96540),l=e(15777),r=e(8934),c=e(92745),i=e(63142),o=e(18857),h=e(30703),f=e(11297);const g=({data:m,className:y,label:d,isFocused:x,innerProps:b})=>{const D=(0,i.of)(u);return(0,n.jsx)("div",{className:(0,a.cx)(D.option,x&&D.optionFocused),"aria-label":(0,c.t)("tag-filter.tag-option-label","Tag option"),...b,children:(0,n.jsx)("div",{className:(0,a.cx)(D.optionInner,y),children:typeof d=="string"?(0,n.jsx)(f.E,{label:d,removeIcon:!1,count:m.count??0}):d})})},u=m=>({option:(0,a.css)({padding:m.spacing(.5),whiteSpace:"nowrap",cursor:"pointer",borderLeft:"2px solid transparent",borderRadius:m.shape.radius.default,"&:hover":{background:m.colors.action.hover}}),optionFocused:(0,a.css)({background:m.colors.action.focus,borderStyle:"solid",borderTop:0,borderRight:0,borderBottom:0,borderLeftWidth:"2px"}),optionInner:(0,a.css)({position:"relative",textAlign:"left",width:"100%",display:"block",cursor:"pointer",padding:"2px 0"})}),E=(m,y)=>{const d=RegExp((0,r.jD)(y),"i");return!!(m.value&&d.test(m.value))},v=({allowCustomValue:m=!1,formatCreateLabel:y,hideValues:d,inputId:x,isClearable:b,onChange:D,placeholder:C,tagOptions:P,tags:T,width:O,disabled:S})=>{const B=(0,i.of)(p),K=T.map(ae=>({value:ae,label:ae,count:0})),[U,F]=(0,s.useState)(K),[I,V]=(0,s.useState)(!1),[M,L]=(0,s.useState)(T),[N,W]=(0,s.useState)(K),R=(0,s.useMemo)(()=>T.join(),[T]),G=(0,s.useCallback)(async()=>(await P()).map(q=>T.includes(q.term)?{value:q.term,label:q.term,count:0}:{value:q.term,label:q.term,count:q.count}),[P,T]),w=(0,s.useCallback)(async()=>{V(!0);const ae=await G();m&&N.forEach(q=>ae.push(q)),F(ae),V(!1)},[m,N,G]);(0,s.useEffect)(()=>{T.length>0&&U.length===0&&w()},[w,U.length,T.length]),(0,s.useEffect)(()=>{T!==M&&(L(T),w())},[w,M,T]);const _=ae=>{ae.forEach(q=>q.count=0),D((ae||[]).map(q=>q.value)),m&&W(ae.filter(q=>!T.includes(q)))},Q={onFocus:w,isLoading:I,options:U,allowCreateWhileLoading:!0,allowCustomValue:m,formatCreateLabel:y,defaultOptions:!0,filterOption:E,getOptionLabel:ae=>ae.label,getOptionValue:ae=>ae.value,inputId:x,isMulti:!0,onChange:_,loadingMessage:(0,c.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,c.t)("tag-filter.no-tags","No tags found"),placeholder:C||(0,c.t)("tag-filter.placeholder","Filter by tag"),value:K,width:O,components:{Option:g,MultiValueLabel:()=>null,MultiValueRemove(ae){const{data:q}=ae;return(0,n.jsx)(l.c.MultiValueRemove,{...ae,children:(0,n.jsx)(f.E,{label:q.label,removeIcon:!0,count:q.count},q.label)})},MultiValueContainer:d?()=>null:l.c.MultiValueContainer}};return(0,n.jsxs)("div",{className:B.tagFilter,children:[b&&T.length>0&&(0,n.jsx)("button",{className:B.clear,onClick:()=>_([]),disabled:S,children:(0,n.jsx)(c.x6,{i18nKey:"tag-filter.clear-button",children:"Clear tags"})}),(0,n.jsx)(o.KF,{...Q,prefix:(0,n.jsx)(h.I,{name:"tag-alt"}),"aria-label":(0,c.t)("tag-filter.select-aria-label","Tag filter"),disabled:S},R)]})};v.displayName="TagFilter";const p=m=>{const y=(0,f.$)(m);return{tagFilter:(0,a.css)({position:"relative",minWidth:"180px",flexGrow:1,[`.${y.badge}`]:{marginLeft:"6px",cursor:"pointer"}}),clear:(0,a.css)({background:"none",border:"none",textDecoration:"underline",fontSize:"12px",padding:"none",position:"absolute",top:"-17px",right:0,cursor:"pointer",color:m.colors.text.secondary,"&:hover":{color:m.colors.text.primary}})}}},93854:(ne,A,e)=>{"use strict";e.d(A,{A5:()=>v,TM:()=>h,Tm:()=>m,cu:()=>f,hI:()=>E,m6:()=>p,u4:()=>c});var n=e(99885),a=e(62963),s=e(22429),l=e(75735),r=e(83458);async function c(y){return y.query&&y.query.indexOf("folder:current")>=0&&(y={...y,location:await i(),query:y.query.replace("folder:current","").trim()},y.query?.length||(y.query="*")),Promise.resolve(y)}async function i(){try{let y=(0,s.UA)().getCurrent();return y||(await o(500),y=(0,s.UA)().getCurrent()),Promise.resolve(y?.meta?.folderUid)}catch(y){console.error(y)}}function o(y){return new Promise(d=>setTimeout(d,y))}function h(y,d){return y==="dashboard"?"apps":y==="folder"?d?"folder-open":"folder":y==="sharedwithme"?"users-alt":"question-circle"}function f(y,d){return y&&(0,a.I2)(y.uid)?"users-alt":h(y.kind,d)}function g(y){switch(y){case"dashboard":case"folder":case"panel":return y;default:return"dashboard"}}function u(y){return y!==null&&typeof y=="object"&&"locationInfo"in y}function E(y,d){const x=d?.dataFrame.meta?.custom,b=u(x)?x:void 0,D={kind:g(y.kind),uid:y.uid,title:y.name,url:y.url,tags:y.tags??[],managedBy:y.managedBy},C=b?.sortBy;if(C){const P=y[C];(typeof P=="string"||typeof P=="number")&&(D.sortMetaName=C,D.sortMeta=P)}if(y.location){const P=y.location.split("/"),T=P[P.length-1],O=b?.locationInfo[T];O&&(D.parentTitle=O.name,D.parentKind=O.kind,D.parentUID=T)}return D}function v(y){return y.items.map(d=>{const x={resource:"dashboards",name:d.metadata.name,title:d.spec?.title,location:"general",folder:d?.metadata?.annotations?.[l.ew]??"general",tags:d.spec?.tags||[],field:{},url:""};return x.folder?x:{...x,location:"general",folder:"general"}})}function p(y){return y.map(d=>{const x={type:d.resource==="folders"?r.G.DashFolder:r.G.DashDB,title:d.title,uid:d.name,url:d.url,tags:d.tags||[],isDeleted:!0,sortMeta:0};return d.folder&&d.folder!=="general"&&(x.folderUid=d.folder),x})}function m(y,d){let x=y;if(d.query&&d.query.trim()!==""&&d.query!=="*"||d.tag&&d.tag.length>0){const b=d.query||d.tag?.join(",")||"",D=y.map(P=>`${P.title},${P.tags.join(",")}`);x=(0,n.X)(D,b).map(P=>y[P])}if(d.sort){const b=new Intl.Collator,D=d.sort==="alpha-desc"?-1:1;x.sort((C,P)=>D*b.compare(C.title,P.title))}return x}},93922:(ne,A,e)=>{"use strict";e.d(A,{EC:()=>i,L_:()=>r,YS:()=>l,bA:()=>c,wV:()=>o});var n=e(68143),a=e(6890),s=e(74396);function l(h={getBackendSrv:n.AI}){return async f=>{const g=await h.getBackendSrv().get("/api/org");return f((0,s.bK)(g)),g}}function r(h={getBackendSrv:n.AI}){return async(f,g)=>{const u=g().organization.organization;await h.getBackendSrv().put("/api/org",{name:u.name}),f((0,a.YA)(u.name)),f(l(h))}}function c(h,f={getBackendSrv:n.AI}){return async g=>{const u=await f.getBackendSrv().post("/api/user/using/"+h);g((0,a.YA)(u.name))}}function i(h,f={getBackendSrv:n.AI}){return async g=>{const u=await f.getBackendSrv().post("/api/orgs/",h);g(c(u.orgId))}}function o(h={getBackendSrv:n.AI}){return async f=>{const g=await h.getBackendSrv().get("/api/user/orgs");return f((0,s.Bz)(g)),g}}},93948:(ne,A,e)=>{"use strict";e.d(A,{a:()=>E,t:()=>u});var n=e(74848),a=e(41119),s=e(79118),l=e(55386),r=e(95004),c=e(739),i=e(63142),o=e(53568),h=e(21539),f=e(53431),g=e(74198);const u={type:c.ob.Sparkline,drawStyle:c.GR.Line,lineInterpolation:c.dx.Smooth,lineWidth:1,fillOpacity:17,gradientMode:c.on.Hue,pointSize:2,barAlignment:c.Nj.Center,showPoints:c.yL.Never,hideValue:!1},E=m=>{const{field:y,innerWidth:d,tableStyles:x,cell:b,cellProps:D,timeRange:C}=m,P=v(b.value),T=(0,i.$j)();if(!P)return(0,n.jsx)("div",{...D,className:x.cellContainer,children:y.config.noValue||"no data"});P.x&&!P.x.config.interval&&P.x.values.length>1&&(P.x.config.interval=P.x.values[1]-P.x.values[0]),P.y.values=P.y.values.map(I=>Number.isFinite(I)?I:null);const O=(0,s.AP)(P.y);P.y.config.min=O.min,P.y.config.max=O.max,P.y.state={range:O},P.timeRange=C;const S=p(y),B={color:y.config.color,custom:{...u,...S}},K=y.config.custom?.cellOptions?.hideValue;let U=0,F=null;if(!K){const I=(0,a.LI)(b.value)?b.value.value:null,V=y.display(I),M=(0,g.zi)(y,V,b.row.index);U=(0,o.kD)((0,l.cN)(M),16).width+T.spacing.gridSize,F=(0,n.jsx)(h.i,{style:{width:`${U-T.spacing.gridSize}px`,textAlign:"right",marginRight:T.spacing(1)},value:V})}return(0,n.jsxs)("div",{...D,className:x.cellContainer,children:[F,(0,n.jsx)("div",{children:(0,n.jsx)(f.O,{width:d-U,height:x.cellHeightInner,sparkline:P,config:B,theme:x.theme})})]})};function v(m){if(Array.isArray(m))return{y:{name:"test",type:r.PU.number,values:m,config:{}}};if((0,a.ci)(m)){const y=m.fields.find(x=>x.type===r.PU.time),d=m.fields.find(x=>x.type===r.PU.number);if(y&&d)return{x:y,y:d}}}function p(m){let y=(0,g.bk)(m);if(y.type===c.ob.Auto&&(y={...y,type:c.ob.Sparkline}),y.type===c.ob.Sparkline)return y;throw new Error(`Expected options type ${c.ob.Sparkline} but got ${y.type}`)}},94018:(ne,A,e)=>{"use strict";e.d(A,{v:()=>g});var n=e(74848),a=e(22803),s=e(96540),l=e(70255),r=e(63142),c=e(21348),i=e(48542),o=e(30703);const h=(0,s.forwardRef)(({name:v,onClick:p,icon:m,className:y,colorIndex:d,...x},b)=>{const D=(0,r.$j)(),C=E(D,v,d),P=O=>{O.preventDefault(),O.stopPropagation(),p?.(v,O)},T=(0,a.cx)(C.wrapper,y,{[C.hover]:p!==void 0});return p?(0,n.jsxs)("button",{...x,className:T,onClick:P,ref:b,children:[m&&(0,n.jsx)(o.I,{name:m}),v]}):(0,n.jsxs)("span",{...x,className:T,ref:b,children:[m&&(0,n.jsx)(o.I,{name:m}),v]})});h.displayName="Tag";const f=({rootProps:v})=>{const p=(0,r.of)(u);return(0,n.jsx)(l.A,{width:60,height:22,containerClassName:p.container,...v})},g=(0,c.j)(h,f),u=()=>({container:(0,a.css)({lineHeight:1})}),E=(v,p,m)=>{let y;return m===void 0?y=(0,i.MC)(p):y=(0,i.yC)(m),{wrapper:(0,a.css)({appearance:"none",borderStyle:"none",fontWeight:v.typography.fontWeightMedium,fontSize:v.typography.size.sm,lineHeight:v.typography.bodySmall.lineHeight,verticalAlign:"baseline",backgroundColor:y.color,color:v.v1.palette.gray98,whiteSpace:"pre",textShadow:"none",padding:"3px 6px",borderRadius:v.shape.radius.default}),hover:(0,a.css)({"&:hover":{opacity:.85,cursor:"pointer"}})}}},94076:(ne,A,e)=>{"use strict";e.d(A,{A:()=>a,X:()=>s});var n=e(96540);function a({children:l,onSetScrollRef:r,divId:c}){const i=(0,n.useRef)(null);return(0,n.useEffect)(()=>{r&&r(new s(document.documentElement))},[i,r]),l}class s{constructor(r){this.element=r}get scrollTop(){return this.element.scrollTop}scrollTo(r,c,i=0){if(!(this.element.scrollHeight-this.element.clientHeight-c>=0)&&i<10){requestAnimationFrame(()=>this.scrollTo(r,c,i+1));return}this.element.scrollTo(r,c)}}},94232:(ne,A,e)=>{"use strict";e.d(A,{u:()=>a});var n=e(96540);function a(s,l){const[r,c]=(0,n.useState)();return(0,n.useEffect)(()=>{const i=s.subscribe(l,c);return()=>i.unsubscribe()},[s,l]),r}},94380:(ne,A,e)=>{"use strict";e.d(A,{A:()=>G});var n=e(74848),a=e(32899),s=e(92745),l=e(87063),r=e(88559),c=e(45229),i=e(64762),o=e(70327),h=e(96137),f=e(67598),g=e(80218),u=e(71639);function E(){const[w]=(0,u.D)(),[_]=o.hK.endpoints.upsertRuleGroupForNamespace.useMutation(),Q=(0,s.t)("alerting.rules.pause-rule.success","Rule evaluation paused"),ae=(0,s.t)("alerting.rules.resume-rule.success","Rule evaluation resumed");return(0,g.Yb)(async(q,k,ee)=>{const j=(0,f.Rc)(q),J=(0,h.LH)({uid:k,pause:ee}),{newRuleGroupDefinition:Z,rulerConfig:te}=await w(j,[J]);return _({rulerConfig:te,namespace:q.namespace.uid,payload:Z,notificationOptions:{successMessage:ee?Q:ae}}).unwrap()})}var v=e(77256);const m=({uid:w,isPaused:_,groupIdentifier:Q,onPauseChange:ae})=>{const q=(0,i._2)(),[k,ee]=E(),[j,J]=_?["play","Resume evaluation"]:["pause","Pause evaluation"],Z=async te=>{try{await k.execute(Q,w,te)}catch(se){q.error(`Failed to ${te?"pause":"resume"} the rule: ${(0,v.JZ)(se)}`);return}ae?.()};return(0,n.jsx)(l.W.Item,{label:J,icon:j,disabled:(0,g.VP)(ee),onClick:()=>{Z(!_)}})};var y=e(50072),d=e(96540),x=e(54092),b=e(46907),D=e(24619),C=e(29609);function P(w,_){const Q=(0,d.useRef)([]),ae=T(w,_),{links:q}=(0,b.U)(ae);if(!w)return Q.current;const k=(0,C.uo)(w),ee=w.type;if(!k||!ee)return Q.current;const{pluginId:j}=k;return q.filter(J=>J.pluginId===j)}function T(w,_){return(0,d.useMemo)(()=>{if(!w)return{extensionPointId:""};const Q=w.type,{namespace:ae,groupName:q}=_,k="uid"in ae?ae.uid:ae.name;switch(Q){case D.JS.Alerting:return{extensionPointId:x.SM.AlertingAlertingRuleAction,context:{name:w.name,namespace:k,group:q,expression:w.query,labels:w.labels??{},annotations:w.annotations??{}}};case D.JS.Recording:return{extensionPointId:x.SM.AlertingRecordingRuleAction,context:{name:w.name,namespace:k,group:q,expression:w.query,labels:w.labels??{}}};default:return{extensionPointId:""}}},[_,w])}var O=e(16692),S=e(94646),B=e(92367),K=e(45967),U=e(3986),F=e(182),I=e(28405);const V=(0,F.Wx)(),M=({title:w="",severity:_="",url:Q=""})=>{const ae=createBridgeURL(V,"/incidents/declare",{title:w,severity:_,url:Q}),{loading:q,installed:k,settings:ee}=usePluginBridge(V);return jsxs(Fragment,{children:[q===!0&&jsx(Button,{icon:"fire",size:"sm",type:"button",disabled:!0,children:jsx(Trans,{i18nKey:"alerting.declare-incident-button.declare-incident",children:"Declare Incident"})}),k===!1&&jsx(Tooltip,{content:t("alerting.declare-incident-button.content-grafana-incident-installed-configured-correctly","Grafana Incident is not installed or is not configured correctly"),children:jsx(Button,{icon:"fire",size:"sm",type:"button",disabled:!0,children:jsx(Trans,{i18nKey:"alerting.declare-incident-button.declare-incident",children:"Declare Incident"})})}),ee&&jsx(LinkButton,{icon:"fire",size:"sm",type:"button",href:ae,children:jsx(Trans,{i18nKey:"alerting.declare-incident-button.declare-incident",children:"Declare Incident"})})]})},L=({title:w="",severity:_="",url:Q=""})=>{const ae=(0,I.h)(V,"/incidents/declare",{title:w,severity:_,url:Q}),{loading:q,installed:k,settings:ee}=(0,U._)(V);return(0,n.jsxs)(n.Fragment,{children:[q===!0&&(0,n.jsx)(l.W.Item,{label:(0,s.t)("alerting.declare-incident-menu-item.label-declare-incident","Declare incident"),icon:"fire",disabled:!0}),k===!1&&(0,n.jsx)(K.m,{content:(0,s.t)("alerting.declare-incident-menu-item.content-grafana-incident-installed-configured-correctly","Grafana Incident is not installed or is not configured correctly"),children:(0,n.jsx)(l.W.Item,{label:(0,s.t)("alerting.declare-incident-menu-item.label-declare-incident","Declare incident"),icon:"fire",disabled:!0})}),ee&&(0,n.jsx)(l.W.Item,{label:(0,s.t)("alerting.declare-incident-menu-item.label-declare-incident","Declare incident"),url:ae,icon:"fire"})]})},N=({promRule:w,rulerRule:_,identifier:Q,groupIdentifier:ae,handleSilence:q,handleDelete:k,handleDuplicateRule:ee,onPauseChange:j,buttonSize:J,fill:Z})=>{const[te,se,ie,ce,re]=(0,O.Gy)(_,ae,[O.j5.Pause,O.j5.Delete,O.j5.Duplicate,O.j5.Silence,O.j5.ModifyExport]),[ue,X,le,he,fe]=(0,O.M6)(C.R$.grafana.rule(w)?w:O.hT,[O.j5.Pause,O.j5.Delete,O.j5.Duplicate,O.j5.Silence,O.j5.ModifyExport]),[Ce,Ae]=te,[_e,Xe]=ue,De=Ce&&Ae||_e&&Xe,[Me,Te]=se,[$e,Re]=X,Ke=Me&&Te||$e&&Re,[Ve,Se]=ie,[Ye,Ue]=le,je=Ve&&Se||Ye&&Ue,[Qe,He]=ce,[Je,de]=he,ve=Qe&&He||Je&&de,[me,xe]=re,[Ee,Pe]=fe,Oe=me&&xe||Ee&&Pe,We=P(w,ae),Fe=We.length>0,Be=(!(0,v.y$)()||(0,v.ES)())&&C.R$.alertingRule(w)&&w.state===D.cF.Firing,Le=(0,v.S2)(Q),Ge=[De,ve,Be,je].some(Boolean)&&[Oe].some(Boolean),Ze=(0,C.xE)(_??w),qe=C.p.grafana.rule(_)&&(0,C.hC)(_)||C.R$.grafana.rule(w)&&w.isPaused,at=(0,n.jsxs)(n.Fragment,{children:[De&&Ze&&ae.groupOrigin==="grafana"&&(0,n.jsx)(m,{uid:Ze,isPaused:qe,groupIdentifier:ae,onPauseChange:j}),ve&&(0,n.jsx)(l.W.Item,{label:(0,s.t)("alerting.alert-menu.silence-notifications","Silence notifications"),icon:"bell-slash",onClick:q}),Be&&(0,n.jsx)(L,{title:w.name,url:""}),je&&(0,n.jsx)(l.W.Item,{label:(0,s.t)("alerting.alert-menu.duplicate","Duplicate"),icon:"copy",onClick:()=>ee(Q)}),Ge&&(0,n.jsx)(l.W.Divider,{}),Le&&(0,n.jsx)(l.W.Item,{label:(0,s.t)("alerting.alert-menu.copy-link","Copy link"),icon:"share-alt",onClick:()=>R(Le)}),Oe&&(0,n.jsx)(l.W.Item,{label:(0,s.t)("alerting.alert-menu.export","Export"),icon:"download-alt",childItems:[(0,n.jsx)(W,{identifier:Q},"export-with-modifications")]}),Fe&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.W.Divider,{}),We.map(ht=>(0,n.jsx)(l.W.Item,{label:ht.title,icon:ht.icon,onClick:ht.onClick},ht.id))]}),Ke&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.W.Divider,{}),(0,n.jsx)(l.W.Item,{label:(0,s.t)("alerting.common.delete","Delete"),icon:"trash-alt",destructive:!0,onClick:()=>{(0,C.aw)(Q)&&k(Q,ae)}})]})]});return(0,n.jsx)(r.m,{overlay:(0,n.jsx)(l.W,{children:at}),placement:"bottom",children:(0,n.jsx)(y.A,{size:J,fill:Z})})},W=({identifier:w})=>{const _=window.location.pathname+window.location.search,Q=(0,B.G)(`/alerting/${encodeURIComponent(S.$9(w))}/modify-export`,{returnTo:_});return(0,n.jsx)(l.W.Item,{label:(0,s.t)("alerting.alert-menu.with-modifications","With modifications"),icon:"file-edit-alt",url:Q},"with-modifications")};function R(w){navigator.clipboard?.writeText(w).then(()=>{c.A.emit(a.r1.alertSuccess,["URL copied to clipboard"])})}const G=N},94452:(ne,A,e)=>{"use strict";e.d(A,{E:()=>a,c:()=>s});const n="__searchFilter",a=l=>l&&typeof l=="string"?l.indexOf(n)!==-1:!1,s=l=>{const{query:r,wildcardChar:c}=l;if(!a(r))return{};let{options:i}=l;return i=i||{searchFilter:""},{__searchFilter:{value:i.searchFilter?`${i.searchFilter}${c}`:`${c}`,text:""}}}},94535:(ne,A,e)=>{"use strict";e.d(A,{D:()=>v});var n=e(74848),a=e(22803),s=e(96540),l=e(92745),r=e(63142),c=e(35484),i=e(30703),o=e(41654),h=e(51898),f=e(92132);const g=m=>{if(!m)return!1;const y=m.parentElement.getBoundingClientRect(),d=m.getBoundingClientRect();return d.width!==0&&y.right+d.width+10>window.innerWidth},u=(0,s.memo)(({items:m,isOpen:y,close:d,customStyle:x})=>{const b=(0,r.of)(E),D=(0,s.useRef)(null),[C]=(0,f.t)({localRef:D,isMenuOpen:y,close:d}),[P,T]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{y&&D.current&&T(g(D.current))},[y]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:b.iconWrapper,"aria-hidden":!0,"data-testid":h.Tp.components.Menu.SubMenu.icon,children:(0,n.jsx)(i.I,{name:"angle-right",className:b.icon})}),y&&(0,n.jsx)("div",{ref:D,className:(0,a.cx)(b.subMenu,{[b.pushLeft]:P}),"data-testid":h.Tp.components.Menu.SubMenu.container,style:x,children:(0,n.jsx)("div",{tabIndex:-1,className:b.itemsWrapper,role:"menu",onKeyDown:C,children:m})})]})});u.displayName="SubMenu";const E=m=>({iconWrapper:(0,a.css)({display:"flex",flex:1,justifyContent:"end"}),icon:(0,a.css)({opacity:.7,marginLeft:m.spacing(1),color:m.colors.text.secondary}),itemsWrapper:(0,a.css)({background:m.colors.background.elevated,padding:m.spacing(.5),boxShadow:m.shadows.z3,display:"inline-block",borderRadius:m.shape.radius.default}),pushLeft:(0,a.css)({right:"100%",left:"unset"}),subMenu:(0,a.css)({position:"absolute",top:0,left:"100%",zIndex:m.zIndex.dropdown})}),v=s.memo(s.forwardRef((m,y)=>{const{url:d,icon:x,label:b,description:D,ariaLabel:C,ariaChecked:P,target:T,onClick:O,className:S,active:B,disabled:K,destructive:U,childItems:F,role:I,tabIndex:V=-1,customSubMenuContainerStyles:M,shortcut:L,testId:N}=m,W=(0,r.of)(p),[R,G]=(0,s.useState)(B),[w,_]=(0,s.useState)(!1),Q=(0,s.useCallback)(()=>{K||(_(!0),G(!0))},[K]),ae=(0,s.useCallback)(()=>{K||(_(!1),G(!1))},[K]),q=F&&F.length>0,k=q?"div":d===void 0?"button":"a",ee=(0,a.cx)({[W.item]:!0,[W.active]:R,[W.disabled]:K,[W.destructive]:U&&!K},S),j={[k==="button"?"disabled":"aria-disabled"]:K,...k==="a"&&K&&{href:void 0,onClick:void 0},...K&&{tabIndex:-1,"data-disabled":K}},J=(0,s.useRef)(null);(0,s.useImperativeHandle)(y,()=>J.current);const Z=ie=>{switch(ie.key){case"ArrowRight":ie.preventDefault(),ie.stopPropagation(),q&&(_(!0),G(!0));break;default:break}},te=()=>{_(!1),G(!1),J?.current?.focus()},se=!!(L&&L.length>0);return(0,n.jsxs)(k,{target:T,className:ee,rel:T==="_blank"?"noopener noreferrer":void 0,href:d,onClick:ie=>{q&&!w&&(ie.preventDefault(),ie.stopPropagation()),O?.(ie)},onMouseEnter:Q,onMouseLeave:ae,onKeyDown:Z,role:d?I:I||"menuitem","data-role":"menuitem",ref:J,"data-testid":N,"aria-label":C,"aria-checked":P,tabIndex:V,...j,children:[(0,n.jsxs)(o.B,{direction:"row",justifyContent:"flex-start",alignItems:"center",children:[x&&(0,n.jsx)(i.I,{name:x,className:W.icon,"aria-hidden":!0}),(0,n.jsx)("span",{className:W.ellipsis,children:b}),(0,n.jsxs)("div",{className:(0,a.cx)(W.rightWrapper,{[W.withShortcut]:se}),children:[se&&(0,n.jsxs)("div",{className:W.shortcut,children:[(0,n.jsx)(i.I,{name:"keyboard",title:(0,l.t)("grafana-ui.menu-item.keyboard-shortcut-label","Keyboard shortcut")}),L]}),q&&(0,n.jsx)(u,{items:F,isOpen:w,close:te,customStyle:M})]})]}),D&&(0,n.jsx)("div",{className:(0,a.cx)(W.description,W.ellipsis,{[W.descriptionWithIcon]:x!==void 0}),children:D}),m.component?(0,n.jsx)(m.component,{}):null]})}));v.displayName="MenuItem";const p=m=>({item:(0,a.css)({background:"none",cursor:"pointer",whiteSpace:"nowrap",color:m.colors.text.primary,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center",padding:m.spacing(.5,1.5),minHeight:m.spacing(4),borderRadius:m.shape.radius.default,margin:0,border:"none",width:"100%",position:"relative","&:hover, &:focus-visible":{background:m.colors.action.hover,color:m.colors.text.primary,textDecoration:"none"},"&:focus-visible":(0,c.getFocusStyles)(m)}),active:(0,a.css)({background:m.colors.action.hover}),destructive:(0,a.css)({color:m.colors.error.text,svg:{color:m.colors.error.text},"&:hover, &:focus, &:focus-visible":{background:m.colors.error.main,color:m.colors.error.contrastText,svg:{color:m.colors.error.contrastText}}}),disabled:(0,a.css)({color:m.colors.action.disabledText,label:"menu-item-disabled","&:hover, &:focus, &:focus-visible":{cursor:"not-allowed",background:"none",color:m.colors.action.disabledText}}),icon:(0,a.css)({opacity:.7,color:m.colors.text.secondary}),rightWrapper:(0,a.css)({display:"flex",alignItems:"center",marginLeft:"auto"}),withShortcut:(0,a.css)({minWidth:m.spacing(10.5)}),shortcut:(0,a.css)({display:"flex",alignItems:"center",gap:m.spacing(1),marginLeft:m.spacing(2),color:m.colors.text.secondary}),description:(0,a.css)({...m.typography.bodySmall,color:m.colors.text.secondary,textAlign:"start"}),descriptionWithIcon:(0,a.css)({marginLeft:m.spacing(3)}),ellipsis:(0,a.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})})},94543:(ne,A,e)=>{"use strict";e.d(A,{$_:()=>T,GA:()=>K,GH:()=>x,Iy:()=>O,JA:()=>D,QP:()=>U,Xk:()=>B,eM:()=>y,hO:()=>d,iO:()=>C,ke:()=>S,zY:()=>b});var n=e(65307),a=e(17548),s=e(25229),l=e(32899),r=e(28105),c=e(92745),i=e(2863),o=e(90811),h=e(45229),f=e(62635),g=e(23237),u=e(75421),E=e(74746),v=e(34984),p=e(35231),m=e(19050);const y=(0,n.VP)("explore/changeRange"),d=(0,n.VP)("explore/changeRefreshInterval"),x=F=>(I,V)=>{const{syncedTimes:M}=V().explore;M?Object.keys(V().explore.panes).forEach(L=>{I(D({...F,exploreId:L})),I((0,m.Od)({exploreId:L,preserveCache:!0}))}):(I(D({...F})),I((0,m.Od)({exploreId:F.exploreId,preserveCache:!0})))},b=F=>I=>{I((0,m.S6)({...F}))},D=F=>(I,V)=>{const{exploreId:M,absoluteRange:L,rawRange:N}=F,W=V().explore.panes[M],R=(0,v.O)(V().user),G=(0,v.q)(V().user),{range:w}=W;let _=w.raw;L&&(_={from:(0,s.oZ)(R,L.from),to:(0,s.oZ)(R,L.to)}),N&&(_=N);const Q=(0,f.zq)(R,_,G),ae={from:Q.from.valueOf(),to:Q.to.valueOf()};(0,u.jG)().init({timepicker:{},getTimezone:()=>R,timeRangeUpdated(q){},time:Q.raw}),(0,i.w)().updateTimeRange(Q),I(y({exploreId:M,range:Q,absoluteRange:ae}))};function C(F){return(I,V)=>{const M=V().explore.panes[F].range.raw;Object.keys(V().explore.panes).filter(N=>N!==F).forEach(N=>{I(x({exploreId:N,rawRange:M}))});const L=V().explore.syncedTimes;I((0,p.qz)({syncedTimes:!L}))}}function P(F){return(I,V)=>{const M=(0,v.O)(V().user),L=(0,v.q)(V().user);Object.entries(V().explore.panes).forEach(([N,W])=>{const R=(0,f.zq)(M,W.range.raw,L);F(N,W,R,I)})}}function T(){return P((F,I,V,M)=>{const L={from:V.from.valueOf(),to:V.to.valueOf()};M(x({exploreId:F,absoluteRange:L}))})}function O(F){return P((I,V,M,L)=>{const N=(0,g.Wb)(F,M);L(x({exploreId:I,absoluteRange:N}))})}function S(F){return P((I,V,M,L)=>{const N=(0,g.Zk)(M,F);L(x({exploreId:I,absoluteRange:N}))})}function B(){return(F,I)=>{const V=I().explore.panes[Object.keys(I().explore.panes)[0]].range.raw,M=a.formatRawTimeRange(V);navigator.clipboard.writeText(JSON.stringify(M)),h.A.emit(l.r1.alertSuccess,[(0,c.t)("time-picker.copy-paste.copy-success-message","Time range copied to clipboard")])}}function K(){return async(F,I)=>{const{range:V,isError:M}=await(0,g.zG)();if(M===!0){h.A.emit(l.r1.alertError,[(0,c.t)("time-picker.copy-paste.default-error-title","Invalid time range"),(0,c.t)("time-picker.copy-paste.default-error-message","{{error}} is not a valid time range",{error:V})]);return}const L={from:(0,g.EX)(V.from),to:(0,g.EX)(V.to)};if(I().explore.syncedTimes){F(x({exploreId:Object.keys(I().explore.panes)[0],rawRange:L})),F(x({exploreId:Object.keys(I().explore.panes)[1],rawRange:L}));return}F(x({exploreId:Object.keys(I().explore.panes)[0],rawRange:L}))}}const U=(F,I)=>{if(d.match(I)){const{refreshInterval:V}=I.payload,M=o.cC.isLive(V),L=(0,f.uE)(V),N=(0,E.zy)(F.logsResult,L);return o.cC.isLive(F.refreshInterval)&&!M&&(0,f._u)(F.querySubscription),{...F,refreshInterval:V,queryResponse:{...F.queryResponse,state:M?r.Gu.Streaming:r.Gu.Done},isLive:M,isPaused:M?!1:F.isPaused,logsResult:N}}if(y.match(I)){const{range:V,absoluteRange:M}=I.payload;return{...F,range:V,absoluteRange:M}}return F}},94626:(ne,A,e)=>{"use strict";e.d(A,{a:()=>h});var n=e(74848),a=e(29189),s=e(43173),l=e(83793),r=e(34624),c=e(91156),i=e(75735),o=e(27321);function h({repositoryName:E,showAllFolders:v,...p}){const m=(0,o.F)(),y=s.$.featureToggles.provisioning,{data:d}=(0,l.F9)(y?void 0:a.hT),x=!E,b=f({isProvisionedInstance:m,provisioningEnabled:y,repositoryName:E}),D=g({isProvisionedInstance:m,isNonProvisionedResource:x,provisioningEnabled:y,settingsData:d}),C=u({isProvisionedInstance:m,rootFolderUID:b,settingsDataItem:d?.items});return(0,n.jsx)(c.d,{...p,rootFolderUID:v?void 0:b,excludeUIDs:v?void 0:[...D,...p.excludeUIDs||[]],rootFolderItem:v?void 0:C})}function f({isProvisionedInstance:E,provisioningEnabled:v,repositoryName:p}){if(!E&&v&&p)return p}function g({isProvisionedInstance:E,isNonProvisionedResource:v,provisioningEnabled:p,settingsData:m}){return E?[]:v?p?m?.items.map(y=>y.name)||[]:[]:[]}function u({isProvisionedInstance:E,rootFolderUID:v,settingsDataItem:p}){if(E)return;const m=p?.find(y=>y.name===v);return m?(0,r.P)({title:m.title,uid:m.name,managedBy:i.Sf.Repo}):void 0}},94644:(ne,A,e)=>{"use strict";e.d(A,{Is:()=>h,ZF:()=>i,mA:()=>c,tD:()=>r,v2:()=>o});var n=e(37615),a=e(35814),s=e(78830),l=e(11594);class r extends l.Ud{constructor(g){super(),this.DataSourceClass=g,this.components={}}setConfigEditor(g){return this.components.ConfigEditor=g,this}setConfigCtrl(g){return(0,n.l)("DataSourcePlugin","setConfigCtrl"),this.angularConfigCtrl=g,this}setQueryCtrl(g){return(0,n.l)("DataSourcePlugin","setQueryCtrl"),this.components.QueryCtrl=g,this}setAnnotationQueryCtrl(g){return this.components.AnnotationsQueryCtrl=g,this}setQueryEditor(g){return this.components.QueryEditor=g,this}setExploreQueryField(g){return this.components.ExploreQueryField=g,this}setExploreMetricsQueryField(g){return this.components.ExploreMetricsQueryField=g,this}setExploreLogsQueryField(g){return this.components.ExploreLogsQueryField=g,this}setQueryEditorHelp(g){return this.components.QueryEditorHelp=g,this}setExploreStartPage(g){return this.setQueryEditorHelp(g)}setVariableQueryEditor(g){return this.components.VariableQueryEditor=g,this}setMetadataInspector(g){return this.components.MetadataInspector=g,this}setComponentsFromLegacyExports(g){(0,s.M)(g),this.components.QueryCtrl=g.QueryCtrl,this.components.AnnotationsQueryCtrl=g.AnnotationsQueryCtrl,this.components.ExploreQueryField=g.ExploreQueryField,this.components.QueryEditor=g.QueryEditor,this.components.QueryEditorHelp=g.QueryEditorHelp,this.components.VariableQueryEditor=g.VariableQueryEditor}}class c{constructor(g){this.name=g.name,this.id=g.id,this.type=g.type,this.meta=g.meta,this.cachingConfig=g.cachingConfig,this.uid=g.uid,this.apiVersion=g.apiVersion}filterQuery(g){return!0}getRef(){const g={type:this.type,uid:this.uid};return this.apiVersion&&(g.apiVersion=this.apiVersion),g}}var i=(f=>(f.Logs="Logs",f.Metrics="Metrics",f.Tracing="Tracing",f))(i||{}),o=(f=>(f.Cancelled="cancelled",f.Timeout="timeout",f.Unknown="unknown",f))(o||{});class h{}h=(0,a.Y)(h),c=(0,a.Y)(c)},94646:(ne,A,e)=>{"use strict";e.d(A,{$9:()=>T,LC:()=>p,Lg:()=>u,Ns:()=>S,P1:()=>h,PH:()=>b,Tn:()=>U,UP:()=>E,VY:()=>V,c:()=>D,co:()=>f,h1:()=>F,jY:()=>K,mw:()=>g,qg:()=>C,uE:()=>M,vL:()=>B,x6:()=>P});var n=e(2543),a=e.n(n),s=e(36490),l=e(24619),r=e(74268),c=e(74869),i=e(52161),o=e(29609);function h(L,N,W,R){return o.p.grafana.rule(R)?{uid:R.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:L,namespace:N,groupName:W,ruleName:(0,o.qz)(R),rulerRuleHash:S(R)}}function f(L,N){if(L.groupOrigin==="grafana"){if(o.p.grafana.rule(N))return{uid:N.grafana_alert.uid,ruleSourceName:"grafana"};throw(0,r.vV)(new Error("Rule is not a Grafana Ruler rule")),new Error("Rule is not a Grafana Ruler rule")}return h(L.rulesSource.name,L.namespace.name,L.groupName,N)}function g(L,N){const{dataSourceName:W,namespaceName:R,groupName:G}=L;return h(W,R,G,N)}function u(L,N,W,R){return{ruleSourceName:L,namespace:N,groupName:W,ruleName:R.name,ruleHash:K(R)}}function E(L,N){const W=N.namespace.name,R=N.group.name;if(N.rulerRule)return h(L,W,R,N.rulerRule);if(N.promRule)return u(L,W,R,N.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function v(L){return h(L.ruleSourceName,L.namespace,L.group.name,L.rule)}function p(L,N){return(0,o.A4)(L)&&(0,o.A4)(N)?L.uid===N.uid:(0,o.X4)(L)&&(0,o.X4)(N)?L.groupName===N.groupName&&L.namespace===N.namespace&&L.ruleName===N.ruleName&&L.rulerRuleHash===N.rulerRuleHash&&L.ruleSourceName===N.ruleSourceName:(0,o.Mj)(L)&&(0,o.Mj)(N)?L.groupName===N.groupName&&L.namespace===N.namespace&&L.ruleName===N.ruleName&&L.ruleHash===N.ruleHash&&L.ruleSourceName===N.ruleSourceName:(0,o.X4)(L)&&(0,o.Mj)(N)?L.groupName===N.groupName&&L.namespace===N.namespace&&L.ruleName===N.ruleName&&L.rulerRuleHash===N.ruleHash&&L.ruleSourceName===N.ruleSourceName:(0,o.Mj)(L)&&(0,o.X4)(N)?L.groupName===N.groupName&&L.namespace===N.namespace&&L.ruleName===N.ruleName&&L.ruleHash===N.rulerRuleHash&&L.ruleSourceName===N.ruleSourceName:!1}const m="cri",y="pri";function d(L){return L.replace(/\$/g,"_DOLLAR_")}function x(L){return L.replace(/\_DOLLAR\_/g,"$")}function b(L){return L.replace(/\//g,"").replace(/\\/g,"")}function D(L){return L.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function C(L,N=!1){const R=(N?decodeURIComponent(L):L).split("$");if(R.length===1)return{uid:L,ruleSourceName:"grafana"};if(R.length===6){const[G,w,_,Q,ae,q]=R.map(x).map(D);if(G===m)return{ruleSourceName:w,namespace:_,groupName:Q,ruleName:ae,rulerRuleHash:q};if(G===y)return{ruleSourceName:w,namespace:_,groupName:Q,ruleName:ae,ruleHash:q}}throw new Error(`Failed to parse rule location: ${L}`)}function P(L,N=!1){if(L)try{return C(L,N)}catch{return}}function T(L){return(0,o.A4)(L)?L.uid:(0,o.X4)(L)?[m,L.ruleSourceName,L.namespace,L.groupName,L.ruleName,L.rulerRuleHash].map(String).map(d).map(b).join("$"):[y,L.ruleSourceName,L.namespace,L.groupName,L.ruleName,L.ruleHash].map(String).map(d).map(b).join("$")}function O(L){let N=0;if(L.length===0)return N;for(let W=0;W<L.length;W++){const R=L.charCodeAt(W);N=(N<<5)-N+R,N=N&N}return N}function S(L){if(o.p.grafana.rule(L))return L.grafana_alert.uid;const W=!(0,c.wS)(),R=B(L,W);return O(JSON.stringify(R)).toString()}function B(L,N){const W=N?F(L.expr):"",R=I(L.labels);if(o.p.dataSource.recordingRule(L))return[L.record,l.JS.Recording,W,R];if(o.p.dataSource.alertingRule(L))return[L.alert,l.JS.Alerting,W,I(L.annotations),R];throw new Error("Only recording and alerting ruler rules can be hashed")}function K(L){const W=!(0,c.wS)(),R=U(L,W);return O(JSON.stringify(R)).toString()}function U(L,N){const W=N?F(L.query):"",R=I(L.labels);if(o.R$.recordingRule(L))return[L.name,l.JS.Recording,W,R];if(o.R$.alertingRule(L))return[L.name,l.JS.Alerting,W,I(L.annotations),R];throw new Error("Only recording and alerting rules can be hashed")}function F(L){return L.length>1&&L[0]==="("&&L[L.length-1]===")"&&(L=L.slice(1,-1)),L=L.replace(/\s|\n/g,""),L=L.replace(/\\"/g,'"'),L=L.replace(/`([^`]*)`/g,'"$1"'),L=L.replace(/['"()\[\]\\`]/g,""),L.split("").sort().join("")}function I(L){return JSON.stringify(Object.entries(L||{}).sort((N,W)=>N[0].localeCompare(W[0])))}function V(L){return(0,o.A4)(L)?i.hY:L.ruleSourceName}function M(L){const{pathname:N=""}=s.Ny.getLocation(),{id:W}=L;return W?(0,n.nth)(N.split("/"),-2):void 0}},94659:(ne,A,e)=>{"use strict";e.d(A,{vI:()=>o,qH:()=>f});var n=e(75816),a=e(73892),s=e(85618);const l=(0,s.TP)("iam.grafana.app","v0alpha1"),r=(0,n.xP)({baseQuery:(0,a.W)({baseURL:l}),reducerPath:"iamAPIv0alpha1",endpoints:()=>({})}),c=["Display"],i=r.enhanceEndpoints({addTagTypes:c}).injectEndpoints({endpoints:g=>({getDisplayMapping:g.query({query:u=>({url:"/display",params:{key:u.key}}),providesTags:["Display"]})}),overrideExisting:!1}),o=i.enhanceEndpoints({}),{useGetDisplayMappingQuery:h,useLazyGetDisplayMappingQuery:f}=i},94777:(ne,A,e)=>{"use strict";e.d(A,{$:()=>a});var n=e(96453);class a extends n.F{constructor(l){return super(),this.buffer=l.buffer||[],this.capacity=this.buffer.length,this.tail=l.append!=="head",this.index=0,this.add=this.getAddFunction(),l.capacity&&this.setCapacity(l.capacity),new Proxy(this,{get(r,c,i){if(typeof c!="symbol"){const o=+c;if(String(o)===c)return r.get(o)}return Reflect.get(r,c,i)},set(r,c,i,o){if(typeof c!="symbol"){const h=+c;if(String(h)===c)return r.set(h,i),!0}return Reflect.set(r,c,i,o)}})}getAddFunction(){return this.capacity>this.buffer.length?this.tail?l=>{this.buffer.push(l),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:l=>{this.buffer.unshift(l),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?l=>{this.buffer[this.index]=l,this.index=(this.index+1)%this.buffer.length}:l=>{let r=this.index-1;r<0&&(r=this.buffer.length-1),this.buffer[r]=l,this.index=r}}setCapacity(l){if(this.capacity===l)return;const r=this.toArray();if(l>this.length)this.buffer=r;else if(l<this.capacity){const c=this.length-l;this.tail?this.buffer=r.slice(c,r.length):this.buffer=r.slice(0,r.length-c)}this.capacity=l,this.index=0,this.add=this.getAddFunction()}setAppendMode(l){const r=l!=="head";r!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=r,this.add=this.getAddFunction())}reverse(){return this.buffer.reverse()}get(l){return this.buffer[(l+this.index)%this.buffer.length]}set(l,r){this.buffer[(l+this.index)%this.buffer.length]=r}get length(){return this.buffer.length}}},94959:(ne,A,e)=>{"use strict";e.d(A,{z:()=>r});var n=e(74848),a=e(22803),s=e(96540),l=e(51115);const r=({label:i,tooltip:o,labelWidth:h=6,inputWidth:f=12,inputEl:g,className:u,interactive:E,...v})=>{const p=c(),m=(0,s.useId)();return(0,n.jsxs)("div",{className:(0,a.cx)(p.formField,u),children:[(0,n.jsx)(l.I,{htmlFor:m,width:h,tooltip:o,interactive:E,children:i}),g||(0,n.jsx)("input",{id:m,type:"text",className:`gf-form-input ${f?`width-${f}`:""}`,...v,disabled:v.disabled})]})};r.displayName="FormField";const c=()=>({formField:(0,a.css)({display:"flex",flexDirection:"row",alignItems:"flex-start",textAlign:"left",position:"relative"})})},95027:(ne,A,e)=>{"use strict";e.d(A,{o:()=>l,x:()=>s});var n=e(68143);const a={};function s(r,c){const i=a[r];return i?Promise.resolve(i):(0,n.AI)().get(`/api/plugins/${r}/settings`,void 0,void 0,{...c,validatePath:!0}).then(o=>(a[r]=o,o)).catch(o=>typeof o=="object"&&o!==null&&"status"in o&&o.status===403?(o.isHandled=!0,Promise.reject(o)):Promise.reject(new Error("Unknown Plugin")))}const l=r=>r?delete a[r]:Object.keys(a).forEach(c=>delete a[c])},95256:(ne,A,e)=>{"use strict";e.d(A,{Mi:()=>a,P5:()=>s,Sw:()=>n,fu:()=>l});const n="/api/plugins",a="/api/instance",s="/api/gnet",l="plugins"},95395:(ne,A,e)=>{"use strict";e.d(A,{GA:()=>se,aS:()=>re,Qk:()=>ie});var n=e(74848),a=e(22803),s=e(63142),l=e(36219),r=e(7895),c=e(15130),i=e(4590),o=e(75541),h=e(8285),f=e(51898),g=e(92745),u=e(36490),E=e(45861);const v=({dashboard:le})=>(0,n.jsx)(E.$n,{onClick:()=>u.Ny.partial(le.state.editview?{editview:null}:{viewPanel:null,editPanel:null}),tooltip:"",fill:le.state.editview?"text":void 0,variant:"secondary",size:"sm",icon:"arrow-left","data-testid":f.Tp.components.NavToolbar.editDashboard.backToDashboardButton,children:(0,n.jsx)(g.x6,{i18nKey:"dashboard.toolbar.new.back-to-dashboard",children:"Back to dashboard"})});var p=e(30703);const m=({dashboard:le})=>(0,n.jsx)(r.I,{tooltip:(0,g.t)("dashboard.toolbar.new.dashboard-settings.tooltip","Dashboard settings"),icon:(0,n.jsx)(p.I,{name:"cog",size:"lg",type:"default"}),onClick:()=>le.onOpenSettings(),"data-testid":f.Tp.components.NavToolbar.editDashboard.settingsButton}),y=({dashboard:le})=>(0,n.jsx)(E.$n,{onClick:()=>le.state.editPanel?.onDiscard(),tooltip:(0,g.t)("dashboard.toolbar.new.discard-library-panel-changes","Discard library panel changes"),size:"sm",fill:"outline",variant:"destructive","data-testid":f.Tp.components.NavToolbar.editDashboard.discardChangesButton,children:(0,n.jsx)(g.x6,{i18nKey:"dashboard.toolbar.new.discard-library-panel-changes",children:"Discard library panel changes"})});var d=e(96540);const x=({dashboard:le})=>{const he=b(le.state.editPanel);return(0,n.jsx)(E.$n,{onClick:()=>le.state.editPanel?.onDiscard(),tooltip:le.state.editPanel?.state.isNewPanel?(0,g.t)("dashboard.toolbar.new.discard-panel-new","Discard panel"):(0,g.t)("dashboard.toolbar.new.discard-panel","Discard panel changes"),size:"sm",disabled:!he,fill:"outline",variant:"destructive","data-testid":f.Tp.components.NavToolbar.editDashboard.discardChangesButton,children:le.state.editPanel?.state.isNewPanel?(0,n.jsx)(g.x6,{i18nKey:"dashboard.toolbar.new.discard-panel-new",children:"Discard panel"}):(0,n.jsx)(g.x6,{i18nKey:"dashboard.toolbar.new.discard-panel",children:"Discard panel changes"})})};function b(le){const[he,fe]=(0,d.useState)();return(0,d.useEffect)(()=>{if(le){const Ce=le.subscribeToState(Ae=>{Ae.isDirty!==he&&fe(Ae.isDirty)});return()=>Ce.unsubscribe()}},[le,he]),he}var D=e(45967);const C=({icon:le,label:he,checked:fe,checkedIcon:Ce,checkedLabel:Ae,disabled:_e,onClick:Xe,"data-testid":De})=>{const Me=(0,s.of)(P),Te=fe&&Ae?Ae:he,$e=fe&&Ce?Ce:le;return(0,n.jsx)(D.m,{content:Te,children:(0,n.jsx)("button",{"aria-label":Te,className:(0,a.cx)({[Me.container]:!0,[Me.containerChecked]:fe,[Me.containerDisabled]:_e}),"data-testid":De,onClick:_e?void 0:Xe,children:(0,n.jsx)("div",{className:(0,a.cx)(Me.box,fe&&Me.boxChecked),children:(0,n.jsx)(p.I,{name:$e,size:"xs"})})})})},P=le=>({container:(0,a.css)({border:`1px solid ${le.components.input.borderColor}`,padding:le.spacing(.25),backgroundColor:le.components.input.background,borderRadius:le.shape.radius.default,width:le.spacing(5.5),height:le.spacing(3),cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",[le.transitions.handleMotion("no-preference","reduce")]:{transition:"all 0.2s ease-in-out"},"&:hover":{borderColor:le.components.input.borderHover}}),containerChecked:(0,a.css)({backgroundColor:le.colors.primary.main,borderColor:"transparent","&:hover":{backgroundColor:le.colors.primary.shade,borderColor:"transparent"}}),containerDisabled:(0,a.css)({cursor:"initial",background:le.colors.action.disabledBackground,borderColor:le.colors.border.weak}),box:(0,a.css)({background:le.colors.background.primary,display:"flex",alignItems:"center",justifyContent:"center",width:le.spacing(2.5),height:le.spacing(2.5),borderRadius:le.shape.radius.default,transform:"translateX(0)",position:"relative",[le.transitions.handleMotion("no-preference","reduce")]:{transition:"all 0.2s ease-in-out"},"&:after":(0,a.css)({content:"''",position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:le.shape.radius.default,background:le.colors.secondary.main,border:`1px solid ${le.colors.secondary.border}`})}),boxChecked:(0,a.css)({transform:`translateX(calc(100% - ${le.spacing(.25)}))`})}),T=({dashboard:le})=>(0,n.jsx)(C,{checked:!!le.state.isEditing,icon:"pen",label:(0,g.t)("dashboard.toolbar.new.edit-toggle.enter.label","Enter edit mode"),checkedLabel:(0,g.t)("dashboard.toolbar.new.edit-toggle.exit.label","Exit edit mode"),disabled:i._o.state.isPlaying,"data-testid":f.Tp.components.NavToolbar.editDashboard.editButton,onClick:he=>{he.preventDefault(),he.stopPropagation(),le.state.isEditing?le.exitEditMode({skipConfirm:!1}):le.onEnterEditMode()}});var O=e(43173),S=e(58662),B=e(55867),K=e(23289),U=e(93256),F=e(88559),I=e(45229),V=e(87745);const M=({dashboard:le,menu:he,onMenuVisibilityChange:fe,groupTestId:Ce,buttonLabel:Ae,buttonTooltip:_e,buttonTestId:Xe,onButtonClick:De,arrowLabel:Me,arrowTestId:Te,variant:$e="secondary"})=>{const[Re,Ke]=(0,d.useState)(!1);return(0,n.jsxs)(U.e,{"data-testid":Ce,onPointerDown:Ve=>{le.state.isEditing&&le.state.isDirty&&(Ve.preventDefault(),Ve.stopPropagation(),I.A.publish(new V.bY({title:(0,g.t)("dashboard.toolbar.new.share-export.modal.title","Save changes to dashboard?"),text:(0,g.t)("dashboard.toolbar.new.share-export.modal.text","You have unsaved changes to this dashboard. You need to save them before you can share it."),icon:"exclamation-triangle",noText:(0,g.t)("dashboard.toolbar.new.share-export.modal.noText","Discard"),yesText:(0,g.t)("dashboard.toolbar.new.share-export.modal.yesText","Save"),yesButtonVariant:"primary",onConfirm:()=>le.openSaveDrawer({})})))},children:[(0,n.jsx)(E.$n,{"data-testid":Xe,size:"sm",tooltip:_e,variant:$e,onClick:De,children:Ae}),(0,n.jsx)(F.m,{overlay:he,placement:"bottom-end",onVisibleChange:Ve=>{le.state.isEditing&&le.state.isDirty||(fe?.(Ve),Ke(Ve))},children:(0,n.jsx)(E.$n,{"aria-label":Me,"data-testid":Te,size:"sm",icon:Re?"angle-up":"angle-down",variant:$e})})]})},L=f.Tp.pages.Dashboard.DashNav.NewExportButton,N=({dashboard:le})=>{const he=O.$.featureToggles.kubernetesDashboards?(0,g.t)("dashboard.toolbar.new.export.tooltip.as-code","Export as code"):(0,g.t)("dashboard.toolbar.new.export.tooltip.json","Export as JSON");return(0,n.jsx)(M,{menu:()=>(0,n.jsx)(B.A,{dashboard:le}),groupTestId:L.container,buttonLabel:(0,g.t)("dashboard.toolbar.new.export.title","Export"),buttonTooltip:he,buttonTestId:L.container,onButtonClick:()=>{u.Ny.partial({shareView:S.wr.export}),K.c.sharingCategoryClicked({item:S.wr.export,shareResource:(0,S.hD)()})},arrowLabel:(0,g.t)("dashboard.toolbar.new.export.arrow","Export"),arrowTestId:L.arrowMenu,dashboard:le})},W=({dashboard:le})=>(0,n.jsx)(E.$n,{disabled:i._o.state.isPlaying,onClick:()=>{le.onEnterEditMode(),le.setState({editable:!0,meta:{...le.state.meta,canEdit:!0}})},tooltip:(0,g.t)("dashboard.toolbar.new.enter-edit-mode.tooltip","This dashboard was marked as read only"),variant:"secondary",size:"sm","data-testid":f.Tp.components.NavToolbar.editDashboard.editButton,children:(0,n.jsx)(g.x6,{i18nKey:"dashboard.toolbar.new.enter-edit-mode.label",children:"Make editable"})}),R=({})=>(0,n.jsx)(r.I,{"data-testid":f.Tp.pages.Dashboard.DashNav.playlistControls.next,tooltip:(0,g.t)("dashboard.toolbar.new.playlist-next","Go to next dashboard"),icon:"forward",onClick:()=>i._o.next(),narrow:!0}),G=({})=>(0,n.jsx)(r.I,{"data-testid":f.Tp.pages.Dashboard.DashNav.playlistControls.prev,tooltip:(0,g.t)("dashboard.toolbar.new.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:()=>i._o.prev()}),w=({})=>(0,n.jsx)(r.I,{onClick:()=>i._o.stop(),"data-testid":f.Tp.pages.Dashboard.DashNav.playlistControls.stop,children:(0,n.jsx)(g.x6,{i18nKey:"dashboard.toolbar.new.playlist-stop",children:"Stop playlist"})});var _=e(87063);const Q=({dashboard:le})=>{const{meta:he,isDirty:fe,uid:Ce}=le.state,Ae=!(Ce||le.isManaged()),_e=le.isManaged();return Ae?(0,n.jsx)(E.$n,{onClick:()=>le.openSaveDrawer({}),tooltip:(0,g.t)("dashboard.toolbar.new.save-dashboard.tooltip","Save changes"),size:"sm",variant:"primary","data-testid":f.Tp.components.NavToolbar.editDashboard.saveButton,children:(0,n.jsx)(g.x6,{i18nKey:"dashboard.toolbar.new.save-dashboard.label",children:"Save"})}):c.TP.hasEditPermissionInFolders&&!he.canSave&&!he.canMakeEditable&&!_e?(0,n.jsx)(E.$n,{onClick:()=>le.openSaveDrawer({saveAsCopy:!0}),tooltip:(0,g.t)("dashboard.toolbar.new.save-dashboard-copy.tooltip","Save as copy"),size:"sm",variant:fe?"primary":"secondary",children:(0,n.jsx)(g.x6,{i18nKey:"dashboard.toolbar.new.save-dashboard-copy.label",children:"Save as copy"})}):(0,n.jsxs)(U.e,{children:[(0,n.jsx)(E.$n,{onClick:()=>le.openSaveDrawer({}),tooltip:(0,g.t)("dashboard.toolbar.new.save-dashboard.tooltip","Save changes"),size:"sm","data-testid":f.Tp.components.NavToolbar.editDashboard.saveButton,variant:fe?"primary":"secondary",children:(0,n.jsx)(g.x6,{i18nKey:"dashboard.toolbar.new.save-dashboard.label",children:"Save"})}),(0,n.jsx)(F.m,{overlay:(0,n.jsxs)(_.W,{children:[(0,n.jsx)(_.W.Item,{label:(0,g.t)("dashboard.toolbar.new.save-dashboard-short","Save"),icon:"save",onClick:()=>le.openSaveDrawer({})}),(0,n.jsx)(_.W.Item,{label:(0,g.t)("dashboard.toolbar.new.save-dashboard-copy.label","Save as copy"),icon:"copy",onClick:()=>le.openSaveDrawer({saveAsCopy:!0})})]}),children:(0,n.jsx)(E.$n,{"aria-label":(0,g.t)("dashboard.toolbar.new.more-save-options","More save options"),icon:"angle-down",variant:fe?"primary":"secondary",size:"sm"})})]})},ae=({dashboard:le})=>(0,n.jsx)(E.$n,{onClick:()=>le.state.editPanel?.onSaveLibraryPanel(),tooltip:(0,g.t)("dashboard.toolbar.new.save-library-panel","Save library panel"),size:"sm",fill:"outline",variant:"primary","data-testid":f.Tp.components.NavToolbar.editDashboard.saveLibraryPanelButton,children:(0,n.jsx)(g.x6,{i18nKey:"dashboard.toolbar.new.save-library-panel",children:"Save library panel"})});var q=e(41053),k=e(16001),ee=e(12434);const j=f.Tp.pages.Dashboard.DashNav.newShareButton,J=({dashboard:le})=>{const[he,fe]=(0,q.A)(async()=>{K.c.toolbarShareClick(),await(0,ee.Xe)(le)},[le]);return(0,n.jsx)(M,{menu:()=>(0,n.jsx)(k.Ay,{dashboard:le}),onMenuVisibilityChange:Ce=>{Ce&&K.c.toolbarShareDropdownClick()},groupTestId:j.shareLink,buttonLabel:(0,g.t)("dashboard.toolbar.new.share.title","Share"),buttonTooltip:(0,g.t)("dashboard.toolbar.new.share.tooltip","Copy link"),buttonTestId:j.container,onButtonClick:fe,arrowLabel:(0,g.t)("dashboard.toolbar.new.share.arrow","Share"),arrowTestId:j.arrowMenu,dashboard:le,variant:le.state.isEditing?"secondary":"primary"})},Z=({dashboard:le})=>(0,n.jsx)(E.$n,{onClick:()=>le.state.editPanel?.onUnlinkLibraryPanel(),tooltip:(0,g.t)("dashboard.toolbar.new.unlink-library-panel","Unlink library panel"),size:"sm",fill:"outline",variant:"secondary","data-testid":f.Tp.components.NavToolbar.editDashboard.unlinkLibraryPanelButton,children:(0,n.jsx)(g.x6,{i18nKey:"dashboard.toolbar.new.unlink-library-panel",children:"Unlink library panel"})});var te=e(12991);const se=({dashboard:le})=>{const{editPanel:he,editable:fe,editview:Ce,isEditing:Ae,uid:_e,meta:Xe,viewPanel:De}=le.useState(),{isPlaying:Me}=i._o.useState(),Te=(0,s.of)(X),$e=!!fe,Re=!!Xe.canSave,Ke=!!_e,Ve=!!Ae,Se=!!Ce,Ye=!!he,Ue=!!De,je=Ye&&(0,h.ME)(he.state.panelRef.resolve()),Qe=!Se&&!Ue&&!Ye,He=Ve&&Qe,Je=!!Xe.isSnapshot,de=c.TP.hasEditPermissionInFolders,ve=Ye&&!Se&&!Ue,me=Me&&Qe&&!Ve,xe=Ke&&!Je&&!Me&&!Ye;return(0,n.jsx)(l.U,{alignment:"right",className:Te.container,children:(0,te.g)([...(0,te.f)(o.C.right,"",!Ye&&!Ve),{key:"play-list-previous-button",component:G,group:"playlist",condition:me},{key:"play-list-stop-button",component:w,group:"playlist",condition:me},{key:"play-list-next-button",component:R,group:"playlist",condition:me},{key:"back-to-dashboard-button",component:v,group:"panel",condition:Se||(Ue||Ye)&&!je},{key:"discard-panel-button",component:x,group:"panel",condition:ve&&!je},{key:"discard-library-panel-button",component:y,group:"panel",condition:ve&&je},{key:"unlink-library-panel-button",component:Z,group:"panel",condition:ve&&je},{key:"save-library-panel-button",component:ae,group:"panel",condition:ve&&je},{key:"dashboard-undo",component:ce,group:"dashboard",condition:He&&le.canEditDashboard()},{key:"dashboard-redo",component:ue,group:"dashboard",condition:He&&le.canEditDashboard()},{key:"dashboard-settings",component:m,group:"dashboard",condition:He&&le.canEditDashboard()},{key:"save-dashboard",component:Q,group:"save-edit",condition:Ve&&!je&&(Re||de)},{key:"make-dashboard-editable-button",component:W,group:"save-edit",condition:!Ae&&le.canEditDashboard()&&!Ue&&!$e&&!Me},{key:"edit-dashboard-switch",component:T,group:"save-edit",condition:le.canEditDashboard()&&!Ye&&!je&&!Ue&&$e&&!Me&&!Ye},{key:"new-export-dashboard-button",component:N,group:"export-share",condition:xe},{key:"new-share-dashboard-button",component:J,group:"export-share",condition:xe}],le)})},ie="undo-button";function ce({dashboard:le}){const he=le.state.editPane,{undoStack:fe}=he.useState(),Ce=fe[fe.length-1],Ae=`Undo${Ce?.description?` '${Ce.description}'`:""}`;return(0,n.jsx)(r.I,{id:ie,icon:"corner-up-left",disabled:fe.length===0,onClick:()=>he.undoAction(),tooltip:Ae})}const re="redo-button";function ue({dashboard:le}){const he=le.state.editPane,{redoStack:fe}=he.useState(),Ce=fe[fe.length-1],Ae=`Redo${Ce?.description?` '${Ce.description}'`:""}`;return(0,n.jsx)(r.I,{id:re,icon:"corner-up-right",disabled:fe.length===0,tooltip:Ae,onClick:()=>he.redoAction()})}const X=le=>({container:(0,a.css)({paddingLeft:le.spacing(.5)})})},95407:(ne,A,e)=>{"use strict";e.d(A,{P:()=>n});class n extends Error{constructor(s,l="Dashboard version mismatch"){super(l),this.name="DashboardVersionError",this.status=200,this.data={storedVersion:s??"unknown",message:l}}}},95443:(ne,A,e)=>{"use strict";e.d(A,{DD:()=>s,H8:()=>v,HH:()=>a,J3:()=>E,Oq:()=>l,Tl:()=>o,U3:()=>c,UU:()=>n,YH:()=>u,cB:()=>i,kW:()=>m,kl:()=>p,wG:()=>r});const n="ruler not supported",a=3e4,s="alertmanager",l="alerting-alertmanager",r=2e4,c=2e4,i=2e4,o=100,h="timeseries",f="table",g="stat";var u=(y=>(y.description="description",y.summary="summary",y.runbookURL="runbook_url",y.alertId="__alertId__",y.dashboardUID="__dashboardUid__",y.panelID="__panelId__",y))(u||{});const E={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"},v={description:"Description of what the alert rule does.",summary:"Short summary of what happened and why.",runbook_url:"Webpage where you keep your runbook for the alert.",__dashboardUid__:"",__panelId__:"",__alertId__:""},p=[{key:"summary",value:""},{key:"description",value:""},{key:"runbook_url",value:""}],m="__alert_rule_uid__"},95506:(ne,A,e)=>{"use strict";e.d(A,{b:()=>E});var n=e(74848),a=e(76459),s=e.n(a),l=e(96540),r=e(18857),c=e(83873),i=e(75735),o=e(13956),h=e(60171);const f=(v="Dashboards",p)=>`${v}/${p}`;async function g(v=""){return c.IB.search({type:"dash-db",query:v,limit:100}).then(p=>p.map(m=>({value:{uid:m.uid,title:m.title,folderTitle:m.folderTitle,folderUid:m.folderUid},label:f(m?.folderTitle,m.title)})))}const u=s()(g,250,{leading:!0}),E=(0,l.forwardRef)(({value:v,onChange:p,placeholder:m="Select dashboard",noOptionsMessage:y="No dashboards found",...d},x)=>{const[b,D]=(0,l.useState)();(0,l.useEffect)(()=>{!v||v===b?.value?.uid||(async()=>{const P=await(0,o.n)().getDashboardDTO(v,void 0);(0,h.HG)(P)?D({value:{uid:P.metadata.name,title:P.spec.title,folderTitle:P.metadata.annotations?.[i.w2],folderUid:P.metadata.annotations?.[i.ew]},label:f(P.metadata.annotations?.[i.ew],P.spec.title)}):P.dashboard&&D({value:{uid:P.dashboard.uid,title:P.dashboard.title,folderTitle:P.meta.folderTitle,folderUid:P.meta.folderUid},label:f(P.meta?.folderTitle,P.dashboard.title)})})()},[v]);const C=(0,l.useCallback)(P=>{D(P),p?.(P?.value)},[p,D]);return(0,n.jsx)(r.DW,{loadOptions:u,onChange:C,placeholder:m,noOptionsMessage:y,value:b,defaultOptions:!0,...d,selectRef:x})});E.displayName="DashboardPicker"},95575:(ne,A,e)=>{"use strict";e.d(A,{Mq:()=>h,NU:()=>i,Xz:()=>g,pH:()=>o,wx:()=>p,xQ:()=>f});var n=e(2543),a=e.n(n),s=e(81160),l=e(16515),r=e(95004),c=e(64761),i=(m=>(m.Manual="manual",m.Auto="auto",m))(i||{}),o=(m=>(m.Off="off",m.Asc="asc",m.Desc="desc",m))(o||{}),h=(m=>(m.Name="name",m.Label="label",m))(h||{});const f={id:c.F.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:({indexByName:m,orderByMode:y="manual",orderBy:d=[]})=>x=>x.pipe((0,s.T)(b=>{(0,l.Fm)(b);const D=y==="manual"?u(m):p(d);return b.map(C=>({...C,fields:D(C.fields,b,C)}))}))},g=m=>(y,d)=>E(y,m)-E(d,m),u=m=>(y,d,x)=>{const b=g(m);return(0,n.clone)(y).sort((D,C)=>b((0,l.Ct)(D,x,d),(0,l.Ct)(C,x,d)))},E=(m,y)=>Number.isInteger(y[m])?y[m]:Number.MAX_SAFE_INTEGER,v=new Intl.Collator(void 0,{sensitivity:"base",numeric:!0}).compare,p=m=>y=>{const d=y.find(x=>x.type===r.PU.time);return y.slice().sort((x,b)=>{if(x===d)return-1;if(b===d)return 1;for(let D=0;D<m.length;D++){let{type:C,name:P="",desc:T=!1}=m[D],O=C==="name"?x.state?.displayName??x.name:x.labels?.[P]??"",S=C==="name"?b.state?.displayName??b.name:b.labels?.[P]??"",B=v(O,S)*(T?-1:1);if(B!==0)return B}return 0})}},95710:(ne,A,e)=>{"use strict";e.d(A,{Dd:()=>s,GC:()=>l,dM:()=>a,wM:()=>r,z9:()=>i});var n=e(23289);function a(f,g,u){const E=r(f.templating.list),v=l(f.panels.map(p=>p.type));n.c.dashboardInitialized({uid:f.uid,title:f.title,theme:f.style,schemaVersion:f.schemaVersion,version_before_migration:u,panels_count:f.panels.length,...v,...E,settings_nowdelay:f.timepicker.nowDelay,settings_livenow:!!f.liveNow,duration:g,isScene:!1})}function s(f,g){const u=f.getTrackingInformation();n.c.dashboardInitialized({theme:void 0,duration:g,isScene:!0,...u})}function l(f){return f.reduce((g,u)=>(g[h(u)]=1+g[h(u)]||1,g),{})}function r(f){return f.map(g=>g.type).reduce((g,u)=>(g[o(u)]=1+g[o(u)]||1,g),{})}function c(f){switch(f){case"AdhocVariable":return"adhoc";case"CustomVariable":return"custom";case"QueryVariable":return"query";case"IntervalVariable":return"interval";case"ConstantVariable":return"constant";case"DatasourceVariable":return"datasource";case"TextVariable":return"textbox";case"GroupByVariable":return"groupby";default:return}}function i(f){return f.map(g=>c(g.kind)).filter(g=>g!==void 0).reduce((g,u)=>(g[o(u)]=1+g[o(u)]||1,g),{})}const o=f=>`variable_type_${f}_count`,h=f=>`panel_type_${f}_count`},95943:(ne,A,e)=>{"use strict";e.d(A,{FG:()=>v,Gk:()=>g,HG:()=>r,IZ:()=>u,Pz:()=>l,Ut:()=>m,bJ:()=>i,cV:()=>s,cx:()=>o,dU:()=>a,o9:()=>c,rt:()=>f,sD:()=>n,tH:()=>h,wV:()=>p});const n=30,a=8,s=24,l="v",r="h",c=4,i=250,o=n*3,h="panel-copy",f="row-copy",g="tab-copy",u=2,E=23763571993,v=40,p="VisualizationSelectPane.ListMode",m="mega-menu-toggle"},96004:(ne,A,e)=>{"use strict";e.d(A,{t:()=>F});var n=e(74848),a=e(22803),s=e(96540),l=e(51898),r=e(92745),c=e(63142),i=e(34999),o=e(45861),h=e(37386),f=e(18027),g=e(77824),u=e(30703),E=e(63527),v=e(41654),p=e(21285),m=e(10928),y=e(66404),d=e(94959),x=e(23659);const b=({dataSourceConfig:I,onChange:V})=>{const M=I.secureJsonData?I.secureJsonData.basicAuthPassword:"",L=()=>{V({...I,secureJsonData:{...I.secureJsonData,basicAuthPassword:""},secureJsonFields:{...I.secureJsonFields,basicAuthPassword:!1}})},N=W=>{V({...I,secureJsonData:{...I.secureJsonData,basicAuthPassword:W.currentTarget.value}})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.I,{disabled:I.readOnly,children:(0,n.jsx)(d.z,{label:(0,r.t)("grafana-ui.data-source-basic-auth-settings.user-label","User"),labelWidth:10,inputWidth:18,placeholder:(0,r.t)("grafana-ui.data-source-basic-auth-settings.user-placeholder","user"),value:I.basicAuthUser,onChange:W=>V({...I,basicAuthUser:W.currentTarget.value})})}),(0,n.jsx)(f.I,{disabled:I.readOnly,children:(0,n.jsx)(x.L,{isConfigured:!!(I.secureJsonFields&&I.secureJsonFields.basicAuthPassword),value:M||"",inputWidth:18,labelWidth:10,onReset:L,onChange:N})})]})};var D=e(55803);const C=26,P=({dataSourceConfig:I,onChange:V,showForwardOAuthIdentityOption:M=!0})=>{const L=(0,c.of)(T);return(0,n.jsxs)("div",{className:L,children:[(0,n.jsxs)(v.B,{direction:"row",gap:.5,children:[(0,n.jsx)(f.I,{label:(0,r.t)("grafana-ui.data-source-http-proxy-settings.ts-client-auth-label","TLS Client Auth"),labelWidth:C,disabled:I.readOnly,children:(0,n.jsx)(p.K,{id:"http-settings-tls-client-auth",value:I.jsonData.tlsAuth||!1,onChange:N=>V({...I.jsonData,tlsAuth:N.currentTarget.checked})})}),(0,n.jsx)(f.I,{label:(0,r.t)("grafana-ui.data-source-http-proxy-settings.with-ca-cert-label","With CA Cert"),tooltip:(0,r.t)("grafana-ui.data-source-http-proxy-settings.with-ca-cert-tooltip","Needed for verifying self-signed TLS Certs"),labelWidth:C,disabled:I.readOnly,children:(0,n.jsx)(p.K,{id:"http-settings-ca-cert",value:I.jsonData.tlsAuthWithCACert||!1,onChange:N=>V({...I.jsonData,tlsAuthWithCACert:N.currentTarget.checked})})})]}),(0,n.jsx)(f.I,{label:(0,r.t)("grafana-ui.data-source-http-proxy-settings.skip-tls-verify-label","Skip TLS Verify"),labelWidth:C,disabled:I.readOnly,children:(0,n.jsx)(p.K,{id:"http-settings-skip-tls-verify",value:I.jsonData.tlsSkipVerify||!1,onChange:N=>V({...I.jsonData,tlsSkipVerify:N.currentTarget.checked})})}),M&&(0,n.jsx)(f.I,{label:(0,r.t)("grafana-ui.data-source-http-proxy-settings.oauth-identity-label","Forward OAuth Identity"),tooltip:(0,r.t)("grafana-ui.data-source-http-proxy-settings.oauth-identity-tooltip","Forward the user's upstream OAuth identity to the data source (Their access token gets passed along)."),labelWidth:C,disabled:I.readOnly,children:(0,n.jsx)(p.K,{id:"http-settings-forward-oauth",value:I.jsonData.oauthPassThru||!1,onChange:N=>V({...I.jsonData,oauthPassThru:N.currentTarget.checked})})})]})},T=I=>(0,a.css)({display:"grid",gridTemplateColumns:"auto",gap:0});var O=e(3936),S=e(37235);const B="grafana-http-access-help",K=()=>(0,n.jsxs)(i.F,{severity:"info",title:(0,r.t)("grafana-ui.data-source-http-settings.access-help-title","Access help"),topSpacing:3,id:B,children:[(0,n.jsx)("p",{children:(0,n.jsxs)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.access-help-details",children:["Access mode controls how requests to the data source will be handled.",(0,n.jsxs)("strong",{children:["\xA0",(0,n.jsx)("i",{children:"Server"})]})," ","should be the preferred way if nothing else is stated."]})}),(0,n.jsx)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.server-mode-title",children:(0,n.jsx)(y.E,{weight:"medium",children:"Server access mode (Default):"})}),(0,n.jsx)("p",{children:(0,n.jsx)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.server-mode-description",children:"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."})}),(0,n.jsx)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.browser-mode-title",children:(0,n.jsx)(y.E,{weight:"medium",children:"Browser access mode:"})}),(0,n.jsx)("p",{children:(0,n.jsx)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.browser-mode-description",children:"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode."})})]}),U=26,F=I=>{const{defaultUrl:V,dataSourceConfig:M,onChange:L,showAccessOptions:N,sigV4AuthToggleEnabled:W,showForwardOAuthIdentityOption:R,azureAuthSettings:G,renderSigV4Editor:w,secureSocksDSProxyEnabled:_,urlLabel:Q,urlDocs:ae}=I,q=(0,s.useMemo)(()=>[{label:(0,r.t)("grafana-ui.data-source-http-settings.server-mode-label","Server (default)"),value:"proxy"},{label:(0,r.t)("grafana-ui.data-source-http-settings.browser-mode-label","Browser"),value:"direct"}],[]),k=(0,s.useMemo)(()=>q[0],[q]),[ee,j]=(0,s.useState)(!1),[J,Z]=(0,s.useState)(!1),te=(0,c.$j)();let se;const ie=(0,s.useCallback)(X=>{const le=G?.azureAuthSupported&&G.getAzureAuthEnabled(M)||!1;if(Z(le),le){const he=M.jsonData.oauthPassThru!==void 0?M.jsonData.oauthPassThru:!1;X={...X,jsonData:{...M.jsonData,oauthPassThru:le?!1:he}}}L({...M,...X})},[G,M,L]);switch(M.access){case"direct":se=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.direct-url-tooltip",children:["Your access method is ",(0,n.jsx)("em",{children:"Browser"}),", this means the URL needs to be accessible from the browser."]}),ae]});break;case"proxy":se=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.proxy-url-tooltip",children:["Your access method is ",(0,n.jsx)("em",{children:"Server"}),", this means the URL needs to be accessible from the grafana backend/server."]}),ae]});break;default:se=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.default-url-tooltip",children:"Specify a complete HTTP URL (for example http://your_server:8080)"}),ae]})}const ce=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(M.url),re=(0,a.css)({display:"grid",gridTemplateColumns:"auto 1fr",gap:te.spacing(.5)}),ue=(0,s.useId)();return(0,n.jsxs)(v.B,{direction:"column",gap:5,children:[(0,n.jsxs)("section",{children:[(0,n.jsx)("h3",{className:"page-heading",children:(0,n.jsx)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.heading",children:"HTTP"})}),(0,n.jsx)(h.D,{label:Q??"URL",description:se,invalid:!ce,error:!ce&&(0,r.t)("grafana-ui.data-source-http-settings.invalid-url-error","Invalid URL"),disabled:M.readOnly,children:(0,n.jsx)(E.p,{id:ue,width:40,placeholder:V,value:M.url,"data-testid":l.Tp.components.DataSource.DataSourceHttpSettings.urlInput,onChange:X=>ie({url:X.currentTarget.value})})}),N&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.D,{label:(0,r.t)("grafana-ui.data-source-http-settings.access-label","Access"),disabled:M.readOnly,children:(0,n.jsxs)(v.B,{direction:"row",gap:.5,children:[(0,n.jsx)(g.z,{"aria-label":(0,r.t)("grafana-ui.data-source-http-settings.access-label","Access"),options:q,value:q.find(X=>X.value===M.access)?.value||k.value,onChange:X=>ie({access:X})}),(0,n.jsx)(o.$n,{type:"button",variant:"secondary",size:"md",fill:"outline",onClick:()=>j(X=>!X),"aria-expanded":ee,"aria-controls":B,children:(0,n.jsxs)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.access-help",children:["Help\xA0",(0,n.jsx)(u.I,{name:ee?"angle-down":"angle-right"})]})})]})}),ee&&(0,n.jsx)(K,{})]}),M.access==="proxy"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.D,{label:(0,r.t)("grafana-ui.data-source-http-settings.allowed-cookies","Allowed cookies"),description:(0,r.t)("grafana-ui.data-source-http-settings.allowed-cookies-description","Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."),children:(0,n.jsx)(m.u,{tags:M.jsonData.keepCookies,width:40,onChange:X=>ie({jsonData:{...M.jsonData,keepCookies:X}}),disabled:M.readOnly})}),(0,n.jsx)(h.D,{label:(0,r.t)("grafana-ui.data-source-http-settings.timeout-label","Timeout"),description:(0,r.t)("grafana-ui.data-source-http-settings.timeout-description","HTTP request timeout in seconds"),disabled:M.readOnly,children:(0,n.jsx)(E.p,{type:"number",width:40,placeholder:(0,r.t)("grafana-ui.data-source-http-settings.timeout-placeholder","Timeout in seconds"),value:M.jsonData.timeout,onChange:X=>{ie({jsonData:{...M.jsonData,timeout:parseInt(X.currentTarget.value,10)}})}})})]})]}),(0,n.jsxs)("section",{children:[(0,n.jsx)("h3",{className:"page-heading",children:(0,n.jsx)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.auth",children:"Auth"})}),(0,n.jsxs)(v.B,{direction:"column",gap:4,children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:re,children:[(0,n.jsx)(f.I,{label:(0,r.t)("grafana-ui.data-source-http-settings.basic-auth-label","Basic auth"),labelWidth:U,disabled:M.readOnly,children:(0,n.jsx)(p.K,{id:"http-settings-basic-auth",value:M.basicAuth,onChange:X=>{ie({basicAuth:X.currentTarget.checked})}})}),(0,n.jsx)(f.I,{label:(0,r.t)("grafana-ui.data-source-http-settings.with-credentials-label","With Credentials"),tooltip:(0,r.t)("grafana-ui.data-source-http-settings.with-credentials-tooltip","Whether credentials such as cookies or auth headers should be sent with cross-site requests."),labelWidth:U,disabled:M.readOnly,children:(0,n.jsx)(p.K,{id:"http-settings-with-credentials",value:M.withCredentials,onChange:X=>{ie({withCredentials:X.currentTarget.checked})}})}),G?.azureAuthSupported&&(0,n.jsx)(f.I,{label:(0,r.t)("grafana-ui.data-source-http-settings.azure-auth-label","Azure Authentication"),tooltip:(0,r.t)("grafana-ui.data-source-http-settings.azure-auth-tooltip","Use Azure authentication for Azure endpoint."),labelWidth:U,disabled:M.readOnly,children:(0,n.jsx)(p.K,{id:"http-settings-azure-auth",value:J,onChange:X=>{ie(G.setAzureAuthEnabled(M,X.currentTarget.checked))}})}),W&&(0,n.jsx)(f.I,{label:(0,r.t)("grafana-ui.data-source-http-settings.sigv4-auth-label","SigV4 auth"),labelWidth:U,disabled:M.readOnly,children:(0,n.jsx)(p.K,{id:"http-settings-sigv4-auth",value:M.jsonData.sigV4Auth||!1,onChange:X=>{ie({jsonData:{...M.jsonData,sigV4Auth:X.currentTarget.checked}})}})})]}),M.access==="proxy"&&(0,n.jsx)(P,{dataSourceConfig:M,onChange:X=>ie({jsonData:X}),showForwardOAuthIdentityOption:J?!1:R})]}),M.basicAuth&&(0,n.jsxs)("section",{children:[(0,n.jsx)(y.E,{variant:"h6",element:"h4",children:(0,n.jsx)(r.x6,{i18nKey:"grafana-ui.data-source-http-settings.basic-auth",children:"Basic Auth Details"})}),(0,n.jsx)(b,{...I})]}),G?.azureAuthSupported&&J&&G.azureSettingsUI&&(0,n.jsx)(G.azureSettingsUI,{dataSourceConfig:M,onChange:L}),M.jsonData.sigV4Auth&&W&&w,(M.jsonData.tlsAuth||M.jsonData.tlsAuthWithCACert)&&(0,n.jsx)(S.j,{dataSourceConfig:M,onChange:L}),M.access==="proxy"&&(0,n.jsx)(D.P,{dataSourceConfig:M,onChange:L})]})]}),_&&(0,n.jsx)(O.Y,{options:M,onOptionsChange:L})]})}},96016:(ne,A,e)=>{"use strict";e.d(A,{R:()=>E});var n=e(2543),a=e.n(n),s=e(43561),l=e(39741),r=e(67770),c=e(43173),i=e(25992);const o="ui-extension-logs",h=1e3,f=1e3*60*10,g=(0,i.DW)(o);class u{constructor(p,m,y){this.baseLabels=p,this.channel=y??new BroadcastChannel(o),this.subject=m??new l.m(h,f),y||(this.channel.onmessage=d=>this.subject.next(d.data))}info(p,m){this.log(r.$b.info,p,m)}warning(p,m){g.logWarning(p,{...this.baseLabels,...m}),c.$.buildInfo.env==="development"&&console.warn(p,{...this.baseLabels,...m}),this.log(r.$b.warning,p,m)}error(p,m){g.logError(new Error(p),{...this.baseLabels,...m}),console.error(p,{...this.baseLabels,...m}),this.log(r.$b.error,p,m)}debug(p,m){this.log(r.$b.debug,p,m)}trace(p,m){this.log(r.$b.trace,p,m)}fatal(p,m){this.log(r.$b.fatal,p,m)}log(p,m,y){const d={...y,...this.baseLabels},{pluginId:x,extensionPointId:b}=d,D={level:p,labels:d,timestamp:Date.now(),id:(0,s.Ak)(),message:m,pluginId:(0,n.isString)(x)?x:void 0,extensionPointId:(0,n.isString)(b)?b:void 0};this.subject.next(D),this.channel.postMessage(D)}asObservable(){return this.subject.asObservable()}child(p){return new u({...p,...this.baseLabels},this.subject,this.channel)}}const E=new u},96041:(ne,A,e)=>{"use strict";e.d(A,{c:()=>w,E:()=>_});var n=e(74848),a=e(46942),s=e.n(a),l=e(2543),r=e(55127),c=e.n(r),i=e(96540),o=e(1906),h=e(62392),f=e(48480),g=e(28105),u=e(54092),E=e(51898),v=e(92745),p=e(78282),m=e(27489),y=e(33604),d=e(22099),x=e(5585),b=e(99887),D=e(36303),C=e(68805),P=e(43260),T=e(85348),O=e(98838),S=e(23117),B=e(22803),K=e(63142),U=e(30703),F=e(63527),I=e(12594),V=e(76792);const M=k=>{const{query:ee,queries:j,onChange:J,collapsedText:Z,renderExtras:te,hidden:se,hideRefId:ie=!1}=k,ce=(0,K.of)(N),[re,ue]=(0,i.useState)(!1),[X,le]=(0,i.useState)(null),he=De=>{ue(!0)},fe=De=>{if(ue(!1),X){le(null);return}ee.refId!==De&&J({...ee,refId:De})},Ce=De=>{const Me=De.currentTarget.value.trim();if(Me.length===0){le("An empty query name is not allowed");return}for(const Te of j)if(Te!==ee&&Me===Te.refId){le("Query name already exists");return}X&&le(null)},Ae=De=>{fe(De.currentTarget.value.trim())},_e=De=>{De.key==="Enter"&&fe(De.currentTarget.value)},Xe=De=>{De.target.select()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:ce.wrapper,children:[!ie&&!re&&(0,n.jsxs)("button",{className:ce.queryNameWrapper,"aria-label":E.Tp.components.QueryEditorRow.title(ee.refId),title:(0,v.t)("query.query-editor-row-header.query-name-div-title-edit-query-name","Edit query name"),onClick:he,"data-testid":"query-name-div",type:"button",children:[(0,n.jsx)("span",{className:ce.queryName,children:ee.refId}),(0,n.jsx)(U.I,{name:"pen",className:ce.queryEditIcon,size:"sm"})]}),!ie&&re&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.p,{type:"text",defaultValue:ee.refId,onBlur:Ae,autoFocus:!0,onKeyDown:_e,onFocus:Xe,invalid:X!==null,onChange:Ce,className:ce.queryNameInput,"data-testid":"query-name-input"}),X&&(0,n.jsx)(I.P,{horizontal:!0,children:X})]}),L(k,ce),te&&(0,n.jsx)("div",{className:ce.itemWrapper,children:te()}),se&&(0,n.jsx)("em",{className:ce.contextInfo,children:(0,n.jsx)(v.x6,{i18nKey:"query.query-editor-row-header.hidden",children:"Hidden"})})]}),Z&&(0,n.jsx)("div",{className:ce.collapsedText,children:Z})]})},L=(k,ee)=>{const{alerting:j,dataSource:J,onChangeDataSource:Z}=k;return Z?(0,n.jsx)("div",{className:ee.itemWrapper,children:(0,n.jsx)(V.sk,{dashboard:!0,variables:!0,alerting:j,current:J.name,onChange:Z})}):(0,n.jsxs)("em",{className:ee.contextInfo,children:["(",J.name,")"]})},N=k=>({wrapper:(0,B.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:k.spacing(.5),overflow:"hidden"}),queryNameWrapper:(0,B.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:k.shape.radius.default,alignItems:"center",padding:k.spacing(0,0,0,.5),margin:0,background:"transparent",overflow:"hidden","&:hover":{background:k.colors.action.hover,border:`1px dashed ${k.colors.border.strong}`},"&:focus":{border:`2px solid ${k.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),queryName:(0,B.css)({fontWeight:k.typography.fontWeightMedium,color:k.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:k.spacing(.5)}),queryEditIcon:(0,B.cx)((0,B.css)({marginLeft:k.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),queryNameInput:(0,B.css)({maxWidth:"300px",margin:"-4px 0"}),collapsedText:(0,B.css)({fontWeight:k.typography.fontWeightRegular,fontSize:k.typography.bodySmall.fontSize,color:k.colors.text.secondary,paddingLeft:k.spacing(1),alignItems:"center",overflow:"hidden",fontStyle:"italic",whiteSpace:"nowrap",textOverflow:"ellipsis"}),contextInfo:(0,B.css)({fontSize:k.typography.bodySmall.fontSize,fontStyle:"italic",color:k.colors.text.secondary,paddingLeft:"10px",paddingRight:"10px"}),itemWrapper:(0,B.css)({display:"flex",marginLeft:"4px"})});var W=e(76874);function R({children:k}){const ee=(0,K.of)(G);return(0,n.jsx)("div",{className:ee.container,children:k})}const G=k=>({container:(0,B.css)({border:`2px solid ${k.colors.primary.main}`,borderTopLeftRadius:"unset",borderTopRightRadius:"unset",borderBottomLeftRadius:k.shape.radius.default,borderBottomRightRadius:k.shape.radius.default,overflow:"hidden"})});class w extends i.PureComponent{constructor(){super(...arguments),this.dataSourceSrv=(0,p.l)(),this.id="",this.state={datasource:null,data:void 0,isOpen:!0,showingHelp:!1},this.renderPluginEditor=()=>{const{query:ee,onChange:j,queries:J,onRunQuery:Z,onAddQuery:te,range:se,app:ie=o.Jk.PanelEditor,history:ce}=this.props,{datasource:re,data:ue}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(re){let X=this.getQueryEditor(re);if(X)return(0,n.jsx)(h.p,{instanceSettings:this.props.dataSource,children:(0,n.jsx)(X,{query:ee,datasource:re,onChange:j,onRunQuery:Z,onAddQuery:te,data:ue,range:se,queries:J,app:ie,history:ce},re?.name)})}return(0,n.jsx)("div",{children:(0,n.jsx)(v.x6,{i18nKey:"query-operation.query-editor-not-exported",children:"Data source plugin does not export any Query Editor component"})})},this.onRemoveQuery=()=>{const{onRemoveQuery:ee,query:j,onQueryRemoved:J}=this.props;ee(j),J&&J()},this.onCancelQueryLibraryEdit=()=>{const{query:ee}=this.props;(0,m.rR)("query_library-update_query_from_explore_cancelled",{datasourceType:ee.datasource?.type}),this.props.onCancelQueryLibraryEdit?.()},this.onExitQueryLibraryEditingMode=()=>{this.props.onCancelQueryLibraryEdit?.()},this.onCopyQuery=()=>{const{query:ee,onAddQuery:j,onQueryCopied:J}=this.props,Z=(0,l.cloneDeep)(ee);j(Z),J&&J()},this.onHideQuery=()=>{const{query:ee,onChange:j,onRunQuery:J,onQueryToggled:Z}=this.props;j({...ee,hide:!ee.hide}),J(),Z&&Z(ee.hide),(0,m.rR)("query_editor_row_hide_query_clicked",{hide:!ee.hide})},this.onToggleHelp=()=>{this.setState(ee=>({showingHelp:!ee.showingHelp}))},this.onClickExample=ee=>{ee.datasource===void 0&&(ee.datasource=(0,f.p$)(this.props.dataSource)),this.props.onChange({...ee,refId:this.props.query.refId}),this.onToggleHelp()},this.onSelectQueryFromLibrary=ee=>{this.props.onQueryReplacedFromLibrary?.(),this.props.onReplace?.(ee)},this.renderWarnings=ee=>{const{data:j,query:J}=this.props,te=(_(j,J.refId)?.series??[]).reduce((he,fe)=>{if(!fe.meta?.notices)return he;const Ce=(0,l.filter)(fe.meta.notices,Ae=>Ae.severity===ee)??[];return he.concat(Ce)},[]),se=(0,l.uniqBy)(te,"text");if(!(se.length>0))return null;const ce="query-"+ee+"s",re=ee==="warning"?"orange":"blue",ue=ee==="warning"?"exclamation-triangle":"file-landscape-alt",X=se.map(he=>he.text),le=(0,n.jsx)(x.B,{items:X,renderItem:he=>(0,n.jsx)(n.Fragment,{children:he})});return(0,n.jsx)(b.E,{color:re,icon:ue,text:(0,n.jsxs)(n.Fragment,{children:[se.length," ",c()(ee,se.length)]}),tooltip:le},ce)},this.renderExtraActions=()=>{const{query:ee,queries:j,data:J,onAddQuery:Z,dataSource:te,app:se}=this.props,ie=S.d.getAllExtraRenderAction();let ce=[];se!==void 0&&(ce=S.d.getScopedExtraRenderAction(se));const re=[...ie,...ce].map((ue,X)=>ue({query:ee,queries:j,timeRange:J.timeRange,onAddQuery:Z,dataSource:te,key:X})).filter(Boolean);return re.push(this.renderWarnings("info")),re.push(this.renderWarnings("warning")),re.push((0,n.jsx)(q,{query:ee},"adaptive-telemetry-actions")),re},this.renderActions=ee=>{const{query:j,hideHideQueryButton:J=!1,queryLibraryRef:Z,app:te}=this.props,{datasource:se,showingHelp:ie}=this.state,ce=!!j.hide,re=se?.components?.QueryEditorHelp,ue=Z!==void 0,X=te===o.Jk.UnifiedAlerting;return(0,n.jsxs)(n.Fragment,{children:[!ue&&!X&&(0,n.jsx)(Q,{query:j,app:te,onUpdateSuccess:this.onExitQueryLibraryEditingMode,onSelectQuery:this.onSelectQueryFromLibrary,datasourceFilters:se?.name?[se.name]:[]}),re&&(0,n.jsx)(P.A,{title:(0,v.t)("query-operation.header.datasource-help","Show data source help"),icon:"question-circle",onClick:this.onToggleHelp,active:ie}),this.renderExtraActions(),!ue&&(0,n.jsx)(P.q,{title:(0,v.t)("query-operation.header.duplicate-query","Duplicate query"),icon:"copy",onClick:this.onCopyQuery}),J?null:(0,n.jsx)(P.A,{dataTestId:E.Tp.components.QueryEditorRow.actionButton("Hide response"),title:j.hide?(0,v.t)("query-operation.header.show-response","Show response"):(0,v.t)("query-operation.header.hide-response","Hide response"),icon:ce?"eye-slash":"eye",active:ce,onClick:this.onHideQuery}),!ue&&(0,n.jsx)(P.q,{title:(0,v.t)("query-operation.header.remove-query","Remove query"),icon:"trash-alt",onClick:this.onRemoveQuery})]})},this.renderHeader=ee=>{const{app:j,query:J,dataSource:Z,onChangeDataSource:te,onChange:se,queries:ie,renderHeaderExtras:ce,hideRefId:re}=this.props;return(0,n.jsx)(M,{query:J,queries:ie,onChangeDataSource:te,dataSource:Z,hidden:J.hide,onChange:se,collapsedText:ee.isOpen?null:this.renderCollapsedText(),renderExtras:ce,alerting:j===o.Jk.UnifiedAlerting,hideRefId:re})}}componentDidMount(){const{data:ee,query:j,id:J}=this.props,Z=_(ee,j.refId);this.id=(0,l.uniqueId)(J+"_"),this.setState({data:Z}),this.loadDatasource()}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const ee=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return ee?.rawRef?.uid??ee?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let ee;const j=this.getInterpolatedDataSourceUID();try{ee=await this.dataSourceSrv.get(j)}catch{ee=await this.dataSourceSrv.get()}typeof this.props.onDataSourceLoaded=="function"&&this.props.onDataSourceLoaded(ee),this.setState({datasource:ee,queriedDataSourceIdentifier:j})}componentDidUpdate(ee){const{datasource:j,queriedDataSourceIdentifier:J}=this.state,{data:Z,query:te}=this.props;if(ee.id!==this.props.id&&(this.id=(0,l.uniqueId)(this.props.id+"_")),Z!==ee.data){const se=_(Z,te.refId);this.setState({data:se})}if(j&&J!==this.getInterpolatedDataSourceUID()){this.loadDatasource();return}}getQueryEditor(ee){if(ee)switch(this.props.app){case o.Jk.Explore:return ee.components?.ExploreMetricsQueryField||ee.components?.ExploreLogsQueryField||ee.components?.ExploreQueryField||ee.components?.QueryEditor;case o.Jk.PanelEditor:case o.Jk.Dashboard:default:return ee.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:ee}=this.state;return ee?.getQueryDisplayText?ee.getQueryDisplayText(this.props.query):null}render(){const{query:ee,index:j,visualization:J,collapsable:Z,hideActionButtons:te,isOpen:se,onQueryOpenChanged:ie,app:ce,queryLibraryRef:re,onCancelQueryLibraryEdit:ue}=this.props,{datasource:X,showingHelp:le,data:he}=this.state,fe=ee.hide,Ce=he?.error&&he.error.refId===ee.refId?he.error:he?.errors?.find(Me=>Me.refId===ee.refId),Ae=s()("query-editor-row",{"query-editor-row--disabled":fe,"gf-form-disabled":fe});if(!X)return null;const _e=this.renderPluginEditor(),Xe=X.components?.QueryEditorHelp,De=(0,n.jsx)(T.u,{id:this.id,draggable:!te&&!re,collapsable:Z,index:j,headerElement:this.renderHeader,actions:te?void 0:this.renderActions,isOpen:se,onOpen:ie,children:(0,n.jsxs)("div",{className:Ae,id:this.id,children:[(0,n.jsxs)(D.Xw,{children:[le&&Xe&&(0,n.jsx)(C.j,{children:(0,n.jsx)(Xe,{onClickExample:Me=>this.onClickExample(Me),query:this.props.query,datasource:X})}),_e]}),Ce&&(0,n.jsx)(W.x,{error:Ce}),J]})});return(0,n.jsxs)("div",{"data-testid":"query-editor-row","aria-label":E.Tp.components.QueryEditorRows.rows,children:[re&&(0,n.jsx)(ae,{query:ee,app:ce,queryLibraryRef:re,onCancelEdit:ue,onUpdateSuccess:this.onExitQueryLibraryEditingMode,onSelectQuery:this.onSelectQueryFromLibrary}),re?(0,n.jsx)(R,{children:De}):De]})}}function _(k,ee){const j=k.series.filter(se=>se.refId===ee);if(k.state!==g.Gu.Loading&&(k.error||k.errors?.length)&&!k.series.length)return{...k,state:g.Gu.Error};let J=k.state,Z=k.errors?.find(se=>se.refId===ee);!Z&&k.error&&(Z=k.error.refId===ee?k.error:void 0),J!==g.Gu.Loading&&(Z?J=g.Gu.Error:k.state===g.Gu.Error&&(J=g.Gu.Done));const te=k.timeRange;return{...k,state:J,series:j,error:Z,errors:Z?[Z]:void 0,timeRange:te}}function Q(k){const{renderSavedQueryButtons:ee}=(0,O.Y)();return ee(k.query,k.app,k.onUpdateSuccess,k.onSelectQuery,k.datasourceFilters)}function ae(k){const{renderQueryLibraryEditingHeader:ee}=(0,O.Y)();return ee(k.query,k.app,k.queryLibraryRef,k.onCancelEdit,k.onUpdateSuccess,k.onSelectQuery)}function q({query:k}){try{const{isLoading:ee,components:j}=(0,y.f)({extensionPointId:u.SM.QueryEditorRowAdaptiveTelemetryV1});return ee||!j.length?null:(0,d.RC)({props:{query:k,contextHints:["queryeditorrow","header"]},components:j,limit:1,pluginId:/grafana-adaptive.*/})}catch{return null}}},96065:(ne,A,e)=>{"use strict";e.d(A,{e:()=>y});var n=e(74848),a=e(22803),s=e(96540),l=e(64423),r=e(28105),c=e(51898),i=e(92745),o=e(43173),h=e(47931),f=e(6975),g=e(50275),u=e(45861),E=e(41654),v=e(35137),p=e(83873),m=e(89460);class y extends s.PureComponent{constructor(x){super(x),this.subs=new l.yU,this.setFormattedJson=b=>{this.formattedJson=b},this.getTextForClipboard=()=>JSON.stringify(this.formattedJson,null,2),this.onToggleExpand=()=>{this.setState(b=>({...b,allNodesExpanded:!this.state.allNodesExpanded}))},this.onToggleMocking=()=>{this.setState(b=>({...b,isMocking:!this.state.isMocking}))},this.getNrOfOpenNodes=()=>this.state.allNodesExpanded===null?3:this.state.allNodesExpanded?20:1,this.state={executedQueries:[],allNodesExpanded:null,isMocking:!1,mockedResponse:"",response:{}}}componentDidMount(){this.subs.add(p.IB.getInspectorStream().subscribe({next:x=>{let b=!0;if(this.props.instanceId&&x?.requestId&&(b=x.requestId.startsWith(this.props.instanceId)),b)return this.onDataSourceResponse(x.response)}}))}componentDidUpdate(x){this.props.data!==x.data&&this.updateQueryList()}updateQueryList(){const{data:x}=this.props,b=x.series,D=[];if(b?.length){let C;b.forEach((P,T)=>{const O=P.meta?.executedQueryString;if(O){const S=P.refId||"?";C?.refId===S?(C.frames++,C.rows+=P.length):(C={refId:S,frames:0,rows:P.length,query:O},D.push(C))}})}this.setState({executedQueries:D})}componentWillUnmount(){this.subs.unsubscribe()}onDataSourceResponse(x){x.config?.hideFromInspector||(x={...x},x.headers&&delete x.headers,x.config&&(x.request=x.config,delete x.config,delete x.request.transformRequest,delete x.request.transformResponse,delete x.request.paramSerializer,delete x.request.jsonpCallbackParam,delete x.request.headers,delete x.request.requestId,delete x.request.inspect,delete x.request.retry,delete x.request.timeout),x.data&&(x.response=x.data,delete x.config,delete x.data,delete x.status,delete x.statusText,delete x.ok,delete x.url,delete x.redirected,delete x.type,delete x.$$config),this.setState({response:x}))}renderExecutedQueries(x){if(!x.length)return null;const b={refId:(0,a.css)({fontWeight:o.$.theme.typography.weight.semibold,color:o.$.theme.colors.textBlue,marginRight:"8px"})};return(0,n.jsx)("div",{children:x.map(D=>(0,n.jsxs)(E.B,{gap:1,direction:"column",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{className:b.refId,children:[D.refId,":"]}),D.frames>1&&(0,n.jsx)("span",{children:(0,n.jsxs)(i.x6,{i18nKey:"inspector.query-inspector.count-frames",count:D.frames,children:["{{count}}"," frames,"," "]})}),(0,n.jsx)("span",{children:(0,n.jsxs)(i.x6,{i18nKey:"inspector.query-inspector.count-rows",count:D.rows,children:["{{count}}"," rows"]})})]}),(0,n.jsx)("pre",{children:D.query})]},D.refId))})}render(){const{allNodesExpanded:x,executedQueries:b,response:D}=this.state,{onRefreshQuery:C,data:P}=this.props,T=this.getNrOfOpenNodes(),O=(0,m.A)(o.$.theme2),S=Object.keys(D).length>0,B=P.state===r.Gu.Loading;return(0,n.jsxs)("div",{className:O.wrap,children:[(0,n.jsxs)("div",{"aria-label":c.Tp.components.PanelInspector.Query.content,children:[(0,n.jsx)("h3",{className:O.heading,children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query-inspector.query-inspector",children:"Query inspector"})}),(0,n.jsx)("p",{className:"small muted",children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.description",children:"Query inspector allows you to view raw request and response. To collect this data Grafana needs to issue a new query. Click refresh button below to trigger a new query."})})]}),this.renderExecutedQueries(b),(0,n.jsxs)(E.B,{direction:"row",gap:2,justifyContent:"flex-start",wrap:!0,children:[(0,n.jsx)(u.$n,{icon:"sync",onClick:C,"aria-label":c.Tp.components.PanelInspector.Query.refreshButton,children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.refresh",children:"Refresh"})}),S&&x&&(0,n.jsx)(u.$n,{icon:"minus",variant:"secondary",onClick:this.onToggleExpand,children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.collapse-all",children:"Collapse all"})}),S&&!x&&(0,n.jsx)(u.$n,{icon:"plus",variant:"secondary",onClick:this.onToggleExpand,children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.expand-all",children:"Expand all"})}),S&&(0,n.jsx)(h.b,{getText:this.getTextForClipboard,icon:"copy",variant:"secondary",children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.copy-to-clipboard",children:"Copy to clipboard"})})]}),(0,n.jsx)(v.$,{v:2}),(0,n.jsxs)("div",{className:O.content,children:[B&&(0,n.jsx)(f._,{text:(0,i.t)("inspector.query-inspector.text-loading-query-inspector","Loading query inspector...")}),!B&&S&&(0,n.jsx)(g.B,{json:D,open:T,onDidRender:this.setFormattedJson}),!B&&!S&&(0,n.jsx)("p",{className:"muted",children:(0,n.jsx)(i.x6,{i18nKey:"inspector.query.no-data",children:"No request and response collected yet. Hit refresh button"})})]})]})}}},96120:(ne,A,e)=>{"use strict";e.d(A,{j:()=>n});const n={}},96137:(ne,A,e)=>{"use strict";e.d(A,{Ct:()=>x,KH:()=>f,KL:()=>E,LH:()=>h,Qn:()=>i,Wu:()=>o,bw:()=>v,fO:()=>u,i3:()=>m,lF:()=>g});var n=e(65307),a=e(2543),s=e.n(a),l=e(52161),r=e(94646),c=e(29609);const i=(0,n.VP)("ruleGroup/rules/add"),o=(0,n.VP)("ruleGroup/rules/update"),h=(0,n.VP)("ruleGroup/rules/pause"),f=(0,n.VP)("ruleGroup/rules/delete"),g=(0,n.VP)("ruleGroup/update"),u=(0,n.VP)("ruleGroup/move"),E=(0,n.VP)("ruleGroup/rename"),v=(0,n.VP)("ruleGroup/rules/reorder"),p={name:"initial",rules:[]},m=(0,n.vy)(p,D=>{D.addCase(i,(C,{payload:P})=>{const{rule:T}=P;C.rules.push(T)}).addCase(o,(C,{payload:P})=>{const{identifier:T,rule:O}=P,S=b(C.rules,T);C.rules[S]=O}).addCase(f,(C,{payload:P})=>{const{identifier:T}=P,O=b(C.rules,T);C.rules.splice(O,1)}).addCase(h,(C,{payload:P})=>{const{uid:T,pause:O}=P,S={ruleSourceName:l.hY,uid:T},B=b(C.rules,S),K=C.rules[B];if(c.p.grafana.rule(K))K.grafana_alert.is_paused=O;else throw new Error("Matching rule is not a Grafana-managed rule")}).addCase(v,(C,{payload:P})=>{const{swaps:T}=P;d(C.rules,T)}).addMatcher((0,n.i0)(E,u,i),(C,{payload:P})=>{const{groupName:T}=P;C.name=T??C.name}).addMatcher((0,n.i0)(g,E,u,i),(C,{payload:P})=>{const{interval:T}=P;C.interval=T??C.interval}).addDefaultCase((C,P)=>{throw new Error(`Unknown action for rule group reducer: ${P.type}`)})}),y=D=>{const C=(0,c.A4)(D),P=(0,c.X4)(D);return T=>{const O=c.p.grafana.rule(T),S=c.p.dataSource.rule(T);if(C&&O)return T.grafana_alert.uid===D.uid;if(S&&P)return(0,r.Ns)(T)===D.rulerRuleHash}};function d(D,C){for(const P of C)x(D,P);return D}function x(D,[C,P]){if(!((0,a.inRange)(C,D.length)&&(0,a.inRange)(P,D.length)))throw new Error("Invalid operation: index out of bounds");const[O]=D.splice(C,1);D.splice(P,0,O)}function b(D,C){const P=D.findIndex(y(C));if(P===-1)throw new Error("no rule matching identifier found");return P}},96215:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>I,S:()=>F});var n=e(2543),a=e(39741),s=e(62467),l=e(45650),r=e(69862),c=e(81160),i=e(66847),o=e(28105),h=e(41119),f=e(22592),g=e(60519),u=e(76732),E=e(739),v=e(2197),p=e(1906),m=e(17548),y=e(97534),d=e(36580),x=e(46383),b=e(28998),D=e(59373),C=e(73601),P=e(32380),T=e(49510),O=e(27359);function S(M=[]){M.forEach(L=>{L.meta={...L.meta,dataTopic:E.QR.Annotations}})}function B(M,L){return(0,T.z)([M,L]).pipe((0,r.Z)(N=>{const[W,R]=N;if(R.annotations?.length||R.alertState){W.annotations||(W.annotations=[]);const G=W.annotations.concat((0,O.I)(R.annotations));S(G);const w=R.alertState;return(0,s.of)({...W,annotations:G,alertState:w})}return S(W.annotations),(0,s.of)(W)}))}var K=e(71393);let U=100;function F(){return"Q"+U++}class I{constructor(L){this.templateSrv=(0,D.w)(),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new a.m(1),this.dataConfigSource=L}getData(L){const{withFieldConfig:N,withTransforms:W}=L;let R=1,G,w=[],_=[],Q,ae=!0,q=-1;if(this.dataConfigSource.snapshotData){const k={state:o.Gu.Done,series:this.dataConfigSource.snapshotData.map(ee=>(0,h.Vc)(ee)),timeRange:(0,f.E2)(),structureRev:R};return(0,s.of)(k)}return this.subject.pipe((0,r.Z)(k=>{let ee=this.dataConfigSource.getFieldOverrideOptions(),j=this.dataConfigSource.getTransformations();if(k.series===_&&G?.fieldConfig===ee?.fieldConfig&&Q===j)return(0,s.of)({...k,structureRev:R,series:w});G=ee,Q=j,_=k.series;let J=(0,s.of)(k);return W&&(J=this.applyTransformations(k)),J.pipe((0,c.T)(Z=>{let te=Z,se=!1;if(N&&Z.series?.length){if(q===this.dataConfigSource.configRev){let ie;for(const ce of Z.series)if((0,x.o$)(ce)){ie=ce;break}ie&&!ie.packetInfo.schemaChanged&&w[0].fields.length===ie.fields.length&&(te={...te,series:w.map((ce,re)=>({...ce,length:Z.series[re].length,fields:ce.fields.map((ue,X)=>({...ue,values:Z.series[re].fields[X].values,state:{...ue.state,calcs:void 0,range:void 0}}))}))},se=!0)}ee!=null&&(ae||!se)&&(q=this.dataConfigSource.configRev,te={...te,series:(0,g.we)({timeZone:Z.request?.timezone??"browser",data:te.series,...ee})},te.annotations&&(te.annotations=(0,g.we)({data:te.annotations,...ee,fieldConfig:{defaults:{},overrides:[]}})),ae=!1)}return!se&&!(0,u.J3)(w,te.series,u.bW)&&R++,w=te.series,{...te,structureRev:R}}))}))}applyTransformations(L){const N=this.dataConfigSource.getTransformations();if(N&&N.every(k=>k.disabled)||!N||N.length===0)return(0,s.of)(L);const R={interpolate:k=>this.templateSrv.replace(k,L?.request?.scopedVars)};let G=N.filter(k=>k.topic==null||k.topic===E.QR.Series),w=N.filter(k=>k.topic===E.QR.Annotations),_=(0,v.m)(G,L.series,R),Q=(0,v.m)(w,L.annotations??[],R),ae=[],q=[];return(0,l.p)([_,Q]).pipe((0,c.T)(k=>(k.forEach(ee=>{for(const j of ee)j.meta?.dataTopic===E.QR.Annotations?q.push(j):ae.push(j)}),{...L,series:ae,annotations:q})),(0,i.W)(k=>(console.warn("Error running transformation:",k),(0,s.of)({...L,state:o.Gu.Error,errors:[(0,y.u)(k)]}))))}async run(L){const{queries:N,timezone:W,datasource:R,panelId:G,panelName:w,panelPluginId:_,dashboardUID:Q,dashboardTitle:ae,timeRange:q,timeInfo:k,cacheTimeout:ee,queryCachingTTL:j,maxDataPoints:J,scopedVars:Z,minInterval:te,app:se}=L;if((0,C.k)(R)){this.pipeToSubject((0,C.m)(L,N[0]),G,!0);return}const ie=this.shouldAddErrorWhenDatasourceVariableIsMultiple(R,Z),ce={app:se??p.Jk.Dashboard,requestId:F(),timezone:W,panelId:G,panelName:w,panelPluginId:_,dashboardUID:Q,dashboardTitle:ae,range:q,timeInfo:k,interval:"",intervalMs:0,targets:(0,n.cloneDeep)(N),maxDataPoints:J,scopedVars:Z||{},cacheTimeout:ee,queryCachingTTL:j,startTime:Date.now(),rangeRaw:q.raw};try{const re=await V(R,ce.scopedVars),ue=re.meta?.mixed;ce.targets=ce.targets.map(he=>{const fe=he.datasource?.type===d.dR.type;return(!he.datasource||he.datasource.uid!==re.uid&&!ue&&!fe)&&(he.datasource=re.getRef()),he});const X=te?this.templateSrv.replace(te,ce.scopedVars):re.interval,le=m.calculateInterval(q,J,X);ce.scopedVars=Object.assign({},ce.scopedVars,{__interval:{text:le.interval,value:le.interval},__interval_ms:{text:le.intervalMs.toString(),value:le.intervalMs}}),ce.interval=le.interval,ce.intervalMs=le.intervalMs,ce.filters=this.templateSrv.getAdhocFilters(re.name,!0),ce.panelId=G,ce.panelName=w,this.lastRequest=ce,this.pipeToSubject((0,K.BN)(re,ce),G,!1,ie)}catch(re){this.pipeToSubject((0,s.of)({state:o.Gu.Error,error:(0,y.u)(re),series:[],timeRange:ce.range}),G)}}pipeToSubject(L,N,W=!1,R=!1){this.subscription&&this.subscription.unsubscribe();let G=L;const w=this.dataConfigSource.getDataSupport();if(w.alertStates||w.annotations){const _=this.dataConfigSource;G=B(L,(0,P.Dh)().getResult(_.id))}this.subscription=G.subscribe({next:_=>{const Q=this.lastResult,ae=W?_:(0,h.N$)(_,Q);if(Q!=null&&ae.state!==o.Gu.Streaming){let q=(0,u.J3)(Q.series??[],ae.series??[],(J,Z)=>J===Z),k=(0,u.J3)(Q.annotations??[],ae.annotations??[],(J,Z)=>J===Z),ee=Q.state===ae.state,j=(0,u.J3)(Q.errors??[],ae.errors??[],(J,Z)=>(0,n.isEqual)(J,Z));if(q&&(ae.series=Q.series),k&&(ae.annotations=Q.annotations),q&&k&&ee&&j)return}this.lastResult=ae,R&&(ae.errors=[{message:"Panel is using a variable datasource with multiple values without repeat option. Please configure the panel to be repeated by the same datasource variable."}],ae.state=o.Gu.Error),this.subject.next(ae)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===o.Gu.Loading||this.lastResult.state===o.Gu.Streaming)&&this.subject.next({...this.lastResult,state:o.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new a.m(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(L){this.lastResult=L.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(L){this.lastResult=L}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}shouldAddErrorWhenDatasourceVariableIsMultiple(L,N){let W=!1;return L?.uid?.startsWith("${")&&this.templateSrv.replace(L.uid,N,R=>(Array.isArray(R)&&R.length>1&&(W=!0),"")),W}}async function V(M,L){return M&&typeof M=="object"&&"query"in M?M:await(0,b.tR)().get(M,L)}},96221:(ne,A,e)=>{"use strict";e.d(A,{Qd:()=>n,g2:()=>s});var n=(l=>(l.Success="success",l.Warning="warning",l.Error="error",l.Info="info",l))(n||{}),a=(l=>(l[l.Success=3e3]="Success",l[l.Warning=5e3]="Warning",l[l.Error=7e3]="Error",l))(a||{});const s={success:3e3,warning:5e3,error:7e3,info:3e3}},96396:(ne,A,e)=>{"use strict";e.d(A,{l:()=>h});var n=e(74848),a=e(22803),s=e(96540),l=e(93581),r=e(63142),c=e(8135),i=e(30703),o=e(66630);const h=(0,s.memo)(u=>{const E=(0,r.of)(g),{isOpen:v,onClose:p}=u;return v?(0,n.jsx)(c.N,{useCapture:!0,includeButtonPress:!1,onClick:p,children:(0,n.jsx)("div",{className:E.modal,"data-testid":"date-picker",children:(0,n.jsx)(f,{...u})})}):null});h.displayName="DatePicker";const f=(0,s.memo)(({value:u,minDate:E,maxDate:v,onChange:p})=>{const m=(0,r.of)(o.h2);return(0,n.jsx)(l.Ay,{className:m.body,tileClassName:m.title,value:u||new Date,minDate:E,maxDate:v,nextLabel:(0,n.jsx)(i.I,{name:"angle-right"}),prevLabel:(0,n.jsx)(i.I,{name:"angle-left"}),onChange:y=>{y&&!Array.isArray(y)&&p(y)},locale:"en"})});f.displayName="Body";const g=u=>({modal:(0,a.css)({zIndex:u.zIndex.modal,boxShadow:u.shadows.z3,backgroundColor:u.colors.background.primary,border:`1px solid ${u.colors.border.weak}`,borderTopLeftRadius:u.shape.radius.default,borderBottomLeftRadius:u.shape.radius.default,"button:disabled":{color:u.colors.text.disabled}})})},96453:(ne,A,e)=>{"use strict";e.d(A,{E:()=>r,F:()=>s});var n,a;class s{constructor(){this[n]={}}*iterator(){for(let i=0;i<this.length;i++)yield this.get(i)}set(i,o){throw"unsupported operation"}add(i){throw"unsupported operation"}push(...i){for(const o of i)this.add(o);return this.length}[(a=Symbol.iterator,n=Symbol.unscopables,a)](){return this.iterator()}forEach(i){return r(this).forEach(i)}map(i){return r(this).map(i)}filter(i){return r(this).filter(i)}at(i){return this.get(i)}toArray(){const i=new Array(this.length);for(let o=0;o<this.length;o++)i[o]=this.get(o);return i}join(i){return this.toArray().join(i)}toJSON(){return this.toArray()}pop(){throw new Error("Method not implemented.")}concat(...i){throw new Error("Method not implemented.")}reverse(){throw new Error("Method not implemented.")}shift(){throw new Error("Method not implemented.")}sort(i){throw new Error("Method not implemented.")}splice(i,o,...h){throw new Error("Method not implemented.")}unshift(...i){throw new Error("Method not implemented.")}fill(i,o,h){throw new Error("Method not implemented.")}copyWithin(i,o,h){throw new Error("Method not implemented.")}slice(i,o){return this.toArray().slice(i,o)}indexOf(i,o){return this.toArray().indexOf(i,o)}lastIndexOf(i,o){return this.toArray().lastIndexOf(i,o)}every(i,o){return this.toArray().every(i,o)}some(i,o){return this.toArray().some(i,o)}reduce(i,o){throw new Error("Method not implemented.")}reduceRight(i,o){throw new Error("Method not implemented.")}find(i,o){return this.toArray().find(i,o)}findIndex(i,o){return this.toArray().findIndex(i,o)}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.toArray().values()}includes(i,o){return this.toArray().includes(i,o)}flatMap(i,o){return this.toArray().flatMap(i,o)}flat(i){throw new Error("Method not implemented.")}}const l=[];function r(c){return{*[Symbol.iterator](){for(let i=0;i<c.length;i++)yield c.get(i)},forEach(i){for(let o=0;o<c.length;o++)i(c.get(o),o,l)},map(i){const o=[];for(let h=0;h<c.length;h++)o.push(i(c.get(h),h,l));return o},filter(i){const o=[];let h=0;for(const f of this)i(f,h++,l)&&o.push(f);return o}}}},96691:(ne,A,e)=>{"use strict";e.d(A,{MK:()=>h,Ob:()=>g,XF:()=>o,mN:()=>f});var n=e(74848),a=e(96540),s=e(92745),l=e(68079),r=e(31286);class c{constructor(p){this.keyPath=p,this.matchFound=!1}matches(p){return/^\d+$/.test(this.keyPath)?`panel-${this.keyPath}`===p.state.key?(this.matchFound=!0,!0):!1:this.keyPath===p.getPathId()?(this.matchFound=!0,!0):!1}}const i=a.createContext(null);function o(v){return a.useMemo(()=>v?new c(v):null,[v])}function h(){return(0,a.useContext)(i)}function f(v,p){const m=[];for(const y of p)v.matches(y)&&m.push((0,n.jsx)(y.Component,{model:y},y.state.key));return(0,n.jsx)(n.Fragment,{children:m})}function g({children:v,value:p,singleMatch:m,dashboard:y}){return(0,n.jsxs)(i.Provider,{value:p,children:[v,(0,n.jsx)(u,{singleMatch:m,dashboard:y})]})}function u({singleMatch:v,dashboard:p}){const m=h(),[y,d]=(0,a.useState)({matchFound:!1,isLoading:!0});return(0,a.useEffect)(()=>{const x=setInterval(()=>{d({matchFound:m.matchFound,isLoading:E(p)})},500);return()=>clearInterval(x)},[m,p]),y.matchFound||m.matchFound?null:y.isLoading?(0,n.jsx)(l.y,{}):(0,n.jsxs)(r.a,{backgroundColor:"primary",borderColor:"weak",borderStyle:"solid",padding:2,borderRadius:"default",display:"flex",justifyContent:"center",alignItems:"center",children:[v&&(0,n.jsx)(s.x6,{i18nKey:"dashboard.view-panel.not-found",children:"Panel not found"}),!v&&(0,n.jsx)(s.x6,{i18nKey:"dashboard.search-panel.no-match",children:"No panels matching"})]})}function E(v){const p=v.state.$variables;return!p||!p.isActive?!0:p.state.variables.some(m=>m.state.loading)}},96733:(ne,A,e)=>{"use strict";e.d(A,{t:()=>l});var n=e(74848),a=e(92745),s=e(34999);function l({noRepository:r,isReadOnlyRepo:c,readOnlyMessage:i}){return r?(0,n.jsx)(s.F,{title:(0,a.t)("browse-dashboards.bulk-move-resources-form.error.repository-not-found-title","Repository not found"),children:(0,n.jsx)(a.x6,{i18nKey:"browse-dashboards.bulk-move-resources-form.error.repository-not-found-message",children:"The repository for the selected folder could not be found. Please ensure that the folder is provisioned correctly."})}):c?(0,n.jsx)(s.F,{title:(0,a.t)("browse-dashboards.bulk-move-resources-form.error.read-only-title","This repository is read only"),children:i?(0,a.t)("browse-dashboards.bulk-move-resources-form.error.read-only-saving-message","Repository is read-only and provisioned in git. {{readOnlyMessage}}",{readOnlyMessage:i}):(0,a.t)("browse-dashboards.bulk-move-resources-form.error.read-only-message","If you have direct access to the target, please make modifications directly in the target repository.")}):null}},96784:(ne,A,e)=>{"use strict";e.d(A,{dI:()=>y,i7:()=>d});var n=e(1932),a=e(2543),s=e.n(a),l=e(96540),r=e(78282),c=e(24619),i=e(74268),o=e(56369),h=e(86017),f=e(95443),g=e(52161),u=e(20386),E=e(63895),v=e(29609),p=e(23265),m=e(20962);function y(){const[S,B]=(0,m.l)(),K=S.get("search")??"",U=(0,l.useMemo)(()=>(0,o.XY)(K),[K]),F=(0,l.useMemo)(()=>Object.values(U).some(N=>!(0,a.isEmpty)(N)),[U]),I=(0,l.useMemo)(()=>(0,a.chain)(U).omitBy(a.isEmpty).keys().filter(O).value(),[U]),V=(0,l.useCallback)(N=>{const W=(0,o.kL)(K,N);B({search:W})},[K,B]),M=(0,l.useCallback)(N=>{B({search:N})},[B]);(0,l.useEffect)(()=>{const N={dataSource:S.get("dataSource")??void 0,alertState:S.get("alertState")??void 0,ruleType:S.get("ruleType")??void 0,labels:(0,E.S6)(S.get("queryString")??"").map(h.MU)};Object.values(N).some(R=>!(0,a.isEmpty)(R))&&(B({dataSource:void 0,alertState:void 0,ruleType:void 0,queryString:void 0}),V((0,n.jM)(U,R=>{if(R.dataSourceNames??=N.dataSource?[N.dataSource]:[],N.alertState&&(0,c.Si)(N.alertState)&&(R.ruleState??=N.alertState),N.ruleType&&(0,v.nf)(N.ruleType)&&(R.ruleType??=N.ruleType),R.labels.length===0&&N.labels.length>0){const G=N.labels.map(({name:w,operator:_,value:Q})=>`${w}${_}${Q}`);R.labels.push(...G)}})))},[S,V,U,B]);const L=(0,l.useCallback)(()=>{B({search:void 0})},[B]);return{filterState:U,hasActiveFilters:F,searchQuery:K,setSearchQuery:M,updateFilters:V,clearAll:L,activeFilters:I}}const d=(S,B)=>{const K=(0,l.useDeferredValue)(S),U=(0,l.useDeferredValue)(B);return(0,l.useMemo)(()=>{const F=x(K,U);return F.forEach(I=>{I.groups.forEach(V=>{V.rules.forEach(M=>{v.R$.alertingRule(M.promRule)&&(M.instanceTotals=(0,p.Ug)(M.promRule),M.filteredInstanceTotals=(0,p.NW)(M.promRule))}),V.totals=(0,p.Tj)({rules:V.rules.map(M=>M.promRule).filter(M=>!!M)})})}),F},[K,U])},x=(S,B={dataSourceNames:[],labels:[],freeFormWords:[]})=>{let K=S;const U=B.dataSourceNames;U.length&&(K=K.filter(({rulesSource:V})=>(0,g.Eb)(V)?U.includes(V.name):!0));const F=B.namespace;F&&(K=(0,u.t)(K,V=>V.name,F));const I=[];try{K.reduce(b(B),[]).forEach(M=>{I.push(M)})}catch(V){(0,i.vV)(new Error("Failed to filter rules",{cause:V}),{search:JSON.stringify(B)})}return I},b=S=>(B,K)=>{const U=S.groupName;let F=K.groups;return U&&(F=(0,u.t)(F,I=>I.name,U)),F=F.reduce(D(S),[]),F.length&&B.push({...K,groups:F}),B},D=S=>{const B=S.ruleName??S.freeFormWords.join(" ");return(K,U)=>{let F=U.rules;if(B&&(F=(0,u.t)(F,I=>I.name,B)),S.ruleSource){const I=S.ruleSource===o.Eg.Grafana;F=F.filter(V=>{const M=!!(V.rulerRule&&v.p.grafana.rule(V.rulerRule));return I&&M})}return F=F.filter(I=>{const V=I.promRule,M=(0,a.chain)(S).pick(["ruleType","dataSourceNames","ruleHealth","labels","ruleState","dashboardUid","plugins","contactPoint","ruleSource"]).omitBy(a.isEmpty).mapValues(()=>!1).value();if("ruleType"in M&&S.ruleType===V?.type&&(M.ruleType=!0),"plugins"in M&&S.plugins==="hide"&&(M.plugins=I.rulerRule&&!(0,v.Tm)(I.rulerRule)),"contactPoint"in M){const L=S.contactPoint;v.p.grafana.rule(I.rulerRule)&&I.rulerRule.grafana_alert.notification_settings?.receiver===L&&(M.contactPoint=!0)}if("dataSourceNames"in M&&(v.p.grafana.rule(I.rulerRule)?P(I.rulerRule,S)&&(M.dataSourceNames=!0):M.dataSourceNames=!0),"ruleHealth"in S&&V){const L=(0,v.f6)(V.health);S.ruleHealth===L&&(M.ruleHealth=!0)}if("labels"in M){const L=(0,a.compact)(S.labels.map(C)),N=L.length>0&&(0,h.Av)(I.labels,L),W=L.length>0&&V&&V.type===c.JS.Alerting&&V.alerts&&V.alerts.some(R=>(0,h.Av)(R.labels,L));(N||W)&&(M.labels=!0)}if("ruleState"in M){const L=I.promRule;L&&v.R$.alertingRule(L)&&L.state===S.ruleState&&(M.ruleState=!0)}return"dashboardUid"in M&&I.annotations[f.YH.dashboardUID]===S.dashboardUid&&(M.dashboardUid=!0),Object.values(M).every(L=>L===!0)}),F.length&&K.push({...U,rules:F}),K}};function C(S){try{return(0,E.qR)(S)}catch{return{name:S,value:"",isRegex:!0,isEqual:!0}}}const P=(S,B)=>B.dataSourceNames?.length?!!S.grafana_alert.data.find(K=>{if(!K.datasourceUid)return!1;const U=(0,r.l)().getInstanceSettings(K.datasourceUid);return U?.name&&B?.dataSourceNames?.includes(U.name)}):!0,T=new Set(["freeFormWords","namespace","groupName","ruleName","ruleState","ruleType","dataSourceNames","labels","ruleHealth","dashboardUid","plugins","contactPoint","ruleSource"]),O=S=>T.has(S)},96822:(ne,A,e)=>{"use strict";e.d(A,{e:()=>m});var n=e(74848),a=e(96540),s=e(92745),l=e(45861),r=e(22787),c=e(22803),i=e(63142),o=e(37386),h=e(63527),f=e(21285),g=e(81917);const u=(0,a.memo)(({index:y,value:d,onChange:x,suggestions:b,isLast:D,showOneClick:C=!1})=>{const P=(0,i.of)(E),T=(K,U)=>{x(y,{...d,url:K},U)},O=K=>{x(y,{...d,title:K.target.value})},S=()=>{x(y,{...d,targetBlank:!d.targetBlank})},B=()=>{x(y,{...d,oneClick:!d.oneClick})};return(0,n.jsxs)("div",{className:P.listItem,children:[(0,n.jsx)(o.D,{label:(0,s.t)("grafana-ui.data-link-editor.title-label","Title"),children:(0,n.jsx)(h.p,{id:"link-title",value:d.title,onChange:O,placeholder:(0,s.t)("grafana-ui.data-link-editor.title-placeholder","Show details")})}),(0,n.jsx)(o.D,{label:(0,s.t)("grafana-ui.data-link-editor.url-label","URL"),children:(0,n.jsx)(g.l,{value:d.url,onChange:T,suggestions:b})}),(0,n.jsx)(o.D,{label:(0,s.t)("grafana-ui.data-link-editor.new-tab-label","Open in new tab"),children:(0,n.jsx)(f.d,{id:"new-tab-toggle",value:d.targetBlank||!1,onChange:S})}),C&&(0,n.jsx)(o.D,{label:(0,s.t)("grafana-ui.data-link-inline-editor.one-click","One click"),description:(0,s.t)("grafana-ui.data-link-editor-modal.one-click-description","Only one link can have one click enabled at a time"),children:(0,n.jsx)(f.d,{id:"one-click-toggle",value:d.oneClick||!1,onChange:B})}),D&&(0,n.jsx)(s.x6,{i18nKey:"grafana-ui.data-link-editor.info",className:P.infoText,children:"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."})]})});u.displayName="DataLinkEditor";const E=y=>({listItem:(0,c.css)({marginBottom:y.spacing()}),infoText:(0,c.css)({paddingBottom:y.spacing(2),marginLeft:"66px",color:y.colors.text.secondary})}),v=({link:y,index:d,onSave:x,onCancel:b,getSuggestions:D,showOneClick:C})=>{const[P,T]=(0,a.useState)(y);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u,{value:P,index:d,isLast:!1,onChange:(O,S)=>{T(S)},suggestions:D(),showOneClick:C}),(0,n.jsxs)(r.a.ButtonRow,{children:[(0,n.jsx)(l.$n,{variant:"secondary",onClick:()=>b(d),fill:"outline",children:(0,n.jsx)(s.x6,{i18nKey:"grafana-ui.data-link-editor-modal.cancel",children:"Cancel"})}),(0,n.jsx)(l.$n,{onClick:()=>{x(d,P)},disabled:P.title.trim()===""||P.url.trim()==="",children:(0,n.jsx)(s.x6,{i18nKey:"grafana-ui.data-link-editor-modal.save",children:"Save"})})]})]})};var p=e(73628);const m=({links:y,getSuggestions:d,showOneClick:x=!1,...b})=>(0,n.jsx)(p.J,{type:"link",items:y,...b,children:(D,C,P,T)=>(0,n.jsx)(v,{index:C,link:D??{title:"",url:""},data:b.data,onSave:P,onCancel:T,getSuggestions:d,showOneClick:x})})},97095:(ne,A,e)=>{"use strict";e.d(A,{C:()=>l});var n=e(74848),a=e(22803),s=e(63142);const l=({children:c,className:i,...o})=>{const h=(0,s.of)(r);return(0,n.jsx)("div",{className:(0,a.cx)(h.container,i),...o,children:c})},r=c=>({container:(0,a.css)({label:"InlineFieldRow",display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",rowGap:c.spacing(.5)})})},97335:(ne,A,e)=>{"use strict";e.d(A,{o:()=>he});var n=e(96540),a=e(92745),s=e(45863),l=e(45229),r=e(95943),c=e(29043),i=e(77197),o=e(87745),h=e(6048),f=e(76584),g=e(67350),u=e(8285),E=e(8835),v=e(48492),p=e(41667),m=e(74848),y=e(51898),d=e(37386),x=e(63527),b=e(21285),D=e(34999),C=e(89640),P=e(25797),T=e(51156),O=e(31819),S=e(9931),B=e(18615),K=e(78725),U=e(33143),F=e(44802),I=e(20246);function V(fe,Ce){const{layout:Ae}=fe.useState(),_e=(0,n.useMemo)(()=>new P.C({title:"",id:"dash-row-edit"}).addItem(new T.v({title:"",id:"dash-row-title",skipField:!0,render:()=>(0,m.jsx)(M,{row:fe,isNewElement:Ce})})).addItem(new T.v({title:(0,a.t)("dashboard.rows-layout.row-options.row.fill-screen","Fill screen"),id:"dash-row-fill-screen",render:$e=>(0,m.jsx)(N,{id:$e.props.id,row:fe})})).addItem(new T.v({title:(0,a.t)("dashboard.rows-layout.row-options.row.hide-header","Hide row header"),id:"dash-row-hide-header",render:$e=>(0,m.jsx)(L,{id:$e.props.id,row:fe})})),[fe,Ce]),Xe=(0,n.useMemo)(()=>new P.C({title:(0,a.t)("dashboard.rows-layout.row-options.repeat.title","Repeat options"),id:"dash-row-repeat",isOpenDefault:!1}).addItem(new T.v({title:(0,a.t)("dashboard.rows-layout.row-options.repeat.variable.title","Repeat by variable"),id:"dash-row-repeat-by-variable",description:(0,a.t)("dashboard.rows-layout.row-options.repeat.variable.description","Repeat this row for each value in the selected variable."),render:$e=>(0,m.jsx)(W,{id:$e.props.id,row:fe})})),[fe]),De=(0,F.W)(Ae),Me=[_e,...De,Xe],Te=(0,n.useMemo)(()=>(0,K.h)(fe.state.conditionalRendering),[fe]);return Te&&Me.push(Te),Me}function M({row:fe,isNewElement:Ce}){const{title:Ae}=fe.useState(),_e=(0,n.useRef)(""),Xe=(0,I.z4)({autoFocus:Ce}),De=fe.hasUniqueTitle();return(0,m.jsx)(d.D,{label:(0,a.t)("dashboard.rows-layout.row-options.row.title","Title"),invalid:!De,error:De?void 0:(0,a.t)("dashboard.rows-layout.row-options.title-not-unique","Title should be unique"),children:(0,m.jsx)(x.p,{id:(0,n.useId)(),ref:Xe,title:(0,a.t)("dashboard.rows-layout.row-options.title-option","Title"),value:Ae,onFocus:()=>_e.current=Ae||"",onBlur:()=>R(fe,Ae||"",_e.current||""),onChange:Me=>fe.onChangeTitle(Me.currentTarget.value)})})}function L({row:fe,id:Ce}){const{hideHeader:Ae=!1}=fe.useState();return(0,m.jsx)(b.d,{id:Ce,value:Ae,onChange:()=>fe.onHeaderHiddenToggle()})}function N({row:fe,id:Ce}){const{fillScreen:Ae}=fe.useState();return(0,m.jsx)(b.d,{id:Ce,value:Ae,onChange:()=>fe.onChangeFillScreen(!Ae)})}function W({row:fe,id:Ce}){const{layout:Ae}=fe.useState(),_e=(0,u.MZ)(fe),Xe=Ae.getVizPanels().some(De=>{const Me=(0,u.un)(De);return Me?.state.datasource?.uid===S.K||Me?.state.datasource?.uid===B.uv&&Me?.state.queries.some(Te=>Te.datasource?.uid===S.K)});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(O.U,{id:Ce,sceneContext:_e,repeat:fe.state.repeatByVariable,onChange:De=>fe.onChangeRepeat(De)}),Xe?(0,m.jsxs)(D.F,{"data-testid":y.Tp.pages.Dashboard.Rows.Repeated.ConfigSection.warningMessage,severity:"warning",title:"",topSpacing:3,bottomSpacing:0,children:[(0,m.jsx)("p",{children:(0,m.jsxs)(a.x6,{i18nKey:"dashboard.rows-layout.row.repeat.warning",children:["Panels in this row use the ",{SHARED_DASHBOARD_QUERY:S.K}," data source. These panels will reference the panel in the original row, not the ones in the repeated rows."]})}),(0,m.jsx)(C.Y,{external:!0,href:"https://grafana.com/docs/grafana/latest/dashboards/build-dashboards/create-dashboard/#configure-repeating-rows",children:(0,m.jsx)(a.x6,{i18nKey:"dashboard.rows-layout.row.repeat.learn-more",children:"Learn more"})})]}):void 0]})}function R(fe,Ce,Ae){Ce!==Ae&&U.cc.edit({description:(0,a.t)("dashboard.edit-actions.row-title","Change row title"),source:fe,perform:()=>fe.onChangeTitle(Ce),undo:()=>fe.onChangeTitle(Ae)})}var G=e(22803),w=e(21835),_=e(56887),Q=e(63142),ae=e(45861),q=e(36324),k=e(30703),ee=e(45967),j=e(86292),J=e(3371),Z=e(11534),te=e(96691);function se({model:fe}){const{layout:Ce,collapse:Ae,fillScreen:_e,hideHeader:Xe,isDropTarget:De,key:Me}=fe.useState(),Te=(0,J.bn)(fe),{isEditing:$e}=(0,u.TN)(fe),[Re,Ke,Ve]=(0,j.H)(fe),{isSelected:Se,onSelect:Ye,isSelectable:Ue}=(0,_.y)(Me),je=(0,u.hg)(fe),{rows:Qe}=fe.getParentLayout().useState(),He=(0,Q.of)(ie),Je=(0,Q.of)(ae.my),de=fe.parent?.parent instanceof Z.H$,ve=(0,q.C)(),me=(0,te.MK)(),xe=Qe.findIndex(Ge=>Ge===fe),Ee=!Ae&&_e,Pe=Re&&!$e,[Oe,We]=(0,n.useState)(!1),Fe=(0,n.useCallback)(()=>We(!0),[]),Be=(0,n.useCallback)(()=>We(!1),[]),Le=!Te&&$e;return Pe?null:me?(0,m.jsx)(Ce.Component,{model:Ce}):(0,m.jsx)(w.sx,{draggableId:Me,index:xe,isDragDisabled:!Le,children:(Ge,Ze)=>(0,m.jsxs)("div",{ref:qe=>{Ge.innerRef(qe),fe.containerRef.current=qe},"data-dashboard-drop-target-key":fe.state.key,className:(0,G.cx)(He.wrapper,!Ae&&He.wrapperNotCollapsed,Ze.isDragging&&He.dragging,Ae&&He.wrapperCollapsed,Ee&&He.wrapperGrow,Ke,!Te&&Se&&"dashboard-selected-element",!Te&&!Se&&Oe&&"dashboard-selectable-element",De&&"dashboard-drop-target"),onPointerDown:qe=>{qe.stopPropagation(),ve.set(qe)},onPointerUp:qe=>{if(Se&&qe.target instanceof Element&&qe.target.closest("button")){qe.stopPropagation();return}ve.check(qe)||setTimeout(()=>Ye?.(qe))},"data-testid":y.Tp.components.DashboardRow.wrapper(je),...Ge.draggableProps,children:[(!Xe||$e)&&(0,m.jsxs)("div",{className:(0,G.cx)(He.rowHeader,"dashboard-row-header"),onMouseEnter:Ue?Fe:void 0,onMouseLeave:Ue?Be:void 0,...Ge.dragHandleProps,children:[(0,m.jsxs)("button",{onClick:()=>fe.onCollapseToggle(),className:(0,G.cx)(Je,He.rowTitleButton),"aria-label":Ae?(0,a.t)("dashboard.rows-layout.row.expand","Expand row"):(0,a.t)("dashboard.rows-layout.row.collapse","Collapse row"),"data-testid":y.Tp.components.DashboardRow.title(je),children:[(0,m.jsx)(k.I,{name:Ae?"angle-right":"angle-down"}),(0,m.jsxs)("span",{className:(0,G.cx)(He.rowTitle,Xe&&He.rowTitleHidden,!de&&He.rowTitleNested,Ae&&He.rowTitleCollapsed),children:[!fe.hasUniqueTitle()&&(0,m.jsx)(ee.m,{content:(0,a.t)("dashboard.rows-layout.row-warning.title-not-unique","This title is not unique"),children:(0,m.jsx)(k.I,{name:"exclamation-triangle"})}),je,Xe&&(0,m.jsx)(ee.m,{content:(0,a.t)("dashboard.rows-layout.header-hidden-tooltip","Row header only visible in edit mode"),children:(0,m.jsx)(k.I,{name:"eye-slash"})})]})]}),Le&&(0,m.jsx)(k.I,{name:"draggabledots",className:"dashboard-row-header-drag-handle"})]}),!Ae&&(0,m.jsx)(Ce.Component,{model:Ce}),Ve]})},Me)}function ie(fe){return{rowHeader:(0,G.css)({display:"flex",gap:fe.spacing(1),padding:fe.spacing(.5,.5,.5,0),alignItems:"center",justifyContent:"space-between",marginBottom:fe.spacing(1),"& .dashboard-row-header-drag-handle":(0,G.css)({opacity:0,[fe.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.25s"}}),"&:hover":(0,G.css)({"& .dashboard-row-header-drag-handle":(0,G.css)({opacity:1})})}),rowTitleButton:(0,G.css)({display:"flex",alignItems:"center",cursor:"pointer",background:"transparent",border:"none",minWidth:0,gap:fe.spacing(1)}),rowTitle:(0,G.css)({display:"flex",alignItems:"center",gap:fe.spacing(2),...fe.typography.h5,fontWeight:fe.typography.fontWeightMedium,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",flexGrow:1,minWidth:0}),rowTitleHidden:(0,G.css)({textDecoration:"line-through",opacity:.6,"&:hover":(0,G.css)({opacity:1})}),rowTitleNested:(0,G.css)({fontSize:fe.typography.body.fontSize,fontWeight:fe.typography.fontWeightRegular}),rowTitleCollapsed:(0,G.css)({color:fe.colors.text.secondary}),wrapper:(0,G.css)({display:"flex",flexDirection:"column",minHeight:fe.spacing(2.75+1+1+.125)}),wrapperNotCollapsed:(0,G.css)({"> div:nth-child(2)":{marginLeft:fe.spacing(3),position:"relative",width:"auto","&:before":{content:'""',position:"absolute",top:"-8px",bottom:0,left:"-16px",width:"1px",backgroundColor:fe.colors.border.weak}}}),dragging:(0,G.css)({cursor:"move"}),wrapperGrow:(0,G.css)({flexGrow:1}),wrapperCollapsed:(0,G.css)({flexGrow:0,borderBottom:`1px solid ${fe.colors.border.weak}`,minHeight:"unset",".dashboard-row-header":{marginBottom:fe.spacing(0)}}),rowActions:(0,G.css)({display:"flex",opacity:0}),checkboxWrapper:(0,G.css)({display:"flex",alignItems:"center",paddingLeft:fe.spacing(1)})}}var ce=e(32635);function re(fe){const Ce="rows-options";return[new P.C({title:"",id:Ce}).addItem(new T.v({title:(0,a.t)("dashboard.edit-pane.row.header.title","Row header"),id:`${Ce}-row-header`,render:()=>(0,m.jsx)(ue,{model:fe})}))]}function ue({model:fe}){const Ce=fe.getRows();let Ae=!1,_e=!1;for(let Xe=0;Xe<Ce.length;Xe++){const{hideHeader:De}=Ce[Xe].useState(),Me=Ce[Xe-1];_e=_e||Me&&!!Me.state.hideHeader!=!!De,Ae=Ae||!!De}return(0,m.jsx)(ce.S,{label:(0,a.t)("dashboard.edit-pane.row.header.hide","Hide"),value:Ae,indeterminate:_e,onChange:()=>fe.onHeaderHiddenToggle(Ae,_e)})}class X{constructor(Ce){this._rows=Ce,this.isEditableDashboardElement=!0}getEditableElementInfo(){return{typeName:(0,a.t)("dashboard.edit-pane.elements.rows","Rows"),icon:"folder",instanceName:""}}useEditPaneOptions(){return re(this)}getRows(){return this._rows}onDelete(){this._rows.forEach(Ce=>Ce.onDelete())}onHeaderHiddenToggle(Ce,Ae){this._rows.forEach(_e=>_e.onHeaderHiddenToggle(Ae?!0:!Ce))}}var le=e(97883);class he extends s.Bs{constructor(Ce){super({...Ce,title:Ce?.title??(0,a.t)("dashboard.rows-layout.row.new","New row"),layout:Ce?.layout??E.X2.createEmpty(),conditionalRendering:Ce?.conditionalRendering??h.M.createEmpty()}),this._variableDependency=new s.Sh(this,{statePaths:["title"]}),this.isEditableDashboardElement=!0,this.isDashboardDropTarget=!0,this.containerRef=n.createRef(),this.addActivationHandler(()=>this._activationHandler())}static{this.Component=se}_activationHandler(){const Ce=this.state.conditionalRendering?.activate();return()=>{Ce&&Ce()}}getEditableElementInfo(){return{typeName:(0,a.t)("dashboard.edit-pane.elements.row","Row"),instanceName:s.jh.interpolate(this,this.state.title,void 0,"text"),icon:"list-ul"}}getOutlineChildren(){return this.state.layout.getOutlineChildren()}getLayout(){return this.state.layout}getSlug(){return i.A.slugifyForUrl(s.jh.interpolate(this,this.state.title??"Row"))}switchLayout(Ce){this.setState({layout:Ce})}useEditPaneOptions(Ce){return V(this,Ce)}onDelete(){this.getParentLayout().removeRow(this)}onConfirmDelete(){if(this.getLayout().getVizPanels().length===0){this.onDelete();return}if(this.getParentLayout().shouldUngroup()){this.onDelete();return}l.A.publish(new o.bY({title:(0,a.t)("dashboard.rows-layout.delete-row-title","Delete row?"),text:(0,a.t)("dashboard.rows-layout.delete-row-text","Deleting this row will also remove all panels. Are you sure you want to continue?"),yesText:(0,a.t)("dashboard.rows-layout.delete-row-yes","Delete"),onConfirm:()=>{this.onDelete()}}))}createMultiSelectedElement(Ce){return new X(Ce.filter(Ae=>Ae instanceof he))}onDuplicate(){this.getParentLayout().duplicateRow(this)}duplicate(){return this.clone({key:void 0,layout:this.getLayout().duplicate()})}serialize(){return(0,f.HQ)(this)}onCopy(){const Ce=(0,g.IC)(this.getLayout(),(0,u.YQ)(this));(0,v.G2)(),c.A.set(r.rt,JSON.stringify({elements:Ce,row:this.serialize()}))}setIsDropTarget(Ce){!!this.state.isDropTarget!==Ce&&this.setState({isDropTarget:Ce})}draggedPanelOutside(Ce){this.getLayout().removePanel?.(Ce),this.setIsDropTarget(!1)}draggedPanelInside(Ce){Ce.clearParent(),this.getLayout().addPanel(Ce),this.setIsDropTarget(!1)}onChangeTitle(Ce){this.setState({title:Ce})}onChangeName(Ce){this.onChangeTitle(Ce)}onHeaderHiddenToggle(Ce=!this.state.hideHeader){this.setState({hideHeader:Ce})}onChangeFillScreen(Ce){this.setState({fillScreen:Ce})}onChangeRepeat(Ce){Ce?this.setState({repeatByVariable:Ce}):this.setState({repeatedRows:void 0,$variables:void 0,repeatByVariable:void 0})}onCollapseToggle(){this.setState({collapse:!this.state.collapse})}getParentLayout(){return s.jh.getAncestor(this,le.V)}scrollIntoView(){(0,p.d)(this,this.containerRef)}getCollapsedState(){return this.state.collapse??!1}setCollapsedState(Ce){this.setState({collapse:Ce})}hasUniqueTitle(){return!this.getParentLayout().duplicateTitles().has(this.state.title)}}},97375:(ne,A,e)=>{"use strict";e.d(A,{t:()=>i});var n=e(74848),a=e(96540),s=e(29647),l=e(51898),r=e(87063),c=e(15245);const i=a.memo(({x:o,y:h,onClose:f,focusOnOpen:g=!0,renderMenuItems:u,renderHeader:E})=>{const v=(0,a.useRef)(null),[p,m]=(0,a.useState)({});(0,a.useLayoutEffect)(()=>{const D=v.current;if(D){const C=D.getBoundingClientRect(),P=5,T={right:window.innerWidth<o+C.width,bottom:window.innerHeight<h+C.height+P};m({position:"fixed",left:T.right?o-C.width-P:o-P,top:Math.max(0,T.bottom?h-C.height-P:h+P)})}},[o,h]),(0,s.A)(v,()=>{f?.()});const y=E?.(),d=u?.(),x=D=>{g&&D(0)},b=D=>{D.key==="Escape"&&(D.preventDefault(),D.stopPropagation(),f?.())};return(0,n.jsx)(c.ZL,{children:(0,n.jsx)(r.W,{header:y,ref:v,style:p,ariaLabel:l.Tp.components.Menu.MenuComponent("Context"),onOpen:x,onClick:f,onKeyDown:b,children:d})})});i.displayName="ContextMenu"},97474:(ne,A,e)=>{"use strict";e.d(A,{KQ:()=>s,QB:()=>l});var n=e(739);const a="12.2.1",s={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:n.wV.Auto,showValue:n.yL.Auto,stacking:n.gs.None,xTickLabelRotation:0,xTickLabelSpacing:0},l={fillOpacity:80,gradientMode:n.on.None,lineWidth:1}},97486:(ne,A,e)=>{"use strict";e.d(A,{k:()=>P});var n=e(74848),a=e(2543),s=e(96540),l=e(37297),r=e(64394),c=e(60519),i=e(16515),o=e(84229),h=e(60311),f=e(739),g=e(63142),u=e(64400),E=e(12241),v=e(78013),p=e(89381),m=e(1932);function y(T,O,S){return(0,m.jM)(T,B=>{B.defaults.custom===void 0&&(B.defaults.custom={}),B.defaults.max=S;const{custom:K}=B.defaults;switch(K.stacking===void 0&&(K.stacking={group:"A"}),O){case"lines":K.drawStyle=f.GR.Line,K.stacking.mode=f.gs.None,K.fillOpacity=0;break;case"bars":K.drawStyle=f.GR.Bars,K.stacking.mode=f.gs.None,K.fillOpacity=100;break;case"points":K.drawStyle=f.GR.Points,K.stacking.mode=f.gs.None,K.fillOpacity=0;break;case"stacked_lines":K.drawStyle=f.GR.Line,K.stacking.mode=f.gs.Normal,K.fillOpacity=100,K.axisSoftMin=0;break;case"stacked_bars":K.drawStyle=f.GR.Bars,K.stacking.mode=f.gs.Normal,K.fillOpacity=100,K.axisSoftMin=0;break;default:{const U=O;throw new Error(`Invalid graph-style: ${U}`)}}})}function d(T,O,S){return(0,m.jM)(T,B=>{B.defaults.thresholds=S,B.defaults.custom=B.defaults.custom??{},B.defaults.custom.thresholdsStyle=O})}var x=e(56737),b=e(84596),D=e(76732);function C(T){const[O,{inc:S}]=(0,x.A)(1),B=(0,b.A)(T);return(0,s.useMemo)(()=>{B&&!(0,D.J3)(T,B,D.bW)&&S()},[T,B,S]),O}function P({data:T,height:O,width:S,timeZone:B,timeRange:K,onChangeTime:U,loadingState:F,annotations:I,onHiddenSeriesChanged:V,splitOpenFn:M,graphStyle:L,tooltipDisplayMode:N=f.$N.Single,anchorToZero:W=!1,yAxisMaximum:R,thresholdsConfig:G,thresholdsStyle:w,eventBus:_,vizLegendOverrides:Q,toggleLegendRef:ae}){const q=(0,g.$j)(),k=(0,s.useMemo)(()=>(0,l.O)((0,E.V)(E.S),"Explore"),[]),[ee,j]=(0,s.useState)({defaults:{min:W?0:void 0,max:R||void 0,unit:"short",color:{mode:r.Y.PaletteClassic},custom:{drawStyle:f.GR.Line,fillOpacity:0,pointSize:5}},overrides:[]}),J=(0,s.useMemo)(()=>{const le=y(ee,L,R);return d(le,w,G)},[ee,L,R,G,w]),Z=(0,p.h)(M,K),te=(0,s.useMemo)(()=>(0,c.we)({fieldConfig:J,data:T,timeZone:B,replaceVariables:le=>le,theme:q,fieldConfigRegistry:k,dataLinkPostProcessor:Z}),[k,T,B,q,J,Z]),se=(0,s.useMemo)(()=>(0,c.we)({fieldConfig:{defaults:{},overrides:[]},data:I,timeZone:B,replaceVariables:le=>le,theme:q,dataLinkPostProcessor:Z}),[I,B,q,Z]),ie=C(te),ce=(0,s.useRef)(void 0);(0,s.useEffect)(()=>{if(!V)return;const le=[];te.forEach(he=>{he.fields.map(Ce=>Ce.config?.custom?.hideFrom?.viz).every(a.identity)&&le.push((0,i.Ri)(he))}),(ce.current===void 0||!(0,a.isEqual)((0,a.sortBy)(le),(0,a.sortBy)(ce.current)))&&(ce.current=le,V(le))},[te,V]);const re={eventsScope:"explore",eventBus:_,sync:()=>o.y.Off,onToggleSeriesVisibility(le,he){j((0,v.M)(le,he,ee,T))},dataLinkPostProcessor:Z};function ue(le,he){if(!le){j({...ee,overrides:[]});return}j((0,v.M)(le,he,ee,T))}ae&&(ae.current=ue);const X=(0,s.useMemo)(()=>({tooltip:{mode:N,sort:f.xB.None},legend:{displayMode:f.lm.List,showLegend:!0,placement:"bottom",calcs:[],...Q}}),[N,Q]);return(0,n.jsx)(u.XF,{value:re,children:(0,n.jsx)(h.m,{data:{series:te,timeRange:K,state:F,annotations:se,structureRev:ie},pluginId:"timeseries",title:"",width:S,height:O,onChangeTimeRange:U,timeZone:B,options:X})})}},97507:(ne,A,e)=>{"use strict";e.d(A,{dK:()=>G,Kt:()=>Q,$x:()=>w,om:()=>R,Z3:()=>L,Pm:()=>ae,cB:()=>q});var n=e(96540),a=e(5709);const s=["Receiver"],r=a.H.enhanceEndpoints({addTagTypes:s}).injectEndpoints({endpoints:k=>({listNamespacedReceiver:k.query({query:ee=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${ee.namespace}/receivers`,params:{pretty:ee.pretty,allowWatchBookmarks:ee.allowWatchBookmarks,continue:ee.continue,fieldSelector:ee.fieldSelector,labelSelector:ee.labelSelector,limit:ee.limit,resourceVersion:ee.resourceVersion,resourceVersionMatch:ee.resourceVersionMatch,sendInitialEvents:ee.sendInitialEvents,timeoutSeconds:ee.timeoutSeconds,watch:ee.watch}}),providesTags:["Receiver"]}),createNamespacedReceiver:k.mutation({query:ee=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${ee.namespace}/receivers`,method:"POST",body:ee.comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1Receiver,params:{pretty:ee.pretty,dryRun:ee.dryRun,fieldManager:ee.fieldManager,fieldValidation:ee.fieldValidation}}),invalidatesTags:["Receiver"]}),readNamespacedReceiver:k.query({query:ee=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${ee.namespace}/receivers/${ee.name}`,params:{pretty:ee.pretty}}),providesTags:["Receiver"]}),replaceNamespacedReceiver:k.mutation({query:ee=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${ee.namespace}/receivers/${ee.name}`,method:"PUT",body:ee.comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1Receiver,params:{pretty:ee.pretty,dryRun:ee.dryRun,fieldManager:ee.fieldManager,fieldValidation:ee.fieldValidation}}),invalidatesTags:["Receiver"]}),deleteNamespacedReceiver:k.mutation({query:ee=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${ee.namespace}/receivers/${ee.name}`,method:"DELETE",body:ee.ioK8SApimachineryPkgApisMetaV1DeleteOptions,params:{pretty:ee.pretty,dryRun:ee.dryRun,gracePeriodSeconds:ee.gracePeriodSeconds,orphanDependents:ee.orphanDependents,propagationPolicy:ee.propagationPolicy}}),invalidatesTags:["Receiver"]})}),overrideExisting:!1}).enhanceEndpoints({endpoints:{createNamespacedReceiver:{invalidatesTags:["Receiver","ContactPoint","ContactPointsStatus","AlertmanagerConfiguration"]},deleteNamespacedReceiver:k=>{const ee=k.query;k.query=(...j)=>{const J=ee(...j);return J.headers={"content-type":"application/json"},J}},readNamespacedReceiver:k=>{const ee={hideErrorMessage:!0};k.extraOptions=ee}}});var c=e(53226),i=e(51740),o=e(52161),h=e(56476),f=e(85618),g=e(91984),u=e(77788),E=e(80218),v=e(3986),p=e(43100),m=e(15518),y=e(182),d=e(66056);const x=10*1e3,{useGetAlertmanagerConfigurationQuery:b,useGetContactPointsStatusQuery:D,useGrafanaNotifiersQuery:C,useLazyGetAlertmanagerConfigurationQuery:P}=g.m,{useGrafanaOnCallIntegrationsQuery:T}=u.WG,{useListNamespacedReceiverQuery:O,useReadNamespacedReceiverQuery:S,useDeleteNamespacedReceiverMutation:B,useCreateNamespacedReceiverMutation:K,useReplaceNamespacedReceiverMutation:U}=r,F={refetchOnFocus:!0,refetchOnReconnect:!0},I=({skip:k}={})=>{const{installed:ee,loading:j}=(0,v._)((0,y.BO)()),J=T(void 0,{skip:k||!ee});return(0,n.useMemo)(()=>ee?J:{isLoading:j,data:void 0},[ee,j,J])},V=k=>({id:k.metadata.name||k.metadata.uid||k.spec.title,name:k.spec.title,provisioned:(0,h.Uo)(k),grafana_managed_receiver_configs:k.spec.integrations,metadata:k.metadata}),M=(...[k,ee])=>O(k,{...ee,selectFromResult:j=>{const J=j.data?.items.map(Z=>V(Z));return{...j,data:j.error?[]:J,currentData:J}}}),L=({fetchStatuses:k,fetchPolicies:ee,skip:j}={})=>{const J=(0,f.Ge)(),Z={skip:j},te=I(Z),se=C(void 0,Z),ie=M({namespace:J},Z),ce=D(void 0,{...F,pollingInterval:x,skip:j||!k}),re=b(o.hY,{skip:j||!ee});return(0,n.useMemo)(()=>{if(te.isLoading||se.isLoading||ie.isLoading)return{...ie,isLoading:!0,contactPoints:[]};const X=(0,d.Rm)({status:ce.data,notifiers:se.data,onCallIntegrations:te?.data,contactPoints:ie.data||[],alertmanagerConfiguration:re.data});return{...ie,contactPoints:X}},[se,re,ie,ce,te])},N=({alertmanager:k,name:ee},j)=>b(k,{...j,selectFromResult:J=>{const Z=J.data?.alertmanager_config.receivers?.find(te=>te.name===ee);return{...J,data:Z,currentData:Z}}}),W=({name:k},ee)=>{const j=(0,f.Ge)();return S({namespace:j,name:k},{...ee,selectFromResult:J=>{const Z=J.data?V(J.data):void 0;return{...J,data:Z,currentData:Z}},skip:ee?.skip})},R=({alertmanager:k,name:ee})=>{const j=k===o.hY,J=W({name:ee},{skip:!j}),Z=N({alertmanager:k,name:ee},{skip:j});return j?J:Z};function G({alertmanager:k,fetchStatuses:ee,fetchPolicies:j,skip:J}){const Z=k===o.hY,te=L({skip:J||!Z,fetchStatuses:ee,fetchPolicies:j}),se=b(k,{...F,selectFromResult:ie=>({...ie,contactPoints:ie.data?(0,d.Rm)({notifiers:i.r,contactPoints:ie.data.alertmanager_config.receivers??[],alertmanagerConfiguration:ie.data}):[]}),skip:J||Z});return Z?te:se}function w({alertmanager:k}){const ee=(0,h.dM)(k),[j]=(0,p.d)(),[J]=B(),Z=(0,E.Yb)(async({name:se,resourceVersion:ie})=>{const ce=(0,f.Ge)();await J({name:se,namespace:ce,ioK8SApimachineryPkgApisMetaV1DeleteOptions:{preconditions:{resourceVersion:ie}}}).unwrap()}),te=(0,E.Yb)(async({name:se})=>{const ie=(0,m.FS)(se);return j(ie)});return ee?Z:te}const _=(k,ee,j)=>({metadata:{...ee&&{name:ee},resourceVersion:j},spec:{title:k.name,integrations:k.grafana_managed_receiver_configs||[]}}),Q=({alertmanager:k})=>{const ee=k===o.hY,{createOnCallIntegrations:j}=(0,c.VY)(),[J]=K(),[Z]=(0,p.d)(),te=(0,E.Yb)(async({contactPoint:ie})=>{const ce=await j(ie),re=(0,f.Ge)(),ue=_(ce);return J({namespace:re,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1Receiver:ue}).unwrap()}),se=(0,E.Yb)(async({contactPoint:ie})=>{const ce=(0,m.BD)(ie);return Z(ce)});return ee?te:se},ae=({alertmanager:k})=>{const ee=k===o.hY,j=(0,h.dM)(k),{createOnCallIntegrations:J}=(0,c.VY)(),[Z]=U(),[te]=(0,p.d)();return(0,E.Yb)(async ie=>{if("resourceVersion"in ie&&j){const{contactPoint:ce,id:re,resourceVersion:ue}=ie,X=ee?await J(ce):ce,le=(0,f.Ge)(),he=_(X,re,ue);return Z({name:re,namespace:le,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1Receiver:he}).unwrap()}else if("originalName"in ie){const{contactPoint:ce,originalName:re}=ie,ue=ee?await J(ce):ce,X=(0,m.Xm)({name:re,receiver:ue});return te(X)}})},q=({alertmanager:k})=>{const[ee]=P();return k===o.hY?()=>{}:async(j,J)=>{if(!(J&&j===J))return ee(k).unwrap().then(Z=>{const{alertmanager_config:te}=Z;return!!te.receivers?.find(ie=>ie.name===j)?`Contact point already exists with name "${j}"`:void 0})}}},97534:(ne,A,e)=>{"use strict";e.d(A,{u:()=>n});function n(a){const s=a||{};if(!s.message){if(typeof a=="string")return{message:a};let l="Query error";s.message?l=s.message:s.data&&s.data.message&&s.data?.message!=="Query data error"?l=s.data.message:s?.data?.message==="Query data error"&&s?.data?.error||s.data&&s.data.error?l=s.data.error:s.status&&(l=`Query error: ${s.status} ${s.statusText}`),s.message=l}return s}},97583:(ne,A,e)=>{"use strict";e.d(A,{i:()=>n});var n=(s=>(s[s.Panel=1]="Panel",s))(n||{}),a=(s=>(s[s.Dashboard=1]="Dashboard",s))(a||{})},97611:(ne,A,e)=>{"use strict";e.d(A,{yV:()=>V,yp:()=>K,$p:()=>U,F8:()=>F,SV:()=>I});var n=e(74848),a=e(22803),s=e(96540),l=e(45861),r=e(21539),c=e(84140),i=e(95004),o=e(55386),h=e(739),f=e(8255),g=e(53568),u=e(53431),E=e(30703);const v=({percentChange:M,styles:L})=>{let N;return M>0?N="arrow-up":M<0&&(N="arrow-down"),(0,n.jsxs)("div",{style:L.containerStyles,children:[N&&(0,n.jsx)(E.I,{name:N,height:L.iconSize,width:L.iconSize,viewBox:"6 6 12 12"}),p(M)]})},p=M=>(M/100).toLocaleString(void 0,{style:"percent",maximumSignificantDigits:3}),m=1.2,y=30,d=500;class x{constructor(L){this.props=L;const{width:N,height:W,value:R,text:G}=L;this.valueColor=R.color??"gray",this.panelPadding=W>100?12:8,this.textValues=S(L),this.justifyCenter=O(L.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.percentFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=N-this.panelPadding*2,this.maxTextHeight=W-this.panelPadding*2,G&&(G.titleSize&&(this.titleFontSize=G.titleSize,this.titleToAlignTo=void 0),G.valueSize&&(this.valueFontSize=G.valueSize,this.valueToAlignTo=""),G.percentSize&&(this.percentFontSize=G.percentSize))}getTitleStyles(){const L={fontSize:`${this.titleFontSize}px`,lineHeight:m};return(this.props.colorMode===K.Background||this.props.colorMode===K.BackgroundSolid)&&(L.color=(0,f.mZ)(this.valueColor,this.props.theme.isDark)),L}getValueStyles(){const L={fontSize:this.valueFontSize,fontWeight:d,lineHeight:m,position:"relative",zIndex:1};switch(this.justifyCenter&&(L.textAlign="center"),this.props.colorMode){case K.Value:L.color=this.valueColor;break;case K.Background:case K.BackgroundSolid:L.color=(0,f.mZ)(this.valueColor,this.props.theme.isDark);break;case K.None:L.color=this.props.theme.colors.text.primary;break}return L}getPercentChangeStyles(L,N,W){const G=this.getValueAndTitleContainerStyles(),w=this.percentFontSize||Math.max(this.valueFontSize/2.5,12);let _=this.percentFontSize?this.percentFontSize-3:Math.max(this.valueFontSize/3,10);const Q=this.props.theme.visualization,ae=B(L,N,W,Q),q={fontSize:w,fontWeight:d,lineHeight:m,position:"relative",display:"flex",alignItems:"center",gap:Math.max(w/3,4),zIndex:1,color:ae};switch(this.justifyCenter&&(q.textAlign="center"),G.flexDirection==="column"&&w>12&&(q.marginTop=-(w/4)),G.flexDirection==="row"&&(q.alignItems="baseline",q.lineHeight=m*2.5),this.props.colorMode){case K.Background:case K.BackgroundSolid:q.color=(0,f.mZ)(this.valueColor,this.props.theme.isDark);break}return this.props.textMode===I.None&&(q.fontSize=(0,g.Vr)(p(L),this.maxTextWidth*.8,this.maxTextHeight*.8,m,void 0,d),_=q.fontSize*.8),{containerStyles:q,iconSize:_}}getValueAndTitleContainerStyles(){const L={display:"flex",flexWrap:"wrap"};return this.justifyCenter&&(L.alignItems="center",L.justifyContent="center",L.flexGrow=1,L.gap="0.75ch"),L}getPanelStyles(){const{width:L,height:N,theme:W,colorMode:R,textMode:G}=this.props,w={width:`${L}px`,height:`${N}px`,padding:`${G===I.None?2:this.panelPadding}px`,borderRadius:W.shape.radius.default,position:"relative",display:"flex"},_=W.isDark?1:-.7;switch(R){case K.Background:const Q=(0,c.A)(this.valueColor).darken(15*_).spin(8).toRgbString(),ae=(0,c.A)(this.valueColor).darken(5*_).spin(-8).toRgbString();w.background=`linear-gradient(120deg, ${Q}, ${ae})`;break;case K.BackgroundSolid:w.background=(0,c.A)(this.valueColor).toString();break;case K.Value:w.background="transparent";break}return this.justifyCenter&&(w.alignItems="center",w.flexDirection="row"),w}renderChart(){const{sparkline:L,colorMode:N}=this.props;if(!L||L.y?.type!==i.PU.number)return null;let W,R;switch(N){case K.Background:case K.BackgroundSolid:W="rgba(255,255,255,0.4)",R=(0,c.A)(this.valueColor).brighten(40).toRgbString();break;case K.None:case K.Value:default:R=this.valueColor,W=(0,c.A)(this.valueColor).setAlpha(.2).toRgbString();break}const G={custom:{drawStyle:h.GR.Line,lineWidth:1,fillColor:W,lineColor:R}};return(0,n.jsx)("div",{style:this.getChartStyles(),children:(0,n.jsx)(u.O,{height:this.chartHeight,width:this.chartWidth,sparkline:L,config:G,theme:this.props.theme})})}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class b extends x{constructor(L){super(L);const N=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,g.Vr)(this.valueToAlignTo,this.maxTextWidth*N,this.maxTextHeight,m,void 0,d)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,g.Vr)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,m,y),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const L=super.getValueAndTitleContainerStyles();return L.flexDirection="row",L.alignItems="center",L.flexGrow=1,this.justifyCenter||(L.justifyContent="space-between"),L}renderChart(){return null}getPanelStyles(){const L=super.getPanelStyles();return L.alignItems="center",L}}class D extends x{constructor(L){super(L);const{width:N,height:W}=L,R=.5,G=.6,w=1-G,_=.4;this.chartWidth=N,this.chartHeight=W*R,this.titleToAlignTo?.length&&(this.titleFontSize=(0,g.Vr)(this.titleToAlignTo,this.maxTextWidth*G,this.maxTextHeight*_,m,y)),this.valueToAlignTo.length&&(this.valueFontSize=(0,g.Vr)(this.valueToAlignTo,this.maxTextWidth*w,this.maxTextHeight*R,m,void 0,d))}getValueAndTitleContainerStyles(){const L=super.getValueAndTitleContainerStyles();return L.flexDirection="row",L.flexGrow=1,this.justifyCenter||(L.justifyContent="space-between"),L}getPanelStyles(){const L=super.getPanelStyles();return L.flexDirection="row",L.justifyContent="space-between",L}}class C extends x{constructor(L){super(L);const{width:N,height:W}=L,R=.15,G=.25;let w=0;this.chartHeight=W*G,this.chartWidth=N,this.titleToAlignTo?.length&&(this.titleFontSize=(0,g.Vr)(this.titleToAlignTo,this.maxTextWidth,W*R,m,y),w=this.titleFontSize*m),this.valueToAlignTo.length&&(this.valueFontSize=(0,g.Vr)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-w,m,void 0,d)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=W-this.titleFontSize*m-this.valueFontSize*m}getValueAndTitleContainerStyles(){const L=super.getValueAndTitleContainerStyles();return L.flexDirection="column",L.justifyContent="center",L}getPanelStyles(){const L=super.getPanelStyles();return L.flexDirection="column",L}}class P extends x{constructor(L){super(L);const{height:N}=L,W=.15;let R=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,g.Vr)(this.titleToAlignTo,this.maxTextWidth,N*W,m,y),R=this.titleFontSize*m),this.valueToAlignTo.length&&(this.valueFontSize=(0,g.Vr)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-R,m,void 0,d)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const L=super.getValueAndTitleContainerStyles();return L.flexDirection="column",L.flexGrow=1,L}renderChart(){return null}getPanelStyles(){const L=super.getPanelStyles();return L.alignItems="center",L}}function T(M){const{width:L,height:N,sparkline:W}=M;return L/N>2.5&&!M.disableWideLayout?N>50&&W&&W.y.values.length>1?new D(M):new b(M):N>100&&W&&W.y.values.length>1?new C(M):new P(M)}function O(M,L){return M===F.Center?!0:(L??"").length===0}function S(M){const{value:L,alignmentFactors:N,count:W}=M;let{textMode:R}=M;const G=N?N.title:L.title,w=(0,o.cN)(N||L);switch(R===I.Auto&&(W??1)===1&&(R=I.Value),R){case I.Name:return{...L,title:void 0,prefix:void 0,suffix:void 0,text:L.title||"",titleToAlignTo:void 0,valueToAlignTo:G??"",tooltip:(0,o.cN)(L)};case I.Value:return{...L,title:void 0,titleToAlignTo:void 0,valueToAlignTo:w,tooltip:L.title};case I.None:return{numeric:L.numeric,color:L.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${L.title}
Value: ${(0,o.cN)(L)}`};case I.ValueAndName:default:return{...L,titleToAlignTo:G,valueToAlignTo:w}}}function B(M,L,N,W){return L===h.CD.SameAsValue?N.color:M*(L===h.CD.Inverted?-1:1)>0?W.getColorByName("green"):W.getColorByName("red")}var K=(M=>(M.Background="background",M.BackgroundSolid="background_solid",M.None="none",M.Value="value",M))(K||{}),U=(M=>(M.None="none",M.Line="line",M.Area="area",M))(U||{}),F=(M=>(M.Auto="auto",M.Center="center",M))(F||{}),I=(M=>(M.Auto="auto",M.Value="value",M.ValueAndName="value_and_name",M.Name="name",M.None="none",M))(I||{});class V extends s.PureComponent{static{this.defaultProps={justifyMode:"auto"}}render(){const{onClick:L,className:N,hasLinks:W,theme:R}=this.props,G=T(this.props),w=G.getPanelStyles(),_=G.getValueAndTitleContainerStyles(),Q=G.getValueStyles(),ae=G.getTitleStyles(),q=G.textValues,k=this.props.value.percentChange,ee=this.props.percentChangeColorMode,j=k!=null&&!Number.isNaN(k),J=W?void 0:q.tooltip;return L?(0,n.jsxs)("button",{type:"button",className:(0,a.cx)((0,l.my)(R),N),style:w,onClick:L,title:J,children:[(0,n.jsxs)("div",{style:_,children:[q.title&&(0,n.jsx)("div",{style:ae,children:q.title}),(0,n.jsx)(r.i,{value:q,style:Q})]}),G.renderChart()]}):(0,n.jsxs)("div",{className:N,style:w,title:J,children:[(0,n.jsxs)("div",{style:_,children:[q.title&&(0,n.jsx)("div",{style:ae,children:q.title}),(0,n.jsx)(r.i,{value:q,style:Q}),j&&(0,n.jsx)(v,{percentChange:k,styles:G.getPercentChangeStyles(k,ee,Q)})]}),G.renderChart()]})}}},97644:(ne,A,e)=>{"use strict";e.d(A,{KQ:()=>c});var n=e(739);const a="12.2.1";var s=(i=>(i.Opacity="opacity",i.Scheme="scheme",i))(s||{}),l=(i=>(i.Exponential="exponential",i.Linear="linear",i))(l||{}),r=(i=>(i.X="x",i.Xy="xy",i.Y="y",i))(r||{});const c={calculate:!1,cellGap:1,cellValues:{},color:{scheme:"Oranges",fill:"dark-orange",reverse:!1,exponent:.5,steps:64},exemplars:{color:"rgba(255,0,255,0.7)"},filterValues:{le:1e-9},legend:{show:!0},selectionMode:"x",showValue:n.yL.Auto,tooltip:{mode:n.$N.Single,yHistogram:!1,showColorScale:!1}}},97883:(ne,A,e)=>{"use strict";e.d(A,{V:()=>I});var n=e(92745),a=e(45863),s=e(33143),l=e(76584),r=e(8285),c=e(93389),i=e(1131),o=e(87308),h=e(98279),f=e(48492),g=e(20246),u=e(97335),E=e(74848),v=e(22803),p=e(21835),m=e(51898),y=e(63142),d=e(45861),x=e(3371),b=e(96691),D=e(61659),C=e(2543),P=e(96540),T=e(68079);function O({row:V,variable:M}){const{repeatedRows:L}=V.useState();return(0,P.useEffect)(()=>{S(M,V,!1);const N=M.subscribeToState(R=>S(M,V,!1)),W=V.subscribeToEvent(s.WG,R=>S(M,V,!0));return()=>{W.unsubscribe(),N.unsubscribe()}},[M,V]),L===void 0||a.jh.hasVariableDependencyInLoadingState(M)||M.state.loading?(r.xp.logger("RowItemRepeater",!1,"Variable is loading, showing spinner"),(0,E.jsx)(T.y,{})):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(V.Component,{model:V},V.state.key),L?.map(N=>(0,E.jsx)(N.Component,{model:N},N.state.key))]})}function S(V,M,L){if(a.jh.hasVariableDependencyInLoadingState(V)){r.xp.logger("RowItemRepeater",!1,"Skipped dependency in loading state");return}if(V.state.loading){r.xp.logger("RowItemRepeater",!1,"Skipped, variable is loading");return}const{values:N,texts:W}=(0,r.a7)(V),R=B(M,V.state.name);if(!L&&(0,C.isEqual)(R,N)){r.xp.logger("RowItemRepeater",!1,"Skipped, values the same");return}L?r.xp.logger("RowItemRepeater",!1,"Performing repeats, contentChanged"):r.xp.logger("RowItemRepeater",!1,"Performing repeats, variable values changed",N);const G=N.length?N:[""],w=W.length?W:V.hasAllValue()?["All"]:["None"],_=[];for(let Q=0;Q<G.length;Q++){const ae=Q===0,q=(0,x.lv)(M.state.key,Q),k=ae?M:M.clone({key:q,repeatSourceKey:M.state.key,repeatByVariable:void 0,repeatedRows:void 0,layout:void 0}),ee=ae?M.getLayout():M.getLayout().cloneLayout(q,!1);k.setState({$variables:(0,x.D1)(V,G[Q],w[Q]),layout:ee}),ae||_.push(k)}M.setState({repeatedRows:_})}function B(V,M){const L=[];if(!V.state.repeatedRows)return[];function N(W){const R=a.jh.lookupVariable(M,W);if(R){const G=R.getValue();G!=null&&!Array.isArray(G)&&L.push(G)}}N(V);for(const W of V.state.repeatedRows)N(W);return L}function K({model:V}){const{rows:M,key:L}=V.useState(),{isEditing:N}=(0,r.TN)(V),W=(0,y.of)(F),{hasCopiedRow:R}=(0,D.x)();if((0,b.MK)())return M.map(_=>(0,E.jsx)(U,{row:_,manager:V},_.state.key));const w=(0,x.bn)(V);return(0,E.jsx)(p.JY,{onBeforeDragStart:_=>V.forceSelectRow(_.draggableId),onDragEnd:_=>{_.destination&&_.destination.index!==_.source.index&&V.moveRow(_.draggableId,_.source.index,_.destination.index)},children:(0,E.jsx)(p.gL,{droppableId:L,direction:"vertical",children:_=>(0,E.jsxs)("div",{className:W.wrapper,ref:_.innerRef,..._.droppableProps,children:[M.map(Q=>(0,E.jsx)(U,{row:Q,manager:V},Q.state.key)),_.placeholder,N&&!w&&(0,E.jsxs)("div",{className:"dashboard-canvas-add-button",children:[(0,E.jsx)(d.$n,{icon:"plus",variant:"primary",fill:"text",onClick:()=>V.addNewRow(),"data-testid":m.Tp.components.CanvasGridAddActions.addRow,children:(0,E.jsx)(n.x6,{i18nKey:"dashboard.canvas-actions.new-row",children:"New row"})}),R&&(0,E.jsx)(d.$n,{icon:"clipboard-alt",variant:"primary",fill:"text",onClick:()=>V.pasteRow(),"data-testid":m.Tp.components.CanvasGridAddActions.pasteRow,children:(0,E.jsx)(n.x6,{i18nKey:"dashboard.canvas-actions.paste-row",children:"Paste row"})})]})]})})})}function U({row:V,manager:M}){const{repeatByVariable:L}=(0,a.gn)(V,{shouldActivateOrKeepAlive:!0});if(L){const N=a.jh.lookupVariable(L,M);if(N instanceof a.n8)return(0,E.jsx)(O,{row:V,manager:M,variable:N},V.state.key)}return(0,E.jsx)(V.Component,{model:V},V.state.key)}function F(V){return{wrapper:(0,v.css)({display:"flex",flexDirection:"column",gap:V.spacing(1),flexGrow:1,width:"100%"})}}class I extends a.Bs{constructor(){super(...arguments),this.isDashboardLayoutManager=!0,this.descriptor=I.descriptor}static{this.Component=K}static{this.descriptor={get name(){return(0,n.t)("dashboard.rows-layout.name","Rows")},get description(){return(0,n.t)("dashboard.rows-layout.description","Collapsable panel groups with headings")},id:"RowsLayout",createFromLayout:I.createFromLayout,isGridLayout:!1,icon:"list-ul"}}serialize(){return(0,l.aL)(this)}addPanel(M){}getVizPanels(){const M=[];for(const L of this.state.rows){const N=L.getLayout().getVizPanels();M.push(...N)}return M}cloneLayout(M,L){return this.clone({})}duplicate(){const M=this.state.rows.map(L=>L.duplicate());return this.clone({rows:M,key:void 0})}duplicateRow(M){const L=M.duplicate();this.addNewRow(L)}addNewRow(M){const L=M??new u.o({}),N=new Set(this.state.rows.map(R=>R.state.title).filter(R=>R!==void 0)),W=(0,g.BK)(L.state.title,N);return W!==L.state.title&&L.setState({title:W}),s.cc.addElement({addedObject:L,source:this,perform:()=>this.setState({rows:[...this.state.rows,L]}),undo:()=>this.setState({rows:this.state.rows.filter(R=>R!==L)})}),L}editModeChanged(M){this.state.rows.forEach(L=>L.getLayout().editModeChanged?.(M))}pasteRow(){const M=(0,r.YQ)(this),L=(0,f.$v)(M);this.addNewRow(L)}shouldUngroup(){return this.state.rows.length===1}getOutlineChildren(){const M=[];for(const L of this.state.rows)if(M.push(L),L.state.repeatedRows)for(const N of L.state.repeatedRows)M.push(N);return M}removeRow(M){if(this.shouldUngroup()){(0,g.f)(this,M.state.layout);return}const L=this.state.rows.findIndex(N=>N===M);s.cc.removeElement({removedObject:M,source:this,perform:()=>this.setState({rows:this.state.rows.filter(N=>N!==M)}),undo:()=>{const N=[...this.state.rows];N.splice(L,0,M),this.setState({rows:N})}})}moveRow(M,L,N){const W=[...this.state.rows],[R]=W.splice(L,1);W.splice(N,0,R),this.setState({rows:W}),this.publishEvent(new s.su(this),!0)}forceSelectRow(M){const L=this.state.rows.findIndex(R=>R.state.key===M),N=this.state.rows[L];if(!N)return;(0,r.YQ)(this).state.editPane.selectObject(N,M,{force:!0,multi:!1})}static createEmpty(){return new I({rows:[new u.o]})}static createFromLayout(M){let L=[];if(M instanceof h.K)for(const N of M.state.tabs){if(N.state.repeatSourceKey)continue;const W=N.state.conditionalRendering;W?.clearParent(),L.push(new u.o({layout:N.state.layout.clone(),title:N.state.title,conditionalRendering:W,repeatByVariable:N.state.repeatByVariable}))}else if(M instanceof i.D){const N=[];let W;M.state.grid.forEachChild(R=>{if(!(R instanceof c.U)&&!(R instanceof a.tI))throw new Error("Child is not a DashboardGridItem or SceneGridRow, invalid scene");if(R instanceof a.tI){if(R.state.repeatSourceKey)return;const G=R.state.$behaviors?.find(w=>w instanceof o.L);N.push({title:R.state.title,isCollapsed:!!R.state.isCollapsed,isDraggable:R.state.isDraggable,isResizable:R.state.isResizable,children:R.state.children,repeat:G?.state.variableName}),W=void 0}else W||(W=[],N.push({children:W})),W.push(R)}),L=N.map(R=>new u.o({title:R.title,collapse:!!R.isCollapsed,repeatByVariable:R.repeat,layout:i.D.fromGridItems(R.children,R.isDraggable??M.state.grid.state.isDraggable,R.isResizable??M.state.grid.state.isResizable,M.state.grid.state.isLazy)}))}else L=[new u.o({layout:M.clone()})];return L.length===0&&(L=[new u.o]),new I({rows:L})}duplicateTitles(){const M=new Map,L=new Set;return this.state.rows.forEach(N=>{const W=a.jh.interpolate(N,N.state.title),R=(M.get(W)??0)+1;M.set(W,R),R>1&&W&&L.add(W)}),L}}},98005:(ne,A,e)=>{"use strict";e.d(A,{xE:()=>P});var n=e(74848),a=e(22803),s=e(96540),l=e(84140),r=e(76637),c=e(55386),i=e(64394),o=e(33553),h=e(38919),f=e(48588),g=e(51898),u=e(739),E=e(53568),v=e(45861),p=e(21539);const m=18,y=50,d=150,x=1.5,b=1,D=10,C=15;class P extends s.PureComponent{static{this.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:u.eX.Gradient,orientation:h.wV.Horizontal,field:{min:0,max:100,thresholds:{mode:o.O.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0,isOverflow:!1}}render(){const{onClick:N,className:W,theme:R}=this.props,{title:G}=this.props.value,w=S(this.props);return N?(0,n.jsxs)("button",{type:"button",style:w.wrapper,onClick:N,className:(0,a.cx)((0,v.my)(R),W),children:[(0,n.jsx)("div",{style:w.title,children:G}),this.renderBarAndValue()]}):(0,n.jsxs)("div",{style:w.wrapper,className:W,children:[G&&(0,n.jsx)("div",{style:w.title,children:G}),this.renderBarAndValue()]})}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:N,showUnfilled:W,valueDisplayMode:R}=this.props,G=F(this.props);return(0,n.jsxs)("div",{style:G.wrapper,children:[R!==u.$l.Hidden&&(0,n.jsx)(p.i,{"data-testid":g.Tp.components.Panels.Visualization.BarGauge.valueV2,value:N,style:G.value}),W&&(0,n.jsx)("div",{style:G.emptyBar}),(0,n.jsx)("div",{style:G.bar})]})}renderRetroBars(){const{display:N,field:W,value:R,itemSpacing:G,alignmentFactors:w,orientation:_,lcdCellWidth:Q,text:ae,valueDisplayMode:q,theme:k,isOverflow:ee}=this.props,{valueHeight:j,valueWidth:J,maxBarHeight:Z,maxBarWidth:te,wrapperWidth:se,wrapperHeight:ie}=B(this.props),ce=W.min??f.tw,re=W.max??f.d1,ue=T(_),X=re-ce,le=ue?Z:te,he=G,fe=Math.floor(le/Q),Ce=Math.floor((le-he*fe)/fe),Ae=V(this.props),Xe=M(w||R,Ae,J,j,_,ee,ae),De={width:`${se}px`,height:`${ie}px`,display:"flex"};ue?(De.flexDirection="column-reverse",De.alignItems="center"):(De.flexDirection="row",De.alignItems="center",Xe.justifyContent="flex-end");const Me=[];for(let Te=0;Te<fe;Te++){const $e=ce+X/fe*Te,Re=K($e,R,N),Ke={borderRadius:k.shape.radius.default};Re.isLit?Ke.backgroundImage=`radial-gradient(${Re.background} 10%, ${Re.backgroundShade})`:Ke.backgroundColor=Re.background,ue?(Ke.height=`${Ce}px`,Ke.width=`${te}px`,Ke.marginTop=`${he}px`):(Ke.width=`${Ce}px`,Ke.height=`${Z}px`,Ke.marginRight=`${he}px`),Me.push((0,n.jsx)("div",{style:Ke},Te.toString()))}return(0,n.jsxs)("div",{style:De,children:[Me,q!==u.$l.Hidden&&(0,n.jsx)(p.i,{"data-testid":g.Tp.components.Panels.Visualization.BarGauge.valueV2,value:R,style:Xe})]})}}function T(L){return L===h.wV.Vertical}function O(L){const{height:N,width:W,alignmentFactors:R,orientation:G,text:w,namePlacement:_}=L,Q=R?R.title:L.value.title;if(!Q)return{fontSize:0,width:0,height:0,placement:"above"};if(_===u.TZ.Hidden)return{fontSize:0,width:0,height:0,placement:u.TZ.Hidden};if(T(G)){const Z=w?.titleSize??14;return{fontSize:Z,width:W,height:Z*x,placement:"below"}}if(N>40&&_===u.TZ.Auto||_===u.TZ.Top){if(w?.titleSize)return{fontSize:w?.titleSize,width:0,height:w.titleSize*x,placement:"above"};const te=Math.max(Math.min(N*.45,y),17);return{fontSize:te/x,width:0,height:te,placement:"above"}}const ee=Math.max(N*.6,m)/x,j=(0,E.kD)(Q,ee),J=Math.min(j.width+15,W*.4);return{fontSize:w?.titleSize??ee,height:0,width:J,placement:"left"}}function S(L){const N={display:"flex",overflow:"hidden",width:"100%"},W=O(L),R={fontSize:`${W.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return W.placement==="hidden"?R.display="none":T(L.orientation)?(N.flexDirection="column-reverse",R.textAlign="center"):W.placement==="above"?N.flexDirection="column":(N.flexDirection="row",R.width=`${W.width}px`,R.textAlign="right",R.paddingRight="10px"),{wrapper:N,title:R}}function B(L){const{height:N,width:W,orientation:R,text:G,alignmentFactors:w,valueDisplayMode:_}=L,Q=O(L),ae=w??L.value,q=(0,c.cN)(ae);let k=0,ee=0,j=0,J=0,Z=0,te=0;const se=G?.valueSize??Math.max(Q.fontSize,12),ce=(0,E.kD)(q,se).width+D*2;return T(R)?(G?.valueSize?j=G.valueSize*b:j=Math.min(Math.max(N*.1,m),y),J=W,_===u.$l.Hidden&&(j=0,J=0),k=N-(Q.height+j),ee=W,Z=W,te=N-Q.height):(_===u.$l.Hidden?(j=0,J=0):(j=N-Q.height,J=Math.max(Math.min(W*.2,d),ce)),k=N-Q.height,ee=W-J-Q.width,Q.placement==="above"?(Z=W,te=N-Q.height):(Z=W-Q.width,te=N)),{valueWidth:J,valueHeight:j,maxBarWidth:ee,maxBarHeight:k,wrapperHeight:te,wrapperWidth:Z}}function K(L,N,W){if(L===null)return{background:i.F,border:i.F};const R=W?W(L).color:null;return R?N===null||isNaN(N.numeric)||L!==null&&L>N.numeric?{background:(0,l.A)(R).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,l.A)(R).setAlpha(.95).toRgbString(),backgroundShade:(0,l.A)(R).setAlpha(.55).toRgbString(),border:(0,l.A)(R).setAlpha(.9).toRgbString(),isLit:!0}:{background:i.F,border:i.F}}function U(L,N,W){const R=Math.min((L-N)/(W-N),1);return isNaN(R)?0:R}function F(L){const{displayMode:N,field:W,value:R,alignmentFactors:G,orientation:w,theme:_,text:Q,isOverflow:ae}=L,{valueWidth:q,valueHeight:k,maxBarHeight:ee,maxBarWidth:j}=B(L),J=W.min??f.tw,Z=W.max??f.d1,te=U(R.numeric,J,Z),se=V(L),ie=R.color??i.F,re=M(G||R,se,q,k,w,ae,Q),ue=N==="basic",X={display:"flex",flexGrow:1},le={borderRadius:_.shape.radius.default,position:"relative"},he={background:_.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:_.shape.radius.default,position:"relative"};if(T(w)){const fe=Math.max(te*ee,1);X.flexDirection="column",X.justifyContent="flex-end",le.transition="height 1s",le.height=`${fe}px`,le.width=`${j}px`,he.bottom="-3px",he.width=`${q}px`,ue?(le.background=`${(0,l.A)(ie).setAlpha(.35).toRgbString()}`,le.borderTop=`2px solid ${ie}`):le.background=I(L,ee)}else{const fe=Math.max(te*j,1);X.flexDirection="row-reverse",X.justifyContent="flex-end",X.alignItems="stretch",le.transition="width 1s",le.height=`${ee}px`,le.width=`${fe}px`,he.left="-3px",he.height=`${k}px`,ue?(le.background=`${(0,l.A)(ie).setAlpha(.35).toRgbString()}`,le.borderRight=`2px solid ${ie}`):le.background=I(L,j)}return{wrapper:X,bar:le,value:re,emptyBar:he}}function I(L,N){const{field:W,value:R,orientation:G,theme:w}=L,_=T(G)?"0deg":"90deg",Q=W.min,ae=W.max;let q="",k=0,ee=(0,r.Hs)(W.color?.mode);if(ee.id===i.Y.Thresholds){const j=W.thresholds;for(let J=0;J<j.steps.length;J++){const Z=j.steps[J],te=L.theme.visualization.getColorByName(Z.color),se=j.mode===o.O.Percentage?Z.value/100:U(Z.value,Q,ae),ie=se*N,ce=Math.round(ie-(ie-k)/2),re=j.mode===o.O.Percentage?Q+(ae-Q)*se:Z.value;if(q==="")q=`linear-gradient(${_}, ${te}, ${te}`;else{if(R.numeric<re)break;k=ie,q+=` ${ce}px, ${te}`}}return q+")"}if(ee.isContinuous&&ee.getColors){const j=ee.getColors(w);for(let J=0;J<j.length;J++){const Z=j[J];if(q==="")q=`linear-gradient(${_}, ${Z} 0px`;else{const se=J/(j.length-1)*N;q+=`, ${Z} ${se}px`}}return q+")"}return R.color??i.F}function V(L){if(L.valueDisplayMode==="text")return L.theme.colors.text.primary;const{value:N}=L;return N.color?N.color:i.F}function M(L,N,W,R,G,w,_){const Q={color:N,height:`${R}px`,maxWidth:`${W}px`,display:"flex",alignItems:"center",textWrap:"nowrap",lineHeight:b};let ae=W;const q=(0,c.cN)(L);return T(G)?(Q.fontSize=_?.valueSize??(0,E.Vr)(q,ae,R,b),Q.justifyContent="center"):(Q.fontSize=_?.valueSize??(0,E.Vr)(q,ae-D*2,R,b),Q.justifyContent="flex-end",Q.paddingLeft=`${D}px`,Q.paddingRight=`${D+(w?C:0)}px`,ae-=D),Q}},98036:(ne,A,e)=>{"use strict";e.d(A,{d:()=>o,u:()=>h});var n=e(74848),a=e(22803),s=e(51898),l=e(92745),r=e(99887),c=e(63142),i=e(62905);const o=({dashboard:u})=>u.state.uid?(0,n.jsx)(f,{uid:u.state.uid}):null,h=f;function f({uid:u}){const{data:E}=(0,i.Bs)(u),v=(0,c.of)(g);return E?(0,n.jsx)(r.E,{color:"blue",text:(0,l.t)("dashboard.toolbar.new.public-dashboard","Public"),className:v.badge,"data-testid":s.Tp.pages.Dashboard.DashNav.publicDashboardTag}):null}const g=()=>({badge:(0,a.css)({color:"grey",backgroundColor:"transparent",border:"1px solid"})})},98060:(ne,A,e)=>{"use strict";e.d(A,{$b:()=>a,Bu:()=>s,XV:()=>n,x8:()=>l});const n="package",a=/^plugins.+\.css$/i,s=/^(text|application)\/(x-)?javascript(;|$)/,l=Date.now()},98127:(ne,A,e)=>{"use strict";e.d(A,{$:()=>s});var n=e(25508),a=e(52763);function s(l,r){return(0,a.d4)((0,n.Mz)(c=>c.unifiedAlerting,c=>l(c)),r)}},98215:(ne,A,e)=>{"use strict";e.r(A),e.d(A,{AbstractLabelOperator:()=>wt.D_,ActionType:()=>nn.X2,ActionVariableType:()=>nn.VR,AlertState:()=>pt.O,AnnotationChangeEvent:()=>D.We,AnnotationEventFieldSource:()=>Dt.V,AppEvents:()=>Mt.r1,AppPlugin:()=>da.hX,ArrayDataFrame:()=>h.f,ArrayVector:()=>Ft,BinaryOperationID:()=>fe.k,BusEventBase:()=>x.a,BusEventWithPayload:()=>x.x,ByNamesMatcherMode:()=>Qe.PP,CSVHeaderStyle:()=>ie.F7,CSVReader:()=>ie.i8,CircularDataFrame:()=>Vt.x,CircularVector:()=>ct.$,CoreApp:()=>da.Jk,CustomVariableSupport:()=>Rt.f5,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>U.Pm,DEFAULT_SAML_NAME:()=>Ot.En,DashboardCursorSync:()=>Zt.y,DashboardLoadedEvent:()=>D.gc,DataFrameType:()=>ut.m,DataFrameView:()=>a.R,DataHoverClearEvent:()=>D.ql,DataHoverEvent:()=>D.b_,DataLinkBuiltInVars:()=>w.c,DataLinkConfigOrigin:()=>cn.x0,DataQueryErrorType:()=>Zn.v2,DataSelectEvent:()=>D.LO,DataSourceApi:()=>Zn.mA,DataSourcePlugin:()=>Zn.tD,DataSourcePluginContextProvider:()=>xn.p,DataSourceTestFailed:()=>D.LL,DataSourceTestSucceeded:()=>D.NI,DataSourceUpdatedSuccessfully:()=>D.wE,DataSourceVariableSupport:()=>Rt.ZV,DataTopic:()=>E.QR,DataTransformerID:()=>Ve.F,DefaultTimeZone:()=>oa.lE,DocsId:()=>_.f,EventBusSrv:()=>b.o,ExploreMode:()=>Zn.ZF,FALLBACK_COLOR:()=>Yt.F,FeatureState:()=>da.Ay,FieldCache:()=>s.L,FieldColorModeId:()=>Yt.Y,FieldConfigEditorBuilder:()=>M.bk,FieldConfigOptionsRegistry:()=>P.K,FieldConfigProperty:()=>Xn.uo,FieldMatcherID:()=>Se.Ct,FieldNamePickerBaseNameMode:()=>V.X4,FieldType:()=>Ut.PU,FrameGeometrySourceMode:()=>E.aG,FrameMatcherID:()=>Se.jR,GAUGE_DEFAULT_MAXIMUM:()=>Ot.d1,GAUGE_DEFAULT_MINIMUM:()=>Ot.tw,GrafanaPlugin:()=>wn.Ud,GrafanaThemeType:()=>Nt.I,HttpRequestMethod:()=>nn.DO,ISO_8601:()=>Ze.mt,InternalTimeZones:()=>qe.g$,LanguageProvider:()=>Zn.Is,LayoutModes:()=>Pt.R,LegacyGraphHoverClearEvent:()=>Mt.Tq,LegacyGraphHoverEvent:()=>Mt.kb,LegacyMappingType:()=>k.An,LiveChannelConnectionState:()=>vn.ZF,LiveChannelEventType:()=>vn.o4,LiveChannelScope:()=>vn.qD,LiveChannelType:()=>vn.os,LoadingState:()=>L.Gu,LocalStorageValueProvider:()=>Me.b,LogLevel:()=>ya.$b,LogRowContextQueryDirection:()=>ya.ZF,LogSortOrderChangeEvent:()=>ya.Df,LogsDedupDescription:()=>ya._C,LogsDedupStrategy:()=>E.fY,LogsMetaKind:()=>ya.tG,LogsSortOrder:()=>E.uH,LogsVolumeType:()=>ya.Aj,MISSING_VALUE:()=>l.p,MappingType:()=>ba.d,MatcherID:()=>Se.cV,MutableDataFrame:()=>l.k,NodeGraphDataFrameFieldNames:()=>Ae.u,NullValueMode:()=>L.UW,NumericLogLevel:()=>ya.s5,OneClickMode:()=>cn.yd,OrgRole:()=>Bt.X,PageLayoutType:()=>Na.k,PanelEvents:()=>Mt.ee,PanelOptionsEditorBuilder:()=>M.pv,PanelPlugin:()=>rt.m,PathValidationError:()=>y.DX,PluginContext:()=>en.b,PluginContextProvider:()=>$t.a,PluginErrorCode:()=>wn.ZK,PluginExtensionExposedComponents:()=>Sn.L9,PluginExtensionPoints:()=>Sn.SM,PluginExtensionTypes:()=>Sn.u6,PluginIncludeType:()=>wn.ib,PluginLoadingStrategy:()=>wn.xf,PluginSignatureStatus:()=>wn.Ac,PluginSignatureType:()=>wn.kv,PluginState:()=>wn.pn,PluginType:()=>wn.QE,ReducerID:()=>Ye.gy,Registry:()=>Z.O,RestrictedGrafanaApisContext:()=>st.gz,RestrictedGrafanaApisContextProvider:()=>st.Bm,SetPanelAttentionEvent:()=>D.Tp,SpecialValue:()=>Oa.N,SpecialValueMatch:()=>ba.W,StandardVariableSupport:()=>Rt.J$,Store:()=>De.i,StreamingDataFrame:()=>o.k9,StreamingFrameAction:()=>o.Kh,SupplementaryQueryType:()=>ya.cF,SupportedTransformationType:()=>cn.CC,SystemDateFormatsState:()=>at.JE,TIME_FORMAT:()=>oa.G$,TIME_SERIES_METRIC_FIELD_NAME:()=>Ut.aI,TIME_SERIES_TIME_FIELD_NAME:()=>Ut.LE,TIME_SERIES_VALUE_FIELD_NAME:()=>Ut.Bc,ThemeContext:()=>We.D,ThresholdsMode:()=>En.O,TransformationApplicabilityLevels:()=>Oa.M,TransformerCategory:()=>je.m,UnaryOperationID:()=>Ce._,VAR_CALC:()=>U.k_,VAR_CELL_PREFIX:()=>U.a_,VAR_FIELD_LABELS:()=>U.nF,VAR_FIELD_NAME:()=>U.py,VAR_SERIES_NAME:()=>U.k3,ValueMatcherID:()=>Se.Js,VariableHide:()=>Qt.zL,VariableOrigin:()=>cn.$0,VariableRefresh:()=>Qt.CO,VariableSort:()=>Qt.ZG,VariableSuggestionsScope:()=>cn.uP,VariableSupportBase:()=>Rt.xi,VariableSupportType:()=>Rt.Qz,VisualizationSuggestionScore:()=>Ln.nQ,VisualizationSuggestionsBuilder:()=>Ln.v2,VisualizationSuggestionsListAppender:()=>Ln.NV,VizOrientation:()=>Ln.wV,addDurationToDate:()=>mt.Ri,addRow:()=>i.uY,alignTimeRangeCompareData:()=>i.Vh,amendTable:()=>n.c,anySeriesWithTimeField:()=>i.tP,anyToNumber:()=>ae.t,applyFieldOverrides:()=>O.we,applyNullInsertThreshold:()=>ve.M,applyRawFieldOverrides:()=>O.K3,arrayToDataFrame:()=>h.I,arrayUtils:()=>Xe,availableIconsIndex:()=>Jn.az,binaryOperators:()=>fe.b,booleanOverrideProcessor:()=>V.FM,booleanValueFormatter:()=>Fe.Qc,buildHistogram:()=>Je.p3,cacheFieldDisplayNames:()=>B.Fm,classicColors:()=>X.t,closestIdx:()=>o.Ls,colorManipulator:()=>Oe.MV,compareArrayValues:()=>g.J3,compareDataFrameStructures:()=>g.bW,containsSearchFilter:()=>ee.E,contentTypeOptions:()=>nn.Ur,convertOldAngularValueMappings:()=>k.bh,createDataFrame:()=>r.EI,createDimension:()=>c.r4,createFieldConfigRegistry:()=>Gt.O,createTheme:()=>Ee.a,dataFrameFromJSON:()=>f.or,dataFrameToJSON:()=>f.Nw,dataLinksOverrideProcessor:()=>V.Ch,dateMath:()=>Be,dateTime:()=>Ze.KQ,dateTimeAsMoment:()=>Ze.AN,dateTimeForTimeZone:()=>Ze.oZ,dateTimeFormat:()=>ht.LE,dateTimeFormatISO:()=>ht.M7,dateTimeFormatTimeAgo:()=>ht.fq,dateTimeFormatWithAbbrevation:()=>ht._Q,dateTimeParse:()=>Et.b,decodeFieldValueEntities:()=>f.t,decodeFieldValueEnums:()=>f.EL,defaultActionConfig:()=>nn.mx,defaultCalcs:()=>Ye.C6,deprecationWarning:()=>se.l,displayNameOverrideProcessor:()=>V.AM,doStandardCalcs:()=>Ye.H3,durationToMilliseconds:()=>mt.WT,ensureTimeField:()=>de.ks,escapeRegex:()=>v.$f,escapeStringForRegex:()=>v.jD,eventFactory:()=>d.R,fieldColorModeRegistry:()=>C.uf,fieldMatchers:()=>Ke.sJ,fieldReducers:()=>Ye.AS,filterFieldConfigOverrides:()=>Kt.aW,findCommonLabels:()=>ce.yO,findHighlightChunksInText:()=>p.Oq,findMatchesInText:()=>p.bs,findUniqueLabels:()=>ce.s6,fixCellTemplateExpressions:()=>U.Zo,formatLabels:()=>ce.h6,formattedValueToString:()=>Fe.cN,frameMatchers:()=>Ke.RE,fuzzySearch:()=>$e.X,getActiveThreshold:()=>T.yQ,getAllValuesFromDimension:()=>c.Km,getBuiltInThemes:()=>Pe.k,getColorByStringHash:()=>C.O7,getColumnFromDimension:()=>c.P4,getColumnsFromDimension:()=>c.g6,getDataFrameRow:()=>r.Yn,getDataSourceRef:()=>te.p$,getDataSourceUID:()=>te.Iz,getDefaultRelativeTimeRange:()=>oa.Cn,getDefaultTimeRange:()=>oa.E2,getDimensionByName:()=>c.xB,getDisplayProcessor:()=>F.J,getDisplayValueAlignmentFactors:()=>U.XS,getFieldColorMode:()=>C.Hs,getFieldColorModeForField:()=>C.Qi,getFieldConfigWithMinMax:()=>K.xg,getFieldDataContextClone:()=>O.vd,getFieldDisplayName:()=>B.Ct,getFieldDisplayValues:()=>U.PI,getFieldDisplayValuesProxy:()=>S.F,getFieldMatcher:()=>Ke.NS,getFieldSeriesColor:()=>C.lz,getFieldTypeFromValue:()=>r.oE,getFlotPairs:()=>N,getFlotPairsConstant:()=>W,getFrameDisplayName:()=>B.Ri,getFrameMatchers:()=>Ke.Dq,getHistogramFields:()=>Je.ix,getLinksSupplier:()=>O._M,getLocale:()=>Ze.JK,getLocaleData:()=>Ze.XN,getMinMaxAndDelta:()=>K.AP,getNextRefId:()=>u.M,getPanelOptionsWithDefaults:()=>Kt.F,getProcessedDataFrames:()=>r.Bt,getRawDisplayProcessor:()=>F.H,getRowUniqueId:()=>i.t9,getScaleCalculator:()=>K.jc,getSearchFilterScopedVar:()=>ee.c,getSeriesTimeStep:()=>le,getThemeById:()=>Pe.g,getTimeField:()=>r.KR,getTimeZone:()=>Ge.O,getTimeZoneGroups:()=>qe.U3,getTimeZoneInfo:()=>qe.QZ,getTimeZones:()=>qe.P3,getUniqueFieldName:()=>B.fk,getValueFormat:()=>Fe.j_,getValueFormats:()=>Fe.Ke,getValueFormatterIndex:()=>Fe.uH,getValueFromDimension:()=>c.WK,getValueMatcher:()=>Ke.kK,getWeekdayIndex:()=>Ze.xQ,getWeekdayIndexByEnglishName:()=>Ze.pp,getZone:()=>qe.HD,guessDecimals:()=>re.E,guessFieldTypeForField:()=>r.dF,guessFieldTypeFromNameAndValue:()=>r.by,guessFieldTypeFromValue:()=>r.HW,guessFieldTypes:()=>r.XQ,hasLinks:()=>U.eG,hasLogsContextSupport:()=>ya.Ol,hasLogsContextUiSupport:()=>ya.wj,hasMsResolution:()=>he,hasQueryExportSupport:()=>wt.Ee,hasQueryImportSupport:()=>wt.FL,hasQueryModificationSupport:()=>ya._0,hasSupplementaryQuerySupport:()=>ya.Nc,hasTimeField:()=>i.S1,hasToggleableQueryFiltersSupport:()=>ya.FP,histogramBucketSizes:()=>Je.rW,histogramFieldInfo:()=>Je.Rt,histogramFieldsToFrame:()=>Je.cg,histogramFrameBucketMaxFieldName:()=>Je.dA,histogramFrameBucketMinFieldName:()=>Je.d$,histogramTransformer:()=>Je.OA,httpMethodOptions:()=>nn.ki,identityOverrideProcessor:()=>V.hS,incrRound:()=>Je.ZU,incrRoundDn:()=>Je.rs,incrRoundUp:()=>Je.Uh,intervalToAbbreviatedDurationString:()=>mt.dU,isBooleanUnit:()=>Fe.j9,isCustomFieldProp:()=>Kt.TQ,isDataFrame:()=>r.ci,isDataFrameWithValue:()=>r.LI,isDataSourcePluginContext:()=>_n.S,isDataSourceRef:()=>te.fN,isDateTime:()=>Ze.Ar,isDateTimeInput:()=>Ze.u8,isEmptyObject:()=>ue.R,isEqualityOrMultiOperator:()=>mn.RU,isHistogramFrameBucketMaxFieldName:()=>Je.H1,isHistogramFrameBucketMinFieldName:()=>Je.NX,isIconName:()=>Jn.n6,isLikelyAscendingVector:()=>He.g2,isLiveChannelJoinEvent:()=>vn.Cz,isLiveChannelLeaveEvent:()=>vn.jQ,isLiveChannelMessageEvent:()=>vn.Z7,isLiveChannelStatusEvent:()=>vn.ew,isObject:()=>L.Gv,isReducerID:()=>Ye.Em,isStandardFieldProp:()=>Kt.nx,isSystemOverride:()=>Xn.Ow,isSystemOverrideWithRef:()=>Xn.ZW,isTableData:()=>r.pH,isTimeSeriesField:()=>i.hF,isTimeSeriesFrame:()=>i.aH,isTimeSeriesFrames:()=>i.jq,isTruthy:()=>L.zz,isUnsignedPluginSignature:()=>kn.x,isValidDate:()=>mt.vd,isValidDuration:()=>mt.di,isValidGoDuration:()=>mt.pp,isValidGrafanaDuration:()=>mt.V3,isValidLiveChannelAddress:()=>vn.aj,joinHistograms:()=>Je.EO,localTimeFormat:()=>at.Od,locale:()=>Fe.Hg,locationUtil:()=>R.I,makeClassES5Compatible:()=>Q.Y,makeTimeRange:()=>oa.HW,mapInternalLinkToExplore:()=>w.u,matchAllLabels:()=>ce._p,matchPluginId:()=>J._,monacoLanguageRegistry:()=>xe.l,nullToValue:()=>me.C,numberOverrideProcessor:()=>V.m0,objRemoveUndefined:()=>ue.w,onUpdateDatasourceJsonDataOption:()=>te.PG,onUpdateDatasourceJsonDataOptionChecked:()=>te.EX,onUpdateDatasourceJsonDataOptionSelect:()=>te.BD,onUpdateDatasourceOption:()=>te.zX,onUpdateDatasourceResetOption:()=>te.yV,onUpdateDatasourceSecureJsonDataOption:()=>te.mn,onUpdateDatasourceSecureJsonDataOptionSelect:()=>te.wY,outerJoinDataFrames:()=>He.Fd,parseDuration:()=>mt.E9,parseFlags:()=>p.bQ,parseLabels:()=>ce.Xy,parseLiveChannelAddress:()=>vn.DG,patchArrayVectorProrotypeMethods:()=>Pa.V,preProcessPanelData:()=>r.N$,preferredVisualizationTypes:()=>L.Nx,rangeUtil:()=>Le,readCSV:()=>ie.Jh,reduceField:()=>Ye.Nw,renderLegendFormat:()=>j.j,renderMarkdown:()=>m.G,renderTextPanelMarkdown:()=>m.P,restoreCustomOverrideRules:()=>Kt.H9,reverseDataFrame:()=>r.q7,reverseParseDuration:()=>mt.Q7,reverseScopeFilterOperatorMap:()=>mn.Dv,roundDecimals:()=>re.h,scaledUnits:()=>Fe.yP,scopeFilterOperatorMap:()=>mn.n9,selectOverrideProcessor:()=>V.hL,serializeStateToUrlParam:()=>G.Pp,setLocale:()=>Ze.xS,setTimeZoneResolver:()=>Ge.G,setWeekStart:()=>Ze.$D,shallowCompare:()=>g.ab,shouldAlignTimeCompare:()=>i.dK,simpleCountUnit:()=>Fe.UR,sortDataFrame:()=>r.ES,sortThresholds:()=>T.RU,standardEditorsRegistry:()=>I.D,standardFieldConfigEditorRegistry:()=>I.G,standardTransformers:()=>Re.c,standardTransformersRegistry:()=>je.h,store:()=>De.M,stringFormater:()=>Fe.cH,stringOverrideProcessor:()=>V.OU,stringStartsAsRegEx:()=>v.AP,stringToJsRegex:()=>v.dO,stringToMs:()=>v.dc,systemDateFormats:()=>at.WC,textUtil:()=>y.sQ,thresholdsOverrideProcessor:()=>V.N7,throwIfAngular:()=>Te.M,timeZoneAbbrevation:()=>ht.jw,timeZoneFormatUserFriendly:()=>qe.le,toCSV:()=>ie._O,toDataFrame:()=>r.Vc,toDataFrameDTO:()=>r.Kl,toDuration:()=>Ze.Ah,toFilteredDataFrameDTO:()=>r.By,toFixed:()=>Fe.Mg,toFixedScaled:()=>Fe.gZ,toFixedUnit:()=>Fe.G8,toFloatOrUndefined:()=>v.$D,toIconName:()=>Jn.Uo,toIntegerOrUndefined:()=>v.vb,toLegacyResponseData:()=>r.w3,toLiveChannelId:()=>vn.Qp,toNumberString:()=>v.kT,toOption:()=>_e.z,toPascalCase:()=>v.MX,toURLRange:()=>G.sQ,toUtc:()=>Ze.yT,transformDataFrame:()=>Ue.m,trimTable:()=>n.F,unEscapeStringFromRegex:()=>v.xb,unaryOperators:()=>Ce.j,unitOverrideProcessor:()=>V.lG,updateDatasourcePluginJsonDataOption:()=>te.lO,updateDatasourcePluginOption:()=>te.pN,updateDatasourcePluginResetOption:()=>te.QP,updateDatasourcePluginSecureJsonDataOption:()=>te.wp,urlUtil:()=>G.kM,useFieldOverrides:()=>O.rJ,usePluginContext:()=>pn.Q,useRestrictedGrafanaApis:()=>st.Iu,userHasAllPermissions:()=>Ht.Fj,userHasAnyPermission:()=>Ht.jW,userHasPermission:()=>Ht.ZU,userHasPermissionInMetadata:()=>Ht.T6,validateFieldConfig:()=>O.BF,validatePath:()=>y.iQ,valueMappingsOverrideProcessor:()=>V.xT,valueMatchers:()=>Ke.hI,vectorator:()=>gt.E,withLoadingIndicator:()=>q.k});var n=e(15083),a=e(88673),s=e(10279),l=e(18700),r=e(41119),c=e(26332),i=e(17503),o=e(51388),h=e(27359),f=e(77154),g=e(76732),u=e(39796),E=e(739),v=e(8934),p=e(38388),m=e(67458),y=e(63704),d=e(36819),x=e(68388),b=e(19379),D=e(57852),C=e(76637),P=e(76803),T=e(36394),O=e(60519),S=e(7102),B=e(16515),K=e(79118),U=e(44232),F=e(11576),I=e(53543),V=e(38809),M=e(52205),L=e(28105);function N({xField:dn,yField:sn,nullValueMode:Rn}){const rn=dn.values,Yn=sn.values,ea=rn.length;if(Yn.length!==ea)throw new Error("Unexpected field length");const An=Rn===L.UW.Ignore,Fa=Rn===L.UW.AsZero,jt=[];for(let tn=0;tn<ea;tn++){const an=rn[tn];let Pn=Yn[tn];if(Pn===null){if(An)continue;Fa&&(Pn=0)}an!==null&&jt.push([an,Pn])}return jt}function W(dn,sn){if(!sn.from||!sn.to||!dn||dn.length===0)return[];const Rn=sn.from.valueOf(),rn=sn.to.valueOf(),Yn=dn[0][1];return[[Rn,Yn],[rn,Yn]]}var R=e(92138),G=e(5556),w=e(38036),_=e(28882),Q=e(35814),ae=e(13227),q=e(47520),k=e(35987),ee=e(94452),j=e(428),J=e(8134),Z=e(42954),te=e(48480),se=e(37615),ie=e(68125),ce=e(71642),re=e(79243),ue=e(3594),X=e(33985);const le=dn=>{let sn,Rn,rn=Number.MAX_VALUE;for(let Yn=0;Yn<dn.values.length;Yn++){const ea=dn.values[Yn];if(sn!==void 0){const An=ea-sn;Rn===void 0&&(rn=An),An<rn&&(rn=An)}sn=ea}return rn},he=dn=>{for(let sn=0;sn<dn.values.length;sn++){const Rn=dn.values[sn];if(Rn!=null){const rn=Rn.toString();if(rn.length===13&&rn%1e3!==0)return!0}}return!1};var fe=e(12823),Ce=e(48233),Ae=e(14613),_e=e(47184),Xe=e(46635),De=e(78012),Me=e(66615),Te=e(78830),$e=e(99885),Re=e(52645),Ke=e(36638),Ve=e(64761),Se=e(57866),Ye=e(46644),Ue=e(2197),je=e(8642),Qe=e(4575),He=e(8721),Je=e(74261),de=e(406),ve=e(63409),me=e(34455),xe=e(54734),Ee=e(69884),Pe=e(47070),Oe=e(6773),We=e(35555),Fe=e(55386),Be=e(33239),Le=e(17548),Ge=e(60188),Ze=e(25229),qe=e(62717),at=e(5421),ht=e(80011),Et=e(44922),mt=e(74529),Pt=e(78479),rt=e(16207),Kt=e(69168),Gt=e(37297),en=e(79450),st=e(15874),$t=e(20877),xn=e(62392),pn=e(31595),_n=e(17564),kn=e(29246),Jn=e(30360),pt=e(76190),Rt=e(48592),Mt=e(32899),Bt=e(90382),Nt=e(68492),Yt=e(64394),Qt=e(7389),En=e(33553),vn=e(38619),Sn=e(54092),mn=e(27164),wn=e(11594),Ln=e(38919),Zn=e(94644),da=e(1906),Pa=e(44326),Xn=e(83340),Oa=e(79319),ba=e(18600),oa=e(22592),Na=e(75683),ya=e(67770),Dt=e(88907),wt=e(46933),Zt=e(84229),cn=e(79609),nn=e(85891),ut=e(39443),Ut=e(95004),Ot=e(48588),ct=e(94777),gt=e(96453);const Ct="ArrayVector is deprecated and will be removed in Grafana 11. Please use plain arrays for field.values.";let Wt=!1;class Ft extends Array{get buffer(){return this}set buffer(sn){this.length=0;const Rn=sn?.length;if(Rn){let rn=65e3,Yn=Math.ceil(Rn/rn);for(let ea=0;ea<Yn;ea++)this.push.apply(this,sn.slice(ea*rn,(ea+1)*rn))}}constructor(sn){super(),this.buffer=sn??[],Wt||(console.warn(Ct),Wt=!0)}toJSON(){return[...this]}}var Vt=e(35479),Ht=e(7918)},98279:(ne,A,e)=>{"use strict";e.d(A,{K:()=>N});var n=e(92745),a=e(45863),s=e(33143),l=e(6461),r=e(8285),c=e(97335),i=e(97883),o=e(48492),h=e(20246),f=e(30643),g=e(74848),u=e(22803),E=e(21835),v=e(96540),p=e(51898),m=e(63142),y=e(54314),d=e(45861),x=e(3371),b=e(96691),D=e(1837),C=e(61659),P=e(83058),T=e(2543),O=e(45967),S=e(68079);function B({tab:W,variable:R}){const{repeatedTabs:G}=W.useState(),w=(0,m.of)(I);return(0,v.useEffect)(()=>{K(R,W,!1);const _=R.subscribeToState(ae=>K(R,W,!1)),Q=W.subscribeToEvent(s.WG,ae=>K(R,W,!0));return()=>{Q.unsubscribe(),_.unsubscribe()}},[R,W]),G===void 0||a.jh.hasVariableDependencyInLoadingState(R)||R.state.loading?(r.xp.logger("TabItemRepeater",!1,"Variable is loading, showing spinner"),(0,g.jsx)(O.m,{content:(0,n.t)("dashboard.tabs-layout.tab.repeat.loading","Loading tab repeats"),children:(0,g.jsx)("div",{className:w.spinnerWrapper,children:(0,g.jsx)(S.y,{})})})):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(W.Component,{model:W},W.state.key),G?.map(_=>(0,g.jsx)(_.Component,{model:_},_.state.key))]})}function K(W,R,G){if(a.jh.hasVariableDependencyInLoadingState(W)){r.xp.logger("TabItemRepeater",!1,"Skipped dependency in loading state");return}if(W.state.loading){r.xp.logger("TabItemRepeater",!1,"Skipped, variable is loading");return}const{values:w,texts:_}=(0,r.a7)(W),Q=U(R,W.state.name);if(!G&&(0,T.isEqual)(Q,w)){r.xp.logger("TabItemRepeater",!1,"Skipped, values the same");return}G?r.xp.logger("TabItemRepeater",!1,"Performing repeats, contentChanged"):r.xp.logger("TabItemRepeater",!1,"Performing repeats, variable values changed",w);const ae=F({values:w,texts:_,variable:W,tab:R});R.setState({repeatedTabs:ae}),R.parent?.forceRender()}function U(W,R){const G=[];if(!W.state.repeatedTabs)return[];function w(_){const Q=a.jh.lookupVariable(R,_);if(Q){const ae=Q.getValue();ae!=null&&!Array.isArray(ae)&&G.push(ae)}}w(W);for(const _ of W.state.repeatedTabs)w(_);return G}function F({values:W,texts:R,variable:G,tab:w}){const _=W.length?W:[""],Q=R.length?R:G.hasAllValue()?["All"]:["None"],ae=[];for(let q=0;q<_.length;q++){const k=q===0,ee=(0,x.lv)(w.state.key,q),j=k?w:w.clone({key:ee,repeatSourceKey:w.state.key,repeatByVariable:void 0,repeatedTabs:void 0,layout:void 0}),J=k?w.getLayout():w.getLayout().cloneLayout(ee,!1);j.setState({$variables:(0,x.D1)(G,_[q],Q[q]),layout:J}),k||ae.push(j)}return ae}const I=()=>({spinnerWrapper:(0,u.css)({alignSelf:"center"})});function V({model:W}){const R=(0,m.of)(L),{tabs:G,key:w}=W.useState(),_=W.getCurrentTab(),Q=(0,r.YQ)(W),{isEditing:ae}=Q.useState(),{hasCopiedTab:q}=(0,C.x)(),k=(0,v.useMemo)(()=>W.parent instanceof f.V,[W.parent]),ee=(0,b.MK)();if((0,v.useEffect)(()=>{_&&_.getSlug()!==W.state.currentTabSlug&&W.setState({currentTabSlug:_.getSlug()})},[_,W]),ee)return G.map(J=>(0,g.jsx)(M,{tab:J,manager:W},J.state.key));const j=(0,x.bn)(W);return(0,g.jsxs)("div",{className:(0,u.cx)(R.tabLayoutContainer,{[R.nestedTabsMargin]:k}),children:[(0,g.jsx)(y.U,{className:R.tabsBar,children:(0,g.jsx)(E.JY,{onBeforeDragStart:J=>W.forceSelectTab(J.draggableId),onDragEnd:J=>{J.destination&&J.destination.index!==J.source.index&&W.moveTab(J.source.index,J.destination.index)},children:(0,g.jsxs)("div",{className:R.tabsRow,children:[(0,g.jsx)(E.gL,{droppableId:w,direction:"horizontal",children:J=>(0,g.jsxs)("div",{className:R.tabsContainer,ref:J.innerRef,...J.droppableProps,children:[G.map(Z=>(0,g.jsx)(M,{tab:Z,manager:W},Z.state.key)),J.placeholder]})}),ae&&!j&&(0,g.jsxs)("div",{className:"dashboard-canvas-add-button",children:[(0,g.jsx)(d.$n,{icon:"plus",variant:"primary",fill:"text",onClick:()=>W.addNewTab(),"data-testid":p.Tp.components.CanvasGridAddActions.addTab,children:(0,g.jsx)(n.x6,{i18nKey:"dashboard.canvas-actions.new-tab",children:"New tab"})}),q&&(0,g.jsx)(d.$n,{icon:"clipboard-alt",variant:"primary",fill:"text",onClick:()=>W.pasteTab(),"data-testid":p.Tp.components.CanvasGridAddActions.pasteTab,children:(0,g.jsx)(n.x6,{i18nKey:"dashboard.canvas-actions.paste-tab",children:"Paste tab"})})]})]})})}),_&&(0,g.jsx)(P.Y,{tab:_,isEditing:ae})]})}function M({tab:W,manager:R}){const{repeatByVariable:G}=(0,a.gn)(W,{shouldActivateOrKeepAlive:!0});if(G){const w=a.jh.lookupVariable(G,R);if(w instanceof a.n8)return(0,g.jsx)(B,{tab:W,manager:R,variable:w},W.state.key)}return(0,g.jsx)(W.Component,{model:W},W.state.key)}const L=W=>({tabLayoutContainer:(0,u.css)({display:"flex",flexDirection:"column",flex:"1 1 auto"}),tabsBar:(0,u.css)(D.u),tabsRow:(0,u.css)({display:"flex",width:"100%",alignItems:"center"}),tabsContainer:(0,u.css)({display:"flex",justifyContent:"flex-start",alignItems:"flex-end",overflowX:"auto",overflowY:"hidden",paddingInline:W.spacing(.125),paddingTop:"1px"}),nestedTabsMargin:(0,u.css)({marginLeft:W.spacing(2)})});class N extends a.Bs{constructor(R){super({...R,tabs:R.tabs??[new f.V]}),this.isDashboardLayoutManager=!0,this.descriptor=N.descriptor,this._urlSync=new a.So(this,{keys:()=>[this.getUrlKey()]})}static{this.Component=V}static{this.descriptor={get name(){return(0,n.t)("dashboard.tabs-layout.name","Tabs")},get description(){return(0,n.t)("dashboard.tabs-layout.description","Organize panels into horizontal tabs")},id:"TabsLayout",createFromLayout:N.createFromLayout,isGridLayout:!1,icon:"window"}}serialize(){return(0,l.lX)(this)}duplicate(){throw new Error("Method not implemented.")}duplicateTab(R){const G=R.duplicate();this.addNewTab(G)}getUrlState(){return{[this.getUrlKey()]:this.state.currentTabSlug}}updateFromUrl(R){const G=this.getUrlKey();R[G]&&typeof R[G]=="string"&&this.setState({currentTabSlug:R[G]})}switchToTab(R){this.setState({currentTabSlug:R.getSlug()})}getCurrentTab(){const R=this.getTabsIncludingRepeats(),G=R.find(w=>w.getSlug()===this.state.currentTabSlug);if(G)return G;for(const w of R)if(w.state.repeatByVariable){const _=a.jh.lookupVariable(w.state.repeatByVariable,this);if(_&&_.state.loading||!w.state.repeatedTabs)return}return R[0]}getTabsIncludingRepeats(){return this.state.tabs.reduce((R,G)=>(R.push(G,...G.state.repeatedTabs??[]),R),[])}addPanel(R){const G=this.getCurrentTab();G&&G.getLayout().addPanel(R)}getVizPanels(){const R=[];for(const G of this.state.tabs){const w=G.getLayout().getVizPanels();R.push(...w)}return R}cloneLayout(R,G){return this.clone()}getOutlineChildren(){const R=[];for(const G of this.state.tabs)if(R.push(G),G.state.repeatedTabs)for(const w of G.state.repeatedTabs)R.push(w);return R}addNewTab(R){const G=R??new f.V({}),w=new Set(this.getTabsIncludingRepeats().map(Q=>Q.state.title).filter(Q=>Q!==void 0)),_=(0,h.BK)(G.state.title,w);return _!==G.state.title&&G.setState({title:_}),s.cc.addElement({addedObject:G,source:this,perform:()=>this.setState({tabs:[...this.state.tabs,G],currentTabSlug:G.getSlug()}),undo:()=>{this.setState({tabs:this.state.tabs.filter(Q=>Q!==G),currentTabSlug:this.state.currentTabSlug===G.getSlug()?void 0:this.state.currentTabSlug})}}),G}editModeChanged(R){this.state.tabs.forEach(G=>G.getLayout().editModeChanged?.(R))}pasteTab(){const R=(0,r.YQ)(this),G=(0,o.sN)(R);this.addNewTab(G)}shouldUngroup(){return this.state.tabs.length===1}removeTab(R){if(this.shouldUngroup()){(0,h.f)(this,R.state.layout);return}const G=this.state.tabs.findIndex(w=>w===R);s.cc.removeElement({removedObject:R,source:this,perform:()=>{const w=this.state.tabs,_=w.findIndex(q=>q===R),Q=_>0?_-1:0,ae=w.filter(q=>q!==R);this.setState({tabs:ae,currentTabSlug:ae[Q]?.getSlug()})},undo:()=>{const w=[...this.state.tabs];w.splice(G,0,R),this.setState({tabs:w,currentTabSlug:R.getSlug()})}})}moveTab(R,G){const w=this.getTabsIncludingRepeats(),_=w[R];let Q=w[G],ae=G;if(Q.state.repeatSourceKey){if(Q.state.repeatSourceKey===_.state.repeatSourceKey)return;const ee=w.findIndex(j=>j.state.key===Q.state.repeatSourceKey);if(ee!==-1){Q=w[ee];const j=G<R;ae=ee+(j?0:Q.state.repeatedTabs?.length||0)}}const q=this.state.tabs.findIndex(ee=>ee===_),k=this.state.tabs.findIndex(ee=>ee===Q);s.cc.moveElement({source:this,movedObject:_,perform:()=>{this.rearrangeTabs(q,k,ae)},undo:()=>{this.rearrangeTabs(k,q,R)}})}rearrangeTabs(R,G,w){const _=[...this.state.tabs],[Q]=_.splice(R,1);_.splice(G,0,Q),this.setState({tabs:_}),this.publishEvent(new s.su(this),!0)}forceSelectTab(R){const G=this.getTabsIncludingRepeats().findIndex(Q=>Q.state.key===R),w=this.getTabsIncludingRepeats()[G];if(!w)return;(0,r.YQ)(this).state.editPane.selectObject(w,R,{force:!0,multi:!1}),this.setState({currentTabSlug:w.getSlug()})}static createEmpty(){const R=new f.V;return new N({tabs:[R]})}static createFromLayout(R){let G=[];if(R instanceof i.V)for(const w of R.state.rows){if(w.state.repeatSourceKey)continue;const _=w.state.conditionalRendering;_?.clearParent(),G.push(new f.V({layout:w.state.layout.clone(),title:w.state.title,conditionalRendering:_,repeatByVariable:w.state.repeatByVariable}))}else R.clearParent(),G.push(new f.V({layout:R}));return new N({tabs:G})}getUrlKey(){let R=this.parent,G="dtab";for(;R;)R instanceof f.V&&(G=`${R.getSlug()}-${G}`),R instanceof c.o&&(G=`${R.getSlug()}-${G}`),R=R.parent;return G}duplicateTitles(){const R=new Map,G=new Set;return this.getTabsIncludingRepeats().forEach(w=>{const _=a.jh.interpolate(w,w.state.title),Q=(R.get(_)??0)+1;R.set(_,Q),Q>1&&G.add(_)}),G}}},98314:(ne,A,e)=>{"use strict";e.d(A,{B6:()=>u,E_:()=>v,jD:()=>E});var n=e(2543),a=e.n(n),s=e(72985),l=e(739),r=e(77154),c=e(80011),i=e(28105),o=e(92745),h=e(43173),f=e(34273),g=e(8095);function u(x){const b=[];if(x?.series)for(const D of x.series)b.push((0,r.Nw)(D));if(x?.annotations)for(const D of x.annotations){const C=(0,r.Nw)(D);C.schema?.meta||(C.schema.meta={}),C.schema.meta.dataTopic=l.QR.Annotations,b.push(C)}return b}function E(x,b){const D=x.getSaveModel(),C={panelType:D.type,datasource:"??"},P=h.$.buildInfo.versionString;let T=`| Key | Value |
|--|--|
| Panel | ${C.panelType} @ ${D.pluginVersion??P} |
| Grafana | ${P} // ${h.$.buildInfo.edition} |
`;return b&&(T+="<details><summary>Panel debug snapshot dashboard</summary>\n\n```json\n"+b+"\n```\n</details>"),T}async function v(x,b,D){const C=x.getSaveModel(),P=(0,n.cloneDeep)(d),T={panelType:C.type,datasource:"??"},O=await(0,s._)(x.getQueryRunner().getData({withFieldConfig:!1,withTransforms:!1})),S=x.datasource,B=(0,f.W)(u(O),b),K=h.$.buildInfo.versionString,U=C?.targets??[],F=`<table width="100%">
    <tr>
      <th width="2%">Panel</th>
      <td >${T.panelType} @ ${C.pluginVersion??K}</td>
    </tr>
    <tr>
      <th>Queries</th>
      <td>${U.map(I=>{const V=I.datasource??S;return`${I.refId}[${V?.type}]`}).join(", ")}</td>
    </tr>
    ${p(C)}
    ${m(O,B)}
    ${y(O)}
    <tr>
      <th>Grafana</th>
      <td>${K} // ${h.$.buildInfo.edition}</td>
    </tr>
  </table>`.trim();if(P.panels[0]={...C,...P.panels[0],targets:[{refId:"A",datasource:{type:"grafana",uid:"grafana"},queryType:g.nj.Snapshot,snapshot:B}]},C.transformations?.length){const I=P.panels[P.panels.length-1];I.title=I.title+" (after transformations)";const V=(0,n.cloneDeep)(I);V.id=100,V.title="Data (before transformations)",V.gridPos.w=24,V.targets[0].withTransforms=!1,P.panels.push(V)}return O.annotations?.length&&P.panels.push({id:7,gridPos:{h:6,w:24,x:0,y:20},type:"table",title:(0,o.t)("dashboard.get-debug-dashboard.title.annotations","Annotations"),datasource:{type:"datasource",uid:"-- Dashboard --"},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,topic:l.QR.Annotations,refId:"A"}]}),P.panels[1].options.content=F,P.panels[2].options.content=JSON.stringify(C,null,2),P.title=`Debug: ${C.title} // ${(0,c.LE)(new Date)}`,P.tags=["debug",`debug-${T.panelType}`],P.time={from:D.from.toISOString(),to:D.to.toISOString()},P}function p(x){return x.transformations?`<tr>
      <th>Transform</th>
      <td>${x.transformations.map(b=>b.id).join(", ")}</td>
  </tr>`:""}function m(x,b){let D=x.series.length??0,C=0,P=0;for(const T of x.series)C+=T.fields.length,P+=T.length;return`<tr><th>Data</th><td>${x.state!==i.Gu.Done?x.state:""} ${D} frames, ${C} fields, ${P} rows </td></tr>`}function y(x){return x.annotations?.length?`<tr>
  <th>Annotations</th>
  <td>${x.annotations.map((b,D)=>`<span>${b.length}</span>`)}</td>
</tr>`:""}const d={panels:[{id:2,title:"Reproduced with embedded data",datasource:{type:"grafana",uid:"grafana"},gridPos:{h:13,w:15,x:0,y:0}},{gridPos:{h:7,w:9,x:15,y:0},id:5,options:{content:"...",mode:"html"},title:"Debug info",type:"text"},{id:6,title:"Original Panel JSON",type:"text",gridPos:{h:13,w:9,x:15,y:7},options:{content:"...",mode:"code",code:{language:"json",showLineNumbers:!0,showMiniMap:!0}}},{id:3,title:"Data from panel above",type:"table",datasource:{type:"datasource",uid:"-- Dashboard --"},gridPos:{h:7,w:15,x:0,y:13},options:{showTypeIcons:!0},targets:[{datasource:{type:"datasource",uid:"-- Dashboard --"},panelId:2,withTransforms:!0,refId:"A"}]}],schemaVersion:37}},98643:(ne,A,e)=>{"use strict";e.d(A,{RA:()=>u,XR:()=>E,Dc:()=>g,qy:()=>h,Pz:()=>f});var n=e(44294),a=e(34338),s=e(11217),l=e(43067),r=e(95004),c=e(78089);function i(p){if(!p?.length)return;const m=[16,8,4,2,1],y="0123456789bcdefghjkmnpqrstuvwxyz";let d=!0;const x=[],b=[];x[0]=-90,x[1]=90,b[0]=-180,b[1]=180;let D;p.split("").forEach(T=>{D=y.indexOf(T),m.forEach(O=>{o(d?b:x,D,O),d=!d})});const C=(x[0]+x[1])/2;return[(b[0]+b[1])/2,C]}function o(p,m,y){m&y?p[0]=(p[0]+p[1])/2:p[1]=(p[0]+p[1])/2}function h(p){return{name:p.name??"Point",type:r.PU.geo,values:p.values.map(m=>{const y=i(m);if(y)return new n.A((0,l.Rb)(y))}),config:v}}function f(p,m){const y=new Array(p.values.length);for(let d=0;d<p.values.length;d++){const x=p.values[d],b=m.values[d];x===null||b===null||(y[d]=new n.A((0,l.Rb)([x,b])))}return{name:"Point",type:r.PU.geo,values:y,config:v}}function g(p,m){const y=m.values.length,d=new Array(y);for(let x=0;x<y;x++)d[x]=p.find(m.values[x])?.geometry();return{name:"Geometry",type:r.PU.geo,values:d,config:v}}function u(p,m){const y=p.values,d=m.values;if(!y||!d)throw"missing src/dest";if(y.length!==d.length)throw"Source and destination field lengths do not match";const x=p.values.length,b=new Array(x);for(let D=0;D<x;D++){const C=y[D],P=d[D];C&&P?b[D]=new a.A([C,P]):C?b[D]=C:P&&(b[D]=P)}return{name:"Geometry",type:r.PU.geo,values:b,config:v}}function E(p,m){const y=p.values,d=m.values;if(!y||!d)throw"missing src/dest";if(y.length!==d.length)throw"Source and destination field lengths do not match";const x=p.values.length,b=new Array(x);for(let D=0;D<x;D++){const C=y[D],P=d[D];C&&P&&(b[D]=new s.A([(0,c.EX)(C),(0,c.EX)(P)]))}return{name:"Geometry",type:r.PU.geo,values:b,config:v}}const v=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},98732:(ne,A,e)=>{"use strict";e.d(A,{E5:()=>f,Ez:()=>o,mn:()=>g});var n=e(65307),a=e(2543),s=e.n(a),l=e(7389),r=e(93612),c=e(96120),i=e(88813);const o={...i.Vg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:l.CO.onTimeRangeChanged,current:{}},h=(0,n.Z0)({name:"templating/interval",initialState:c.j,reducers:{createIntervalOptions:(u,E)=>{const v=(0,r.Fs)(u,E.payload.id);if(v.type!=="interval")return;const p=(0,a.map)(v.query.match(/(["'])(.*?)\1|\w+/g),m=>(m=m.replace(/["']+/g,""),{text:m.trim(),value:m.trim(),selected:!1}));v.auto&&p.length&&p[0].text!=="auto"&&p.unshift({text:"auto",value:"$__auto_interval_"+v.name,selected:!1}),v.options=p}}}),f=h.reducer,{createIntervalOptions:g}=h.actions},98838:(ne,A,e)=>{"use strict";e.d(A,{Y:()=>s});var n=e(96540);const a=(0,n.createContext)({openDrawer:()=>{},closeDrawer:()=>{},isDrawerOpen:!1,setNewQuery:()=>{},onSave:()=>{},renderSavedQueryButtons:()=>null,renderQueryLibraryEditingHeader:()=>null,queryLibraryEnabled:!1,context:"unknown",triggerAnalyticsEvent:()=>{},onSelectQuery:()=>{}});function s(){return(0,n.useContext)(a)}},98869:(ne,A,e)=>{"use strict";e.d(A,{AK:()=>r,Aj:()=>o,C3:()=>g,pg:()=>h,sh:()=>a,xB:()=>f,zx:()=>l});var n=e(22803);const a=14,s=12,l=500,r=8,c=2,i=1.5,o=c+r*2+a*i,h=o+s*i,f=o*8.5,g=u=>({menuClosed:(0,n.css)({display:"none"}),menu:(0,n.css)({label:"combobox-menu",background:u.components.dropdown.background,boxShadow:u.shadows.z3,zIndex:u.zIndex.dropdown,position:"relative",borderRadius:u.shape.radius.default,overflow:"hidden"}),menuUlContainer:(0,n.css)({label:"combobox-menu-ul-container",listStyle:"none"}),listItem:(0,n.css)({label:"list-item",position:"absolute",width:"100%"}),optionGroupHeader:(0,n.css)({label:"combobox-new-option-group",borderTop:`1px solid ${u.colors.border.weak}`}),optionFirstGroupHeader:(0,n.css)({borderTop:"none"}),optionGroupLabel:(0,n.css)({textOverflow:"ellipsis",overflow:"hidden",letterSpacing:0,color:u.colors.text.secondary,fontSize:u.typography.bodySmall.fontSize,fontWeight:u.typography.fontWeightLight,padding:r}),option:(0,n.css)({label:"combobox-option",position:"relative",display:"flex",width:"100%",gap:u.spacing(1),alignItems:"center",padding:r,marginBottom:c,borderRadius:u.shape.radius.default,fontWeight:u.typography.fontWeightMedium,whiteSpace:"nowrap",overflow:"hidden",cursor:"pointer","&:hover":{background:u.colors.action.hover,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${u.colors.primary.border}`}}}),optionAccessory:(0,n.css)({label:"combobox-option-accessory",height:a*i}),optionBody:(0,n.css)({label:"combobox-option-body",display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"}),optionLabel:(0,n.css)({label:"combobox-option-label",fontSize:a,fontWeight:l,lineHeight:i,letterSpacing:0,textOverflow:"ellipsis",overflow:"hidden"}),optionDescription:(0,n.css)({label:"combobox-option-description",color:u.colors.text.secondary,fontSize:s,fontWeight:u.typography.fontWeightRegular,lineHeight:i,letterSpacing:0,textOverflow:"ellipsis",overflow:"hidden"}),optionFocused:(0,n.css)({label:"combobox-option-focused",background:u.colors.action.focus,"@media (forced-colors: active), (prefers-contrast: more)":{border:`1px solid ${u.colors.primary.border}`}}),optionSelected:(0,n.css)({background:u.colors.action.selected,"&::before":{backgroundImage:u.colors.gradients.brandVertical,borderRadius:u.shape.radius.default,content:'" "',display:"block",height:"100%",position:"absolute",width:u.spacing(.5),left:0,top:0}}),optionInfo:(0,n.css)({label:"combobox-option-info",color:u.colors.text.disabled,cursor:"not-allowed",pointerEvents:"none","&:hover":{background:"transparent"}}),clear:(0,n.css)({label:"combobox-clear",cursor:"pointer",pointerEvents:"auto","&:hover":{color:u.colors.text.primary}}),input:(0,n.css)({label:"combobox-input","> div > div:last-child":{pointerEvents:"none"},"& input":{cursor:"pointer"},"& input:focus":{cursor:"text"}}),adaptToParent:(0,n.css)({label:"combobox-adapt-to-parent",maxWidth:"100%",'[class*="input-wrapper-combobox-input"]':{maxWidth:"100%"}})})},98970:(ne,A,e)=>{"use strict";e.d(A,{Si:()=>S,yn:()=>P,VQ:()=>T,u$:()=>C,iy:()=>K,Fv:()=>O,HP:()=>B});var n=e(29189),a=e(96540),s=e(32899),l=e(92745),r=e(43173),c=e(75234),i=e(64762),o=e(15203),h=e(77197),f=e(75735),g=e(27044),u=e(44220),E=e(99090),v=e(42361),p=e(52763),m=e(94659),y=e(90297);const d={kind:"Folder",apiVersion:"folder.grafana.app/v1beta1",metadata:{name:"general",uid:"DvhY6m059FraHn96xsOKsb8GRtHy2ftVDUPkqZTzP4kX",resourceVersion:"-62135596800000",creationTimestamp:void 0,annotations:{"grafana.app/updatedTimestamp":"0001-01-01T00:00:00Z"}},spec:{title:"Dashboards",description:""},status:{}},x={kind:"Folder",apiVersion:"folder.grafana.app/v1beta1",metadata:{name:"sharedwithme",uid:"DlDSzXw31VwXu6LHMw0JMoFvfVtYzyf3NEPzsOXHtxQX",resourceVersion:"-62135596800000",creationTimestamp:void 0,annotations:{"grafana.app/updatedTimestamp":"0001-01-01T00:00:00Z"}},spec:{title:"Shared with me",description:"Dashboards and folders shared with me"},status:{}};var b=e(87161);function D(M,L){const N=h.A.slugifyForUrl(L);return`${r.$.appSubUrl}/dashboards/f/${M}/${N}`}function C(M){const L=!!r.$.featureToggles.foldersAppPlatformAPI,N=M&&[E.TF,r.$.sharedWithMeFolderUID].includes(M),W=M?{name:M}:n.hT,R=(0,o.kH)(M||n.hT);let G=(0,b.kH)(L&&!N?W:n.hT);const w=(0,b.Xq)(L?W:n.hT),[_,Q]=(0,m.qH)(),ae=(0,a.useMemo)(()=>{const k=I(G);return!N&&!!k.length},[N,G]);if((0,a.useEffect)(()=>{const k=I(G);ae&&k.length&&_({key:k},!0)},[ae,G,_]),!L)return R;N&&(G={...G,status:n.RE.fulfilled,fulfilledTimeStamp:Date.now(),isUninitialized:!1,error:void 0,isError:!1,isSuccess:!0,isLoading:!1,isFetching:!1,data:E.TF===M?d:x,currentData:E.TF===M?d:x});let q;if(G.data&&w.data&&R.data&&(!ae||Q.data)){const k=G.data.metadata.annotations?.[f.Qu],ee=G.data.metadata.annotations?.[f.hc],j=V(G.data);q={canAdmin:R.data.canAdmin,canDelete:R.data.canDelete,canEdit:R.data.canEdit,canSave:R.data.canSave,accessControl:R.data.accessControl,createdBy:ee&&Q.data?.display[Q.data?.keys.indexOf(ee)]?.displayName||"Anonymous",updatedBy:k&&Q.data?.display[Q.data?.keys.indexOf(k)]?.displayName||"Anonymous",...j},w.data.items?.length&&(q.parents=w.data.items.filter(J=>J.name!==G.data.metadata.name).map(J=>({title:J.title,uid:J.name,url:D(J.name,J.title)})))}return{...G,...F(G,w,R,Q,ae),refetch:async()=>Promise.all([G.refetch(),w.refetch(),R.refetch()]),data:q}}function P(){const[M]=(0,b.Ko)(),[L]=(0,o.Ko)(),N=U(),W=(0,i._2)();return async R=>{if(r.$.featureToggles.foldersAppPlatformAPI){const G=await M({name:R.uid});return G.error||(N({childrenOf:R.parentUid}),W.success((0,l.t)("folders.api.folder-deleted-success","Folder deleted"))),G}else return L(R)}}function T(){const[M]=(0,o.h5)(),[L]=(0,b.Ko)(),N=(0,p.wA)(),W=U();return r.$.featureToggles.foldersAppPlatformAPI?async function({folderUIDs:G}){const w=(0,l.t)("folders.api.folder-deleted-success","Folder deleted");for(const _ of G)await(0,y.x)(N,_)||(await L({name:_})).error||(0,c.J7)().publish({type:s.r1.alertSuccess.name,payload:[w]});return W({parentsOf:G}),{data:void 0}}:M}function O(){const M=(0,o.tk)(),[L,N]=(0,b.af)(),W=(0,p.wA)(),R=U();if(!r.$.featureToggles.foldersAppPlatformAPI)return M;async function G({folderUIDs:w,destinationUID:_}){const Q=(0,l.t)("folders.api.folder-move-error-provisioned","Cannot move provisioned folder. To move it, move it in the repository and synchronise to apply the changes."),ae=(0,l.t)("folders.api.folder-moved-success","Folder moved");for(const q of w)await(0,y.x)(W,q,{warning:Q})||(await L({name:q,patch:{metadata:{annotations:{[f.ew]:_}}}})).error||(0,c.J7)().publish({type:s.r1.alertSuccess.name,payload:[ae]});return R({childrenOf:_,parentsOf:w}),{data:void 0}}return[G,N]}function S(){const[M,L]=(0,b.P8)(),N=(0,o.Vc)(),W=U();return r.$.featureToggles.foldersAppPlatformAPI?[async G=>{const w={folder:{spec:{title:G.title},metadata:{generateName:"f",annotations:{...G.parentUid&&{[f.ew]:G.parentUid}}},status:{}}},_=await M(w);return W({childrenOf:G.parentUid}),v.v.clear(),{..._,data:_.data?V(_.data):void 0}},L]:N}function B(){const[M,L]=(0,b.n4)(),N=(0,o.iB)(),W=U();return r.$.featureToggles.foldersAppPlatformAPI?[async G=>{const w={name:G.uid,folder:{spec:{title:G.title},metadata:{name:G.uid},status:{}}},_=await M(w);return W({childrenOf:G.parentUid}),{..._,data:_.data?V(_.data):void 0}},L]:N}function K(){const[M,L]=(0,b.af)(),N=(0,o.aF)(),W=U(),R=(0,i._2)();if(!r.$.featureToggles.foldersAppPlatformAPI)return N;async function G({folderUID:w,destinationUID:_}){const Q=await M({name:w,patch:{metadata:{annotations:{[f.ew]:_}}}});return Q.error||(W({parentsOf:[w],childrenOf:_}),R.success((0,l.t)("folders.api.folder-moved-success","Folder moved"))),Q}return[G,L]}function U(){const M=(0,p.wA)();return L=>{L.parentsOf&&M((0,u.Zw)(L.parentsOf)),(L.childrenOf||"childrenOf"in L)&&M((0,u.bw)({parentUID:L.childrenOf,pageSize:g.md}))}}function F(M,L,N,W,R){const G=R?[M,L,N,W]:[M,L,N];return{isLoading:G.some(w=>w.isLoading),isFetching:G.some(w=>w.isFetching),isSuccess:G.every(w=>w.isSuccess),isError:G.some(w=>w.isError),error:G.find(w=>w.error)}}function I(M){return M.data?[M.data.metadata.annotations?.[f.Qu],M.data.metadata.annotations?.[f.hc]].filter(L=>L!==void 0):[]}const V=M=>{const{annotations:L,name:N="",creationTimestamp:W,generation:R,labels:G}=M.metadata,{title:w=""}=M.spec;return{id:parseInt(G?.[f.Y5]||"0",10)||0,uid:N,title:w,url:N===E.TF?"":D(N,w),created:W||"0001-01-01T00:00:00Z",updated:L?.[f.xU]||"0001-01-01T00:00:00Z",managedBy:L?.[f.LH],parentUid:L?.[f.ew],version:R||1,hasAcl:!1}}},99090:(ne,A,e)=>{"use strict";e.d(A,{G3:()=>c,TF:()=>h,XJ:()=>v,YU:()=>u,d7:()=>g,if:()=>p,r4:()=>r,w7:()=>E});var n=e(83458);const a=null,s=58,l=8,r={label:"A\u2013Z",value:"alpha-asc"},c="search.sections",i="grafana.search.expanded-folder",o=0,h="general",f="Dashboards",g="grafana.search.include.panels",u="grafana.search.layout",E="grafana.search.sort",v={dashboard:n.G.DashDB,folder:n.G.DashFolder,home:n.G.DashHome},p=1e3},99305:(ne,A,e)=>{"use strict";e.d(A,{AX:()=>b,Lz:()=>m,ML:()=>v,Nz:()=>p,QT:()=>P,SY:()=>g,Wz:()=>C,iP:()=>d,jX:()=>S,q$:()=>x,q4:()=>O,qD:()=>B,sN:()=>T,t4:()=>u,u7:()=>y,wJ:()=>E});var n=e(2543),a=e.n(n),s=e(7389),l=e(2863),r=e(62635),c=e(8535),i=e(54742),o=e(8921),h=e(93612),f=e(88813);const g=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,u=U=>(g.lastIndex=0,g.exec(U));function E(...U){const F=U[U.length-1];U[0]=typeof U[0]=="string"?U[0]:(0,r.MA)(U[0]);const V=U.slice(0,-1).join(" ").match(g);return!!(V!==null?V.find(L=>{const N=u(L);return N!==null&&N.indexOf(F)>-1}):!1)}const v=U=>{if(!U||!U.current)return!1;if(U.current.value){const F=Array.isArray(U.current.value);if(F&&U.current.value.length&&U.current.value[0]===o.To||!F&&U.current.value===o.To)return!0}if(U.current.text){const F=Array.isArray(U.current.text);if(F&&U.current.text.length&&U.current.text[0]===o.Zm||!F&&U.current.text===o.Zm)return!0}return!1},p=U=>!U||!U.current||!U.current.text?"":Array.isArray(U.current.text)?U.current.text.toString():typeof U.current.text!="string"?"":U.current.text,m=U=>!U||!U.current||U.current.value===void 0||U.current.value===null?null:Array.isArray(U.current.value)?U.current.value.toString():typeof U.current.value!="string"?null:U.current.value;function y(U,F=(0,l.w)()){return!U||!U.regex?"":F.replace(U.regex,{},"regex")}function d(U,F,I,V){const M={range:void 0,variable:U,searchFilter:F,scopedVars:V};return(U.refresh===s.CO.onTimeRangeChanged||U.refresh===s.CO.onDashboardLoad)&&(M.range=I.timeRange()),M}function x(U){return U?.type==="custom"?s.CO.onDashboardLoad:!U||!("refresh"in U)||U.refresh!==s.CO.onTimeRangeChanged&&U.refresh!==s.CO.onDashboardLoad?s.CO.never:U.refresh}function b(){return i.B.list().filter(U=>U.id!=="system").map(({id:U,name:F,description:I})=>({label:F,value:U,description:I}))}function D(U){return(0,n.isArray)(U)&&(U.length===0?U=void 0:U.length===1&&(U=U[0])),U}function C(U,F){let I=0;const V={};for(const M in U){if(!M.startsWith(o.qz))continue;let L=D(F[M]),N=D(U[M]);(0,n.isEqual)(N,L)||(V[M]={value:U[M]},I++)}for(const M in F){if(!M.startsWith(o.qz))continue;const L=F[M];(0,n.isArray)(L)&&L.length===0||U.hasOwnProperty(M)||(V[M]={value:"",removed:!0},I++)}return I?V:void 0}function P(U){return Array.isArray(U)?U.map(String):U==null?"":typeof U=="number"?U.toString(10):typeof U=="string"?U:typeof U=="boolean"?U.toString():""}function T(U,F=(0,c.Gu)()){return(0,h.nx)(U,F).transaction.status!==f.x8.NotStarted}function O(U){return String(U)}const S=U=>{if(!U.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${U.id}`);return{type:U.type,id:U.id,rootStateKey:U.rootStateKey}};function B(U,F){return{type:U.type,id:U.id,data:F}}function K(){const U=getTemplateSrv().getVariables(),F=locationService.getSearchObject();return Object.keys(F).filter(I=>I.indexOf(VARIABLE_PREFIX)!==-1&&U.some(V=>V.name===I.replace(VARIABLE_PREFIX,""))).reduce((I,V)=>{const M=V.replace(VARIABLE_PREFIX,"");return I[M]=F[V],I},{})}},99392:(ne,A,e)=>{"use strict";e.d(A,{O:()=>a});var n=e(45863);function a(s){const l=[];for(const r of s){if(!(r instanceof n.tV.g))continue;const c={...r.state.query,enable:!!r.state.isEnabled,hide:!!r.state.isHidden};l.push(c)}return l}},99555:(ne,A,e)=>{"use strict";e.d(A,{P:()=>s,t:()=>l});var n=e(92745),a=e(739);const s=()=>({drawStyle:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.draw-style.label-lines","Lines"),value:a.GR.Line},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.draw-style.label-bars","Bars"),value:a.GR.Bars},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.draw-style.label-points","Points"),value:a.GR.Points}],lineInterpolation:[{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.line-interpolation.description-linear","Linear"),value:a.dx.Linear,icon:"gf-interpolation-linear"},{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.line-interpolation.description-smooth","Smooth"),value:a.dx.Smooth,icon:"gf-interpolation-smooth"},{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.line-interpolation.description-step-before","Step before"),value:a.dx.StepBefore,icon:"gf-interpolation-step-before"},{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.line-interpolation.description-step-after","Step after"),value:a.dx.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.bar-alignment.description-before","Before"),value:a.Nj.Before,icon:"gf-bar-alignment-before"},{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.bar-alignment.description-center","Center"),value:a.Nj.Center,icon:"gf-bar-alignment-center"},{description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.bar-alignment.description-after","After"),value:a.Nj.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.show-points.label-auto","Auto"),value:a.yL.Auto,description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.show-points.description-auto","Show points when the density is low")},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.show-points.label-always","Always"),value:a.yL.Always},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.show-points.label-never","Never"),value:a.yL.Never}],axisPlacement:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.axis-placement.label-auto","Auto"),value:a.vM.Auto,description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.axis-placement.description-auto","First field on the left, everything else on the right")},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.axis-placement.label-left","Left"),value:a.vM.Left},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.axis-placement.label-right","Right"),value:a.vM.Right},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.axis-placement.label-hidden","Hidden"),value:a.vM.Hidden}],fillGradient:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.label-none","None"),value:a.on.None},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.label-opacity","Opacity"),value:a.on.Opacity,description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.description-opacity","Enable fill opacity gradient")},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.label-hue","Hue"),value:a.on.Hue,description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.description-hue","Small color hue gradient")},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.label-scheme","Scheme"),value:a.on.Scheme,description:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.fill-gradient.description-scheme","Use color scheme to define gradient")}],stacking:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.stacking.label-off","Off"),value:a.gs.None},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.stacking.label-normal","Normal"),value:a.gs.Normal},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.stacking.label-100","100%"),value:a.gs.Percent}],thresholdsDisplayModes:[{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-off","Off"),value:a.Ly.Off},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-lines","As lines"),value:a.Ly.Line},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-dashed-lines","As lines (dashed)"),value:a.Ly.Dashed},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-filled-regions","As filled regions"),value:a.Ly.Area},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-filled-regions-and-lines","As filled regions and lines"),value:a.Ly.LineAndArea},{label:(0,n.t)("grafana-ui.u-plot.config.get-graph-field-options.thresholds-display-mode.label-filled-regions-and-dashed-lines","As filled regions and lines (dashed)"),value:a.Ly.DashedAndArea}]}),l=s()},99584:(ne,A,e)=>{"use strict";e.d(A,{Q:()=>m});var n=e(74848),a=e(96540),s=e(68125),l=e(51898),r=e(92745),c=e(30048),i=e(43173),o=e(50992),h=e(34999),f=e(31286),g=e(37386),u=e(21285),E=e(76792),v=e(69076),p=e(32442);function m({datasource:y,infoText:d,allowCustomValue:x,onDataSourceChange:b,onDefaultKeysChange:D,onAllowCustomValueChange:C,defaultKeys:P,inline:T,datasourceSupported:O}){const S=(0,a.useCallback)(B=>{const K=(0,s.Jh)(`key,value
`+B)[0],U=[];for(let F=0;F<K.length;F++)U.push({text:K.fields[0].values[F],value:K.fields[1].values[F]});D?.(U)},[D]);return(0,n.jsxs)(n.Fragment,{children:[!T&&(0,n.jsx)(p.Y,{children:(0,n.jsx)(r.x6,{i18nKey:"dashboard-scene.ad-hoc-variable-form.adhoc-options",children:"Ad-hoc options"})}),(0,n.jsx)(f.a,{marginBottom:2,children:(0,n.jsx)(c.c,{label:(0,r.t)("dashboard-scene.ad-hoc-variable-form.label-data-source","Data source"),htmlFor:"data-source-picker",tooltip:d,children:(0,n.jsx)(E.sk,{current:y,onChange:b,width:30,variables:!0,dashboard:i.$.featureToggles.dashboardDsAdHocFiltering,noDefault:!0})})}),O===!1?(0,n.jsx)(h.F,{title:(0,r.t)("dashboard-scene.ad-hoc-variable-form.alert-not-supported","This data source does not support ad hoc filters"),severity:"warning","data-testid":l.Tp.pages.Dashboard.Settings.Variables.Edit.AdHocFiltersVariable.infoText}):null,O&&D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.D,{label:(0,r.t)("dashboard-scene.ad-hoc-variable-form.label-use-static-key-dimensions","Use static key dimensions"),description:(0,r.t)("dashboard-scene.ad-hoc-variable-form.description-provide-dimensions-as-csv-dimension-name-dimension-id","Provide dimensions as CSV: {{name}}, {{value}}",{name:"dimensionName",value:"dimensionId"}),children:(0,n.jsx)(u.d,{"data-testid":l.Tp.pages.Dashboard.Settings.Variables.Edit.AdHocFiltersVariable.modeToggle,value:P!==void 0,onChange:B=>{D(P===void 0?[]:void 0)}})}),P!==void 0&&(0,n.jsx)(o.B,{height:300,language:"csv",value:P.map(B=>`${B.text},${B.value}`).join(`
`),onBlur:S,onSave:S,showMiniMap:!1,showLineNumbers:!0})]}),O&&C&&(0,n.jsx)(v.c,{value:x??!0,name:(0,r.t)("dashboard-scene.ad-hoc-variable-form.name-allow-custom-values","Allow custom values"),description:(0,r.t)("dashboard-scene.ad-hoc-variable-form.description-enables-users-custom-values","Enables users to add custom values to the list"),onChange:C,testId:l.Tp.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsAllowCustomValueSwitch})]})}},99598:(ne,A,e)=>{"use strict";e.d(A,{jR:()=>B,Fu:()=>D,$z:()=>h,O$:()=>C,ho:()=>K,MO:()=>b,an:()=>P,U9:()=>x,fx:()=>O,qh:()=>S,S8:()=>T});var n=e(84139),a=e(65307),s=e(2543),l=e(94452);const r=(U,...F)=>F.reduce((I,V)=>V(I),U);var c=e(8921),i=e(67933);const o=/[^ -~]/m,h={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},f=1e3,g=new n.A({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),u=U=>Array.isArray(U)?U.reduce((F,I)=>((0,s.isString)(I.value)&&(F[I.value]=I),F),{}):{},E=U=>{if(!Array.isArray(U.options))return U.options=[],U;const F=u(U.selectedValues);return U.selectedValues=Object.values(F),U.options=U.options.map(I=>{if(!(0,s.isString)(I.value))return I;const V=!!F[I.value];return I.selected===V?I:{...I,selected:V}}),U.options=v(U.options),U},v=U=>Array.isArray(U)?U.length<=f?U:U.slice(0,f):[],p=U=>{const{options:F,selectedValues:I}=U;return F.length===0||I.length>0||!F[0]||F[0].value!==c.To||(U.selectedValues=[{...F[0],selected:!0}]),U},m=U=>{const{selectedValues:F}=U;return F.length>1&&(U.selectedValues=F.filter(I=>I.value!==c.To)),U},y=U=>U.filter(F=>F.value!==c.To).map(F=>({...F,selected:!0})),d=(0,a.Z0)({name:"templating/optionsPicker",initialState:h,reducers:{showOptions:(U,F)=>{const{query:I,options:V}=F.payload;if(U.highlightIndex=-1,U.options=(0,s.cloneDeep)(V),U.id=F.payload.id,U.queryValue="",U.multi=!1,(0,i.iv)(F.payload)&&(U.multi=F.payload.multi??!1),(0,i.P4)(F.payload)){const{queryValue:M}=F.payload,L=(0,l.E)(I);U.queryValue=L&&M?M:""}return U.selectedValues=U.options.filter(M=>M.selected),r(U,p,E)},hideOptions:(U,F)=>({...h}),toggleOption:(U,F)=>{const{option:I,clearOthers:V,forceSelect:M}=F.payload,{multi:L,selectedValues:N}=U;if(I){const W=!N.find(R=>R.value===I.value&&R.text===I.text);if(I.value===c.To||!L||V)return W||M?U.selectedValues=[{...I,selected:!0}]:U.selectedValues=[],r(U,p,m,E);if(M||W)return U.selectedValues.push({...I,selected:!0}),r(U,p,m,E);U.selectedValues=N.filter(R=>R.value!==I.value&&R.text!==I.text)}else U.selectedValues=[];return r(U,p,m,E)},moveOptionsHighlight:(U,F)=>{let I=U.highlightIndex+F.payload;return I<0?I=-1:I>=U.options.length&&(I=U.options.length-1),{...U,highlightIndex:I}},toggleAllOptions:(U,F)=>{const I=U.selectedValues.find(M=>M.value===c.To),V=U.options.find(M=>M.value===c.To);return U.selectedValues.length>0&&V&&!I?(U.selectedValues=[],U.selectedValues.push({text:V.text??"All",value:V.value,selected:!0}),r(U,E)):I&&U.selectedValues.length===1?(U.selectedValues=y(U.options),r(U,E)):U.selectedValues.length>0&&!V?(U.selectedValues=[],r(U,E)):(U.selectedValues=y(U.options),r(U,E))},updateSearchQuery:(U,F)=>(U.queryValue=F.payload,U),updateOptionsAndFilter:(U,F)=>{const I=U.queryValue.trim();let V=[];if(I==="")V=F.payload;else if(o.test(I))V=F.payload.filter(M=>M.text.includes(I));else{const M=F.payload.map(({text:R})=>Array.isArray(R)?R.toString():R),[L,N,W]=g.search(M,I,5);L?.length&&(N&&W?V=W.map(R=>F.payload[N.idx[R]]):V=L.map(R=>F.payload[R]),V.sort((R,G)=>(R.value===c.To?-1:0)-(G.value===c.To?-1:0)))}if(U.highlightIndex=0,I!==""){let M=V.findIndex(L=>L.value!==c.To);(M===-1||V[M].value!==I)&&(V.unshift({selected:!1,text:"> "+I,value:I}),U.highlightIndex=M===-1?0:M+1)}return U.options=V,r(U,p,E)},updateOptionsFromSearch:(U,F)=>(U.options=F.payload,U.highlightIndex=0,r(U,p,E)),cleanPickerState:()=>h}}),{toggleOption:x,showOptions:b,hideOptions:D,moveOptionsHighlight:C,toggleAllOptions:P,updateSearchQuery:T,updateOptionsAndFilter:O,updateOptionsFromSearch:S,cleanPickerState:B}=d.actions,K=d.reducer},99703:(ne,A,e)=>{"use strict";e.d(A,{WT:()=>a,bX:()=>r,t4:()=>l});var n=e(65307);const a={usages:[],usagesNetwork:[]},s=(0,n.Z0)({name:"templating/inspect",initialState:a,reducers:{initInspect:(c,i)=>{const{usages:o,usagesNetwork:h}=i.payload;c.usages=o,c.usagesNetwork=h}}}),l=s.reducer,{initInspect:r}=s.actions},99709:(ne,A,e)=>{"use strict";e.d(A,{D:()=>l});var n=e(74848),a=e(96540),s=e(18857);const l=({item:r,value:c,onChange:i,id:o})=>{const h=(0,a.useCallback)(f=>{i({mode:f.value})},[i]);return(0,n.jsx)(s.l6,{inputId:o,value:c.mode,options:r.settings?.options??[],onChange:h})}},99828:(ne,A,e)=>{"use strict";e.d(A,{L:()=>u,P:()=>g});var n=e(92138),a=e(92745),s=e(83873),l=e(47797),r=e(77197),c=e(54115),i=e(75735),o=e(52043),h=e(95407),f=e(60171);const g={group:"dashboard.grafana.app",version:"v2beta1",resource:"dashboards"};class u{constructor(){this.client=new c.ws(g)}async getDashboardDTO(v){try{const p=await this.client.subresource(v,"dto");if(!(0,f.aK)(p.spec)&&p.status?.conversion?.failed&&(p.status.conversion.storedVersion==="v1alpha1"||p.status.conversion.storedVersion==="v1beta1"||p.status.conversion.storedVersion==="v0alpha1"))throw new h.P(p.status.conversion.storedVersion,p.status.conversion.error);if(p.metadata.annotations&&p.metadata.annotations[i.ew])try{const m=await s.IB.getFolderByUid(p.metadata.annotations[i.ew]);p.metadata.annotations[i.w2]=m.title,p.metadata.annotations[i.D1]=m.url}catch(m){if((0,l.do)(m)!==403)throw new Error("Failed to load folder")}else p.metadata.annotations&&!p.metadata.annotations[i.ew]&&(p.metadata.annotations[i.ew]="");return p.access?.slug||(p.access=p.access??{},p.access.slug=r.A.slugifyForUrl(p.spec.title.trim())),p}catch(p){const m=(0,l.do)(p);throw(0,l.q6)(p).includes("not found")&&m!==404&&(p.status=404,p.data.message="Dashboard not found"),p}}deleteDashboard(v,p){return this.client.delete(v,p).then(m=>({id:0,message:m.message,title:(0,a.t)("dashboard.k8s-dashboard-v2api.title.deleted","deleted")}))}async saveDashboard(v){const p=v.dashboard,m={metadata:{...v?.k8s},spec:{...p}};return v.message?m.metadata.annotations={...m.metadata.annotations,[i.fY]:v.message}:m.metadata.annotations&&delete m.metadata.annotations[i.fY],v.folderUid&&(delete m.metadata.annotations?.[i.w2],delete m.metadata.annotations?.[i.D1],m.metadata.annotations={...m.metadata.annotations,[i.ew]:v.folderUid}),m.metadata.name?(delete m.metadata.resourceVersion,this.client.update(m).then(y=>this.asSaveDashboardResponseDTO(y))):(m.metadata.annotations={...m.metadata.annotations,[i.AI]:"default"},await this.client.create(m).then(y=>this.asSaveDashboardResponseDTO(y)))}asSaveDashboardResponseDTO(v){const p=r.A.slugifyForUrl(v.spec.title.trim()),m=n.I.assureBaseUrl((0,o.u)({uid:v.metadata.name,currentQueryParams:"",slug:p}));let y=0;return v.metadata.labels?.[i.Y5]&&(y=parseInt(v.metadata.labels[i.Y5],10)),{uid:v.metadata.name,version:v.metadata.generation??0,id:y,status:"success",url:m,slug:p}}listDeletedDashboards(v){return this.client.list({...v,labelSelector:"grafana.app/get-trash=true"})}restoreDashboard(v){return v.metadata.resourceVersion="",this.client.create(v)}}},99885:(ne,A,e)=>{"use strict";e.d(A,{X:()=>f});var n=e(84139),a=e(8934);const s=/[^ -~]/m,l=/^[\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]+$/m,r=5,c=25,i=5,o=1e4,h=new n.A({intraMode:1});function f(g,u){if(u==="")return g.map((E,v)=>v);if(s.test(u)||l.test(u)||u.length>c||h.split(u).length>i){const E=new RegExp((0,a.$f)(u),"i"),v=[];for(let p=0;p<g.length;p++){let m=g[p];E.test(m)&&v.push(p)}return v}else{const[E,v,p]=h.search(g,u,r,o);if(E?.length)return v&&p?p.map(m=>v.idx[m]):E}return[]}},99887:(ne,A,e)=>{"use strict";e.d(A,{E:()=>u});var n=e(74848),a=e(22803),s=e(96540),l=e(70255),r=e(84140),c=e(63142),i=e(21348),o=e(30703),h=e(45967);const f=s.memo(({icon:p,color:m,text:y,tooltip:d,className:x,...b})=>{const D=(0,c.of)(v,m),C=(0,n.jsxs)("div",{className:(0,a.cx)(D.wrapper,x),...b,children:[p&&(0,n.jsx)(o.I,{name:p,size:"sm"}),y]});return d?(0,n.jsx)(h.m,{content:d,placement:"auto",children:C}):C});f.displayName="Badge";const g=({rootProps:p})=>{const m=(0,c.of)(E);return(0,n.jsx)(l.A,{width:60,height:22,containerClassName:m.container,...p})},u=(0,i.j)(f,g),E=()=>({container:(0,a.css)({lineHeight:1})}),v=(p,m)=>{let y=p.visualization.getColorByName(m),d="",x="",b="";return p.isDark?(x=(0,r.A)(y).setAlpha(.15).toString(),d=(0,r.A)(y).setAlpha(.25).toString(),b=(0,r.A)(y).lighten(15).toString()):(x=(0,r.A)(y).setAlpha(.15).toString(),d=(0,r.A)(y).setAlpha(.25).toString(),b=(0,r.A)(y).darken(20).toString()),m==="brand"&&(x=p.colors.gradients.brandHorizontal,d="transparent",b=p.colors.primary.contrastText),{wrapper:(0,a.css)({display:"inline-flex",padding:"1px 4px",borderRadius:p.shape.radius.default,background:x,border:`1px solid ${d}`,color:b,fontWeight:p.typography.fontWeightRegular,gap:p.spacing(.5),fontSize:p.typography.bodySmall.fontSize,lineHeight:p.typography.bodySmall.lineHeight,alignItems:"center"})}}},99949:(ne,A,e)=>{"use strict";e.d(A,{Z:()=>R});var n=e(74848),a=e(92745),s=e(36490),l=e(43173),r=e(45863),c=e(52792),i=e(22787),o=e(13941),h=e(73427),f=e(24313),g=e(11257),u=e(58662),E=e(23289),v=e(8285),p=e(56445),m=e(89752),y=e(8655),d=e(42656),x=e(51155),b=e(62905),D=e(82298),C=e(22803),P=e(63142),T=e(72973),O=e(71599);class S extends r.Bs{static{this.Component=B}constructor(_){super({confirmVariant:"destructive",dismissText:"Cancel",dismissVariant:"secondary",icon:"exclamation-triangle",confirmButtonVariant:"destructive",..._})}onDismiss(){}}function B({model:w}){const _=w.useState();return(0,n.jsx)(O.u,{..._})}var K=e(71748);function U({model:w,publicDashboard:_,isGetLoading:Q}){const ae=(0,P.of)(F),q=h.TP.hasPermission(g.w.DashboardsPublicWrite),k=(0,v.YQ)(w),{isDirty:ee}=k.useState(),[j]=(0,b.bN)(),J=(k.state.$variables?.state.variables.length??0)>0,Z=(0,K.b)(k),se=r.jh.getTimeRange(w).useState();return(0,n.jsx)(T.b,{dashboard:k,publicDashboard:_,unsupportedDatasources:Z,onRevoke:()=>{k.showModal(new S({isOpen:!0,title:(0,a.t)("dashboard-scene.config-public-dashboard.title.revoke-public-url","Revoke public URL"),icon:"trash-alt",confirmText:(0,a.t)("dashboard-scene.config-public-dashboard.confirmText.revoke-public-url","Revoke public URL"),body:(0,n.jsx)("p",{className:ae.description,children:(0,n.jsx)(a.x6,{i18nKey:"public-dashboard.config.revoke-body",children:"Are you sure you want to revoke this URL? The dashboard will no longer be public."})}),onDismiss:()=>{k.showModal(new R({activeTab:u.wr.publicDashboard}))},onConfirm:()=>{j({dashboard:k,dashboardUid:k.state.uid,uid:_.uid}),k.closeModal()}}))},timeRange:se.value,showSaveChangesAlert:q&&ee,hasTemplateVariables:J})}const F=w=>({description:(0,C.css)({fontSize:w.typography.body.fontSize})});var I=e(58375);function V({model:w}){const _=(0,v.YQ)(w),Q=(0,K.b)(_),ae=(_.state.$variables?.state.variables.length??0)>0;return(0,n.jsx)(I.D,{dashboard:_,unsupportedDatasources:Q,unsupportedTemplateVariables:ae})}class M extends r.Bs{constructor(){super(...arguments),this.tabId=u.wr.publicDashboard}static{this.Component=L}getTabLabel(){return(0,a.t)("share-modal.tab-title.public-dashboard","Public Dashboard")}}function L({model:w}){const{data:_,isLoading:Q}=(0,b.Bs)((0,v.YQ)(w).state.uid);return(0,n.jsx)(n.Fragment,{children:Q?(0,n.jsx)(D.a,{}):(0,f.lI)(_)?(0,n.jsx)(U,{model:w,publicDashboard:_,isGetLoading:Q}):(0,n.jsx)(V,{model:w})})}const N=[];function W(w){N.push(w)}class R extends r.Bs{constructor(_){super({activeTab:"link",..._}),this.onDismiss=()=>{this.state.panelRef?(0,v.YQ)(this).closeModal():s.Ny.partial({shareView:null})},this.onChangeTab=Q=>{E.c.sharingCategoryClicked({item:Q.value,shareResource:(0,u.hD)(this.state.panelRef)}),this.setState({activeTab:Q.value})},this.addActivationHandler(()=>this.buildTabs(_.activeTab))}static{this.Component=G}buildTabs(_){const{panelRef:Q}=this.state,ae=this.getRef(),q=[new y.R({panelRef:Q,modalRef:ae})],k=(0,v.YQ)(this);if(Q||q.push(new p.N({modalRef:ae})),h.TP.isSignedIn&&l.$.snapshotEnabled&&h.TP.hasPermission(g.w.SnapshotsCreate)&&q.push(new x.l({panelRef:Q,dashboardRef:k.getRef(),modalRef:ae})),Q){q.push(new d.c({panelRef:Q}));const j=Q.resolve();j instanceof r.Eb&&((0,v.ME)(j)||q.push(new m.S({panelRef:Q,modalRef:ae})))}Q||(q.push(...N.map(j=>new j({modalRef:ae}))),(0,f.iR)()&&q.push(new M({modalRef:ae})));const ee=q.find(j=>j.tabId===_);this.setState({activeTab:ee?.tabId??q[0].tabId,tabs:q})}}function G({model:w}){const{panelRef:_,tabs:Q,activeTab:ae}=w.useState(),q=_?(0,a.t)("share-modal.panel.title","Share Panel"):(0,a.t)("share-modal.dashboard.title","Share");if(!Q)return;const k=Q?.map(J=>({label:J.getTabLabel(),value:J.tabId})),ee=(0,n.jsx)(c.J,{title:q,icon:"share-alt",tabs:k,activeTab:ae,onChangeTab:w.onChangeTab}),j=Q.find(J=>J.tabId===ae);return(0,n.jsx)(i.a,{isOpen:!0,title:ee,onDismiss:w.onDismiss,children:(0,n.jsx)(o.J,{children:j&&(0,n.jsx)(j.Component,{model:j})})})}}}]);

//# sourceMappingURL=9414.f776a554b2e64f6ceae0.js.map